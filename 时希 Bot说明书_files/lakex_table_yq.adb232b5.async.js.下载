/*! For license information please see lakex_table_yq.adb232b5.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{3980:function(e,t,n){},3981:function(e,t,n){"use strict";n.r(t),function(e,r){n.d(t,"ActiveTableServiceToken",(function(){return aie})),n.d(t,"CommandService",(function(){return uA})),n.d(t,"CommentContribution",(function(){return yze})),n.d(t,"ConfigurationToken",(function(){return R_})),n.d(t,"ContentEditorContribution",(function(){return Q$e})),n.d(t,"ContentViewerContribution",(function(){return eze})),n.d(t,"FIELD_TYPE",(function(){return bC})),n.d(t,"FIELD_TYPE_CONFIGS",(function(){return CC})),n.d(t,"FULL_SCREEN_STATUS",(function(){return aze})),n.d(t,"FullScreenService",(function(){return sze})),n.d(t,"FullWidthService",(function(){return gze})),n.d(t,"ILogData",(function(){return mze})),n.d(t,"ModalServiceToken",(function(){return Kse})),n.d(t,"ROW_HEIGHT",(function(){return DC})),n.d(t,"ReadService",(function(){return MI})),n.d(t,"RenderContextService",(function(){return cie})),n.d(t,"SearchService",(function(){return oEe})),n.d(t,"SelectionService",(function(){return fye})),n.d(t,"VIEW_TYPE",(function(){return BC})),n.d(t,"ViewerCalendarScrollService",(function(){return dje})),n.d(t,"ViewerCardScrollService",(function(){return gSe})),n.d(t,"ViewerGridScrollService",(function(){return Jye})),n.d(t,"ViewerKanbanScrollService",(function(){return axe})),n.d(t,"WIDTH_MODE",(function(){return dze})),n.d(t,"createDocCardEditor",(function(){return U0e})),n.d(t,"createDocCardEditorH5",(function(){return Q0e})),n.d(t,"createForm",(function(){return P0e})),n.d(t,"createStandardEditor",(function(){return KQe})),n.d(t,"createStandardEditorH5",(function(){return d0e})),n.d(t,"createStandardReader",(function(){return t0e})),n.d(t,"isDate",(function(){return bw})),n.d(t,"isURL",(function(){return i_})),n.d(t,"uid",(function(){return fw})),n.d(t,"ymap",(function(){return E_}));n(3980);var o=n(14),i=n.n(o),a=n(0),l=n.n(a),u=n(74),c=n.n(u),s=n(13),d=n(95),f=n(356),p=n(214),h=n(60),v=n(39),g=n(10),m=n(123),y=n(176),b=n(8),w=n(294),_=n(240),k=n(22),C=n(30),E=n(562),O=n(1308),S=n(3751),x=n(36),j=n(395),I=n(104),R=n(561),A=n(263),D=n(1553),P=n(1551),M=n(1541),T=n(1550),F=n(1556),N=n(932),V=n(1408),L=n(1533),B=n(1530),$=n(1557),z=n(1707),U=n(1531),H=n(1538),q=n(1536),W=n(1555),G=n(1558),K=n(1390),Y=n(1559),X=n(1560),J=n(1561),Z=n(1562),Q=n(1563),ee=n(1564),te=n(1565),ne=n(1566),re=n(1567),oe=n(1568),ie=n(1569),ae=n(1570),le=n(1571),ue=n(1572),ce=n(1573),se=n(1574),de=n(1575),fe=n(1576),pe=n(1548),he=n(1577),ve=n(1578),ge=n(1579),me=n(1534),ye=n(1580),be=n(1581),we=n(1395),_e=n(1552),ke=n(1582),Ce=n(1583),Ee=n(1584),Oe=n(1585),Se=n(1586),xe=n(1587),je=n(1588),Ie=n(1589),Re=n(1590),Ae=n(1591),De=n(1592),Pe=n(1542),Me=n(1549),Te=n(1593),Fe=n(1594),Ne=n(1595),Ve=n(1596),Le=n(1409),Be=n(1597),$e=n(1598),ze=n(1599),Ue=n(1600),He=n(1601),qe=n(1602),We=n(1603),Ge=n(1604),Ke=n(1605),Ye=n(1606),Xe=n(1607),Je=n(1608),Ze=n(1609),Qe=n(1610),et=n(1611),tt=n(1612),nt=n(1613),rt=n(1614),ot=n(1615),it=n(1616),at=n(1617),lt=n(1618),ut=n(1619),ct=n(1620),st=n(1621),dt=n(1622),ft=n(1623),pt=n(1624),ht=n(1625),vt=n(1626),gt=n(1627),mt=n(1628),yt=n(1629),bt=n(1630),wt=n(1631),_t=n(1632),kt=n(1633),Ct=n(1634),Et=n(1635),Ot=n(1636),St=n(1637),xt=n(1638),jt=n(1639),It=n(1640),Rt=n(1641),At=n(1642),Dt=n(1387),Pt=n(1643),Mt=n(1644),Tt=n(1546),Ft=n(1547),Nt=n(1539),Vt=n(1645),Lt=n(1646),Bt=n(1647),$t=n(1648),zt=n(1649),Ut=n(1650),Ht=n(1651),qt=n(1652),Wt=n(1653),Gt=n(1654),Kt=n(1655),Yt=n(1656),Xt=n(1657),Jt=n(1658),Zt=n(1659),Qt=n(1660),en=n(1661),tn=n(1662),nn=n(1663),rn=n(1664),on=n(1665),an=n(1666),ln=n(1667),un=n(1543),cn=n(1668),sn=n(1669),dn=n(1077),fn=n(3775),pn=n.n(fn),hn=n(954),vn=n.n(hn),gn=n(861),mn=n.n(gn),yn=n(3798),bn=n.n(yn),wn=(n(331),n(97)),_n=n.n(wn),kn=n(416),Cn=n.n(kn),En=n(4086),On=n.n(En),Sn=n(238),xn=n.n(Sn),jn=n(255),In=n(3732);const Rn=typeof e<"u"?e:typeof self<"u"?self:typeof window<"u"?window:{};var An,Dn,Pn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof e<"u"?e:typeof self<"u"?self:{},Mn={exports:{}},Tn=Mn.exports={};function Fn(){throw new Error("setTimeout has not been defined")}function Nn(){throw new Error("clearTimeout has not been defined")}function Vn(e){if(An===setTimeout)return setTimeout(e,0);if((An===Fn||!An)&&setTimeout)return An=setTimeout,setTimeout(e,0);try{return An(e,0)}catch{try{return An.call(null,e,0)}catch{return An.call(this,e,0)}}}!function(){try{An="function"==typeof setTimeout?setTimeout:Fn}catch{An=Fn}try{Dn="function"==typeof clearTimeout?clearTimeout:Nn}catch{Dn=Nn}}();var Ln,Bn=[],$n=!1,zn=-1;function Un(){!$n||!Ln||($n=!1,Ln.length?Bn=Ln.concat(Bn):zn=-1,Bn.length&&Hn())}function Hn(){if(!$n){var e=Vn(Un);$n=!0;for(var t=Bn.length;t;){for(Ln=Bn,Bn=[];++zn<t;)Ln&&Ln[zn].run();zn=-1,t=Bn.length}Ln=null,$n=!1,function(e){if(Dn===clearTimeout)return clearTimeout(e);if((Dn===Nn||!Dn)&&clearTimeout)return Dn=clearTimeout,clearTimeout(e);try{return Dn(e)}catch{try{return Dn.call(null,e)}catch{return Dn.call(this,e)}}}(e)}}function qn(e,t){this.fun=e,this.array=t}function Wn(){}Tn.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Bn.push(new qn(e,t)),1===Bn.length&&!$n&&Vn(Hn)},qn.prototype.run=function(){this.fun.apply(null,this.array)},Tn.title="browser",Tn.browser=!0,Tn.env={},Tn.argv=[],Tn.version="",Tn.versions={},Tn.on=Wn,Tn.addListener=Wn,Tn.once=Wn,Tn.off=Wn,Tn.removeListener=Wn,Tn.removeAllListeners=Wn,Tn.emit=Wn,Tn.prependListener=Wn,Tn.prependOnceListener=Wn,Tn.listeners=function(e){return[]},Tn.binding=function(e){throw new Error("process.binding is not supported")},Tn.cwd=function(){return"/"},Tn.chdir=function(e){throw new Error("process.chdir is not supported")},Tn.umask=function(){return 0};const Gn="object"==typeof Rn&&Rn&&Rn.Object===Object&&Rn;var Kn="object"==typeof self&&self&&self.Object===Object&&self;const Yn=Gn||Kn||Function("return this")();const Xn=Yn.Symbol;var Jn=Object.prototype,Zn=Jn.hasOwnProperty,Qn=Jn.toString,er=Xn?Xn.toStringTag:void 0;var tr=Object.prototype.toString;var nr="[object Null]",rr="[object Undefined]",or=Xn?Xn.toStringTag:void 0;function ir(e){return null==e?void 0===e?rr:nr:or&&or in Object(e)?function(e){var t=Zn.call(e,er),n=e[er];try{e[er]=void 0;var r=!0}catch{}var o=Qn.call(e);return r&&(t?e[er]=n:delete e[er]),o}(e):function(e){return tr.call(e)}(e)}function ar(e){return null!=e&&"object"==typeof e}var lr="[object Symbol]";function ur(e){return"symbol"==typeof e||ar(e)&&ir(e)==lr}function cr(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}const sr=Array.isArray;var dr=1/0,fr=Xn?Xn.prototype:void 0,pr=fr?fr.toString:void 0;function hr(e){if("string"==typeof e)return e;if(sr(e))return cr(e,hr)+"";if(ur(e))return pr?pr.call(e):"";var t=e+"";return"0"==t&&1/e==-dr?"-0":t}var vr=/\s/;var gr=/^\s+/;function mr(e){return e&&e.slice(0,function(e){for(var t=e.length;t--&&vr.test(e.charAt(t)););return t}(e)+1).replace(gr,"")}function yr(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var br=NaN,wr=/^[-+]0x[0-9a-f]+$/i,_r=/^0b[01]+$/i,kr=/^0o[0-7]+$/i,Cr=parseInt;function Er(e){if("number"==typeof e)return e;if(ur(e))return br;if(yr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=yr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=mr(e);var n=_r.test(e);return n||kr.test(e)?Cr(e.slice(2),n?2:8):wr.test(e)?br:+e}var Or=1/0,Sr=17976931348623157e292;function xr(e){return e?(e=Er(e))===Or||e===-Or?(e<0?-1:1)*Sr:e==e?e:0:0===e?e:0}function jr(e){var t=xr(e),n=t%1;return t==t?n?t-n:t:0}function Ir(e){return e}var Rr="[object AsyncFunction]",Ar="[object Function]",Dr="[object GeneratorFunction]",Pr="[object Proxy]";function Mr(e){if(!yr(e))return!1;var t=ir(e);return t==Ar||t==Dr||t==Rr||t==Pr}const Tr=Yn["__core-js_shared__"];var Fr,Nr=(Fr=/[^.]+$/.exec(Tr&&Tr.keys&&Tr.keys.IE_PROTO||""))?"Symbol(src)_1."+Fr:"";var Vr=Function.prototype.toString;function Lr(e){if(null!=e){try{return Vr.call(e)}catch{}try{return e+""}catch{}}return""}var Br=/^\[object .+?Constructor\]$/,$r=Function.prototype,zr=Object.prototype,Ur=$r.toString,Hr=zr.hasOwnProperty,qr=RegExp("^"+Ur.call(Hr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wr(e){return!(!yr(e)||function(e){return!!Nr&&Nr in e}(e))&&(Mr(e)?qr:Br).test(Lr(e))}function Gr(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Wr(n)?n:void 0}const Kr=Gr(Yn,"WeakMap");var Yr=Object.create,Xr=function(){function e(){}return function(t){if(!yr(t))return{};if(Yr)return Yr(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const Jr=Xr;function Zr(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Qr=Date.now;function eo(e){return function(){return e}}var to=function(){try{var e=Gr(Object,"defineProperty");return e({},"",{}),e}catch{}}();const no=to;var ro=no?function(e,t){return no(e,"toString",{configurable:!0,enumerable:!1,value:eo(t),writable:!0})}:Ir;var oo=function(e){var t=0,n=0;return function(){var r=Qr(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ro);const io=oo;function ao(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function lo(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function uo(e){return e!=e}function co(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}(e,t,n):lo(e,uo,n)}(e,t,0)>-1}var so=9007199254740991,fo=/^(?:0|[1-9]\d*)$/;function po(e,t){var n=typeof e;return!!(t=null==t?so:t)&&("number"==n||"symbol"!=n&&fo.test(e))&&e>-1&&e%1==0&&e<t}function ho(e,t,n){"__proto__"==t&&no?no(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function vo(e,t){return e===t||e!=e&&t!=t}var go=Object.prototype.hasOwnProperty;function mo(e,t,n){var r=e[t];(!go.call(e,t)||!vo(r,n)||void 0===n&&!(t in e))&&ho(e,t,n)}var yo=Math.max;function bo(e,t){return io(function(e,t,n){return t=yo(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=yo(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=r[o];return l[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,l)}}(e,t,Ir),e+"")}var wo=9007199254740991;function _o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=wo}function ko(e){return null!=e&&_o(e.length)&&!Mr(e)}function Co(e,t,n){if(!yr(n))return!1;var r=typeof t;return!!("number"==r?ko(n)&&po(t,n.length):"string"==r&&t in n)&&vo(n[t],e)}var Eo=Object.prototype;function Oo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Eo)}function So(e){return ar(e)&&"[object Arguments]"==ir(e)}var xo=Object.prototype,jo=xo.hasOwnProperty,Io=xo.propertyIsEnumerable,Ro=So(function(){return arguments}())?So:function(e){return ar(e)&&jo.call(e,"callee")&&!Io.call(e,"callee")};const Ao=Ro;var Do="object"==typeof exports&&exports&&!exports.nodeType&&exports,Po=Do&&"object"==typeof r&&r&&!r.nodeType&&r,Mo=Po&&Po.exports===Do?Yn.Buffer:void 0;const To=(Mo?Mo.isBuffer:void 0)||function(){return!1};var Fo={};function No(e){return function(t){return e(t)}}Fo["[object Float32Array]"]=Fo["[object Float64Array]"]=Fo["[object Int8Array]"]=Fo["[object Int16Array]"]=Fo["[object Int32Array]"]=Fo["[object Uint8Array]"]=Fo["[object Uint8ClampedArray]"]=Fo["[object Uint16Array]"]=Fo["[object Uint32Array]"]=!0,Fo["[object Arguments]"]=Fo["[object Array]"]=Fo["[object ArrayBuffer]"]=Fo["[object Boolean]"]=Fo["[object DataView]"]=Fo["[object Date]"]=Fo["[object Error]"]=Fo["[object Function]"]=Fo["[object Map]"]=Fo["[object Number]"]=Fo["[object Object]"]=Fo["[object RegExp]"]=Fo["[object Set]"]=Fo["[object String]"]=Fo["[object WeakMap]"]=!1;var Vo="object"==typeof exports&&exports&&!exports.nodeType&&exports,Lo=Vo&&"object"==typeof r&&r&&!r.nodeType&&r,Bo=Lo&&Lo.exports===Vo&&Gn.process,$o=function(){try{return Lo&&Lo.require&&Lo.require("util").types||Bo&&Bo.binding&&Bo.binding("util")}catch{}}();var zo=$o&&$o.isTypedArray,Uo=zo?No(zo):function(e){return ar(e)&&_o(e.length)&&!!Fo[ir(e)]};const Ho=Uo;var qo=Object.prototype.hasOwnProperty;function Wo(e,t){var n=sr(e),r=!n&&Ao(e),o=!n&&!r&&To(e),i=!n&&!r&&!o&&Ho(e),a=n||r||o||i,l=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=l.length;for(var c in e)(t||qo.call(e,c))&&(!a||!("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||po(c,u)))&&l.push(c);return l}function Go(e,t){return function(n){return e(t(n))}}const Ko=Go(Object.keys,Object);var Yo=Object.prototype.hasOwnProperty;function Xo(e){return ko(e)?Wo(e):function(e){if(!Oo(e))return Ko(e);var t=[];for(var n in Object(e))Yo.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var Jo=Object.prototype.hasOwnProperty;function Zo(e){if(!yr(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Oo(e),n=[];for(var r in e)"constructor"==r&&(t||!Jo.call(e,r))||n.push(r);return n}function Qo(e){return ko(e)?Wo(e,!0):Zo(e)}var ei=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ti=/^\w*$/;function ni(e,t){if(sr(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ur(e))||(ti.test(e)||!ei.test(e)||null!=t&&e in Object(t))}const ri=Gr(Object,"create");var oi=Object.prototype.hasOwnProperty;var ii=Object.prototype.hasOwnProperty;function ai(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function li(e,t){for(var n=e.length;n--;)if(vo(e[n][0],t))return n;return-1}ai.prototype.clear=function(){this.__data__=ri?ri(null):{},this.size=0},ai.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ai.prototype.get=function(e){var t=this.__data__;if(ri){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return oi.call(t,e)?t[e]:void 0},ai.prototype.has=function(e){var t=this.__data__;return ri?void 0!==t[e]:ii.call(t,e)},ai.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ri&&void 0===t?"__lodash_hash_undefined__":t,this};var ui=Array.prototype.splice;function ci(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ci.prototype.clear=function(){this.__data__=[],this.size=0},ci.prototype.delete=function(e){var t=this.__data__,n=li(t,e);return!(n<0)&&(n==t.length-1?t.pop():ui.call(t,n,1),--this.size,!0)},ci.prototype.get=function(e){var t=this.__data__,n=li(t,e);return n<0?void 0:t[n][1]},ci.prototype.has=function(e){return li(this.__data__,e)>-1},ci.prototype.set=function(e,t){var n=this.__data__,r=li(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const si=Gr(Yn,"Map");function di(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function fi(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}fi.prototype.clear=function(){this.size=0,this.__data__={hash:new ai,map:new(si||ci),string:new ai}},fi.prototype.delete=function(e){var t=di(this,e).delete(e);return this.size-=t?1:0,t},fi.prototype.get=function(e){return di(this,e).get(e)},fi.prototype.has=function(e){return di(this,e).has(e)},fi.prototype.set=function(e,t){var n=di(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var pi="Expected a function";function hi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(pi);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(hi.Cache||fi),n}hi.Cache=fi;var vi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gi=/\\(\\)?/g,mi=function(e){var t=hi(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(vi,(function(e,n,r,o){t.push(r?o.replace(gi,"$1"):n||e)})),t}));const yi=mi;function bi(e){return null==e?"":hr(e)}function wi(e,t){return sr(e)?e:ni(e,t)?[e]:yi(bi(e))}var _i=1/0;function ki(e){if("string"==typeof e||ur(e))return e;var t=e+"";return"0"==t&&1/e==-_i?"-0":t}function Ci(e,t){for(var n=0,r=(t=wi(t,e)).length;null!=e&&n<r;)e=e[ki(t[n++])];return n&&n==r?e:void 0}function Ei(e,t,n){var r=null==e?void 0:Ci(e,t);return void 0===r?n:r}function Oi(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var Si=Xn?Xn.isConcatSpreadable:void 0;function xi(e){return sr(e)||Ao(e)||!!(Si&&e&&e[Si])}function ji(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=xi),o||(o=[]);++i<a;){var l=e[i];t>0&&n(l)?t>1?ji(l,t-1,n,r,o):Oi(o,l):r||(o[o.length]=l)}return o}function Ii(e){return(null==e?0:e.length)?ji(e,1):[]}const Ri=Go(Object.getPrototypeOf,Object);var Ai="[object Object]",Di=Function.prototype,Pi=Object.prototype,Mi=Di.toString,Ti=Pi.hasOwnProperty,Fi=Mi.call(Object);function Ni(e){if(!ar(e)||ir(e)!=Ai)return!1;var t=Ri(e);if(null===t)return!0;var n=Ti.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Mi.call(n)==Fi}function Vi(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}var Li=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Bi(e){return Li.test(e)}var $i="\\ud800-\\udfff",zi="["+$i+"]",Ui="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Hi="\\ud83c[\\udffb-\\udfff]",qi="[^"+$i+"]",Wi="(?:\\ud83c[\\udde6-\\uddff]){2}",Gi="[\\ud800-\\udbff][\\udc00-\\udfff]",Ki="(?:"+Ui+"|"+Hi+")"+"?",Yi="[\\ufe0e\\ufe0f]?",Xi=Yi+Ki+("(?:\\u200d(?:"+[qi,Wi,Gi].join("|")+")"+Yi+Ki+")*"),Ji="(?:"+[qi+Ui+"?",Ui,Wi,Gi,zi].join("|")+")",Zi=RegExp(Hi+"(?="+Hi+")|"+Ji+Xi,"g");function Qi(e){return Bi(e)?function(e){return e.match(Zi)||[]}(e):function(e){return e.split("")}(e)}var ea=function(e){return function(t){var n=Bi(t=bi(t))?Qi(t):void 0,r=n?n[0]:t.charAt(0),o=n?function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Vi(e,t,n)}(n,1).join(""):t.slice(1);return r[e]()+o}}("toUpperCase");const ta=ea;var na=Math.ceil,ra=Math.max;function oa(e){var t=this.__data__=new ci(e);this.size=t.size}oa.prototype.clear=function(){this.__data__=new ci,this.size=0},oa.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},oa.prototype.get=function(e){return this.__data__.get(e)},oa.prototype.has=function(e){return this.__data__.has(e)},oa.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ci){var r=n.__data__;if(!si||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new fi(r)}return n.set(e,t),this.size=n.size,this};var ia="object"==typeof exports&&exports&&!exports.nodeType&&exports,aa=ia&&"object"==typeof r&&r&&!r.nodeType&&r,la=aa&&aa.exports===ia?Yn.Buffer:void 0,ua=la?la.allocUnsafe:void 0;var ca=Object.prototype.propertyIsEnumerable,sa=Object.getOwnPropertySymbols,da=sa?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}(sa(e),(function(t){return ca.call(e,t)})))}:function(){return[]};const fa=da;function pa(e){return function(e,t,n){var r=t(e);return sr(e)?r:Oi(r,n(e))}(e,Xo,fa)}const ha=Gr(Yn,"DataView");const va=Gr(Yn,"Promise");const ga=Gr(Yn,"Set");var ma="[object Map]",ya="[object Promise]",ba="[object Set]",wa="[object WeakMap]",_a="[object DataView]",ka=Lr(ha),Ca=Lr(si),Ea=Lr(va),Oa=Lr(ga),Sa=Lr(Kr),xa=ir;(ha&&xa(new ha(new ArrayBuffer(1)))!=_a||si&&xa(new si)!=ma||va&&xa(va.resolve())!=ya||ga&&xa(new ga)!=ba||Kr&&xa(new Kr)!=wa)&&(xa=function(e){var t=ir(e),n="[object Object]"==t?e.constructor:void 0,r=n?Lr(n):"";if(r)switch(r){case ka:return _a;case Ca:return ma;case Ea:return ya;case Oa:return ba;case Sa:return wa}return t});const ja=xa;const Ia=Yn.Uint8Array;function Ra(e,t){var n=t?function(e){var t=new e.constructor(e.byteLength);return new Ia(t).set(new Ia(e)),t}(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Aa(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new fi;++t<n;)this.add(e[t])}function Da(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Pa(e,t){return e.has(t)}Aa.prototype.add=Aa.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Aa.prototype.has=function(e){return this.__data__.has(e)};var Ma=1,Ta=2;function Fa(e,t,n,r,o,i){var a=n&Ma,l=e.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;var c=i.get(e),s=i.get(t);if(c&&s)return c==t&&s==e;var d=-1,f=!0,p=n&Ta?new Aa:void 0;for(i.set(e,t),i.set(t,e);++d<l;){var h=e[d],v=t[d];if(r)var g=a?r(v,h,d,t,e,i):r(h,v,d,e,t,i);if(void 0!==g){if(g)continue;f=!1;break}if(p){if(!Da(t,(function(e,t){if(!Pa(p,t)&&(h===e||o(h,e,n,r,i)))return p.push(t)}))){f=!1;break}}else if(h!==v&&!o(h,v,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function Na(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Va(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var La=1,Ba=2,$a="[object Boolean]",za="[object Date]",Ua="[object Error]",Ha="[object Map]",qa="[object Number]",Wa="[object RegExp]",Ga="[object Set]",Ka="[object String]",Ya="[object Symbol]",Xa="[object ArrayBuffer]",Ja="[object DataView]",Za=Xn?Xn.prototype:void 0,Qa=Za?Za.valueOf:void 0;var el=1,tl=Object.prototype.hasOwnProperty;var nl=1,rl="[object Arguments]",ol="[object Array]",il="[object Object]",al=Object.prototype.hasOwnProperty;function ll(e,t,n,r,o,i){var a=sr(e),l=sr(t),u=a?ol:ja(e),c=l?ol:ja(t),s=(u=u==rl?il:u)==il,d=(c=c==rl?il:c)==il,f=u==c;if(f&&To(e)){if(!To(t))return!1;a=!0,s=!1}if(f&&!s)return i||(i=new oa),a||Ho(e)?Fa(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case Ja:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xa:return!(e.byteLength!=t.byteLength||!i(new Ia(e),new Ia(t)));case $a:case za:case qa:return vo(+e,+t);case Ua:return e.name==t.name&&e.message==t.message;case Wa:case Ka:return e==t+"";case Ha:var l=Na;case Ga:var u=r&La;if(l||(l=Va),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=Ba,a.set(e,t);var s=Fa(l(e),l(t),r,o,i,a);return a.delete(e),s;case Ya:if(Qa)return Qa.call(e)==Qa.call(t)}return!1}(e,t,u,n,r,o,i);if(!(n&nl)){var p=s&&al.call(e,"__wrapped__"),h=d&&al.call(t,"__wrapped__");if(p||h){var v=p?e.value():e,g=h?t.value():t;return i||(i=new oa),o(v,g,n,r,i)}}return!!f&&(i||(i=new oa),function(e,t,n,r,o,i){var a=n&el,l=pa(e),u=l.length;if(u!=pa(t).length&&!a)return!1;for(var c=u;c--;){var s=l[c];if(!(a?s in t:tl.call(t,s)))return!1}var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var p=!0;i.set(e,t),i.set(t,e);for(var h=a;++c<u;){var v=e[s=l[c]],g=t[s];if(r)var m=a?r(g,v,s,t,e,i):r(v,g,s,e,t,i);if(!(void 0===m?v===g||o(v,g,n,r,i):m)){p=!1;break}h||(h="constructor"==s)}if(p&&!h){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(p=!1)}return i.delete(e),i.delete(t),p}(e,t,n,r,o,i))}function ul(e,t,n,r,o){return e===t||(null==e||null==t||!ar(e)&&!ar(t)?e!=e&&t!=t:ll(e,t,n,r,ul,o))}var cl=1,sl=2;function dl(e){return e==e&&!yr(e)}function fl(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function pl(e){var t=function(e){for(var t=Xo(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,dl(o)]}return t}(e);return 1==t.length&&t[0][2]?fl(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var l=n[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<i;){var u=(l=n[o])[0],c=e[u],s=l[1];if(a&&l[2]){if(void 0===c&&!(u in e))return!1}else{var d=new oa;if(r)var f=r(c,s,u,e,t,d);if(!(void 0===f?ul(s,c,cl|sl,r,d):f))return!1}}return!0}(n,e,t)}}function hl(e,t){return null!=e&&t in Object(e)}function vl(e,t){return null!=e&&function(e,t,n){for(var r=-1,o=(t=wi(t,e)).length,i=!1;++r<o;){var a=ki(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&_o(o)&&po(a,o)&&(sr(e)||Ao(e))}(e,t,hl)}var gl=1,ml=2;function yl(e){return ni(e)?function(e){return function(t){return null==t?void 0:t[e]}}(ki(e)):function(e){return function(t){return Ci(t,e)}}(e)}function bl(e){return"function"==typeof e?e:null==e?Ir:"object"==typeof e?sr(e)?function(e,t){return ni(e)&&dl(t)?fl(ki(e),t):function(n){var r=Ei(n,e);return void 0===r&&r===t?vl(n,e):ul(t,r,gl|ml)}}(e[0],e[1]):pl(e):yl(e)}function wl(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r}var _l=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),l=a.length;l--;){var u=a[e?l:++o];if(!1===n(i[u],u,i))break}return t}}();const kl=_l;var Cl=function(e,t){return function(n,r){if(null==n)return n;if(!ko(n))return e(n,r);for(var o=n.length,i=t?o:-1,a=Object(n);(t?i--:++i<o)&&!1!==r(a[i],i,a););return n}}((function(e,t){return e&&kl(e,t,Xo)}));const El=Cl;function Ol(e,t,n,r){return El(e,(function(e,o,i){t(r,e,n(e),i)})),r}const Sl=function(){return Yn.Date.now()};var xl="Expected a function",jl=Math.max,Il=Math.min;function Rl(e,t,n){var r,o,i,a,l,u,c=0,s=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(xl);function p(t){var n=r,i=o;return r=o=void 0,c=t,a=e.apply(i,n)}function h(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-c>=i}function v(){var e=Sl();if(h(e))return g(e);l=setTimeout(v,function(e){var n=t-(e-u);return d?Il(n,i-(e-c)):n}(e))}function g(e){return l=void 0,f&&r?p(e):(r=o=void 0,a)}function m(){var e=Sl(),n=h(e);if(r=arguments,o=this,u=e,n){if(void 0===l)return function(e){return c=e,l=setTimeout(v,t),s?p(e):a}(u);if(d)return clearTimeout(l),l=setTimeout(v,t),p(u)}return void 0===l&&(l=setTimeout(v,t)),a}return t=Er(t)||0,yr(n)&&(s=!!n.leading,i=(d="maxWait"in n)?jl(Er(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f),m.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=u=o=l=void 0},m.flush=function(){return void 0===l?a:g(Sl())},m}function Al(e,t,n){(void 0!==n&&!vo(e[t],n)||void 0===n&&!(t in e))&&ho(e,t,n)}function Dl(e){return ar(e)&&ko(e)}function Pl(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Ml(e){return function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var l=t[i],u=r?r(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),o?ho(n,l,u):mo(n,l,u)}return n}(e,Qo(e))}function Tl(e,t,n,r,o,i,a){var l=Pl(e,n),u=Pl(t,n),c=a.get(u);if(c)Al(e,n,c);else{var s=i?i(l,u,n+"",e,t,a):void 0,d=void 0===s;if(d){var f=sr(u),p=!f&&To(u),h=!f&&!p&&Ho(u);s=u,f||p||h?sr(l)?s=l:Dl(l)?s=Zr(l):p?(d=!1,s=function(e,t){if(t)return e.slice();var n=e.length,r=ua?ua(n):new e.constructor(n);return e.copy(r),r}(u,!0)):h?(d=!1,s=Ra(u,!0)):s=[]:Ni(u)||Ao(u)?(s=l,Ao(l)?s=Ml(l):(!yr(l)||Mr(l))&&(s=function(e){return"function"!=typeof e.constructor||Oo(e)?{}:Jr(Ri(e))}(u))):d=!1}d&&(a.set(u,s),o(s,u,r,i,a),a.delete(u)),Al(e,n,s)}}function Fl(e,t,n,r,o){e!==t&&kl(t,(function(i,a){if(o||(o=new oa),yr(i))Tl(e,t,a,n,Fl,r,o);else{var l=r?r(Pl(e,a),i,a+"",e,t,o):void 0;void 0===l&&(l=i),Al(e,a,l)}}),Qo)}function Nl(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}var Vl=bo((function(e,t){return Dl(e)?function(e,t,n,r){var o=-1,i=co,a=!0,l=e.length,u=[],c=t.length;if(!l)return u;n&&(t=cr(t,No(n))),r?(i=Nl,a=!1):t.length>=200&&(i=Pa,a=!1,t=new Aa(t));e:for(;++o<l;){var s=e[o],d=null==n?s:n(s);if(s=r||0!==s?s:0,a&&d==d){for(var f=c;f--;)if(t[f]===d)continue e;u.push(s)}else i(t,d,r)||u.push(s)}return u}(e,ji(t,1,Dl,!0)):[]}));const Ll=Vl;function Bl(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function $l(e,t){return(sr(e)?ao:El)(e,function(e){return"function"==typeof e?e:Ir}(t))}function zl(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ul(e,t){var n=!0;return El(e,(function(e,r,o){return n=!!t(e,r,o)})),n}var Hl=Math.max,ql=Math.min;var Wl=function(e){return function(t,n,r){var o=Object(t);if(!ko(t)){var i=bl(n);t=Xo(t),n=function(e){return i(o[e],e,o)}}var a=e(t,n,r);return a>-1?o[i?t[a]:a]:void 0}}((function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return void 0!==n&&(o=jr(n),o=n<0?Hl(r+o,0):ql(o,r-1)),lo(e,bl(t),o,!0)}));const Gl=Wl;var Kl=Object.prototype.hasOwnProperty,Yl=function(e,t){return function(n,r){var o=sr(n)?wl:Ol,i=t?t():{};return o(n,e,bl(r),i)}}((function(e,t,n){Kl.call(e,n)?e[n].push(t):ho(e,n,[t])}));const Xl=Yl;var Jl=Math.max,Zl=Math.min;function Ql(e,t,n){return t=xr(t),void 0===n?(n=t,t=0):n=xr(n),function(e,t,n){return e>=Zl(t,n)&&e<Jl(t,n)}(e=Er(e),t,n)}var eu="[object String]";function tu(e){return"string"==typeof e||!sr(e)&&ar(e)&&ir(e)==eu}function nu(e){return null==e?[]:function(e,t){return cr(t,(function(t){return e[t]}))}(e,Xo(e))}function ru(e){return!0===e||!1===e||ar(e)&&"[object Boolean]"==ir(e)}function ou(e,t){return ul(e,t)}var iu="[object Number]";function au(e){return function(e){return"number"==typeof e||ar(e)&&ir(e)==iu}(e)&&e!=+e}function lu(e){return null==e}function uu(e){return void 0===e}var cu=function(e){return bo((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&Co(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var l=n[r];l&&e(t,l,r,i)}return t}))}((function(e,t,n){Fl(e,t,n)}));const su=cu;var du=Xn?Xn.iterator:void 0;function fu(e,t){return null==(e=function(e,t){return t.length<2?e:Ci(e,Vi(t,0,-1))}(e,t=wi(t,e)))||delete e[ki(Bl(t))]}var pu=Array.prototype.splice;function hu(e,t){var n=[];if(!e||!e.length)return n;var r=-1,o=[],i=e.length;for(t=bl(t);++r<i;){var a=e[r];t(a,r,e)&&(n.push(a),o.push(r))}return function(e,t){for(var n=e?t.length:0,r=n-1;n--;){var o=t[n];if(n==r||o!==i){var i=o;po(o)?pu.call(e,o,1):fu(e,o)}}}(e,o),n}function vu(e,t,n){return null==e?e:function(e,t,n,r){if(!yr(e))return e;for(var o=-1,i=(t=wi(t,e)).length,a=i-1,l=e;null!=l&&++o<i;){var u=ki(t[o]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var s=l[u];void 0===(c=r?r(s,u,l):void 0)&&(c=yr(s)?s:po(t[o+1])?[]:{})}mo(l,u,c),l=l[u]}return e}(e,t,n)}var gu=ga&&1/Va(new ga([,-0]))[1]==1/0?function(e){return new ga(e)}:function(){};const mu=gu;var yu=200;function bu(e,t,n){var r=-1,o=co,i=e.length,a=!0,l=[],u=l;if(n)a=!1,o=Nl;else if(i>=yu){var c=t?null:mu(e);if(c)return Va(c);a=!1,o=Pa,u=new Aa}else u=t?[]:l;e:for(;++r<i;){var s=e[r],d=t?t(s):s;if(s=n||0!==s?s:0,a&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue e;t&&u.push(d),l.push(s)}else o(u,d,n)||(u!==l&&u.push(d),l.push(s))}return l}var wu=bo((function(e){var t=Bl(e);return Dl(t)&&(t=void 0),bu(ji(e,1,Dl,!0),bl(t))}));const _u=wu;function ku(e){return e&&e.length?bu(e):[]}function Cu(e,t){return e&&e.length?bu(e,bl(t)):[]}function Eu(e,t){return t="function"==typeof t?t:void 0,e&&e.length?bu(e,void 0,t):[]}var Ou="named",Su="name",xu="unmanaged",ju="optional",Iu="inject",Ru="multi_inject",Au="inversify:tagged",Du="inversify:tagged_props",Pu="inversify:paramtypes",Mu="design:paramtypes",Tu="post_construct",Fu="pre_destroy";var Nu=[Iu,Ru,Su,xu,Ou,ju],Vu={Request:"Request",Singleton:"Singleton",Transient:"Transient"},Lu={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},Bu={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},$u=0;function zu(){return $u++}var Uu=function(){function e(e,t){this.id=zu(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=Lu.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===Vu.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.onDeactivation=this.onDeactivation,t.cache=this.cache,t},e}(),Hu="Cannot apply @injectable decorator multiple times.",qu="Metadata key was used more than once in a parameter:",Wu="NULL argument",Gu="Key Not Found",Ku="Ambiguous match found for serviceIdentifier:",Yu="No matching bindings found for serviceIdentifier:",Xu="Missing required @injectable annotation in:",Ju="Missing required @inject or @multiInject annotation in:",Zu="Circular dependency found:",Qu="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",ec=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+"".concat(e[0]," must be >= than the number of constructor arguments of its base class.")},tc=function(e,t){return"@postConstruct error in class ".concat(e,": ").concat(t)},nc=function(e,t){return"@preDestroy error in class ".concat(e,": ").concat(t)},rc=function(e,t){return"onDeactivation() error in class ".concat(e,": ").concat(t)},oc="Maximum call stack size exceeded",ic=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(Pu,e),userGeneratedMetadata:Reflect.getMetadata(Au,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(Du,e)||[]},e}(),ac={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function lc(e){return e instanceof RangeError||e.message===oc}function uc(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function cc(e,t,n){var r="",o=n(e,t);return 0!==o.length&&(r="\nRegistered bindings:",o.forEach((function(e){var t="Object";null!==e.implementationType&&(t=fc(e.implementationType)),r="".concat(r,"\n ").concat(t),e.constraint.metaData&&(r="".concat(r," - ").concat(e.constraint.metaData))}))),r}function sc(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||sc(e.parentRequest,t))}function dc(e){e.childRequests.forEach((function(e){if(sc(e,e.serviceIdentifier)){var t=function(e){var t=function e(t,n){void 0===n&&(n=[]);var r=uc(t.serviceIdentifier);return n.push(r),null!==t.parentRequest?e(t.parentRequest,n):n}(e);return t.reverse().join(" --\x3e ")}(e);throw new Error("".concat(Zu," ").concat(t))}dc(e)}))}function fc(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: ".concat(t)}var pc=function(){function e(e){this.id=zu(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}(),hc=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===Ou?"named: ".concat(String(this.value).toString()," "):"tagged: { key:".concat(this.key.toString(),", value: ").concat(String(this.value)," }")},e}(),vc=function(e,t){this.parentContext=e,this.rootRequest=t},gc=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}(),mc=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}(),yc=function(){function e(e,t,n,r){this.id=zu(),this.type=e,this.serviceIdentifier=n;var o="symbol"==typeof t?function(e){return e.toString().slice(7,-1)}(t):t;this.name=new mc(o||""),this.identifier=t,this.metadata=new Array;var i=null;"string"==typeof r?i=new hc(Ou,r):r instanceof hc&&(i=r),null!==i&&this.metadata.push(i)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(Ru)},e.prototype.matchesArray=function(e){return this.matchesTag(Ru)(e)},e.prototype.isNamed=function(){return this.hasTag(Ou)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return Nu.every((function(t){return e.key!==t}))}))},e.prototype.isOptional=function(){return this.matchesTag(ju)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===Ou}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return Nu.every((function(t){return e.key!==t}))})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(Ou)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var r=0,o=t.metadata;r<o.length;r++){var i=o[r];if(i.key===e&&i.value===n)return!0}return!1}},e}(),bc=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};function wc(e,t,n,r){var o=e.getConstructorMetadata(n),i=o.compilerGeneratedMetadata;if(void 0===i){var a="".concat(Xu," ").concat(t,".");throw new Error(a)}var l=o.userGeneratedMetadata,u=Object.keys(l),c=0===n.length&&u.length>0,s=u.length>n.length,d=function(e,t,n,r,o){for(var i=[],a=0;a<o;a++){var l=_c(a,e,t,n,r);null!==l&&i.push(l)}return i}(r,t,i,l,c||s?u.length:n.length),f=Cc(e,n,t);return bc(bc([],d,!0),f,!0)}function _c(e,t,n,r,o){var i=o[e.toString()]||[],a=Oc(i),l=!0!==a.unmanaged,u=r[e];if((u=a.inject||a.multiInject||u)instanceof gc&&(u=u.unwrap()),l){if(!t&&(u===Object||u===Function||void 0===u)){var c="".concat(Ju," argument ").concat(e," in class ").concat(n,".");throw new Error(c)}var s=new yc(Bu.ConstructorArgument,a.targetName,u);return s.metadata=i,s}return null}function kc(e,t,n,r){var o=e||t;if(void 0===o){var i="".concat(Xu," for property ").concat(String(n)," in class ").concat(r,".");throw new Error(i)}return o}function Cc(e,t,n){for(var r=e.getPropertiesMetadata(t),o=[],i=Object.getOwnPropertySymbols(r),a=0,l=Object.keys(r).concat(i);a<l.length;a++){var u=l[a],c=r[u],s=Oc(c),d=s.targetName||u,f=kc(s.inject,s.multiInject,u,n),p=new yc(Bu.ClassProperty,d,f);p.metadata=c,o.push(p)}var h=Object.getPrototypeOf(t.prototype).constructor;if(h!==Object){var v=Cc(e,h,n);o=bc(bc([],o,!0),v,!0)}return o}function Ec(e,t){var n=Object.getPrototypeOf(t.prototype).constructor;if(n!==Object){var r=wc(e,fc(n),n,!0),o=r.map((function(e){return e.metadata.filter((function(e){return e.key===xu}))})),i=[].concat.apply([],o).length,a=r.length-i;return a>0?a:Ec(e,n)}return 0}function Oc(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[Iu],multiInject:t[Ru],targetName:t[Su],unmanaged:t[xu]}}var Sc=function(){function e(e,t,n,r,o){this.id=zu(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var o=new e(t,this.parentContext,this,n,r);return this.childRequests.push(o),o},e}();function xc(e){return e._bindingDictionary}function jc(e,t,n,r,o){var i=Rc(n.container,o.serviceIdentifier),a=[];return i.length===ac.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof o.serviceIdentifier&&e.getConstructorMetadata(o.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(o.serviceIdentifier).toSelf(),i=Rc(n.container,o.serviceIdentifier)),a=t?i:i.filter((function(e){var t=new Sc(e.serviceIdentifier,n,r,e,o);return e.constraint(t)})),function(e,t,n,r){switch(t.length){case ac.NoBindingsAvailable:if(n.isOptional())return t;var o=uc(e),i=Yu;throw i+=function(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),o=t.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==o&&o.forEach((function(e){n+=e.toString()+"\n"}))," ".concat(e,"\n ").concat(e," - ").concat(n)}return" ".concat(e)}(o,n),i+=cc(r,o,Rc),new Error(i);case ac.OnlyOneBindingAvailable:return t;case ac.MultipleBindingsAvailable:default:if(n.isArray())return t;o=uc(e),i="".concat(Ku," ").concat(o);throw i+=cc(r,o,Rc),new Error(i)}}(o.serviceIdentifier,a,o,n.container),a}function Ic(e,t,n,r,o,i){var a,l;if(null===o){a=jc(e,t,r,null,i),l=new Sc(n,r,null,a,i);var u=new vc(r,l);r.addPlan(u)}else a=jc(e,t,r,o,i),l=o.addChildRequest(i.serviceIdentifier,a,i);a.forEach((function(t){var n=null;if(i.isArray())n=l.addChildRequest(t.serviceIdentifier,t,i);else{if(t.cache)return;n=l}if(t.type===Lu.Instance&&null!==t.implementationType){var o=function(e,t){return wc(e,fc(t),t,!1)}(e,t.implementationType);if(!r.container.options.skipBaseClassChecks){var a=Ec(e,t.implementationType);if(o.length<a){var u=ec(fc(t.implementationType));throw new Error(u)}}o.forEach((function(t){Ic(e,!1,t.serviceIdentifier,r,n,t)}))}}))}function Rc(e,t){var n=[],r=xc(e);return r.hasKey(t)?n=r.get(t):null!==e.parent&&(n=Rc(e.parent,t)),n}function Ac(e,t,n,r,o,i,a,l){void 0===l&&(l=!1);var u=new pc(t),c=function(e,t,n,r,o,i){var a=new hc(e?Ru:Iu,n),l=new yc(t,r,n,a);if(void 0!==o){var u=new hc(o,i);l.metadata.push(u)}return l}(n,r,o,"",i,a);try{return Ic(e,l,o,u,null,c),u}catch(e){throw lc(e)&&dc(u.plan.rootRequest),e}}function Dc(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then}function Pc(e){return!!Dc(e)||Array.isArray(e)&&e.some(Dc)}var Mc,Tc=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,l)}u((r=r.apply(e,t||[])).next())}))},Fc=globalThis&&globalThis.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Nc=function(e,t,n){e.has(t.id)||e.set(t.id,n)},Vc=function(e,t){e.cache=t,e.activated=!0,Dc(t)&&Lc(e,t)},Lc=function(e,t){return Tc(void 0,void 0,void 0,(function(){var n,r;return Fc(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t];case 1:return n=o.sent(),e.cache=n,[3,3];case 2:throw r=o.sent(),e.cache=null,e.activated=!1,r;case 3:return[2]}}))}))};!function(e){e.DynamicValue="toDynamicValue",e.Factory="toFactory",e.Provider="toProvider"}(Mc||(Mc={}));var Bc=globalThis&&globalThis.__assign||function(){return Bc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bc.apply(this,arguments)},$c=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,l)}u((r=r.apply(e,t||[])).next())}))},zc=globalThis&&globalThis.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Uc=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};function Hc(e,t,n){var r;if(t.length>0){var o=function(e,t){return e.reduce((function(e,n){var r=t(n);return n.target.type===Bu.ConstructorArgument?e.constructorInjections.push(r):(e.propertyRequests.push(n),e.propertyInjections.push(r)),e.isAsync||(e.isAsync=Pc(r)),e}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(t,n),i=Bc(Bc({},o),{constr:e});r=o.isAsync?function(e){return $c(this,void 0,void 0,(function(){var t,n;return zc(this,(function(r){switch(r.label){case 0:return[4,Wc(e.constructorInjections)];case 1:return t=r.sent(),[4,Wc(e.propertyInjections)];case 2:return n=r.sent(),[2,qc(Bc(Bc({},e),{constructorInjections:t,propertyInjections:n}))]}}))}))}(i):qc(i)}else r=new e;return r}function qc(e){var t,n=new((t=e.constr).bind.apply(t,Uc([void 0],e.constructorInjections,!1)));return e.propertyRequests.forEach((function(t,r){var o=t.target.identifier,i=e.propertyInjections[r];n[o]=i})),n}function Wc(e){return $c(this,void 0,void 0,(function(){var t,n,r,o;return zc(this,(function(i){for(t=[],n=0,r=e;n<r.length;n++)o=r[n],Array.isArray(o)?t.push(Promise.all(o)):t.push(o);return[2,Promise.all(t)]}))}))}function Gc(e,t){var n=function(e,t){var n,r;if(Reflect.hasMetadata(Tu,e)){var o=Reflect.getMetadata(Tu,e);try{return null===(r=(n=t)[o.value])||void 0===r?void 0:r.call(n)}catch(t){if(t instanceof Error)throw new Error(tc(e.name,t.message))}}}(e,t);return Dc(n)?n.then((function(){return t})):t}function Kc(e,t){e.scope!==Vu.Singleton&&function(e,t){var n="Class cannot be instantiated in ".concat(e.scope===Vu.Request?"request":"transient"," scope.");if("function"==typeof e.onDeactivation)throw new Error(rc(t.name,n));if(Reflect.hasMetadata(Fu,t))throw new Error(nc(t.name,n))}(e,t)}var Yc=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,l)}u((r=r.apply(e,t||[])).next())}))},Xc=globalThis&&globalThis.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Jc=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,r=t.childRequests,o=t.target&&t.target.isArray(),i=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(o&&i)return r.map((function(t){return Jc(e)(t)}));if(!t.target.isOptional()||0!==n.length){var a=n[0];return ts(e,t,a)}}},Zc=function(e,t){var n=function(e){switch(e.type){case Lu.Factory:return{factory:e.factory,factoryType:Mc.Factory};case Lu.Provider:return{factory:e.provider,factoryType:Mc.Provider};case Lu.DynamicValue:return{factory:e.dynamicValue,factoryType:Mc.DynamicValue};default:throw new Error("Unexpected factory type ".concat(e.type))}}(e);return function(e,t){try{return e()}catch(e){throw lc(e)&&(e=t()),e}}((function(){return n.factory.bind(e)(t)}),(function(){return new Error(function(e,t){return"It looks like there is a circular dependency in one of the '".concat(e,"' bindings. Please investigate bindings with ")+"service identifier '".concat(t,"'.")}(n.factoryType,t.currentRequest.serviceIdentifier.toString()))}))},Qc=function(e,t,n){var r,o=t.childRequests;switch(function(e){var t=null;switch(e.type){case Lu.ConstantValue:case Lu.Function:t=e.cache;break;case Lu.Constructor:case Lu.Instance:t=e.implementationType;break;case Lu.DynamicValue:t=e.dynamicValue;break;case Lu.Provider:t=e.provider;break;case Lu.Factory:t=e.factory}if(null===t){var n=uc(e.serviceIdentifier);throw new Error("".concat("Invalid binding type:"," ").concat(n))}}(n),n.type){case Lu.ConstantValue:case Lu.Function:r=n.cache;break;case Lu.Constructor:r=n.implementationType;break;case Lu.Instance:r=function(e,t,n,r){Kc(e,t);var o=Hc(t,n,r);return Dc(o)?o.then((function(e){return Gc(t,e)})):Gc(t,o)}(n,n.implementationType,o,Jc(e));break;default:r=Zc(n,t.parentContext)}return r},es=function(e,t,n){var r=function(e,t){return t.scope===Vu.Singleton&&t.activated?t.cache:t.scope===Vu.Request&&e.has(t.id)?e.get(t.id):null}(e,t);return null!==r||function(e,t,n){t.scope===Vu.Singleton&&Vc(t,n),t.scope===Vu.Request&&Nc(e,t,n)}(e,t,r=n()),r},ts=function(e,t,n){return es(e,n,(function(){var r=Qc(e,t,n);return r=Dc(r)?r.then((function(e){return ns(t,n,e)})):ns(t,n,r)}))};function ns(e,t,n){var r,o=rs(e.parentContext,t,n),i=ls(e.parentContext.container),a=i.next();do{r=a.value;var l=e.parentContext,u=e.serviceIdentifier,c=as(r,u);o=Dc(o)?is(c,l,o):os(c,l,o),a=i.next()}while(!0!==a.done&&!xc(r).hasKey(e.serviceIdentifier));return o}var rs=function(e,t,n){return"function"==typeof t.onActivation?t.onActivation(e,n):n},os=function(e,t,n){for(var r=e.next();!r.done;){if(Dc(n=r.value(t,n)))return is(e,t,n);r=e.next()}return n},is=function(e,t,n){return Yc(void 0,void 0,void 0,(function(){var r,o;return Xc(this,(function(i){switch(i.label){case 0:return[4,n];case 1:r=i.sent(),o=e.next(),i.label=2;case 2:return o.done?[3,4]:[4,o.value(t,r)];case 3:return r=i.sent(),o=e.next(),[3,2];case 4:return[2,r]}}))}))},as=function(e,t){var n=e._activations;return n.hasKey(t)?n.get(t).values():[].values()},ls=function(e){for(var t=[e],n=e.parent;null!==n;)t.push(n),n=n.parent;return{next:function(){var e=t.pop();return void 0!==e?{done:!1,value:e}:{done:!0,value:void 0}}}};var us=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||us(n,t))},cs=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new hc(e,t),n}},ss=cs(Ou),ds=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var r=t.bindings[0].implementationType;return e===r}return!1}},fs=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new ps(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=ss(e),new ps(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e&&(null!==e.target&&!e.target.isNamed()&&!e.target.isTagged())},new ps(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=cs(e)(t),new ps(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return null!==t&&ds(e)(t.parentRequest)},new ps(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return null!==t&&ss(e)(t.parentRequest)},new ps(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&cs(e)(t)(n.parentRequest)},new ps(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&us(t,ds(e))},new ps(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return null!==t&&!us(t,ds(e))},new ps(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&us(t,ss(e))},new ps(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return null!==t&&!us(t,ss(e))},new ps(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&us(n,cs(e)(t))},new ps(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return null!==n&&!us(n,cs(e)(t))},new ps(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&us(t,e)},new ps(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return null!==t&&!us(t,e)},new ps(this._binding)},e}(),ps=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new fs(this._binding)},e.prototype.onDeactivation=function(e){return this._binding.onDeactivation=e,new fs(this._binding)},e}(),hs=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new fs(this._binding),this._bindingOnSyntax=new ps(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),vs=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=Vu.Request,new hs(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=Vu.Singleton,new hs(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=Vu.Transient,new hs(this._binding)},e}(),gs=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new fs(this._binding),this._bindingOnSyntax=new ps(this._binding),this._bindingInSyntax=new vs(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e.prototype.onDeactivation=function(e){return this._bindingOnSyntax.onDeactivation(e)},e}(),ms=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=Lu.Instance,this._binding.implementationType=e,new gs(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("".concat("The toSelf function can only be applied when a constructor is used as service identifier"));var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=Lu.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Vu.Singleton,new hs(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=Lu.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new gs(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=Lu.Constructor,this._binding.implementationType=e,this._binding.scope=Vu.Singleton,new hs(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=Lu.Factory,this._binding.factory=e,this._binding.scope=Vu.Singleton,new hs(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error("Value provided to function binding must be a function!");var t=this.toConstantValue(e);return this._binding.type=Lu.Function,this._binding.scope=Vu.Singleton,t},e.prototype.toAutoFactory=function(e){return this._binding.type=Lu.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},this._binding.scope=Vu.Singleton,new hs(this._binding)},e.prototype.toAutoNamedFactory=function(e){return this._binding.type=Lu.Factory,this._binding.factory=function(t){return function(n){return t.container.getNamed(e,n)}},new hs(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=Lu.Provider,this._binding.provider=e,this._binding.scope=Vu.Singleton,new hs(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}(),ys=function(){function e(){}return e.of=function(t,n,r,o,i){var a=new e;return a.bindings=t,a.middleware=n,a.deactivations=o,a.activations=r,a.moduleActivationStore=i,a},e}();var bs=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(Wu);if(null==t)throw new Error(Wu);var n=this._map.get(e);void 0!==n?n.push(t):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(Wu);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(Gu)},e.prototype.remove=function(e){if(null==e)throw new Error(Wu);if(!this._map.delete(e))throw new Error(Gu)},e.prototype.removeIntersection=function(e){var t=this;this.traverse((function(n,r){var o=e.hasKey(n)?e.get(n):void 0;if(void 0!==o){var i=r.filter((function(e){return!o.some((function(t){return e===t}))}));t._setValue(n,i)}}))},e.prototype.removeByCondition=function(e){var t=this,n=[];return this._map.forEach((function(r,o){for(var i=[],a=0,l=r;a<l.length;a++){var u=l[a];e(u)?n.push(u):i.push(u)}t._setValue(o,i)})),n},e.prototype.hasKey=function(e){if(null==e)throw new Error(Wu);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,function(e){return"object"==typeof e&&null!==e&&"clone"in e&&"function"==typeof e.clone}(e)?e.clone():e)}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e.prototype._setValue=function(e,t){t.length>0?this._map.set(e,t):this._map.delete(e)},e}(),ws=function(){function e(){this._map=new Map}return e.prototype.remove=function(e){if(this._map.has(e)){var t=this._map.get(e);return this._map.delete(e),t}return this._getEmptyHandlersStore()},e.prototype.addDeactivation=function(e,t,n){this._getModuleActivationHandlers(e).onDeactivations.add(t,n)},e.prototype.addActivation=function(e,t,n){this._getModuleActivationHandlers(e).onActivations.add(t,n)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){t._map.set(n,{onActivations:e.onActivations.clone(),onDeactivations:e.onDeactivations.clone()})})),t},e.prototype._getModuleActivationHandlers=function(e){var t=this._map.get(e);return void 0===t&&(t=this._getEmptyHandlersStore(),this._map.set(e,t)),t},e.prototype._getEmptyHandlersStore=function(){return{onActivations:new bs,onDeactivations:new bs}},e}(),_s=globalThis&&globalThis.__assign||function(){return _s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_s.apply(this,arguments)},ks=globalThis&&globalThis.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function l(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(a,l)}u((r=r.apply(e,t||[])).next())}))},Cs=globalThis&&globalThis.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Es=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)(r||!(o in t))&&(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Os=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error("".concat("Invalid Container constructor argument. Container options must be an object."));if(void 0===t.defaultScope)t.defaultScope=Vu.Transient;else if(t.defaultScope!==Vu.Singleton&&t.defaultScope!==Vu.Transient&&t.defaultScope!==Vu.Request)throw new Error("".concat('Invalid Container option. Default scope must be a string ("singleton" or "transient").'));if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error("".concat("Invalid Container option. Auto bind injectable must be a boolean"));if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error("".concat("Invalid Container option. Skip base check must be a boolean"));this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=zu(),this._bindingDictionary=new bs,this._snapshots=[],this._middleware=null,this._activations=new bs,this._deactivations=new bs,this.parent=null,this._metadataReader=new ic,this._moduleActivationStore=new ws}return e.merge=function(t,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=new e,a=Es([t,n],r,!0).map((function(e){return xc(e)})),l=xc(i);return a.forEach((function(e){!function(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}(e,l)})),i},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),r=0,o=e;r<o.length;r++){var i=o[r],a=n(i.id);i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction,a.unbindAsyncFunction,a.onActivationFunction,a.onDeactivationFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ks(this,void 0,void 0,(function(){var t,n,r,o,i;return Cs(this,(function(a){switch(a.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,r=e,a.label=1;case 1:return n<r.length?(o=r[n],i=t(o.id),[4,o.registry(i.bindFunction,i.unbindFunction,i.isboundFunction,i.rebindFunction,i.unbindAsyncFunction,i.onActivationFunction,i.onDeactivationFunction)]):[3,4];case 2:a.sent(),a.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t){var n=e._removeModuleBindings(t.id);e._deactivateSingletons(n),e._removeModuleHandlers(t.id)}))},e.prototype.unloadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ks(this,void 0,void 0,(function(){var t,n,r,o;return Cs(this,(function(i){switch(i.label){case 0:t=0,n=e,i.label=1;case 1:return t<n.length?(r=n[t],o=this._removeModuleBindings(r.id),[4,this._deactivateSingletonsAsync(o)]):[3,4];case 2:i.sent(),this._removeModuleHandlers(r.id),i.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.bind=function(e){var t=this.options.defaultScope||Vu.Transient,n=new Uu(e,t);return this._bindingDictionary.add(e,n),new ms(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.rebindAsync=function(e){return ks(this,void 0,void 0,(function(){return Cs(this,(function(t){switch(t.label){case 0:return[4,this.unbindAsync(e)];case 1:return t.sent(),[2,this.bind(e)]}}))}))},e.prototype.unbind=function(e){if(this._bindingDictionary.hasKey(e)){var t=this._bindingDictionary.get(e);this._deactivateSingletons(t)}this._removeServiceFromDictionary(e)},e.prototype.unbindAsync=function(e){return ks(this,void 0,void 0,(function(){var t;return Cs(this,(function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(e)?(t=this._bindingDictionary.get(e),[4,this._deactivateSingletonsAsync(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(e),[2]}}))}))},e.prototype.unbindAll=function(){var e=this;this._bindingDictionary.traverse((function(t,n){e._deactivateSingletons(n)})),this._bindingDictionary=new bs},e.prototype.unbindAllAsync=function(){return ks(this,void 0,void 0,(function(){var e,t=this;return Cs(this,(function(n){switch(n.label){case 0:return e=[],this._bindingDictionary.traverse((function(n,r){e.push(t._deactivateSingletonsAsync(r))})),[4,Promise.all(e)];case 1:return n.sent(),this._bindingDictionary=new bs,[2]}}))}))},e.prototype.onActivation=function(e,t){this._activations.add(e,t)},e.prototype.onDeactivation=function(e,t){this._deactivations.add(e,t)},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isCurrentBound=function(e){return this._bindingDictionary.hasKey(e)},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,Ou,t)},e.prototype.isBoundTagged=function(e,t,n){var r=!1;if(this._bindingDictionary.hasKey(e)){var o=this._bindingDictionary.get(e),i=function(e,t,n,r){var o=new yc(Bu.Variable,"",t,new hc(n,r)),i=new pc(e);return new Sc(t,i,null,[],o)}(this,e,t,n);r=o.some((function(e){return e.constraint(i)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(e,t,n)),r},e.prototype.snapshot=function(){this._snapshots.push(ys.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error("No snapshot available to restore.");this._bindingDictionary=e.bindings,this._activations=e.activations,this._deactivations=e.deactivations,this._middleware=e.middleware,this._moduleActivationStore=e.moduleActivationStore},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){var t=this._getNotAllArgs(e,!1);return this._getButThrowIfAsync(t)},e.prototype.getAsync=function(e){return ks(this,void 0,void 0,(function(){var t;return Cs(this,(function(n){return t=this._getNotAllArgs(e,!1),[2,this._get(t)]}))}))},e.prototype.getTagged=function(e,t,n){var r=this._getNotAllArgs(e,!1,t,n);return this._getButThrowIfAsync(r)},e.prototype.getTaggedAsync=function(e,t,n){return ks(this,void 0,void 0,(function(){var r;return Cs(this,(function(o){return r=this._getNotAllArgs(e,!1,t,n),[2,this._get(r)]}))}))},e.prototype.getNamed=function(e,t){return this.getTagged(e,Ou,t)},e.prototype.getNamedAsync=function(e,t){return this.getTaggedAsync(e,Ou,t)},e.prototype.getAll=function(e){var t=this._getAllArgs(e);return this._getButThrowIfAsync(t)},e.prototype.getAllAsync=function(e){var t=this._getAllArgs(e);return this._getAll(t)},e.prototype.getAllTagged=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getButThrowIfAsync(r)},e.prototype.getAllTaggedAsync=function(e,t,n){var r=this._getNotAllArgs(e,!0,t,n);return this._getAll(r)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,Ou,t)},e.prototype.getAllNamedAsync=function(e,t){return this.getAllTaggedAsync(e,Ou,t)},e.prototype.resolve=function(e){var t=this.isBound(e);t||this.bind(e).toSelf();var n=this.get(e);return t||this.unbind(e),n},e.prototype._preDestroy=function(e,t){var n,r;if(Reflect.hasMetadata(Fu,e))return null===(r=(n=t)[Reflect.getMetadata(Fu,e).value])||void 0===r?void 0:r.call(n)},e.prototype._removeModuleHandlers=function(e){var t=this._moduleActivationStore.remove(e);this._activations.removeIntersection(t.onActivations),this._deactivations.removeIntersection(t.onDeactivations)},e.prototype._removeModuleBindings=function(e){return this._bindingDictionary.removeByCondition((function(t){return t.moduleId===e}))},e.prototype._deactivate=function(e,t){var n=this,r=Object.getPrototypeOf(t).constructor;try{if(this._deactivations.hasKey(e.serviceIdentifier)){var o=this._deactivateContainer(t,this._deactivations.get(e.serviceIdentifier).values());if(Dc(o))return this._handleDeactivationError(o.then((function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(e,t,r)})),r)}var i=this._propagateContainerDeactivationThenBindingAndPreDestroy(e,t,r);if(Dc(i))return this._handleDeactivationError(i,r)}catch(e){if(e instanceof Error)throw new Error(rc(r.name,e.message))}},e.prototype._handleDeactivationError=function(e,t){return ks(this,void 0,void 0,(function(){var n;return Cs(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e];case 1:return r.sent(),[3,3];case 2:if((n=r.sent())instanceof Error)throw new Error(rc(t.name,n.message));return[3,3];case 3:return[2]}}))}))},e.prototype._deactivateContainer=function(e,t){for(var n=this,r=t.next();r.value;){var o=r.value(e);if(Dc(o))return o.then((function(){return n._deactivateContainerAsync(e,t)}));r=t.next()}},e.prototype._deactivateContainerAsync=function(e,t){return ks(this,void 0,void 0,(function(){var n;return Cs(this,(function(r){switch(r.label){case 0:n=t.next(),r.label=1;case 1:return n.value?[4,n.value(e)]:[3,3];case 2:return r.sent(),n=t.next(),[3,1];case 3:return[2]}}))}))},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(r){var o=e.bind(r);return t(o,n),o}},r=function(n){return function(r){var o=e.rebind(r);return t(o,n),o}},o=function(t){return function(n,r){e._moduleActivationStore.addActivation(t,n,r),e.onActivation(n,r)}},i=function(t){return function(n,r){e._moduleActivationStore.addDeactivation(t,n,r),e.onDeactivation(n,r)}};return function(t){return{bindFunction:n(t),isboundFunction:function(t){return e.isBound(t)},onActivationFunction:o(t),onDeactivationFunction:i(t),rebindFunction:r(t),unbindFunction:function(t){return e.unbind(t)},unbindAsyncFunction:function(t){return e.unbindAsync(t)}}}},e.prototype._getAll=function(e){return Promise.all(this._get(e))},e.prototype._get=function(e){var t=_s(_s({},e),{contextInterceptor:function(e){return e},targetType:Bu.Variable});if(this._middleware){var n=this._middleware(t);if(null==n)throw new Error("Invalid return type in middleware. Middleware must return!");return n}return this._planAndResolve()(t)},e.prototype._getButThrowIfAsync=function(e){var t=this._get(e);if(Pc(t))throw new Error(function(e){return"You are attempting to construct '".concat(e,"' in a synchronous way\n but it has asynchronous dependencies.")}(e.serviceIdentifier));return t},e.prototype._getAllArgs=function(e){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:e}},e.prototype._getNotAllArgs=function(e,t,n,r){return{avoidConstraints:!1,isMultiInject:t,serviceIdentifier:e,key:n,value:r}},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=Ac(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints),r=function(e){return Jc(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}(n=t.contextInterceptor(n));return r}},e.prototype._deactivateIfSingleton=function(e){var t=this;if(e.activated)return Dc(e.cache)?e.cache.then((function(n){return t._deactivate(e,n)})):this._deactivate(e,e.cache)},e.prototype._deactivateSingletons=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(Dc(this._deactivateIfSingleton(r)))throw new Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}},e.prototype._deactivateSingletonsAsync=function(e){return ks(this,void 0,void 0,(function(){var t=this;return Cs(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return t._deactivateIfSingleton(e)})))];case 1:return n.sent(),[2]}}))}))},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(e,t,n){return this.parent?this._deactivate.bind(this.parent)(e,t):this._bindingDeactivationAndPreDestroy(e,t,n)},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(e,t,n){return ks(this,void 0,void 0,(function(){return Cs(this,(function(r){switch(r.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(e,t)]:[3,2];case 1:return r.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(e,t,n)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},e.prototype._removeServiceFromDictionary=function(e){try{this._bindingDictionary.remove(e)}catch{throw new Error("".concat("Could not unbind serviceIdentifier:"," ").concat(uc(e)))}},e.prototype._bindingDeactivationAndPreDestroy=function(e,t,n){var r=this;if("function"==typeof e.onDeactivation){var o=e.onDeactivation(t);if(Dc(o))return o.then((function(){return r._preDestroy(n,t)}))}return this._preDestroy(n,t)},e.prototype._bindingDeactivationAndPreDestroyAsync=function(e,t,n){return ks(this,void 0,void 0,(function(){return Cs(this,(function(r){switch(r.label){case 0:return"function"!=typeof e.onDeactivation?[3,2]:[4,e.onDeactivation(t)];case 1:r.sent(),r.label=2;case 2:return[4,this._preDestroy(n,t)];case 3:return r.sent(),[2]}}))}))},e}(),Ss=function(e){this.id=zu(),this.registry=e};function xs(e,t,n,r){(function(e){if(void 0!==e)throw new Error(Qu)})(t),Is(Au,e,n.toString(),r)}function js(e){var t=[];if(Array.isArray(e)){var n=function(e){for(var t=new Set,n=0,r=e;n<r.length;n++){var o=r[n];if(t.has(o))return o;t.add(o)}}((t=e).map((function(e){return e.key})));if(void 0!==n)throw new Error("".concat(qu," ").concat(n.toString()))}else t=[e];return t}function Is(e,t,n,r){var o=js(r),i={};Reflect.hasOwnMetadata(e,t)&&(i=Reflect.getMetadata(e,t));var a=i[n];if(void 0===a)a=[];else for(var l=function(e){if(o.some((function(t){return t.key===e.key})))throw new Error("".concat(qu," ").concat(e.key.toString()))},u=0,c=a;u<c.length;u++){l(c[u])}a.push.apply(a,o),i[n]=a,Reflect.defineMetadata(e,i,t)}function Rs(e){return function(t,n,r){"number"==typeof r?xs(t,n,r,e):function(e,t,n){if(function(e){return void 0!==e.prototype}(e))throw new Error(Qu);Is(Du,e.constructor,t,n)}(t,n,e)}}var As=function(e){return function(t){return function(n,r,o){if(void 0===t){var i="function"==typeof n?n.name:n.constructor.name;throw new Error(function(e){return"@inject called with undefined this could mean that the class ".concat(e," has ")+"a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."}(i))}return Rs(new hc(e,t))(n,r,o)}}}(Iu);function Ds(){return Rs(new hc(ju,!0))}function Ps(e,t){return function(){return function(n,r){var o=new hc(e,r);if(Reflect.hasOwnMetadata(e,n.constructor))throw new Error(t);Reflect.defineMetadata(e,o,n.constructor)}}}var Ms,Ts,Fs,Ns=Ps(Tu,"Cannot apply @postConstruct decorator multiple times in the same class"),Vs=Ps(Fu,"Cannot apply @preDestroy decorator multiple times in the same class"),Ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Rn<"u"?Rn:typeof self<"u"?self:{};function Bs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $s(e,t){return t.lifecycle===Ts.Lifecycle.singleton?function(e){return e.inSingletonScope()}(e):function(e){return e.inTransientScope()}(e)}function zs(e,t){e.whenTargetNamed(qs(t))}function Us(e,t){return t.bind(Ws(e))}function Hs(e,t){if(t.isBound(Ws(e)))try{return t.rebind(Ws(e))}catch{return t.bind(Ws(e))}return t.bind(Ws(e))}function qs(e){return Fs.isDefinedToken(e)?e.symbol:e}function Ws(e){return Fs.isDefinedToken(e)?e.symbol:e}!function(e){!function(t){var n="object"==typeof Ls?Ls:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=o(e);function o(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}typeof n.Reflect>"u"?n.Reflect=e:r=o(n.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,a={__proto__:[]}instanceof Array,l=!i&&!a,u={create:i?function(){return re(Object.create(null))}:a?function(){return re({__proto__:null})}:function(){return re({})},has:l?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:l?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),s="object"==typeof Mn.exports&&Mn.exports.env&&"true"===Mn.exports.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=s||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,f=s||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,p=new(s||"function"!=typeof WeakMap?ne():WeakMap);function h(e,t,n,r){if(T(n)){if(!H(e))throw new TypeError;if(!W(t))throw new TypeError;return E(e,t)}if(!H(e))throw new TypeError;if(!V(t))throw new TypeError;if(!V(r)&&!T(r)&&!F(r))throw new TypeError;return F(r)&&(r=void 0),O(e,t,n=U(n),r)}function v(e,t){function n(n,r){if(!V(n))throw new TypeError;if(!T(r)&&!G(r))throw new TypeError;A(e,t,n,r)}return n}function g(e,t,n,r){if(!V(n))throw new TypeError;return T(r)||(r=U(r)),A(e,t,n,r)}function m(e,t,n){if(!V(t))throw new TypeError;return T(n)||(n=U(n)),x(e,t,n)}function y(e,t,n){if(!V(t))throw new TypeError;return T(n)||(n=U(n)),j(e,t,n)}function b(e,t,n){if(!V(t))throw new TypeError;return T(n)||(n=U(n)),I(e,t,n)}function w(e,t,n){if(!V(t))throw new TypeError;return T(n)||(n=U(n)),R(e,t,n)}function _(e,t){if(!V(e))throw new TypeError;return T(t)||(t=U(t)),D(e,t)}function k(e,t){if(!V(e))throw new TypeError;return T(t)||(t=U(t)),P(e,t)}function C(e,t,n){if(!V(t))throw new TypeError;T(n)||(n=U(n));var r=S(t,n,!1);if(T(r)||!r.delete(e))return!1;if(r.size>0)return!0;var o=p.get(t);return o.delete(n),o.size>0||p.delete(t),!0}function E(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!T(r)&&!F(r)){if(!W(r))throw new TypeError;t=r}}return t}function O(e,t,n,r){for(var o=e.length-1;o>=0;--o){var i=(0,e[o])(t,n,r);if(!T(i)&&!F(i)){if(!V(i))throw new TypeError;r=i}}return r}function S(e,t,n){var r=p.get(e);if(T(r)){if(!n)return;r=new d,p.set(e,r)}var o=r.get(t);if(T(o)){if(!n)return;o=new d,r.set(t,o)}return o}function x(e,t,n){if(j(e,t,n))return!0;var r=Q(t);return!F(r)&&x(e,r,n)}function j(e,t,n){var r=S(t,n,!1);return!T(r)&&$(r.has(e))}function I(e,t,n){if(j(e,t,n))return R(e,t,n);var r=Q(t);return F(r)?void 0:I(e,r,n)}function R(e,t,n){var r=S(t,n,!1);if(!T(r))return r.get(e)}function A(e,t,n,r){S(n,r,!0).set(e,t)}function D(e,t){var n=P(e,t),r=Q(e);if(null===r)return n;var o=D(r,t);if(o.length<=0)return n;if(n.length<=0)return o;for(var i=new f,a=[],l=0,u=n;l<u.length;l++){var c=u[l];i.has(c)||(i.add(c),a.push(c))}for(var s=0,d=o;s<d.length;s++){c=d[s];i.has(c)||(i.add(c),a.push(c))}return a}function P(e,t){var n=[],r=S(e,t,!1);if(T(r))return n;for(var o=Y(r.keys()),i=0;;){var a=J(o);if(!a)return n.length=i,n;var l=X(a);try{n[i]=l}catch(e){try{Z(o)}finally{throw e}}i++}}function M(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function T(e){return void 0===e}function F(e){return null===e}function N(e){return"symbol"==typeof e}function V(e){return"object"==typeof e?null!==e:"function"==typeof e}function L(e,t){switch(M(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",o=K(e,r);if(void 0!==o){var i=o.call(e,n);if(V(i))throw new TypeError;return i}return B(e,"default"===n?"number":n)}function B(e,t){if("string"===t){var n=e.toString;if(q(n))if(!V(o=n.call(e)))return o;if(q(r=e.valueOf))if(!V(o=r.call(e)))return o}else{var r;if(q(r=e.valueOf))if(!V(o=r.call(e)))return o;var o,i=e.toString;if(q(i))if(!V(o=i.call(e)))return o}throw new TypeError}function $(e){return!!e}function z(e){return""+e}function U(e){var t=L(e,3);return N(t)?t:z(t)}function H(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function q(e){return"function"==typeof e}function W(e){return"function"==typeof e}function G(e){switch(M(e)){case 3:case 4:return!0;default:return!1}}function K(e,t){var n=e[t];if(null!=n){if(!q(n))throw new TypeError;return n}}function Y(e){var t=K(e,o);if(!q(t))throw new TypeError;var n=t.call(e);if(!V(n))throw new TypeError;return n}function X(e){return e.value}function J(e){var t=e.next();return!t.done&&t}function Z(e){var t=e.return;t&&t.call(e)}function Q(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c||t!==c)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var o=r.constructor;return"function"!=typeof o||o===e?t:o}function ee(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function a(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}()}function ne(){var e=16,n=u.create(),r=o();return function(){function e(){this._key=o()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=o()},e}();function o(){var e;do{e="@@WeakMap@@"+c()}while(u.has(n,e));return n[e]=!0,e}function i(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:u.create()})}return e[r]}function a(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function l(e){return"function"==typeof Uint8Array?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(e)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e):a(new Array(e),e)}function c(){var t=l(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var o=t[r];(4===r||6===r||8===r)&&(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}function re(e){return e.__=void 0,delete e.__,e}e("decorate",h),e("metadata",v),e("defineMetadata",g),e("hasMetadata",m),e("hasOwnMetadata",y),e("getMetadata",b),e("getOwnMetadata",w),e("getMetadataKeys",_),e("getOwnMetadataKeys",k),e("deleteMetadata",C)}(r)}()}(Ms||(Ms={})),(e=>{e.defineToken=(t,n={multiple:!0,global:!1})=>new e.DefinedToken(t,n);var t;e.DefinedToken=class{constructor(e,t={}){this.prototype={};const{multiple:n=!1,global:r}=t;this.name=e,this.symbol=r?Symbol.for(this.name):Symbol(this.name),this.multiple=n}},e.isModule=function(e){return!!e&&"object"==typeof e&&"id"in e},(t=e.Lifecycle||(e.Lifecycle={})).singleton="singleton",t.transient="transient",e.ClassOptionSymbol=Symbol.for("SyringeClassOption"),e.DefaultOption={lifecycle:"transient"}})(Ts||(Ts={})),(e=>{e.toArray=function(e){return Array.isArray(e)?e:void 0===e?[]:[e]},e.isClass=function(e){return!(!e||"function"!=typeof e||!("prototype"in e))},e.isDefinedToken=function(e){return!!(e&&"object"==typeof e&&"symbol"in e&&"multiple"in e)},e.isInjectOption=function(e){return!(!e||"object"!=typeof e||!("token"in e))},e.isNamedToken=function(e){return!!(e&&"object"==typeof e&&"token"in e&&"named"in e)},e.isMultipleEnabled=function(t){return e.isDefinedToken(t)&&t.multiple}})(Fs||(Fs={}));const Gs=new Os;function Ks(e={}){const t=function(e){if(Reflect.hasOwnMetadata(Pu,e))throw new Error(Hu);var t=Reflect.getMetadata(Mu,e)||[];return Reflect.defineMetadata(Pu,t,e),e};return n=>{Reflect.defineMetadata(Ts.ClassOptionSymbol,{...e,target:n},n),t(n)}}function Ys(e={}){return(t,...n)=>(Ks({...e,lifecycle:Ts.Lifecycle.singleton})(t,...n),t)}function Xs(e){return As(e instanceof gc?e:Ws(e))}function Js(e){return function(e){return Rs(new hc(Ou,e))}(qs(e))}const Zs=Symbol.for("SyringeSideOption");const Qs=class e{static resolveTarget(t,n,r={}){try{try{const r=Reflect.getMetadata(Zs,n);r&&e.resolveOption(t,r)}catch{}if(Fs.isClass(n))if(r.useClass){const e=Fs.toArray(r.useClass);e.unshift(n),r.useClass=e}else r.useClass=[n];let o;try{o=Reflect.getMetadata(Ts.ClassOptionSymbol,n)}catch{}if(o={...o||{},...r},o.token){const e=Fs.toArray(o.token);e.unshift(n),o.token=e}else o.token=[n];e.resolveOption(t,o)}catch{}}static resolveOption(t,n){const r=function(e){const t=Fs.toArray(e.token),n=Fs.toArray(e.useClass),r=Fs.toArray(e.useDynamic),o=Fs.toArray(e.useFactory),i=Fs.toArray(e.contrib),a=e.lifecycle||Ts.Lifecycle.transient,l={token:t,useClass:n,lifecycle:i.length>0?Ts.Lifecycle.singleton:a,contrib:i,useDynamic:r,useFactory:o};return"useValue"in e&&(l.useValue=e.useValue),l}({...e.globalConfig,...n});0===r.useClass.length&&0===r.useDynamic.length&&0===r.useFactory.length&&!("useValue"in r)||r.token.forEach((n=>{new e(t,n,{...r}).resolve()}))}constructor(e,t,n){this.register=e,this.token=t,this.option=n,this.rawToken=Fs.isNamedToken(t)?t.token:t,this.named=Fs.isNamedToken(t)?t.named:void 0,this.mutiple=!!this.named||Fs.isMultipleEnabled(this.rawToken),this.generalToken=this.rawToken}resolve(){const{register:e}=this;(function(e){return e&&"object"==typeof e&&"bind"in e&&"unbind"in e&&"rebind"in e&&"isBound"in e})(e)&&(this.mutiple?this.resolveMutilple(e):(this.resolveMono(e),!this.named&&this.option.contrib.length>0&&this.option.contrib.forEach((t=>{Fs.isMultipleEnabled(t)?Us(t,e).toService(this.generalToken):Hs(t,e).toService(this.generalToken)}))))}resolveMono(e){if("useValue"in this.option)return Hs(this.generalToken,e).toConstantValue(this.option.useValue);if(this.option.useDynamic.length>0){const t=this.option.useDynamic[this.option.useDynamic.length-1];return $s(Hs(this.generalToken,e).toDynamicValue((e=>{const n=md.getContainer(e.container);return t({container:n})})),this.option)}if(this.option.useFactory.length>0){const t=this.option.useFactory[this.option.useFactory.length-1];return Hs(this.generalToken,e).toFactory((e=>{const n=md.getContainer(e.container);return t({container:n})}))}if(this.option.useClass.length>0){const t=this.option.useClass[this.option.useClass.length-1];return $s(Hs(this.generalToken,e).to(t),this.option)}}resolveMutilple(e){const t=this.option.useClass.map((t=>$s(Us(this.generalToken,e).to(t),this.option))),n=this.option.useDynamic.map((t=>$s(Us(this.generalToken,e).toDynamicValue((e=>{const n=md.getContainer(e.container);return t({container:n})})),this.option))),r=this.option.useFactory.map((t=>Us(this.generalToken,e).toFactory((e=>{const n=md.getContainer(e.container);return t({container:n})})))),o="useValue"in this.option?Us(this.generalToken,e).toConstantValue(this.option.useValue):void 0;this.named&&(t.forEach((e=>this.named&&zs(e,this.named))),n.forEach((e=>this.named&&zs(e,this.named))),r.forEach((e=>this.named&&zs(e,this.named))),o&&zs(o,this.named))}};Qs.globalConfig=Ts.DefaultOption;let ed=Qs;const td=Ts.defineToken("SyringeContributionProvider",{global:!0});var nd,rd,od;(e=>{function t(e){return{dispose:e}}e.is=function(e){return!!e&&"object"==typeof e&&"dispose"in e&&"function"==typeof e.dispose},e.create=t,e.NONE=t((()=>{}))})(nd||(nd={})),(e=>{e.is=function(e){return!!e&&"object"==typeof e&&"disposed"in e&&"boolean"==typeof e.disposed}})(rd||(rd={})),(e=>{e.None=()=>nd.NONE,e.map=function(e,t){return(n,r)=>e((e=>n.call(r,t(e))),void 0)}})(od||(od={}));class id{constructor(e=!1){this.mono=!1,this.mono=e}get length(){return this._callbacks&&this._callbacks.length||0}add(e,t=void 0){this._callbacks||(this._callbacks=[]),this._callbacks.push([e,t])}remove(e,t=void 0){if(!this._callbacks)return;let n=!1;for(let r=0;r<this._callbacks.length;r+=1)if(this._callbacks[r][0]===e){if(this._callbacks[r][1]===t)return void this._callbacks.splice(r,1);n=!0}if(n)throw new Error("You should remove it with the same context you add it")}[Symbol.iterator](){return this._callbacks?this._callbacks.slice(0).map((e=>(...t)=>e[0].apply(e[1],t)))[Symbol.iterator]():[][Symbol.iterator]()}invoke(...e){const t=[];for(const n of this)try{t.push(n(...e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0}}const ad=class e{constructor(e){this._disposed=!1,this._options=e}get event(){return this._event||(this._event=(t,n,r)=>{this._callbacks||(this._callbacks=new id),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,n);const o={dispose:()=>{o.dispose=e._noop,this._disposed||(this._callbacks.remove(t,n),o.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke(e)}async sequence(e){if(this._callbacks)for(const t of this._callbacks)if(!await e(t))break}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0),this._disposed=!0}};ad._noop=()=>{};let ld=ad;class ud{constructor(...e){this.disposables=[],this.onDisposeEmitter=new ld,this.disposingElements=!1,e.forEach((e=>this.push(e)))}get onDispose(){return this.onDisposeEmitter.event}checkDisposed(){this.disposed&&!this.disposingElements&&(this.onDisposeEmitter.fire(void 0),this.onDisposeEmitter.dispose())}get disposed(){return 0===this.disposables.length}dispose(){if(!this.disposed&&!this.disposingElements){for(this.disposingElements=!0;!this.disposed;)try{this.disposables.pop().dispose()}catch(e){console.error(e)}this.disposingElements=!1,this.checkDisposed()}}push(e){const{disposables:t}=this;t.push(e);const n=e.dispose.bind(e),r=nd.create((()=>{const n=t.indexOf(e);-1!==n&&t.splice(n,1),this.checkDisposed()}));return e.dispose=()=>{r.dispose(),n()},r}pushAll(e){return e.map((e=>this.push(e)))}}class cd{constructor(e,t,n){this.onChangedEmitter=new ld,this.option={recursive:!1,cache:!0},this.toDispose=new ud,this.onCtxChanged=()=>{this.services=void 0,this.onChangedEmitter.fire()},this.container=t,this.serviceIdentifier=e,n&&(this.option={...this.option,...n}),this.toDispose.push(this.onChangedEmitter),this.toDispose.push(this.container.onModuleChanged(this.onCtxChanged)),this.toDispose.push(this.container.onRegistered(this.onCtxChanged))}get onChanged(){return this.onChangedEmitter.event}dispose(){this.toDispose.dispose(),this.disposed=!0}getServices(e){const t=[];let n=this.container;for(;n;){if(n.isBound(this.serviceIdentifier)){const e=n.getAll(this.serviceIdentifier);t.push(...e)}n=e?n.parent:void 0}return t}getContributions(e={}){const{cache:t,recursive:n=!0}={...this.option,...e};return(!t||void 0===this.services)&&(this.services=this.getServices(!!n)),this.services}}function sd(e,t,n){e({token:{token:td,named:t},useDynamic:e=>new cd(t,e.container,n),lifecycle:Ts.Lifecycle.singleton})}class dd{constructor(e){this.inversifyRegister=(e,t,n,r)=>{const o={bind:e,unbind:t,isBound:n,rebind:r},i=(e,t={})=>{Fs.isInjectOption(e)?ed.resolveOption(o,e):ed.resolveTarget(o,e,t)};this.baseRegistry&&this.baseRegistry(i),this.optionCollection&&this.optionCollection.forEach((e=>i(e)))},this.baseRegistry=e,this.inversifyModule=new Ss(this.inversifyRegister),this.id=this.inversifyModule.id}get options(){return this.optionCollection||(this.optionCollection=[]),this.optionCollection}register(...e){return e.forEach((e=>this.options.push(e))),this}contribution(...e){return e.forEach((e=>this.options.push(function(e,t){return{token:{token:td,named:e},useDynamic:n=>new cd(e,n.container,t),lifecycle:Ts.Lifecycle.singleton}}(e)))),this}}function fd(e){return e&&"inversifyModule"in e}function pd(e){return new dd(e)}const hd="abcdefghigklmnopqrstuvwxyz",vd=hd+"0123456789"+hd.toUpperCase();const gd=new Map;class md{constructor(e){this.toDisposeOnParentChange=new ud,this.onModuleChangedEmitter=new ld,this.id=function(e){if((e=e||6)<2)throw new RangeError("n 不能小于 2");let t="";for(let n=0;n<e;n++)t+=vd.charAt(Math.floor(Math.random()*vd.length));return t}(),this.onRegisteredEmitter=new ld,this.loadedModules=[],this.inversify=!0,this.container=e||new Os,md.setContainer(this.container,this)}get onModuleChanged(){return this.onModuleChangedEmitter.event}get onRegistered(){return this.onRegisteredEmitter.event}get parent(){return this._parent}set parent(e){this._parent=e,this.toDisposeOnParentChange&&(this.toDisposeOnParentChange.dispose(),this.toDisposeOnParentChange=new ud),e&&(this.toDisposeOnParentChange.push(e.onModuleChanged((()=>{this.onModuleChangedEmitter.fire()}))),this.toDisposeOnParentChange.push(e.onRegistered((()=>{this.onRegisteredEmitter.fire()}))))}static setContainer(e,t){return gd.set(e.id,t)}static getContainer(e){const t=gd.get(e.id);if(!t){const t=new md(e);return md.setContainer(e,t),t}return t}static config(e){ed.globalConfig=e}dispose(){this.toDisposeOnParentChange.dispose(),this.onModuleChangedEmitter.dispose(),this.onRegisteredEmitter.dispose(),this.disposed=!0}load(e,t){return t||!this.loadedModules.includes(e.id)?(fd(e)?(this.container.load(e.inversifyModule),this.onModuleChangedEmitter.fire()):console.warn("Unsupported module.",e),this.loadedModules.push(e.id),{dispose:()=>{this.unload(e)}}):{dispose:()=>{}}}unload(e){fd(e)&&(this.container.unload(e.inversifyModule),this.onModuleChangedEmitter.fire(),this.loadedModules=this.loadedModules.filter((t=>t!==e.id)))}remove(e){return this.container.unbind(Ws(e))}get(e){let t;const n=Ws(e);try{t=this.container.get(n)}catch(e){if(e.message.includes("No matching bindings found")&&this.parent)return this.parent.get(n);throw e}return t}getNamed(e,t){return this.container.getNamed(Ws(e),qs(t))}getAll(e){return this.container.getAll(Ws(e))}getAllNamed(e,t){return this.container.getAllNamed(Ws(e),qs(t))}isBound(e){return this.container.isBound(Ws(e))}isBoundNamed(e,t){return this.container.isBoundNamed(Ws(e),qs(t))}createChild(){const e=this.container.createChild(),t=new md(e);return t.parent=this,t}register(e,t={}){Fs.isInjectOption(e)?ed.resolveOption(this.container,e):ed.resolveTarget(this.container,e,t),this.onRegisteredEmitter.fire()}}const yd=new md(Gs);yd.register.bind(yd);const bd=e=>(t,n,r)=>{Js(e)(t,n,r),Xs(td)(t,n,r)};var wd;(e=>{e.Provider=td,e.register=sd})(wd||(wd={}));var _d,kd,Cd={exports:{}};function Ed(){if(kd)return _d;kd=1;var e=1e3,t=60*e,n=60*t,r=24*n,o=7*r,i=365.25*r;function a(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}return _d=function(l,u){u=u||{};var c=typeof l;if("string"===c&&l.length>0)return function(a){if(a=String(a),!(a.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(l){var u=parseFloat(l[1]);switch((l[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*i;case"weeks":case"week":case"w":return u*o;case"days":case"day":case"d":return u*r;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*t;case"seconds":case"second":case"secs":case"sec":case"s":return u*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}(l);if("number"===c&&isFinite(l))return u.long?function(o){var i=Math.abs(o);return i>=r?a(o,i,r,"day"):i>=n?a(o,i,n,"hour"):i>=t?a(o,i,t,"minute"):i>=e?a(o,i,e,"second"):o+" ms"}(l):function(o){var i=Math.abs(o);return i>=r?Math.round(o/r)+"d":i>=n?Math.round(o/n)+"h":i>=t?Math.round(o/t)+"m":i>=e?Math.round(o/e)+"s":o+"ms"}(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))}}var Od=function(e){function t(e){let r,o,i,a=null;function l(...e){if(!l.enabled)return;const n=l,o=Number(new Date),i=o-(r||o);n.diff=i,n.prev=r,n.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";a++;const i=t.formatters[o];if("function"==typeof i){const t=e[a];r=i.call(n,t),e.splice(a,1),a--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return l.namespace=e,l.useColors=t.useColors(),l.color=t.selectColor(e),l.extend=n,l.destroy=t.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{a=e}}),"function"==typeof t.init&&t.init(l),l}function n(e,n){const r=t(this.namespace+(typeof n>"u"?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=Ed(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch{}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch{}return!e&&typeof Mn.exports<"u"&&"env"in Mn.exports&&(e=Mn.exports.env.DEBUG),e},t.useColors=function(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch{}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=Od(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(Cd,Cd.exports);Bs(Cd.exports)("di");const Sd=()=>new Map,xd=e=>{const t=Sd();return e.forEach(((e,n)=>{t.set(n,e)})),t},jd=(e,t,n)=>{let r=e.get(t);return void 0===r&&e.set(t,r=n()),r},Id=()=>new Set,Rd=e=>e[e.length-1],Ad=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},Dd=Array.from,Pd=Array.isArray;class Md{constructor(){this._observers=Sd()}on(e,t){jd(this._observers,e,Id).add(t)}once(e,t){const n=(...r)=>{this.off(e,n),t(...r)};this.on(e,n)}off(e,t){const n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}emit(e,t){return Dd((this._observers.get(e)||Sd()).values()).forEach((e=>e(...t)))}destroy(){this._observers=Sd()}}const Td=Math.floor,Fd=Math.abs,Nd=(e,t)=>e<t?e:t,Vd=(e,t)=>e>t?e:t,Ld=128,Bd=127,$d=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&Td(e)===e),zd=/^\s*/g,Ud=/([A-Z])/g,Hd=(e,t)=>(e=>e.replace(zd,""))(e.replace(Ud,(e=>`${t}${(e=>e.toLowerCase())(e)}`))),qd=typeof TextEncoder<"u"?new TextEncoder:null,Wd=qd?e=>qd.encode(e):e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.codePointAt(e);return r};let Gd=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Gd&&1===Gd.decode(new Uint8Array).length&&(Gd=null);class Kd{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Yd=()=>new Kd,Xd=e=>{const t=new Uint8Array((e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t})(e));let n=0;for(let r=0;r<e.bufs.length;r++){const o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},Jd=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},Zd=Jd,Qd=(e,t)=>{for(;t>Bd;)Jd(e,Ld|Bd&t),t=Td(t/128);Jd(e,Bd&t)},ef=(e,t)=>{const n=(e=>0!==e?e<0:1/e<0)(t);for(n&&(t=-t),Jd(e,(t>63?Ld:0)|(n?64:0)|63&t),t=Td(t/64);t>0;)Jd(e,(t>Bd?Ld:0)|Bd&t),t=Td(t/128)},tf=new Uint8Array(3e4),nf=tf.length/3,rf=qd&&qd.encodeInto?(e,t)=>{if(t.length<nf){const n=qd.encodeInto(t,tf).written||0;Qd(e,n);for(let t=0;t<n;t++)Jd(e,tf[t])}else af(e,Wd(t))}:(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;Qd(e,r);for(let t=0;t<r;t++)Jd(e,n.codePointAt(t))},of=(e,t)=>{const n=e.cbuf.length,r=e.cpos,o=Nd(n-r,t.length),i=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(Vd(2*n,i)),e.cbuf.set(t.subarray(o)),e.cpos=i)},af=(e,t)=>{Qd(e,t.byteLength),of(e,t)},lf=(e,t)=>{((e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*Vd(n,t)),e.cpos=0)})(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},uf=new DataView(new ArrayBuffer(4)),cf=(e,t)=>{switch(typeof t){case"string":Jd(e,119),rf(e,t);break;case"number":$d(t)&&Fd(t)<=2147483647?(Jd(e,125),ef(e,t)):(e=>(uf.setFloat32(0,e),uf.getFloat32(0)===e))(t)?(Jd(e,124),((e,t)=>{lf(e,4).setFloat32(0,t,!1)})(e,t)):(Jd(e,123),((e,t)=>{lf(e,8).setFloat64(0,t,!1)})(e,t));break;case"bigint":Jd(e,122),((e,t)=>{lf(e,8).setBigInt64(0,t,!1)})(e,t);break;case"object":if(null===t)Jd(e,126);else if(Pd(t)){Jd(e,117),Qd(e,t.length);for(let n=0;n<t.length;n++)cf(e,t[n])}else if(t instanceof Uint8Array)Jd(e,116),af(e,t);else{Jd(e,118);const n=Object.keys(t);Qd(e,n.length);for(let r=0;r<n.length;r++){const o=n[r];rf(e,o),cf(e,t[o])}}break;case"boolean":Jd(e,t?120:121);break;default:Jd(e,127)}};class sf extends Kd{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Qd(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const df=e=>{e.count>0&&(ef(e.encoder,1===e.count?e.s:-e.s),e.count>1&&Qd(e.encoder,e.count-2))};class ff{constructor(){this.encoder=new Kd,this.s=0,this.count=0}write(e){this.s===e?this.count++:(df(this),this.count=1,this.s=e)}toUint8Array(){return df(this),Xd(this.encoder)}}const pf=e=>{if(e.count>0){const t=2*e.diff+(1===e.count?0:1);ef(e.encoder,t),e.count>1&&Qd(e.encoder,e.count-2)}};class hf{constructor(){this.encoder=new Kd,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(pf(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return pf(this),Xd(this.encoder)}}class vf{constructor(){this.sarr=[],this.s="",this.lensE=new ff}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Kd;return this.sarr.push(this.s),this.s="",rf(e,this.sarr.join("")),of(e,this.lensE.toUint8Array()),Xd(e)}}const gf=e=>new Error(e),mf=()=>{throw gf("Method unimplemented")},yf=()=>{throw gf("Unexpected case")},bf=crypto.getRandomValues.bind(crypto),wf=()=>bf(new Uint32Array(1))[0],_f=[1e7]+-1e3+-4e3+-8e3+-1e11,kf=()=>_f.replace(/[018]/g,(e=>(e^wf()&15>>e/4).toString(16))),Cf=Date.now,Ef=e=>new Promise(e);Promise.all.bind(Promise);for(var Of={},Sf={byteLength:function(e){var t=Df(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=Df(e),o=r[0],i=r[1],a=new If(function(e,t,n){return 3*(t+n)/4-n}(0,o,i)),l=0,u=i>0?o-4:o;for(n=0;n<u;n+=4)t=jf[e.charCodeAt(n)]<<18|jf[e.charCodeAt(n+1)]<<12|jf[e.charCodeAt(n+2)]<<6|jf[e.charCodeAt(n+3)],a[l++]=t>>16&255,a[l++]=t>>8&255,a[l++]=255&t;return 2===i&&(t=jf[e.charCodeAt(n)]<<2|jf[e.charCodeAt(n+1)]>>4,a[l++]=255&t),1===i&&(t=jf[e.charCodeAt(n)]<<10|jf[e.charCodeAt(n+1)]<<4|jf[e.charCodeAt(n+2)]>>2,a[l++]=t>>8&255,a[l++]=255&t),a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,o=[],i=16383,a=0,l=n-r;a<l;a+=i)o.push(Mf(e,a,a+i>l?l:a+i));return 1===r?(t=e[n-1],o.push(xf[t>>2]+xf[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(xf[t>>10]+xf[t>>4&63]+xf[t<<2&63]+"=")),o.join("")}},xf=[],jf=[],If=typeof Uint8Array<"u"?Uint8Array:Array,Rf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Af=0;Af<64;++Af)xf[Af]=Rf[Af],jf[Rf.charCodeAt(Af)]=Af;function Df(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function Pf(e){return xf[e>>18&63]+xf[e>>12&63]+xf[e>>6&63]+xf[63&e]}function Mf(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(Pf(r));return o.join("")}jf["-".charCodeAt(0)]=62,jf["_".charCodeAt(0)]=63;var Tf={read:function(e,t,n,r,o){var i,a,l=8*o-r-1,u=(1<<l)-1,c=u>>1,s=-7,d=n?o-1:0,f=n?-1:1,p=e[t+d];for(d+=f,i=p&(1<<-s)-1,p>>=-s,s+=l;s>0;i=256*i+e[t+d],d+=f,s-=8);for(a=i&(1<<-s)-1,i>>=-s,s+=r;s>0;a=256*a+e[t+d],d+=f,s-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=c}return(p?-1:1)*a*Math.pow(2,i-r)},write:function(e,t,n,r,o,i){var a,l,u,c=8*i-o-1,s=(1<<c)-1,d=s>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=s):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=s?(l=0,a=s):a+d>=1?(l=(t*u-1)*Math.pow(2,o),a+=d):(l=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[n+p]=255&l,p+=h,l/=256,o-=8);for(a=a<<o|l,c+=o;c>0;e[n+p]=255&a,p+=h,a/=256,c-=8);e[n+p-h]|=128*v}};!function(e){var t=Sf,n=Tf,r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},e.INSPECT_MAX_BYTES=50;var o=2147483647;function i(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|p(e,t),r=i(n),o=r.write(e,t);return o!==n&&(r=r.slice(0,o)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(L(e,Uint8Array)){var t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return s(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(L(e,ArrayBuffer)||e&&L(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(L(e,SharedArrayBuffer)||e&&L(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var o=function(e){if(a.isBuffer(e)){var t=0|f(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||B(e.length)?i(0):s(e);if("Buffer"===e.type&&Array.isArray(e.data))return s(e.data)}(e);if(o)return o;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),i(e<0?0:0|f(e))}function s(e){for(var t=e.length<0?0:0|f(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function f(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function p(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||L(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(e).length;default:if(o)return r?-1:F(e).length;t=(""+t).toLowerCase(),o=!0}}function h(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),B(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,o){var i,a=1,l=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,l/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var s=-1;for(i=n;i<l;i++)if(c(e,i)===c(t,-1===s?0:i-s)){if(-1===s&&(s=i),i-s+1===u)return s*a}else-1!==s&&(i-=i-s),s=-1}else for(n+u>l&&(n=l-u),i=n;i>=0;i--){for(var d=!0,f=0;f<u;f++)if(c(e,i+f)!==c(t,f)){d=!1;break}if(d)return i}return-1}function y(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;r>i/2&&(r=i/2);for(var a=0;a<r;++a){var l=parseInt(t.substr(2*a,2),16);if(B(l))return a;e[n+a]=l}return a}function b(e,t,n,r){return V(F(t,e.length-n),e,n,r)}function w(e,t,n,r){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return V(N(t),e,n,r)}function k(e,t,n,r){return V(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function C(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,l,u,c=e[o],s=null,d=c>239?4:c>223?3:c>191?2:1;if(o+d<=n)switch(d){case 1:c<128&&(s=c);break;case 2:128==(192&(i=e[o+1]))&&((u=(31&c)<<6|63&i)>127&&(s=u));break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&((u=(15&c)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(s=u));break;case 4:i=e[o+1],a=e[o+2],l=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&l)&&((u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&l)>65535&&u<1114112&&(s=u))}null===s?(s=65533,d=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),o+=d}return function(e){var t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=O));return n}(r)}e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}(e,t,n)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(L(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),L(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(L(i,Uint8Array))o+i.length>r.length?a.from(i).copy(r,o):Uint8Array.prototype.set.call(r,i,o);else{if(!a.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o)}o+=i.length}return r},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):h.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,o){if(L(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),l=(n>>>=0)-(t>>>=0),u=Math.min(i,l),c=this.slice(r,o),s=e.slice(t,n),d=0;d<u;++d)if(c[d]!==s[d]){i=c[d],l=s[d];break}return i<l?-1:l<i?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return _(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function S(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function j(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=$[e[i]];return o}function I(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length-1;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,n,r,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,r,o,i){return t=+t,r>>>=0,i||D(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function M(e,t,r,o,i){return t=+t,r>>>=0,i||D(e,0,r,8),n.write(e,t,r,o,52,8),r+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},a.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||A(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||A(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);A(this,e,t,n,o-1,-o)}var i=0,a=1,l=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===l&&0!==this[t+i-1]&&(l=1),this[t+i]=(e/a>>0)-l&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);A(this,e,t,n,o-1,-o)}var i=n-1,a=1,l=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===l&&0!==this[t+i+1]&&(l=1),this[t+i]=(e/a>>0)-l&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||A(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&0!==r&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var l=a.isBuffer(e)?e:a.from(e,r),u=l.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=l[i%u]}return this};var T=/[^+/0-9A-Za-z-_]/g;function F(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function N(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function B(e){return e!=e}var $=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,o=0;o<16;++o)t[r+o]=e[n]+e[o];return t}()}(Of);let Ff=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},Nf=!0;try{typeof localStorage<"u"&&localStorage&&(Ff=localStorage,Nf=!1)}catch{}const Vf=Ff,Lf=Object.assign,Bf=Object.keys,$f=e=>Bf(e).length,zf=(e,t)=>e===t||$f(e)===$f(t)&&((e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0})(e,((e,n)=>(void 0!==e||((e,t)=>Object.prototype.hasOwnProperty.call(e,t))(t,n))&&t[n]===e)),Uf=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&Uf(e,t,n+1)}},Hf=typeof Mn.exports<"u"&&Mn.exports.release&&/node|io\.js/.test(Mn.exports.release.name)&&"[object process]"===Object.prototype.toString.call(typeof Mn.exports<"u"?Mn.exports:0);let qf;typeof navigator<"u"&&/Mac/.test(navigator.platform);const Wf=e=>(()=>{if(void 0===qf)if(Hf){qf=Sd();const e=Mn.exports.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];"-"===r[0]?(null!==t&&qf.set(t,""),t=r):null!==t&&(qf.set(t,r),t=null)}null!==t&&qf.set(t,"")}else"object"==typeof location?(qf=Sd(),(location.search||"?").slice(1).split("&").forEach((e=>{if(0!==e.length){const[t,n]=e.split("=");qf.set(`--${Hd(t,"-")}`,n),qf.set(`-${Hd(t,"-")}`,n)}}))):qf=Sd();return qf})().has(e),Gf=e=>(e=>void 0===e?null:e)(Hf?Mn.exports.env[e.toUpperCase().replaceAll("-","_")]:Vf.getItem(e));(e=>{Wf("--"+e)||Gf(e)})("production");const Kf=Hf&&((e,t)=>t.includes(e))(Mn.exports.env.FORCE_COLOR,["true","1","2"]),Yf=!Wf("--no-colors")&&(!Hf||Mn.exports.stdout.isTTY||Kf)&&(!Hf||Wf("--color")||Kf||null!==Gf("COLORTERM")||(Gf("TERM")||"").includes("color"));class Xf{constructor(e,t){this.left=e,this.right=t}}const Jf=(e,t)=>new Xf(e,t),Zf=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const Qf=e=>((e,t)=>{const n=[];for(const[r,o]of e)n.push(t(o,r));return n})(e,((e,t)=>`${t}:${e};`)).join("");Zf.ELEMENT_NODE,Zf.TEXT_NODE,Zf.CDATA_SECTION_NODE,Zf.COMMENT_NODE,Zf.DOCUMENT_NODE,Zf.DOCUMENT_TYPE_NODE,Zf.DOCUMENT_FRAGMENT_NODE;const ep=Symbol,tp=ep(),np=ep(),rp=ep(),op=ep(),ip=ep(),ap=ep(),lp=ep(),up=ep(),cp=ep(),sp={[tp]:Jf("font-weight","bold"),[np]:Jf("font-weight","normal"),[rp]:Jf("color","blue"),[ip]:Jf("color","green"),[op]:Jf("color","grey"),[ap]:Jf("color","red"),[lp]:Jf("color","purple"),[up]:Jf("color","orange"),[cp]:Jf("color","black")},dp=Yf?e=>{var t;1===e.length&&(null==(t=e[0])?void 0:t.constructor)===Function&&(e=e[0]());const n=[],r=[],o=Sd();let i=[],a=0;for(;a<e.length;a++){const t=e[a],i=sp[t];if(void 0!==i)o.set(i.left,i.right);else{if(void 0===t)break;if(t.constructor!==String&&t.constructor!==Number)break;{const e=Qf(o);a>0||e.length>0?(n.push("%c"+t),r.push(e)):n.push(t)}}}for(a>0&&(i=r,i.unshift(n.join("")));a<e.length;a++){const t=e[a];t instanceof Symbol||i.push(t)}return i}:e=>{var t;1===e.length&&(null==(t=e[0])?void 0:t.constructor)===Function&&(e=e[0]());const n=[];let r=0;for(;r<e.length;r++){const t=e[r];void 0===t||t.constructor===String||t.constructor===Number||t.constructor===Object&&n.push(JSON.stringify(t))}return n},fp=Id(),pp=e=>({[Symbol.iterator](){return this},next:e}),hp=(e,t)=>pp((()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}}));class vp{constructor(e,t){this.clock=e,this.len=t}}class gp{constructor(){this.clients=new Map}}const mp=(e,t,n)=>t.clients.forEach(((t,r)=>{const o=e.doc.store.clients.get(r);for(let r=0;r<t.length;r++){const i=t[r];Xp(e,o,i.clock,i.len,n)}})),yp=(e,t)=>{const n=e.clients.get(t.client);return void 0!==n&&null!==((e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=Td((n+r)/2),i=e[o],a=i.clock;if(a<=t){if(t<a+i.len)return o;n=o+1}else r=o-1}return null})(n,t.clock)},bp=e=>{e.clients.forEach((e=>{let t,n;for(e.sort(((e,t)=>e.clock-t.clock)),t=1,n=1;t<e.length;t++){const r=e[n-1],o=e[t];r.clock+r.len>=o.clock?r.len=Vd(r.len,o.clock+o.len-r.clock):(n<t&&(e[n]=o),n++)}e.length=n}))},wp=e=>{const t=new gp;for(let n=0;n<e.length;n++)e[n].clients.forEach(((r,o)=>{if(!t.clients.has(o)){const i=r.slice();for(let t=n+1;t<e.length;t++)Ad(i,e[t].clients.get(o)||[]);t.clients.set(o,i)}}));return bp(t),t},_p=(e,t,n,r)=>{jd(e.clients,t,(()=>[])).push(new vp(n,r))},kp=wf;class Cp extends Md{constructor({guid:e=kf(),collectionid:t=null,gc:n=!0,gcFilter:r=(()=>!0),meta:o=null,autoLoad:i=!1,shouldLoad:a=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=kp(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new $p,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=i,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=Ef((e=>{this.on("load",(()=>{this.isLoaded=!0,e(this)}))}));const l=()=>Ef((e=>{const t=n=>{(void 0===n||!0===n)&&(this.off("sync",t),e())};this.on("sync",t)}));this.on("sync",(e=>{!1===e&&this.isSynced&&(this.whenSynced=l()),this.isSynced=void 0===e||!0===e,this.isLoaded||this.emit("load",[])})),this.whenSynced=l()}load(){const e=this._item;null!==e&&!this.shouldLoad&&nh(e.parent.doc,(e=>{e.subdocsLoaded.add(this)}),null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Dd(this.subdocs).map((e=>e.guid)))}transact(e,t=null){return nh(this,e,t)}get(e,t=gh){const n=jd(this.share,e,(()=>{const e=new t;return e._integrate(this,null),e})),r=n.constructor;if(t!==gh&&r!==t){if(r===gh){const r=new t;r._map=n._map,n._map.forEach((e=>{for(;null!==e;e=e.left)e.parent=r})),r._start=n._start;for(let e=r._start;null!==e;e=e.right)e.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}throw new Error(`Type with the name ${e} has already been defined with a different constructor`)}return n}getArray(e=""){return this.get(e,Mh)}getText(e=""){return this.get(e,Zh)}getMap(e=""){return this.get(e,Fh)}getXmlFragment(e=""){return this.get(e,ev)}toJSON(){const e={};return this.share.forEach(((t,n)=>{e[n]=t.toJSON()})),e}destroy(){Dd(this.subdocs).forEach((e=>e.destroy()));const e=this._item;if(null!==e){this._item=null;const t=e.content;t.doc=new Cp({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,nh(e.parent.doc,(n=>{const r=t.doc;e.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(e,t){super.on(e,t)}off(e,t){super.off(e,t)}}class Ep{constructor(){this.restEncoder=Yd()}toUint8Array(){return Xd(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Qd(this.restEncoder,e)}writeDsLen(e){Qd(this.restEncoder,e)}}class Op extends Ep{writeLeftID(e){Qd(this.restEncoder,e.client),Qd(this.restEncoder,e.clock)}writeRightID(e){Qd(this.restEncoder,e.client),Qd(this.restEncoder,e.clock)}writeClient(e){Qd(this.restEncoder,e)}writeInfo(e){Zd(this.restEncoder,e)}writeString(e){rf(this.restEncoder,e)}writeParentInfo(e){Qd(this.restEncoder,e?1:0)}writeTypeRef(e){Qd(this.restEncoder,e)}writeLen(e){Qd(this.restEncoder,e)}writeAny(e){cf(this.restEncoder,e)}writeBuf(e){af(this.restEncoder,e)}writeJSON(e){rf(this.restEncoder,JSON.stringify(e))}writeKey(e){rf(this.restEncoder,e)}}class Sp{constructor(){this.restEncoder=Yd(),this.dsCurrVal=0}toUint8Array(){return Xd(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,Qd(this.restEncoder,t)}writeDsLen(e){0===e&&yf(),Qd(this.restEncoder,e-1),this.dsCurrVal+=e}}class xp extends Sp{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new hf,this.clientEncoder=new ff,this.leftClockEncoder=new hf,this.rightClockEncoder=new hf,this.infoEncoder=new sf(Zd),this.stringEncoder=new vf,this.parentInfoEncoder=new sf(Zd),this.typeRefEncoder=new ff,this.lenEncoder=new ff}toUint8Array(){const e=Yd();return Qd(e,0),af(e,this.keyClockEncoder.toUint8Array()),af(e,this.clientEncoder.toUint8Array()),af(e,this.leftClockEncoder.toUint8Array()),af(e,this.rightClockEncoder.toUint8Array()),af(e,Xd(this.infoEncoder)),af(e,this.stringEncoder.toUint8Array()),af(e,Xd(this.parentInfoEncoder)),af(e,this.typeRefEncoder.toUint8Array()),af(e,this.lenEncoder.toUint8Array()),of(e,Xd(this.restEncoder)),Xd(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){cf(this.restEncoder,e)}writeBuf(e){af(this.restEncoder,e)}writeJSON(e){cf(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const jp=(e,t,n)=>{const r=new Map;n.forEach(((e,n)=>{Up(t,n)>e&&r.set(n,e)})),zp(t).forEach(((e,t)=>{n.has(t)||r.set(t,0)})),Qd(e.restEncoder,r.size),Dd(r.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([n,r])=>{((e,t,n,r)=>{r=Vd(r,t[0].id.clock);const o=qp(t,r);Qd(e.restEncoder,t.length-o),e.writeClient(n),Qd(e.restEncoder,r);const i=t[o];i.write(e,r-i.id.clock);for(let n=o+1;n<t.length;n++)t[n].write(e,0)})(e,t.clients.get(n),n,r)}))};class Ip{constructor(){this.l=[]}}const Rp=()=>new Ip,Ap=(e,t)=>e.l.push(t),Dp=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter((e=>t!==e)),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Pp=(e,t,n)=>Uf(e.l,[t,n]);class Mp{constructor(e,t){this.client=e,this.clock=t}}const Tp=(e,t)=>e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock,Fp=(e,t)=>new Mp(e,t),Np=(e,t)=>{for(;null!==t;){if(t.parent===e)return!0;t=t.parent._item}return!1};class Vp{constructor(e,t){this.ds=e,this.sv=t}}((e,t)=>{new Vp(e,t)})(new gp,new Map);const Lp=(e,t)=>void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!yp(t.ds,e.id),Bp=(e,t)=>{const n=jd(e.meta,Bp,Id),r=e.doc.store;n.has(t)||(t.sv.forEach(((t,n)=>{t<Up(r,n)&&Kp(e,Fp(n,t))})),mp(e,t.ds,(e=>{})),n.add(t))};class $p{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const zp=e=>{const t=new Map;return e.clients.forEach(((e,n)=>{const r=e[e.length-1];t.set(n,r.id.clock+r.length)})),t},Up=(e,t)=>{const n=e.clients.get(t);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},Hp=(e,t)=>{let n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{const e=n[n.length-1];if(e.id.clock+e.length!==t.id.clock)throw yf()}n.push(t)},qp=(e,t)=>{let n=0,r=e.length-1,o=e[r],i=o.id.clock;if(i===t)return r;let a=Td(t/(i+o.length-1)*r);for(;n<=r;){if(o=e[a],i=o.id.clock,i<=t){if(t<i+o.length)return a;n=a+1}else r=a-1;a=Td((n+r)/2)}throw yf()},Wp=(e,t)=>{const n=e.clients.get(t.client);return n[qp(n,t.clock)]},Gp=(e,t,n)=>{const r=qp(t,n),o=t[r];return o.id.clock<n&&o instanceof Cv?(t.splice(r+1,0,wv(e,o,n-o.id.clock)),r+1):r},Kp=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Gp(e,n,t.clock)]},Yp=(e,t,n)=>{const r=t.clients.get(n.client),o=qp(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==ov&&r.splice(o+1,0,wv(e,i,n.clock-i.id.clock+1)),i},Xp=(e,t,n,r,o)=>{if(0===r)return;const i=n+r;let a,l=Gp(e,t,n);do{a=t[l++],i<a.id.clock+a.length&&Gp(e,t,i),o(a)}while(l<t.length&&t[l].id.clock<i)};class Jp{constructor(e,t,n){this.doc=e,this.deleteSet=new gp,this.beforeState=zp(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Zp=(e,t)=>!(0===t.deleteSet.clients.size&&!((e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1})(t.afterState,((e,n)=>t.beforeState.get(n)!==e)))&&(bp(t.deleteSet),((e,t)=>{jp(e,t.doc.store,t.beforeState)})(e,t),((e,t)=>{Qd(e.restEncoder,t.clients.size),Dd(t.clients.entries()).sort(((e,t)=>t[0]-e[0])).forEach((([t,n])=>{e.resetDsCurVal(),Qd(e.restEncoder,t);const r=n.length;Qd(e.restEncoder,r);for(let t=0;t<r;t++){const r=n[t];e.writeDsClock(r.clock),e.writeDsLen(r.len)}}))})(e,t.deleteSet),!0),Qp=(e,t,n)=>{const r=t._item;(null===r||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&jd(e.changed,t,Id).add(n)},eh=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0&&(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n));n=r,r=e[--o-1])n instanceof Cv&&null!==n.parentSub&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);const i=t-o;return i&&e.splice(t+1-i,i),i},th=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,i=n.deleteSet,a=n._mergeStructs;try{bp(i),n.afterState=zp(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const e=[];n.changed.forEach(((t,r)=>e.push((()=>{(null===r._item||!r._item.deleted)&&r._callObserver(n,t)})))),e.push((()=>{n.changedParentTypes.forEach(((e,t)=>{t._dEH.l.length>0&&(null===t._item||!t._item.deleted)&&((e=e.filter((e=>null===e.target._item||!e.target._item.deleted))).forEach((e=>{e.currentTarget=t,e._path=null})),e.sort(((e,t)=>e.path.length-t.path.length)),Pp(t._dEH,e,n))}))})),e.push((()=>r.emit("afterTransaction",[n,r]))),Uf(e,[]),n._needFormattingCleanup&&Yh(n)}finally{r.gc&&((e,t,n)=>{for(const[r,o]of e.clients.entries()){const e=t.clients.get(r);for(let r=o.length-1;r>=0;r--){const i=o[r],a=i.clock+i.len;for(let r=qp(e,i.clock),o=e[r];r<e.length&&o.id.clock<a;o=e[++r]){const o=e[r];if(i.clock+i.len<=o.id.clock)break;o instanceof Cv&&o.deleted&&!o.keep&&n(o)&&o.gc(t,!1)}}}})(i,o,r.gcFilter),((e,t)=>{e.clients.forEach(((e,n)=>{const r=t.clients.get(n);for(let t=e.length-1;t>=0;t--){const n=e[t];for(let e=Nd(r.length-1,1+qp(r,n.clock+n.len-1)),t=r[e];e>0&&t.id.clock>=n.clock;t=r[e])e-=1+eh(r,e)}}))})(i,o),n.afterState.forEach(((e,t)=>{const r=n.beforeState.get(t)||0;if(r!==e){const e=o.clients.get(t),n=Vd(qp(e,r),1);for(let t=e.length-1;t>=n;)t-=1+eh(e,t)}}));for(let e=a.length-1;e>=0;e--){const{client:t,clock:n}=a[e].id,r=o.clients.get(t),i=qp(r,n);i+1<r.length&&eh(r,i+1)>1||i>0&&eh(r,i)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(((...e)=>{console.log(...dp(e)),fp.forEach((t=>t.print(e)))})(up,tp,"[yjs] ",np,ap,"Changed the client-id because another client seems to be using it."),r.clientID=kp()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const e=new Op;Zp(e,n)&&r.emit("update",[e.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const e=new xp;Zp(e,n)&&r.emit("updateV2",[e.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:u,subdocsRemoved:c}=n;(l.size>0||c.size>0||u.size>0)&&(l.forEach((e=>{e.clientID=r.clientID,null==e.collectionid&&(e.collectionid=r.collectionid),r.subdocs.add(e)})),c.forEach((e=>r.subdocs.delete(e))),r.emit("subdocs",[{loaded:u,added:l,removed:c},r,n]),c.forEach((e=>e.destroy()))),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):th(e,t+1)}}},nh=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let i=!1,a=null;null===e._transaction&&(i=!0,e._transaction=new Jp(e,n,r),o.push(e._transaction),1===o.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{a=t(e._transaction)}finally{if(i){const t=e._transaction===o[0];e._transaction=null,t&&th(o,0)}}return a};class rh{constructor(e,t){this.insertions=t,this.deletions=e,this.meta=new Map}}const oh=(e,t,n)=>{mp(e,n.deletions,(e=>{e instanceof Cv&&t.scope.some((t=>Np(t,e)))&&bv(e,!1)}))},ih=(e,t,n)=>{let r=null,o=null;const i=e.doc,a=e.scope;if(nh(i,(n=>{for(;t.length>0&&null===r;){const o=i.store,l=t.pop(),u=new Set,c=[];let s=!1;mp(n,l.insertions,(e=>{if(e instanceof Cv){if(null!==e.redone){let{item:t,diff:r}=yv(o,e.id);r>0&&(t=Kp(n,Fp(t.id.client,t.id.clock+r))),e=t}!e.deleted&&a.some((t=>Np(t,e)))&&c.push(e)}})),mp(n,l.deletions,(e=>{e instanceof Cv&&a.some((t=>Np(t,e)))&&!yp(l.insertions,e.id)&&u.add(e)})),u.forEach((t=>{s=null!==kv(n,t,u,l.insertions,e.ignoreRemoteMapChanges,e)||s}));for(let t=c.length-1;t>=0;t--){const r=c[t];e.deleteFilter(r)&&(r.delete(n),s=!0)}r=s?l:null}n.changed.forEach(((e,t)=>{e.has(null)&&t._searchMarker&&(t._searchMarker.length=0)})),o=n}),e),null!=r){const t=o.changedParentTypes;e.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:t},e])}return r};class ah extends Md{constructor(e,{captureTimeout:t=500,captureTransaction:n=(e=>!0),deleteFilter:r=(()=>!0),trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:a=(Pd(e)?e[0].doc:e.doc)}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=r,o.add(this),this.trackedOrigins=o,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=t,this.afterTransactionHandler=e=>{if(!(this.captureTransaction(e)&&this.scope.some((t=>e.changedParentTypes.has(t)))&&(this.trackedOrigins.has(e.origin)||e.origin&&this.trackedOrigins.has(e.origin.constructor))))return;const t=this.undoing,n=this.redoing,r=t?this.redoStack:this.undoStack;t?this.stopCapturing():n||this.clear(!1,!0);const o=new gp;e.afterState.forEach(((t,n)=>{const r=e.beforeState.get(n)||0,i=t-r;i>0&&_p(o,n,r,i)}));const i=Cf();let a=!1;if(this.lastChange>0&&i-this.lastChange<this.captureTimeout&&r.length>0&&!t&&!n){const t=r[r.length-1];t.deletions=wp([t.deletions,e.deleteSet]),t.insertions=wp([t.insertions,o])}else r.push(new rh(e.deleteSet,o)),a=!0;!t&&!n&&(this.lastChange=i),mp(e,e.deleteSet,(e=>{e instanceof Cv&&this.scope.some((t=>Np(t,e)))&&bv(e,!0)}));const l=[{stackItem:r[r.length-1],origin:e.origin,type:t?"redo":"undo",changedParentTypes:e.changedParentTypes},this];a?this.emit("stack-item-added",l):this.emit("stack-item-updated",l)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",(()=>{this.destroy()}))}addToScope(e){(e=Pd(e)?e:[e]).forEach((e=>{this.scope.every((t=>t!==e))&&(e.doc!==this.doc&&((...e)=>{console.warn(...dp(e)),e.unshift(up),fp.forEach((t=>t.print(e)))})("[yjs#509] Not same Y.Doc"),this.scope.push(e))}))}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,t=!0){(e&&this.canUndo()||t&&this.canRedo())&&this.doc.transact((n=>{e&&(this.undoStack.forEach((e=>oh(n,this,e))),this.undoStack=[]),t&&(this.redoStack.forEach((e=>oh(n,this,e))),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:t}])}))}stopCapturing(){this.lastChange=0}undo(){let e;this.undoing=!0;try{e=ih(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){let e;this.redoing=!0;try{e=ih(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}const lh="You must not compute changes after the event-handler fired.";class uh{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=ch(this.currentTarget,this.target))}deletes(e){return yp(this.transaction.deleteSet,e.id)}get keys(){if(null===this._keys){if(0===this.transaction.doc._transactionCleanups.length)throw gf(lh);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach((n=>{if(null!==n){const r=t._map.get(n);let o,i;if(this.adds(r)){let e=r.left;for(;null!==e&&this.adds(e);)e=e.left;if(this.deletes(r)){if(null===e||!this.deletes(e))return;o="delete",i=Rd(e.content.getContent())}else null!==e&&this.deletes(e)?(o="update",i=Rd(e.content.getContent())):(o="add",i=void 0)}else{if(!this.deletes(r))return;o="delete",i=Rd(r.content.getContent())}e.set(n,{action:o,oldValue:i})}})),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(null===e){if(0===this.transaction.doc._transactionCleanups.length)throw gf(lh);const t=this.target,n=Id(),r=Id(),o=[];if(e={added:n,deleted:r,delta:o,keys:this.keys},this.transaction.changed.get(t).has(null)){let e=null;const i=()=>{e&&o.push(e)};for(let o=t._start;null!==o;o=o.right)o.deleted?this.deletes(o)&&!this.adds(o)&&((null===e||void 0===e.delete)&&(i(),e={delete:0}),e.delete+=o.length,r.add(o)):this.adds(o)?((null===e||void 0===e.insert)&&(i(),e={insert:[]}),e.insert=e.insert.concat(o.content.getContent()),n.add(o)):((null===e||void 0===e.retain)&&(i(),e={retain:0}),e.retain+=o.length);null!==e&&void 0===e.retain&&i()}this._changes=e}return e}}const ch=(e,t)=>{const n=[];for(;null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{let e=0,r=t._item.parent._start;for(;r!==t._item&&null!==r;)r.deleted||e++,r=r.right;n.unshift(e)}t=t._item.parent}return n};let sh=0;class dh{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=sh++}}const fh=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=sh++},ph=(e,t)=>{if(null===e._start||0===t||null===e._searchMarker)return null;const n=0===e._searchMarker.length?null:e._searchMarker.reduce(((e,n)=>Fd(t-e.index)<Fd(t-n.index)?e:n));let r=e._start,o=0;for(null!==n&&(r=n.p,o=n.index,(e=>{e.timestamp=sh++})(n));null!==r.right&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;null!==r.left&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return null!==n&&Fd(n.index-o)<r.parent.length/80?(fh(n,r,o),n):((e,t,n)=>{if(e.length>=80){const r=e.reduce(((e,t)=>e.timestamp<t.timestamp?e:t));return fh(r,t,n),r}{const r=new dh(t,n);return e.push(r),r}})(e._searchMarker,r,o)},hh=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let t=o.p;for(t.marker=!1;t&&(t.deleted||!t.countable);)t=t.left,t&&!t.deleted&&t.countable&&(o.index-=t.length);if(null===t||!0===t.marker){e.splice(r,1);continue}o.p=t,t.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=Vd(t,o.index+n))}},vh=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;jd(o,e,(()=>[])).push(n),null!==e._item;)e=e._item.parent;Pp(r._eH,n,t)};class gh{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Rp(),this._dEH=Rp(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw mf()}clone(){throw mf()}_write(e){}get _first(){let e=this._start;for(;null!==e&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){Ap(this._eH,e)}observeDeep(e){Ap(this._dEH,e)}unobserve(e){Dp(this._eH,e)}unobserveDeep(e){Dp(this._dEH,e)}toJSON(){}}const mh=(e,t,n)=>{t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let i=e._start;for(;null!==i&&r>0;){if(i.countable&&!i.deleted){const e=i.content.getContent();if(e.length<=t)t-=e.length;else{for(let n=t;n<e.length&&r>0;n++)o.push(e[n]),r--;t=0}}i=i.right}return o},yh=e=>{const t=[];let n=e._start;for(;null!==n;){if(n.countable&&!n.deleted){const e=n.content.getContent();for(let n=0;n<e.length;n++)t.push(e[n])}n=n.right}return t},bh=(e,t)=>{let n=0,r=e._start;for(;null!==r;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let r=0;r<o.length;r++)t(o[r],n++,e)}r=r.right}},wh=(e,t)=>{const n=[];return bh(e,((r,o)=>{n.push(t(r,o,e))})),n},_h=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const e=n[r++];return n.length<=r&&(n=null),{done:!1,value:e}}}},kh=(e,t)=>{const n=ph(e,t);let r=e._start;for(null!==n&&(r=n.p,t-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},Ch=(e,t,n,r)=>{let o=n;const i=e.doc,a=i.clientID,l=i.store,u=null===n?t._start:n.right;let c=[];const s=()=>{c.length>0&&(o=new Cv(Fp(a,Up(l,a)),o,o&&o.lastId,u,u&&u.id,t,null,new sv(c)),o.integrate(e,0),c=[])};r.forEach((n=>{if(null===n)c.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(n);break;default:switch(s(),n.constructor){case Uint8Array:case ArrayBuffer:o=new Cv(Fp(a,Up(l,a)),o,o&&o.lastId,u,u&&u.id,t,null,new iv(new Uint8Array(n))),o.integrate(e,0);break;case Cp:o=new Cv(Fp(a,Up(l,a)),o,o&&o.lastId,u,u&&u.id,t,null,new lv(n)),o.integrate(e,0);break;default:if(!(n instanceof gh))throw new Error("Unexpected content type in insert operation");o=new Cv(Fp(a,Up(l,a)),o,o&&o.lastId,u,u&&u.id,t,null,new mv(n)),o.integrate(e,0)}}})),s()},Eh=()=>gf("Length exceeded!"),Oh=(e,t,n,r)=>{if(n>t._length)throw Eh();if(0===n)return t._searchMarker&&hh(t._searchMarker,n,r.length),Ch(e,t,null,r);const o=n,i=ph(t,n);let a=t._start;for(null!==i&&(a=i.p,0===(n-=i.index)&&(a=a.prev,n+=a&&a.countable&&!a.deleted?a.length:0));null!==a;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&Kp(e,Fp(a.id.client,a.id.clock+n));break}n-=a.length}return t._searchMarker&&hh(t._searchMarker,o,r.length),Ch(e,t,a,r)},Sh=(e,t,n,r)=>{if(0===r)return;const o=n,i=r,a=ph(t,n);let l=t._start;for(null!==a&&(l=a.p,n-=a.index);null!==l&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&Kp(e,Fp(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&null!==l;)l.deleted||(r<l.length&&Kp(e,Fp(l.id.client,l.id.clock+r)),l.delete(e),r-=l.length),l=l.right;if(r>0)throw Eh();t._searchMarker&&hh(t._searchMarker,o,-i+r)},xh=(e,t,n)=>{const r=t._map.get(n);void 0!==r&&r.delete(e)},jh=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,a=i.clientID;let l;if(null==r)l=new sv([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:l=new sv([r]);break;case Uint8Array:l=new iv(r);break;case Cp:l=new lv(r);break;default:if(!(r instanceof gh))throw new Error("Unexpected content type");l=new mv(r)}new Cv(Fp(a,Up(i.store,a)),o,o&&o.lastId,null,null,t,n,l).integrate(e,0)},Ih=(e,t)=>{const n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},Rh=e=>{const t={};return e._map.forEach(((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])})),t},Ah=(e,t)=>{const n=e._map.get(t);return void 0!==n&&!n.deleted},Dh=e=>((e,t)=>pp((()=>{let n;do{n=e.next()}while(!n.done&&!t(n.value));return n})))(e.entries(),(e=>!e[1].deleted));class Ph extends uh{constructor(e,t){super(e,t),this._transaction=t}}class Mh extends gh{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new Mh;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Mh}clone(){const e=new Mh;return e.insert(0,this.toArray().map((e=>e instanceof gh?e.clone():e))),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(e,t){super._callObserver(e,t),vh(this,e,new Ph(this,e))}insert(e,t){null!==this.doc?nh(this.doc,(n=>{Oh(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}push(e){null!==this.doc?nh(this.doc,(t=>{((e,t,n)=>{let r=(t._searchMarker||[]).reduce(((e,t)=>t.index>e.index?t:e),{index:0,p:t._start}).p;if(r)for(;r.right;)r=r.right;Ch(e,t,r,n)})(t,this,e)})):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){null!==this.doc?nh(this.doc,(n=>{Sh(n,this,e,t)})):this._prelimContent.splice(e,t)}get(e){return kh(this,e)}toArray(){return yh(this)}slice(e=0,t=this.length){return mh(this,e,t)}toJSON(){return this.map((e=>e instanceof gh?e.toJSON():e))}map(e){return wh(this,e)}forEach(e){bh(this,e)}[Symbol.iterator](){return _h(this)}_write(e){e.writeTypeRef(fv)}}class Th extends uh{constructor(e,t,n){super(e,t),this.keysChanged=n}}class Fh extends gh{constructor(e){super(),this._prelimContent=null,this._prelimContent=void 0===e?new Map:new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach(((e,t)=>{this.set(t,e)})),this._prelimContent=null}_copy(){return new Fh}clone(){const e=new Fh;return this.forEach(((t,n)=>{e.set(n,t instanceof gh?t.clone():t)})),e}_callObserver(e,t){vh(this,e,new Th(this,e,t))}toJSON(){const e={};return this._map.forEach(((t,n)=>{if(!t.deleted){const r=t.content.getContent()[t.length-1];e[n]=r instanceof gh?r.toJSON():r}})),e}get size(){return[...Dh(this._map)].length}keys(){return hp(Dh(this._map),(e=>e[0]))}values(){return hp(Dh(this._map),(e=>e[1].content.getContent()[e[1].length-1]))}entries(){return hp(Dh(this._map),(e=>[e[0],e[1].content.getContent()[e[1].length-1]]))}forEach(e){this._map.forEach(((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)}))}[Symbol.iterator](){return this.entries()}delete(e){null!==this.doc?nh(this.doc,(t=>{xh(t,this,e)})):this._prelimContent.delete(e)}set(e,t){return null!==this.doc?nh(this.doc,(n=>{jh(n,this,e,t)})):this._prelimContent.set(e,t),t}get(e){return Ih(this,e)}has(e){return Ah(this,e)}clear(){null!==this.doc?nh(this.doc,(e=>{this.forEach((function(t,n,r){xh(e,r,n)}))})):this._prelimContent.clear()}_write(e){e.writeTypeRef(pv)}}const Nh=(e,t)=>e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&zf(e,t);class Vh{constructor(e,t,n,r){this.left=e,this.right=t,this.index=n,this.currentAttributes=r}forward(){if(null===this.right&&yf(),this.right.content.constructor===cv)this.right.deleted||zh(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}const Lh=(e,t,n)=>{for(;null!==t.right&&n>0;){if(t.right.content.constructor===cv)t.right.deleted||zh(t.currentAttributes,t.right.content);else t.right.deleted||(n<t.right.length&&Kp(e,Fp(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);t.left=t.right,t.right=t.right.right}return t},Bh=(e,t,n)=>{const r=new Map,o=ph(t,n);if(o){const t=new Vh(o.p.left,o.p,o.index,r);return Lh(e,t,n-o.index)}{const o=new Vh(null,t._start,0,r);return Lh(e,o,n)}},$h=(e,t,n,r)=>{for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===cv&&Nh(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;r.forEach(((r,a)=>{const l=n.left,u=n.right,c=new Cv(Fp(i,Up(o.store,i)),l,l&&l.lastId,u,u&&u.id,t,null,new cv(a,r));c.integrate(e,0),n.right=c,n.forward()}))},zh=(e,t)=>{const{key:n,value:r}=t;null===r?e.delete(n):e.set(n,r)},Uh=(e,t)=>{for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===cv&&Nh(t[e.right.content.key]||null,e.right.content.value));)e.forward()},Hh=(e,t,n,r)=>{const o=e.doc,i=o.clientID,a=new Map;for(const l in r){const u=r[l],c=n.currentAttributes.get(l)||null;if(!Nh(c,u)){a.set(l,c);const{left:r,right:s}=n;n.right=new Cv(Fp(i,Up(o.store,i)),r,r&&r.lastId,s,s&&s.id,t,null,new cv(l,u)),n.right.integrate(e,0),n.forward()}}return a},qh=(e,t,n,r,o)=>{n.currentAttributes.forEach(((e,t)=>{void 0===o[t]&&(o[t]=null)}));const i=e.doc,a=i.clientID;Uh(n,o);const l=Hh(e,t,n,o),u=r.constructor===String?new dv(r):r instanceof gh?new mv(r):new uv(r);let{left:c,right:s,index:d}=n;t._searchMarker&&hh(t._searchMarker,n.index,u.getLength()),s=new Cv(Fp(a,Up(i.store,a)),c,c&&c.lastId,s,s&&s.id,t,null,u),s.integrate(e,0),n.right=s,n.index=d,n.forward(),$h(e,t,n,l)},Wh=(e,t,n,r,o)=>{const i=e.doc,a=i.clientID;Uh(n,o);const l=Hh(e,t,n,o);e:for(;null!==n.right&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===cv));){if(!n.right.deleted)switch(n.right.content.constructor){case cv:{const{key:t,value:i}=n.right.content,a=o[t];if(void 0!==a){if(Nh(a,i))l.delete(t);else{if(0===r)break e;l.set(t,i)}n.right.delete(e)}else n.currentAttributes.set(t,i);break}default:r<n.right.length&&Kp(e,Fp(n.right.id.client,n.right.id.clock+r)),r-=n.right.length}n.forward()}if(r>0){let o="";for(;r>0;r--)o+="\n";n.right=new Cv(Fp(a,Up(i.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new dv(o)),n.right.integrate(e,0),n.forward()}$h(e,t,n,l)},Gh=(e,t,n,r,o)=>{let i=t;const a=Sd();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===cv){const e=i.content;a.set(e.key,e)}i=i.right}let l=0,u=!1;for(;t!==i;){if(n===t&&(u=!0),!t.deleted){const n=t.content;switch(n.constructor){case cv:{const{key:i,value:c}=n,s=r.get(i)||null;(a.get(i)!==n||s===c)&&(t.delete(e),l++,!u&&(o.get(i)||null)===c&&s!==c&&(null===s?o.delete(i):o.set(i,s))),!u&&!t.deleted&&zh(o,n);break}}}t=t.right}return l},Kh=e=>{let t=0;return nh(e.doc,(n=>{let r=e._start,o=e._start,i=Sd();const a=xd(i);for(;o;){if(!1===o.deleted)if(o.content.constructor===cv)zh(a,o.content);else t+=Gh(n,r,o,i,a),i=xd(a),r=o;o=o.right}})),t},Yh=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const i=e.beforeState.get(r)||0;o!==i&&Xp(e,n.store.clients.get(r),i,o,(e=>{!e.deleted&&e.content.constructor===cv&&e.constructor!==ov&&t.add(e.parent)}))}nh(n,(n=>{mp(e,e.deleteSet,(e=>{if(e instanceof ov||!e.parent._hasFormatting||t.has(e.parent))return;const r=e.parent;e.content.constructor===cv?t.add(r):((e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===cv){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}})(n,e)}));for(const e of t)Kh(e)}))},Xh=(e,t,n)=>{const r=n,o=xd(t.currentAttributes),i=t.right;for(;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case mv:case uv:case dv:n<t.right.length&&Kp(e,Fp(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}i&&Gh(e,i,t.right,o,t.currentAttributes);const a=(t.left||t.right).parent;return a._searchMarker&&hh(a._searchMarker,t.index,-r+n),t};class Jh extends uh{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach((e=>{null===e?this.childListChanged=!0:this.keysChanged.add(e)}))}get changes(){if(null===this._changes){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(null===this._delta){const e=this.target.doc,t=[];nh(e,(e=>{const n=new Map,r=new Map;let o=this.target._start,i=null;const a={};let l="",u=0,c=0;const s=()=>{if(null!==i){let e=null;switch(i){case"delete":c>0&&(e={delete:c}),c=0;break;case"insert":("object"==typeof l||l.length>0)&&(e={insert:l},n.size>0&&(e.attributes={},n.forEach(((t,n)=>{null!==t&&(e.attributes[n]=t)})))),l="";break;case"retain":u>0&&(e={retain:u},(e=>{for(const t in e)return!1;return!0})(a)||(e.attributes=Lf({},a))),u=0}e&&t.push(e),i=null}};for(;null!==o;){switch(o.content.constructor){case mv:case uv:this.adds(o)?this.deletes(o)||(s(),i="insert",l=o.content.getContent()[0],s()):this.deletes(o)?("delete"!==i&&(s(),i="delete"),c+=1):o.deleted||("retain"!==i&&(s(),i="retain"),u+=1);break;case dv:this.adds(o)?this.deletes(o)||("insert"!==i&&(s(),i="insert"),l+=o.content.str):this.deletes(o)?("delete"!==i&&(s(),i="delete"),c+=o.length):o.deleted||("retain"!==i&&(s(),i="retain"),u+=o.length);break;case cv:{const{key:t,value:l}=o.content;if(this.adds(o)){if(!this.deletes(o)){const u=n.get(t)||null;Nh(u,l)?null!==l&&o.delete(e):("retain"===i&&s(),Nh(l,r.get(t)||null)?delete a[t]:a[t]=l)}}else if(this.deletes(o)){r.set(t,l);const e=n.get(t)||null;Nh(e,l)||("retain"===i&&s(),a[t]=e)}else if(!o.deleted){r.set(t,l);const n=a[t];void 0!==n&&(Nh(n,l)?null!==n&&o.delete(e):("retain"===i&&s(),null===l?delete a[t]:a[t]=l))}o.deleted||("insert"===i&&s(),zh(n,o.content));break}}o=o.right}for(s();t.length>0;){const e=t[t.length-1];if(void 0===e.retain||void 0!==e.attributes)break;t.pop()}})),this._delta=t}return this._delta}}class Zh extends gh{constructor(e){super(),this._pending=void 0!==e?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach((e=>e()))}catch(e){console.error(e)}this._pending=null}_copy(){return new Zh}clone(){const e=new Zh;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new Jh(this,e,t);vh(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){let e="",t=this._start;for(;null!==t;)!t.deleted&&t.countable&&t.content.constructor===dv&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){null!==this.doc?nh(this.doc,(n=>{const r=new Vh(null,this._start,0,new Map);for(let o=0;o<e.length;o++){const i=e[o];if(void 0!==i.insert){const a=t||"string"!=typeof i.insert||o!==e.length-1||null!==r.right||"\n"!==i.insert.slice(-1)?i.insert:i.insert.slice(0,-1);("string"!=typeof a||a.length>0)&&qh(n,this,r,a,i.attributes||{})}else void 0!==i.retain?Wh(n,this,r,i.retain,i.attributes||{}):void 0!==i.delete&&Xh(n,r,i.delete)}})):this._pending.push((()=>this.applyDelta(e)))}toDelta(e,t,n){const r=[],o=new Map,i=this.doc;let a="",l=this._start;function u(){if(a.length>0){const e={};let t=!1;o.forEach(((n,r)=>{t=!0,e[r]=n}));const n={insert:a};t&&(n.attributes=e),r.push(n),a=""}}const c=()=>{for(;null!==l;){if(Lp(l,e)||void 0!==t&&Lp(l,t))switch(l.content.constructor){case dv:{const r=o.get("ychange");void 0===e||Lp(l,e)?void 0===t||Lp(l,t)?void 0!==r&&(u(),o.delete("ychange")):(void 0===r||r.user!==l.id.client||"added"!==r.type)&&(u(),o.set("ychange",n?n("added",l.id):{type:"added"})):(void 0===r||r.user!==l.id.client||"removed"!==r.type)&&(u(),o.set("ychange",n?n("removed",l.id):{type:"removed"})),a+=l.content.str;break}case mv:case uv:{u();const e={insert:l.content.getContent()[0]};if(o.size>0){const t={};e.attributes=t,o.forEach(((e,n)=>{t[n]=e}))}r.push(e);break}case cv:Lp(l,e)&&(u(),zh(o,l.content))}l=l.right}u()};return e||t?nh(i,(n=>{e&&Bp(n,e),t&&Bp(n,t),c()}),"cleanup"):c(),r}insert(e,t,n){if(t.length<=0)return;const r=this.doc;null!==r?nh(r,(r=>{const o=Bh(r,this,e);n||(n={},o.currentAttributes.forEach(((e,t)=>{n[t]=e}))),qh(r,this,o,t,n)})):this._pending.push((()=>this.insert(e,t,n)))}insertEmbed(e,t,n={}){const r=this.doc;null!==r?nh(r,(r=>{const o=Bh(r,this,e);qh(r,this,o,t,n)})):this._pending.push((()=>this.insertEmbed(e,t,n)))}delete(e,t){if(0===t)return;const n=this.doc;null!==n?nh(n,(n=>{Xh(n,Bh(n,this,e),t)})):this._pending.push((()=>this.delete(e,t)))}format(e,t,n){if(0===t)return;const r=this.doc;null!==r?nh(r,(r=>{const o=Bh(r,this,e);null!==o.right&&Wh(r,this,o,t,n)})):this._pending.push((()=>this.format(e,t,n)))}removeAttribute(e){null!==this.doc?nh(this.doc,(t=>{xh(t,this,e)})):this._pending.push((()=>this.removeAttribute(e)))}setAttribute(e,t){null!==this.doc?nh(this.doc,(n=>{jh(n,this,e,t)})):this._pending.push((()=>this.setAttribute(e,t)))}getAttribute(e){return Ih(this,e)}getAttributes(){return Rh(this)}_write(e){e.writeTypeRef(hv)}}class Qh{constructor(e,t=(()=>!0)){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==tv&&t.constructor!==ev||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class ev extends gh{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ev}clone(){const e=new ev;return e.insert(0,this.toArray().map((e=>e instanceof gh?e.clone():e))),e}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(e){return new Qh(this,e)}querySelector(e){e=e.toUpperCase();const t=new Qh(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)).next();return t.done?null:t.value}querySelectorAll(e){return e=e.toUpperCase(),Dd(new Qh(this,(t=>t.nodeName&&t.nodeName.toUpperCase()===e)))}_callObserver(e,t){vh(this,e,new nv(this,t,e))}toString(){return wh(this,(e=>e.toString())).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const r=e.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),bh(this,(o=>{r.insertBefore(o.toDOM(e,t,n),null)})),r}insert(e,t){null!==this.doc?nh(this.doc,(n=>{Oh(n,this,e,t)})):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(null!==this.doc)nh(this.doc,(n=>{const r=e&&e instanceof gh?e._item:e;Ch(n,this,r,t)}));else{const n=this._prelimContent,r=null===e?0:n.findIndex((t=>t===e))+1;if(0===r&&null!==e)throw gf("Reference item not found");n.splice(r,0,...t)}}delete(e,t=1){null!==this.doc?nh(this.doc,(n=>{Sh(n,this,e,t)})):this._prelimContent.splice(e,t)}toArray(){return yh(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return kh(this,e)}slice(e=0,t=this.length){return mh(this,e,t)}forEach(e){bh(this,e)}_write(e){e.writeTypeRef(gv)}}class tv extends ev{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach(((e,t)=>{this.setAttribute(t,e)})),this._prelimAttrs=null}_copy(){return new tv(this.nodeName)}clone(){const e=new tv(this.nodeName);return((e,t)=>{for(const n in e)t(e[n],n)})(this.getAttributes(),((t,n)=>{"string"==typeof t&&e.setAttribute(n,t)})),e.insert(0,this.toArray().map((e=>e instanceof gh?e.clone():e))),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const t in e)n.push(t);n.sort();const r=n.length;for(let o=0;o<r;o++){const r=n[o];t.push(r+'="'+e[r]+'"')}const o=this.nodeName.toLocaleLowerCase();return`<${o}${t.length>0?" "+t.join(" "):""}>${super.toString()}</${o}>`}removeAttribute(e){null!==this.doc?nh(this.doc,(t=>{xh(t,this,e)})):this._prelimAttrs.delete(e)}setAttribute(e,t){null!==this.doc?nh(this.doc,(n=>{jh(n,this,e,t)})):this._prelimAttrs.set(e,t)}getAttribute(e){return Ih(this,e)}hasAttribute(e){return Ah(this,e)}getAttributes(){return Rh(this)}toDOM(e=document,t={},n){const r=e.createElement(this.nodeName),o=this.getAttributes();for(const e in o){const t=o[e];"string"==typeof t&&r.setAttribute(e,t)}return bh(this,(o=>{r.appendChild(o.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(vv),e.writeKey(this.nodeName)}}class nv extends uh{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach((e=>{null===e?this.childListChanged=!0:this.attributesChanged.add(e)}))}}class rv{constructor(e,t){this.id=e,this.length=t}get deleted(){throw mf()}mergeWith(e){return!1}write(e,t,n){throw mf()}integrate(e,t){throw mf()}}class ov extends rv{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Hp(e.doc.store,this)}write(e,t){e.writeInfo(0),e.writeLen(this.length-t)}getMissing(e,t){return null}}class iv{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new iv(this.content)}splice(e){throw mf()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}class av{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new av(this.len)}splice(e){const t=new av(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){_p(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}class lv{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),null!==e.meta&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new lv(((e,t)=>new Cp({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1}))(this.doc.guid,this.opts))}splice(e){throw mf()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}class uv{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new uv(this.embed)}splice(e){throw mf()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}class cv{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new cv(this.key,this.value)}splice(e){throw mf()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}class sv{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new sv(this.arr)}splice(e){const t=new sv(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let r=t;r<n;r++){const t=this.arr[r];e.writeAny(t)}}getRef(){return 8}}class dv{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new dv(this.str)}splice(e){const t=new dv(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"�",t.str="�"+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(0===t?this.str:this.str.slice(t))}getRef(){return 4}}const fv=0,pv=1,hv=2,vv=3,gv=4;class mv{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new mv(this.type._copy())}splice(e){throw mf()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;null!==t;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((t=>{t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((t=>{for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const yv=(e,t)=>{let n,r=t,o=0;do{o>0&&(r=Fp(r.client,r.clock+o)),n=Wp(e,r),o=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof Cv);return{item:n,diff:o}},bv=(e,t)=>{for(;null!==e&&e.keep!==t;)e.keep=t,e=e.parent._item},wv=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new Cv(Fp(r,o+n),t,Fp(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),null!==t.redone&&(i.redone=Fp(t.redone.client,t.redone.clock+n)),t.right=i,null!==i.right&&(i.right.left=i),e._mergeStructs.push(i),null!==i.parentSub&&null===i.right&&i.parent._map.set(i.parentSub,i),t.length=n,i},_v=(e,t)=>((e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1})(e,(e=>yp(e.deletions,t))),kv=(e,t,n,r,o,i)=>{const a=e.doc,l=a.store,u=a.clientID,c=t.redone;if(null!==c)return Kp(e,c);let s,d=t.parent._item,f=null;if(null!==d&&!0===d.deleted){if(null===d.redone&&(!n.has(d)||null===kv(e,d,n,r,o,i)))return null;for(;null!==d.redone;)d=Kp(e,d.redone)}const p=null===d?t.parent:d.content.type;if(null===t.parentSub){for(f=t.left,s=t;null!==f;){let t=f;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:Kp(e,t.redone);if(null!==t&&t.parent._item===d){f=t;break}f=f.left}for(;null!==s;){let t=s;for(;null!==t&&t.parent._item!==d;)t=null===t.redone?null:Kp(e,t.redone);if(null!==t&&t.parent._item===d){s=t;break}s=s.right}}else if(s=null,t.right&&!o){for(f=t;null!==f&&null!==f.right&&(f.right.redone||yp(r,f.right.id)||_v(i.undoStack,f.right.id)||_v(i.redoStack,f.right.id));)for(f=f.right;f.redone;)f=Kp(e,f.redone);if(f&&null!==f.right)return null}else f=p._map.get(t.parentSub)||null;const h=Up(l,u),v=Fp(u,h),g=new Cv(v,f,f&&f.lastId,s,s&&s.id,p,t.parentSub,t.content.copy());return t.redone=v,bv(g,!0),g.integrate(e,0),g};class Cv extends rv{constructor(e,t,n,r,o,i,a,l){super(e,l.getLength()),this.origin=n,this.left=t,this.right=r,this.rightOrigin=o,this.parent=i,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?2:0}set marker(e){(8&this.info)>0!==e&&(this.info^=8)}get marker(){return(8&this.info)>0}get keep(){return(1&this.info)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(2&this.info)>0}get deleted(){return(4&this.info)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Up(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Up(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Mp&&this.id.client!==this.parent.client&&this.parent.clock>=Up(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Yp(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Kp(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===ov||this.right&&this.right.constructor===ov)this.parent=null;else if(this.parent){if(this.parent.constructor===Mp){const e=Wp(t,this.parent);e.constructor===ov?this.parent=null:this.parent=e.content.type}}else this.left&&this.left.constructor===Cv&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===Cv&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=Yp(e,e.doc.store,Fp(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let t,n=this.left;if(null!==n)t=n.right;else if(null!==this.parentSub)for(t=this.parent._map.get(this.parentSub)||null;null!==t&&null!==t.left;)t=t.left;else t=this.parent._start;const r=new Set,o=new Set;for(;null!==t&&t!==this.right;){if(o.add(t),r.add(t),Tp(this.origin,t.origin)){if(t.id.client<this.id.client)n=t,r.clear();else if(Tp(this.rightOrigin,t.rightOrigin))break}else{if(null===t.origin||!o.has(Wp(e.doc.store,t.origin)))break;r.has(Wp(e.doc.store,t.origin))||(n=t,r.clear())}t=t.right}this.left=n}if(null!==this.left){const e=this.left.right;this.right=e,this.left.right=this}else{let e;if(null!==this.parentSub)for(e=this.parent._map.get(this.parentSub)||null;null!==e&&null!==e.left;)e=e.left;else e=this.parent._start,this.parent._start=this;this.right=e}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Hp(e.doc.store,this),this.content.integrate(e,this),Qp(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new ov(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;null!==e&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;null!==e&&e.deleted;)e=e.left;return e}get lastId(){return 1===this.length?this.id:Fp(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Tp(e.origin,this.lastId)&&this.right===e&&Tp(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach((t=>{t.p===e&&(t.p=this,!this.deleted&&this.countable&&(t.index-=this.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),_p(e.deleteSet,this.id.client,this.id.clock,this.length),Qp(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw yf();this.content.gc(e),t?((e,t,n)=>{const r=e.clients.get(t.id.client);r[qp(r,t.id.clock)]=n})(e,this,new ov(this.id,this.length)):this.content=new av(this.length)}write(e,t){const n=t>0?Fp(this.id.client,this.id.clock+t-1):this.origin,r=this.rightOrigin,o=this.parentSub,i=31&this.content.getRef()|(null===n?0:Ld)|(null===r?0:64)|(null===o?0:32);if(e.writeInfo(i),null!==n&&e.writeLeftID(n),null!==r&&e.writeRightID(r),null===n&&null===r){const t=this.parent;if(void 0!==t._item){const n=t._item;if(null===n){const n=(e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw yf()})(t);e.writeParentInfo(!0),e.writeString(n)}else e.writeParentInfo(!1),e.writeLeftID(n.id)}else t.constructor===String?(e.writeParentInfo(!0),e.writeString(t)):t.constructor===Mp?(e.writeParentInfo(!1),e.writeLeftID(t)):yf();null!==o&&e.writeString(o)}this.content.write(e,t)}}const Ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof e<"u"?e:{},Ov="__ $YJS$ __";!0===Ev[Ov]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Ev[Ov]=!0;var Sv={};Sv.deprecate=(e,t)=>{let n=!0;return function(){return n&&(console.warn("DeprecationWarning: "+t),n=!1),e.apply(this,arguments)}};const xv=Sv.deprecate((()=>{}),"Hook.context is deprecated and will be removed"),jv=function(...e){return this.call=this._createCall("sync"),this.call(...e)},Iv=function(...e){return this.callAsync=this._createCall("async"),this.callAsync(...e)},Rv=function(...e){return this.promise=this._createCall("promise"),this.promise(...e)};class Av{constructor(e=[],t=void 0){this._args=e,this.name=t,this.taps=[],this.interceptors=[],this._call=jv,this.call=jv,this._callAsync=Iv,this.callAsync=Iv,this._promise=Rv,this.promise=Rv,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}compile(e){throw new Error("Abstract: should be overridden")}_createCall(e){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:e})}_tap(e,t,n){if("string"==typeof t)t={name:t.trim()};else if("object"!=typeof t||null===t)throw new Error("Invalid tap options");if("string"!=typeof t.name||""===t.name)throw new Error("Missing name for tap");typeof t.context<"u"&&xv(),t=Object.assign({type:e,fn:n},t),t=this._runRegisterInterceptors(t),this._insert(t)}tap(e,t){this._tap("sync",e,t)}tapAsync(e,t){this._tap("async",e,t)}tapPromise(e,t){this._tap("promise",e,t)}_runRegisterInterceptors(e){for(const t of this.interceptors)if(t.register){const n=t.register(e);void 0!==n&&(e=n)}return e}withOptions(e){const t=t=>Object.assign({},e,"string"==typeof t?{name:t}:t);return{name:this.name,tap:(e,n)=>this.tap(t(e),n),tapAsync:(e,n)=>this.tapAsync(t(e),n),tapPromise:(e,n)=>this.tapPromise(t(e),n),intercept:e=>this.intercept(e),isUsed:()=>this.isUsed(),withOptions:e=>this.withOptions(t(e))}}isUsed(){return this.taps.length>0||this.interceptors.length>0}intercept(e){if(this._resetCompilation(),this.interceptors.push(Object.assign({},e)),e.register)for(let t=0;t<this.taps.length;t++)this.taps[t]=e.register(this.taps[t])}_resetCompilation(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}_insert(e){let t;this._resetCompilation(),"string"==typeof e.before?t=new Set([e.before]):Array.isArray(e.before)&&(t=new Set(e.before));let n=0;"number"==typeof e.stage&&(n=e.stage);let r=this.taps.length;for(;r>0;){r--;const e=this.taps[r];this.taps[r+1]=e;const o=e.stage||0;if(t){if(t.has(e.name)){t.delete(e.name);continue}if(t.size>0)continue}if(!(o>n)){r++;break}}this.taps[r]=e}}Object.setPrototypeOf(Av.prototype,null);var Dv=Av;var Pv=class{constructor(e){this.config=e,this.options=void 0,this._args=void 0}create(e){let t;switch(this.init(e),this.options.type){case"sync":t=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:e=>`throw ${e};\n`,onResult:e=>`return ${e};\n`,resultReturns:!0,onDone:()=>"",rethrowIfPossible:!0}));break;case"async":t=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:e=>`_callback(${e});\n`,onResult:e=>`_callback(null, ${e});\n`,onDone:()=>"_callback();\n"}));break;case"promise":let e=!1;const n=this.contentWithInterceptors({onError:t=>(e=!0,`_error(${t});\n`),onResult:e=>`_resolve(${e});\n`,onDone:()=>"_resolve();\n"});let r="";r+='"use strict";\n',r+=this.header(),r+="return new Promise((function(_resolve, _reject) {\n",e&&(r+="var _sync = true;\n",r+="function _error(_err) {\n",r+="if(_sync)\n",r+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",r+="else\n",r+="_reject(_err);\n",r+="};\n"),r+=n,e&&(r+="_sync = false;\n"),r+="}));\n",t=new Function(this.args(),r)}return this.deinit(),t}setup(e,t){e._x=t.taps.map((e=>e.fn))}init(e){this.options=e,this._args=e.args.slice()}deinit(){this.options=void 0,this._args=void 0}contentWithInterceptors(e){if(this.options.interceptors.length>0){const t=e.onError,n=e.onResult,r=e.onDone;let o="";for(let e=0;e<this.options.interceptors.length;e++){const t=this.options.interceptors[e];t.call&&(o+=`${this.getInterceptor(e)}.call(${this.args({before:t.context?"_context":void 0})});\n`)}return o+=this.content(Object.assign(e,{onError:t&&(e=>{let n="";for(let t=0;t<this.options.interceptors.length;t++)this.options.interceptors[t].error&&(n+=`${this.getInterceptor(t)}.error(${e});\n`);return n+=t(e),n}),onResult:n&&(e=>{let t="";for(let n=0;n<this.options.interceptors.length;n++)this.options.interceptors[n].result&&(t+=`${this.getInterceptor(n)}.result(${e});\n`);return t+=n(e),t}),onDone:r&&(()=>{let e="";for(let t=0;t<this.options.interceptors.length;t++)this.options.interceptors[t].done&&(e+=`${this.getInterceptor(t)}.done();\n`);return e+=r(),e})})),o}return this.content(e)}header(){let e="";return this.needContext()?e+="var _context = {};\n":e+="var _context;\n",e+="var _x = this._x;\n",this.options.interceptors.length>0&&(e+="var _taps = this.taps;\n",e+="var _interceptors = this.interceptors;\n"),e}needContext(){for(const e of this.options.taps)if(e.context)return!0;return!1}callTap(e,{onError:t,onResult:n,onDone:r,rethrowIfPossible:o}){let i="",a=!1;for(let t=0;t<this.options.interceptors.length;t++){const n=this.options.interceptors[t];n.tap&&(a||(i+=`var _tap${e} = ${this.getTap(e)};\n`,a=!0),i+=`${this.getInterceptor(t)}.tap(${n.context?"_context, ":""}_tap${e});\n`)}i+=`var _fn${e} = ${this.getTapFn(e)};\n`;const l=this.options.taps[e];switch(l.type){case"sync":o||(i+=`var _hasError${e} = false;\n`,i+="try {\n"),i+=n?`var _result${e} = _fn${e}(${this.args({before:l.context?"_context":void 0})});\n`:`_fn${e}(${this.args({before:l.context?"_context":void 0})});\n`,o||(i+="} catch(_err) {\n",i+=`_hasError${e} = true;\n`,i+=t("_err"),i+="}\n",i+=`if(!_hasError${e}) {\n`),n&&(i+=n(`_result${e}`)),r&&(i+=r()),o||(i+="}\n");break;case"async":let a="";a+=n?`(function(_err${e}, _result${e}) {\n`:`(function(_err${e}) {\n`,a+=`if(_err${e}) {\n`,a+=t(`_err${e}`),a+="} else {\n",n&&(a+=n(`_result${e}`)),r&&(a+=r()),a+="}\n",a+="})",i+=`_fn${e}(${this.args({before:l.context?"_context":void 0,after:a})});\n`;break;case"promise":i+=`var _hasResult${e} = false;\n`,i+=`var _promise${e} = _fn${e}(${this.args({before:l.context?"_context":void 0})});\n`,i+=`if (!_promise${e} || !_promise${e}.then)\n`,i+=`  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${e} + ')');\n`,i+=`_promise${e}.then((function(_result${e}) {\n`,i+=`_hasResult${e} = true;\n`,n&&(i+=n(`_result${e}`)),r&&(i+=r()),i+=`}), function(_err${e}) {\n`,i+=`if(_hasResult${e}) throw _err${e};\n`,i+=t(`_err${e}`),i+="});\n"}return i}callTapsSeries({onError:e,onResult:t,resultReturns:n,onDone:r,doneReturns:o,rethrowIfPossible:i}){if(0===this.options.taps.length)return r();const a=this.options.taps.findIndex((e=>"sync"!==e.type)),l=n||o;let u="",c=r,s=0;for(let n=this.options.taps.length-1;n>=0;n--){const o=n;c!==r&&("sync"!==this.options.taps[o].type||s++>20)&&(s=0,u+=`function _next${o}() {\n`,u+=c(),u+="}\n",c=()=>`${l?"return ":""}_next${o}();\n`);const d=c,f=e=>e?"":r(),p=this.callTap(o,{onError:t=>e(o,t,d,f),onResult:t&&(e=>t(o,e,d,f)),onDone:!t&&d,rethrowIfPossible:i&&(a<0||o<a)});c=()=>p}return u+=c(),u}callTapsLooping({onError:e,onDone:t,rethrowIfPossible:n}){if(0===this.options.taps.length)return t();const r=this.options.taps.every((e=>"sync"===e.type));let o="";r||(o+="var _looper = (function() {\n",o+="var _loopAsync = false;\n"),o+="var _loop;\n",o+="do {\n",o+="_loop = false;\n";for(let e=0;e<this.options.interceptors.length;e++){const t=this.options.interceptors[e];t.loop&&(o+=`${this.getInterceptor(e)}.loop(${this.args({before:t.context?"_context":void 0})});\n`)}return o+=this.callTapsSeries({onError:e,onResult:(e,t,n,o)=>{let i="";return i+=`if(${t} !== undefined) {\n`,i+="_loop = true;\n",r||(i+="if(_loopAsync) _looper();\n"),i+=o(!0),i+="} else {\n",i+=n(),i+="}\n",i},onDone:t&&(()=>{let e="";return e+="if(!_loop) {\n",e+=t(),e+="}\n",e}),rethrowIfPossible:n&&r}),o+="} while(_loop);\n",r||(o+="_loopAsync = true;\n",o+="});\n",o+="_looper();\n"),o}callTapsParallel({onError:e,onResult:t,onDone:n,rethrowIfPossible:r,onTap:o=((e,t)=>t())}){if(this.options.taps.length<=1)return this.callTapsSeries({onError:e,onResult:t,onDone:n,rethrowIfPossible:r});let i="";i+="do {\n",i+=`var _counter = ${this.options.taps.length};\n`,n&&(i+="var _done = (function() {\n",i+=n(),i+="});\n");for(let a=0;a<this.options.taps.length;a++){const l=()=>n?"if(--_counter === 0) _done();\n":"--_counter;",u=e=>e||!n?"_counter = 0;\n":"_counter = 0;\n_done();\n";i+="if(_counter <= 0) break;\n",i+=o(a,(()=>this.callTap(a,{onError:t=>{let n="";return n+="if(_counter > 0) {\n",n+=e(a,t,l,u),n+="}\n",n},onResult:t&&(e=>{let n="";return n+="if(_counter > 0) {\n",n+=t(a,e,l,u),n+="}\n",n}),onDone:!t&&(()=>l()),rethrowIfPossible:r})),l,u)}return i+="} while(false);\n",i}args({before:e,after:t}={}){let n=this._args;return e&&(n=[e].concat(n)),t&&(n=n.concat(t)),0===n.length?"":n.join(", ")}getTapFn(e){return`_x[${e}]`}getTap(e){return`_taps[${e}]`}getInterceptor(e){return`_interceptors[${e}]`}};const Mv=Dv,Tv=Pv;const Fv=new class extends Tv{content({onError:e,onDone:t,rethrowIfPossible:n}){return this.callTapsSeries({onError:(t,n)=>e(n),onDone:t,rethrowIfPossible:n})}},Nv=()=>{throw new Error("tapAsync is not supported on a SyncHook")},Vv=()=>{throw new Error("tapPromise is not supported on a SyncHook")},Lv=function(e){return Fv.setup(this,e),Fv.create(e)};function Bv(e=[],t=void 0){const n=new Mv(e,t);return n.constructor=Bv,n.tapAsync=Nv,n.tapPromise=Vv,n.compile=Lv,n}Bv.prototype=null;var $v=Bv;const zv=Pv;new class extends zv{content({onError:e,onResult:t,resultReturns:n,onDone:r,rethrowIfPossible:o}){return this.callTapsSeries({onError:(t,n)=>e(n),onResult:(e,n,r)=>`if(${n} !== undefined) {\n${t(n)};\n} else {\n${r()}}\n`,resultReturns:n,onDone:r,rethrowIfPossible:o})}};const Uv=Pv;new class extends Uv{content({onError:e,onResult:t,resultReturns:n,rethrowIfPossible:r}){return this.callTapsSeries({onError:(t,n)=>e(n),onResult:(e,t,n)=>{let r="";return r+=`if(${t} !== undefined) {\n`,r+=`${this._args[0]} = ${t};\n`,r+="}\n",r+=n(),r},onDone:()=>t(this._args[0]),doneReturns:n,rethrowIfPossible:r})}};const Hv=Pv;new class extends Hv{content({onError:e,onDone:t,rethrowIfPossible:n}){return this.callTapsLooping({onError:(t,n)=>e(n),onDone:t,rethrowIfPossible:n})}};const qv=Dv,Wv=Pv;const Gv=new class extends Wv{content({onError:e,onDone:t}){return this.callTapsParallel({onError:(t,n,r,o)=>e(n)+o(!0),onDone:t})}},Kv=function(e){return Gv.setup(this,e),Gv.create(e)};function Yv(e=[],t=void 0){const n=new qv(e,t);return n.constructor=Yv,n.compile=Kv,n._call=void 0,n.call=void 0,n}Yv.prototype=null;var Xv=Yv;const Jv=Pv;new class extends Jv{content({onError:e,onResult:t,onDone:n}){let r="";return r+=`var _results = new Array(${this.options.taps.length});\n`,r+="var _checkDone = function() {\n",r+="for(var i = 0; i < _results.length; i++) {\n",r+="var item = _results[i];\n",r+="if(item === undefined) return false;\n",r+="if(item.result !== undefined) {\n",r+=t("item.result"),r+="return true;\n",r+="}\n",r+="if(item.error) {\n",r+=e("item.error"),r+="return true;\n",r+="}\n",r+="}\n",r+="return false;\n",r+="}\n",r+=this.callTapsParallel({onError:(e,t,n,r)=>{let o="";return o+=`if(${e} < _results.length && ((_results.length = ${e+1}), (_results[${e}] = { error: ${t} }), _checkDone())) {\n`,o+=r(!0),o+="} else {\n",o+=n(),o+="}\n",o},onResult:(e,t,n,r)=>{let o="";return o+=`if(${e} < _results.length && (${t} !== undefined && (_results.length = ${e+1}), (_results[${e}] = { result: ${t} }), _checkDone())) {\n`,o+=r(!0),o+="} else {\n",o+=n(),o+="}\n",o},onTap:(e,t,n,r)=>{let o="";return e>0&&(o+=`if(${e} >= _results.length) {\n`,o+=n(),o+="} else {\n"),o+=t(),e>0&&(o+="}\n"),o},onDone:n}),r}};const Zv=Pv;new class extends Zv{content({onError:e,onDone:t}){return this.callTapsSeries({onError:(t,n,r,o)=>e(n)+o(!0),onDone:t})}};const Qv=Pv;new class extends Qv{content({onError:e,onResult:t,resultReturns:n,onDone:r}){return this.callTapsSeries({onError:(t,n,r,o)=>e(n)+o(!0),onResult:(e,n,r)=>`if(${n} !== undefined) {\n${t(n)}\n} else {\n${r()}}\n`,resultReturns:n,onDone:r})}};const eg=Pv;new class extends eg{content({onError:e,onDone:t}){return this.callTapsLooping({onError:(t,n,r,o)=>e(n)+o(!0),onDone:t})}};const tg=Pv;new class extends tg{content({onError:e,onResult:t,onDone:n}){return this.callTapsSeries({onError:(t,n,r,o)=>e(n)+o(!0),onResult:(e,t,n)=>{let r="";return r+=`if(${t} !== undefined) {\n`,r+=`${this._args[0]} = ${t};\n`,r+="}\n",r+=n(),r},onDone:()=>t(this._args[0])})}};const ng=Sv,rg=(e,t)=>t;class og{constructor(e,t=void 0){this._map=new Map,this.name=t,this._factory=e,this._interceptors=[]}get(e){return this._map.get(e)}for(e){const t=this.get(e);if(void 0!==t)return t;let n=this._factory(e);const r=this._interceptors;for(let t=0;t<r.length;t++)n=r[t].factory(e,n);return this._map.set(e,n),n}intercept(e){this._interceptors.push(Object.assign({factory:rg},e))}}og.prototype.tap=ng.deprecate((function(e,t,n){return this.for(e).tap(t,n)}),"HookMap#tap(key,…) is deprecated. Use HookMap#for(key).tap(…) instead."),og.prototype.tapAsync=ng.deprecate((function(e,t,n){return this.for(e).tapAsync(t,n)}),"HookMap#tapAsync(key,…) is deprecated. Use HookMap#for(key).tapAsync(…) instead."),og.prototype.tapPromise=ng.deprecate((function(e,t,n){return this.for(e).tapPromise(t,n)}),"HookMap#tapPromise(key,…) is deprecated. Use HookMap#for(key).tapPromise(…) instead.");var ig=$v,ag=Xv,lg={};!function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var o in r)n(r,o)&&(e[o]=r[o])}}return e},e.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),o);else for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){var t,n,r,o,i,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),o=0,t=0,n=e.length;t<n;t++)i=e[t],a.set(i,o),o+=i.length;return a}},o={arraySet:function(e,t,n,r,o){for(var i=0;i<r;i++)e[o+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(t)}(lg);var ug={},cg={},sg={},dg=lg,fg=0,pg=1;function hg(e){for(var t=e.length;--t>=0;)e[t]=0}var vg=0,gg=29,mg=256,yg=mg+1+gg,bg=30,wg=19,_g=2*yg+1,kg=15,Cg=16,Eg=7,Og=256,Sg=16,xg=17,jg=18,Ig=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Rg=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ag=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Dg=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Pg=new Array(2*(yg+2));hg(Pg);var Mg=new Array(2*bg);hg(Mg);var Tg=new Array(512);hg(Tg);var Fg=new Array(256);hg(Fg);var Ng=new Array(gg);hg(Ng);var Vg,Lg,Bg,$g=new Array(bg);function zg(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}function Ug(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Hg(e){return e<256?Tg[e]:Tg[256+(e>>>7)]}function qg(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function Wg(e,t,n){e.bi_valid>Cg-n?(e.bi_buf|=t<<e.bi_valid&65535,qg(e,e.bi_buf),e.bi_buf=t>>Cg-e.bi_valid,e.bi_valid+=n-Cg):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function Gg(e,t,n){Wg(e,n[2*t],n[2*t+1])}function Kg(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function Yg(e,t,n){var r,o,i=new Array(kg+1),a=0;for(r=1;r<=kg;r++)i[r]=a=a+n[r-1]<<1;for(o=0;o<=t;o++){var l=e[2*o+1];0!==l&&(e[2*o]=Kg(i[l]++,l))}}function Xg(e){var t;for(t=0;t<yg;t++)e.dyn_ltree[2*t]=0;for(t=0;t<bg;t++)e.dyn_dtree[2*t]=0;for(t=0;t<wg;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Og]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Jg(e){e.bi_valid>8?qg(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Zg(e,t,n,r){var o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]}function Qg(e,t,n){for(var r=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&Zg(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!Zg(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r}function em(e,t,n){var r,o,i,a,l=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],o=e.pending_buf[e.l_buf+l],l++,0===r?Gg(e,o,t):(Gg(e,(i=Fg[o])+mg+1,t),0!==(a=Ig[i])&&Wg(e,o-=Ng[i],a),Gg(e,i=Hg(--r),n),0!==(a=Rg[i])&&Wg(e,r-=$g[i],a))}while(l<e.last_lit);Gg(e,Og,t)}function tm(e,t){var n,r,o,i=t.dyn_tree,a=t.stat_desc.static_tree,l=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=_g,n=0;n<u;n++)0!==i[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[o]=0,e.opt_len--,l&&(e.static_len-=a[2*o+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)Qg(e,i,n);o=u;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Qg(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*o]=i[2*n]+i[2*r],e.depth[o]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=o,e.heap[1]=o++,Qg(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,o,i,a,l,u=t.dyn_tree,c=t.max_code,s=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,h=t.stat_desc.max_length,v=0;for(i=0;i<=kg;i++)e.bl_count[i]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<_g;n++)(i=u[2*u[2*(r=e.heap[n])+1]+1]+1)>h&&(i=h,v++),u[2*r+1]=i,!(r>c)&&(e.bl_count[i]++,a=0,r>=p&&(a=f[r-p]),l=u[2*r],e.opt_len+=l*(i+a),d&&(e.static_len+=l*(s[2*r+1]+a)));if(0!==v){do{for(i=h-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[h]--,v-=2}while(v>0);for(i=h;0!==i;i--)for(r=e.bl_count[i];0!==r;)!((o=e.heap[--n])>c)&&(u[2*o+1]!==i&&(e.opt_len+=(i-u[2*o+1])*u[2*o],u[2*o+1]=i),r--)}}(e,t),Yg(i,c,e.bl_count)}function nm(e,t,n){var r,o,i=-1,a=t[1],l=0,u=7,c=4;for(0===a&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=a,a=t[2*(r+1)+1],!(++l<u&&o===a)&&(l<c?e.bl_tree[2*o]+=l:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[2*Sg]++):l<=10?e.bl_tree[2*xg]++:e.bl_tree[2*jg]++,l=0,i=o,0===a?(u=138,c=3):o===a?(u=6,c=3):(u=7,c=4))}function rm(e,t,n){var r,o,i=-1,a=t[1],l=0,u=7,c=4;for(0===a&&(u=138,c=3),r=0;r<=n;r++)if(o=a,a=t[2*(r+1)+1],!(++l<u&&o===a)){if(l<c)do{Gg(e,o,e.bl_tree)}while(0!=--l);else 0!==o?(o!==i&&(Gg(e,o,e.bl_tree),l--),Gg(e,Sg,e.bl_tree),Wg(e,l-3,2)):l<=10?(Gg(e,xg,e.bl_tree),Wg(e,l-3,3)):(Gg(e,jg,e.bl_tree),Wg(e,l-11,7));l=0,i=o,0===a?(u=138,c=3):o===a?(u=6,c=3):(u=7,c=4)}}hg($g);var om=!1;function im(e,t,n,r){Wg(e,(vg<<1)+(r?1:0),3),function(e,t,n,r){Jg(e),r&&(qg(e,n),qg(e,~n)),dg.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}sg._tr_init=function(e){om||(function(){var e,t,n,r,o,i=new Array(kg+1);for(n=0,r=0;r<gg-1;r++)for(Ng[r]=n,e=0;e<1<<Ig[r];e++)Fg[n++]=r;for(Fg[n-1]=r,o=0,r=0;r<16;r++)for($g[r]=o,e=0;e<1<<Rg[r];e++)Tg[o++]=r;for(o>>=7;r<bg;r++)for($g[r]=o<<7,e=0;e<1<<Rg[r]-7;e++)Tg[256+o++]=r;for(t=0;t<=kg;t++)i[t]=0;for(e=0;e<=143;)Pg[2*e+1]=8,e++,i[8]++;for(;e<=255;)Pg[2*e+1]=9,e++,i[9]++;for(;e<=279;)Pg[2*e+1]=7,e++,i[7]++;for(;e<=287;)Pg[2*e+1]=8,e++,i[8]++;for(Yg(Pg,yg+1,i),e=0;e<bg;e++)Mg[2*e+1]=5,Mg[2*e]=Kg(e,5);Vg=new zg(Pg,Ig,mg+1,yg,kg),Lg=new zg(Mg,Rg,0,bg,kg),Bg=new zg(new Array(0),Ag,0,wg,Eg)}(),om=!0),e.l_desc=new Ug(e.dyn_ltree,Vg),e.d_desc=new Ug(e.dyn_dtree,Lg),e.bl_desc=new Ug(e.bl_tree,Bg),e.bi_buf=0,e.bi_valid=0,Xg(e)},sg._tr_stored_block=im,sg._tr_flush_block=function(e,t,n,r){var o,i,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return fg;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return pg;for(t=32;t<mg;t++)if(0!==e.dyn_ltree[2*t])return pg;return fg}(e)),tm(e,e.l_desc),tm(e,e.d_desc),a=function(e){var t;for(nm(e,e.dyn_ltree,e.l_desc.max_code),nm(e,e.dyn_dtree,e.d_desc.max_code),tm(e,e.bl_desc),t=wg-1;t>=3&&0===e.bl_tree[2*Dg[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=o&&(o=i)):o=i=n+5,n+4<=o&&-1!==t?im(e,t,n,r):4===e.strategy||i===o?(Wg(e,2+(r?1:0),3),em(e,Pg,Mg)):(Wg(e,4+(r?1:0),3),function(e,t,n,r){var o;for(Wg(e,t-257,5),Wg(e,n-1,5),Wg(e,r-4,4),o=0;o<r;o++)Wg(e,e.bl_tree[2*Dg[o]+1],3);rm(e,e.dyn_ltree,t-1),rm(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),em(e,e.dyn_ltree,e.dyn_dtree)),Xg(e),r&&Jg(e)},sg._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Fg[n]+mg+1)]++,e.dyn_dtree[2*Hg(t)]++),e.last_lit===e.lit_bufsize-1},sg._tr_align=function(e){Wg(e,2,3),Gg(e,Og,Pg),function(e){16===e.bi_valid?(qg(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)};var am=function(e,t,n,r){for(var o=65535&e|0,i=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{i=i+(o=o+t[r++]|0)|0}while(--a);o%=65521,i%=65521}return o|i<<16|0};var lm=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();var um,cm=function(e,t,n,r){var o=lm,i=r+n;e^=-1;for(var a=r;a<i;a++)e=e>>>8^o[255&(e^t[a])];return-1^e},sm={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},dm=lg,fm=sg,pm=am,hm=cm,vm=sm,gm=0,mm=4,ym=0,bm=-2,wm=-1,_m=4,km=2,Cm=8,Em=9,Om=286,Sm=30,xm=19,jm=2*Om+1,Im=15,Rm=3,Am=258,Dm=Am+Rm+1,Pm=42,Mm=103,Tm=113,Fm=666,Nm=1,Vm=2,Lm=3,Bm=4;function $m(e,t){return e.msg=vm[t],t}function zm(e){return(e<<1)-(e>4?9:0)}function Um(e){for(var t=e.length;--t>=0;)e[t]=0}function Hm(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(dm.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function qm(e,t){fm._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Hm(e.strm)}function Wm(e,t){e.pending_buf[e.pending++]=t}function Gm(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function Km(e,t,n,r){var o=e.avail_in;return o>r&&(o=r),0===o?0:(e.avail_in-=o,dm.arraySet(t,e.input,e.next_in,o,n),1===e.state.wrap?e.adler=pm(e.adler,t,o,n):2===e.state.wrap&&(e.adler=hm(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)}function Ym(e,t){var n,r,o=e.max_chain_length,i=e.strstart,a=e.prev_length,l=e.nice_match,u=e.strstart>e.w_size-Dm?e.strstart-(e.w_size-Dm):0,c=e.window,s=e.w_mask,d=e.prev,f=e.strstart+Am,p=c[i+a-1],h=c[i+a];e.prev_length>=e.good_match&&(o>>=2),l>e.lookahead&&(l=e.lookahead);do{if(c[(n=t)+a]===h&&c[n+a-1]===p&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<f);if(r=Am-(f-i),i=f-Am,r>a){if(e.match_start=t,a=r,r>=l)break;p=c[i+a-1],h=c[i+a]}}}while((t=d[t&s])>u&&0!=--o);return a<=e.lookahead?a:e.lookahead}function Xm(e){var t,n,r,o,i,a=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-Dm)){dm.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=a?r-a:0}while(--n);t=n=a;do{r=e.prev[--t],e.prev[t]=r>=a?r-a:0}while(--n);o+=a}if(0===e.strm.avail_in)break;if(n=Km(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=Rm)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+Rm-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<Rm)););}while(e.lookahead<Dm&&0!==e.strm.avail_in)}function Jm(e,t){for(var n,r;;){if(e.lookahead<Dm){if(Xm(e),e.lookahead<Dm&&t===gm)return Nm;if(0===e.lookahead)break}if(n=0,e.lookahead>=Rm&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Rm-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Dm&&(e.match_length=Ym(e,n)),e.match_length>=Rm)if(r=fm._tr_tally(e,e.strstart-e.match_start,e.match_length-Rm),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Rm){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Rm-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=fm._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(qm(e,!1),0===e.strm.avail_out))return Nm}return e.insert=e.strstart<Rm-1?e.strstart:Rm-1,t===mm?(qm(e,!0),0===e.strm.avail_out?Lm:Bm):e.last_lit&&(qm(e,!1),0===e.strm.avail_out)?Nm:Vm}function Zm(e,t){for(var n,r,o;;){if(e.lookahead<Dm){if(Xm(e),e.lookahead<Dm&&t===gm)return Nm;if(0===e.lookahead)break}if(n=0,e.lookahead>=Rm&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Rm-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Rm-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Dm&&(e.match_length=Ym(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===Rm&&e.strstart-e.match_start>4096)&&(e.match_length=Rm-1)),e.prev_length>=Rm&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-Rm,r=fm._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-Rm),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Rm-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=Rm-1,e.strstart++,r&&(qm(e,!1),0===e.strm.avail_out))return Nm}else if(e.match_available){if((r=fm._tr_tally(e,0,e.window[e.strstart-1]))&&qm(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return Nm}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=fm._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Rm-1?e.strstart:Rm-1,t===mm?(qm(e,!0),0===e.strm.avail_out?Lm:Bm):e.last_lit&&(qm(e,!1),0===e.strm.avail_out)?Nm:Vm}function Qm(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}function ey(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Cm,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new dm.Buf16(2*jm),this.dyn_dtree=new dm.Buf16(2*(2*Sm+1)),this.bl_tree=new dm.Buf16(2*(2*xm+1)),Um(this.dyn_ltree),Um(this.dyn_dtree),Um(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new dm.Buf16(Im+1),this.heap=new dm.Buf16(2*Om+1),Um(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new dm.Buf16(2*Om+1),Um(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ty(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=km,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Pm:Tm,e.adler=2===t.wrap?0:1,t.last_flush=gm,fm._tr_init(t),ym):$m(e,bm)}function ny(e){var t=ty(e);return t===ym&&function(e){e.window_size=2*e.w_size,Um(e.head),e.max_lazy_match=um[e.level].max_lazy,e.good_match=um[e.level].good_length,e.nice_match=um[e.level].nice_length,e.max_chain_length=um[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Rm-1,e.match_available=0,e.ins_h=0}(e.state),t}function ry(e,t,n,r,o,i){if(!e)return bm;var a=1;if(t===wm&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),o<1||o>Em||n!==Cm||r<8||r>15||t<0||t>9||i<0||i>_m)return $m(e,bm);8===r&&(r=9);var l=new ey;return e.state=l,l.strm=e,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+Rm-1)/Rm),l.window=new dm.Buf8(2*l.w_size),l.head=new dm.Buf16(l.hash_size),l.prev=new dm.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new dm.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=i,l.method=n,ny(e)}um=[new Qm(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Xm(e),0===e.lookahead&&t===gm)return Nm;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,qm(e,!1),0===e.strm.avail_out)||e.strstart-e.block_start>=e.w_size-Dm&&(qm(e,!1),0===e.strm.avail_out))return Nm}return e.insert=0,t===mm?(qm(e,!0),0===e.strm.avail_out?Lm:Bm):(e.strstart>e.block_start&&(qm(e,!1),e.strm.avail_out),Nm)})),new Qm(4,4,8,4,Jm),new Qm(4,5,16,8,Jm),new Qm(4,6,32,32,Jm),new Qm(4,4,16,16,Zm),new Qm(8,16,32,32,Zm),new Qm(8,16,128,128,Zm),new Qm(8,32,128,256,Zm),new Qm(32,128,258,1024,Zm),new Qm(32,258,258,4096,Zm)],cg.deflateInit=function(e,t){return ry(e,t,Cm,15,8,0)},cg.deflateInit2=ry,cg.deflateReset=ny,cg.deflateResetKeep=ty,cg.deflateSetHeader=function(e,t){return e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,ym):bm},cg.deflate=function(e,t){var n,r,o,i;if(!e||!e.state||t>5||t<0)return e?$m(e,bm):bm;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===Fm&&t!==mm)return $m(e,0===e.avail_out?-5:bm);if(r.strm=e,n=r.last_flush,r.last_flush=t,r.status===Pm)if(2===r.wrap)e.adler=0,Wm(r,31),Wm(r,139),Wm(r,8),r.gzhead?(Wm(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Wm(r,255&r.gzhead.time),Wm(r,r.gzhead.time>>8&255),Wm(r,r.gzhead.time>>16&255),Wm(r,r.gzhead.time>>24&255),Wm(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Wm(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Wm(r,255&r.gzhead.extra.length),Wm(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=hm(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(Wm(r,0),Wm(r,0),Wm(r,0),Wm(r,0),Wm(r,0),Wm(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Wm(r,3),r.status=Tm);else{var a=Cm+(r.w_bits-8<<4)<<8;a|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=Tm,Gm(r,a),0!==r.strstart&&(Gm(r,e.adler>>>16),Gm(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(o=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>o&&(e.adler=hm(e.adler,r.pending_buf,r.pending-o,o)),Hm(e),o=r.pending,r.pending!==r.pending_buf_size));)Wm(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>o&&(e.adler=hm(e.adler,r.pending_buf,r.pending-o,o)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=hm(e.adler,r.pending_buf,r.pending-o,o)),Hm(e),o=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Wm(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>o&&(e.adler=hm(e.adler,r.pending_buf,r.pending-o,o)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){o=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>o&&(e.adler=hm(e.adler,r.pending_buf,r.pending-o,o)),Hm(e),o=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Wm(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>o&&(e.adler=hm(e.adler,r.pending_buf,r.pending-o,o)),0===i&&(r.status=Mm)}else r.status=Mm;if(r.status===Mm&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&Hm(e),r.pending+2<=r.pending_buf_size&&(Wm(r,255&e.adler),Wm(r,e.adler>>8&255),e.adler=0,r.status=Tm)):r.status=Tm),0!==r.pending){if(Hm(e),0===e.avail_out)return r.last_flush=-1,ym}else if(0===e.avail_in&&zm(t)<=zm(n)&&t!==mm)return $m(e,-5);if(r.status===Fm&&0!==e.avail_in)return $m(e,-5);if(0!==e.avail_in||0!==r.lookahead||t!==gm&&r.status!==Fm){var l=2===r.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(Xm(e),0===e.lookahead)){if(t===gm)return Nm;break}if(e.match_length=0,n=fm._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(qm(e,!1),0===e.strm.avail_out))return Nm}return e.insert=0,t===mm?(qm(e,!0),0===e.strm.avail_out?Lm:Bm):e.last_lit&&(qm(e,!1),0===e.strm.avail_out)?Nm:Vm}(r,t):3===r.strategy?function(e,t){for(var n,r,o,i,a=e.window;;){if(e.lookahead<=Am){if(Xm(e),e.lookahead<=Am&&t===gm)return Nm;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=Rm&&e.strstart>0&&(r=a[o=e.strstart-1])===a[++o]&&r===a[++o]&&r===a[++o]){i=e.strstart+Am;do{}while(r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&o<i);e.match_length=Am-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Rm?(n=fm._tr_tally(e,1,e.match_length-Rm),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=fm._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(qm(e,!1),0===e.strm.avail_out))return Nm}return e.insert=0,t===mm?(qm(e,!0),0===e.strm.avail_out?Lm:Bm):e.last_lit&&(qm(e,!1),0===e.strm.avail_out)?Nm:Vm}(r,t):um[r.level].func(r,t);if((l===Lm||l===Bm)&&(r.status=Fm),l===Nm||l===Lm)return 0===e.avail_out&&(r.last_flush=-1),ym;if(l===Vm&&(1===t?fm._tr_align(r):5!==t&&(fm._tr_stored_block(r,0,0,!1),3===t&&(Um(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Hm(e),0===e.avail_out))return r.last_flush=-1,ym}return t!==mm?ym:r.wrap<=0?1:(2===r.wrap?(Wm(r,255&e.adler),Wm(r,e.adler>>8&255),Wm(r,e.adler>>16&255),Wm(r,e.adler>>24&255),Wm(r,255&e.total_in),Wm(r,e.total_in>>8&255),Wm(r,e.total_in>>16&255),Wm(r,e.total_in>>24&255)):(Gm(r,e.adler>>>16),Gm(r,65535&e.adler)),Hm(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?ym:1)},cg.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==Pm&&69!==t&&73!==t&&91!==t&&t!==Mm&&t!==Tm&&t!==Fm?$m(e,bm):(e.state=null,t===Tm?$m(e,-3):ym):bm},cg.deflateSetDictionary=function(e,t){var n,r,o,i,a,l,u,c,s=t.length;if(!e||!e.state||(2===(i=(n=e.state).wrap)||1===i&&n.status!==Pm||n.lookahead))return bm;for(1===i&&(e.adler=pm(e.adler,t,s,0)),n.wrap=0,s>=n.w_size&&(0===i&&(Um(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new dm.Buf8(n.w_size),dm.arraySet(c,t,s-n.w_size,n.w_size,0),t=c,s=n.w_size),a=e.avail_in,l=e.next_in,u=e.input,e.avail_in=s,e.next_in=0,e.input=t,Xm(n);n.lookahead>=Rm;){r=n.strstart,o=n.lookahead-(Rm-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+Rm-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--o);n.strstart=r,n.lookahead=Rm-1,Xm(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Rm-1,n.match_available=0,e.next_in=l,e.input=u,e.avail_in=a,n.wrap=i,ym},cg.deflateInfo="pako deflate (from Nodeca project)";var oy={},iy=lg,ay=!0,ly=!0;try{String.fromCharCode.apply(null,[0])}catch{ay=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ly=!1}for(var uy=new iy.Buf8(256),cy=0;cy<256;cy++)uy[cy]=cy>=252?6:cy>=248?5:cy>=240?4:cy>=224?3:cy>=192?2:1;function sy(e,t){if(t<65534&&(e.subarray&&ly||!e.subarray&&ay))return String.fromCharCode.apply(null,iy.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}uy[254]=uy[254]=1,oy.string2buf=function(e){var t,n,r,o,i,a=e.length,l=0;for(o=0;o<a;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&(56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new iy.Buf8(l),i=0,o=0;i<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&(56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},oy.buf2binstring=function(e){return sy(e,e.length)},oy.binstring2buf=function(e){for(var t=new iy.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},oy.buf2string=function(e,t){var n,r,o,i,a=t||e.length,l=new Array(2*a);for(r=0,n=0;n<a;)if((o=e[n++])<128)l[r++]=o;else if((i=uy[o])>4)l[r++]=65533,n+=i-1;else{for(o&=2===i?31:3===i?15:7;i>1&&n<a;)o=o<<6|63&e[n++],i--;i>1?l[r++]=65533:o<65536?l[r++]=o:(o-=65536,l[r++]=55296|o>>10&1023,l[r++]=56320|1023&o)}return sy(l,r)},oy.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+uy[e[n]]>t?n:t};var dy=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},fy=cg,py=lg,hy=oy,vy=sm,gy=dy,my=Object.prototype.toString,yy=0,by=-1,wy=0,_y=8;function ky(e){if(!(this instanceof ky))return new ky(e);this.options=py.assign({level:by,method:_y,chunkSize:16384,windowBits:15,memLevel:8,strategy:wy,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new gy,this.strm.avail_out=0;var n=fy.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==yy)throw new Error(vy[n]);if(t.header&&fy.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?hy.string2buf(t.dictionary):"[object ArrayBuffer]"===my.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=fy.deflateSetDictionary(this.strm,r))!==yy)throw new Error(vy[n]);this._dict_set=!0}}function Cy(e,t){var n=new ky(t);if(n.push(e,!0),n.err)throw n.msg||vy[n.err];return n.result}ky.prototype.push=function(e,t){var n,r,o=this.strm,i=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=hy.string2buf(e):"[object ArrayBuffer]"===my.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new py.Buf8(i),o.next_out=0,o.avail_out=i),1!==(n=fy.deflate(o,r))&&n!==yy)return this.onEnd(n),this.ended=!0,!1;(0===o.avail_out||0===o.avail_in&&(4===r||2===r))&&("string"===this.options.to?this.onData(hy.buf2binstring(py.shrinkBuf(o.output,o.next_out))):this.onData(py.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==n);return 4===r?(n=fy.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===yy):(2===r&&(this.onEnd(yy),o.avail_out=0),!0)},ky.prototype.onData=function(e){this.chunks.push(e)},ky.prototype.onEnd=function(e){e===yy&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=py.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},ug.Deflate=ky,ug.deflate=Cy,ug.deflateRaw=function(e,t){return(t=t||{}).raw=!0,Cy(e,t)},ug.gzip=function(e,t){return(t=t||{}).gzip=!0,Cy(e,t)};var Ey={},Oy={},Sy=lg,xy=15,jy=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Iy=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Ry=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Ay=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Dy=lg,Py=am,My=cm,Ty=function(e,t){var n,r,o,i,a,l,u,c,s,d,f,p,h,v,g,m,y,b,w,_,k,C,E,O,S;n=e.state,r=e.next_in,O=e.input,o=r+(e.avail_in-5),i=e.next_out,S=e.output,a=i-(t-e.avail_out),l=i+(e.avail_out-257),u=n.dmax,c=n.wsize,s=n.whave,d=n.wnext,f=n.window,p=n.hold,h=n.bits,v=n.lencode,g=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{h<15&&(p+=O[r++]<<h,h+=8,p+=O[r++]<<h,h+=8),b=v[p&m];t:for(;;){if(p>>>=w=b>>>24,h-=w,0===(w=b>>>16&255))S[i++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=v[(65535&b)+(p&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&b,(w&=15)&&(h<w&&(p+=O[r++]<<h,h+=8),_+=p&(1<<w)-1,p>>>=w,h-=w),h<15&&(p+=O[r++]<<h,h+=8,p+=O[r++]<<h,h+=8),b=g[p&y];n:for(;;){if(p>>>=w=b>>>24,h-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=g[(65535&b)+(p&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&b,h<(w&=15)&&(p+=O[r++]<<h,(h+=8)<w&&(p+=O[r++]<<h,h+=8)),(k+=p&(1<<w)-1)>u){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=w,h-=w,k>(w=i-a)){if((w=k-w)>s&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(C=0,E=f,0===d){if(C+=c-w,w<_){_-=w;do{S[i++]=f[C++]}while(--w);C=i-k,E=S}}else if(d<w){if(C+=c+d-w,(w-=d)<_){_-=w;do{S[i++]=f[C++]}while(--w);if(C=0,d<_){_-=w=d;do{S[i++]=f[C++]}while(--w);C=i-k,E=S}}}else if(C+=d-w,w<_){_-=w;do{S[i++]=f[C++]}while(--w);C=i-k,E=S}for(;_>2;)S[i++]=E[C++],S[i++]=E[C++],S[i++]=E[C++],_-=3;_&&(S[i++]=E[C++],_>1&&(S[i++]=E[C++]))}else{C=i-k;do{S[i++]=S[C++],S[i++]=S[C++],S[i++]=S[C++],_-=3}while(_>2);_&&(S[i++]=S[C++],_>1&&(S[i++]=S[C++]))}break}}break}}while(r<o&&i<l);r-=_=h>>3,p&=(1<<(h-=_<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=i<l?l-i+257:257-(i-l),n.hold=p,n.bits=h},Fy=function(e,t,n,r,o,i,a,l){var u,c,s,d,f,p,h,v,g,m=l.bits,y=0,b=0,w=0,_=0,k=0,C=0,E=0,O=0,S=0,x=0,j=null,I=0,R=new Sy.Buf16(16),A=new Sy.Buf16(16),D=null,P=0;for(y=0;y<=xy;y++)R[y]=0;for(b=0;b<r;b++)R[t[n+b]]++;for(k=m,_=xy;_>=1&&0===R[_];_--);if(k>_&&(k=_),0===_)return o[i++]=20971520,o[i++]=20971520,l.bits=1,0;for(w=1;w<_&&0===R[w];w++);for(k<w&&(k=w),O=1,y=1;y<=xy;y++)if(O<<=1,(O-=R[y])<0)return-1;if(O>0&&(0===e||1!==_))return-1;for(A[1]=0,y=1;y<xy;y++)A[y+1]=A[y]+R[y];for(b=0;b<r;b++)0!==t[n+b]&&(a[A[t[n+b]]++]=b);if(0===e?(j=D=a,p=19):1===e?(j=jy,I-=257,D=Iy,P-=257,p=256):(j=Ry,D=Ay,p=-1),x=0,b=0,y=w,f=i,C=k,E=0,s=-1,d=(S=1<<k)-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){h=y-E,a[b]<p?(v=0,g=a[b]):a[b]>p?(v=D[P+a[b]],g=j[I+a[b]]):(v=96,g=0),u=1<<y-E,w=c=1<<C;do{o[f+(x>>E)+(c-=u)]=h<<24|v<<16|g|0}while(0!==c);for(u=1<<y-1;x&u;)u>>=1;if(0!==u?(x&=u-1,x+=u):x=0,b++,0==--R[y]){if(y===_)break;y=t[n+a[b]]}if(y>k&&(x&d)!==s){for(0===E&&(E=k),f+=w,O=1<<(C=y-E);C+E<_&&!((O-=R[C+E])<=0);)C++,O<<=1;if(S+=1<<C,1===e&&S>852||2===e&&S>592)return 1;o[s=x&d]=k<<24|C<<16|f-i|0}}return 0!==x&&(o[f+x]=y-E<<24|64<<16|0),l.bits=k,0},Ny=1,Vy=2,Ly=0,By=-2,$y=1,zy=12,Uy=30,Hy=852,qy=592;function Wy(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function Gy(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Dy.Buf16(320),this.work=new Dy.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ky(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=$y,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Dy.Buf32(Hy),t.distcode=t.distdyn=new Dy.Buf32(qy),t.sane=1,t.back=-1,Ly):By}function Yy(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,Ky(e)):By}function Xy(e,t){var n,r;return!e||!e.state||(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15))?By:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Yy(e))}function Jy(e,t){var n,r;return e?(r=new Gy,e.state=r,r.window=null,(n=Xy(e,t))!==Ly&&(e.state=null),n):By}var Zy,Qy,eb=!0;function tb(e){if(eb){var t;for(Zy=new Dy.Buf32(512),Qy=new Dy.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Fy(Ny,e.lens,0,288,Zy,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Fy(Vy,e.lens,0,32,Qy,0,e.work,{bits:5}),eb=!1}e.lencode=Zy,e.lenbits=9,e.distcode=Qy,e.distbits=5}function nb(e,t,n,r){var o,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Dy.Buf8(i.wsize)),r>=i.wsize?(Dy.arraySet(i.window,t,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((o=i.wsize-i.wnext)>r&&(o=r),Dy.arraySet(i.window,t,n-r,o,i.wnext),(r-=o)?(Dy.arraySet(i.window,t,n-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}Oy.inflateReset=Yy,Oy.inflateReset2=Xy,Oy.inflateResetKeep=Ky,Oy.inflateInit=function(e){return Jy(e,15)},Oy.inflateInit2=Jy,Oy.inflate=function(e,t){var n,r,o,i,a,l,u,c,s,d,f,p,h,v,g,m,y,b,w,_,k,C,E,O,S=0,x=new Dy.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return By;(n=e.state).mode===zy&&(n.mode=13),a=e.next_out,o=e.output,u=e.avail_out,i=e.next_in,r=e.input,l=e.avail_in,c=n.hold,s=n.bits,d=l,f=u,C=Ly;e:for(;;)switch(n.mode){case $y:if(0===n.wrap){n.mode=13;break}for(;s<16;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}if(2&n.wrap&&35615===c){n.check=0,x[0]=255&c,x[1]=c>>>8&255,n.check=My(n.check,x,2,0),c=0,s=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Uy;break}if(8!=(15&c)){e.msg="unknown compression method",n.mode=Uy;break}if(s-=4,k=8+(15&(c>>>=4)),0===n.wbits)n.wbits=k;else if(k>n.wbits){e.msg="invalid window size",n.mode=Uy;break}n.dmax=1<<k,e.adler=n.check=1,n.mode=512&c?10:zy,c=0,s=0;break;case 2:for(;s<16;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}if(n.flags=c,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=Uy;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Uy;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,n.check=My(n.check,x,2,0)),c=0,s=0,n.mode=3;case 3:for(;s<32;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}n.head&&(n.head.time=c),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,n.check=My(n.check,x,4,0)),c=0,s=0,n.mode=4;case 4:for(;s<16;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,n.check=My(n.check,x,2,0)),c=0,s=0,n.mode=5;case 5:if(1024&n.flags){for(;s<16;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(x[0]=255&c,x[1]=c>>>8&255,n.check=My(n.check,x,2,0)),c=0,s=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((p=n.length)>l&&(p=l),p&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Dy.arraySet(n.head.extra,r,i,p,k)),512&n.flags&&(n.check=My(n.check,r,p,i)),l-=p,i+=p,n.length-=p),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===l)break e;p=0;do{k=r[i+p++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&p<l);if(512&n.flags&&(n.check=My(n.check,r,p,i)),l-=p,i+=p,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===l)break e;p=0;do{k=r[i+p++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&p<l);if(512&n.flags&&(n.check=My(n.check,r,p,i)),l-=p,i+=p,k)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;s<16;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Uy;break}c=0,s=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=zy;break;case 10:for(;s<32;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}e.adler=n.check=Wy(c),c=0,s=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=u,e.next_in=i,e.avail_in=l,n.hold=c,n.bits=s,2;e.adler=n.check=1,n.mode=zy;case zy:if(5===t||6===t)break e;case 13:if(n.last){c>>>=7&s,s-=7&s,n.mode=27;break}for(;s<3;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}switch(n.last=1&c,s-=1,3&(c>>>=1)){case 0:n.mode=14;break;case 1:if(tb(n),n.mode=20,6===t){c>>>=2,s-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=Uy}c>>>=2,s-=2;break;case 14:for(c>>>=7&s,s-=7&s;s<32;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Uy;break}if(n.length=65535&c,c=0,s=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(p=n.length){if(p>l&&(p=l),p>u&&(p=u),0===p)break e;Dy.arraySet(o,r,i,p,a),l-=p,i+=p,u-=p,a+=p,n.length-=p;break}n.mode=zy;break;case 17:for(;s<14;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}if(n.nlen=257+(31&c),c>>>=5,s-=5,n.ndist=1+(31&c),c>>>=5,s-=5,n.ncode=4+(15&c),c>>>=4,s-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Uy;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;s<3;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}n.lens[j[n.have++]]=7&c,c>>>=3,s-=3}for(;n.have<19;)n.lens[j[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},C=Fy(0,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,C){e.msg="invalid code lengths set",n.mode=Uy;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(S=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&S,!((g=S>>>24)<=s);){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}if(y<16)c>>>=g,s-=g,n.lens[n.have++]=y;else{if(16===y){for(O=g+2;s<O;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}if(c>>>=g,s-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=Uy;break}k=n.lens[n.have-1],p=3+(3&c),c>>>=2,s-=2}else if(17===y){for(O=g+3;s<O;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}s-=g,k=0,p=3+(7&(c>>>=g)),c>>>=3,s-=3}else{for(O=g+7;s<O;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}s-=g,k=0,p=11+(127&(c>>>=g)),c>>>=7,s-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Uy;break}for(;p--;)n.lens[n.have++]=k}}if(n.mode===Uy)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Uy;break}if(n.lenbits=9,E={bits:n.lenbits},C=Fy(Ny,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,C){e.msg="invalid literal/lengths set",n.mode=Uy;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},C=Fy(Vy,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,C){e.msg="invalid distances set",n.mode=Uy;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(l>=6&&u>=258){e.next_out=a,e.avail_out=u,e.next_in=i,e.avail_in=l,n.hold=c,n.bits=s,Ty(e,f),a=e.next_out,o=e.output,u=e.avail_out,i=e.next_in,r=e.input,l=e.avail_in,c=n.hold,s=n.bits,n.mode===zy&&(n.back=-1);break}for(n.back=0;m=(S=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&S,!((g=S>>>24)<=s);){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}if(m&&0==(240&m)){for(b=g,w=m,_=y;m=(S=n.lencode[_+((c&(1<<b+w)-1)>>b)])>>>16&255,y=65535&S,!(b+(g=S>>>24)<=s);){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}c>>>=b,s-=b,n.back+=b}if(c>>>=g,s-=g,n.back+=g,n.length=y,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=zy;break}if(64&m){e.msg="invalid literal/length code",n.mode=Uy;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(O=n.extra;s<O;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,s-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(S=n.distcode[c&(1<<n.distbits)-1])>>>16&255,y=65535&S,!((g=S>>>24)<=s);){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}if(0==(240&m)){for(b=g,w=m,_=y;m=(S=n.distcode[_+((c&(1<<b+w)-1)>>b)])>>>16&255,y=65535&S,!(b+(g=S>>>24)<=s);){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}c>>>=b,s-=b,n.back+=b}if(c>>>=g,s-=g,n.back+=g,64&m){e.msg="invalid distance code",n.mode=Uy;break}n.offset=y,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(O=n.extra;s<O;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,s-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Uy;break}n.mode=25;case 25:if(0===u)break e;if(p=f-u,n.offset>p){if((p=n.offset-p)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Uy;break}p>n.wnext?(p-=n.wnext,h=n.wsize-p):h=n.wnext-p,p>n.length&&(p=n.length),v=n.window}else v=o,h=a-n.offset,p=n.length;p>u&&(p=u),u-=p,n.length-=p;do{o[a++]=v[h++]}while(--p);0===n.length&&(n.mode=21);break;case 26:if(0===u)break e;o[a++]=n.length,u--,n.mode=21;break;case 27:if(n.wrap){for(;s<32;){if(0===l)break e;l--,c|=r[i++]<<s,s+=8}if(f-=u,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?My(n.check,o,f,a-f):Py(n.check,o,f,a-f)),f=u,(n.flags?c:Wy(c))!==n.check){e.msg="incorrect data check",n.mode=Uy;break}c=0,s=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;s<32;){if(0===l)break e;l--,c+=r[i++]<<s,s+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Uy;break}c=0,s=0}n.mode=29;case 29:C=1;break e;case Uy:C=-3;break e;case 31:return-4;default:return By}return e.next_out=a,e.avail_out=u,e.next_in=i,e.avail_in=l,n.hold=c,n.bits=s,(n.wsize||f!==e.avail_out&&n.mode<Uy&&(n.mode<27||4!==t))&&nb(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?My(n.check,o,f,e.next_out-f):Py(n.check,o,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===zy?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===f||4===t)&&C===Ly&&(C=-5),C},Oy.inflateEnd=function(e){if(!e||!e.state)return By;var t=e.state;return t.window&&(t.window=null),e.state=null,Ly},Oy.inflateGetHeader=function(e,t){var n;return e&&e.state&&0!=(2&(n=e.state).wrap)?(n.head=t,t.done=!1,Ly):By},Oy.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state&&(0===(n=e.state).wrap||11===n.mode)?11===n.mode&&Py(1,t,r,0)!==n.check?-3:nb(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,Ly):By},Oy.inflateInfo="pako inflate (from Nodeca project)";var rb={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var ob=Oy,ib=lg,ab=oy,lb=rb,ub=sm,cb=dy,sb=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},db=Object.prototype.toString;function fb(e){if(!(this instanceof fb))return new fb(e);this.options=ib.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cb,this.strm.avail_out=0;var n=ob.inflateInit2(this.strm,t.windowBits);if(n!==lb.Z_OK)throw new Error(ub[n]);if(this.header=new sb,ob.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=ab.string2buf(t.dictionary):"[object ArrayBuffer]"===db.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=ob.inflateSetDictionary(this.strm,t.dictionary))!==lb.Z_OK))throw new Error(ub[n])}function pb(e,t){var n=new fb(t);if(n.push(e,!0),n.err)throw n.msg||ub[n.err];return n.result}fb.prototype.push=function(e,t){var n,r,o,i,a,l=this.strm,u=this.options.chunkSize,c=this.options.dictionary,s=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?lb.Z_FINISH:lb.Z_NO_FLUSH,"string"==typeof e?l.input=ab.binstring2buf(e):"[object ArrayBuffer]"===db.call(e)?l.input=new Uint8Array(e):l.input=e,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new ib.Buf8(u),l.next_out=0,l.avail_out=u),(n=ob.inflate(l,lb.Z_NO_FLUSH))===lb.Z_NEED_DICT&&c&&(n=ob.inflateSetDictionary(this.strm,c)),n===lb.Z_BUF_ERROR&&!0===s&&(n=lb.Z_OK,s=!1),n!==lb.Z_STREAM_END&&n!==lb.Z_OK)return this.onEnd(n),this.ended=!0,!1;l.next_out&&(0===l.avail_out||n===lb.Z_STREAM_END||0===l.avail_in&&(r===lb.Z_FINISH||r===lb.Z_SYNC_FLUSH))&&("string"===this.options.to?(o=ab.utf8border(l.output,l.next_out),i=l.next_out-o,a=ab.buf2string(l.output,o),l.next_out=i,l.avail_out=u-i,i&&ib.arraySet(l.output,l.output,o,i,0),this.onData(a)):this.onData(ib.shrinkBuf(l.output,l.next_out))),0===l.avail_in&&0===l.avail_out&&(s=!0)}while((l.avail_in>0||0===l.avail_out)&&n!==lb.Z_STREAM_END);return n===lb.Z_STREAM_END&&(r=lb.Z_FINISH),r===lb.Z_FINISH?(n=ob.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===lb.Z_OK):(r===lb.Z_SYNC_FLUSH&&(this.onEnd(lb.Z_OK),l.avail_out=0),!0)},fb.prototype.onData=function(e){this.chunks.push(e)},fb.prototype.onEnd=function(e){e===lb.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ib.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},Ey.Inflate=fb,Ey.inflate=pb,Ey.inflateRaw=function(e,t){return(t=t||{}).raw=!0,pb(e,t)},Ey.ungzip=pb;var hb={};(0,lg.assign)(hb,ug,Ey,rb);var vb,gb,mb=hb,yb={exports:{}};function bb(){if(gb)return vb;gb=1;var e=1e3,t=60*e,n=60*t,r=24*n,o=7*r,i=365.25*r;function a(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}return vb=function(l,u){u=u||{};var c=typeof l;if("string"===c&&l.length>0)return function(a){if(a=String(a),!(a.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(l){var u=parseFloat(l[1]);switch((l[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*i;case"weeks":case"week":case"w":return u*o;case"days":case"day":case"d":return u*r;case"hours":case"hour":case"hrs":case"hr":case"h":return u*n;case"minutes":case"minute":case"mins":case"min":case"m":return u*t;case"seconds":case"second":case"secs":case"sec":case"s":return u*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}(l);if("number"===c&&isFinite(l))return u.long?function(o){var i=Math.abs(o);return i>=r?a(o,i,r,"day"):i>=n?a(o,i,n,"hour"):i>=t?a(o,i,t,"minute"):i>=e?a(o,i,e,"second"):o+" ms"}(l):function(o){var i=Math.abs(o);return i>=r?Math.round(o/r)+"d":i>=n?Math.round(o/n)+"h":i>=t?Math.round(o/t)+"m":i>=e?Math.round(o/e)+"s":o+"ms"}(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))}}var wb=function(e){function t(e){let r,o,i,a=null;function l(...e){if(!l.enabled)return;const n=l,o=Number(new Date),i=o-(r||o);n.diff=i,n.prev=r,n.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";a++;const i=t.formatters[o];if("function"==typeof i){const t=e[a];r=i.call(n,t),e.splice(a,1),a--}return r})),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return l.namespace=e,l.useColors=t.useColors(),l.color=t.selectColor(e),l.extend=n,l.destroy=t.destroy,Object.defineProperty(l,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{a=e}}),"function"==typeof t.init&&t.init(l),l}function n(e,n){const r=t(this.namespace+(typeof n>"u"?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)!r[n]||("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=bb(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t};!function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch{}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch{}return!e&&typeof Mn.exports<"u"&&"env"in Mn.exports&&(e=Mn.exports.env.DEBUG),e},t.useColors=function(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch{}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=wb(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(yb,yb.exports);const _b=yb.exports;var kb=1e6,Cb=1e6,Eb="[big.js] ",Ob=Eb+"Invalid ",Sb=Ob+"decimal places",xb=Ob+"rounding mode",jb=Eb+"Division by zero",Ib={},Rb=void 0,Ab=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function Db(e,t,n,r){var o=e.c;if(n===Rb&&(n=e.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(xb);if(t<1)r=3===n&&(r||!!o[0])||0===t&&(1===n&&o[0]>=5||2===n&&(o[0]>5||5===o[0]&&(r||o[1]!==Rb))),o.length=1,r?(e.e=e.e-t+1,o[0]=1):o[0]=e.e=0;else if(t<o.length){if(r=1===n&&o[t]>=5||2===n&&(o[t]>5||5===o[t]&&(r||o[t+1]!==Rb||1&o[t-1]))||3===n&&(r||!!o[0]),o.length=t,r)for(;++o[--t]>9;)if(o[t]=0,0===t){++e.e,o.unshift(1);break}for(t=o.length;!o[--t];)o.pop()}return e}function Pb(e,t,n){var r=e.e,o=e.c.join(""),i=o.length;if(t)o=o.charAt(0)+(i>1?"."+o.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)o="0"+o;o="0."+o}else if(r>0)if(++r>i)for(r-=i;r--;)o+="0";else r<i&&(o=o.slice(0,r)+"."+o.slice(r));else i>1&&(o=o.charAt(0)+"."+o.slice(1));return e.s<0&&n?"-"+o:o}Ib.abs=function(){var e=new this.constructor(this);return e.s=1,e},Ib.cmp=function(e){var t,n=this,r=n.c,o=(e=new n.constructor(e)).c,i=n.s,a=e.s,l=n.e,u=e.e;if(!r[0]||!o[0])return r[0]?i:o[0]?-a:0;if(i!=a)return i;if(t=i<0,l!=u)return l>u^t?1:-1;for(a=(l=r.length)<(u=o.length)?l:u,i=-1;++i<a;)if(r[i]!=o[i])return r[i]>o[i]^t?1:-1;return l==u?0:l>u^t?1:-1},Ib.div=function(e){var t=this,n=t.constructor,r=t.c,o=(e=new n(e)).c,i=t.s==e.s?1:-1,a=n.DP;if(a!==~~a||a<0||a>kb)throw Error(Sb);if(!o[0])throw Error(jb);if(!r[0])return e.s=i,e.c=[e.e=0],e;var l,u,c,s,d,f=o.slice(),p=l=o.length,h=r.length,v=r.slice(0,l),g=v.length,m=e,y=m.c=[],b=0,w=a+(m.e=t.e-e.e)+1;for(m.s=i,i=w<0?0:w,f.unshift(0);g++<l;)v.push(0);do{for(c=0;c<10;c++){if(l!=(g=v.length))s=l>g?1:-1;else for(d=-1,s=0;++d<l;)if(o[d]!=v[d]){s=o[d]>v[d]?1:-1;break}if(!(s<0))break;for(u=g==l?o:f;g;){if(v[--g]<u[g]){for(d=g;d&&!v[--d];)v[d]=9;--v[d],v[g]+=10}v[g]-=u[g]}for(;!v[0];)v.shift()}y[b++]=s?c:++c,v[0]&&s?v[g]=r[p]||0:v=[r[p]]}while((p++<h||v[0]!==Rb)&&i--);return!y[0]&&1!=b&&(y.shift(),m.e--,w--),b>w&&Db(m,w,n.RM,v[0]!==Rb),m},Ib.eq=function(e){return 0===this.cmp(e)},Ib.gt=function(e){return this.cmp(e)>0},Ib.gte=function(e){return this.cmp(e)>-1},Ib.lt=function(e){return this.cmp(e)<0},Ib.lte=function(e){return this.cmp(e)<1},Ib.minus=Ib.sub=function(e){var t,n,r,o,i=this,a=i.constructor,l=i.s,u=(e=new a(e)).s;if(l!=u)return e.s=-u,i.plus(e);var c=i.c.slice(),s=i.e,d=e.c,f=e.e;if(!c[0]||!d[0])return d[0]?e.s=-u:c[0]?e=new a(i):e.s=1,e;if(l=s-f){for((o=l<0)?(l=-l,r=c):(f=s,r=d),r.reverse(),u=l;u--;)r.push(0);r.reverse()}else for(n=((o=c.length<d.length)?c:d).length,l=u=0;u<n;u++)if(c[u]!=d[u]){o=c[u]<d[u];break}if(o&&(r=c,c=d,d=r,e.s=-e.s),(u=(n=d.length)-(t=c.length))>0)for(;u--;)c[t++]=0;for(u=t;n>l;){if(c[--n]<d[n]){for(t=n;t&&!c[--t];)c[t]=9;--c[t],c[n]+=10}c[n]-=d[n]}for(;0===c[--u];)c.pop();for(;0===c[0];)c.shift(),--f;return c[0]||(e.s=1,c=[f=0]),e.c=c,e.e=f,e},Ib.mod=function(e){var t,n=this,r=n.constructor,o=n.s,i=(e=new r(e)).s;if(!e.c[0])throw Error(jb);return n.s=e.s=1,t=1==e.cmp(n),n.s=o,e.s=i,t?new r(n):(o=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(e),r.DP=o,r.RM=i,this.minus(n.times(e)))},Ib.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},Ib.plus=Ib.add=function(e){var t,n,r,o=this,i=o.constructor;if(e=new i(e),o.s!=e.s)return e.s=-e.s,o.minus(e);var a=o.e,l=o.c,u=e.e,c=e.c;if(!l[0]||!c[0])return c[0]||(l[0]?e=new i(o):e.s=o.s),e;if(l=l.slice(),t=a-u){for(t>0?(u=a,r=c):(t=-t,r=l),r.reverse();t--;)r.push(0);r.reverse()}for(l.length-c.length<0&&(r=c,c=l,l=r),t=c.length,n=0;t;l[t]%=10)n=(l[--t]=l[t]+c[t]+n)/10|0;for(n&&(l.unshift(n),++u),t=l.length;0===l[--t];)l.pop();return e.c=l,e.e=u,e},Ib.pow=function(e){var t=this,n=new t.constructor("1"),r=n,o=e<0;if(e!==~~e||e<-Cb||e>Cb)throw Error(Ob+"exponent");for(o&&(e=-e);1&e&&(r=r.times(t)),e>>=1;)t=t.times(t);return o?n.div(r):r},Ib.prec=function(e,t){if(e!==~~e||e<1||e>kb)throw Error(Ob+"precision");return Db(new this.constructor(this),e,t)},Ib.round=function(e,t){if(e===Rb)e=0;else if(e!==~~e||e<-kb||e>kb)throw Error(Sb);return Db(new this.constructor(this),e+this.e+1,t)},Ib.sqrt=function(){var e,t,n,r=this,o=r.constructor,i=r.s,a=r.e,l=new o("0.5");if(!r.c[0])return new o(r);if(i<0)throw Error(Eb+"No square root");0===(i=Math.sqrt(r+""))||i===1/0?((t=r.c.join("")).length+a&1||(t+="0"),a=((a+1)/2|0)-(a<0||1&a),e=new o(((i=Math.sqrt(t))==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+a)):e=new o(i+""),a=e.e+(o.DP+=4);do{n=e,e=l.times(n.plus(r.div(n)))}while(n.c.slice(0,a).join("")!==e.c.slice(0,a).join(""));return Db(e,(o.DP-=4)+e.e+1,o.RM)},Ib.times=Ib.mul=function(e){var t,n=this,r=n.constructor,o=n.c,i=(e=new r(e)).c,a=o.length,l=i.length,u=n.e,c=e.e;if(e.s=n.s==e.s?1:-1,!o[0]||!i[0])return e.c=[e.e=0],e;for(e.e=u+c,a<l&&(t=o,o=i,i=t,c=a,a=l,l=c),t=new Array(c=a+l);c--;)t[c]=0;for(u=l;u--;){for(l=0,c=a+u;c>u;)l=t[c]+i[u]*o[c-u-1]+l,t[c--]=l%10,l=l/10|0;t[c]=l}for(l?++e.e:t.shift(),u=t.length;!t[--u];)t.pop();return e.c=t,e},Ib.toExponential=function(e,t){var n=this,r=n.c[0];if(e!==Rb){if(e!==~~e||e<0||e>kb)throw Error(Sb);for(n=Db(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return Pb(n,!0,!!r)},Ib.toFixed=function(e,t){var n=this,r=n.c[0];if(e!==Rb){if(e!==~~e||e<0||e>kb)throw Error(Sb);for(e=e+(n=Db(new n.constructor(n),e+n.e+1,t)).e+1;n.c.length<e;)n.c.push(0)}return Pb(n,!1,!!r)},Ib[Symbol.for("nodejs.util.inspect.custom")]=Ib.toJSON=Ib.toString=function(){var e=this,t=e.constructor;return Pb(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},Ib.toNumber=function(){var e=Number(Pb(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(Eb+"Imprecise conversion");return e},Ib.toPrecision=function(e,t){var n=this,r=n.constructor,o=n.c[0];if(e!==Rb){if(e!==~~e||e<1||e>kb)throw Error(Ob+"precision");for(n=Db(new r(n),e,t);n.c.length<e;)n.c.push(0)}return Pb(n,e<=n.e||n.e<=r.NE||n.e>=r.PE,!!o)},Ib.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(Eb+"valueOf disallowed");return Pb(e,e.e<=t.NE||e.e>=t.PE,!0)};var Mb=function e(){function t(n){var r=this;if(!(r instanceof t))return n===Rb?e():new t(n);if(n instanceof t)r.s=n.s,r.e=n.e,r.c=n.c.slice();else{if("string"!=typeof n){if(!0===t.strict&&"bigint"!=typeof n)throw TypeError(Ob+"value");n=0===n&&1/n<0?"-0":String(n)}!function(e,t){var n,r,o;if(!Ab.test(t))throw Error(Ob+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),o=t.length,r=0;r<o&&"0"==t.charAt(r);)++r;if(r==o)e.c=[e.e=0];else{for(;o>0&&"0"==t.charAt(--o););for(e.e=n-r-1,e.c=[],n=0;r<=o;)e.c[n++]=+t.charAt(r++)}}(r,n)}r.constructor=t}return t.prototype=Ib,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=false,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();function Tb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fb(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Nb(e,t){if(e){if("string"==typeof e)return Tb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tb(e,t)}}function Vb(e){return function(e){if(Array.isArray(e))return Tb(e)}(e)||Fb(e)||Nb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lb(e){return(Lb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bb(e){var t=function(e,t){if("object"!=Lb(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lb(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lb(t)?t:t+""}function $b(e,t,n){return(t=Bb(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const zb=Object.freeze(Object.defineProperty({__proto__:null,default:$b},Symbol.toStringTag,{value:"Module"}));function Ub(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}const Hb=Object.freeze(Object.defineProperty({__proto__:null,default:Ub},Symbol.toStringTag,{value:"Module"}));function qb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bb(r.key),r)}}function Wb(e,t,n){return t&&qb(e.prototype,t),n&&qb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}const Gb=Object.freeze(Object.defineProperty({__proto__:null,default:Wb},Symbol.toStringTag,{value:"Module"}));function Kb(e){if(Array.isArray(e))return e}function Yb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Xb,Jb=function(e){return e[e.Waiting=-1]="Waiting",e[e.Init=0]="Init",e[e.Configed=1]="Configed",e[e.Inited=2]="Inited",e[e.WorkbenchInited=3]="WorkbenchInited",e[e.Starting=4]="Starting",e[e.Ready=5]="Ready",e[e.RecordInit=6]="RecordInit",e[e.RecordReady=7]="RecordReady",e[e.Rendered=8]="Rendered",e[e.beforeDestroy=9]="beforeDestroy",e[e.Destroyed=10]="Destroyed",e}(Jb||{}),Zb=Ts.defineToken("LifecycleService"),Qb=Object.defineProperty,ew=Object.getOwnPropertyDescriptor,tw=($b($b($b($b($b($b($b($b($b($b(Xb={},Jb.Waiting,"Waiting"),Jb.Init,"Init"),Jb.Configed,"Configed"),Jb.Inited,"Inited"),Jb.Starting,"Starting"),Jb.Ready,"Ready"),Jb.RecordInit,"RecordInit"),Jb.RecordReady,"RecordReady"),Jb.Rendered,"Rendered"),Jb.WorkbenchInited,"WorkbenchInited"),$b($b(Xb,Jb.beforeDestroy,"beforeDestroy"),Jb.Destroyed,"Destroyed")),nw=function(){return Wb((function e(){Ub(this,e),this._status=Jb.Waiting,this.statusWhen=new Map,this._statusChangedAt=new Map}),[{key:"statusStr",get:function(){return tw[this.status]}},{key:"status",get:function(){return this._status},set:function(e){if(e<this.status){var t=JSON.stringify({current:this.status,setStatus:e});throw new Error("Lifecycle cannot go backwards"+t)}this.status!==e&&(this._status=e,this._statusChangedAt.set(e,+new Date),this._runCallback())}},{key:"when",value:function(e,t){if(!(e<=this.status)){var n=this.statusWhen.get(e);if(Array.isArray(n)){var r=[].concat(Vb(n),[t]);this.statusWhen.set(e,r)}else this.statusWhen.set(e,[t])}}},{key:"_runCallback",value:function(){var e=this.statusWhen.get(this.status);e&&e.length&&e.forEach((function(e){e()}))}},{key:"getStatusChangedAt",value:function(e){return this._statusChangedAt.get(e)}}])}();function rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ow(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rw(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nw=function(e,t,n,r){for(var o,i=r>1?void 0:r?ew(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Qb(t,n,i),i}([Ys({token:Zb})],nw);var iw=/\$(\d+)/g;var aw=function(){function e(){Ub(this,e)}return Wb(e,null,[{key:"setLanguage",value:function(t){e._lang="enUS"===t||"en-US"===t||"en"===t||"en-us"===t?"enUS":"zhCN"}},{key:"setData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._data=ow(ow({},e._data),t)}},{key:"get",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.length?(t="zhCN"===e._lang?t:e._data[t]||t)?((r=r.map((function(t){return"zhCN"===e._lang?t:e._data[t]||r}))).unshift(""),t.replace(iw,(function(e,t){return r[t]||""}))):"":"zhCN"===e._lang?t:e._data[t]||t}}])}();aw._lang="zhCN",aw._data={};var lw=aw;function uw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return lw.get.apply(lw,[e].concat(n))}lw.setLanguage(function(){var e,t="zh-cn";if(typeof window<"u"&&typeof document<"u"){if(null!=(e=window.appData)&&e.locale)return window.appData.locale;var n=window.location.search,r=new URLSearchParams(n).get("language");if(r)return r;var o=document.cookie.match(/(?:^|; ?)lang=([^;]+)(?:;|$)/);return o?o[1]:t}return t}()||"zhCN");var cw=function(e){return setTimeout((function(){e()}),16.666666666666668)},sw="abcdefghigklmnopqrstuvwxyz",dw=sw+"0123456789"+sw.toUpperCase();function fw(e){if((e=e||6)<2)throw new RangeError("n 不能小于 2");for(var t="",n=0;n<e;n++)t+=dw.charAt(Math.floor(Math.random()*dw.length));return t}var pw={}.toString,hw=function(e,t){return pw.call(e)==="[object "+t+"]"};function vw(e){return"function"==typeof e}var gw=function(e){return hw(e,"RegExp")},mw=function(e){return hw(e,"String")},yw=function(e){return hw(e,"Object")},bw=function(e){return e instanceof Date},ww=function(e){return null==e};function _w(e){return!/\s/gi.test(e)&&/.+\@.+\..+/gi.test(e)}var kw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Rn<"u"?Rn:typeof self<"u"?self:{};function Cw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ew(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var Ow={exports:{}};!function(e,t){e.exports=function(e,t,n){t.prototype.isBetween=function(e,t,r,o){var i=n(e),a=n(t),l="("===(o=o||"()")[0],u=")"===o[1];return(l?this.isAfter(i,r):!this.isBefore(i,r))&&(u?this.isBefore(a,r):!this.isAfter(a,r))||(l?this.isBefore(i,r):!this.isAfter(i,r))&&(u?this.isAfter(a,r):!this.isBefore(a,r))}}}(Ow);const Sw=Cw(Ow.exports);var xw={exports:{}};!function(e,t){e.exports=function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}(xw);const jw=Cw(xw.exports);var Iw={exports:{}};!function(e,t){e.exports=function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}}(Iw);const Rw=Cw(Iw.exports);!function(e,t){e.exports=function(e){function t(e){return e&&"object"==Lb(e)&&"default"in e?e:{default:e}}var n=t(e),r={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"周":e+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return n.default.locale(r,null,!0),r}(i.a)}({exports:{}});function Aw(e){if(lu(e))return null;e>=31708800&&(e+=i()("1901-01-01").diff("1900-12-31 23:59:59","seconds")-1);return i()("1899-12-30").add(e,"seconds").format("YYYY-MM-DDTHH:mm:ssZ")}i.a.extend(Sw),i.a.extend(jw),i.a.extend(Rw),"zhCN"===lw._lang&&i.a.locale("zh-cn");var Dw=function(e){var t=e;if(""===e)return"";mw(e)&&4===e.length&&(/^(0[1-9]|1[0-2]).*(0[1-9]|[12][0-9]|3[01])/g.test(e)&&(t=i()().year()+e));return i()(t).format("YYYY-MM-DD")};function Pw(e){return Number.parseInt(e.format("YYYYMMDD"),10)}function Mw(){return i()().startOf("month")}var Tw=/^(?:\w+:)?\/\//,Fw=/^(javascript:)?\/\//,Nw=/^(?:\w+:)?\/\/(\S+)$/,Vw=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,Lw=/^[^\s\.]+\.\S{2,}$/;function Bw(e){return function(e){if("string"!=typeof e)return!1;if(e.match(Fw))return!1;var t=e.match(Nw);if(!t)return!1;var n=t[1];return!(!n||!Vw.test(n)&&!Lw.test(n))}(e)?e:function(e){return(e=String(e).trim()).match(Tw)&&!e.match(Fw)?e:"http://"+e}(e)}function $w(e){return/^-?\d*[.]?\d*$/.test(e)||/^[-+]?\d{1,3}(,\d{3})*(\.(\d*))?$/.test(e)?e+"":""}var zw=function(e){return!(""!==e&&!lu(e))||""!==$w(e)},Uw={exports:{}},Hw={exports:{}};!function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("string"==typeof e||e instanceof String)){var t=n(e);throw null===e?t="null":"object"===t&&(t=e.constructor.name),new TypeError("Expected a string but received a ".concat(t))}},e.exports=t.default,e.exports.default=t.default}(Hw,Hw.exports);var qw=Hw.exports,Ww={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,i;(0,r.default)(e),"object"===o(t)?(n=t.min||0,i=t.max):(n=arguments[1],i=arguments[2]);var a=encodeURI(e).split(/%..|./).length-1;return a>=n&&(typeof i>"u"||a<=i)};var n,r=(n=qw)&&n.__esModule?n:{default:n};function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=t.default,e.exports.default=t.default}(Ww,Ww.exports);var Gw=Ww.exports,Kw={exports:{}},Yw={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)typeof e[n]>"u"&&(e[n]=t[n]);return e},e.exports=t.default,e.exports.default=t.default}(Yw,Yw.exports);var Xw=Yw.exports;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,n.default)(e),(t=(0,r.default)(t,i)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1)),!0===t.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var o=e.split("."),a=o[o.length-1];return!(t.require_tld&&(o.length<2||!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(a)||/\s/.test(a))||!t.allow_numeric_tld&&/^\d+$/.test(a))&&o.every((function(e){return!(e.length>63&&!t.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)||/[\uff01-\uff5e]/.test(e)||/^-|-$/.test(e)||!t.allow_underscores&&/_/.test(e))}))};var n=o(qw),r=o(Xw);function o(e){return e&&e.__esModule?e:{default:e}}var i={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};e.exports=t.default,e.exports.default=t.default}(Kw,Kw.exports);var Jw=Kw.exports,Zw={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,r.default)(t),(n=String(n))?"4"===n?a.test(t):"6"===n&&u.test(t):e(t,4)||e(t,6)};var n,r=(n=qw)&&n.__esModule?n:{default:n};var o="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",i="(".concat(o,"[.]){3}").concat(o),a=new RegExp("^".concat(i,"$")),l="(?:[0-9a-fA-F]{1,4})",u=new RegExp("^("+"(?:".concat(l,":){7}(?:").concat(l,"|:)|")+"(?:".concat(l,":){6}(?:").concat(i,"|:").concat(l,"|:)|")+"(?:".concat(l,":){5}(?::").concat(i,"|(:").concat(l,"){1,2}|:)|")+"(?:".concat(l,":){4}(?:(:").concat(l,"){0,1}:").concat(i,"|(:").concat(l,"){1,3}|:)|")+"(?:".concat(l,":){3}(?:(:").concat(l,"){0,2}:").concat(i,"|(:").concat(l,"){1,4}|:)|")+"(?:".concat(l,":){2}(?:(:").concat(l,"){0,3}:").concat(i,"|(:").concat(l,"){1,5}|:)|")+"(?:".concat(l,":){1}(?:(:").concat(l,"){0,4}:").concat(i,"|(:").concat(l,"){1,6}|:)|")+"(?::((?::".concat(l,"){0,5}:").concat(i,"|(?::").concat(l,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");e.exports=t.default,e.exports.default=t.default}(Zw,Zw.exports);var Qw=Zw.exports;!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e),(t=(0,a.default)(t,u)).require_display_name||t.allow_display_name){var l=e.match(c);if(l){var g=l[1];if(e=e.replace(g,"").replace(/(^<|>$)/g,""),g.endsWith(" ")&&(g=g.slice(0,-1)),!function(e){var t=e.replace(/^"(.+)"$/,"$1");if(!t.trim())return!1;var n=/[\.";<>]/.test(t);if(n){if(t===e)return!1;if(!(t.split('"').length===t.split('\\"').length))return!1}return!0}(g))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>v)return!1;var m=e.split("@"),y=m.pop(),b=y.toLowerCase();if(t.host_blacklist.includes(b)||t.host_whitelist.length>0&&!t.host_whitelist.includes(b))return!1;var w=m.join("@");if(t.domain_specific_validation&&("gmail.com"===b||"googlemail.com"===b)){var _=(w=w.toLowerCase()).split("+")[0];if(!(0,r.default)(_.replace(/\./g,""),{min:6,max:30}))return!1;for(var k=_.split("."),C=0;C<k.length;C++)if(!d.test(k[C]))return!1}if(!(!1!==t.ignore_max_length||(0,r.default)(w,{max:64})&&(0,r.default)(y,{max:254})))return!1;if(!(0,o.default)(y,{require_tld:t.require_tld,ignore_max_length:t.ignore_max_length,allow_underscores:t.allow_underscores})){if(!t.allow_ip_domain)return!1;if(!(0,i.default)(y)){if(!y.startsWith("[")||!y.endsWith("]"))return!1;var E=y.slice(1,-1);if(0===E.length||!(0,i.default)(E))return!1}}if('"'===w[0])return w=w.slice(1,w.length-1),t.allow_utf8_local_part?h.test(w):f.test(w);for(var O=t.allow_utf8_local_part?p:s,S=w.split("."),x=0;x<S.length;x++)if(!O.test(S[x]))return!1;return!(t.blacklisted_chars&&-1!==w.search(new RegExp("[".concat(t.blacklisted_chars,"]+"),"g")))};var n=l(qw),r=l(Gw),o=l(Jw),i=l(Qw),a=l(Xw);function l(e){return e&&e.__esModule?e:{default:e}}var u={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},c=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,s=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,d=/^[a-z\d]+$/,f=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,p=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,h=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,v=254;e.exports=t.default,e.exports.default=t.default}(Uw,Uw.exports);const e_=Cw(Uw.exports);var t_={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e),!e||/[\s<>]/.test(e)||0===e.indexOf("mailto:")||(t=(0,i.default)(t,u)).validate_length&&e.length>=2083||!t.allow_fragments&&e.includes("#")||!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;var a,s,f,p,h,v,g,m;if(g=e.split("#"),e=g.shift(),g=e.split("?"),e=g.shift(),(g=e.split("://")).length>1){if(a=g.shift().toLowerCase(),t.require_valid_protocol&&-1===t.protocols.indexOf(a))return!1}else{if(t.require_protocol)return!1;if("//"===e.slice(0,2)){if(!t.allow_protocol_relative_urls)return!1;g[0]=e.slice(2)}}if(""===(e=g.join("://")))return!1;if(g=e.split("/"),""===(e=g.shift())&&!t.require_host)return!0;if((g=e.split("@")).length>1){if(t.disallow_auth||""===g[0]||(s=g.shift()).indexOf(":")>=0&&s.split(":").length>2)return!1;var y=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0!==t)for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(s.split(":"),2),b=y[0],w=y[1];if(""===b&&""===w)return!1}p=g.join("@"),v=null,m=null;var _=p.match(c);if(_?(f="",m=_[1],v=_[2]||null):(g=p.split(":"),f=g.shift(),g.length&&(v=g.join(":"))),null!==v&&v.length>0){if(h=parseInt(v,10),!/^[0-9]+$/.test(v)||h<=0||h>65535)return!1}else if(t.require_port)return!1;return t.host_whitelist?d(f,t.host_whitelist):""===f&&!t.require_host||!(!(0,o.default)(f)&&!(0,r.default)(f,t)&&(!m||!(0,o.default)(m,6))||(f=f||m,t.host_blacklist&&d(f,t.host_blacklist)))};var n=a(qw),r=a(Jw),o=a(Qw),i=a(Xw);function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},c=/^\[([^\]]+)\](?::([0-9]+))?$/;function s(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e===r||s(r)&&r.test(e))return!0}return!1}e.exports=t.default,e.exports.default=t.default}(t_,t_.exports);const n_=Cw(t_.exports);function r_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r_(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n_(e,o_(o_({},{require_protocol:!0}),t))},a_=function(e){return"Invalid Date"!==i()(e).toString()},l_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return!1;"number"==typeof e&&(e=String(e));var n=t.precision||18,r=t.scale||2,o=t.forceDecimal||!1;return!(e.replace(/[-+.]/gi,"").length>n)&&new RegExp("^[-+]?([0-9]+)?(\\.[0-9]{0,".concat(r,"})").concat(o?"":"?","$")).test(e)},u_=Ts.defineToken("DatabaseToken");function c_(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s_(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function s_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d_=function(){return Wb((function e(){Ub(this,e),this.ydoc=new Cp,this.ydata=this.ydoc.getMap()}),[{key:"data",get:function(){return this.ydata}},{key:"newMap",value:function(e,t){var n=new Fh;e&&Object.keys(e).forEach((function(t){n.set(t,e[t])}));var r=n.get;if(n.get=function(e){var t,o,i,a=r.call(n,e);if(!a){var l=null==(t=n._map)?void 0:t.get(e);if(l)return null==(i=null==(o=l.content)?void 0:o.arr)?void 0:i[0]}return a},t){var o,i=c_(t);try{var a=function(){var e=o.value;Object.defineProperty(n,e.name,{get:function(){return console.warn("please use .get('".concat(e.name,"').")),n.get(e.name)}})};for(i.s();!(o=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}}return n}},{key:"newArray",value:function(e){var t=this,n=new Mh;return e&&n.push(e.map((function(e){return Ni(e)?t.newMap(e):e}))),n}},{key:"transact",value:function(e,t){this.ydoc.transact(e,t||this)}},{key:"destroy",value:function(){var e;null==(e=this.ydoc)||e.destroy(),this.ydoc=null,this.ydata=null,this._spellEventObj=null,this._storageEventObj=null}}])}(),f_=function(){return Wb((function e(t){var n=this;Ub(this,e),this.canUndo=!1,this.canRedo=!1,this._yUndoManager=new ah(t.ydata,{captureTimeout:0,trackedOrigins:new Set([t])}),this._yUndoManager.on("stack-item-added",(function(){n._setCanUndoRedo()})),this._yUndoManager.on("stack-item-popped",(function(){n._setCanUndoRedo()}))}),[{key:"_setCanUndoRedo",value:function(){var e=this._yUndoManager;this.canRedo=e.canRedo(),this.canUndo=e.canUndo()}},{key:"stopCapturing",value:function(){this._yUndoManager.stopCapturing()}},{key:"undo",value:function(){this._yUndoManager.undo()}},{key:"redo",value:function(){this._yUndoManager.redo()}},{key:"destroy",value:function(){this._yUndoManager.destroy()}}])}(),p_=function(){return Wb((function e(){Ub(this,e),this._ystruct=new d_,this._yhistory=new f_(this._ystruct)}),[{key:"ystruct",get:function(){return this._ystruct}},{key:"doc",get:function(){return this._ystruct.ydoc}},{key:"data",get:function(){return this._ystruct.data}},{key:"newMap",value:function(e,t){return null!=e&&e._map?e:this._ystruct.newMap(e,t)}},{key:"newArray",value:function(e){return this._ystruct.newArray(e)}},{key:"transact",value:function(e){this._ystruct.transact(e)}},{key:"canUndo",value:function(){return this._yhistory.canUndo}},{key:"canRedo",value:function(){return this._yhistory.canRedo}},{key:"undo",value:function(){this._yhistory.undo()}},{key:"redo",value:function(){this._yhistory.redo()}},{key:"destroy",value:function(){this._ystruct.destroy(),this._yhistory.destroy()}}])}();function h_(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v_(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function v_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g_=function(){function e(t){var n=this;Ub(this,e),this._arr=[],Array.isArray(t)?t.forEach((function(e){return n._arr.push(e)})):t&&this._arr.push(t)}return Wb(e,[{key:"origin",get:function(){return this._arr}},{key:"length",get:function(){return this._arr.length}},{key:"clone",value:function(){var t=new e;return this._arr.forEach((function(e){t.push([Object.assign({},e)])})),t}},{key:"insert",value:function(e){}},{key:"push",value:function(e){var t,n=h_(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._arr.push(r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"get",value:function(e){return this._arr[e]}},{key:"toArray",value:function(){return this._arr}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return this._arr.slice(e,t)}},{key:"toJSON",value:function(){return JSON.parse(JSON.stringify(this._arr))}},{key:"map",value:function(e){return this._arr.map(e)}},{key:"forEach",value:function(e){return this._arr.forEach(e)}},{key:"delete",value:function(e,t){return this._arr.splice(e,t)}},{key:"unshift",value:function(e){var t,n=h_(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._arr.unshift(r)}}catch(e){n.e(e)}finally{n.f()}return this._arr}},{key:Symbol.iterator,value:function(){return function(e){var t=0;return $b($b({},Symbol.iterator,(function(){return this})),"next",(function(){if(0===e.origin.length||null==e.origin[t])return{done:!0,value:void 0};var n=e.origin[t];return t+=1,{done:!1,value:n}}))}(this)}}])}(),m_=function(){return Wb((function e(t){var n=this;Ub(this,e),this._map=new Map,t&&Object.keys(t).forEach((function(e){n.set(e,t[e])}))}),[{key:"clone",value:function(){return this}},{key:"keys",value:function(){return this._map.keys()}},{key:"set",value:function(e,t){return this._map.set(e,t)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"has",value:function(e){return this._map.has(e)}},{key:"delete",value:function(e){return this._map.delete(e)}},{key:"values",value:function(){return this._map.values()}},{key:"entries",value:function(){return this._map.entries()}},{key:"forEach",value:function(e){return this._map.forEach(e)}},{key:"toJSON",value:function(){return Object.fromEntries(this._map)}},{key:Symbol.iterator,value:function(){return this._map[Symbol.iterator]()}},{key:"uuid",get:function(){return this.get("uuid")}},{key:"updated_at",get:function(){return this.get("updated_at")}},{key:"created_at",get:function(){return this.get("created_at")}}])}();function y_(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b_(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function b_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w_(e,t){var n,r=y_(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(t(o))return o}}catch(e){r.e(e)}finally{r.f()}return null}function __(e,t){var n,r=new g_,o=y_(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;t(i)&&r.push([i])}}catch(e){o.e(e)}finally{o.f()}return r}function k_(e,t){var n=-1;return e&&e.forEach((function(e,r){-1===n&&t(e)&&(n=r)})),n}function C_(e,t,n){return e.forEach((function(e){t(n,e)})),n}function E_(e,t){var n=[];return e.forEach((function(e,r){n.push(t(e,r))})),n}function O_(e,t){var n,r=y_(e);try{for(r.s();!(n=r.n()).done;){if(t(n.value))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}function S_(e,t,n){return e.slice(t,n)}function x_(e,t){var n,r=y_(e);try{for(r.s();!(n=r.n()).done;){if(!t(n.value))return!1}}catch(e){r.e(e)}finally{r.f()}return!0}function j_(e,t){var n=[];return e.forEach((function(e,r){n.push(t(e,r))})),n}function I_(e,t){var n,r=new g_,o=y_(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;t(i)&&r.push([i])}}catch(e){o.e(e)}finally{o.f()}return r}var R_=Ts.defineToken("ConfigurationToken");function A_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D_(e,t){if(t&&("object"===Lb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A_(e)}function P_(e){return(P_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M_(){return M_=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P_(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},M_.apply(this,arguments)}function T_(e,t){return(T_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function F_(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T_(e,t)}function N_(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return V_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V_(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function V_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L_=Object.defineProperty,B_=Object.getOwnPropertyDescriptor,$_=function(){return Wb((function e(){Ub(this,e),this._store=new Set,this._isDestroyed=!1}),[{key:"_register",value:function(e){return this._store.add(e),e}},{key:"destroy",value:function(){if(!this._isDestroyed){var e,t=N_(this._store.values());try{for(t.s();!(e=t.n()).done;){var n=e.value;n&&n.destroy()}}catch(e){t.e(e)}finally{t.f()}this._store.clear(),this._isDestroyed=!0}}}])}();$_=function(e,t,n,r){for(var o,i=r>1?void 0:r?B_(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&L_(t,n,i),i}([Ks()],$_);var z_,U_=function(){return Wb((function e(){Ub(this,e),this.destroy=function(){},this.unset=function(){},this.isset=function(){return!1}}),[{key:"set",value:function(e){var t=this,n=e;return this.unset=function(){return n=void 0},this.isset=function(){return void 0!==n},this.destroy=function(){n&&(n(),n=void 0,t.unset=void 0,t.isset=void 0)},this}}])}();!function(e){function t(e){return{destroy:e}}e.is=function(e){return!!e&&"object"===Lb(e)&&"destroy"in e&&"function"==typeof e.destroy},e.create=t,e.NONE=t((function(){}))}(z_||(z_={}));var H_=function(){return Wb((function e(){Ub(this,e),this.destroyableList=[],this._isDisposing=!1}),[{key:"destroyed",get:function(){return 0===this.destroyableList.length}},{key:"destroy",value:function(){if(!this.destroyed&&!this._isDisposing){for(this._isDisposing=!0;!this.destroyed;)try{this.destroyableList.pop().destroy()}catch(e){console.error(e)}this._isDisposing=!1}}},{key:"push",value:function(e){var t=this.destroyableList;t.push(e);var n=e.destroy.bind(e),r=z_.create((function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}));return e.destroy=function(){r.destroy(),n()},r}}])}(),q_={exports:{}},W_={exports:{}};!function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(W_);var G_=W_.exports;!function(e){var t=G_.default;function n(){e.exports=n=function(){return o},e.exports.__esModule=!0,e.exports.default=e.exports;var r,o={},i=Object.prototype,a=i.hasOwnProperty,l=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",d=u.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch{f=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new P(r||[]);return l(i,"_invoke",{value:I(e,n,a)}),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}o.wrap=p;var v="suspendedStart",g="suspendedYield",m="executing",y="completed",b={};function w(){}function _(){}function k(){}var C={};f(C,c,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(M([])));O&&O!==i&&a.call(O,c)&&(C=O);var S=k.prototype=w.prototype=Object.create(C);function x(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,n){function r(o,i,l,u){var c=h(e[o],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==t(d)&&a.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,l,u)}),(function(e){r("throw",e,l,u)})):n.resolve(d).then((function(e){s.value=e,l(s)}),(function(e){return r("throw",e,l,u)}))}u(c.arg)}var o;l(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(i,i):i()}})}function I(e,t,n){var o=v;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:r,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var u=R(l,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var c=h(e,t,n);if("normal"===c.type){if(o=n.done?y:g,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function R(e,t){var n=t.method,o=e.iterator[n];if(o===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=r,R(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=h(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,b;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,b):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,b)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(a.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}throw new TypeError(t(e)+" is not iterable")}return _.prototype=k,l(S,"constructor",{value:k,configurable:!0}),l(k,"constructor",{value:_,configurable:!0}),_.displayName=f(k,d,"GeneratorFunction"),o.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,f(e,d,"GeneratorFunction")),e.prototype=Object.create(S),e},o.awrap=function(e){return{__await:e}},x(j.prototype),f(j.prototype,s,(function(){return this})),o.AsyncIterator=j,o.async=function(e,t,n,r,i){void 0===i&&(i=Promise);var a=new j(p(e,t,n,r),i);return o.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),f(S,d,"Generator"),f(S,c,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),o.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},o.values=M,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(D),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return l.type="throw",l.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;D(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),b}},o}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(q_);var K_=(0,q_.exports)(),Y_=K_;try{regeneratorRuntime=K_}catch{"object"===(typeof globalThis>"u"?"undefined":Lb(globalThis))?globalThis.regeneratorRuntime=K_:Function("r","regeneratorRuntime = r")(K_)}const X_=Cw(Y_);var J_=Wb((function e(t){Ub(this,e),this.element=t,this.next=e.Undefined,this.prev=e.Undefined}));J_.Undefined=new J_(void 0);var Z_=J_,Q_=function(){return Wb((function e(){Ub(this,e),this._first=Z_.Undefined,this._last=Z_.Undefined,this._size=0}),[{key:"size",get:function(){return this._size}},{key:"isEmpty",value:function(){return this._first===Z_.Undefined}},{key:"clear",value:function(){for(var e=this._first;e!==Z_.Undefined;){var t=e.next;e.prev=Z_.Undefined,e.next=Z_.Undefined,e=t}this._first=Z_.Undefined,this._last=Z_.Undefined,this._size=0}},{key:"unshift",value:function(e){return this._insert(e,!1)}},{key:"push",value:function(e){return this._insert(e,!0)}},{key:"_insert",value:function(e,t){var n=this,r=new Z_(e);if(this._first===Z_.Undefined)this._first=r,this._last=r;else if(t){var o=this._last;this._last=r,r.prev=o,o.next=r}else{var i=this._first;this._first=r,r.next=i,i.prev=r}this._size+=1;var a=!1;return function(){a||(a=!0,n._remove(r))}}},{key:"shift",value:function(){if(this._first!==Z_.Undefined){var e=this._first.element;return this._remove(this._first),e}}},{key:"pop",value:function(){if(this._last!==Z_.Undefined){var e=this._last.element;return this._remove(this._last),e}}},{key:"_remove",value:function(e){if(e.prev!==Z_.Undefined&&e.next!==Z_.Undefined){var t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Z_.Undefined&&e.next===Z_.Undefined?(this._first=Z_.Undefined,this._last=Z_.Undefined):e.next===Z_.Undefined?(this._last=this._last.prev,this._last.next=Z_.Undefined):e.prev===Z_.Undefined&&(this._first=this._first.next,this._first.prev=Z_.Undefined);this._size-=1}},{key:Symbol.iterator,value:X_.mark((function e(){var t;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this._first;case 1:if(t===Z_.Undefined){e.next=7;break}return e.next=4,t.element;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))}])}(),ek=function(){return Wb((function e(t){Ub(this,e),this._maxSize=t,this.cache=new Map}),[{key:"get",value:function(e){if(this.cache.has(e)){var t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t}return null}},{key:"put",value:function(e,t){if(this.cache.size>=this._maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}}])}();function tk(e,t,n){return t=P_(t),D_(e,nk()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function nk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(nk=function(){return!!e})()}function rk(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ok(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ok(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function ok(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ik=function(){return Wb((function e(t,n,r){Ub(this,e),this.callback=t,this.callbackThis=n,this.stack=r,this.subscription=new U_}),[{key:"invoke",value:function(e){this.callback.call(this.callbackThis,e)}}])}(),ak=Wb((function e(t,n,r){Ub(this,e),this.emitter=t,this.listener=n,this.event=r})),lk=function(){return Wb((function e(){Ub(this,e),this._queue=new Q_}),[{key:"size",get:function(){return this._queue.size}},{key:"push",value:function(e,t,n){this._queue.push(new ak(e,t,n))}},{key:"clear",value:function(e){var t,n=new Q_,r=rk(this._queue);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.emitter!==e&&n.push(o)}}catch(e){r.e(e)}finally{r.f()}this._queue=n}},{key:"deliver",value:function(){for(;this._queue.size>0;){var e=this._queue.shift();try{e.listener.invoke(e.event)}catch(e){console.error(e)}}}}])}(),uk=function(e){function t(){return Ub(this,t),tk(this,t,arguments)}return F_(t,e),Wb(t,[{key:"clear",value:function(e){this._queue.clear()}}])}(lk),ck=function(e){function t(){var e;return Ub(this,t),(e=tk(this,t,arguments))._id=fw(6),e._disposed=!1,e}return F_(t,e),Wb(t,[{key:"event",get:function(){var e=this;return this._event||(this._event=function(t,n,r){e._listeners||(e._listeners=new Q_);var o=new ik(t,n,undefined),i=e._listeners.push(o),a=o.subscription.set((function(){e._disposed||i()}));return Array.isArray(r)&&r.push(a),a}),this._event}},{key:"id",get:function(){return this._id}},{key:"listeners",get:function(){return this._listeners?this._listeners:null}},{key:"destroy",value:function(){var e;this._disposed||(this._disposed=!0,this._listeners&&this._listeners.clear(),null==(e=this._deliveryQueue)||e.clear(this))}},{key:"emit",value:function(e){if(this.listeners){this._deliveryQueue||(this._deliveryQueue=new uk);var t,n=rk(this.listeners);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._deliveryQueue.push(this,r,e)}}catch(e){n.e(e)}finally{n.f()}this._deliveryQueue.deliver()}}},{key:"hasListeners",value:function(){return!!this._listeners&&!this._listeners.isEmpty()}}])}($_);function sk(e){return Kb(e)||Fb(e)||Nb(e)||Yb()}var dk=/\\(\\)?/g,fk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pk=Object.defineProperty,hk=Object.getOwnPropertyDescriptor,vk=function(){return Wb((function e(){Ub(this,e),this._configurationProperties={}}),[{key:"getSchema",value:function(){return{title:"数据表配置列表",type:"object",properties:this._configurationProperties}}},{key:"register",value:function(e){this._doRegister(e)}},{key:"_doRegister",value:function(e){var t=e.id;if(!t)throw new Error("配置不合法: ".concat(JSON.stringify(e),", configuration.id 是必填"));var n=t.split(".");if(1===n.length)this._configurationProperties[n[0]]=e;else{this._configurationProperties[n[0]]?this._configurationProperties[n[0]].properties||(this._configurationProperties[n[0]].properties={}):this._configurationProperties[n[0]]={id:n[0],type:"object",properties:{}};var r=this._configurationProperties[n[0]].properties;n.forEach((function(t,o){if(0!==o)if(r[t])r[t].properties||(r[t].properties={}),r=r[t].properties;else if(o===n.length-1)r[t]=e;else{var i=n.slice(o+1);r[t]={id:i.join("."),type:"object",properties:{}}}}))}}},{key:"getProperty",value:function(e){for(var t=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(fk,(function(e,n,r,o){t.push(r?o.replace(dk,"$1"):n||e)})),t}(e),n=sk(t),r=n[0],o=n.slice(1),i=this._configurationProperties[r],a=r,l=0;l<o.length;l++){var u=o[l];if(a+="."+u,!i)return null;if(/^\d+$/g.test(u))i=null==i?void 0:i.items;else if(i.properties){for(var c=Object.keys(i.properties),s=!1,d=0;d<c.length;d++){var f=c[d],p=r+"."+f;if(p===a){i=i.properties[f],s=!0;break}if(p.startsWith(a)){s=!0;break}}if(s)continue;i=i.properties[u]}}return i}},{key:"validate",value:function(e,t){return!!this.getProperty(e)}}])}();function gk(e,t,n){return t=P_(t),D_(e,mk()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function mk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(mk=function(){return!!e})()}vk=function(e,t,n,r){for(var o,i=r>1?void 0:r?hk(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&pk(t,n,i),i}([Ys()],vk);var yk=Object.defineProperty,bk=Object.getOwnPropertyDescriptor,wk=function(e,t,n,r){for(var o,i=r>1?void 0:r?bk(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yk(t,n,i),i},_k=function(e){function t(){var e;return Ub(this,t),(e=gk(this,t,arguments))._defaultModel={},e._overrideModel={},e._onDidChange=e._register(new ck),e.onDidChange=e._onDidChange.event,e}return F_(t,e),Wb(t,[{key:"registerDefaultValue",value:function(e){for(var t=Object.keys(e),n=0,r=t;n<r.length;n++){var o=r[n];this._configurationRegistry.validate(o,e[o])}for(var i=0,a=t;i<a.length;i++){var l=a[i];vu(this._defaultModel,l,e[l])}}},{key:"setValue",value:function(e,t){var n=this;this._configurationRegistry.validate(e,t);var r=this.getValue(e);return cw((function(){n._onDidChange.emit({type:"valueChanged",path:e,pre:r,cur:t})})),vu(this._overrideModel,e,t)}},{key:"getValue",value:function(e){if(!e)return this.getValues();this._configurationRegistry.validate(e);var t=Ei(this._overrideModel,e);return void 0!==t?t:Ei(this._defaultModel,e)}},{key:"getValues",value:function(){return su({},this._defaultModel,this._overrideModel)}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);function kk(e,t,n){return t=P_(t),D_(e,Ck()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Ck(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Ck=function(){return!!e})()}wk([Xs(vk)],_k.prototype,"_configurationRegistry",2),wk([Vs()],_k.prototype,"destroy",1),_k=wk([Ys()],_k);var Ek=Object.defineProperty,Ok=Object.getOwnPropertyDescriptor,Sk=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ok(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Ek(t,n,i),i},xk=function(e){function t(){var e;return Ub(this,t),(e=kk(this,t,arguments))._onConfigurationChange=e._register(new ck),e.onConfigurationChange=e._onConfigurationChange.event,e}return F_(t,e),Wb(t,[{key:"registerConfiguration",value:function(e){this._configurationRegistry.register(e)}},{key:"registerDefaultValue",value:function(e){this._configurationModel.registerDefaultValue(e)}},{key:"setValue",value:function(e,t){if("object"===Lb(e))for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];this._configurationModel.setValue(o,e[o])}else"string"==typeof e&&this._configurationModel.setValue(e,t);this._onConfigurationChange.emit({key:e,value:t})}},{key:"getValue",value:function(e){return this._configurationModel.getValue(e)}},{key:"getAllValues",value:function(){return this._configurationModel.getValues()}},{key:"getSchema",value:function(){return this._configurationRegistry.getSchema()}},{key:"onValueChange",value:function(e){this._configurationModel.onDidChange((function(t){"valueChanged"===t.type&&e(t)}))}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);Sk([Xs(vk)],xk.prototype,"_configurationRegistry",2),Sk([Xs(_k)],xk.prototype,"_configurationModel",2),Sk([Vs()],xk.prototype,"destroy",1),xk=Sk([Ys({token:R_})],xk);var jk=pd().register(vk).register(_k).register(xk),Ik=function(){return Wb((function e(t){Ub(this,e),this._struct=t}),[{key:"transact",value:function(e){this._struct.transact(e)}},{key:"canUndo",value:function(){return this._struct.canUndo()}},{key:"canRedo",value:function(){return this._struct.canRedo()}},{key:"undo",value:function(){this._struct.undo()}},{key:"redo",value:function(){this._struct.redo()}}])}();function Rk(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ak(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ak(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Ak(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dk=function(){return Wb((function e(){Ub(this,e)}),[{key:"where",value:function(e,t,n){var r=this,o=Object.keys(t),i=o.length===(null==n?void 0:n.length)&&(null==n?void 0:n.every((function(e){return o.includes(e)})));if(n&&n.length>0&&(e=this.getDataByIndexes(e,t,n)),!e)return new g_;if(i)return e;if(t)for(var a=0,l=Object.keys(t);a<l.length;a++){var u=l[a];if(Array.isArray(t[u])){for(var c={},s=0;s<t[u].length;s++)c[t[u][s]]=!0;t["$__".concat(u)]=c}}var d=new g_;return e.forEach((function(e){r._matchRow(e,t)&&d.push([e])})),d}},{key:"getDataByIndexes",value:function(e,t,n){if(!e)return new g_;var r=new g_;if(2===n.length){var o=[],i=null==t?void 0:t[n[0]];i?Array.isArray(i)||(i=[i]):i=e.keys();var a,l=Rk(i);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=e.get(u);c&&(o=o.concat(c))}}catch(e){l.e(e)}finally{l.f()}var s=null==t?void 0:t[n[1]];if(s){Array.isArray(s)||(s=[s]);var d,f=Rk(s);try{for(f.s();!(d=f.n()).done;){var p,h=d.value,v=Rk(o);try{for(v.s();!(p=v.n()).done;){var g=p.value.get(h);g&&r.push(g)}}catch(e){v.e(e)}finally{v.f()}}}catch(e){f.e(e)}finally{f.f()}}else{var m,y=Rk(o);try{for(y.s();!(m=y.n()).done;){var b,w=m.value,_=Rk(w.keys());try{for(_.s();!(b=_.n()).done;){var k=b.value;r.push(w.get(k))}}catch(e){_.e(e)}finally{_.f()}}}catch(e){y.e(e)}finally{y.f()}}}else{var C=null==t?void 0:t[n[0]];C?Array.isArray(C)||(C=[C]):C=Array.from(e.keys());var E,O=Rk(C);try{for(O.s();!(E=O.n()).done;){var S=E.value,x=e.get(S);x&&r.push(x)}}catch(e){O.e(e)}finally{O.f()}}return r}},{key:"_matchRow",value:function(e,t){var n=!1;if(!t)return!0;var r=Object.keys(t);if(0===r.length||!t)return!0;for(var o=0,i=r;o<i.length;o++){var a=i[o];if(!a.startsWith("$__")&&!(n=this._match(e,a,t)))return!1}return n}},{key:"_match",value:function(e,t,n){var r,o=n[t];return null!=o&&o.$not?(o=o.$not,Array.isArray(o)?!o.find((function(n){return n==e.get(t)})):e.get(t)!=o):Array.isArray(o)?!(null==(r=n["$__".concat(t)])||!r[e.get(t)]):e.get(t)==o}}])}();function Pk(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mk(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Mk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tk=["uuid","uid"],Fk=function(){return Wb((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ub(this,e),this._onBeforeChange=new ck,this.onBeforeChange=this._onBeforeChange.event,this._options=n,this._struct=t,this._dataHelper=new Dk}),[{key:"root",get:function(){return this._struct.data||new m_}},{key:"getIndexes",value:function(e){var t;return(null==(t=this.root.get(e))?void 0:t.get("indexes"))||[]}},{key:"getColumns",value:function(e){var t;return(null==(t=this.root.get(e))?void 0:t.get("columns"))||[]}},{key:"setTable",value:function(e,t,n){var r=this.root.get(e);r||(r=this._struct.newMap(),this.root.set(e,r));var o,i=[],a=Pk(t);try{for(a.s();!(o=a.n()).done;){var l=o.value;l.uuid||(l.uuid=fw(32)),i.push(l)}}catch(e){a.e(e)}finally{a.f()}r.set("columns",i),r.set("indexes",n)}},{key:"dropTable",value:function(e){this.root.delete(e)}},{key:"setData",value:function(e,t){var n,r=this,o=this.getIndexes(e),i=this.getColumns(e);this._filterColumns(t),this._onBeforeChange.emit({type:"init",table:e,data:t});var a=this.root.get(e);if(a){if(o&&o.length>0){var l=this._struct.newMap(null,i);a.set("data",l);var u,c=Pk(t);try{var s=function(){var e=u.value;if(2===o.length){var t=e[o[0]],a=e[o[1]];if(!l.get(t)){var c=r._struct.newMap(null,i);c.set(a,r._struct.newArray()),l.set(t,c)}if(null!=(n=l.get(t))&&n.get(a)||l.get(t).set(a,r._struct.newArray()),w_(l.get(t).get(a),(function(t){return(null==t?void 0:t.get("uuid"))===e.uuid})))return 1;l.get(t).get(a).push([r._struct.newMap(e,i)])}else{var s=e[o[0]],d=l.get(s);d||(d=r._struct.newArray(),l.set(s,d)),d.push([r._struct.newMap(e,i)])}};for(c.s();!(u=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}}else a.set("data",this._struct.newArray(t));return t}}},{key:"update",value:function(e,t,n){var r=this.getIndexes(e),o=this.getColumns(e),i=this.root.get(e);if(i){var a,l=i.get("data");if(r&&r.length>0)if(l||(l=this._struct.newMap(null,o),i.set("data",l)),2===r.length){var u=t.get(0).get(r[0]),c=t.get(0).get(r[1]);a=l.get(u).get(c)}else if(Tk.includes(r[0])){var s,d=Pk(t);try{for(d.s();!(s=d.n()).done;){var f=s.value,p=l.get(f.get(r[0])).get(0);if(p)for(var h in n)p.set(h,n[h])}}catch(e){d.e(e)}finally{d.f()}}else{var v=t.get(0).get(r[0]);a=l.get(v)}else a=l;if(a){var g,m={},y=Pk(a);try{for(y.s();!(g=y.n()).done;){var b=g.value;m[b.get("uuid")]=b}}catch(e){y.e(e)}finally{y.f()}var w,_=Pk(t);try{for(_.s();!(w=_.n()).done;){var k=m[w.value.get("uuid")];if(k)for(var C in n)k.set(C,n[C])}}catch(e){_.e(e)}finally{_.f()}}}}},{key:"append",value:function(e,t,n){var r,o=this;Array.isArray(t)||(t=[t]);var i=this.getIndexes(e),a=this.getColumns(e),l=this.root.get(e);if(l){var u=l.get("data");if(this._filterColumns(t),i&&i.length>0)if(u||(u=this._struct.newMap(null,a),l.set("data",u)),2===i.length){var c=t[0][i[0]],s=t[0][i[1]];if(!u.get(c)){var d=this._struct.newMap(null,a);d.set(s,this._struct.newArray()),u.set(c,d)}null!=(r=u.get(c))&&r.get(s)||u.get(c).set(s,this._struct.newArray());var f=u.get(c).get(s);if(n){var p=k_(f,(function(e){return e.get("uuid")===n.get("uuid")}));if(p>-1)return void f.insert(p+1,t.map((function(e){return o._struct.newMap(e,a)})))}f.push(t.map((function(e){return o._struct.newMap(e,a)})))}else if(Tk.includes(i[0])){var h,v=Pk(t);try{for(v.s();!(h=v.n()).done;){var g=h.value,m=g[i[0]];if(u.get(m)||u.set(m,this._struct.newArray()),u.get(m).length>0)return;u.get(m).push([this._struct.newMap(g,a)])}}catch(e){v.e(e)}finally{v.f()}}else{var y=t[0][i[0]];if(u.get(y)||u.set(y,this._struct.newArray()),n){var b=k_(u.get(n.get(i[0])),(function(e){return e.get("uuid")===n.get("uuid")}));if(b>-1)return void u.get(y).insert(b+1,t.map((function(e){return o._struct.newMap(e,a)})))}u.get(y).push(t.map((function(e){return o._struct.newMap(e,a)})))}else{if(u||(u=this._struct.newArray(),l.set("data",u)),n){var w=k_(u,(function(e){return e.get("uuid")===n.get("uuid")}));if(w>-1)return void u.insert(w+1,t.map((function(e){return o._struct.newMap(e,a)})))}u.push(t.map((function(e){return o._struct.newMap(e,a)})))}}}},{key:"before",value:function(e,t,n){var r=this;Array.isArray(t)||(t=[t]);var o=this.getIndexes(e),i=this.getColumns(e);t=this._filterColumns(t);var a=this.root.get(e);if(a){var l=a.get("data");if(o&&o.length>0)if(l||(l=this._struct.newMap(null,i),a.set("data",l)),2===o.length){var u=t[0][o[0]],c=t[0][o[1]];if(!l.get(u)){var s=this._struct.newMap(null,i);s.set(c,this._struct.newArray()),l.set(u,s)}if(l.get(u).get(c)||l.get(u).set(c,this._struct.newArray()),n){var d=k_(l.get(u).get(c),(function(e){return e.get("uuid")===n.get("uuid")}));if(d>-1)return void l.get(u).get(c).insert(d,t.map((function(e){return r._struct.newMap(e,i)})))}l.get(u).get(c).unshift(t.map((function(e){return r._struct.newMap(e,i)})))}else{var f=t[0][o[0]];if(l.get(f)||l.set(f,this._struct.newArray()),n){var p=k_(l.get(n.get(o[0])),(function(e){return e.get("uuid")===n.get("uuid")}));if(p>-1)return void l.get(f).insert(p,t.map((function(e){return r._struct.newMap(e,i)})))}l.get(f).unshift(t.map((function(e){return r._struct.newMap(e,i)})))}else{if(l||(l=this._struct.newArray(),a.set("data",l)),n){var h=k_(l,(function(e){return e.get("uuid")===n.get("uuid")}));if(h>-1)return void l.insert(h,t.map((function(e){return r._struct.newMap(e,i)})))}l.unshift(t.map((function(e){return r._struct.newMap(e,i)})))}}}},{key:"remove",value:function(e,t){var n,r=this.getIndexes(e),o=this.getColumns(e),i=this.root.get(e);if(i){var a=i.get("data"),l=t.toJSON();if(r&&r.length>0)if(a||(a=this._struct.newMap(null,o),i.set("data",a)),2===r.length){var u,c=Pk(t);try{var s,d=function(){var e=u.value,t=e.get(r[0]),o=e.get(r[1]),i=null==(n=a.get(t))?void 0:n.get(o);if(!i)return{v:void 0};var l={};i.forEach((function(e,t){l[e.get("uuid")]=t}));var c=l[e.get("uuid")];i.delete(c)};for(c.s();!(u=c.n()).done;)if(s=d())return s.v}catch(e){c.e(e)}finally{c.f()}}else if(Tk.includes(r[0])){var f,p=Pk(l);try{var h,v=function(){var e=f.value,t=e[r[0]],n=a.get(t);if(!n)return{v:void 0};var o={};n.forEach((function(e,t){o[e.get("uuid")]=t}));var i=o[e.uuid];n.delete(i)};for(p.s();!(f=p.n()).done;)if(h=v())return h.v}catch(e){p.e(e)}finally{p.f()}}else{var g=l[0][r[0]],m=a.get(g);if(!m)return;var y={},b=m.length;m.forEach((function(e,t){y[e.get("uuid")]=t}));var w,_=l.map((function(e){return e.uuid})),k=new Array(b),C=Pk(_);try{for(C.s();!(w=C.n()).done;){var E=w.value;k[y[E]]=E}}catch(e){C.e(e)}finally{C.f()}for(var O=b-1;O>=0;)k[O]&&m.delete(O),O--}else{var S={};a.forEach((function(e,t){S[e.get("uuid")]=t}));var x,j=a.length,I=l.map((function(e){return e.uuid})),R=new Array(j),A=Pk(I);try{for(A.s();!(x=A.n()).done;){var D=x.value;R[S[D]]=D}}catch(e){A.e(e)}finally{A.f()}for(var P=j-1;P>=0;)R[P]&&a.delete(P),P--}}}},{key:"query",value:function(e,t){var n,r,o=null==(r=null==(n=this.root)?void 0:n.get(e))?void 0:r.get("data");if(!o)return new g_;var i=this.getIndexes(e);return t?this._dataHelper.where(o,t,i)||new g_:i&&i.length>0?this._dataHelper.getDataByIndexes(o,t,i)||new g_:o}},{key:"getOriginData",value:function(e){var t=this.root.get(e);return(null==t?void 0:t.get("data"))||new g_}},{key:"getAll",value:function(){return this.root.toJSON()}},{key:"clear",value:function(e){var t=this;return(e||Array.from(this.root.keys())).forEach((function(e){var n,r;null!=(n=t._options.frozenTable)&&n.includes(e)||null==(r=t.root.get(e))||r.delete("data")})),this}},{key:"_filterColumns",value:function(e){var t=function(e){e._map&&(e=e.toJSON()),e.uuid||(e.uuid=fw(32));var t=new Date;return e.created_at?bw(e.created_at)&&(e.created_at=e.created_at.getTime()):e.created_at=+t,e.updated_at?bw(e.updated_at)&&(e.updated_at=e.updated_at.getTime()):e.updated_at=+t,e};if(!Array.isArray(e))return t(e);var n,r=Pk(e);try{for(r.s();!(n=r.n()).done;){t(n.value)}}catch(e){r.e(e)}finally{r.f()}return e}},{key:"destroy",value:function(){var e,t;null==(e=this._webrtc)||e.disconnect(),null==(t=this._ws)||t.disconnect(),this._struct.destroy(),this._webrtc=null,this._ws=null}}])}();function Nk(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Vk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vk(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Vk(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lk=Object.defineProperty,Bk=Object.getOwnPropertyDescriptor,$k=function(e,t,n,r){for(var o,i=r>1?void 0:r?Bk(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Lk(t,n,i),i},zk=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){var e;this._struct=new p_,this._stack=new Ik(this._struct);var t=null==(e=this._configuration)?void 0:e.getValue("model.frozenTable");this._storage=new Fk(this._struct,{frozenTable:t}),this._dataHelper=new Dk}},{key:"struct",get:function(){return this._struct}},{key:"stack",get:function(){return this._stack}},{key:"root",get:function(){return this._storage.root}},{key:"setTable",value:function(e,t,n){this._storage.setTable(e,t,n)}},{key:"setData",value:function(e,t){this._storage.setData(e,t)}},{key:"getData",value:function(){return this._storage.getAll()}},{key:"query",value:function(e,t){return this._storage.query(e,t)}},{key:"upsert",value:function(e,t,n){var r=this._storage.getOriginData(e),o=this._storage.getIndexes(e),i=this._dataHelper.where(r,t,o);return i&&0!==i.length?(this._storage.update(e,i,n),n):(n.uuid||(n.uuid=fw(32)),this._storage.append(e,n),n)}},{key:"update",value:function(e,t,n){var r=this._storage.getOriginData(e),o=this._storage.getIndexes(e),i=this._dataHelper.where(r,t,o);return 0===i.length||this._storage.update(e,i,n),n}},{key:"insert",value:function(e,t,n){return n.uuid||(n.uuid=fw(32)),this._storage.append(e,n),n}},{key:"insertAfter",value:function(e,t,n){var r,o,i,a=this._storage.getOriginData(e),l=this._storage.getIndexes(e),u=Array.isArray(n)?n[0]:n;if(!(null==(r=this._dataHelper.where(a,u,l))?void 0:r.get(0)))return t&&(i=null==(o=this._dataHelper.where(a,t,l))?void 0:o.get(0)),this._storage.append(e,u,i),u}},{key:"insertBefore",value:function(e,t,n){var r,o,i,a=this._storage.getOriginData(e),l=this._storage.getIndexes(e),u=Array.isArray(n)?n[0]:n;if(!(null==(r=this._dataHelper.where(a,u,l))?void 0:r.get(0)))return t&&(i=null==(o=this._dataHelper.where(a,t,l))?void 0:o.get(0)),this._storage.before(e,u,i),u}},{key:"remove",value:function(e,t,n){var r=this._storage.getOriginData(e),o=this._storage.getIndexes(e),i=this._dataHelper.where(r,t,o);if(0===i.length)return n;var a={};if(o&&o.length>0){i.forEach((function(e){var t=o.map((function(t){return e.get(t)})).join(",");a[t]||(a[t]=new g_),a[t].push([e])}));for(var l=0,u=Object.values(a);l<u.length;l++){var c=u[l];this._storage.remove(e,c)}}else this._storage.remove(e,i);return n}},{key:"bulkInsert",value:function(e,t,n){var r,o=Nk(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;i.uuid||(i.uuid=fw(32))}}catch(e){o.e(e)}finally{o.f()}var a={},l=this._storage.getIndexes(e);if(l&&l.length>0){n.forEach((function(e){var t=l.map((function(t){return e[t]})).join(",");a[t]||(a[t]=[]),a[t].push(e)}));for(var u=0,c=Object.values(a);u<c.length;u++){var s=c[u];this._storage.append(e,s)}}else this._storage.append(e,n);return n}},{key:"moveAfter",value:function(e,t,n){var r,o=this._storage.getOriginData(e),i=this._storage.getIndexes(e),a=Array.isArray(n)?n[0]:n,l=this._dataHelper.where(o,a,i);if(l){var u;t&&(u=null==(r=this._dataHelper.where(o,t,i))?void 0:r.get(0));var c=l.toJSON(),s=null==u?void 0:u.toJSON();return this._storage.remove(e,l),s?this._storage.append(e,c,new m_(s)):this._storage.append(e,c),l}}},{key:"moveBefore",value:function(e,t,n){var r,o=this._storage.getOriginData(e),i=this._storage.getIndexes(e),a=Array.isArray(n)?n[0]:n,l=this._dataHelper.where(o,a,i);if(l){var u;t&&(u=null==(r=this._dataHelper.where(o,t,i))?void 0:r.get(0));var c=l.toJSON(),s=null==u?void 0:u.toJSON();return this._storage.remove(e,l),s?this._storage.before(e,c,new m_(s)):this._storage.before(e,c),l}}},{key:"clear",value:function(e){this._storage.clear(e)}},{key:"destroy",value:function(){this._storage.destroy(),this._struct.destroy(),this._storage.clear()}}])}();$k([Xs(R_)],zk.prototype,"_configuration",2),$k([Ns()],zk.prototype,"init",1),$k([Vs()],zk.prototype,"destroy",1),zk=$k([Ys({token:u_})],zk);var Uk=pd().register(zk),Hk=ag,qk=ig;function Wk(e,t,n){return t=P_(t),D_(e,Gk()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Gk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Gk=function(){return!!e})()}var Kk,Yk,Xk=function(e){function t(){var e;return Ub(this,t),(e=Wk(this,t,arguments))._Plugin=new Map,e._unregisterToDestroy=new H_,e}return F_(t,e),Wb(t,[{key:"registerPlugins",value:function(e,t){var n=this;Array.isArray(e)&&e.forEach((function(e){var r=e.pluginName;if(!r)throw new Error('static property "pluginName" in Plugin is required!'+e);if(n._Plugin.get(r))throw Error('Plugin "'.concat(r,'" has been registered'));if(!e.pluginModule)throw Error('static property "pluginModule" in Plugin is required!'+e);var o=e.pluginModule(),i=t.container.load(o);n._unregisterToDestroy.push({destroy:i.dispose}),n._Plugin.set(r,e)}))}},{key:"unregisterPlugins",value:function(e){this._Plugin.size&&(this._unregisterToDestroy.destroy(),this._Plugin.clear())}}])}($_),Jk=ww(navigator)?"":navigator.userAgent,Zk=!ww(window)&&window.h5,Qk=typeof Mn.exports<"u"&&"string"==typeof Mn.exports.platform&&"number"==typeof Mn.exports.pid?Mn.exports:null,eC=/edge/i.test(Jk),tC=!eC&&/chrome/i.test(Jk),nC=/firefox/i.test(Jk),rC=!eC&&!tC&&/safari/i.test(Jk),oC=/dingtalk/i.test(Jk),iC=/mobile/i.test(Jk),aC=/os [\.\_\d]+ like mac os/i.test(Jk),lC=/android/i.test(Jk),uC=Qk?"darwin"===Qk.platform:!aC&&/mac os x/i.test(Jk),cC=Qk?"win32"===Qk.platform:/windows\s*(?:nt)?\s*[\.\_\d]+/i.test(Jk);!function(e){e.isAndroid=lC,e.isIOS=aC,e.isMac=uC,e.isWin=cC,e.isMobile=Zk||iC}(Kk||(Kk={})),function(e){e.isChrome=tC,e.isEdge=eC,e.isFirefox=nC,e.isSafari=rC,e.isDingtalk=oC}(Yk||(Yk={}));var sC=function(){return Wb((function e(){Ub(this,e)}),null,[{key:"onBeforeUnLoad",value:function(e){return window.addEventListener("beforeunload",e),{destroy:function(){window.removeEventListener("beforeunload",e)}}}}])}();function dC(e,t,n){return t=P_(t),D_(e,fC()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function fC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(fC=function(){return!!e})()}var pC=function(e){function t(e){var n;return Ub(this,t),(n=dC(this,t,[e||t.defaultMaxSize]))._canvasCtx=null,n}return F_(t,e),Wb(t,[{key:"_getOrCreateCanvasCtx",value:function(){if(this._canvasCtx)return this._canvasCtx;var e=document.createElement("canvas").getContext("2d");return this._canvasCtx=e,this._canvasCtx}},{key:"calc",value:function(e,t){var n=this;if(!e)return{width:0,height:0};var r=function(e){if(!e)return[];if(ko(e))return tu(e)?Qi(e):Zr(e);if(du&&e[du])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[du]());var t=ja(e);return("[object Map]"==t?Na:"[object Set]"==t?Va:nu)(e)}(e),o=0,i=0;return r.forEach((function(e){var r=n._getWordSize(e,t);o+=r.width,r.height>i&&(i=r.height)})),{width:o,height:i}}},{key:"getRenderText",value:function(e,n,r){if(!mw(e))return e;var o=r||t.defaultFontStyle,i=o.fontSize,a=3*o.fontSize,l=Math.ceil(n.height/o.lineHeight),u=n.width*l;if(this._getWordSize(e,o.font).width+i<u)return e;for(var c=0,s=e.length-1,d=this._getEllipsisWidth(o.font),f=10;c<=s&&f>0;){f--;var p=Math.floor((c+s)/2),h=e.slice(0,p+1),v=this._getWordSize(h,o.font).width;if(Ql(v+d,u-a,u))return h+"...";v>u?s=p-1:c=p+1}return e.slice(0,c-3)+"..."}},{key:"_getEllipsisWidth",value:function(e){return Math.ceil(this._getWordSize("...",e).width)}},{key:"_getWordSize",value:function(e,t){var n="".concat(e,"-").concat(t),r=this.get(n);if(r)return r;this._canvasCtx=this._getOrCreateCanvasCtx(),this._canvasCtx.font=t;var o=this._canvasCtx.measureText(e),i={width:o.width,height:o.actualBoundingBoxAscent+o.actualBoundingBoxDescent};return this.put(n,i),i}}])}(ek);pC.defaultMaxSize=1e4,pC.maxFindTime=500,pC.defaultFontStyle={lineHeight:14,font:"14px PingFang SC",fontSize:14};var hC=new pC,vC=function(e){window.requestIdleCallback?requestIdleCallback(e):e()};function gC(e,t,n,r,o,i,a){try{var l=e[i](a),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function mC(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){gC(i,r,o,a,l,"next",e)}function l(e){gC(i,r,o,a,l,"throw",e)}a(void 0)}))}}var yC,bC=function(e){return e.TEXT="text",e.NUMBER="number",e.SELECT="select",e.MULTI_SELECT="multiSelect",e.DATE="date",e.MENTION="mention",e.IMAGE="image",e.FILE="file",e.CHECKBOX="checkbox",e.LINK="link",e.EMAIL="email",e.PHONE="phone",e.CREATED_AT="createdAt",e.UPDATED_AT="updatedAt",e.USER_ID="userId",e.MODIFIER_ID="modifierId",e.TITLE="title",e.TEXTAREA="textarea",e.INPUT="input",e.RATE="rate",e.PROGRESS="progress",e}(bC||{}),wC=function(e){return e.STRING="string",e.NUMBER="number",e.SELECT="select",e.URI="uri",e.BOOLEAN="boolean",e.DATE="date",e.SYSTEM="system",e}(wC||{}),_C=($b($b($b($b($b($b($b($b($b($b(yC={},"text","string"),"email","string"),"phone","string"),"title","string"),"select","select"),"multiSelect","select"),"number","number"),"rate","number"),"progress","number"),"date","date"),$b($b($b($b($b($b($b($b($b(yC,"mention","uri"),"image","uri"),"file","uri"),"link","uri"),"checkbox","boolean"),"createdAt","system"),"updatedAt","system"),"userId","system"),"modifierId","system"));Object.values(bC);var kC=[{name:"文本",type:bC.TEXT},{name:"单选",type:bC.SELECT,color:!0,options:[{name:"待开始",color:"#FBD3D0"},{name:"进行中",color:"#E4F7D2"},{name:"已完成",color:"#F7E9BC"}]},{name:"日期",type:bC.DATE}],CC=[{type:bC.TITLE,name:uw("标题")},{type:bC.TEXT,name:uw("文本")},{type:bC.NUMBER,name:uw("数字")},{type:bC.SELECT,name:uw("单选")},{type:bC.MULTI_SELECT,name:uw("多选")},{type:bC.DATE,name:uw("日期")},{type:bC.MENTION,name:uw("人员")},{type:bC.IMAGE,name:uw("图片"),disableGroup:!0,disableSort:!0},{type:bC.FILE,name:uw("附件"),disableGroup:!0,disableSort:!0},{type:bC.CHECKBOX,name:uw("复选框")},{type:bC.LINK,name:uw("链接")},{type:bC.EMAIL,name:uw("邮箱")},{type:bC.PHONE,name:uw("手机号码")},{type:bC.RATE,name:uw("评分")},{type:bC.PROGRESS,name:uw("进度")},{type:bC.USER_ID,name:uw("创建人"),isAdvanced:!0,disableForm:!0},{type:bC.CREATED_AT,name:uw("创建时间"),isAdvanced:!0,disableGroup:!0,disableForm:!0},{type:bC.MODIFIER_ID,name:uw("修改人"),isAdvanced:!0,disableForm:!0},{type:bC.UPDATED_AT,name:uw("修改时间"),isAdvanced:!0,disableGroup:!0,disableForm:!0}];function EC(e,t){var n={};CC.forEach((function(e){n[e.type]=e.name}));for(var r=n[e],o=t.map((function(e){return e.name})),i=1,a=r;o.includes(a);)a="".concat(r," ").concat(i),i+=1;return a}function OC(e){var t=CC.find((function(t){return t.type===e}));return(null==t?void 0:t.name)||""}Ts.defineToken("KernelModelToken");var SC,xC=function(e){return e[e.ACTIVE=0]="ACTIVE",e[e.INACTIVE=1]="INACTIVE",e}(xC||{}),jC=function(e){return e.equalTo="equalTo",e.notEqualTo="notEqualTo",e.greaterThan="greaterThan",e.greaterThanOrEqualTo="greaterThanOrEqualTo",e.lessThan="lessThan",e.lessThanOrEqualTo="lessThanOrEqualTo",e.isEmpty="isEmpty",e.isNotEmpty="isNotEmpty",e.startsWith="startsWith",e.notStartsWith="notStartsWith",e.endsWith="endsWith",e.notEndsWith="notEndsWith",e.contains="contains",e.notContains="notContains",e.yesterday="yesterday",e.today="today",e.tomorrow="tomorrow",e.last7days="last7days",e.lastWeek="lastWeek",e.thisWeek="thisWeek",e.nextWeek="nextWeek",e.lastMonth="lastMonth",e.thisMonth="thisMonth",e.nextMonth="nextMonth",e.is="is",e.isNot="isNot",e.isEmptySelect="isEmptySelect",e.isNotEmptySelect="isNotEmptySelect",e.isExactly="isExactly",e.hasAnyOf="hasAnyOf",e.hasAllOf="hasAllOf",e.hasNoneOf="hasNoneOf",e}(jC||{}),IC=function(e){return e.And="and",e.Or="or",e}(IC||{}),RC=function(e){return e.forward="forward",e.reverse="reverse",e}(RC||{}),AC=function(e){return e.Clip="clip",e.Fit="fit",e}(AC||{}),DC=function(e){return e.LOW="low",e.MIDDLE="middle",e.HIGH="high",e}(DC||{}),PC=function(e){return e.CUSTOM="custom",e.FOLLOW_FIELD="follow_field",e}(PC||{}),MC=function(e){return e.ASC="asc",e.DESC="desc",e}(MC||{}),TC=function(e){return e.ASC="asc",e.DESC="desc",e}(TC||{}),FC=[{type:"number",func:jC.equalTo,text:uw("等于")},{type:"number",func:jC.notEqualTo,text:uw("不等于")},{type:"number",func:jC.greaterThan,text:uw("大于")},{type:"number",func:jC.greaterThanOrEqualTo,text:uw("大于等于")},{type:"number",func:jC.lessThan,text:uw("小于")},{type:"number",func:jC.lessThanOrEqualTo,text:uw("小于等于")},{type:"number",func:jC.isEmpty,text:uw("为空")},{type:"number",func:jC.isNotEmpty,text:uw("非空")},{type:"text",func:jC.startsWith,text:uw("开头是")},{type:"text",func:jC.notStartsWith,text:uw("开头不是")},{type:"text",func:jC.endsWith,text:uw("结尾是")},{type:"text",func:jC.notEndsWith,text:uw("结尾不是")},{type:"text",func:jC.contains,text:uw("包含")},{type:"text",func:jC.notContains,text:uw("不包含")},{type:"text",func:jC.isEmpty,text:uw("为空")},{type:"text",func:jC.isNotEmpty,text:uw("非空")},{type:"timePeriod",func:jC.equalTo,text:uw("等于")},{type:"timePeriod",func:jC.lessThan,text:uw("早于")},{type:"timePeriod",func:jC.greaterThan,text:uw("晚于")},{type:"timePeriod",func:jC.isEmpty,text:uw("为空")},{type:"timePeriod",func:jC.isNotEmpty,text:uw("非空")},{type:"select",func:jC.is,text:uw("是")},{type:"select",func:jC.isNot,text:uw("不是")},{type:"select",func:jC.isEmptySelect,text:uw("为空")},{type:"select",func:jC.isNotEmptySelect,text:uw("非空")},{type:"multiSelect",func:jC.isExactly,text:uw("是")},{type:"multiSelect",func:jC.isNot,text:uw("不是")},{type:"multiSelect",func:jC.hasAnyOf,text:uw("包含一个")},{type:"multiSelect",func:jC.hasAllOf,text:uw("包含所有")},{type:"multiSelect",func:jC.hasNoneOf,text:uw("不包含")},{type:"multiSelect",func:jC.isEmptySelect,text:uw("为空")},{type:"multiSelect",func:jC.isNotEmptySelect,text:uw("非空")},{type:"checkbox",func:jC.equalTo,text:uw("等于")},{type:"file",func:jC.isEmpty,text:uw("为空")},{type:"file",func:jC.isNotEmpty,text:uw("非空")}],NC=($b($b($b($b($b($b($b($b($b($b(SC={},bC.TITLE,"text"),bC.TEXT,"text"),bC.LINK,"text"),bC.EMAIL,"text"),bC.PHONE,"text"),bC.DATE,"timePeriod"),bC.CREATED_AT,"timePeriod"),bC.UPDATED_AT,"timePeriod"),bC.NUMBER,"number"),bC.RATE,"number"),$b($b($b($b($b($b($b($b($b(SC,bC.PROGRESS,"number"),bC.SELECT,"select"),bC.MULTI_SELECT,"multiSelect"),bC.MENTION,"multiSelect"),bC.USER_ID,"select"),bC.MODIFIER_ID,"select"),bC.CHECKBOX,"checkbox"),bC.IMAGE,"file"),bC.FILE,"file")),VC=["isEmpty","isNotEmpty","duplicate","unique","isEmptySelect","isNotEmptySelect"],LC=[{name:"custom",text:uw("具体日期")},{name:"today",text:uw("今天")},{name:"tomorrow",text:uw("明天")},{name:"yesterday",text:uw("昨天")},{name:"thisWeek",text:uw("本周")},{name:"lastWeek",text:uw("上周")},{name:"nextWeek",text:uw("下周")},{name:"lastMonth",text:uw("上月")},{name:"thisMonth",text:uw("本月")},{name:"nextMonth",text:uw("下月")},{name:"last7days",text:uw("过去7天内"),matchFuncs:[jC.equalTo]},{name:"next7days",text:uw("未来7天内"),matchFuncs:[jC.equalTo]},{name:"last30days",text:uw("过去30天内"),matchFuncs:[jC.equalTo]},{name:"next30days",text:uw("未来30天内"),matchFuncs:[jC.equalTo]}],BC=function(e){return e.GRID="GRID",e.CARD="CARD",e.KANBAN="KANBAN",e.FORM="FORM",e.CALENDAR="CALENDAR",e}(BC||{});Object.values(BC);var $C=$b($b($b($b($b({},"GRID",{type:"GRID",name:uw("表格视图")}),"CARD",{type:"CARD",name:uw("画册视图")}),"KANBAN",{type:"KANBAN",name:uw("看板视图")}),"FORM",{type:"FORM",name:uw("表单")}),"CALENDAR",{type:"CALENDAR",name:uw("日历视图")}),zC=function(){return Wb((function e(){Ub(this,e)}),null,[{key:"isBoolean",value:function(e){return e===bC.CHECKBOX}},{key:"isDate",value:function(e){return e===bC.DATE}},{key:"isDateLike",value:function(e){return e===bC.DATE||e===bC.UPDATED_AT||e===bC.CREATED_AT}},{key:"isSystemDate",value:function(e){return e===bC.CREATED_AT||e===bC.UPDATED_AT}},{key:"isNumberLike",value:function(e){return e===bC.NUMBER||e===bC.RATE||e===bC.PROGRESS}},{key:"isSelectLike",value:function(e){return e===bC.SELECT||e===bC.MULTI_SELECT}},{key:"isSelect",value:function(e){return e===bC.SELECT}},{key:"isMultiSelect",value:function(e){return e===bC.MULTI_SELECT}},{key:"isSystemType",value:function(e){return e===bC.CREATED_AT||e===bC.UPDATED_AT||e===bC.USER_ID||e===bC.MODIFIER_ID}},{key:"isCreateDisable",value:function(e){return e===bC.TITLE}},{key:"isTransformDisable",value:function(e){return e===bC.TITLE}},{key:"isDeleteDisable",value:function(e){return e===bC.TITLE}},{key:"isSystemUser",value:function(e){return e===bC.USER_ID||e===bC.MODIFIER_ID}},{key:"isString",value:function(e){return e===bC.TITLE||e===bC.TEXT||e===bC.EMAIL||e===bC.PHONE}},{key:"isUri",value:function(e){return e===bC.IMAGE||e===bC.FILE||e===bC.MENTION||e===bC.LINK}},{key:"isLink",value:function(e){return e===bC.LINK}},{key:"isMultiple",value:function(e){return e===bC.MULTI_SELECT||e===bC.IMAGE||e===bC.FILE||e===bC.MENTION}},{key:"isMention",value:function(e){return e===bC.MENTION}},{key:"isMentionLike",value:function(e){return e===bC.MENTION||e===bC.USER_ID||e===bC.MODIFIER_ID}},{key:"isImage",value:function(e){return e===bC.IMAGE}},{key:"isCheckbox",value:function(e){return e===bC.CHECKBOX}},{key:"isGroup",value:function(e){return e===bC.TITLE||e===bC.TEXT||e===bC.NUMBER||e===bC.RATE||e===bC.PROGRESS||e===bC.SELECT||e===bC.MULTI_SELECT||e===bC.DATE||e===bC.MENTION||e===bC.CHECKBOX||e===bC.LINK||e===bC.EMAIL||e===bC.PHONE||e===bC.USER_ID||e===bC.MODIFIER_ID}},{key:"isSort",value:function(e){return e===bC.TITLE||e===bC.TEXT||e===bC.NUMBER||e===bC.RATE||e===bC.PROGRESS||e===bC.SELECT||e===bC.MULTI_SELECT||e===bC.DATE||e===bC.MENTION||e===bC.CHECKBOX||e===bC.LINK||e===bC.EMAIL||e===bC.PHONE||e===bC.USER_ID||e===bC.CREATED_AT||e===bC.MODIFIER_ID||e===bC.UPDATED_AT}},{key:"isFilter",value:function(e){return e===bC.TITLE||e===bC.TEXT||e===bC.NUMBER||e===bC.RATE||e===bC.PROGRESS||e===bC.SELECT||e===bC.MULTI_SELECT||e===bC.DATE||e===bC.MENTION||e===bC.IMAGE||e===bC.FILE||e===bC.CHECKBOX||e===bC.LINK||e===bC.EMAIL||e===bC.PHONE||e===bC.USER_ID||e===bC.CREATED_AT||e===bC.MODIFIER_ID||e===bC.UPDATED_AT}},{key:"getBaseType",value:function(e){return _C[e]}}])}(),UC=Ts.defineToken("DriverToken"),HC=function(e){return e.Pending="pending",e.Runing="Runing",e}(HC||{}),qC=Ts.defineToken("ModelEventToken"),WC=Ts.defineToken("ModelInitialToken"),GC=function(e){return e.SELECT="select",e.INSERT="insert",e.UPDATE="update",e.DELETE="remove",e.UPSERT="upsert",e.BULK_INSERT="bulkInsert",e.MOVE_BEFORE="moveBefore",e.MOVE_AFTER="moveAfter",e.INSERT_AFTER="insertAfter",e.INSERT_BEFORE="insertBefore",e}(GC||{}),KC=Object.defineProperty,YC=Object.getOwnPropertyDescriptor,XC=function(e,t,n,r){for(var o,i=r>1?void 0:r?YC(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&KC(t,n,i),i},JC=function(){return Wb((function e(){Ub(this,e),this._status=HC.Pending,this._tableMap={}}),[{key:"initTable",value:function(e){this._tableMap[e.name]=e}},{key:"tables",get:function(){return Object.values(this._tableMap)}},{key:"status",get:function(){return this._status},set:function(e){this._status=e}},{key:"execute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.command===GC.SELECT)return this._read(e);if(e.command===GC.INSERT||e.command===GC.UPDATE||e.command===GC.UPSERT||e.command===GC.DELETE||e.command===GC.BULK_INSERT||e.command===GC.MOVE_AFTER||e.command===GC.MOVE_BEFORE||e.command===GC.INSERT_AFTER||e.command===GC.INSERT_BEFORE)return t.slient?this._modelEvent.emitChangeWithSilent({spell:e}):this._modelEvent.emitChange({spell:e}),this._modelEvent.emitChangeAllways({spell:e}),this._write(e);throw new Error("".concat(e.command," 指令没有实现驱动"))}},{key:"_read",value:function(e){var t=this._database.query(e.table,e.where);return this._parseRes(t)}},{key:"_write",value:function(e){var t=this._database[e.command](e.table,e.where,e.sets);return this._parseRes(t)}},{key:"_parseRes",value:function(e){var t=0;return e?{rows:e,rowCount:t=Array.isArray(e)?e.length:1}:{rows:new g_,rowCount:t}}}])}();XC([Xs(u_)],JC.prototype,"_database",2),XC([Xs(qC)],JC.prototype,"_modelEvent",2),JC=XC([Ys({token:UC})],JC);var ZC=Ts.defineToken("ModelContribution");function QC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QC(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var r=t.constructor;r.columns||(r.columns={}),r.columns[n]=eE(eE({},e),{},{name:n})}}function nE(e,t){if(null!=e&&null!=t){for(var n in t){var r=e[n],o=t[n].defaultValue;void 0===r&&null!=o&&(e[n]=o)}return e}}function rE(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return oE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oE(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function oE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iE(e,t){var n=e.Model,r={};for(var o in t){var i=n.columns[o],a=t[o];i&&(i.type?r[o]=i.type.toValue(a):r[o]=a)}return r}function aE(e,t){var n;if(Array.isArray(t)){n=[];var r,o=rE(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;n.push(iE(e,i))}}catch(e){o.e(e)}finally{o.f()}}else n=iE(e,t);return n}function lE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lE(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cE=function(){return Wb((function e(t,n,r){Ub(this,e),this.sets=[],this.groups=[],this.orders=[],this.offset=0,this.Model=t,this.table=t.table,this.command=GC.SELECT,this._driver=n,this._executeOpts=r}),[{key:"execute",value:function(){if(this._driver){var e=this._driver.execute(this.toObject(),this._executeOpts);return e=uE(uE({},e),{},{spell:this})}}},{key:"$insert",value:function(e){return this.command=GC.INSERT,this.sets=aE(this,e),this}},{key:"$update",value:function(e){return this.command=GC.UPDATE,this.sets=aE(this,e),this}},{key:"$upsert",value:function(e){return this.command=GC.UPSERT,this.sets=aE(this,e),this}},{key:"$delete",value:function(){return this.command=GC.DELETE,this}},{key:"$bulkInsert",value:function(e){return this.command=GC.BULK_INSERT,this.sets=aE(this,e),this}},{key:"$insertAfter",value:function(e){return this.command=GC.INSERT_AFTER,this.sets=aE(this,e),this}},{key:"$insertBefore",value:function(e){return this.command=GC.INSERT_BEFORE,this.sets=aE(this,e),this}},{key:"$moveAfter",value:function(e){return this.command=GC.MOVE_AFTER,this.sets=aE(this,e),this}},{key:"$moveBefore",value:function(e){return this.command=GC.MOVE_BEFORE,this.sets=aE(this,e),this}},{key:"$where",value:function(e){return this.where=e,this}},{key:"$offset",value:function(e){if(Number.isNaN(e))throw new Error("invalid offset ".concat(e));return this.offset=e,this}},{key:"$limit",value:function(e){if(Number.isNaN(e))throw new Error("invalid limit ".concat(e));return this.limit=e,this}},{key:"toObject",value:function(){return{table:this.table,command:this.command,where:this.where,sets:this.sets,offset:this.offset,limit:this.limit}}}])}();function sE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sE(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fE(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return pE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pE(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function pE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hE=function(){return Wb((function e(t,n){Ub(this,e),this.timestamps={updatedAt:"updated_at",createdAt:"created_at"},this.Model=t,this.driver=n}),[{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=new cE(this.Model,this.driver);if(n.$where(e),t)for(var r=0,o=["order","limit","offset","select"];r<o.length;r++){var i=o[r],a=t[i];null!=a&&n["$".concat(i)](a)}var l=n.execute();return null!=l&&l.rows&&0!==l.rows.length?l.rows:new g_}},{key:"findOne",value:function(e){var t=this.find(e);return t&&t.get(0)?t.get(0):null}},{key:"findById",value:function(e){var t={uuid:e},n=this.find(t);return n&&n.get(0)?n.get(0):null}},{key:"remove",value:function(e){return new cE(this.Model,this.driver).$where(e).$delete().execute().affectedRows}},{key:"update",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.timestamps.updatedAt,i=Object.assign({},n);return null!=(t=this.Model.columns)&&t[o]&&!i[o]&&!r.silent&&(i[o]=+new Date),new cE(this.Model,this.driver,r).$where(e).$update(i).execute().rows}},{key:"upsert",value:function(e,t,n){var r,o=this.timestamps.updatedAt,i=Object.assign({},t);null!=(r=this.Model.columns)&&r[o]&&!i[o]&&(i[o]=+new Date);var a=new cE(this.Model,this.driver,n).$where(e).$upsert(i).execute();return null==a?void 0:a.rows}},{key:"bulkCreate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.length)return e;var n,r=this.columns,o=this.timestamps,i=o.createdAt,a=o.updatedAt,l=new Date,u=fE(e);try{for(u.s();!(n=u.n()).done;){var c=n.value;i&&(c[i]=+l),a&&(c[a]=+l),nE(c,r)}}catch(e){u.e(e)}finally{u.f()}return t=dE(dE({},t),{},{columns:r}),new cE(this.Model,this.driver).$bulkInsert(e).execute(),e}},{key:"moveAfter",value:function(e,t){return t=Object.assign({},t),new cE(this.Model,this.driver).$where(e).$moveAfter(t).execute().rows}},{key:"moveBefore",value:function(e,t){return t=Object.assign({},t),new cE(this.Model,this.driver).$where(e).$moveBefore(t).execute().rows}},{key:"create",value:function(e){var t=new cE(this.Model,this.driver).$insert(this._getCreateValue(e)).execute();return this.findOne({uuid:t.rows.uuid}).toJSON()}},{key:"createAfter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},t),r=new cE(this.Model,this.driver).$where(e).$insertAfter(this._getCreateValue(n)).execute();return this.findOne({uuid:r.rows.uuid}).toJSON()}},{key:"createBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},t),r=new cE(this.Model,this.driver).$where(e).$insertBefore(this._getCreateValue(n)).execute();return this.findOne({uuid:r.rows.uuid}).toJSON()}},{key:"_getCreateValue",value:function(e){var t=this.Model.columns,n=this.timestamps,r=n.createdAt,o=n.updatedAt,i={},a=new Date;for(var l in null!=t&&t[r]&&(this[r]=+a),null!=t&&t[o]&&(this[o]=+a),t){var u=e[l],c=t[l].defaultValue;null!=u?i[l]=u:void 0===u&&null!=c&&(i[l]=c)}return i}}])}();function vE(e,t,n){return t=P_(t),D_(e,gE()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function gE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(gE=function(){return!!e})()}var mE=Object.defineProperty,yE=Object.getOwnPropertyDescriptor,bE=function(e,t,n,r){for(var o,i=r>1?void 0:r?yE(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&mE(t,n,i),i},wE=function(e){function t(){var e;return Ub(this,t),(e=vE(this,t,arguments))._onChange=e._register(new ck),e.onChange=e._onChange.event,e.emitChange=function(t){cw((function(){e._onChange.emit(t)}))},e._onChangeWithSlient=e._register(new ck),e.onChangeWithSlient=e._onChange.event,e.emitChangeWithSilent=function(t){cw((function(){e._onChangeWithSlient.emit(t)}))},e._onChangeAllways=e._register(new ck),e.onChangeAllways=e._onChange.event,e.emitChangeAllways=function(t){cw((function(){e._onChangeAllways.emit(t)}))},e}return F_(t,e),Wb(t,[{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);function _E(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return kE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kE(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function kE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}bE([Vs()],wE.prototype,"destroy",1),wE=bE([Ys({token:qC})],wE);var CE=Object.defineProperty,EE=Object.getOwnPropertyDescriptor,OE=function(e,t,n,r){for(var o,i=r>1?void 0:r?EE(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&CE(t,n,i),i},SE=function(){return Wb((function e(){Ub(this,e),this._modelMap=new Map}),[{key:"init",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=_E(this._modelProvider.getContributions());try{for(n.s();!(e=n.n()).done;){var r=e.value;try{r.registerModel&&t.push(r.registerModel()),r.registerModels&&(t=t.concat(r.registerModels()))}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}var o,i=_E(t);try{for(i.s();!(o=i.n()).done;){var a=o.value;this._initTable(a),this._modelMap.set(a.table,a)}}catch(e){i.e(e)}finally{i.f()}}},{key:"getModel",value:function(e){return this._modelMap.get(e)}},{key:"_initTable",value:function(e){if(!e.table)throw new Error("Model must have a name");var t=e.columns||{};t.uuid={name:"uuid"},t.created_at={name:"created_at"},t.updated_at={name:"updated_at"};var n=t?Object.keys(t).map((function(e){return t[e]})):[];return this._driver.initTable({name:e.table,indexes:e.indexes,columns:n}),this._database.setTable(e.table,n,e.indexes),this}}])}();OE([bd(ZC)],SE.prototype,"_modelProvider",2),OE([Xs(UC)],SE.prototype,"_driver",2),OE([Xs(u_)],SE.prototype,"_database",2),SE=OE([Ys()],SE);var xE=Object.defineProperty,jE=Object.getOwnPropertyDescriptor,IE=function(e,t,n,r){for(var o,i=r>1?void 0:r?jE(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&xE(t,n,i),i},RE=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){this._configuration.registerConfiguration({id:"model",type:"object",title:"数据模型",properties:{frozenTable:{type:"array",description:"固化表，普通刷新不清空内容"}}}),this._modelRegistry.init(null==e?void 0:e.models)}}])}();IE([Xs(R_)],RE.prototype,"_configuration",2),IE([Xs(SE)],RE.prototype,"_modelRegistry",2),RE=IE([Ys({token:WC})],RE);var AE=Object.defineProperty,DE=Object.getOwnPropertyDescriptor,PE=function(e,t,n,r){for(var o,i=r>1?void 0:r?DE(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&AE(t,n,i),i},ME=function(){return Wb((function e(){Ub(this,e)}),[{key:"getModel",value:function(e){var t=this._modelRegistry.getModel(e);return new hE(t,this._driver)}}])}();PE([Xs(SE)],ME.prototype,"_modelRegistry",2),PE([Xs(UC)],ME.prototype,"_driver",2),ME=PE([Ys()],ME);var TE=Wb((function e(){Ub(this,e)})),FE=pd().contribution(ZC).register(JC).register(wE).register(RE).register(ME).register(SE);function NE(e,t,n){return t=P_(t),D_(e,VE()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function VE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(VE=function(){return!!e})()}var LE=Object.defineProperty,BE=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&LE(t,n,i),i},$E=function(e){function t(){return Ub(this,t),NE(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function zE(e,t,n){return t=P_(t),D_(e,UE()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function UE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(UE=function(){return!!e})()}$E.table="field_boolean",$E.indexes=["field_uuid","record_uuid"],$E.ignoreColumns=["uuid"],BE([tE()],$E.prototype,"field_uuid"),BE([tE()],$E.prototype,"record_uuid"),BE([tE()],$E.prototype,"value");var HE=Object.defineProperty,qE=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&HE(t,n,i),i},WE=function(e){function t(){return Ub(this,t),zE(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function GE(e,t,n){return t=P_(t),D_(e,KE()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function KE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(KE=function(){return!!e})()}WE.table="field_date",WE.indexes=["field_uuid","record_uuid"],WE.ignoreColumns=["uuid"],qE([tE()],WE.prototype,"field_uuid"),qE([tE()],WE.prototype,"record_uuid"),qE([tE()],WE.prototype,"value");var YE=Object.defineProperty,XE=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&YE(t,n,i),i},JE=function(e){function t(){return Ub(this,t),GE(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function ZE(e,t,n){return t=P_(t),D_(e,QE()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function QE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(QE=function(){return!!e})()}JE.table="field",JE.indexes=["uuid"],XE([tE()],JE.prototype,"name"),XE([tE()],JE.prototype,"type"),XE([tE()],JE.prototype,"sub_type"),XE([tE()],JE.prototype,"color"),XE([tE()],JE.prototype,"multiple"),XE([tE()],JE.prototype,"config");var eO=Object.defineProperty,tO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&eO(t,n,i),i},nO=function(e){function t(){return Ub(this,t),ZE(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function rO(e,t,n){return t=P_(t),D_(e,oO()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function oO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(oO=function(){return!!e})()}nO.table="field_number",nO.indexes=["field_uuid","record_uuid"],nO.ignoreColumns=["uuid"],tO([tE()],nO.prototype,"field_uuid"),tO([tE()],nO.prototype,"record_uuid"),tO([tE()],nO.prototype,"value"),tO([tE()],nO.prototype,"format");var iO=Object.defineProperty,aO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&iO(t,n,i),i},lO=function(e){function t(){return Ub(this,t),rO(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function uO(e,t,n){return t=P_(t),D_(e,cO()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function cO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(cO=function(){return!!e})()}lO.table="field_option",lO.indexes=["field_uuid"],lO.MAX_LENGTH=128,aO([tE()],lO.prototype,"field_uuid"),aO([tE()],lO.prototype,"name"),aO([tE()],lO.prototype,"color"),aO([tE()],lO.prototype,"temp");var sO=Object.defineProperty,dO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&sO(t,n,i),i},fO=function(e){function t(){return Ub(this,t),uO(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function pO(e,t,n){return t=P_(t),D_(e,hO()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function hO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(hO=function(){return!!e})()}fO.table="field_select",fO.indexes=["field_uuid","record_uuid"],fO.ignoreColumns=["uuid"],dO([tE()],fO.prototype,"field_uuid"),dO([tE()],fO.prototype,"record_uuid"),dO([tE()],fO.prototype,"value");var vO=Object.defineProperty,gO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&vO(t,n,i),i},mO=function(e){function t(){return Ub(this,t),pO(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function yO(e,t,n){return t=P_(t),D_(e,bO()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function bO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(bO=function(){return!!e})()}mO.table="field_string",mO.indexes=["field_uuid","record_uuid"],mO.ignoreColumns=["uuid"],gO([tE()],mO.prototype,"field_uuid"),gO([tE()],mO.prototype,"record_uuid"),gO([tE()],mO.prototype,"value"),gO([tE()],mO.prototype,"updated_at"),gO([tE()],mO.prototype,"created_at");var wO=Object.defineProperty,_O=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&wO(t,n,i),i},kO=function(e){function t(){return Ub(this,t),yO(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function CO(e,t,n){return t=P_(t),D_(e,EO()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function EO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(EO=function(){return!!e})()}kO.table="field_uri",kO.indexes=["field_uuid","record_uuid"],kO.ignoreColumns=["uuid"],_O([tE()],kO.prototype,"field_uuid"),_O([tE()],kO.prototype,"record_uuid"),_O([tE()],kO.prototype,"uid"),_O([tE()],kO.prototype,"name"),_O([tE()],kO.prototype,"src"),_O([tE()],kO.prototype,"size"),_O([tE()],kO.prototype,"mime"),_O([tE()],kO.prototype,"icon"),_O([tE()],kO.prototype,"width"),_O([tE()],kO.prototype,"height");var OO=Object.defineProperty,SO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&OO(t,n,i),i},xO=function(e){function t(){return Ub(this,t),CO(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function jO(e,t,n){return t=P_(t),D_(e,IO()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function IO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(IO=function(){return!!e})()}xO.table="filter",xO.indexes=["view_uuid"],SO([tE()],xO.prototype,"view_uuid"),SO([tE()],xO.prototype,"field_uuid"),SO([tE()],xO.prototype,"operator"),SO([tE()],xO.prototype,"func"),SO([tE()],xO.prototype,"expected");var RO=Object.defineProperty,AO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&RO(t,n,i),i},DO=function(e){function t(){return Ub(this,t),jO(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function PO(e,t,n){return t=P_(t),D_(e,MO()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function MO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(MO=function(){return!!e})()}DO.table="group",DO.indexes=["view_uuid"],AO([tE()],DO.prototype,"view_uuid"),AO([tE()],DO.prototype,"field_uuid"),AO([tE()],DO.prototype,"type");var TO=Object.defineProperty,FO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&TO(t,n,i),i},NO=function(e){function t(){return Ub(this,t),PO(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function VO(e,t,n){return t=P_(t),D_(e,LO()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function LO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(LO=function(){return!!e})()}NO.table="group_item",NO.indexes=["view_uuid","field_uuid"],FO([tE()],NO.prototype,"view_uuid"),FO([tE()],NO.prototype,"field_uuid"),FO([tE()],NO.prototype,"key"),FO([tE()],NO.prototype,"collapse");var BO=Object.defineProperty,$O=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&BO(t,n,i),i},zO=function(e){function t(){return Ub(this,t),VO(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function UO(e,t,n){return t=P_(t),D_(e,HO()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function HO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(HO=function(){return!!e})()}zO.table="record",zO.indexes=["uuid"],$O([tE()],zO.prototype,"id"),$O([tE()],zO.prototype,"desc"),$O([tE()],zO.prototype,"creator_id"),$O([tE()],zO.prototype,"modifier_id");var qO=Object.defineProperty,WO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&qO(t,n,i),i},GO=function(e){function t(){return Ub(this,t),UO(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function KO(e,t,n){return t=P_(t),D_(e,YO()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function YO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(YO=function(){return!!e})()}GO.table="sort",GO.indexes=["view_uuid"],WO([tE()],GO.prototype,"view_uuid"),WO([tE()],GO.prototype,"field_uuid"),WO([tE()],GO.prototype,"type");var XO=Object.defineProperty,JO=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&XO(t,n,i),i},ZO=function(e){function t(){return Ub(this,t),KO(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function QO(e,t,n){return t=P_(t),D_(e,eS()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function eS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(eS=function(){return!!e})()}ZO.table="stat",ZO.indexes=["view_uuid","field_uuid"],JO([tE()],ZO.prototype,"view_uuid"),JO([tE()],ZO.prototype,"field_uuid"),JO([tE()],ZO.prototype,"type");var tS=Object.defineProperty,nS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&tS(t,n,i),i},rS=function(e){function t(){return Ub(this,t),QO(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function oS(e,t,n){return t=P_(t),D_(e,iS()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function iS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(iS=function(){return!!e})()}rS.table="table",nS([tE()],rS.prototype,"version"),nS([tE()],rS.prototype,"active_view_uuid");var aS=Object.defineProperty,lS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&aS(t,n,i),i},uS=function(e){function t(){return Ub(this,t),oS(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function cS(e,t,n){return t=P_(t),D_(e,sS()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function sS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(sS=function(){return!!e})()}uS.table="user",uS.indexes=["uid"],lS([tE()],uS.prototype,"uid"),lS([tE()],uS.prototype,"login"),lS([tE()],uS.prototype,"work_id"),lS([tE()],uS.prototype,"name"),lS([tE()],uS.prototype,"icon");var dS=Object.defineProperty,fS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&dS(t,n,i),i},pS=function(e){function t(){return Ub(this,t),cS(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function hS(e,t,n){return t=P_(t),D_(e,vS()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function vS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(vS=function(){return!!e})()}pS.table="view_config",pS.indexes=["view_uuid"],fS([tE()],pS.prototype,"view_uuid"),fS([tE()],pS.prototype,"cover_field_uuid"),fS([tE()],pS.prototype,"cover_display"),fS([tE()],pS.prototype,"show_field_name"),fS([tE()],pS.prototype,"keep_sort"),fS([tE()],pS.prototype,"frozen_field"),fS([tE()],pS.prototype,"record_height"),fS([tE()],pS.prototype,"start_date_field_uuid"),fS([tE()],pS.prototype,"end_date_field_uuid"),fS([tE()],pS.prototype,"active_date"),fS([tE()],pS.prototype,"date_title_field_uuid"),fS([tE()],pS.prototype,"show_lunar"),fS([tE()],pS.prototype,"date_color_type"),fS([tE()],pS.prototype,"date_color");var gS=Object.defineProperty,mS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&gS(t,n,i),i},yS=function(e){function t(){return Ub(this,t),hS(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function bS(e,t,n){return t=P_(t),D_(e,wS()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function wS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(wS=function(){return!!e})()}yS.table="view_field",yS.indexes=["view_uuid"],mS([tE()],yS.prototype,"view_uuid"),mS([tE()],yS.prototype,"field_uuid"),mS([tE()],yS.prototype,"group_uuid"),mS([tE()],yS.prototype,"name"),mS([tE()],yS.prototype,"size"),mS([tE()],yS.prototype,"display_type"),mS([tE()],yS.prototype,"required"),mS([tE()],yS.prototype,"hidden");var _S=Object.defineProperty,kS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&_S(t,n,i),i},CS=function(e){function t(){return Ub(this,t),bS(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function ES(e,t,n){return t=P_(t),D_(e,OS()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function OS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(OS=function(){return!!e})()}CS.table="view",kS([tE()],CS.prototype,"id"),kS([tE()],CS.prototype,"type"),kS([tE()],CS.prototype,"name"),kS([tE()],CS.prototype,"desc");var SS=Object.defineProperty,xS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&SS(t,n,i),i},jS=function(e){function t(){return Ub(this,t),ES(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function IS(e,t,n){return t=P_(t),D_(e,RS()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function RS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(RS=function(){return!!e})()}jS.table="view_record",jS.indexes=["view_uuid"],xS([tE()],jS.prototype,"view_uuid"),xS([tE()],jS.prototype,"record_uuid"),xS([tE()],jS.prototype,"group_item_key"),xS([tE()],jS.prototype,"hidden");var AS=Object.defineProperty,DS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&AS(t,n,i),i},PS=function(e){function t(){return Ub(this,t),IS(this,t,arguments)}return F_(t,e),Wb(t)}(TE);function MS(e,t,n){return t=P_(t),D_(e,TS()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function TS(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(TS=function(){return!!e})()}PS.table="view_share",PS.indexes=["view_uuid"],DS([tE()],PS.prototype,"view_uuid"),DS([tE()],PS.prototype,"src"),DS([tE()],PS.prototype,"status");var FS=Object.defineProperty,NS=function(e,t,n,r){for(var o,i=void 0,a=e.length-1;a>=0;a--)(o=e[a])&&(i=o(t,n,i)||i);return i&&FS(t,n,i),i},VS=function(e){function t(){return Ub(this,t),MS(this,t,arguments)}return F_(t,e),Wb(t)}(TE);VS.table="cell",VS.indexes=["field_uuid","record_uuid"],VS.ignoreColumns=["uuid"],NS([tE()],VS.prototype,"field_uuid"),NS([tE()],VS.prototype,"field_type"),NS([tE()],VS.prototype,"record_uuid"),NS([tE()],VS.prototype,"format_value"),NS([tE()],VS.prototype,"key_value"),NS([tE()],VS.prototype,"verify"),NS([tE()],VS.prototype,"verify_message"),NS([tE()],VS.prototype,"by_system");var LS=Object.defineProperty,BS=Object.getOwnPropertyDescriptor,$S=function(e,t,n,r){for(var o,i=r>1?void 0:r?BS(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&LS(t,n,i),i},zS=function(){return Wb((function e(){Ub(this,e)}),[{key:"cellModel",get:function(){return this._modelService.getModel(VS.table)}},{key:"fieldBooleanModel",get:function(){return this._modelService.getModel($E.table)}},{key:"fieldDateModel",get:function(){return this._modelService.getModel(WE.table)}},{key:"fieldModel",get:function(){return this._modelService.getModel(JE.table)}},{key:"fieldNumberModel",get:function(){return this._modelService.getModel(nO.table)}},{key:"fieldOptionModel",get:function(){return this._modelService.getModel(lO.table)}},{key:"fieldSelectModel",get:function(){return this._modelService.getModel(fO.table)}},{key:"fieldStringModel",get:function(){return this._modelService.getModel(mO.table)}},{key:"fieldUriModel",get:function(){return this._modelService.getModel(kO.table)}},{key:"filterModel",get:function(){return this._modelService.getModel(xO.table)}},{key:"groupModel",get:function(){return this._modelService.getModel(DO.table)}},{key:"groupItemModel",get:function(){return this._modelService.getModel(NO.table)}},{key:"recordModel",get:function(){return this._modelService.getModel(zO.table)}},{key:"sortModel",get:function(){return this._modelService.getModel(GO.table)}},{key:"statModel",get:function(){return this._modelService.getModel(ZO.table)}},{key:"tableModel",get:function(){return this._modelService.getModel(rS.table)}},{key:"userModel",get:function(){return this._modelService.getModel(uS.table)}},{key:"viewConfigModel",get:function(){return this._modelService.getModel(pS.table)}},{key:"viewFieldModel",get:function(){return this._modelService.getModel(yS.table)}},{key:"viewModel",get:function(){return this._modelService.getModel(CS.table)}},{key:"viewRecordModel",get:function(){return this._modelService.getModel(jS.table)}},{key:"viewShareModel",get:function(){return this._modelService.getModel(PS.table)}}])}();$S([Xs(ME)],zS.prototype,"_modelService",2),zS=$S([Ys()],zS);var US=Object.defineProperty,HS=Object.getOwnPropertyDescriptor,qS=function(){return Wb((function e(){Ub(this,e)}),[{key:"currentUser",get:function(){return this._user}},{key:"setCurrentUser",value:function(e){e.uuid||(e.uuid=e.uid),this._user=e}}])}();function WS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}qS=function(e,t,n,r){for(var o,i=r>1?void 0:r?HS(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&US(t,n,i),i}([Ys()],qS);var GS=Object.defineProperty,KS=Object.getOwnPropertyDescriptor,YS=function(e,t,n,r){for(var o,i=r>1?void 0:r?KS(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&GS(t,n,i),i},XS=function(){return Wb((function e(){Ub(this,e)}),[{key:"getViewConfig",value:function(e){return this._model.viewConfigModel.findOne({view_uuid:e})}},{key:"create",value:function(e){var t,n=this._model.viewModel.findById(e);if(n){if(n.get("type")===BC.CARD){var r=this._model.fieldModel.findOne({type:bC.IMAGE});return this._model.viewConfigModel.create({view_uuid:n.get("uuid"),show_field_name:!1,cover_field_uuid:(null==r?void 0:r.get("uuid"))||null,cover_display:AC.Clip})}if(n.get("type")===BC.KANBAN)return this._model.viewConfigModel.create({view_uuid:n.get("uuid"),show_field_name:!1});if(n.get("type")===BC.CALENDAR){var o=this._model.fieldModel.findOne({type:bC.DATE}),i=this._model.fieldModel.findOne({type:bC.TEXT}),a=this._model.fieldModel.find();return this._model.viewConfigModel.create({view_uuid:n.get("uuid"),start_date_field_uuid:(null==o?void 0:o.get("uuid"))||null,end_date_field_uuid:(null==o?void 0:o.get("uuid"))||null,active_date:Mw().format("YYYY-MM-DD"),date_title_field_uuid:(null==i?void 0:i.get("uuid"))||(null==(t=a.get(0))?void 0:t.get("uuid"))||null,show_lunar:!1,date_color_type:PC.CUSTOM,date_color:null})}return this._model.viewConfigModel.create({view_uuid:n.get("uuid")})}}},{key:"update",value:function(e,t){if(e)return this._model.viewConfigModel.upsert({view_uuid:e},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WS(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({view_uuid:e},t))}},{key:"copy",value:function(e,t){var n=this.getViewConfig(e);if(n){var r=n.toJSON();delete r.uuid,r.view_uuid=t,this._model.viewConfigModel.create(r)}}},{key:"refresh",value:function(e){var t,n=this.getViewConfig(e);if(!n)return this.create(e);var r=this._model.fieldModel.find(),o=C_(r,(function(e,t){return e[t.get("uuid")]=t.get("type"),e}),{}),i=o[(null==n?void 0:n.get("cover_field_uuid"))||""];if(n&&n.get("cover_field_uuid")&&(!i||i!==bC.IMAGE)){var a=w_(r,(function(e){return e.get("type")===bC.IMAGE}));a?this.update(e,{cover_field_uuid:a.get("uuid")}):this.update(e,{cover_field_uuid:null})}var l=o[(null==n?void 0:n.get("start_date_field_uuid"))||""];if(!l||!zC.isDateLike(l)){var u=w_(r,(function(e){return e.get("type")===bC.DATE}));u?this.update(e,{start_date_field_uuid:u.get("uuid")}):this.update(e,{start_date_field_uuid:null})}var c=o[(null==n?void 0:n.get("end_date_field_uuid"))||""];if(!c||!zC.isDateLike(c)){var s=w_(r,(function(e){return e.get("type")===bC.DATE}));s?this.update(e,{end_date_field_uuid:s.get("uuid")}):this.update(e,{end_date_field_uuid:null})}if(!o[(null==n?void 0:n.get("date_title_field_uuid"))||""]){var d=w_(r,(function(e){return e.get("type")===bC.TEXT}));this.update(e,{date_title_field_uuid:(null==d?void 0:d.get("uuid"))||(null==(t=r.get(0))?void 0:t.get("uuid"))||null})}var f=null==n?void 0:n.get("date_color_type"),p=o[(null==n?void 0:n.get("date_color"))||""];f===PC.FOLLOW_FIELD&&(!p||!zC.isSelect(p))&&this.update(e,{date_color:null})}},{key:"remove",value:function(e){this._model.viewConfigModel.remove({view_uuid:e})}}])}();YS([Xs(zS)],XS.prototype,"_model",2),XS=YS([Ys()],XS);var JS=Object.defineProperty,ZS=Object.getOwnPropertyDescriptor,QS=function(){return Wb((function e(){Ub(this,e),this._fieldMap=new Map}),[{key:"registerField",value:function(e){this._fieldMap.set(e.type,e)}},{key:"getValueModel",value:function(e){var t;return null==(t=this.getValueField(e))?void 0:t.model}},{key:"getValueField",value:function(e){return this._fieldMap.get(e)}}])}();function ex(e,t,n){return t=P_(t),D_(e,tx()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function tx(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(tx=function(){return!!e})()}QS=function(e,t,n,r){for(var o,i=r>1?void 0:r?ZS(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&JS(t,n,i),i}([Ys()],QS);var nx=Object.defineProperty,rx=Object.getOwnPropertyDescriptor,ox=function(e,t,n,r){for(var o,i=r>1?void 0:r?rx(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&nx(t,n,i),i},ix=function(e){function t(){var e;return Ub(this,t),(e=ex(this,t,arguments))._onCellChange=e._register(new ck),e.onCellChange=e._onCellChange.event,e}return F_(t,e),Wb(t,[{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);function ax(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return lx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lx(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function lx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ox([Vs()],ix.prototype,"destroy",1),ix=ox([Ys()],ix);var ux=Object.defineProperty,cx=Object.getOwnPropertyDescriptor,sx=function(e,t,n,r){for(var o,i=r>1?void 0:r?cx(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ux(t,n,i),i},dx=function(){return Wb((function e(){Ub(this,e)}),[{key:"_notifyCellChange",value:function(e,t){this._eventService._onCellChange.emit({fieldId:e,recordId:t,cellValue:this.getCell(e,t)})}},{key:"setCell",value:function(e,t,n){var r,o,i=n.fieldType,a=this._model.fieldModel.findById(e),l=null==a?void 0:a.get("config");i||(i=null==a?void 0:a.get("type")),null==(o=null==(r=this._fieldRegistry.getValueField(i))?void 0:r.setCell)||o.call(r,e,t,n,l),this.updateRecord(t),this._notifyCellChange(e,t)}},{key:"bulkSetCell",value:function(e){var t,n,r=this;if(0!==e.length){var o=e[0].fieldType,i=e[0].fieldId,a=this._model.fieldModel.findById(i),l=null==a?void 0:a.get("config");o||(o=null==a?void 0:a.get("type")),null==(n=null==(t=this._fieldRegistry.getValueField(o))?void 0:t.bulkSetCell)||n.call(t,e,l),e.forEach((function(e){r.updateRecord(e.recordId),r._notifyCellChange(e.fieldId,e.recordId)}))}}},{key:"updateRecord",value:function(e){var t=this._model.fieldModel.find({type:bC.UPDATED_AT});if(t.length>0){var n,r=ax(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;this.updateRecordUpdatedAt(o.get("uuid"),e)}}catch(e){r.e(e)}finally{r.f()}}var i=this._model.fieldModel.find({type:bC.MODIFIER_ID});if(i.length>0){var a,l=ax(i);try{for(l.s();!(a=l.n()).done;){var u=a.value;this.updateRecordModifierId(u.get("uuid"),e)}}catch(e){l.e(e)}finally{l.f()}}}},{key:"updateRecordUpdatedAt",value:function(e,t){this._model.recordModel.update({uuid:t},{updated_at:+new Date}),this._notifyCellChange(e,t)}},{key:"updateRecordModifierId",value:function(e,t){var n;this._model.recordModel.update({uuid:t},{modifier_id:null==(n=this._contextService.currentUser)?void 0:n.uid}),this._notifyCellChange(e,t)}},{key:"removeByRecordId",value:function(e,t){var n;if(0!==(n=t?this._model.fieldModel.find({uuid:t}):this._model.fieldModel.find()).length){var r=[];if(e)Array.isArray(e)?r=e:r.push(e);else r=E_(this._model.recordModel.find(),(function(e){return e.get("uuid")}));var o,i=ax(n);try{for(i.s();!(o=i.n()).done;){var a=o.value,l=this._fieldRegistry.getValueModel(a.get("type"));if(!l)return;var u={field_uuid:a.get("uuid"),record_uuid:r};l.remove(u),this._model.cellModel.remove(u)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"getFieldCells",value:function(e){if(!this._model.fieldModel.findById(e))return[];var t,n=[],r=ax(this._model.recordModel.find());try{for(r.s();!(t=r.n()).done;){var o=t.value,i=this.getCell(e,o.get("uuid"));i&&n.push(i)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"getFieldFormatValues",value:function(e,t){var n,r,o,i,a,l,u,c,s=this,d=this._model.fieldModel.findById(e),f=null==d?void 0:d.get("config"),p=null==d?void 0:d.get("type");if(!p)return[];t=t||E_(this._model.recordModel.find(),(function(e){return e.get("uuid")}));var h=this._fieldRegistry.getValueField(p);if(!h)return[];var v,g=this._model.cellModel.find({field_uuid:e}),m=null==(n=h.model)?void 0:n.find({field_uuid:e}),y=C_(g,(function(e,t){return e[t.get("record_uuid")]=t,e}),{}),b=m?C_(m,(function(e,t){return e[t.get("record_uuid")]||(e[t.get("record_uuid")]=[]),e[t.get("record_uuid")].push(t),e}),{}):{},w=[],_=ax(t);try{var k=function(){var t=v.value;if(zC.isSystemType(p))w.push({recordId:t,formatValue:s.getCellFormattedValue(e,t,f)});else if(y[t])w.push({recordId:t,formatValue:null==(r=y[t])?void 0:r.get("format_value")});else{var n=zC.isMultiple(p)?zC.isMultiSelect(p)?null==(o=b[t])?void 0:o.map((function(e){return e.get("value")})):null==(i=b[t])?void 0:i.map((function(e){return e.toJSON()})):zC.isUri(p)?null==(l=null==(a=b[t])?void 0:a[0])?void 0:l.toJSON():null==(c=null==(u=b[t])?void 0:u[0])?void 0:c.get("value");w.push({recordId:t,formatValue:null==h?void 0:h.formatted(n,void 0,f)}),cw((function(){var r;null==(r=h.upsertModelCell)||r.call(h,e,t,n,!0,f)}))}};for(_.s();!(v=_.n()).done;)k()}catch(e){_.e(e)}finally{_.f()}return w}},{key:"getFieldKeyValues",value:function(e,t){var n,r,o,i,a,l,u,c,s=this,d=this._model.fieldModel.findById(e),f=null==d?void 0:d.get("type"),p=null==d?void 0:d.get("config");if(!f)return[];t=t||E_(this._model.recordModel.find(),(function(e){return e.get("uuid")}));var h=this._fieldRegistry.getValueField(f);if(!h)return[];var v,g=this._model.cellModel.find({field_uuid:e}),m=null==(n=h.model)?void 0:n.find({field_uuid:e}),y=C_(g,(function(e,t){return e[t.get("record_uuid")]=t,e}),{}),b=m?C_(m,(function(e,t){return e[t.get("record_uuid")]||(e[t.get("record_uuid")]=[]),e[t.get("record_uuid")].push(t),e}),{}):{},w=[],_=ax(t);try{var k=function(){var t=v.value;if(zC.isSystemType(f))w.push({recordId:t,keyValue:s.getCellKeyValue(e,t)});else if(y[t])w.push({recordId:t,keyValue:null==(r=y[t])?void 0:r.get("key_value")});else{var n=zC.isMultiple(f)?zC.isMultiSelect(f)?null==(o=b[t])?void 0:o.map((function(e){return e.get("value")})):null==(i=b[t])?void 0:i.map((function(e){return e.toJSON()})):zC.isUri(f)?null==(l=null==(a=b[t])?void 0:a[0])?void 0:l.toJSON():null==(c=null==(u=b[t])?void 0:u[0])?void 0:c.get("value");w.push({recordId:t,keyValue:null==h?void 0:h.keyValue(n)}),cw((function(){var r;null==(r=h.upsertModelCell)||r.call(h,e,t,n,!0,p)}))}};for(_.s();!(v=_.n()).done;)k()}catch(e){_.e(e)}finally{_.f()}return w}},{key:"getViewRecordCells",value:function(e,t){var n,r,o=this;if(null==t&&(t=e,e=null),!this._model.recordModel.findById(t))return new g_;var i=new g_,a={},l=function(e){if(a[e])return a[e];var t=o._model.fieldModel.findById(e),n=null==t?void 0:t.get("type");if(n){var r=o._fieldRegistry.getValueField(n);return a[e]=r,r}};if(e){var u,c=ax(this._model.viewFieldModel.find({view_uuid:e}));try{for(c.s();!(u=c.n()).done;){var s=u.value;if(!s.get("hidden")){var d=s.get("field_uuid"),f=this._model.fieldModel.findById(d),p=null==f?void 0:f.get("config"),h=null==(n=l(d))?void 0:n.getCell(d,t,p);h&&i.push([h])}}}catch(e){c.e(e)}finally{c.f()}}else{var v,g=ax(this._model.viewFieldModel.find());try{for(g.s();!(v=g.n()).done;){var m=v.value.get("field_uuid"),y=this._model.fieldModel.findById(m),b=null==y?void 0:y.get("config"),w=null==(r=l(m))?void 0:r.getCell(m,t,b);w&&i.push([w])}}catch(e){g.e(e)}finally{g.f()}}return i}},{key:"getRecordCells",value:function(e){if(!this._model.recordModel.findById(e))return new g_;var t,n=this._model.fieldModel.find(),r=new g_,o=ax(n);try{for(o.s();!(t=o.n()).done;){var i=t.value,a=this.getCell(i.get("uuid"),e);a&&r.push([a])}}catch(e){o.e(e)}finally{o.f()}return r}},{key:"getCell",value:function(e,t){var n=this._model.fieldModel.findById(e),r=null==n?void 0:n.get("type");if(!r)return null;var o=this._fieldRegistry.getValueField(r),i=null==n?void 0:n.get("config");return null==o?void 0:o.getCell(e,t,i)}},{key:"getCellFormattedValue",value:function(e,t,n){var r=this._model.fieldModel.findById(e);if(!r)return"";var o=this._fieldRegistry.getValueField(r.get("type"));return o?o.getCellFormattedValue(e,t,n):""}},{key:"getCellKeyValue",value:function(e,t){var n=this._model.fieldModel.findById(e);if(!n)return null;var r=this._fieldRegistry.getValueField(n.get("type"));if(!r)return null;var o=null==n?void 0:n.get("config");return r.getCellKeyValue(e,t,o)}},{key:"keyValue",value:function(e){if(!e||null==e||!e.value)return"";var t=this._model.fieldModel.findById(e.fieldId);if(!t)return"";var n=this._fieldRegistry.getValueField(t.get("type"));return null==n?void 0:n.keyValue(e.value)}},{key:"groupValue",value:function(e){if(!e||null==e||!e.value)return"";var t=this._model.fieldModel.findById(e.fieldId);if(!t)return"";var n=this._fieldRegistry.getValueField(t.get("type"));return t.get("type")===bC.DATE?null==n?void 0:n.formatted(e.value,e.fieldId,t.get("config")):null==n?void 0:n.keyValue(e.value)}},{key:"copy",value:function(e,t,n,r){var o=this.getCell(e,t);o&&this.setCell(n,r,o)}},{key:"updateOrder",value:function(e){var t=e.fieldId,n=e.fieldType,r=e.recordId,o=e.sourceValueId,i=e.targetValueId,a=this._fieldRegistry.getValueModel(n);if(a){var l=a.find({field_uuid:t,record_uuid:r}),u=k_(l,(function(e){return e.get("uuid")===o})),c=k_(l,(function(e){return e.get("uuid")===i})),s={},d=l.get(u),f=l.get(c);f&&(s={uuid:i,field_uuid:f.get("field_uuid"),record_uuid:f.get("record_uuid")}),u<c?a.moveAfter(s,{uuid:o,field_uuid:d.get("field_uuid"),record_uuid:d.get("record_uuid")}):a.moveBefore(s,{uuid:o,field_uuid:d.get("field_uuid"),record_uuid:d.get("record_uuid")}),this._notifyCellChange(t,r)}}}])}();sx([Xs(zS)],dx.prototype,"_model",2),sx([Xs(QS)],dx.prototype,"_fieldRegistry",2),sx([Xs(ix)],dx.prototype,"_eventService",2),sx([Xs(qS)],dx.prototype,"_contextService",2),dx=sx([Ys()],dx);var fx=Ts.defineToken("CellEditContribution"),px=Object.defineProperty,hx=Object.getOwnPropertyDescriptor,vx=function(e,t,n,r){for(var o,i=r>1?void 0:r?hx(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&px(t,n,i),i},gx=function(){return Wb((function e(){Ub(this,e)}),[{key:"getProvider",value:function(){var e,t=this.userProvider.getContributions(),n=t[t.length-1];return null==(e=null==n?void 0:n.registerCellEdit)?void 0:e.call(n)}}])}();vx([bd(fx)],gx.prototype,"userProvider",2),gx=vx([Ys()],gx);var mx=Object.defineProperty,yx=Object.getOwnPropertyDescriptor,bx=function(e,t,n,r){for(var o,i=r>1?void 0:r?yx(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&mx(t,n,i),i},wx=function(){return Wb((function e(){Ub(this,e)}),[{key:"provider",get:function(){return this._cellEditRegistry.getProvider()}},{key:"setCell",value:function(e){var t;return null==(t=this.provider)?void 0:t.setCell(e)}}])}();bx([Xs(gx)],wx.prototype,"_cellEditRegistry",2),wx=bx([Ys()],wx);var _x=pd().contribution(fx).register(gx).register(wx);function kx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kx(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ex=Object.defineProperty,Ox=Object.getOwnPropertyDescriptor,Sx=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ox(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Ex(t,n,i),i},xx=function(){return Wb((function e(){Ub(this,e)}),[{key:"changeCellType",value:function(e,t,n,r,o){var i,a,l,u,c=this._fieldRegistry.getValueField(t),s=this._fieldRegistry.getValueField(n);if(c&&s){var d=null;if(c.baseType!==s.baseType||c.type===bC.TEXT){var f=c.formatted(e.value,r);d=zC.isSelectLike(s.type)&&!o?s.transform(f,r):s.transform(f,o)}else if(zC.isUri(s.type)){var p=e.value;zC.isMultiple(c.type)&&!zC.isMultiple(s.type)&&(p=(null==e?void 0:e.value)[0]),d=s.transform(p)}else if(zC.isSelectLike(s.type)){var h=e.value,v=e.formatValue||"";if(zC.isMultiple(c.type)&&!zC.isMultiple(s.type)&&(h=null==(i=null==e?void 0:e.value)?void 0:i[0],v=(null==(a=null==e?void 0:e.formatValue)?void 0:a.split(",")[0])||""),zC.isMultiple(c.type)&&zC.isMultiple(s.type)&&r&&o){var g=(null==s?void 0:s.getFieldOptionName(h,r))||[];0===g.length&&(g=(null==v?void 0:v.split(","))||[]),d=s.transform(g,o)}else if(r&&o&&r!==o){var m=c.formatted(h,r);m||(m=v),d=s.transform(m,o)}else{var y=ww(r)?o:void 0;d=s.transform(h,y)}}else d=s.transform(null==e?void 0:e.value);if(null===d)return void(c.model&&c.model.remove({field_uuid:e.fieldId,record_uuid:e.recordId}));if(s.validate(d.value)){var b=Cx(Cx({},e),{},{value:d.value});if(null!=(l=this._cellEditService)&&l.provider)if(!this._cellEditService.setCell({cells:[b]}))return;e.fieldId&&e.recordId&&(null==(u=s.setCell)||u.call(s,e.fieldId,e.recordId,b),this._eventService._onCellChange.emit({fieldId:e.fieldId,recordId:e.recordId,cellValue:b}))}}}}])}();function jx(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ix(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ix(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Ix(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Sx([Xs(QS)],xx.prototype,"_fieldRegistry",2),Sx([Xs(wx)],xx.prototype,"_cellEditService",2),Sx([Xs(ix)],xx.prototype,"_eventService",2),xx=Sx([Ys()],xx);var Rx=Object.defineProperty,Ax=Object.getOwnPropertyDescriptor,Dx=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ax(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Rx(t,n,i),i},Px=function(){return Wb((function e(){Ub(this,e)}),[{key:"_notifyCellChange",value:function(e,t){this._eventService._onCellChange.emit({fieldId:e,recordId:t,cellValue:this._cellService.getCell(e,t)})}},{key:"getFields",value:function(){var e=this,t=this._model.fieldModel.find(),n=new g_;return t.forEach((function(t){var r=new m_(t.toJSON()),o=r.get("type");if(zC.isSelectLike(o)){var i=e.getFieldOptions(t.get("uuid"));null==r||r.set("options",i)}n.push([r])})),n}},{key:"getField",value:function(e){var t=this._model.fieldModel.findOne({uuid:e});if(t){var n=new m_(t.toJSON()),r=n.get("type");if(zC.isSelectLike(r)){var o=this.getFieldOptions(n.get("uuid"));null==n||n.set("options",o)}return n}}},{key:"getFieldDetail",value:function(e){var t=this._model.fieldModel.findOne({uuid:e});return t?{field:t,options:this.getFieldOptions(e)}:null}},{key:"getFieldOption",value:function(e){return this._model.fieldOptionModel.findOne({uuid:e})}},{key:"getFieldOptions",value:function(e){return this._model.fieldOptionModel.find({field_uuid:e})}},{key:"getFieldOptionName",value:function(e){var t=this,n=e.split(",");if(Array.isArray(n)){var r=[];return n.forEach((function(e){var n=t._model.fieldOptionModel.findOne({uuid:e});n&&r.push(n.get("name"))})),r.join(",")}var o=this._model.fieldOptionModel.findOne({uuid:e});return o?o.get("name"):""}},{key:"create",value:function(e){var t=this._model.fieldModel.create({name:e.name,type:e.type,color:e.color,config:e.config,uuid:e.uuid,multiple:!!e.multiple});if(e.options){var n,r=jx(e.options);try{for(r.s();!(n=r.n()).done;){var o=n.value;this._model.fieldOptionModel.create({uuid:o.uuid,field_uuid:t.uuid,name:o.name.slice(0,lO.MAX_LENGTH),color:o.color})}}catch(e){r.e(e)}finally{r.f()}}return t}},{key:"remove",value:function(e){this._model.fieldModel.remove({uuid:e}),this._model.fieldOptionModel.remove({field_uuid:e})}},{key:"removeAll",value:function(){var e=E_(this._model.fieldModel.find(),(function(e){return e.get("uuid")}));return this._model.fieldModel.remove({uuid:e}),this._model.fieldOptionModel.remove({field_uuid:e})}},{key:"update",value:function(e){var t,n,r=e.uuid;if(this._model.fieldModel.update({uuid:r},e),e.config&&e.config.date_format){var o,i=this._model.recordModel.find(),a=null==(t=this._model.tableModel.find().get(0))?void 0:t.get("active_view_uuid"),l=this._model.groupModel.findOne({view_uuid:a}),u=l&&l.get("field_uuid")===r,c=jx(i);try{for(c.s();!(o=c.n()).done;){var s=o.value,d=this._model.fieldModel.findById(r);if(!d)return;var f=s.get("uuid"),p=null==d?void 0:d.get("config"),h=null==(n=this._fieldRegistry.getValueField(d.get("type")))?void 0:n.getCellFormattedValue(r,f,p);this._model.cellModel.update({field_uuid:r,record_uuid:f},{format_value:h}),u&&this._model.viewRecordModel.update({record_uuid:f},{group_item_key:h}),this._notifyCellChange(r,f)}}catch(e){c.e(e)}finally{c.f()}}}},{key:"createFieldOption",value:function(e,t,n){if(!this._model.fieldModel.findOne({uuid:e}))throw new Error(uw("不存在对应字段"));if(!t.name)throw new Error(uw("选项名不能为空"));if(t.name.length>lO.MAX_LENGTH)throw new Error(uw("选项名不能超过最大长度限制"));if(O_(this._model.fieldOptionModel.find({field_uuid:e}),(function(e){return e.get("name")===t.name})))throw new Error(uw("已存在该选项，不可重复创建！"));var r=this._model.fieldOptionModel.create({uuid:t.uuid,field_uuid:e,name:t.name,color:t.color});if(t.users){var o,i=jx(t.users);try{for(i.s();!(o=i.n()).done;){var a=o.value;this._model.userModel.upsert({uid:a.uid},{uid:a.uid,login:a.login,work_id:a.work_id,name:a.name,icon:a.icon})}}catch(e){i.e(e)}finally{i.f()}}return n&&this._model.fieldOptionModel.moveAfter({uuid:n},{uuid:r.uuid}),this._model.fieldModel.update({uuid:e},{updated_at:(new Date).getTime()}),r}},{key:"updateFieldOption",value:function(e,t){var n=this._model.fieldOptionModel.findOne({uuid:e});if(!n)throw new Error(uw("不存在对应选项"));if(!t.name)throw new Error(uw("选项名不能为空"));if(t.name.length>lO.MAX_LENGTH)throw new Error(uw("选项名不能超过最大长度限制"));if(O_(this._model.fieldOptionModel.find({field_uuid:n.get("field_uuid"),uuid:{$not:e}}),(function(e){return e.get("name")===t.name})))throw new Error(uw("已存在该选项，不可重复创建！"));var r={name:t.name,color:t.color};this._model.fieldOptionModel.update({uuid:n.get("uuid"),field_uuid:n.get("field_uuid")},r),this._model.fieldModel.update({uuid:n.get("field_uuid")},{updated_at:(new Date).getTime()})}},{key:"updateMentionFieldOptionId",value:function(e,t){this._model.fieldOptionModel.update({uuid:e},{uuid:t})}},{key:"updateFieldOptions",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(r.length>0){var o=this._model.fieldSelectModel.find({value:r,field_uuid:e});o.forEach((function(e){n._model.fieldSelectModel.remove({uuid:e.get("uuid")})}));var i,a=jx(o);try{for(a.s();!(i=a.n()).done;){var l=i.value;this._notifyCellChange(e,l.get("record_uuid"))}}catch(e){a.e(e)}finally{a.f()}this._model.fieldOptionModel.remove({uuid:r,field_uuid:e})}t.map((function(t){var n;return{uuid:t.uuid,field_uuid:e,name:(null==(n=t.name)?void 0:n.slice(0,lO.MAX_LENGTH))||"",color:t.color}})).forEach((function(t,r){var o=n._model.fieldOptionModel.find({field_uuid:e}),i=k_(o,(function(e){return e.get("uuid")===t.uuid}));if(n._model.fieldOptionModel.update({uuid:t.uuid},t),r===i){var a=o.get(i);(null!=t.name&&t.name!==a.get("name")||null!=t.color&&t.color!==a.get("color"))&&n._model.fieldOptionModel.update({uuid:t.uuid},t)}else if(-1===i)if(0===r)n._model.fieldOptionModel.createBefore(null,t);else{var l=o.get(r-1);n._model.fieldOptionModel.createAfter({uuid:l.get("uuid")},t)}else if(0===r)n._model.fieldOptionModel.moveBefore(null,t);else{var u=o.get(r-1);n._model.fieldOptionModel.moveAfter(null==u?void 0:u.toJSON(),t)}})),this._model.fieldModel.update({uuid:e},{updated_at:(new Date).getTime()})}},{key:"updateFieldOptionOrder",value:function(e,t,n){if(t!==n){var r=this._model.fieldOptionModel.find({field_uuid:e}),o=k_(r,(function(e){return e.get("uuid")===t})),i=k_(r,(function(e){return e.get("uuid")===n})),a=r.get(i),l={};a&&(l={field_uuid:e,uuid:a.get("uuid")}),o<i?this._model.fieldOptionModel.moveAfter(l,{uuid:t,field_uuid:e}):this._model.fieldOptionModel.moveBefore(l,{uuid:t,field_uuid:e}),this._model.fieldModel.update({uuid:e},{updated_at:(new Date).getTime()})}}},{key:"removeFieldOption",value:function(e){var t=this._model.fieldOptionModel.findOne({uuid:e});if(t){var n=t.get("field_uuid");this._model.fieldOptionModel.remove({uuid:e,field_uuid:n}),this._model.fieldSelectModel.remove({field_uuid:n,value:e}),this._model.fieldModel.update({uuid:n},{updated_at:(new Date).getTime()})}}},{key:"changeFieldType",value:function(e,t,n,r){if(this._model.fieldModel.update({uuid:e},{type:n}),(null==r?void 0:r[0].fieldType)===n)this._cellService.bulkSetCell(r);else{var o,i=jx(r);try{for(i.s();!(o=i.n()).done;){var a=o.value;this._processService.changeCellType(a,t,n,e)}}catch(e){i.e(e)}finally{i.f()}}}},{key:"clone",value:function(e,t){var n=this._model.fieldModel.findOne({uuid:e});if(n){var r=this._model.fieldOptionModel.find({field_uuid:n.get("uuid")}),o=this._model.fieldModel.create({uuid:t,name:this.getCloneFieldName(n.get("type"),n.get("name")),type:n.get("type"),sub_type:n.get("sub_type"),config:n.get("config"),color:n.get("color"),multiple:n.get("multiple")});return r.length>0&&this._model.fieldOptionModel.bulkCreate(E_(r,(function(e){return{field_uuid:o.uuid,name:e.get("name"),color:e.get("color")}}))),o}}},{key:"getCloneFieldName",value:function(e,t){var n=this._model.fieldModel.find({type:e});return function r(o){var i,a=(t||(null==(i=CC.find((function(t){return t.type===e})))?void 0:i.name))+"-"+uw("复制")+(o>0?" ".concat(o):"");return w_(n,(function(e){return e.get("name")===a}))?r(++o):a}(0)}}])}();function Mx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mx(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fx(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Nx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nx(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Nx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Dx([Xs(dx)],Px.prototype,"_cellService",2),Dx([Xs(xx)],Px.prototype,"_processService",2),Dx([Xs(ix)],Px.prototype,"_eventService",2),Dx([Xs(QS)],Px.prototype,"_fieldRegistry",2),Dx([Xs(zS)],Px.prototype,"_model",2),Px=Dx([Ys()],Px);var Vx=Object.defineProperty,Lx=Object.getOwnPropertyDescriptor,Bx=function(e,t,n,r){for(var o,i=r>1?void 0:r?Lx(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Vx(t,n,i),i},$x=function(){return Wb((function e(){Ub(this,e)}),[{key:"getViewField",value:function(e,t){return this._model.viewFieldModel.findOne({view_uuid:e,field_uuid:t})}},{key:"getViewFields",value:function(e){var t={view_uuid:e};(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0});var n,r=new g_,o=Fx(this._model.viewFieldModel.find(t));try{for(o.s();!(n=o.n()).done;){var i=n.value,a=new m_(i.toJSON());a.set("field",this._fieldService.getField(i.get("field_uuid"))),r.push([a])}}catch(e){o.e(e)}finally{o.f()}return r}},{key:"getViewFieldsCount",value:function(e){var t={view_uuid:e};return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0}),this._model.viewFieldModel.find(t).length}},{key:"getAllViewFields",value:function(e){return this.getViewFields(e,!1)}},{key:"create",value:function(e){var t=e.viewId,n=e.field,r=e.viewField,o=e.sourceFieldId,i=e.direction,a=this._model.viewModel.findOne({uuid:t});if(a){var l=zC.isMultiple(n.type),u=this._fieldService.create({uuid:n.uuid,name:n.name,type:n.type,color:n.color,multiple:l,config:n.config,options:n.options}),c=this._model.viewFieldModel.find({view_uuid:t}),s=k_(c,(function(e){return e.get("field_uuid")===o})),d={uuid:null==r?void 0:r.uuid,size:null==r?void 0:r.size,created_at:null==r?void 0:r.created_at,updated_at:null==r?void 0:r.updated_at,view_uuid:t,field_uuid:u.uuid};return a.get("type")===BC.FORM&&(d.required=!0),this._model.viewFieldModel.create(d),c=this._model.viewFieldModel.find({view_uuid:t}),"before"===i?this._model.viewFieldModel.moveBefore({view_uuid:t,field_uuid:o},{view_uuid:t,field_uuid:n.uuid}):s!==c.length-1&&this._model.viewFieldModel.moveAfter({view_uuid:t,field_uuid:o},{view_uuid:t,field_uuid:n.uuid}),u}}},{key:"copy",value:function(e,t,n){var r,o=[],i=Fx(this.getAllViewFields(e));try{for(i.s();!(r=i.n()).done;){var a=r.value;(!n||!n(a))&&o.push({field_uuid:a.get("field_uuid"),view_uuid:t,name:a.get("name"),size:a.get("size"),display_type:a.get("display_type"),required:a.get("required"),hidden:a.get("hidden")})}}catch(e){i.e(e)}finally{i.f()}this._model.viewFieldModel.bulkCreate(o)}},{key:"insert",value:function(e,t){var n=this._model.viewModel.findOne({uuid:t}),r=this._model.fieldModel.findOne({uuid:e});if(n&&r)return this._model.viewFieldModel.upsert({view_uuid:n.get("uuid"),field_uuid:r.get("uuid")},{view_uuid:n.get("uuid"),field_uuid:r.get("uuid"),hidden:!1})}},{key:"remove",value:function(e,t,n){var r={field_uuid:e,view_uuid:t};if(this._model.viewFieldModel.remove(r),!n)return this._fieldService.remove(e)}},{key:"removeAll",value:function(e){return this._model.viewFieldModel.remove({view_uuid:e}),this._fieldService.removeAll()}},{key:"update",value:function(e,t,n,r){return this._model.viewFieldModel.update({view_uuid:e,field_uuid:t},$b({},n,r))}},{key:"updateOrder",value:function(e,t,n){var r=this._model.viewFieldModel.find({view_uuid:e}),o=k_(r,(function(e){return e.get("field_uuid")===t})),i=n?k_(r,(function(e){return e.get("field_uuid")===n})):0,a=r.get(i);o<i?this._model.viewFieldModel.moveAfter({view_uuid:e,field_uuid:null==a?void 0:a.get("field_uuid")},{view_uuid:e,field_uuid:t}):this._model.viewFieldModel.moveBefore({view_uuid:e,field_uuid:null==a?void 0:a.get("field_uuid")},{view_uuid:e,field_uuid:t})}},{key:"refresh",value:function(e){var t=this.getViewFields(e,!1),n=C_(this._model.fieldModel.find(),(function(e,t){return e[t.get("uuid")]=t.get("type"),e}),{});this._viewConfigService.refresh(e);var r,o=Fx(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;n[i.get("field_uuid")]?delete n[i.get("field_uuid")]:this._model.viewFieldModel.remove({field_uuid:i.get("field_uuid"),view_uuid:i.get("view_uuid")})}}catch(e){o.e(e)}finally{o.f()}var a=Object.keys(n);if(a.length>0){var l,u=Fx(a);try{for(u.s();!(l=u.n()).done;){var c=l.value;this._model.viewFieldModel.create({view_uuid:e,field_uuid:c})}}catch(e){u.e(e)}finally{u.f()}}}},{key:"clone",value:function(e,t,n){var r=this._model.viewFieldModel.findOne({view_uuid:e,field_uuid:t});if(r){var o=this._fieldService.clone(r.get("field_uuid"),n);if(o){var i=this._model.viewFieldModel.create({view_uuid:r.get("view_uuid"),field_uuid:n,size:null==r?void 0:r.get("size"),name:o.name,display_type:r.get("display_type"),required:r.get("required")});return this._model.viewFieldModel.moveAfter({view_uuid:e,field_uuid:t},{view_uuid:e,field_uuid:n}),i}}}},{key:"copyField",value:function(e){var t,n=e.viewId,r=e.uuid,o=e.sourceFieldId,i=this._model.fieldModel.findOne({uuid:o}),a=this.clone(n,o,r),l=this._model.fieldModel.findOne({uuid:a.field_uuid});if(i&&l){var u=this._fieldService.getFieldOptions(o),c=this._fieldService.getFieldOptions(l.get("uuid")),s=new Map,d=new Map;E_(u,(function(e){d.set(e.get("name"),e.get("uuid"))})),E_(c,(function(e){s.set(d.get(e.get("name"))||"",e.get("uuid"))}));var f,p=Fx(this._model.viewRecordModel.find({view_uuid:n}));try{for(p.s();!(f=p.n()).done;){var h=f.value;if(l.get("type")===bC.SELECT||l.get("type")==bC.MULTI_SELECT){var v=l.get("type")==bC.MULTI_SELECT,g=this._cellService.getCell(o,h.get("record_uuid")),m=(v?null==(t=null==g?void 0:g.value)?void 0:t.map((function(e){return s.get(e)})):s.get(null==g?void 0:g.value))||"";this._cellService.setCell(l.get("uuid"),h.get("record_uuid"),Tx(Tx({},g),{},{value:m}))}else this._cellService.copy(o,h.get("record_uuid"),l.get("uuid"),h.get("record_uuid"))}}catch(e){p.e(e)}finally{p.f()}}}}])}();Bx([Xs(zS)],$x.prototype,"_model",2),Bx([Xs(Px)],$x.prototype,"_fieldService",2),Bx([Xs(XS)],$x.prototype,"_viewConfigService",2),Bx([Xs(dx)],$x.prototype,"_cellService",2),$x=Bx([Ys()],$x);var zx=Object.defineProperty,Ux=Object.getOwnPropertyDescriptor,Hx=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ux(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zx(t,n,i),i},qx=function(){return Wb((function e(){Ub(this,e)}),[{key:"getRecords",value:function(){return this._model.recordModel.find()}},{key:"getRecordById",value:function(e){return this._model.recordModel.findById(e)}},{key:"getRecordDesc",value:function(e){var t=this._model.recordModel.findById(e);if(t)return t.get("desc")}},{key:"create",value:function(e){var t,n=null==(t=this._contextService.currentUser)?void 0:t.uid,r={uuid:e.uuid,creator_id:(null==e?void 0:e.modifier_id)||n,modifier_id:(null==e?void 0:e.modifier_id)||n,updated_at:+new Date,created_at:+new Date};return Array.isArray(e.uuid)?this._model.recordModel.bulkCreate(e.uuid.map((function(t){return{uuid:t,creator_id:n,modifier_id:(null==e?void 0:e.modifier_id)||n}}))):(this._model.recordModel.create(r),[r])}},{key:"update",value:function(e,t){if(this._model.recordModel.findById(e))return this._model.recordModel.update({uuid:e},t)}},{key:"bulkCreate",value:function(e){var t,n=null==(t=this._contextService.currentUser)?void 0:t.uid;return this._model.recordModel.bulkCreate(e.map((function(e){return{uuid:e.uuid,creator_id:e.creator_id||n,modifier_id:e.modifier_id||n}})))}},{key:"remove",value:function(e){return this._model.recordModel.remove({uuid:e})}},{key:"removeAll",value:function(){var e=this._model.recordModel.find();return this._model.recordModel.remove({uuid:E_(e,(function(e){return e.get("uuid")}))})}}])}();function Wx(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Gx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gx(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Gx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Hx([Xs(qS)],qx.prototype,"_contextService",2),Hx([Xs(zS)],qx.prototype,"_model",2),qx=Hx([Ys()],qx);var Kx=Object.defineProperty,Yx=Object.getOwnPropertyDescriptor,Xx=function(e,t,n,r){for(var o,i=r>1?void 0:r?Yx(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Kx(t,n,i),i},Jx=function(){return Wb((function e(){Ub(this,e)}),[{key:"getViewGroup",value:function(e){var t=this._model.groupModel.findOne({view_uuid:e});if(t){var n=this._model.fieldModel.findOne({uuid:t.get("field_uuid")});if(!n)return void this._model.groupModel.remove({uuid:t.get("uuid"),view_uuid:e});var r=this._model.fieldOptionModel.find({field_uuid:t.get("field_uuid")});return{group:t,field:n,options:r}}}},{key:"getGroupItems",value:function(e,t){return this._model.groupItemModel.find({view_uuid:e,field_uuid:t})}},{key:"setGroupItemCollapse",value:function(e,t,n,r){this._model.groupItemModel.upsert({view_uuid:e,field_uuid:t,key:n},{view_uuid:e,field_uuid:t,key:n,collapse:r})}},{key:"isGroup",value:function(e){return!!this.getViewGroup(e)}},{key:"create",value:function(e,t){var n=this._model.groupModel.create({view_uuid:e,field_uuid:t.field_uuid,type:t.type});this.refreshGroup(e,n)}},{key:"remove",value:function(e){this._model.groupModel.remove({view_uuid:e}),this._model.viewRecordModel.update({view_uuid:e},{group_item_key:""})}},{key:"update",value:function(e,t){var n=this._model.groupModel.update({view_uuid:e},{field_uuid:t.field_uuid,view_uuid:e,type:t.type});return this.refreshGroup(e,t),n}},{key:"refreshGroup",value:function(e,t){var n,r,o=this._model.viewRecordModel.find({view_uuid:e}),i=E_(o,(function(e){return e.get("record_uuid")})),a=this._fieldService.getField(t.field_uuid),l=(n=(null==a?void 0:a.get("type"))===bC.DATE?this._cellService.getFieldFormatValues(t.field_uuid,i):this._cellService.getFieldKeyValues(t.field_uuid,i)).map((function(e){return e.formatValue||e.keyValue})).filter((function(e){return null!=e})),u=C_(o,(function(e,t){return e[t.get("record_uuid")]=t,e}),{}),c=[],s=Wx(n);try{var d=function(){var e=r.value,t=e.formatValue||e.keyValue,n=u[e.recordId];if(!n)return 1;if((null==n?void 0:n.get("group_item_key"))!=t){var o=c.find((function(e){return e.key===t})),i=n.get("record_uuid");o?o.recordIds.push(i):c.push({key:t,recordIds:[i]})}};for(s.s();!(r=s.n()).done;)d()}catch(e){s.e(e)}finally{s.f()}if(c.length>0){var f,p=Wx(c);try{for(p.s();!(f=p.n()).done;){var h=f.value;this._model.viewRecordModel.update({view_uuid:e,record_uuid:h.recordIds},{group_item_key:h.key}),a&&a.get("type")===bC.MENTION&&this._refreshMentionFieldOption(e,a,t,h.key)}}catch(e){p.e(e)}finally{p.f()}}a&&a.get("type")===bC.MENTION&&this._removeMentionFieldOption(l,a)}},{key:"_refreshMentionFieldOption",value:function(e,t,n,r){if(r&&!O_(this._model.fieldOptionModel.find({field_uuid:t.get("uuid")}),(function(e){return e.get("uuid")===r}))){var o=this._model.viewModel.findOne({uuid:e});this._model.fieldOptionModel.create({field_uuid:n.field_uuid,uuid:r,name:r,temp:(null==o?void 0:o.get("type"))!==BC.KANBAN})}}},{key:"_removeMentionFieldOption",value:function(e,t){var n=this;this._model.fieldOptionModel.find({field_uuid:t.get("uuid")}).forEach((function(t){e.indexOf(t.get("uuid"))<0&&n._model.fieldOptionModel.remove({uuid:t.get("uuid"),temp:!0})}))}},{key:"copy",value:function(e,t){var n=this._model.groupModel.find({view_uuid:e});!n||0===n.length||this._model.groupModel.bulkCreate(E_(n,(function(e){return{view_uuid:t,field_uuid:e.get("field_uuid"),type:e.get("type")}})))}},{key:"createDefaultKanbanViewGroup",value:function(e){var t=this._fieldService.getFields(),n=w_(t,(function(e){return bC.SELECT===e.get("type")}));return n||(n=w_(t,(function(e){return bC.MENTION===e.get("type")}))),this.create(e,{field_uuid:(null==n?void 0:n.get("uuid"))||"",type:MC.ASC}),this.getViewGroup(e)}}])}();function Zx(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Qx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qx(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Qx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Xx([Xs(zS)],Jx.prototype,"_model",2),Xx([Xs(Px)],Jx.prototype,"_fieldService",2),Xx([Xs(dx)],Jx.prototype,"_cellService",2),Jx=Xx([Ys()],Jx);var ej=Object.defineProperty,tj=Object.getOwnPropertyDescriptor,nj=function(){return Wb((function e(){Ub(this,e)}),[{key:"sort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return t=zC.isSelectLike(n.get("type"))?"asc"===e?this.ascSortSelect(t,r):this.descSortSelect(t,r):zC.isNumberLike(n.get("type"))||bC.CHECKBOX===n.get("type")?"asc"===e?this.ascSortNumber(t):this.descSortNumber(t):zC.isDate(n.get("type"))?"asc"===e?this.ascSortDate(t):this.descSortDate(t):zC.isSystemDate(n.get("type"))?"asc"===e?this.ascSortSystemDate(t):this.descSortSystemDate(t):zC.isUri(n.get("type"))||zC.isMentionLike(n.get("type"))?"asc"===e?this.ascSortUri(t):this.descSortUri(t):"asc"===e?this.ascSortText(t):this.descSortText(t)}},{key:"ascSortText",value:function(e){return e.sort((function(e,t){var n=e.option.value||"",r=t.option.value||"";return n.localeCompare(r)}))}},{key:"descSortText",value:function(e){return e.sort((function(e,t){var n=e.option.value||"";return(t.option.value||"").localeCompare(n)}))}},{key:"ascSortNumber",value:function(e){return e.sort((function(e,t){return Number(e.option.value)-Number(t.option.value)}))}},{key:"descSortNumber",value:function(e){return e.sort((function(e,t){return Number(t.option.value)-Number(e.option.value)}))}},{key:"ascSortDate",value:function(e){return e.sort((function(e,t){return i()(e.option.formatValue).unix()-i()(t.option.formatValue).unix()}))}},{key:"descSortDate",value:function(e){return e.sort((function(e,t){return i()(t.option.formatValue).unix()-i()(e.option.formatValue).unix()}))}},{key:"ascSortSystemDate",value:function(e){return e.sort((function(e,t){return i()(e.option.value).unix()-i()(t.option.value).unix()}))}},{key:"descSortSystemDate",value:function(e){return e.sort((function(e,t){return i()(t.option.value).unix()-i()(e.option.value).unix()}))}},{key:"ascSortUri",value:function(e){return e.sort((function(e,t){var n,r,o=null!=(n=e.option.value)&&n.toJSON?e.option.value.toJSON():e.option.value,i=null!=(r=t.option.value)&&r.toJSON?t.option.value.toJSON():t.option.value,a=(Array.isArray(o)?null==o?void 0:o[0].name:o.name)||"",l=(Array.isArray(i)?null==i?void 0:i[0].name:i.name)||"";return a.localeCompare(l)}))}},{key:"descSortUri",value:function(e){return e.sort((function(e,t){var n,r,o=null!=(n=e.option.value)&&n.toJSON?e.option.value.toJSON():e.option.value,i=null!=(r=t.option.value)&&r.toJSON?t.option.value.toJSON():t.option.value,a=(Array.isArray(o)?null==o?void 0:o[0].name:o.name)||"";return((Array.isArray(i)?null==i?void 0:i[0].name:i.name)||"").localeCompare(a)}))}},{key:"ascSortSelect",value:function(e,t){var n=E_(t,(function(e){return e.get("uuid")}));return this._getlistOrderByOptions(e,n)}},{key:"descSortSelect",value:function(e,t){var n=E_(t,(function(e){return e.get("uuid")})).reverse();return this._getlistOrderByOptions(e,n)}},{key:"_getlistOrderByOptions",value:function(e,t){var n,r=t.reduce((function(e,t){return e[t]=[],e}),{}),o=[],i=Zx(e);try{for(i.s();!(n=i.n()).done;){var a=n.value,l=a.option.value;if(l){var u=Array.isArray(l)?l[0]:l;r[u].push(a)}else o.push(a)}}catch(e){i.e(e)}finally{i.f()}var c=[];return t.forEach((function(e){c=c.concat(r[e])})),c=c.concat(o)}}])}();function rj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rj(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ij(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return aj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aj(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function aj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}nj=function(e,t,n,r){for(var o,i=r>1?void 0:r?tj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ej(t,n,i),i}([Ys()],nj);var lj=Object.defineProperty,uj=Object.getOwnPropertyDescriptor,cj=function(e,t,n,r){for(var o,i=r>1?void 0:r?uj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&lj(t,n,i),i},sj=function(){return Wb((function e(){Ub(this,e)}),[{key:"groupViewRecords",value:function(e,t,n){var r,o,i=this,a={},l=this._model.viewModel.findOne({uuid:t.get("view_uuid")}),u=C_(this._model.groupItemModel.find({view_uuid:t.get("view_uuid"),field_uuid:t.get("field_uuid")}),(function(e,t){return e[t.get("key")]=t.get("collapse"),e}),{}),c=ij(e);try{for(c.s();!(o=c.n()).done;){var s=o.value;s.get("group_item_key")?(a[s.get("group_item_key")]=a[s.get("group_item_key")]||[],a[s.get("group_item_key")].push(s)):(a[""]=a[""]||[],a[""].push(s))}}catch(e){c.e(e)}finally{c.f()}var d=[],f=this._fieldService.getField(t.get("field_uuid"));if(d=zC.isSelect(f.get("type"))||zC.isMention(f.get("type"))?E_(n,(function(e){if(!e||!e.get("uuid"))return null;var t=oj(oj({},e.toJSON()),{},{fieldId:e.get("field_uuid"),value:e.get("uuid")});if(zC.isMention(f.get("type"))){var n=i._model.userModel.find({uid:e.get("uuid").split(",")});if(0===n.length)return null;t.value=n}var r=e.get("uuid");return{key:r,option:t,field:f,viewRecords:a[r]||[],collapse:u[r]||!1}})).filter((function(e){return!!e})):Object.keys(a).map((function(e){if(""!==e){var n=a[e][0].get("record_uuid");return{key:e,option:i._cellService.getCell(t.get("field_uuid"),n),field:f,viewRecords:a[e]||[],collapse:u[e]||!1}}})).filter((function(e){return!!e})),(null==f?void 0:f.get("type"))===bC.CHECKBOX&&d.push({key:"",field:f,option:{value:!1},viewRecords:a[""],collapse:u[""]||!1}),(null==l?void 0:l.get("type"))!==BC.KANBAN&&(d=this._groupSortService.sort(t.get("type"),d,f,n)),(null==f?void 0:f.get("type"))!==bC.CHECKBOX&&d.push({key:"",field:f,option:null,viewRecords:a[""],collapse:u[""]||!1}),(null==l?void 0:l.get("type"))===BC.KANBAN){var p=d.findIndex((function(e){return!e.option}));if(p>-1){var h=d.splice(p,1)[0];h.viewRecords&&h.viewRecords.length>0&&d.unshift(h)}var v,g=ij(d);try{for(g.s();!(v=g.n()).done;){null==(r=v.value.viewRecords)||r.reverse()}}catch(e){g.e(e)}finally{g.f()}}return d}}])}();function dj(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return fj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fj(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function fj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}cj([Xs(zS)],sj.prototype,"_model",2),cj([Xs(Px)],sj.prototype,"_fieldService",2),cj([Xs(dx)],sj.prototype,"_cellService",2),cj([Xs(nj)],sj.prototype,"_groupSortService",2),sj=cj([Ys()],sj);var pj=Object.defineProperty,hj=Object.getOwnPropertyDescriptor,vj=function(e,t,n,r){for(var o,i=r>1?void 0:r?hj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&pj(t,n,i),i},gj=function(){return Wb((function e(){Ub(this,e)}),[{key:"getOriginViewRecords",value:function(e){return this._model.viewRecordModel.find({view_uuid:e})}},{key:"getViewRecords",value:function(e){var t={view_uuid:e};return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0}),this._model.viewRecordModel.find(t)}},{key:"getGroupViewRecords",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._groupService.getViewGroup(e),r=this.getViewRecords(e,t);return this._groupRecordService.groupViewRecords(r,n.group,n.options)}},{key:"getViewRecordsDetail",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{filterHidden:!0};Array.isArray(t)||(t=[t]);var o=this._model.viewRecordModel.find({view_uuid:e,record_uuid:t}),i={view_uuid:e};r.filterHidden&&(i.hidden={$not:!0});var a,l=this._model.viewFieldModel.find(i),u=[],c=dj(o);try{var s=function(){var e=a.value,t=n._model.recordModel.findOne({uuid:e.get("record_uuid")});if(!t)return 1;var r=[],o={};o.cellMap=new Map,l.forEach((function(e,i){var a=n._fieldService.getField(e.get("field_uuid"));if(a&&t){var l=n._cellService.getCell(a.get("uuid"),t.get("uuid"));r.push(l),o.cellMap.set(a.get("uuid"),i)}})),o.record=t,o.cells=r,u.push(o)};for(c.s();!(a=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}return u}},{key:"getViewRecordsCount",value:function(e){var t={view_uuid:e};return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0}),(this._model.viewRecordModel.find(t)||[]).length}},{key:"getFlatViewRecords",value:function(e){return this._model.viewRecordModel.find({view_uuid:e,hidden:{$not:!0}})}},{key:"getGroupFlatViewRecords",value:function(e){var t,n=this._groupService.getViewGroup(e),r=this._model.viewRecordModel.find({view_uuid:e,hidden:{$not:!0}}),o=new g_,i=dj(this._groupRecordService.groupViewRecords(r,n.group,n.options));try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.viewRecords){var l,u=dj(a.viewRecords);try{for(u.s();!(l=u.n()).done;){var c=l.value;o.push([c])}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){i.e(e)}finally{i.f()}return o}},{key:"getViewRecordByRecordId",value:function(e,t){return this._model.viewRecordModel.findOne({view_uuid:e,record_uuid:t})}},{key:"getVisibleRecordIds",value:function(e){return E_(this._model.viewRecordModel.find({view_uuid:e}),(function(e){return e.get("record_uuid")}))||[]}},{key:"getFieldRecords",value:function(e,t,n){var r={view_uuid:e,hidden:{$not:!0}};null!=n&&(r.group_item_key=n);var o,i=this._model.viewRecordModel.find(r),a=function(e,t){var n,r=new Map,o=y_(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;r.set(i.get(t),i)}}catch(e){o.e(e)}finally{o.f()}return r}(this._recordService.getRecords(),"uuid"),l=[],u=dj(i);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(c.get("record_uuid")){var s=a.get(c.get("record_uuid"));if(s){var d=this._cellService.getCell(t,s.get("uuid"));d&&l.push({view_uuid:c.get("view_uuid"),record_uuid:c.get("record_uuid"),cells:[d]})}}}}catch(e){u.e(e)}finally{u.f()}return l}},{key:"getExpectedValue",value:function(e,t,n){var r=null;if((e===bC.TEXT||e===bC.SELECT)&&(r=n),zC.isNumberLike(e)&&(r=n?parseFloat(n):""),e===bC.MULTI_SELECT&&(r=(null==n?void 0:n.split(","))||[]),e===bC.MENTION){var o=(null==n?void 0:n.split(","))||[];r=E_(this._model.userModel.find({uid:o}),(function(e){return{uid:e.get("uid"),name:e.get("name"),icon:e.get("icon"),login:e.get("login")}}))}return e===bC.DATE&&(r="yesterday"===n?i()().add(-1,"days").toString():"today"===n?i()(new Date).toString():"tomorrow"===n?i()().add(1,"days").toString():n),e===bC.CHECKBOX&&(r="true"===n),r}},{key:"createEmpty",value:function(e){var t=this,n=e.uuid,r=e.viewId,o=e.viewRecord,i=e.sourceRecordId,a=e.direction,l=e.groupOption,u=e.filter,c=e.modifierId,s=this._recordService.create({uuid:n,modifier_id:c});Array.isArray(s)||(s=[s]);var d,f=dj(s);try{for(f.s();!(d=f.n()).done;){var p=d.value;if(null!=l){var h=l.value;this._cellService.setCell(l.fieldId,p.uuid,{fieldId:l.fieldId,recordId:p.uuid,value:null!=h&&h.toJSON?h.toJSON():h})}if(u){var v=u.field_uuid,g=this._model.fieldModel.findById(v);if(g&&!zC.isSystemType(g.get("type"))){var m=this.getExpectedValue(g.get("type"),u.func,u.expected);m&&this._cellService.setCell(v,p.uuid,{fieldId:v,recordId:p.uuid,value:m})}}}}catch(e){f.e(e)}finally{f.f()}return s.forEach((function(e){var n={uuid:null==o?void 0:o.uuid,created_at:null==o?void 0:o.created_at,updated_at:null==o?void 0:o.updated_at,view_uuid:r,record_uuid:e.uuid};null!=l&&(n.group_item_key=t._cellService.groupValue(l)),i?"after"===a?t._model.viewRecordModel.createAfter({view_uuid:r,record_uuid:i},n):t._model.viewRecordModel.createBefore({view_uuid:r,record_uuid:i},n):t._model.viewRecordModel.create(n)})),s}},{key:"createRecord",value:function(e,t,n){for(var r=this.createEmpty({uuid:n.uuid,viewId:e,direction:"after",sourceRecordId:t}),o=0,i=Object.keys(n);o<i.length;o++){var a=i[o],l=this._fieldService.getField(a);if(l){var u=n[a];Array.isArray(u)||(u=[u]);var c,s=dj(u);try{for(s.s();!(c=s.n()).done;){var d=c.value;this._cellService.setCell(l.get("uuid"),r[0].uuid,d)}}catch(e){s.e(e)}finally{s.f()}}}return r}},{key:"createRecords",value:function(e,t){this._recordService.bulkCreate(t),this._model.viewRecordModel.bulkCreate(t.map((function(t){return{view_uuid:e,record_uuid:t.uuid}})),{validate:!1})}},{key:"copy",value:function(e,t){var n,r=[],o=dj(this._model.viewRecordModel.find({view_uuid:e}));try{for(o.s();!(n=o.n()).done;){var i=n.value;i&&r.push({uuid:fw(32),view_uuid:t,record_uuid:i.get("record_uuid"),hidden:i.get("hidden"),group_item_key:i.get("group_item_key")})}}catch(e){o.e(e)}finally{o.f()}this._model.viewRecordModel.bulkCreate(r)}},{key:"copyRecord",value:function(e){var t=e.uuid,n=e.viewId,r=e.sourceRecordId,o=e.modifierId,i=this._recordService.create({uuid:t,modifier_id:o})[0],a=this._model.viewRecordModel.find({view_uuid:n}),l=k_(a,(function(e){return e.get("record_uuid")===r})),u=a.get(l);if(u){var c,s=dj(this._model.viewFieldModel.find({view_uuid:n}));try{for(s.s();!(c=s.n()).done;){var d=c.value;this._cellService.copy(d.get("field_uuid"),u.get("record_uuid"),d.get("field_uuid"),i.uuid)}}catch(e){s.e(e)}finally{s.f()}this._model.viewRecordModel.create({uuid:fw(32),view_uuid:u.get("view_uuid"),record_uuid:i.uuid,hidden:u.get("hidden"),group_item_key:u.get("group_item_key")}),l!==(a=this._model.viewRecordModel.find({view_uuid:n})).length-1&&this._model.viewRecordModel.moveAfter({view_uuid:n,record_uuid:r},{view_uuid:n,record_uuid:i.uuid})}}},{key:"remove",value:function(e,t){this._model.viewRecordModel.remove({view_uuid:e,record_uuid:t}),this._cellService.removeByRecordId(t),this._recordService.remove(t)}},{key:"removeAll",value:function(e){var t={view_uuid:e};(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(t.hidden={$not:!0});var n=E_(this._model.viewRecordModel.find(t),(function(e){return e.get("record_uuid")}));return this._model.viewRecordModel.remove({view_uuid:e,record_uuid:n}),this._cellService.removeByRecordId(n),this._recordService.remove(n)}},{key:"updateOrder",value:function(e,t,n,r){var o,i,a=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:RC.forward,u=this.getOriginViewRecords(e),c="string"==typeof t?[t]:t,s=u.toArray();null!=r&&(this._model.viewRecordModel.find({view_uuid:e,record_uuid:c}).forEach((function(e){a.updateGroupByViewRecord(e,r)})),s=__(u,(function(e){var t;return e.get("group_item_key")===(null==(t=r.option)?void 0:t.value)})).toArray());var d,f=k_(u,(function(e){return e.get("record_uuid")===c[0]})),p=k_(u,(function(e){return e.get("record_uuid")===n})),h=u.get(p);if(h&&(d={view_uuid:e,record_uuid:h.get("record_uuid")}),l===RC.forward)if(f<=p){if(d||(d={view_uuid:e,record_uuid:s[s.length-1].get("record_uuid")}),d.record_uuid===c[0]){if(1===c.length)return;c=c.slice(1)}this._model.viewRecordModel.moveAfter(d,{view_uuid:e,record_uuid:c})}else{if(d||(d={view_uuid:e,record_uuid:null==(o=s[0])?void 0:o.get("record_uuid")}),d.record_uuid===c[0]){if(1===c.length)return;c=c.slice(1)}this._model.viewRecordModel.moveBefore(d,{view_uuid:e,record_uuid:c})}else if(f<=p){if(d||(d={view_uuid:e,record_uuid:null==(i=s[0])?void 0:i.get("record_uuid")}),d.record_uuid===c[0]){if(1===c.length)return;c=c.slice(1)}this._model.viewRecordModel.moveAfter(d,{view_uuid:e,record_uuid:c})}else{if(d||(d={view_uuid:e,record_uuid:s[s.length-1].get("record_uuid")}),d.record_uuid===c[0]){if(1===c.length)return;c=c.slice(1)}this._model.viewRecordModel.moveBefore(d,{view_uuid:e,record_uuid:c})}}},{key:"updateGroupByViewRecord",value:function(e,t){var n,r;if(e.get("group_item_key")!==(null==(n=null==t?void 0:t.option)?void 0:n.value)){var o=t.field.get("type"),i=this._fieldRegistry.getValueField(o),a=t.field.get("uuid"),l=e.get("record_uuid");this._cellService.removeByRecordId(l,a);var u=null==(r=null==t?void 0:t.option)?void 0:r.value;if(i){var c=i.keyValue(u.toJSON?u.toJSON():u);this._model.viewRecordModel.update({view_uuid:e.get("view_uuid"),record_uuid:e.get("record_uuid")},{group_item_key:c}),this._cellService.setCell(a,l,{fieldId:a,recordId:l,value:(null!=u&&u.toJSON?u.toJSON():u)||""})}else this._model.viewRecordModel.update({view_uuid:e.get("view_uuid"),record_uuid:e.get("record_uuid")},{group_item_key:""})}}}])}();function mj(e,t,n){var r;e=""===e||null===e?0:e,t=""===t||null===t?0:t;try{r=(e=new Mb(e))[n](t).valueOf()}catch{r=NaN}return r}vj([Xs(zS)],gj.prototype,"_model",2),vj([Xs(qx)],gj.prototype,"_recordService",2),vj([Xs(Px)],gj.prototype,"_fieldService",2),vj([Xs(dx)],gj.prototype,"_cellService",2),vj([Xs(Jx)],gj.prototype,"_groupService",2),vj([Xs(QS)],gj.prototype,"_fieldRegistry",2),vj([Xs(sj)],gj.prototype,"_groupRecordService",2),gj=vj([Ys()],gj);var yj=function(e,t){return mj(e,t,"plus")},bj=function(e,t){return mj(e,t,"times")},wj=function(e,t){return isNaN(e)?NaN:""===t||0===parseFloat(t)?1/0:mj(e,t,"div")},_j=function(e,t){return mj(e,t,"lt")};function kj(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Cj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cj(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Cj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ej=Object.defineProperty,Oj=Object.getOwnPropertyDescriptor,Sj=function(){return Wb((function e(){Ub(this,e)}),[{key:"sort",value:function(e,t,n,r){return t=this.ascSortCreatedAt(t),t=zC.isSelectLike(n.get("type"))?"asc"===e?this.ascSortSelect(t,n,r):this.descSortSelect(t,n,r):zC.isNumberLike(n.get("type"))||bC.CHECKBOX===n.get("type")?"asc"===e?this.ascSortNumber(t):this.descSortNumber(t):zC.isDate(n.get("type"))?"asc"===e?this.ascSortDate(t):this.descSortDate(t):"asc"===e?this.ascSortText(t):this.descSortText(t)}},{key:"ascSortCreatedAt",value:function(e){return e.sort((function(e,t){return+new Date(e.created_at)-+new Date(t.created_at)}))}},{key:"ascSortText",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return n.localeCompare(r)}))}},{key:"descSortText",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"";return(t.sortValue||"").localeCompare(n)}))}},{key:"ascSortNumber",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return n===r?0:_j(n,r)?-1:1}))}},{key:"descSortNumber",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return n===r?0:_j(r,n)?-1:1}))}},{key:"ascSortDate",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return i()(n).unix()-i()(r).unix()}))}},{key:"descSortDate",value:function(e){return e.sort((function(e,t){var n=e.sortValue||"",r=t.sortValue||"";return i()(r).unix()-i()(n).unix()}))}},{key:"ascSortSelect",value:function(e,t,n){var r=E_(n,(function(e){return e.get("uuid")}));return this._getViewRecordsOrderByOptions(e,r,t)}},{key:"descSortSelect",value:function(e,t,n){var r=E_(n,(function(e){return e.get("uuid")})).reverse();return this._getViewRecordsOrderByOptions(e,r,t)}},{key:"_getViewRecordsOrderByOptions",value:function(e,t,n){var r,o=t.reduce((function(e,t){return e[t]=[],e}),{}),i=[],a=kj(e);try{for(a.s();!(r=a.n()).done;){var l=r.value;if(zC.isSelect(n.get("type"))&&null!=l.sortValue)o[l.sortValue].push(l);else if(zC.isMultiSelect(n.get("type"))&&0!==l.sortValue.length){var u=l.sortValue.split(",")[0];o[u].push(l)}else i.push(l)}}catch(e){a.e(e)}finally{a.f()}var c=[];return t.forEach((function(e){c=c.concat(o[e])})),c=c.concat(i)}}])}();function xj(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jj(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function jj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Sj=function(e,t,n,r){for(var o,i=r>1?void 0:r?Oj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Ej(t,n,i),i}([Ys()],Sj);var Ij=Object.defineProperty,Rj=Object.getOwnPropertyDescriptor,Aj=function(e,t,n,r){for(var o,i=r>1?void 0:r?Rj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Ij(t,n,i),i},Dj=function(){return Wb((function e(){Ub(this,e)}),[{key:"getViewSort",value:function(e){return this._model.sortModel.findOne({view_uuid:e})}},{key:"isKeepSort",value:function(e){var t=this._model.viewConfigModel.findOne({view_uuid:e});return!(null==t||!t.get("keep_sort"))}},{key:"create",value:function(e,t,n){if(this._fieldService.getField(t.field_uuid)){var r=this._model.sortModel.create({view_uuid:e,field_uuid:t.field_uuid,type:t.type});return this._model.viewConfigModel.update({view_uuid:e},{keep_sort:n}),this.refresh(e),n||this.remove(e),r}}},{key:"remove",value:function(e){var t=this._model.sortModel.remove({view_uuid:e});return this._model.viewConfigModel.update({view_uuid:e},{keep_sort:!1}),this.refresh(e),t}},{key:"update",value:function(e,t,n){var r=this._model.sortModel.upsert({view_uuid:e},{view_uuid:e,field_uuid:t.field_uuid,type:t.type});return this._model.viewConfigModel.update({view_uuid:e},{keep_sort:n}),this.refresh(e),n||this.remove(e),r}},{key:"copy",value:function(e,t){var n=this._model.sortModel.find({view_uuid:e});!n||0===n.length||this._model.sortModel.bulkCreate(E_(n,(function(e){return{view_uuid:t,field_uuid:e.get("field_uuid"),type:e.get("type")}})))}},{key:"refresh",value:function(e){var t=this._model.viewModel.findOne({uuid:e}),n=this.getViewSort(e);if(n){var r=n.get("type"),o=this._fieldService.getField(n.get("field_uuid"));if(o)if(this._groupService.isGroup(e)){(null==t?void 0:t.get("type"))===BC.KANBAN&&(r&&r!==TC.ASC?n.get("type")===TC.DESC&&(r=TC.ASC):r=TC.DESC);var i,a=[],l=[],u=xj(this._viewRecordService.getGroupViewRecords(e));try{for(u.s();!(i=u.n()).done;){var c=i.value;if(c.viewRecords){var s=this._sortViewRecords(c.viewRecords,r,o);this._model.viewRecordModel.remove({view_uuid:e,record_uuid:s.map((function(e){return e.record_uuid}))}),a=[].concat(Vb(a),Vb(s.map((function(e){return e.record_uuid})))),l=[].concat(Vb(l),Vb(s.map((function(e){return{uuid:e.uuid,hidden:e.hidden,view_uuid:e.view_uuid,record_uuid:e.record_uuid,group_item_key:e.group_item_key}}))))}}}catch(e){u.e(e)}finally{u.f()}a.length>0&&this._model.viewRecordModel.remove({view_uuid:e,record_uuid:a}),l.length>0&&this._model.viewRecordModel.bulkCreate(l)}else{var d=this._model.viewRecordModel.find({view_uuid:e}),f=this._sortViewRecords(d,r,o);this._model.viewRecordModel.remove({view_uuid:e,record_uuid:f.map((function(e){return e.record_uuid}))}),this._model.viewRecordModel.bulkCreate(f.map((function(e){return{uuid:e.uuid,view_uuid:e.view_uuid,hidden:e.hidden,record_uuid:e.record_uuid,group_item_key:e.group_item_key}})))}}}},{key:"_sortViewRecords",value:function(e,t,n){var r=[],o=[],i=E_(e,(function(e){return e.get("record_uuid")})),a=C_(this._model.recordModel.find({uuid:i}),(function(e,t){return e[t.get("uuid")]=t.get("created_at"),e}),{}),l={};if(zC.isSelectLike(null==n?void 0:n.get("type"))){var u=this._cellService.getFieldKeyValues(n.get("uuid"),i);l=u.reduce((function(e,t){return e[t.recordId]=t.keyValue,e}),{})}else{var c=this._cellService.getFieldFormatValues(n.get("uuid"),i);l=c.reduce((function(e,t){return e[t.recordId]=t.formatValue,e}),{})}return e.forEach((function(e){var t=e.get("record_uuid"),i={uuid:e.get("uuid"),hidden:e.get("hidden"),record_uuid:t,view_uuid:e.get("view_uuid"),group_item_key:e.get("group_item_key"),created_at:a[t],sortValue:l[t]};zC.isCheckbox(null==n?void 0:n.get("type"))&&(i.sortValue="true"===i.sortValue?1:0),""===i.sortValue||null==i.sortValue?o.push(i):r.push(i)})),r=this._sortFuncService.sort(t,r,n,this._fieldService.getFieldOptions(n.get("uuid"))),r=[].concat(Vb(r),o)}}])}();Aj([Xs(zS)],Dj.prototype,"_model",2),Aj([Xs(Sj)],Dj.prototype,"_sortFuncService",2),Aj([Xs(gj)],Dj.prototype,"_viewRecordService",2),Aj([Xs(Px)],Dj.prototype,"_fieldService",2),Aj([Xs(dx)],Dj.prototype,"_cellService",2),Aj([Xs(Jx)],Dj.prototype,"_groupService",2),Dj=Aj([Ys()],Dj);var Pj=Object.defineProperty,Mj=Object.getOwnPropertyDescriptor,Tj=function(){return Wb((function e(){Ub(this,e)}),[{key:"equalTo",value:function(e,t){return null===t||e===t}},{key:"notEqualTo",value:function(e,t){return null===t||e!==t}},{key:"greaterThan",value:function(e,t){return null===t||e>t}},{key:"greaterThanOrEqualTo",value:function(e,t){return null===t||e>=t}},{key:"lessThan",value:function(e,t){return null===t||e<t}},{key:"lessThanOrEqualTo",value:function(e,t){return null===t||e<=t}},{key:"startsWith",value:function(e,t){return null===t||"string"==typeof e&&e.startsWith(t)}},{key:"notStartsWith",value:function(e,t){return null===t||"string"==typeof e&&!e.startsWith(t)}},{key:"endsWith",value:function(e,t){return null===t||"string"==typeof e&&e.endsWith(t)}},{key:"notEndsWith",value:function(e,t){return null===t||"string"==typeof e&&!e.endsWith(t)}},{key:"contains",value:function(e,t){return null===t||-1!==e.indexOf(t)}},{key:"notContains",value:function(e,t){return null===t||-1===e.indexOf(t)}},{key:"is",value:function(e,t){return null===t||(Array.isArray(e)?e[0]===t:e===t)}},{key:"isNot",value:function(e,t){if(null===t)return!0;if(!Array.isArray(t))return!e||(Array.isArray(e)?e[0]!==t:e!==t);if(!e||Array.isArray(e)&&e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(!t.includes(e[n]))return!0;return!1}},{key:"isEmpty",value:function(e){return null==e||""===e}},{key:"isNotEmpty",value:function(e){return!this.isEmpty(e)}},{key:"isEmptySelect",value:function(e){return!e||!!Array.isArray(e)&&0===e.length}},{key:"isNotEmptySelect",value:function(e){return!!e&&(!Array.isArray(e)||e.length>0)}},{key:"hasAnyOf",value:function(e,t){if(null===t)return!0;t=Array.isArray(t)?t:[t];for(var n=0;n<t.length;n++)if(Array.isArray(e)){if(e.includes(t[n]))return!0}else if(ou(e,t[n]))return!0;return!1}},{key:"hasAllOf",value:function(e,t){if(null===t)return!0;t=Array.isArray(t)?t:[t];for(var n=0;n<t.length;n++)if(Array.isArray(e)){if(!e.includes(t[n]))return!1}else if(!ou(e,t[n]))return!1;return!0}},{key:"isExactly",value:function(e,t){return null===t||(t=Array.isArray(t)?t:[t],ou(e.sort(),t.sort()))}},{key:"hasNoneOf",value:function(e,t){if(null===t)return!0;t=Array.isArray(t)?t:[t];for(var n=0;n<t.length;n++)if(Array.isArray(e)){if(e.includes(t[n]))return!1}else if(ou(e,t[n]))return!1;return!0}}])}();Tj=function(e,t,n,r){for(var o,i=r>1?void 0:r?Mj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Pj(t,n,i),i}([Ys()],Tj);var Fj=Object.defineProperty,Nj=Object.getOwnPropertyDescriptor,Vj=function(e,t,n,r){for(var o,i=r>1?void 0:r?Nj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Fj(t,n,i),i},Lj=function(){return Wb((function e(){Ub(this,e)}),[{key:"isMatchCondition",value:function(e,t,n){if(e===jC.isEmpty||e===jC.isNotEmpty)return this._filterFuncService[e](t);if(!t)return!1;var r;if(a_(n)?r=[n+" 00:00:00",n+" 23:59:59"]:"today"===n?r=this.getTodayRange():"tomorrow"===n?r=this.getTomorrowRange():"yesterday"===n?r=this.getYesterdayRange():"thisWeek"===n?r=this.getThisWeekRange():"lastWeek"===n?r=this.getLastWeekRange():"nextWeek"===n?r=this.getNextWeekRange():"lastMonth"===n?r=this.getLastMonthRange():"thisMonth"===n?r=this.getThisMonthRange():"nextMonth"===n?r=this.getNextMonthRange():"last7days"===n?r=this.getLast7daysRange():"next7days"===n?r=this.getNext7daysRange():"last30days"===n?r=this.getLast30daysRange():"next30days"===n&&(r=this.getNext30daysRange()),!r)return!1;var o=i()(t);return e===jC.equalTo?(o.isAfter(r[0])||o.isSame(r[0]))&&(o.isBefore(r[1])||o.isSame(r[1])):e===jC.lessThan?o.isBefore(r[0]):e===jC.greaterThan&&o.isAfter(r[1])}},{key:"getYesterdayRange",value:function(){var e=i()().add(-1,"days");return[e.startOf("day"),e.endOf("day")]}},{key:"getTodayRange",value:function(){var e=i()();return[e.startOf("day"),e.endOf("day")]}},{key:"getTomorrowRange",value:function(){var e=i()().add(1,"days");return[e.startOf("day"),e.endOf("day")]}},{key:"getLastWeekRange",value:function(){var e=i()().startOf("week");return[e.add(-7,"days"),e.add(-1,"millisecond")]}},{key:"getThisWeekRange",value:function(){var e=i()().endOf("week");return[e.add(-7,"days"),e]}},{key:"getNextWeekRange",value:function(){var e=i()().endOf("week");return[e,e.add(7,"days")]}},{key:"getLastMonthRange",value:function(){var e=i()().startOf("month");return[e.add(-1,"months"),e.add(-1,"millisecond")]}},{key:"getThisMonthRange",value:function(){return[i()().startOf("month"),i()().endOf("month")]}},{key:"getNextMonthRange",value:function(){var e=i()().endOf("month"),t=e.add(1,"months");return[e,t]}},{key:"getLast7daysRange",value:function(){return[i()().add(-7,"days"),i()()]}},{key:"getNext7daysRange",value:function(){return[i()(),i()().add(7,"days")]}},{key:"getLast30daysRange",value:function(){return[i()().add(-30,"days"),i()()]}},{key:"getNext30daysRange",value:function(){return[i()(),i()().add(30,"days")]}}])}();function Bj(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $j(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function $j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Vj([Xs(Tj)],Lj.prototype,"_filterFuncService",2),Lj=Vj([Ys()],Lj);var zj=Object.defineProperty,Uj=Object.getOwnPropertyDescriptor,Hj=function(e,t,n,r){for(var o,i=r>1?void 0:r?Uj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zj(t,n,i),i},qj=function(){return Wb((function e(){Ub(this,e)}),[{key:"getViewFilters",value:function(e){var t=this,n=this._model.filterModel.find({view_uuid:e}),r=new g_;return n.forEach((function(e){var n=t._fieldService.getField(e.get("field_uuid"));if(n){var o=new m_(e.toJSON());o.set("field",n.toJSON()),r.push([o])}})),r}},{key:"refresh",value:function(e){var t=this.getViewFilters(e);if(0===t.length)this._model.viewRecordModel.update({view_uuid:e},{hidden:!1});else{if(x_(t,(function(e){return(null==e.get("expected")||""===e.get("expected"))&&!VC.includes(e.get("func"))})))return;if(this._groupService.isGroup(e)){var n,r=Bj(this._viewRecordService.getGroupViewRecords(e,!1));try{for(r.s();!(n=r.n()).done;){var o=n.value;this.refreshViewRecord(e,o.viewRecords,t)}}catch(e){r.e(e)}finally{r.f()}}else{var i=this._viewRecordService.getViewRecords(e,!1);this.refreshViewRecord(e,i,t)}}}},{key:"refreshViewRecord",value:function(e,t,n){var r=this;t=t||this._model.viewRecordModel.find({view_uuid:e}),n=n||this.getViewFilters(e);var o,i={false:[],true:[]},a=C_(this._model.fieldModel.find({uuid:E_(n,(function(e){return e.get("field_uuid")}))}),(function(e,t){return e[t.get("uuid")]=t,e}),{}),l={},u=Bj(ku(E_(n,(function(e){return e.get("field_uuid")}))));try{for(u.s();!(o=u.n()).done;){var c=o.value,s=this._cellService.getFieldKeyValues(c);l[c]=s.reduce((function(e,t){return e[t.recordId]=t.keyValue,e}),{})}}catch(e){u.e(e)}finally{u.f()}var d,f=Bj(t);try{var p=function(){var e=d.value,t=e.get("record_uuid"),o=!1;if(!0===(o="and"===(n.get(0).get("operator")||"and")?x_(n,(function(e){var n=l&&l[e.get("field_uuid")][t];return r._checkFilter(e,t,n,null==a?void 0:a[e.get("field_uuid")])})):O_(n,(function(e){var n=l&&l[e.get("field_uuid")][t];return r._checkFilter(e,t,n,null==a?void 0:a[e.get("field_uuid")])})))&&!1===e.get("hidden")||!1===o&&e.get("hidden"))return 1;o?i.false.push(e):i.true.push(e)};for(f.s();!(d=f.n()).done;)p()}catch(e){f.e(e)}finally{f.f()}i.true.length>0&&this._model.viewRecordModel.update({view_uuid:e,record_uuid:i.true.map((function(e){return e.get("record_uuid")}))},{hidden:!0}),i.false.length>0&&this._model.viewRecordModel.update({view_uuid:e,record_uuid:i.false.map((function(e){return e.get("record_uuid")}))},{hidden:!1})}},{key:"checkIsFilterMatch",value:function(e,t,n){var r=this;return"and"===(t.get(0).get("operator")||"and")?x_(t,(function(t){return r._checkFilter(t,e,n)})):O_(t,(function(t){return r._checkFilter(t,e,n)}))}},{key:"_checkFilter",value:function(e,t,n,r){if((null==e.get("expected")||""===e.get("expected"))&&!VC.includes(e.get("func")))return!0;if(null==n&&(n=this._cellService.getCellKeyValue(e.get("field_uuid"),t)),r||(r=this._fieldService.getField(e.get("field_uuid"))),!r)return!1;var o=r.get("type"),i=NC[o];return this._matchCondition(n,i,o,e.get("func"),e.get("expected"))}},{key:"_matchCondition",value:function(e,t,n,r,o){if("text"===t||"file"===t||"select"===t){var i=null==e?"":e+"";return n===bC.LINK&&(r===jC.startsWith||r===jC.notStartsWith||r===jC.endsWith||r===jC.notEndsWith)&&(i=i.split("|")[1]||""),this._filterFuncService[r](i,o)}if("number"===t){var a=e;return(n==bC.RATE||n===bC.PROGRESS)&&""===a&&(a="0"),(""===a||null==a||!isNaN(parseFloat(a)))&&this._filterFuncService[r](""===a||null==a?"":parseFloat(a),parseFloat(o))}if("timePeriod"===t)return""===e||null==e?this._filterFuncService[r](""):this._filterDateService.isMatchCondition(r,e,o);if("checkbox"===t)return e=e?"true":"false",o=!0===o||"true"===o?"true":"false",this._filterFuncService[r](e,o);if("multiSelect"===t){var l=[];return e?Array.isArray(e)?l=e.map((function(e){return e.value})):"string"==typeof e&&(l=e.split(",")):l=[],o&&"string"==typeof o&&(o=o.split(",")),this._filterFuncService[r](l,o)}return!1}},{key:"create",value:function(e,t){var n=this._model.filterModel.create({uuid:t.uuid,view_uuid:e,field_uuid:t.field_uuid,func:t.func,expected:t.expected,operator:t.operator});return this.refresh(e),n}},{key:"remove",value:function(e){var t=this._model.filterModel.findOne({uuid:e});if(!t)return null;var n=t.get("view_uuid");return this._model.filterModel.remove({view_uuid:n,uuid:e}),this.refresh(n),t}},{key:"removeByViewId",value:function(e){var t=this._model.filterModel.findOne({view_uuid:e});if(t)return this.remove(t.get("uuid"))}},{key:"update",value:function(e,t){var n,r=Bj(Array.isArray(t)?t:[t]);try{for(r.s();!(n=r.n()).done;)t=n.value,this._model.filterModel.update({uuid:t.uuid},{field_uuid:t.field_uuid,view_uuid:e,func:t.func,expected:t.expected,operator:t.operator})}catch(e){r.e(e)}finally{r.f()}this.refresh(e)}},{key:"copy",value:function(e,t){var n=this._model.filterModel.find({view_uuid:e});!n||0===n.length||this._model.filterModel.bulkCreate(E_(n,(function(e){return{view_uuid:t,field_uuid:e.get("field_uuid"),operator:e.get("operator"),func:e.get("func"),expected:e.get("expected")}})))}}])}();Hj([Xs(zS)],qj.prototype,"_model",2),Hj([Xs(Px)],qj.prototype,"_fieldService",2),Hj([Xs(dx)],qj.prototype,"_cellService",2),Hj([Xs(Tj)],qj.prototype,"_filterFuncService",2),Hj([Xs(Lj)],qj.prototype,"_filterDateService",2),Hj([Xs(Jx)],qj.prototype,"_groupService",2),Hj([Xs(gj)],qj.prototype,"_viewRecordService",2),qj=Hj([Ys()],qj);var Wj=Object.defineProperty,Gj=Object.getOwnPropertyDescriptor;function Kj(e,t){if(0===t)return"";var n=bj(wj(e,t),100);return-1===n.indexOf(".")?n+"%":parseFloat(n).toFixed(2)+"%"}var Yj=function(){return Wb((function e(){Ub(this,e)}),[{key:"count",value:function(e){return e.length}},{key:"sum",value:function(e){return e.reduce((function(e,t){return yj(e,t)}),0)}},{key:"average",value:function(e){var t=this.sum(e),n=wj(t,e.length);return isNaN(n)?0:parseFloat(n).toFixed(2)}},{key:"max",value:function(e){return 0===(e=e.filter((function(e){return""!==e}))).length?"":Math.max.apply(Math,Vb(e))}},{key:"min",value:function(e){return 0===(e=e.filter((function(e){return""!==e}))).length?"":Math.min.apply(Math,Vb(e))}},{key:"filled",value:function(e){return e.filter((function(e){return""!==e})).length}},{key:"empty",value:function(e){return e.filter((function(e){return""===e})).length}},{key:"unique",value:function(e){var t={};return e.forEach((function(e){""!==e&&(t[e]=!0)})),Object.keys(t).length}},{key:"percentFilled",value:function(e){return Kj(this.filled(e),e.length)}},{key:"percentEmpty",value:function(e){return Kj(this.empty(e),e.length)}},{key:"percentUnique",value:function(e){return Kj(this.unique(e),e.length)}},{key:"earliestDate",value:function(e){for(var t=e[0],n=1;n<e.length;n++)""!==e[n]&&(e[n]<t||""===t)&&(t=e[n]);return t}},{key:"latestDate",value:function(e){for(var t=e[0],n=1;n<e.length;n++)""!==e[n]&&e[n]>t&&(t=e[n]);return t}},{key:"dateRange",value:function(e){for(var t=e[0],n=e[0],r=1;r<e.length;r++)""!==e[r]&&e[r]>n?n=e[r]:""!==e[r]&&(e[r]<t||""===t)&&(t=e[r]);return n===t||""===t?0:i()(n).diff(i()(t),"days")}},{key:"monthRange",value:function(e){for(var t=e[0],n=e[0],r=1;r<e.length;r++)""!==e[r]&&e[r]>n?n=e[r]:""!==e[r]&&(e[r]<t||""===t)&&(t=e[r]);return n===t||""===t?0:i()(n).diff(i()(t),"months")}},{key:"checked",value:function(e){return e.reduce((function(e,t){return"是"===t||"true"===t||!0===t?e+1:e}),0)}},{key:"unchecked",value:function(e){return e.reduce((function(e,t){return"是"!==t&&"true"!==t&&!0!==t?e+1:e}),0)}},{key:"percentChecked",value:function(e){return Kj(this.checked(e),e.length)}},{key:"percentUnchecked",value:function(e){return Kj(this.unchecked(e),e.length)}}])}();function Xj(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Jj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jj(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Jj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Yj=function(e,t,n,r){for(var o,i=r>1?void 0:r?Gj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Wj(t,n,i),i}([Ys()],Yj);var Zj=Object.defineProperty,Qj=Object.getOwnPropertyDescriptor,eI=function(e,t,n,r){for(var o,i=r>1?void 0:r?Qj(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Zj(t,n,i),i},tI=function(){return Wb((function e(){Ub(this,e)}),[{key:"getViewStats",value:function(e){var t=this._model.statModel.find({view_uuid:e});if(0!==t.length)return t}},{key:"getStatValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this._model.statModel.findOne({view_uuid:e,field_uuid:t});if(n=n.filter((function(e){return!!e})),r&&0!==n.length)return{stat:r,value:this._calc(r,n)}}},{key:"_calc",value:function(e,t){var n,r=[],o=Xj(t);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=this._cellService.getCellFormattedValue(e.get("field_uuid"),i);a?r.push(a):r.push("")}}catch(e){o.e(e)}finally{o.f()}return this._statFuncService[e.get("type")]?this._statFuncService[e.get("type")](r):null}},{key:"upsert",value:function(e,t,n){this._model.statModel.upsert({view_uuid:e,field_uuid:t},{view_uuid:e,field_uuid:t,type:n})}},{key:"remove",value:function(e,t){this._model.statModel.remove({view_uuid:e,field_uuid:t})}},{key:"copy",value:function(e,t){var n=this._model.statModel.find({view_uuid:e});!n||0===n.length||this._model.statModel.bulkCreate(E_(n,(function(e){return{view_uuid:t,field_uuid:e.get("field_uuid"),type:e.get("type")}})))}}])}();function nI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rI(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return oI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oI(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function oI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eI([Xs(zS)],tI.prototype,"_model",2),eI([Xs(Yj)],tI.prototype,"_statFuncService",2),eI([Xs(dx)],tI.prototype,"_cellService",2),tI=eI([Ys()],tI);var iI=Object.defineProperty,aI=Object.getOwnPropertyDescriptor,lI=function(e,t,n,r){for(var o,i=r>1?void 0:r?aI(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&iI(t,n,i),i},uI=function(){return Wb((function e(){Ub(this,e)}),[{key:"getView",value:function(e){return this._model.viewModel.findById(e)}},{key:"getViews",value:function(e){var t={};return null!=e&&e.skipType&&(t.type={$not:e.skipType}),null!=e&&e.type&&(t.type=e.type),this._model.viewModel.find(t)}},{key:"setActiveView",value:function(e){var t=this._model.viewModel.findById(e);if(t||(t=this._model.viewModel.find()[0])){var n=this._model.tableModel.find().get(0).get("uuid");this._activeViewId=t.get("uuid"),this._model.tableModel.update({uuid:n},{active_view_uuid:t.get("uuid")})}}},{key:"getActiveView",value:function(){var e,t;if(this._activeViewId)t=this._model.viewModel.findOne({uuid:this._activeViewId});else{var n=null==(e=this._model.tableModel.find().get(0))?void 0:e.get("active_view_uuid");n&&(t=this.getView(n))}return t||(t=this._model.viewModel.find().get(0)),this._activeViewId=null==t?void 0:t.get("uuid"),t}},{key:"create",value:function(e){var t,n=this,r=null==(t=this.getActiveView())?void 0:t.get("uuid"),o=this._model.viewModel.create({uuid:e.uuid,name:e.name,type:e.type}),i=o.uuid;return this._viewConfigService.create(i),r&&(this._viewFieldService.copy(r,i,(function(e){var t=n._fieldService.getField(e.get("field_uuid"));return o.type===BC.FORM&&zC.isSystemType(t.get("type"))})),this._viewRecordService.copy(r,i)),e.type===BC.CARD?this._createCard(i):e.type===BC.KANBAN?this._createKanban(i):e.type===BC.FORM&&this._createForm(i),this.refresh(i),this._model.viewModel.findOne({uuid:i})}},{key:"_createCard",value:function(e){var t,n,r=0,o=rI(this._viewFieldService.getViewFields(e));try{for(o.s();!(n=o.n()).done;){var i=n.value,a=this._fieldService.getField(i.get("field_uuid"));(null==a?void 0:a.get("type"))===bC.IMAGE&&(t||(t=a.get("uuid"))),this._model.viewFieldModel.update({view_uuid:i.get("view_uuid"),field_uuid:i.get("field_uuid")},{hidden:r>=3}),r++}}catch(e){o.e(e)}finally{o.f()}t&&this._model.viewConfigModel.update({view_uuid:e},{cover_field_uuid:t})}},{key:"_createKanban",value:function(e){var t=this._fieldService.getFields(),n=this._getKanbanGroupField(t);n&&this._groupService.create(e,{field_uuid:n.get("uuid"),type:MC.ASC})}},{key:"_createForm",value:function(e){var t,n=rI(this._viewFieldService.getViewFields(e));try{for(n.s();!(t=n.n()).done;){var r=t.value,o=this._fieldService.getField(r.get("field_uuid"));zC.isSystemType(null==o?void 0:o.get("type"))?this._model.viewFieldModel.remove({view_uuid:r.get("view_uuid"),field_uuid:r.get("field_uuid")}):this._model.viewFieldModel.update({view_uuid:r.get("view_uuid"),field_uuid:r.get("field_uuid")},{required:!0})}}catch(e){n.e(e)}finally{n.f()}}},{key:"_getKanbanGroupField",value:function(e){for(var t=[],n=0,r=[bC.SELECT,bC.MENTION];n<r.length;n++){var o,i=r[n],a=rI(e);try{for(a.s();!(o=a.n()).done;){var l=o.value;i===(null==l?void 0:l.get("type"))&&t.push(l)}}catch(e){a.e(e)}finally{a.f()}}for(var u=0,c=t;u<c.length;u++){var s=c[u];if((null==s?void 0:s.get("type"))===bC.SELECT&&s.get("color"))return s}if(0===t.length){var d=kC.find((function(e){return e.type===bC.SELECT})),f=this._fieldService.create({name:d.name,type:d.type,color:d.color,multiple:!!d.multiple,options:d.options});return this._fieldService.getField(f.uuid)}return t[0]}},{key:"createByType",value:function(e,t){var n=this._model.viewModel.find({type:t}),r=$C[t].name;return n.length>0&&(r+=n.length),this.create({uuid:e,name:r,type:t})}},{key:"update",value:function(e,t){if(!this.getView(e))throw new Error("视图 ".concat(e," 没有找到"));return this._model.viewModel.update({uuid:e},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nI(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}},{key:"remove",value:function(e){if(!this.getView(e))throw new Error("view not found. id: ".concat(e));return this._viewConfigService.remove(e),this._model.viewRecordModel.remove({view_uuid:e}),this._groupService.remove(e),this._sortService.remove(e),this._filterService.removeByViewId(e),this._model.viewModel.remove({uuid:e})}},{key:"copy",value:function(e,t){if(e&&t){var n=this.getView(t);if(!n)throw new Error("view not found. id: ".concat(t));var r=n.get("name")+" (".concat(uw("副本"),")"),o=n.get("type");return this._model.viewModel.create({uuid:e,name:r,type:o}),this._viewConfigService.copy(t,e),this._viewFieldService.copy(t,e),this._viewRecordService.copy(t,e),this._groupService.copy(t,e),this._sortService.copy(t,e),this._filterService.copy(t,e),this._statService.copy(t,e),this._model.viewModel.findOne({uuid:e})}}},{key:"updateOrder",value:function(e,t){var n=this._model.viewModel.find(),r=k_(n,(function(t){return t.get("uuid")===e})),o=k_(n,(function(e){return e.get("uuid")===t}));r<o&&(o=Math.min(o,n.length-1));var i=n.get(o),a={};i&&(a={uuid:i.get("uuid")}),r<o?this._model.viewModel.moveAfter(a,{uuid:e}):this._model.viewModel.moveBefore(a,{uuid:e})}},{key:"refresh",value:function(e){var t=this.getView(e);if((null==t?void 0:t.get("type"))!==BC.FORM){var n=this._groupService.getViewGroup(e);(null==t?void 0:t.get("type"))===BC.KANBAN&&(null!=n&&n.group||(n=this._groupService.createDefaultKanbanViewGroup(e))),this._viewFieldService.refresh(e);var r={},o={};this._model.recordModel.find().forEach((function(e){r[e.get("uuid")]=!0}));var i,a=[],l=rI(this._model.viewRecordModel.find({view_uuid:e}));try{for(l.s();!(i=l.n()).done;){var u=i.value.get("record_uuid");o[u]=!0,r[u]||a.push(u)}}catch(e){l.e(e)}finally{l.f()}a.length>0&&this._model.viewRecordModel.remove({view_uuid:e,record_uuid:a});var c=this._filterService.getViewFilters(e),s=[];if(Object.keys(r).forEach((function(e){o[e]||s.push(e)})),s.length>0){var d=s.map((function(t){return{uuid:fw(32),view_uuid:e,record_uuid:t}}));this._model.viewRecordModel.bulkCreate(d)}var f=this._model.viewRecordModel.find({view_uuid:e});null!=n&&n.group&&this._groupService.refreshGroup(e,n.group.toJSON()),c.length>0&&this._filterService.refreshViewRecord(e,f),this._sortService.isKeepSort(e)&&this._sortService.refresh(e)}}}])}();lI([Xs(zS)],uI.prototype,"_model",2),lI([Xs(Px)],uI.prototype,"_fieldService",2),lI([Xs(XS)],uI.prototype,"_viewConfigService",2),lI([Xs(gj)],uI.prototype,"_viewRecordService",2),lI([Xs($x)],uI.prototype,"_viewFieldService",2),lI([Xs(Jx)],uI.prototype,"_groupService",2),lI([Xs(Dj)],uI.prototype,"_sortService",2),lI([Xs(qj)],uI.prototype,"_filterService",2),lI([Xs(tI)],uI.prototype,"_statService",2),uI=lI([Ys()],uI);var cI=Object.defineProperty,sI=Object.getOwnPropertyDescriptor,dI=function(e,t,n,r){for(var o,i=r>1?void 0:r?sI(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cI(t,n,i),i},fI=function(){return Wb((function e(){Ub(this,e)}),[{key:"setProcessor",value:function(e){this._processor=e}},{key:"setContent",value:function(e){this._database.clear(),this._processor.toModel(e,this._database)}},{key:"setRecords",value:function(e){var t;this._database.clear([$E.table,WE.table,nO.table,fO.table,mO.table,kO.table,zO.table]),this._processor.toRecordModel(e,this._database);var n=null==(t=this._viewService.getActiveView())?void 0:t.get("uuid");n&&this._viewService.refresh(n)}},{key:"setUsers",value:function(e){this._database.clear([uS.table]),this._processor.toUserModel(e,this._database)}},{key:"getContent",value:function(){return this._processor.toData(this._database)}}])}();function pI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pI(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vI(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gI(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function gI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}dI([Xs(u_)],fI.prototype,"_database",2),dI([Xs(uI)],fI.prototype,"_viewService",2),fI=dI([Ys()],fI);var mI=Object.defineProperty,yI=Object.getOwnPropertyDescriptor,bI=function(e,t,n,r){for(var o,i=r>1?void 0:r?yI(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&mI(t,n,i),i},wI=function(){return Wb((function e(){Ub(this,e)}),[{key:"getTable",value:function(){return this._model.tableModel.find().get(0)}},{key:"getVersion",value:function(){return this._model.tableModel.find().get(0).get("version")}},{key:"getViewList",value:function(){return this._model.viewModel.find()}},{key:"createTable",value:function(){this._model.tableModel.create({version:"2.0.0"})}},{key:"create",value:function(){this.createTable();var e,t=vI(kC);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._fieldService.create(n)}}catch(e){t.e(e)}finally{t.f()}var r=$C[BC.GRID],o=fw(32);this._viewService.create({uuid:o,name:r.name,type:r.type});for(var i=0,a=new Array(3);i<a.length;i++){a[i];var l=fw(32);this._model.recordModel.create({uuid:l}),this._model.viewRecordModel.create({view_uuid:o,record_uuid:l})}}},{key:"replaceTable",value:function(e){var t=this,n=e.sheet[0],r=Object.values(n.views);this._viewService.getViews().forEach((function(e){t._viewRecordService.removeAll(e.get("uuid"),!1),t._viewFieldService.removeAll(e.get("uuid")),t._model.viewConfigModel.remove({view_uuid:e.get("uuid")}),t._model.statModel.remove({view_uuid:e.get("uuid")}),t._viewService.remove(e.get("uuid"))})),r.forEach((function(r){var o;t._viewService.create({id:r.id,uuid:r.id,type:r.type,name:r.name}),r.type!==BC.FORM&&(n.columns.forEach((function(e){var n,o={uuid:e.id,name:e.name,type:e.type,color:e.color,options:null==(n=e.options)?void 0:n.map((function(e){return{uuid:e.id,name:e.value,color:e.color}}))},i=zC.isMultiple(e.type),a=t._fieldService.create(hI(hI({},o),{},{multiple:i})),l={view_uuid:r.id,field_uuid:a.uuid};r.type===BC.FORM&&(l.required=!0),t._model.viewFieldModel.create(l)})),null==(o=e.records)||o.forEach((function(e){var n=JSON.parse(e.data),o=e.id||e.uuid;n.uuid=o,t._viewRecordService.createRecord(r.id,o,n)})))})),this._viewService.setActiveView(n.activeView)}}])}();bI([Xs(zS)],wI.prototype,"_model",2),bI([Xs(Px)],wI.prototype,"_fieldService",2),bI([Xs(uI)],wI.prototype,"_viewService",2),bI([Xs(gj)],wI.prototype,"_viewRecordService",2),bI([Xs($x)],wI.prototype,"_viewFieldService",2),wI=bI([Ys()],wI);var _I=Object.defineProperty,kI=Object.getOwnPropertyDescriptor,CI=function(e,t,n,r){for(var o,i=r>1?void 0:r?kI(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_I(t,n,i),i},EI=function(){return Wb((function e(){Ub(this,e)}),[{key:"getViewShare",value:function(e){return this._model.viewShareModel.findOne({view_uuid:e})}},{key:"upsertViewShare",value:function(e,t){this._model.viewShareModel.upsert({view_uuid:e},{view_uuid:e,src:null==t?void 0:t.src,status:null==t?void 0:t.status})}}])}();CI([Xs(zS)],EI.prototype,"_model",2),EI=CI([Ys()],EI);var OI=Object.defineProperty,SI=Object.getOwnPropertyDescriptor,xI=function(e,t,n,r){for(var o,i=r>1?void 0:r?SI(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&OI(t,n,i),i},jI=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).processor;this._modelInitial.init({models:[rS,CS,pS,yS,jS,PS,VS,uS,ZO,GO,zO,DO,NO,xO,JE,lO,kO,mO,fO,nO,WE,$E]}),e&&this._contentService.setProcessor(e)}},{key:"start",value:function(){}},{key:"initData",value:function(e){this._contentService.setContent(e);var t=this._contextService.currentUser;t&&this._modelService.getModel("user").upsert({uid:t.uid},{uid:String(t.uid),work_id:t.work_id,name:t.name,login:t.login,icon:t.icon})}},{key:"initRecords",value:function(e){this._contentService.setRecords(e)}},{key:"initUsers",value:function(e){this._contentService.setUsers(e)}}])}();xI([Xs(WC)],jI.prototype,"_modelInitial",2),xI([Xs(ME)],jI.prototype,"_modelService",2),xI([Xs(fI)],jI.prototype,"_contentService",2),xI([Xs(qS)],jI.prototype,"_contextService",2),jI=xI([Ys()],jI);function II(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return RI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RI(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function RI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var AI=Object.defineProperty,DI=Object.getOwnPropertyDescriptor,PI=function(e,t,n,r){for(var o,i=r>1?void 0:r?DI(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&AI(t,n,i),i},MI=function(){return Wb((function e(){Ub(this,e)}),[{key:"currentUser",get:function(){return this._contextService.currentUser}},{key:"maxRecordCount",get:function(){return this._configuration.getValue("record.maxCount")}},{key:"version",get:function(){return"1.1.0"}},{key:"getTable",value:function(){return this._tableService.getTable()}},{key:"getContent",value:function(){return this._contentService.getContent()}},{key:"isEmptyTable",value:function(){var e,t,n,r=this.getAllFields();if(3!==r.length||r.get(0).get("type")!==kC[0].type||r.get(1).get("type")!==kC[1].type||r.get(2).get("type")!==kC[2].type)return!1;if(this.getViews().length>1)return!1;var o=this.getFieldOptions(r.get(1).get("uuid"));if(3!==o.length||o.get(0).get("name")!==(null==(e=kC[1].options)?void 0:e[0].name)||o.get(1).get("name")!==(null==(t=kC[1].options)?void 0:t[1].name)||o.get(2).get("name")!==(null==(n=kC[1].options)?void 0:n[2].name))return!1;var i,a=II(this.getRecords());try{for(a.s();!(i=a.n()).done;){var l,u=i.value,c=II(r);try{for(c.s();!(l=c.n()).done;){var s=l.value;if(""!==this.getCellFormattedValue(s.get("uuid"),u.get("uuid")))return!1}}catch(e){c.e(e)}finally{c.f()}}}catch(e){a.e(e)}finally{a.f()}return!0}},{key:"getActiveView",value:function(){return this._viewService.getActiveView()}},{key:"getView",value:function(e){return e=e||this.getActiveViewId(),this._viewService.getView(e)}},{key:"getViews",value:function(e){return this._viewService.getViews(e)}},{key:"getViewConfig",value:function(e){return e=e||this.getActiveViewId(),this._viewConfigService.getViewConfig(e)}},{key:"getViewFilters",value:function(e){return e=e||this.getActiveViewId(),this._filterService.getViewFilters(e)}},{key:"getViewGroup",value:function(e){return e=e||this.getActiveViewId(),this._groupService.getViewGroup(e)}},{key:"getViewSort",value:function(e){return e=e||this.getActiveViewId(),this._sortService.getViewSort(e)}},{key:"getViewStats",value:function(e){return this._statService.getViewStats(e)}},{key:"getViewShare",value:function(e){return this._viewShareService.getViewShare(e)}},{key:"getStatValue",value:function(e,t,n){return this._statService.getStatValue(e,t,n)}},{key:"getCell",value:function(e,t){return this._cellService.getCell(e,t)}},{key:"getFieldCells",value:function(e){return this._cellService.getFieldCells(e)}},{key:"getFieldFormatValues",value:function(e,t){return this._cellService.getFieldFormatValues(e,t)}},{key:"getViewRecordCells",value:function(e,t){return null==t&&(t=e,e=this.getActiveViewId()),this._cellService.getViewRecordCells(e,t)}},{key:"getRecordCells",value:function(e){return this._cellService.getRecordCells(e)}},{key:"getOriginRecord",value:function(e){return this._recordService.getRecordById(e)}},{key:"getViewRecordByRecordId",value:function(e){var t=this._viewService.getActiveView().get("uuid");return this._viewRecordService.getViewRecordByRecordId(t,e)}},{key:"getRecordDesc",value:function(e){return this._recordService.getRecordDesc(e)}},{key:"getViewRecordsDetail",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{filterHidden:!0};return this._viewRecordService.getViewRecordsDetail(e,t,n)}},{key:"getRecordByIndex",value:function(e){return this.getFlatViewRecords().get(e)}},{key:"getFieldByIndex",value:function(e){var t=this.getViewFields().get(e);return t?this._fieldService.getField(t.get("field_uuid")):null}},{key:"getCellByIndexes",value:function(e,t){var n=this.getFieldByIndex(t),r=this.getRecordByIndex(e);return n&&r?this.getCell(null==n?void 0:n.get("uuid"),r.get("record_uuid")):null}},{key:"getVisibleRecordIdsInActiveView",value:function(){var e=this.getActiveViewId();return this._viewRecordService.getVisibleRecordIds(e)}},{key:"getPrimaryCellInRecord",value:function(e,t){var n=this;if(this._recordService.getRecordById(e)){var r=t;if(!r){var o=this.getViewFields(),i=w_(o,(function(e){var t=n._fieldService.getField(e.get("field_uuid"));return(null==t?void 0:t.get("type"))===bC.TITLE}))||(null==o?void 0:o.get(0));r=null==i?void 0:i.get("field_uuid")}return r?{formattedValue:this._cellService.getCellFormattedValue(r,e),recordId:e,fieldId:r}:null}return null}},{key:"getAllFields",value:function(){return this._fieldService.getFields()}},{key:"getRecords",value:function(){return this._recordService.getRecords()}},{key:"getViewRecords",value:function(e){return e=e||this.getActiveViewId(),this._viewRecordService.getViewRecords(e)}},{key:"getGroupViewRecords",value:function(e){return e=e||this.getActiveViewId(),this._viewRecordService.getGroupViewRecords(e)}},{key:"getOriginViewRecords",value:function(e){return e=e||this.getActiveViewId(),this._viewRecordService.getOriginViewRecords(e)}},{key:"getFlatViewRecords",value:function(e){return e=e||this.getActiveViewId(),this.isGroup(e)?this._viewRecordService.getGroupFlatViewRecords(e):this._viewRecordService.getFlatViewRecords(e)}},{key:"getViewRecordsCount",value:function(e){return e=e||this.getActiveViewId(),this._viewRecordService.getViewRecordsCount(e)}},{key:"getFieldOptionCells",value:function(e,t){var n=this.getField(t.field_uuid),r=[];if((null==n?void 0:n.get("type"))===bC.MENTION){var o=this.getUsers(t.uuid.split(",").map((function(e){return String(e)}))),i=this.keyValue({fieldId:t.field_uuid,value:Vb(o)});r=(this.getFieldRecords(e,t.field_uuid,i)||[]).map((function(e){return e.cells})).reduce((function(e,t){return e.concat(t)}),[])}else{r=(this.getFieldRecords(e,t.field_uuid,t.uuid)||[]).map((function(e){return e.cells})).reduce((function(e,t){return e.concat(t)}),[])}return r}},{key:"getFieldRecords",value:function(e,t,n){return this._viewRecordService.getFieldRecords(e,t,n)}},{key:"getField",value:function(e){return this._fieldService.getField(e)}},{key:"getFieldOption",value:function(e){return this._fieldService.getFieldOption(e)}},{key:"getFieldOptions",value:function(e){return this._fieldService.getFieldOptions(e)}},{key:"getViewField",value:function(e,t){return this._viewFieldService.getViewField(e,t)}},{key:"isGroup",value:function(e){return e=e||this.getActiveViewId(),this._groupService.isGroup(e)}},{key:"getViewFields",value:function(e,t){return e=e||this.getActiveViewId(),this._viewFieldService.getViewFields(e,t)}},{key:"getViewFieldsCount",value:function(e){return e=e||this.getActiveViewId(),this._viewFieldService.getViewFieldsCount(e)}},{key:"getAllViewFields",value:function(e){return e=e||this.getActiveViewId(),this._viewFieldService.getViewFields(e,!1)}},{key:"getCellFormattedValue",value:function(e,t){return this._cellService.getCellFormattedValue(e,t)||""}},{key:"getActiveViewId",value:function(){return this._viewService.getActiveView().get("uuid")}},{key:"getActiveViewType",value:function(){var e;return null==(e=this._viewService.getActiveView())?void 0:e.get("type")}},{key:"getUser",value:function(e){return this._model.userModel.findOne({uid:e})}},{key:"getUsers",value:function(e){return this._model.userModel.find({uid:e})}},{key:"getValueField",value:function(e){return this._fieldRegistry.getValueField(e)}},{key:"keyValue",value:function(e){return this._cellService.keyValue(e)}},{key:"groupValue",value:function(e){return this._cellService.groupValue(e)}},{key:"getGroupItems",value:function(e,t){return this._groupService.getGroupItems(e,t)}}])}();function TI(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return FI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FI(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function FI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function NI(e,t,n){return t=P_(t),D_(e,VI()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function VI(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(VI=function(){return!!e})()}PI([Xs(wI)],MI.prototype,"_tableService",2),PI([Xs(Px)],MI.prototype,"_fieldService",2),PI([Xs(qx)],MI.prototype,"_recordService",2),PI([Xs(uI)],MI.prototype,"_viewService",2),PI([Xs(XS)],MI.prototype,"_viewConfigService",2),PI([Xs($x)],MI.prototype,"_viewFieldService",2),PI([Xs(gj)],MI.prototype,"_viewRecordService",2),PI([Xs(EI)],MI.prototype,"_viewShareService",2),PI([Xs(tI)],MI.prototype,"_statService",2),PI([Xs(Jx)],MI.prototype,"_groupService",2),PI([Xs(Dj)],MI.prototype,"_sortService",2),PI([Xs(qj)],MI.prototype,"_filterService",2),PI([Xs(dx)],MI.prototype,"_cellService",2),PI([Xs(QS)],MI.prototype,"_fieldRegistry",2),PI([Xs(R_)],MI.prototype,"_configuration",2),PI([Xs(qS)],MI.prototype,"_contextService",2),PI([Xs(fI)],MI.prototype,"_contentService",2),PI([Xs(zS)],MI.prototype,"_model",2),MI=PI([Ys()],MI);var LI=Object.defineProperty,BI=Object.getOwnPropertyDescriptor,$I=function(e,t,n,r){for(var o,i=r>1?void 0:r?BI(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&LI(t,n,i),i},zI=function(e){return e.GROUP="group",e.SORT="sort",e.FILTER="filter",e.ACTIVE_VIEW="activeView",e}(zI||{}),UI=function(e){function t(){var e;return Ub(this,t),(e=NI(this,t,arguments))._onBeforeRefresh=e._register(new ck),e.onBeforeRefresh=e._onBeforeRefresh.event,e._onAfterRefresh=e._register(new ck),e.onAfterRefresh=e._onAfterRefresh.event,e}return F_(t,e),Wb(t,[{key:"isNeedRefreshGroup",value:function(e,t){var n,r=this._groupService.getViewGroup(e);if(null==r||!r.group)return!1;return("string"==typeof t?[t]:t).includes(null==(n=r.group)?void 0:n.get("field_uuid"))}},{key:"isNeedRefreshSort",value:function(e,t){var n=this._sortService.getViewSort(e),r=[];return r="string"==typeof t?[t]:t,this._sortService.isKeepSort(e)&&!!n&&r.includes(n.get("field_uuid"))}},{key:"isNeedRefreshFilter",value:function(e,t,n,r){var o,i=!1,a=TI(E_(this._model.filterModel.find({view_uuid:e}),(function(e){return e.get("field_uuid")})));try{for(a.s();!(o=a.n()).done;){if(t===o.value){var l=this._filterService.getViewFilters(e),u=this._model.fieldModel.findOne({uuid:t}),c=this._fieldRegistry.getValueField(null==u?void 0:u.get("type")),s=this._model.viewRecordModel.findOne({view_uuid:e,record_uuid:n});i=!this._filterService.checkIsFilterMatch(n,l,null==c?void 0:c.keyValue(r))!=(null==s?void 0:s.get("hidden"));break}}}catch(e){a.e(e)}finally{a.f()}return i}},{key:"getRefreshType",value:function(e,t,n,r){return this.isNeedRefreshGroup(e,t)?"group":this.isNeedRefreshSort(e,t)?"sort":n&&"string"==typeof t&&this.isNeedRefreshFilter(e,t,n,r)?"filter":""}},{key:"emitBeforeRefresh",value:function(e,t,n,r){this._onBeforeRefresh.emit({type:e,commandName:t,params:n,action:r})}},{key:"emitAfterRefresh",value:function(e){this._onAfterRefresh.emit({type:e})}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);function HI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HI(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WI(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return GI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GI(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function GI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}$I([Xs(Jx)],UI.prototype,"_groupService",2),$I([Xs(Dj)],UI.prototype,"_sortService",2),$I([Xs(qj)],UI.prototype,"_filterService",2),$I([Xs(QS)],UI.prototype,"_fieldRegistry",2),$I([Xs(zS)],UI.prototype,"_model",2),$I([Vs()],UI.prototype,"destroy",1),UI=$I([Ys()],UI);var KI=Object.defineProperty,YI=Object.getOwnPropertyDescriptor,XI=function(e,t,n,r){for(var o,i=r>1?void 0:r?YI(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&KI(t,n,i),i},JI=function(){return Wb((function e(){Ub(this,e)}),[{key:"setActiveView",value:function(e){var t=this,n=this._viewService.setActiveView(e),r=function(){t._viewService.refresh(e),t._refreshEventService.emitAfterRefresh(zI.ACTIVE_VIEW)};return globalThis.localStorage.debugPerformance?r():vC((function(){r()})),n}},{key:"createView",value:function(e){return this._viewService.create(e)}},{key:"createViewByType",value:function(e,t){return this._viewService.createByType(e,t)}},{key:"updateView",value:function(e,t){return this._viewService.update(e,t)}},{key:"removeView",value:function(e){return this._viewService.remove(e)}},{key:"copyView",value:function(e,t){return this._viewService.copy(e,t)}},{key:"updateViewConfig",value:function(e,t){return this._viewConfigService.update(e,t)}},{key:"updateViewOrder",value:function(e,t){this._viewService.updateOrder(e,t)}},{key:"updateRecordOrder",value:function(e,t,n,r,o){this._viewRecordService.updateOrder(e,t,n,r,o),this._sortService.isKeepSort(e)&&this._sortService.refresh(e)}},{key:"updateRecord",value:function(e,t){this._recordService.update(e,t)}},{key:"updateFieldOrder",value:function(e,t,n){this._viewFieldService.updateOrder(e,t,n)}},{key:"updateFieldOptionOrder",value:function(e,t,n){this._fieldService.updateFieldOptionOrder(e,t,n)}},{key:"createFieldOption",value:function(e,t,n){return this._fieldService.createFieldOption(e,t,n)}},{key:"updateFieldOption",value:function(e,t){if(t.users){var n=this._readService.getFieldOption(e);if(0===t.users.length)return void this.removeFieldOption(e);var r=this._viewService.getActiveView();if(!r)return;var o=this._readService.getFieldOptionCells(r.get("uuid"),null==n?void 0:n.toJSON()),i=null==o?void 0:o.map((function(e){return{recordId:e.recordId,fieldId:e.fieldId,value:t.users||[],fieldType:e.fieldType,uuid:e.uuid}})),a=this._cellService.keyValue({fieldId:t.field_uuid,value:Vb(t.users)});return this.updateMentionFieldOptionId(e,a||""),void this.bulkSetCell(i)}this._fieldService.updateFieldOption(e,t)}},{key:"updateMentionFieldOptionId",value:function(e,t){this._fieldService.updateMentionFieldOptionId(e,t)}},{key:"createSort",value:function(e,t,n){return this._sortService.create(e,t,n)}},{key:"removeSort",value:function(e){return this._sortService.remove(e)}},{key:"updateSort",value:function(e,t,n){return this._sortService.update(e,t,n)}},{key:"refreshSort",value:function(e){return this._sortService.refresh(e)}},{key:"createGroup",value:function(e,t){this._groupService.create(e,t)}},{key:"removeGroup",value:function(e){this._groupService.remove(e)}},{key:"updateGroup",value:function(e,t){return this._groupService.update(e,t)}},{key:"createFilter",value:function(e,t){return this._filterService.create(e,t)}},{key:"removeFilter",value:function(e){return this._filterService.remove(e)}},{key:"updateFilter",value:function(e,t){this._filterService.update(e,t)}},{key:"refreshFilter",value:function(e){this._filterService.refresh(e)}},{key:"createField",value:function(e){var t=e.viewId,n=e.field,r=e.viewField,o=e.sourceFieldId,i=e.direction,a=this._viewFieldService.create({viewId:t,field:n,viewField:r,sourceFieldId:o,direction:i});return this.refreshView(),a}},{key:"copyField",value:function(e){var t=e.viewId,n=e.uuid,r=e.sourceFieldId;return this._viewFieldService.copyField({viewId:t,uuid:n,sourceFieldId:r})}},{key:"changeFieldType",value:function(e,t,n,r){var o=this;if(r=r||this._readService.getFieldCells(e),this._fieldService.changeFieldType(e,t,n,r),n!==bC.SELECT||n!==bC.MENTION){var i=this._readService.getViews(),a=w_(this._readService.getAllFields(),(function(e){return e.get("type")===bC.SELECT||e.get("type")===bC.MENTION}));i.forEach((function(t){var n=o._readService.getViewGroup(t.get("uuid"));null!=n&&n.group&&(null==n?void 0:n.group.get("field_uuid"))===e&&t.get("type")===BC.KANBAN&&(a?o.updateGroup(t.get("uuid"),{field_uuid:a.get("uuid"),type:MC.ASC}):o.removeGroup(t.get("uuid")))}))}}},{key:"removeField",value:function(e){var t=this._viewService.getActiveView(),n=t&&this._readService.getAllViewFields(t.get("uuid"));if(n){var r=k_(n,(function(t){return t.get("field_uuid")===e}));if(n&&-1!==r){var o,i=this._readService.getViewFilters(t.get("uuid")),a=this._readService.getViewSort(t.get("uuid")),l=WI(i);try{for(l.s();!(o=l.n()).done;){var u=o.value;u.get("field_uuid")===e&&this.removeFilter(u.get("uuid"));break}}catch(e){l.e(e)}finally{l.f()}(null==a?void 0:a.get("field_uuid"))===e&&this.removeSort(t.get("uuid"));var c=this._readService.getFieldCells(e);this.removeCells(c);var s=this._viewFieldService.remove(e,t.get("uuid"));return this.refreshView(t.get("uuid")),s}}}},{key:"removeFieldOption",value:function(e){var t=this._readService.getFieldOption(e),n=this._readService.getActiveView();if(n){var r=this._readService.getFieldOptionCells(n.get("uuid"),null==t?void 0:t.toJSON()),o=null==r?void 0:r.map((function(e){return{recordId:e.recordId,fieldId:e.fieldId,value:null,fieldType:e.fieldType,uuid:e.uuid}}));this.bulkSetCell(o),this._fieldService.removeFieldOption(e)}}},{key:"createRecord",value:function(e,t,n){return this._viewRecordService.createRecord(e,t,n)}},{key:"createEmptyRecord",value:function(e){var t,n,r=e.viewId,o=e.uuid,i=e.viewRecord,a=e.direction,l=void 0===a?"after":a,u=e.groupItemKey,c=e.filter,s=e.modifierId,d=e.sourceRecordId,f=e.groupOption,p=this._viewService.getActiveView();if(!p)return[];if(!d){var h=this._readService.getOriginViewRecords();d=null==(t=h.get(h.length-1))?void 0:t.get("record_uuid")}if(u){var v,g=WI(this._viewRecordService.getGroupViewRecords(p.get("uuid")));try{for(g.s();!(v=g.n()).done;){var m=v.value.option;if(null!=(n=null==m?void 0:m.value)&&n.toJSON&&(m.value=m.value.toJSON()),this._cellService.groupValue(m)===u){f=m;break}}}catch(e){g.e(e)}finally{g.f()}}return this._viewRecordService.createEmpty({uuid:o,viewId:r,viewRecord:i,sourceRecordId:d,direction:l,groupOption:f,filter:c,modifierId:s})}},{key:"createRecords",value:function(e,t){return this._viewRecordService.createRecords(e,t)}},{key:"copyRecord",value:function(e){var t=e.viewId,n=e.uuid,r=e.sourceRecordId,o=e.modifierId;return this._viewRecordService.copyRecord({viewId:t,uuid:n,sourceRecordId:r,modifierId:o})}},{key:"removeRecord",value:function(e){var t=this;Array.isArray(e)||(e=[e]);var n=this._viewService.getActiveView();if(n){var r,o=WI(e);try{var i=function(){var e=r.value,o=t._readService.getOriginRecord(e),i=k_(t._readService.getOriginViewRecords(),(function(t){return t.get("record_uuid")===e}));if(!o||i<0)return 1;var a=t._readService.getViewRecordCells(e);t.removeCells(a.toJSON()),t._viewRecordService.remove(n.get("uuid"),e)};for(o.s();!(r=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}}}},{key:"removeCells",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.map((function(e){return qI(qI({},e),{},{value:""})})),r=Xl(n,"fieldId"),o=Object.values(r),i=0,a=Object.values(o);i<a.length;i++){var l=a[i];this.bulkSetCell(l,t)}}},{key:"removeAllRecords",value:function(e){return this._viewRecordService.removeAll(e)}},{key:"upsertStat",value:function(e,t,n){this._statService.upsert(e,t,n)}},{key:"removeStat",value:function(e,t){this._statService.remove(e,t)}},{key:"setCell",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null!=(t=this._cellEditService)&&t.provider&&!this._cellEditService.setCell({cells:[e]}))return;if(this._cellService.setCell(e.fieldId,e.recordId,e),n){var r=this._viewService.getActiveView(),o=this._groupService.getViewGroup(r.get("uuid"));this._refreshEventService.isNeedRefreshSort(r.get("uuid"),e.fieldId)&&this.refreshSort(r.get("uuid")),this._refreshEventService.isNeedRefreshGroup(r.get("uuid"),e.fieldId)&&this.refreshGroup(r.get("uuid"),null==o?void 0:o.group.toJSON()),this._refreshEventService.isNeedRefreshFilter(r.get("uuid"),e.fieldId,e.recordId,e.value)&&this.refreshFilter(r.get("uuid"))}}},{key:"bulkSetCell",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null!=(t=this._cellEditService)&&t.provider&&!this._cellEditService.setCell({cells:e}))return;if(this._cellService.bulkSetCell(e),n){var r=this._viewService.getActiveView(),o=this._groupService.getViewGroup(r.get("uuid")),i=e.map((function(e){return e.fieldId}));this._refreshEventService.isNeedRefreshSort(r.get("uuid"),i)&&this.refreshSort(r.get("uuid")),this._refreshEventService.isNeedRefreshGroup(r.get("uuid"),i)&&this.refreshGroup(r.get("uuid"),null==o?void 0:o.group.toJSON())}}},{key:"safeSetCell",value:function(e,t,n,r,o){this._valueProcessService.changeCellType(e,t,n,r,o)}},{key:"updateValueOrder",value:function(e){this._cellService.updateOrder(e)}},{key:"updateFieldSize",value:function(e,t,n){this._viewFieldService.update(e,t,"size",n)}},{key:"updateFieldName",value:function(e,t){this._fieldService.update({uuid:e,name:t})}},{key:"updateFieldHidden",value:function(e,t,n){this._viewFieldService.update(e,t,"hidden",n)}},{key:"updateFieldColor",value:function(e,t){this._fieldService.update({uuid:e,color:t})}},{key:"updateFieldConfig",value:function(e,t){this._fieldService.update({uuid:e,config:t})}},{key:"updateFieldProperty",value:function(e){var t,n=e.uuid,r=e.color,o=e.options;ww(r)||this._fieldService.update({uuid:n,color:r});var i=this._viewService.getActiveView(),a=this._groupService.getViewGroup(i.get("uuid")),l=E_(this._fieldService.getFieldOptions(n),(function(e){return e.get("uuid")})),u=(o||[]).map((function(e){return e.uuid})),c=Ll(l,u);this._fieldService.updateFieldOptions(n,o||[],c),(null==(t=null==a?void 0:a.group)?void 0:t.get("field_uuid"))===n&&c.length>0&&this._groupService.refreshGroup(i.get("uuid"),null==a?void 0:a.group.toJSON())}},{key:"refreshGroup",value:function(e,t){this._groupService.refreshGroup(e,t)}},{key:"refreshView",value:function(e){var t;!e&&!(e=null==(t=this._viewService.getActiveView())?void 0:t.get("uuid"))||this._viewService.refresh(e)}},{key:"upsertViewShare",value:function(e,t){this._viewShareService.upsertViewShare(e,t)}},{key:"removeViewField",value:function(e,t){this._viewFieldService.remove(t,e,!0),this.refreshView()}},{key:"insertViewField",value:function(e,t){this._viewFieldService.insert(t,e),this.refreshView()}},{key:"updateViewField",value:function(e,t,n){var r=this;Object.keys(n).forEach((function(o){r._viewFieldService.update(e,t,o,n[o])})),this.refreshView()}},{key:"cloneViewField",value:function(e,t,n){this._viewFieldService.clone(e,t,n),this.refreshView()}},{key:"importTable",value:function(e){this._tableService.replaceTable(e)}},{key:"setGroupItemCollapse",value:function(e,t,n,r){this._groupService.setGroupItemCollapse(e,t,n,r)}}])}();XI([Xs(MI)],JI.prototype,"_readService",2),XI([Xs(wI)],JI.prototype,"_tableService",2),XI([Xs(Px)],JI.prototype,"_fieldService",2),XI([Xs(qx)],JI.prototype,"_recordService",2),XI([Xs(uI)],JI.prototype,"_viewService",2),XI([Xs(XS)],JI.prototype,"_viewConfigService",2),XI([Xs(gj)],JI.prototype,"_viewRecordService",2),XI([Xs(tI)],JI.prototype,"_statService",2),XI([Xs(Jx)],JI.prototype,"_groupService",2),XI([Xs(Dj)],JI.prototype,"_sortService",2),XI([Xs(qj)],JI.prototype,"_filterService",2),XI([Xs(dx)],JI.prototype,"_cellService",2),XI([Xs($x)],JI.prototype,"_viewFieldService",2),XI([Xs(xx)],JI.prototype,"_valueProcessService",2),XI([Xs(EI)],JI.prototype,"_viewShareService",2),XI([Xs(UI)],JI.prototype,"_refreshEventService",2),XI([Xs(wx)],JI.prototype,"_cellEditService",2),JI=XI([Ys()],JI);var ZI=pd().register(zS).register(jI).register(wI).register(ix).register(UI).register(uI).register(dx).register(xx).register(Px).register(QS).register(qx).register(XS).register(gj).register($x).register(EI).register(tI).register(Jx).register(sj).register(nj).register(Dj).register(Sj).register(qj).register(Tj).register(Lj).register(Yj).register(fI).register(qS).register(MI).register(JI),QI=Object.defineProperty,eR=Object.getOwnPropertyDescriptor,tR=function(e,t,n,r){for(var o,i=r>1?void 0:r?eR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&QI(t,n,i),i},nR=function(){return Wb((function e(){Ub(this,e)}),[{key:"rules",get:function(){return[]}},{key:"getModelCell",value:function(e,t){return this._model.cellModel.findOne({field_uuid:e,record_uuid:t})}},{key:"updateModelCell",value:function(e,t,n,r,o,i,a){var l=this._model.fieldModel.findOne({uuid:e});!e||!t||this._model.cellModel.upsert({field_uuid:e,record_uuid:t},{field_uuid:e,record_uuid:t,format_value:n,key_value:null!=r?r:"",field_type:null==l?void 0:l.get("type"),verify:o,verify_message:i,by_system:!!a})}},{key:"getVerify",value:function(e){if(!e)return{};if(!this.rules||0===this.rules.length)return{};var t=this.rules.reduce((function(t,n){var r;return t+((null==(r=n.validator)?void 0:r.call(n,"",e))?"":n.errorMsg)}),"");return t?{verify:!1,errorMessage:t}:{verify:!0}}},{key:"bulkSetCell",value:function(e){}}])}();tR([Xs(zS)],nR.prototype,"_model",2),nR=tR([Ks()],nR);var rR=function(e){return e.core="core",e.kernel="kernel",e.command="command",e.workbench="workbench",e.render="render",e}(rR||{}),oR=Ts.defineToken("LoggerToken"),iR=Object.defineProperty,aR=Object.getOwnPropertyDescriptor,lR=function(e,t,n,r){for(var o,i=r>1?void 0:r?aR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&iR(t,n,i),i},uR="lakex_table_logs",cR=function(){return Wb((function e(){var t=this;Ub(this,e),this._logs=[],this._save=Rl((function(){var e;null==(e=window.localStorage)||e.setItem(uR,t.safeGetStorageValue())}),300)}),[{key:"_init",value:function(){var e;this.configuration.registerConfiguration({id:"logger",type:"object",title:"日志",properties:{maxLen:{type:"number",description:"最大日志长度"}}}),this.configuration.registerDefaultValue({"logger.maxLen":200}),typeof window<"u"?window.addEventListener("beforeunload",this._save):typeof Mn.exports<"u"&&Mn.exports.on("exit",this._save);var t=null==(e=window.localStorage)?void 0:e.getItem(uR);t&&(this._logs=JSON.parse(t))}},{key:"log",value:function(e){var t=this;e.time=i()().format("YYYY-MM-DD HH:mm:ss"),cw((function(){try{var n=t.configuration.getValue("logger.maxLen");t._logs=t._shiftLogs(t._logs,n),e.data&&(e.data=JSON.stringify(e.data)),t._logs.push(e),t._save()}catch(e){console.error(e)}}))}},{key:"_shiftLogs",value:function(e,t){return e.length>=t?(e.shift(),this._shiftLogs(e,t)):e}},{key:"getLogs",value:function(){return this._logs}},{key:"download",value:function(){var e=document.createElement("a");e.download="lakex_table_".concat((new Date).toISOString(),".json"),e.style.display="none",e.href=URL.createObjectURL(new Blob([JSON.stringify(Vb(this._logs))],{type:"application/json"})),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},{key:"safeGetStorageValue",value:function(){var e=JSON.stringify(this._logs);return e.length>=2621440?(this._logs=this._logs.map((function(e){return"kernelInited"===e.action&&(e.data=""),e})),JSON.stringify(this._logs)):e}},{key:"destroy",value:function(){this._save(),typeof window<"u"?window.removeEventListener("beforeunload",this._save):typeof Mn.exports<"u"&&Mn.exports.off("exit",this._save)}}])}();lR([Xs(R_)],cR.prototype,"configuration",2),lR([Ns()],cR.prototype,"_init",1),lR([Vs()],cR.prototype,"destroy",1),cR=lR([Ys({token:oR})],cR);var sR=pd().register(cR),dR=function(e){return e.PENDING="pending",e.RUNNING="running",e.SUCCESS="success",e.ERROR="error",e.ABORTED="aborted",e.TIMEOUT="timeout",e.WAITING="waiting",e}(dR||{});function fR(e,t,n){return t=P_(t),D_(e,pR()?Reflect.construct(t,[],P_(e).constructor):t.apply(e,n))}function pR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(pR=function(){return!!e})()}var hR=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ub(this,t),(e=fR(this,t))._retryCount=0,e._isRuning=!1,e._isStop=!1,e._onDidStatusChange=e._register(new ck),e.onDidStatusChange=e._onDidStatusChange.event,e.name=n.name,e._interval=n.interval||1e3,e._maxRetries=n.maxRetries||3,e}return F_(t,e),Wb(t,[{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this),this._job=null,this._retryCount=null,this._isRuning=null,this._lastRunAt=null,this._isStop=null,clearTimeout(this._timer),this._timer=null}},{key:"addJob",value:function(e){this._job=e}},{key:"hasRuningJob",value:function(){return!this._isStop}},{key:"run",value:(n=mC(X_.mark((function e(){var t;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isStop&&this._job){e.next=2;break}return e.abrupt("return");case 2:if(!(this._retryCount>=this._maxRetries)){e.next=4;break}return e.abrupt("return");case 4:if(!this._isRuning){e.next=6;break}return e.abrupt("return");case 6:if(t=+new Date,!(this._lastRunAt&&t-this._lastRunAt<this._interval)){e.next=9;break}return e.abrupt("return");case 9:return this._isRuning=!0,this._onDidStatusChange.emit(dR.RUNNING),e.prev=11,e.next=14,this._job();case 14:e.next=23;break;case 16:return e.prev=16,e.t0=e.catch(11),console.error(e.t0),this._retryCount++,e.next=22,this.run();case 22:return e.abrupt("return");case 23:this._isRuning=!1,this._retryCount=0,this._lastRunAt=+new Date;case 26:case"end":return e.stop()}}),e,this,[[11,16]])}))),function(){return n.apply(this,arguments)})},{key:"start",value:function(){var e=this;this.run().then((function(){e._timer=setTimeout(mC(X_.mark((function t(){return X_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.start();case 1:case"end":return t.stop()}}),t)}))),e._interval)}))}},{key:"stop",value:function(){this._isStop=!0,clearTimeout(this._timer),this._onDidStatusChange.emit(dR.ABORTED)}},{key:"resume",value:function(){this._isStop=!1,this.start()}}]);var n}($_);function vR(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gR(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function gR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mR(e,t,n){return t=P_(t),D_(e,yR()?Reflect.construct(t,[],P_(e).constructor):t.apply(e,n))}function yR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(yR=function(){return!!e})()}var bR=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ub(this,t),(e=mR(this,t))._jobs=[],e._penddingJobs=[],e._runingJobs=[],e._successJobs=[],e._errorJobs=[],e._isRuning=!1,e._isStop=!1,e._onDidStatusChange=e._register(new ck),e.onDidStatusChange=e._onDidStatusChange.event,e.stop=function(){e._isStop=!0,e._onDidStatusChange.emit({status:dR.ABORTED})},e.resume=function(){e._isStop&&(e._isStop=!1,e.start())},e.name=n.name,e._parallel=n.parallel||5,e}return F_(t,e),Wb(t,[{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this),this._jobs=[],this._penddingJobs=[],this._runingJobs=[],this._successJobs=[],this._errorJobs=[],this._isRuning=!1,this._isStop=!1}},{key:"getJob",value:function(e){return this._jobs.find((function(t){return t.id===e}))}},{key:"getSuccessJobs",value:function(){var e=this;return this._successJobs.map((function(t){return e._jobs.find((function(e){return e.id===t}))})).filter((function(e){return!!e}))}},{key:"getRunningJobs",value:function(){var e=this;return this._runingJobs.map((function(t){return e._jobs.find((function(e){return e.id===t}))})).filter((function(e){return!!e}))}},{key:"hasRuningJob",value:function(){return!this._isStop&&!!this._runingJobs.length}},{key:"hasPenddingJob",value:function(){return!!this._penddingJobs.length}},{key:"runJob",value:function(e){var t=this,n=this._jobs.find((function(t){return t.id===e}));if(n&&!this._runingJobs.find((function(t){return t===e}))&&!this._successJobs.find((function(t){return t===e}))){this._errorJobs.find((function(t){return t===e}))&&hu(this._errorJobs,(function(t){return t===e})),hu(this._penddingJobs,(function(t){return t===e})),this._runingJobs.push(e),n.runAt=new Date;var r=function(){n.endAt=new Date,n.spend=Number(n.endAt)-Number(n.runAt),n.runCount=n.runCount?n.runCount+1:1,hu(t._runingJobs,(function(t){return t===e})),t._run()};try{n.handler({jobId:e,onSuccess:function(){n.status=dR.SUCCESS,t._onDidStatusChange.emit({status:dR.SUCCESS,jobId:n.id}),t._successJobs.push(n.id),r()},onError:function(){n.status=dR.ERROR,t._errorJobs.push(n.id),r()},onProcess:function(e){n.percent=e,t._onDidStatusChange.emit({status:dR.RUNNING,jobId:n.id,percent:e})}})}catch(e){console.error(e)}}}},{key:"_run",value:function(){if(!this._isStop){var e=this._runingJobs.length;if(e<this._parallel){var t=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Co(e,t,n)?(t=0,n=r):(t=null==t?0:jr(t),n=void 0===n?r:jr(n)),Vi(e,t,n)):[]}(this._penddingJobs,0,this._parallel-e);if(0===t.length)return this._isRuning=!1,void this._onDidStatusChange.emit({status:dR.WAITING});var n,r=vR(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;this._isRuning=!0,this.runJob(o)}}catch(e){r.e(e)}finally{r.f()}return}0===e&&(this._isRuning=!1,this._onDidStatusChange.emit({status:dR.WAITING}))}}},{key:"start",value:function(){this._onDidStatusChange.emit({status:dR.PENDING}),this._run()}},{key:"addJob",value:function(e,t){1===arguments.length?(t=e,e=fw(16)):"string"==typeof e&&(hu(this._jobs,(function(t){return t===e})),hu(this._penddingJobs,(function(t){return t===e})));var n={id:e,status:dR.PENDING,handler:t};return this._jobs.push(n),this._penddingJobs.push(n.id),!this._isRuning&&!this._isStop&&this.start(),n}},{key:"removeSuccessJob",value:function(e){hu(this._successJobs,(function(t){return t===e}))}}])}($_);function wR(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _R(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function _R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kR=Object.defineProperty,CR=Object.getOwnPropertyDescriptor,ER=function(e,t,n,r){for(var o,i=r>1?void 0:r?CR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&kR(t,n,i),i},OR=function(){return Wb((function e(){Ub(this,e),this._queueTasks=[]}),[{key:"init",value:function(){var e=this;this.beforeUnload=sC.onBeforeUnLoad((function(t){var n,r=wR(e._queueTasks);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.hasRuningJob())return t.preventDefault(),t.returnValue="",uw("还有 ".concat(o.name," 正在运行中，确认要离开页面吗."))}}catch(e){r.e(e)}finally{r.f()}}))}},{key:"createRepeatTask",value:function(e){return new hR(e)}},{key:"createQueueTask",value:function(e){var t=new bR(e);return this._queueTasks.push(t),t}},{key:"destroy",value:function(){var e;null==(e=this.beforeUnload)||e.destroy()}}])}();ER([Ns()],OR.prototype,"init",1),ER([Vs()],OR.prototype,"destroy",1),OR=ER([Ys()],OR);var SR=pd().register(OR),xR=Ts.defineToken("UserContribution"),jR=Object.defineProperty,IR=Object.getOwnPropertyDescriptor,RR=function(e,t,n,r){for(var o,i=r>1?void 0:r?IR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jR(t,n,i),i},AR=function(){return Wb((function e(){Ub(this,e)}),[{key:"getProvider",value:function(){var e=this.userProvider.getContributions(),t=e[e.length-1];return null==t?void 0:t.registerUser()}}])}();RR([bd(xR)],AR.prototype,"userProvider",2),AR=RR([Ys()],AR);var DR=Object.defineProperty,PR=Object.getOwnPropertyDescriptor,MR=function(e,t,n,r){for(var o,i=r>1?void 0:r?PR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&DR(t,n,i),i},TR=function(){return Wb((function e(){Ub(this,e)}),[{key:"provider",get:function(){return this._userRegistry.getProvider()}},{key:"searchUser",value:(e=mC(X_.mark((function e(t){var n;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(n=this.provider)?void 0:n.searchUser(t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"contextUsers",value:function(){var e=mC(X_.mark((function e(){var t;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(t=this.provider)?void 0:t.contextUsers();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e;return null==(e=this.provider)?void 0:e.getCurrentUser()}}]);var e}();MR([Xs(AR)],TR.prototype,"_userRegistry",2),TR=MR([Ys()],TR);var FR=pd().contribution(xR).register(AR).register(TR),NR=Ts.defineToken("LinkDetailContribution"),VR=Object.defineProperty,LR=Object.getOwnPropertyDescriptor,BR=function(e,t,n,r){for(var o,i=r>1?void 0:r?LR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&VR(t,n,i),i},$R=function(){return Wb((function e(){Ub(this,e)}),[{key:"getLinkDetailProvider",value:function(){var e=this.linkDetailProvider.getContributions()||[],t=e[e.length-1];return null==t?void 0:t.registerLinkDetail()}}])}();BR([bd(NR)],$R.prototype,"linkDetailProvider",2),$R=BR([Ys()],$R);var zR=Object.defineProperty,UR=Object.getOwnPropertyDescriptor,HR=function(e,t,n,r){for(var o,i=r>1?void 0:r?UR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zR(t,n,i),i},qR=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){var e=this;this._queueTask=new bR({name:"获取连接详情任务队列",parallel:1}),this.timerId=setInterval((function(){var t;null==(t=e._queueTask)||t.resume()}),1e3)}},{key:"addUpdateLinkDetailJob",value:function(e){var t;null==(t=this._queueTask)||t.addJob(function(){var t=mC(X_.mark((function t(n){return X_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",n.onError(t.t0));case 9:n.onSuccess();case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}())}},{key:"getLinkDetail",value:(e=mC(X_.mark((function e(t){var n,r,o;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=null==(r=null==(n=this._linkRegistry.getLinkDetailProvider())?void 0:n.getLinkDetail)?void 0:r.call(n,t),e.abrupt("return",o);case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(t){return e.apply(this,arguments)})},{key:"getIconByDetail",value:function(e){var t=(null==e?void 0:e.image)||"";return e.target_type&&(t="yuqueicon:".concat(e.target_type,":").concat(e.type)),t}},{key:"destroy",value:function(){var e;null==(e=this._queueTask)||e.destroy(),this._queueTask=null,clearInterval(this.timerId),this.timerId=null}}]);var e}();function WR(e,t,n){return t=P_(t),D_(e,GR()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function GR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(GR=function(){return!!e})()}HR([Xs($R)],qR.prototype,"_linkRegistry",2),HR([Ns()],qR.prototype,"init",1),HR([Vs()],qR.prototype,"destroy",1),qR=HR([Ys()],qR);var KR=Object.defineProperty,YR=Object.getOwnPropertyDescriptor,XR=function(e,t,n,r){for(var o,i=r>1?void 0:r?YR(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&KR(t,n,i),i},JR=function(e){function t(){return Ub(this,t),WR(this,t,arguments)}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldUriModel}},{key:"type",get:function(){return JR.type}},{key:"baseType",get:function(){return JR.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return!(!ww(t)&&null!=t)||Bw(t.src||t)},errorMsg:uw("输入格式有误")}]}},{key:"validate",value:function(e){if(!e)return!0;var t=e.name,n=e.src;return!(!t||!n)&&((null==t?void 0:t.length)>JR.MAX_LENGTH&&(e.name=t.substring(0,JR.MAX_LENGTH)),!!i_(n))}},{key:"transform",value:function(e){var t;if(!e)return null;if("string"==typeof e){if(i_(e))return{value:{name:e,src:e}};var n;try{n=new URL(e)}catch{try{n=new URL("http://"+e)}catch{return{value:{name:e,src:(null==(t=globalThis.location)?void 0:t.href)||"https://www.yuque.com"}}}}var r=n.host.split(".");return 1===r.length&&(n.host=r[0]+".com"),{value:{name:e,src:n.toString().replace(/\/$/gi,"")}}}return{value:{name:e.name||"",src:e.src||""}}}},{key:"formatted",value:function(e){return null==e?"":e.name||""}},{key:"keyValue",value:function(e){return e&&e.name&&e.src?"".concat(e.name,"|").concat(e.src):""}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r={name:(null==n?void 0:n.get("name"))||"",src:(null==n?void 0:n.get("src"))||"",icon:(null==n?void 0:n.get("icon"))||""},o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),verify:o.get("verify"),errorMessage:o.get("verify_message"),updated_at:o.get("updated_at"),value:r,by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new m_}},{key:"_asyncUpdateLinkDetail",value:function(e,t,n){var r=this;n.icon||this._linkService.addUpdateLinkDetailJob(mC(X_.mark((function o(){var i,a,l,u,c;return X_.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r._linkService.getLinkDetail(n.src);case 2:if((a=o.sent)&&a.title){o.next=6;break}return r.model.upsert({field_uuid:e,record_uuid:t},{icon:null}),o.abrupt("return");case 6:if(l=r.getCell(e,t)){o.next=9;break}return o.abrupt("return");case 9:if((null==(i=l.value)?void 0:i.src)===n.src){o.next=11;break}return o.abrupt("return");case 11:if(a.target_type||!n.name){o.next=13;break}return o.abrupt("return");case 13:u=a.title,n.name&&n.name!==n.src&&(u=n.name),c=r._linkService.getIconByDetail(a),r.model.upsert({field_uuid:e,record_uuid:t},{field_uuid:e,record_uuid:t,name:u,icon:c}),r._model.cellModel.upsert({field_uuid:e,record_uuid:t},{field_uuid:e,record_uuid:t,format_value:r.formatted({name:u,src:n.src,icon:n.icon})}),r._eventService._onCellChange.emit({fieldId:e,recordId:t,cellValue:r.getCell(e,t)});case 19:case"end":return o.stop()}}),o)}))))}},{key:"upsertModelCell",value:function(e,t,n,r){var o=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),o.verify,o.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,name:n.value.name,src:n.value.src,icon:n.value.icon}),this.upsertModelCell(e,t,n.value),this._asyncUpdateLinkDetail(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){var r,o,i;return t.upsertModelCell(n,e.recordId,e.value),t._asyncUpdateLinkDetail(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:n,record_uuid:e.recordId,name:null==(r=e.value)?void 0:r.name,src:null==(o=e.value)?void 0:o.src,icon:null==(i=e.value)?void 0:i.icon}})))}}])}(nR);JR.type=bC.LINK,JR.baseType=wC.URI,JR.MAX_LENGTH=128,XR([Xs(qR)],JR.prototype,"_linkService",2),XR([Xs(ix)],JR.prototype,"_eventService",2),JR=XR([Ys()],JR);var ZR=function(){return Wb((function e(t,n,r,o,i){Ub(this,e),this.kernel=t,this.plugin=n,this.readService=r,this.writeService=o,this.modelService=i}),[{key:"init",value:function(){}},{key:"destroy",value:function(){}}])}(),QR=Ts.defineToken("CommandRegistry"),eA=Ts.defineToken("CommandExecutor");function tA(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return nA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nA(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function nA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rA(e,t,n){return t=P_(t),D_(e,oA()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function oA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(oA=function(){return!!e})()}var iA=Object.defineProperty,aA=Object.getOwnPropertyDescriptor,lA=function(e,t,n,r){for(var o,i=r>1?void 0:r?aA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&iA(t,n,i),i},uA=function(e){function t(){var e;return Ub(this,t),(e=rA(this,t,arguments))._onDidUndoCommand=e._register(new ck),e.onDidUndoCommand=e._onDidUndoCommand.event,e._onDidRedoCommand=e._register(new ck),e.onDidRedoCommand=e._onDidRedoCommand.event,e}return F_(t,e),Wb(t,[{key:"onWillExecuteCommand",get:function(){return this._commandExecutor.onWillExecuteCommand}},{key:"onDidExecuteCommand",get:function(){return this._commandExecutor.onDidExecuteCommand}},{key:"onCancelExecuteCommand",get:function(){return this._commandExecutor.onCancelExecuteCommand}},{key:"onFinishExecuteCommand",get:function(){return this._commandExecutor.onFinishExecuteCommand}},{key:"destroy",value:function(){this._commandRegistry.destroy(),this._commandExecutor.destroy()}},{key:"seal",value:function(){this._commandRegistry.seal()}},{key:"registerCommand",value:function(e,t,n){this._commandRegistry.register(e,t,n)}},{key:"registerCommandHook",value:function(e,t){this._commandRegistry.registerCommandHook(e,t)}},{key:"getCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._commandRegistry.getByName(e,t,n)}},{key:"getCommandHook",value:function(e){return this._commandRegistry.getCommandHooks(e)}},{key:"execCommand",value:function(e,t,n){var r=this,o=this.getCommand(e,n);if(!o)return null;o.beforeExecute&&(t=o.beforeExecute.call(o,t));var i,a=this._commandRegistry.getCommandHooks(e);if(a.length>0){var l,u=tA(a);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.beforeExecute&&(t=c.beforeExecute(t,this._readService))}}catch(e){u.e(e)}finally{u.f()}}return this._logger.log({type:rR.command,action:e,data:t}),this._database.stack.transact((function(){var e;if(i=null==o?void 0:o.execute.call(o,t),a.length>0){var n,l=tA(a);try{for(l.s();!(n=l.n()).done;){var u=n.value;u.afterExecute&&u.afterExecute(null==i?void 0:i.result,t,r._readService)}}catch(e){l.e(e)}finally{l.f()}}o.afterExecute?t=o.afterExecute.call(o,t,null==i?void 0:i.result,r._refreshEventService):(null==(e=o.context)||e.destroy(),o.context=null)})),i}},{key:"execRemoteCommand",value:function(e,t,n,r){var o=this.getCommand(e,r,!0);return o?(n&&(n.modifierId=null==t?void 0:t.uid),this._contentService.setUsers([t]),null==o?void 0:o.execute.call(o,n)):null}},{key:"undo",value:function(){var e;if(null==(e=this._database.stack)||!e.canUndo())return!1;this._database.stack.undo(),this._onDidUndoCommand.emit()}},{key:"redo",value:function(){var e;if(null==(e=this._database.stack)||!e.canRedo())return!1;this._database.stack.redo(),this._onDidRedoCommand.emit()}}])}($_);lA([Xs(MI)],uA.prototype,"_readService",2),lA([Xs(fI)],uA.prototype,"_contentService",2),lA([Xs(QR)],uA.prototype,"_commandRegistry",2),lA([Xs(eA)],uA.prototype,"_commandExecutor",2),lA([Xs(UI)],uA.prototype,"_refreshEventService",2),lA([Xs(u_)],uA.prototype,"_database",2),lA([Xs(oR)],uA.prototype,"_logger",2),lA([Vs()],uA.prototype,"destroy",1),uA=lA([Ys()],uA);var cA=Object.defineProperty,sA=Object.getOwnPropertyDescriptor,dA=function(e,t,n,r){for(var o,i=r>1?void 0:r?sA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cA(t,n,i),i},fA=function(){return Wb((function e(){Ub(this,e),this._pool={},this._commands={},this._commandHooks={},this._isSealed=!1}),[{key:"destroy",value:function(){var e=this;Object.keys(this._commands).forEach((function(t){e._commands[t].destroy()})),this._pool={},this._commands={},this._commandHooks={},this._isSealed=!1}},{key:"seal",value:function(){this._isSealed||(this._isSealed=!0,this.initCommand())}},{key:"getByName",value:function(e,t,n){var r=this._commands[e];return r?r=this.trap(e,r,t,n):(console.warn('This command "'.concat(e,'" is not registered')),null)}},{key:"getCommandHooks",value:function(e){return this._commands[e]?this._commandHooks[e]||[]:(console.warn('This command "'.concat(e,'" is not registered')),[])}},{key:"register",value:function(e,t,n){if(this._pool[e])throw new Error("The command ".concat(e," has been registered"));if(this._isSealed)throw new Error("No command can be registered at this stage");this._pool[e]={clazz:t,plugin:n}}},{key:"registerCommandHook",value:function(e,t){this._pool[e]&&(this._commandHooks[e]||(this._commandHooks[e]=[]),this._commandHooks[e].push(t))}},{key:"trap",value:function(e,t,n,r){var o=this,i=t._rawExec||t.execute;return t._rawExec=i,t.execute=new Proxy(t.execute,{apply:function(a,l,u){return o._commandExecutor.exec(e,t,n,r,i,l,u)}}),t}},{key:"initCommand",value:function(){var e=this;Object.keys(this._pool).forEach((function(t){var n=e._pool[t],r=n.clazz,o=n.plugin,i=e.trap(t,new r(e._kernel,o,e._readService,e._writeService,e._modelService),!1,!1);i.init(),e._commands[t]=i}))}}])}();dA([Xs(eA)],fA.prototype,"_commandExecutor",2),dA([Xs(MI)],fA.prototype,"_readService",2),dA([Xs(JI)],fA.prototype,"_writeService",2),dA([Xs(ME)],fA.prototype,"_modelService",2),fA=dA([Ys({token:QR})],fA);var pA=function(){return Wb((function e(t,n,r){Ub(this,e),this.commandExecutor=t,this.commandName=n,this.argArray=r,this.startTime=0,this.usedTime=0}),[{key:"destroy",value:function(){delete this._remote,delete this._user,this.startTime=0,this.usedTime=0}},{key:"isRemote",get:function(){return this._remote}},{key:"user",get:function(){return this._user}},{key:"setRemote",value:function(e){this._remote=e}},{key:"setUser",value:function(e){this._user=e}},{key:"setStartTime",value:function(e){this.startTime=e}},{key:"setUsedTime",value:function(e){this.usedTime=e}},{key:"cancel",value:function(){}}])}(),hA=function(){return Wb((function e(t){Ub(this,e),this.notify=t}),[{key:"destroy",value:function(){var e=this;delete e.notify,delete e._operations,delete e.notify}},{key:"execute",value:function(e){var t,n,r,o,i,a,l,u,c;null==(n=null==(t=this.notify)?void 0:t.beforeExecute)||n.call(t,this);try{c=e(),null==(o=null==(r=this.notify)?void 0:r.afterExecute)||o.call(r,this)}catch(e){return console.error(e),this.rollback(),null==(a=null==(i=this.notify)?void 0:i.completed)||a.call(i,this,!1),{isSuccess:!1,error:e}}return null==(u=null==(l=this.notify)?void 0:l.completed)||u.call(l,this,!0),{isSuccess:!0,result:c}}},{key:"rollback",value:function(){}}])}();function vA(e,t,n){return t=P_(t),D_(e,gA()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function gA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(gA=function(){return!!e})()}var mA=Object.defineProperty,yA=Object.getOwnPropertyDescriptor,bA=function(e,t,n,r){for(var o,i=r>1?void 0:r?yA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&mA(t,n,i),i},wA=function(e){function t(){var e;return Ub(this,t),(e=vA(this,t,arguments))._onWillExecuteCommand=e._register(new ck),e.onWillExecuteCommand=e._onWillExecuteCommand.event,e._onDidExecuteCommand=e._register(new ck),e.onDidExecuteCommand=e._onDidExecuteCommand.event,e._onCancelExecuteCommand=e._register(new ck),e.onCancelExecuteCommand=e._onCancelExecuteCommand.event,e._onFinishExecuteCommand=e._register(new ck),e.onFinishExecuteCommand=e._onFinishExecuteCommand.event,e}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"_process",value:function(e,t){var n=this,r=new hA({beforeExecute:function(t){e.setUsedTime(+new Date-e.startTime),n._onWillExecuteCommand.emit({context:e})},afterExecute:function(t){e.setUsedTime(+new Date-e.startTime),n._onDidExecuteCommand.emit({context:e})},completed:function(t,r){if(!r)return n._onCancelExecuteCommand.emit({changed:!0});e.setUsedTime(+new Date-e.startTime),n._onFinishExecuteCommand.emit({context:e})}}),o=r.execute(t);return r.destroy(),o}},{key:"execCommand",value:function(e,t){return this._process(e,t)}},{key:"exec",value:function(e,t,n,r,o,i,a){var l=this,u=new pA(this,e,a);return u.setStartTime(+new Date),this.execCommand(u,(function(){return u.setRemote(r),u.setUser(l.readService.currentUser),t.context=u,o.call.apply(o,[i].concat(Vb(a)))}))}}])}($_);bA([Xs(MI)],wA.prototype,"readService",2),bA([Xs(JI)],wA.prototype,"writeService",2),bA([Xs(ME)],wA.prototype,"modelService",2),bA([Vs()],wA.prototype,"destroy",1),wA=bA([Ys({token:eA})],wA);var _A=pd().register(wA).register(fA).register(uA);Ts.defineToken("KernelService");var kA=Ts.defineToken("KernelPluginContribution"),CA=function(e){return e.CREATE="create",e.DELETE="delete",e.READ="read",e.UPDATE="update",e.EDIT="edit",e.TRANSFORM="transform",e}(CA||{}),EA=function(e){return e.TABLE="table",e.FIELD="field",e.RECORD="record",e}(EA||{}),OA=Object.defineProperty,SA=Object.getOwnPropertyDescriptor,xA=function(e,t,n,r){for(var o,i=r>1?void 0:r?SA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&OA(t,n,i),i},jA=function(){return Wb((function e(){Ub(this,e),this._abilityMap=new Map}),[{key:"registerConfiguration",value:function(){this._configuration.registerConfiguration({id:"ability",type:"object",title:"权限"})}},{key:"getAbilities",value:function(){return Array.from(this._abilityMap.values())}},{key:"getAbility",value:function(e){return this._abilityMap.get(e)}},{key:"registerAbility",value:function(e){this._abilityMap.set(e.id,e)}}])}();function IA(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return RA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RA(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function RA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}xA([Xs(R_)],jA.prototype,"_configuration",2),xA([Ns()],jA.prototype,"registerConfiguration",1),jA=xA([Ys()],jA);var AA=Object.defineProperty,DA=Object.getOwnPropertyDescriptor,PA=function(e,t,n,r){for(var o,i=r>1?void 0:r?DA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&AA(t,n,i),i},MA=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){var e,t,n=IA(this._abilityRegistry.getAbilities());try{for(n.s();!(t=n.n()).done;){var r=t.value;null==(e=r.init)||e.call(r)}}catch(e){n.e(e)}finally{n.f()}}}])}();PA([Xs(jA)],MA.prototype,"_abilityRegistry",2),MA=PA([Ys()],MA);var TA=Object.defineProperty,FA=Object.getOwnPropertyDescriptor,NA=function(e,t,n,r){for(var o,i=r>1?void 0:r?FA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&TA(t,n,i),i},VA=function(){return Wb((function e(){Ub(this,e)}),[{key:"isReadonly",value:function(e){var t=this._abilityRegistry.getAbility(EA.TABLE);if(!t.read()||t.update())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return!!n.read.apply(n,o)&&!n.update.apply(n,o)}},{key:"can",value:function(e,t){for(var n,r,o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];if(e===CA.CREATE)return this.canCreate.apply(this,[t].concat(i));if(e===CA.DELETE)return this.canDelete.apply(this,[t].concat(i));if(e===CA.READ)return this.canRead.apply(this,[t].concat(i));if(e===CA.UPDATE)return this.canUpdate.apply(this,[t].concat(i));if(!t)return!1;var l=this._abilityRegistry.getAbility(t);return!!l&&!(null==(r=l[e])||!(n=r).call.apply(n,[l].concat(i)))}},{key:"canCreate",value:function(e){var t=this._abilityRegistry.getAbility(EA.TABLE);if(!e||e===EA.TABLE)return t.create();if(!t.create()||!t.update())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return!!n.create.apply(n,o)}},{key:"canDelete",value:function(e){var t=this._abilityRegistry.getAbility(EA.TABLE);if(!e||e===EA.TABLE)return t.delete();if(!t.delete()||!t.update())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return!!n.delete.apply(n,o)}},{key:"canRead",value:function(e){var t=this._abilityRegistry.getAbility(EA.TABLE);if(!e||e===EA.TABLE)return t.read();if(!t.read())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return!!n.read.apply(n,o)}},{key:"canUpdate",value:function(e){var t=this._abilityRegistry.getAbility(EA.TABLE);if(!e||e===EA.TABLE)return t.update();if(!t.update())return!1;var n=this._abilityRegistry.getAbility(e);if(!n)return!1;for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return!!n.update.apply(n,o)}}])}();NA([Xs(jA)],VA.prototype,"_abilityRegistry",2),VA=NA([Ys()],VA);var LA=Object.defineProperty,BA=Object.getOwnPropertyDescriptor,$A=function(e,t,n,r){for(var o,i=r>1?void 0:r?BA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&LA(t,n,i),i},zA=function(){return Wb((function e(){Ub(this,e),this.id=EA.TABLE}),[{key:"registerConfiguration",value:function(){this._configuration.registerConfiguration({id:"ability.table",type:"object",title:"table表权限",properties:{create:{type:"boolean",description:"新增权限，控制能否新增字段或记录"},delete:{type:"boolean",description:"删除权限，控制能否删除字段或记录"},read:{type:"boolean",description:"可读权限，控制字段或记录是否可读"},update:{type:"boolean",description:"更新权限，控制能否更新字段或记录，能否新增、删除、复制、拖拽视图，能否拖拽记录、字段"}}}),this._configuration.registerDefaultValue({"ability.table.create":!0,"ability.table.delete":!0,"ability.table.read":!0,"ability.table.update":!0})}},{key:"init",value:function(){}},{key:"getAbilities",value:function(){return this._configuration.getValue("ability.table")}},{key:"create",value:function(){return this._configuration.getValue("ability.table.create")}},{key:"delete",value:function(){return this._configuration.getValue("ability.table.delete")}},{key:"read",value:function(){return this._configuration.getValue("ability.table.read")}},{key:"update",value:function(){return this._configuration.getValue("ability.table.update")}}])}();$A([Xs(R_)],zA.prototype,"_configuration",2),$A([Ns()],zA.prototype,"registerConfiguration",1),zA=$A([Ys()],zA);var UA=Object.defineProperty,HA=Object.getOwnPropertyDescriptor,qA=function(e,t,n,r){for(var o,i=r>1?void 0:r?HA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&UA(t,n,i),i},WA=function(){return Wb((function e(){Ub(this,e),this.id=EA.FIELD}),[{key:"registerConfiguration",value:function(){this._configuration.registerConfiguration({id:"ability.field",type:"object",title:"field表权限",properties:{create:{type:"boolean",description:"字段新增权限"},delete:{type:"boolean",description:"字段删除权限"},deleteAllowList:{type:"array",items:{type:"string"},description:"可删除字段列表"},read:{type:"boolean",description:"字段可读权限"},readAllowList:{type:"array",items:{type:"string"},description:"可读字段列表"},update:{type:"boolean",description:"字段更新权限，控制能否修改字段名称、新增字段选项"},updateAllowList:{type:"array",items:{type:"string"},description:"可更新字段列表"},transform:{type:"boolean",description:"字段类型转换权限"},transformAllowList:{type:"array",items:{type:"string"},description:"可类型转换字段列表"},edit:{type:"boolean",description:"字段内容编辑权限"},editAllowList:{type:"boolean",description:"可编辑字段列表"}}}),this._configuration.registerDefaultValue({"ability.field.create":!0,"ability.field.delete":!0,"ability.field.read":!0,"ability.field.update":!0,"ability.field.transform":!0,"ability.field.edit":!0,"ability.field.readAllowList":["*"],"ability.field.editAllowList":["*"],"ability.field.updateAllowList":["*"],"ability.field.deleteAllowList":["*"],"ability.field.transformAllowList":["*"]})}},{key:"isAllow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["*"];return"*"===t[0]||t.indexOf(e)>=0}},{key:"init",value:function(){}},{key:"create",value:function(e){if(e&&this._fieldRegistry.getValueField(e.get("type")).createDisable)return!1;return this._configuration.getValue("ability.field.create")}},{key:"delete",value:function(e){if(this._fieldRegistry.getValueField(e.get("type")).deleteDisable)return!1;var t=this._configuration.getValue("ability.field.delete"),n=this._configuration.getValue("ability.field.deleteAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}},{key:"read",value:function(e){var t=this._configuration.getValue("ability.field.read"),n=this._configuration.getValue("ability.field.readAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}},{key:"update",value:function(e){var t=this._configuration.getValue("ability.field.update"),n=this._configuration.getValue("ability.field.updateAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}},{key:"transform",value:function(e){var t=this._fieldRegistry.getValueField(e.get("type"));if(null!=t&&t.transformDisable)return!1;var n=this._configuration.getValue("ability.field.transform"),r=this._configuration.getValue("ability.field.transformAllowList");return!0===n?this.isAllow(e.get("uuid"),r):n}},{key:"edit",value:function(e){if(this._fieldRegistry.getValueField(e.get("type")).editDisable)return!1;var t=this._configuration.getValue("ability.field.edit"),n=this._configuration.getValue("ability.field.editAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}}])}();qA([Xs(QS)],WA.prototype,"_fieldRegistry",2),qA([Xs(R_)],WA.prototype,"_configuration",2),qA([Ns()],WA.prototype,"registerConfiguration",1),WA=qA([Ys()],WA);var GA=Object.defineProperty,KA=Object.getOwnPropertyDescriptor,YA=function(e,t,n,r){for(var o,i=r>1?void 0:r?KA(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&GA(t,n,i),i},XA=function(){return Wb((function e(){Ub(this,e),this.id=EA.RECORD}),[{key:"registerConfiguration",value:function(){this._configuration.registerConfiguration({id:"ability.record",type:"object",title:"record表权限",properties:{create:{type:"boolean",description:"记录新增权限"},delete:{type:"boolean",description:"记录删除权限"},deleteAllowList:{type:"array",items:{type:"string"},description:"可删除记录列表"},read:{type:"boolean",description:"记录可读权限"},readAllowList:{type:"array",items:{type:"string"},description:"可读记录列表"},update:{type:"boolean",description:"记录更新权限，控制能否修改记录描述"},updateAllowList:{type:"array",items:{type:"string"},description:"可更新记录列表"},edit:{type:"boolean",description:"记录内容编辑权限"},editAllowList:{type:"array",items:{type:"string"},description:"可编辑记录列表"}}}),this._configuration.registerDefaultValue({"ability.record.create":!0,"ability.record.delete":!0,"ability.record.read":!0,"ability.record.update":!0,"ability.record.edit":!0,"ability.record.readAllowList":["*"],"ability.record.editAllowList":["*"],"ability.record.updateAllowList":["*"],"ability.record.deleteAllowList":["*"]})}},{key:"isAllow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["*"];return"*"===t[0]||t.indexOf(e)>=0}},{key:"init",value:function(){}},{key:"create",value:function(){return this._configuration.getValue("ability.record.create")}},{key:"delete",value:function(e){var t=this._configuration.getValue("ability.record.delete"),n=this._configuration.getValue("ability.record.deleteAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}},{key:"read",value:function(e){var t=this._configuration.getValue("ability.record.read"),n=this._configuration.getValue("ability.record.readAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}},{key:"update",value:function(e){var t=this._configuration.getValue("ability.record.update"),n=this._configuration.getValue("ability.record.updateAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}},{key:"edit",value:function(e){var t=this._configuration.getValue("ability.record.edit"),n=this._configuration.getValue("ability.record.editAllowList");return!0===t?this.isAllow(e.get("uuid"),n):t}}])}();YA([Xs(R_)],XA.prototype,"_configuration",2),YA([Ns()],XA.prototype,"registerConfiguration",1),XA=YA([Ys()],XA);var JA=pd().register(MA).register(zA).register(WA).register(XA).register(jA).register(VA);function ZA(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return QA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QA(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function QA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eD(e,t,n){return t=P_(t),D_(e,tD()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function tD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(tD=function(){return!!e})()}var nD=Object.defineProperty,rD=Object.getOwnPropertyDescriptor,oD=function(e,t,n,r){for(var o,i=r>1?void 0:r?rD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&nD(t,n,i),i},iD=function(e){function t(){var e;return Ub(this,t),(e=eD(this,t,arguments))._onDataLoaded=e._register(new ck),e.onDataLoaded=e._onDataLoaded.event,e._onDataChanged=e._register(new ck),e.onDataChanged=e._onDataChanged.event,e._onCollabUsersChange=e._register(new ck),e.onCollabUsersChange=e._onCollabUsersChange.event,e._isFirstLoad=!0,e._isRecordFirstLoad=!0,e.hooks={init:new Hk,destroy:new qk},e}return F_(t,e),Wb(t,[{key:"init",value:(n=mC(X_.mark((function e(t){var n;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.container,this.registerAbility(this._tableAbility),this.registerAbility(this._fieldAbility),this.registerAbility(this._recordAbility),n.get(MA).init(),this._listenEvent(),this._initPlugins(),e.next=9,this.hooks.init.promise();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"initCommandHooks",value:function(e){var t,n=ZA(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._commandService.registerCommandHook(r.commandName,r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"_initPlugins",value:function(){var e=this;this.kernelPluginProvider.getContributions({cache:!1}).forEach((function(t){t._inited||(t.init(e),t._inited=!0)})),this._commandService.seal()}},{key:"_listenEvent",value:function(){var e=this;this._commandService.onDidExecuteCommand((function(){e._onDataChanged.emit("command-execute")})),this._commandService.onDidUndoCommand((function(){e._onDataChanged.emit("command-undo")})),this._commandService.onDidRedoCommand((function(){e._onDataChanged.emit("command-redo")})),this._refreshEventService.onAfterRefresh((function(){e._onDataChanged.emit("refresh-event")}))}},{key:"registerField",value:function(e){this._fieldRegistry.registerField(e)}},{key:"registerAbility",value:function(e){this._abilityRegistry.registerAbility(e)}},{key:"setContent",value:function(e){var t=this;e&&(this._lifeService.status<Jb.WorkbenchInited?this._lifeService.when(Jb.WorkbenchInited,(function(){t._loadData(e)})):this._loadData(e))}},{key:"_loadData",value:function(e){this._isFirstLoad&&(this._lifeService.status=Jb.Starting);var t=(e="string"==typeof e?JSON.parse(e):Object.assign({},e)).records;delete e.records,this._kernelModel.initData(e),this._isFirstLoad&&(this._lifeService.status=Jb.Ready,this._logger.log({type:rR.kernel,action:"dataReady"})),this._onDataLoaded.emit("loadedData"),t&&this.setRecords(t),this._isFirstLoad=!1}},{key:"setRecords",value:function(e){var t=this;e&&(this._lifeService.status<Jb.Ready?this._lifeService.when(Jb.Ready,(function(){t._loadRecords(e)})):this._loadRecords(e))}},{key:"_loadRecords",value:function(e){this._isRecordFirstLoad?(this._lifeService.status=Jb.RecordInit,this._kernelModel.initRecords(e),this._lifeService.status=Jb.RecordReady,this._isRecordFirstLoad=!1,this._logger.log({type:rR.kernel,action:"recordReady",data:[]})):this._kernelModel.initRecords(e),this._onDataLoaded.emit("loadedRecords")}},{key:"setUsers",value:function(e){e&&this._kernelModel.initUsers(e)}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this),this.kernelPluginProvider.getContributions({cache:!1}).forEach((function(e){var t;null==(t=e.destroy)||t.call(e)})),this.hooks.destroy.call()}}]);var n}($_);function aD(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return lD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lD(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function lD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uD(e,t,n){return t=P_(t),D_(e,cD()?Reflect.construct(t,[],P_(e).constructor):t.apply(e,n))}function cD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(cD=function(){return!!e})()}oD([bd(kA)],iD.prototype,"kernelPluginProvider",2),oD([Xs(uA)],iD.prototype,"_commandService",2),oD([Xs(jI)],iD.prototype,"_kernelModel",2),oD([Xs(UI)],iD.prototype,"_refreshEventService",2),oD([Xs(Zb)],iD.prototype,"_lifeService",2),oD([Xs(QS)],iD.prototype,"_fieldRegistry",2),oD([Xs(jA)],iD.prototype,"_abilityRegistry",2),oD([Xs(zA)],iD.prototype,"_tableAbility",2),oD([Xs(WA)],iD.prototype,"_fieldAbility",2),oD([Xs(XA)],iD.prototype,"_recordAbility",2),oD([Xs(oR)],iD.prototype,"_logger",2),oD([Vs()],iD.prototype,"destroy",1),iD=oD([Ys()],iD),md.config({lifecycle:Ts.Lifecycle.singleton});var sD=function(e){function t(e){var n;return Ub(this,t),(n=uD(this,t))._onFinishExecuteCommand=n._register(new ck),n.onFinishExecuteCommand=n._onFinishExecuteCommand.event,n._options=e,n.container=e.container||new md,n._loadCoreServices(),n.registerPlugins(e.plugins,{container:n.container}),n._registerContribs(e.contribs),n.init(),n._logger.log({type:rR.kernel,action:"kernelInited",data:{body:e.data,settings:e.settings}}),n}return F_(t,e),Wb(t,[{key:"onDataLoaded",get:function(){return this.kernelService.onDataLoaded}},{key:"start",value:function(){this._options.data&&this.kernelService.setContent(this._options.data)}},{key:"init",value:function(){var e=this;this.container.get(jI).init();var t=this.container.get(TR).getCurrentUser();t&&this.container.get(qS).setCurrentUser(t),this.kernelService.init({container:this.container}),this._options.commandHooks&&this.kernelService.initCommandHooks(this._options.commandHooks),this.container.get(uA).onFinishExecuteCommand((function(t){e._onFinishExecuteCommand.emit(t)})),this._lifeService.status=Jb.Inited}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this),this.kernelService.destroy(),this.unregisterPlugins(this.container)}},{key:"_logger",get:function(){return this.container.get(oR)}},{key:"_loadCoreServices",value:function(){this._lifeService=this.container.get(Zb),this.container.get(UC),this.container.get(uI),this.kernelService=this.container.get(iD)}},{key:"getContent",value:function(){return this.container.get(fI).getContent()}},{key:"setContent",value:function(e){this.kernelService.setContent(e)}},{key:"setRecords",value:function(e){this.kernelService.setRecords(e)}},{key:"setUsers",value:function(e){this.kernelService.setUsers(e)}},{key:"_registerContribs",value:function(e){if(e){var t,n=aD(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.container.register(r)}}catch(e){n.e(e)}finally{n.f()}}}}])}(Xk),dD=pd().contribution(kA).register(iD);function fD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fD(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hD(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vD(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function vD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gD=Object.defineProperty,mD=Object.getOwnPropertyDescriptor,yD=function(e,t,n,r){for(var o,i=r>1?void 0:r?mD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&gD(t,n,i),i},bD=function(){return Wb((function e(){Ub(this,e)}),[{key:"toValue",value:function(e){var t=this,n=this._readService.getField(e.fieldId),r=e.value||"";if(Array.isArray(r))(null==n?void 0:n.get("type"))===bC.MENTION&&(r=null==r?void 0:r.map((function(e){var n=t._readService.getUser(e.uid);return{id:(null==n?void 0:n.get("uid"))||e.uid,name:(null==n?void 0:n.get("name"))||e.name,login:(null==n?void 0:n.get("login"))||e.login,avatar_url:(null==n?void 0:n.get("icon"))||e.icon,work_id:(null==n?void 0:n.get("work_id"))||e.work_id}})));else if((null==n?void 0:n.get("type"))===bC.LINK)return null!=r&&r.src?{value:{src:(null==r?void 0:r.src)||"",name:(null==r?void 0:r.name)||"",icon:(null==r?void 0:r.icon)||""}}:{value:null};return(null==n?void 0:n.get("type"))===bC.DATE?{value:{time:r}}:{value:r}}},{key:"toColumn",value:function(e){var t={id:e.get("uuid"),name:e.get("name"),type:e.get("type"),color:e.get("color"),config:e.get("config")},n=this._readService.getFieldOptions(e.get("uuid"));return n&&(t.options=E_(n,(function(e){return{id:e.get("uuid"),color:e.get("color"),value:e.get("name")}}))),t}},{key:"toRecord",value:function(e,t){var n,r,o={userId:e.get("creator_id"),modifierId:e.get("modifier_id")},i=hD(this._readService.getRecordCells(e.get("uuid")));try{for(i.s();!(r=i.n()).done;){var a=r.value;a&&(t&&a.fieldId!==t||null==a.value&&null===(null==(n=a.value)?void 0:n.name)||Array.isArray(a.value)&&0===a.value.length||(o[a.fieldId]=this.toValue(a)))}}catch(e){i.e(e)}finally{i.f()}return o}},{key:"toView",value:function(e){var t=this,n=e.view,r=e.sort,o=e.stats,i=e.viewGroup,a=e.filters,l=e.groupViewRecords,u=e.viewConfig,c=this._readService.getAllViewFields(n.get("uuid")),s=this._readService.getOriginViewRecords(n.get("uuid")),d=pD(pD({id:n.get("uuid"),type:n.get("type"),name:n.get("name"),colCount:(null==c?void 0:c.length)||0,columns:E_(c,(function(e){return{id:e.get("field_uuid"),size:e.get("size"),hidden:e.get("hidden")}})),data:{},filter:this.toFilter(a),sort:this.toSort(r,u),stats:this.toStats(o)},null!=i&&i.group?this.toGroup(i.group,l):{}),{},{frozenCol:0,index:0,rowCount:s.length,rows:E_(s,(function(e){return{id:e.get("record_uuid")}})),rowHeight:this.toRowHeight(u),scrollX:0,scrollY:0,selections:{},tableId:""});return n.get("type")===BC.CARD&&u&&(d.cover={show:!!u.get("cover_field_uuid"),id:u.get("cover_field_uuid"),display:u.get("cover_display")}),(n.get("type")===BC.KANBAN||n.get("type")===BC.CARD)&&(d.showField=null==u?void 0:u.get("show_field_name")),n.get("type")===BC.FORM?{id:n.get("uuid"),type:n.get("type"),name:n.get("name"),desc:n.get("desc"),fields:__(c,(function(e){return!e.get("hidden")&&(!!e.get("field")&&!zC.isSystemType(e.get("field").get("type")))})).map((function(e){var n={columnId:e.get("field_uuid"),columnName:e.get("field").get("name")||"",type:e.get("field").get("type")||bC.TEXT,title:e.get("name")||e.get("field").get("name"),display:e.get("display_type")};if(zC.isSelectLike(e.get("field").get("type"))){var r=t.toColumn(e.get("field"));n.options=r.options}return e.get("required")?n.validations=[{required:!0}]:n.validations=[{required:!1}],n})),viewId:n.get("uuid"),createdAt:n.get("created_at")}:(n.get("type")===BC.CALENDAR&&u&&(d.date={startId:u.get("start_date_field_uuid")||"",endId:u.get("end_date_field_uuid")||"",activeDate:u.get("active_date")||"",titleId:u.get("date_title_field_uuid")||"",showLunar:u.get("show_lunar")||!1,colorType:u.get("date_color_type")||PC.CUSTOM,colorId:u.get("date_color")||""}),d)}},{key:"toFilter",value:function(e){var t={};return e&&e.length>0&&(t.operator=e.get(0).get("operator"),t.options=E_(e,(function(e){return{id:e.get("field_uuid"),func:e.get("func"),expected:e.get("expected")}})),0===t.options.length)?null:t}},{key:"toSort",value:function(e,t){if(!e)return null;var n={};return null!=t&&t.get("keep_sort")&&(n.auto=!0),n.options=[{id:e.get("field_uuid"),type:e.get("type")}],n}},{key:"toStats",value:function(e){var t={};return e&&e.length>0&&e.forEach((function(e){t[e.get("field_uuid")]=e.get("type")})),t}},{key:"toGroup",value:function(e,t){var n={};if(!e)return n;var r={id:e.get("field_uuid"),type:e.get("type")};return n.groupData=t.map((function(e){var t,n,o,i,a={value:(null==(t=e.option)?void 0:t.name)||"",titleValue:null!=(n=e.option)&&n.value?[null==(o=e.option)?void 0:o.value]:""};return a.rows=(null==(i=e.viewRecords)?void 0:i.map((function(e){return e.get("record_uuid")})))||[],a.groupBy=r.id,a.key=e.key,a.collapse=e.collapse,a})),n.group=[r],n}},{key:"toRowHeight",value:function(e){return null!=e&&e.get("record_height")?{low:{type:DC.LOW,name:"低",value:36},middle:{type:DC.MIDDLE,name:"中",value:58},high:{type:DC.HIGH,name:"高",value:146}}[e.get("record_height")]:{type:DC.LOW,name:"低",value:36}}},{key:"toTable",value:function(){var e,t=this,n=this._readService.getTable(),r=this._readService.getOriginViewRecords(),o=this._readService.getAllFields(),i=this._readService.getViews(),a={format:"laketable",type:"Table"};a.version=n.get("version"),a.larkJson=!0;var l={};l.rowIds=E_(r,(function(e){return e.get("record_uuid")})),l.rowCount=r.length,l.columns=E_(o,(function(e){var n=t._readService.getFieldOptions(e.get("uuid")),r={id:e.get("uuid"),name:e.get("name"),type:e.get("type")};return null!=e.get("color")&&(r.color=e.get("color")),null!=e.get("config")&&(r.config=e.get("config")),n&&n.length>0&&(r.options=E_(n,(function(e){var t={id:e.get("uuid"),value:e.get("name")};return e.get("color")&&(t.color=e.get("color")),t}))),r})),l.colCount=o.length,l.activeView=n.get("active_view_uuid"),l.id=n.get("uuid"),l.views={};var u,c=hD(i);try{for(c.s();!(u=c.n()).done;){var s=u.value,d={};d.view=this._readService.getView(s.get("uuid")),d.sort=this._readService.getViewSort(s.get("uuid")),d.stats=this._readService.getViewStats(s.get("uuid")),d.viewGroup=this._readService.getViewGroup(s.get("uuid")),d.filters=this._readService.getViewFilters(s.get("uuid")),d.groupViewRecords=null!=(e=d.viewGroup)&&e.group?this._readService.getGroupViewRecords(s.get("uuid")):null,d.viewConfig=this._readService.getViewConfig(s.get("uuid"));var f=this.toView(d);l.views[f.id]=f}}catch(e){c.e(e)}finally{c.f()}return a.sheet=[l],a}}])}();yD([Xs(MI)],bD.prototype,"_readService",2),bD=yD([Ys()],bD);var wD="lakex-table",_D=function(e,t){return wD+":"+e+":"+t},kD=function(){return Wb((function e(){Ub(this,e)}),null,[{key:"enable",value:function(e,t){var n=_D(e,t);(function(e){var t=localStorage.debug;return"*"===t||t==="".concat(wD,":*")||t==="".concat(wD,":").concat(e,":*")})(e)||_b.enable(n)}},{key:"Infra",value:function(e){var t=_D("infra",e);return _b(t)}},{key:"Plugin",value:function(e){return _b(_D("plugin",e))}}])}(),CD=Ts.defineToken("ProcessKernelPluginContribution"),ED=Object.defineProperty,OD=Object.getOwnPropertyDescriptor,SD=function(e,t,n,r){for(var o,i=r>1?void 0:r?OD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ED(t,n,i),i},xD=function(){return Wb((function e(){Ub(this,e)}),[{key:"getProvider",value:function(){var e,t=this.processProvider.getContributions()||[],n=t[t.length-1];return null==(e=null==n?void 0:n.registerProcess)?void 0:e.call(n)}},{key:"getTableMiddlewares",value:function(){return(this.processProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerProcessTableMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}},{key:"getUsersMiddlewares",value:function(){return(this.processProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerProcessUsersMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}},{key:"getRecordsMiddlewares",value:function(){return(this.processProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerProcessRecordsMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}}])}();function jD(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ID(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ID(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function ID(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}SD([bd(CD)],xD.prototype,"processProvider",2),xD=SD([Ys()],xD);var RD=Object.defineProperty,AD=Object.getOwnPropertyDescriptor,DD=function(e,t,n,r){for(var o,i=r>1?void 0:r?AD(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&RD(t,n,i),i},PD=kD.Plugin("process"),MD=function(){return Wb((function e(){Ub(this,e)}),[{key:"toModel",value:function(e,t){var n,r,o;if(o="string"==typeof e?JSON.parse(e):e,PD("服务端数据",o),o.version){if("string"==typeof o.sheet?o.sheet=JSON.parse(mb.inflate(o.sheet,{to:"string"}))[0]:o.sheet=null==(n=o.sheet)?void 0:n[0],!o.sheet)return;try{var i=this._processRegistry.getTableMiddlewares();if(i&&i.length>0){var a,l=jD(i);try{for(l.s();!(a=l.n()).done;){var u=a.value;o=u?u(o,t):o}}catch(e){l.e(e)}finally{l.f()}}}catch(e){PD("process table error:",e)}var c=o.sheet;PD("处理前数据",c);var s=c.activeView||c.defaultView,d=c.views[s];(!d||!(null!=(r=this._configuration.getValue("viewerManage.viewTypes"))&&r.includes(d.type)))&&(s=Object.keys(c.views)[0]),t.setData("table",[{uuid:c.id,version:"1.4",active_view_uuid:s}]),this._columnToModel(t,c.columns),o.records&&("string"==typeof o.records&&(o.records=JSON.parse(mb.inflate(o.records,{to:"string"}))),this._recordToModel(t,o.records)),o.users&&("string"==typeof o.users&&(o.users=JSON.parse(mb.inflate(o.users,{to:"string"}))),this._userToModel(t,o.users)),this._viewsToModel(t,c.views,c.columns)}}},{key:"toRecordModel",value:function(e,t){"string"==typeof e.records&&(e=JSON.parse(mb.inflate(e,{to:"string"})));try{var n=this._processRegistry.getRecordsMiddlewares();if(n&&n.length>0){var r,o=jD(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;e=i?i({records:e},t).records:e}}catch(e){o.e(e)}finally{o.f()}}}catch(e){PD("process records error:",e)}this._recordToModel(t,e)}},{key:"toUserModel",value:function(e,t){try{var n=this._processRegistry.getUsersMiddlewares();if(n&&n.length>0){var r,o=jD(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;e=i?i({users:e},t).users:e}}catch(e){o.e(e)}finally{o.f()}}}catch(e){PD("process users error:",e)}this._userToModel(t,e)}},{key:"_columnToModel",value:function(e,t){if(t){var n,r=jD(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(("input"===o.type||"textarea"===o.type)&&(o.type="text"),Object.values(bC).includes(o.type)||(o.type="text"),o.uuid=o.uuid||o.id,o.options){var i,a=jD(o.options);try{for(a.s();!(i=a.n()).done;){var l=i.value;l.name=l.name||l.value,l.uuid=l.uuid||l.id}}catch(e){a.e(e)}finally{a.f()}}zC.isMultiple(o.type)&&(o.multiple=!0)}}catch(e){r.e(e)}finally{r.f()}e.setData("field",t);var u,c=[],s=jD(t);try{for(s.s();!(u=s.n()).done;){var d=u.value;if(d.options){var f,p=jD(d.options);try{for(p.s();!(f=p.n()).done;){var h=f.value;c.push({uuid:h.uuid,field_uuid:d.uuid,name:h.name,color:h.color})}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){s.e(e)}finally{s.f()}e.setData("field_option",c)}}},{key:"_getField",value:function(e,t){var n=e.query("field").toJSON().find((function(e){return e.uuid===t}));if(n){if("select"===n.type||"multiSelect"===n.type){var r=e.query("field_option").toJSON();n.options=r.filter((function(e){return e.field_uuid===n.uuid}))}return n}}},{key:"_userToModel",value:function(e,t){var n,r=e.query("user").toJSON()||[],o=jD(t);try{var i=function(){var e=n.value;if(!e)return 0;var t=String(e.id||e.uid);if(r.some((function(e){return e.uid===t})))return 0;r.push({uuid:fw(32),uid:t,login:e.login,name:e.name,icon:e.avatar_url||e.icon,work_id:e.work_id,created_at:+new Date,updated_at:+new Date})};for(o.s();!(n=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}e.setData("user",r)}},{key:"_recordToModel",value:function(e,t){var n,r,o,i=(null==(n=e.query("record"))?void 0:n.toJSON())||[],a=[],l=jD(t);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(i.push({id:u.id,uuid:u.uuid,creator_id:u.user_id,modifier_id:u.modifier_id,created_at:+new Date(u.created_at),updated_at:+new Date(u.updated_at)}),u.data)for(var c=JSON.parse(u.data),s=0,d=Object.keys(c);s<d.length;s++){var f=d[s],p=this._getField(e,f);if(p){var h=p.type,v=c[f],g=null==(r=this._processRegistry.getProvider())?void 0:r.processFieldModel,m=void 0;if(null!=(m=g?g(p,v.value):null==v?void 0:v.value)){if(zC.isUri(h)){if(!m)continue;m&&"string"==typeof m&&(m={src:m,name:m,icon:""})}if(Array.isArray(m)){var y,b=jD(m);try{for(b.s();!(y=b.n()).done;){var w=y.value;zC.isMention(h)&&(w.uid=w.id,w.icon=w.avatar_url),a.push({fieldType:h,field_uuid:f,record_uuid:u.uuid,value:w})}}catch(e){b.e(e)}finally{b.f()}continue}zC.isDate(h)&&(null!=m.time?m=m.time:null!=m.seconds&&(m=Aw(m.seconds))),a.push({fieldType:h,field_uuid:f,record_uuid:u.uuid,value:m})}}}}}catch(e){l.e(e)}finally{l.f()}e.setData("record",i),this._createValues(e,a)}},{key:"_createValues",value:function(e,t){var n={field_boolean:[],field_date:[],field_number:[],field_select:[],field_string:[],field_uri:[],user:{}};t.forEach((function(e){var t,r,o,i,a,l,u,c=e.fieldType;if(delete e.fieldType,zC.isBoolean(c))n.field_boolean.push(e);else if(zC.isDate(c))n.field_date.push(e);else if(zC.isNumberLike(c))n.field_number.push(e);else if(zC.isSelectLike(c))n.field_select.push(e);else if(zC.isString(c))n.field_string.push(e);else if(zC.isUri(c)){if(n.field_uri.push({field_uuid:e.field_uuid,record_uuid:e.record_uuid,uid:null==(t=e.value)?void 0:t.uid,src:null==(r=e.value)?void 0:r.src,icon:null==(o=e.value)?void 0:o.icon,name:null==(i=e.value)?void 0:i.name,size:null==(a=e.value)?void 0:a.size,width:null==(l=e.value)?void 0:l.width,height:null==(u=e.value)?void 0:u.height}),zC.isMention(c)){if(!e.value)return;n.user[e.value.uid]={uid:String(e.value.uid),name:e.value.name,icon:e.value.icon,login:e.value.login,work_id:e.value.work_id}}}else if(zC.isSystemUser(c)){if(!e.value)return;n.user[e.value.id]={uid:String(e.value.id),name:e.value.name,icon:e.value.avatar_url,login:e.value.login,work_id:e.value.work_id}}})),n.user=Object.values(n.user);for(var r=0,o=Object.keys(n);r<o.length;r++){var i=o[r];if("user"===i){var a=e.query("user").toJSON(),l=Cu([].concat(Vb(a),Vb(Object.values(n[i]))),"uid");return void e.setData("user",l)}e.setData(i,n[i])}}},{key:"_viewsToModel",value:function(e,t,n){for(var r=[],o=0,i=Object.values(t);o<i.length;o++){var a=i[o];r.push({id:a.iid,uuid:a.id,name:a.name,type:a.type,desc:a.desc}),this._viewToModel(e,a,n)}e.setData("view",r)}},{key:"_viewToModel",value:function(e,t,n){var r,o,i,a,l,u,c,s,d,f,p,h,v,g,m=e.query("view_config").toJSON()||[],y=e.query("view_field").toJSON()||[],b=e.query("view_record").toJSON()||[],w=e.query("group").toJSON()||[],_=e.query("group_item").toJSON()||[],k=e.query("filter").toJSON()||[],C=e.query("sort").toJSON()||[],E=e.query("stat").toJSON()||[],O=n.reduce((function(e,t){return e[t.id]=t,e}),{});if(m.push({view_uuid:t.id,cover_field_uuid:null!=(r=t.cover)&&r.show?null==(o=t.cover)?void 0:o.id:"",cover_display:null==(i=t.cover)?void 0:i.display,show_field_name:t.showField,keep_sort:null==(a=t.sort)?void 0:a.auto,frozen_field:t.frozenCol,record_height:null==(l=t.rowHeight)?void 0:l.type,start_date_field_uuid:null==(u=t.date)?void 0:u.startId,end_date_field_uuid:null==(c=t.date)?void 0:c.endId,active_date:null==(s=t.date)?void 0:s.activeDate,date_title_field_uuid:null==(d=t.date)?void 0:d.titleId,show_lunar:null==(f=t.date)?void 0:f.showLunar,date_color_type:null==(p=t.date)?void 0:p.colorType,date_color:null==(h=t.date)?void 0:h.colorId}),t.type===BC.FORM){if(t.fields){var S,x=jD(t.fields);try{for(x.s();!(S=x.n()).done;){var j=S.value;O[j.columnId]&&y.push({view_uuid:t.id,field_uuid:j.columnId,name:j.title||j.columnName,display_type:j.display,required:(null==(g=null==(v=j.validations)?void 0:v[0])?void 0:g.required)||!1})}}catch(e){x.e(e)}finally{x.f()}}}else{var I,R=jD(t.columns);try{for(R.s();!(I=R.n()).done;){var A=I.value;O[A.id]&&(("rate"===A.type||"progress"===A.type)&&A.size<134&&(A.size=134),y.push({view_uuid:t.id,field_uuid:A.id,size:A.size,hidden:A.hidden}))}}catch(e){R.e(e)}finally{R.f()}}if(t.rows){var D={};t.group&&t.groupData&&t.groupData.forEach((function(e){if(null!=e.key&&e.collapse&&t.group.length>0){var r=t.group[0],o=n.find((function(e){return e.id===r.id}));o&&_.push({view_uuid:t.id,field_uuid:null==o?void 0:o.id,key:e.key,collapse:e.collapse})}e.rows.forEach((function(t){Array.isArray(e.titleValue)?"string"==typeof e.titleValue[0]?D[t]=e.titleValue[0]:D[t]=e.titleValue.map((function(e){return e.uid})).join(","):D[t]=e.titleValue}))}));var P,M=jD(t.rows);try{for(M.s();!(P=M.n()).done;){var T=P.value,F={view_uuid:t.id,record_uuid:T.id};if(t.group){var N=D[T.id];F.group_item_key=null!=N&&N.id?String(null==N?void 0:N.id):N}b.push(F)}}catch(e){M.e(e)}finally{M.f()}}if(t.filter&&t.filter.options){var V,L=jD(t.filter.options);try{var B=function(){var e=V.value;if(!y.some((function(t){return t.field_uuid===e.id})))return 1;var n=e.func,r=Array.isArray(e.expected)?e.expected.join(","):e.expected;["today","tomorrow","yesterday","thisWeek","lastWeek","nextWeek","lastMonth","thisMonth","nextMonth","last7days"].includes(n)&&(r=n,n="equalTo"),k.push({view_uuid:t.id,field_uuid:e.id,operator:t.filter.operator||IC.And,func:n,expected:r})};for(L.s();!(V=L.n()).done;)B()}catch(e){L.e(e)}finally{L.f()}}if(t.group&&t.group.length>0){var $=t.group[0],z=n.find((function(e){return e.id===$.id}));z&&y.some((function(e){return e.field_uuid===z.id}))&&w.push({view_uuid:t.id,field_uuid:z.id,type:$.type})}if(t.sort&&t.sort.options){var U,H=jD(t.sort.options);try{var q=function(){var e=U.value;if(!y.some((function(t){return t.field_uuid===e.id})))return 1;C.push({view_uuid:t.id,field_uuid:e.id,type:e.type})};for(H.s();!(U=H.n()).done;)q()}catch(e){H.e(e)}finally{H.f()}}if(t.stats)for(var W=0,G=Object.keys(t.stats);W<G.length;W++){var K=G[W];E.push({view_uuid:t.id,field_uuid:K,type:t.stats[K]})}e.setData("view_config",m),e.setData("view_field",y),e.setData("view_record",b),e.setData("group",w),e.setData("group_item",_),e.setData("filter",k),e.setData("sort",C),e.setData("stat",E)}},{key:"toData",value:function(e){var t,n=this,r=null==(t=e.query("record"))?void 0:t.toJSON(),o=this._toProcess.toTable();return o.records=r.map((function(e){var t=n._readService.getOriginRecord(e.uuid);return{id:e.id,uuid:e.uuid,user_id:e.creator_id,modifier_id:e.modifier_id,sheet_id:o.sheet[0].id,data:JSON.stringify(n._toProcess.toRecord(t)),updated_at:+new Date(e.updated_at),created_at:+new Date(e.created_at)}})).filter((function(e){return!!e})),o}}])}();function TD(e){return(TD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}DD([Xs(bD)],MD.prototype,"_toProcess",2),DD([Xs(xD)],MD.prototype,"_processRegistry",2),DD([Xs(R_)],MD.prototype,"_configuration",2),DD([Xs(MI)],MD.prototype,"_readService",2),MD=DD([Ys()],MD);var FD=/^\s+/,ND=/\s+$/;function VD(e,t){if(t=t||{},(e=e||"")instanceof VD)return e;if(!(this instanceof VD))return new VD(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,o=null,i=null,a=!1,l=!1;return"string"==typeof e&&(e=function(e){e=e.replace(FD,"").replace(ND,"").toLowerCase();var t,n=!1;if(tP[e])e=tP[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=hP.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=hP.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=hP.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=hP.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=hP.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=hP.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=hP.hex8.exec(e))?{r:aP(t[1]),g:aP(t[2]),b:aP(t[3]),a:sP(t[4]),format:n?"name":"hex8"}:(t=hP.hex6.exec(e))?{r:aP(t[1]),g:aP(t[2]),b:aP(t[3]),format:n?"name":"hex"}:(t=hP.hex4.exec(e))?{r:aP(t[1]+""+t[1]),g:aP(t[2]+""+t[2]),b:aP(t[3]+""+t[3]),a:sP(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=hP.hex3.exec(e))&&{r:aP(t[1]+""+t[1]),g:aP(t[2]+""+t[2]),b:aP(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==TD(e)&&(vP(e.r)&&vP(e.g)&&vP(e.b)?(t=function(e,t,n){return{r:255*oP(e,255),g:255*oP(t,255),b:255*oP(n,255)}}(e.r,e.g,e.b),a=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):vP(e.h)&&vP(e.s)&&vP(e.v)?(r=uP(e.s),o=uP(e.v),t=function(e,t,n){e=6*oP(e,360),t=oP(t,100),n=oP(n,100);var r=Math.floor(e),o=e-r,i=n*(1-t),a=n*(1-o*t),l=n*(1-(1-o)*t),u=r%6,c=[n,a,i,i,l,n][u],s=[l,n,n,a,i,i][u],d=[i,i,l,n,n,a][u];return{r:255*c,g:255*s,b:255*d}}(e.h,r,o),a=!0,l="hsv"):vP(e.h)&&vP(e.s)&&vP(e.l)&&(r=uP(e.s),i=uP(e.l),t=function(e,t,n){var r,o,i;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=oP(e,360),t=oP(t,100),n=oP(n,100),0===t)r=o=i=n;else{var l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;r=a(u,l,e+1/3),o=a(u,l,e),i=a(u,l,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,r,i),a=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=rP(n),{ok:a,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function LD(e,t,n){e=oP(e,255),t=oP(t,255),n=oP(n,255);var r,o,i=Math.max(e,t,n),a=Math.min(e,t,n),l=(i+a)/2;if(i==a)r=o=0;else{var u=i-a;switch(o=l>.5?u/(2-i-a):u/(i+a),i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,l:l}}function BD(e,t,n){e=oP(e,255),t=oP(t,255),n=oP(n,255);var r,o,i=Math.max(e,t,n),a=Math.min(e,t,n),l=i,u=i-a;if(o=0===i?0:u/i,i==a)r=0;else{switch(i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,v:l}}function $D(e,t,n,r){var o=[lP(Math.round(e).toString(16)),lP(Math.round(t).toString(16)),lP(Math.round(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function zD(e,t,n,r){return[lP(cP(r)),lP(Math.round(e).toString(16)),lP(Math.round(t).toString(16)),lP(Math.round(n).toString(16))].join("")}function UD(e,t){t=0===t?0:t||10;var n=VD(e).toHsl();return n.s-=t/100,n.s=iP(n.s),VD(n)}function HD(e,t){t=0===t?0:t||10;var n=VD(e).toHsl();return n.s+=t/100,n.s=iP(n.s),VD(n)}function qD(e){return VD(e).desaturate(100)}function WD(e,t){t=0===t?0:t||10;var n=VD(e).toHsl();return n.l+=t/100,n.l=iP(n.l),VD(n)}function GD(e,t){t=0===t?0:t||10;var n=VD(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),VD(n)}function KD(e,t){t=0===t?0:t||10;var n=VD(e).toHsl();return n.l-=t/100,n.l=iP(n.l),VD(n)}function YD(e,t){var n=VD(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,VD(n)}function XD(e){var t=VD(e).toHsl();return t.h=(t.h+180)%360,VD(t)}function JD(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=VD(e).toHsl(),r=[VD(e)],o=360/t,i=1;i<t;i++)r.push(VD({h:(n.h+i*o)%360,s:n.s,l:n.l}));return r}function ZD(e){var t=VD(e).toHsl(),n=t.h;return[VD(e),VD({h:(n+72)%360,s:t.s,l:t.l}),VD({h:(n+216)%360,s:t.s,l:t.l})]}function QD(e,t,n){t=t||6,n=n||30;var r=VD(e).toHsl(),o=360/n,i=[VD(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(VD(r));return i}function eP(e,t){t=t||6;for(var n=VD(e).toHsv(),r=n.h,o=n.s,i=n.v,a=[],l=1/t;t--;)a.push(VD({h:r,s:o,v:i})),i=(i+l)%1;return a}VD.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=rP(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=BD(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=BD(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=LD(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=LD(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return $D(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,o){var i=[lP(Math.round(e).toString(16)),lP(Math.round(t).toString(16)),lP(Math.round(n).toString(16)),lP(cP(r))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*oP(this._r,255))+"%",g:Math.round(100*oP(this._g,255))+"%",b:Math.round(100*oP(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*oP(this._r,255))+"%, "+Math.round(100*oP(this._g,255))+"%, "+Math.round(100*oP(this._b,255))+"%)":"rgba("+Math.round(100*oP(this._r,255))+"%, "+Math.round(100*oP(this._g,255))+"%, "+Math.round(100*oP(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(nP[$D(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+zD(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=VD(e);n="#"+zD(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return!t&&r&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e)?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return VD(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(WD,arguments)},brighten:function(){return this._applyModification(GD,arguments)},darken:function(){return this._applyModification(KD,arguments)},desaturate:function(){return this._applyModification(UD,arguments)},saturate:function(){return this._applyModification(HD,arguments)},greyscale:function(){return this._applyModification(qD,arguments)},spin:function(){return this._applyModification(YD,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(QD,arguments)},complement:function(){return this._applyCombination(XD,arguments)},monochromatic:function(){return this._applyCombination(eP,arguments)},splitcomplement:function(){return this._applyCombination(ZD,arguments)},triad:function(){return this._applyCombination(JD,[3])},tetrad:function(){return this._applyCombination(JD,[4])}},VD.fromRatio=function(e,t){if("object"==TD(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:uP(e[r]));e=n}return VD(e,t)},VD.equals=function(e,t){return!(!e||!t)&&VD(e).toRgbString()==VD(t).toRgbString()},VD.random=function(){return VD.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},VD.mix=function(e,t,n){n=0===n?0:n||50;var r=VD(e).toRgb(),o=VD(t).toRgb(),i=n/100;return VD({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},VD.readability=function(e,t){var n=VD(e),r=VD(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},VD.isReadable=function(e,t,n){var r,o,i=VD.readability(e,t);switch(o=!1,r=function(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}(n),r.level+r.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},VD.mostReadable=function(e,t,n){var r,o,i,a,l=null,u=0;o=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=VD.readability(e,t[c]))>u&&(u=r,l=VD(t[c]));return VD.isReadable(e,l,{level:i,size:a})||!o?l:(n.includeFallbackColors=!1,VD.mostReadable(e,["#fff","#000"],n))};var tP=VD.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},nP=VD.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(tP);function rP(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function oP(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function iP(e){return Math.min(1,Math.max(0,e))}function aP(e){return parseInt(e,16)}function lP(e){return 1==e.length?"0"+e:""+e}function uP(e){return e<=1&&(e=100*e+"%"),e}function cP(e){return Math.round(255*parseFloat(e)).toString(16)}function sP(e){return aP(e)/255}var dP,fP,pP,hP=(fP="[\\s|\\(]+("+(dP="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+dP+")[,|\\s]+("+dP+")\\s*\\)?",pP="[\\s|\\(]+("+dP+")[,|\\s]+("+dP+")[,|\\s]+("+dP+")[,|\\s]+("+dP+")\\s*\\)?",{CSS_UNIT:new RegExp(dP),rgb:new RegExp("rgb"+fP),rgba:new RegExp("rgba"+pP),hsl:new RegExp("hsl"+fP),hsla:new RegExp("hsla"+pP),hsv:new RegExp("hsv"+fP),hsva:new RegExp("hsva"+pP),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function vP(e){return!!hP.CSS_UNIT.exec(e)}function gP(e,t){return Kb(e)||function(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||Nb(e,t)||Yb()}var mP={colorToken:{"@white":"#FFFFFF","@black":"#000000","@background-base":"#FFFFFF","@yuque-grey-100":"#FAFAFA","@yuque-grey-200":"#F4F5F5","@yuque-grey-300":"#EFF0F0","@yuque-grey-400":"#E7E9E8","@yuque-grey-500":"#D8DAD9","@yuque-grey-600":"#BEC0BF","@yuque-grey-700":"#8A8F8D","@yuque-grey-800":"#585A5A","@yuque-grey-900":"#262626","@yuque-grey-1":"#FAFAFA","@yuque-grey-2":"#F4F5F5","@yuque-grey-3":"#EFF0F0","@yuque-grey-4":"#E7E9E8","@yuque-grey-5":"#D8DAD9","@yuque-grey-6":"#BEC0BF","@yuque-grey-7":"#8A8F8D","@yuque-grey-8":"#585A5A","@yuque-grey-9":"#262626","@pea-green-50":"#F3FBE7","@pea-green-100":"#E8F7CF","@pea-green-200":"#DBF1B7","@pea-green-300":"#C1E77E","@pea-green-400":"#A7DD4B","@pea-green-500":"#8CCF17","@pea-green-600":"#74B602","@pea-green-700":"#5C8D07","@pea-green-800":"#406105","@pea-green-900":"#2A4200","@pea-green-1":"#E8F7CF","@pea-green-2":"#DBF1B7","@pea-green-3":"#C1E77E","@pea-green-4":"#A7DD4B","@pea-green-5":"#8CCF17","@pea-green-6":"#74B602","@pea-green-7":"#5C8D07","@pea-green-8":"#406105","@pea-green-9":"#2A4200","@yuque-green-50":"#ECFAF4","@yuque-green-100":"#DAF6EA","@yuque-green-200":"#C7F0DF","@yuque-green-300":"#82EDC0","@yuque-green-400":"#45DE9D","@yuque-green-500":"#0BD07D","@yuque-green-600":"#00B96B","@yuque-green-700":"#009456","@yuque-green-800":"#00663B","@yuque-green-900":"#003D23","@yuque-green-1":"#DAF6EA","@yuque-green-2":"#C7F0DF","@yuque-green-3":"#82EDC0","@yuque-green-4":"#45DE9D","@yuque-green-5":"#0BD07D","@yuque-green-6":"#00B96B","@yuque-green-7":"#009456","@yuque-green-8":"#00663B","@yuque-green-9":"#003D23","@cyan-50":"#E6F9FB","@cyan-100":"#CEF5F7","@cyan-200":"#B5EFF2","@cyan-300":"#81DFE4","@cyan-400":"#5ED3D9","@cyan-500":"#1DC0C9","@cyan-600":"#01B2BC","@cyan-700":"#078B92","@cyan-800":"#07787E","@cyan-900":"#004347","@cyan-1":"#CEF5F7","@cyan-2":"#B5EFF2","@cyan-3":"#81DFE4","@cyan-4":"#5ED3D9","@cyan-5":"#1DC0C9","@cyan-6":"#01B2BC","@cyan-7":"#078B92","@cyan-8":"#07787E","@cyan-9":"#004347","@blue-50":"#ECF4FD","@blue-100":"#D9EAFC","@blue-200":"#C0DDFC","@blue-300":"#81BBF8","@blue-400":"#5FA8F6","@blue-500":"#2F8EF4","@blue-600":"#117CEE","@blue-700":"#0C68CA","@blue-800":"#074A92","@blue-900":"#00346B","@blue-1":"#D9EAFC","@blue-2":"#C0DDFC","@blue-3":"#81BBF8","@blue-4":"#5FA8F6","@blue-5":"#2F8EF4","@blue-6":"#117CEE","@blue-7":"#0C68CA","@blue-8":"#074A92","@blue-9":"#00346B","@sea-blue-50":"#ECEEFD","@sea-blue-100":"#D9DFFC","@sea-blue-200":"#C0CAFC","@sea-blue-300":"#96A7FD","@sea-blue-400":"#6E85F7","@sea-blue-500":"#4861E0","@sea-blue-600":"#2F4BDA","@sea-blue-700":"#213BC0","@sea-blue-800":"#162883","@sea-blue-900":"#101E60","@sea-blue-1":"#D9DFFC","@sea-blue-2":"#C0CAFC","@sea-blue-3":"#96A7FD","@sea-blue-4":"#6E85F7","@sea-blue-5":"#4861E0","@sea-blue-6":"#2F4BDA","@sea-blue-7":"#213BC0","@sea-blue-8":"#162883","@sea-blue-9":"#101E60","@purple-50":"#F2EDFC","@purple-100":"#E6DCF9","@purple-200":"#D9C9F8","@purple-300":"#BA9BF2","@purple-400":"#9A6EED","@purple-500":"#7E45E8","@purple-600":"#601BDE","@purple-700":"#4C16B1","@purple-800":"#391084","@purple-900":"#270070","@purple-1":"#E6DCF9","@purple-2":"#D9C9F8","@purple-3":"#BA9BF2","@purple-4":"#9A6EED","@purple-5":"#7E45E8","@purple-6":"#601BDE","@purple-7":"#4C16B1","@purple-8":"#391084","@purple-9":"#270070","@magenta-50":"#FDEFF7","@magenta-100":"#FBDFEF","@magenta-200":"#F7C4E2","@magenta-300":"#F297CC","@magenta-400":"#EC6AB6","@magenta-500":"#E746A4","@magenta-600":"#D22D8D","@magenta-700":"#AE146E","@magenta-800":"#800F51","@magenta-900":"#5C0036","@magenta-1":"#FBDFEF","@magenta-2":"#F7C4E2","@magenta-3":"#F297CC","@magenta-4":"#EC6AB6","@magenta-5":"#E746A4","@magenta-6":"#D22D8D","@magenta-7":"#AE146E","@magenta-8":"#800F51","@magenta-9":"#5C0036","@red-50":"#FDF1F3","@red-100":"#FBE4E7","@red-200":"#F8CED3","@red-300":"#F1A2AB","@red-400":"#EA7583","@red-500":"#E4495B","@red-600":"#DF2A3F","@red-700":"#AD1A2B","@red-800":"#8F0515","@red-900":"#70000D","@red-1":"#FBE4E7","@red-2":"#F8CED3","@red-3":"#F1A2AB","@red-4":"#EA7583","@red-5":"#E4495B","@red-6":"#DF2A3F","@red-7":"#AD1A2B","@red-8":"#8F0515","@red-9":"#70000D","@vermilion-50":"#FDF3F1","@vermilion-100":"#FBE8E4","@vermilion-200":"#F8D6CE","@vermilion-300":"#F0AD9D","@vermilion-400":"#EB866F","@vermilion-500":"#E46549","@vermilion-600":"#DF4B2A","@vermilion-700":"#AD351A","@vermilion-800":"#8F1E05","@vermilion-900":"#701500","@vermilion-1":"#FBE8E4","@vermilion-2":"#F8D6CE","@vermilion-3":"#F0AD9D","@vermilion-4":"#EB866F","@vermilion-5":"#E46549","@vermilion-6":"#DF4B2A","@vermilion-7":"#AD351A","@vermilion-8":"#8F1E05","@vermilion-9":"#701500","@orange-50":"#FEF2E9","@orange-100":"#FDE6D3","@orange-200":"#F8D6B9","@orange-300":"#F8B881","@orange-400":"#F6A055","@orange-500":"#F38F39","@orange-600":"#ED740C","@orange-700":"#C75C00","@orange-800":"#944400","@orange-900":"#663000","@orange-1":"#FDE6D3","@orange-2":"#F8D6B9","@orange-3":"#F8B881","@orange-4":"#F6A055","@orange-5":"#F38F39","@orange-6":"#ED740C","@orange-7":"#C75C00","@orange-8":"#944400","@orange-9":"#663000","@yellow-50":"#FCF5E6","@yellow-100":"#F9EFCD","@yellow-200":"#F6E1AC","@yellow-300":"#F5D480","@yellow-400":"#F5CB61","@yellow-500":"#F3BB2F","@yellow-600":"#ECAA04","@yellow-700":"#C99103","@yellow-800":"#8F6600","@yellow-900":"#664900","@yellow-1":"#F9EFCD","@yellow-2":"#F6E1AC","@yellow-3":"#F5D480","@yellow-4":"#F5CB61","@yellow-5":"#F3BB2F","@yellow-6":"#ECAA04","@yellow-7":"#C99103","@yellow-8":"#8F6600","@yellow-9":"#664900","@bright-yellow-50":"#FDF9E4","@bright-yellow-100":"#FBF5CB","@bright-yellow-200":"#FCF1A6","@bright-yellow-300":"#FDEB78","@bright-yellow-400":"#FCE75A","@bright-yellow-500":"#FBDE28","@bright-yellow-600":"#EDCE02","@bright-yellow-700":"#CDB204","@bright-yellow-800":"#A58F04","@bright-yellow-900":"#665800","@bright-yellow-1":"#FBF5CB","@bright-yellow-2":"#FCF1A6","@bright-yellow-3":"#FDEB78","@bright-yellow-4":"#FCE75A","@bright-yellow-5":"#FBDE28","@bright-yellow-6":"#EDCE02","@bright-yellow-7":"#CDB204","@bright-yellow-8":"#A58F04","@bright-yellow-9":"#665800","@brown-50":"#F7F2EA","@brown-100":"#F0E7D6","@brown-200":"#E7D7BB","@brown-300":"#DBC39A","@brown-400":"#D2B684","@brown-500":"#C59F5E","@brown-600":"#B1873F","@brown-700":"#927035","@brown-800":"#74592A","@brown-900":"#523F1E","@brown-1":"#F0E7D6","@brown-2":"#E7D7BB","@brown-3":"#DBC39A","@brown-4":"#D2B684","@brown-5":"#C59F5E","@brown-6":"#B1873F","@brown-7":"#927035","@brown-8":"#74592A","@brown-9":"#523F1E"},colorDarkToken:{"@white":"#000000","@black":"#FFFFFF","@background-base":"#141414","@yuque-grey-100":"#141414","@yuque-grey-200":"#1F1F1F","@yuque-grey-300":"#292929","@yuque-grey-400":"#333333","@yuque-grey-500":"#424242","@yuque-grey-600":"#505050","@yuque-grey-700":"#848484","@yuque-grey-800":"#B3B3B3","@yuque-grey-900":"#E2E2E2","@yuque-grey-1":"#141414","@yuque-grey-2":"#1F1F1F","@yuque-grey-3":"#292929","@yuque-grey-4":"#333333","@yuque-grey-5":"#424242","@yuque-grey-6":"#505050","@yuque-grey-7":"#848484","@yuque-grey-8":"#B3B3B3","@yuque-grey-9":"#E2E2E2","@pea-green-50":"#1B2113","@pea-green-100":"#242F14","@pea-green-200":"#445625","@pea-green-300":"#557915","@pea-green-400":"#6A9226","@pea-green-500":"#7AAD22","@pea-green-600":"#94BC4E","@pea-green-700":"#AED666","@pea-green-800":"#C2DF90","@pea-green-900":"#D5E1C1","@pea-green-1":"#242F14","@pea-green-2":"#445625","@pea-green-3":"#557915","@pea-green-4":"#6A9226","@pea-green-5":"#7AAD22","@pea-green-6":"#94BC4E","@pea-green-7":"#AED666","@pea-green-8":"#C2DF90","@pea-green-9":"#D5E1C1","@yuque-green-50":"#10211A","@yuque-green-100":"#0E2F22","@yuque-green-200":"#255641","@yuque-green-300":"#18774F","@yuque-green-400":"#298E64","@yuque-green-500":"#29AD76","@yuque-green-600":"#51B88D","@yuque-green-700":"#6BD1A6","@yuque-green-800":"#97D8BC","@yuque-green-900":"#BCE6D5","@yuque-green-1":"#0E2F22","@yuque-green-2":"#255641","@yuque-green-3":"#18774F","@yuque-green-4":"#298E64","@yuque-green-5":"#29AD76","@yuque-green-6":"#51B88D","@yuque-green-7":"#6BD1A6","@yuque-green-8":"#97D8BC","@yuque-green-9":"#BCE6D5","@cyan-50":"#122324","@cyan-100":"#123436","@cyan-200":"#255356","@cyan-300":"#1A7074","@cyan-400":"#278B90","@cyan-500":"#22A8AF","@cyan-600":"#4EB6BC","@cyan-700":"#76C2C6","@cyan-800":"#95D7DB","@cyan-900":"#BFE1E3","@cyan-1":"#123436","@cyan-2":"#255356","@cyan-3":"#1A7074","@cyan-4":"#278B90","@cyan-5":"#22A8AF","@cyan-6":"#4EB6BC","@cyan-7":"#76C2C6","@cyan-8":"#95D7DB","@cyan-9":"#BFE1E3","@blue-50":"#15212D","@blue-100":"#193048","@blue-200":"#253C56","@blue-300":"#1D4672","@blue-400":"#245A94","@blue-500":"#2B6BB1","@blue-600":"#3B82CE","@blue-700":"#689FD9","@blue-800":"#8DB5E2","@blue-900":"#B5D0ED","@blue-1":"#193048","@blue-2":"#253C56","@blue-3":"#1D4672","@blue-4":"#245A94","@blue-5":"#2B6BB1","@blue-6":"#3B82CE","@blue-7":"#689FD9","@blue-8":"#8DB5E2","@blue-9":"#B5D0ED","@sea-blue-50":"#171C33","@sea-blue-100":"#1C2654","@sea-blue-200":"#252D56","@sea-blue-300":"#1B2A74","@sea-blue-400":"#243694","@sea-blue-500":"#2B41B1","@sea-blue-600":"#3B54CE","@sea-blue-700":"#687BD9","@sea-blue-800":"#8D9BE2","@sea-blue-900":"#B5BEED","@sea-blue-1":"#1C2654","@sea-blue-2":"#252D56","@sea-blue-3":"#1B2A74","@sea-blue-4":"#243694","@sea-blue-5":"#2B41B1","@sea-blue-6":"#3B54CE","@sea-blue-7":"#687BD9","@sea-blue-8":"#8D9BE2","@sea-blue-9":"#B5BEED","@purple-50":"#1F172E","@purple-100":"#2C1C4A","@purple-200":"#352259","@purple-300":"#3A1C73","@purple-400":"#512A98","@purple-500":"#5A2CAF","@purple-600":"#7551B8","@purple-700":"#9677CF","@purple-800":"#B099DB","@purple-900":"#CABCE7","@purple-1":"#2C1C4A","@purple-2":"#352259","@purple-3":"#3A1C73","@purple-4":"#512A98","@purple-5":"#5A2CAF","@purple-6":"#7551B8","@purple-7":"#9677CF","@purple-8":"#B099DB","@purple-9":"#CABCE7","@magenta-50":"#301525","@magenta-100":"#4E1837","@magenta-200":"#5B1F42","@magenta-300":"#701F4E","@magenta-400":"#942465","@magenta-500":"#A43776","@magenta-600":"#BE4B8E","@magenta-700":"#CE78AA","@magenta-800":"#D996BD","@magenta-900":"#E6BCD5","@magenta-1":"#4E1837","@magenta-2":"#5B1F42","@magenta-3":"#701F4E","@magenta-4":"#942465","@magenta-5":"#A43776","@magenta-6":"#BE4B8E","@magenta-7":"#CE78AA","@magenta-8":"#D996BD","@magenta-9":"#E6BCD5","@red-50":"#29191C","@red-100":"#402125","@red-200":"#5B2027","@red-300":"#741B25","@red-400":"#981F2D","@red-500":"#B62536","@red-600":"#CA3F4F","@red-700":"#CC7B84","@red-800":"#D49199","@red-900":"#E6BCC1","@red-1":"#402125","@red-2":"#5B2027","@red-3":"#741B25","@red-4":"#981F2D","@red-5":"#B62536","@red-6":"#CA3F4F","@red-7":"#CC7B84","@red-8":"#D49199","@red-9":"#E6BCC1","@vermilion-50":"#271C19","@vermilion-100":"#3C2520","@vermilion-200":"#5B2B20","@vermilion-300":"#742B1B","@vermilion-400":"#943824","@vermilion-500":"#B0432B","@vermilion-600":"#CD573C","@vermilion-700":"#D9816D","@vermilion-800":"#E09685","@vermilion-900":"#E9C2B9","@vermilion-1":"#3C2520","@vermilion-2":"#5B2B20","@vermilion-3":"#742B1B","@vermilion-4":"#943824","@vermilion-5":"#B0432B","@vermilion-6":"#CD573C","@vermilion-7":"#D9816D","@vermilion-8":"#E09685","@vermilion-9":"#E9C2B9","@orange-50":"#251E18","@orange-100":"#382A1E","@orange-200":"#5E3B1D","@orange-300":"#774418","@orange-400":"#9D571B","@orange-500":"#BC6820","@orange-600":"#D37F36","@orange-700":"#DE9F68","@orange-800":"#E0AF85","@orange-900":"#E9CFB9","@orange-1":"#382A1E","@orange-2":"#5E3B1D","@orange-3":"#774418","@orange-4":"#9D571B","@orange-5":"#BC6820","@orange-6":"#D37F36","@orange-7":"#DE9F68","@orange-8":"#E0AF85","@orange-9":"#E9CFB9","@yellow-50":"#241F15","@yellow-100":"#352D17","@yellow-200":"#564825","@yellow-300":"#775C18","@yellow-400":"#9C781C","@yellow-500":"#C29219","@yellow-600":"#D2A638","@yellow-700":"#E8BE54","@yellow-800":"#EFCF81","@yellow-900":"#EEDEB4","@yellow-1":"#352D17","@yellow-2":"#564825","@yellow-3":"#775C18","@yellow-4":"#9C781C","@yellow-5":"#C29219","@yellow-6":"#D2A638","@yellow-7":"#E8BE54","@yellow-8":"#EFCF81","@yellow-9":"#EEDEB4","@bright-yellow-50":"#242215","@bright-yellow-100":"#353117","@bright-yellow-200":"#564F25","@bright-yellow-300":"#776A18","@bright-yellow-400":"#9C8B1C","@bright-yellow-500":"#C2AC19","@bright-yellow-600":"#D2BD38","@bright-yellow-700":"#E8D454","@bright-yellow-800":"#EFE081","@bright-yellow-900":"#EEE7B4","@bright-yellow-1":"#353117","@bright-yellow-2":"#564F25","@bright-yellow-3":"#776A18","@bright-yellow-4":"#9C8B1C","@bright-yellow-5":"#C2AC19","@bright-yellow-6":"#D2BD38","@bright-yellow-7":"#E8D454","@bright-yellow-8":"#EFE081","@bright-yellow-9":"#EEE7B4","@brown-50":"#231E15","@brown-100":"#342A18","@brown-200":"#544327","@brown-300":"#624E2D","@brown-400":"#7E653A","@brown-500":"#967845","@brown-600":"#B29158","@brown-700":"#C2A87A","@brown-800":"#D2BF9D","@brown-900":"#E2D6C0","@brown-1":"#342A18","@brown-2":"#544327","@brown-3":"#624E2D","@brown-4":"#7E653A","@brown-5":"#967845","@brown-6":"#B29158","@brown-7":"#C2A87A","@brown-8":"#D2BF9D","@brown-9":"#E2D6C0"},themeToken:{"@white":"#FFFFFF","@black":"#000000","@background-base":"#FFFFFF","@yuque-grey-100":"#FAFAFA","@yuque-grey-200":"#F4F5F5","@yuque-grey-300":"#EFF0F0","@yuque-grey-400":"#E7E9E8","@yuque-grey-500":"#D8DAD9","@yuque-grey-600":"#BEC0BF","@yuque-grey-700":"#8A8F8D","@yuque-grey-800":"#585A5A","@yuque-grey-900":"#262626","@yuque-grey-1":"#FAFAFA","@yuque-grey-2":"#F4F5F5","@yuque-grey-3":"#EFF0F0","@yuque-grey-4":"#E7E9E8","@yuque-grey-5":"#D8DAD9","@yuque-grey-6":"#BEC0BF","@yuque-grey-7":"#8A8F8D","@yuque-grey-8":"#585A5A","@yuque-grey-9":"#262626","@pea-green-50":"#F3FBE7","@pea-green-100":"#E8F7CF","@pea-green-200":"#DBF1B7","@pea-green-300":"#C1E77E","@pea-green-400":"#A7DD4B","@pea-green-500":"#8CCF17","@pea-green-600":"#74B602","@pea-green-700":"#5C8D07","@pea-green-800":"#406105","@pea-green-900":"#2A4200","@pea-green-1":"#E8F7CF","@pea-green-2":"#DBF1B7","@pea-green-3":"#C1E77E","@pea-green-4":"#A7DD4B","@pea-green-5":"#8CCF17","@pea-green-6":"#74B602","@pea-green-7":"#5C8D07","@pea-green-8":"#406105","@pea-green-9":"#2A4200","@yuque-green-50":"#ECFAF4","@yuque-green-100":"#DAF6EA","@yuque-green-200":"#C7F0DF","@yuque-green-300":"#82EDC0","@yuque-green-400":"#45DE9D","@yuque-green-500":"#0BD07D","@yuque-green-600":"#00B96B","@yuque-green-700":"#009456","@yuque-green-800":"#00663B","@yuque-green-900":"#003D23","@yuque-green-1":"#DAF6EA","@yuque-green-2":"#C7F0DF","@yuque-green-3":"#82EDC0","@yuque-green-4":"#45DE9D","@yuque-green-5":"#0BD07D","@yuque-green-6":"#00B96B","@yuque-green-7":"#009456","@yuque-green-8":"#00663B","@yuque-green-9":"#003D23","@cyan-50":"#E6F9FB","@cyan-100":"#CEF5F7","@cyan-200":"#B5EFF2","@cyan-300":"#81DFE4","@cyan-400":"#5ED3D9","@cyan-500":"#1DC0C9","@cyan-600":"#01B2BC","@cyan-700":"#078B92","@cyan-800":"#07787E","@cyan-900":"#004347","@cyan-1":"#CEF5F7","@cyan-2":"#B5EFF2","@cyan-3":"#81DFE4","@cyan-4":"#5ED3D9","@cyan-5":"#1DC0C9","@cyan-6":"#01B2BC","@cyan-7":"#078B92","@cyan-8":"#07787E","@cyan-9":"#004347","@blue-50":"#ECF4FD","@blue-100":"#D9EAFC","@blue-200":"#C0DDFC","@blue-300":"#81BBF8","@blue-400":"#5FA8F6","@blue-500":"#2F8EF4","@blue-600":"#117CEE","@blue-700":"#0C68CA","@blue-800":"#074A92","@blue-900":"#00346B","@blue-1":"#D9EAFC","@blue-2":"#C0DDFC","@blue-3":"#81BBF8","@blue-4":"#5FA8F6","@blue-5":"#2F8EF4","@blue-6":"#117CEE","@blue-7":"#0C68CA","@blue-8":"#074A92","@blue-9":"#00346B","@sea-blue-50":"#ECEEFD","@sea-blue-100":"#D9DFFC","@sea-blue-200":"#C0CAFC","@sea-blue-300":"#96A7FD","@sea-blue-400":"#6E85F7","@sea-blue-500":"#4861E0","@sea-blue-600":"#2F4BDA","@sea-blue-700":"#213BC0","@sea-blue-800":"#162883","@sea-blue-900":"#101E60","@sea-blue-1":"#D9DFFC","@sea-blue-2":"#C0CAFC","@sea-blue-3":"#96A7FD","@sea-blue-4":"#6E85F7","@sea-blue-5":"#4861E0","@sea-blue-6":"#2F4BDA","@sea-blue-7":"#213BC0","@sea-blue-8":"#162883","@sea-blue-9":"#101E60","@purple-50":"#F2EDFC","@purple-100":"#E6DCF9","@purple-200":"#D9C9F8","@purple-300":"#BA9BF2","@purple-400":"#9A6EED","@purple-500":"#7E45E8","@purple-600":"#601BDE","@purple-700":"#4C16B1","@purple-800":"#391084","@purple-900":"#270070","@purple-1":"#E6DCF9","@purple-2":"#D9C9F8","@purple-3":"#BA9BF2","@purple-4":"#9A6EED","@purple-5":"#7E45E8","@purple-6":"#601BDE","@purple-7":"#4C16B1","@purple-8":"#391084","@purple-9":"#270070","@magenta-50":"#FDEFF7","@magenta-100":"#FBDFEF","@magenta-200":"#F7C4E2","@magenta-300":"#F297CC","@magenta-400":"#EC6AB6","@magenta-500":"#E746A4","@magenta-600":"#D22D8D","@magenta-700":"#AE146E","@magenta-800":"#800F51","@magenta-900":"#5C0036","@magenta-1":"#FBDFEF","@magenta-2":"#F7C4E2","@magenta-3":"#F297CC","@magenta-4":"#EC6AB6","@magenta-5":"#E746A4","@magenta-6":"#D22D8D","@magenta-7":"#AE146E","@magenta-8":"#800F51","@magenta-9":"#5C0036","@red-50":"#FDF1F3","@red-100":"#FBE4E7","@red-200":"#F8CED3","@red-300":"#F1A2AB","@red-400":"#EA7583","@red-500":"#E4495B","@red-600":"#DF2A3F","@red-700":"#AD1A2B","@red-800":"#8F0515","@red-900":"#70000D","@red-1":"#FBE4E7","@red-2":"#F8CED3","@red-3":"#F1A2AB","@red-4":"#EA7583","@red-5":"#E4495B","@red-6":"#DF2A3F","@red-7":"#AD1A2B","@red-8":"#8F0515","@red-9":"#70000D","@vermilion-50":"#FDF3F1","@vermilion-100":"#FBE8E4","@vermilion-200":"#F8D6CE","@vermilion-300":"#F0AD9D","@vermilion-400":"#EB866F","@vermilion-500":"#E46549","@vermilion-600":"#DF4B2A","@vermilion-700":"#AD351A","@vermilion-800":"#8F1E05","@vermilion-900":"#701500","@vermilion-1":"#FBE8E4","@vermilion-2":"#F8D6CE","@vermilion-3":"#F0AD9D","@vermilion-4":"#EB866F","@vermilion-5":"#E46549","@vermilion-6":"#DF4B2A","@vermilion-7":"#AD351A","@vermilion-8":"#8F1E05","@vermilion-9":"#701500","@orange-50":"#FEF2E9","@orange-100":"#FDE6D3","@orange-200":"#F8D6B9","@orange-300":"#F8B881","@orange-400":"#F6A055","@orange-500":"#F38F39","@orange-600":"#ED740C","@orange-700":"#C75C00","@orange-800":"#944400","@orange-900":"#663000","@orange-1":"#FDE6D3","@orange-2":"#F8D6B9","@orange-3":"#F8B881","@orange-4":"#F6A055","@orange-5":"#F38F39","@orange-6":"#ED740C","@orange-7":"#C75C00","@orange-8":"#944400","@orange-9":"#663000","@yellow-50":"#FCF5E6","@yellow-100":"#F9EFCD","@yellow-200":"#F6E1AC","@yellow-300":"#F5D480","@yellow-400":"#F5CB61","@yellow-500":"#F3BB2F","@yellow-600":"#ECAA04","@yellow-700":"#C99103","@yellow-800":"#8F6600","@yellow-900":"#664900","@yellow-1":"#F9EFCD","@yellow-2":"#F6E1AC","@yellow-3":"#F5D480","@yellow-4":"#F5CB61","@yellow-5":"#F3BB2F","@yellow-6":"#ECAA04","@yellow-7":"#C99103","@yellow-8":"#8F6600","@yellow-9":"#664900","@bright-yellow-50":"#FDF9E4","@bright-yellow-100":"#FBF5CB","@bright-yellow-200":"#FCF1A6","@bright-yellow-300":"#FDEB78","@bright-yellow-400":"#FCE75A","@bright-yellow-500":"#FBDE28","@bright-yellow-600":"#EDCE02","@bright-yellow-700":"#CDB204","@bright-yellow-800":"#A58F04","@bright-yellow-900":"#665800","@bright-yellow-1":"#FBF5CB","@bright-yellow-2":"#FCF1A6","@bright-yellow-3":"#FDEB78","@bright-yellow-4":"#FCE75A","@bright-yellow-5":"#FBDE28","@bright-yellow-6":"#EDCE02","@bright-yellow-7":"#CDB204","@bright-yellow-8":"#A58F04","@bright-yellow-9":"#665800","@brown-50":"#F7F2EA","@brown-100":"#F0E7D6","@brown-200":"#E7D7BB","@brown-300":"#DBC39A","@brown-400":"#D2B684","@brown-500":"#C59F5E","@brown-600":"#B1873F","@brown-700":"#927035","@brown-800":"#74592A","@brown-900":"#523F1E","@brown-1":"#F0E7D6","@brown-2":"#E7D7BB","@brown-3":"#DBC39A","@brown-4":"#D2B684","@brown-5":"#C59F5E","@brown-6":"#B1873F","@brown-7":"#927035","@brown-8":"#74592A","@brown-9":"#523F1E","@yuque-color-theme":"#00B96B","@yuque-color-normal":"#D8DAD9","@yuque-color-bg-primary":"#FFFFFF","@yuque-color-bg-secondary":"#FAFAFA","@yuque-color-bg-tertiary":"#F4F5F5","@yuque-color-bg-primary-hover":"#EFF0F0","@yuque-color-bg-primary-hover-light":"#E7E9E8","@yuque-color-bg-foreground":"#FFFFFF","@yuque-color-bg-pre-foreground":"#FFFFFF","@yuque-color-bg-pre-secondary":"#F4F5F5","@yuque-color-bg-card-dialog":"#FAFAFA","@yuque-color-mask-bg":"rgba(0, 0, 0, 0.65)","@yuque-color-toast-bg":"rgba(0, 0, 0, 0.65)","@yuque-color-border-primary":"#E7E9E8","@yuque-color-border-primary-active":"#00B96B","@yuque-color-border-light":"rgba(0, 0, 0, 0.04)","@yuque-color-border-heavy":"#EFF0F0","@yuque-color-cardborder-hover":"#81BBF8","@yuque-color-cardborder-selected":"#2F8EF4","@yuque-color-sheetborder":"rgba(0, 0, 0, 0.1)","@yuque-color-text-primary":"#262626","@yuque-color-text-body":"#585A5A","@yuque-color-text-caption":"#8A8F8D","@yuque-color-text-disable":"#BEC0BF","@yuque-color-text-link":"#117CEE","@yuque-color-text-link-hover":"#5FA8F6","@yuque-color-icon-primary":"#262626","@yuque-color-icon-secondary":"#585A5A","@yuque-color-icon-caption":"#8A8F8D","@yuque-color-icon-disable":"#BEC0BF","@yuque-color-icon-hover":"#D8DAD9","@yuque-color-icon-colorbg":"rgba(0, 0, 0, 0.45)","@yuque-color-function-success":"#00B96B","@yuque-color-function-info":"#117CEE","@yuque-color-function-warning":"#ECAA04","@yuque-color-function-error":"#DF2A3F","@yuque-color-badge":"#2F8EF4","@yuque-color-popover-bg":"#FFFFFF","@yuque-color-disable-color":"#BEC0BF"},themeDarkToken:{"@white":"#000000","@black":"#FFFFFF","@background-base":"#141414","@yuque-grey-100":"#141414","@yuque-grey-200":"#1F1F1F","@yuque-grey-300":"#292929","@yuque-grey-400":"#333333","@yuque-grey-500":"#424242","@yuque-grey-600":"#505050","@yuque-grey-700":"#848484","@yuque-grey-800":"#B3B3B3","@yuque-grey-900":"#E2E2E2","@yuque-grey-1":"#141414","@yuque-grey-2":"#1F1F1F","@yuque-grey-3":"#292929","@yuque-grey-4":"#333333","@yuque-grey-5":"#424242","@yuque-grey-6":"#505050","@yuque-grey-7":"#848484","@yuque-grey-8":"#B3B3B3","@yuque-grey-9":"#E2E2E2","@pea-green-50":"#1B2113","@pea-green-100":"#242F14","@pea-green-200":"#445625","@pea-green-300":"#557915","@pea-green-400":"#6A9226","@pea-green-500":"#7AAD22","@pea-green-600":"#94BC4E","@pea-green-700":"#AED666","@pea-green-800":"#C2DF90","@pea-green-900":"#D5E1C1","@pea-green-1":"#242F14","@pea-green-2":"#445625","@pea-green-3":"#557915","@pea-green-4":"#6A9226","@pea-green-5":"#7AAD22","@pea-green-6":"#94BC4E","@pea-green-7":"#AED666","@pea-green-8":"#C2DF90","@pea-green-9":"#D5E1C1","@yuque-green-50":"#10211A","@yuque-green-100":"#0E2F22","@yuque-green-200":"#255641","@yuque-green-300":"#18774F","@yuque-green-400":"#298E64","@yuque-green-500":"#29AD76","@yuque-green-600":"#51B88D","@yuque-green-700":"#6BD1A6","@yuque-green-800":"#97D8BC","@yuque-green-900":"#BCE6D5","@yuque-green-1":"#0E2F22","@yuque-green-2":"#255641","@yuque-green-3":"#18774F","@yuque-green-4":"#298E64","@yuque-green-5":"#29AD76","@yuque-green-6":"#51B88D","@yuque-green-7":"#6BD1A6","@yuque-green-8":"#97D8BC","@yuque-green-9":"#BCE6D5","@cyan-50":"#122324","@cyan-100":"#123436","@cyan-200":"#255356","@cyan-300":"#1A7074","@cyan-400":"#278B90","@cyan-500":"#22A8AF","@cyan-600":"#4EB6BC","@cyan-700":"#76C2C6","@cyan-800":"#95D7DB","@cyan-900":"#BFE1E3","@cyan-1":"#123436","@cyan-2":"#255356","@cyan-3":"#1A7074","@cyan-4":"#278B90","@cyan-5":"#22A8AF","@cyan-6":"#4EB6BC","@cyan-7":"#76C2C6","@cyan-8":"#95D7DB","@cyan-9":"#BFE1E3","@blue-50":"#15212D","@blue-100":"#193048","@blue-200":"#253C56","@blue-300":"#1D4672","@blue-400":"#245A94","@blue-500":"#2B6BB1","@blue-600":"#3B82CE","@blue-700":"#689FD9","@blue-800":"#8DB5E2","@blue-900":"#B5D0ED","@blue-1":"#193048","@blue-2":"#253C56","@blue-3":"#1D4672","@blue-4":"#245A94","@blue-5":"#2B6BB1","@blue-6":"#3B82CE","@blue-7":"#689FD9","@blue-8":"#8DB5E2","@blue-9":"#B5D0ED","@sea-blue-50":"#171C33","@sea-blue-100":"#1C2654","@sea-blue-200":"#252D56","@sea-blue-300":"#1B2A74","@sea-blue-400":"#243694","@sea-blue-500":"#2B41B1","@sea-blue-600":"#3B54CE","@sea-blue-700":"#687BD9","@sea-blue-800":"#8D9BE2","@sea-blue-900":"#B5BEED","@sea-blue-1":"#1C2654","@sea-blue-2":"#252D56","@sea-blue-3":"#1B2A74","@sea-blue-4":"#243694","@sea-blue-5":"#2B41B1","@sea-blue-6":"#3B54CE","@sea-blue-7":"#687BD9","@sea-blue-8":"#8D9BE2","@sea-blue-9":"#B5BEED","@purple-50":"#1F172E","@purple-100":"#2C1C4A","@purple-200":"#352259","@purple-300":"#3A1C73","@purple-400":"#512A98","@purple-500":"#5A2CAF","@purple-600":"#7551B8","@purple-700":"#9677CF","@purple-800":"#B099DB","@purple-900":"#CABCE7","@purple-1":"#2C1C4A","@purple-2":"#352259","@purple-3":"#3A1C73","@purple-4":"#512A98","@purple-5":"#5A2CAF","@purple-6":"#7551B8","@purple-7":"#9677CF","@purple-8":"#B099DB","@purple-9":"#CABCE7","@magenta-50":"#301525","@magenta-100":"#4E1837","@magenta-200":"#5B1F42","@magenta-300":"#701F4E","@magenta-400":"#942465","@magenta-500":"#A43776","@magenta-600":"#BE4B8E","@magenta-700":"#CE78AA","@magenta-800":"#D996BD","@magenta-900":"#E6BCD5","@magenta-1":"#4E1837","@magenta-2":"#5B1F42","@magenta-3":"#701F4E","@magenta-4":"#942465","@magenta-5":"#A43776","@magenta-6":"#BE4B8E","@magenta-7":"#CE78AA","@magenta-8":"#D996BD","@magenta-9":"#E6BCD5","@red-50":"#29191C","@red-100":"#402125","@red-200":"#5B2027","@red-300":"#741B25","@red-400":"#981F2D","@red-500":"#B62536","@red-600":"#CA3F4F","@red-700":"#CC7B84","@red-800":"#D49199","@red-900":"#E6BCC1","@red-1":"#402125","@red-2":"#5B2027","@red-3":"#741B25","@red-4":"#981F2D","@red-5":"#B62536","@red-6":"#CA3F4F","@red-7":"#CC7B84","@red-8":"#D49199","@red-9":"#E6BCC1","@vermilion-50":"#271C19","@vermilion-100":"#3C2520","@vermilion-200":"#5B2B20","@vermilion-300":"#742B1B","@vermilion-400":"#943824","@vermilion-500":"#B0432B","@vermilion-600":"#CD573C","@vermilion-700":"#D9816D","@vermilion-800":"#E09685","@vermilion-900":"#E9C2B9","@vermilion-1":"#3C2520","@vermilion-2":"#5B2B20","@vermilion-3":"#742B1B","@vermilion-4":"#943824","@vermilion-5":"#B0432B","@vermilion-6":"#CD573C","@vermilion-7":"#D9816D","@vermilion-8":"#E09685","@vermilion-9":"#E9C2B9","@orange-50":"#251E18","@orange-100":"#382A1E","@orange-200":"#5E3B1D","@orange-300":"#774418","@orange-400":"#9D571B","@orange-500":"#BC6820","@orange-600":"#D37F36","@orange-700":"#DE9F68","@orange-800":"#E0AF85","@orange-900":"#E9CFB9","@orange-1":"#382A1E","@orange-2":"#5E3B1D","@orange-3":"#774418","@orange-4":"#9D571B","@orange-5":"#BC6820","@orange-6":"#D37F36","@orange-7":"#DE9F68","@orange-8":"#E0AF85","@orange-9":"#E9CFB9","@yellow-50":"#241F15","@yellow-100":"#352D17","@yellow-200":"#564825","@yellow-300":"#775C18","@yellow-400":"#9C781C","@yellow-500":"#C29219","@yellow-600":"#D2A638","@yellow-700":"#E8BE54","@yellow-800":"#EFCF81","@yellow-900":"#EEDEB4","@yellow-1":"#352D17","@yellow-2":"#564825","@yellow-3":"#775C18","@yellow-4":"#9C781C","@yellow-5":"#C29219","@yellow-6":"#D2A638","@yellow-7":"#E8BE54","@yellow-8":"#EFCF81","@yellow-9":"#EEDEB4","@bright-yellow-50":"#242215","@bright-yellow-100":"#353117","@bright-yellow-200":"#564F25","@bright-yellow-300":"#776A18","@bright-yellow-400":"#9C8B1C","@bright-yellow-500":"#C2AC19","@bright-yellow-600":"#D2BD38","@bright-yellow-700":"#E8D454","@bright-yellow-800":"#EFE081","@bright-yellow-900":"#EEE7B4","@bright-yellow-1":"#353117","@bright-yellow-2":"#564F25","@bright-yellow-3":"#776A18","@bright-yellow-4":"#9C8B1C","@bright-yellow-5":"#C2AC19","@bright-yellow-6":"#D2BD38","@bright-yellow-7":"#E8D454","@bright-yellow-8":"#EFE081","@bright-yellow-9":"#EEE7B4","@brown-50":"#231E15","@brown-100":"#342A18","@brown-200":"#544327","@brown-300":"#624E2D","@brown-400":"#7E653A","@brown-500":"#967845","@brown-600":"#B29158","@brown-700":"#C2A87A","@brown-800":"#D2BF9D","@brown-900":"#E2D6C0","@brown-1":"#342A18","@brown-2":"#544327","@brown-3":"#624E2D","@brown-4":"#7E653A","@brown-5":"#967845","@brown-6":"#B29158","@brown-7":"#C2A87A","@brown-8":"#D2BF9D","@brown-9":"#E2D6C0","@yuque-color-theme":"#2ED790","@yuque-color-normal":"#424242","@yuque-color-bg-primary":"#141414","@yuque-color-bg-secondary":"#1F1F1F","@yuque-color-bg-tertiary":"rgba(255, 255, 255, 0.04)","@yuque-color-bg-primary-hover":"rgba(255, 255, 255, 0.12)","@yuque-color-bg-primary-hover-light":"#333333","@yuque-color-bg-foreground":"#1F1F1F","@yuque-color-bg-pre-foreground":"#292929","@yuque-color-bg-pre-secondary":"#292929","@yuque-color-bg-card-dialog":"#292929","@yuque-color-mask-bg":"rgba(0, 0, 0, 0.65)","@yuque-color-toast-bg":"#292929","@yuque-color-border-primary":"rgba(255, 255, 255, 0.12)","@yuque-color-border-primary-active":"#29AD76","@yuque-color-border-light":"rgba(255, 255, 255, 0.08)","@yuque-color-border-heavy":"rgba(255, 255, 255, 0.12)","@yuque-color-cardborder-hover":"#253C56","@yuque-color-cardborder-selected":"#1D4672","@yuque-color-sheetborder":"rgba(255, 255, 255, 0.12)","@yuque-color-text-primary":"#E2E2E2","@yuque-color-text-body":"#B3B3B3","@yuque-color-text-caption":"#848484","@yuque-color-text-disable":"#505050","@yuque-color-text-link":"#3B82CE","@yuque-color-text-link-hover":"#245A94","@yuque-color-icon-primary":"#E2E2E2","@yuque-color-icon-secondary":"#B3B3B3","@yuque-color-icon-caption":"#848484","@yuque-color-icon-disable":"#505050","@yuque-color-icon-hover":"#424242","@yuque-color-icon-colorbg":"rgba(0, 0, 0, 0.45)","@yuque-color-function-success":"#51B88D","@yuque-color-function-info":"#3B82CE","@yuque-color-function-warning":"#D2A638","@yuque-color-function-error":"#CA3F4F","@yuque-color-badge":"#2B6BB1","@yuque-color-popover-bg":"#1F1F1F","@yuque-color-disable-color":"#505050"}};function yP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yP(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wP=bP(bP({},mP.themeToken),{},{"@yuque-color-table-bg":"#FAFAFA","@yuque-color-table-darg":"#D8DAD9","@yuque-color-table-temp":"#F9EFCD","@yuque-color-table-header-border":"#E7E9E8"}),_P=bP(bP({},mP.themeDarkToken),{},{"@yuque-color-table-bg":"#141414","@yuque-color-table-darg":"#404040","@yuque-color-table-header-border":"#373838"}),kP=function(e){return e.default="default",e.dark="dark",e}(kP||{}),CP=Ts.defineToken("ThemeContribution"),EP={},OP={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}(OP);var SP=OP.exports;const xP=Ew(Hb),jP=Ew(Gb),IP=Ew(zb);var RP={};Object.defineProperty(RP,"__esModule",{value:!0});var AP=RP.Theme=void 0;AP=RP.Theme=function(e){return e.default="default",e.dark="dark",e}({});var DP={},PP=VD;function MP(e){return Math.min(1,Math.max(0,e))}function TP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;"string"==typeof n&&n.endsWith("%")&&(n=parseInt(n,10)/100);var r=PP(e).toRgb(),o=PP(t).toRgb(),i=2*n-1,a=r.a-o.a,l=((i*a==-1?i:(i+a)/(1+i*a))+1)/2,u=1-l,c={r:r.r*l+o.r*u,g:r.g*l+o.g*u,b:r.b*l+o.b*u,a:r.a*n+o.a*(1-n)};return PP(c).toRgbString()}PP=PP.default||PP;var FP,NP={lagacy:[["#000000","#262626","#595959","#8C8C8C","#BFBFBF","#D9D9D9","#E9E9E9","#F5F5F5","#FAFAFA","#FFFFFF"],["#F5222D","#FA541C","#FA8C16","#FADB14","#52C41A","#13C2C2","#1890FF","#2F54EB","#722ED1","#EB2F96"],["#FFE8E6","#FFECE0","#FFEFD1","#FCFCCA","#E4F7D2","#D3F5F0","#D4EEFC","#DEE8FC","#EFE1FA","#FAE1EB"],["#FFA39E","#FFBB96","#FFD591","#FFFB8F","#B7EB8F","#87E8DE","#91D5FF","#ADC6FF","#D3ADF7","#FFADD2"],["#FF4D4F","#FF7A45","#FFA940","#FFEC3D","#73D13D","#36CFC9","#40A9FF","#597EF7","#9254DE","#F759AB"],["#CF1322","#D4380D","#D46B08","#D4B106","#389E0D","#08979C","#096DD9","#1D39C4","#531DAB","#C41D7F"],["#820014","#871400","#873800","#614700","#135200","#00474F","#003A8C","#061178","#22075E","#780650"]],dark:[["@black","@yuque-grey-900","@yuque-grey-800","@yuque-grey-700","@yuque-grey-500","@yuque-grey-400","@yuque-grey-300","@yuque-grey-200","@yuque-grey-100","@white"],["@red-600","@orange-600","@yellow-600","@bright-yellow-500","@pea-green-600","@cyan-500","@blue-600","@sea-blue-600","@purple-600","@magenta-600"],["@red-100","@orange-100","@yellow-100","@bright-yellow-100","@pea-green-100","@cyan-100","@blue-100","@sea-blue-100","@purple-100","@magenta-100"],["@red-300","@orange-300","@yellow-300","@bright-yellow-400","@pea-green-300","@cyan-300","@blue-300","@sea-blue-300","@purple-300","@magenta-300"],["@red-500","@orange-500","@yellow-500","@bright-yellow-600","@pea-green-500","@cyan-600","@blue-500","@sea-blue-500","@purple-500","@magenta-500"],["@red-700","@orange-700","@yellow-700","@bright-yellow-800","@pea-green-700","@cyan-800","@blue-700","@sea-blue-700","@purple-700","@magenta-700"],["@red-900","@orange-900","@yellow-900","@bright-yellow-900","@pea-green-900","@cyan-900","@blue-900","@sea-blue-900","@purple-900","@magenta-900"]],getTokenFromColor:function(e){var t,n,r;return NP.lagacy.map((function(t,o){t.map((function(t,i){e===t&&(n=o,r=i)}))})),null===(t=NP.dark[n])||void 0===t?void 0:t[r]}},VP={toLight:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=PP(e).toHsl();return"white"===PP(n).toName()||"black"===PP(n).toName()?"#ffffff":(n.l+=t/100,n.l=MP(n.l),PP(n).toRgbString())},toDark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=PP(e).toHsl();return"white"===PP(n).toName()||"black"===PP(n).toName()?"#000000":(n.l-=t/100,n.l=MP(n.l),PP(n).toRgbString())},fade:function(e,t){return"string"==typeof t&&t.endsWith("%")&&(t=parseInt(t,10)/100),(e=PP(e)).setAlpha(t).toRgbString()},fadeout:function(e,t){var n=PP(e).toHsl();return n.a-=t/100,n.a=MP(n.a),PP(n).toRgbString()},mix:TP,autoDark:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#141414",n=function(e){var t=PP(e).toHsl().l;return t>.9&&t<1?.1:t>.8&&t<.9?.2:t>.7&&t<.8?.3:t>.6&&t<.7?.4:t>.5&&t<.6?.5:t>.4&&t<.5?.6:t>.3&&t<.4?.7:t>.2&&t<.3?.8:t<.2?.9:.5}(e),r=function(e){var t=PP(e).toHsl();return 0===t.h?t.s=.2:t.h>255?t.s=.7:t.s=.9,t.l=.4,PP(t).toHexString()}(e);return PP(TP(r,t,n)).toHexString()},reverseL:function(e){var t=PP(e).toHsl();return t.l=1-t.l,PP(t).toRgbString()},LagacyPalette:NP};var LP=SP;Object.defineProperty(EP,"__esModule",{value:!0});var BP=EP.DefaultThemeManager=void 0,$P=LP(xP),zP=LP(jP),UP=LP(IP),HP=RP,qP=mP,WP=LP(function(){if(FP)return DP;FP=1,Object.defineProperty(DP,"__esModule",{value:!0}),DP.default=void 0;var e=RP,t=VP,n=mP,r=VD;return DP.default={transform:function(o,i,a){var l=o||e.Theme.default,u=i||e.Theme.default;if(l===u||a.startsWith("rgb(")&&a.indexOf(",")<0)return a;if(l===e.Theme.default&&u===e.Theme.dark){if(t.LagacyPalette.getTokenFromColor(a)&&(a=t.LagacyPalette.getTokenFromColor(a)),a.startsWith("@")&&n.themeToken[a])return Number(a.split("-").reverse()[0])<10?n.themeDarkToken["".concat(a,"00")]:n.themeDarkToken[a];var c=Object.keys(n.colorToken).find((function(e){return r(n.colorToken[e]).toHex8String()===r(a).toHex8String()}));return c?n.colorDarkToken[c]:(0,t.reverseL)(a)}if(l===e.Theme.dark&&u===e.Theme.default){if(a.startsWith("@")&&n.themeDarkToken[a])return n.themeToken[a];var s=Object.keys(n.colorDarkToken).find((function(e){return n.colorDarkToken[e]&&r(n.colorDarkToken[e]).toHex8String()===r(a).toHex8String()}));return s?n.colorToken[s]:(0,t.reverseL)(a)}return a},get:function(t,r){return t.startsWith("@")?r===e.Theme.dark?n.themeDarkToken[t]:n.themeToken[t]:t}},DP}()),GP="data-kumuhana";BP=EP.DefaultThemeManager=function(){function e(){(0,$P.default)(this,e),(0,UP.default)(this,"_current",null),(0,UP.default)(this,"listeners",[])}return(0,zP.default)(e,[{key:"current",get:function(){return this._current}},{key:"themeToken",get:function(){return this._current===HP.Theme.dark?qP.themeDarkToken:qP.themeToken}},{key:"_getStorageKey",value:function(e){return"".concat("yuque:prefers-color",":").concat(e)}},{key:"_getStorage",value:function(e){return e&&localStorage.getItem(this._getStorageKey(e))===HP.Theme.dark?HP.Theme.dark:HP.Theme.default}},{key:"init",value:function(e){var t=this._getStorage(e)||HP.Theme.default;return document.documentElement.setAttribute(GP,"dark"===t?"pouli":"default"),this._current!==t&&(this._current=t,!0)}},{key:"switch",value:function(e,t){var n=this._current;if(n===e)return!1;var r=e===HP.Theme.dark?HP.Theme.dark:HP.Theme.default;return document.documentElement.setAttribute(GP,"dark"===r?"pouli":"default"),this._current=r,t&&localStorage.setItem(this._getStorageKey(t),r),this.emitChange(n),!0}},{key:"emitChange",value:function(e){var t=this._current;this.listeners.forEach((function(n){n(t,e)}))}},{key:"onChange",value:function(e){var t=this;return this.listeners.push(e),function(){var n=t.listeners.indexOf(e);-1!==n&&t.listeners.splice(n,1)}}},{key:"transformColor",value:function(e,t,n){return WP.default.transform(e,t,n)}},{key:"getColor",value:function(e,t){return t||(t=this._current),WP.default.get(e,t)}}]),e}();var KP=Object.defineProperty,YP=Object.getOwnPropertyDescriptor,XP=function(e,t,n,r){for(var o,i=r>1?void 0:r?YP(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&KP(t,n,i),i},JP=function(){return Wb((function e(){Ub(this,e)}),[{key:"getProvider",value:function(){var e=this.themeProvider.getContributions(),t=e[e.length-1];return null==t?void 0:t.registerTheme()}},{key:"getThemeManager",value:function(){var e;return this._themeManager?this._themeManager:(this._themeManager=null==(e=this.getProvider())?void 0:e.getThemeManager(),this._themeManager||new BP)}}])}();XP([bd(CP)],JP.prototype,"themeProvider",2),JP=XP([Ys()],JP);var ZP=Object.defineProperty,QP=Object.getOwnPropertyDescriptor,eM=function(e,t,n,r){for(var o,i=r>1?void 0:r?QP(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ZP(t,n,i),i};var tM=function(){return Wb((function e(){Ub(this,e)}),[{key:"getThemeManager",value:function(){return this._themeRegistry.getThemeManager()}},{key:"isCurrentInDarkTheme",value:function(){var e=this._themeRegistry.getThemeManager();return(null==e?void 0:e.current)===AP.dark}},{key:"getCurrentTheme",value:function(){var e=this._themeRegistry.getThemeManager();return null==e?void 0:e.current}},{key:"toThemeColor",value:function(e){var t=this._themeRegistry.getThemeManager();if(!e)return e;if(e.toLowerCase().startsWith("@"))return"dark"===(null==t?void 0:t.current)?_P[e]:wP[e];if(e.toLowerCase().startsWith("fade")){var n=gP(e.match(/^fade\((.*),(.*)\)$/),3),r=n[1],o=n[2];return VP.fade(this.toThemeColor(r.trim()),function(e){return e.endsWith("%")?parseFloat(e.replace("%",""))/100:parseFloat(e)}(o.trim()))}return(null==t?void 0:t.transformColor(kP.default,null==t?void 0:t.current,e))||e}},{key:"transToThemeColor",value:function(e){var t=this._themeRegistry.getThemeManager();return e&&t&&t?this.isCurrentInDarkTheme()?t.transformColor(AP.default,AP.dark,e):t.getColor(e,kP.default):e}},{key:"addThemeChangeListener",value:function(e){var t=this._themeRegistry.getThemeManager();return null==t?void 0:t.onChange(e)}}])}();eM([Xs(JP)],tM.prototype,"_themeRegistry",2),tM=eM([Ys()],tM);var nM=Object.defineProperty,rM=Object.getOwnPropertyDescriptor,oM=function(e,t,n,r){for(var o,i=r>1?void 0:r?rM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&nM(t,n,i),i},iM={},aM=function(){return Wb((function e(){Ub(this,e),this._themeCache={},this._isColor=function(e){return e.toLowerCase().startsWith("@")||e.toLowerCase().startsWith("#")||e.toLowerCase().startsWith("rgb(")||e.toLowerCase().startsWith("rgba(")||e.toLowerCase().startsWith("fade(")}}),[{key:"_getThemeValue",value:function(e){var t=this;if(this._isColor(e))return this._themeHelper.toThemeColor(e);var n=e.split(".").reduce((function(e,t){return e?e[t]:null}),iM);if(null==n)return null;return function e(n){if(null==n)return n;if("string"==typeof n&&t._isColor(n))return t._themeHelper.toThemeColor(n);"object"!==Lb(n)||Array.isArray(n)||Object.keys(n).forEach((function(t){n[t]=e(n[t])}));return n}(n)}},{key:"getThemeValue",value:function(e){var t=e,n=this._themeRegistry.getThemeManager();if(!t)return null;var r=(null==n?void 0:n.current)||"light";r&&(t=r+"$"+t);var o=this._themeCache[t];if(o)return o;var i=this._getThemeValue(e);return this._themeCache[t]=i,i}},{key:"getCurrent",value:function(){return this._themeHelper.getCurrentTheme()}},{key:"onChange",value:function(e){this._themeRegistry.getThemeManager().onChange(e)}}])}();oM([Xs(JP)],aM.prototype,"_themeRegistry",2),oM([Xs(tM)],aM.prototype,"_themeHelper",2),aM=oM([Ys()],aM);var lM=pd().contribution(CP).register(aM).register(JP).register(tM),uM={"#FFA39E":"#FBD3D0","#FFEC3D":"#F7E9BC","#91D5FF":"#C4E4F5","#FFADD2":"#E4F7D2","#FFD591":"#E8D5CB","#87E8DE":"#C0EBE5","#D3ADF7":"#DBCEF5","#FFBB96":"#E8E8E8","#B7EB8F":"#E5EDCA","#ADC6FF":"#C2CDF0"},cM=["#F1A2AB","#F5D480","#C1E77E","#82EDC0","#81DFE4","#81BBF8","#96A7FD","#BA9BF2","#DBC39A","#BEC0BF"],sM=[["$label-back-color:0-0","$label-back-color:0-1","$label-back-color:0-2","$label-back-color:0-3","$label-back-color:0-4"],["$label-back-color:1-0","$label-back-color:1-1","$label-back-color:1-2","$label-back-color:1-3","$label-back-color:1-4"],["$label-back-color:2-0","$label-back-color:2-1","$label-back-color:2-2","$label-back-color:2-3","$label-back-color:2-4"],["$label-back-color:3-0","$label-back-color:3-1","$label-back-color:3-2","$label-back-color:3-3","$label-back-color:3-4"]],dM={labelColor:[["@yuque-green-1","@yellow-1","@blue-1","@yuque-grey-3","@red-1"],["@brown-1","@cyan-1","@purple-1","@pea-green-1","@sea-blue-1"],["@red-3","@yellow-3","@pea-green-3","@yuque-green-3","@cyan-3"],["@blue-3","@sea-blue-3","@purple-3","@brown-3","@yuque-grey-6"]],labelTextColor:[["@yuque-green-9","@yellow-9","@blue-9","@yuque-grey-9","@red-9"],["@brown-9","@cyan-9","@purple-9","@pea-green-9","@sea-blue-9"],["@red-9","@yellow-9","@pea-green-9","@yuque-green-9","@cyan-9"],["@blue-9","@sea-blue-9","@purple-9","@brown-9","@yuque-grey-9"]]},fM="$label-back-color:",pM=Object.defineProperty,hM=Object.getOwnPropertyDescriptor,vM=function(e,t,n,r){for(var o,i=r>1?void 0:r?hM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&pM(t,n,i),i},gM=new Map,mM=function(){return Wb((function e(){Ub(this,e)}),[{key:"getLabelColorTokenByBackColorId",value:function(e){var t="@yuque-color-bg-primary";if(!e.startsWith(fM))return this._themeHelper.transToThemeColor(t);var n=gP(mM.getIndexesByBackColorId(e),2),r=n[0],o=n[1];return dM.labelColor[r][o]||t}},{key:"getColorByBackColorId",value:function(e){var t=this.getLabelColorTokenByBackColorId(e);return this._themeHelper.transToThemeColor(t)}},{key:"getTextColorByBackColorId",value:function(e){var t="@yuque-color-text-primary";if(!e.startsWith(fM))return this._themeHelper.transToThemeColor(t);var n=gP(mM.getIndexesByBackColorId(e),2),r=n[0],o=n[1],i=dM.labelTextColor[r][o]||t;return this._themeHelper.transToThemeColor(i)}},{key:"getByIndex",value:function(e){var t=Ii(sM);return t[e%t.length]}},{key:"getRenderColor",value:function(e){var t="labelColor:".concat(this._themeHelper.getCurrentTheme(),":").concat(e),n=gM.get(t);if(n)return n;var r=mM.getColor(e),o="";return o=mM.isLabelColorId(r)?this.getColorByBackColorId(r):this._themeHelper.transToThemeColor(r),gM.set(t,o),o}},{key:"getRenderTextColor",value:function(e){var t="labelTextColor:".concat(this._themeHelper.getCurrentTheme(),":").concat(e),n=gM.get(t);if(n)return n;var r="";return r=e?mM.isLabelColorId(e)?this.getTextColorByBackColorId(e):this._themeHelper.isCurrentInDarkTheme()||function(e){return VD(e).getBrightness()<200}(e)&&!cM.includes(e)?"#fff":"rgba(0,0,0,0.65)":this._themeHelper.transToThemeColor("@yuque-color-text-primary"),gM.set(t,r),r}}],[{key:"isLabelColorId",value:function(e){return mw(e)&&e.startsWith(fM)}},{key:"getColor",value:function(e){return mw(e)?mM.isLabelColorId(e)?e:uM[e.toUpperCase()]||e:""}},{key:"getNextColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=mM.getColor(e),n=Ii(sM),r=n.indexOf(t);return r>=0?n[(r+1)%n.length]:n[0]}},{key:"getIndexesByBackColorId",value:function(e){if(e.startsWith(fM)){var t=gP(e.split(fM),2);t[0];var n=gP(t[1].split("-"),2),r=n[0],o=n[1],i=[Number(r),Number(o)];return[i[0],i[1]]}return[0,0]}}])}();vM([Xs(tM)],mM.prototype,"_themeHelper",2),mM=vM([Ys()],mM);var yM=pd().register(mM),bM=pd().register(nw);function wM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _M(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function _M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kM(e,t,n){return t=P_(t),D_(e,CM()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function CM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(CM=function(){return!!e})()}var EM=Object.defineProperty,OM=Object.getOwnPropertyDescriptor,SM=function(e){function t(){return Ub(this,t),kM(this,t,arguments)}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldSelectModel}},{key:"type",get:function(){return SM.type}},{key:"baseType",get:function(){return SM.baseType}},{key:"_getNewOptionColor",value:function(e){return e?e.color?mM.getNextColor(e.color):"":mM.getNextColor()}},{key:"validate",value:function(e){return!!e}},{key:"transform",value:function(e,t){if(t){var n,r=this._model.fieldOptionModel.find({field_uuid:t}),o=wM(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i.get("name")===e||i.get("uuid")===e)return{value:i.get("uuid")}}}catch(e){o.e(e)}finally{o.f()}var a=fw(6),l=r.get(r.length-1),u={uuid:a,field_uuid:t,name:e.slice(0,lO.MAX_LENGTH),color:l&&this._getNewOptionColor(l.toJSON())};return this._model.fieldOptionModel.create(u),{value:a}}return{value:e}}},{key:"formatted",value:function(e,t){if(!e)return"";if(!t)return tu(e)?e:"";var n=this._getOptionValue(t,e);return(null==n?void 0:n.get("name"))||""}},{key:"_getOptionValue",value:function(e,t){var n,r=wM(this._model.fieldOptionModel.find({field_uuid:e}));try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.get("uuid")===t)return o}}catch(e){r.e(e)}finally{r.f()}}},{key:"keyValue",value:function(e){return e||null}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value,e)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null;n&&(r=n.get("value"));var o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),updated_at:o.get("updated_at"),value:r,by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new m_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n,e),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:n,record_uuid:e.recordId,value:e.value}})))}}])}(nR);SM.type=bC.SELECT,SM.baseType=wC.SELECT,SM=function(e,t,n,r){for(var o,i=r>1?void 0:r?OM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&EM(t,n,i),i}([Ys()],SM);var xM=Object.defineProperty,jM=Object.getOwnPropertyDescriptor,IM=function(e,t,n,r){for(var o,i=r>1?void 0:r?jM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&xM(t,n,i),i},RM=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._selectField)}}],[{key:"pluginModule",value:function(){return pd().register(SM).register(this)}}])}();function AM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return DM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DM(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function DM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function PM(e,t,n){return t=P_(t),D_(e,MM()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function MM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(MM=function(){return!!e})()}RM.pluginName="kernel-field-select",IM([Xs(SM)],RM.prototype,"_selectField",2),RM=IM([Ys({contrib:kA})],RM);var TM=Object.defineProperty,FM=Object.getOwnPropertyDescriptor,NM=function(e){function t(){return Ub(this,t),PM(this,t,arguments)}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldSelectModel}},{key:"type",get:function(){return NM.type}},{key:"baseType",get:function(){return NM.baseType}},{key:"_getNewOptionColor",value:function(e){return e?e.color?mM.getNextColor(e.color):"":mM.getNextColor()}},{key:"validate",value:function(e){return!0}},{key:"transform",value:function(e,t){var n=this;if(t){var r=this._model.fieldOptionModel.find({field_uuid:t});if(Array.isArray(e)){var o,i=[],a=AM(e);try{var l=function(){var e=o.value,a=k_(r,(function(t){return t.get("name")===e}));if(a>=0)i.push({value:r.get(a).get("uuid")});else{var l=fw(6),u=r.get(r.length-1),c={uuid:l,field_uuid:t,name:(null==e?void 0:e.slice(0,lO.MAX_LENGTH))||"",color:n._getNewOptionColor(null==u?void 0:u.toJSON())};n._model.fieldOptionModel.create(c),i.push({value:c.uuid})}};for(a.s();!(o=a.n()).done;)l()}catch(e){a.e(e)}finally{a.f()}return{value:i}}var u,c=AM(r);try{for(c.s();!(u=c.n()).done;){var s=u.value;if(s.get("name")===e||s.get("uuid")===e)return{value:[s.get("uuid")]}}}catch(e){c.e(e)}finally{c.f()}var d=fw(6),f=r.get(r.length-1),p={uuid:d,field_uuid:t,name:(null==e?void 0:e.slice(0,lO.MAX_LENGTH))||"",color:this._getNewOptionColor(null==f?void 0:f.toJSON())};return this._model.fieldOptionModel.create(p),{value:[d]}}return{value:[e]}}},{key:"formatted",value:function(e,t){return null==e?"":t?E_(this._model.fieldOptionModel.find({field_uuid:t,uuid:e}),(function(e){return e.get("name")})).join(","):Array.isArray(e)?e.join(","):""}},{key:"getFieldOptionName",value:function(e,t){return null==e?[]:t?E_(this._model.fieldOptionModel.find({field_uuid:t,uuid:e}),(function(e){return e.get("name")})):[]}},{key:"keyValue",value:function(e){return Array.isArray(e)?e.join(","):e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value,e)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this.model.find({field_uuid:e,record_uuid:t}),r=null;if(n.length>0){r=[];var o,i=AM(n);try{for(i.s();!(o=i.n()).done;){var a=o.value;a.get("value")&&r.push(a.get("value"))}}catch(e){i.e(e)}finally{i.f()}}var l=this._safeGetCell(e,t,r);return{uuid:l.get("uuid"),fieldId:l.get("field_uuid"),recordId:l.get("record_uuid"),fieldType:l.get("field_type"),updated_at:l.get("updated_at"),formatValue:l.get("format_value"),keyValue:l.get("key_value"),value:r,by_system:l.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new m_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n,e),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){var r=n.value;if(this.model.remove({field_uuid:e,record_uuid:t}),!r)return void this.upsertModelCell(e,t,n.value);var o=r.map((function(n){var r=ww(n)?null:"string"==typeof n?n:n.value;return{field_uuid:e,record_uuid:t,value:r}}));this.model.bulkCreate(o),this.upsertModelCell(e,t,o.map((function(e){return e.value})))}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r});var o=[];e.forEach((function(e){var r=(e.value||[]).map((function(t){var r=ww(t)?null:"string"==typeof t?t:t.value;return{field_uuid:n,record_uuid:e.recordId,value:r}}));o=o.concat(r),t.upsertModelCell(n,e.recordId,r.map((function(e){return e.value})))})),this.model.bulkCreate(o)}}])}(nR);NM.type=bC.MULTI_SELECT,NM.baseType=wC.SELECT,NM=function(e,t,n,r){for(var o,i=r>1?void 0:r?FM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&TM(t,n,i),i}([Ys()],NM);var VM=Object.defineProperty,LM=Object.getOwnPropertyDescriptor,BM=function(e,t,n,r){for(var o,i=r>1?void 0:r?LM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&VM(t,n,i),i},$M=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._multiSelectField)}}],[{key:"pluginModule",value:function(){return pd().register(NM).register(this)}}])}();function zM(e,t,n){return t=P_(t),D_(e,UM()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function UM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(UM=function(){return!!e})()}$M.pluginName="kernel-field-multi-select",BM([Xs(NM)],$M.prototype,"_multiSelectField",2),$M=BM([Ys({contrib:kA})],$M);var HM=Object.defineProperty,qM=Object.getOwnPropertyDescriptor,WM=function(e){function t(){var e;return Ub(this,t),(e=zM(this,t,arguments)).strict=!0,e}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldNumberModel}},{key:"type",get:function(){return WM.type}},{key:"baseType",get:function(){return WM.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||zw(t)},errorMsg:uw("数字类型只能输入数字")}]}},{key:"validate",value:function(e){return null==e||l_(String(e),{precision:WM.DECIMAL_PRECISION,scale:WM.DECIMAL_SCALE})}},{key:"transform",value:function(e){return l_(e,{precision:WM.DECIMAL_PRECISION,scale:WM.DECIMAL_SCALE})?{value:e}:null}},{key:"formatted",value:function(e){return null==e?"":String(e)}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),value:null==n?void 0:n.get("value"),verify:o.get("verify"),errorMessage:o.get("verify_message"),updated_at:o.get("updated_at"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new m_}},{key:"upsertModelCell",value:function(e,t,n,r){var o=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),o.verify,o.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.strict&&!this.getVerify(n.value).verify||(this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value))}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(nR);WM.type=bC.NUMBER,WM.baseType=wC.NUMBER,WM.DECIMAL_PRECISION=27,WM.DECIMAL_SCALE=9,WM=function(e,t,n,r){for(var o,i=r>1?void 0:r?qM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&HM(t,n,i),i}([Ys()],WM);var GM=Object.defineProperty,KM=Object.getOwnPropertyDescriptor,YM=function(e,t,n,r){for(var o,i=r>1?void 0:r?KM(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&GM(t,n,i),i},XM=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._numberField)}}],[{key:"pluginModule",value:function(){return pd().register(WM).register(this)}}])}();function JM(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ZM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZM(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function ZM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function QM(e,t,n){return t=P_(t),D_(e,eT()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function eT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(eT=function(){return!!e})()}XM.pluginName="kernel-field-number",YM([Xs(WM)],XM.prototype,"_numberField",2),XM=YM([Ys({contrib:kA})],XM);var tT=Object.defineProperty,nT=Object.getOwnPropertyDescriptor,rT=function(e){function t(){return Ub(this,t),QM(this,t,arguments)}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldUriModel}},{key:"type",get:function(){return rT.type}},{key:"baseType",get:function(){return rT.baseType}},{key:"validate",value:function(e){return!(!e||null!=e&&e.some((function(e){return null==(null==e?void 0:e.uid)||null==(null==e?void 0:e.name)||null==(null==e?void 0:e.login)})))}},{key:"transform",value:function(e){if("string"==typeof e)return null;var t=[];if(Array.isArray(e)){var n,r=JM(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.uid&&o.name&&o.login&&o.icon&&t.push({uid:o.uid,name:o.name,icon:o.icon,login:o.login})}}catch(e){r.e(e)}finally{r.f()}}return 0===t.length?null:{value:t}}},{key:"formatted",value:function(e){return null==e?"":null==e?void 0:e.map((function(e){return e.name})).join(",")}},{key:"keyValue",value:function(e){return e?e.filter((function(e){return!!e.uid&&"null"!==e.uid})).map((function(e){return"".concat(e.uid)})).join(","):null}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this,r=E_(this.model.find({field_uuid:e,record_uuid:t}),(function(e){var t=n._model.userModel.findOne({uid:String(e.get("uid"))});if(t)return{uuid:e.get("uuid"),uid:e.get("uid"),name:t.get("name")||e.get("name"),login:t.get("login"),icon:t.get("icon")||e.get("icon")}})).filter((function(e){return!!e})),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),updated_at:o.get("updated_at"),value:r,by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new m_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){var r=this;if(n){var o=n.value;if(this.model.remove({field_uuid:e,record_uuid:t}),!o||0===o.length)return void this.upsertModelCell(e,t,n.value);var i=o.map((function(n){var o=String(n.uid),i=r._model.userModel.findOne({uid:o}),a=null;return i||(a=r._model.userModel.create({uid:o,name:n.name,icon:n.icon,login:n.login})),{uuid:n.uuid||(null==a?void 0:a.uuid),field_uuid:e,record_uuid:t,uid:o,name:n.name,icon:n.icon||(null==i?void 0:i.get("icon")),login:n.login||(null==i?void 0:i.get("login"))}}));i=Cu(i,(function(e){return"".concat(null==e?void 0:e.uid,"-").concat(null==e?void 0:e.field_uuid,"-").concat(e.record_uuid)})),this.model.bulkCreate(i),this.upsertModelCell(e,t,i)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r});var o=[];e.forEach((function(e){var r=e.value?e.value.map((function(r){var o=String(r.uid),i=null;return t._model.userModel.findOne({uid:o})||(i=t._model.userModel.create({uid:o,name:r.name,icon:r.icon,login:r.login})),{uuid:r.uuid||(null==i?void 0:i.uuid),field_uuid:n,record_uuid:e.recordId,uid:o,name:r.name,icon:r.icon,login:r.login}})):[];o=o.concat(r),t.upsertModelCell(n,e.recordId,r)})),o=Cu(o,(function(e){return"".concat(null==e?void 0:e.uid,"-").concat(null==e?void 0:e.field_uuid,"-").concat(e.record_uuid)})),this.model.bulkCreate(o)}}])}(nR);rT.type=bC.MENTION,rT.baseType=wC.URI,rT.MAX_LENGTH=128,rT=function(e,t,n,r){for(var o,i=r>1?void 0:r?nT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&tT(t,n,i),i}([Ys()],rT);var oT=Object.defineProperty,iT=Object.getOwnPropertyDescriptor,aT=function(e,t,n,r){for(var o,i=r>1?void 0:r?iT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&oT(t,n,i),i},lT=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._mentionField)}}],[{key:"pluginModule",value:function(){return pd().register(rT).register(this)}}])}();function uT(e,t,n){return t=P_(t),D_(e,cT()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function cT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(cT=function(){return!!e})()}lT.pluginName="kernel-field-mention",aT([Xs(rT)],lT.prototype,"_mentionField",2),lT=aT([Ys({contrib:kA})],lT);var sT=Object.defineProperty,dT=Object.getOwnPropertyDescriptor,fT=function(e){function t(){return Ub(this,t),uT(this,t,arguments)}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldDateModel}},{key:"type",get:function(){return fT.type}},{key:"baseType",get:function(){return fT.baseType}},{key:"validate",value:function(e){return!!e&&!!a_(e)}},{key:"transform",value:function(e){try{return{value:i()(e).toString()}}catch{return null}}},{key:"formatted",value:function(e,t,n){return null==e||""===e?"":zw(e)?13===String(e).length?i()(Number(e)).format((null==n?void 0:n.date_format)||fT.format):i.a.unix(Number(e)).format((null==n?void 0:n.date_format)||fT.format):i()(e).format((null==n?void 0:n.date_format)||fT.format)}},{key:"keyValue",value:function(e){if(e){var t=this.formatted(e);return i()(t).toDate().getTime()}}},{key:"getCellFormattedValue",value:function(e,t,n){var r=this.getCell(e,t);return this.formatted(r.value,void 0,n)}},{key:"getCellKeyValue",value:function(e,t,n){var r=this.getCell(e,t,n);return this.keyValue(r.value)}},{key:"getCell",value:function(e,t,n){var r=this.model.findOne({field_uuid:e,record_uuid:t}),o=null==r?void 0:r.get("value"),i=this._safeGetCell(e,t,o,n);return{uuid:i.get("uuid"),fieldId:i.get("field_uuid"),recordId:i.get("record_uuid"),fieldType:i.get("field_type"),value:null==r?void 0:r.get("value"),formatValue:i.get("format_value"),keyValue:i.get("key_value"),updated_at:i.get("updated_at"),by_system:i.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n,r){var o=this.getModelCell(e,t);return o||(this.upsertModelCell(e,t,n,!0,r),o=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),o||new m_}},{key:"upsertModelCell",value:function(e,t,n,r,o){this.updateModelCell(e,t,this.formatted(n,void 0,o),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n,r){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value,void 0,r);if(this.validate(n.value)&&n){var o=bw(n.value)?n.value.getTime():n.value;this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:o}),this.upsertModelCell(e,t,o,void 0,r)}}}},{key:"bulkSetCell",value:function(e,t){var n=this,r=e[0].fieldId,o=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:r,record_uuid:o}),this.model.bulkCreate(e.map((function(e){if(!n.validate(e.value||""))return null;var o=bw(e.value)?e.value.getTime():e.value;return n.upsertModelCell(r,e.recordId,o,void 0,t),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:o}})).filter((function(e){return!!e})))}}])}(nR);fT.type=bC.DATE,fT.baseType=wC.DATE,fT.format="YYYY-MM-DD",fT=function(e,t,n,r){for(var o,i=r>1?void 0:r?dT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&sT(t,n,i),i}([Ys()],fT);var pT=Object.defineProperty,hT=Object.getOwnPropertyDescriptor,vT=function(e,t,n,r){for(var o,i=r>1?void 0:r?hT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&pT(t,n,i),i},gT=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._dateField)}}],[{key:"pluginModule",value:function(){return pd().register(fT).register(this)}}])}();function mT(e,t,n){return t=P_(t),D_(e,yT()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function yT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(yT=function(){return!!e})()}gT.pluginName="kernel-field-date",vT([Xs(fT)],gT.prototype,"_dateField",2),gT=vT([Ys({contrib:kA})],gT);var bT=Object.defineProperty,wT=Object.getOwnPropertyDescriptor,_T=function(e){function t(){return Ub(this,t),mT(this,t,arguments)}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldBooleanModel}},{key:"type",get:function(){return _T.type}},{key:"baseType",get:function(){return _T.baseType}},{key:"validate",value:function(e){return ru(e)}},{key:"transform",value:function(e){return!e||"1"!==e&&"是"!==e&&"true"!==e&&"yes"!==e.toLowerCase()&&"✅"!==e?null:{value:!0}}},{key:"formatted",value:function(e){return null==e?"false":e?"true":"false"}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=(null==n?void 0:n.get("value"))||!1,o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),value:(null==n?void 0:n.get("value"))||!1,updated_at:o.get("updated_at"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new m_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){n&&(this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value))}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(nR);_T.type=bC.CHECKBOX,_T.baseType=wC.BOOLEAN,_T=function(e,t,n,r){for(var o,i=r>1?void 0:r?wT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&bT(t,n,i),i}([Ys()],_T);var kT=Object.defineProperty,CT=Object.getOwnPropertyDescriptor,ET=function(e,t,n,r){for(var o,i=r>1?void 0:r?CT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&kT(t,n,i),i},OT=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._checkboxField)}}],[{key:"pluginModule",value:function(){return pd().register(_T).register(this)}}])}();function ST(e,t,n){return t=P_(t),D_(e,xT()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function xT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(xT=function(){return!!e})()}OT.pluginName="kernel-field-checkbox",ET([Xs(_T)],OT.prototype,"_checkboxField",2),OT=ET([Ys({contrib:kA})],OT);var jT=Object.defineProperty,IT=Object.getOwnPropertyDescriptor,RT=function(e){function t(){var e;return Ub(this,t),(e=ST(this,t,arguments)).editDisable=!0,e}return F_(t,e),Wb(t,[{key:"model",get:function(){return null}},{key:"type",get:function(){return RT.type}},{key:"baseType",get:function(){return RT.baseType}},{key:"validate",value:function(){return!0}},{key:"transform",value:function(){return null}},{key:"formatted",value:function(e){return null==e?"":e.name||""}},{key:"keyValue",value:function(e){return null==e?void 0:e.uid}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this._model.recordModel.findOne({uuid:t}),r=this._model.userModel.findOne({uid:String(null==n?void 0:n.get("creator_id"))}),o=r?{name:r.get("name"),icon:r.get("icon"),uuid:r.get("uuid"),uid:r.get("uid"),login:r.get("login")}:null;return{uuid:null==n?void 0:n.get("uuid"),fieldId:e,recordId:t,fieldType:this.type,updated_at:null==n?void 0:n.get("updated_at"),value:o,formatValue:o?this.formatted(o):""}}}])}(nR);RT.type=bC.USER_ID,RT.baseType=wC.SYSTEM,RT=function(e,t,n,r){for(var o,i=r>1?void 0:r?IT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jT(t,n,i),i}([Ys()],RT);var AT=Object.defineProperty,DT=Object.getOwnPropertyDescriptor,PT=function(e,t,n,r){for(var o,i=r>1?void 0:r?DT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&AT(t,n,i),i},MT=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._userIdField)}}],[{key:"pluginModule",value:function(){return pd().register(RT).register(this)}}])}();function TT(e,t,n){return t=P_(t),D_(e,FT()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function FT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(FT=function(){return!!e})()}MT.pluginName="kernel-field-user-id",PT([Xs(RT)],MT.prototype,"_userIdField",2),MT=PT([Ys({contrib:kA})],MT);var NT=Object.defineProperty,VT=Object.getOwnPropertyDescriptor,LT=function(e){function t(){var e;return Ub(this,t),(e=TT(this,t,arguments)).editDisable=!0,e}return F_(t,e),Wb(t,[{key:"model",get:function(){return null}},{key:"type",get:function(){return LT.type}},{key:"baseType",get:function(){return LT.baseType}},{key:"validate",value:function(){return!0}},{key:"transform",value:function(){return null}},{key:"formatted",value:function(e){return null==e?"":(zw(e)&&(e=new Date(Number(e))),i()(e).format(LT.format))}},{key:"keyValue",value:function(e){if(e){var t=this.formatted(e);return i()(t).toDate().getTime()}}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this._model.recordModel.findOne({uuid:t}),r=null==n?void 0:n.get("created_at");return{uuid:null==n?void 0:n.get("uuid"),fieldId:e,recordId:t,fieldType:this.type,value:r,formatValue:this.formatted(r),keyValue:this.keyValue(r),updated_at:null==n?void 0:n.get("updated_at")}}}])}(nR);LT.type=bC.CREATED_AT,LT.baseType=wC.SYSTEM,LT.format="YYYY-MM-DD HH:mm:ss",LT=function(e,t,n,r){for(var o,i=r>1?void 0:r?VT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&NT(t,n,i),i}([Ys()],LT);var BT=Object.defineProperty,$T=Object.getOwnPropertyDescriptor,zT=function(e,t,n,r){for(var o,i=r>1?void 0:r?$T(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&BT(t,n,i),i},UT=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._createdAtField)}}],[{key:"pluginModule",value:function(){return pd().register(LT).register(this)}}])}();function HT(e,t,n){return t=P_(t),D_(e,qT()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function qT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(qT=function(){return!!e})()}UT.pluginName="kernel-field-created-at",zT([Xs(LT)],UT.prototype,"_createdAtField",2),UT=zT([Ys({contrib:kA})],UT);var WT=Object.defineProperty,GT=Object.getOwnPropertyDescriptor,KT=function(e){function t(){var e;return Ub(this,t),(e=HT(this,t,arguments)).editDisable=!0,e}return F_(t,e),Wb(t,[{key:"model",get:function(){return null}},{key:"type",get:function(){return KT.type}},{key:"baseType",get:function(){return KT.baseType}},{key:"validate",value:function(){return!0}},{key:"transform",value:function(){return null}},{key:"formatted",value:function(e){return null==e?"":e.name||""}},{key:"keyValue",value:function(e){return null==e?void 0:e.uid}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this._model.recordModel.findOne({uuid:t}),r=this._model.userModel.findOne({uid:String(null==n?void 0:n.get("modifier_id"))}),o=r?{name:r.get("name"),icon:r.get("icon"),uuid:r.get("uuid"),login:r.get("login"),uid:r.get("uid")}:null;return{uuid:n.get("uuid"),fieldId:e,recordId:t,fieldType:this.type,value:o,formatValue:o?this.formatted(o):"",updated_at:n.get("updated_at")}}}])}(nR);KT.type=bC.MODIFIER_ID,KT.baseType=wC.SYSTEM,KT=function(e,t,n,r){for(var o,i=r>1?void 0:r?GT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&WT(t,n,i),i}([Ys()],KT);var YT=Object.defineProperty,XT=Object.getOwnPropertyDescriptor,JT=function(e,t,n,r){for(var o,i=r>1?void 0:r?XT(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&YT(t,n,i),i},ZT=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._modifierIdField)}}],[{key:"pluginModule",value:function(){return pd().register(KT).register(this)}}])}();function QT(e,t,n){return t=P_(t),D_(e,eF()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function eF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(eF=function(){return!!e})()}ZT.pluginName="kernel-field-modifier-id",JT([Xs(KT)],ZT.prototype,"_modifierIdField",2),ZT=JT([Ys({contrib:kA})],ZT);var tF=Object.defineProperty,nF=Object.getOwnPropertyDescriptor,rF=function(e){function t(){var e;return Ub(this,t),(e=QT(this,t,arguments)).editDisable=!0,e}return F_(t,e),Wb(t,[{key:"model",get:function(){return null}},{key:"type",get:function(){return rF.type}},{key:"baseType",get:function(){return rF.baseType}},{key:"validate",value:function(){return!0}},{key:"transform",value:function(){return null}},{key:"formatted",value:function(e){return null==e?"":(zw(e)&&(e=new Date(Number(e))),i()(e).format(rF.format))}},{key:"keyValue",value:function(e){if(e){var t=this.formatted(e);return i()(t).toDate().getTime()}}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this._model.recordModel.findOne({uuid:t}),r=n.get("updated_at");return{uuid:null==n?void 0:n.get("uuid"),fieldId:e,recordId:t,fieldType:this.type,updated_at:r,value:r,formatValue:this.formatted(r),keyValue:this.keyValue(r)}}}])}(nR);rF.type=bC.UPDATED_AT,rF.baseType=wC.SYSTEM,rF.format="YYYY-MM-DD HH:mm:ss",rF=function(e,t,n,r){for(var o,i=r>1?void 0:r?nF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&tF(t,n,i),i}([Ys()],rF);var oF=Object.defineProperty,iF=Object.getOwnPropertyDescriptor,aF=function(e,t,n,r){for(var o,i=r>1?void 0:r?iF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&oF(t,n,i),i},lF=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._updatedAtField)}}],[{key:"pluginModule",value:function(){return pd().register(rF).register(this)}}])}();function uF(e,t,n){return t=P_(t),D_(e,cF()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function cF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(cF=function(){return!!e})()}lF.pluginName="kernel-field-updated-at",aF([Xs(rF)],lF.prototype,"_updatedAtField",2),lF=aF([Ys({contrib:kA})],lF);var sF=Object.defineProperty,dF=Object.getOwnPropertyDescriptor,fF=function(e){function t(){return Ub(this,t),uF(this,t,arguments)}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldStringModel}},{key:"type",get:function(){return fF.type}},{key:"baseType",get:function(){return fF.baseType}},{key:"validate",value:function(e){return null==e||(!((null==e?void 0:e.length)>fF.MAX_LENGTH)||(e=e.substring(0,fF.MAX_LENGTH),!1))}},{key:"transform",value:function(e){return{value:e}}},{key:"formatted",value:function(e){return null==e||"string"!=typeof e?"":e.replace(/[\n\t\r]/gi,"").trim()}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),updated_at:o.get("updated_at"),value:null==n?void 0:n.get("value"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new m_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(nR);fF.type=bC.TEXT,fF.baseType=wC.STRING,fF.MAX_LENGTH=5e3,fF=function(e,t,n,r){for(var o,i=r>1?void 0:r?dF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&sF(t,n,i),i}([Ys()],fF);var pF=Object.defineProperty,hF=Object.getOwnPropertyDescriptor,vF=function(e,t,n,r){for(var o,i=r>1?void 0:r?hF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&pF(t,n,i),i},gF=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._textField)}}],[{key:"pluginModule",value:function(){return pd().register(fF).register(this)}}])}();function mF(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return yF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yF(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function yF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bF(e,t,n){return t=P_(t),D_(e,wF()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function wF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(wF=function(){return!!e})()}gF.pluginName="kernel-field-text",vF([Xs(fF)],gF.prototype,"_textField",2),gF=vF([Ys({contrib:kA})],gF);var _F=Object.defineProperty,kF=Object.getOwnPropertyDescriptor,CF=function(e){function t(){return Ub(this,t),bF(this,t,arguments)}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldUriModel}},{key:"type",get:function(){return CF.type}},{key:"baseType",get:function(){return CF.baseType}},{key:"validate",value:function(e){if(null==e)return!0;if(!Array.isArray(e))return!1;var t,n=mF(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(null==r.name||null==r.src||null==r.size||null==r.width||null==r.height)return!1;var o=r.name;if(o.length>CF.MAX_LENGTH&&(r.name=o.substring(0,CF.MAX_LENGTH)),!i_(r.src))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"transform",value:function(e){var t=this;if(!e||"string"==typeof e)return null;var n=[];if(Array.isArray(e)){if(n=e.map((function(e){return t._transformItem(e)})),!Array.isArray(n))return null}else if(yw(e)){if(!(n=this._transformItem(e)))return null;n=[n]}return 0===(n=n.filter(Boolean)).length?null:{value:n}}},{key:"_transformItem",value:function(e){return e&&"string"!=typeof e&&null!=e.name&&null!=e.src&&null!=e.size&&null!=e.width&&null!=e.height?{uid:e.uid,name:e.name,src:e.src,mime:e.mime,size:e.size,width:e.width,height:e.height}:null}},{key:"formatted",value:function(e){return null==e?"":null==e?void 0:e.map((function(e){return e.name})).join(",")}},{key:"keyValue",value:function(e){return null==e?null:e.map((function(e){return"".concat(e.name,"|").concat(e.src)})).join(",")}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=E_(this.model.find({field_uuid:e,record_uuid:t}),(function(e){return{name:e.get("name"),uid:e.get("uid"),src:e.get("src"),mime:e.get("mime"),size:e.get("size"),icon:e.get("icon"),width:e.get("width"),height:e.get("height")}})),r=this._safeGetCell(e,t,n);return{uuid:r.get("uuid"),fieldId:r.get("field_uuid"),recordId:r.get("record_uuid"),fieldType:r.get("field_type"),formatValue:r.get("format_value"),keyValue:r.get("key_value"),updated_at:r.get("updated_at"),value:n,by_system:r.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new m_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){var r=n.value;if(this.model.remove({field_uuid:e,record_uuid:t}),!r)return void this.upsertModelCell(e,t,n.value);var o=r.map((function(n){return{uuid:n.uuid,field_uuid:e,record_uuid:t,uid:n.uid,name:n.name,src:n.src,size:n.size,mime:n.mime,width:n.width,height:n.height}}));this.model.bulkCreate(o),this.upsertModelCell(e,t,o)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r});var o=[];e.forEach((function(e){var r=e.value?e.value.map((function(t){return{uuid:t.uuid,field_uuid:n,record_uuid:e.recordId,uid:t.uid,name:t.name,src:t.src,size:t.size,mime:t.mime,width:t.width,height:t.height}})):[];o=o.concat(r),t.upsertModelCell(n,e.recordId,r)})),this.model.bulkCreate(o)}}])}(nR);CF.type=bC.IMAGE,CF.baseType=wC.URI,CF.MAX_LENGTH=128,CF=function(e,t,n,r){for(var o,i=r>1?void 0:r?kF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_F(t,n,i),i}([Ys()],CF);var EF=Object.defineProperty,OF=Object.getOwnPropertyDescriptor,SF=function(e,t,n,r){for(var o,i=r>1?void 0:r?OF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&EF(t,n,i),i},xF=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._imageField)}}],[{key:"pluginModule",value:function(){return pd().register(CF).register(this)}}])}();function jF(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return IF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IF(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function IF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function RF(e,t,n){return t=P_(t),D_(e,AF()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function AF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(AF=function(){return!!e})()}xF.pluginName="kernel-field-image",SF([Xs(CF)],xF.prototype,"_imageField",2),xF=SF([Ys({contrib:kA})],xF);var DF=Object.defineProperty,PF=Object.getOwnPropertyDescriptor,MF=function(e){function t(){return Ub(this,t),RF(this,t,arguments)}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldUriModel}},{key:"type",get:function(){return MF.type}},{key:"baseType",get:function(){return MF.baseType}},{key:"validate",value:function(e){if(null==e)return!0;if(!Array.isArray(e))return!1;var t,n=jF(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(null==r.name||null==r.src||null==r.size)return!1;var o=r.name;if(o.length>MF.MAX_LENGTH&&(r.name=o.substring(0,MF.MAX_LENGTH)),!i_(r.src))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"transform",value:function(e){var t=this;if(!e||"string"==typeof e)return null;var n=[];if(Array.isArray(e)){if(n=e.map((function(e){return t._transformItem(e)})),!Array.isArray(n)||0===n.length)return null}else if(yw(e)){if(!(n=this._transformItem(e)))return null;n=[n]}return 0===(n=n.filter(Boolean)).length?null:{value:n}}},{key:"_transformItem",value:function(e){return"string"==typeof e||null==e.name||null==e.src||null==e.size?null:{uid:e.uid,name:e.name,src:e.src,mime:e.mime,size:e.size,width:e.width,height:e.height}}},{key:"formatted",value:function(e){return null==e?"":null==e?void 0:e.map((function(e){return e.name})).join(",")}},{key:"keyValue",value:function(e){return e?e.map((function(e){return"".concat(e.name,"|").concat(e.src)})).join(","):null}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=E_(this.model.find({field_uuid:e,record_uuid:t}),(function(e){return{name:e.get("name"),uid:e.get("uid"),src:e.get("src"),mime:e.get("mime"),size:e.get("size"),icon:e.get("icon")}})),r=this._safeGetCell(e,t,n);return{uuid:r.get("uuid"),fieldId:r.get("field_uuid"),recordId:r.get("record_uuid"),fieldType:r.get("field_type"),formatValue:r.get("format_value"),keyValue:r.get("key_value"),updated_at:r.get("updated_at"),value:n,by_system:r.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new m_}},{key:"upsertModelCell",value:function(e,t,n,r){this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),null,null,r)}},{key:"setCell",value:function(e,t,n){if(n){var r=n.value;if(this.model.remove({field_uuid:e,record_uuid:t}),!r)return void this.upsertModelCell(e,t,n.value);var o=r.map((function(n){return{uuid:n.uuid,field_uuid:e,record_uuid:t,uid:n.uid,name:n.name,src:n.src,size:n.size,mime:n.mime,width:n.width,height:n.height}}));this.model.bulkCreate(o),this.upsertModelCell(e,t,o)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r});var o=[];e.forEach((function(e){var r=e.value?e.value.map((function(t){return{uuid:t.uuid,field_uuid:n,record_uuid:e.recordId,uid:t.uid,name:t.name,src:t.src,size:t.size,mime:t.mime,width:t.width,height:t.height}})):[];o=o.concat(r),t.upsertModelCell(n,e.recordId,r)})),this.model.bulkCreate(o)}}])}(nR);MF.type=bC.FILE,MF.baseType=wC.URI,MF.MAX_LENGTH=128,MF=function(e,t,n,r){for(var o,i=r>1?void 0:r?PF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&DF(t,n,i),i}([Ys()],MF);var TF=Object.defineProperty,FF=Object.getOwnPropertyDescriptor,NF=function(e,t,n,r){for(var o,i=r>1?void 0:r?FF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&TF(t,n,i),i},VF=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._fileField)}}],[{key:"pluginModule",value:function(){return pd().register(MF).register(this)}}])}();VF.pluginName="kernel-field-file",NF([Xs(MF)],VF.prototype,"_fileField",2),VF=NF([Ys({contrib:kA})],VF);var LF=Object.defineProperty,BF=Object.getOwnPropertyDescriptor,$F=function(e,t,n,r){for(var o,i=r>1?void 0:r?BF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&LF(t,n,i),i},zF=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._linkField)}}],[{key:"pluginModule",value:function(){return pd().contribution(NR).register(JR).register($R).register(qR).register(this)}}])}();function UF(e,t,n){return t=P_(t),D_(e,HF()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function HF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(HF=function(){return!!e})()}zF.pluginName="kernel-field-link",$F([Xs(JR)],zF.prototype,"_linkField",2),zF=$F([Ys({contrib:kA})],zF);var qF=Object.defineProperty,WF=Object.getOwnPropertyDescriptor,GF=function(e){function t(){return Ub(this,t),UF(this,t,arguments)}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldStringModel}},{key:"type",get:function(){return GF.type}},{key:"baseType",get:function(){return GF.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||_w(t)},errorMsg:uw("请输入有效邮箱")}]}},{key:"validate",value:function(e){if(null!=e)return!((null==e?void 0:e.length)>GF.MAX_LENGTH||"string"==typeof e&&!e_(e))}},{key:"transform",value:function(e){return{value:e}}},{key:"formatted",value:function(e){return null!=e?e:""}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),updated_at:o.get("updated_at"),value:null==n?void 0:n.get("value"),verify:o.get("verify"),errorMessage:o.get("verify_message"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new m_}},{key:"upsertModelCell",value:function(e,t,n,r){var o=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),o.verify,o.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(nR);GF.type=bC.EMAIL,GF.baseType=wC.STRING,GF.MAX_LENGTH=128,GF=function(e,t,n,r){for(var o,i=r>1?void 0:r?WF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&qF(t,n,i),i}([Ys()],GF);var KF=Object.defineProperty,YF=Object.getOwnPropertyDescriptor,XF=function(e,t,n,r){for(var o,i=r>1?void 0:r?YF(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&KF(t,n,i),i},JF=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._emailField)}}],[{key:"pluginModule",value:function(){return pd().register(GF).register(this)}}])}();function ZF(e,t,n){return t=P_(t),D_(e,QF()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function QF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(QF=function(){return!!e})()}JF.pluginName="kernel-field-email",XF([Xs(GF)],JF.prototype,"_emailField",2),JF=XF([Ys({contrib:kA})],JF);var eN=Object.defineProperty,tN=Object.getOwnPropertyDescriptor,nN=function(e){function t(){return Ub(this,t),ZF(this,t,arguments)}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldStringModel}},{key:"type",get:function(){return nN.type}},{key:"baseType",get:function(){return nN.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||function(e){return/^([0-9]|\+|\-)+$/gi.test(e)}(t)},errorMsg:uw("请输入有效手机号")}]}},{key:"validate",value:function(e){return null==e||!(e.length>nN.MAX_LENGTH)}},{key:"transform",value:function(e){return{value:e}}},{key:"formatted",value:function(e){return null!=e?e:""}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(null==n?void 0:n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),value:r,verify:o.get("verify"),errorMessage:o.get("verify_message"),updated_at:o.get("updated_at"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new m_}},{key:"upsertModelCell",value:function(e,t,n,r){var o=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),o.verify,o.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:n.value}),this.upsertModelCell(e,t,n.value)}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:e.value}})))}}])}(nR);nN.type=bC.PHONE,nN.baseType=wC.STRING,nN.MAX_LENGTH=128,nN=function(e,t,n,r){for(var o,i=r>1?void 0:r?tN(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&eN(t,n,i),i}([Ys()],nN);var rN=Object.defineProperty,oN=Object.getOwnPropertyDescriptor,iN=function(e,t,n,r){for(var o,i=r>1?void 0:r?oN(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&rN(t,n,i),i},aN=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._phoneField)}}],[{key:"pluginModule",value:function(){return pd().register(nN).register(this)}}])}();function lN(e,t,n){return t=P_(t),D_(e,uN()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function uN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(uN=function(){return!!e})()}aN.pluginName="kernel-field-phone",iN([Xs(nN)],aN.prototype,"_phoneField",2),aN=iN([Ys({contrib:kA})],aN);var cN=function(e){function t(){return Ub(this,t),lN(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.createFilter(e.viewId,e.filter),!0}}])}(ZR);function sN(e,t,n){return t=P_(t),D_(e,dN()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function dN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(dN=function(){return!!e})()}cN.commandName="createFilter";var fN=function(e){function t(){return Ub(this,t),sN(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){return e.viewId||(e.viewId=this.readService.getActiveView().get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.removeFilter(e.filterId),!0}}])}(ZR);function pN(e,t,n){return t=P_(t),D_(e,hN()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function hN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(hN=function(){return!!e})()}fN.commandName="removeFilter";var vN=function(e){function t(){return Ub(this,t),pN(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateFilter(e.viewId,e.filter),!0}}])}(ZR);vN.commandName="updateFilter";var gN=Object.defineProperty,mN=Object.getOwnPropertyDescriptor,yN=function(e,t,n,r){for(var o,i=r>1?void 0:r?mN(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&gN(t,n,i),i},bN=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(cN.commandName,cN),this.commandService.registerCommand(fN.commandName,fN),this.commandService.registerCommand(vN.commandName,vN)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function wN(e,t,n){return t=P_(t),D_(e,_N()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function _N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(_N=function(){return!!e})()}bN.pluginName="kernel-filter",yN([Xs(uA)],bN.prototype,"commandService",2),bN=yN([Ys({contrib:kA})],bN);var kN=function(e){function t(){return Ub(this,t),wN(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t=e.optionId,n=this.readService.getFieldOption(t);return e.fieldId=n.get("field_uuid"),e}},{key:"execute",value:function(e){return this.writeService.removeFieldOption(e.optionId),!0}}])}(ZR);function CN(e,t,n){return t=P_(t),D_(e,EN()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function EN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(EN=function(){return!!e})()}kN.commandName="removeFieldOption";var ON=function(e){function t(){return Ub(this,t),CN(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t,n=this.readService.getFieldOptions(e.fieldId)||[],r=null==(t=n.get(n.length-1))?void 0:t.get("uuid");return this.writeService.createFieldOption(e.fieldId,e.fieldOption,r),!0}}])}(ZR);function SN(e,t,n){return t=P_(t),D_(e,xN()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function xN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(xN=function(){return!!e})()}ON.commandName="createFieldOption";var jN=function(e){function t(){return Ub(this,t),SN(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t=e.optionId,n=this.readService.getFieldOption(t);return e.fieldId=n.get("field_uuid"),e}},{key:"execute",value:function(e){return this.writeService.updateFieldOption(e.optionId,e.fieldOption),!0}}])}(ZR);jN.commandName="updateFieldOption";var IN=Object.defineProperty,RN=Object.getOwnPropertyDescriptor,AN=function(e,t,n,r){for(var o,i=r>1?void 0:r?RN(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&IN(t,n,i),i},DN=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(ON.commandName,ON),this.commandService.registerCommand(jN.commandName,jN),this.commandService.registerCommand(kN.commandName,kN)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function PN(e,t,n){return t=P_(t),D_(e,MN()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function MN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(MN=function(){return!!e})()}DN.pluginName="kernel-group",AN([Xs(uA)],DN.prototype,"commandService",2),DN=AN([Ys({contrib:kA})],DN);var TN=function(e){function t(){return Ub(this,t),PN(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.createSort(e.viewId,e.sort,!1),!0}}])}(ZR);function FN(e,t,n){return t=P_(t),D_(e,NN()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function NN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(NN=function(){return!!e})()}TN.commandName="createSort";var VN=function(e){function t(){return Ub(this,t),FN(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeSort(e.viewId),!0}}])}(ZR);function LN(e,t,n){return t=P_(t),D_(e,BN()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function BN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(BN=function(){return!!e})()}VN.commandName="removeSort";var $N=function(e){function t(){return Ub(this,t),LN(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateSort(e.viewId,e.sort,e.auto),!0}}])}(ZR);$N.commandName="updateSort";var zN=Object.defineProperty,UN=Object.getOwnPropertyDescriptor,HN=function(e,t,n,r){for(var o,i=r>1?void 0:r?UN(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zN(t,n,i),i},qN=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(TN.commandName,TN),this.commandService.registerCommand(VN.commandName,VN),this.commandService.registerCommand($N.commandName,$N)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();qN.pluginName="kernel-sort",HN([Xs(uA)],qN.prototype,"commandService",2),qN=HN([Ys({contrib:kA})],qN);var WN=Object.defineProperty,GN=Object.getOwnPropertyDescriptor,KN=function(e,t,n,r){for(var o,i=r>1?void 0:r?GN(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&WN(t,n,i),i},YN=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this._contentService.setProcessor(this._processor)}}],[{key:"pluginModule",value:function(){return pd().contribution(CD).register(xD).register(bD).register(MD).register(this)}}])}();function XN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XN(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ZN(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return QN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QN(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function QN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eV(e,t,n){return t=P_(t),D_(e,tV()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function tV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(tV=function(){return!!e})()}YN.pluginName="kernel-process",KN([Xs(fI)],YN.prototype,"_contentService",2),KN([Xs(MD)],YN.prototype,"_processor",2),YN=KN([Ys({contrib:kA})],YN);var nV=function(e){function t(){var e;return Ub(this,t),(e=eV(this,t,arguments))._bulkSetCellMap=new Map,e._targetRecordIndexCache=new Map,e._targetFieldIndexCache=new Map,e}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t,n,r=e.pasteData,o=e.selection,i=e.colCount,a=r.cells,l=r.tableId,u=o.startRowIndex,c=o.startColIndex,s=o.rowCount,d=o.colCount,f=s*d,p=a.length,h=a[0].length,v=p*h,g=1===v,m=g&&f>1,y=m?s:p,b=m?d:h,w=[],_=[],k=(null==(t=this.readService.getActiveView())?void 0:t.get("uuid"))||"";try{if(g&&!m){var C=a[0][0],E=this.readService.getCellByIndexes(u,c);if(_.push(null==E?void 0:E.recordId),!C||!E)return{code:-1,message:"fromCell, targetCell不存在 never"};if(zC.isSystemType(E.fieldType))return{code:1,message:uw("系统字段不支持粘贴修改")};var O=this._getPasteCellDataToUpdate(C,E.fieldType,E.fieldId,E.recordId,u,l);this._setCell(E.recordId,E.fieldId,O,!1)}else{var S=this.readService.getViewGroup(),x=this._getRecordByIndex(u),j=(null==x?void 0:x.get("group_item_key"))||"",I=0,R="",A=Number.MAX_SAFE_INTEGER;if(S){var D=k_(S.options,(function(e){return e.get("uuid")===j}));-1===D&&(D=S.options.length),A=this.readService.getGroupViewRecords().slice(0,D+1).map((function(e){return e.viewRecords.length})).reduce((function(e,t){return e+t}),0)-1}for(var P=0;P<y;P++){var M=P+u,T=this._getRecordByIndex(M),F=null==T?void 0:T.get("record_uuid");!F||M>A?I+=1:(_.push(F),R=F)}if(I>0){for(var N=0;N<I;N++)w.push(fw(32));this.writeService.createEmptyRecord({uuid:w,viewId:k,groupItemKey:j,sourceRecordId:R}),this._updateRecordIndexCache()}for(var V=0,L=0;L<y;L++){var B=L+u,$=this._getRecordByIndex(B);if($)for(var z=$.get("record_uuid"),U=0;U<b;U++){var H=U+c;if(!(H>=i)){var q=m?a[0][0]:null==(n=null==a?void 0:a[L])?void 0:n[U];if(q){var W=this._getFieldByIndex(H);if(!W)throw new Error("targetField不存在 never");if(zC.isSystemType(W.get("type"))){V++;continue}var G=W.get("uuid");if((null==S?void 0:S.field.get("uuid"))!==G){var K=this._getPasteCellDataToUpdate(q,W.get("type"),G,z,B,l);this._setCell(z,G,K,!0)}}}}}var Y=Vb(this._bulkSetCellMap.keys());if(Y.length>0){var X,J=ZN(Y);try{for(J.s();!(X=J.n()).done;){var Z=X.value,Q=this._bulkSetCellMap.get(Z);Q&&this.writeService.bulkSetCell(Q)}}catch(e){J.e(e)}finally{J.f()}}if(V===v)return{code:1,message:uw("系统字段不支持粘贴修改")}}}catch(e){var ee="";return e instanceof Error?(ee=e.message,console.error(e.stack)):ee="string"==typeof e?e:"Unknown error",{code:-1,message:ee}}finally{this._bulkSetCellMap.clear(),this._targetRecordIndexCache.clear(),this._targetFieldIndexCache.clear()}return{code:0,message:uw("粘贴成功"),data:{createRecordIds:w,updateRecordIds:_}}}},{key:"_setCell",value:function(e,t,n,r){var o=this.readService.getCell(t,e);if(!o)throw new Error("oldCell 不存在 never");var i=this.readService.getTable().get("uuid"),a=JN(JN({},o),{},{value:n.cellValue,formatValue:n.cellFormatValue||""}),l=n.fromTableId&&n.fromTableId!==i;if(n.fromFieldId!==n.toFieldId||l)n.fromFieldType&&this.writeService.safeSetCell(a,n.fromFieldType,n.toFieldType,n.fromFieldId,n.toFieldId);else if(r){var u=this._bulkSetCellMap.get(n.toFieldId)||[];u=u.concat(a),this._bulkSetCellMap.set(n.toFieldId,u)}else this.writeService.setCell(a)}},{key:"_getPasteCellDataToUpdate",value:function(e,t,n,r,o,i){return{cellValue:e.value,cellFormatValue:e.formatValue,toFieldType:t,toFieldId:n,toRecordId:r,toRecordIndex:o,fromFieldType:e.fieldType,fromFieldId:e.fieldId,fromTableId:i}}},{key:"_updateRecordIndexCache",value:function(){var e=this;return E_(this.readService.getFlatViewRecords(),(function(t,n){e._targetRecordIndexCache.set(n,t)})),this._targetRecordIndexCache}},{key:"_getRecordByIndex",value:function(e){return this._targetRecordIndexCache.get(e)||(this._updateRecordIndexCache(),this._targetRecordIndexCache.get(e)||null)}},{key:"_getFieldByIndex",value:function(e){var t=this._targetFieldIndexCache.get(e);if(t)return t;var n=this.readService.getFieldByIndex(e);return n?(this._targetFieldIndexCache.set(e,n),n):null}}])}(ZR);nV.commandName="pasteUpdateRecords";var rV=Object.defineProperty,oV=Object.getOwnPropertyDescriptor,iV=function(e,t,n,r){for(var o,i=r>1?void 0:r?oV(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&rV(t,n,i),i},aV=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this._commandService.registerCommand(nV.commandName,nV)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();aV.pluginName="kernel-clipboard",iV([Xs(uA)],aV.prototype,"_commandService",2),aV=iV([Ys({contrib:kA})],aV);var lV=Ts.defineToken("SelectionKernelPluginContribution"),uV=function(e){return e.NONE="none",e.CARET="caret",e.RANGE="range",e}(uV||{}),cV=function(){function e(t,n,r,o){Ub(this,e),this._row=t,this._column=n,this._rowCount=r,this._columnCount=o}return Wb(e,[{key:"row",get:function(){return this._row}},{key:"column",get:function(){return this._column}},{key:"rowCount",get:function(){return this._rowCount}},{key:"columnCount",get:function(){return this._columnCount}},{key:"isAtRowStart",get:function(){return 0===this._row}},{key:"isAtRowEnd",get:function(){return this._row===this._rowCount-1}},{key:"isAtColumnStart",get:function(){return 0===this._column}},{key:"isAtColumnEnd",get:function(){return this._column===this._columnCount-1}},{key:"isAtStart",get:function(){return this.isAtRowStart&&this.isAtColumnStart}},{key:"isAtEnd",get:function(){return this.isAtRowEnd&&this.isAtColumnEnd}},{key:"clone",value:function(){return new e(this._row,this._column,this._rowCount,this._columnCount)}}],[{key:"equal",value:function(e,t){return e===t||e._row===t._row&&e._column===t._column}}])}();function sV(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dV(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dV(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function dV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fV(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hV(e,t,n){return t=P_(t),D_(e,vV()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function vV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(vV=function(){return!!e})()}var gV=function(e){function t(){return Ub(this,t),hV(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"_getCellsByRange",value:function(e,t,n,r){for(var o=e.start,i=e.end,a=i.row-o.row+1,l=i.column-o.column+1,u=new Array(a).fill(null).map((function(){return new Array(l).fill(null)})),c=[],s=0;s<l;s++){var d=t.get(s+o.column).get("field"),f=(null==d?void 0:d.get("uuid"))||"";if((null==r?void 0:r.field.get("uuid"))===f||zC.isSystemType(null==d?void 0:d.get("type")))break;d&&c.push(pV({},d.toJSON()));for(var p=0;p<a;p++){var h=n.get(p+o.row).get("record_uuid"),v=this.readService.getCell(f,h);v&&(u[p][s]=v)}}return{fields:c,cells:u}}},{key:"getCellsBySelection",value:function(e,t,n,r){if(!e)return null;var o,i=[],a=sV(e.ranges);try{for(a.s();!(o=a.n()).done;){var l=o.value,u=this._getCellsByRange(l,t,n,r);i=[].concat(Vb(i),Vb(u.cells))}}catch(e){a.e(e)}finally{a.f()}return i}},{key:"execute",value:function(e){var t=this,n=e.preSelection,r=e.newSelection,o=this.readService.getActiveView(),i=this.readService.getViewGroup(),a=this.readService.getViewFields(null==o?void 0:o.get("uuid"))||[],l=this.readService.getFlatViewRecords(null==o?void 0:o.get("uuid"))||[],u=this.getCellsBySelection(n,a,l,i)||[],c=[],s=n.getRangeAt(0).start,d=n.getRangeAt(n.rangeCount-1).end,f=r.getRangeAt(0).start,p=r.getRangeAt(r.rangeCount-1).end;if(p.row>d.row)for(var h=p.row-d.row,v=0;v<h;v++)for(var g=l.get(v+d.row+1).get("record_uuid"),m=u[0].length,y=0;y<m;y++){var b=u[0][y];if(!b)break;var w=this.readService.getCell(b.fieldId,g),_=u[v%u.length][y];w&&_&&c.push(pV(pV({},w),{},{value:_.value,formatValue:_.formatValue||""}))}else if(f.row<s.row)for(var k=s.row-f.row,C=0;C<k;C++)for(var E=l.get(s.row-C-1).get("record_uuid"),O=u[0].length,S=0;S<O;S++){var x=u[0][S];if(!x)break;var j=this.readService.getCell(x.fieldId,E),I=u[(C+u.length-1)%u.length][S];j&&I&&c.push(pV(pV({},j),{},{value:I.value,formatValue:I.formatValue||""}))}return Object.values(Xl(c,(function(e){return e.fieldId}))).forEach((function(e){t.writeService.bulkSetCell(e)})),!0}}])}(ZR);gV.commandName="autofillCells";var mV=Object.defineProperty,yV=Object.getOwnPropertyDescriptor,bV=function(e,t,n,r){for(var o,i=r>1?void 0:r?yV(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&mV(t,n,i),i},wV=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(gV.commandName,gV)}}],[{key:"pluginModule",value:function(){return pd().contribution(lV).register(this).register(cV)}}])}();wV.pluginName="kernel-selection",bV([Xs(uA)],wV.prototype,"commandService",2),wV=bV([Ys({contrib:kA})],wV);var _V=Object.defineProperty,kV=Object.getOwnPropertyDescriptor,CV=function(e,t,n,r){for(var o,i=r>1?void 0:r?kV(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_V(t,n,i),i},EV=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function OV(e,t,n){return t=P_(t),D_(e,SV()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function SV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(SV=function(){return!!e})()}EV.pluginName="kernel-expand-record",CV([Xs(uA)],EV.prototype,"commandService",2),EV=CV([Ys({contrib:kA})],EV);var xV=function(e){function t(){return Ub(this,t),OV(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.upsertStat(e.viewId,e.fieldId,e.type),!0}}])}(ZR);function jV(e,t,n){return t=P_(t),D_(e,IV()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function IV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(IV=function(){return!!e})()}xV.commandName="updateStat";var RV=function(e){function t(){return Ub(this,t),jV(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeStat(e.viewId,e.fieldId),!0}}])}(ZR);RV.commandName="removeStat";var AV=Object.defineProperty,DV=Object.getOwnPropertyDescriptor,PV=function(e,t,n,r){for(var o,i=r>1?void 0:r?DV(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&AV(t,n,i),i},MV=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(xV.commandName,xV),this.commandService.registerCommand(RV.commandName,RV)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function TV(e,t,n){return t=P_(t),D_(e,FV()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function FV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(FV=function(){return!!e})()}MV.pluginName="kernel-statistics",PV([Xs(uA)],MV.prototype,"commandService",2),MV=PV([Ys({contrib:kA})],MV);var NV=function(e){function t(){return Ub(this,t),TV(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t,n=null==(t=this.readService.getActiveView())?void 0:t.get("uuid"),r=this.readService.getViewFilters(n).toJSON();if(e||(e={direction:"after"}),e.uuid||(e.uuid=fw(32)),e.recordCount>1){e.uuid=[];for(var o=0;o<e.recordCount;o++)e.uuid.push(fw(32))}if(e.viewId||(e.viewId=n),1===r.length){var i=r[0],a=i.func;(a===jC.equalTo||a===jC.is||a===jC.isExactly||a===jC.hasAnyOf||a===jC.hasAllOf)&&(e.filter=i)}return e}},{key:"execute",value:function(e){return this.writeService.createEmptyRecord(e)}},{key:"afterExecute",value:function(e,t,n){var r,o=this,i=e.viewId,a=this.readService.getViewFilters(i).length>0&&!e.filter,l=!(null==(r=this.readService.getViewConfig(i))||!r.get("keep_sort"));if(a||l){var u=a?zI.FILTER:zI.SORT;setTimeout((function(){null==n||n.emitBeforeRefresh(u,"addEmptyRecord",{uuid:e.uuid},mC(X_.mark((function e(){var t;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.writeService.refreshView(i),n.emitAfterRefresh(u),null==(t=o.context)||t.destroy();case 3:case"end":return e.stop()}}),e)}))))}),300)}}}])}(ZR);function VV(e,t,n){return t=P_(t),D_(e,LV()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function LV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(LV=function(){return!!e})()}NV.commandName="addEmptyRecord";var BV=function(e){function t(){return Ub(this,t),VV(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){return e.uuid||(e.uuid=fw(32)),e}},{key:"execute",value:function(e){var t=e.uuid,n=e.sourceRecordId,r=e.modifierId,o=this.readService.getActiveView();return o&&this.writeService.copyRecord({uuid:t,viewId:null==o?void 0:o.get("uuid"),sourceRecordId:n,modifierId:r}),!0}}])}(ZR);function $V(e,t,n){return t=P_(t),D_(e,zV()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function zV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(zV=function(){return!!e})()}BV.commandName="copyRecord";var UV=function(e){function t(){return Ub(this,t),$V(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.readService.getActiveView();if(!t)return!0;var n=e.recordIds||[];return e.all||!1?this.writeService.removeAllRecords(t.get("uuid")):this.writeService.removeRecord(n),!0}}])}(ZR);UV.commandName="removeRecords";var HV=Object.defineProperty,qV=Object.getOwnPropertyDescriptor,WV=function(e,t,n,r){for(var o,i=r>1?void 0:r?qV(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&HV(t,n,i),i},GV=100,KV=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(NV.commandName,NV),this.commandService.registerCommand(BV.commandName,BV),this.commandService.registerCommand(UV.commandName,UV)}}],[{key:"pluginModule",value:function(){return pd().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"record",type:"object",title:"记录",properties:{maxCount:{type:"number",description:"最大记录数量"}}}),e.registerDefaultValue({"record.maxCount":GV})}}])}();function YV(e,t,n){return t=P_(t),D_(e,XV()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function XV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(XV=function(){return!!e})()}KV.pluginName="kernel-add-record",WV([Xs(uA)],KV.prototype,"commandService",2),KV=WV([Ys({contrib:kA})],KV);var JV=function(e){function t(){return Ub(this,t),YV(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.viewId,n=e.sourceRecordId,r=e.targetRecordId,o=e.targetGroupItem,i=e.direction;return this.writeService.updateRecordOrder(t,n,r,o,i),!0}}])}(ZR);function ZV(e,t,n){return t=P_(t),D_(e,QV()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function QV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(QV=function(){return!!e})()}JV.commandName="changeRecordOrder";var eL=function(e){function t(){return Ub(this,t),ZV(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.viewId,n=e.sourceFieldId,r=e.targetFieldId;return this.writeService.updateFieldOrder(t,n,r),!0}}])}(ZR);function tL(e,t,n){return t=P_(t),D_(e,nL()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function nL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(nL=function(){return!!e})()}eL.commandName="changeFieldOrder";var rL=function(e){function t(){return Ub(this,t),tL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.fieldId,n=e.sourceFieldOptionId,r=e.targetFieldOptionId;return this.writeService.updateFieldOptionOrder(t,n,r),!0}}])}(ZR);function oL(e,t,n){return t=P_(t),D_(e,iL()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function iL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(iL=function(){return!!e})()}rL.commandName="changeFieldOptionOrder";var aL=function(e){function t(){return Ub(this,t),oL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.sourceViewId,n=e.targetViewId;return this.writeService.updateViewOrder(t,n),!0}}])}(ZR);function lL(e,t,n){return t=P_(t),D_(e,uL()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function uL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(uL=function(){return!!e})()}aL.commandName="changeViewOrder";var cL=function(e){function t(){return Ub(this,t),lL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateValueOrder({fieldId:e.fieldId,fieldType:e.fieldType,recordId:e.recordId,sourceValueId:e.sourceValueId,targetValueId:e.targetValueId}),!0}}])}(ZR);cL.commandName="updateValueOrder";var sL=Object.defineProperty,dL=Object.getOwnPropertyDescriptor,fL=function(e,t,n,r){for(var o,i=r>1?void 0:r?dL(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&sL(t,n,i),i},pL=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(JV.commandName,JV),this.commandService.registerCommand(eL.commandName,eL),this.commandService.registerCommand(rL.commandName,rL),this.commandService.registerCommand(aL.commandName,aL),this.commandService.registerCommand(cL.commandName,cL)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function hL(e,t,n){return t=P_(t),D_(e,vL()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function vL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(vL=function(){return!!e})()}pL.pluginName="kernel-order",fL([Xs(uA)],pL.prototype,"commandService",2),pL=fL([Ys({contrib:kA})],pL);var gL=function(e){function t(){return Ub(this,t),hL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.writeService.createViewByType(e.uuid,e.type||BC.GRID);return t&&!e.noSwitchView&&!this.context.isRemote&&this.writeService.setActiveView(t.get("uuid")),!0}}])}(ZR);function mL(e,t,n){return t=P_(t),D_(e,yL()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function yL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(yL=function(){return!!e})()}gL.commandName="addView";var bL=function(e){function t(){return Ub(this,t),mL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.setActiveView(e.viewId),!0}}])}(ZR);function wL(e,t,n){return t=P_(t),D_(e,_L()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function _L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(_L=function(){return!!e})()}bL.commandName="switchView";var kL=function(e){function t(){return Ub(this,t),wL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeView(e.viewId),!0}}])}(ZR);function CL(e,t,n){return t=P_(t),D_(e,EL()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function EL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(EL=function(){return!!e})()}kL.commandName="removeView";var OL=function(e){function t(){return Ub(this,t),CL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){return e.targetViewId=fw(32),e}},{key:"execute",value:function(e){var t=this.writeService.copyView(e.targetViewId,e.viewId);return t&&this.writeService.setActiveView(t.get("uuid")),!0}}])}(ZR);function SL(e,t,n){return t=P_(t),D_(e,xL()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function xL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(xL=function(){return!!e})()}OL.commandName="copyView";var jL=function(e){function t(){return Ub(this,t),SL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateView(e.viewId,{name:e.name}),!0}}])}(ZR);jL.commandName="updateViewName";var IL=Object.defineProperty,RL=Object.getOwnPropertyDescriptor,AL=function(e,t,n,r){for(var o,i=r>1?void 0:r?RL(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&IL(t,n,i),i},DL=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(gL.commandName,gL),this.commandService.registerCommand(bL.commandName,bL),this.commandService.registerCommand(kL.commandName,kL),this.commandService.registerCommand(OL.commandName,OL),this.commandService.registerCommand(jL.commandName,jL)}}],[{key:"pluginModule",value:function(){return pd().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"view",type:"object",title:"视图",properties:{maxCount:{type:"number",description:"最大视图数量"}}})}}])}();function PL(e,t,n){return t=P_(t),D_(e,ML()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function ML(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(ML=function(){return!!e})()}DL.pluginName="kernel-viewer-manage",AL([Xs(uA)],DL.prototype,"commandService",2),DL=AL([Ys({contrib:kA})],DL);var TL=function(e){function t(){return Ub(this,t),PL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){var t=e.sourceFieldId,n=e.direction,r=void 0===n?"after":n;return this.writeService.createField({viewId:e.viewId,field:e.field,sourceFieldId:t,direction:r}),!0}}])}(ZR);function FL(e,t,n){return t=P_(t),D_(e,NL()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function NL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(NL=function(){return!!e})()}TL.commandName="addField";var VL=function(e){function t(){return Ub(this,t),FL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t,n=e.field,r=e.newFieldProperty,o=null==n?void 0:n.get("type"),i=null==n?void 0:n.get("name"),a=null==n?void 0:n.get("color"),l=null==n?void 0:n.get("config"),u=n.get("uuid"),c=!ww(r.type)&&o!==r.type,s=!ww(r.name)&&i!==r.name,d=!ww(r.color)&&a!==r.color,f=!ww(r.config)&&l!==r.config;if(c&&this.writeService.changeFieldType(u,o,r.type),s&&this.writeService.updateFieldName(u,r.name),d&&this.writeService.updateFieldColor(u,r.color),f&&this.writeService.updateFieldConfig(u,r.config),!c&&zC.isSelectLike(o)||zC.isSelectLike(r.type)){var p=null==(t=r.options)?void 0:t.map((function(e){return e.name=e.name.trim(),e})),h=!ww(r.color)&&r.color!==(null==n?void 0:n.get("color")),v=this.readService.getFieldOptions(n.get("uuid")).toJSON(),g=!ww(p)&&p!==v,m={uuid:u};if(h&&(m.color=!!r.color),g){var y=_u(p,"name");m.options=y}if(h||g){var b=c?this.readService.getFieldCells(u).filter((function(e){return!!e.value})):[];if(this.writeService.updateFieldProperty(m),c){var w=b.map((function(e){var t,n,r=e.fieldType,o=null==(n=null==(t=m.options)?void 0:t.find((function(t){var n;return(null==(n=null==t?void 0:t.name)?void 0:n.slice(0,lO.MAX_LENGTH))===e.formatValue})))?void 0:n.uuid,i=ww(o)?null:r===bC.MULTI_SELECT?[o]:o;return{recordId:e.recordId,fieldId:e.fieldId,value:i,cellId:e.uuid,fieldType:r,uuid:e.uuid}}));this.writeService.bulkSetCell(w)}}}return!0}}])}(ZR);function LL(e,t,n){return t=P_(t),D_(e,BL()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function BL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(BL=function(){return!!e})()}VL.commandName="updateField";var $L=function(e){function t(){return Ub(this,t),LL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeField(e.fieldId),!0}}])}(ZR);$L.commandName="removeField";var zL=Object.defineProperty,UL=Object.getOwnPropertyDescriptor,HL=function(e,t,n,r){for(var o,i=r>1?void 0:r?UL(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zL(t,n,i),i},qL=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(TL.commandName,TL),this.commandService.registerCommand(VL.commandName,VL),this.commandService.registerCommand($L.commandName,$L)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function WL(e,t,n){return t=P_(t),D_(e,GL()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function GL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(GL=function(){return!!e})()}qL.pluginName="kernel-add-field",HL([Xs(uA)],qL.prototype,"commandService",2),qL=HL([Ys({contrib:kA})],qL);var KL=function(e){function t(){return Ub(this,t),WL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{cover_display:e.coverDisplay}),!0}}])}(ZR);function YL(e,t,n){return t=P_(t),D_(e,XL()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function XL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(XL=function(){return!!e})()}KL.commandName="updateCoverDisplay";var JL=function(e){function t(){return Ub(this,t),YL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{show_field_name:e.showFieldName}),!0}}])}(ZR);function ZL(e,t,n){return t=P_(t),D_(e,QL()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function QL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(QL=function(){return!!e})()}JL.commandName="updateShowFieldName";var eB=function(e){function t(){return Ub(this,t),ZL(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{cover_field_uuid:e.coverFieldId}),!0}}])}(ZR);function tB(e,t,n){return t=P_(t),D_(e,nB()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function nB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(nB=function(){return!!e})()}eB.commandName="updateCoverSource";var rB=function(e){function t(){return Ub(this,t),tB(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateFieldHidden(e.viewId,e.fieldId,e.hidden),!0}}])}(ZR);rB.commandName="updateFieldHidden";var oB=Object.defineProperty,iB=Object.getOwnPropertyDescriptor,aB=function(e,t,n,r){for(var o,i=r>1?void 0:r?iB(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&oB(t,n,i),i},lB=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(KL.commandName,KL),this.commandService.registerCommand(JL.commandName,JL),this.commandService.registerCommand(eB.commandName,eB),this.commandService.registerCommand(rB.commandName,rB)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function uB(e,t,n){return t=P_(t),D_(e,cB()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function cB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(cB=function(){return!!e})()}lB.pluginName="kernel-viewer-field-setting",aB([Xs(uA)],lB.prototype,"commandService",2),lB=aB([Ys({contrib:kA})],lB);var sB=function(e){function t(){return Ub(this,t),uB(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.viewId,n=e.fieldId,r=e.size;return this.writeService.updateFieldSize(t,n,r),!0}}])}(ZR);sB.commandName="changeColWidth";var dB=Object.defineProperty,fB=Object.getOwnPropertyDescriptor,pB=function(e,t,n,r){for(var o,i=r>1?void 0:r?fB(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&dB(t,n,i),i},hB=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(sB.commandName,sB)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function vB(e,t,n){return t=P_(t),D_(e,gB()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function gB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(gB=function(){return!!e})()}hB.pluginName="kernel-viewer-grid",pB([Xs(uA)],hB.prototype,"commandService",2),hB=pB([Ys({contrib:kA})],hB);var mB=function(e){function t(){return Ub(this,t),vB(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.createGroup(e.viewId,e.group),!0}}])}(ZR);function yB(e,t,n){return t=P_(t),D_(e,bB()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function bB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(bB=function(){return!!e})()}mB.commandName="createGridGroup";var wB=function(e){function t(){return Ub(this,t),yB(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeGroup(e.viewId),!0}}])}(ZR);function _B(e,t,n){return t=P_(t),D_(e,kB()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function kB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(kB=function(){return!!e})()}wB.commandName="removeGridGroup";var CB=function(e){function t(){return Ub(this,t),_B(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateGroup(e.viewId,e.group),!0}}])}(ZR);function EB(e,t,n){return t=P_(t),D_(e,OB()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function OB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(OB=function(){return!!e})()}CB.commandName="updateGridGroup";var SB=function(e){function t(){return Ub(this,t),EB(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.setGroupItemCollapse(e.viewId,e.fieldId,e.groupId,e.value),!0}}])}(ZR);SB.commandName="updateGridGroupFold";var xB=Object.defineProperty,jB=Object.getOwnPropertyDescriptor,IB=function(e,t,n,r){for(var o,i=r>1?void 0:r?jB(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&xB(t,n,i),i},RB=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(mB.commandName,mB),this.commandService.registerCommand(wB.commandName,wB),this.commandService.registerCommand(CB.commandName,CB),this.commandService.registerCommand(SB.commandName,SB)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function AB(e,t,n){return t=P_(t),D_(e,DB()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function DB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(DB=function(){return!!e})()}RB.pluginName="kernel-viewer-grid-group",IB([Xs(uA)],RB.prototype,"commandService",2),RB=IB([Ys({contrib:kA})],RB);var PB=function(e){function t(){return Ub(this,t),AB(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{record_height:e.recordHeight}),!0}}])}(ZR),MB=Object.defineProperty,TB=Object.getOwnPropertyDescriptor,FB=function(e,t,n,r){for(var o,i=r>1?void 0:r?TB(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&MB(t,n,i),i},NB=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand("updateGridRecordHeight",PB)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function VB(e,t,n){return t=P_(t),D_(e,LB()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function LB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(LB=function(){return!!e})()}NB.pluginName="kernel-viewer-grid-record-height",FB([Xs(uA)],NB.prototype,"commandService",2),NB=FB([Ys({contrib:kA})],NB);var BB=function(e){function t(){return Ub(this,t),VB(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.removeCells(e.cells,!1),!0}},{key:"afterExecute",value:function(e,n,r){var o=this,i=e.cells,a=i[0],l=this.readService.getActiveView(),u=this.readService.getViewGroup(l.get("uuid")),c=i.map((function(e){return e.fieldId})),s=r.isNeedRefreshSort(l.get("uuid"),c),d=r.isNeedRefreshGroup(l.get("uuid"),c),f=r.isNeedRefreshFilter(l.get("uuid"),a.fieldId,a.recordId,a.value);if(s||d||f){var p=s?zI.SORT:d?zI.GROUP:zI.FILTER;s&&this.writeService.refreshSort(l.get("uuid")),d&&this.writeService.refreshGroup(l.get("uuid"),null==u?void 0:u.group.toJSON()),f&&this.writeService.refreshFilter(l.get("uuid")),null==r||r.emitBeforeRefresh(p,t.commandName,e,mC(X_.mark((function e(){var t;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.emitAfterRefresh(p),null==(t=o.context)||t.destroy();case 2:case"end":return e.stop()}}),e)}))))}}}])}(ZR);BB.commandName="removeCells";var $B=BB;function zB(e,t,n){return t=P_(t),D_(e,UB()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function UB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(UB=function(){return!!e})()}var HB=function(e){function t(){return Ub(this,t),zB(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.setCell(e,!1),!0}},{key:"afterExecute",value:function(e,n,r){var o=this,i=this.readService.getActiveView(),a=this.readService.getViewGroup(i.get("uuid")),l=r.isNeedRefreshSort(i.get("uuid"),e.fieldId),u=r.isNeedRefreshGroup(i.get("uuid"),e.fieldId),c=r.isNeedRefreshFilter(i.get("uuid"),e.fieldId,e.recordId,e.value);if(l||u||c){var s=l?zI.SORT:u?zI.GROUP:zI.FILTER;l&&this.writeService.refreshSort(i.get("uuid")),u&&this.writeService.refreshGroup(i.get("uuid"),null==a?void 0:a.group.toJSON()),c&&this.writeService.refreshFilter(i.get("uuid")),null==r||r.emitBeforeRefresh(s,t.commandName,e,mC(X_.mark((function e(){var t;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.emitAfterRefresh(s),null==(t=o.context)||t.destroy();case 2:case"end":return e.stop()}}),e)}))))}}}])}(ZR);HB.commandName="setCell";var qB=HB,WB=Object.defineProperty,GB=Object.getOwnPropertyDescriptor,KB=function(e,t,n,r){for(var o,i=r>1?void 0:r?GB(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&WB(t,n,i),i},YB=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand($B.commandName,$B),this.commandService.registerCommand(qB.commandName,qB)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();YB.pluginName="kernel-viewer-grid-cell-editor",KB([Xs(uA)],YB.prototype,"commandService",2),YB=KB([Ys({contrib:kA})],YB);var XB=Object.defineProperty,JB=Object.getOwnPropertyDescriptor,ZB=function(e,t,n,r){for(var o,i=r>1?void 0:r?JB(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&XB(t,n,i),i},QB=function(){return Wb((function e(){Ub(this,e),this.viewType=BC.CARD}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function e$(e,t,n){return t=P_(t),D_(e,t$()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function t$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(t$=function(){return!!e})()}QB.pluginName="kernel-viewer-card",ZB([Xs(uA)],QB.prototype,"commandService",2),QB=ZB([Ys({contrib:kA})],QB);var n$=function(e){function t(){return Ub(this,t),e$(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.updateGroup(e.viewId,e.group),!0}}])}(ZR);n$.commandName="updateKanbanGroup";var r$=Object.defineProperty,o$=Object.getOwnPropertyDescriptor,i$=function(e,t,n,r){for(var o,i=r>1?void 0:r?o$(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&r$(t,n,i),i},a$=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(n$.commandName,n$)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();a$.pluginName="kernel-viewer-kanban",i$([Xs(uA)],a$.prototype,"commandService",2),a$=i$([Ys({contrib:kA})],a$);var l$={exports:{}};!function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,r(n)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var r="";for(var i in e)t.call(e,i)&&e[i]&&(r=o(r,i));return r}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}(l$);const u$=l$.exports;const c$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function s$(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function d$(e){return"nodeType"in e}function f$(e){var t,n;return e?s$(e)?e:d$(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function p$(e){const{Document:t}=f$(e);return e instanceof t}function h$(e){return!s$(e)&&e instanceof f$(e).HTMLElement}function v$(e){return e instanceof f$(e).SVGElement}function g$(e){return e?s$(e)?e.document:d$(e)?p$(e)?e:h$(e)||v$(e)?e.ownerDocument:document:document:document}const m$=c$?a.useLayoutEffect:a.useEffect;function y$(e){const t=Object(a.useRef)(e);return m$((()=>{t.current=e})),Object(a.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}function b$(e,t){void 0===t&&(t=[e]);const n=Object(a.useRef)(e);return m$((()=>{n.current!==e&&(n.current=e)}),t),n}function w$(e,t){const n=Object(a.useRef)();return Object(a.useMemo)((()=>{const t=e(n.current);return n.current=t,t}),[...t])}function _$(e){const t=y$(e),n=Object(a.useRef)(null),r=Object(a.useCallback)((e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e}),[]);return[n,r]}function k$(e){const t=Object(a.useRef)();return Object(a.useEffect)((()=>{t.current=e}),[e]),t.current}let C$={};function E$(e,t){return Object(a.useMemo)((()=>{if(t)return t;const n=null==C$[e]?0:C$[e]+1;return C$[e]=n,e+"-"+n}),[e,t])}function O$(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(((t,n)=>{const r=Object.entries(n);for(const[n,o]of r){const r=t[n];null!=r&&(t[n]=r+e*o)}return t}),{...t})}}const S$=O$(1),x$=O$(-1);function j$(e){if(!e)return!1;const{KeyboardEvent:t}=f$(e.target);return t&&e instanceof t}function I$(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=f$(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const R$=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[R$.Translate.toString(e),R$.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),A$="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function D$(e){return e.matches(A$)?e:e.querySelector(A$)}const P$={display:"none"};function M$(e){let{id:t,value:n}=e;return l.a.createElement("div",{id:t,style:P$},n)}function T$(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return l.a.createElement("div",{id:t,style:{position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}const F$=Object(a.createContext)(null);const N$={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},V$={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function L$(e){let{announcements:t=V$,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=N$}=e;const{announce:i,announcement:c}=function(){const[e,t]=Object(a.useState)("");return{announce:Object(a.useCallback)((e=>{null!=e&&t(e)}),[]),announcement:e}}(),s=E$("DndLiveRegion"),[d,f]=Object(a.useState)(!1);if(Object(a.useEffect)((()=>{f(!0)}),[]),function(e){const t=Object(a.useContext)(F$);Object(a.useEffect)((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}(Object(a.useMemo)((()=>({onDragStart(e){let{active:n}=e;i(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&i(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;i(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;i(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;i(t.onDragCancel({active:n,over:r}))}})),[i,t])),!d)return null;const p=l.a.createElement(l.a.Fragment,null,l.a.createElement(M$,{id:r,value:o.draggable}),l.a.createElement(T$,{id:s,announcement:c}));return n?Object(u.createPortal)(p,n):p}var B$;function $$(){}function z$(e,t){return Object(a.useMemo)((()=>({sensor:e,options:null!=t?t:{}})),[e,t])}function U$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(a.useMemo)((()=>[...t].filter((e=>null!=e))),[...t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(B$||(B$={}));const H$=Object.freeze({x:0,y:0});function q$(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function W$(e,t){const n=I$(e);if(!n)return"0 0";return(n.x-t.left)/t.width*100+"% "+(n.y-t.top)/t.height*100+"%"}function G$(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function K$(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Y$(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function X$(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function J$(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const Z$=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=J$(t,t.left,t.top),i=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=q$(J$(r),o);i.push({id:t,data:{droppableContainer:e,value:n}})}}return i.sort(G$)};function Q$(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=o-r,l=i-n;if(r<o&&n<i){const n=t.width*t.height,r=e.width*e.height,o=a*l;return Number((o/(n+r-o)).toFixed(4))}return 0}const ez=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const e of r){const{id:r}=e,i=n.get(r);if(i){const n=Q$(i,t);n>0&&o.push({id:r,data:{droppableContainer:e,value:n}})}}return o.sort(K$)};function tz(e,t){const{top:n,left:r,bottom:o,right:i}=t;return n<=e.y&&e.y<=o&&r<=e.x&&e.x<=i}function nz(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:H$}function rz(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})),{...t})}}const oz=rz(1);function iz(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const az={ignoreTransform:!1};function lz(e,t){void 0===t&&(t=az);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=f$(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=iz(t);if(!r)return e;const{scaleX:o,scaleY:i,x:a,y:l}=r,u=e.left-a-(1-o)*parseFloat(n),c=e.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),s=o?e.width/o:e.width,d=i?e.height/i:e.height;return{width:s,height:d,top:c,right:u+s,bottom:c+d,left:u}}(n,t,r))}const{top:r,left:o,width:i,height:a,bottom:l,right:u}=n;return{top:r,left:o,width:i,height:a,bottom:l,right:u}}function uz(e){return lz(e,{ignoreTransform:!0})}function cz(e,t){const n=[];return e?function r(o){if(null!=t&&n.length>=t||!o)return n;if(p$(o)&&null!=o.scrollingElement&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!h$(o)||v$(o)||n.includes(o))return n;const i=f$(e).getComputedStyle(o);return o!==e&&function(e,t){void 0===t&&(t=f$(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"==typeof r&&n.test(r)}))}(o,i)&&n.push(o),function(e,t){return void 0===t&&(t=f$(e).getComputedStyle(e)),"fixed"===t.position}(o,i)?n:r(o.parentNode)}(e):n}function sz(e){const[t]=cz(e,1);return null!=t?t:null}function dz(e){return c$&&e?s$(e)?e:d$(e)?p$(e)||e===g$(e).scrollingElement?window:h$(e)?e:null:null:null}function fz(e){return s$(e)?e.scrollX:e.scrollLeft}function pz(e){return s$(e)?e.scrollY:e.scrollTop}function hz(e){return{x:fz(e),y:pz(e)}}var vz;function gz(e){return!(!c$||!e)&&e===document.scrollingElement}function mz(e){const t={x:0,y:0},n=gz(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(vz||(vz={}));const yz={x:.2,y:.2};function bz(e,t,n,r,o){let{top:i,left:a,right:l,bottom:u}=n;void 0===r&&(r=10),void 0===o&&(o=yz);const{isTop:c,isBottom:s,isLeft:d,isRight:f}=mz(e),p={x:0,y:0},h={x:0,y:0},v=t.height*o.y,g=t.width*o.x;return!c&&i<=t.top+v?(p.y=vz.Backward,h.y=r*Math.abs((t.top+v-i)/v)):!s&&u>=t.bottom-v&&(p.y=vz.Forward,h.y=r*Math.abs((t.bottom-v-u)/v)),!f&&l>=t.right-g?(p.x=vz.Forward,h.x=r*Math.abs((t.right-g-l)/g)):!d&&a<=t.left+g&&(p.x=vz.Backward,h.x=r*Math.abs((t.left+g-a)/g)),{direction:p,speed:h}}function wz(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function _z(e){return e.reduce(((e,t)=>S$(e,hz(t))),H$)}function kz(e,t){if(void 0===t&&(t=lz),!e)return;const{top:n,left:r,bottom:o,right:i}=t(e);!sz(e)||(o<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Cz=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+fz(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+pz(t)),0)}]];class Ez{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=cz(t),r=_z(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,o]of Cz)for(const i of t)Object.defineProperty(this,i,{get:()=>{const t=o(n),a=r[e]-t;return this.rect[i]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Oz{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function Sz(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var xz,jz;function Iz(e){e.preventDefault()}function Rz(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(xz||(xz={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"}(jz||(jz={}));const Az={start:[jz.Space,jz.Enter],cancel:[jz.Esc],end:[jz.Space,jz.Enter]},Dz=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case jz.Right:return{...n,x:n.x+25};case jz.Left:return{...n,x:n.x-25};case jz.Down:return{...n,y:n.y+25};case jz.Up:return{...n,y:n.y-25}}};class Pz{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Oz(g$(t)),this.windowListeners=new Oz(f$(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(xz.Resize,this.handleCancel),this.windowListeners.add(xz.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(xz.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&kz(n),t(H$)}handleKeyDown(e){if(j$(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:o=Az,coordinateGetter:i=Dz,scrollBehavior:a="smooth"}=r,{code:l}=e;if(o.end.includes(l))return void this.handleEnd(e);if(o.cancel.includes(l))return void this.handleCancel(e);const{collisionRect:u}=n.current,c=u?{x:u.left,y:u.top}:H$;this.referenceCoordinates||(this.referenceCoordinates=c);const s=i(e,{active:t,context:n.current,currentCoordinates:c});if(s){const t=x$(s,c),r={x:0,y:0},{scrollableAncestors:o}=n.current;for(const n of o){const o=e.code,{isTop:i,isRight:l,isLeft:u,isBottom:c,maxScroll:d,minScroll:f}=mz(n),p=wz(n),h={x:Math.min(o===jz.Right?p.right-p.width/2:p.right,Math.max(o===jz.Right?p.left:p.left+p.width/2,s.x)),y:Math.min(o===jz.Down?p.bottom-p.height/2:p.bottom,Math.max(o===jz.Down?p.top:p.top+p.height/2,s.y))},v=o===jz.Right&&!l||o===jz.Left&&!u,g=o===jz.Down&&!c||o===jz.Up&&!i;if(v&&h.x!==s.x){const e=n.scrollLeft+t.x,i=o===jz.Right&&e<=d.x||o===jz.Left&&e>=f.x;if(i&&!t.y)return void n.scrollTo({left:e,behavior:a});r.x=i?n.scrollLeft-e:o===jz.Right?n.scrollLeft-d.x:n.scrollLeft-f.x,r.x&&n.scrollBy({left:-r.x,behavior:a});break}if(g&&h.y!==s.y){const e=n.scrollTop+t.y,i=o===jz.Down&&e<=d.y||o===jz.Up&&e>=f.y;if(i&&!t.x)return void n.scrollTo({top:e,behavior:a});r.y=i?n.scrollTop-e:o===jz.Down?n.scrollTop-d.y:n.scrollTop-f.y,r.y&&n.scrollBy({top:-r.y,behavior:a});break}}this.handleMove(e,S$(x$(s,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function Mz(e){return Boolean(e&&"distance"in e)}function Tz(e){return Boolean(e&&"delay"in e)}Pz.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Az,onActivation:o}=t,{active:i}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const t=i.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==o||o({event:e.nativeEvent}),!0)}return!1}}];class Fz{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=f$(e);return e instanceof t?e:g$(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:i}=o;this.props=e,this.events=t,this.document=g$(i),this.documentListeners=new Oz(this.document),this.listeners=new Oz(n),this.windowListeners=new Oz(f$(i)),this.initialCoordinates=null!=(r=I$(o))?r:H$,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(xz.Resize,this.handleCancel),this.windowListeners.add(xz.DragStart,Iz),this.windowListeners.add(xz.VisibilityChange,this.handleCancel),this.windowListeners.add(xz.ContextMenu,Iz),this.documentListeners.add(xz.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Tz(t))return void(this.timeoutId=setTimeout(this.handleStart,t.delay));if(Mz(t))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(xz.Click,Rz,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(xz.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:o}=this,{onMove:i,options:{activationConstraint:a}}=o;if(!r)return;const l=null!=(t=I$(e))?t:H$,u=x$(r,l);if(!n&&a){if(Mz(a)){if(null!=a.tolerance&&Sz(u,a.tolerance))return this.handleCancel();if(Sz(u,a.distance))return this.handleStart()}return Tz(a)&&Sz(u,a.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),i(l)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===jz.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const Nz={move:{name:"pointermove"},end:{name:"pointerup"}};class Vz extends Fz{constructor(e){const{event:t}=e,n=g$(t.target);super(e,Nz,n)}}Vz.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const Lz={move:{name:"mousemove"},end:{name:"mouseup"}};var Bz;!function(e){e[e.RightClick=2]="RightClick"}(Bz||(Bz={}));class $z extends Fz{constructor(e){super(e,Lz,g$(e.event.target))}}$z.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==Bz.RightClick&&(null==r||r({event:n}),!0)}}];const zz={move:{name:"touchmove"},end:{name:"touchend"}};var Uz,Hz;function qz(e){let{acceleration:t,activator:n=Uz.Pointer,canScroll:r,draggingRect:o,enabled:i,interval:l=5,order:u=Hz.TreeOrder,pointerCoordinates:c,scrollableAncestors:s,scrollableAncestorRects:d,delta:f,threshold:p}=e;const h=function(e){let{delta:t,disabled:n}=e;const r=k$(t);return w$((e=>{if(n||!r||!e)return Wz;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[vz.Backward]:e.x[vz.Backward]||-1===o.x,[vz.Forward]:e.x[vz.Forward]||1===o.x},y:{[vz.Backward]:e.y[vz.Backward]||-1===o.y,[vz.Forward]:e.y[vz.Forward]||1===o.y}}}),[n,t,r])}({delta:f,disabled:!i}),[v,g]=function(){const e=Object(a.useRef)(null),t=Object(a.useCallback)(((t,n)=>{e.current=setInterval(t,n)}),[]);return[t,Object(a.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),m=Object(a.useRef)({x:0,y:0}),y=Object(a.useRef)({x:0,y:0}),b=Object(a.useMemo)((()=>{switch(n){case Uz.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Uz.DraggableRect:return o}}),[n,o,c]),w=Object(a.useRef)(null),_=Object(a.useCallback)((()=>{const e=w.current;if(!e)return;const t=m.current.x*y.current.x,n=m.current.y*y.current.y;e.scrollBy(t,n)}),[]),k=Object(a.useMemo)((()=>u===Hz.TreeOrder?[...s].reverse():s),[u,s]);Object(a.useEffect)((()=>{if(i&&s.length&&b){for(const e of k){if(!1===(null==r?void 0:r(e)))continue;const n=s.indexOf(e),o=d[n];if(!o)continue;const{direction:i,speed:a}=bz(e,o,b,t,p);for(const e of["x","y"])h[e][i[e]]||(a[e]=0,i[e]=0);if(a.x>0||a.y>0)return g(),w.current=e,v(_,l),m.current=a,void(y.current=i)}m.current={x:0,y:0},y.current={x:0,y:0},g()}else g()}),[t,_,r,g,i,l,JSON.stringify(b),JSON.stringify(h),v,s,k,d,JSON.stringify(p)])}(class extends Fz{constructor(e){super(e,zz)}static setup(){return window.addEventListener(zz.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(zz.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return!(o.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(Uz||(Uz={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(Hz||(Hz={}));const Wz={x:{[vz.Backward]:!1,[vz.Forward]:!1},y:{[vz.Backward]:!1,[vz.Forward]:!1}};var Gz,Kz;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(Gz||(Gz={})),function(e){e.Optimized="optimized"}(Kz||(Kz={}));const Yz=new Map;function Xz(e,t){return w$((n=>e?n||("function"==typeof t?t(e):e):null),[t,e])}function Jz(e){let{callback:t,disabled:n}=e;const r=y$(t),o=Object(a.useMemo)((()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:e}=window;return new e(r)}),[n]);return Object(a.useEffect)((()=>()=>null==o?void 0:o.disconnect()),[o]),o}function Zz(e){return new Ez(lz(e),e)}function Qz(e,t,n){void 0===t&&(t=Zz);const[r,o]=Object(a.useReducer)((function(r){if(!e)return null;var o;if(!1===e.isConnected)return null!=(o=null!=r?r:n)?o:null;const i=t(e);return JSON.stringify(r)===JSON.stringify(i)?r:i}),null),i=function(e){let{callback:t,disabled:n}=e;const r=y$(t),o=Object(a.useMemo)((()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:e}=window;return new e(r)}),[r,n]);return Object(a.useEffect)((()=>()=>null==o?void 0:o.disconnect()),[o]),o}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){o();break}}}}),l=Jz({callback:o});return m$((()=>{o(),e?(null==l||l.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==i||i.disconnect())}),[e]),r}const eU=[];function tU(e,t){void 0===t&&(t=[]);const n=Object(a.useRef)(null);return Object(a.useEffect)((()=>{n.current=null}),t),Object(a.useEffect)((()=>{const t=e!==H$;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?x$(e,n.current):H$}function nU(e){return Object(a.useMemo)((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const rU=[];function oU(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return h$(t)?t:e}const iU=[{sensor:Vz,options:{}},{sensor:Pz,options:{}}],aU={current:{}},lU={draggable:{measure:uz},droppable:{measure:uz,strategy:Gz.WhileDragging,frequency:Kz.Optimized},dragOverlay:{measure:lz}};class uU extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const cU={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new uU,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:$$},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:lU,measureDroppableContainers:$$,windowRect:null,measuringScheduled:!1},sU={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:$$,draggableNodes:new Map,over:null,measureDroppableContainers:$$},dU=Object(a.createContext)(sU),fU=Object(a.createContext)(cU);function pU(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new uU}}}function hU(e,t){switch(t.type){case B$.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case B$.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case B$.DragEnd:case B$.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case B$.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new uU(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case B$.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const a=new uU(e.droppable.containers);return a.set(n,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case B$.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new uU(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function vU(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=Object(a.useContext)(dU),i=k$(r),l=k$(null==n?void 0:n.id);return Object(a.useEffect)((()=>{if(!t&&!r&&i&&null!=l){if(!j$(i)||document.activeElement===i.target)return;const e=o.get(l);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=D$(e);if(t){t.focus();break}}}))}}),[r,t,o,l,i]),null}function gU(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...r})),n):n}const mU=Object(a.createContext)({...H$,scaleX:1,scaleY:1});var yU;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(yU||(yU={}));const bU=Object(a.memo)((function(e){var t,n,r,o;let{id:i,accessibility:c,autoScroll:s=!0,children:d,sensors:f=iU,collisionDetection:p=ez,measuring:h,modifiers:v,...g}=e;const m=Object(a.useReducer)(hU,void 0,pU),[y,b]=m,[w,_]=function(){const[e]=Object(a.useState)((()=>new Set)),t=Object(a.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]);return[Object(a.useCallback)((t=>{let{type:n,event:r}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[e]),t]}(),[k,C]=Object(a.useState)(yU.Uninitialized),E=k===yU.Initialized,{draggable:{active:O,nodes:S,translate:x},droppable:{containers:j}}=y,I=O?S.get(O):null,R=Object(a.useRef)({initial:null,translated:null}),A=Object(a.useMemo)((()=>{var e;return null!=O?{id:O,data:null!=(e=null==I?void 0:I.data)?e:aU,rect:R}:null}),[O,I]),D=Object(a.useRef)(null),[P,M]=Object(a.useState)(null),[T,F]=Object(a.useState)(null),N=b$(g,Object.values(g)),V=E$("DndDescribedBy",i),L=Object(a.useMemo)((()=>j.getEnabled()),[j]),B=function(e){return Object(a.useMemo)((()=>({draggable:{...lU.draggable,...null==e?void 0:e.draggable},droppable:{...lU.droppable,...null==e?void 0:e.droppable},dragOverlay:{...lU.dragOverlay,...null==e?void 0:e.dragOverlay}})),[null==e?void 0:e.draggable,null==e?void 0:e.droppable,null==e?void 0:e.dragOverlay])}(h),{droppableRects:$,measureDroppableContainers:z,measuringScheduled:U}=function(e,t){let{dragging:n,dependencies:r,config:o}=t;const[i,l]=Object(a.useState)(null),{frequency:u,measure:c,strategy:s}=o,d=Object(a.useRef)(e),f=function(){switch(s){case Gz.Always:return!1;case Gz.BeforeDragging:return n;default:return!n}}(),p=b$(f),h=Object(a.useCallback)((function(e){void 0===e&&(e=[]),!p.current&&l((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[p]),v=Object(a.useRef)(null),g=w$((t=>{if(f&&!n)return Yz;if(!t||t===Yz||d.current!==e||null!=i){const t=new Map;for(let n of e){if(!n)continue;if(i&&i.length>0&&!i.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new Ez(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t}),[e,i,n,f,c]);return Object(a.useEffect)((()=>{d.current=e}),[e]),Object(a.useEffect)((()=>{f||h()}),[n,f]),Object(a.useEffect)((()=>{i&&i.length>0&&l(null)}),[JSON.stringify(i)]),Object(a.useEffect)((()=>{f||"number"!=typeof u||null!==v.current||(v.current=setTimeout((()=>{h(),v.current=null}),u))}),[u,f,h,...r]),{droppableRects:g,measureDroppableContainers:h,measuringScheduled:null!=i}}(L,{dragging:E,dependencies:[x.x,x.y],config:B.droppable}),H=function(e,t){const n=null!==t?e.get(t):void 0,r=n?n.node.current:null;return w$((e=>{var n;return null===t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(S,O),q=Object(a.useMemo)((()=>T?I$(T):null),[T]),W=function(){const e=!1===(null==P?void 0:P.autoScrollEnabled),t="object"==typeof s?!1===s.enabled:!1===s,n=E&&!e&&!t;return"object"==typeof s?{...s,enabled:n}:{enabled:n}}(),G=function(e,t){return Xz(e,t)}(H,B.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const i=Object(a.useRef)(!1),{x:l,y:u}="boolean"==typeof o?{x:o,y:o}:o;m$((()=>{if(!l&&!u||!t)return void(i.current=!1);if(i.current||!r)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const o=nz(n(e),r);if(l||(o.x=0),u||(o.y=0),i.current=!0,Math.abs(o.x)>0||Math.abs(o.y)>0){const t=sz(e);t&&t.scrollBy({top:o.y,left:o.x})}}),[t,l,u,r,n])}({activeNode:O?S.get(O):null,config:W.layoutShiftCompensation,initialRect:G,measure:B.draggable.measure});const K=Qz(H,B.draggable.measure,G),Y=Qz(H?H.parentElement:null),X=Object(a.useRef)({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:$,draggableNodes:S,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),J=j.getNodeFor(null==(t=X.current.over)?void 0:t.id),Z=function(e){let{measure:t}=e;const[n,r]=Object(a.useState)(null),o=Jz({callback:Object(a.useCallback)((e=>{for(const{target:n}of e)if(h$(n)){r((e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r}));break}}),[t])}),i=Object(a.useCallback)((e=>{const n=oU(e);null==o||o.disconnect(),n&&(null==o||o.observe(n)),r(n?t(n):null)}),[t,o]),[l,u]=_$(i);return Object(a.useMemo)((()=>({nodeRef:l,rect:n,setRef:u})),[n,l,u])}({measure:B.dragOverlay.measure}),Q=null!=(n=Z.nodeRef.current)?n:H,ee=E?null!=(r=Z.rect)?r:K:null,te=Boolean(Z.nodeRef.current&&Z.rect),ne=function(e){return nz(e,Xz(e))}(te?null:K),re=nU(Q?f$(Q):null),oe=function(e){const t=Object(a.useRef)(e),n=w$((n=>e?n&&n!==eU&&e&&t.current&&e.parentNode===t.current.parentNode?n:cz(e):eU),[e]);return Object(a.useEffect)((()=>{t.current=e}),[e]),n}(E?null!=J?J:H:null),ie=function(e,t){void 0===t&&(t=lz);const[n]=e,r=nU(n?f$(n):null),[o,i]=Object(a.useReducer)((function(){return e.length?e.map((e=>gz(e)?r:new Ez(t(e),e))):rU}),rU),l=Jz({callback:i});return e.length>0&&o===rU&&i(),m$((()=>{e.length?e.forEach((e=>null==l?void 0:l.observe(e))):(null==l||l.disconnect(),i())}),[e]),o}(oe),ae=gU(v,{transform:{x:x.x-ne.x,y:x.y-ne.y,scaleX:1,scaleY:1},activatorEvent:T,active:A,activeNodeRect:K,containerNodeRect:Y,draggingNodeRect:ee,over:X.current.over,overlayNodeRect:Z.rect,scrollableAncestors:oe,scrollableAncestorRects:ie,windowRect:re}),le=q?S$(q,x):null,ue=function(e){const[t,n]=Object(a.useState)(null),r=Object(a.useRef)(e),o=Object(a.useCallback)((e=>{const t=dz(e.target);!t||n((e=>e?(e.set(t,hz(t)),new Map(e)):null))}),[]);return Object(a.useEffect)((()=>{const t=r.current;if(e!==t){i(t);const a=e.map((e=>{const t=dz(e);return t?(t.addEventListener("scroll",o,{passive:!0}),[t,hz(t)]):null})).filter((e=>null!=e));n(a.length?new Map(a):null),r.current=e}return()=>{i(e),i(t)};function i(e){e.forEach((e=>{const t=dz(e);null==t||t.removeEventListener("scroll",o)}))}}),[o,e]),Object(a.useMemo)((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>S$(e,t)),H$):_z(e):H$),[e,t])}(oe),ce=tU(ue),se=tU(ue,[K]),de=S$(ae,ce),fe=ee?oz(ee,ae):null,pe=A&&fe?p({active:A,collisionRect:fe,droppableRects:$,droppableContainers:L,pointerCoordinates:le}):null,he=X$(pe,"id"),[ve,ge]=Object(a.useState)(null),me=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(te?ae:S$(ae,se),null!=(o=null==ve?void 0:ve.rect)?o:null,K),ye=Object(a.useCallback)(((e,t)=>{let{sensor:n,options:r}=t;if(null==D.current)return;const o=S.get(D.current);if(!o)return;const i=e.nativeEvent,a=new n({active:D.current,activeNode:o,event:i,options:r,context:X,onStart(e){const t=D.current;if(null==t)return;const n=S.get(t);if(!n)return;const{onDragStart:r}=N.current,o={active:{id:t,data:n.data,rect:R}};Object(u.unstable_batchedUpdates)((()=>{null==r||r(o),C(yU.Initializing),b({type:B$.DragStart,initialCoordinates:e,active:t}),w({type:"onDragStart",event:o})}))},onMove(e){b({type:B$.DragMove,coordinates:e})},onEnd:l(B$.DragEnd),onCancel:l(B$.DragCancel)});function l(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:o}=X.current;let a=null;if(t&&o){const{cancelDrop:l}=N.current;a={activatorEvent:i,active:t,collisions:n,delta:o,over:r},e===B$.DragEnd&&"function"==typeof l&&await Promise.resolve(l(a))&&(e=B$.DragCancel)}D.current=null,Object(u.unstable_batchedUpdates)((()=>{b({type:e}),C(yU.Uninitialized),ge(null),M(null),F(null);const t=e===B$.DragEnd?"onDragEnd":"onDragCancel";if(a){const e=N.current[t];null==e||e(a),w({type:t,event:a})}}))}}Object(u.unstable_batchedUpdates)((()=>{M(a),F(e.nativeEvent)}))}),[S]),be=function(e,t){return Object(a.useMemo)((()=>e.reduce(((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(f,Object(a.useCallback)(((e,t)=>(n,r)=>{const o=n.nativeEvent,i=S.get(r);if(null!==D.current||!i||o.dndKit||o.defaultPrevented)return;const a={active:i};!0===e(n,t.options,a)&&(o.dndKit={capturedBy:t.sensor},D.current=r,ye(n,t))}),[S,ye]));(function(e){Object(a.useEffect)((()=>{if(!c$)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))})(f),m$((()=>{K&&k===yU.Initializing&&C(yU.Initialized)}),[K,k]),Object(a.useEffect)((()=>{const{onDragMove:e}=N.current,{active:t,activatorEvent:n,collisions:r,over:o}=X.current;if(!t||!n)return;const i={active:t,activatorEvent:n,collisions:r,delta:{x:de.x,y:de.y},over:o};Object(u.unstable_batchedUpdates)((()=>{null==e||e(i),w({type:"onDragMove",event:i})}))}),[de.x,de.y]),Object(a.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:o}=X.current;if(!e||null==D.current||!t||!o)return;const{onDragOver:i}=N.current,a=r.get(he),l=a&&a.rect.current?{id:a.id,rect:a.rect.current,data:a.data,disabled:a.disabled}:null,c={active:e,activatorEvent:t,collisions:n,delta:{x:o.x,y:o.y},over:l};Object(u.unstable_batchedUpdates)((()=>{ge(l),null==i||i(c),w({type:"onDragOver",event:c})}))}),[he]),m$((()=>{X.current={activatorEvent:T,active:A,activeNode:H,collisionRect:fe,collisions:pe,droppableRects:$,draggableNodes:S,draggingNode:Q,draggingNodeRect:ee,droppableContainers:j,over:ve,scrollableAncestors:oe,scrollAdjustedTranslate:de},R.current={initial:ee,translated:fe}}),[A,H,pe,fe,S,Q,ee,$,j,ve,oe,de]),qz({...W,delta:x,draggingRect:fe,pointerCoordinates:le,scrollableAncestors:oe,scrollableAncestorRects:ie});const we=Object(a.useMemo)((()=>({active:A,activeNode:H,activeNodeRect:K,activatorEvent:T,collisions:pe,containerNodeRect:Y,dragOverlay:Z,draggableNodes:S,droppableContainers:j,droppableRects:$,over:ve,measureDroppableContainers:z,scrollableAncestors:oe,scrollableAncestorRects:ie,measuringConfiguration:B,measuringScheduled:U,windowRect:re})),[A,H,K,T,pe,Y,Z,S,j,$,ve,z,oe,ie,B,U,re]),_e=Object(a.useMemo)((()=>({activatorEvent:T,activators:be,active:A,activeNodeRect:K,ariaDescribedById:{draggable:V},dispatch:b,draggableNodes:S,over:ve,measureDroppableContainers:z})),[T,be,A,K,b,V,S,ve,z]);return l.a.createElement(F$.Provider,{value:_},l.a.createElement(dU.Provider,{value:_e},l.a.createElement(fU.Provider,{value:we},l.a.createElement(mU.Provider,{value:me},d)),l.a.createElement(vU,{disabled:!1===(null==c?void 0:c.restoreFocus)})),l.a.createElement(L$,{...c,hiddenTextDescribedById:V}))})),wU=Object(a.createContext)(null),_U="button",kU="Droppable";function CU(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const i=E$(kU),{activators:l,activatorEvent:u,active:c,activeNodeRect:s,ariaDescribedById:d,draggableNodes:f,over:p}=Object(a.useContext)(dU),{role:h=_U,roleDescription:v="draggable",tabIndex:g=0}=null!=o?o:{},m=(null==c?void 0:c.id)===t,y=Object(a.useContext)(m?mU:wU),[b,w]=_$(),[_,k]=_$(),C=function(e,t){return Object(a.useMemo)((()=>e.reduce(((e,n)=>{let{eventName:r,handler:o}=n;return e[r]=e=>{o(e,t)},e}),{})),[e,t])}(l,t),E=b$(n);m$((()=>(f.set(t,{id:t,key:i,node:b,activatorNode:_,data:E}),()=>{const e=f.get(t);e&&e.key===i&&f.delete(t)})),[f,t]);return{active:c,activatorEvent:u,activeNodeRect:s,attributes:Object(a.useMemo)((()=>({role:h,tabIndex:g,"aria-disabled":r,"aria-pressed":!(!m||h!==_U)||void 0,"aria-roledescription":v,"aria-describedby":d.draggable})),[r,h,g,m,v,d.draggable]),isDragging:m,listeners:r?void 0:C,node:b,over:p,setNodeRef:w,setActivatorNodeRef:k,transform:y}}function EU(){return Object(a.useContext)(fU)}const OU="Droppable",SU={timeout:25};function xU(e){let{animation:t,children:n}=e;const[r,o]=Object(a.useState)(null),[i,u]=Object(a.useState)(null),c=k$(n);return!n&&!r&&c&&o(c),m$((()=>{if(!i)return;const e=null==r?void 0:r.key,n=null==r?void 0:r.props.id;null!=e&&null!=n?Promise.resolve(t(n,i)).then((()=>{o(null)})):o(null)}),[t,r,i]),l.a.createElement(l.a.Fragment,null,n,r?Object(a.cloneElement)(r,{ref:u}):null)}const jU={x:0,y:0,scaleX:1,scaleY:1};function IU(e){let{children:t}=e;return l.a.createElement(dU.Provider,{value:sU},l.a.createElement(mU.Provider,{value:jU},t))}const RU={position:"fixed",touchAction:"none"},AU=e=>j$(e)?"transform 250ms ease":void 0,DU=Object(a.forwardRef)(((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:i,className:a,rect:u,style:c,transform:s,transition:d=AU}=e;if(!u)return null;const f=o?s:{...s,scaleX:1,scaleY:1},p={...RU,width:u.width,height:u.height,top:u.top,left:u.left,transform:R$.Transform.toString(f),transformOrigin:o&&r?W$(r,u):void 0,transition:"function"==typeof d?d(r):d,...c};return l.a.createElement(n,{className:a,style:p,ref:t},i)})),PU=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:i,className:a}=e;if(null!=i&&i.active)for(const[e,t]of Object.entries(i.active))void 0!==t&&(o[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,t));if(null!=i&&i.dragOverlay)for(const[e,t]of Object.entries(i.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=a&&a.active&&n.node.classList.add(a.active),null!=a&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[e,t]of Object.entries(o))n.node.style.setProperty(e,t);null!=a&&a.active&&n.node.classList.remove(a.active)}},MU={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:n}}=e;return[{transform:R$.Transform.toString(t)},{transform:R$.Transform.toString(n)}]},sideEffects:PU({styles:{active:{opacity:"0"}}})};function TU(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return y$(((e,i)=>{if(null===t)return;const a=n.get(e);if(!a)return;const l=a.node.current;if(!l)return;const u=oU(i);if(!u)return;const{transform:c}=f$(i).getComputedStyle(i),s=iz(c);if(!s)return;const d="function"==typeof t?t:function(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...MU,...e};return e=>{let{active:i,dragOverlay:a,transform:l,...u}=e;if(!t)return;const c={x:a.rect.left-i.rect.left,y:a.rect.top-i.rect.top},s={scaleX:1!==l.scaleX?i.rect.width*l.scaleX/a.rect.width:1,scaleY:1!==l.scaleY?i.rect.height*l.scaleY/a.rect.height:1},d={x:l.x-c.x,y:l.y-c.y,...s},f=o({...u,active:i,dragOverlay:a,transform:{initial:l,final:d}}),[p]=f,h=f[f.length-1];if(JSON.stringify(p)===JSON.stringify(h))return;const v=null==r?void 0:r({active:i,dragOverlay:a,...u}),g=a.node.animate(f,{duration:t,easing:n,fill:"forwards"});return new Promise((e=>{g.onfinish=()=>{null==v||v(),e()}}))}}(t);return kz(l,o.draggable.measure),d({active:{id:e,data:a.data,node:l,rect:o.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:i,rect:o.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:o,transform:s})}))}let FU=0;const NU=l.a.memo((e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:i,modifiers:u,wrapperElement:c="div",className:s,zIndex:d=999}=e;const{activatorEvent:f,active:p,activeNodeRect:h,containerNodeRect:v,draggableNodes:g,droppableContainers:m,dragOverlay:y,over:b,measuringConfiguration:w,scrollableAncestors:_,scrollableAncestorRects:k,windowRect:C}=EU(),E=Object(a.useContext)(mU),O=function(e){return Object(a.useMemo)((()=>{if(null!=e)return FU++,FU}),[e])}(null==p?void 0:p.id),S=gU(u,{activatorEvent:f,active:p,activeNodeRect:h,containerNodeRect:v,draggingNodeRect:y.rect,over:b,overlayNodeRect:y.rect,scrollableAncestors:_,scrollableAncestorRects:k,transform:E,windowRect:C}),x=Xz(h),j=TU({config:r,draggableNodes:g,droppableContainers:m,measuringConfiguration:w}),I=x?y.setRef:void 0;return l.a.createElement(IU,null,l.a.createElement(xU,{animation:j},p&&O?l.a.createElement(DU,{key:O,id:p.id,ref:I,as:c,activatorEvent:f,adjustScale:t,className:s,transition:i,rect:x,style:{zIndex:d,...o},transform:S},n):null))}));function VU(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function LU(e,t){return e.reduce(((e,n,r)=>{const o=t.get(n);return o&&(e[r]=o),e}),Array(e.length))}function BU(e){return null!==e&&e>=0}const $U={scaleX:1,scaleY:1},zU=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:o,overIndex:i,index:a}=e;const l=null!=(t=n[o])?t:r;if(!l)return null;const u=function(e,t,n){const r=e[t],o=e[t-1],i=e[t+1];return r&&(o||i)?n<t?o?r.left-(o.left+o.width):i.left-(r.left+r.width):i?i.left-(r.left+r.width):r.left-(o.left+o.width):0}(n,a,o);if(a===o){const e=n[i];return e?{x:o<i?e.left+e.width-(l.left+l.width):e.left-l.left,y:0,...$U}:null}return a>o&&a<=i?{x:-l.width-u,y:0,...$U}:a<o&&a>=i?{x:l.width+u,y:0,...$U}:{x:0,y:0,...$U}};const UU=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const i=VU(t,r,n),a=t[o],l=i[o];return l&&a?{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}:null},HU={scaleX:1,scaleY:1},qU=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:i,overIndex:a}=e;const l=null!=(t=i[n])?t:r;if(!l)return null;if(o===n){const e=i[a];return e?{x:0,y:n<a?e.top+e.height-(l.top+l.height):e.top-l.top,...HU}:null}const u=function(e,t,n){const r=e[t],o=e[t-1],i=e[t+1];return r?n<t?o?r.top-(o.top+o.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}(i,o,n);return o>n&&o<=a?{x:0,y:-l.height-u,...HU}:o<n&&o>=a?{x:0,y:l.height+u,...HU}:{x:0,y:0,...HU}};const WU="Sortable",GU=l.a.createContext({activeIndex:-1,containerId:WU,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:UU,disabled:{draggable:!1,droppable:!1}});function KU(e){let{children:t,id:n,items:r,strategy:o=UU,disabled:i=!1}=e;const{active:u,dragOverlay:c,droppableRects:s,over:d,measureDroppableContainers:f}=EU(),p=E$(WU,n),h=Boolean(null!==c.rect),v=Object(a.useMemo)((()=>r.map((e=>"object"==typeof e&&"id"in e?e.id:e))),[r]),g=null!=u,m=u?v.indexOf(u.id):-1,y=d?v.indexOf(d.id):-1,b=Object(a.useRef)(v),w=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(v,b.current),_=-1!==y&&-1===m||w,k=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(i);m$((()=>{w&&g&&f(v)}),[w,v,g,f]),Object(a.useEffect)((()=>{b.current=v}),[v]);const C=Object(a.useMemo)((()=>({activeIndex:m,containerId:p,disabled:k,disableTransforms:_,items:v,overIndex:y,useDragOverlay:h,sortedRects:LU(v,s),strategy:o})),[m,p,k.draggable,k.droppable,_,v,y,s,h,o]);return l.a.createElement(GU.Provider,{value:C},t)}const YU=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return VU(n,r,o).indexOf(t)},XU=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:i,newIndex:a,previousItems:l,previousContainerId:u,transition:c}=e;return!(!c||!r||l!==i&&o===a)&&(!!n||a!==o&&t===u)},JU={duration:200,easing:"ease"},ZU="transform",QU=R$.Transition.toString({property:ZU,duration:0,easing:"linear"}),eH={roleDescription:"sortable"};function tH(e){let{animateLayoutChanges:t=XU,attributes:n,disabled:r,data:o,getNewIndex:i=YU,id:l,strategy:u,resizeObserverConfig:c,transition:s=JU}=e;const{items:d,containerId:f,activeIndex:p,disabled:h,disableTransforms:v,sortedRects:g,overIndex:m,useDragOverlay:y,strategy:b}=Object(a.useContext)(GU),w=function(e,t){var n,r;return"boolean"==typeof e?{draggable:e,droppable:!1}:{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(r,h),_=d.indexOf(l),k=Object(a.useMemo)((()=>({sortable:{containerId:f,index:_,items:d},...o})),[f,o,_,d]),C=Object(a.useMemo)((()=>d.slice(d.indexOf(l))),[d,l]),{rect:E,node:O,isOver:S,setNodeRef:x}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const i=E$(OU),{active:l,dispatch:u,over:c,measureDroppableContainers:s}=Object(a.useContext)(dU),d=Object(a.useRef)({disabled:n}),f=Object(a.useRef)(!1),p=Object(a.useRef)(null),h=Object(a.useRef)(null),{disabled:v,updateMeasurementsFor:g,timeout:m}={...SU,...o},y=b$(null!=g?g:r),b=Jz({callback:Object(a.useCallback)((()=>{f.current?(null!=h.current&&clearTimeout(h.current),h.current=setTimeout((()=>{s(Array.isArray(y.current)?y.current:[y.current]),h.current=null}),m)):f.current=!0}),[m]),disabled:v||!l}),w=Object(a.useCallback)(((e,t)=>{!b||(t&&(b.unobserve(t),f.current=!1),e&&b.observe(e))}),[b]),[_,k]=_$(w),C=b$(t);return Object(a.useEffect)((()=>{!b||!_.current||(b.disconnect(),f.current=!1,b.observe(_.current))}),[_,b]),m$((()=>(u({type:B$.RegisterDroppable,element:{id:r,key:i,disabled:n,node:_,rect:p,data:C}}),()=>u({type:B$.UnregisterDroppable,key:i,id:r}))),[r]),Object(a.useEffect)((()=>{n!==d.current.disabled&&(u({type:B$.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)}),[r,i,n,u]),{active:l,rect:p,isOver:(null==c?void 0:c.id)===r,node:_,over:c,setNodeRef:k}}({id:l,data:k,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...c}}),{active:j,activatorEvent:I,activeNodeRect:R,attributes:A,setNodeRef:D,listeners:P,isDragging:M,over:T,setActivatorNodeRef:F,transform:N}=CU({id:l,data:k,attributes:{...eH,...n},disabled:w.draggable}),V=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(a.useMemo)((()=>e=>{t.forEach((t=>t(e)))}),t)}(x,D),L=Boolean(j),B=L&&!v&&BU(p)&&BU(m),$=!y&&M,z=$&&B?N:null,U=B?null!=z?z:(null!=u?u:b)({rects:g,activeNodeRect:R,activeIndex:p,overIndex:m,index:_}):null,H=BU(p)&&BU(m)?i({id:l,items:d,activeIndex:p,overIndex:m}):_,q=null==j?void 0:j.id,W=Object(a.useRef)({activeId:q,items:d,newIndex:H,containerId:f}),G=d!==W.current.items,K=t({active:j,containerId:f,isDragging:M,isSorting:L,id:l,index:_,items:d,newIndex:W.current.newIndex,previousItems:W.current.items,previousContainerId:W.current.containerId,transition:s,wasDragging:null!=W.current.activeId}),Y=function(e){let{disabled:t,index:n,node:r,rect:o}=e;const[i,l]=Object(a.useState)(null),u=Object(a.useRef)(n);return m$((()=>{if(!t&&n!==u.current&&r.current){const e=o.current;if(e){const t=lz(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&l(n)}}n!==u.current&&(u.current=n)}),[t,n,r,o]),Object(a.useEffect)((()=>{i&&l(null)}),[i]),i}({disabled:!K,index:_,node:O,rect:E});return Object(a.useEffect)((()=>{L&&W.current.newIndex!==H&&(W.current.newIndex=H),f!==W.current.containerId&&(W.current.containerId=f),d!==W.current.items&&(W.current.items=d)}),[L,H,f,d]),Object(a.useEffect)((()=>{if(q===W.current.activeId)return;if(q&&!W.current.activeId)return void(W.current.activeId=q);const e=setTimeout((()=>{W.current.activeId=q}),50);return()=>clearTimeout(e)}),[q]),{active:j,activeIndex:p,attributes:A,data:k,rect:E,index:_,newIndex:H,items:d,isOver:S,isSorting:L,isDragging:M,listeners:P,node:O,overIndex:m,over:T,setNodeRef:V,setActivatorNodeRef:F,setDroppableNodeRef:x,setDraggableNodeRef:D,transform:null!=Y?Y:U,transition:function(){if(Y||G&&W.current.newIndex===_)return QU;if((!$||j$(I))&&s&&(L||K))return R$.Transition.toString({...s,property:ZU})}()}}jz.Down,jz.Right,jz.Up,jz.Left;const nH=e=>{let{transform:t}=e;return{...t,y:0}};function rH(e,t,n){const r={...e};return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}const oH=e=>{let{containerNodeRect:t,draggingNodeRect:n,transform:r}=e;return n&&t?rH(r,n,t):r},iH=e=>{let{draggingNodeRect:t,transform:n,scrollableAncestorRects:r}=e;const o=r[0];return t&&o?rH(n,t,o):n},aH=e=>{let{transform:t}=e;return{...t,x:0}};function lH(e){var t=a.useRef();t.current=e;var n=a.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}function uH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function cH(e,t){if(e){if("string"==typeof e)return uH(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uH(e,t):void 0}}function sH(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||cH(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dH(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var fH=dH()?a.useLayoutEffect:a.useEffect,pH=function(e,t){var n=a.useRef(!0);fH((function(){return e(n.current)}),t),fH((function(){return n.current=!1,function(){n.current=!0}}),[])},hH=function(e,t){pH((function(t){if(!t)return e()}),t)};function vH(e){var t=a.useRef(!1),n=sH(a.useState(e),2),r=n[0],o=n[1];return a.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[r,function(e,n){n&&t.current||o(e)}]}function gH(e){return void 0!==e}function mH(e,t){var n=t||{},r=n.defaultValue,o=n.value,i=n.onChange,a=n.postState,l=sH(vH((function(){return gH(o)?o:gH(r)?"function"==typeof r?r():r:"function"==typeof e?e():e})),2),u=l[0],c=l[1],s=void 0!==o?o:u,d=a?a(s):s,f=lH(i),p=sH(vH([s]),2),h=p[0],v=p[1];return hH((function(){var e=h[0];u!==e&&f(u,e)}),[h]),hH((function(){gH(o)||c(o)}),[o]),[d,lH((function(e,t){c(e,t),v([s],t)}))]}function yH(e){return(yH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var bH,wH={exports:{}},_H={},kH=Symbol.for("react.element"),CH=Symbol.for("react.portal"),EH=Symbol.for("react.fragment"),OH=Symbol.for("react.strict_mode"),SH=Symbol.for("react.profiler"),xH=Symbol.for("react.provider"),jH=Symbol.for("react.context"),IH=Symbol.for("react.server_context"),RH=Symbol.for("react.forward_ref"),AH=Symbol.for("react.suspense"),DH=Symbol.for("react.suspense_list"),PH=Symbol.for("react.memo"),MH=Symbol.for("react.lazy"),TH=Symbol.for("react.offscreen");function FH(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case kH:switch(e=e.type){case EH:case SH:case OH:case AH:case DH:return e;default:switch(e=e&&e.$$typeof){case IH:case jH:case RH:case MH:case PH:case xH:return e;default:return t}}case CH:return t}}}function NH(e,t,n){var r=a.useRef({});return(!("value"in r.current)||n(r.current.condition,t))&&(r.current.value=e(),r.current.condition=t),r.current.value}bH=Symbol.for("react.module.reference"),_H.ContextConsumer=jH,_H.ContextProvider=xH,_H.Element=kH,_H.ForwardRef=RH,_H.Fragment=EH,_H.Lazy=MH,_H.Memo=PH,_H.Portal=CH,_H.Profiler=SH,_H.StrictMode=OH,_H.Suspense=AH,_H.SuspenseList=DH,_H.isAsyncMode=function(){return!1},_H.isConcurrentMode=function(){return!1},_H.isContextConsumer=function(e){return FH(e)===jH},_H.isContextProvider=function(e){return FH(e)===xH},_H.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===kH},_H.isForwardRef=function(e){return FH(e)===RH},_H.isFragment=function(e){return FH(e)===EH},_H.isLazy=function(e){return FH(e)===MH},_H.isMemo=function(e){return FH(e)===PH},_H.isPortal=function(e){return FH(e)===CH},_H.isProfiler=function(e){return FH(e)===SH},_H.isStrictMode=function(e){return FH(e)===OH},_H.isSuspense=function(e){return FH(e)===AH},_H.isSuspenseList=function(e){return FH(e)===DH},_H.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===EH||e===SH||e===OH||e===AH||e===DH||e===TH||"object"==typeof e&&null!==e&&(e.$$typeof===MH||e.$$typeof===PH||e.$$typeof===xH||e.$$typeof===jH||e.$$typeof===RH||e.$$typeof===bH||void 0!==e.getModuleId)},_H.typeOf=FH,function(e){e.exports=_H}(wH);var VH=function(e,t){"function"==typeof e?e(t):"object"===yH(e)&&e&&"current"in e&&(e.current=t)},LH=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(e){t.forEach((function(t){VH(t,e)}))}},BH=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return NH((function(){return LH.apply(void 0,t)}),t,(function(e,t){return e.length!==t.length||e.every((function(e,n){return e!==t[n]}))}))},$H=function(e){var t,n,r=wH.exports.isMemo(e)?e.type.type:e.type;return!("function"==typeof r&&(null===(t=r.prototype)||void 0===t||!t.render)&&r.$$typeof!==wH.exports.ForwardRef||"function"==typeof e&&(null===(n=e.prototype)||void 0===n||!n.render)&&e.$$typeof!==wH.exports.ForwardRef)};function zH(e){var t=function(e,t){if("object"!=yH(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yH(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yH(t)?t:t+""}function UH(e,t,n){return(t=zH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HH(Object(n),!0).forEach((function(t){UH(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function WH(e){return function(e){if(Array.isArray(e))return uH(e)}(e)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cH(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var GH={};function KH(e,t){}function YH(e,t){}function XH(e,t,n){!t&&!GH[n]&&(e(!1,n),GH[n]=!0)}function JH(e,t){XH(KH,e,t)}function ZH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QH(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zH(r.key),r)}}function eq(e,t,n){return t&&QH(e.prototype,t),n&&QH(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tq(e,t){return tq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tq(e,t)}function nq(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tq(e,t)}function rq(e){return(rq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(oq=function(){return!!e})()}function iq(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aq(e){var t=oq();return function(){var n,r=rq(e);if(t){var o=rq(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==yH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return iq(e)}(this,n)}}function lq(){return lq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lq.apply(null,arguments)}JH.preMessage=function(e){},JH.resetWarned=function(){GH={}},JH.noteOnce=function(e,t){XH(YH,e,t)};var uq={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=uq.F1&&t<=uq.F12)return!1;switch(t){case uq.ALT:case uq.CAPS_LOCK:case uq.CONTEXT_MENU:case uq.CTRL:case uq.DOWN:case uq.END:case uq.ESC:case uq.HOME:case uq.INSERT:case uq.LEFT:case uq.MAC_FF_META:case uq.META:case uq.NUMLOCK:case uq.NUM_CENTER:case uq.PAGE_DOWN:case uq.PAGE_UP:case uq.PAUSE:case uq.PRINT_SCREEN:case uq.RIGHT:case uq.SHIFT:case uq.UP:case uq.WIN_KEY:case uq.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=uq.ZERO&&e<=uq.NINE||e>=uq.NUM_ZERO&&e<=uq.NUM_MULTIPLY||e>=uq.A&&e<=uq.Z||-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case uq.SPACE:case uq.QUESTION_MARK:case uq.NUM_PLUS:case uq.NUM_MINUS:case uq.NUM_PERIOD:case uq.NUM_DIVISION:case uq.SEMICOLON:case uq.DASH:case uq.EQUALS:case uq.COMMA:case uq.PERIOD:case uq.SLASH:case uq.APOSTROPHE:case uq.SINGLE_QUOTE:case uq.OPEN_SQUARE_BRACKET:case uq.BACKSLASH:case uq.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},cq=a.createContext({}),sq={visibility:"hidden"};function dq(e){var t=e.prefixCls,n=e.prevIcon,r=void 0===n?"‹":n,o=e.nextIcon,i=void 0===o?"›":o,l=e.superPrevIcon,u=void 0===l?"«":l,c=e.superNextIcon,s=void 0===c?"»":c,d=e.onSuperPrev,f=e.onSuperNext,p=e.onPrev,h=e.onNext,v=e.children,g=a.useContext(cq),m=g.hideNextBtn,y=g.hidePrevBtn;return a.createElement("div",{className:t},d&&a.createElement("button",{type:"button",onClick:d,tabIndex:-1,className:"".concat(t,"-super-prev-btn"),style:y?sq:{}},u),p&&a.createElement("button",{type:"button",onClick:p,tabIndex:-1,className:"".concat(t,"-prev-btn"),style:y?sq:{}},r),a.createElement("div",{className:"".concat(t,"-view")},v),h&&a.createElement("button",{type:"button",onClick:h,tabIndex:-1,className:"".concat(t,"-next-btn"),style:m?sq:{}},i),f&&a.createElement("button",{type:"button",onClick:f,tabIndex:-1,className:"".concat(t,"-super-next-btn"),style:m?sq:{}},s))}function fq(e){var t=e.prefixCls,n=e.generateConfig,r=e.viewDate,o=e.onPrevDecades,i=e.onNextDecades;if(a.useContext(cq).hideHeader)return null;var l="".concat(t,"-header"),u=n.getYear(r),c=Math.floor(u/Nq)*Nq,s=c+Nq-1;return a.createElement(dq,lq({},e,{prefixCls:l,onSuperPrev:o,onSuperNext:i}),c,"-",s)}function pq(e,t,n,r,o){var i=e.setHour(t,n);return i=e.setMinute(i,r),i=e.setSecond(i,o)}function hq(e,t,n){if(!n)return t;var r=t;return r=e.setHour(r,e.getHour(n)),r=e.setMinute(r,e.getMinute(n)),r=e.setSecond(r,e.getSecond(n))}function vq(e,t){var n=e.getYear(t),r=e.getMonth(t)+1,o=e.getEndDate(e.getFixedDate("".concat(n,"-").concat(r,"-01"))),i=e.getDate(o),a=r<10?"0".concat(r):"".concat(r);return"".concat(n,"-").concat(a,"-").concat(i)}function gq(e){for(var t=e.prefixCls,n=e.disabledDate,r=e.onSelect,o=e.picker,i=e.rowNum,l=e.colNum,u=e.prefixColumn,c=e.rowClassName,s=e.baseDate,d=e.getCellClassName,f=e.getCellText,p=e.getCellNode,h=e.getCellDate,v=e.generateConfig,g=e.titleCell,m=e.headerCells,y=a.useContext(cq),b=y.onDateMouseEnter,w=y.onDateMouseLeave,_=y.mode,k="".concat(t,"-cell"),C=[],E=0;E<i;E+=1){for(var O=[],S=void 0,x=function(){var e,t=h(s,E*l+j),i=Zq({cellDate:t,mode:_,disabledDate:n,generateConfig:v});0===j&&(S=t,u&&O.push(u(S)));var c=g&&g(t);O.push(a.createElement("td",{key:j,title:c,className:u$(k,qH((e={},UH(e,"".concat(k,"-disabled"),i),UH(e,"".concat(k,"-start"),1===f(t)||"year"===o&&Number(c)%10==0),UH(e,"".concat(k,"-end"),c===vq(v,t)||"year"===o&&Number(c)%10==9),e),d(t))),onClick:function(){i||r(t)},onMouseEnter:function(){!i&&b&&b(t)},onMouseLeave:function(){!i&&w&&w(t)}},p?p(t):a.createElement("div",{className:"".concat(k,"-inner")},f(t))))},j=0;j<l;j+=1)x();C.push(a.createElement("tr",{key:E,className:c&&c(S)},O))}return a.createElement("div",{className:"".concat(t,"-body")},a.createElement("table",{className:"".concat(t,"-content")},m&&a.createElement("thead",null,a.createElement("tr",null,m)),a.createElement("tbody",null,C)))}var mq=3,yq=4;function bq(e){var t=Fq-1,n=e.prefixCls,r=e.viewDate,o=e.generateConfig,i="".concat(n,"-cell"),l=o.getYear(r),u=Math.floor(l/Fq)*Fq,c=Math.floor(l/Nq)*Nq,s=c+Nq-1,d=o.setYear(r,c-Math.ceil((mq*yq*Fq-Nq)/2));return a.createElement(gq,lq({},e,{rowNum:yq,colNum:mq,baseDate:d,getCellText:function(e){var n=o.getYear(e);return"".concat(n,"-").concat(n+t)},getCellClassName:function(e){var n,r=o.getYear(e),a=r+t;return UH(n={},"".concat(i,"-in-view"),c<=r&&a<=s),UH(n,"".concat(i,"-selected"),r===u),n},getCellDate:function(e,t){return o.addYear(e,t*Fq)}}))}var wq=function(e){return+setTimeout(e,16)},_q=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(wq=function(e){return window.requestAnimationFrame(e)},_q=function(e){return window.cancelAnimationFrame(e)});var kq=0,Cq=new Map;function Eq(e){Cq.delete(e)}var Oq=function(e){var t=kq+=1;return function n(r){if(0===r)Eq(t),e();else{var o=wq((function(){n(r-1)}));Cq.set(t,o)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};Oq.cancel=function(e){var t=Cq.get(e);return Eq(e),_q(t)};const Sq=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var o=e.getBoundingClientRect(),i=o.width,a=o.height;if(i||a)return!0}}return!1};var xq=new Map;function jq(e,t,n){if(xq.get(e)&&cancelAnimationFrame(xq.get(e)),n<=0)xq.set(e,requestAnimationFrame((function(){e.scrollTop=t})));else{var r=(t-e.scrollTop)/n*10;xq.set(e,requestAnimationFrame((function(){e.scrollTop+=r,e.scrollTop!==t&&jq(e,t,n-10)})))}}function Iq(e,t){var n=t.onLeftRight,r=t.onCtrlLeftRight,o=t.onUpDown,i=t.onPageUpDown,a=t.onEnter,l=e.which,u=e.ctrlKey,c=e.metaKey;switch(l){case uq.LEFT:if(u||c){if(r)return r(-1),!0}else if(n)return n(-1),!0;break;case uq.RIGHT:if(u||c){if(r)return r(1),!0}else if(n)return n(1),!0;break;case uq.UP:if(o)return o(-1),!0;break;case uq.DOWN:if(o)return o(1),!0;break;case uq.PAGE_UP:if(i)return i(-1),!0;break;case uq.PAGE_DOWN:if(i)return i(1),!0;break;case uq.ENTER:if(a)return a(),!0}return!1}function Rq(e,t,n,r){var o=e;if(!o)switch(t){case"time":o=r?"hh:mm:ss a":"HH:mm:ss";break;case"week":o="gggg-wo";break;case"month":o="YYYY-MM";break;case"quarter":o="YYYY-[Q]Q";break;case"year":o="YYYY";break;default:o=n?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"}return o}function Aq(e,t,n){var r="time"===e?8:10,o="function"==typeof t?t(n.getNow()).length:t.length;return Math.max(r,o)+2}var Dq=null,Pq=new Set;var Mq={year:function(e){return"month"===e||"date"===e?"year":e},month:function(e){return"date"===e?"month":e},quarter:function(e){return"month"===e||"date"===e?"quarter":e},week:function(e){return"date"===e?"week":e},time:null,date:null};function Tq(e,t){return e.some((function(e){return e&&e.contains(t)}))}var Fq=10,Nq=10*Fq;function Vq(e){var t=e.prefixCls,n=e.onViewDateChange,r=e.generateConfig,o=e.viewDate,i=e.operationRef,l=e.onSelect,u=e.onPanelChange,c="".concat(t,"-decade-panel");i.current={onKeyDown:function(e){return Iq(e,{onLeftRight:function(e){l(r.addYear(o,e*Fq),"key")},onCtrlLeftRight:function(e){l(r.addYear(o,e*Nq),"key")},onUpDown:function(e){l(r.addYear(o,e*Fq*mq),"key")},onEnter:function(){u("year",o)}})}};var s=function(e){var t=r.addYear(o,e*Nq);n(t),u(null,t)};return a.createElement("div",{className:c},a.createElement(fq,lq({},e,{prefixCls:t,onPrevDecades:function(){s(-1)},onNextDecades:function(){s(1)}})),a.createElement(bq,lq({},e,{prefixCls:t,onSelect:function(e){l(e,"mouse"),u("year",e)}})))}var Lq=7;function Bq(e,t){return!e&&!t||!(!e||!t)&&void 0}function $q(e,t,n){var r=Bq(t,n);return"boolean"==typeof r?r:e.getYear(t)===e.getYear(n)}function zq(e,t){return Math.floor(e.getMonth(t)/3)+1}function Uq(e,t,n){var r=Bq(t,n);return"boolean"==typeof r?r:$q(e,t,n)&&zq(e,t)===zq(e,n)}function Hq(e,t,n){var r=Bq(t,n);return"boolean"==typeof r?r:$q(e,t,n)&&e.getMonth(t)===e.getMonth(n)}function qq(e,t,n){var r=Bq(t,n);return"boolean"==typeof r?r:e.getYear(t)===e.getYear(n)&&e.getMonth(t)===e.getMonth(n)&&e.getDate(t)===e.getDate(n)}function Wq(e,t,n,r){var o=Bq(n,r);return"boolean"==typeof o?o:$q(e,n,r)&&e.locale.getWeek(t,n)===e.locale.getWeek(t,r)}function Gq(e,t,n){return qq(e,t,n)&&function(e,t,n){var r=Bq(t,n);return"boolean"==typeof r?r:e.getHour(t)===e.getHour(n)&&e.getMinute(t)===e.getMinute(n)&&e.getSecond(t)===e.getSecond(n)}(e,t,n)}function Kq(e,t,n,r){return!!(t&&n&&r)&&(!qq(e,t,r)&&!qq(e,n,r)&&e.isAfter(r,t)&&e.isAfter(n,r))}function Yq(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;switch(t){case"year":return n.addYear(e,10*r);case"quarter":case"month":return n.addYear(e,r);default:return n.addMonth(e,r)}}function Xq(e,t){var n=t.generateConfig,r=t.locale,o=t.format;return"function"==typeof o?o(e):n.locale.format(r.locale,e,o)}function Jq(e,t){var n=t.generateConfig,r=t.locale,o=t.formatList;return e&&"function"!=typeof o[0]?n.locale.parse(r.locale,e,o):null}function Zq(e){var t=e.cellDate,n=e.mode,r=e.disabledDate,o=e.generateConfig;if(!r)return!1;var i=function(e,n,i){for(var a=n;a<=i;){var l=void 0;switch(e){case"date":if(l=o.setDate(t,a),!r(l))return!1;break;case"month":if(!Zq({cellDate:l=o.setMonth(t,a),mode:"month",generateConfig:o,disabledDate:r}))return!1;break;case"year":if(!Zq({cellDate:l=o.setYear(t,a),mode:"year",generateConfig:o,disabledDate:r}))return!1}a+=1}return!0};switch(n){case"date":case"week":return r(t);case"month":return i("date",1,o.getDate(o.getEndDate(t)));case"quarter":var a=3*Math.floor(o.getMonth(t)/3);return i("month",a,a+2);case"year":return i("month",0,11);case"decade":var l=o.getYear(t),u=Math.floor(l/Fq)*Fq;return i("year",u,u+Fq-1)}}function Qq(e){if(a.useContext(cq).hideHeader)return null;var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.value,i=e.format,l="".concat(t,"-header");return a.createElement(dq,{prefixCls:l},o?Xq(o,{locale:r,format:i,generateConfig:n}):" ")}function eW(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",r=String(e);r.length<t;)r="".concat(n).concat(e);return r}function tW(e){return null==e?[]:Array.isArray(e)?e:[e]}function nW(e){var t={};return Object.keys(e).forEach((function(n){("data-"===n.substr(0,5)||"aria-"===n.substr(0,5)||"role"===n||"name"===n)&&"data-__"!==n.substr(0,7)&&(t[n]=e[n])})),t}function rW(e,t){return e?e[t]:null}function oW(e,t,n){var r=[rW(e,0),rW(e,1)];return r[n]="function"==typeof t?t(r[n]):t,r[0]||r[1]?r:null}function iW(e){var t=e.prefixCls,n=e.units,r=e.onSelect,o=e.value,i=e.active,l=e.hideDisabledOptions,u="".concat(t,"-cell"),c=a.useContext(cq).open,s=Object(a.useRef)(null),d=Object(a.useRef)(new Map),f=Object(a.useRef)();return Object(a.useLayoutEffect)((function(){var e=d.current.get(o);e&&!1!==c&&jq(s.current,e.offsetTop,120)}),[o]),Object(a.useLayoutEffect)((function(){if(c){var e=d.current.get(o);e&&(f.current=function(e,t){var n;return function r(){Sq(e)?t():n=Oq((function(){r()}))}(),function(){Oq.cancel(n)}}(e,(function(){jq(s.current,e.offsetTop,0)})))}return function(){var e;null===(e=f.current)||void 0===e||e.call(f)}}),[c]),a.createElement("ul",{className:u$("".concat(t,"-column"),UH({},"".concat(t,"-column-active"),i)),ref:s,style:{position:"relative"}},n.map((function(e){var t;return l&&e.disabled?null:a.createElement("li",{key:e.value,ref:function(t){d.current.set(e.value,t)},className:u$(u,(t={},UH(t,"".concat(u,"-disabled"),e.disabled),UH(t,"".concat(u,"-selected"),o===e.value),t)),onClick:function(){e.disabled||r(e.value)}},a.createElement("div",{className:"".concat(u,"-inner")},e.label))})))}function aW(e,t){if(e.length!==t.length)return!0;for(var n=0;n<e.length;n+=1)if(e[n].disabled!==t[n].disabled)return!0;return!1}function lW(e,t,n,r){for(var o=[],i=n>=1?0|n:1,a=e;a<=t;a+=i)o.push({label:eW(a,2),value:a,disabled:(r||[]).includes(a)});return o}function uW(e){var t,n=e.generateConfig,r=e.prefixCls,o=e.operationRef,i=e.activeColumnIndex,l=e.value,u=e.showHour,c=e.showMinute,s=e.showSecond,d=e.use12Hours,f=e.hourStep,p=void 0===f?1:f,h=e.minuteStep,v=void 0===h?1:h,g=e.secondStep,m=void 0===g?1:g,y=e.disabledHours,b=e.disabledMinutes,w=e.disabledSeconds,_=e.disabledTime,k=e.hideDisabledOptions,C=e.onSelect,E=[],O="".concat(r,"-content"),S="".concat(r,"-time-panel"),x=l?n.getHour(l):-1,j=x,I=l?n.getMinute(l):-1,R=l?n.getSecond(l):-1,A=n.getNow(),D=sH(a.useMemo((function(){if(_){var e=_(A);return[e.disabledHours,e.disabledMinutes,e.disabledSeconds]}return[y,b,w]}),[y,b,w,_,A]),3),P=D[0],M=D[1],T=D[2],F=lW(0,23,p,P&&P()),N=NH((function(){return F}),F,aW);d&&(t=j>=12,j%=12);var V=sH(a.useMemo((function(){if(!d)return[!1,!1];var e=[!0,!0];return N.forEach((function(t){var n=t.disabled,r=t.value;n||(r>=12?e[1]=!1:e[0]=!1)})),e}),[d,N]),2),L=V[0],B=V[1],$=a.useMemo((function(){return d?N.filter(t?function(e){return e.value>=12}:function(e){return e.value<12}).map((function(e){var t=e.value%12,n=0===t?"12":eW(t,2);return qH(qH({},e),{},{label:n,value:t})})):N}),[d,t,N]),z=lW(0,59,v,M&&M(x)),U=lW(0,59,m,T&&T(x,I)),H=function(e){var t=e.value,n=e.generateConfig,r=e.disabledMinutes,o=e.disabledSeconds,i=e.minutes,a=e.seconds,l=e.use12Hours;return function(e,u,c,s){var d=t||n.getNow(),f=Math.max(0,u),p=Math.max(0,c),h=Math.max(0,s),v=r&&r(f);if(null!=v&&v.includes(p)){var g=i.find((function(e){return!v.includes(e.value)}));if(!g)return null;p=g.value}var m=o&&o(f,p);if(null!=m&&m.includes(h)){var y=a.find((function(e){return!m.includes(e.value)}));if(!y)return null;h=y.value}return pq(n,d,l&&e?f+12:f,p,h)}}({value:l,generateConfig:n,disabledMinutes:M,disabledSeconds:T,minutes:z,seconds:U,use12Hours:d});function q(e,t,n,r,o){!1!==e&&E.push({node:a.cloneElement(t,{prefixCls:S,value:n,active:i===E.length,onSelect:o,units:r,hideDisabledOptions:k}),onSelect:o,value:n,units:r})}o.current={onUpDown:function(e){var t=E[i];if(t)for(var n=t.units.findIndex((function(e){return e.value===t.value})),r=t.units.length,o=1;o<r;o+=1){var a=t.units[(n+e*o+r)%r];if(!0!==a.disabled){t.onSelect(a.value);break}}}},q(u,a.createElement(iW,{key:"hour"}),j,$,(function(e){C(H(t,e,I,R),"mouse")})),q(c,a.createElement(iW,{key:"minute"}),I,z,(function(e){C(H(t,j,e,R),"mouse")})),q(s,a.createElement(iW,{key:"second"}),R,U,(function(e){C(H(t,j,I,e),"mouse")}));var W=-1;return"boolean"==typeof t&&(W=t?1:0),q(!0===d,a.createElement(iW,{key:"12hours"}),W,[{label:"AM",value:0,disabled:L},{label:"PM",value:1,disabled:B}],(function(e){C(H(!!e,j,I,R),"mouse")})),a.createElement("div",{className:O},E.map((function(e){return e.node})))}var cW=function(e){return e.filter((function(e){return!1!==e})).length};function sW(e){var t=e.generateConfig,n=e.format,r=void 0===n?"HH:mm:ss":n,o=e.prefixCls,i=e.active,l=e.operationRef,u=e.showHour,c=e.showMinute,s=e.showSecond,d=e.use12Hours,f=void 0!==d&&d,p=e.onSelect,h=e.value,v="".concat(o,"-time-panel"),g=a.useRef(),m=sH(a.useState(-1),2),y=m[0],b=m[1],w=cW([u,c,s,f]);return l.current={onKeyDown:function(e){return Iq(e,{onLeftRight:function(e){b((y+e+w)%w)},onUpDown:function(e){-1===y?b(0):g.current&&g.current.onUpDown(e)},onEnter:function(){p(h||t.getNow(),"key"),b(-1)}})},onBlur:function(){b(-1)}},a.createElement("div",{className:u$(v,UH({},"".concat(v,"-active"),i))},a.createElement(Qq,lq({},e,{format:r,prefixCls:o})),a.createElement(uW,lq({},e,{prefixCls:o,activeColumnIndex:y,operationRef:g})))}var dW=a.createContext({});function fW(e){var t=e.cellPrefixCls,n=e.generateConfig,r=e.rangedValue,o=e.hoverRangedValue,i=e.isInView,a=e.isSameCell,l=e.offsetCell,u=e.today,c=e.value;return function(e){var s,d=l(e,-1),f=l(e,1),p=rW(r,0),h=rW(r,1),v=rW(o,0),g=rW(o,1),m=Kq(n,v,g,e);function y(e){return a(p,e)}function b(e){return a(h,e)}var w=a(v,e),_=a(g,e),k=(m||_)&&(!i(d)||b(d)),C=(m||w)&&(!i(f)||y(f));return UH(s={},"".concat(t,"-in-view"),i(e)),UH(s,"".concat(t,"-in-range"),Kq(n,p,h,e)),UH(s,"".concat(t,"-range-start"),y(e)),UH(s,"".concat(t,"-range-end"),b(e)),UH(s,"".concat(t,"-range-start-single"),y(e)&&!h),UH(s,"".concat(t,"-range-end-single"),b(e)&&!p),UH(s,"".concat(t,"-range-start-near-hover"),y(e)&&(a(d,v)||Kq(n,v,g,d))),UH(s,"".concat(t,"-range-end-near-hover"),b(e)&&(a(f,g)||Kq(n,v,g,f))),UH(s,"".concat(t,"-range-hover"),m),UH(s,"".concat(t,"-range-hover-start"),w),UH(s,"".concat(t,"-range-hover-end"),_),UH(s,"".concat(t,"-range-hover-edge-start"),k),UH(s,"".concat(t,"-range-hover-edge-end"),C),UH(s,"".concat(t,"-range-hover-edge-start-near-range"),k&&a(d,h)),UH(s,"".concat(t,"-range-hover-edge-end-near-range"),C&&a(f,p)),UH(s,"".concat(t,"-today"),a(u,e)),UH(s,"".concat(t,"-selected"),a(c,e)),s}}function pW(e){var t=e.prefixCls,n=e.generateConfig,r=e.prefixColumn,o=e.locale,i=e.rowCount,l=e.viewDate,u=e.value,c=e.dateRender,s=a.useContext(dW),d=s.rangedValue,f=s.hoverRangedValue,p=function(e,t,n){var r=t.locale.getWeekFirstDay(e),o=t.setDate(n,1),i=t.getWeekDay(o),a=t.addDate(o,r-i);return t.getMonth(a)===t.getMonth(n)&&t.getDate(a)>1&&(a=t.addDate(a,-7)),a}(o.locale,n,l),h="".concat(t,"-cell"),v=n.locale.getWeekFirstDay(o.locale),g=n.getNow(),m=[],y=o.shortWeekDays||(n.locale.getShortWeekDays?n.locale.getShortWeekDays(o.locale):[]);r&&m.push(a.createElement("th",{key:"empty","aria-label":"empty cell"}));for(var b=0;b<Lq;b+=1)m.push(a.createElement("th",{key:b},y[(b+v)%Lq]));var w=fW({cellPrefixCls:h,today:g,value:u,generateConfig:n,rangedValue:r?null:d,hoverRangedValue:r?null:f,isSameCell:function(e,t){return qq(n,e,t)},isInView:function(e){return Hq(n,e,l)},offsetCell:function(e,t){return n.addDate(e,t)}}),_=c?function(e){return c(e,g)}:void 0;return a.createElement(gq,lq({},e,{rowNum:i,colNum:Lq,baseDate:p,getCellNode:_,getCellText:n.getDate,getCellClassName:w,getCellDate:n.addDate,titleCell:function(e){return Xq(e,{locale:o,format:"YYYY-MM-DD",generateConfig:n})},headerCells:m}))}function hW(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.viewDate,i=e.onNextMonth,l=e.onPrevMonth,u=e.onNextYear,c=e.onPrevYear,s=e.onYearClick,d=e.onMonthClick;if(a.useContext(cq).hideHeader)return null;var f="".concat(t,"-header"),p=r.shortMonths||(n.locale.getShortMonths?n.locale.getShortMonths(r.locale):[]),h=n.getMonth(o),v=a.createElement("button",{type:"button",key:"year",onClick:s,tabIndex:-1,className:"".concat(t,"-year-btn")},Xq(o,{locale:r,format:r.yearFormat,generateConfig:n})),g=a.createElement("button",{type:"button",key:"month",onClick:d,tabIndex:-1,className:"".concat(t,"-month-btn")},r.monthFormat?Xq(o,{locale:r,format:r.monthFormat,generateConfig:n}):p[h]),m=r.monthBeforeYear?[g,v]:[v,g];return a.createElement(dq,lq({},e,{prefixCls:f,onSuperPrev:c,onPrev:l,onNext:i,onSuperNext:u}),m)}var vW=6;function gW(e){var t=e.prefixCls,n=e.panelName,r=void 0===n?"date":n,o=e.keyboardConfig,i=e.active,l=e.operationRef,u=e.generateConfig,c=e.value,s=e.viewDate,d=e.onViewDateChange,f=e.onPanelChange,p=e.onSelect,h="".concat(t,"-").concat(r,"-panel");l.current={onKeyDown:function(e){return Iq(e,qH({onLeftRight:function(e){p(u.addDate(c||s,e),"key")},onCtrlLeftRight:function(e){p(u.addYear(c||s,e),"key")},onUpDown:function(e){p(u.addDate(c||s,e*Lq),"key")},onPageUpDown:function(e){p(u.addMonth(c||s,e),"key")}},o))}};var v=function(e){var t=u.addYear(s,e);d(t),f(null,t)},g=function(e){var t=u.addMonth(s,e);d(t),f(null,t)};return a.createElement("div",{className:u$(h,UH({},"".concat(h,"-active"),i))},a.createElement(hW,lq({},e,{prefixCls:t,value:c,viewDate:s,onPrevYear:function(){v(-1)},onNextYear:function(){v(1)},onPrevMonth:function(){g(-1)},onNextMonth:function(){g(1)},onMonthClick:function(){f("month",s)},onYearClick:function(){f("year",s)}})),a.createElement(pW,lq({},e,{onSelect:function(e){return p(e,"mouse")},prefixCls:t,value:c,viewDate:s,rowCount:vW})))}var mW=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}("date","time");function yW(e){var t=e.prefixCls,n=e.operationRef,r=e.generateConfig,o=e.value,i=e.defaultValue,l=e.disabledTime,u=e.showTime,c=e.onSelect,s="".concat(t,"-datetime-panel"),d=sH(a.useState(null),2),f=d[0],p=d[1],h=a.useRef({}),v=a.useRef({}),g="object"===yH(u)?qH({},u):{};var m=function(e){v.current.onBlur&&v.current.onBlur(e),p(null)};n.current={onKeyDown:function(e){if(e.which===uq.TAB){var t=function(e){var t=mW.indexOf(f)+e;return mW[t]||null}(e.shiftKey?-1:1);return p(t),t&&e.preventDefault(),!0}if(f){var n="date"===f?h:v;return n.current&&n.current.onKeyDown&&n.current.onKeyDown(e),!0}return!![uq.LEFT,uq.RIGHT,uq.UP,uq.DOWN].includes(e.which)&&(p("date"),!0)},onBlur:m,onClose:m};var y=function(e,t){var n=e;"date"===t&&!o&&g.defaultValue?(n=r.setHour(n,r.getHour(g.defaultValue)),n=r.setMinute(n,r.getMinute(g.defaultValue)),n=r.setSecond(n,r.getSecond(g.defaultValue))):"time"===t&&!o&&i&&(n=r.setYear(n,r.getYear(i)),n=r.setMonth(n,r.getMonth(i)),n=r.setDate(n,r.getDate(i))),c&&c(n,"mouse")},b=l?l(o||null):{};return a.createElement("div",{className:u$(s,UH({},"".concat(s,"-active"),f))},a.createElement(gW,lq({},e,{operationRef:h,active:"date"===f,onSelect:function(e){y(hq(r,e,o||"object"!==yH(u)?null:u.defaultValue),"date")}})),a.createElement(sW,lq({},e,{format:void 0},g,b,{disabledTime:null,defaultValue:void 0,operationRef:v,active:"time"===f,onSelect:function(e){y(e,"time")}})))}function bW(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.value,i="".concat(t,"-cell"),l="".concat(t,"-week-panel-row");return a.createElement(gW,lq({},e,{panelName:"week",prefixColumn:function(e){return a.createElement("td",{key:"week",className:u$(i,"".concat(i,"-week"))},n.locale.getWeek(r.locale,e))},rowClassName:function(e){return u$(l,UH({},"".concat(l,"-selected"),Wq(n,r.locale,o,e)))},keyboardConfig:{onLeftRight:null}}))}function wW(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.viewDate,i=e.onNextYear,l=e.onPrevYear,u=e.onYearClick;if(a.useContext(cq).hideHeader)return null;var c="".concat(t,"-header");return a.createElement(dq,lq({},e,{prefixCls:c,onSuperPrev:l,onSuperNext:i}),a.createElement("button",{type:"button",onClick:u,className:"".concat(t,"-year-btn")},Xq(o,{locale:r,format:r.yearFormat,generateConfig:n})))}var _W=3,kW=4;function CW(e){var t=e.prefixCls,n=e.locale,r=e.value,o=e.viewDate,i=e.generateConfig,l=e.monthCellRender,u=a.useContext(dW),c=u.rangedValue,s=u.hoverRangedValue,d=fW({cellPrefixCls:"".concat(t,"-cell"),value:r,generateConfig:i,rangedValue:c,hoverRangedValue:s,isSameCell:function(e,t){return Hq(i,e,t)},isInView:function(){return!0},offsetCell:function(e,t){return i.addMonth(e,t)}}),f=n.shortMonths||(i.locale.getShortMonths?i.locale.getShortMonths(n.locale):[]),p=i.setMonth(o,0),h=l?function(e){return l(e,n)}:void 0;return a.createElement(gq,lq({},e,{rowNum:kW,colNum:_W,baseDate:p,getCellNode:h,getCellText:function(e){return n.monthFormat?Xq(e,{locale:n,format:n.monthFormat,generateConfig:i}):f[i.getMonth(e)]},getCellClassName:d,getCellDate:i.addMonth,titleCell:function(e){return Xq(e,{locale:n,format:"YYYY-MM",generateConfig:i})}}))}function EW(e){var t=e.prefixCls,n=e.operationRef,r=e.onViewDateChange,o=e.generateConfig,i=e.value,l=e.viewDate,u=e.onPanelChange,c=e.onSelect,s="".concat(t,"-month-panel");n.current={onKeyDown:function(e){return Iq(e,{onLeftRight:function(e){c(o.addMonth(i||l,e),"key")},onCtrlLeftRight:function(e){c(o.addYear(i||l,e),"key")},onUpDown:function(e){c(o.addMonth(i||l,e*_W),"key")},onEnter:function(){u("date",i||l)}})}};var d=function(e){var t=o.addYear(l,e);r(t),u(null,t)};return a.createElement("div",{className:s},a.createElement(wW,lq({},e,{prefixCls:t,onPrevYear:function(){d(-1)},onNextYear:function(){d(1)},onYearClick:function(){u("year",l)}})),a.createElement(CW,lq({},e,{prefixCls:t,onSelect:function(e){c(e,"mouse"),u("date",e)}})))}function OW(e){var t=e.prefixCls,n=e.generateConfig,r=e.locale,o=e.viewDate,i=e.onNextYear,l=e.onPrevYear,u=e.onYearClick;if(a.useContext(cq).hideHeader)return null;var c="".concat(t,"-header");return a.createElement(dq,lq({},e,{prefixCls:c,onSuperPrev:l,onSuperNext:i}),a.createElement("button",{type:"button",onClick:u,className:"".concat(t,"-year-btn")},Xq(o,{locale:r,format:r.yearFormat,generateConfig:n})))}var SW=4,xW=1;function jW(e){var t=e.prefixCls,n=e.locale,r=e.value,o=e.viewDate,i=e.generateConfig,l=a.useContext(dW),u=l.rangedValue,c=l.hoverRangedValue,s=fW({cellPrefixCls:"".concat(t,"-cell"),value:r,generateConfig:i,rangedValue:u,hoverRangedValue:c,isSameCell:function(e,t){return Uq(i,e,t)},isInView:function(){return!0},offsetCell:function(e,t){return i.addMonth(e,3*t)}}),d=i.setDate(i.setMonth(o,0),1);return a.createElement(gq,lq({},e,{rowNum:xW,colNum:SW,baseDate:d,getCellText:function(e){return Xq(e,{locale:n,format:n.quarterFormat||"[Q]Q",generateConfig:i})},getCellClassName:s,getCellDate:function(e,t){return i.addMonth(e,3*t)},titleCell:function(e){return Xq(e,{locale:n,format:"YYYY-[Q]Q",generateConfig:i})}}))}function IW(e){var t=e.prefixCls,n=e.operationRef,r=e.onViewDateChange,o=e.generateConfig,i=e.value,l=e.viewDate,u=e.onPanelChange,c=e.onSelect,s="".concat(t,"-quarter-panel");n.current={onKeyDown:function(e){return Iq(e,{onLeftRight:function(e){c(o.addMonth(i||l,3*e),"key")},onCtrlLeftRight:function(e){c(o.addYear(i||l,e),"key")},onUpDown:function(e){c(o.addYear(i||l,e),"key")}})}};var d=function(e){var t=o.addYear(l,e);r(t),u(null,t)};return a.createElement("div",{className:s},a.createElement(OW,lq({},e,{prefixCls:t,onPrevYear:function(){d(-1)},onNextYear:function(){d(1)},onYearClick:function(){u("year",l)}})),a.createElement(jW,lq({},e,{prefixCls:t,onSelect:function(e){c(e,"mouse")}})))}function RW(e){var t=e.prefixCls,n=e.generateConfig,r=e.viewDate,o=e.onPrevDecade,i=e.onNextDecade,l=e.onDecadeClick;if(a.useContext(cq).hideHeader)return null;var u="".concat(t,"-header"),c=n.getYear(r),s=Math.floor(c/MW)*MW,d=s+MW-1;return a.createElement(dq,lq({},e,{prefixCls:u,onSuperPrev:o,onSuperNext:i}),a.createElement("button",{type:"button",onClick:l,className:"".concat(t,"-decade-btn")},s,"-",d))}var AW=3,DW=4;function PW(e){var t=e.prefixCls,n=e.value,r=e.viewDate,o=e.locale,i=e.generateConfig,l=a.useContext(dW),u=l.rangedValue,c=l.hoverRangedValue,s="".concat(t,"-cell"),d=i.getYear(r),f=Math.floor(d/MW)*MW,p=f+MW-1,h=i.setYear(r,f-Math.ceil((AW*DW-MW)/2)),v=fW({cellPrefixCls:s,value:n,generateConfig:i,rangedValue:u,hoverRangedValue:c,isSameCell:function(e,t){return $q(i,e,t)},isInView:function(e){var t=i.getYear(e);return f<=t&&t<=p},offsetCell:function(e,t){return i.addYear(e,t)}});return a.createElement(gq,lq({},e,{rowNum:DW,colNum:AW,baseDate:h,getCellText:i.getYear,getCellClassName:v,getCellDate:i.addYear,titleCell:function(e){return Xq(e,{locale:o,format:"YYYY",generateConfig:i})}}))}var MW=10;function TW(e){var t=e.prefixCls,n=e.operationRef,r=e.onViewDateChange,o=e.generateConfig,i=e.value,l=e.viewDate,u=e.sourceMode,c=e.onSelect,s=e.onPanelChange,d="".concat(t,"-year-panel");n.current={onKeyDown:function(e){return Iq(e,{onLeftRight:function(e){c(o.addYear(i||l,e),"key")},onCtrlLeftRight:function(e){c(o.addYear(i||l,e*MW),"key")},onUpDown:function(e){c(o.addYear(i||l,e*AW),"key")},onEnter:function(){s("date"===u?"date":"month",i||l)}})}};var f=function(e){var t=o.addYear(l,10*e);r(t),s(null,t)};return a.createElement("div",{className:d},a.createElement(RW,lq({},e,{prefixCls:t,onPrevDecade:function(){f(-1)},onNextDecade:function(){f(1)},onDecadeClick:function(){s("decade",l)}})),a.createElement(PW,lq({},e,{prefixCls:t,onSelect:function(e){s("date"===u?"date":"month",e),c(e,"mouse")}})))}function FW(e,t,n){return n?a.createElement("div",{className:"".concat(e,"-footer-extra")},n(t)):null}function NW(e){var t,n,r=e.prefixCls,o=e.rangeList,i=void 0===o?[]:o,l=e.components,u=void 0===l?{}:l,c=e.needConfirmButton,s=e.onNow,d=e.onOk,f=e.okDisabled,p=e.showNow,h=e.locale;if(i.length){var v=u.rangeItem||"span";t=a.createElement(a.Fragment,null,i.map((function(e){var t=e.label,n=e.onClick,o=e.onMouseEnter,i=e.onMouseLeave;return a.createElement("li",{key:t,className:"".concat(r,"-preset")},a.createElement(v,{onClick:n,onMouseEnter:o,onMouseLeave:i},t))})))}if(c){var g=u.button||"button";s&&!t&&!1!==p&&(t=a.createElement("li",{className:"".concat(r,"-now")},a.createElement("a",{className:"".concat(r,"-now-btn"),onClick:s},h.now))),n=c&&a.createElement("li",{className:"".concat(r,"-ok")},a.createElement(g,{disabled:f,onClick:d},h.ok))}return t||n?a.createElement("ul",{className:"".concat(r,"-ranges")},t,n):null}var VW=["date","month"];function LW(e){var t,n=e.prefixCls,r=void 0===n?"rc-picker":n,o=e.className,i=e.style,l=e.locale,u=e.generateConfig,c=e.value,s=e.defaultValue,d=e.pickerValue,f=e.defaultPickerValue,p=e.disabledDate,h=e.mode,v=e.picker,g=void 0===v?"date":v,m=e.tabIndex,y=void 0===m?0:m,b=e.showNow,w=e.showTime,_=e.showToday,k=e.renderExtraFooter,C=e.hideHeader,E=e.onSelect,O=e.onChange,S=e.onPanelChange,x=e.onMouseDown,j=e.onPickerValueChange,I=e.onOk,R=e.components,A=e.direction,D=e.hourStep,P=void 0===D?1:D,M=e.minuteStep,T=void 0===M?1:M,F=e.secondStep,N=void 0===F?1:F,V="date"===g&&!!w||"time"===g,L=24%P==0,B=60%T==0,$=60%N==0,z=a.useContext(cq),U=z.operationRef,H=z.panelRef,q=z.onSelect,W=z.hideRanges,G=z.defaultOpenValue,K=a.useContext(dW),Y=K.inRange,X=K.panelPosition,J=K.rangedValue,Z=K.hoverRangedValue,Q=a.useRef({}),ee=a.useRef(!0),te=sH(mH(null,{value:c,defaultValue:s,postState:function(e){return!e&&G&&"time"===g?G:e}}),2),ne=te[0],re=te[1],oe=sH(mH(null,{value:d,defaultValue:f||ne,postState:function(e){var t=u.getNow();if(!e)return t;if(!ne&&w){var n="object"===yH(w)?w.defaultValue:s;return hq(u,Array.isArray(e)?e[0]:e,n||t)}return Array.isArray(e)?e[0]:e}}),2),ie=oe[0],ae=oe[1],le=function(e){ae(e),j&&j(e)},ue=function(e){var t=Mq[g];return t?t(e):e},ce=sH(mH((function(){return"time"===g?"time":ue("date")}),{value:h}),2),se=ce[0],de=ce[1];a.useEffect((function(){de(g)}),[g]);var fe=sH(a.useState((function(){return se})),2),pe=fe[0],he=fe[1],ve=function(e,t){(se===g||arguments.length>2&&void 0!==arguments[2]&&arguments[2])&&(re(e),E&&E(e),q&&q(e,t),O&&!Gq(u,e,ne)&&(null==p||!p(e))&&O(e))},ge=function(e){if(Q.current&&Q.current.onKeyDown){var t=!0,n=e.which;if([uq.LEFT,uq.RIGHT,uq.UP,uq.DOWN,uq.PAGE_UP,uq.PAGE_DOWN,uq.ENTER].includes(n)&&(e.preventDefault(),n!==uq.ENTER&&0===y&&(t=function(e){if(VW.includes(se)){var t,n,r="date"===se;switch(n=e===uq.PAGE_UP||e===uq.PAGE_DOWN?r?u.addMonth:u.addYear:r?u.addDate:u.addMonth,e){case uq.LEFT:case uq.PAGE_UP:t=n(ie,-1);break;case uq.RIGHT:case uq.PAGE_DOWN:t=n(ie,1);break;case uq.UP:case uq.DOWN:t=n(ie,Number("".concat(e===uq.UP?"-":"").concat(r?Lq:_W)))}if(t)return!(null!=p&&p(t))}return!0}(n))),t)return Q.current.onKeyDown(e)}return JH(!1,"Panel not correct handle keyDown event. Please help to fire issue about this."),!1};U&&"right"!==X&&(U.current={onKeyDown:ge,onClose:function(){Q.current&&Q.current.onClose&&Q.current.onClose()}}),a.useEffect((function(){c&&!ee.current&&ae(c)}),[c]),a.useEffect((function(){ee.current=!1}),[]);var me,ye=qH(qH({},e),{},{operationRef:Q,prefixCls:r,viewDate:ie,value:ne,onViewDateChange:le,sourceMode:pe,onPanelChange:function(e,t){var n=ue(e||se);he(se),de(n),S&&(se!==n||Gq(u,ie,ie))&&S(t,n)},disabledDate:p});switch(delete ye.onChange,delete ye.onSelect,se){case"decade":me=a.createElement(Vq,lq({},ye,{onSelect:function(e,t){le(e),ve(e,t)}}));break;case"year":me=a.createElement(TW,lq({},ye,{onSelect:function(e,t){le(e),ve(e,t)}}));break;case"month":me=a.createElement(EW,lq({},ye,{onSelect:function(e,t){le(e),ve(e,t)}}));break;case"quarter":me=a.createElement(IW,lq({},ye,{onSelect:function(e,t){le(e),ve(e,t)}}));break;case"week":me=a.createElement(bW,lq({},ye,{onSelect:function(e,t){le(e),ve(e,t)}}));break;case"time":delete ye.showTime,me=a.createElement(sW,lq({},ye,"object"===yH(w)?w:null,{onSelect:function(e,t){le(e),ve(e,t)}}));break;default:me=w?a.createElement(yW,lq({},ye,{onSelect:function(e,t){le(e),ve(e,t)}})):a.createElement(gW,lq({},ye,{onSelect:function(e,t){le(e),ve(e,t)}}))}var be,we,_e;if(W||(be=FW(r,se,k),we=NW({prefixCls:r,components:R,needConfirmButton:V,okDisabled:!ne||p&&p(ne),locale:l,showNow:b,onNow:V&&function(){var e=u.getNow(),t=function(e,t,n,r,o,i){var a=Math.floor(e/r)*r;if(a<e)return[a,60-o,60-i];var l=Math.floor(t/o)*o;return l<t?[a,l,60-i]:[a,l,Math.floor(n/i)*i]}(u.getHour(e),u.getMinute(e),u.getSecond(e),L?P:1,B?T:1,$?N:1),n=pq(u,e,t[0],t[1],t[2]);ve(n,"submit")},onOk:function(){ne&&(ve(ne,"submit",!0),I&&I(ne))}})),_&&"date"===se&&"date"===g&&!w){var ke=u.getNow(),Ce="".concat(r,"-today-btn"),Ee=p&&p(ke);_e=a.createElement("a",{className:u$(Ce,Ee&&"".concat(Ce,"-disabled")),"aria-disabled":Ee,onClick:function(){Ee||ve(ke,"mouse",!0)}},l.today)}return a.createElement(cq.Provider,{value:qH(qH({},z),{},{mode:se,hideHeader:"hideHeader"in e?C:z.hideHeader,hidePrevBtn:Y&&"right"===X,hideNextBtn:Y&&"left"===X})},a.createElement("div",{tabIndex:y,className:u$("".concat(r,"-panel"),o,(t={},UH(t,"".concat(r,"-panel-has-range"),J&&J[0]&&J[1]),UH(t,"".concat(r,"-panel-has-range-hover"),Z&&Z[0]&&Z[1]),UH(t,"".concat(r,"-panel-rtl"),"rtl"===A),t)),style:i,onKeyDown:ge,onBlur:function(e){Q.current&&Q.current.onBlur&&Q.current.onBlur(e)},onMouseDown:x,ref:H},me,be||we||_e?a.createElement("div",{className:"".concat(r,"-footer")},be,we,_e):null))}function BW(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}function $W(e){return e instanceof HTMLElement||e instanceof SVGElement}function zW(e){var t,n=function(e){return e&&"object"===yH(e)&&$W(e.nativeElement)?e.nativeElement:$W(e)?e:null}(e);return n||(e instanceof l.a.Component?null===(t=c.a.findDOMNode)||void 0===t?void 0:t.call(c.a,e):null)}function UW(e,t,n,r){var o=c.a.unstable_batchedUpdates?function(e){c.a.unstable_batchedUpdates(n,e)}:n;return null!=e&&e.addEventListener&&e.addEventListener(t,o,r),{remove:function(){null!=e&&e.removeEventListener&&e.removeEventListener(t,o,r)}}}var HW=Object(a.forwardRef)((function(e,t){var n=e.didUpdate,r=e.getContainer,o=e.children,i=Object(a.useRef)(),l=Object(a.useRef)();Object(a.useImperativeHandle)(t,(function(){return{}}));var u=Object(a.useRef)(!1);return!u.current&&dH()&&(l.current=r(),i.current=l.current.parentNode,u.current=!0),Object(a.useEffect)((function(){null==n||n(e)})),Object(a.useEffect)((function(){return null===l.current.parentNode&&null!==i.current&&i.current.appendChild(l.current),function(){var e;null===(e=l.current)||void 0===e||null===(e=e.parentNode)||void 0===e||e.removeChild(l.current)}}),[]),l.current?c.a.createPortal(o,l.current):null}));function qW(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function WW(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const GW=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==e?void 0:e.substr(0,4))};var KW=a.createContext({}),YW=function(e){nq(n,e);var t=aq(n);function n(){return ZH(this,n),t.apply(this,arguments)}return eq(n,[{key:"render",value:function(){return this.props.children}}]),n}(a.Component),XW="none",JW="appear",ZW="enter",QW="leave",eG="none",tG="prepare",nG="start",rG="active",oG="end",iG="prepared";function aG(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var lG=function(e,t){var n={animationend:aG("Animation","AnimationEnd"),transitionend:aG("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(dH(),typeof window<"u"?window:{}),uG={};if(dH()){var cG=document.createElement("div");uG=cG.style}var sG={};function dG(e){if(sG[e])return sG[e];var t=lG[e];if(t)for(var n=Object.keys(t),r=n.length,o=0;o<r;o+=1){var i=n[o];if(Object.prototype.hasOwnProperty.call(t,i)&&i in uG)return sG[e]=t[i],sG[e]}return""}var fG=dG("animationend"),pG=dG("transitionend"),hG=!(!fG||!pG),vG=fG||"animationend",gG=pG||"transitionend";function mG(e,t){if(!e)return null;if("object"===yH(e)){var n=t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));return e[n]}return"".concat(e,"-").concat(t)}const yG=function(e){var t=Object(a.useRef)();function n(t){t&&(t.removeEventListener(gG,e),t.removeEventListener(vG,e))}return a.useEffect((function(){return function(){n(t.current)}}),[]),[function(r){t.current&&t.current!==r&&n(t.current),r&&r!==t.current&&(r.addEventListener(gG,e),r.addEventListener(vG,e),t.current=r)},n]};var bG=dH()?a.useLayoutEffect:a.useEffect;var wG=[tG,nG,rG,oG],_G=[tG,iG],kG=!1,CG=!0;function EG(e){return e===rG||e===oG}const OG=function(e,t,n){var r=sH(vH(eG),2),o=r[0],i=r[1],l=function(){var e=a.useRef(null);function t(){Oq.cancel(e.current)}return a.useEffect((function(){return function(){t()}}),[]),[function n(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var i=Oq((function(){o<=1?r({isCanceled:function(){return i!==e.current}}):n(r,o-1)}));e.current=i},t]}(),u=sH(l,2),c=u[0],s=u[1];var d=t?_G:wG;return bG((function(){if(o!==eG&&o!==oG){var e=d.indexOf(o),t=d[e+1],r=n(o);r===kG?i(t,!0):t&&c((function(e){function n(){e.isCanceled()||i(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,o]),a.useEffect((function(){return function(){s()}}),[]),[function(){i(tG,!0)},o]};const SG=function(e){var t=e;"object"===yH(e)&&(t=e.transitionSupport);var n=a.forwardRef((function(e,n){var r=e.visible,o=void 0===r||r,i=e.removeOnLeave,l=void 0===i||i,u=e.forceRender,c=e.children,s=e.motionName,d=e.leavedClassName,f=e.eventProps,p=function(e,n){return!(!e.motionName||!t||!1===n)}(e,a.useContext(KW).motion),h=Object(a.useRef)(),v=Object(a.useRef)();var g=function(e,t,n,r){var o=r.motionEnter,i=void 0===o||o,l=r.motionAppear,u=void 0===l||l,c=r.motionLeave,s=void 0===c||c,d=r.motionDeadline,f=r.motionLeaveImmediately,p=r.onAppearPrepare,h=r.onEnterPrepare,v=r.onLeavePrepare,g=r.onAppearStart,m=r.onEnterStart,y=r.onLeaveStart,b=r.onAppearActive,w=r.onEnterActive,_=r.onLeaveActive,k=r.onAppearEnd,C=r.onEnterEnd,E=r.onLeaveEnd,O=r.onVisibleChanged,S=sH(vH(),2),x=S[0],j=S[1],I=sH(vH(XW),2),R=I[0],A=I[1],D=sH(vH(null),2),P=D[0],M=D[1],T=Object(a.useRef)(!1),F=Object(a.useRef)(null);function N(){return n()}var V=Object(a.useRef)(!1);function L(){A(XW,!0),M(null,!0)}var B=lH((function(e){if(R!==XW){var t=N();if(!e||e.deadline||e.target===t){var n,r=V.current;R===JW&&r?n=null==k?void 0:k(t,e):R===ZW&&r?n=null==C?void 0:C(t,e):R===QW&&r&&(n=null==E?void 0:E(t,e)),r&&!1!==n&&L()}}})),$=sH(yG(B),1)[0],z=function(e){switch(e){case JW:return UH(UH(UH({},tG,p),nG,g),rG,b);case ZW:return UH(UH(UH({},tG,h),nG,m),rG,w);case QW:return UH(UH(UH({},tG,v),nG,y),rG,_);default:return{}}},U=a.useMemo((function(){return z(R)}),[R]),H=sH(OG(R,!e,(function(e){if(e===tG){var t=U[tG];return t?t(N()):kG}var n;return W in U&&M((null===(n=U[W])||void 0===n?void 0:n.call(U,N(),null))||null),W===rG&&R!==XW&&($(N()),d>0&&(clearTimeout(F.current),F.current=setTimeout((function(){B({deadline:!0})}),d))),W===iG&&L(),CG})),2),q=H[0],W=H[1],G=EG(W);V.current=G,bG((function(){j(t);var n,r=T.current;T.current=!0,!r&&t&&u&&(n=JW),r&&t&&i&&(n=ZW),(r&&!t&&s||!r&&f&&!t&&s)&&(n=QW);var o=z(n);n&&(e||o[tG])?(A(n),q()):A(XW)}),[t]),Object(a.useEffect)((function(){(R===JW&&!u||R===ZW&&!i||R===QW&&!s)&&A(XW)}),[u,i,s]),Object(a.useEffect)((function(){return function(){T.current=!1,clearTimeout(F.current)}}),[]);var K=a.useRef(!1);Object(a.useEffect)((function(){x&&(K.current=!0),void 0!==x&&R===XW&&((K.current||x)&&(null==O||O(x)),K.current=!0)}),[x,R]);var Y=P;return U[tG]&&W===nG&&(Y=qH({transition:"none"},Y)),[R,W,Y,null!=x?x:t]}(p,o,(function(){try{return h.current instanceof HTMLElement?h.current:zW(v.current)}catch{return null}}),e),m=sH(g,4),y=m[0],b=m[1],w=m[2],_=m[3],k=a.useRef(_);_&&(k.current=!0);var C,E=a.useCallback((function(e){h.current=e,VH(n,e)}),[n]),O=qH(qH({},f),{},{visible:o});if(c)if(y===XW)C=_?c(qH({},O),E):!l&&k.current&&d?c(qH(qH({},O),{},{className:d}),E):u||!l&&!d?c(qH(qH({},O),{},{style:{display:"none"}}),E):null;else{var S;b===tG?S="prepare":EG(b)?S="active":b===nG&&(S="start");var x=mG(s,"".concat(y,"-").concat(S));C=c(qH(qH({},O),{},{className:u$(mG(s,y),UH(UH({},x,x&&S),s,"string"==typeof s)),style:w}),E)}else C=null;a.isValidElement(C)&&$H(C)&&(C.ref||(C=a.cloneElement(C,{ref:E})));return a.createElement(YW,{ref:v},C)}));return n.displayName="CSSMotion",n}(hG);var xG="add",jG="keep",IG="remove",RG="removed";function AG(e){var t;return qH(qH({},t=e&&"object"===yH(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function DG(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(AG)}var PG=["component","children","onVisibleChanged","onAllRemoved"],MG=["status"],TG=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function FG(e){var t=e.prefixCls,n=e.motion,r=e.animation,o=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:o?{motionName:o}:null)}function NG(e){var t=e.prefixCls,n=e.visible,r=e.zIndex,o=e.mask,i=e.maskMotion,l=e.maskAnimation,u=e.maskTransitionName;if(!o)return null;var c={};return(i||u||l)&&(c=qH({motionAppear:!0},FG({motion:i,prefixCls:t,transitionName:u,animation:l}))),a.createElement(SG,lq({},c,{visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return a.createElement("div",{style:{zIndex:r},className:u$("".concat(t,"-mask"),n)})}))}function VG(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LG(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VG(Object(n),!0).forEach((function(t){$G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VG(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BG(e){return(BG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:SG,n=function(e){nq(r,e);var n=aq(r);function r(){var e;ZH(this,r);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return UH(iq(e=n.call.apply(n,[this].concat(o))),"state",{keyEntities:[]}),UH(iq(e),"removeKey",(function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:qH(qH({},e),{},{status:RG})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==RG})).length})),e}return eq(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,o=r.component,i=r.children,l=r.onVisibleChanged,u=r.onAllRemoved,c=WW(r,PG),s=o||a.Fragment,d={};return TG.forEach((function(e){d[e]=c[e],delete c[e]})),delete c.keys,a.createElement(s,c,n.map((function(n,r){var o=n.status,c=WW(n,MG),s=o===xG||o===jG;return a.createElement(t,lq({},d,{key:c.key,visible:s,eventProps:c,onVisibleChanged:function(t){(null==l||l(t,{key:c.key}),t)||0===e.removeKey(c.key)&&u&&u()}}),(function(e,t){return i(qH(qH({},e),{},{index:r}),t)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,o=DG(n),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,o=t.length,i=DG(e),a=DG(t);i.forEach((function(e){for(var t=!1,i=r;i<o;i+=1){var l=a[i];if(l.key===e.key){r<i&&(n=n.concat(a.slice(r,i).map((function(e){return qH(qH({},e),{},{status:xG})}))),r=i),n.push(qH(qH({},l),{},{status:jG})),r+=1,t=!0;break}}t||n.push(qH(qH({},e),{},{status:IG}))})),r<o&&(n=n.concat(a.slice(r).map((function(e){return qH(qH({},e),{},{status:xG})}))));var l={};return n.forEach((function(e){var t=e.key;l[t]=(l[t]||0)+1})),Object.keys(l).filter((function(e){return l[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==IG}))).forEach((function(t){t.key===e&&(t.status=jG)}))})),n}(r,o);return{keyEntities:i.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!(t&&t.status===RG&&e.status===IG)}))}}}]),r}(a.Component);UH(n,"defaultProps",{component:"div"})}(hG);var zG,UG={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function HG(){if(void 0!==zG)return zG;zG="";var e=document.createElement("p").style;for(var t in UG)t+"Transform"in e&&(zG=t);return zG}function qG(){return HG()?"".concat(HG(),"TransitionProperty"):"transitionProperty"}function WG(){return HG()?"".concat(HG(),"Transform"):"transform"}function GG(e,t){var n=qG();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function KG(e,t){var n=WG();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var YG,XG=/matrix\((.*)\)/,JG=/matrix3d\((.*)\)/;function ZG(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function QG(e,t,n){var r=n;if("object"!==BG(t))return typeof r<"u"?("number"==typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):YG(e,t);for(var o in t)t.hasOwnProperty(o)&&QG(e,o,t[o])}function eK(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!=typeof n){var o=e.document;"number"!=typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}function tK(e){return eK(e)}function nK(e){return eK(e,!0)}function rK(e){var t=function(e){var t,n,r,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),{left:n-=a.clientLeft||i.clientLeft||0,top:r-=a.clientTop||i.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=tK(r),t.top+=nK(r),t}function oK(e){return null!=e&&e==e.window}function iK(e){return oK(e)?e.document:9===e.nodeType?e:e.ownerDocument}var aK=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),lK=/^(top|right|bottom|left)$/,uK="currentStyle",cK="runtimeStyle",sK="left";function dK(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function fK(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function pK(e,t,n){"static"===QG(e,"position")&&(e.style.position="relative");var r=-999,o=-999,i=dK("left",n),a=dK("top",n),l=fK(i),u=fK(a);"left"!==i&&(r=999),"top"!==a&&(o=999);var c="",s=rK(e);("left"in t||"top"in t)&&(c=function(e){return e.style.transitionProperty||e.style[qG()]}(e)||"",GG(e,"none")),"left"in t&&(e.style[l]="",e.style[i]="".concat(r,"px")),"top"in t&&(e.style[u]="",e.style[a]="".concat(o,"px")),ZG(e);var d=rK(e),f={};for(var p in t)if(t.hasOwnProperty(p)){var h=dK(p,n),v="left"===p?r:o,g=s[p]-d[p];f[h]=h===p?v+g:v-g}QG(e,f),ZG(e),("left"in t||"top"in t)&&GG(e,c);var m={};for(var y in t)if(t.hasOwnProperty(y)){var b=dK(y,n),w=t[y]-s[y];m[b]=y===b?f[b]+w:f[b]-w}QG(e,m)}function hK(e,t){var n=rK(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(WG());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),o={x:r.x,y:r.y};"left"in t&&(o.x=r.x+t.left-n.left),"top"in t&&(o.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(WG());if(r&&"none"!==r){var o,i=r.match(XG);i?((o=(i=i[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,o[5]=t.y,KG(e,"matrix(".concat(o.join(","),")"))):((o=r.match(JG)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,o[13]=t.y,KG(e,"matrix3d(".concat(o.join(","),")")))}else KG(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,o)}function vK(e,t){for(var n=0;n<e.length;n++)t(e[n])}function gK(e){return"border-box"===YG(e,"boxSizing")}typeof window<"u"&&(YG=window.getComputedStyle?function(e,t,n){var r=n,o="",i=iK(e);return(r=r||i.defaultView.getComputedStyle(e,null))&&(o=r.getPropertyValue(t)||r[t]),o}:function(e,t){var n=e[uK]&&e[uK][t];if(aK.test(n)&&!lK.test(t)){var r=e.style,o=r[sK],i=e[cK][sK];e[cK][sK]=e[uK][sK],r[sK]="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r[sK]=o,e[cK][sK]=i}return""===n?"auto":n});var mK=["margin","border","padding"],yK=-1,bK=2,wK=1;function _K(e,t,n){var r,o,i,a=0;for(o=0;o<t.length;o++)if(r=t[o])for(i=0;i<n.length;i++){var l=void 0;l="border"===r?"".concat(r).concat(n[i],"Width"):r+n[i],a+=parseFloat(YG(e,l))||0}return a}var kK={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function CK(e,t,n){var r=n;if(oK(e))return"width"===t?kK.viewportWidth(e):kK.viewportHeight(e);if(9===e.nodeType)return"width"===t?kK.docWidth(e):kK.docHeight(e);var o="width"===t?["Left","Right"]:["Top","Bottom"],i=Math.floor("width"===t?e.getBoundingClientRect().width:e.getBoundingClientRect().height),a=gK(e),l=0;(null==i||i<=0)&&(i=void 0,(null==(l=YG(e,t))||Number(l)<0)&&(l=e.style[t]||0),l=Math.floor(parseFloat(l))||0),void 0===r&&(r=a?wK:yK);var u=void 0!==i||a,c=i||l;return r===yK?u?c-_K(e,["border","padding"],o):l:u?r===wK?c:c+(r===bK?-_K(e,["border"],o):_K(e,["margin"],o)):l+_K(e,mK.slice(r),o)}vK(["Width","Height"],(function(e){kK["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],kK["viewport".concat(e)](n))},kK["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,o=r.body,i=r.documentElement[n];return"CSS1Compat"===r.compatMode&&i||o&&o[n]||i}}));var EK={position:"absolute",visibility:"hidden",display:"block"};function OK(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=t[0];return 0!==o.offsetWidth?r=CK.apply(void 0,t):function(e,t,n){var r,o={},i=e.style;for(r in t)t.hasOwnProperty(r)&&(o[r]=i[r],i[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(i[r]=o[r])}(o,EK,(function(){r=CK.apply(void 0,t)})),r}function SK(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}vK(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);kK["outer".concat(t)]=function(t,n){return t&&OK(t,e,n?0:wK)};var n="width"===e?["Left","Right"]:["Top","Bottom"];kK[e]=function(t,r){var o=r;return void 0!==o?t?(gK(t)&&(o+=_K(t,["padding","border"],n)),QG(t,e,o)):void 0:t&&OK(t,e,yK)}}));var xK={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:iK,offset:function(e,t,n){if(!(typeof t<"u"))return rK(e);!function(e,t,n){if(n.ignoreShake){var r=rK(e),o=r.left.toFixed(0),i=r.top.toFixed(0),a=t.left.toFixed(0),l=t.top.toFixed(0);if(o===a&&i===l)return}n.useCssRight||n.useCssBottom?pK(e,t,n):n.useCssTransform&&WG()in document.body.style?hK(e,t):pK(e,t,n)}(e,t,n||{})},isWindow:oK,each:vK,css:QG,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:SK,getWindowScrollLeft:function(e){return tK(e)},getWindowScrollTop:function(e){return nK(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)xK.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};SK(xK,kK);var jK=xK.getParent;function IK(e){if(xK.isWindow(e)||9===e.nodeType)return null;var t,n=xK.getDocument(e).body,r=xK.css(e,"position");if(!("fixed"===r||"absolute"===r))return"html"===e.nodeName.toLowerCase()?null:jK(e);for(t=jK(e);t&&t!==n&&9!==t.nodeType;t=jK(t))if("static"!==(r=xK.css(t,"position")))return t;return null}var RK=xK.getParent;function AK(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=IK(e),o=xK.getDocument(e),i=o.defaultView||o.parentWindow,a=o.body,l=o.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===a||r===l||"visible"===xK.css(r,"overflow")){if(r===a||r===l)break}else{var u=xK.offset(r);u.left+=r.clientLeft,u.top+=r.clientTop,n.top=Math.max(n.top,u.top),n.right=Math.min(n.right,u.left+r.clientWidth),n.bottom=Math.min(n.bottom,u.top+r.clientHeight),n.left=Math.max(n.left,u.left)}r=IK(r)}var c=null;xK.isWindow(e)||9===e.nodeType||(c=e.style.position,"absolute"===xK.css(e,"position")&&(e.style.position="fixed"));var s=xK.getWindowScrollLeft(i),d=xK.getWindowScrollTop(i),f=xK.viewportWidth(i),p=xK.viewportHeight(i),h=l.scrollWidth,v=l.scrollHeight,g=window.getComputedStyle(a);if("hidden"===g.overflowX&&(h=i.innerWidth),"hidden"===g.overflowY&&(v=i.innerHeight),e.style&&(e.style.position=c),t||function(e){if(xK.isWindow(e)||9===e.nodeType)return!1;var t=xK.getDocument(e),n=t.body,r=null;for(r=RK(e);r&&r!==n&&r!==t;r=RK(r))if("fixed"===xK.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,s),n.top=Math.max(n.top,d),n.right=Math.min(n.right,s+f),n.bottom=Math.min(n.bottom,d+p);else{var m=Math.max(h,s+f);n.right=Math.min(n.right,m);var y=Math.max(v,d+p);n.bottom=Math.min(n.bottom,y)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function DK(e){var t,n,r;if(xK.isWindow(e)||9===e.nodeType){var o=xK.getWindow(e);t={left:xK.getWindowScrollLeft(o),top:xK.getWindowScrollTop(o)},n=xK.viewportWidth(o),r=xK.viewportHeight(o)}else t=xK.offset(e),n=xK.outerWidth(e),r=xK.outerHeight(e);return t.width=n,t.height=r,t}function PK(e,t){var n=t.charAt(0),r=t.charAt(1),o=e.width,i=e.height,a=e.left,l=e.top;return"c"===n?l+=i/2:"b"===n&&(l+=i),"c"===r?a+=o/2:"r"===r&&(a+=o),{left:a,top:l}}function MK(e,t,n,r,o){var i=PK(t,n[1]),a=PK(e,n[0]),l=[a.left-i.left,a.top-i.top];return{left:Math.round(e.left-l[0]+r[0]-o[0]),top:Math.round(e.top-l[1]+r[1]-o[1])}}function TK(e,t,n){return e.left<n.left||e.left+t.width>n.right}function FK(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function NK(e,t,n){var r=[];return xK.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function VK(e,t){return e[t]=-e[t],e}function LK(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function BK(e,t){e[0]=LK(e[0],t.width),e[1]=LK(e[1],t.height)}function $K(e,t,n,r){var o=n.points,i=n.offset||[0,0],a=n.targetOffset||[0,0],l=n.overflow,u=n.source||e;i=[].concat(i),a=[].concat(a);var c={},s=0,d=AK(u,!(!(l=l||{})||!l.alwaysByViewport)),f=DK(u);BK(i,f),BK(a,t);var p=MK(f,t,o,i,a),h=xK.merge(f,p);if(d&&(l.adjustX||l.adjustY)&&r){if(l.adjustX&&TK(p,f,d)){var v=NK(o,/[lr]/gi,{l:"r",r:"l"}),g=VK(i,0),m=VK(a,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(MK(f,t,v,g,m),f,d)||(s=1,o=v,i=g,a=m)}if(l.adjustY&&FK(p,f,d)){var y=NK(o,/[tb]/gi,{t:"b",b:"t"}),b=VK(i,1),w=VK(a,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(MK(f,t,y,b,w),f,d)||(s=1,o=y,i=b,a=w)}s&&(p=MK(f,t,o,i,a),xK.mix(h,p));var _=TK(p,f,d),k=FK(p,f,d);if(_||k){var C=o;_&&(C=NK(o,/[lr]/gi,{l:"r",r:"l"})),k&&(C=NK(o,/[tb]/gi,{t:"b",b:"t"})),o=C,i=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=l.adjustX&&_,c.adjustY=l.adjustY&&k,(c.adjustX||c.adjustY)&&(h=function(e,t,n,r){var o=xK.clone(e),i={width:t.width,height:t.height};return r.adjustX&&o.left<n.left&&(o.left=n.left),r.resizeWidth&&o.left>=n.left&&o.left+i.width>n.right&&(i.width-=o.left+i.width-n.right),r.adjustX&&o.left+i.width>n.right&&(o.left=Math.max(n.right-i.width,n.left)),r.adjustY&&o.top<n.top&&(o.top=n.top),r.resizeHeight&&o.top>=n.top&&o.top+i.height>n.bottom&&(i.height-=o.top+i.height-n.bottom),r.adjustY&&o.top+i.height>n.bottom&&(o.top=Math.max(n.bottom-i.height,n.top)),xK.mix(o,i)}(p,f,d,c))}return h.width!==f.width&&xK.css(u,"width",xK.width(u)+h.width-f.width),h.height!==f.height&&xK.css(u,"height",xK.height(u)+h.height-f.height),xK.offset(u,{left:h.left,top:h.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:o,offset:i,targetOffset:a,overflow:c}}function zK(e,t,n){var r=n.target||t,o=DK(r),i=!function(e,t){var n=AK(e,t),r=DK(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return $K(e,o,n,i)}function UK(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=r.has(t);if(JH(!a,"Warning: There may be circular references"),a)return!1;if(t===o)return!0;if(n&&i>1)return!1;r.add(t);var l=i+1;if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(var u=0;u<t.length;u++)if(!e(t[u],o[u],l))return!1;return!0}if(t&&o&&"object"===yH(t)&&"object"===yH(o)){var c=Object.keys(t);return c.length===Object.keys(o).length&&c.every((function(n){return e(t[n],o[n],l)}))}return!1}(e,t)}zK.__getOffsetParent=IK,zK.__getVisibleRectForElement=AK;var HK=function(){if(typeof Map<"u")return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),qK=typeof window<"u"&&typeof document<"u"&&window.document===document,WK=typeof Rn<"u"&&Rn.Math===Math?Rn:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),GK="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(WK):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var KK=["top","right","bottom","left","width","height","size","weight"],YK=typeof MutationObserver<"u",XK=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function i(){n&&(n=!1,e()),r&&l()}function a(){GK(i)}function l(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);o=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){!qK||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),YK?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!qK||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;KK.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),JK=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},ZK=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||WK},QK=iY(0,0,0,0);function eY(e){return parseFloat(e)||0}function tY(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+eY(e["border-"+n+"-width"])}),0)}function nY(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return QK;var r=ZK(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=eY(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,l=eY(r.width),u=eY(r.height);if("border-box"===r.boxSizing&&(Math.round(l+i)!==t&&(l-=tY(r,"left","right")+i),Math.round(u+a)!==n&&(u-=tY(r,"top","bottom")+a)),!function(e){return e===ZK(e).document.documentElement}(e)){var c=Math.round(l+i)-t,s=Math.round(u+a)-n;1!==Math.abs(c)&&(l-=c),1!==Math.abs(s)&&(u-=s)}return iY(o.left,o.top,l,u)}var rY=typeof SVGGraphicsElement<"u"?function(e){return e instanceof ZK(e).SVGGraphicsElement}:function(e){return e instanceof ZK(e).SVGElement&&"function"==typeof e.getBBox};function oY(e){return qK?rY(e)?function(e){var t=e.getBBox();return iY(0,0,t.width,t.height)}(e):nY(e):QK}function iY(e,t,n,r){return{x:e,y:t,width:n,height:r}}var aY=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=iY(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=oY(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),lY=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(i.prototype);return JK(a,{x:t,y:n,width:r,height:o,top:n,right:t+r,bottom:o+n,left:t}),a}(t);JK(this,{target:e,contentRect:n})},uY=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new HK,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u")&&Element instanceof Object){if(!(e instanceof ZK(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new aY(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u")&&Element instanceof Object){if(!(e instanceof ZK(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;!t.has(e)||(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new lY(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),cY=typeof WeakMap<"u"?new WeakMap:new HK,sY=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=XK.getInstance(),r=new uY(t,n,this);cY.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){sY.prototype[e]=function(){var t;return(t=cY.get(this))[e].apply(t,arguments)}}));var dY=typeof WK.ResizeObserver<"u"?WK.ResizeObserver:sY;function fY(e,t){var n=null,r=null;var o=new dY((function(e){var o=sH(e,1)[0].target;if(document.documentElement.contains(o)){var i=o.getBoundingClientRect(),a=i.width,l=i.height,u=Math.floor(a),c=Math.floor(l);(n!==u||r!==c)&&Promise.resolve().then((function(){t({width:u,height:c})})),n=u,r=c}}));return e&&o.observe(e),function(){o.disconnect()}}function pY(e){return"function"!=typeof e?null:e()}function hY(e){return"object"===yH(e)&&e?e:null}var vY=function(e,t){var n=e.children,r=e.disabled,o=e.target,i=e.align,a=e.onAlign,u=e.monitorWindowResize,c=e.monitorBufferTime,s=void 0===c?0:c,d=l.a.useRef({}),f=l.a.useRef(),p=l.a.Children.only(n),h=l.a.useRef({});h.current.disabled=r,h.current.target=o,h.current.align=i,h.current.onAlign=a;var v=function(e,t){var n=l.a.useRef(!1),r=l.a.useRef(null);function o(){window.clearTimeout(r.current)}return[function i(a){if(o(),n.current&&!0!==a)r.current=window.setTimeout((function(){n.current=!1,i()}),t);else{if(!1===e(a))return;n.current=!0,r.current=window.setTimeout((function(){n.current=!1}),t)}},function(){n.current=!1,o()}]}((function(){var e=h.current,t=e.disabled,n=e.target,r=e.align,o=e.onAlign,i=f.current;if(!t&&n&&i){var a,l=pY(n),u=hY(n);d.current.element=l,d.current.point=u,d.current.align=r;var c=document.activeElement;return l&&Sq(l)?a=zK(i,l,r):u&&(a=function(e,t,n){var r,o,i=xK.getDocument(e),a=i.defaultView||i.parentWindow,l=xK.getWindowScrollLeft(a),u=xK.getWindowScrollTop(a),c=xK.viewportWidth(a),s=xK.viewportHeight(a),d={left:r="pageX"in t?t.pageX:l+t.clientX,top:o="pageY"in t?t.pageY:u+t.clientY,width:0,height:0},f=r>=0&&r<=l+c&&o>=0&&o<=u+s,p=[n.points[0],"cc"];return $K(e,d,LG(LG({},n),{},{points:p}),f)}(i,u,r)),function(e,t){e!==document.activeElement&&BW(t,e)&&"function"==typeof e.focus&&e.focus()}(c,i),o&&a&&o(i,a),!0}return!1}),s),g=sH(v,2),m=g[0],y=g[1],b=sH(l.a.useState(),2),w=b[0],_=b[1],k=sH(l.a.useState(),2),C=k[0],E=k[1];return pH((function(){_(pY(o)),E(hY(o))})),l.a.useEffect((function(){(d.current.element!==w||!function(e,t){return e===t||!(!e||!t)&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY)}(d.current.point,C)||!UK(d.current.align,i))&&m()})),l.a.useEffect((function(){return fY(f.current,m)}),[f.current]),l.a.useEffect((function(){return fY(w,m)}),[w]),l.a.useEffect((function(){r?y():m()}),[r]),l.a.useEffect((function(){if(u)return UW(window,"resize",m).remove}),[u]),l.a.useEffect((function(){return function(){y()}}),[]),l.a.useImperativeHandle(t,(function(){return{forceAlign:function(){return m(!0)}}})),l.a.isValidElement(p)&&(p=l.a.cloneElement(p,{ref:LH(p.ref,f)})),p},gY=l.a.forwardRef(vY);function mY(){mY=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch{c=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),l=new R(r||[]);return o(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",g={};function m(){}function y(){}function b(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(A([])));k&&k!==n&&r.call(k,a)&&(w=k);var C=b.prototype=m.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(o,i,a,l){var u=d(e[o],e,i);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==yH(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(s).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function S(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var u=x(l,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var c=d(t,n,r);if("normal"===c.type){if(o=r.done?v:p,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(yH(t)+" is not iterable")}return y.prototype=b,o(C,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,u,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},E(O.prototype),c(O.prototype,l,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new O(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(C),c(C,u,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function yY(e,t,n,r,o,i,a){try{var l=e[i](a),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function bY(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){yY(i,r,o,a,l,"next",e)}function l(e){yY(i,r,o,a,l,"throw",e)}a(void 0)}))}}gY.displayName="Align";var wY=["measure","alignPre","align",null,"motion"];var _Y=a.forwardRef((function(e,t){var n=e.visible,r=e.prefixCls,o=e.className,i=e.style,l=e.children,u=e.zIndex,c=e.stretch,s=e.destroyPopupOnHide,d=e.forceRender,f=e.align,p=e.point,h=e.getRootDomNode,v=e.getClassNameFromAlign,g=e.onAlign,m=e.onMouseEnter,y=e.onMouseLeave,b=e.onMouseDown,w=e.onTouchStart,_=e.onClick,k=Object(a.useRef)(),C=Object(a.useRef)(),E=sH(Object(a.useState)(),2),O=E[0],S=E[1],x=function(e){var t=sH(a.useState({width:0,height:0}),2),n=t[0],r=t[1];return[a.useMemo((function(){var t={};if(e){var r=n.width,o=n.height;-1!==e.indexOf("height")&&o?t.height=o:-1!==e.indexOf("minHeight")&&o&&(t.minHeight=o),-1!==e.indexOf("width")&&r?t.width=r:-1!==e.indexOf("minWidth")&&r&&(t.minWidth=r)}return t}),[e,n]),function(e){var t=e.offsetWidth,n=e.offsetHeight,o=e.getBoundingClientRect(),i=o.width,a=o.height;Math.abs(t-i)<1&&Math.abs(n-a)<1&&(t=i,n=a),r({width:t,height:n})}]}(c),j=sH(x,2),I=j[0],R=j[1];var A=function(e,t){var n=sH(vH(null),2),r=n[0],o=n[1],i=Object(a.useRef)();function l(e){o(e,!0)}function u(){Oq.cancel(i.current)}return Object(a.useEffect)((function(){l("measure")}),[e]),Object(a.useEffect)((function(){"measure"===r&&t(),r&&(i.current=Oq(bY(mY().mark((function e(){var t,n;return mY().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=wY.indexOf(r),(n=wY[t+1])&&-1!==t&&l(n);case 3:case"end":return e.stop()}}),e)})))))}),[r]),Object(a.useEffect)((function(){return function(){u()}}),[]),[r,function(e){u(),i.current=Oq((function(){l((function(e){switch(r){case"align":return"motion";case"motion":return"stable"}return e})),null==e||e()}))}]}(n,(function(){c&&R(h())})),D=sH(A,2),P=D[0],M=D[1],T=sH(Object(a.useState)(0),2),F=T[0],N=T[1],V=Object(a.useRef)();function L(){var e;null===(e=k.current)||void 0===e||e.forceAlign()}function B(e,t){var n=v(t);O!==n&&S(n),N((function(e){return e+1})),"align"===P&&(null==g||g(e,t))}pH((function(){"alignPre"===P&&N(0)}),[P]),pH((function(){"align"===P&&(F<3?L():M((function(){var e;null===(e=V.current)||void 0===e||e.call(V)})))}),[F]);var $=qH({},FG(e));function z(){return new Promise((function(e){V.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=$[e];$[e]=function(e,n){return M(),null==t?void 0:t(e,n)}})),a.useEffect((function(){!$.motionName&&"motion"===P&&M()}),[$.motionName,P]),a.useImperativeHandle(t,(function(){return{forceAlign:L,getElement:function(){return C.current}}}));var U=qH(qH({},I),{},{zIndex:u,opacity:"motion"!==P&&"stable"!==P&&n?0:void 0,pointerEvents:n||"stable"===P?void 0:"none"},i),H=!0;null!=f&&f.points&&("align"===P||"stable"===P)&&(H=!1);var q=l;return a.Children.count(l)>1&&(q=a.createElement("div",{className:"".concat(r,"-content")},l)),a.createElement(SG,lq({visible:n,ref:C,leavedClassName:"".concat(r,"-hidden")},$,{onAppearPrepare:z,onEnterPrepare:z,removeOnLeave:s,forceRender:d}),(function(e,t){var n=e.className,i=e.style,l=u$(r,o,O,n);return a.createElement(gY,{target:p||h,key:"popup",ref:k,monitorWindowResize:!0,disabled:H,align:f,onAlign:B},a.createElement("div",{ref:t,className:l,onMouseEnter:m,onMouseLeave:y,onMouseDownCapture:b,onTouchStartCapture:w,onClick:_,style:qH(qH({},i),U)},q))}))}));_Y.displayName="PopupInner";var kY=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.visible,o=e.zIndex,i=e.children,l=e.mobile,u=(l=void 0===l?{}:l).popupClassName,c=l.popupStyle,s=l.popupMotion,d=void 0===s?{}:s,f=l.popupRender,p=e.onClick,h=a.useRef();a.useImperativeHandle(t,(function(){return{forceAlign:function(){},getElement:function(){return h.current}}}));var v=qH({zIndex:o},c),g=i;return a.Children.count(i)>1&&(g=a.createElement("div",{className:"".concat(n,"-content")},i)),f&&(g=f(g)),a.createElement(SG,lq({visible:r,ref:h,removeOnLeave:!0},d),(function(e,t){var r=e.className,o=e.style,i=u$(n,u,r);return a.createElement("div",{ref:t,className:i,onClick:p,style:qH(qH({},o),v)},g)}))}));kY.displayName="MobilePopupInner";var CY=["visible","mobile"],EY=a.forwardRef((function(e,t){var n=e.visible,r=e.mobile,o=WW(e,CY),i=sH(Object(a.useState)(n),2),l=i[0],u=i[1],c=sH(Object(a.useState)(!1),2),s=c[0],d=c[1],f=qH(qH({},o),{},{visible:l});Object(a.useEffect)((function(){u(n),n&&r&&d(GW())}),[n,r]);var p=s?a.createElement(kY,lq({},f,{mobile:r,ref:t})):a.createElement(_Y,lq({},f,{ref:t}));return a.createElement("div",null,a.createElement(NG,f),p)}));EY.displayName="Popup";var OY=a.createContext(null);function SY(){}function xY(){return""}function jY(e){return e?e.ownerDocument:window.document}var IY=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];const RY=function(e){var t=function(t){nq(r,t);var n=aq(r);function r(e){var t,o;return ZH(this,r),UH(iq(t=n.call(this,e)),"popupRef",a.createRef()),UH(iq(t),"triggerRef",a.createRef()),UH(iq(t),"portalContainer",void 0),UH(iq(t),"attachId",void 0),UH(iq(t),"clickOutsideHandler",void 0),UH(iq(t),"touchOutsideHandler",void 0),UH(iq(t),"contextMenuOutsideHandler1",void 0),UH(iq(t),"contextMenuOutsideHandler2",void 0),UH(iq(t),"mouseDownTimeout",void 0),UH(iq(t),"focusTime",void 0),UH(iq(t),"preClickTime",void 0),UH(iq(t),"preTouchTime",void 0),UH(iq(t),"delayTimer",void 0),UH(iq(t),"hasPopupMouseDown",void 0),UH(iq(t),"onMouseEnter",(function(e){var n=t.props.mouseEnterDelay;t.fireEvents("onMouseEnter",e),t.delaySetPopupVisible(!0,n,n?null:e)})),UH(iq(t),"onMouseMove",(function(e){t.fireEvents("onMouseMove",e),t.setPoint(e)})),UH(iq(t),"onMouseLeave",(function(e){t.fireEvents("onMouseLeave",e),t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)})),UH(iq(t),"onPopupMouseEnter",(function(){t.clearDelayTimer()})),UH(iq(t),"onPopupMouseLeave",(function(e){var n;e.relatedTarget&&!e.relatedTarget.setTimeout&&BW(null===(n=t.popupRef.current)||void 0===n?void 0:n.getElement(),e.relatedTarget)||t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)})),UH(iq(t),"onFocus",(function(e){t.fireEvents("onFocus",e),t.clearDelayTimer(),t.isFocusToShow()&&(t.focusTime=Date.now(),t.delaySetPopupVisible(!0,t.props.focusDelay))})),UH(iq(t),"onMouseDown",(function(e){t.fireEvents("onMouseDown",e),t.preClickTime=Date.now()})),UH(iq(t),"onTouchStart",(function(e){t.fireEvents("onTouchStart",e),t.preTouchTime=Date.now()})),UH(iq(t),"onBlur",(function(e){t.fireEvents("onBlur",e),t.clearDelayTimer(),t.isBlurToHide()&&t.delaySetPopupVisible(!1,t.props.blurDelay)})),UH(iq(t),"onContextMenu",(function(e){e.preventDefault(),t.fireEvents("onContextMenu",e),t.setPopupVisible(!0,e)})),UH(iq(t),"onContextMenuClose",(function(){t.isContextMenuToShow()&&t.close()})),UH(iq(t),"onClick",(function(e){if(t.fireEvents("onClick",e),t.focusTime){var n;if(t.preClickTime&&t.preTouchTime?n=Math.min(t.preClickTime,t.preTouchTime):t.preClickTime?n=t.preClickTime:t.preTouchTime&&(n=t.preTouchTime),Math.abs(n-t.focusTime)<20)return;t.focusTime=0}t.preClickTime=0,t.preTouchTime=0,t.isClickToShow()&&(t.isClickToHide()||t.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var r=!t.state.popupVisible;(t.isClickToHide()&&!r||r&&t.isClickToShow())&&t.setPopupVisible(!t.state.popupVisible,e)})),UH(iq(t),"onPopupMouseDown",(function(){var e;(t.hasPopupMouseDown=!0,clearTimeout(t.mouseDownTimeout),t.mouseDownTimeout=window.setTimeout((function(){t.hasPopupMouseDown=!1}),0),t.context)&&(e=t.context).onPopupMouseDown.apply(e,arguments)})),UH(iq(t),"onDocumentClick",(function(e){if(!t.props.mask||t.props.maskClosable){var n=e.target,r=t.getRootDomNode(),o=t.getPopupDomNode();(!BW(r,n)||t.isContextMenuOnly())&&!BW(o,n)&&!t.hasPopupMouseDown&&t.close()}})),UH(iq(t),"getRootDomNode",(function(){var e=t.props.getTriggerDOMNode;if(e)return e(t.triggerRef.current);try{var n=zW(t.triggerRef.current);if(n)return n}catch{}return c.a.findDOMNode(iq(t))})),UH(iq(t),"getPopupClassNameFromAlign",(function(e){var n=[],r=t.props,o=r.popupPlacement,i=r.builtinPlacements,a=r.prefixCls,l=r.alignPoint,u=r.getPopupClassNameFromAlign;return o&&i&&n.push(function(e,t,n,r){for(var o=n.points,i=Object.keys(e),a=0;a<i.length;a+=1){var l=i[a];if(qW(e[l].points,o,r))return"".concat(t,"-placement-").concat(l)}return""}(i,a,e,l)),u&&n.push(u(e)),n.join(" ")})),UH(iq(t),"getComponent",(function(){var e=t.props,n=e.prefixCls,r=e.destroyPopupOnHide,o=e.popupClassName,i=e.onPopupAlign,l=e.popupMotion,u=e.popupAnimation,c=e.popupTransitionName,s=e.popupStyle,d=e.mask,f=e.maskAnimation,p=e.maskTransitionName,h=e.maskMotion,v=e.zIndex,g=e.popup,m=e.stretch,y=e.alignPoint,b=e.mobile,w=e.forceRender,_=e.onPopupClick,k=t.state,C=k.popupVisible,E=k.point,O=t.getPopupAlign(),S={};return t.isMouseEnterToShow()&&(S.onMouseEnter=t.onPopupMouseEnter),t.isMouseLeaveToHide()&&(S.onMouseLeave=t.onPopupMouseLeave),S.onMouseDown=t.onPopupMouseDown,S.onTouchStart=t.onPopupMouseDown,a.createElement(EY,lq({prefixCls:n,destroyPopupOnHide:r,visible:C,point:y&&E,className:o,align:O,onAlign:i,animation:u,getClassNameFromAlign:t.getPopupClassNameFromAlign},S,{stretch:m,getRootDomNode:t.getRootDomNode,style:s,mask:d,zIndex:v,transitionName:c,maskAnimation:f,maskTransitionName:p,maskMotion:h,ref:t.popupRef,motion:l,mobile:b,forceRender:w,onClick:_}),"function"==typeof g?g():g)})),UH(iq(t),"attachParent",(function(e){Oq.cancel(t.attachId);var n,r=t.props,o=r.getPopupContainer,i=r.getDocument,a=t.getRootDomNode();o?(a||0===o.length)&&(n=o(a)):n=i(t.getRootDomNode()).body,n?n.appendChild(e):t.attachId=Oq((function(){t.attachParent(e)}))})),UH(iq(t),"getContainer",(function(){if(!t.portalContainer){var e=(0,t.props.getDocument)(t.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",t.portalContainer=e}return t.attachParent(t.portalContainer),t.portalContainer})),UH(iq(t),"setPoint",(function(e){!t.props.alignPoint||!e||t.setState({point:{pageX:e.pageX,pageY:e.pageY}})})),UH(iq(t),"handlePortalUpdate",(function(){t.state.prevPopupVisible!==t.state.popupVisible&&t.props.afterPopupVisibleChange(t.state.popupVisible)})),UH(iq(t),"triggerContextValue",{onPopupMouseDown:t.onPopupMouseDown}),o="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,t.state={prevPopupVisible:o,popupVisible:o},IY.forEach((function(e){t["fire".concat(e)]=function(n){t.fireEvents(e,n)}})),t}return eq(r,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=UW(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=UW(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=UW(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=UW(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Oq.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){return qH(qH({},e[t]||{}),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,o=1e3*t;if(this.clearDelayTimer(),o){var i=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,i),r.clearDelayTimer()}),o)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var t=this.state.popupVisible,n=this.props,r=n.children,o=n.forceRender,i=n.alignPoint,l=n.className,u=n.autoDestroy,c=a.Children.only(r),s={key:"trigger"};this.isContextMenuToShow()?s.onContextMenu=this.onContextMenu:s.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(s.onClick=this.onClick,s.onMouseDown=this.onMouseDown,s.onTouchStart=this.onTouchStart):(s.onClick=this.createTwoChains("onClick"),s.onMouseDown=this.createTwoChains("onMouseDown"),s.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(s.onMouseEnter=this.onMouseEnter,i&&(s.onMouseMove=this.onMouseMove)):s.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?s.onMouseLeave=this.onMouseLeave:s.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(s.onFocus=this.onFocus,s.onBlur=this.onBlur):(s.onFocus=this.createTwoChains("onFocus"),s.onBlur=this.createTwoChains("onBlur"));var d=u$(c&&c.props&&c.props.className,l);d&&(s.className=d);var f=qH({},s);$H(c)&&(f.ref=LH(this.triggerRef,c.ref));var p,h=a.cloneElement(c,f);return(t||this.popupRef.current||o)&&(p=a.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!t&&u&&(p=null),a.createElement(OY.Provider,{value:this.triggerContextValue},h,p)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),r}(a.Component);return UH(t,"contextType",OY),UH(t,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:xY,getDocument:jY,onPopupVisibleChange:SY,afterPopupVisibleChange:SY,onPopupAlign:SY,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),t}(HW);var AY={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};function DY(e){var t,n=e.prefixCls,r=e.popupElement,o=e.popupStyle,i=e.visible,l=e.dropdownClassName,u=e.dropdownAlign,c=e.transitionName,s=e.getPopupContainer,d=e.children,f=e.range,p=e.popupPlacement,h=e.direction,v="".concat(n,"-dropdown");return a.createElement(RY,{showAction:[],hideAction:[],popupPlacement:void 0!==p?p:"rtl"===h?"bottomRight":"bottomLeft",builtinPlacements:AY,prefixCls:v,popupTransitionName:c,popup:r,popupAlign:u,popupVisible:i,popupClassName:u$(l,(t={},UH(t,"".concat(v,"-range"),f),UH(t,"".concat(v,"-rtl"),"rtl"===h),t)),popupStyle:o,getPopupContainer:s},d)}function PY(e){var t=e.open,n=e.value,r=e.isClickOutside,o=e.triggerOpen,i=e.forwardKeyDown,l=e.onKeyDown,u=e.blurToCancel,c=e.onSubmit,s=e.onCancel,d=e.onFocus,f=e.onBlur,p=e.currentFocusedKey,h=e.key,v=void 0===h?"start":h,g=sH(Object(a.useState)(!1),2),m=g[0],y=g[1],b=sH(Object(a.useState)(!1),2),w=b[0],_=b[1],k=Object(a.useRef)(),C=Object(a.useRef)(!1),E=Object(a.useRef)(!1),O=Object(a.useRef)(!1),S={onMouseDown:function(){y(!0),o(!0)},onKeyDown:function(e){if(l(e,(function(){O.current=!0})),!O.current){switch(e.which){case uq.ENTER:return t?!1!==c()&&y(!0):o(!0),void e.preventDefault();case uq.TAB:return void(m&&t&&!e.shiftKey?(y(!1),e.preventDefault()):!m&&t&&!i(e)&&e.shiftKey&&(y(!0),e.preventDefault()));case uq.ESC:return y(!0),void s()}t||[uq.SHIFT].includes(e.which)?m||i(e):o(!0)}},onFocus:function(e){y(!0),_(!0),p&&(p.current=v),clearTimeout(k.current),d&&d(e)},onBlur:function(e){!C.current&&r(document.activeElement)?(u?setTimeout((function(){for(var e=document.activeElement;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;r(e)&&s()}),0):t&&(o(!1),E.current&&c()),_(!1),p?(p.current="",k.current=setTimeout((function(){p.current||null==f||f(e)}),100)):null==f||f(e)):C.current=!1}};return Object(a.useEffect)((function(){E.current=!1}),[t]),Object(a.useEffect)((function(){E.current=!0}),[n]),Object(a.useEffect)((function(){return function(e){return!Dq&&typeof window<"u"&&window.addEventListener&&(Dq=function(e){WH(Pq).forEach((function(t){t(e)}))},window.addEventListener("mousedown",Dq)),Pq.add(e),function(){Pq.delete(e),0===Pq.size&&(window.removeEventListener("mousedown",Dq),Dq=null)}}((function(e){var n=function(e){var t,n=e.target;return e.composed&&n.shadowRoot&&(null===(t=e.composedPath)||void 0===t?void 0:t.call(e)[0])||n}(e),i=r(n);t?i?(!w||i)&&o(!1):(C.current=!0,requestAnimationFrame((function(){C.current=!1}))):w&&!i&&(C.current=!0)}))})),Object(a.useEffect)((function(){return function(){return clearTimeout(k.current)}}),[]),[S,{focused:w,typing:m}]}function MY(e){var t=e.valueTexts,n=e.onTextChange,r=sH(a.useState(""),2),o=r[0],i=r[1],l=a.useRef([]);function u(){i(l.current[0])}return l.current=t,a.useEffect((function(){t.every((function(e){return e!==o}))&&u()}),[t.join("||")]),[o,function(e){i(e),n(e)},u]}function TY(e,t){var n=t.formatList,r=t.generateConfig,o=t.locale;return NH((function(){if(!e)return[[""],""];for(var t="",i=[],a=0;a<n.length;a+=1){var l=n[a],u=Xq(e,{generateConfig:r,locale:o,format:l});i.push(u),0===a&&(t=u)}return[i,t]}),[e,n,o],(function(e,t){return!Gq(r,e[0],t[0])||!UK(e[1],t[1],!0)||!UK(e[2],t[2],!0)}))}function FY(e,t){var n=t.formatList,r=t.generateConfig,o=t.locale,i=sH(Object(a.useState)(null),2),l=i[0],u=i[1],c=Object(a.useRef)(null);function s(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];cancelAnimationFrame(c.current),t?u(e):c.current=requestAnimationFrame((function(){u(e)}))}var d=sH(TY(l,{formatList:n,generateConfig:r,locale:o}),2)[1];function f(){s(null,arguments.length>0&&void 0!==arguments[0]&&arguments[0])}return Object(a.useEffect)((function(){f(!0)}),[e]),Object(a.useEffect)((function(){return function(){return cancelAnimationFrame(c.current)}}),[]),[d,function(e){s(e)},f]}function NY(e){var t,n=e.prefixCls,r=void 0===n?"rc-picker":n,o=e.id,i=e.tabIndex,l=e.style,u=e.className,c=e.dropdownClassName,s=e.dropdownAlign,d=e.popupStyle,f=e.transitionName,p=e.generateConfig,h=e.locale,v=e.inputReadOnly,g=e.allowClear,m=e.autoFocus,y=e.showTime,b=e.picker,w=void 0===b?"date":b,_=e.format,k=e.use12Hours,C=e.value,E=e.defaultValue,O=e.open,S=e.defaultOpen,x=e.defaultOpenValue,j=e.suffixIcon,I=e.clearIcon,R=e.disabled,A=e.disabledDate,D=e.placeholder,P=e.getPopupContainer,M=e.pickerRef,T=e.panelRender,F=e.onChange,N=e.onOpenChange,V=e.onFocus,L=e.onBlur,B=e.onMouseDown,$=e.onMouseUp,z=e.onMouseEnter,U=e.onMouseLeave,H=e.onContextMenu,q=e.onClick,W=e.onKeyDown,G=e.onSelect,K=e.direction,Y=e.autoComplete,X=void 0===Y?"off":Y,J=e.inputRender,Z=a.useRef(null),Q="date"===w&&!!y||"time"===w,ee=tW(Rq(_,w,y,k)),te=a.useRef(null),ne=a.useRef(null),re=a.useRef(null),oe=sH(mH(null,{value:C,defaultValue:E}),2),ie=oe[0],ae=oe[1],le=sH(a.useState(ie),2),ue=le[0],ce=le[1],se=a.useRef(null),de=sH(mH(!1,{value:O,defaultValue:S,postState:function(e){return!R&&e},onChange:function(e){N&&N(e),!e&&se.current&&se.current.onClose&&se.current.onClose()}}),2),fe=de[0],pe=de[1],he=sH(TY(ue,{formatList:ee,generateConfig:p,locale:h}),2),ve=he[0],ge=he[1],me=sH(MY({valueTexts:ve,onTextChange:function(e){var t=Jq(e,{locale:h,formatList:ee,generateConfig:p});t&&(!A||!A(t))&&ce(t)}}),3),ye=me[0],be=me[1],we=me[2],_e=function(e){ce(e),ae(e),F&&!Gq(p,ie,e)&&F(e,e?Xq(e,{generateConfig:p,locale:h,format:ee[0]}):"")},ke=function(e){R&&e||pe(e)},Ce=sH(PY({blurToCancel:Q,open:fe,value:ye,triggerOpen:ke,forwardKeyDown:function(e){return fe&&se.current&&se.current.onKeyDown?se.current.onKeyDown(e):(JH(!1,"Picker not correct forward KeyDown operation. Please help to fire issue about this."),!1)},isClickOutside:function(e){return!Tq([te.current,ne.current,re.current],e)},onSubmit:function(){return!(!ue||A&&A(ue))&&(_e(ue),ke(!1),we(),!0)},onCancel:function(){ke(!1),ce(ie),we()},onKeyDown:function(e,t){null==W||W(e,t)},onFocus:V,onBlur:L}),2),Ee=Ce[0],Oe=Ce[1],Se=Oe.focused,xe=Oe.typing;a.useEffect((function(){fe||(ce(ie),ve.length&&""!==ve[0]?ge!==ye&&we():be(""))}),[fe,ve]),a.useEffect((function(){fe||we()}),[w]),a.useEffect((function(){ce(ie)}),[ie]),M&&(M.current={focus:function(){Z.current&&Z.current.focus()},blur:function(){Z.current&&Z.current.blur()}});var je=sH(FY(ye,{formatList:ee,generateConfig:p,locale:h}),3),Ie=je[0],Re=je[1],Ae=je[2],De=qH(qH({},e),{},{className:void 0,style:void 0,pickerValue:void 0,onPickerValueChange:void 0,onChange:null}),Pe=a.createElement(LW,lq({},De,{generateConfig:p,className:u$(UH({},"".concat(r,"-panel-focused"),!xe)),value:ue,locale:h,tabIndex:-1,onSelect:function(e){null==G||G(e),ce(e)},direction:K,onPanelChange:function(t,n){var r=e.onPanelChange;Ae(!0),null==r||r(t,n)}}));T&&(Pe=T(Pe));var Me,Te,Fe=a.createElement("div",{className:"".concat(r,"-panel-container"),onMouseDown:function(e){e.preventDefault()}},Pe);j&&(Me=a.createElement("span",{className:"".concat(r,"-suffix")},j)),g&&ie&&!R&&(Te=a.createElement("span",{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onMouseUp:function(e){e.preventDefault(),e.stopPropagation(),_e(null),ke(!1)},className:"".concat(r,"-clear"),role:"button"},I||a.createElement("span",{className:"".concat(r,"-clear-btn")})));var Ne=qH(qH(qH({id:o,tabIndex:i,disabled:R,readOnly:v||"function"==typeof ee[0]||!xe,value:Ie||ye,onChange:function(e){be(e.target.value)},autoFocus:m,placeholder:D,ref:Z,title:ye},Ee),{},{size:Aq(w,ee[0],p)},nW(e)),{},{autoComplete:X}),Ve=J?J(Ne):a.createElement("input",Ne),Le="rtl"===K?"bottomRight":"bottomLeft";return a.createElement(cq.Provider,{value:{operationRef:se,hideHeader:"time"===w,panelRef:te,onSelect:function(e,t){("submit"===t||"key"!==t&&!Q)&&(_e(e),ke(!1))},open:fe,defaultOpenValue:x,onDateMouseEnter:Re,onDateMouseLeave:Ae}},a.createElement(DY,{visible:fe,popupElement:Fe,popupStyle:d,prefixCls:r,dropdownClassName:c,dropdownAlign:s,getPopupContainer:P,transitionName:f,popupPlacement:Le,direction:K},a.createElement("div",{ref:re,className:u$(r,u,(t={},UH(t,"".concat(r,"-disabled"),R),UH(t,"".concat(r,"-focused"),Se),UH(t,"".concat(r,"-rtl"),"rtl"===K),t)),style:l,onMouseDown:B,onMouseUp:$,onMouseEnter:z,onMouseLeave:U,onContextMenu:H,onClick:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==q||q.apply(void 0,t),Z.current&&(Z.current.focus(),ke(!0))}},a.createElement("div",{className:u$("".concat(r,"-input"),UH({},"".concat(r,"-input-placeholder"),!!Ie)),ref:ne},Ve,Me,Te))))}var VY=function(e){nq(n,e);var t=aq(n);function n(){var e;ZH(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).pickerRef=a.createRef(),e.focus=function(){e.pickerRef.current&&e.pickerRef.current.focus()},e.blur=function(){e.pickerRef.current&&e.pickerRef.current.blur()},e}return eq(n,[{key:"render",value:function(){return a.createElement(NY,lq({},this.props,{pickerRef:this.pickerRef}))}}]),n}(a.Component);function LY(e,t,n,r){var o=Yq(e,n,r,1);function i(n){return n(e,t)?"same":n(o,t)?"closing":"far"}switch(n){case"year":return i((function(e,t){return function(e,t,n){var r=Bq(t,n);return"boolean"==typeof r?r:Math.floor(e.getYear(t)/10)===Math.floor(e.getYear(n)/10)}(r,e,t)}));case"quarter":case"month":return i((function(e,t){return $q(r,e,t)}));default:return i((function(e,t){return Hq(r,e,t)}))}}function BY(e){var t=e.values,n=e.picker,r=e.defaultDates,o=e.generateConfig,i=sH(a.useState((function(){return[rW(r,0),rW(r,1)]})),2),l=i[0],u=i[1],c=sH(a.useState(null),2),s=c[0],d=c[1],f=rW(t,0),p=rW(t,1);return[function(e){return l[e]?l[e]:rW(s,e)||function(e,t,n,r){var o=rW(e,0),i=rW(e,1);if(0===t)return o;if(o&&i)switch(LY(o,i,n,r)){case"same":case"closing":return o;default:return Yq(i,n,r,-1)}return o}(t,e,n,o)||f||p||o.getNow()},function(e,n){if(e){var r=oW(s,e,n);u(oW(l,null,n)||[null,null]);var o=(n+1)%2;rW(t,o)||(r=oW(r,e,o)),d(r)}else(f||p)&&d(null)}]}function $Y(e,t){return e&&e[0]&&e[1]&&t.isAfter(e[0],e[1])?[e[1],e[0]]:e}function zY(e,t,n,r){return!!(e||r&&r[t]||n[(t+1)%2])}function UY(e){var t,n,r,o=e.prefixCls,i=void 0===o?"rc-picker":o,l=e.id,u=e.style,c=e.className,s=e.popupStyle,d=e.dropdownClassName,f=e.transitionName,p=e.dropdownAlign,h=e.getPopupContainer,v=e.generateConfig,g=e.locale,m=e.placeholder,y=e.autoFocus,b=e.disabled,w=e.format,_=e.picker,k=void 0===_?"date":_,C=e.showTime,E=e.use12Hours,O=e.separator,S=void 0===O?"~":O,x=e.value,j=e.defaultValue,I=e.defaultPickerValue,R=e.open,A=e.defaultOpen,D=e.disabledDate,P=e.disabledTime,M=e.dateRender,T=e.panelRender,F=e.ranges,N=e.allowEmpty,V=e.allowClear,L=e.suffixIcon,B=e.clearIcon,$=e.pickerRef,z=e.inputReadOnly,U=e.mode,H=e.renderExtraFooter,q=e.onChange,W=e.onOpenChange,G=e.onPanelChange,K=e.onCalendarChange,Y=e.onFocus,X=e.onBlur,J=e.onMouseDown,Z=e.onMouseUp,Q=e.onMouseEnter,ee=e.onMouseLeave,te=e.onClick,ne=e.onOk,re=e.onKeyDown,oe=e.components,ie=e.order,ae=e.direction,le=e.activePickerIndex,ue=e.autoComplete,ce=void 0===ue?"off":ue,se="date"===k&&!!C||"time"===k,de=Object(a.useRef)({}),fe=Object(a.useRef)(null),pe=Object(a.useRef)(null),he=Object(a.useRef)(null),ve=Object(a.useRef)(null),ge=Object(a.useRef)(null),me=Object(a.useRef)(null),ye=Object(a.useRef)(null),be=Object(a.useRef)(null),we=tW(Rq(w,k,C,E)),_e=sH(mH(0,{value:le}),2),ke=_e[0],Ce=_e[1],Ee=Object(a.useRef)(null),Oe=a.useMemo((function(){return Array.isArray(b)?b:[b||!1,b||!1]}),[b]),Se=sH(mH(null,{value:x,defaultValue:j,postState:function(e){return"time"!==k||ie?$Y(e,v):e}}),2),xe=Se[0],je=Se[1],Ie=sH(BY({values:xe,picker:k,defaultDates:I,generateConfig:v}),2),Re=Ie[0],Ae=Ie[1],De=sH(mH(xe,{postState:function(e){var t=e;if(Oe[0]&&Oe[1])return t;for(var n=0;n<2;n+=1)Oe[n]&&!t&&!rW(t,n)&&!rW(N,n)&&(t=oW(t,v.getNow(),n));return t}}),2),Pe=De[0],Me=De[1],Te=sH(mH([k,k],{value:U}),2),Fe=Te[0],Ne=Te[1];Object(a.useEffect)((function(){Ne([k,k])}),[k]);var Ve=function(e,t){Ne(e),G&&G(t,e)},Le=function(e,t,n){var r=e.picker,o=e.locale,i=e.selectedValue,l=e.disabledDate,u=e.disabled,c=e.generateConfig,s=rW(i,0),d=rW(i,1);function f(e){return c.locale.getWeekFirstDate(o.locale,e)}function p(e){return 100*c.getYear(e)+c.getMonth(e)}function h(e){return 10*c.getYear(e)+zq(c,e)}return[a.useCallback((function(e){if(l&&l(e))return!0;if(u[1]&&d)return!qq(c,e,d)&&c.isAfter(e,d);if(t&&d)switch(r){case"quarter":return h(e)>h(d);case"month":return p(e)>p(d);case"week":return f(e)>f(d);default:return!qq(c,e,d)&&c.isAfter(e,d)}return!1}),[l,u[1],d,t]),a.useCallback((function(e){if(l&&l(e))return!0;if(u[0]&&s)return!qq(c,e,d)&&c.isAfter(s,e);if(n&&s)switch(r){case"quarter":return h(e)<h(s);case"month":return p(e)<p(s);case"week":return f(e)<f(s);default:return!qq(c,e,s)&&c.isAfter(s,e)}return!1}),[l,u[0],s,n])]}({picker:k,selectedValue:Pe,locale:g,disabled:Oe,disabledDate:D,generateConfig:v},de.current[1],de.current[0]),Be=sH(Le,2),$e=Be[0],ze=Be[1],Ue=sH(mH(!1,{value:R,defaultValue:A,postState:function(e){return!Oe[ke]&&e},onChange:function(e){W&&W(e),!e&&Ee.current&&Ee.current.onClose&&Ee.current.onClose()}}),2),He=Ue[0],qe=Ue[1],We=He&&0===ke,Ge=He&&1===ke,Ke=sH(Object(a.useState)(0),2),Ye=Ke[0],Xe=Ke[1];Object(a.useEffect)((function(){!He&&fe.current&&Xe(fe.current.offsetWidth)}),[He]);var Je=a.useRef();function Ze(e,t){if(e)clearTimeout(Je.current),de.current[t]=!0,Ce(t),qe(e),He||Ae(null,t);else if(ke===t){qe(e);var n=de.current;Je.current=setTimeout((function(){n===de.current&&(de.current={})}))}}function Qe(e){Ze(!0,e),setTimeout((function(){var t=[me,ye][e];t.current&&t.current.focus()}),0)}function et(e,t){var n=e,r=rW(n,0),o=rW(n,1);r&&o&&v.isAfter(r,o)&&("week"===k&&!Wq(v,g.locale,r,o)||"quarter"===k&&!Uq(v,r,o)||"week"!==k&&"quarter"!==k&&"time"!==k&&!qq(v,r,o)?(0===t?(n=[r,null],o=null):(r=null,n=[null,o]),de.current=UH({},t,!0)):("time"!==k||!1!==ie)&&(n=$Y(n,v))),Me(n);var i=n&&n[0]?Xq(n[0],{generateConfig:v,locale:g,format:we[0]}):"",a=n&&n[1]?Xq(n[1],{generateConfig:v,locale:g,format:we[0]}):"";K&&K(n,[i,a],{range:0===t?"start":"end"});var l=zY(r,0,Oe,N),u=zY(o,1,Oe,N);(null===n||l&&u)&&(je(n),q&&(!Gq(v,rW(xe,0),r)||!Gq(v,rW(xe,1),o))&&q(n,[i,a]));var c=null;0!==t||Oe[1]?1===t&&!Oe[0]&&(c=0):c=1,null===c||c===ke||de.current[c]&&rW(n,c)||!rW(n,t)?Ze(!1,t):Qe(c)}var tt=function(e){return He&&Ee.current&&Ee.current.onKeyDown?Ee.current.onKeyDown(e):(JH(!1,"Picker not correct forward KeyDown operation. Please help to fire issue about this."),!1)},nt={formatList:we,generateConfig:v,locale:g},rt=sH(TY(rW(Pe,0),nt),2),ot=rt[0],it=rt[1],at=sH(TY(rW(Pe,1),nt),2),lt=at[0],ut=at[1],ct=function(e,t){var n=Jq(e,{locale:g,formatList:we,generateConfig:v});n&&!(0===t?$e:ze)(n)&&(Me(oW(Pe,n,t)),Ae(n,t))},st=sH(MY({valueTexts:ot,onTextChange:function(e){return ct(e,0)}}),3),dt=st[0],ft=st[1],pt=st[2],ht=sH(MY({valueTexts:lt,onTextChange:function(e){return ct(e,1)}}),3),vt=ht[0],gt=ht[1],mt=ht[2],yt=sH(Object(a.useState)(null),2),bt=yt[0],wt=yt[1],_t=sH(Object(a.useState)(null),2),kt=_t[0],Ct=_t[1],Et=sH(FY(dt,{formatList:we,generateConfig:v,locale:g}),3),Ot=Et[0],St=Et[1],xt=Et[2],jt=sH(FY(vt,{formatList:we,generateConfig:v,locale:g}),3),It=jt[0],Rt=jt[1],At=jt[2],Dt=function(e,t){return{blurToCancel:se,forwardKeyDown:tt,onBlur:X,isClickOutside:function(e){return!Tq([pe.current,he.current,ve.current,fe.current],e)},onFocus:function(t){Ce(e),Y&&Y(t)},triggerOpen:function(t){Ze(t,e)},onSubmit:function(){if(!Pe||D&&D(Pe[e]))return!1;et(Pe,e),t()},onCancel:function(){Ze(!1,e),Me(xe),t()}}},Pt=Object(a.useRef)(""),Mt=sH(PY(qH(qH({},Dt(0,pt)),{},{open:We,value:dt,currentFocusedKey:Pt,key:"start",onKeyDown:function(e,t){null==re||re(e,t)}})),2),Tt=Mt[0],Ft=Mt[1],Nt=Ft.focused,Vt=Ft.typing,Lt=sH(PY(qH(qH({},Dt(1,mt)),{},{open:Ge,value:vt,currentFocusedKey:Pt,key:"end",onKeyDown:function(e,t){null==re||re(e,t)}})),2),Bt=Lt[0],$t=Lt[1],zt=$t.focused,Ut=$t.typing,Ht=xe&&xe[0]?Xq(xe[0],{locale:g,format:"YYYYMMDDHHmmss",generateConfig:v}):"",qt=xe&&xe[1]?Xq(xe[1],{locale:g,format:"YYYYMMDDHHmmss",generateConfig:v}):"";Object(a.useEffect)((function(){He||(Me(xe),ot.length&&""!==ot[0]?it!==dt&&pt():ft(""),lt.length&&""!==lt[0]?ut!==vt&&mt():gt(""))}),[He,ot,lt]),Object(a.useEffect)((function(){Me(xe)}),[Ht,qt]),$&&($.current={focus:function(){me.current&&me.current.focus()},blur:function(){me.current&&me.current.blur(),ye.current&&ye.current.blur()}});var Wt=Object.keys(F||{}).map((function(e){var t=F[e],n="function"==typeof t?t():t;return{label:e,onClick:function(){et(n,null),Ze(!1,ke)},onMouseEnter:function(){wt(n)},onMouseLeave:function(){wt(null)}}}));function Gt(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null;He&&kt&&kt[0]&&kt[1]&&v.isAfter(kt[1],kt[0])&&(r=kt);var o=C;if(C&&"object"===yH(C)&&C.defaultValue){var l=C.defaultValue;o=qH(qH({},C),{},{defaultValue:rW(l,ke)||void 0})}var u=null;return M&&(u=function(e,t){return M(e,t,{range:ke?"end":"start"})}),a.createElement(dW.Provider,{value:{inRange:!0,panelPosition:t,rangedValue:bt||Pe,hoverRangedValue:r}},a.createElement(LW,lq({},e,n,{dateRender:u,showTime:o,mode:Fe[ke],generateConfig:v,style:void 0,direction:ae,disabledDate:0===ke?$e:ze,disabledTime:function(e){return!!P&&P(e,0===ke?"start":"end")},className:u$(UH({},"".concat(i,"-panel-focused"),0===ke?!Vt:!Ut)),value:rW(Pe,ke),locale:g,tabIndex:-1,onPanelChange:function(e,n){0===ke&&xt(!0),1===ke&&At(!0),Ve(oW(Fe,n,ke),oW(Pe,e,ke));var r=e;"right"===t&&Fe[ke]===n&&(r=Yq(r,n,v,-1)),Ae(r,ke)},onOk:null,onSelect:void 0,onChange:void 0,defaultValue:rW(Pe,0===ke?1:0)})))}var Kt=0,Yt=0;if(ke&&he.current&&ge.current&&pe.current){Kt=he.current.offsetWidth+ge.current.offsetWidth;var Xt=be.current.offsetLeft>Kt?be.current.offsetLeft-Kt:be.current.offsetLeft;pe.current.offsetWidth&&be.current.offsetWidth&&Kt>pe.current.offsetWidth-be.current.offsetWidth-("rtl"===ae?0:Xt)&&(Yt=Kt)}var Jt="rtl"===ae?{right:Kt}:{left:Kt};var Zt,Qt,en=a.createElement("div",{className:u$("".concat(i,"-range-wrapper"),"".concat(i,"-").concat(k,"-range-wrapper")),style:{minWidth:Ye}},a.createElement("div",{ref:be,className:"".concat(i,"-range-arrow"),style:Jt}),function(){var e,t=FW(i,Fe[ke],H),n=NW({prefixCls:i,components:oe,needConfirmButton:se,okDisabled:!rW(Pe,ke)||D&&D(Pe[ke]),locale:g,rangeList:Wt,onOk:function(){rW(Pe,ke)&&(et(Pe,ke),ne&&ne(Pe))}});if("time"===k||C)e=Gt();else{var r=Re(ke),o=Yq(r,k,v),l=Fe[ke]===k,u=Gt(!!l&&"left",{pickerValue:r,onPickerValueChange:function(e){Ae(e,ke)}}),c=Gt("right",{pickerValue:o,onPickerValueChange:function(e){Ae(Yq(e,k,v,-1),ke)}});e="rtl"===ae?a.createElement(a.Fragment,null,c,l&&u):a.createElement(a.Fragment,null,u,l&&c)}var s=a.createElement(a.Fragment,null,a.createElement("div",{className:"".concat(i,"-panels")},e),(t||n)&&a.createElement("div",{className:"".concat(i,"-footer")},t,n));return T&&(s=T(s)),a.createElement("div",{className:"".concat(i,"-panel-container"),style:{marginLeft:Yt},ref:pe,onMouseDown:function(e){e.preventDefault()}},s)}());L&&(Zt=a.createElement("span",{className:"".concat(i,"-suffix")},L)),V&&(rW(xe,0)&&!Oe[0]||rW(xe,1)&&!Oe[1])&&(Qt=a.createElement("span",{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onMouseUp:function(e){e.preventDefault(),e.stopPropagation();var t=xe;Oe[0]||(t=oW(t,null,0)),Oe[1]||(t=oW(t,null,1)),et(t,null),Ze(!1,ke)},className:"".concat(i,"-clear")},B||a.createElement("span",{className:"".concat(i,"-clear-btn")})));var tn={size:Aq(k,we[0],v)},nn=0,rn=0;he.current&&ve.current&&ge.current&&(0===ke?rn=he.current.offsetWidth:(nn=Kt,rn=ve.current.offsetWidth));var on="rtl"===ae?{right:nn}:{left:nn};return a.createElement(cq.Provider,{value:{operationRef:Ee,hideHeader:"time"===k,onDateMouseEnter:function(e){Ct(oW(Pe,e,ke)),0===ke?St(e):Rt(e)},onDateMouseLeave:function(){Ct(oW(Pe,null,ke)),0===ke?xt():At()},hideRanges:!0,onSelect:function(e,t){var n=oW(Pe,e,ke);"submit"===t||"key"!==t&&!se?(et(n,ke),0===ke?xt():At()):Me(n)},open:He}},a.createElement(DY,{visible:He,popupElement:en,popupStyle:s,prefixCls:i,dropdownClassName:d,dropdownAlign:p,getPopupContainer:h,transitionName:f,range:!0,direction:ae},a.createElement("div",lq({ref:fe,className:u$(i,"".concat(i,"-range"),c,(t={},UH(t,"".concat(i,"-disabled"),Oe[0]&&Oe[1]),UH(t,"".concat(i,"-focused"),0===ke?Nt:zt),UH(t,"".concat(i,"-rtl"),"rtl"===ae),t)),style:u,onClick:function(e){te&&te(e),!He&&!me.current.contains(e.target)&&!ye.current.contains(e.target)&&(Oe[0]?Oe[1]||Qe(1):Qe(0))},onMouseEnter:Q,onMouseLeave:ee,onMouseDown:function(e){J&&J(e),He&&(Nt||zt)&&!me.current.contains(e.target)&&!ye.current.contains(e.target)&&e.preventDefault()},onMouseUp:Z},nW(e)),a.createElement("div",{className:u$("".concat(i,"-input"),(n={},UH(n,"".concat(i,"-input-active"),0===ke),UH(n,"".concat(i,"-input-placeholder"),!!Ot),n)),ref:he},a.createElement("input",lq({id:l,disabled:Oe[0],readOnly:z||"function"==typeof we[0]||!Vt,value:Ot||dt,onChange:function(e){ft(e.target.value)},autoFocus:y,placeholder:rW(m,0)||"",ref:me},Tt,tn,{autoComplete:ce}))),a.createElement("div",{className:"".concat(i,"-range-separator"),ref:ge},S),a.createElement("div",{className:u$("".concat(i,"-input"),(r={},UH(r,"".concat(i,"-input-active"),1===ke),UH(r,"".concat(i,"-input-placeholder"),!!It),r)),ref:ve},a.createElement("input",lq({disabled:Oe[1],readOnly:z||"function"==typeof we[0]||!Ut,value:It||vt,onChange:function(e){gt(e.target.value)},placeholder:rW(m,1)||"",ref:ye},Bt,tn,{autoComplete:ce}))),a.createElement("div",{className:"".concat(i,"-active-bar"),style:qH(qH({},on),{},{width:rn,position:"absolute"})}),Zt,Qt)))}var HY=function(e){nq(n,e);var t=aq(n);function n(){var e;ZH(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).pickerRef=a.createRef(),e.focus=function(){e.pickerRef.current&&e.pickerRef.current.focus()},e.blur=function(){e.pickerRef.current&&e.pickerRef.current.blur()},e}return eq(n,[{key:"render",value:function(){return a.createElement(UY,lq({},this.props,{pickerRef:this.pickerRef}))}}]),n}(a.Component),qY={ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,TAB:9,BACKSPACE:8,DELETE:46,DEL:46,END:35,SPACE:32},WY=function(e){return e.ESC="Escape",e.LEFT="ArrowLeft",e.UP="ArrowUp",e.RIGHT="ArrowRight",e.DOWN="ArrowDown",e.ENTER="Enter",e.TAB="Tab",e.SPACE=" ",e.DEL="Backspace",e.BACKSPACE="Backspace",e}(WY||{});function GY(e){var t=e.metaKey,n=e.ctrlKey,r=e.keyCode;return!t&&!n&&32!==r&&(r>=65&&r<=90||r>=48&&r<=57||r>=96&&r<=105||r>=186&&r<=192||r>=219&&r<=222||r>=106&&r<=111||32===r||61===r||173===r||(229===r||0===r)&&"Shift"!==e.key)}function KY(e,t,n){for(var r=0,o=t>0?1:-1;Math.abs(r)<Math.abs(t)&&!1!==n(e+r);)r+=o}var YY={exports:{}};!function(e,t){e.exports=function(){var e=function(e,t,n,r){var o={features:null,bind:function(e,t,n,r){var o=(r?"remove":"add")+"EventListener";t=t.split(" ");for(var i=0;i<t.length;i++)t[i]&&e[o](t[i],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0!==e?e:document.documentElement.scrollTop},unbind:function(e,t,n){o.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){o.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(o.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var r=e.length;r--;)if(e[r][n]===t)return r;return-1},extend:function(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){if(n&&e.hasOwnProperty(r))continue;e[r]=t[r]}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features)return o.features;var e=o.createEl().style,t="",n={};if(n.oldIE=document.all&&!document.addEventListener,n.touch="ontouchstart"in window,window.requestAnimationFrame&&(n.raf=window.requestAnimationFrame,n.caf=window.cancelAnimationFrame),n.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled,!n.pointerEvent){var r=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var i=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);i&&i.length>0&&(i=parseInt(i[1],10))>=1&&i<8&&(n.isOldIOSPhone=!0)}var a=r.match(/Android\s([0-9\.]*)/),l=a?a[1]:0;(l=parseFloat(l))>=1&&(l<4.4&&(n.isOldAndroid=!0),n.androidVersion=l),n.isMobileOpera=/opera mini|opera mobi/i.test(r)}for(var u,c,s=["transform","perspective","animationName"],d=["","webkit","Moz","ms","O"],f=0;f<4;f++){t=d[f];for(var p=0;p<3;p++)u=s[p],c=t+(t?u.charAt(0).toUpperCase()+u.slice(1):u),!n[u]&&c in e&&(n[u]=c);t&&!n.raf&&(t=t.toLowerCase(),n.raf=window[t+"RequestAnimationFrame"],n.raf&&(n.caf=window[t+"CancelAnimationFrame"]||window[t+"CancelRequestAnimationFrame"]))}if(!n.raf){var h=0;n.raf=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-h)),r=window.setTimeout((function(){e(t+n)}),n);return h=t+n,r},n.caf=function(e){clearTimeout(e)}}return n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o.features=n,n}};o.detectFeatures(),o.features.oldIE&&(o.bind=function(e,t,n,r){t=t.split(" ");for(var o,i=(r?"detach":"attach")+"Event",a=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(o=t[l])if("object"==typeof n&&n.handleEvent){if(r){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=a;e[i]("on"+o,n["oldIE"+o])}else e[i]("on"+o,n)});var i=this,a=25,l=3,u={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e||t.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};o.extend(u,r);var c,s,d,f,p,h,v,g,m,y,b,w,_,k,C,E,O,S,x,j,I,R,A,D,P,M,T,F,N,V,L,B,$,z,U,H,q,W,G,K,Y,X,J,Z,Q,ee,te,ne,re,oe,ie,ae,le,ue,ce,se,de=function(){return{x:0,y:0}},fe=de(),pe=de(),he=de(),ve={},ge=0,me={},ye=de(),be=0,we=!0,_e=[],ke={},Ce=!1,Ee=function(e,t){o.extend(i,t.publicMethods),_e.push(e)},Oe=function(e){var t=Qt();return e>t-1?e-t:e<0?t+e:e},Se={},xe=function(e,t){return Se[e]||(Se[e]=[]),Se[e].push(t)},je=function(e){var t=Se[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var r=0;r<t.length;r++)t[r].apply(i,n)}},Ie=function(){return(new Date).getTime()},Re=function(e){ue=e,i.bg.style.opacity=e*u.bgOpacity},Ae=function(e,t,n,r,o){(!Ce||o&&o!==i.currItem)&&(r/=o?o.fitRatio:i.currItem.fitRatio),e[R]=w+t+"px, "+n+"px"+_+" scale("+r+")"},De=function(e){re&&(e&&(y>i.currItem.fitRatio?Ce||(dn(i.currItem,!1,!0),Ce=!0):Ce&&(dn(i.currItem),Ce=!1)),Ae(re,he.x,he.y,y))},Pe=function(e){e.container&&Ae(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Me=function(e,t){t[R]=w+e+"px, 0px"+_},Te=function(e,t){if(!u.loop&&t){var n=f+(ye.x*ge-e)/ye.x,r=Math.round(e-yt.x);(n<0&&r>0||n>=Qt()-1&&r<0)&&(e=yt.x+r*u.mainScrollEndFriction)}yt.x=e,Me(e,p)},Fe=function(e,t){var n=bt[e]-me[e];return pe[e]+fe[e]+n-n*(t/b)},Ne=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Ve=function(e){e.x=Math.round(e.x),e.y=Math.round(e.y)},Le=null,Be=function(){Le&&(o.unbind(document,"mousemove",Be),o.addClass(e,"pswp--has_mouse"),u.mouseUsed=!0,je("mouseUsed")),Le=setTimeout((function(){Le=null}),100)},$e=function(){o.bind(document,"keydown",i),L.transform&&o.bind(i.scrollWrap,"click",i),u.mouseUsed||o.bind(document,"mousemove",Be),o.bind(window,"resize scroll orientationchange",i),je("bindEvents")},ze=function(){o.unbind(window,"resize scroll orientationchange",i),o.unbind(window,"scroll",m.scroll),o.unbind(document,"keydown",i),o.unbind(document,"mousemove",Be),L.transform&&o.unbind(i.scrollWrap,"click",i),G&&o.unbind(window,v,i),clearTimeout(B),je("unbindEvents")},Ue=function(e,t){var n=ln(i.currItem,ve,e);return t&&(ne=n),n},He=function(e){return e||(e=i.currItem),e.initialZoomLevel},qe=function(e){return e||(e=i.currItem),e.w>0?u.maxSpreadZoom:1},We=function(e,t,n,r){return r===i.currItem.initialZoomLevel?(n[e]=i.currItem.initialPosition[e],!0):(n[e]=Fe(e,r),n[e]>t.min[e]?(n[e]=t.min[e],!0):n[e]<t.max[e]&&(n[e]=t.max[e],!0))},Ge=function(){if(R){var t=L.perspective&&!D;return w="translate"+(t?"3d(":"("),void(_=L.perspective?", 0px)":")")}R="left",o.addClass(e,"pswp--ie"),Me=function(e,t){t.left=e+"px"},Pe=function(e){var t=e.fitRatio>1?1:e.fitRatio,n=e.container.style,r=t*e.w,o=t*e.h;n.width=r+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},De=function(){if(re){var e=re,t=i.currItem,n=t.fitRatio>1?1:t.fitRatio,r=n*t.w,o=n*t.h;e.width=r+"px",e.height=o+"px",e.left=he.x+"px",e.top=he.y+"px"}}},Ke=function(e){var t="";u.escKey&&27===e.keyCode?t="close":u.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),t&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&(e.preventDefault?e.preventDefault():e.returnValue=!1,i[t]())},Ye=function(e){!e||(X||Y||oe||q)&&(e.preventDefault(),e.stopPropagation())},Xe=function(){i.setScrollOffset(0,o.getScrollY())},Je={},Ze=0,Qe=function(e){Je[e]&&(Je[e].raf&&M(Je[e].raf),Ze--,delete Je[e])},et=function(e){Je[e]&&Qe(e),Je[e]||(Ze++,Je[e]={})},tt=function(){for(var e in Je)Je.hasOwnProperty(e)&&Qe(e)},nt=function(e,t,n,r,o,i,a){var l,u=Ie();et(e);var c=function(){if(Je[e]){if((l=Ie()-u)>=r)return Qe(e),i(n),void(a&&a());i((n-t)*o(l/r)+t),Je[e].raf=P(c)}};c()},rt={shout:je,listen:xe,viewportSize:ve,options:u,isMainScrollAnimating:function(){return oe},getZoomLevel:function(){return y},getCurrentIndex:function(){return f},isDragging:function(){return G},isZooming:function(){return ee},setScrollOffset:function(e,t){me.x=e,V=me.y=t,je("updateScrollOffset",me)},applyZoomPan:function(e,t,n,r){he.x=t,he.y=n,y=e,De(r)},init:function(){if(!c&&!s){var n;i.framework=o,i.template=e,i.bg=o.getChildByClass(e,"pswp__bg"),T=e.className,c=!0,L=o.detectFeatures(),P=L.raf,M=L.caf,R=L.transform,N=L.oldIE,i.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap"),i.container=o.getChildByClass(i.scrollWrap,"pswp__container"),p=i.container.style,i.itemHolders=E=[{el:i.container.children[0],wrap:0,index:-1},{el:i.container.children[1],wrap:0,index:-1},{el:i.container.children[2],wrap:0,index:-1}],E[0].el.style.display=E[2].el.style.display="none",Ge(),m={resize:i.updateSize,orientationchange:function(){clearTimeout(B),B=setTimeout((function(){ve.x!==i.scrollWrap.clientWidth&&i.updateSize()}),500)},scroll:Xe,keydown:Ke,click:Ye};var r=L.isOldIOSPhone||L.isOldAndroid||L.isMobileOpera;for((!L.animationName||!L.transform||r)&&(u.showAnimationDuration=u.hideAnimationDuration=0),n=0;n<_e.length;n++)i["init"+_e[n]]();t&&(i.ui=new t(i,o)).init(),je("firstUpdate"),f=f||u.index||0,(isNaN(f)||f<0||f>=Qt())&&(f=0),i.currItem=Zt(f),(L.isOldIOSPhone||L.isOldAndroid)&&(we=!1),e.setAttribute("aria-hidden","false"),u.modal&&(we?e.style.position="fixed":(e.style.position="absolute",e.style.top=o.getScrollY()+"px")),void 0===V&&(je("initialLayout"),V=F=o.getScrollY());var a="pswp--open ";for(u.mainClass&&(a+=u.mainClass+" "),u.showHideOpacity&&(a+="pswp--animate_opacity "),a+=D?"pswp--touch":"pswp--notouch",a+=L.animationName?" pswp--css_animation":"",a+=L.svg?" pswp--svg":"",o.addClass(e,a),i.updateSize(),h=-1,be=null,n=0;n<l;n++)Me((n+h)*ye.x,E[n].el.style);N||o.bind(i.scrollWrap,g,i),xe("initialZoomInEnd",(function(){i.setContent(E[0],f-1),i.setContent(E[2],f+1),E[0].el.style.display=E[2].el.style.display="block",u.focus&&e.focus(),$e()})),i.setContent(E[1],f),i.updateCurrItem(),je("afterInit"),we||(k=setInterval((function(){!Ze&&!G&&!ee&&y===i.currItem.initialZoomLevel&&i.updateSize()}),1e3)),o.addClass(e,"pswp--visible")}},close:function(){!c||(c=!1,s=!0,je("close"),ze(),en(i.currItem,null,!0,i.destroy))},destroy:function(){je("destroy"),Kt&&clearTimeout(Kt),e.setAttribute("aria-hidden","true"),e.className=T,k&&clearInterval(k),o.unbind(i.scrollWrap,g,i),o.unbind(window,"scroll",i),Et(),tt(),Se=null},panTo:function(e,t,n){n||(e>ne.min.x?e=ne.min.x:e<ne.max.x&&(e=ne.max.x),t>ne.min.y?t=ne.min.y:t<ne.max.y&&(t=ne.max.y)),he.x=e,he.y=t,De()},handleEvent:function(e){e=e||window.event,m[e.type]&&m[e.type](e)},goTo:function(e){var t=(e=Oe(e))-f;be=t,f=e,i.currItem=Zt(f),ge-=t,Te(ye.x*ge),tt(),oe=!1,i.updateCurrItem()},next:function(){i.goTo(f+1)},prev:function(){i.goTo(f-1)},updateCurrZoomItem:function(e){if(e&&je("beforeChange",0),E[1].el.children.length){var t=E[1].el.children[0];re=o.hasClass(t,"pswp__zoom-wrap")?t.style:null}else re=null;ne=i.currItem.bounds,b=y=i.currItem.initialZoomLevel,he.x=ne.center.x,he.y=ne.center.y,e&&je("afterChange")},invalidateCurrItems:function(){C=!0;for(var e=0;e<l;e++)E[e].item&&(E[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==be){var t,n=Math.abs(be);if(!(e&&n<2)){i.currItem=Zt(f),Ce=!1,je("beforeChange",be),n>=l&&(h+=be+(be>0?-l:l),n=l);for(var r=0;r<n;r++)be>0?(t=E.shift(),E[l-1]=t,h++,Me((h+2)*ye.x,t.el.style),i.setContent(t,f-n+r+1+1)):(t=E.pop(),E.unshift(t),h--,Me(h*ye.x,t.el.style),i.setContent(t,f+n-r-1-1));if(re&&1===Math.abs(be)){var o=Zt(O);o.initialZoomLevel!==y&&(ln(o,ve),dn(o),Pe(o))}be=0,i.updateCurrZoomItem(),O=f,je("afterChange")}}},updateSize:function(t){if(!we&&u.modal){var n=o.getScrollY();if(V!==n&&(e.style.top=n+"px",V=n),!t&&ke.x===window.innerWidth&&ke.y===window.innerHeight)return;ke.x=window.innerWidth,ke.y=window.innerHeight,e.style.height=ke.y+"px"}if(ve.x=i.scrollWrap.clientWidth,ve.y=i.scrollWrap.clientHeight,Xe(),ye.x=ve.x+Math.round(ve.x*u.spacing),ye.y=ve.y,Te(ye.x*ge),je("beforeResize"),void 0!==h){for(var r,a,c,s=0;s<l;s++)r=E[s],Me((s+h)*ye.x,r.el.style),c=f+s-1,u.loop&&Qt()>2&&(c=Oe(c)),(a=Zt(c))&&(C||a.needsUpdate||!a.bounds)?(i.cleanSlide(a),i.setContent(r,c),1===s&&(i.currItem=a,i.updateCurrZoomItem(!0)),a.needsUpdate=!1):-1===r.index&&c>=0&&i.setContent(r,c),a&&a.container&&(ln(a,ve),dn(a),Pe(a));C=!1}b=y=i.currItem.initialZoomLevel,(ne=i.currItem.bounds)&&(he.x=ne.center.x,he.y=ne.center.y,De(!0)),je("resize")},zoomTo:function(e,t,n,r,i){t&&(b=y,bt.x=Math.abs(t.x)-he.x,bt.y=Math.abs(t.y)-he.y,Ne(pe,he));var a=Ue(e,!1),l={};We("x",a,l,e),We("y",a,l,e);var u=y,c={x:he.x,y:he.y};Ve(l);var s=function(t){1===t?(y=e,he.x=l.x,he.y=l.y):(y=(e-u)*t+u,he.x=(l.x-c.x)*t+c.x,he.y=(l.y-c.y)*t+c.y),i&&i(t),De(1===t)};n?nt("customZoomTo",0,1,n,r||o.easing.sine.inOut,s):s(1)}},ot=30,it=10,at={},lt={},ut={},ct={},st={},dt=[],ft={},pt=[],ht={},vt=0,gt=de(),mt=0,yt=de(),bt=de(),wt=de(),_t=function(e,t){return e.x===t.x&&e.y===t.y},kt=function(e,t){return Math.abs(e.x-t.x)<a&&Math.abs(e.y-t.y)<a},Ct=function(e,t){return ht.x=Math.abs(e.x-t.x),ht.y=Math.abs(e.y-t.y),Math.sqrt(ht.x*ht.x+ht.y*ht.y)},Et=function(){J&&(M(J),J=null)},Ot=function(){G&&(J=P(Ot),$t())},St=function(){return!("fit"===u.scaleMode&&y===i.currItem.initialZoomLevel)},xt=function(e,t){return!(!e||e===document||e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(t(e)?e:xt(e.parentNode,t))},jt={},It=function(e,t){return jt.prevent=!xt(e.target,u.isClickableElement),je("preventDragEvent",e,t,jt),jt.prevent},Rt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},At=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},Dt=function(e,t,n){if(e-z>50){var r=pt.length>2?pt.shift():{};r.x=t,r.y=n,pt.push(r),z=e}},Pt=function(){var e=he.y-i.currItem.initialPosition.y;return 1-Math.abs(e/(ve.y/2))},Mt={},Tt={},Ft=[],Nt=function(e){for(;Ft.length>0;)Ft.pop();return A?(se=0,dt.forEach((function(e){0===se?Ft[0]=e:1===se&&(Ft[1]=e),se++}))):e.type.indexOf("touch")>-1?e.touches&&e.touches.length>0&&(Ft[0]=Rt(e.touches[0],Mt),e.touches.length>1&&(Ft[1]=Rt(e.touches[1],Tt))):(Mt.x=e.pageX,Mt.y=e.pageY,Mt.id="",Ft[0]=Mt),Ft},Vt=function(e,t){var n,r,o,a,l=he[e]+t[e],c=t[e]>0,s=yt.x+t.x,d=yt.x-ft.x;if(n=l>ne.min[e]||l<ne.max[e]?u.panEndFriction:1,l=he[e]+t[e]*n,(u.allowPanToNext||y===i.currItem.initialZoomLevel)&&(re?"h"===ie&&"x"===e&&!Y&&(c?(l>ne.min[e]&&(n=u.panEndFriction,ne.min[e],r=ne.min[e]-pe[e]),(r<=0||d<0)&&Qt()>1?(a=s,d<0&&s>ft.x&&(a=ft.x)):ne.min.x!==ne.max.x&&(o=l)):(l<ne.max[e]&&(n=u.panEndFriction,ne.max[e],r=pe[e]-ne.max[e]),(r<=0||d>0)&&Qt()>1?(a=s,d>0&&s<ft.x&&(a=ft.x)):ne.min.x!==ne.max.x&&(o=l))):a=s,"x"===e))return void 0!==a&&(Te(a,!0),Z=a!==ft.x),ne.min.x!==ne.max.x&&(void 0!==o?he.x=o:Z||(he.x+=t.x*n)),void 0!==a;oe||Z||y>i.currItem.fitRatio&&(he[e]+=t[e]*n)},Lt=function(e){if(!("mousedown"===e.type&&e.button>0)){if(Jt)return void e.preventDefault();if(!W||"mousedown"!==e.type){if(It(e,!0)&&e.preventDefault(),je("pointerDown"),A){var t=o.arraySearch(dt,e.pointerId,"id");t<0&&(t=dt.length),dt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Nt(e),r=n.length;Q=null,tt(),(!G||1===r)&&(G=ae=!0,o.bind(window,v,i),H=ce=le=q=Z=X=K=Y=!1,ie=null,je("firstTouchStart",n),Ne(pe,he),fe.x=fe.y=0,Ne(ct,n[0]),Ne(st,ct),ft.x=ye.x*ge,pt=[{x:ct.x,y:ct.y}],z=$=Ie(),Ue(y,!0),Et(),Ot()),!ee&&r>1&&!oe&&!Z&&(b=y,Y=!1,ee=K=!0,fe.y=fe.x=0,Ne(pe,he),Ne(at,n[0]),Ne(lt,n[1]),At(at,lt,wt),bt.x=Math.abs(wt.x)-he.x,bt.y=Math.abs(wt.y)-he.y,te=Ct(at,lt))}}},Bt=function(e){if(e.preventDefault(),A){var t=o.arraySearch(dt,e.pointerId,"id");if(t>-1){var n=dt[t];n.x=e.pageX,n.y=e.pageY}}if(G){var r=Nt(e);if(ie||X||ee)Q=r;else if(yt.x!==ye.x*ge)ie="h";else{var i=Math.abs(r[0].x-ct.x)-Math.abs(r[0].y-ct.y);Math.abs(i)>=it&&(ie=i>0?"h":"v",Q=r)}}},$t=function(){if(Q){var e=Q.length;if(0!==e)if(Ne(at,Q[0]),ut.x=at.x-ct.x,ut.y=at.y-ct.y,ee&&e>1){if(ct.x=at.x,ct.y=at.y,!ut.x&&!ut.y&&_t(Q[1],lt))return;Ne(lt,Q[1]),Y||(Y=!0,je("zoomGestureStarted"));var t=Ct(at,lt),n=Wt(t);n>i.currItem.initialZoomLevel+i.currItem.initialZoomLevel/15&&(ce=!0);var r=1,o=He(),a=qe();if(n<o)if(u.pinchToClose&&!ce&&b<=i.currItem.initialZoomLevel){var l=1-(o-n)/(o/1.2);Re(l),je("onPinchClose",l),le=!0}else(r=(o-n)/o)>1&&(r=1),n=o-r*(o/3);else n>a&&((r=(n-a)/(6*o))>1&&(r=1),n=a+r*o);r<0&&(r=0),At(at,lt,gt),fe.x+=gt.x-wt.x,fe.y+=gt.y-wt.y,Ne(wt,gt),he.x=Fe("x",n),he.y=Fe("y",n),H=n>y,y=n,De()}else{if(!ie||(ae&&(ae=!1,Math.abs(ut.x)>=it&&(ut.x-=Q[0].x-st.x),Math.abs(ut.y)>=it&&(ut.y-=Q[0].y-st.y)),ct.x=at.x,ct.y=at.y,0===ut.x&&0===ut.y))return;if("v"===ie&&u.closeOnVerticalDrag&&!St()){fe.y+=ut.y,he.y+=ut.y;var c=Pt();return q=!0,je("onVerticalDrag",c),Re(c),void De()}Dt(Ie(),at.x,at.y),X=!0,ne=i.currItem.bounds,Vt("x",ut)||(Vt("y",ut),Ve(he),De())}}},zt=function(e){if(L.isOldAndroid){if(W&&"mouseup"===e.type)return;e.type.indexOf("touch")>-1&&(clearTimeout(W),W=setTimeout((function(){W=0}),600))}var t;if(je("pointerUp"),It(e,!1)&&e.preventDefault(),A){var n=o.arraySearch(dt,e.pointerId,"id");if(n>-1)if(t=dt.splice(n,1)[0],navigator.msPointerEnabled){var r={4:"mouse",2:"touch",3:"pen"};t.type=r[e.pointerType],t.type||(t.type=e.pointerType||"mouse")}else t.type=e.pointerType||"mouse"}var a,l=Nt(e),c=l.length;if("mouseup"===e.type&&(c=0),2===c)return Q=null,!0;1===c&&Ne(st,l[0]),0===c&&!ie&&!oe&&(t||("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),je("touchRelease",e,t));var s=-1;if(0===c&&(G=!1,o.unbind(window,v,i),Et(),ee?s=0:-1!==mt&&(s=Ie()-mt)),mt=1===c?Ie():-1,a=-1!==s&&s<150?"zoom":"swipe",ee&&c<2&&(ee=!1,1===c&&(a="zoomPointerUp"),je("zoomGestureEnded")),Q=null,X||Y||oe||q){if(tt(),U||(U=Ut()),U.calculateSwipeSpeed("x"),q){if(Pt()<u.verticalDragRange)i.close();else{var d=he.y,f=ue;nt("verticalDrag",0,1,300,o.easing.cubic.out,(function(e){he.y=(i.currItem.initialPosition.y-d)*e+d,Re((1-f)*e+f),De()})),je("onVerticalDrag",1)}return}if((Z||oe)&&0===c){if(qt(a,U))return;a="zoomPointerUp"}if(!oe){if("swipe"!==a)return void Gt();!Z&&y>i.currItem.fitRatio&&Ht(U)}}},Ut=function(){var e,t,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(r){pt.length>1?(e=Ie()-z+50,t=pt[pt.length-2][r]):(e=Ie()-$,t=st[r]),n.lastFlickOffset[r]=ct[r]-t,n.lastFlickDist[r]=Math.abs(n.lastFlickOffset[r]),n.lastFlickDist[r]>20?n.lastFlickSpeed[r]=n.lastFlickOffset[r]/e:n.lastFlickSpeed[r]=0,Math.abs(n.lastFlickSpeed[r])<.1&&(n.lastFlickSpeed[r]=0),n.slowDownRatio[r]=.95,n.slowDownRatioReverse[r]=1-n.slowDownRatio[r],n.speedDecelerationRatio[r]=1},calculateOverBoundsAnimOffset:function(e,t){n.backAnimStarted[e]||(he[e]>ne.min[e]?n.backAnimDestination[e]=ne.min[e]:he[e]<ne.max[e]&&(n.backAnimDestination[e]=ne.max[e]),void 0!==n.backAnimDestination[e]&&(n.slowDownRatio[e]=.7,n.slowDownRatioReverse[e]=1-n.slowDownRatio[e],n.speedDecelerationRatioAbs[e]<.05&&(n.lastFlickSpeed[e]=0,n.backAnimStarted[e]=!0,nt("bounceZoomPan"+e,he[e],n.backAnimDestination[e],t||300,o.easing.sine.out,(function(t){he[e]=t,De()})))))},calculateAnimOffset:function(e){n.backAnimStarted[e]||(n.speedDecelerationRatio[e]=n.speedDecelerationRatio[e]*(n.slowDownRatio[e]+n.slowDownRatioReverse[e]-n.slowDownRatioReverse[e]*n.timeDiff/10),n.speedDecelerationRatioAbs[e]=Math.abs(n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]),n.distanceOffset[e]=n.lastFlickSpeed[e]*n.speedDecelerationRatio[e]*n.timeDiff,he[e]+=n.distanceOffset[e])},panAnimLoop:function(){if(Je.zoomPan&&(Je.zoomPan.raf=P(n.panAnimLoop),n.now=Ie(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),De(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05))return he.x=Math.round(he.x),he.y=Math.round(he.y),De(),void Qe("zoomPan")}};return n},Ht=function(e){if(e.calculateSwipeSpeed("y"),ne=i.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05)return e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0;et("zoomPan"),e.lastNow=Ie(),e.panAnimLoop()},qt=function(e,t){var n,r,a;if(oe||(vt=f),"swipe"===e){var l=ct.x-st.x,c=t.lastFlickDist.x<10;l>ot&&(c||t.lastFlickOffset.x>20)?r=-1:l<-ot&&(c||t.lastFlickOffset.x<-20)&&(r=1)}r&&((f+=r)<0?(f=u.loop?Qt()-1:0,a=!0):f>=Qt()&&(f=u.loop?0:Qt()-1,a=!0),(!a||u.loop)&&(be+=r,ge-=r,n=!0));var s,d=ye.x*ge,p=Math.abs(d-yt.x);return n||d>yt.x==t.lastFlickSpeed.x>0?(s=Math.abs(t.lastFlickSpeed.x)>0?p/Math.abs(t.lastFlickSpeed.x):333,s=Math.min(s,400),s=Math.max(s,250)):s=333,vt===f&&(n=!1),oe=!0,je("mainScrollAnimStart"),nt("mainScroll",yt.x,d,s,o.easing.cubic.out,Te,(function(){tt(),oe=!1,vt=-1,(n||vt!==f)&&i.updateCurrItem(),je("mainScrollAnimComplete")})),n&&i.updateCurrItem(!0),n},Wt=function(e){return 1/te*e*b},Gt=function(){var e=y,t=He(),n=qe();y<t?e=t:y>n&&(e=n);var r,a=1,l=ue;return le&&!H&&!ce&&y<t?(i.close(),!0):(le&&(r=function(e){Re((a-l)*e+l)}),i.zoomTo(e,0,200,o.easing.cubic.out,r),!0)};Ee("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,r,o){S=e+t,x=e+n,j=e+r,I=o?e+o:""};(A=L.pointerEvent)&&L.touch&&(L.touch=!1),A?navigator.msPointerEnabled?e("MSPointer","Down","Move","Up","Cancel"):e("pointer","down","move","up","cancel"):L.touch?(e("touch","start","move","end","cancel"),D=!0):e("mouse","down","move","up"),v=x+" "+j+" "+I,g=S,A&&!D&&(D=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),i.likelyTouchDevice=D,m[S]=Lt,m[x]=Bt,m[j]=zt,I&&(m[I]=m[j]),L.touch&&(g+=" mousedown",v+=" mousemove mouseup",m.mousedown=m[S],m.mousemove=m[x],m.mouseup=m[j]),D||(u.allowPanToNext=!1)}}});var Kt,Yt,Xt,Jt,Zt,Qt,en=function(t,n,r,a){var l;Kt&&clearTimeout(Kt),Jt=!0,Xt=!0,t.initialLayout?(l=t.initialLayout,t.initialLayout=null):l=u.getThumbBoundsFn&&u.getThumbBoundsFn(f);var c,s,p=r?u.hideAnimationDuration:u.showAnimationDuration,h=function(){Qe("initialZoom"),r?(i.template.removeAttribute("style"),i.bg.removeAttribute("style")):(Re(1),n&&(n.style.display="block"),o.addClass(e,"pswp--animated-in"),je("initialZoom"+(r?"OutEnd":"InEnd"))),a&&a(),Jt=!1};if(!p||!l||void 0===l.x)return je("initialZoom"+(r?"Out":"In")),y=t.initialZoomLevel,Ne(he,t.initialPosition),De(),e.style.opacity=r?0:1,Re(1),void(p?setTimeout((function(){h()}),p):h());c=d,s=!i.currItem.src||i.currItem.loadError||u.showHideOpacity,t.miniImg&&(t.miniImg.style.webkitBackfaceVisibility="hidden"),r||(y=l.w/t.w,he.x=l.x,he.y=l.y-F,i[s?"template":"bg"].style.opacity=.001,De()),et("initialZoom"),r&&!c&&o.removeClass(e,"pswp--animated-in"),s&&(r?o[(c?"remove":"add")+"Class"](e,"pswp--animate_opacity"):setTimeout((function(){o.addClass(e,"pswp--animate_opacity")}),30)),Kt=setTimeout((function(){if(je("initialZoom"+(r?"Out":"In")),r){var n=l.w/t.w,i={x:he.x,y:he.y},a=y,u=ue,d=function(t){1===t?(y=n,he.x=l.x,he.y=l.y-V):(y=(n-a)*t+a,he.x=(l.x-i.x)*t+i.x,he.y=(l.y-V-i.y)*t+i.y),De(),s?e.style.opacity=1-t:Re(u-t*u)};c?nt("initialZoom",0,1,p,o.easing.cubic.out,d,h):(d(1),Kt=setTimeout(h,p+20))}else y=t.initialZoomLevel,Ne(he,t.initialPosition),De(),Re(1),s?e.style.opacity=1:Re(1),Kt=setTimeout(h,p+20)}),r?25:90)},tn={},nn=[],rn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Yt.length}},on=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},an=function(e,t,n){var r=e.bounds;r.center.x=Math.round((tn.x-t)/2),r.center.y=Math.round((tn.y-n)/2)+e.vGap.top,r.max.x=t>tn.x?Math.round(tn.x-t):r.center.x,r.max.y=n>tn.y?Math.round(tn.y-n)+e.vGap.top:r.center.y,r.min.x=t>tn.x?0:r.center.x,r.min.y=n>tn.y?e.vGap.top:r.center.y},ln=function(e,t,n){if(e.src&&!e.loadError){var r=!n;if(r&&(e.vGap||(e.vGap={top:0,bottom:0}),je("parseVerticalMargin",e)),tn.x=t.x,tn.y=t.y-e.vGap.top-e.vGap.bottom,r){var o=tn.x/e.w,i=tn.y/e.h;e.fitRatio=o<i?o:i;var a=u.scaleMode;"orig"===a?n=1:"fit"===a&&(n=e.fitRatio),n>1&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds=on())}return n?(an(e,e.w*n,e.h*n),r&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds=on(),e.initialPosition=e.bounds.center,e.bounds},un=function(e,t,n,r,o,a){t.loadError||r&&(t.imageAppended=!0,dn(t,r,t===i.currItem&&Ce),n.appendChild(r),a&&setTimeout((function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)}),500))},cn=function(e){e.loading=!0,e.loaded=!1;var t=e.img=o.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},sn=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=u.errorMsg.replace("%url%",e.src),!0},dn=function(e,t,n){if(e.src){t||(t=e.container.lastChild);var r=n?e.w:Math.round(e.w*e.fitRatio),o=n?e.h:Math.round(e.h*e.fitRatio);e.placeholder&&!e.loaded&&(e.placeholder.style.width=r+"px",e.placeholder.style.height=o+"px"),t.style.width=r+"px",t.style.height=o+"px"}},fn=function(){if(nn.length){for(var e,t=0;t<nn.length;t++)(e=nn[t]).holder.index===e.index&&un(e.index,e.item,e.baseDiv,e.img,!1,e.clearPlaceholder);nn=[]}};Ee("Controller",{publicMethods:{lazyLoadItem:function(e){e=Oe(e);var t=Zt(e);!t||(t.loaded||t.loading)&&!C||(je("gettingData",e,t),t.src&&cn(t))},initController:function(){o.extend(u,rn,!0),i.items=Yt=n,Zt=i.getItemAt,Qt=u.getNumItemsFn,u.loop,Qt()<3&&(u.loop=!1),xe("beforeChange",(function(e){var t,n=u.preload,r=null===e||e>=0,o=Math.min(n[0],Qt()),a=Math.min(n[1],Qt());for(t=1;t<=(r?a:o);t++)i.lazyLoadItem(f+t);for(t=1;t<=(r?o:a);t++)i.lazyLoadItem(f-t)})),xe("initialLayout",(function(){i.currItem.initialLayout=u.getThumbBoundsFn&&u.getThumbBoundsFn(f)})),xe("mainScrollAnimComplete",fn),xe("initialZoomInEnd",fn),xe("destroy",(function(){for(var e,t=0;t<Yt.length;t++)(e=Yt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);nn=null}))},getItemAt:function(e){return e>=0&&void 0!==Yt[e]&&Yt[e]},allowProgressiveImg:function(){return u.forceProgressiveLoading||!D||u.mouseUsed||screen.width>1200},setContent:function(e,t){u.loop&&(t=Oe(t));var n=i.getItemAt(e.index);n&&(n.container=null);var r,a=i.getItemAt(t);if(a){je("gettingData",t,a),e.index=t,e.item=a;var l=a.container=o.createEl("pswp__zoom-wrap");if(!a.src&&a.html&&(a.html.tagName?l.appendChild(a.html):l.innerHTML=a.html),sn(a),ln(a,ve),!a.src||a.loadError||a.loaded)a.src&&!a.loadError&&((r=o.createEl("pswp__img","img")).style.opacity=1,r.src=a.src,dn(a,r),un(t,a,l,r));else{if(a.loadComplete=function(n){if(c){if(e&&e.index===t){if(sn(n,!0))return n.loadComplete=n.img=null,ln(n,ve),Pe(n),void(e.index===f&&i.updateCurrZoomItem());n.imageAppended?!Jt&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):L.transform&&(oe||Jt)?nn.push({item:n,baseDiv:l,img:n.img,index:t,holder:e,clearPlaceholder:!0}):un(t,n,l,n.img,oe||Jt,!0)}n.loadComplete=null,n.img=null,je("imageLoadComplete",t,n)}},o.features.transform){var s="pswp__img pswp__img--placeholder";s+=a.msrc?"":" pswp__img--placeholder--blank";var d=o.createEl(s,a.msrc?"img":"");a.msrc&&(d.src=a.msrc),dn(a,d),l.appendChild(d),a.placeholder=d}a.loading||cn(a),i.allowProgressiveImg()&&(!Xt&&L.transform?nn.push({item:a,baseDiv:l,img:a.img,index:t,holder:e}):un(t,a,l,a.img,!0,!0))}Xt||t!==f?Pe(a):(re=l.style,en(a,r||a.img)),e.el.innerHTML="",e.el.appendChild(l)}else e.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var pn,hn,vn={},gn=function(e,t,n){var r=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};r.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(r)};Ee("Tap",{publicMethods:{initTap:function(){xe("firstTouchStart",i.onTapStart),xe("touchRelease",i.onTapRelease),xe("destroy",(function(){vn={},pn=null}))},onTapStart:function(e){e.length>1&&(clearTimeout(pn),pn=null)},onTapRelease:function(e,t){if(t&&!X&&!K&&!Ze){var n=t;if(pn&&(clearTimeout(pn),pn=null,kt(n,vn)))return void je("doubleTap",n);if("mouse"===t.type)return void gn(e,t,"mouse");if("BUTTON"===e.target.tagName.toUpperCase()||o.hasClass(e.target,"pswp__single-tap"))return void gn(e,t);Ne(vn,n),pn=setTimeout((function(){gn(e,t),pn=null}),300)}}}}),Ee("DesktopZoom",{publicMethods:{initDesktopZoom:function(){N||(D?xe("mouseUsed",(function(){i.setupDesktopZoom()})):i.setupDesktopZoom(!0))},setupDesktopZoom:function(t){hn={};var n="wheel mousewheel DOMMouseScroll";xe("bindEvents",(function(){o.bind(e,n,i.handleMouseWheel)})),xe("unbindEvents",(function(){hn&&o.unbind(e,n,i.handleMouseWheel)})),i.mouseZoomedIn=!1;var r,a=function(){i.mouseZoomedIn&&(o.removeClass(e,"pswp--zoomed-in"),i.mouseZoomedIn=!1),y<1?o.addClass(e,"pswp--zoom-allowed"):o.removeClass(e,"pswp--zoom-allowed"),l()},l=function(){r&&(o.removeClass(e,"pswp--dragging"),r=!1)};xe("resize",a),xe("afterChange",a),xe("pointerDown",(function(){i.mouseZoomedIn&&(r=!0,o.addClass(e,"pswp--dragging"))})),xe("pointerUp",l),t||a()},handleMouseWheel:function(e){if(y<=i.currItem.fitRatio)return u.modal&&(!u.closeOnScroll||Ze||G?e.preventDefault():R&&Math.abs(e.deltaY)>2&&(d=!0,i.close())),!0;if(e.stopPropagation(),hn.x=0,"deltaX"in e)1===e.deltaMode?(hn.x=18*e.deltaX,hn.y=18*e.deltaY):(hn.x=e.deltaX,hn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(hn.x=-.16*e.wheelDeltaX),e.wheelDeltaY?hn.y=-.16*e.wheelDeltaY:hn.y=-.16*e.wheelDelta;else{if(!("detail"in e))return;hn.y=e.detail}Ue(y,!0);var t=he.x-hn.x,n=he.y-hn.y;(u.modal||t<=ne.min.x&&t>=ne.max.x&&n<=ne.min.y&&n>=ne.max.y)&&e.preventDefault(),i.panTo(t,n)},toggleDesktopZoom:function(t){t=t||{x:ve.x/2+me.x,y:ve.y/2+me.y};var n=u.getDoubleTapZoom(!0,i.currItem),r=y===n;i.mouseZoomedIn=!r,i.zoomTo(r?i.currItem.initialZoomLevel:n,t,333),o[(r?"remove":"add")+"Class"](e,"pswp--zoomed-in")}}});var mn,yn,bn,wn,_n,kn,Cn,En,On,Sn,xn,jn,In={history:!0,galleryUID:1},Rn=function(){return xn.hash.substring(1)},An=function(){mn&&clearTimeout(mn),bn&&clearTimeout(bn)},Dn=function(){var e=Rn(),t={};if(e.length<5)return t;var n,r=e.split("&");for(n=0;n<r.length;n++)if(r[n]){var o=r[n].split("=");o.length<2||(t[o[0]]=o[1])}if(u.galleryPIDs){var i=t.pid;for(t.pid=0,n=0;n<Yt.length;n++)if(Yt[n].pid===i){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return t.pid<0&&(t.pid=0),t},Pn=function(){if(bn&&clearTimeout(bn),Ze||G)bn=setTimeout(Pn,500);else{wn?clearTimeout(yn):wn=!0;var e=f+1,t=Zt(f);t.hasOwnProperty("pid")&&(e=t.pid);var n=Cn+"&gid="+u.galleryUID+"&pid="+e;En||-1===xn.hash.indexOf(n)&&(Sn=!0);var r=xn.href.split("#")[0]+"#"+n;jn?"#"+n!==window.location.hash&&history[En?"replaceState":"pushState"]("",document.title,r):En?xn.replace(r):xn.hash=n,En=!0,yn=setTimeout((function(){wn=!1}),60)}};Ee("History",{publicMethods:{initHistory:function(){if(o.extend(u,In,!0),u.history){xn=window.location,Sn=!1,On=!1,En=!1,Cn=Rn(),jn="pushState"in history,Cn.indexOf("gid=")>-1&&(Cn=(Cn=Cn.split("&gid=")[0]).split("?gid=")[0]),xe("afterChange",i.updateURL),xe("unbindEvents",(function(){o.unbind(window,"hashchange",i.onHashChange)}));var e=function(){kn=!0,On||(Sn?history.back():Cn?xn.hash=Cn:jn?history.pushState("",document.title,xn.pathname+xn.search):xn.hash=""),An()};xe("unbindEvents",(function(){d&&e()})),xe("destroy",(function(){kn||e()})),xe("firstUpdate",(function(){f=Dn().pid}));var t=Cn.indexOf("pid=");t>-1&&"&"===(Cn=Cn.substring(0,t)).slice(-1)&&(Cn=Cn.slice(0,-1)),setTimeout((function(){c&&o.bind(window,"hashchange",i.onHashChange)}),40)}},onHashChange:function(){if(Rn()===Cn)return On=!0,void i.close();wn||(_n=!0,i.goTo(Dn().pid),_n=!1)},updateURL:function(){An(),!_n&&(En?mn=setTimeout(Pn,800):Pn())}}}),o.extend(i,rt)};return e}()}(YY);const XY=YY.exports;var JY={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var l=new o(r,i||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],l]:e._events[u].push(l):(e._events[u]=l,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function l(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),l.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},l.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},l.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,o,i,a){var l=n?n+e:e;if(!this._events[l])return!1;var u,c,s=this._events[l],d=arguments.length;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),d){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,r),!0;case 4:return s.fn.call(s.context,t,r,o),!0;case 5:return s.fn.call(s.context,t,r,o,i),!0;case 6:return s.fn.call(s.context,t,r,o,i,a),!0}for(c=1,u=new Array(d-1);c<d;c++)u[c-1]=arguments[c];s.fn.apply(s.context,u)}else{var f,p=s.length;for(c=0;c<p;c++)switch(s[c].once&&this.removeListener(e,s[c].fn,void 0,!0),d){case 1:s[c].fn.call(s[c].context);break;case 2:s[c].fn.call(s[c].context,t);break;case 3:s[c].fn.call(s[c].context,t,r);break;case 4:s[c].fn.call(s[c].context,t,r,o);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];s[c].fn.apply(s[c].context,u)}}return!0},l.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var l=this._events[i];if(l.fn)l.fn===t&&(!o||l.once)&&(!r||l.context===r)&&a(this,i);else{for(var u=0,c=[],s=l.length;u<s;u++)(l[u].fn!==t||o&&!l[u].once||r&&l[u].context!==r)&&c.push(l[u]);c.length?this._events[i]=1===c.length?c[0]:c:a(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l}(JY);const ZY=JY.exports;function QY(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&null!=l.return&&l.return()}finally{if(o)throw i}}return n}}(e,t)||tX(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eX(e){return function(e){if(Array.isArray(e))return nX(e)}(e)||function(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}(e)||tX(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tX(e,t){if(e){if("string"==typeof e)return nX(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nX(e,t)}}function nX(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rX=l.a.createContext(null);function oX(e,t){var n={rafId:null,timeoutId:null};return n.rafId=window.requestAnimationFrame((function(){n.timeoutId=setTimeout(e,t)})),n}function iX(e){var t=e.timeoutId,n=e.rafId;window.clearTimeout(t),window.cancelAnimationFrame(n)}function aX(e,t){return function(n){var r=l.a.useContext(rX),o=(null==r?void 0:r.register)||oX,i=null==r?void 0:r.next,a=(null==r?void 0:r.cleanUp)||iX,u=QY(l.a.useState(!1),2),c=u[0],s=u[1];return l.a.useEffect((function(){var e=o((function(){return s(!0)}));return function(){return a(e)}}),[]),l.a.useEffect((function(){c&&"function"==typeof i&&i()}),[c]),c?l.a.createElement(e,n):(null==t?void 0:t.fallback)||null}}function lX(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function uX(e,t){return e(t={exports:{}},t.exports),t.exports}var cX=uX((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,s=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.fundamental"):60117,y=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case s:case d:case i:case l:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case f:case g:case v:case u:return e;default:return t}}case o:return t}}}function _(e){return w(e)===d}t.typeOf=w,t.AsyncMode=s,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=i,t.Lazy=g,t.Memo=v,t.Portal=o,t.Profiler=l,t.StrictMode=a,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===l||e===a||e===p||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===m||e.$$typeof===y||e.$$typeof===b)},t.isAsyncMode=function(e){return _(e)||w(e)===s},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===i},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===l},t.isStrictMode=function(e){return w(e)===a},t.isSuspense=function(e){return w(e)===p}}));lX(cX),cX.typeOf,cX.AsyncMode,cX.ConcurrentMode,cX.ContextConsumer,cX.ContextProvider,cX.Element,cX.ForwardRef,cX.Fragment,cX.Lazy,cX.Memo,cX.Portal,cX.Profiler,cX.StrictMode,cX.Suspense,cX.isValidElementType,cX.isAsyncMode,cX.isConcurrentMode,cX.isContextConsumer,cX.isContextProvider,cX.isElement,cX.isForwardRef,cX.isFragment,cX.isLazy,cX.isMemo,cX.isPortal,cX.isProfiler,cX.isStrictMode,cX.isSuspense;var sX=uX((function(e,t){}));lX(sX),sX.typeOf,sX.AsyncMode,sX.ConcurrentMode,sX.ContextConsumer,sX.ContextProvider,sX.Element,sX.ForwardRef,sX.Fragment,sX.Lazy,sX.Memo,sX.Portal,sX.Profiler,sX.StrictMode,sX.Suspense,sX.isValidElementType,sX.isAsyncMode,sX.isConcurrentMode,sX.isContextConsumer,sX.isContextProvider,sX.isElement,sX.isForwardRef,sX.isFragment,sX.isLazy,sX.isMemo,sX.isPortal,sX.isProfiler,sX.isStrictMode,sX.isSuspense,uX((function(e){e.exports=cX}));Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch{return!1}}();function dX(){}function fX(){}Function.call.bind(Object.prototype.hasOwnProperty),fX.resetWarningCache=dX;var pX=uX((function(e){e.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:fX,resetWarningCache:dX};return n.PropTypes=n,n}()})),hX=0,vX=1,gX=2,mX="sequential",yX="sync",bX="async-concurrent";function wX(e){var t=e.delay,n=void 0===t?0:t,r=e.batchSize,o=e.mode,i=void 0===o?mX:o,a=e.children,u=l.a.useRef(hX),c=l.a.useRef(0),s=l.a.useRef([]),d=l.a.useRef([]),f=l.a.useRef(n);f.current!==n&&(f.current=n);var p=l.a.useRef(i);p.current!==i&&(p.current=i);var h=l.a.useRef(r);function v(e){s.current=s.current.filter((function(t){return t.index!==e.index})),d.current=d.current.filter((function(t){return t.index!==e.index})),0===d.current.length&&u.current!==vX&&(u.current=hX,b())}function g(e){e.work(),e.done=!0,v(e)}function m(){u.current!==vX&&(u.current=gX,d.current.forEach((function(e){e.rafId=window.requestAnimationFrame((function(){e.timeoutId=setTimeout((function(){return g(e)}),f.current)}))})))}function y(){u.current!==vX&&(u.current=gX,d.current.forEach(g))}function b(){u.current===hX&&s.current.length>0&&function(){if(0!==s.current.length)if(u.current=gX,p.current===mX){if(0===d.current.length){var e=s.current[0];e.ready=!0,d.current.push(e)}m()}else if(p.current===yX){if(0===d.current.length){var t,n=s.current.slice(0,h.current||s.current.length);(t=d.current).push.apply(t,eX(n)),d.current.forEach((function(e){e.ready=!0}))}setTimeout(y,f.current)}else if(p.current===bX){if(0===d.current.length){var r,o=s.current.slice(0,h.current||s.current.length);(r=d.current).push.apply(r,eX(o)),d.current.forEach((function(e){e.ready=!0}))}m()}}()}return h.current!==r&&(h.current=r),l.a.useEffect((function(){b()})),l.a.createElement(rX.Provider,{value:{next:b,pause:function(){u.current=vX},resume:function(){u.current=hX,b()},cleanUp:function(e){var t=d.current.find((function(t){return t.index===e}));t&&t.ready&&!t.done&&(window.cancelAnimationFrame(null==t?void 0:t.rafId),clearTimeout(null==t?void 0:t.timeoutId)),v({index:e})},register:function(e){var t=function(e,t){return{work:e,index:t,ready:!1,done:!1,timeoutId:null,rafId:null}}(e,++c.current);return s.current.push(t),1===s.current.length&&setTimeout(b),t.index}}},a)}wX.propTypes={children:pX.any,delay:pX.number,batchSize:pX.number,mode:pX.oneOf(["sequential","sync","async-concurrent"])};var _X=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kX=globalThis&&globalThis.__assign||function(){return kX=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},kX.apply(this,arguments)},CX={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},EX={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},OX={width:"20px",height:"20px",position:"absolute"},SX={top:kX(kX({},CX),{top:"-5px"}),right:kX(kX({},EX),{left:void 0,right:"-5px"}),bottom:kX(kX({},CX),{top:void 0,bottom:"-5px"}),left:kX(kX({},EX),{left:"-5px"}),topRight:kX(kX({},OX),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:kX(kX({},OX),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:kX(kX({},OX),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:kX(kX({},OX),{left:"-10px",top:"-10px",cursor:"nw-resize"})},xX=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){t.props.onResizeStart(e,t.props.direction)},t.onTouchStart=function(e){t.props.onResizeStart(e,t.props.direction)},t}return _X(t,e),t.prototype.render=function(){return a.createElement("div",{className:this.props.className||"",style:kX(kX({position:"absolute",userSelect:"none"},SX[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},t}(a.PureComponent),jX=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),IX=globalThis&&globalThis.__assign||function(){return IX=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},IX.apply(this,arguments)},RX={width:"auto",height:"auto"},AX=function(e,t,n){return Math.max(Math.min(e,n),t)},DX=function(e,t){return Math.round(e/t)*t},PX=function(e,t){return new RegExp(e,"i").test(t)},MX=function(e){return Boolean(e.touches&&e.touches.length)},TX=function(e,t,n){void 0===n&&(n=0);var r=t.reduce((function(n,r,o){return Math.abs(r-e)<Math.abs(t[n]-e)?o:n}),0),o=Math.abs(t[r]-e);return 0===n||o<n?t[r]:e},FX=function(e){return"auto"===(e=e.toString())||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:e+"px"},NX=function(e,t,n,r){if(e&&"string"==typeof e){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%"))return t*(Number(e.replace("%",""))/100);if(e.endsWith("vw"))return n*(Number(e.replace("vw",""))/100);if(e.endsWith("vh"))return r*(Number(e.replace("vh",""))/100)}return e},VX=["as","ref","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],LX="__resizable_base__",BX=function(e){function t(t){var n,r,o,i,a=e.call(this,t)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.appendBase=function(){if(!a.resizable||!a.window)return null;var e=a.parentNode;if(!e)return null;var t=a.window.document.createElement("div");return t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.transform="scale(0, 0)",t.style.left="0",t.style.flex="0 0 100%",t.classList?t.classList.add(LX):t.className+=LX,e.appendChild(t),t},a.removeBase=function(e){var t=a.parentNode;!t||t.removeChild(e)},a.state={isResizing:!1,width:null!==(r=null===(n=a.propsSize)||void 0===n?void 0:n.width)&&void 0!==r?r:"auto",height:null!==(i=null===(o=a.propsSize)||void 0===o?void 0:o.height)&&void 0!==i?i:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return jX(t,e),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||RX},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,r=this.resizable.offsetHeight,o=this.resizable.style.position;"relative"!==o&&(this.resizable.style.position="relative"),e="auto"!==this.resizable.style.width?this.resizable.offsetWidth:n,t="auto"!==this.resizable.style.height?this.resizable.offsetHeight:r,this.resizable.style.position=o}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,n=function(t){var n;if(typeof e.state[t]>"u"||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&(null===(n=e.propsSize[t])||void 0===n?void 0:n.toString().endsWith("%"))){if(e.state[t].toString().endsWith("%"))return e.state[t].toString();var r=e.getParentSize();return Number(e.state[t].toString().replace("px",""))/r[t]*100+"%"}return FX(e.state[t])};return{width:t&&typeof t.width<"u"&&!this.state.isResizing?FX(t.width):n("width"),height:t&&typeof t.height<"u"&&!this.state.isResizing?FX(t.height):n("height")}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,n=this.parentNode.style.flexWrap;"wrap"!==n&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var r={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=n),this.removeBase(e),r},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(this.resizable&&this.window){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==e.flexBasis?e.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,t){var n=this.propsSize&&this.propsSize[t];return"auto"===this.state[t]&&this.state.original[t]===e&&(typeof n>"u"||"auto"===n)?"auto":e},t.prototype.calculateNewMaxFromBoundary=function(e,t){var n,r,o=this.props.boundsByDirection,i=this.state.direction,a=o&&PX("left",i),l=o&&PX("top",i);if("parent"===this.props.bounds){var u=this.parentNode;u&&(n=a?this.resizableRight-this.parentLeft:u.offsetWidth+(this.parentLeft-this.resizableLeft),r=l?this.resizableBottom-this.parentTop:u.offsetHeight+(this.parentTop-this.resizableTop))}else"window"===this.props.bounds?this.window&&(n=a?this.resizableRight:this.window.innerWidth-this.resizableLeft,r=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(n=a?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),r=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return n&&Number.isFinite(n)&&(e=e&&e<n?e:n),r&&Number.isFinite(r)&&(t=t&&t<r?t:r),{maxWidth:e,maxHeight:t}},t.prototype.calculateNewSizeFromDirection=function(e,t){var n=this.props.scale||1,r=function(e){return Array.isArray(e)?e:[e,e]}(this.props.resizeRatio||1),o=r[0],i=r[1],a=this.state,l=a.direction,u=a.original,c=this.props,s=c.lockAspectRatio,d=c.lockAspectRatioExtraHeight,f=c.lockAspectRatioExtraWidth,p=u.width,h=u.height,v=d||0,g=f||0;return PX("right",l)&&(p=u.width+(e-u.x)*o/n,s&&(h=(p-g)/this.ratio+v)),PX("left",l)&&(p=u.width-(e-u.x)*o/n,s&&(h=(p-g)/this.ratio+v)),PX("bottom",l)&&(h=u.height+(t-u.y)*i/n,s&&(p=(h-v)*this.ratio+g)),PX("top",l)&&(h=u.height-(t-u.y)*i/n,s&&(p=(h-v)*this.ratio+g)),{newWidth:p,newHeight:h}},t.prototype.calculateNewSizeFromAspectRatio=function(e,t,n,r){var o=this.props,i=o.lockAspectRatio,a=o.lockAspectRatioExtraHeight,l=o.lockAspectRatioExtraWidth,u=typeof r.width>"u"?10:r.width,c=typeof n.width>"u"||n.width<0?e:n.width,s=typeof r.height>"u"?10:r.height,d=typeof n.height>"u"||n.height<0?t:n.height,f=a||0,p=l||0;if(i){var h=(s-f)*this.ratio+p,v=(d-f)*this.ratio+p,g=(u-p)/this.ratio+f,m=(c-p)/this.ratio+f,y=Math.max(u,h),b=Math.min(c,v),w=Math.max(s,g),_=Math.min(d,m);e=AX(e,y,b),t=AX(t,w,_)}else e=AX(e,u,c),t=AX(t,s,d);return{newWidth:e,newHeight:t}},t.prototype.setBoundingClientRect=function(){if("parent"===this.props.bounds){var e=this.parentNode;if(e){var t=e.getBoundingClientRect();this.parentLeft=t.left,this.parentTop=t.top}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var n=this.props.bounds.getBoundingClientRect();this.targetLeft=n.left,this.targetTop=n.top}if(this.resizable){var r=this.resizable.getBoundingClientRect(),o=r.left,i=r.top,a=r.right,l=r.bottom;this.resizableLeft=o,this.resizableRight=a,this.resizableTop=i,this.resizableBottom=l}},t.prototype.onResizeStart=function(e,t){if(this.resizable&&this.window){var n=0,r=0;if(e.nativeEvent&&function(e){return Boolean((e.clientX||0===e.clientX)&&(e.clientY||0===e.clientY))}(e.nativeEvent)?(n=e.nativeEvent.clientX,r=e.nativeEvent.clientY):e.nativeEvent&&MX(e.nativeEvent)&&(n=e.nativeEvent.touches[0].clientX,r=e.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable)if(!1===this.props.onResizeStart(e,t,this.resizable))return;this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var o,i=this.window.getComputedStyle(this.resizable);if("auto"!==i.flexBasis){var a=this.parentNode;if(a){var l=this.window.getComputedStyle(a).flexDirection;this.flexDir=l.startsWith("row")?"row":"column",o=i.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var u={original:{x:n,y:r,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:IX(IX({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:o};this.setState(u)}},t.prototype.onMouseMove=function(e){var t=this;if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&MX(e))try{e.preventDefault(),e.stopPropagation()}catch{}var n=this.props,r=n.maxWidth,o=n.maxHeight,i=n.minWidth,a=n.minHeight,l=MX(e)?e.touches[0].clientX:e.clientX,c=MX(e)?e.touches[0].clientY:e.clientY,s=this.state,d=s.direction,f=s.original,p=s.width,h=s.height,v=this.getParentSize(),g=function(e,t,n,r,o,i,a){return r=NX(r,e.width,t,n),o=NX(o,e.height,t,n),i=NX(i,e.width,t,n),a=NX(a,e.height,t,n),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof o>"u"?void 0:Number(o),minWidth:typeof i>"u"?void 0:Number(i),minHeight:typeof a>"u"?void 0:Number(a)}}(v,this.window.innerWidth,this.window.innerHeight,r,o,i,a);r=g.maxWidth,o=g.maxHeight,i=g.minWidth,a=g.minHeight;var m=this.calculateNewSizeFromDirection(l,c),y=m.newHeight,b=m.newWidth,w=this.calculateNewMaxFromBoundary(r,o);this.props.snap&&this.props.snap.x&&(b=TX(b,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(y=TX(y,this.props.snap.y,this.props.snapGap));var _=this.calculateNewSizeFromAspectRatio(b,y,{width:w.maxWidth,height:w.maxHeight},{width:i,height:a});if(b=_.newWidth,y=_.newHeight,this.props.grid){var k=DX(b,this.props.grid[0]),C=DX(y,this.props.grid[1]),E=this.props.snapGap||0;b=0===E||Math.abs(k-b)<=E?k:b,y=0===E||Math.abs(C-y)<=E?C:y}var O={width:b-f.width,height:y-f.height};if(p&&"string"==typeof p)if(p.endsWith("%"))b=b/v.width*100+"%";else if(p.endsWith("vw")){b=b/this.window.innerWidth*100+"vw"}else if(p.endsWith("vh")){b=b/this.window.innerHeight*100+"vh"}if(h&&"string"==typeof h)if(h.endsWith("%"))y=y/v.height*100+"%";else if(h.endsWith("vw")){y=y/this.window.innerWidth*100+"vw"}else if(h.endsWith("vh")){y=y/this.window.innerHeight*100+"vh"}var S={width:this.createSizeForCssProperty(b,"width"),height:this.createSizeForCssProperty(y,"height")};"row"===this.flexDir?S.flexBasis=S.width:"column"===this.flexDir&&(S.flexBasis=S.height);var x=this.state.width!==S.width,j=this.state.height!==S.height,I=this.state.flexBasis!==S.flexBasis,R=x||j||I;R&&Object(u.flushSync)((function(){t.setState(S)})),this.props.onResize&&R&&this.props.onResize(e,d,this.resizable,O)}},t.prototype.onMouseUp=function(e){var t,n,r=this.state,o=r.isResizing,i=r.direction,a=r.original;if(o&&this.resizable){var l={width:this.size.width-a.width,height:this.size.height-a.height};this.props.onResizeStop&&this.props.onResizeStop(e,i,this.resizable,l),this.props.size&&this.setState({width:null!==(t=this.props.size.width)&&void 0!==t?t:"auto",height:null!==(n=this.props.size.height)&&void 0!==n?n:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:IX(IX({},this.state.backgroundStyle),{cursor:"auto"})})}},t.prototype.updateSize=function(e){var t,n;this.setState({width:null!==(t=e.width)&&void 0!==t?t:"auto",height:null!==(n=e.height)&&void 0!==n?n:"auto"})},t.prototype.renderResizer=function(){var e=this,t=this.props,n=t.enable,r=t.handleStyles,o=t.handleClasses,i=t.handleWrapperStyle,l=t.handleWrapperClass,u=t.handleComponent;if(!n)return null;var c=Object.keys(n).map((function(t){return!1!==n[t]?a.createElement(xX,{key:t,direction:t,onResizeStart:e.onResizeStart,replaceStyles:r&&r[t],className:o&&o[t]},u&&u[t]?u[t]:null):null}));return a.createElement("div",{className:l,style:i},c)},t.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce((function(t,n){return-1!==VX.indexOf(n)||(t[n]=e.props[n]),t}),{}),n=IX(IX(IX({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var r=this.props.as||"div";return a.createElement(r,IX({style:n,className:this.props.className},t,{ref:function(t){t&&(e.resizable=t)}}),this.state.isResizing&&a.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(a.PureComponent);function $X(e){for(var t=10;t>0&&e;){if(e.tagName&&"td"===e.tagName.toLowerCase()){if(""!==e.innerHTML)return!1;t-=1}e=e.nextSibling}return!0}var zX=/^\s*\(?¥\s*\(?[\d,.]+\)?$/,UX=/^#+$/,HX=/^\d\.\d+[Ee]\+\d+$/,qX=String.fromCharCode(165),WX=String.fromCharCode(36),GX=String.fromCharCode(8364),KX=String.fromCharCode(163);function YX(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;e=function(e){return e.replace(/\\0022/g,"")}(e=function(e,t,n){var r=e.match(/<col[^>]*>/g),o=0;if(r){var i=r[r.length-1].match(/<col[^>]*span=(\d+)[^>]*>/);i&&(o=parseInt(i[1],10))}if(o>n){var a=e.split("</tr>");e=(a=a.map((function(e){var t=e.match(/(\s*<td[^>]*>\s*<\/td>)(\s*)$/);if(t){var n=t[1].repeat(o-30);e.endsWith(n+t[2])&&(e=e.substr(0,e.length-n.length-t[2].length))}return e}))).join("</tr>")}var l=e.match(/\s*<tr[^>]*>\s*(<td[^>]*>\s*<\/td>\s*)+<\/tr>/g);if(l&&l.length>t){var u=e.match(/<td[^>]*>[^<]*[^\s<]+[^<]*<\/td>/g);if(!u)return"<table><tr><td></td></tr></table>";var c=u[u.length-1],s=e.lastIndexOf(c),d=e.slice(0,s+c.length);e=e.slice(s+c.length);var f={};l.forEach((function(e){f[e]=f[e]||{content:e,count:0},f[e].count+=1}));for(var p=Object.values(f),h=(p=mn()(p,"count")).length-1;p[h];){var v=p[h];if(v.count>t){var g=v.content.replace(/([*.?+$^[\](){}|/\\])/g,(function(e){return"\\".concat(e)}));e=e.replace(new RegExp(g,"g"),"")}h--}e=d+e}return e}(e,200,200));var i=(new DOMParser).parseFromString(e,"text/html"),a=i.body,l=function(e,t){for(var n=e.length,r=[],o=0;o<n;o++)t(e[o])&&r.push(e[o]);return r}(i.all,(function(e){return"STYLE"===e.tagName}));if(!a)return null;for(var u,c=a.firstChild,s=[],d=[],f={},p={},h=[],v={},g=!1;c;)if(QX(c)){var m=dJ(c,s.length,l,o);m.mergeCells&&(d=d.concat(m.mergeCells)),m.startCell&&(u=m.startCell),m.selectOptions&&Object.assign(v,m.selectOptions),Object.assign(p,m.rows),m.columns&&Object.assign(f,m.columns),s=s.concat(m.table),m.cellsNeedFix&&(h=h.concat(m.cellsNeedFix)),c=sJ(c),g=!1}else if(iJ(c))rJ(c)&&(c.innerHTML=""),eJ(c)&&(c.innerHTML=c.innerHTML.replace(/\n/g,"<br/>")),c=c.firstChild||sJ(c),g=!1;else if(nJ(c)){var y=c.innerText.trim(),b=c.getAttribute("href");JX(s,s.length,y,b),g=!1,c=sJ(c)}else if(tJ(c)){var w=c.getAttribute("src");ZX(s,s.length,w,o),g=!1,c=sJ(c)}else if(lJ(c))c=c.firstChild||sJ(c);else if(uJ(c))g=!1,c=sJ(c);else if(cJ(c)){var _=c.data;if(""!==_.trim()||!iJ(c.parentNode))XX(s,g?s.length-1:s.length,_),g=!0;c=sJ(c)}else c=sJ(c);var k=function(e){var t={};return e.forEach((function(e,n){e.forEach((function(e,r){e&&0!==Object.keys(e).length&&(t[n]=t[n]||{},0!==Object.keys(e).length&&(t[n][r]=e))}))})),t}(s);d=vn()(d,(function(e){return"".concat(e.row,":").concat(e.col)}));var C=pn()(s.map((function(e){return e.length})))||20,E={name:n||"Sheet".concat(t+1),rowCount:r?Math.max(s.length,r.rowCount):s.length,colCount:r?Math.max(C,r.colCount):C,data:k,mergeCells:d,rows:p,columns:f,filter:{},index:t,defaults:{}};return u&&(E.startCell=u),Object.keys(v).length>0&&(E.selectOptions=v),h.length>0&&(E.cellsNeedFix=h),E}function XX(e,t,n){e[t]=e[t]||[],e[t][0]?e[t][0].value+=""+n:e[t][0]={value:n}}function JX(e,t,n,r){e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value={class:"link",text:n,url:r}}function ZX(e,t,n,r){n=function(e){return e.replace(/\?x-oss-process=image\/resize.+/,"")}(n),e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value=r?{class:"image",name:"",src:n}:{class:"image",name:"",status:"needUpload",originSrc:n}}function QX(e){return"TABLE"===e.tagName}function eJ(e){return"PRE"===e.tagName}function tJ(e){return"IMG"===e.tagName}function nJ(e){return"A"===e.tagName}function rJ(e){var t=e.getAttribute("style");return t&&t.startsWith("mso-element")}var oJ=["BODY","ARTICLE","ASIDE","ADDRESS","DD","DL","FIELDSET","FIGCAPTION","FIGURE","FOOTER","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","P","DIV","PRE","BLOCKQUOTE","UL","OL","LI","TABLE","THEAD","TBODY","TFOOT","SECTION"];function iJ(e){return 1===e.nodeType&&oJ.includes(e.tagName)}var aJ=["B","I","ABBR","CITE","CODE","DFN","DEL","EM","KBD","STRONG","SAMP","A","BDO","Q","SPAN","SUB","SUP","BUTTON","LABEL"];function lJ(e){return 1===e.nodeType&&aJ.includes(e.tagName)}function uJ(e){return"BR"===e.tagName}function cJ(e){return 3===e.nodeType}function sJ(e){if(e.nextSibling)return e.nextSibling;for(var t=e.parentNode;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}function dJ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=e.cloneNode(!0);document.body.appendChild(o);var i=function(e,t){return function(e){for(var t,n=e.rows,r=n.length,o=[],i=[],a=0,l=0,u=0,c=0;c<r;c++){for(var s=n[c].cells,d=0,f=0;f<s.length;f++){var p=s[f],h=p.rowSpan,v=p.colSpan;a+=h*v,d+=v,h>1&&(l+=(h-1)*v)}i[c]=d,0===c&&(t=d),u=Math.max(d,u)}if(bn()(a/t)&&t===u){var g=0;if(i.forEach((function(e){g+=u-e})),g!==l){var m=l-g;if(m&&bn()(m/u)){for(var y=[],b=0;b<r;b++){for(var w=n[b].cells;o[b+y.length]===u;)y.push(b+y.length);for(var _=b+y.length,k=0;k<w.length;k++){var C=w[k],E=C.rowSpan,O=C.colSpan;if(E>1)for(var S=1;S<E;S++)o[_+S]=(o[_+S]||0)+O}}y.forEach((function(t){e.insertRow(t)}))}}}}(e),function(e){var t=e.rows[0];0===t.cells.length&&t.remove(),e.rows.length>1&&1===t.cells.length&&""===t.cells[0].innerText.trim()&&0===t.cells[0].getElementsByTagName("img").length&&1===t.cells[0].colSpan&&1===t.cells[0].rowSpan&&t.remove()}(e),function(e){Array.from(e.rows).forEach((function(e){var t=e.getAttribute("style"),n=t&&t.match(/mso-xlrowspan:(\d+)/),r=e.getAttribute("height");if(n&&r){var o=parseInt(n[1]);r=parseInt(r)/o||24,e.setAttribute("height",r),e.style.height=r+"px"}if(Array.from(e.cells).forEach((function(t){var n=t.getAttribute("style");if(t.setAttribute("height",r),t.style.height=r+"px",t.colSpan>1&&n&&-1!==n.indexOf("mso-ignore:colspan")){var o=t.colSpan;t.setAttribute("colSpan",1);for(var i=1;i<o;i++){var a=t.cloneNode();e.insertBefore(a,t.nextSibling)}}})),n){var i=parseInt(n[1]);if(i<1e6)for(var a=1;a<i;a++){var l=e.cloneNode();e.parentNode.insertBefore(l,e)}}}))}(e),function(e,t){for(var n=[],r=e.rows,o=r.length,i=100,a=0;a<o;a++){var l=r[a].cells,u=l.length;n[a]=n[a]||[];for(var c=u>16300,s=0;s<u;s++){var d=l[s];if(c&&s>i&&""===d.innerHTML&&$X(d))break;i=Math.max(i,s);for(var f=d.rowSpan,p=void 0===f?1:f,h=d.colSpan,v=void 0===h?1:h,g=p>1||v>1,m=s;n[a][m];)m++;if(n[a][m]={rowSpan:p,colSpan:v,isMulti:g,element:d},g)for(var y=p;y>0;){for(var b=v;b>0;){if(1!==b||1!==y){var w=a+y-1,_=m+b-1;n[w]=n[w]||[],n[w][_]={isEmpty:!0,parent:{row:a,col:m}}}b--}y--}}}var k=n.map((function(e){return e.length})),C=Math.max.apply(Math,WH(k));return n.forEach((function(e,n){if(e.length<C)for(var r=C-e.length;r--;)0!==n||t?e.push({rowSpan:1,colSpan:1,isShadow:!0,element:null}):e.unshift({rowSpan:1,colSpan:1,isShadow:!0,element:null});for(var o=0;o<C;o++)e[o]||(e[o]={rowSpan:1,colSpan:1,isShadow:!0,element:null})})),{rows:n.length,cols:C,table:n}}(e,t)}(o,r),a={};n&&n.forEach((function(e){document.body.appendChild(e),Object.assign(a,function(e){var t=/([^{}]+){([^{}]+)}/,n=e.match(/[^{}]+{([^{}]+)}/g),r={};return n&&n.forEach((function(e){var n=e.match(t);if(n){var o=n[1].trim(),i=n[2];if(o.startsWith(".")){var a=i.match(/mso-number-format:(.+);(\n|$)/);a&&(r[o.substr(1)]=function(e){return-1!==(e=e.replace(/\/|"|\\/g,"")).indexOf("Date")?"date":-1!==e.indexOf("Time")?"time":e.endsWith("%")?"percentage":-1!==e.indexOf(KX)?{name:"currency",symbol:KX}:-1!==e.indexOf(GX)?{name:"currency",symbol:GX}:-1!==e.indexOf(qX)?{name:"currency",symbol:qX}:e.match(/^@$/)?"text":-1!==e.indexOf("General")||-1!==e.indexOf("Standard")||-1!==e.indexOf("Fixed")?"auto":e.match(/(年|月|日|时|分|秒|dd|y|m|h|s|md|dm)/)?e.match(/(时|分|秒|s|h)/)?"datetime":e.match(/[^d]ddd[^d]/)?{name:"datetime",formatter:"dddd"}:"date":-1!==e.indexOf(WX)?{name:"currency",symbol:WX}:"number"}(a[1]))}}})),0===Object.keys(r).length?null:r}(e.innerHTML))}));var l={table:[]},u=o.querySelectorAll("col");if(u.length>0){var c={},s=0;u.forEach((function(e){for(var t=parseInt(e.getAttribute("width")),n=e.span,r=0;r<n&&s<i.cols;)c[s]=0!==t?{size:t}:{size:0,hidden:!0,oldSize:120},s+=1,r+=1})),l.columns=c}var d=Array.from(o.rows);l.rows={},d.forEach((function(e,n){if(0===e.offsetHeight&&n!==d.length-1)l.rows[n+t]={size:0,hidden:!0,oldSize:24};else{var r=Math.max(e.offsetHeight,24)||24,o={size:r};24!==r&&(o.customSize=r),l.rows[n+t]=o}}));var f=o.getAttribute("data-startCell");if(f){var p=f.split(":");l.startCell={row:parseInt(p[0])||0,col:parseInt(p[1])||0}}var h=o.getAttribute("data-selectOptions");if(h)try{l.selectOptions=JSON.parse(decodeURIComponent(h))}catch(e){console.log(e)}return i.table.forEach((function(e,n){l.table[n]=[],e.forEach((function(e,o){if(e.element){var i=function(e,t){var n=e.getAttribute("data-value");if(n)try{var r=JSON.parse(decodeURIComponent(n));if(function(e){return!!e.class&&("link"===e.class?e.text&&e.url:"file"===e.class||"image"===e.class?e.name&&e.src:"checkbox"===e.class?void 0!==e.value:"select"===e.class?e.value&&(e.options||e.optionId):"mention"===e.class?e.value&&e.value[0].id&&e.value[0].login:"formula"===e.class&&void 0!==e.formula)}(r))return r}catch(e){console.log(e)}for(var o=e.querySelectorAll("img"),i=o.length,a=0;a<i;a++){var l=o[a].getAttribute("src");if(l)return t?{class:"image",src:l,name:"image"}:{class:"image",status:"needUpload",originSrc:l,name:"image"}}e.innerHTML=e.innerHTML.replace(/<!--\[if[\s\S]+<!--\[endif\]-->/g,"").replace(/<rt[^>]*>[^<]*<\/rt>/g,"").replace(/\n/g,"").replace(/<br>\s*/g,"\n");var u,c=e.innerHTML.replace(/<[^>]+>/g,"").trim();c="string"!=typeof(u=c)?u:u.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&nbsp;/g," ");var s=e.querySelector("a");return s&&s.getAttribute("href")?{class:"link",text:c.replace(/\n/g,""),url:s.getAttribute("href")}:(c.endsWith(" %")&&(c=c.replace(/ %$/,"%")),c)}(e.element,r),u=function(e){try{var t=window.getComputedStyle(e),n={};1===e.childNodes.length&&"S"===e.childNodes[0].tagName&&(n.strikeThrough=!0);var r=function(e){var t;-1!==e.indexOf("pt")&&(t=parseInt(e,10));var n=12;if(-1!==e.indexOf("em")?n=parseFloat(e,14):-1!==e.indexOf("px")&&(n=parseFloat(e,10)),t=t||Math.round(n/1.3333333),pJ[t])return t;var r=Object.keys(pJ).map((function(e){return parseInt(e,10)}));r.sort();for(var o=0;r[o];){if(r[o]>t)return r[o];o++}return r[o-1]}(t.fontSize);return-1!==t.textDecoration.indexOf("underline")&&(n.underline=!0),-1!==t.textDecoration.indexOf("line-through")&&(n.strikeThrough=!0),(r>12||e.style.fontSize&&e.style.fontSize.indexOf("px")>0)&&(n.fontSize=r),["rgba(0, 0, 0)","rgb(0, 0, 0)","rgba(0, 0, 0, 0.65)","rgb(88, 90, 90)"].includes(t.color)||(n.color=t.color),"italic"===t.fontStyle&&(n.fontStyle=t.fontStyle),"normal"===t.whiteSpace&&e.classList.length>0&&(n.overflow="wrap"),["400",400,"normal"].includes(t.fontWeight)||(n.fontWeight=t.fontWeight),"middle"!==t.verticalAlign&&(n.vAlign=fJ[t.verticalAlign]||"middle"),"start"!==t.textAlign&&"left"!==t.textAlign&&(n.hAlign=fJ[t.textAlign]||"left"),"rgba(0, 0, 0, 0)"!==t.backgroundColor&&"rgb(255, 255, 255)"!==t.backgroundColor&&(n.backColor=t.backgroundColor),"0px"!==t.borderLeftWidth&&"rgb(204, 204, 204)"!==t.borderLeftColor&&(n.border=n.border||{},n.border.left={color:t.borderLeftColor,lineStyle:"dashed"===t.borderLeftStyle?"dash":"normal"}),"0px"!==t.borderRightWidth&&"rgb(204, 204, 204)"!==t.borderRightColor&&(n.border=n.border||{},n.border.right={color:t.borderRightColor,lineStyle:"dashed"===t.borderRightStyle?"dash":"normal"}),"0px"!==t.borderTopWidth&&"rgb(204, 204, 204)"!==t.borderTopColor&&(n.border=n.border||{},n.border.top={color:t.borderTopColor,lineStyle:"dashed"===t.borderTopStyle?"dash":"normal"}),"0px"!==t.borderBottomWidth&&"rgb(204, 204, 204)"!==t.borderBottomColor&&(n.border=n.border||{},n.border.bottom={color:t.borderBottomColor,lineStyle:"dashed"===t.borderBottomStyle?"dash":"normal"}),0===Object.keys(n).length?null:n}catch{return null}}(e.element),c=function(e){var t=e.getAttribute("data-note");if(t)try{var n=JSON.parse(decodeURIComponent(t));if(n.text)return n}catch(e){console.log(e)}}(e.element),s={name:"auto"},d=!1;if(a){var f=e.element.classList&&e.element.classList[0];a[f]&&("object"===yH(a[f])?Object.assign(s,a[f]):s.name=a[f],["currency","number","percentage"].includes(s.name)&&(s.decimal=2),l.table[n][o]=l.table[n][o]||{},l.table[n][o].type=s,["text","auto"].includes(s.name)||(d=!0))}u&&(l.table[n][o]=l.table[n][o]||{},l.table[n][o].style=u),c&&(l.table[n][o]=l.table[n][o]||{},l.table[n][o].note=c),void 0!==i&&""!==i?(l.table[n][o]=l.table[n][o]||{},l.table[n][o].type=s,l.table[n][o].value=i,"string"==typeof i&&((UX.test(i)||HX.test(i))&&(d=!0),zX.test(i)&&"auto"===s.name&&(d=!0,l.table[n][o].type.name="currency",l.table[n][o].type.symbol=qX,l.table[n][o].type.decimal=2))):""===i&&l.columns&&l.columns[o]&&l.columns[o].size<=15&&l.columns[o].size>=0&&(d=!0),d&&r&&(l.cellsNeedFix=l.cellsNeedFix||[],l.cellsNeedFix.push({row:n+t,col:o})),e.isMulti&&(l.mergeCells=l.mergeCells||[],l.mergeCells.push({row:n+t,col:o,rowCount:e.rowSpan,colCount:e.colSpan}),u&&(l.table[n+e.rowSpan-1]=l.table[n+e.rowSpan-1]||[],l.table[n+e.rowSpan-1][o+e.colSpan-1]=l.table[n+e.rowSpan-1][o+e.colSpan-1]||{},l.table[n+e.rowSpan-1][o+e.colSpan-1].style=u))}}))})),o.remove(),n&&n.forEach((function(e){e.remove()})),l}var fJ={"-webkit-left":"left","-webkit-right":"right","-webkit-center":"center",left:"left",right:"right",center:"center","-webkit-baseline-middle":"middle",top:"top",bottom:"bottom",middle:"middle"};var pJ={9:12,10:13,11:14,12:16,14:19,16:22,18:24,22:29,24:32,30:40,36:48};const hJ=0,vJ=1,gJ=2,mJ=4;function yJ(e,t){return n=>e(t(n))}function bJ(e,t){return t(e)}function wJ(e,t){return n=>e(t,n)}function _J(e,t){return()=>e(t)}function kJ(e,t){return t(e),e}function CJ(...e){return e}function EJ(e){e()}function OJ(e){return()=>e}function SJ(e){return void 0!==e}function xJ(){}function jJ(e,t){return e(vJ,t)}function IJ(e,t){e(hJ,t)}function RJ(e){e(gJ)}function AJ(e){return e(mJ)}function DJ(e,t){return jJ(e,wJ(t,hJ))}function PJ(e,t){const n=e(vJ,(e=>{n(),t(e)}));return n}function MJ(){const e=[];return(t,n)=>{switch(t){case gJ:return void e.splice(0,e.length);case vJ:return e.push(n),()=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)};case hJ:return void e.slice().forEach((e=>{e(n)}));default:throw new Error(`unrecognized action ${t}`)}}}function TJ(e){let t=e;const n=MJ();return(e,r)=>{switch(e){case vJ:r(t);break;case hJ:t=r;break;case mJ:return t}return n(e,r)}}function FJ(e){return kJ(MJ(),(t=>DJ(e,t)))}function NJ(e,t){return kJ(TJ(t),(t=>DJ(e,t)))}function VJ(e,...t){const n=function(...e){return t=>e.reduceRight(bJ,t)}(...t);return(t,r)=>{switch(t){case vJ:return jJ(e,n(r));case gJ:return void RJ(e)}}}function LJ(e,t){return e===t}function BJ(e=LJ){let t;return n=>r=>{e(t,r)||(t=r,n(r))}}function $J(e){return t=>n=>{e(n)&&t(n)}}function zJ(e){return t=>yJ(t,e)}function UJ(e){return t=>()=>t(e)}function HJ(e,t){return n=>r=>n(t=e(t,r))}function qJ(e){return t=>n=>{e>0?e--:t(n)}}function WJ(e){let t,n=null;return r=>o=>{n=o,!t&&(t=setTimeout((()=>{t=void 0,r(n)}),e))}}function GJ(e){let t,n;return r=>o=>{t=o,n&&clearTimeout(n),n=setTimeout((()=>{r(t)}),e)}}function KJ(...e){const t=new Array(e.length);let n=0,r=null;const o=Math.pow(2,e.length)-1;return e.forEach(((e,i)=>{const a=Math.pow(2,i);jJ(e,(e=>{const l=n;n|=a,t[i]=e,l!==o&&n===o&&r&&(r(),r=null)}))})),e=>i=>{const a=()=>e([i].concat(t));n===o?a():r=a}}function YJ(...e){return function(t,n){switch(t){case vJ:return function(...e){return()=>{e.map(EJ)}}(...e.map((e=>jJ(e,n))));case gJ:return;default:throw new Error(`unrecognized action ${t}`)}}}function XJ(e,t=LJ){return VJ(e,BJ(t))}function JJ(...e){const t=MJ(),n=new Array(e.length);let r=0;const o=Math.pow(2,e.length)-1;return e.forEach(((e,i)=>{const a=Math.pow(2,i);jJ(e,(e=>{n[i]=e,r|=a,r===o&&IJ(t,n)}))})),function(e,i){switch(e){case vJ:return r===o&&i(n),jJ(t,i);case gJ:return RJ(t);default:throw new Error(`unrecognized action ${e}`)}}}function ZJ(e,t=[],{singleton:n}={singleton:!0}){return{id:QJ(),constructor:e,dependencies:t,singleton:n}}const QJ=()=>Symbol();const eZ=typeof document<"u"?l.a.useLayoutEffect:l.a.useEffect;function tZ(e,t,n){const r=Object.keys(t.required||{}),o=Object.keys(t.optional||{}),i=Object.keys(t.methods||{}),a=Object.keys(t.events||{}),u=l.a.createContext({});function c(e,n){e.propsReady&&IJ(e.propsReady,!1);for(const o of r){IJ(e[t.required[o]],n[o])}for(const r of o)if(r in n){IJ(e[t.optional[r]],n[r])}e.propsReady&&IJ(e.propsReady,!0)}function s(e){return a.reduce(((n,r)=>(n[r]=function(e){let t,n;const r=()=>t&&t();return function(o,i){switch(o){case vJ:return i?n===i?void 0:(r(),n=i,t=jJ(e,i),t):(r(),xJ);case gJ:return r(),void(n=null);default:throw new Error(`unrecognized action ${o}`)}}}(e[t.events[r]]),n)),{})}const d=l.a.forwardRef(((d,f)=>{const{children:p,...h}=d,[v]=l.a.useState((()=>kJ(function(e){const t=new Map,n=({id:e,constructor:r,dependencies:o,singleton:i})=>{if(i&&t.has(e))return t.get(e);const a=r(o.map((e=>n(e))));return i&&t.set(e,a),a};return n(e)}(e),(e=>c(e,h))))),[g]=l.a.useState(_J(s,v));return eZ((()=>{for(const e of a)e in h&&jJ(g[e],h[e]);return()=>{Object.values(g).map(RJ)}}),[h,g,v]),eZ((()=>{c(v,h)})),l.a.useImperativeHandle(f,OJ(function(e){return i.reduce(((n,r)=>(n[r]=n=>{IJ(e[t.methods[r]],n)},n)),{})}(v))),l.a.createElement(u.Provider,{value:v},n?l.a.createElement(n,function(e,t){const n={},r={};let o=0;const i=e.length;for(;o<i;)r[e[o]]=1,o+=1;for(const e in t)r.hasOwnProperty(e)||(n[e]=t[e]);return n}([...r,...o,...a],h),p):p)}));return{Component:d,usePublisher:e=>l.a.useCallback(wJ(IJ,l.a.useContext(u)[e]),[e]),useEmitterValue:l.a.version.startsWith("18")?e=>{const t=l.a.useContext(u)[e],n=l.a.useCallback((e=>jJ(t,e)),[t]);return l.a.useSyncExternalStore(n,(()=>AJ(t)),(()=>AJ(t)))}:e=>{const t=l.a.useContext(u)[e],[n,r]=l.a.useState(_J(AJ,t));return eZ((()=>jJ(t,(e=>{e!==n&&r(OJ(e))}))),[t,n]),n},useEmitter:(e,t)=>{const n=l.a.useContext(u)[e];eZ((()=>jJ(n,t)),[t,n])}}}const nZ=typeof document<"u"?l.a.useLayoutEffect:l.a.useEffect;var rZ=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(rZ||{});const oZ={0:"debug",1:"log",2:"warn",3:"error"},iZ=ZJ((()=>{const e=TJ(3);return{log:TJ(((t,n,r=1)=>{var o;r>=(null!=(o=(typeof globalThis>"u"?window:globalThis).VIRTUOSO_LOG_LEVEL)?o:AJ(e))&&console[oZ[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)})),logLevel:e}}),[],{singleton:!0});function aZ(e,t=!0){const n=l.a.useRef(null);let r=e=>{};if(typeof ResizeObserver<"u"){const o=l.a.useMemo((()=>new ResizeObserver((t=>{requestAnimationFrame((()=>{const n=t[0].target;null!==n.offsetParent&&e(n)}))}))),[e]);r=e=>{e&&t?(o.observe(e),n.current=e):(n.current&&o.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:r}}function lZ(e,t=!0){return aZ(e,t).callbackRef}function uZ(e,t,n,r,o,i,a){const u=l.a.useCallback((n=>{const l=function(e,t,n,r){const o=e.length;if(0===o)return null;const i=[];for(let a=0;a<o;a++){const o=e.item(a);if(!o||void 0===o.dataset.index)continue;const l=parseInt(o.dataset.index),u=parseFloat(o.dataset.knownSize),c=t(o,n);if(0===c&&r("Zero-sized element, this should not happen",{child:o},rZ.ERROR),c===u)continue;const s=i[i.length-1];0===i.length||s.size!==c||s.endIndex!==l-1?i.push({startIndex:l,endIndex:l,size:c}):i[i.length-1].endIndex++}return i}(n.children,t,"offsetHeight",o);let u=n.parentElement;for(;!u.dataset.virtuosoScroller;)u=u.parentElement;const c="window"===u.lastElementChild.dataset.viewportType,s=a?a.scrollTop:c?window.pageYOffset||document.documentElement.scrollTop:u.scrollTop,d=a?a.scrollHeight:c?document.documentElement.scrollHeight:u.scrollHeight,f=a?a.offsetHeight:c?window.innerHeight:u.offsetHeight;r({scrollTop:Math.max(s,0),scrollHeight:d,viewportHeight:f}),null==i||i(function(e,t,n){return"normal"!==t&&!(null!=t&&t.endsWith("px"))&&n(`${e} was not resolved to pixel value correctly`,t,rZ.WARN),"normal"===t?0:parseInt(null!=t?t:"0",10)}("row-gap",getComputedStyle(n).rowGap,o)),null!==l&&e(l)}),[e,t,o,i,a,r]);return aZ(u,n)}function cZ(e,t){return Math.round(e.getBoundingClientRect()[t])}function sZ(e,t){return Math.abs(e-t)<1.01}function dZ(e,t,n,r=xJ,o){const i=l.a.useRef(null),a=l.a.useRef(null),u=l.a.useRef(null),s=l.a.useCallback((n=>{const r=n.target,o=r===window||r===document,i=o?window.pageYOffset||document.documentElement.scrollTop:r.scrollTop,l=o?document.documentElement.scrollHeight:r.scrollHeight,s=o?window.innerHeight:r.offsetHeight,d=()=>{e({scrollTop:Math.max(i,0),scrollHeight:l,viewportHeight:s})};n.suppressFlushSync?d():c.a.flushSync(d),null!==a.current&&(i===a.current||i<=0||i===l-s)&&(a.current=null,t(!0),u.current&&(clearTimeout(u.current),u.current=null))}),[e,t]);return l.a.useEffect((()=>{const e=o||i.current;return r(o||i.current),s({target:e,suppressFlushSync:!0}),e.addEventListener("scroll",s,{passive:!0}),()=>{r(null),e.removeEventListener("scroll",s)}}),[i,s,n,r,o]),{scrollerRef:i,scrollByCallback:function(e){i.current.scrollBy(e)},scrollToCallback:function(n){const r=i.current;if(!r||"offsetHeight"in r&&0===r.offsetHeight)return;const o="smooth"===n.behavior;let l,c,s;r===window?(c=Math.max(cZ(document.documentElement,"height"),document.documentElement.scrollHeight),l=window.innerHeight,s=document.documentElement.scrollTop):(c=r.scrollHeight,l=cZ(r,"height"),s=r.scrollTop);const d=c-l;if(n.top=Math.ceil(Math.max(Math.min(d,n.top),0)),sZ(l,c)||n.top===s)return e({scrollTop:s,scrollHeight:c,viewportHeight:l}),void(o&&t(!0));o?(a.current=n.top,u.current&&clearTimeout(u.current),u.current=setTimeout((()=>{u.current=null,a.current=null,t(!0)}),1e3)):a.current=null,r.scrollTo(n)}}}const fZ=ZJ((()=>{const e=MJ(),t=MJ(),n=TJ(0),r=MJ(),o=TJ(0),i=MJ(),a=MJ(),l=TJ(0),u=TJ(0),c=TJ(0),s=TJ(0),d=MJ(),f=MJ(),p=TJ(!1);return DJ(VJ(e,zJ((({scrollTop:e})=>e))),t),DJ(VJ(e,zJ((({scrollHeight:e})=>e))),a),DJ(t,o),{scrollContainerState:e,scrollTop:t,viewportHeight:i,headerHeight:l,fixedHeaderHeight:u,fixedFooterHeight:c,footerHeight:s,scrollHeight:a,smoothScrollTargetReached:r,scrollTo:d,scrollBy:f,statefulScrollTop:o,deviation:n,scrollingInProgress:p}}),[],{singleton:!0}),pZ={lvl:0};function hZ(e,t,n,r=pZ,o=pZ){return{k:e,v:t,lvl:n,l:r,r:o}}function vZ(e){return e===pZ}function gZ(){return pZ}function mZ(e,t){if(vZ(e))return pZ;const{k:n,l:r,r:o}=e;if(t===n){if(vZ(r))return o;if(vZ(o))return r;{const[t,n]=CZ(r);return jZ(OZ(e,{k:t,v:n,l:EZ(r)}))}}return jZ(OZ(e,t<n?{l:mZ(r,t)}:{r:mZ(o,t)}))}function yZ(e,t){if(!vZ(e))return t===e.k?e.v:t<e.k?yZ(e.l,t):yZ(e.r,t)}function bZ(e,t,n="k"){if(vZ(e))return[-1/0,void 0];if(Number(e[n])===t)return[e.k,e.v];if(Number(e[n])<t){const r=bZ(e.r,t,n);return r[0]===-1/0?[e.k,e.v]:r}return bZ(e.l,t,n)}function wZ(e,t,n){return vZ(e)?hZ(t,n,1):t===e.k?OZ(e,{k:t,v:n}):t<e.k?xZ(OZ(e,{l:wZ(e.l,t,n)})):xZ(OZ(e,{r:wZ(e.r,t,n)}))}function _Z(e,t,n){if(vZ(e))return[];const{k:r,v:o,l:i,r:a}=e;let l=[];return r>t&&(l=l.concat(_Z(i,t,n))),r>=t&&r<=n&&l.push({k:r,v:o}),r<=n&&(l=l.concat(_Z(a,t,n))),l}function kZ(e){return vZ(e)?[]:[...kZ(e.l),{k:e.k,v:e.v},...kZ(e.r)]}function CZ(e){return vZ(e.r)?[e.k,e.v]:CZ(e.r)}function EZ(e){return vZ(e.r)?e.l:jZ(OZ(e,{r:EZ(e.r)}))}function OZ(e,t){return hZ(void 0!==t.k?t.k:e.k,void 0!==t.v?t.v:e.v,void 0!==t.lvl?t.lvl:e.lvl,void 0!==t.l?t.l:e.l,void 0!==t.r?t.r:e.r)}function SZ(e){return vZ(e)||e.lvl>e.r.lvl}function xZ(e){return AZ(DZ(e))}function jZ(e){const{l:t,r:n,lvl:r}=e;if(n.lvl>=r-1&&t.lvl>=r-1)return e;if(r>n.lvl+1){if(SZ(t))return DZ(OZ(e,{lvl:r-1}));if(!vZ(t)&&!vZ(t.r))return OZ(t.r,{l:OZ(t,{r:t.r.l}),r:OZ(e,{l:t.r.r,lvl:r-1}),lvl:r});throw new Error("Unexpected empty nodes")}if(SZ(e))return AZ(OZ(e,{lvl:r-1}));if(vZ(n)||vZ(n.l))throw new Error("Unexpected empty nodes");{const t=n.l,o=SZ(t)?n.lvl-1:n.lvl;return OZ(t,{l:OZ(e,{r:t.l,lvl:r-1}),r:AZ(OZ(n,{l:t.r,lvl:o})),lvl:t.lvl+1})}}function IZ(e,t,n){if(vZ(e))return[];return function(e){return RZ(e,(({k:e,v:t})=>({index:e,value:t})))}(_Z(e,bZ(e,t)[0],n))}function RZ(e,t){const n=e.length;if(0===n)return[];let{index:r,value:o}=t(e[0]);const i=[];for(let a=1;a<n;a++){const{index:n,value:l}=t(e[a]);i.push({start:r,end:n-1,value:o}),r=n,o=l}return i.push({start:r,end:1/0,value:o}),i}function AZ(e){const{r:t,lvl:n}=e;return vZ(t)||vZ(t.r)||t.lvl!==n||t.r.lvl!==n?e:OZ(t,{l:OZ(e,{r:t.l}),lvl:n+1})}function DZ(e){const{l:t}=e;return vZ(t)||t.lvl!==e.lvl?e:OZ(t,{r:OZ(e,{l:t.r})})}function PZ(e,t,n,r=0){let o=e.length-1;for(;r<=o;){const i=Math.floor((r+o)/2),a=n(e[i],t);if(0===a)return i;if(-1===a){if(o-r<2)return i-1;o=i-1}else{if(o===r)return i;r=i+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function MZ(e,t,n){return e[PZ(e,t,n)]}const TZ=ZJ((()=>({recalcInProgress:TJ(!1)})),[],{singleton:!0});function FZ(e){const{size:t,startIndex:n,endIndex:r}=e;return e=>e.start===n&&(e.end===r||e.end===1/0)&&e.value===t}function NZ(e,t){let n=0,r=0;for(;n<e;)n+=t[r+1]-t[r]-1,r++;return r-(n===e?0:1)}function VZ({index:e},t){return t===e?0:t<e?-1:1}function LZ({offset:e},t){return t===e?0:t<e?-1:1}function BZ(e){return{index:e.index,value:e}}function $Z(e,t,n,r=0){return r>0&&(t=Math.max(t,MZ(e,r,VZ).offset)),RZ(function(e,t,n,r){const o=PZ(e,t,r),i=PZ(e,n,r,o);return e.slice(o,i+1)}(e,t,n,LZ),BZ)}function zZ(e,t,n,r){let o=e,i=0,a=0,l=0,u=0;if(0!==t){u=PZ(o,t-1,VZ),l=o[u].offset;const e=bZ(n,t-1);i=e[0],a=e[1],o.length&&o[u].size===bZ(n,t)[1]&&(u-=1),o=o.slice(0,u+1)}else o=[];for(const{start:e,value:u}of IZ(n,t,1/0)){const t=e-i,n=t*a+l+t*r;o.push({offset:n,size:u,index:e}),i=e,l=n,a=u}return{offsetTree:o,lastIndex:i,lastOffset:l,lastSize:a}}function UZ(e,[t,n,r,o]){t.length>0&&r("received item sizes",t,rZ.DEBUG);const i=e.sizeTree;let a=i,l=0;if(n.length>0&&vZ(i)&&2===t.length){const e=t[0].size,r=t[1].size;a=n.reduce(((t,n)=>wZ(wZ(t,n,e),n+1,r)),a)}else[a,l]=function(e,t){let n=vZ(e)?0:1/0;for(const r of t){const{size:t,startIndex:o,endIndex:i}=r;if(n=Math.min(n,o),vZ(e)){e=wZ(e,0,t);continue}const a=IZ(e,o-1,i+1);if(a.some(FZ(r)))continue;let l=!1,u=!1;for(const{start:n,end:r,value:o}of a)l?(i>=n||t===o)&&(e=mZ(e,n)):(u=o!==t,l=!0),r>i&&i>=n&&o!==t&&(e=wZ(e,i+1,o));u&&(e=wZ(e,o,t))}return[e,n]}(a,t);if(a===i)return e;const{offsetTree:u,lastIndex:c,lastSize:s,lastOffset:d}=zZ(e.offsetTree,l,a,o);return{sizeTree:a,offsetTree:u,lastIndex:c,lastOffset:d,lastSize:s,groupOffsetTree:n.reduce(((e,t)=>wZ(e,t,HZ(t,u,o))),gZ()),groupIndices:n}}function HZ(e,t,n){if(0===t.length)return 0;const{offset:r,index:o,size:i}=MZ(t,e,VZ),a=e-o,l=i*a+(a-1)*n+r;return l>0?l+n:l}function qZ(e,t,n){if(function(e){return typeof e.groupIndex<"u"}(e))return t.groupIndices[e.groupIndex]+1;{let r=WZ("LAST"===e.index?n:e.index,t);return r=Math.max(0,r,Math.min(n,r)),r}}function WZ(e,t){if(!GZ(t))return e;let n=0;for(;t.groupIndices[n]<=e+n;)n++;return e+n}function GZ(e){return!vZ(e.groupOffsetTree)}const KZ={offsetHeight:"height",offsetWidth:"width"},YZ=ZJ((([{log:e},{recalcInProgress:t}])=>{const n=MJ(),r=MJ(),o=NJ(r,0),i=MJ(),a=MJ(),l=TJ(0),u=TJ([]),c=TJ(void 0),s=TJ(void 0),d=TJ(((e,t)=>cZ(e,KZ[t]))),f=TJ(void 0),p=TJ(0),h={offsetTree:[],sizeTree:gZ(),groupOffsetTree:gZ(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},v=NJ(VJ(n,KJ(u,e,p),HJ(UZ,h),BJ()),h),g=NJ(VJ(u,BJ(),HJ(((e,t)=>({prev:e.current,current:t})),{prev:[],current:[]}),zJ((({prev:e})=>e))),[]);DJ(VJ(u,$J((e=>e.length>0)),KJ(v,p),zJ((([e,t,n])=>{const r=e.reduce(((e,r,o)=>wZ(e,r,HZ(r,t.offsetTree,n)||o)),gZ());return{...t,groupIndices:e,groupOffsetTree:r}}))),v),DJ(VJ(r,KJ(v),$J((([e,{lastIndex:t}])=>e<t)),zJ((([e,{lastIndex:t,lastSize:n}])=>[{startIndex:e,endIndex:t,size:n}]))),n),DJ(c,s);const m=NJ(VJ(c,zJ((e=>void 0===e))),!0);DJ(VJ(s,$J((e=>void 0!==e&&vZ(AJ(v).sizeTree))),zJ((e=>[{startIndex:0,endIndex:0,size:e}]))),n);const y=FJ(VJ(n,KJ(v),HJ((({sizes:e},[t,n])=>({changed:n!==e,sizes:n})),{changed:!1,sizes:h}),zJ((e=>e.changed))));jJ(VJ(l,HJ(((e,t)=>({diff:e.prev-t,prev:t})),{diff:0,prev:0}),zJ((e=>e.diff))),(e=>{const{groupIndices:n}=AJ(v);if(e>0)IJ(t,!0),IJ(i,e+NZ(e,n));else if(e<0){const t=AJ(g);t.length>0&&(e-=NZ(-e,t)),IJ(a,e)}})),jJ(VJ(l,KJ(e)),(([e,t])=>{e<0&&t("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:l},rZ.ERROR)}));const b=FJ(i);DJ(VJ(i,KJ(v),zJ((([e,t])=>{const n=t.groupIndices.length>0,r=[],o=t.lastSize;if(n){const n=yZ(t.sizeTree,0);let i=0,a=0;for(;i<e;){const e=t.groupIndices[a],l=t.groupIndices.length===a+1?1/0:t.groupIndices[a+1]-e-1;r.push({startIndex:e,endIndex:e,size:n}),r.push({startIndex:e+1,endIndex:e+1+l-1,size:o}),a++,i+=l+1}const l=kZ(t.sizeTree);return i!==e&&l.shift(),l.reduce(((t,{k:n,v:r})=>{let o=t.ranges;return 0!==t.prevSize&&(o=[...t.ranges,{startIndex:t.prevIndex,endIndex:n+e-1,size:t.prevSize}]),{ranges:o,prevIndex:n+e,prevSize:r}}),{ranges:r,prevIndex:e,prevSize:0}).ranges}return kZ(t.sizeTree).reduce(((t,{k:n,v:r})=>({ranges:[...t.ranges,{startIndex:t.prevIndex,endIndex:n+e-1,size:t.prevSize}],prevIndex:n+e,prevSize:r})),{ranges:[],prevIndex:0,prevSize:o}).ranges}))),n);const w=FJ(VJ(a,KJ(v,p),zJ((([e,{offsetTree:t},n])=>HZ(-e,t,n)))));return DJ(VJ(a,KJ(v,p),zJ((([e,t,n])=>{if(t.groupIndices.length>0){if(vZ(t.sizeTree))return t;let r=gZ();const o=AJ(g);let i=0,a=0,l=0;for(;i<-e;){l=o[a];const e=o[a+1]-l-1;a++,i+=e+1}if(r=kZ(t.sizeTree).reduce(((t,{k:n,v:r})=>wZ(t,Math.max(0,n+e),r)),r),i!==-e){r=wZ(r,0,yZ(t.sizeTree,l));r=wZ(r,1,bZ(t.sizeTree,1-e)[1])}return{...t,sizeTree:r,...zZ(t.offsetTree,0,r,n)}}{const r=kZ(t.sizeTree).reduce(((t,{k:n,v:r})=>wZ(t,Math.max(0,n+e),r)),gZ());return{...t,sizeTree:r,...zZ(t.offsetTree,0,r,n)}}}))),v),{data:f,totalCount:r,sizeRanges:n,groupIndices:u,defaultItemSize:s,fixedItemSize:c,unshiftWith:i,shiftWith:a,shiftWithOffset:w,beforeUnshiftWith:b,firstItemIndex:l,gap:p,sizes:v,listRefresh:y,statefulTotalCount:o,trackItemSizes:m,itemSize:d}}),CJ(iZ,TZ),{singleton:!0}),XZ=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function JZ(e){const t="number"==typeof e?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!XZ)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const ZZ=ZJ((([{sizes:e,totalCount:t,listRefresh:n,gap:r},{scrollingInProgress:o,viewportHeight:i,scrollTo:a,smoothScrollTargetReached:l,headerHeight:u,footerHeight:c,fixedHeaderHeight:s,fixedFooterHeight:d},{log:f}])=>{const p=MJ(),h=MJ(),v=TJ(0);let g=null,m=null,y=null;function b(){g&&(g(),g=null),y&&(y(),y=null),m&&(clearTimeout(m),m=null),IJ(o,!1)}return DJ(VJ(p,KJ(e,i,t,v,u,c,f),KJ(r,s,d),zJ((([[e,t,r,i,a,u,c,s],d,f,v])=>{const w=JZ(e),{align:_,behavior:k,offset:C}=w,E=i-1,O=qZ(w,t,E);let S=HZ(O,t.offsetTree,d)+u;"end"===_?(S+=f+bZ(t.sizeTree,O)[1]-r+v,O===E&&(S+=c)):"center"===_?S+=(f+bZ(t.sizeTree,O)[1]-r+v)/2:S-=a,C&&(S+=C);const x=t=>{b(),t?(s("retrying to scroll to",{location:e},rZ.DEBUG),IJ(p,e)):(IJ(h,!0),s("list did not change, scroll successful",{},rZ.DEBUG))};if(b(),"smooth"===k){let e=!1;y=jJ(n,(t=>{e=e||t})),g=PJ(l,(()=>{x(e)}))}else g=PJ(VJ(n,function(e){return t=>{const n=setTimeout((()=>{t(!1)}),e);return e=>{e&&(t(!0),clearTimeout(n))}}}(150)),x);return m=setTimeout((()=>{b()}),1200),IJ(o,!0),s("scrolling from index to",{index:O,top:S,behavior:k},rZ.DEBUG),{top:S,behavior:k}}))),a),{scrollToIndex:p,scrollTargetReached:h,topListHeight:v}}),CJ(YZ,fZ,iZ),{singleton:!0});const QZ="up",eQ="down",tQ={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},nQ=ZJ((([{scrollContainerState:e,scrollTop:t,viewportHeight:n,headerHeight:r,footerHeight:o,scrollBy:i}])=>{const a=TJ(!1),l=TJ(!0),u=MJ(),c=MJ(),s=TJ(4),d=TJ(0),f=NJ(VJ(YJ(VJ(XJ(t),qJ(1),UJ(!0)),VJ(XJ(t),qJ(1),UJ(!1),GJ(100))),BJ()),!1),p=NJ(VJ(YJ(VJ(i,UJ(!0)),VJ(i,UJ(!1),GJ(200))),BJ()),!1);DJ(VJ(JJ(XJ(t),XJ(d)),zJ((([e,t])=>e<=t)),BJ()),l),DJ(VJ(l,WJ(50)),c);const h=FJ(VJ(JJ(e,XJ(n),XJ(r),XJ(o),XJ(s)),HJ(((e,[{scrollTop:t,scrollHeight:n},r,o,i,a])=>{const l={viewportHeight:r,scrollTop:t,scrollHeight:n};if(t+r-n>-a){let n,r;return t>e.state.scrollTop?(n="SCROLLED_DOWN",r=e.state.scrollTop-t):(n="SIZE_DECREASED",r=e.state.scrollTop-t||e.scrollTopDelta),{atBottom:!0,state:l,atBottomBecause:n,scrollTopDelta:r}}let u;return u=l.scrollHeight>e.state.scrollHeight?"SIZE_INCREASED":r<e.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":t<e.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:u,state:l}}),tQ),BJ(((e,t)=>e&&e.atBottom===t.atBottom)))),v=NJ(VJ(e,HJ(((e,{scrollTop:t,scrollHeight:n,viewportHeight:r})=>{if(sZ(e.scrollHeight,n))return{scrollTop:t,scrollHeight:n,jump:0,changed:!1};{const o=n-(t+r)<1;return e.scrollTop!==t&&o?{scrollHeight:n,scrollTop:t,jump:e.scrollTop-t,changed:!0}:{scrollHeight:n,scrollTop:t,jump:0,changed:!0}}}),{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),$J((e=>e.changed)),zJ((e=>e.jump))),0);DJ(VJ(h,zJ((e=>e.atBottom))),a),DJ(VJ(a,WJ(50)),u);const g=TJ(eQ);DJ(VJ(e,zJ((({scrollTop:e})=>e)),BJ(),HJ(((e,t)=>AJ(p)?{direction:e.direction,prevScrollTop:t}:{direction:t<e.prevScrollTop?QZ:eQ,prevScrollTop:t}),{direction:eQ,prevScrollTop:0}),zJ((e=>e.direction))),g),DJ(VJ(e,WJ(50),UJ("none")),g);const m=TJ(0);return DJ(VJ(f,$J((e=>!e)),UJ(0)),m),DJ(VJ(t,WJ(100),KJ(f),$J((([e,t])=>!!t)),HJ((([e,t],[n])=>[t,n]),[0,0]),zJ((([e,t])=>t-e))),m),{isScrolling:f,isAtTop:l,isAtBottom:a,atBottomState:h,atTopStateChange:c,atBottomStateChange:u,scrollDirection:g,atBottomThreshold:s,atTopThreshold:d,scrollVelocity:m,lastJumpDueToItemResize:v}}),CJ(fZ)),rQ=ZJ((([{log:e}])=>{const t=TJ(!1),n=FJ(VJ(t,$J((e=>e)),BJ()));return jJ(t,(t=>{t&&AJ(e)("props updated",{},rZ.DEBUG)})),{propsReady:t,didMount:n}}),CJ(iZ),{singleton:!0});function oQ(e,t){0==e?t():requestAnimationFrame((()=>oQ(e-1,t)))}function iQ(e,t){const n=t-1;return"number"==typeof e?e:"LAST"===e.index?n:e.index}const aQ=ZJ((([{sizes:e,listRefresh:t,defaultItemSize:n},{scrollTop:r},{scrollToIndex:o,scrollTargetReached:i},{didMount:a}])=>{const l=TJ(!0),u=TJ(0),c=TJ(!0);return DJ(VJ(a,KJ(u),$J((([e,t])=>!!t)),UJ(!1)),l),DJ(VJ(a,KJ(u),$J((([e,t])=>!!t)),UJ(!1)),c),jJ(VJ(JJ(t,a),KJ(l,e,n,c),$J((([[,e],t,{sizeTree:n},r,o])=>e&&(!vZ(n)||SJ(r))&&!t&&!o)),KJ(u)),(([,e])=>{PJ(i,(()=>{IJ(c,!0)})),oQ(4,(()=>{PJ(r,(()=>{IJ(l,!0)})),IJ(o,e)}))})),{scrolledToInitialItem:l,initialTopMostItemIndex:u,initialItemFinalLocationReached:c}}),CJ(YZ,fZ,ZZ,rQ),{singleton:!0});function lQ(e){return!!e&&("smooth"===e?"smooth":"auto")}const uQ=ZJ((([{totalCount:e,listRefresh:t},{isAtBottom:n,atBottomState:r},{scrollToIndex:o},{scrolledToInitialItem:i},{propsReady:a,didMount:l},{log:u},{scrollingInProgress:c}])=>{const s=TJ(!1),d=MJ();let f=null;function p(e){IJ(o,{index:"LAST",align:"end",behavior:e})}function h(e){const t=PJ(r,(t=>{e&&!t.atBottom&&"SIZE_INCREASED"===t.notAtBottomBecause&&!f&&(AJ(u)("scrolling to bottom due to increased size",{},rZ.DEBUG),p("auto"))}));setTimeout(t,100)}return jJ(VJ(JJ(VJ(XJ(e),qJ(1)),l),KJ(XJ(s),n,i,c),zJ((([[e,t],n,r,o,i])=>{let a=t&&o,l="auto";return a&&(l=((e,t)=>"function"==typeof e?lQ(e(t)):t&&lQ(e))(n,r||i),a=a&&!!l),{totalCount:e,shouldFollow:a,followOutputBehavior:l}})),$J((({shouldFollow:e})=>e))),(({totalCount:e,followOutputBehavior:n})=>{f&&(f(),f=null),f=PJ(t,(()=>{AJ(u)("following output to ",{totalCount:e},rZ.DEBUG),p(n),f=null}))})),jJ(VJ(JJ(XJ(s),e,a),$J((([e,,t])=>e&&t)),HJ((({value:e},[,t])=>({refreshed:e===t,value:t})),{refreshed:!1,value:0}),$J((({refreshed:e})=>e)),KJ(s,e)),(([,e])=>{AJ(i)&&h(!1!==e)})),jJ(d,(()=>{h(!1!==AJ(s))})),jJ(JJ(XJ(s),r),(([e,t])=>{e&&!t.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===t.notAtBottomBecause&&p("auto")})),{followOutput:s,autoscrollToBottom:d}}),CJ(YZ,nQ,ZZ,aQ,rQ,iZ,fZ));function cQ(e){return e.reduce(((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e)),{totalCount:0,groupIndices:[]})}const sQ=ZJ((([{totalCount:e,groupIndices:t,sizes:n},{scrollTop:r,headerHeight:o}])=>{const i=MJ(),a=MJ(),l=FJ(VJ(i,zJ(cQ)));return DJ(VJ(l,zJ((e=>e.totalCount))),e),DJ(VJ(l,zJ((e=>e.groupIndices))),t),DJ(VJ(JJ(r,n,o),$J((([e,t])=>GZ(t))),zJ((([e,t,n])=>bZ(t.groupOffsetTree,Math.max(e-n,0),"v")[0])),BJ(),zJ((e=>[e]))),a),{groupCounts:i,topItemsIndexes:a}}),CJ(YZ,fZ));function dQ(e,t){return!(!e||e[0]!==t[0]||e[1]!==t[1])}function fQ(e,t){return!(!e||e.startIndex!==t.startIndex||e.endIndex!==t.endIndex)}const pQ="top",hQ="bottom",vQ="none";function gQ(e,t,n){return"number"==typeof e?n===QZ&&t===pQ||n===eQ&&t===hQ?e:0:n===QZ?t===pQ?e.main:e.reverse:t===hQ?e.main:e.reverse}function mQ(e,t){return"number"==typeof e?e:e[t]||0}const yQ=ZJ((([{scrollTop:e,viewportHeight:t,deviation:n,headerHeight:r,fixedHeaderHeight:o}])=>{const i=MJ(),a=TJ(0),l=TJ(0),u=TJ(0);return{listBoundary:i,overscan:u,topListHeight:a,increaseViewportBy:l,visibleRange:NJ(VJ(JJ(XJ(e),XJ(t),XJ(r),XJ(i,dQ),XJ(u),XJ(a),XJ(o),XJ(n),XJ(l)),zJ((([e,t,n,[r,o],i,a,l,u,c])=>{const s=e-u,d=a+l,f=Math.max(n-s,0);let p=vQ;const h=mQ(c,pQ),v=mQ(c,hQ);return r-=u,o+=n+l,(r+=n+l)>e+d-h&&(p=QZ),(o-=u)<e-f+t+v&&(p=eQ),p!==vQ?[Math.max(s-n-gQ(i,pQ,p)-h,0),s-f-l+t+gQ(i,hQ,p)+v]:null})),$J((e=>null!=e)),BJ(dQ)),[0,0])}}),CJ(fZ),{singleton:!0});const bQ={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function wQ(e,t,n){if(0===e.length)return[];if(!GZ(t))return e.map((e=>({...e,index:e.index+n,originalIndex:e.index})));const r=e[0].index,o=e[e.length-1].index,i=[],a=IZ(t.groupOffsetTree,r,o);let l,u=0;for(const r of e){let e;(!l||l.end<r.index)&&(l=a.shift(),u=t.groupIndices.indexOf(l.start)),e=r.index===l.start?{type:"group",index:u}:{index:r.index-(u+1)+n,groupIndex:u},i.push({...e,size:r.size,offset:r.offset,originalIndex:r.index,data:r.data})}return i}function _Q(e,t,n,r,o,i){const{lastSize:a,lastOffset:l,lastIndex:u}=o;let c=0,s=0;if(e.length>0){c=e[0].offset;const t=e[e.length-1];s=t.offset+t.size}const d=n-u,f=c,p=l+d*a+(d-1)*r-s;return{items:wQ(e,o,i),topItems:wQ(t,o,i),topListHeight:t.reduce(((e,t)=>t.size+e),0),offsetTop:c,offsetBottom:p,top:f,bottom:s,totalCount:n,firstItemIndex:i}}function kQ(e,t,n,r,o,i){let a=0;if(n.groupIndices.length>0)for(const t of n.groupIndices){if(t-a>=e)break;a++}const l=e+a,u=iQ(t,l);return _Q(Array.from({length:l}).map(((e,t)=>({index:t+u,size:0,offset:0,data:i[t+u]}))),[],l,o,n,r)}const CQ=ZJ((([{sizes:e,totalCount:t,data:n,firstItemIndex:r,gap:o},i,{visibleRange:a,listBoundary:l,topListHeight:u},{scrolledToInitialItem:c,initialTopMostItemIndex:s},{topListHeight:d},f,{didMount:p},{recalcInProgress:h}])=>{const v=TJ([]),g=TJ(0),m=MJ();DJ(i.topItemsIndexes,v);const y=NJ(VJ(JJ(p,h,XJ(a,dQ),XJ(t),XJ(e),XJ(s),c,XJ(v),XJ(r),XJ(o),n),$J((([e,t,,n,,,,,,,r])=>{const o=r&&r.length!==n;return e&&!t&&!o})),zJ((([,,[e,t],n,r,o,i,a,l,u,c])=>{const s=r,{sizeTree:d,offsetTree:f}=s,p=AJ(g);if(0===n)return{...bQ,totalCount:n};if(0===e&&0===t)return 0===p?{...bQ,totalCount:n}:kQ(p,o,r,l,u,c||[]);if(vZ(d))return p>0?null:_Q(function(e,t,n){if(GZ(t)){const r=WZ(e,t);return[{index:bZ(t.groupOffsetTree,r)[0],size:0,offset:0},{index:r,size:0,offset:0,data:n&&n[0]}]}return[{index:e,size:0,offset:0,data:n&&n[0]}]}(iQ(o,n),s,c),[],n,u,s,l);const h=[];if(a.length>0){const e=a[0],t=a[a.length-1];let n=0;for(const r of IZ(d,e,t)){const o=r.value,i=Math.max(r.start,e),a=Math.min(r.end,t);for(let e=i;e<=a;e++)h.push({index:e,size:o,offset:n,data:c&&c[e]}),n+=o}}if(!i)return _Q([],h,n,u,s,l);const v=a.length>0?a[a.length-1]+1:0,m=$Z(f,e,t,v);if(0===m.length)return null;const y=n-1;return _Q(kJ([],(n=>{for(const r of m){const o=r.value;let i=o.offset,a=r.start;const l=o.size;if(o.offset<e){a+=Math.floor((e-o.offset+u)/(l+u));const t=a-r.start;i+=t*l+t*u}a<v&&(i+=(v-a)*l,a=v);const s=Math.min(r.end,y);for(let e=a;e<=s&&!(i>=t);e++)n.push({index:e,size:l,offset:i,data:c&&c[e]}),i+=l+u}})),h,n,u,s,l)})),$J((e=>null!==e)),BJ()),bQ);DJ(VJ(n,$J(SJ),zJ((e=>null==e?void 0:e.length))),t),DJ(VJ(y,zJ((e=>e.topListHeight))),d),DJ(d,u),DJ(VJ(y,zJ((e=>[e.top,e.bottom]))),l),DJ(VJ(y,zJ((e=>e.items))),m);return{listState:y,topItemsIndexes:v,endReached:FJ(VJ(y,$J((({items:e})=>e.length>0)),KJ(t,n),$J((([{items:e},t])=>e[e.length-1].originalIndex===t-1)),zJ((([,e,t])=>[e-1,t])),BJ(dQ),zJ((([e])=>e)))),startReached:FJ(VJ(y,WJ(200),$J((({items:e,topItems:t})=>e.length>0&&e[0].originalIndex===t.length)),zJ((({items:e})=>e[0].index)),BJ())),rangeChanged:FJ(VJ(y,$J((({items:e})=>e.length>0)),zJ((({items:e})=>{let t=0,n=e.length-1;for(;"group"===e[t].type&&t<n;)t++;for(;"group"===e[n].type&&n>t;)n--;return{startIndex:e[t].index,endIndex:e[n].index}})),BJ(fQ))),itemsRendered:m,initialItemCount:g,...f}}),CJ(YZ,sQ,yQ,aQ,ZZ,nQ,rQ,TZ),{singleton:!0}),EQ=ZJ((([{sizes:e,firstItemIndex:t,data:n,gap:r},{initialTopMostItemIndex:o},{initialItemCount:i,listState:a},{didMount:l}])=>(DJ(VJ(l,KJ(i),$J((([,e])=>0!==e)),KJ(o,e,t,r,n),zJ((([[,e],t,n,r,o,i=[]])=>kQ(e,t,n,r,o,i)))),a),{})),CJ(YZ,aQ,CQ,rQ),{singleton:!0}),OQ=ZJ((([{scrollVelocity:e}])=>{const t=TJ(!1),n=MJ(),r=TJ(!1);return DJ(VJ(e,KJ(r,t,n),$J((([e,t])=>!!t)),zJ((([e,t,n,r])=>{const{exit:o,enter:i}=t;if(n){if(o(e,r))return!1}else if(i(e,r))return!0;return n})),BJ()),t),jJ(VJ(JJ(t,e,n),KJ(r)),(([[e,t,n],r])=>e&&r&&r.change&&r.change(t,n))),{isSeeking:t,scrollSeekConfiguration:r,scrollVelocity:e,scrollSeekRangeChanged:n}}),CJ(nQ),{singleton:!0}),SQ=ZJ((([{topItemsIndexes:e}])=>{const t=TJ(0);return DJ(VJ(t,$J((e=>e>0)),zJ((e=>Array.from({length:e}).map(((e,t)=>t))))),e),{topItemCount:t}}),CJ(CQ)),xQ=ZJ((([{footerHeight:e,headerHeight:t,fixedHeaderHeight:n,fixedFooterHeight:r},{listState:o}])=>{const i=MJ(),a=NJ(VJ(JJ(e,r,t,n,o),zJ((([e,t,n,r,o])=>e+t+n+r+o.offsetBottom+o.bottom))),0);return DJ(XJ(a),i),{totalListHeight:a,totalListHeightChanged:i}}),CJ(fZ,CQ),{singleton:!0});function jQ(e){let t,n=!1;return()=>(n||(n=!0,t=e()),t)}const IQ=jQ((()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent))),RQ=ZJ((([{scrollBy:e,scrollTop:t,deviation:n,scrollingInProgress:r},{isScrolling:o,isAtBottom:i,scrollDirection:a,lastJumpDueToItemResize:l},{listState:u},{beforeUnshiftWith:c,shiftWithOffset:s,sizes:d,gap:f},{log:p},{recalcInProgress:h}])=>{const v=FJ(VJ(u,KJ(l),HJ((([,e,t,n],[{items:r,totalCount:o,bottom:i,offsetBottom:a},l])=>{const u=i+a;let c=0;return t===o&&e.length>0&&r.length>0&&(0===r[0].originalIndex&&0===e[0].originalIndex||(c=u-n,0!==c&&(c+=l))),[c,r,o,u]}),[0,[],0,0]),$J((([e])=>0!==e)),KJ(t,a,r,i,p,h),$J((([,e,t,n,,,r])=>!r&&!n&&0!==e&&t===QZ)),zJ((([[e],,,,,t])=>(t("Upward scrolling compensation",{amount:e},rZ.DEBUG),e)))));function g(t){t>0?(IJ(e,{top:-t,behavior:"auto"}),IJ(n,0)):(IJ(n,0),IJ(e,{top:-t,behavior:"auto"}))}return jJ(VJ(v,KJ(n,o)),(([e,t,r])=>{r&&IQ()?IJ(n,t-e):g(-e)})),jJ(VJ(JJ(NJ(o,!1),n,h),$J((([e,t,n])=>!e&&!n&&0!==t)),zJ((([e,t])=>t)),WJ(1)),g),DJ(VJ(s,zJ((e=>({top:-e})))),e),jJ(VJ(c,KJ(d,f),zJ((([e,{lastSize:t,groupIndices:n,sizeTree:r},o])=>{function i(e){return e*(t+o)}if(0===n.length)return i(e);{let t=0;const o=yZ(r,0);let a=0,l=0;for(;a<e;){a++,t+=o;let r=n.length===l+1?1/0:n[l+1]-n[l]-1;a+r>e&&(t-=o,r=e-a+1),a+=r,t+=i(r),l++}return t}}))),(t=>{IJ(n,t),requestAnimationFrame((()=>{IJ(e,{top:t}),requestAnimationFrame((()=>{IJ(n,0),IJ(h,!1)}))}))})),{deviation:n}}),CJ(fZ,nQ,CQ,YZ,iZ,TZ)),AQ=ZJ((([{didMount:e},{scrollTo:t},{listState:n}])=>{const r=TJ(0);return jJ(VJ(e,KJ(r),$J((([,e])=>0!==e)),zJ((([,e])=>({top:e})))),(e=>{PJ(VJ(n,qJ(1),$J((e=>e.items.length>1))),(()=>{requestAnimationFrame((()=>{IJ(t,e)}))}))})),{initialScrollTop:r}}),CJ(rQ,fZ,CQ),{singleton:!0}),DQ=ZJ((([{viewportHeight:e},{totalListHeight:t}])=>{const n=TJ(!1),r=NJ(VJ(JJ(n,e,t),$J((([e])=>e)),zJ((([,e,t])=>Math.max(0,e-t))),WJ(0),BJ()),0);return{alignToBottom:n,paddingTopAddition:r}}),CJ(fZ,xQ),{singleton:!0}),PQ=ZJ((([{scrollTo:e,scrollContainerState:t}])=>{const n=MJ(),r=MJ(),o=MJ(),i=TJ(!1),a=TJ(void 0);return DJ(VJ(JJ(n,r),zJ((([{viewportHeight:e,scrollTop:t,scrollHeight:n},{offsetTop:r}])=>({scrollTop:Math.max(0,t-r),scrollHeight:n,viewportHeight:e})))),t),DJ(VJ(e,KJ(r),zJ((([e,{offsetTop:t}])=>({...e,top:e.top+t})))),o),{useWindowScroll:i,customScrollParent:a,windowScrollContainerState:n,windowViewportRect:r,windowScrollTo:o}}),CJ(fZ)),MQ=({itemTop:e,itemBottom:t,viewportTop:n,viewportBottom:r,locationParams:{behavior:o,align:i,...a}})=>e<n?{...a,behavior:o,align:null!=i?i:"start"}:t>r?{...a,behavior:o,align:null!=i?i:"end"}:null,TQ=ZJ((([{sizes:e,totalCount:t,gap:n},{scrollTop:r,viewportHeight:o,headerHeight:i,fixedHeaderHeight:a,fixedFooterHeight:l,scrollingInProgress:u},{scrollToIndex:c}])=>{const s=MJ();return DJ(VJ(s,KJ(e,o,t,i,a,l,r),KJ(n),zJ((([[e,t,n,r,o,i,a,l],c])=>{const{done:s,behavior:d,align:f,calculateViewLocation:p=MQ,...h}=e,v=qZ(e,t,r-1),g=HZ(v,t.offsetTree,c)+o+i,m=p({itemTop:g,itemBottom:g+bZ(t.sizeTree,v)[1],viewportTop:l+i,viewportBottom:l+n-a,locationParams:{behavior:d,align:f,...h}});return m?s&&PJ(VJ(u,$J((e=>!1===e)),qJ(AJ(u)?1:2)),s):s&&s(),m})),$J((e=>null!==e))),c),{scrollIntoView:s}}),CJ(YZ,fZ,ZZ,CQ,iZ),{singleton:!0}),FQ=ZJ((([{sizes:e,sizeRanges:t},{scrollTop:n},{initialTopMostItemIndex:r},{didMount:o},{useWindowScroll:i,windowScrollContainerState:a,windowViewportRect:l}])=>{const u=MJ(),c=TJ(void 0),s=TJ(null),d=TJ(null);return DJ(a,s),DJ(l,d),jJ(VJ(u,KJ(e,n,i,s,d)),(([e,t,n,r,o,i])=>{const a=function(e){return kZ(e).map((({k:e,v:t},n,r)=>{const o=r[n+1];return{startIndex:e,endIndex:o?o.k-1:1/0,size:t}}))}(t.sizeTree);r&&null!==o&&null!==i&&(n=o.scrollTop-i.offsetTop),e({ranges:a,scrollTop:n})})),DJ(VJ(c,$J(SJ),zJ(NQ)),r),DJ(VJ(o,KJ(c),$J((([,e])=>void 0!==e)),BJ(),zJ((([,e])=>e.ranges))),t),{getState:u,restoreStateFrom:c}}),CJ(YZ,fZ,aQ,rQ,PQ));function NQ(e){return{offset:e.scrollTop,index:0,align:"start"}}const VQ=ZJ((([e,t,n,r,o,i,a,l,u,c])=>({...e,...t,...n,...r,...o,...i,...a,...l,...u,...c})),CJ(yQ,EQ,rQ,OQ,xQ,AQ,DQ,PQ,TQ,iZ)),LQ=ZJ((([{totalCount:e,sizeRanges:t,fixedItemSize:n,defaultItemSize:r,trackItemSizes:o,itemSize:i,data:a,firstItemIndex:l,groupIndices:u,statefulTotalCount:c,gap:s,sizes:d},{initialTopMostItemIndex:f,scrolledToInitialItem:p,initialItemFinalLocationReached:h},v,g,m,{listState:y,topItemsIndexes:b,...w},{scrollToIndex:_},k,{topItemCount:C},{groupCounts:E},O])=>(DJ(w.rangeChanged,O.scrollSeekRangeChanged),DJ(VJ(O.windowViewportRect,zJ((e=>e.visibleHeight))),v.viewportHeight),{totalCount:e,data:a,firstItemIndex:l,sizeRanges:t,initialTopMostItemIndex:f,scrolledToInitialItem:p,initialItemFinalLocationReached:h,topItemsIndexes:b,topItemCount:C,groupCounts:E,fixedItemHeight:n,defaultItemHeight:r,gap:s,...m,statefulTotalCount:c,listState:y,scrollToIndex:_,trackItemSizes:o,itemSize:i,groupIndices:u,...w,...O,...v,sizes:d,...g})),CJ(YZ,aQ,fZ,FQ,uQ,CQ,ZZ,RQ,SQ,sQ,VQ)),BQ="-webkit-sticky",$Q="sticky",zQ=jQ((()=>{if(typeof document>"u")return $Q;const e=document.createElement("div");return e.style.position=BQ,e.style.position===BQ?BQ:$Q}));function UQ(e,t){const n=l.a.useRef(null),r=l.a.useCallback((r=>{if(null===r||!r.offsetParent)return;const o=r.getBoundingClientRect(),i=o.width;let a,l;if(t){const e=t.getBoundingClientRect(),n=o.top-e.top;a=e.height-Math.max(0,n),l=n+t.scrollTop}else a=window.innerHeight-Math.max(0,o.top),l=o.top+window.pageYOffset;n.current={offsetTop:l,visibleHeight:a,visibleWidth:i},e(n.current)}),[e,t]),{callbackRef:o,ref:i}=aZ(r),a=l.a.useCallback((()=>{r(i.current)}),[r,i]);return l.a.useEffect((()=>{if(t){t.addEventListener("scroll",a);const e=new ResizeObserver((()=>{requestAnimationFrame(a)}));return e.observe(t),()=>{t.removeEventListener("scroll",a),e.unobserve(t)}}return window.addEventListener("scroll",a),window.addEventListener("resize",a),()=>{window.removeEventListener("scroll",a),window.removeEventListener("resize",a)}}),[a,t]),o}const HQ=l.a.createContext(void 0),qQ=l.a.createContext(void 0);function WQ(e){return e}const GQ=ZJ((()=>{const e=TJ((e=>`Item ${e}`)),t=TJ(null),n=TJ((e=>`Group ${e}`)),r=TJ({}),o=TJ(WQ),i=TJ("div"),a=TJ(xJ),l=(e,t=null)=>NJ(VJ(r,zJ((t=>t[e])),BJ()),t);return{context:t,itemContent:e,groupContent:n,components:r,computeItemKey:o,headerFooterTag:i,scrollerRef:a,FooterComponent:l("Footer"),HeaderComponent:l("Header"),TopItemListComponent:l("TopItemList"),ListComponent:l("List","div"),ItemComponent:l("Item","div"),GroupComponent:l("Group","div"),ScrollerComponent:l("Scroller","div"),EmptyPlaceholder:l("EmptyPlaceholder"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder")}})),KQ=ZJ((([e,t])=>({...e,...t})),CJ(LQ,GQ)),YQ=({height:e})=>l.a.createElement("div",{style:{height:e}}),XQ={position:zQ(),zIndex:1,overflowAnchor:"none"},JQ={overflowAnchor:"none"},ZQ=l.a.memo((function({showTopList:e=!1}){const t=h0("listState"),n=p0("sizeRanges"),r=h0("useWindowScroll"),o=h0("customScrollParent"),i=p0("windowScrollContainerState"),a=p0("scrollContainerState"),u=o||r?i:a,c=h0("itemContent"),s=h0("context"),d=h0("groupContent"),f=h0("trackItemSizes"),p=h0("itemSize"),h=h0("log"),v=p0("gap"),{callbackRef:g}=uZ(n,p,f,e?xJ:u,h,v,o),[m,y]=l.a.useState(0);v0("deviation",(e=>{m!==e&&y(e)}));const b=h0("EmptyPlaceholder"),w=h0("ScrollSeekPlaceholder")||YQ,_=h0("ListComponent"),k=h0("ItemComponent"),C=h0("GroupComponent"),E=h0("computeItemKey"),O=h0("isSeeking"),S=h0("groupIndices").length>0,x=h0("alignToBottom"),j=h0("initialItemFinalLocationReached"),I=e?{}:{boxSizing:"border-box",paddingTop:t.offsetTop,paddingBottom:t.offsetBottom,marginTop:0!==m?m:x?"auto":0,...j?{}:{visibility:"hidden"}};return!e&&0===t.totalCount&&b?l.a.createElement(b,n0(b,s)):l.a.createElement(_,{...n0(_,s),ref:g,style:I,"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list"},(e?t.topItems:t.items).map((e=>{const n=e.originalIndex,r=E(n+t.firstItemIndex,e.data,s);return O?l.a.createElement(w,{...n0(w,s),key:r,index:e.index,height:e.size,type:e.type||"item",..."group"===e.type?{}:{groupIndex:e.groupIndex}}):"group"===e.type?l.a.createElement(C,{...n0(C,s),key:r,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,style:XQ},d(e.index,s)):l.a.createElement(k,{...n0(k,s),...r0(k,e.data),key:r,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,"data-item-group-index":e.groupIndex,style:JQ},S?c(e.index,e.groupIndex,e.data,s):c(e.index,e.data,s))})))})),QQ={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},e0=e=>({width:"100%",height:"100%",position:"absolute",top:0,...e?{display:"flex",flexDirection:"column"}:{}}),t0={width:"100%",position:zQ(),top:0,zIndex:1};function n0(e,t){if("string"!=typeof e)return{context:t}}function r0(e,t){return{item:"string"==typeof e?void 0:t}}const o0=l.a.memo((function(){const e=h0("HeaderComponent"),t=p0("headerHeight"),n=h0("headerFooterTag"),r=lZ((e=>t(cZ(e,"height")))),o=h0("context");return e?l.a.createElement(n,{ref:r},l.a.createElement(e,n0(e,o))):null})),i0=l.a.memo((function(){const e=h0("FooterComponent"),t=p0("footerHeight"),n=h0("headerFooterTag"),r=lZ((e=>t(cZ(e,"height")))),o=h0("context");return e?l.a.createElement(n,{ref:r},l.a.createElement(e,n0(e,o))):null}));function a0({usePublisher:e,useEmitter:t,useEmitterValue:n}){return l.a.memo((function({style:r,children:o,...i}){const a=e("scrollContainerState"),u=n("ScrollerComponent"),c=e("smoothScrollTargetReached"),s=n("scrollerRef"),d=n("context"),{scrollerRef:f,scrollByCallback:p,scrollToCallback:h}=dZ(a,c,u,s);return t("scrollTo",h),t("scrollBy",p),l.a.createElement(u,{ref:f,style:{...QQ,...r},"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0,...i,...n0(u,d)},o)}))}function l0({usePublisher:e,useEmitter:t,useEmitterValue:n}){return l.a.memo((function({style:r,children:o,...i}){const a=e("windowScrollContainerState"),u=n("ScrollerComponent"),c=e("smoothScrollTargetReached"),s=n("totalListHeight"),d=n("deviation"),f=n("customScrollParent"),p=n("context"),{scrollerRef:h,scrollByCallback:v,scrollToCallback:g}=dZ(a,c,u,xJ,f);return nZ((()=>(h.current=f||window,()=>{h.current=null})),[h,f]),t("windowScrollTo",g),t("scrollBy",v),l.a.createElement(u,{style:{position:"relative",...r,...0!==s?{height:s+d}:{}},"data-virtuoso-scroller":!0,...i,...n0(u,p)},o)}))}const u0=({children:e})=>{const t=l.a.useContext(HQ),n=p0("viewportHeight"),r=p0("fixedItemHeight"),o=h0("alignToBottom"),i=lZ(yJ(n,(e=>cZ(e,"height"))));return l.a.useEffect((()=>{t&&(n(t.viewportHeight),r(t.itemHeight))}),[t,n,r]),l.a.createElement("div",{style:e0(o),ref:i,"data-viewport-type":"element"},e)},c0=({children:e})=>{const t=l.a.useContext(HQ),n=p0("windowViewportRect"),r=p0("fixedItemHeight"),o=h0("customScrollParent"),i=UQ(n,o),a=h0("alignToBottom");return l.a.useEffect((()=>{t&&(r(t.itemHeight),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))}),[t,n,r]),l.a.createElement("div",{ref:i,style:e0(a),"data-viewport-type":"window"},e)},s0=({children:e})=>{const t=h0("TopItemListComponent")||"div",n=h0("headerHeight"),r={...t0,marginTop:`${n}px`},o=h0("context");return l.a.createElement(t,{style:r,...n0(t,o)},e)},d0=l.a.memo((function(e){const t=h0("useWindowScroll"),n=h0("topItemsIndexes").length>0,r=h0("customScrollParent"),o=r||t?m0:g0,i=r||t?c0:u0;return l.a.createElement(o,{...e},n&&l.a.createElement(s0,null,l.a.createElement(ZQ,{showTopList:!0})),l.a.createElement(i,null,l.a.createElement(o0,null),l.a.createElement(ZQ,null),l.a.createElement(i0,null)))})),{Component:f0,usePublisher:p0,useEmitterValue:h0,useEmitter:v0}=tZ(KQ,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},d0),g0=a0({usePublisher:p0,useEmitterValue:h0,useEmitter:v0}),m0=l0({usePublisher:p0,useEmitterValue:h0,useEmitter:v0}),y0=f0,b0={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},w0={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},{round:_0,ceil:k0,floor:C0,min:E0,max:O0}=Math;function S0(e,t,n){return Array.from({length:t-e+1}).map(((t,r)=>{const o=null===n?null:n[r+e];return{index:r+e,data:o}}))}function x0(e,t){return e&&e.column===t.column&&e.row===t.row}function j0(e,t){return e&&e.width===t.width&&e.height===t.height}const I0=ZJ((([{overscan:e,visibleRange:t,listBoundary:n},{scrollTop:r,viewportHeight:o,scrollBy:i,scrollTo:a,smoothScrollTargetReached:l,scrollContainerState:u,footerHeight:c,headerHeight:s},d,f,{propsReady:p,didMount:h},{windowViewportRect:v,useWindowScroll:g,customScrollParent:m,windowScrollContainerState:y,windowScrollTo:b},w])=>{const _=TJ(0),k=TJ(0),C=TJ(b0),E=TJ({height:0,width:0}),O=TJ({height:0,width:0}),S=MJ(),x=MJ(),j=TJ(0),I=TJ(null),R=TJ({row:0,column:0}),A=MJ(),D=MJ(),P=TJ(!1),M=TJ(0),T=TJ(!0),F=TJ(!1);jJ(VJ(h,KJ(M),$J((([e,t])=>!!t))),(()=>{IJ(T,!1),IJ(k,0)})),jJ(VJ(JJ(h,T,O,E,M,F),$J((([e,t,n,r,,o])=>e&&!t&&0!==n.height&&0!==r.height&&!o))),(([,,,,e])=>{IJ(F,!0),oQ(1,(()=>{IJ(S,e)})),PJ(VJ(r),(()=>{IJ(n,[0,0]),IJ(T,!0)}))})),DJ(VJ(D,$J((e=>null!=e&&e.scrollTop>0)),UJ(0)),k),jJ(VJ(h,KJ(D),$J((([,e])=>null!=e))),(([,e])=>{!e||(IJ(E,e.viewport),IJ(O,null==e?void 0:e.item),IJ(R,e.gap),e.scrollTop>0&&(IJ(P,!0),PJ(VJ(r,qJ(1)),(e=>{IJ(P,!1)})),IJ(a,{top:e.scrollTop})))})),DJ(VJ(E,zJ((({height:e})=>e))),o),DJ(VJ(JJ(XJ(E,j0),XJ(O,j0),XJ(R,((e,t)=>e&&e.column===t.column&&e.row===t.row)),XJ(r)),zJ((([e,t,n,r])=>({viewport:e,item:t,gap:n,scrollTop:r})))),A),DJ(VJ(JJ(XJ(_),t,XJ(R,x0),XJ(O,j0),XJ(E,j0),XJ(I),XJ(k),XJ(P),XJ(T),XJ(M)),$J((([,,,,,,,e])=>!e)),zJ((([e,[t,n],r,o,i,a,l,,u,c])=>{const{row:s,column:d}=r,{height:f,width:p}=o,{width:h}=i;if(0===l&&(0===e||0===h))return b0;if(0===p){const t=iQ(c,e);return function(e){return{...w0,items:e}}(S0(t,0===t?Math.max(l-1,0):t,a))}const v=D0(h,p,d);let g,m;u?0===t&&0===n&&l>0?(g=0,m=l-1):(g=v*C0((t+s)/(f+s)),m=v*k0((n+s)/(f+s))-1,m=E0(e-1,O0(m,v-1)),g=E0(m,O0(0,g))):(g=0,m=-1);const y=S0(g,m,a),{top:b,bottom:w}=R0(i,r,o,y),_=k0(e/v);return{items:y,offsetTop:b,offsetBottom:_*f+(_-1)*s-w,top:b,bottom:w,itemHeight:f,itemWidth:p}}))),C),DJ(VJ(I,$J((e=>null!==e)),zJ((e=>e.length))),_),DJ(VJ(JJ(E,O,C,R),$J((([e,t,{items:n}])=>n.length>0&&0!==t.height&&0!==e.height)),zJ((([e,t,{items:n},r])=>{const{top:o,bottom:i}=R0(e,r,t,n);return[o,i]})),BJ(dQ)),n);const N=TJ(!1);DJ(VJ(r,KJ(N),zJ((([e,t])=>t||0!==e))),N);const V=FJ(VJ(XJ(C),$J((({items:e})=>e.length>0)),KJ(_,N),$J((([{items:e},t,n])=>n&&e[e.length-1].index===t-1)),zJ((([,e])=>e-1)),BJ())),L=FJ(VJ(XJ(C),$J((({items:e})=>e.length>0&&0===e[0].index)),UJ(0),BJ())),B=FJ(VJ(XJ(C),KJ(P),$J((([{items:e},t])=>e.length>0&&!t)),zJ((([{items:e}])=>({startIndex:e[0].index,endIndex:e[e.length-1].index}))),BJ(fQ),WJ(0)));DJ(B,f.scrollSeekRangeChanged),DJ(VJ(S,KJ(E,O,_,R),zJ((([e,t,n,r,o])=>{const i=JZ(e),{align:a,behavior:l,offset:u}=i;let c=i.index;"LAST"===c&&(c=r-1),c=O0(0,c,E0(r-1,c));let s=A0(t,o,n,c);return"end"===a?s=_0(s-t.height+n.height):"center"===a&&(s=_0(s-t.height/2+n.height/2)),u&&(s+=u),{top:s,behavior:l}}))),a);const $=NJ(VJ(C,zJ((e=>e.offsetBottom+e.bottom))),0);return DJ(VJ(v,zJ((e=>({width:e.visibleWidth,height:e.visibleHeight})))),E),{data:I,totalCount:_,viewportDimensions:E,itemDimensions:O,scrollTop:r,scrollHeight:x,overscan:e,scrollBy:i,scrollTo:a,scrollToIndex:S,smoothScrollTargetReached:l,windowViewportRect:v,windowScrollTo:b,useWindowScroll:g,customScrollParent:m,windowScrollContainerState:y,deviation:j,scrollContainerState:u,footerHeight:c,headerHeight:s,initialItemCount:k,gap:R,restoreStateFrom:D,...f,initialTopMostItemIndex:M,gridState:C,totalListHeight:$,...d,startReached:L,endReached:V,rangeChanged:B,stateChanged:A,propsReady:p,stateRestoreInProgress:P,...w}}),CJ(yQ,fZ,nQ,OQ,rQ,PQ,iZ));function R0(e,t,n,r){const{height:o}=n;if(void 0===o||0===r.length)return{top:0,bottom:0};return{top:A0(e,t,n,r[0].index),bottom:A0(e,t,n,r[r.length-1].index)+o}}function A0(e,t,n,r){const o=D0(e.width,n.width,t.column),i=C0(r/o),a=i*n.height+O0(0,i-1)*t.row;return a>0?a+t.row:a}function D0(e,t,n){return O0(1,C0((e+n)/(C0(t)+n)))}const P0=ZJ((()=>{const e=TJ((e=>`Item ${e}`)),t=TJ({}),n=TJ(null),r=TJ("virtuoso-grid-item"),o=TJ("virtuoso-grid-list"),i=TJ(WQ),a=TJ("div"),l=TJ(xJ),u=(e,n=null)=>NJ(VJ(t,zJ((t=>t[e])),BJ()),n);return{context:n,itemContent:e,components:t,computeItemKey:i,itemClassName:r,listClassName:o,headerFooterTag:a,scrollerRef:l,FooterComponent:u("Footer"),HeaderComponent:u("Header"),ListComponent:u("List","div"),ItemComponent:u("Item","div"),ScrollerComponent:u("Scroller","div"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder","div")}})),M0=ZJ((([e,t])=>({...e,...t})),CJ(I0,P0)),T0=l.a.memo((function(){const e=U0("gridState"),t=U0("listClassName"),n=U0("itemClassName"),r=U0("itemContent"),o=U0("computeItemKey"),i=U0("isSeeking"),a=z0("scrollHeight"),u=U0("ItemComponent"),c=U0("ListComponent"),s=U0("ScrollSeekPlaceholder"),d=U0("context"),f=z0("itemDimensions"),p=z0("gap"),h=U0("log"),v=U0("stateRestoreInProgress"),g=lZ((e=>{const t=e.parentElement.parentElement.scrollHeight;a(t);const n=e.firstChild;if(n){const{width:e,height:t}=n.getBoundingClientRect();f({width:e,height:t})}p({row:G0("row-gap",getComputedStyle(e).rowGap,h),column:G0("column-gap",getComputedStyle(e).columnGap,h)})}));return v?null:l.a.createElement(c,{ref:g,className:t,...n0(c,d),style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom},"data-testid":"virtuoso-item-list"},e.items.map((t=>{const a=o(t.index,t.data,d);return i?l.a.createElement(s,{key:a,...n0(s,d),index:t.index,height:e.itemHeight,width:e.itemWidth}):l.a.createElement(u,{...n0(u,d),className:n,"data-index":t.index,key:a},r(t.index,t.data,d))})))})),F0=l.a.memo((function(){const e=U0("HeaderComponent"),t=z0("headerHeight"),n=U0("headerFooterTag"),r=lZ((e=>t(cZ(e,"height")))),o=U0("context");return e?l.a.createElement(n,{ref:r},l.a.createElement(e,n0(e,o))):null})),N0=l.a.memo((function(){const e=U0("FooterComponent"),t=z0("footerHeight"),n=U0("headerFooterTag"),r=lZ((e=>t(cZ(e,"height")))),o=U0("context");return e?l.a.createElement(n,{ref:r},l.a.createElement(e,n0(e,o))):null})),V0=({children:e})=>{const t=l.a.useContext(qQ),n=z0("itemDimensions"),r=z0("viewportDimensions"),o=lZ((e=>{r(e.getBoundingClientRect())}));return l.a.useEffect((()=>{t&&(r({height:t.viewportHeight,width:t.viewportWidth}),n({height:t.itemHeight,width:t.itemWidth}))}),[t,r,n]),l.a.createElement("div",{style:e0(!1),ref:o},e)},L0=({children:e})=>{const t=l.a.useContext(qQ),n=z0("windowViewportRect"),r=z0("itemDimensions"),o=U0("customScrollParent"),i=UQ(n,o);return l.a.useEffect((()=>{t&&(r({height:t.itemHeight,width:t.itemWidth}),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))}),[t,n,r]),l.a.createElement("div",{ref:i,style:e0(!1)},e)},B0=l.a.memo((function({...e}){const t=U0("useWindowScroll"),n=U0("customScrollParent"),r=n||t?W0:q0,o=n||t?L0:V0;return l.a.createElement(r,{...e},l.a.createElement(o,null,l.a.createElement(F0,null),l.a.createElement(T0,null),l.a.createElement(N0,null)))})),{Component:$0,usePublisher:z0,useEmitterValue:U0,useEmitter:H0}=tZ(M0,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged"}},B0),q0=a0({usePublisher:z0,useEmitterValue:U0,useEmitter:H0}),W0=l0({usePublisher:z0,useEmitterValue:U0,useEmitter:H0});function G0(e,t,n){return"normal"!==t&&!(null!=t&&t.endsWith("px"))&&n(`${e} was not resolved to pixel value correctly`,t,rZ.WARN),"normal"===t?0:parseInt(null!=t?t:"0",10)}const K0=$0,Y0=ZJ((()=>{const e=TJ((e=>l.a.createElement("td",null,"Item $",e))),t=TJ(null),n=TJ(null),r=TJ(null),o=TJ({}),i=TJ(WQ),a=TJ(xJ),u=(e,t=null)=>NJ(VJ(o,zJ((t=>t[e])),BJ()),t);return{context:t,itemContent:e,fixedHeaderContent:n,fixedFooterContent:r,components:o,computeItemKey:i,scrollerRef:a,TableComponent:u("Table","table"),TableHeadComponent:u("TableHead","thead"),TableFooterComponent:u("TableFoot","tfoot"),TableBodyComponent:u("TableBody","tbody"),TableRowComponent:u("TableRow","tr"),ScrollerComponent:u("Scroller","div"),EmptyPlaceholder:u("EmptyPlaceholder"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder"),FillerRow:u("FillerRow")}})),X0=ZJ((([e,t])=>({...e,...t})),CJ(LQ,Y0)),J0=({height:e})=>l.a.createElement("tr",null,l.a.createElement("td",{style:{height:e}})),Z0=({height:e})=>l.a.createElement("tr",null,l.a.createElement("td",{style:{height:e,padding:0,border:0}})),Q0={overflowAnchor:"none"},e1=l.a.memo((function(){const e=a1("listState"),t=i1("sizeRanges"),n=a1("useWindowScroll"),r=a1("customScrollParent"),o=i1("windowScrollContainerState"),i=i1("scrollContainerState"),a=r||n?o:i,u=a1("itemContent"),c=a1("trackItemSizes"),s=a1("itemSize"),d=a1("log"),{callbackRef:f,ref:p}=uZ(t,s,c,a,d,void 0,r),[h,v]=l.a.useState(0);l1("deviation",(e=>{h!==e&&(p.current.style.marginTop=`${e}px`,v(e))}));const g=a1("EmptyPlaceholder"),m=a1("ScrollSeekPlaceholder")||J0,y=a1("FillerRow")||Z0,b=a1("TableBodyComponent"),w=a1("TableRowComponent"),_=a1("computeItemKey"),k=a1("isSeeking"),C=a1("paddingTopAddition"),E=a1("firstItemIndex"),O=a1("statefulTotalCount"),S=a1("context");if(0===O&&g)return l.a.createElement(g,n0(g,S));const x=e.offsetTop+C+h,j=e.offsetBottom,I=x>0?l.a.createElement(y,{height:x,key:"padding-top",context:S}):null,R=j>0?l.a.createElement(y,{height:j,key:"padding-bottom",context:S}):null,A=e.items.map((e=>{const t=e.originalIndex,n=_(t+E,e.data,S);return k?l.a.createElement(m,{...n0(m,S),key:n,index:e.index,height:e.size,type:e.type||"item"}):l.a.createElement(w,{...n0(w,S),...r0(w,e.data),key:n,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,style:Q0},u(e.index,e.data,S))}));return l.a.createElement(b,{ref:f,"data-testid":"virtuoso-item-list",...n0(b,S)},[I,...A,R])})),t1=({children:e})=>{const t=l.a.useContext(HQ),n=i1("viewportHeight"),r=i1("fixedItemHeight"),o=lZ(yJ(n,(e=>cZ(e,"height"))));return l.a.useEffect((()=>{t&&(n(t.viewportHeight),r(t.itemHeight))}),[t,n,r]),l.a.createElement("div",{style:e0(!1),ref:o,"data-viewport-type":"element"},e)},n1=({children:e})=>{const t=l.a.useContext(HQ),n=i1("windowViewportRect"),r=i1("fixedItemHeight"),o=a1("customScrollParent"),i=UQ(n,o);return l.a.useEffect((()=>{t&&(r(t.itemHeight),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))}),[t,n,r]),l.a.createElement("div",{ref:i,style:e0(!1),"data-viewport-type":"window"},e)},r1=l.a.memo((function(e){const t=a1("useWindowScroll"),n=a1("customScrollParent"),r=i1("fixedHeaderHeight"),o=i1("fixedFooterHeight"),i=a1("fixedHeaderContent"),a=a1("fixedFooterContent"),u=a1("context"),c=lZ(yJ(r,(e=>cZ(e,"height")))),s=lZ(yJ(o,(e=>cZ(e,"height")))),d=n||t?c1:u1,f=n||t?n1:t1,p=a1("TableComponent"),h=a1("TableHeadComponent"),v=a1("TableFooterComponent"),g=i?l.a.createElement(h,{key:"TableHead",style:{zIndex:2,position:"sticky",top:0},ref:c,...n0(h,u)},i()):null,m=a?l.a.createElement(v,{key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:s,...n0(v,u)},a()):null;return l.a.createElement(d,{...e},l.a.createElement(f,null,l.a.createElement(p,{style:{borderSpacing:0,overflowAnchor:"none"},...n0(p,u)},[g,l.a.createElement(e1,{key:"TableBody"}),m])))})),{Component:o1,usePublisher:i1,useEmitterValue:a1,useEmitter:l1}=tZ(X0,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},r1),u1=a0({usePublisher:i1,useEmitterValue:a1,useEmitter:l1}),c1=l0({usePublisher:i1,useEmitterValue:a1,useEmitter:l1}),s1=o1;var d1=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}},f1={"text/plain":"Text","text/html":"Url",default:"Text"};var p1=function(e,t){var n,r,o,i,a,l,u=!1;t||(t={}),n=t.debug||!1;try{if(o=d1(),i=document.createRange(),a=document.getSelection(),(l=document.createElement("span")).textContent=e,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),typeof r.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=f1[t.format]||f1.default;window.clipboardData.setData(o,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(l),i.selectNodeContents(l),a.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(o){n&&console.error("unable to copy using execCommand: ",o),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(o){n&&console.error("unable to copy using clipboardData: ",o),n&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{a&&("function"==typeof a.removeRange?a.removeRange(i):a.removeAllRanges()),l&&document.body.removeChild(l),o()}return u};const h1=Object(a.createContext)(null);function v1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return l.a.Children.forEach(e,(function(e){null==e&&!t.keepEmpty||(Array.isArray(e)?n=n.concat(v1(e)):wH.exports.isFragment(e)&&e.props?n=n.concat(v1(e.props.children,t)):n.push(e))})),n}var g1=a.createContext(null);var m1=new Map;var y1=new dY((function(e){e.forEach((function(e){var t,n=e.target;null===(t=m1.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));var b1=function(e){nq(n,e);var t=aq(n);function n(){return ZH(this,n),t.apply(this,arguments)}return eq(n,[{key:"render",value:function(){return this.props.children}}]),n}(a.Component);function w1(e,t){var n=e.children,r=e.disabled,o=a.useRef(null),i=a.useRef(null),l=a.useContext(g1),u="function"==typeof n,c=u?n(o):n,s=a.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),d=!u&&a.isValidElement(c)&&$H(c),f=d?c.ref:null,p=BH(f,o),h=function(){var e;return zW(o.current)||(o.current&&"object"===yH(o.current)?zW(null===(e=o.current)||void 0===e?void 0:e.nativeElement):null)||zW(i.current)};a.useImperativeHandle(t,(function(){return h()}));var v=a.useRef(e);v.current=e;var g=a.useCallback((function(e){var t=v.current,n=t.onResize,r=t.data,o=e.getBoundingClientRect(),i=o.width,a=o.height,u=e.offsetWidth,c=e.offsetHeight,d=Math.floor(i),f=Math.floor(a);if(s.current.width!==d||s.current.height!==f||s.current.offsetWidth!==u||s.current.offsetHeight!==c){var p={width:d,height:f,offsetWidth:u,offsetHeight:c};s.current=p;var h=u===Math.round(i)?i:u,g=c===Math.round(a)?a:c,m=qH(qH({},p),{},{offsetWidth:h,offsetHeight:g});null==l||l(m,e,r),n&&Promise.resolve().then((function(){n(m,e)}))}}),[]);return a.useEffect((function(){var e=h();return e&&!r&&function(e,t){m1.has(e)||(m1.set(e,new Set),y1.observe(e)),m1.get(e).add(t)}(e,g),function(){return function(e,t){m1.has(e)&&(m1.get(e).delete(t),m1.get(e).size||(y1.unobserve(e),m1.delete(e)))}(e,g)}}),[o.current,r]),a.createElement(b1,{ref:i},d?a.cloneElement(c,{ref:p}):c)}var _1=a.forwardRef(w1);function k1(e,t){var n=e.children;return("function"==typeof n?[n]:v1(n)).map((function(n,r){var o=(null==n?void 0:n.key)||"".concat("rc-observer-key","-").concat(r);return a.createElement(_1,lq({},e,{key:o,ref:0===r?t:void 0}),n)}))}var C1=a.forwardRef(k1);C1.Collection=function(e){var t=e.children,n=e.onBatchResize,r=a.useRef(0),o=a.useRef([]),i=a.useContext(g1),l=a.useCallback((function(e,t,a){r.current+=1;var l=r.current;o.current.push({size:e,element:t,data:a}),Promise.resolve().then((function(){l===r.current&&(null==n||n(o.current),o.current=[])})),null==i||i(e,t,a)}),[n,i]);return a.createElement(g1.Provider,{value:l},t)};var E1={width:0,height:0,left:0,top:0};function O1(e,t){var n=a.useRef(e),r=sH(a.useState({}),2)[1];return[n.current,function(e){var o="function"==typeof e?e(n.current):e;o!==n.current&&t(o,n.current),n.current=o,r({})}]}var S1=Math.pow(.995,20);function x1(e){var t=sH(Object(a.useState)(0),2),n=t[0],r=t[1],o=Object(a.useRef)(0),i=Object(a.useRef)();return i.current=e,hH((function(){var e;null===(e=i.current)||void 0===e||e.call(i)}),[n]),function(){o.current===n&&(o.current+=1,r(o.current))}}var j1={width:0,height:0,left:0,top:0,right:0};function I1(e){var t;return e instanceof Map?(t={},e.forEach((function(e,n){t[n]=e}))):t=e,JSON.stringify(t)}function R1(e){return String(e).replace(/"/g,"TABS_DQ")}function A1(e,t,n,r){return!(!n||r||!1===e||void 0===e&&(!1===t||null===t))}var D1=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.editable,o=e.locale,i=e.style;return r&&!1!==r.showAdd?a.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:i,"aria-label":(null==o?void 0:o.addAriaLabel)||"Add tab",onClick:function(e){r.onEdit("add",{event:e})}},r.addIcon||"+"):null})),P1=a.forwardRef((function(e,t){var n=e.position,r=e.prefixCls,o=e.extra;if(!o)return null;var i,l={};return"object"!==yH(o)||a.isValidElement(o)?l.right=o:l=o,"right"===n&&(i=l.right),"left"===n&&(i=l.left),i?a.createElement("div",{className:"".concat(r,"-extra-content"),ref:t},i):null})),M1=a.createContext(null),T1=[];var F1="data-rc-order",N1="data-rc-priority",V1="rc-util-key",L1=new Map;function B1(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):V1}function $1(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function z1(e){return Array.from((L1.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function U1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!dH())return null;var n=t.csp,r=t.prepend,o=t.priority,i=void 0===o?0:o,a=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r),l="prependQueue"===a,u=document.createElement("style");u.setAttribute(F1,a),l&&i&&u.setAttribute(N1,"".concat(i)),null!=n&&n.nonce&&(u.nonce=null==n?void 0:n.nonce),u.innerHTML=e;var c=$1(t),s=c.firstChild;if(r){if(l){var d=(t.styles||z1(c)).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(F1)))return!1;var t=Number(e.getAttribute(N1)||0);return i>=t}));if(d.length)return c.insertBefore(u,d[d.length-1].nextSibling),u}c.insertBefore(u,s)}else c.appendChild(u);return u}function H1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=$1(t);return(t.styles||z1(n)).find((function(n){return n.getAttribute(B1(t))===e}))}function q1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=H1(e,t);n&&$1(t).removeChild(n)}function W1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=$1(n),o=z1(r),i=qH(qH({},n),{},{styles:o});!function(e,t){var n=L1.get(e);if(!n||!BW(document,n)){var r=U1("",t),o=r.parentNode;L1.set(e,o),e.removeChild(r)}}(r,i);var a=H1(t,i);if(a){var l,u,c;if(null!==(l=i.csp)&&void 0!==l&&l.nonce&&a.nonce!==(null===(u=i.csp)||void 0===u?void 0:u.nonce))a.nonce=null===(c=i.csp)||void 0===c?void 0:c.nonce;return a.innerHTML!==e&&(a.innerHTML=e),a}var s=U1(e,i);return s.setAttribute(B1(i),t),s}function G1(e){return!(typeof document>"u")&&e&&e instanceof Element?function(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=t;var r,o,i=n.style;if(i.position="absolute",i.left="0",i.top="0",i.width="100px",i.height="100px",i.overflow="scroll",e){var a=getComputedStyle(e);i.scrollbarColor=a.scrollbarColor,i.scrollbarWidth=a.scrollbarWidth;var l=getComputedStyle(e,"::-webkit-scrollbar"),u=parseInt(l.width,10),c=parseInt(l.height,10);try{var s=u?"width: ".concat(l.width,";"):"",d=c?"height: ".concat(l.height,";"):"";W1("\n#".concat(t,"::-webkit-scrollbar {\n").concat(s,"\n").concat(d,"\n}"),t)}catch(e){console.error(e),r=u,o=c}}document.body.appendChild(n);var f=e&&r&&!isNaN(r)?r:n.offsetWidth-n.clientWidth,p=e&&o&&!isNaN(o)?o:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),q1(t),{width:f,height:p}}(e):{width:0,height:0}}var K1="rc-util-locker-".concat(Date.now()),Y1=0;function X1(e){var t=!!e,n=sH(a.useState((function(){return Y1+=1,"".concat(K1,"_").concat(Y1)})),1)[0];pH((function(){if(t){var e=G1(document.body).width,r=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;W1("\nhtml body {\n  overflow-y: hidden;\n  ".concat(r?"width: calc(100% - ".concat(e,"px);"):"","\n}"),n)}else q1(n);return function(){q1(n)}}),[t,n])}var J1=!1;var Z1=function(e){return!1!==e&&(dH()&&e?"string"==typeof e?document.querySelector(e):"function"==typeof e?e():e:null)},Q1=a.forwardRef((function(e,t){var n=e.open,r=e.autoLock,o=e.getContainer;e.debug;var i=e.autoDestroy,l=void 0===i||i,c=e.children,s=sH(a.useState(n),2),d=s[0],f=s[1],p=d||n;a.useEffect((function(){(l||n)&&f(n)}),[n,l]);var h=sH(a.useState((function(){return Z1(o)})),2),v=h[0],g=h[1];a.useEffect((function(){var e=Z1(o);g(null!=e?e:null)}));var m=function(e,t){var n=sH(a.useState((function(){return dH()?document.createElement("div"):null})),1)[0],r=a.useRef(!1),o=a.useContext(M1),i=sH(a.useState(T1),2),l=i[0],u=i[1],c=o||(r.current?void 0:function(e){u((function(t){return[e].concat(WH(t))}))});function s(){n.parentElement||document.body.appendChild(n),r.current=!0}function d(){var e;null===(e=n.parentElement)||void 0===e||e.removeChild(n),r.current=!1}return pH((function(){return e?o?o(s):s():d(),d}),[e]),pH((function(){l.length&&(l.forEach((function(e){return e()})),u(T1))}),[l]),[n,c]}(p&&!v),y=sH(m,2),b=y[0],w=y[1],_=null!=v?v:b;X1(r&&n&&dH()&&(_===b||_===document.body));var k=null;c&&$H(c)&&t&&(k=c.ref);var C=BH(k,t);if(!p||!dH()||void 0===v)return null;var E=!1===_||function(e){return"boolean"==typeof e&&(J1=e),J1}(),O=c;return t&&(O=a.cloneElement(c,{ref:C})),a.createElement(M1.Provider,{value:w},E?O:Object(u.createPortal)(O,_))}));function e2(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}function t2(e){return function(e){return e2(e)instanceof ShadowRoot}(e)?e2(e):null}var n2=0,r2=qH({},a).useId;const o2=r2?function(e){var t=r2();return e||t}:function(e){var t=sH(a.useState("ssr-id"),2),n=t[0],r=t[1];return a.useEffect((function(){var e=n2;n2+=1,r("rc_unique_".concat(e))}),[]),e||n};function i2(e){var t=e.prefixCls,n=e.align,r=e.arrow,o=e.arrowPos,i=r||{},l=i.className,u=i.content,c=o.x,s=void 0===c?0:c,d=o.y,f=void 0===d?0:d,p=a.useRef();if(!n||!n.points)return null;var h={position:"absolute"};if(!1!==n.autoArrow){var v=n.points[0],g=n.points[1],m=v[0],y=v[1],b=g[0],w=g[1];m!==b&&["t","b"].includes(m)?"t"===m?h.top=0:h.bottom=0:h.top=f,y!==w&&["l","r"].includes(y)?"l"===y?h.left=0:h.right=0:h.left=s}return a.createElement("div",{ref:p,className:u$("".concat(t,"-arrow"),l),style:h},u)}function a2(e){var t=e.prefixCls,n=e.open,r=e.zIndex,o=e.mask,i=e.motion;return o?a.createElement(SG,lq({},i,{motionAppear:!0,visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return a.createElement("div",{style:{zIndex:r},className:u$("".concat(t,"-mask"),n)})})):null}var l2=a.memo((function(e){return e.children}),(function(e,t){return t.cache})),u2=a.forwardRef((function(e,t){var n=e.popup,r=e.className,o=e.prefixCls,i=e.style,l=e.target,u=e.onVisibleChanged,c=e.open,s=e.keepDom,d=e.fresh,f=e.onClick,p=e.mask,h=e.arrow,v=e.arrowPos,g=e.align,m=e.motion,y=e.maskMotion,b=e.forceRender,w=e.getPopupContainer,_=e.autoDestroy,k=e.portal,C=e.zIndex,E=e.onMouseEnter,O=e.onMouseLeave,S=e.onPointerEnter,x=e.ready,j=e.offsetX,I=e.offsetY,R=e.offsetR,A=e.offsetB,D=e.onAlign,P=e.onPrepare,M=e.stretch,T=e.targetWidth,F=e.targetHeight,N="function"==typeof n?n():n,V=c||s,L=(null==w?void 0:w.length)>0,B=sH(a.useState(!w||!L),2),$=B[0],z=B[1];if(pH((function(){!$&&L&&l&&z(!0)}),[$,L,l]),!$)return null;var U="auto",H={left:"-1000vw",top:"-1000vh",right:U,bottom:U};if(x||!c){var q,W=g.points,G=g.dynamicInset||(null===(q=g._experimental)||void 0===q?void 0:q.dynamicInset),K=G&&"r"===W[0][1],Y=G&&"b"===W[0][0];K?(H.right=R,H.left=U):(H.left=j,H.right=U),Y?(H.bottom=A,H.top=U):(H.top=I,H.bottom=U)}var X={};return M&&(M.includes("height")&&F?X.height=F:M.includes("minHeight")&&F&&(X.minHeight=F),M.includes("width")&&T?X.width=T:M.includes("minWidth")&&T&&(X.minWidth=T)),c||(X.pointerEvents="none"),a.createElement(k,{open:b||V,getContainer:w&&function(){return w(l)},autoDestroy:_},a.createElement(a2,{prefixCls:o,open:c,zIndex:C,mask:p,motion:y}),a.createElement(C1,{onResize:D,disabled:!c},(function(e){return a.createElement(SG,lq({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:b,leavedClassName:"".concat(o,"-hidden")},m,{onAppearPrepare:P,onEnterPrepare:P,visible:c,onVisibleChanged:function(e){var t;null==m||null===(t=m.onVisibleChanged)||void 0===t||t.call(m,e),u(e)}}),(function(n,l){var u=n.className,s=n.style,p=u$(o,u,r);return a.createElement("div",{ref:LH(e,t,l),className:p,style:qH(qH(qH(qH({"--arrow-x":"".concat(v.x||0,"px"),"--arrow-y":"".concat(v.y||0,"px")},H),X),s),{},{boxSizing:"border-box",zIndex:C},i),onMouseEnter:E,onMouseLeave:O,onPointerEnter:S,onClick:f},h&&a.createElement(i2,{prefixCls:o,arrow:h,arrowPos:v,align:g}),a.createElement(l2,{cache:!c&&!d},N))}))})))})),c2=a.forwardRef((function(e,t){var n=e.children,r=e.getTriggerDOMNode,o=$H(n),i=a.useCallback((function(e){VH(t,r?r(e):e)}),[r]),l=BH(i,n.ref);return o?a.cloneElement(n,{ref:l}):n})),s2=a.createContext(null);function d2(e){return e?Array.isArray(e)?e:[e]:[]}function f2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function p2(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function h2(e){return e.ownerDocument.defaultView}function v2(e){for(var t=[],n=null==e?void 0:e.parentElement,r=["hidden","scroll","clip","auto"];n;){var o=h2(n).getComputedStyle(n);[o.overflowX,o.overflowY,o.overflow].some((function(e){return r.includes(e)}))&&t.push(n),n=n.parentElement}return t}function g2(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(e)?t:e}function m2(e){return g2(parseFloat(e),0)}function y2(e,t){var n=qH({},e);return(t||[]).forEach((function(e){if(!(e instanceof HTMLBodyElement||e instanceof HTMLHtmlElement)){var t=h2(e).getComputedStyle(e),r=t.overflow,o=t.overflowClipMargin,i=t.borderTopWidth,a=t.borderBottomWidth,l=t.borderLeftWidth,u=t.borderRightWidth,c=e.getBoundingClientRect(),s=e.offsetHeight,d=e.clientHeight,f=e.offsetWidth,p=e.clientWidth,h=m2(i),v=m2(a),g=m2(l),m=m2(u),y=g2(Math.round(c.width/f*1e3)/1e3),b=g2(Math.round(c.height/s*1e3)/1e3),w=(f-p-g-m)*y,_=(s-d-h-v)*b,k=h*b,C=v*b,E=g*y,O=m*y,S=0,x=0;if("clip"===r){var j=m2(o);S=j*y,x=j*b}var I=c.x+E-S,R=c.y+k-x,A=I+c.width+2*S-E-O-w,D=R+c.height+2*x-k-C-_;n.left=Math.max(n.left,I),n.top=Math.max(n.top,R),n.right=Math.min(n.right,A),n.bottom=Math.min(n.bottom,D)}})),n}function b2(e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=t.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(t)}function w2(e,t){var n=sH(t||[],2),r=n[0],o=n[1];return[b2(e.width,r),b2(e.height,o)]}function _2(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[e[0],e[1]]}function k2(e,t){var n,r=t[0],o=t[1];return n="t"===r?e.y:"b"===r?e.y+e.height:e.y+e.height/2,{x:"l"===o?e.x:"r"===o?e.x+e.width:e.x+e.width/2,y:n}}function C2(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map((function(e,r){return r===t?n[e]||"c":e})).join("")}var E2=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];const O2=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q1,t=a.forwardRef((function(t,n){var r=t.prefixCls,o=void 0===r?"rc-trigger-popup":r,i=t.children,l=t.action,u=void 0===l?"hover":l,c=t.showAction,s=t.hideAction,d=t.popupVisible,f=t.defaultPopupVisible,p=t.onPopupVisibleChange,h=t.afterPopupVisibleChange,v=t.mouseEnterDelay,g=t.mouseLeaveDelay,m=void 0===g?.1:g,y=t.focusDelay,b=t.blurDelay,w=t.mask,_=t.maskClosable,k=void 0===_||_,C=t.getPopupContainer,E=t.forceRender,O=t.autoDestroy,S=t.destroyPopupOnHide,x=t.popup,j=t.popupClassName,I=t.popupStyle,R=t.popupPlacement,A=t.builtinPlacements,D=void 0===A?{}:A,P=t.popupAlign,M=t.zIndex,T=t.stretch,F=t.getPopupClassNameFromAlign,N=t.fresh,V=t.alignPoint,L=t.onPopupClick,B=t.onPopupAlign,$=t.arrow,z=t.popupMotion,U=t.maskMotion,H=t.popupTransitionName,q=t.popupAnimation,W=t.maskTransitionName,G=t.maskAnimation,K=t.className,Y=t.getTriggerDOMNode,X=WW(t,E2),J=O||S||!1,Z=sH(a.useState(!1),2),Q=Z[0],ee=Z[1];pH((function(){ee(GW())}),[]);var te=a.useRef({}),ne=a.useContext(s2),re=a.useMemo((function(){return{registerSubPopup:function(e,t){te.current[e]=t,null==ne||ne.registerSubPopup(e,t)}}}),[ne]),oe=o2(),ie=sH(a.useState(null),2),ae=ie[0],le=ie[1],ue=lH((function(e){$W(e)&&ae!==e&&le(e),null==ne||ne.registerSubPopup(oe,e)})),ce=sH(a.useState(null),2),se=ce[0],de=ce[1],fe=a.useRef(null),pe=lH((function(e){$W(e)&&se!==e&&(de(e),fe.current=e)})),he=a.Children.only(i),ve=(null==he?void 0:he.props)||{},ge={},me=lH((function(e){var t,n,r=se;return(null==r?void 0:r.contains(e))||(null===(t=t2(r))||void 0===t?void 0:t.host)===e||e===r||(null==ae?void 0:ae.contains(e))||(null===(n=t2(ae))||void 0===n?void 0:n.host)===e||e===ae||Object.values(te.current).some((function(t){return(null==t?void 0:t.contains(e))||e===t}))})),ye=p2(o,z,q,H),be=p2(o,U,G,W),we=sH(a.useState(f||!1),2),_e=we[0],ke=we[1],Ce=null!=d?d:_e,Ee=lH((function(e){void 0===d&&ke(e)}));pH((function(){ke(d||!1)}),[d]);var Oe=a.useRef(Ce);Oe.current=Ce;var Se=a.useRef([]);Se.current=[];var xe=lH((function(e){var t;Ee(e),(null!==(t=Se.current[Se.current.length-1])&&void 0!==t?t:Ce)!==e&&(Se.current.push(e),null==p||p(e))})),je=a.useRef(),Ie=function(){clearTimeout(je.current)},Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Ie(),0===t?xe(e):je.current=setTimeout((function(){xe(e)}),1e3*t)};a.useEffect((function(){return Ie}),[]);var Ae=sH(a.useState(!1),2),De=Ae[0],Pe=Ae[1];pH((function(e){(!e||Ce)&&Pe(!0)}),[Ce]);var Me=sH(a.useState(null),2),Te=Me[0],Fe=Me[1],Ne=sH(a.useState([0,0]),2),Ve=Ne[0],Le=Ne[1],Be=function(e){Le([e.clientX,e.clientY])},$e=function(e,t,n,r,o,i,l){var u=sH(a.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[r]||{}}),2),c=u[0],s=u[1],d=a.useRef(0),f=a.useMemo((function(){return t?v2(t):[]}),[t]),p=a.useRef({});e||(p.current={});var h=lH((function(){if(t&&n&&e){let e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G,r=x.x+e,o=x.y+t,i=r+F,a=o+T,l=Math.max(r,n.left),u=Math.max(o,n.top),c=Math.min(i,n.right),s=Math.min(a,n.bottom);return Math.max(0,(c-l)*(s-u))},lt=function(){ae=x.y+ye,le=ae+T,ue=x.x+me,ce=ue+F};var a,u,c,d=t,h=d.ownerDocument,v=h2(d).getComputedStyle(d),g=v.width,m=v.height,y=v.position,b=d.style.left,w=d.style.top,_=d.style.right,k=d.style.bottom,C=d.style.overflow,E=qH(qH({},o[r]),i),O=h.createElement("div");if(null===(a=d.parentElement)||void 0===a||a.appendChild(O),O.style.left="".concat(d.offsetLeft,"px"),O.style.top="".concat(d.offsetTop,"px"),O.style.position=y,O.style.height="".concat(d.offsetHeight,"px"),O.style.width="".concat(d.offsetWidth,"px"),d.style.left="0",d.style.top="0",d.style.right="auto",d.style.bottom="auto",d.style.overflow="hidden",Array.isArray(n))c={x:n[0],y:n[1],width:0,height:0};else{var S=n.getBoundingClientRect();c={x:S.x,y:S.y,width:S.width,height:S.height}}var x=d.getBoundingClientRect(),j=h.documentElement,I=j.clientWidth,R=j.clientHeight,A=j.scrollWidth,D=j.scrollHeight,P=j.scrollTop,M=j.scrollLeft,T=x.height,F=x.width,N=c.height,V=c.width,L={left:0,top:0,right:I,bottom:R},B={left:-M,top:-P,right:A-M,bottom:D-P},$=E.htmlRegion,z="visible",U="visibleFirst";"scroll"!==$&&$!==U&&($=z);var H=$===U,q=y2(B,f),W=y2(L,f),G=$===z?W:q,K=H?W:G;d.style.left="auto",d.style.top="auto",d.style.right="0",d.style.bottom="0";var Y=d.getBoundingClientRect();d.style.left=b,d.style.top=w,d.style.right=_,d.style.bottom=k,d.style.overflow=C,null===(u=d.parentElement)||void 0===u||u.removeChild(O);var X=g2(Math.round(F/parseFloat(g)*1e3)/1e3),J=g2(Math.round(T/parseFloat(m)*1e3)/1e3);if(0===X||0===J||$W(n)&&!Sq(n))return;var Z=E.offset,Q=E.targetOffset,ee=sH(w2(x,Z),2),te=ee[0],ne=ee[1],re=sH(w2(c,Q),2),oe=re[0],ie=re[1];c.x-=oe,c.y-=ie;var ae,le,ue,ce,se=sH(E.points||[],2),de=se[0],fe=_2(se[1]),pe=_2(de),he=k2(c,fe),ve=k2(x,pe),ge=qH({},E),me=he.x-ve.x+te,ye=he.y-ve.y+ne,be=e(me,ye),we=e(me,ye,W),_e=k2(c,["t","l"]),ke=k2(x,["t","l"]),Ce=k2(c,["b","r"]),Ee=k2(x,["b","r"]),Oe=E.overflow||{},Se=Oe.adjustX,xe=Oe.adjustY,je=Oe.shiftX,Ie=Oe.shiftY,Re=function(e){return"boolean"==typeof e?e:e>=0};lt();var Ae=Re(xe),De=pe[0]===fe[0];if(Ae&&"t"===pe[0]&&(le>K.bottom||p.current.bt)){var Pe=ye;De?Pe-=T-N:Pe=_e.y-Ee.y-ne;var Me=e(me,Pe),Te=e(me,Pe,W);Me>be||Me===be&&(!H||Te>=we)?(p.current.bt=!0,ye=Pe,ne=-ne,ge.points=[C2(pe,0),C2(fe,0)]):p.current.bt=!1}if(Ae&&"b"===pe[0]&&(ae<K.top||p.current.tb)){var Fe=ye;De?Fe+=T-N:Fe=Ce.y-ke.y-ne;var Ne=e(me,Fe),Ve=e(me,Fe,W);Ne>be||Ne===be&&(!H||Ve>=we)?(p.current.tb=!0,ye=Fe,ne=-ne,ge.points=[C2(pe,0),C2(fe,0)]):p.current.tb=!1}var Le=Re(Se),Be=pe[1]===fe[1];if(Le&&"l"===pe[1]&&(ce>K.right||p.current.rl)){var $e=me;Be?$e-=F-V:$e=_e.x-Ee.x-te;var ze=e($e,ye),Ue=e($e,ye,W);ze>be||ze===be&&(!H||Ue>=we)?(p.current.rl=!0,me=$e,te=-te,ge.points=[C2(pe,1),C2(fe,1)]):p.current.rl=!1}if(Le&&"r"===pe[1]&&(ue<K.left||p.current.lr)){var He=me;Be?He+=F-V:He=Ce.x-ke.x-te;var qe=e(He,ye),We=e(He,ye,W);qe>be||qe===be&&(!H||We>=we)?(p.current.lr=!0,me=He,te=-te,ge.points=[C2(pe,1),C2(fe,1)]):p.current.lr=!1}lt();var Ge=!0===je?0:je;"number"==typeof Ge&&(ue<W.left&&(me-=ue-W.left-te,c.x+V<W.left+Ge&&(me+=c.x-W.left+V-Ge)),ce>W.right&&(me-=ce-W.right-te,c.x>W.right-Ge&&(me+=c.x-W.right+Ge)));var Ke=!0===Ie?0:Ie;"number"==typeof Ke&&(ae<W.top&&(ye-=ae-W.top-ne,c.y+N<W.top+Ke&&(ye+=c.y-W.top+N-Ke)),le>W.bottom&&(ye-=le-W.bottom-ne,c.y>W.bottom-Ke&&(ye+=c.y-W.bottom+Ke)));var Ye=x.x+me,Xe=Ye+F,Je=x.y+ye,Ze=Je+T,Qe=c.x,et=Qe+V,tt=c.y,nt=tt+N,rt=(Math.max(Ye,Qe)+Math.min(Xe,et))/2-Ye,ot=(Math.max(Je,tt)+Math.min(Ze,nt))/2-Je;null==l||l(t,ge);var it=Y.right-x.x-(me+x.width),at=Y.bottom-x.y-(ye+x.height);s({ready:!0,offsetX:me/X,offsetY:ye/J,offsetR:it/X,offsetB:at/J,arrowX:rt/X,arrowY:ot/J,scaleX:X,scaleY:J,align:ge})}})),v=function(){s((function(e){return qH(qH({},e),{},{ready:!1})}))};return pH(v,[r]),pH((function(){e||v()}),[e]),[c.ready,c.offsetX,c.offsetY,c.offsetR,c.offsetB,c.arrowX,c.arrowY,c.scaleX,c.scaleY,c.align,function(){d.current+=1;var e=d.current;Promise.resolve().then((function(){d.current===e&&h()}))}]}(Ce,ae,V?Ve:se,R,D,P,B),ze=sH($e,11),Ue=ze[0],He=ze[1],qe=ze[2],We=ze[3],Ge=ze[4],Ke=ze[5],Ye=ze[6],Xe=ze[7],Je=ze[8],Ze=ze[9],Qe=ze[10],et=function(e,t,n,r){return a.useMemo((function(){var o=d2(null!=n?n:t),i=d2(null!=r?r:t),a=new Set(o),l=new Set(i);return e&&(a.has("hover")&&(a.delete("hover"),a.add("click")),l.has("hover")&&(l.delete("hover"),l.add("click"))),[a,l]}),[e,t,n,r])}(Q,u,c,s),tt=sH(et,2),nt=tt[0],rt=tt[1],ot=nt.has("click"),it=rt.has("click")||rt.has("contextMenu"),at=lH((function(){De||Qe()}));(function(e,t,n,r,o){pH((function(){if(e&&t&&n){let e=function(){r(),o()};var i=n,a=v2(t),l=v2(i),u=h2(i),c=new Set([u].concat(WH(a),WH(l)));return c.forEach((function(t){t.addEventListener("scroll",e,{passive:!0})})),u.addEventListener("resize",e,{passive:!0}),r(),function(){c.forEach((function(t){t.removeEventListener("scroll",e),u.removeEventListener("resize",e)}))}}}),[e,t,n])})(Ce,se,ae,at,(function(){Oe.current&&V&&it&&Re(!1)})),pH((function(){at()}),[Ve,R]),pH((function(){Ce&&(null==D||!D[R])&&at()}),[JSON.stringify(P)]);var lt=a.useMemo((function(){var e=function(e,t,n,r){for(var o=n.points,i=Object.keys(e),a=0;a<i.length;a+=1){var l,u=i[a];if(f2(null===(l=e[u])||void 0===l?void 0:l.points,o,r))return"".concat(t,"-placement-").concat(u)}return""}(D,o,Ze,V);return u$(e,null==F?void 0:F(Ze))}),[Ze,F,D,o,V]);a.useImperativeHandle(n,(function(){return{nativeElement:fe.current,forceAlign:at}}));var ut=sH(a.useState(0),2),ct=ut[0],st=ut[1],dt=sH(a.useState(0),2),ft=dt[0],pt=dt[1],ht=function(){if(T&&se){var e=se.getBoundingClientRect();st(e.width),pt(e.height)}};function vt(e,t,n,r){ge[e]=function(o){var i;null==r||r(o),Re(t,n);for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];null===(i=ve[e])||void 0===i||i.call.apply(i,[ve,o].concat(l))}}pH((function(){Te&&(Qe(),Te(),Fe(null))}),[Te]),(ot||it)&&(ge.onClick=function(e){var t;Oe.current&&it?Re(!1):!Oe.current&&ot&&(Be(e),Re(!0));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null===(t=ve.onClick)||void 0===t||t.call.apply(t,[ve,e].concat(r))}),function(e,t,n,r,o,i,l,u){var c=a.useRef(e),s=a.useRef(!1);c.current!==e&&(s.current=!0,c.current=e),a.useEffect((function(){var e=Oq((function(){s.current=!1}));return function(){Oq.cancel(e)}}),[e]),a.useEffect((function(){if(t&&r&&(!o||i)){var e=function(){var e=!1;return[function(t){var n=t.target;e=l(n)},function(t){var n=t.target;!s.current&&c.current&&!e&&!l(n)&&u(!1)}]},a=sH(e(),2),d=a[0],f=a[1],p=sH(e(),2),h=p[0],v=p[1],g=h2(r);g.addEventListener("mousedown",d,!0),g.addEventListener("click",f,!0),g.addEventListener("contextmenu",f,!0);var m=t2(n);return m&&(m.addEventListener("mousedown",h,!0),m.addEventListener("click",v,!0),m.addEventListener("contextmenu",v,!0)),function(){g.removeEventListener("mousedown",d,!0),g.removeEventListener("click",f,!0),g.removeEventListener("contextmenu",f,!0),m&&(m.removeEventListener("mousedown",h,!0),m.removeEventListener("click",v,!0),m.removeEventListener("contextmenu",v,!0))}}}),[t,n,r,o,i])}(Ce,it,se,ae,w,k,me,Re);var gt,mt,yt=nt.has("hover"),bt=rt.has("hover");yt&&(vt("onMouseEnter",!0,v,(function(e){Be(e)})),vt("onPointerEnter",!0,v,(function(e){Be(e)})),gt=function(e){(Ce||De)&&null!=ae&&ae.contains(e.target)&&Re(!0,v)},V&&(ge.onMouseMove=function(e){var t;null===(t=ve.onMouseMove)||void 0===t||t.call(ve,e)})),bt&&(vt("onMouseLeave",!1,m),vt("onPointerLeave",!1,m),mt=function(){Re(!1,m)}),nt.has("focus")&&vt("onFocus",!0,y),rt.has("focus")&&vt("onBlur",!1,b),nt.has("contextMenu")&&(ge.onContextMenu=function(e){var t;Oe.current&&rt.has("contextMenu")?Re(!1):(Be(e),Re(!0)),e.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];null===(t=ve.onContextMenu)||void 0===t||t.call.apply(t,[ve,e].concat(r))}),K&&(ge.className=u$(ve.className,K));var wt=qH(qH({},ve),ge),_t={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(e){X[e]&&(_t[e]=function(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null===(t=wt[e])||void 0===t||t.call.apply(t,[wt].concat(r)),X[e].apply(X,r)})}));var kt=a.cloneElement(he,qH(qH({},wt),_t)),Ct={x:Ke,y:Ye},Et=$?qH({},!0!==$?$:{}):null;return a.createElement(a.Fragment,null,a.createElement(C1,{disabled:!Ce,ref:pe,onResize:function(){ht(),at()}},a.createElement(c2,{getTriggerDOMNode:Y},kt)),a.createElement(s2.Provider,{value:re},a.createElement(u2,{portal:e,ref:ue,prefixCls:o,popup:x,className:u$(j,lt),style:I,target:se,onMouseEnter:gt,onMouseLeave:mt,onPointerEnter:gt,zIndex:M,open:Ce,keepDom:De,fresh:N,onClick:L,mask:w,motion:ye,maskMotion:be,onVisibleChanged:function(e){Pe(!1),Qe(),null==h||h(e)},onPrepare:function(){return new Promise((function(e){ht(),Fe((function(){return e}))}))},forceRender:E,autoDestroy:J,getPopupContainer:C,align:Ze,arrow:Et,arrowPos:Ct,ready:Ue,offsetX:He,offsetY:qe,offsetR:We,offsetB:Ge,onAlign:at,stretch:T,targetWidth:ct/Xe,targetHeight:ft/Je})))}));return t}(Q1);var S2=uq.ESC,x2=uq.TAB;var j2=Object(a.forwardRef)((function(e,t){var n=e.overlay,r=e.arrow,o=e.prefixCls,i=Object(a.useMemo)((function(){return"function"==typeof n?n():n}),[n]),u=LH(t,null==i?void 0:i.ref);return l.a.createElement(l.a.Fragment,null,r&&l.a.createElement("div",{className:"".concat(o,"-arrow")}),l.a.cloneElement(i,{ref:$H(i)?u:void 0}))})),I2={adjustX:1,adjustY:1},R2=[0,0],A2={topLeft:{points:["bl","tl"],overflow:I2,offset:[0,-4],targetOffset:R2},top:{points:["bc","tc"],overflow:I2,offset:[0,-4],targetOffset:R2},topRight:{points:["br","tr"],overflow:I2,offset:[0,-4],targetOffset:R2},bottomLeft:{points:["tl","bl"],overflow:I2,offset:[0,4],targetOffset:R2},bottom:{points:["tc","bc"],overflow:I2,offset:[0,4],targetOffset:R2},bottomRight:{points:["tr","br"],overflow:I2,offset:[0,4],targetOffset:R2}},D2=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function P2(e,t){var n,r=e.arrow,o=void 0!==r&&r,i=e.prefixCls,u=void 0===i?"rc-dropdown":i,c=e.transitionName,s=e.animation,d=e.align,f=e.placement,p=void 0===f?"bottomLeft":f,h=e.placements,v=void 0===h?A2:h,g=e.getPopupContainer,m=e.showAction,y=e.hideAction,b=e.overlayClassName,w=e.overlayStyle,_=e.visible,k=e.trigger,C=void 0===k?["hover"]:k,E=e.autoFocus,O=e.overlay,S=e.children,x=e.onVisibleChange,j=WW(e,D2),I=sH(l.a.useState(),2),R=I[0],A=I[1],D="visible"in e?_:R,P=l.a.useRef(null),M=l.a.useRef(null),T=l.a.useRef(null);l.a.useImperativeHandle(t,(function(){return P.current}));var F=function(e){A(e),null==x||x(e)};!function(e){var t=e.visible,n=e.triggerRef,r=e.onVisibleChange,o=e.autoFocus,i=e.overlayRef,l=a.useRef(!1),u=function(){var e,o;t&&(null===(e=n.current)||void 0===e||null===(o=e.focus)||void 0===o||o.call(e),null==r||r(!1))},c=function(){var e;return!(null===(e=i.current)||void 0===e||!e.focus||(i.current.focus(),l.current=!0,0))},s=function(e){switch(e.keyCode){case S2:u();break;case x2:var t=!1;l.current||(t=c()),t?e.preventDefault():u()}};a.useEffect((function(){return t?(window.addEventListener("keydown",s),o&&Oq(c,3),function(){window.removeEventListener("keydown",s),l.current=!1}):function(){l.current=!1}}),[t])}({visible:D,triggerRef:T,onVisibleChange:F,autoFocus:E,overlayRef:M});var N,V=function(){return l.a.createElement(j2,{ref:M,overlay:O,prefixCls:u,arrow:o})},L=l.a.cloneElement(S,{className:u$(null===(n=S.props)||void 0===n?void 0:n.className,D&&(N=e.openClassName,void 0!==N?N:"".concat(u,"-open"))),ref:$H(S)?LH(T,S.ref):void 0}),B=y;return!B&&-1!==C.indexOf("contextMenu")&&(B=["click"]),l.a.createElement(O2,lq({builtinPlacements:v},j,{prefixCls:u,ref:P,popupClassName:u$(b,UH({},"".concat(u,"-show-arrow"),o)),popupStyle:w,action:C,showAction:m,hideAction:B,popupPlacement:p,popupAlign:d,popupTransitionName:c,popupAnimation:s,popupVisible:D,stretch:function(){var t=e.minOverlayWidthMatchTrigger,n=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!n}()?"minWidth":"",popup:"function"==typeof O?V:V(),onPopupVisibleChange:F,onPopupClick:function(t){var n=e.onOverlayClick;A(!1),n&&n(t)},getPopupContainer:g}),L)}const M2=l.a.forwardRef(P2);var T2=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],F2=void 0;function N2(e,t){var n=e.prefixCls,r=e.invalidate,o=e.item,i=e.renderItem,l=e.responsive,u=e.responsiveDisabled,c=e.registerSize,s=e.itemKey,d=e.className,f=e.style,p=e.children,h=e.display,v=e.order,g=e.component,m=void 0===g?"div":g,y=WW(e,T2),b=l&&!h;function w(e){c(s,e)}a.useEffect((function(){return function(){w(null)}}),[]);var _,k=i&&o!==F2?i(o):p;r||(_={opacity:b?0:1,height:b?0:F2,overflowY:b?"hidden":F2,order:l?v:F2,pointerEvents:b?"none":F2,position:b?"absolute":F2});var C={};b&&(C["aria-hidden"]=!0);var E=a.createElement(m,lq({className:u$(!r&&n,d),style:qH(qH({},_),f)},C,y,{ref:t}),k);return l&&(E=a.createElement(C1,{onResize:function(e){w(e.offsetWidth)},disabled:u},E)),E}var V2=a.forwardRef(N2);function L2(){var e=a.useRef(null);return function(t){e.current||(e.current=[],function(e){if(typeof MessageChannel>"u")Oq(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}((function(){Object(u.unstable_batchedUpdates)((function(){e.current.forEach((function(e){e()})),e.current=null}))}))),e.current.push(t)}}function B2(e,t){var n=sH(a.useState(t),2),r=n[0],o=n[1];return[r,lH((function(t){e((function(){o(t)}))}))]}V2.displayName="Item";var $2=l.a.createContext(null),z2=["component"],U2=["className"],H2=["className"],q2=function(e,t){var n=a.useContext($2);if(!n){var r=e.component,o=void 0===r?"div":r,i=WW(e,z2);return a.createElement(o,lq({},i,{ref:t}))}var l=n.className,u=WW(n,U2),c=e.className,s=WW(e,H2);return a.createElement($2.Provider,{value:null},a.createElement(V2,lq({ref:t,className:u$(l,c)},u,s)))},W2=a.forwardRef(q2);W2.displayName="RawItem";var G2=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],K2="responsive",Y2="invalidate";function X2(e){return"+ ".concat(e.length," ...")}function J2(e,t){var n=e.prefixCls,r=void 0===n?"rc-overflow":n,o=e.data,i=void 0===o?[]:o,l=e.renderItem,u=e.renderRawItem,c=e.itemKey,s=e.itemWidth,d=void 0===s?10:s,f=e.ssr,p=e.style,h=e.className,v=e.maxCount,g=e.renderRest,m=e.renderRawRest,y=e.suffix,b=e.component,w=void 0===b?"div":b,_=e.itemComponent,k=e.onVisibleChange,C=WW(e,G2),E="full"===f,O=L2(),S=sH(B2(O,null),2),x=S[0],j=S[1],I=x||0,R=sH(B2(O,new Map),2),A=R[0],D=R[1],P=sH(B2(O,0),2),M=P[0],T=P[1],F=sH(B2(O,0),2),N=F[0],V=F[1],L=sH(B2(O,0),2),B=L[0],$=L[1],z=sH(Object(a.useState)(null),2),U=z[0],H=z[1],q=sH(Object(a.useState)(null),2),W=q[0],G=q[1],K=a.useMemo((function(){return null===W&&E?Number.MAX_SAFE_INTEGER:W||0}),[W,x]),Y=sH(Object(a.useState)(!1),2),X=Y[0],J=Y[1],Z="".concat(r,"-item"),Q=Math.max(M,N),ee=v===K2,te=i.length&&ee,ne=v===Y2,re=te||"number"==typeof v&&i.length>v,oe=Object(a.useMemo)((function(){var e=i;return te?e=null===x&&E?i:i.slice(0,Math.min(i.length,I/d)):"number"==typeof v&&(e=i.slice(0,v)),e}),[i,d,x,v,te]),ie=Object(a.useMemo)((function(){return te?i.slice(K+1):i.slice(oe.length)}),[i,oe,te,K]),ae=Object(a.useCallback)((function(e,t){var n;return"function"==typeof c?c(e):null!==(n=c&&(null==e?void 0:e[c]))&&void 0!==n?n:t}),[c]),le=Object(a.useCallback)(l||function(e){return e},[l]);function ue(e,t,n){W===e&&(void 0===t||t===U)||(G(e),n||(J(e<i.length-1),null==k||k(e)),void 0!==t&&H(t))}function ce(e,t){D((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function se(e){return A.get(ae(oe[e],e))}pH((function(){if(I&&"number"==typeof Q&&oe){var e=B,t=oe.length,n=t-1;if(!t)return void ue(0,null);for(var r=0;r<t;r+=1){var o=se(r);if(E&&(o=o||0),void 0===o){ue(r-1,void 0,!0);break}if(e+=o,0===n&&e<=I||r===n-1&&e+se(n)<=I){ue(n,null);break}if(e+Q>I){ue(r-1,e-o-B+N);break}}y&&se(0)+B>I&&H(null)}}),[I,A,N,B,ae,oe]);var de=X&&!!ie.length,fe={};null!==U&&te&&(fe={position:"absolute",left:U,top:0});var pe,he={prefixCls:Z,responsive:te,component:_,invalidate:ne},ve=u?function(e,t){var n=ae(e,t);return a.createElement($2.Provider,{key:n,value:qH(qH({},he),{},{order:t,item:e,itemKey:n,registerSize:ce,display:t<=K})},u(e,t))}:function(e,t){var n=ae(e,t);return a.createElement(V2,lq({},he,{order:t,key:n,item:e,renderItem:le,itemKey:n,registerSize:ce,display:t<=K}))},ge={order:de?K:Number.MAX_SAFE_INTEGER,className:"".concat(Z,"-rest"),registerSize:function(e,t){V(t),T(N)},display:de};if(m)m&&(pe=a.createElement($2.Provider,{value:qH(qH({},he),ge)},m(ie)));else{var me=g||X2;pe=a.createElement(V2,lq({},he,ge),"function"==typeof me?me(ie):me)}var ye=a.createElement(w,lq({className:u$(!ne&&r,h),style:p,ref:t},C),oe.map(ve),re?pe:null,y&&a.createElement(V2,lq({},he,{responsive:ee,responsiveDisabled:!te,order:K,className:"".concat(Z,"-suffix"),registerSize:function(e,t){$(t)},display:!0,style:fe}),y));return ee&&(ye=a.createElement(C1,{onResize:function(e,t){j(t.clientWidth)},disabled:!te},ye)),ye}var Z2=a.forwardRef(J2);Z2.displayName="Overflow",Z2.Item=W2,Z2.RESPONSIVE=K2,Z2.INVALIDATE=Y2;var Q2=a.createContext(null);function e5(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function t5(e){return e5(a.useContext(Q2),e)}var n5=["children","locked"],r5=a.createContext(null);function o5(e){var t=e.children,n=e.locked,r=WW(e,n5),o=a.useContext(r5),i=NH((function(){return function(e,t){var n=qH({},e);return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}(o,r)}),[o,r],(function(e,t){return!(n||e[0]===t[0]&&UK(e[1],t[1],!0))}));return a.createElement(r5.Provider,{value:i},t)}var i5=[],a5=a.createContext(null);function l5(){return a.useContext(a5)}var u5=a.createContext(i5);function c5(e){var t=a.useContext(u5);return a.useMemo((function(){return void 0!==e?[].concat(WH(t),[e]):t}),[t,e])}var s5=a.createContext(null),d5=a.createContext({});function f5(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Sq(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),o=e.getAttribute("tabindex"),i=Number(o),a=null;return o&&!Number.isNaN(i)?a=i:r&&null===a&&(a=0),r&&e.disabled&&(a=null),null!==a&&(a>=0||t&&a<0)}return!1}var p5=uq.LEFT,h5=uq.RIGHT,v5=uq.UP,g5=uq.DOWN,m5=uq.ENTER,y5=uq.ESC,b5=uq.HOME,w5=uq.END,_5=[v5,g5,p5,h5];function k5(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=WH(e.querySelectorAll("*")).filter((function(e){return f5(e,t)}));return f5(e,t)&&n.unshift(e),n}(e,!0);return n.filter((function(e){return t.has(e)}))}function C5(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var o=k5(e,t),i=o.length,a=o.findIndex((function(e){return n===e}));return r<0?-1===a?a=i-1:a-=1:r>0&&(a+=1),o[a=(a+i)%i]}var E5=function(e,t){var n=new Set,r=new Map,o=new Map;return e.forEach((function(e){var i=document.querySelector("[data-menu-id='".concat(e5(t,e),"']"));i&&(n.add(i),o.set(i,e),r.set(e,i))})),{elements:n,key2element:r,element2key:o}};function O5(e,t,n,r,o,i,l,u,c,s){var d=a.useRef(),f=a.useRef();f.current=t;var p=function(){Oq.cancel(d.current)};return a.useEffect((function(){return function(){p()}}),[]),function(a){var h=a.which;if([].concat(_5,[m5,y5,b5,w5]).includes(h)){var v=i(),g=E5(v,r),m=g,y=m.elements,b=m.key2element,w=m.element2key,_=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(b.get(t),y),k=w.get(_),C=function(e,t,n,r){var o,i,a,l,u="prev",c="next",s="children",d="parent";if("inline"===e&&r===m5)return{inlineTrigger:!0};var f=(UH(o={},v5,u),UH(o,g5,c),o),p=(UH(i={},p5,n?c:u),UH(i,h5,n?u:c),UH(i,g5,s),UH(i,m5,s),i),h=(UH(a={},v5,u),UH(a,g5,c),UH(a,m5,s),UH(a,y5,d),UH(a,p5,n?s:d),UH(a,h5,n?d:s),a);switch(null===(l={inline:f,horizontal:p,vertical:h,inlineSub:f,horizontalSub:h,verticalSub:h}["".concat(e).concat(t?"":"Sub")])||void 0===l?void 0:l[r]){case u:return{offset:-1,sibling:!0};case c:return{offset:1,sibling:!0};case d:return{offset:-1,sibling:!1};case s:return{offset:1,sibling:!1};default:return null}}(e,1===l(k,!0).length,n,h);if(!C&&h!==b5&&h!==w5)return;(_5.includes(h)||[b5,w5].includes(h))&&a.preventDefault();var E=function(e){if(e){var t=e,n=e.querySelector("a");null!=n&&n.getAttribute("href")&&(t=n);var r=w.get(e);u(r),p(),d.current=Oq((function(){f.current===r&&t.focus()}))}};if([b5,w5].includes(h)||C.sibling||!_){var O;O=_&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(_):o.current;var S,x=k5(O,y);S=h===b5?x[0]:h===w5?x[x.length-1]:C5(O,y,_,C.offset),E(S)}else if(C.inlineTrigger)c(k);else if(C.offset>0)c(k,!0),p(),d.current=Oq((function(){g=E5(v,r);var e=_.getAttribute("aria-controls"),t=C5(document.getElementById(e),g.elements);E(t)}),5);else if(C.offset<0){var j=l(k,!0),I=j[j.length-2],R=b.get(I);c(I,!1),E(R)}}null==s||s(a)}}var S5="__RC_UTIL_PATH_SPLIT__",x5=function(e){return e.join(S5)},j5="rc-menu-more";function I5(){var e=sH(a.useState({}),2)[1],t=Object(a.useRef)(new Map),n=Object(a.useRef)(new Map),r=sH(a.useState([]),2),o=r[0],i=r[1],l=Object(a.useRef)(0),u=Object(a.useRef)(!1),c=Object(a.useCallback)((function(r,o){var i=x5(o);n.current.set(i,r),t.current.set(r,i),l.current+=1;var a=l.current;!function(e){Promise.resolve().then(e)}((function(){a===l.current&&(u.current||e({}))}))}),[]),s=Object(a.useCallback)((function(e,r){var o=x5(r);n.current.delete(o),t.current.delete(e)}),[]),d=Object(a.useCallback)((function(e){i(e)}),[]),f=Object(a.useCallback)((function(e,n){var r=function(e){return e.split(S5)}(t.current.get(e)||"");return n&&o.includes(r[0])&&r.unshift(j5),r}),[o]),p=Object(a.useCallback)((function(e,t){return e.some((function(e){return f(e,!0).includes(t)}))}),[f]),h=Object(a.useCallback)((function(e){var r="".concat(t.current.get(e)).concat(S5),o=new Set;return WH(n.current.keys()).forEach((function(e){e.startsWith(r)&&o.add(n.current.get(e))})),o}),[]);return a.useEffect((function(){return function(){u.current=!0}}),[]),{registerPath:c,unregisterPath:s,refreshOverflowKeys:d,isSubPathKey:p,getKeyPath:f,getKeys:function(){var e=WH(t.current.keys());return o.length&&e.push(j5),e},getSubPathKeys:h}}function R5(e){var t=a.useRef(e);t.current=e;var n=a.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return e?n:void 0}var A5=Math.random().toFixed(5).toString().slice(2),D5=0;function P5(e,t){var n=qH({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}function M5(e,t,n,r){var o=a.useContext(r5),i=o.activeKey,l=o.onActive,u=o.onInactive,c={active:i===e};return t||(c.onMouseEnter=function(t){null==n||n({key:e,domEvent:t}),l(e)},c.onMouseLeave=function(t){null==r||r({key:e,domEvent:t}),u(e)}),c}function T5(e){var t=a.useContext(r5),n=t.mode,r=t.rtl,o=t.inlineIndent;if("inline"!==n)return null;return r?{paddingRight:e*o}:{paddingLeft:e*o}}function F5(e){var t,n=e.icon,r=e.props,o=e.children;return null===n||!1===n?null:("function"==typeof n?t=a.createElement(n,qH({},r)):"boolean"!=typeof n&&(t=n),t||o||null)}var N5=["item"];function V5(e){var t=e.item,n=WW(e,N5);return Object.defineProperty(n,"item",{get:function(){return JH(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}var L5=["title","attribute","elementRef"],B5=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],$5=["active"],z5=function(e){nq(n,e);var t=aq(n);function n(){return ZH(this,n),t.apply(this,arguments)}return eq(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.attribute,r=e.elementRef,o=P5(WW(e,L5),["eventKey","popupClassName","popupOffset","onTitleClick"]);return JH(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),a.createElement(Z2.Item,lq({},n,{title:"string"==typeof t?t:void 0},o,{ref:r}))}}]),n}(a.Component),U5=a.forwardRef((function(e,t){var n,r=e.style,o=e.className,i=e.eventKey;e.warnKey;var l=e.disabled,u=e.itemIcon,c=e.children,s=e.role,d=e.onMouseEnter,f=e.onMouseLeave,p=e.onClick,h=e.onKeyDown,v=e.onFocus,g=WW(e,B5),m=t5(i),y=a.useContext(r5),b=y.prefixCls,w=y.onItemClick,_=y.disabled,k=y.overflowDisabled,C=y.itemIcon,E=y.selectedKeys,O=y.onActive,S=a.useContext(d5)._internalRenderMenuItem,x="".concat(b,"-item"),j=a.useRef(),I=a.useRef(),R=_||l,A=BH(t,I),D=c5(i),P=function(e){return{key:i,keyPath:WH(D).reverse(),item:j.current,domEvent:e}},M=u||C,T=M5(i,R,d,f),F=T.active,N=WW(T,$5),V=E.includes(i),L=T5(D.length),B={};"option"===e.role&&(B["aria-selected"]=V);var $=a.createElement(z5,lq({ref:j,elementRef:A,role:null===s?"none":s||"menuitem",tabIndex:l?null:-1,"data-menu-id":k&&m?null:m},g,N,B,{component:"li","aria-disabled":l,style:qH(qH({},L),r),className:u$(x,(n={},UH(n,"".concat(x,"-active"),F),UH(n,"".concat(x,"-selected"),V),UH(n,"".concat(x,"-disabled"),R),n),o),onClick:function(e){if(!R){var t=P(e);null==p||p(V5(t)),w(t)}},onKeyDown:function(e){if(null==h||h(e),e.which===uq.ENTER){var t=P(e);null==p||p(V5(t)),w(t)}},onFocus:function(e){O(i),null==v||v(e)}}),c,a.createElement(F5,{props:qH(qH({},e),{},{isSelected:V}),icon:M}));return S&&($=S($,e,{selected:V})),$}));function H5(e,t){var n=e.eventKey,r=l5(),o=c5(n);return a.useEffect((function(){if(r)return r.registerPath(n,o),function(){r.unregisterPath(n,o)}}),[o]),r?null:a.createElement(U5,lq({},e,{ref:t}))}const q5=a.forwardRef(H5);var W5=["className","children"],G5=function(e,t){var n=e.className,r=e.children,o=WW(e,W5),i=a.useContext(r5),l=i.prefixCls,u=i.mode,c=i.rtl;return a.createElement("ul",lq({className:u$(l,c&&"".concat(l,"-rtl"),"".concat(l,"-sub"),"".concat(l,"-").concat("inline"===u?"inline":"vertical"),n),role:"menu"},o,{"data-menu-list":!0,ref:t}),r)},K5=a.forwardRef(G5);function Y5(e,t){return v1(e).map((function(e,n){if(a.isValidElement(e)){var r,o,i=e.key,l=null!==(r=null===(o=e.props)||void 0===o?void 0:o.eventKey)&&void 0!==r?r:i;null==l&&(l="tmp_key-".concat([].concat(WH(t),[n]).join("-")));var u={key:l,eventKey:l};return a.cloneElement(e,u)}return e}))}K5.displayName="SubMenuList";var X5={adjustX:1,adjustY:1},J5={topLeft:{points:["bl","tl"],overflow:X5},topRight:{points:["br","tr"],overflow:X5},bottomLeft:{points:["tl","bl"],overflow:X5},bottomRight:{points:["tr","br"],overflow:X5},leftTop:{points:["tr","tl"],overflow:X5},leftBottom:{points:["br","bl"],overflow:X5},rightTop:{points:["tl","tr"],overflow:X5},rightBottom:{points:["bl","br"],overflow:X5}},Z5={topLeft:{points:["bl","tl"],overflow:X5},topRight:{points:["br","tr"],overflow:X5},bottomLeft:{points:["tl","bl"],overflow:X5},bottomRight:{points:["tr","br"],overflow:X5},rightTop:{points:["tr","tl"],overflow:X5},rightBottom:{points:["br","bl"],overflow:X5},leftTop:{points:["tl","tr"],overflow:X5},leftBottom:{points:["bl","br"],overflow:X5}};function Q5(e,t,n){return t||(n?n[e]||n.other:void 0)}var e3={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function t3(e){var t=e.prefixCls,n=e.visible,r=e.children,o=e.popup,i=e.popupStyle,l=e.popupClassName,u=e.popupOffset,c=e.disabled,s=e.mode,d=e.onVisibleChange,f=a.useContext(r5),p=f.getPopupContainer,h=f.rtl,v=f.subMenuOpenDelay,g=f.subMenuCloseDelay,m=f.builtinPlacements,y=f.triggerSubMenuAction,b=f.forceSubMenuRender,w=f.rootClassName,_=f.motion,k=f.defaultMotions,C=sH(a.useState(!1),2),E=C[0],O=C[1],S=qH(qH({},h?Z5:J5),m),x=e3[s],j=Q5(s,_,k),I=a.useRef(j);"inline"!==s&&(I.current=j);var R=qH(qH({},I.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),A=a.useRef();return a.useEffect((function(){return A.current=Oq((function(){O(n)})),function(){Oq.cancel(A.current)}}),[n]),a.createElement(O2,{prefixCls:t,popupClassName:u$("".concat(t,"-popup"),UH({},"".concat(t,"-rtl"),h),l,w),stretch:"horizontal"===s?"minWidth":null,getPopupContainer:p,builtinPlacements:S,popupPlacement:x,popupVisible:E,popup:o,popupStyle:i,popupAlign:u&&{offset:u},action:c?[]:[y],mouseEnterDelay:v,mouseLeaveDelay:g,onPopupVisibleChange:d,forceRender:b,popupMotion:R,fresh:!0},r)}function n3(e){var t=e.id,n=e.open,r=e.keyPath,o=e.children,i="inline",l=a.useContext(r5),u=l.prefixCls,c=l.forceSubMenuRender,s=l.motion,d=l.defaultMotions,f=l.mode,p=a.useRef(!1);p.current=f===i;var h=sH(a.useState(!p.current),2),v=h[0],g=h[1],m=!!p.current&&n;a.useEffect((function(){p.current&&g(!1)}),[f]);var y=qH({},Q5(i,s,d));r.length>1&&(y.motionAppear=!1);var b=y.onVisibleChanged;return y.onVisibleChanged=function(e){return!p.current&&!e&&g(!0),null==b?void 0:b(e)},v?null:a.createElement(o5,{mode:i,locked:!p.current},a.createElement(SG,lq({visible:m},y,{forceRender:c,removeOnLeave:!1,leavedClassName:"".concat(u,"-hidden")}),(function(e){var n=e.className,r=e.style;return a.createElement(K5,{id:t,className:n,style:r},o)})))}var r3=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],o3=["active"],i3=function(e){var t,n=e.style,r=e.className,o=e.title,i=e.eventKey;e.warnKey;var l=e.disabled,u=e.internalPopupClose,c=e.children,s=e.itemIcon,d=e.expandIcon,f=e.popupClassName,p=e.popupOffset,h=e.popupStyle,v=e.onClick,g=e.onMouseEnter,m=e.onMouseLeave,y=e.onTitleClick,b=e.onTitleMouseEnter,w=e.onTitleMouseLeave,_=WW(e,r3),k=t5(i),C=a.useContext(r5),E=C.prefixCls,O=C.mode,S=C.openKeys,x=C.disabled,j=C.overflowDisabled,I=C.activeKey,R=C.selectedKeys,A=C.itemIcon,D=C.expandIcon,P=C.onItemClick,M=C.onOpenChange,T=C.onActive,F=a.useContext(d5)._internalRenderSubMenuItem,N=a.useContext(s5).isSubPathKey,V=c5(),L="".concat(E,"-submenu"),B=x||l,$=a.useRef(),z=a.useRef(),U=null!=s?s:A,H=null!=d?d:D,q=S.includes(i),W=!j&&q,G=N(R,i),K=M5(i,B,b,w),Y=K.active,X=WW(K,o3),J=sH(a.useState(!1),2),Z=J[0],Q=J[1],ee=function(e){B||Q(e)},te=a.useMemo((function(){return Y||"inline"!==O&&(Z||N([I],i))}),[O,Y,I,Z,i,N]),ne=T5(V.length),re=R5((function(e){null==v||v(V5(e)),P(e)})),oe=k&&"".concat(k,"-popup"),ie=a.createElement("div",lq({role:"menuitem",style:ne,className:"".concat(L,"-title"),tabIndex:B?null:-1,ref:$,title:"string"==typeof o?o:null,"data-menu-id":j&&k?null:k,"aria-expanded":W,"aria-haspopup":!0,"aria-controls":oe,"aria-disabled":B,onClick:function(e){B||(null==y||y({key:i,domEvent:e}),"inline"===O&&M(i,!q))},onFocus:function(){T(i)}},X),o,a.createElement(F5,{icon:"horizontal"!==O?H:void 0,props:qH(qH({},e),{},{isOpen:W,isSubMenu:!0})},a.createElement("i",{className:"".concat(L,"-arrow")}))),ae=a.useRef(O);if("inline"!==O&&V.length>1?ae.current="vertical":ae.current=O,!j){var le=ae.current;ie=a.createElement(t3,{mode:le,prefixCls:L,visible:!u&&W&&"inline"!==O,popupClassName:f,popupOffset:p,popupStyle:h,popup:a.createElement(o5,{mode:"horizontal"===le?"vertical":le},a.createElement(K5,{id:oe,ref:z},c)),disabled:B,onVisibleChange:function(e){"inline"!==O&&M(i,e)}},ie)}var ue=a.createElement(Z2.Item,lq({role:"none"},_,{component:"li",style:n,className:u$(L,"".concat(L,"-").concat(O),r,(t={},UH(t,"".concat(L,"-open"),W),UH(t,"".concat(L,"-active"),te),UH(t,"".concat(L,"-selected"),G),UH(t,"".concat(L,"-disabled"),B),t)),onMouseEnter:function(e){ee(!0),null==g||g({key:i,domEvent:e})},onMouseLeave:function(e){ee(!1),null==m||m({key:i,domEvent:e})}}),ie,!j&&a.createElement(n3,{id:oe,open:W,keyPath:V},c));return F&&(ue=F(ue,e,{selected:G,active:te,open:W,disabled:B})),a.createElement(o5,{onItemClick:re,mode:"horizontal"===O?"vertical":O,itemIcon:U,expandIcon:H},ue)};function a3(e){var t,n=e.eventKey,r=e.children,o=c5(n),i=Y5(r,o),l=l5();return a.useEffect((function(){if(l)return l.registerPath(n,o),function(){l.unregisterPath(n,o)}}),[o]),t=l?i:a.createElement(i3,e,i),a.createElement(u5.Provider,{value:o},t)}var l3=["className","title","eventKey","children"],u3=["children"],c3=function(e){var t=e.className,n=e.title;e.eventKey;var r=e.children,o=WW(e,l3),i=a.useContext(r5).prefixCls,l="".concat(i,"-item-group");return a.createElement("li",lq({role:"presentation"},o,{onClick:function(e){return e.stopPropagation()},className:u$(l,t)}),a.createElement("div",{role:"presentation",className:"".concat(l,"-title"),title:"string"==typeof n?n:void 0},n),a.createElement("ul",{role:"group",className:"".concat(l,"-list")},r))};function s3(e){var t=e.children,n=WW(e,u3),r=Y5(t,c5(n.eventKey));return l5()?r:a.createElement(c3,P5(n,["warnKey"]),r)}function d3(e){var t=e.className,n=e.style,r=a.useContext(r5).prefixCls;return l5()?null:a.createElement("li",{role:"separator",className:u$("".concat(r,"-item-divider"),t),style:n})}var f3=["label","children","key","type"];function p3(e){return(e||[]).map((function(e,t){if(e&&"object"===yH(e)){var n=e,r=n.label,o=n.children,i=n.key,l=n.type,u=WW(n,f3),c=null!=i?i:"tmp-".concat(t);return o||"group"===l?"group"===l?a.createElement(s3,lq({key:c},u,{title:r}),p3(o)):a.createElement(a3,lq({key:c},u,{title:r}),p3(o)):"divider"===l?a.createElement(d3,lq({key:c},u)):a.createElement(q5,lq({key:c},u),r)}return null})).filter((function(e){return e}))}function h3(e,t,n){var r=e;return t&&(r=p3(t)),Y5(r,n)}var v3=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],g3=[],m3=a.forwardRef((function(e,t){var n,r,o=e,i=o.prefixCls,l=void 0===i?"rc-menu":i,c=o.rootClassName,s=o.style,d=o.className,f=o.tabIndex,p=void 0===f?0:f,h=o.items,v=o.children,g=o.direction,m=o.id,y=o.mode,b=void 0===y?"vertical":y,w=o.inlineCollapsed,_=o.disabled,k=o.disabledOverflow,C=o.subMenuOpenDelay,E=void 0===C?.1:C,O=o.subMenuCloseDelay,S=void 0===O?.1:O,x=o.forceSubMenuRender,j=o.defaultOpenKeys,I=o.openKeys,R=o.activeKey,A=o.defaultActiveFirst,D=o.selectable,P=void 0===D||D,M=o.multiple,T=void 0!==M&&M,F=o.defaultSelectedKeys,N=o.selectedKeys,V=o.onSelect,L=o.onDeselect,B=o.inlineIndent,$=void 0===B?24:B,z=o.motion,U=o.defaultMotions,H=o.triggerSubMenuAction,q=void 0===H?"hover":H,W=o.builtinPlacements,G=o.itemIcon,K=o.expandIcon,Y=o.overflowedIndicator,X=void 0===Y?"...":Y,J=o.overflowedIndicatorPopupClassName,Z=o.getPopupContainer,Q=o.onClick,ee=o.onOpenChange,te=o.onKeyDown;o.openAnimation,o.openTransitionName;var ne=o._internalRenderMenuItem,re=o._internalRenderSubMenuItem,oe=WW(o,v3),ie=a.useMemo((function(){return h3(v,h,g3)}),[v,h]),ae=sH(a.useState(!1),2),le=ae[0],ue=ae[1],ce=a.useRef(),se=function(e){var t=sH(mH(e,{value:e}),2),n=t[0],r=t[1];return a.useEffect((function(){D5+=1;var e="".concat(A5,"-").concat(D5);r("rc-menu-uuid-".concat(e))}),[]),n}(m),de="rtl"===g,fe=sH(mH(j,{value:I,postState:function(e){return e||g3}}),2),pe=fe[0],he=fe[1],ve=function(e){function t(){he(e),null==ee||ee(e)}arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object(u.flushSync)(t):t()},ge=sH(a.useState(pe),2),me=ge[0],ye=ge[1],be=a.useRef(!1),we=sH(a.useMemo((function(){return"inline"!==b&&"vertical"!==b||!w?[b,!1]:["vertical",w]}),[b,w]),2),_e=we[0],ke=we[1],Ce="inline"===_e,Ee=sH(a.useState(_e),2),Oe=Ee[0],Se=Ee[1],xe=sH(a.useState(ke),2),je=xe[0],Ie=xe[1];a.useEffect((function(){Se(_e),Ie(ke),be.current&&(Ce?he(me):ve(g3))}),[_e,ke]);var Re=sH(a.useState(0),2),Ae=Re[0],De=Re[1],Pe=Ae>=ie.length-1||"horizontal"!==Oe||k;a.useEffect((function(){Ce&&ye(pe)}),[pe]),a.useEffect((function(){return be.current=!0,function(){be.current=!1}}),[]);var Me=I5(),Te=Me.registerPath,Fe=Me.unregisterPath,Ne=Me.refreshOverflowKeys,Ve=Me.isSubPathKey,Le=Me.getKeyPath,Be=Me.getKeys,$e=Me.getSubPathKeys,ze=a.useMemo((function(){return{registerPath:Te,unregisterPath:Fe}}),[Te,Fe]),Ue=a.useMemo((function(){return{isSubPathKey:Ve}}),[Ve]);a.useEffect((function(){Ne(Pe?g3:ie.slice(Ae+1).map((function(e){return e.key})))}),[Ae,Pe]);var He=sH(mH(R||A&&(null===(n=ie[0])||void 0===n?void 0:n.key),{value:R}),2),qe=He[0],We=He[1],Ge=R5((function(e){We(e)})),Ke=R5((function(){We(void 0)}));Object(a.useImperativeHandle)(t,(function(){return{list:ce.current,focus:function(e){var t,n,r=Be(),o=E5(r,se),i=o.elements,a=o.key2element,l=o.element2key,u=k5(ce.current,i),c=null!=qe?qe:u[0]?l.get(u[0]):null===(t=ie.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key,s=a.get(c);c&&s&&(null==s||null===(n=s.focus)||void 0===n||n.call(s,e))}}}));var Ye=sH(mH(F||[],{value:N,postState:function(e){return Array.isArray(e)?e:null==e?g3:[e]}}),2),Xe=Ye[0],Je=Ye[1],Ze=R5((function(e){null==Q||Q(V5(e)),function(e){if(P){var t,n=e.key,r=Xe.includes(n);t=T?r?Xe.filter((function(e){return e!==n})):[].concat(WH(Xe),[n]):[n],Je(t);var o=qH(qH({},e),{},{selectedKeys:t});r?null==L||L(o):null==V||V(o)}!T&&pe.length&&"inline"!==Oe&&ve(g3)}(e)})),Qe=R5((function(e,t){var n=pe.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==Oe){var r=$e(e);n=n.filter((function(e){return!r.has(e)}))}UK(pe,n,!0)||ve(n,!0)})),et=O5(Oe,qe,de,se,ce,Be,Le,We,(function(e,t){var n=null!=t?t:!pe.includes(e);Qe(e,n)}),te);a.useEffect((function(){ue(!0)}),[]);var tt=a.useMemo((function(){return{_internalRenderMenuItem:ne,_internalRenderSubMenuItem:re}}),[ne,re]),nt="horizontal"!==Oe||k?ie:ie.map((function(e,t){return a.createElement(o5,{key:e.key,overflowDisabled:t>Ae},e)})),rt=a.createElement(Z2,lq({id:m,ref:ce,prefixCls:"".concat(l,"-overflow"),component:"ul",itemComponent:q5,className:u$(l,"".concat(l,"-root"),"".concat(l,"-").concat(Oe),d,(r={},UH(r,"".concat(l,"-inline-collapsed"),je),UH(r,"".concat(l,"-rtl"),de),r),c),dir:g,style:s,role:"menu",tabIndex:p,data:nt,renderRawItem:function(e){return e},renderRawRest:function(e){var t=e.length,n=t?ie.slice(-t):null;return a.createElement(a3,{eventKey:j5,title:X,disabled:Pe,internalPopupClose:0===t,popupClassName:J},n)},maxCount:"horizontal"!==Oe||k?Z2.INVALIDATE:Z2.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){De(e)},onKeyDown:et},oe));return a.createElement(d5.Provider,{value:tt},a.createElement(Q2.Provider,{value:se},a.createElement(o5,{prefixCls:l,rootClassName:c,mode:Oe,openKeys:pe,rtl:de,disabled:_,motion:le?z:null,defaultMotions:le?U:null,activeKey:qe,onActive:Ge,onInactive:Ke,selectedKeys:Xe,inlineIndent:$,subMenuOpenDelay:E,subMenuCloseDelay:S,forceSubMenuRender:x,builtinPlacements:W,triggerSubMenuAction:q,getPopupContainer:Z,itemIcon:G,expandIcon:K,onItemClick:Ze,onOpenChange:Qe},a.createElement(s5.Provider,{value:Ue},rt),a.createElement("div",{style:{display:"none"},"aria-hidden":!0},a.createElement(a5.Provider,{value:ze},ie)))))})),y3=m3;y3.Item=q5,y3.SubMenu=a3,y3.ItemGroup=s3,y3.Divider=d3;var b3=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.id,o=e.tabs,i=e.locale,l=e.mobile,u=e.moreIcon,c=void 0===u?"More":u,s=e.moreTransitionName,d=e.style,f=e.className,p=e.editable,h=e.tabBarGutter,v=e.rtl,g=e.removeAriaLabel,m=e.onTabClick,y=e.getPopupContainer,b=e.popupClassName,w=sH(Object(a.useState)(!1),2),_=w[0],k=w[1],C=sH(Object(a.useState)(null),2),E=C[0],O=C[1],S="".concat(r,"-more-popup"),x="".concat(n,"-dropdown"),j=null!==E?"".concat(S,"-").concat(E):null,I=null==i?void 0:i.dropdownAriaLabel;var R=a.createElement(y3,{onClick:function(e){var t=e.key,n=e.domEvent;m(t,n),k(!1)},prefixCls:"".concat(x,"-menu"),id:S,tabIndex:-1,role:"listbox","aria-activedescendant":j,selectedKeys:[E],"aria-label":void 0!==I?I:"expanded dropdown"},o.map((function(e){var t=e.closable,n=e.disabled,o=e.closeIcon,i=e.key,l=e.label,u=A1(t,o,p,n);return a.createElement(q5,{key:i,id:"".concat(S,"-").concat(i),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(i),disabled:n},a.createElement("span",null,l),u&&a.createElement("button",{type:"button","aria-label":g||"remove",tabIndex:0,className:"".concat(x,"-menu-item-remove"),onClick:function(e){e.stopPropagation(),function(e,t){e.preventDefault(),e.stopPropagation(),p.onEdit("remove",{key:t,event:e})}(e,i)}},o||p.removeIcon||"×"))})));function A(e){for(var t=o.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===E}))||0,r=t.length,i=0;i<r;i+=1){var a=t[n=(n+e+r)%r];if(!a.disabled)return void O(a.key)}}Object(a.useEffect)((function(){var e=document.getElementById(j);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[E]),Object(a.useEffect)((function(){_||O(null)}),[_]);var D=UH({},v?"marginRight":"marginLeft",h);o.length||(D.visibility="hidden",D.order=1);var P=u$(UH({},"".concat(x,"-rtl"),v)),M=l?null:a.createElement(M2,{prefixCls:x,overlay:R,trigger:["hover"],visible:!!o.length&&_,transitionName:s,onVisibleChange:k,overlayClassName:u$(P,b),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:y},a.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:D,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":S,id:"".concat(r,"-more"),"aria-expanded":_,onKeyDown:function(e){var t=e.which;if(_)switch(t){case uq.UP:A(-1),e.preventDefault();break;case uq.DOWN:A(1),e.preventDefault();break;case uq.ESC:k(!1);break;case uq.SPACE:case uq.ENTER:null!==E&&m(E,e)}else[uq.DOWN,uq.SPACE,uq.ENTER].includes(t)&&(k(!0),e.preventDefault())}},c));return a.createElement("div",{className:u$("".concat(n,"-nav-operations"),f),style:d,ref:t},M,a.createElement(D1,{prefixCls:n,locale:i,editable:p}))}));const w3=a.memo(b3,(function(e,t){return t.tabMoving}));var _3=function(e){var t,n=e.prefixCls,r=e.id,o=e.active,i=e.tab,l=i.key,u=i.label,c=i.disabled,s=i.closeIcon,d=i.icon,f=e.closable,p=e.renderWrapper,h=e.removeAriaLabel,v=e.editable,g=e.onClick,m=e.onFocus,y=e.style,b="".concat(n,"-tab"),w=A1(f,s,v,c);function _(e){c||g(e)}var k=a.useMemo((function(){return d&&"string"==typeof u?a.createElement("span",null,u):u}),[u,d]),C=a.createElement("div",{key:l,"data-node-key":R1(l),className:u$(b,(t={},UH(t,"".concat(b,"-with-remove"),w),UH(t,"".concat(b,"-active"),o),UH(t,"".concat(b,"-disabled"),c),t)),style:y,onClick:_},a.createElement("div",{role:"tab","aria-selected":o,id:r&&"".concat(r,"-tab-").concat(l),className:"".concat(b,"-btn"),"aria-controls":r&&"".concat(r,"-panel-").concat(l),"aria-disabled":c,tabIndex:c?null:0,onClick:function(e){e.stopPropagation(),_(e)},onKeyDown:function(e){[uq.SPACE,uq.ENTER].includes(e.which)&&(e.preventDefault(),_(e))},onFocus:m},d&&a.createElement("span",{className:"".concat(b,"-icon")},d),u&&k),w&&a.createElement("button",{type:"button","aria-label":h||"remove",tabIndex:0,className:"".concat(b,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),v.onEdit("remove",{key:l,event:t})}},s||v.removeIcon||"×"));return p?p(C):C},k3=function(e){var t=e.current||{},n=t.offsetWidth,r=void 0===n?0:n,o=t.offsetHeight,i=void 0===o?0:o;if(e.current){var a=e.current.getBoundingClientRect(),l=a.width,u=a.height;if(Math.abs(l-r)<1)return[l,u]}return[r,i]},C3=function(e,t){return e[t?0:1]},E3=a.forwardRef((function(e,t){var n,r=e.className,o=e.style,i=e.id,u=e.animated,c=e.activeKey,s=e.rtl,d=e.extra,f=e.editable,p=e.locale,h=e.tabPosition,v=e.tabBarGutter,g=e.children,m=e.onTabClick,y=e.onTabScroll,b=e.indicatorSize,w=e.indicatorAlign,_=a.useContext(h1),k=_.prefixCls,C=_.tabs,E=Object(a.useRef)(null),O=Object(a.useRef)(null),S=Object(a.useRef)(null),x=Object(a.useRef)(null),j=Object(a.useRef)(null),I=Object(a.useRef)(null),R=Object(a.useRef)(null),A="top"===h||"bottom"===h,D=sH(O1(0,(function(e,t){A&&y&&y({direction:e>t?"left":"right"})})),2),P=D[0],M=D[1],T=sH(O1(0,(function(e,t){!A&&y&&y({direction:e>t?"top":"bottom"})})),2),F=T[0],N=T[1],V=sH(Object(a.useState)([0,0]),2),L=V[0],B=V[1],$=sH(Object(a.useState)([0,0]),2),z=$[0],U=$[1],H=sH(Object(a.useState)([0,0]),2),q=H[0],W=H[1],G=sH(Object(a.useState)([0,0]),2),K=G[0],Y=G[1],X=function(e){var t=Object(a.useRef)([]),n=sH(Object(a.useState)({}),2)[1],r=Object(a.useRef)("function"==typeof e?e():e),o=x1((function(){var e=r.current;t.current.forEach((function(t){e=t(e)})),t.current=[],r.current=e,n({})}));return[r.current,function(e){t.current.push(e),o()}]}(new Map),J=sH(X,2),Z=J[0],Q=J[1],ee=function(e,t,n){return Object(a.useMemo)((function(){for(var n,r=new Map,o=t.get(null===(n=e[0])||void 0===n?void 0:n.key)||E1,i=o.left+o.width,a=0;a<e.length;a+=1){var l,u=e[a].key,c=t.get(u);c||(c=t.get(null===(l=e[a-1])||void 0===l?void 0:l.key)||E1);var s=r.get(u)||qH({},c);s.right=i-s.left-s.width,r.set(u,s)}return r}),[e.map((function(e){return e.key})).join("_"),t,n])}(C,Z,z[0]),te=C3(L,A),ne=C3(z,A),re=C3(q,A),oe=C3(K,A),ie=te<ne+re,ae=ie?te-oe:te-re,le="".concat(k,"-nav-operations-hidden"),ue=0,ce=0;function se(e){return e<ue?ue:e>ce?ce:e}A&&s?(ue=0,ce=Math.max(0,ne-ae)):(ue=Math.min(0,ae-ne),ce=0);var de=Object(a.useRef)(null),fe=sH(Object(a.useState)(),2),pe=fe[0],he=fe[1];function ve(){he(Date.now())}function ge(){de.current&&clearTimeout(de.current)}(function(e,t){var n=sH(Object(a.useState)(),2),r=n[0],o=n[1],i=sH(Object(a.useState)(0),2),l=i[0],u=i[1],c=sH(Object(a.useState)(0),2),s=c[0],d=c[1],f=sH(Object(a.useState)(),2),p=f[0],h=f[1],v=Object(a.useRef)(),g=Object(a.useRef)(),m=Object(a.useRef)(null);m.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,r=t.screenY;o({x:n,y:r}),window.clearInterval(v.current)},onTouchMove:function(e){if(r){e.preventDefault();var n=e.touches[0],i=n.screenX,a=n.screenY;o({x:i,y:a});var c=i-r.x,s=a-r.y;t(c,s);var f=Date.now();u(f),d(f-l),h({x:c,y:s})}},onTouchEnd:function(){if(r&&(o(null),h(null),p)){var e=p.x/s,n=p.y/s,i=Math.abs(e),a=Math.abs(n);if(Math.max(i,a)<.1)return;var l=e,u=n;v.current=window.setInterval((function(){Math.abs(l)<.01&&Math.abs(u)<.01?window.clearInterval(v.current):t(20*(l*=S1),20*(u*=S1))}),20)}},onWheel:function(e){var n=e.deltaX,r=e.deltaY,o=0,i=Math.abs(n),a=Math.abs(r);i===a?o="x"===g.current?n:r:i>a?(o=n,g.current="x"):(o=r,g.current="y"),t(-o,-o)&&e.preventDefault()}},a.useEffect((function(){function t(e){m.current.onTouchMove(e)}function n(e){m.current.onTouchEnd(e)}return document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),e.current.addEventListener("touchstart",(function(e){m.current.onTouchStart(e)}),{passive:!1}),e.current.addEventListener("wheel",(function(e){m.current.onWheel(e)})),function(){document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)}}),[])})(x,(function(e,t){function n(e,t){e((function(e){return se(e+t)}))}return!!ie&&(A?n(M,e):n(N,t),ge(),ve(),!0)})),Object(a.useEffect)((function(){return ge(),pe&&(de.current=setTimeout((function(){he(0)}),100)),ge}),[pe]);var me=function(e,t,n,r,o,i,l){var u,c,s,d=l.tabs,f=l.tabPosition,p=l.rtl;return["top","bottom"].includes(f)?(u="width",c=p?"right":"left",s=Math.abs(n)):(u="height",c="top",s=-n),Object(a.useMemo)((function(){if(!d.length)return[0,0];for(var n=d.length,r=n,o=0;o<n;o+=1){var i=e.get(d[o].key)||j1;if(i[c]+i[u]>s+t){r=o-1;break}}for(var a=0,l=n-1;l>=0;l-=1)if((e.get(d[l].key)||j1)[c]<s){a=l+1;break}return a>=r?[0,0]:[a,r]}),[e,t,r,o,i,s,f,d.map((function(e){return e.key})).join("_"),p])}(ee,ae,A?P:F,ne,re,oe,qH(qH({},e),{},{tabs:C})),ye=sH(me,2),be=ye[0],we=ye[1],_e=lH((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=ee.get(e)||{width:0,height:0,left:0,right:0,top:0};if(A){var n=P;s?t.right<P?n=t.right:t.right+t.width>P+ae&&(n=t.right+t.width-ae):t.left<-P?n=-t.left:t.left+t.width>-P+ae&&(n=-(t.left+t.width-ae)),N(0),M(se(n))}else{var r=F;t.top<-F?r=-t.top:t.top+t.height>-F+ae&&(r=-(t.top+t.height-ae)),M(0),N(se(r))}})),ke={};"top"===h||"bottom"===h?ke[s?"marginRight":"marginLeft"]=v:ke.marginTop=v;var Ce=C.map((function(e,t){var n=e.key;return a.createElement(_3,{id:i,prefixCls:k,key:n,tab:e,style:0===t?void 0:ke,closable:e.closable,editable:f,active:n===c,renderWrapper:g,removeAriaLabel:null==p?void 0:p.removeAriaLabel,onClick:function(e){m(n,e)},onFocus:function(){_e(n),ve(),x.current&&(s||(x.current.scrollLeft=0),x.current.scrollTop=0)}})})),Ee=function(){return Q((function(){var e,t=new Map,n=null===(e=j.current)||void 0===e?void 0:e.getBoundingClientRect();return C.forEach((function(e){var r,o=e.key,i=null===(r=j.current)||void 0===r?void 0:r.querySelector('[data-node-key="'.concat(R1(o),'"]'));if(i){var a=function(e,t){var n=e.offsetWidth,r=e.offsetHeight,o=e.offsetTop,i=e.offsetLeft,a=e.getBoundingClientRect(),l=a.width,u=a.height,c=a.x,s=a.y;return Math.abs(l-n)<1?[l,u,c-t.x,s-t.y]:[n,r,i,o]}(i,n),l=sH(a,4),u=l[0],c=l[1],s=l[2],d=l[3];t.set(o,{width:u,height:c,left:s,top:d})}})),t}))};Object(a.useEffect)((function(){Ee()}),[C.map((function(e){return e.key})).join("_")]);var Oe=x1((function(){var e=k3(E),t=k3(O),n=k3(S);B([e[0]-t[0]-n[0],e[1]-t[1]-n[1]]);var r=k3(R);W(r);var o=k3(I);Y(o);var i=k3(j);U([i[0]-r[0],i[1]-r[1]]),Ee()})),Se=C.slice(0,be),xe=C.slice(we+1),je=[].concat(WH(Se),WH(xe)),Ie=ee.get(c),Re=function(e){var t=e.activeTabOffset,n=e.horizontal,r=e.rtl,o=e.indicatorSize,i=e.indicatorAlign,u=sH(Object(a.useState)(),2),c=u[0],s=u[1],d=Object(a.useRef)(),f=l.a.useCallback((function(e){return"function"==typeof o?o(e):"number"==typeof o?o:e}),[o]);function p(){Oq.cancel(d.current)}return Object(a.useEffect)((function(){var e={};if(t)if(n){e.width=f(t.width);var o=r?"right":"left";"start"===i&&(e[o]=t[o]),"center"===i&&(e[o]=t[o]+t.width/2,e.transform=r?"translateX(50%)":"translateX(-50%)"),"end"===i&&(e[o]=t[o]+t.width,e.transform="translateX(-100%)")}else e.height=f(t.height),"start"===i&&(e.top=t.top),"center"===i&&(e.top=t.top+t.height/2,e.transform="translateY(-50%)"),"end"===i&&(e.top=t.top+t.height,e.transform="translateY(-100%)");return p(),d.current=Oq((function(){s(e)})),p}),[t,n,r,o,i,f]),{style:c}}({activeTabOffset:Ie,horizontal:A,rtl:s,indicatorSize:b,indicatorAlign:w}),Ae=Re.style;Object(a.useEffect)((function(){_e()}),[c,ue,ce,I1(Ie),I1(ee),A]),Object(a.useEffect)((function(){Oe()}),[s]);var De,Pe,Me,Te,Fe=!!je.length,Ne="".concat(k,"-nav-wrap");return A?s?(Pe=P>0,De=P!==ce):(De=P<0,Pe=P!==ue):(Me=F<0,Te=F!==ue),a.createElement(C1,{onResize:Oe},a.createElement("div",{ref:BH(t,E),role:"tablist",className:u$("".concat(k,"-nav"),r),style:o,onKeyDown:function(){ve()}},a.createElement(P1,{ref:O,position:"left",extra:d,prefixCls:k}),a.createElement(C1,{onResize:Oe},a.createElement("div",{className:u$(Ne,(n={},UH(n,"".concat(Ne,"-ping-left"),De),UH(n,"".concat(Ne,"-ping-right"),Pe),UH(n,"".concat(Ne,"-ping-top"),Me),UH(n,"".concat(Ne,"-ping-bottom"),Te),n)),ref:x},a.createElement(C1,{onResize:Oe},a.createElement("div",{ref:j,className:"".concat(k,"-nav-list"),style:{transform:"translate(".concat(P,"px, ").concat(F,"px)"),transition:pe?"none":void 0}},Ce,a.createElement(D1,{ref:R,prefixCls:k,locale:p,editable:f,style:qH(qH({},0===Ce.length?void 0:ke),{},{visibility:Fe?"hidden":null})}),a.createElement("div",{className:u$("".concat(k,"-ink-bar"),UH({},"".concat(k,"-ink-bar-animated"),u.inkBar)),style:Ae}))))),a.createElement(w3,lq({},e,{removeAriaLabel:null==p?void 0:p.removeAriaLabel,ref:I,prefixCls:k,tabs:je,className:!Fe&&le,tabMoving:!!pe})),a.createElement(P1,{ref:S,position:"right",extra:d,prefixCls:k})))})),O3=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.className,o=e.style,i=e.id,l=e.active,u=e.tabKey,c=e.children;return a.createElement("div",{id:i&&"".concat(i,"-panel-").concat(u),role:"tabpanel",tabIndex:l?0:-1,"aria-labelledby":i&&"".concat(i,"-tab-").concat(u),"aria-hidden":!l,style:o,className:u$(n,l&&"".concat(n,"-active"),r),ref:t},c)})),S3=["renderTabBar"],x3=["label","key"],j3=function(e){var t=e.renderTabBar,n=WW(e,S3),r=a.useContext(h1).tabs;return t?t(qH(qH({},n),{},{panes:r.map((function(e){var t=e.label,n=e.key,r=WW(e,x3);return a.createElement(O3,lq({tab:t,key:n,tabKey:n},r))}))}),E3):a.createElement(E3,n)},I3=["key","forceRender","style","className","destroyInactiveTabPane"],R3=function(e){var t=e.id,n=e.activeKey,r=e.animated,o=e.tabPosition,i=e.destroyInactiveTabPane,l=a.useContext(h1),u=l.prefixCls,c=l.tabs,s=r.tabPane,d="".concat(u,"-tabpane");return a.createElement("div",{className:u$("".concat(u,"-content-holder"))},a.createElement("div",{className:u$("".concat(u,"-content"),"".concat(u,"-content-").concat(o),UH({},"".concat(u,"-content-animated"),s))},c.map((function(e){var o=e.key,l=e.forceRender,u=e.style,c=e.className,f=e.destroyInactiveTabPane,p=WW(e,I3),h=o===n;return a.createElement(SG,lq({key:o,visible:h,forceRender:l,removeOnLeave:!(!i&&!f),leavedClassName:"".concat(d,"-hidden")},r.tabPaneMotion),(function(e,n){var r=e.style,i=e.className;return a.createElement(O3,lq({},p,{prefixCls:d,id:t,tabKey:o,animated:s,active:h,style:qH(qH({},u),r),className:u$(c,i),ref:n}))}))}))))};var A3=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName","indicatorSize","indicatorAlign"],D3=0,P3=a.forwardRef((function(e,t){var n,r=e.id,o=e.prefixCls,i=void 0===o?"rc-tabs":o,l=e.className,u=e.items,c=e.direction,s=e.activeKey,d=e.defaultActiveKey,f=e.editable,p=e.animated,h=e.tabPosition,v=void 0===h?"top":h,g=e.tabBarGutter,m=e.tabBarStyle,y=e.tabBarExtraContent,b=e.locale,w=e.moreIcon,_=e.moreTransitionName,k=e.destroyInactiveTabPane,C=e.renderTabBar,E=e.onChange,O=e.onTabClick,S=e.onTabScroll,x=e.getPopupContainer,j=e.popupClassName,I=e.indicatorSize,R=e.indicatorAlign,A=void 0===R?"center":R,D=WW(e,A3),P=a.useMemo((function(){return(u||[]).filter((function(e){return e&&"object"===yH(e)&&"key"in e}))}),[u]),M="rtl"===c,T=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{inkBar:!0,tabPane:!1};return(e=!1===t?{inkBar:!1,tabPane:!1}:!0===t?{inkBar:!0,tabPane:!1}:qH({inkBar:!0},"object"===yH(t)?t:{})).tabPaneMotion&&void 0===e.tabPane&&(e.tabPane=!0),!e.tabPaneMotion&&e.tabPane&&(e.tabPane=!1),e}(p),F=sH(Object(a.useState)(!1),2),N=F[0],V=F[1];Object(a.useEffect)((function(){V(GW())}),[]);var L=sH(mH((function(){var e;return null===(e=P[0])||void 0===e?void 0:e.key}),{value:s,defaultValue:d}),2),B=L[0],$=L[1],z=sH(Object(a.useState)((function(){return P.findIndex((function(e){return e.key===B}))})),2),U=z[0],H=z[1];Object(a.useEffect)((function(){var e,t=P.findIndex((function(e){return e.key===B}));-1===t&&(t=Math.max(0,Math.min(U,P.length-1)),$(null===(e=P[t])||void 0===e?void 0:e.key));H(t)}),[P.map((function(e){return e.key})).join("_"),B,U]);var q=sH(mH(null,{value:r}),2),W=q[0],G=q[1];Object(a.useEffect)((function(){r||(G("rc-tabs-".concat(D3)),D3+=1)}),[]);var K={id:W,activeKey:B,animated:T,tabPosition:v,rtl:M,mobile:N},Y=qH(qH({},K),{},{editable:f,locale:b,moreIcon:w,moreTransitionName:_,tabBarGutter:g,onTabClick:function(e,t){null==O||O(e,t);var n=e!==B;$(e),n&&(null==E||E(e))},onTabScroll:S,extra:y,style:m,panes:null,getPopupContainer:x,popupClassName:j,indicatorSize:I,indicatorAlign:A});return a.createElement(h1.Provider,{value:{tabs:P,prefixCls:i}},a.createElement("div",lq({ref:t,id:r,className:u$(i,"".concat(i,"-").concat(v),(n={},UH(n,"".concat(i,"-mobile"),N),UH(n,"".concat(i,"-editable"),f),UH(n,"".concat(i,"-rtl"),M),n),l)},D),a.createElement(j3,lq({},Y,{renderTabBar:C})),a.createElement(R3,lq({destroyInactiveTabPane:k},K,{animated:T}))))})),M3=function(){return Wb((function e(){Ub(this,e),this._dataStore=[],this._top=0,this._dataStore=[],this._top=0}),[{key:"push",value:function(e){this._dataStore[this._top++]=e}},{key:"pop",value:function(){var e=this._dataStore[this._top-1];return this._top--,e}},{key:"peek",value:function(){return this._dataStore[this._top-1]}},{key:"clear",value:function(){this._dataStore=[],this._top=0}},{key:"length",value:function(){return this._top}},{key:"isEmpty",value:function(){return 0===this._top}},{key:"toString",value:function(){return this._dataStore.toString()}}])}(),T3=["+","-","/","*","(",")"],F3={"+":100,"-":100,"*":200,"/":200,"(":1e3,")":0},N3=function(e,t){return t.includes(e)};function V3(e){for(var t=e.split(" "),n=new M3,r=[];0!==t.length;)if(""!==t[0]){if(N3(t[0],T3))if("("===t[0])n.push(t[0]);else if(")"===t[0]){for(;"("!==n.peek();)r.push(n.pop());n.pop()}else if(n.isEmpty())n.push(t[0]);else if(F3[t[0]]>F3[n.peek()])n.push(t[0]);else{for(;!n.isEmpty()&&F3[n.peek()]>=F3[t[0]]&&"("!==n.peek();)r.push(n.pop());n.push(t[0])}else r.push(t[0]);t.shift()}else t.shift();for(;!n.isEmpty();)r.push(n.pop());var o=function(e){for(var t=new M3;0!==e.length;){if(N3(e[0],T3)){var n=t.pop(),r=t.peek(),o=0;switch(e[0]){case"+":o=Number(r)+Number(n);break;case"-":o=Number(r)-Number(n);break;case"*":o=Number(r)*Number(n);break;case"/":o=Number(r)/Number(n)}t.pop(),t.push(o)}else t.push(e[0]);e.shift()}var i=t.pop();if(isNaN(i))throw new Error("Oops, result is not a number");if(i===1/0)throw new Error("Oops, result is Infinity");return i}(r);return o}Ts.defineToken("WorkbenchContextToken");var L3=Ts.defineToken("WorkbenchPluginContribution"),B3=Object.defineProperty,$3=Object.getOwnPropertyDescriptor,z3=function(e,t,n,r){for(var o,i=r>1?void 0:r?$3(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&B3(t,n,i),i},U3=function(){return Wb((function e(){Ub(this,e),this._plugins=[]}),[{key:"init",value:function(){this._plugins=this._workbenchPluginProvider.getContributions(),this._initPlugins()}},{key:"destroy",value:function(){this._plugins.forEach((function(e){var t;return null==(t=e.destroy)?void 0:t.call(e)}))}},{key:"_initPlugins",value:function(){this._plugins.forEach((function(e){e._inited||(e.init(),e._inited=!0)}))}}])}();z3([bd(L3)],U3.prototype,"_workbenchPluginProvider",2),U3=z3([Ys()],U3);var H3=Ts.defineToken("WorkbenchContextService",{multiple:!1}),q3=l.a.createContext({container:null});q3.displayName="TableDiContext";var W3=q3.Provider;function G3(e,t){var n,r=l.a.useContext(q3),o=r.container;if(!o)throw new Error('"useContainer" is being used outside of the TableDiContext');try{return o.get(e)}catch(e){return null!=t&&t.optional||(console.warn(e),null==(n=r.onError)||n.call(r,e)),null}}q3.Consumer;var K3=function(e){var t=e.activeColor,n=e.onSelect,r=e.colorSource,o=G3(mM),i=G3(aM);return l.a.createElement("div",{className:"lakex-table-colorpicker"},r.map((function(e,r){return l.a.createElement("div",{className:"lakex-table-colorpicker-group",key:r},e.map((function(e,r){var a=(null==e?void 0:e.toLowerCase())===(null==t?void 0:t.toLowerCase());return l.a.createElement("span",{key:r,className:"lakex-table-colorpicker-item",onClick:n.bind(void 0,e)},l.a.createElement("span",{style:{backgroundColor:null==o?void 0:o.getRenderColor(e)}},a&&l.a.createElement("svg",{style:{fill:null==i?void 0:i.getThemeValue("@yuque-color-icon-primary")},viewBox:"0 0 18 18"},l.a.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))})))})))};function Y3(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var X3=["onChange"];function J3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J3(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q3=function(e){var t=e.onChange,n=Y3(e,X3),r=Object(a.useRef)();return l.a.createElement(s.a,Z3(Z3({},n),{},{autoComplete:"off",onChange:function(e){r.current||t(e)},onCompositionStart:function(){r.current=!0},onCompositionEnd:function(e){r.current=!1,t(e)}}))},e6=function(){return Wb((function e(t,n,r,o){Ub(this,e),this._node=t,this._type=n,this._handler=r,this._options=o||!1,this._node.addEventListener(this._type,this._handler,this._options)}),[{key:"destroy",value:function(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}])}();function t6(e,t,n,r){return new e6(e,t,n,r)}function n6(e,t,n){if((null==e?void 0:e.nodeType)===Node.TEXT_NODE&&(e=e.parentNode),null==e||!e.closest)return null;var r=e.closest(t);return!r||n&&!n.contains(r)?null:r}function r6(e){var t,n;e.stopPropagation(),null==(n=null==(t=e.nativeEvent)?void 0:t.stopImmediatePropagation)||n.call(t)}var o6=["input","textarea","select"];var i6=["allowEnter","onSave","maxRows","rows"];function a6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a6(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u6=s.a.TextArea,c6="lakex-editor-for-keyboard-input",s6=l.a.forwardRef((function(e,t){var n=e.allowEnter,r=void 0!==n&&n;e.onSave;var o=e.maxRows,i=e.rows,u=void 0===i?1:i,c=Y3(e,i6),d=Object(a.useRef)(null),f=gP(Object(a.useState)(e.value||""),2),p=f[0],h=f[1];Object(a.useLayoutEffect)((function(){ww(e.value)||h(e.value)}),[e.value]),Object(a.useImperativeHandle)(t,(function(){return{focus:function(e){var t;null==(t=d.current)||t.focus(e)},blur:function(){var e;null==(e=d.current)||e.blur()},setCursorToEnd:function(){v()},setValue:function(e){h(e)},getValue:function(){return p},clearValue:function(){h("")}}}));var v=Object(a.useCallback)((function(){setTimeout((function(){var e=document.activeElement;!e||!e.classList.contains(c6)||(r?e.scrollTop=e.scrollHeight:e.scrollLeft=e.scrollWidth)}),100)}),[r]),g=Object(a.useMemo)((function(){return o?{minRows:u,maxRows:o}:{minRows:u}}),[]),m=Object(a.useCallback)((function(t){var n,r=t.target.value;h(r),null==(n=e.onChange)||n.call(e,t)}),[e.onChange]);return r?l.a.createElement(u6,l6(l6({autoSize:g,ref:d},c),{},{value:p,onChange:m,className:u$(c6,e.className),autoComplete:"off",onMouseDown:r6,onMouseMove:r6,onMouseUp:r6,onFocus:e.onFocus,onBlur:e.onBlur})):l.a.createElement(s.a,l6(l6({ref:d},c),{},{value:p,onChange:m,className:u$(c6,e.className),autoComplete:"off",onMouseDown:r6,onMouseMove:r6,onMouseUp:r6,onFocus:e.onFocus,onBlur:e.onBlur}))})),d6=Object.freeze({Translate:{toString:function(e){if(e){var t=e.x,n=e.y;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}}},Scale:{toString:function(e){if(e)return"scaleX("+e.scaleX+") scaleY("+e.scaleY+")"}},Transform:{toString:function(e){if(e)return[d6.Translate.toString(e),d6.Scale.toString(e)].join(" ")}},Transition:{toString:function(e){return e.property+" "+e.duration+"ms "+e.easing}}}),f6={CommentBubble:D.default,Edit:P.default,Delete:M.default,ReviewArrowRight:T.default,MoreHorizontal:F.default,ArrowDown:N.default,ArrowUp:V.default,ArrowRight:L.default,ArrowLeft:B.default,Addlink:$.default,Add:z.default,Check:U.default,Question:H.default,Close:q.default,Drag:W.default,Preview:G.default,Download:K.default,EditorPaste:Y.default,FieldText:X.default,FieldSelect:J.default,FieldMultiSelect:Z.default,FieldEmail:Q.default,FieldInput:ee.default,FieldFile:te.default,FieldImage:ne.default,FieldLink:re.default,FieldCreator:oe.default,FieldModifier:ie.default,FieldNumber:ae.default,FieldMention:le.default,FieldPhone:ue.default,FieldCheckbox:ce.default,FieldDate:se.default,FieldCreatedAt:de.default,FieldUpdatedAt:fe.default,FieldRate:pe.default,FieldProgress:he.default,RowExpand:ve.default,RowCollpse:ge.default,Search:me.default,UpArrow:ye.default,DownArrow:be.default,RightArrow:we.default,LeftArrow:_e.default,IconHide:ke.default,RowHeightLow:Ce.default,RowHeightMiddle:Ee.default,RowHeightHigh:Oe.default,GridView:Se.default,CardView:xe.default,KanbanView:je.default,Clear:Ie.default,ViewerFilter:Re.default,ViewerSort:Ae.default,ViewerGroup:De.default,Setting:Pe.default,ReviewArrowDown:Me.default,Fullscreen:Te.default,FullWidth:Fe.default,NormalWidth:Ne.default,FormView:Ve.default,Copy:Le.default,FileDefault:Be.default,FileDefaultDark:$e.default,FileAi:ze.default,FileAiDark:Ue.default,FileExcel:He.default,FileExcelDark:qe.default,FileAudio:We.default,FileAudioDark:Ge.default,FileAxure:Ke.default,FileAxureDark:Ye.default,FileDoc:Xe.default,FileDocDark:Je.default,FileGraffle:Ze.default,FileGraffleDark:Qe.default,FileImage:et.default,FileImageDark:tt.default,FileKeynote:nt.default,FileKeynoteDark:rt.default,FileMindmap:ot.default,FileMindmapDark:it.default,FileMindnode:at.default,FileMindnodeDark:lt.default,FileXmind:ut.default,FileXmindDark:ct.default,FileTxt:st.default,FileTxtDark:dt.default,FileNumbers:ft.default,FileNumbersDark:pt.default,FileFolder:ht.default,FileFolderDark:vt.default,FilePdf:gt.default,FilePdfDark:mt.default,FilePpt:yt.default,FilePptDark:bt.default,FilePsd:wt.default,FilePsdDark:_t.default,FileRar:kt.default,FileRarDark:Ct.default,FileSheet:Et.default,FileSheetDark:Ot.default,FileSketch:St.default,FileSketchDark:xt.default,FileVideo:jt.default,FileVideoDark:It.default,FileWord:Rt.default,FileWordDark:At.default,Loading:Dt.default,Upload:Pt.default,NavBuildarea:Mt.default,NavDay:Tt.default,NavNight:Ft.default,Change:Nt.default,DocTypeDefault:Vt.default,DocTypeDefaultDark:Lt.default,DocTypeSheet:Bt.default,DocTypeSheetDark:$t.default,DocTypeMarkdown:zt.default,DocTypeMarkdownDark:Ut.default,DocTypeTable:Ht.default,DocTypeTableDark:qt.default,DocTypeBoard:Wt.default,DocTypeBoardDark:Gt.default,DocTypeMind:Kt.default,DocTypeMindDark:Yt.default,DocTypeShow:Xt.default,DocTypeShowDark:Jt.default,DocTypeNote:Zt.default,DocTypeNoteDark:Qt.default,DocTypeArtboard:en.default,DocTypeArtboardDark:tn.default,Star:nn.default,Calendar:rn.default,Brush:on.default,EditorCellBgColor:an.default},p6=["type","size","className"];function h6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h6(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g6=function(e){var t=e.type,n=e.size,r=e.className,o=Y3(e,p6);if(!t)return null;var i=f6[t];if(!i)return null;n=function(e,t){return"FormView"===e&&t&&(t+=1),t}(t,n);var a=v6({type:t},o);return n&&(a.width=+n,a.height=+n),l.a.createElement("span",{className:"larkui-icon-wrap larkui-icon-wrap-".concat(t," ").concat(r||"")},l.a.createElement(i,v6({},a)))},m6=["ext"];function y6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var b6=function(e){e.ext;var t=Y3(e,m6),n=G3(aM),r="dark"===(null==n?void 0:n.getCurrent()),o="File"+ta(e.ext),i=o;return r&&(i=o+"Dark"),l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y6(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:i},t))};function w6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w6(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k6=function e(t){var n=t.menu,r=t.readonly,o=t.defaultSelectedKeys,i=void 0===o?[]:o,a=t.editingKey,u=t.visibleKey,c=t.settingVisible,p=t.onDoubleClick,h=t.onClick,v=t.onInputBlur,g=t.handleVisibleChange;return l.a.createElement(d.a.Item,{key:n.key,eventKey:n.key,icon:n.icon,onDoubleClick:function(e){e.key=n.key,p(e)},onClick:function(){h(n)},className:u$({"lakex-table-menu-item-selected":i.includes(n.key),"lakex-table-menu-item-multi-line":n.desc})},n.key===a?l.a.createElement(s.a,{className:"lakex-table-menu-configs-input",defaultValue:n.title,autoFocus:!0,onKeyDown:function(e){var t;e.stopPropagation();var r=e.keyCode;27!==r?13===r&&(null==(t=n.onTitleChange)||t.call(n,e,n)):v&&v()},onClick:function(e){return e.stopPropagation()},onBlur:function(e){var t;return null==(t=n.onTitleChange)?void 0:t.call(n,e,n)}}):l.a.createElement("div",null,n.title,n.desc&&l.a.createElement("div",{className:"lakex-table-menu-configs-desc"},n.desc)),n.settings&&!r&&l.a.createElement(f.a,{overlayClassName:"lakex-table-menu-container lakex-table-menu-configs-settings",content:l.a.createElement(d.a,{onClick:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.onSettingClick&&n.onSettingClick.apply(n,[n].concat(t)),g(!1,n)}},n.settings.map((function(t,n){return l.a.createElement(e,{key:n,readonly:r,menu:t,editingKey:a,visibleKey:u,settingVisible:c,onDoubleClick:p,onClick:h,onInputBlur:v,handleVisibleChange:g})}))),trigger:"click",placement:"rightTop",visible:u===n.key&&c,onClick:function(e){return e.stopPropagation()},onVisibleChange:function(e){return g(e,n)}},l.a.createElement(g6,{type:"MoreHorizontal",size:14})),n.showActiveIcon&&l.a.createElement(g6,{type:"Check",size:14}))},C6=function(e){var t=e.menu,n=e.index,r=e.readonly,o=e.defaultSelectedKeys,i=void 0===o?[]:o,a=e.editingKey,u=e.visibleKey,c=e.settingVisible,s=e.onDoubleClick,f=e.onClick,p=e.onInputBlur,h=e.handleVisibleChange,v=t.key?t.key+n:n,g=t.children;if(t.groupBy){var m=t.children.reduce((function(e,n){var r=n[t.groupBy];return e[r]||(e[r]=[]),e[r].push(n),e}),{});Object.values(m).length>1&&(g=m)}return l.a.createElement(d.a.SubMenu,{key:v,eventKey:v,icon:t.icon,title:l.a.createElement("span",{className:"lakex-table-menu-item-title"},l.a.createElement("span",null,t.title),l.a.createElement(L.default,{width:16,height:16})),popupClassName:"lakex-table-menu-container lakex-table-menu-configs-submenu ".concat(t.className)},Array.isArray(g)?g.map((function(e,t){return l.a.createElement(k6,{key:t,readonly:r,menu:e,defaultSelectedKeys:i,editingKey:a,visibleKey:u,settingVisible:c,onDoubleClick:s,onClick:f,onInputBlur:p,handleVisibleChange:h})})):Object.keys(g).map((function(e){return l.a.createElement(d.a.ItemGroup,{key:e,title:e},g[e].map((function(e,t){return l.a.createElement(k6,{key:t,readonly:r,menu:e,defaultSelectedKeys:i,editingKey:a,visibleKey:u,settingVisible:c,onDoubleClick:s,onClick:f,onInputBlur:p,handleVisibleChange:h})})))})))},E6=function(e){var t=e.menu,n=e.readonly,r=e.defaultSelectedKeys,o=void 0===r?[]:r,i=e.editingKey,a=e.visibleKey,u=e.settingVisible,c=e.onDoubleClick,s=e.onClick,d=e.onInputBlur,f=e.handleVisibleChange,p=tH({id:t.key}),h=p.attributes,v=p.listeners,g=p.setNodeRef,m=p.transform,y=p.transition,b=p.isDragging,w={transform:d6.Transform.toString(m),transition:y,zIndex:b?"100":"auto",opacity:b?.3:1};return l.a.createElement("div",_6(_6({key:t.key,ref:g,style:_6({},w)},v),h),l.a.createElement(k6,{key:t.key,readonly:n,menu:t,defaultSelectedKeys:o,editingKey:i,visibleKey:a,settingVisible:u,onDoubleClick:c,onClick:s,onInputBlur:d,handleVisibleChange:f}))},O6=function(e){var t=e.readonly,n=e.configs,r=e.defaultSelectedKeys,o=e.draggable,i=void 0!==o&&o,u=e.editingKey,c=e.visibleKey,s=e.settingVisible,d=e.onClick,f=e.onDoubleClick,p=e.onDragEnd,h=e.onInputBlur,v=e.handleVisibleChange,g=U$(z$(Vz,{activationConstraint:{distance:8}})),m=n.map((function(e,n){var o=e.key?e.key+n:n;return e.children?l.a.createElement(C6,{key:o,index:n,readonly:t,menu:e,defaultSelectedKeys:r,editingKey:u,visibleKey:c,settingVisible:s,onDoubleClick:f,onClick:d,onInputBlur:h,handleVisibleChange:v}):i?l.a.createElement(E6,{key:o,readonly:t,menu:e,defaultSelectedKeys:r,editingKey:u,visibleKey:c,settingVisible:s,onDoubleClick:f,onClick:d,onInputBlur:h,handleVisibleChange:v}):l.a.createElement(k6,{key:o,readonly:t,menu:e,defaultSelectedKeys:r,editingKey:u,visibleKey:c,settingVisible:s,onDoubleClick:f,onClick:d,onInputBlur:h,handleVisibleChange:v})})),y=Object(a.useMemo)((function(){return n.map((function(e){return _6(_6({},e),{},{id:e.key})}))}),[n]);return i?l.a.createElement(bU,{sensors:g,modifiers:[aH,oH],collisionDetection:Z$,onDragEnd:p},l.a.createElement(KU,{items:y,strategy:qU},m)):m},S6=function(e){var t=e.readonly,n=void 0!==t&&t,r=e.draggable,o=e.className,i=e.defaultSelectedKeys,u=e.menuKey,c=e.onDragEnd,s=e.onInputBlur,f=function(e){var t=Object(a.useRef)(null),n=Object(a.useRef)(!1),r=gP(Object(a.useState)(e.configs),2),o=r[0],i=r[1],l=gP(Object(a.useState)(!1),2),u=l[0],c=l[1],s=gP(Object(a.useState)(""),2),d=s[0],f=s[1],p=gP(Object(a.useState)(e.editingKey||""),2),h=p[0],v=p[1];return Object(a.useEffect)((function(){v(e.editingKey)}),[e.editingKey]),Object(a.useEffect)((function(){i(e.configs)}),[e.configs]),{state:{configs:o,settingVisible:u,visibleKey:d,editingKey:h},timer:t,prevent:n,delay:200,handleVisibleChange:function(e,t){c(e),f(e?t.key:"")},onClick:function(r){e.onDoubleClick?t.current=setTimeout((function(){n.current||null==e||e.onClick(r)}),200):null==e||e.onClick(r)},onDoubleClick:function(r){clearTimeout(t.current),n.current=!0,null==e||e.onDoubleClick(r),setTimeout((function(){n.current=!1}),200)}}}(e),p=f.state,h=f.onClick,v=f.onDoubleClick,g=f.handleVisibleChange,m=p.configs,y=p.editingKey,b=p.visibleKey,w=p.settingVisible;return l.a.createElement(d.a,{className:"lakex-table-menu-configs ".concat(o),mode:"vertical",defaultSelectedKeys:i,key:u},l.a.createElement(O6,{readonly:n,configs:m,draggable:r,defaultSelectedKeys:i,editingKey:y,visibleKey:b,settingVisible:w,onClick:h,onDoubleClick:v,onDragEnd:c,onInputBlur:s,handleVisibleChange:g}))};function x6(e,t,n){return t=P_(t),D_(e,j6()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function j6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(j6=function(){return!!e})()}var I6,R6=function(e){function t(e){var n;return Ub(this,t),(n=x6(this,t,[e])).state={hasError:!1},n}return F_(t,e),Wb(t,[{key:"componentDidCatch",value:function(e,t){var n,r;null==(r=(n=this.props).onError)||r.call(n,e,t)}},{key:"render",value:function(){return this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}])}(l.a.Component),A6={},D6={};var P6,M6={exports:{}};function T6(){return P6||(P6=1,function(e,t){e.exports=function(e,t){t.prototype.weekday=function(e){var t=this.$locale().weekStart||0,n=this.$W,r=(n<t?n+7:n)-t;return this.$utils().u(e)?r:this.subtract(r,"day").add(e,"day")}}}(M6)),M6.exports}var F6,N6={exports:{}};function V6(){return F6||(F6=1,function(e,t){e.exports=function(e,t,n){var r=t.prototype,o=function(e){return e&&(e.indexOf?e:e.s)},i=function(e,t,n,r,i){var a=e.name?e:e.$locale(),l=o(a[t]),u=o(a[n]),c=l||u.map((function(e){return e.slice(0,r)}));if(!i)return c;var s=a.weekStart;return c.map((function(e,t){return c[(t+(s||0))%7]}))},a=function(){return n.Ls[n.locale()]},l=function(e,t){return e.formats[t]||e.formats[t.toUpperCase()].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))},u=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):i(e,"months")},monthsShort:function(t){return t?t.format("MMM"):i(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):i(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):i(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):i(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return l(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return u.bind(this)()},n.localeData=function(){var e=a();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(t){return l(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},n.months=function(){return i(a(),"months")},n.monthsShort=function(){return i(a(),"monthsShort","months",3)},n.weekdays=function(e){return i(a(),"weekdays",null,null,e)},n.weekdaysShort=function(e){return i(a(),"weekdaysShort","weekdays",3,e)},n.weekdaysMin=function(e){return i(a(),"weekdaysMin","weekdays",2,e)}}}(N6)),N6.exports}var L6,B6={exports:{}};var $6,z6={exports:{}};var U6,H6={exports:{}};var q6,W6={exports:{}};var G6=SP;Object.defineProperty(A6,"__esModule",{value:!0});var K6=A6.default=void 0,Y6=G6(i.a),X6=function(){if(I6)return D6;I6=1,Object.defineProperty(D6,"__esModule",{value:!0}),D6.call=i,D6.default=void 0,D6.note=r,D6.noteOnce=l,D6.preMessage=void 0,D6.resetWarned=o,D6.warning=n,D6.warningOnce=a;var e={},t=D6.preMessage=function(e){};function n(e,t){}function r(e,t){}function o(){e={}}function i(t,n,r){!n&&!e[r]&&(t(!1,r),e[r]=!0)}function a(e,t){i(n,e,t)}function l(e,t){i(r,e,t)}return a.preMessage=t,a.resetWarned=o,a.noteOnce=l,D6.default=a,D6}(),J6=G6(T6()),Z6=G6(V6()),Q6=G6((L6||(L6=1,function(e,t){e.exports=function(){var e="week",t="year";return function(n,r,o){var i=r.prototype;i.week=function(n){if(void 0===n&&(n=null),null!==n)return this.add(7*(n-this.week()),"day");var r=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var i=o(this).startOf(t).add(1,t).date(r),a=o(this).endOf(e);if(i.isBefore(a))return 1}var l=o(this).startOf(t).date(r).startOf(e).subtract(1,"millisecond"),u=this.diff(l,e,!0);return u<0?o(this).startOf("week").week():Math.ceil(u)},i.weeks=function(e){return void 0===e&&(e=null),this.week(e)}}}()}(B6)),B6.exports)),e4=G6(($6||($6=1,function(e,t){e.exports=function(e,t){t.prototype.weekYear=function(){var e=this.month(),t=this.week(),n=this.year();return 1===t&&11===e?n+1:0===e&&t>=52?n-1:n}}}(z6)),z6.exports)),t4=G6((U6||(U6=1,function(e,t){e.exports=function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return r.bind(this)(e);var o=this.$utils(),i=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return n.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return n.ordinal(t.week(),"W");case"w":case"ww":return o.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return o.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return o.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}}));return r.bind(this)(i)}}}(H6)),H6.exports)),n4=G6((q6||(q6=1,function(e,t){e.exports=function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,r=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,i={},a=function(e){return(e=+e)+(e>68?1900:2e3)},l=function(e){return function(t){this[e]=+t}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||"Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],c=function(e){var t=i[e];return t&&(t.indexOf?t:t.s.concat(t.f))},s=function(e,t){var n,r=i.meridiem;if(r){for(var o=1;o<=24;o+=1)if(e.indexOf(r(o,0,t))>-1){n=o>12;break}}else n=e===(t?"pm":"PM");return n},d={A:[o,function(e){this.afternoon=s(e,!1)}],a:[o,function(e){this.afternoon=s(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[n,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[r,l("seconds")],ss:[r,l("seconds")],m:[r,l("minutes")],mm:[r,l("minutes")],H:[r,l("hours")],h:[r,l("hours")],HH:[r,l("hours")],hh:[r,l("hours")],D:[r,l("day")],DD:[n,l("day")],Do:[o,function(e){var t=i.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],M:[r,l("month")],MM:[n,l("month")],MMM:[o,function(e){var t=c("months"),n=(c("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[o,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,l("year")],YY:[n,function(e){this.year=a(e)}],YYYY:[/\d{4}/,l("year")],Z:u,ZZ:u};function f(n){var r,o;r=n,o=i&&i.formats;for(var a=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var i=r&&r.toUpperCase();return n||o[r]||e[r]||o[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))).match(t),l=a.length,u=0;u<l;u+=1){var c=a[u],s=d[c],f=s&&s[0],p=s&&s[1];a[u]=p?{regex:f,parser:p}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,r=0;n<l;n+=1){var o=a[n];if("string"==typeof o)r+=o.length;else{var i=o.regex,u=o.parser,c=e.slice(r),s=i.exec(c)[0];u.call(t,s),e=e.replace(s,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(a=e.parseTwoDigitYear);var r=t.prototype,o=r.parse;r.parse=function(e){var t=e.date,r=e.utc,a=e.args;this.$u=r;var l=a[1];if("string"==typeof l){var u=!0===a[2],c=!0===a[3],s=u||c,d=a[2];c&&(d=a[2]),i=this.$locale(),!u&&d&&(i=n.Ls[d]),this.$d=function(e,t,n){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var r=f(t)(e),o=r.year,i=r.month,a=r.day,l=r.hours,u=r.minutes,c=r.seconds,s=r.milliseconds,d=r.zone,p=new Date,h=a||(o||i?1:p.getDate()),v=o||p.getFullYear(),g=0;o&&!i||(g=i>0?i-1:p.getMonth());var m=l||0,y=u||0,b=c||0,w=s||0;return d?new Date(Date.UTC(v,g,h,m,y,b,w+60*d.offset*1e3)):n?new Date(Date.UTC(v,g,h,m,y,b,w)):new Date(v,g,h,m,y,b,w)}catch{return new Date("")}}(t,l,r),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),s&&t!=this.format(l)&&(this.$d=new Date("")),i={}}else if(l instanceof Array)for(var p=l.length,h=1;h<=p;h+=1){a[1]=l[h-1];var v=n.apply(this,a);if(v.isValid()){this.$d=v.$d,this.$L=v.$L,this.init();break}h===p&&(this.$d=new Date(""))}else o.call(this,e)}}}()}(W6)),W6.exports));Y6.default.extend(n4.default),Y6.default.extend(t4.default),Y6.default.extend(J6.default),Y6.default.extend(Z6.default),Y6.default.extend(Q6.default),Y6.default.extend(e4.default),Y6.default.extend((function(e,t){var n=t.prototype,r=n.format;n.format=function(e){var t=(e||"").replace("Wo","wo");return r.bind(this)(t)}}));var r4={bn_BD:"bn-bd",by_BY:"be",en_GB:"en-gb",en_US:"en",fr_BE:"fr",fr_CA:"fr-ca",hy_AM:"hy-am",kmr_IQ:"ku",nl_BE:"nl-be",pt_BR:"pt-br",zh_CN:"zh-cn",zh_HK:"zh-hk",zh_TW:"zh-tw"},o4=function(e){return r4[e]||e.split("_")[0]},i4=function(){(0,X6.noteOnce)(!1,"Not match any format. Please help to fire a issue about this.")},a4={getNow:function(){return(0,Y6.default)()},getFixedDate:function(e){return(0,Y6.default)(e,["YYYY-M-DD","YYYY-MM-DD"])},getEndDate:function(e){return e.endOf("month")},getWeekDay:function(e){var t=e.locale("en");return t.weekday()+t.localeData().firstDayOfWeek()},getYear:function(e){return e.year()},getMonth:function(e){return e.month()},getDate:function(e){return e.date()},getHour:function(e){return e.hour()},getMinute:function(e){return e.minute()},getSecond:function(e){return e.second()},addYear:function(e,t){return e.add(t,"year")},addMonth:function(e,t){return e.add(t,"month")},addDate:function(e,t){return e.add(t,"day")},setYear:function(e,t){return e.year(t)},setMonth:function(e,t){return e.month(t)},setDate:function(e,t){return e.date(t)},setHour:function(e,t){return e.hour(t)},setMinute:function(e,t){return e.minute(t)},setSecond:function(e,t){return e.second(t)},isAfter:function(e,t){return e.isAfter(t)},isValidate:function(e){return e.isValid()},locale:{getWeekFirstDay:function(e){return(0,Y6.default)().locale(o4(e)).localeData().firstDayOfWeek()},getWeekFirstDate:function(e,t){return t.locale(o4(e)).weekday(0)},getWeek:function(e,t){return t.locale(o4(e)).week()},getShortWeekDays:function(e){return(0,Y6.default)().locale(o4(e)).localeData().weekdaysMin()},getShortMonths:function(e){return(0,Y6.default)().locale(o4(e)).localeData().monthsShort()},format:function(e,t,n){return t.locale(o4(e)).format(n)},parse:function(e,t,n){for(var r=o4(e),o=0;o<n.length;o+=1){var i=n[o],a=t;if(i.includes("wo")||i.includes("Wo")){for(var l=a.split("-")[0],u=a.split("-")[1],c=(0,Y6.default)(l,"YYYY").startOf("year").locale(r),s=0;s<=52;s+=1){var d=c.add(s,"week");if(d.format("Wo")===u)return d}return i4(),null}var f=(0,Y6.default)(a,i).locale(r);if(f.isValid())return f}return t&&i4(),null}}},l4=a4;function u4(){return u4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u4.apply(this,arguments)}function c4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c4(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d4(e,t){var n=s4({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}K6=A6.default=l4;var f4=Object(a.createContext)({});function p4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(p4=function(){return!!e})()}function h4(e){var t=p4();return function(){var n,r=P_(e);if(t){var o=P_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return D_(this,n)}}var v4,g4={exports:{}},m4={},y4=Symbol.for("react.element"),b4=Symbol.for("react.portal"),w4=Symbol.for("react.fragment"),_4=Symbol.for("react.strict_mode"),k4=Symbol.for("react.profiler"),C4=Symbol.for("react.provider"),E4=Symbol.for("react.context"),O4=Symbol.for("react.server_context"),S4=Symbol.for("react.forward_ref"),x4=Symbol.for("react.suspense"),j4=Symbol.for("react.suspense_list"),I4=Symbol.for("react.memo"),R4=Symbol.for("react.lazy"),A4=Symbol.for("react.offscreen");function D4(e){if("object"===Lb(e)&&null!==e){var t=e.$$typeof;switch(t){case y4:switch(e=e.type){case w4:case k4:case _4:case x4:case j4:return e;default:switch(e=e&&e.$$typeof){case O4:case E4:case S4:case R4:case I4:case C4:return e;default:return t}}case b4:return t}}}v4=Symbol.for("react.module.reference"),m4.ContextConsumer=E4,m4.ContextProvider=C4,m4.Element=y4,m4.ForwardRef=S4,m4.Fragment=w4,m4.Lazy=R4,m4.Memo=I4,m4.Portal=b4,m4.Profiler=k4,m4.StrictMode=_4,m4.Suspense=x4,m4.SuspenseList=j4,m4.isAsyncMode=function(){return!1},m4.isConcurrentMode=function(){return!1},m4.isContextConsumer=function(e){return D4(e)===E4},m4.isContextProvider=function(e){return D4(e)===C4},m4.isElement=function(e){return"object"===Lb(e)&&null!==e&&e.$$typeof===y4},m4.isForwardRef=function(e){return D4(e)===S4},m4.isFragment=function(e){return D4(e)===w4},m4.isLazy=function(e){return D4(e)===R4},m4.isMemo=function(e){return D4(e)===I4},m4.isPortal=function(e){return D4(e)===b4},m4.isProfiler=function(e){return D4(e)===k4},m4.isStrictMode=function(e){return D4(e)===_4},m4.isSuspense=function(e){return D4(e)===x4},m4.isSuspenseList=function(e){return D4(e)===j4},m4.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===w4||e===k4||e===_4||e===x4||e===j4||e===A4||"object"===Lb(e)&&null!==e&&(e.$$typeof===R4||e.$$typeof===I4||e.$$typeof===C4||e.$$typeof===E4||e.$$typeof===S4||e.$$typeof===v4||void 0!==e.getModuleId)},m4.typeOf=D4,g4.exports=m4;var P4=g4.exports;function M4(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return l.a.Children.forEach(e,(function(e){null==e&&!t.keepEmpty||(Array.isArray(e)?n=n.concat(M4(e)):P4.isFragment(e)&&e.props?n=n.concat(M4(e.props.children,t)):n.push(e))})),n}var T4={};function F4(e,t){}function N4(e,t){}function V4(e,t,n){!t&&!T4[n]&&(e(!1,n),T4[n]=!0)}function L4(e,t){V4(F4,e,t)}L4.preMessage=function(e){},L4.resetWarned=function(){T4={}},L4.noteOnce=function(e,t){V4(N4,e,t)};var B4="RC_FORM_INTERNAL_HOOKS",$4=function(){L4(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},z4=a.createContext({getFieldValue:$4,getFieldsValue:$4,getFieldError:$4,getFieldsError:$4,isFieldsTouched:$4,isFieldTouched:$4,isFieldValidating:$4,isFieldsValidating:$4,resetFields:$4,setFields:$4,setFieldsValue:$4,validateFields:$4,submit:$4,getInternalHooks:function(){return $4(),{dispatch:$4,initEntityValue:$4,registerField:$4,useSubscribe:$4,setInitialValues:$4,setCallbacks:$4,getFields:$4,setValidateMessages:$4,setPreserve:$4}}});function U4(e){return null==e?[]:Array.isArray(e)?e:[e]}function H4(){return H4=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H4.apply(this,arguments)}function q4(e){return(q4=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W4(e,t){return W4=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},W4(e,t)}function G4(e,t,n){return G4=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&W4(o,n.prototype),o},G4.apply(null,arguments)}function K4(e){var t="function"==typeof Map?new Map:void 0;return K4=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return G4(e,arguments,q4(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),W4(n,e)},K4(e)}var Y4=/%[sdj%]/g;function X4(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function J4(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,o=t[0],i=t.length;return"function"==typeof o?o.apply(null,t.slice(1)):"string"==typeof o?String(o).replace(Y4,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch{return"[Circular]"}break;default:return e}})):o}function Z4(e,t){return!!(null==e||"array"===t&&Array.isArray(e)&&!e.length||function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)&&"string"==typeof e&&!e)}function Q4(e,t,n){var r=0,o=e.length;!function i(a){if(a&&a.length)n(a);else{var l=r;r+=1,l<o?t(e[l],i):n([])}}([])}var e8=function(e){function t(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,W4(e,t)}(t,e),t}(K4(Error));function t8(e,t,n,r){if(t.first){var o=new Promise((function(t,o){var i=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}(e);Q4(i,n,(function(e){return r(e),e.length?o(new e8(e,X4(e))):t()}))}));return o.catch((function(e){return e})),o}var i=t.firstFields||[];!0===i&&(i=Object.keys(e));var a=Object.keys(e),l=a.length,u=0,c=[],s=new Promise((function(t,o){var s=function(e){if(c.push.apply(c,e),++u===l)return r(c),c.length?o(new e8(c,X4(c))):t()};a.length||(r(c),t()),a.forEach((function(t){var r=e[t];-1!==i.indexOf(t)?Q4(r,n,s):function(e,t,n){var r=[],o=0,i=e.length;function a(e){r.push.apply(r,e),++o===i&&n(r)}e.forEach((function(e){t(e,a)}))}(r,n,s)}))}));return s.catch((function(e){return e})),s}function n8(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:"function"==typeof t?t():t,field:t.field||e.fullField}}}function r8(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===Lb(r)&&"object"===Lb(e[n])?e[n]=H4({},e[n],r):e[n]=r}return e}function o8(e,t,n,r,o,i){e.required&&(!n.hasOwnProperty(e.field)||Z4(t,i||e.type))&&r.push(J4(o.messages.required,e.fullField))}var i8={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},a8={integer:function(e){return a8.number(e)&&parseInt(e,10)===e},float:function(e){return a8.number(e)&&!a8.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===Lb(e)&&!a8.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(i8.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(i8.url)},hex:function(e){return"string"==typeof e&&!!e.match(i8.hex)}};var l8="enum";var u8={required:o8,whitespace:function(e,t,n,r,o){(/^\s+$/.test(t)||""===t)&&r.push(J4(o.messages.whitespace,e.fullField))},type:function(e,t,n,r,o){if(e.required&&void 0===t)o8(e,t,n,r,o);else{var i=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(i)>-1?a8[i](t)||r.push(J4(o.messages.types[i],e.fullField,e.type)):i&&Lb(t)!==e.type&&r.push(J4(o.messages.types[i],e.fullField,e.type))}},range:function(e,t,n,r,o){var i="number"==typeof e.len,a="number"==typeof e.min,l="number"==typeof e.max,u=t,c=null,s="number"==typeof t,d="string"==typeof t,f=Array.isArray(t);if(s?c="number":d?c="string":f&&(c="array"),!c)return!1;f&&(u=t.length),d&&(u=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?u!==e.len&&r.push(J4(o.messages[c].len,e.fullField,e.len)):a&&!l&&u<e.min?r.push(J4(o.messages[c].min,e.fullField,e.min)):l&&!a&&u>e.max?r.push(J4(o.messages[c].max,e.fullField,e.max)):a&&l&&(u<e.min||u>e.max)&&r.push(J4(o.messages[c].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,o){e[l8]=Array.isArray(e[l8])?e[l8]:[],-1===e[l8].indexOf(t)&&r.push(J4(o.messages[l8],e.fullField,e[l8].join(", ")))},pattern:function(e,t,n,r,o){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(J4(o.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"==typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(J4(o.messages.pattern.mismatch,e.fullField,t,e.pattern))}}};function c8(e,t,n,r,o){var i=e.type,a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Z4(t,i)&&!e.required)return n();u8.required(e,t,r,a,o,i),Z4(t,i)||u8.type(e,t,r,a,o)}n(a)}var s8={string:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Z4(t,"string")&&!e.required)return n();u8.required(e,t,r,i,o,"string"),Z4(t,"string")||(u8.type(e,t,r,i,o),u8.range(e,t,r,i,o),u8.pattern(e,t,r,i,o),!0===e.whitespace&&u8.whitespace(e,t,r,i,o))}n(i)},method:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Z4(t)&&!e.required)return n();u8.required(e,t,r,i,o),void 0!==t&&u8.type(e,t,r,i,o)}n(i)},number:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),Z4(t)&&!e.required)return n();u8.required(e,t,r,i,o),void 0!==t&&(u8.type(e,t,r,i,o),u8.range(e,t,r,i,o))}n(i)},boolean:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Z4(t)&&!e.required)return n();u8.required(e,t,r,i,o),void 0!==t&&u8.type(e,t,r,i,o)}n(i)},regexp:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Z4(t)&&!e.required)return n();u8.required(e,t,r,i,o),Z4(t)||u8.type(e,t,r,i,o)}n(i)},integer:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Z4(t)&&!e.required)return n();u8.required(e,t,r,i,o),void 0!==t&&(u8.type(e,t,r,i,o),u8.range(e,t,r,i,o))}n(i)},float:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Z4(t)&&!e.required)return n();u8.required(e,t,r,i,o),void 0!==t&&(u8.type(e,t,r,i,o),u8.range(e,t,r,i,o))}n(i)},array:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(null==t&&!e.required)return n();u8.required(e,t,r,i,o,"array"),null!=t&&(u8.type(e,t,r,i,o),u8.range(e,t,r,i,o))}n(i)},object:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Z4(t)&&!e.required)return n();u8.required(e,t,r,i,o),void 0!==t&&u8.type(e,t,r,i,o)}n(i)},enum:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Z4(t)&&!e.required)return n();u8.required(e,t,r,i,o),void 0!==t&&u8.enum(e,t,r,i,o)}n(i)},pattern:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Z4(t,"string")&&!e.required)return n();u8.required(e,t,r,i,o),Z4(t,"string")||u8.pattern(e,t,r,i,o)}n(i)},date:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Z4(t,"date")&&!e.required)return n();var a;if(u8.required(e,t,r,i,o),!Z4(t,"date"))a=t instanceof Date?t:new Date(t),u8.type(e,a,r,i,o),a&&u8.range(e,a.getTime(),r,i,o)}n(i)},url:c8,hex:c8,email:c8,required:function(e,t,n,r,o){var i=[],a=Array.isArray(t)?"array":Lb(t);u8.required(e,t,r,i,o,a),n(i)},any:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Z4(t)&&!e.required)return n();u8.required(e,t,r,i,o)}n(i)}};function d8(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var f8=d8();function p8(e){this.rules=null,this._messages=f8,this.define(e)}function h8(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null==n)return;n=n[t[r]]}return n}function v8(e,t,n,r){if(!t.length)return n;var o,i=sk(t),a=i[0],l=i.slice(1);return o=e||"number"!=typeof a?Array.isArray(e)?Vb(e):s4({},e):[],r&&void 0===n&&1===l.length?delete o[a][l[0]]:o[a]=v8(o[a],l,n,r),o}function g8(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!h8(e,t.slice(0,-1))?e:v8(e,t,n,r)}function m8(e){return U4(e)}function y8(e,t){return h8(e,t)}function b8(e,t,n){return g8(e,t,n,arguments.length>3&&void 0!==arguments[3]&&arguments[3])}function w8(e,t){var n={};return t.forEach((function(t){var r=y8(e,t);n=b8(n,t,r)})),n}function _8(e,t){return e&&e.some((function(e){return O8(e,t)}))}function k8(e){return"object"===Lb(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function C8(e,t){var n=Array.isArray(e)?Vb(e):s4({},e);return t&&Object.keys(t).forEach((function(e){var r=n[e],o=t[e],i=k8(r)&&k8(o);n[e]=i?C8(r,o||{}):o})),n}function E8(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return C8(e,t)}),e)}function O8(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function S8(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&e in t.target?t.target[e]:t}function x8(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var o=e[t],i=t-n;return i>0?[].concat(Vb(e.slice(0,n)),[o],Vb(e.slice(n,t)),Vb(e.slice(t+1,r))):i<0?[].concat(Vb(e.slice(0,t)),Vb(e.slice(t+1,n+1)),[o],Vb(e.slice(n+1,r))):e}p8.prototype={messages:function(e){return e&&(this._messages=r8(d8(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==Lb(e)||Array.isArray(e))throw new Error("Rules must be an object");var t,n;for(t in this.rules={},e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e,t,n){var r=this;void 0===t&&(t={}),void 0===n&&(n=function(){});var o=e,i=t,a=n;if("function"==typeof i&&(a=i,i={}),!this.rules||0===Object.keys(this.rules).length)return a&&a(),Promise.resolve();if(i.messages){var l=this.messages();l===f8&&(l=d8()),r8(l,i.messages),i.messages=l}else i.messages=this.messages();var u,c,s={};(i.keys||Object.keys(this.rules)).forEach((function(t){u=r.rules[t],c=o[t],u.forEach((function(n){var i=n;"function"==typeof i.transform&&(o===e&&(o=H4({},o)),c=o[t]=i.transform(c)),(i="function"==typeof i?{validator:i}:H4({},i)).validator=r.getValidationMethod(i),i.field=t,i.fullField=i.fullField||t,i.type=r.getType(i),i.validator&&(s[t]=s[t]||[],s[t].push({rule:i,value:c,source:o,field:t}))}))}));var d={};return t8(s,i,(function(e,t){var n,r=e.rule,o=!("object"!==r.type&&"array"!==r.type||"object"!==Lb(r.fields)&&"object"!==Lb(r.defaultField));function a(e,t){return H4({},t,{fullField:r.fullField+"."+e})}function l(n){void 0===n&&(n=[]);var l=n;if(Array.isArray(l)||(l=[l]),!i.suppressWarning&&l.length&&p8.warning("async-validator:",l),l.length&&void 0!==r.message&&(l=[].concat(r.message)),l=l.map(n8(r)),i.first&&l.length)return d[r.field]=1,t(l);if(o){if(r.required&&!e.value)return void 0!==r.message?l=[].concat(r.message).map(n8(r)):i.error&&(l=[i.error(r,J4(i.messages.required,r.field))]),t(l);var u={};if(r.defaultField)for(var c in e.value)e.value.hasOwnProperty(c)&&(u[c]=r.defaultField);for(var s in u=H4({},u,e.rule.fields))if(u.hasOwnProperty(s)){var f=Array.isArray(u[s])?u[s]:[u[s]];u[s]=f.map(a.bind(null,s))}var p=new p8(u);p.messages(i.messages),e.rule.options&&(e.rule.options.messages=i.messages,e.rule.options.error=i.error),p.validate(e.value,e.rule.options||i,(function(e){var n=[];l&&l.length&&n.push.apply(n,l),e&&e.length&&n.push.apply(n,e),t(n.length?n:null)}))}else t(l)}o=o&&(r.required||!r.required&&e.value),r.field=e.field,r.asyncValidator?n=r.asyncValidator(r,e.value,l,e.source,i):r.validator&&(!0===(n=r.validator(r,e.value,l,e.source,i))?l():!1===n?l(r.message||r.field+" fails"):n instanceof Array?l(n):n instanceof Error&&l(n.message)),n&&n.then&&n.then((function(){return l()}),(function(e){return l(e)}))}),(function(e){!function(e){var t,n,r,o=[],i={};for(t=0;t<e.length;t++)n=e[t],r=void 0,Array.isArray(n)?o=(r=o).concat.apply(r,n):o.push(n);o.length?i=X4(o):(o=null,i=null),a(o,i)}(e)}))},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!s8.hasOwnProperty(e.type))throw new Error(J4("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?s8.required:s8[this.getType(e)]||!1}},p8.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");s8[e]=t},p8.warning=function(){},p8.messages=f8,p8.validators=s8;var j8="'${name}' is not a valid ${type}",I8={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:j8,method:j8,array:j8,object:j8,number:j8,date:j8,boolean:j8,integer:j8,float:j8,regexp:j8,email:j8,url:j8,hex:j8},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},R8=p8;function A8(e,t,n,r){var o=s4(s4({},n),{},{name:t,enum:(n.enum||[]).join(", ")});return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(t).forEach((function(i){var a=t[i];"string"==typeof a?n[i]=function(e,t){return function(){return function(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}(e,s4(s4({},o),t))}}(a,r):a&&"object"===Lb(a)?(n[i]={},e(a,n[i])):n[i]=a})),n}(E8({},I8,e))}function D8(e,t,n,r,o){return P8.apply(this,arguments)}function P8(){return P8=mC(X_.mark((function e(t,n,r,o,i){var l,u,c,s,d,f;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=s4({},r),u=null,l&&"array"===l.type&&l.defaultField&&(u=l.defaultField,delete l.defaultField),c=new R8($b({},t,[l])),s=A8(o.validateMessages,t,l,i),c.messages(s),d=[],e.prev=7,e.next=10,Promise.resolve(c.validate($b({},t,n),s4({},o)));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),e.t0.errors?d=e.t0.errors.map((function(e,t){var n=e.message;return a.isValidElement(n)?a.cloneElement(n,{key:"error_".concat(t)}):n})):(console.error(e.t0),d=[s.default()]);case 15:if(d.length||!u){e.next=20;break}return e.next=18,Promise.all(n.map((function(e,n){return D8("".concat(t,".").concat(n),e,u,o,i)})));case 18:return f=e.sent,e.abrupt("return",f.reduce((function(e,t){return[].concat(Vb(e),Vb(t))}),[]));case 20:return e.abrupt("return",d);case 21:case"end":return e.stop()}}),e,null,[[7,12]])}))),P8.apply(this,arguments)}function M8(e,t,n,r,o,i){var a,l=e.join("."),u=n.map((function(e){var t=e.validator;return t?s4(s4({},e),{},{validator:function(e,n,r){var o=!1,i=t(e,n,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){L4(!o,"Your validator function has already return a promise. `callback` will be ignored."),o||r.apply(void 0,t)}))}));L4(o=i&&"function"==typeof i.then&&"function"==typeof i.catch,"`callback` is deprecated. Please return a promise instead."),o&&i.then((function(){r()})).catch((function(e){r(e||" ")}))}}):e}));if(!0===o)a=new Promise(function(){var e=mC(X_.mark((function e(n,o){var a,c;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<u.length)){e.next=11;break}return e.next=4,D8(l,t,u[a],r,i);case 4:if(!(c=e.sent).length){e.next=8;break}return o(c),e.abrupt("return");case 8:a+=1,e.next=1;break;case 11:n([]);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var c=u.map((function(e){return D8(l,t,e,r,i)}));a=(o?function(e){return F8.apply(this,arguments)}(c):function(e){return T8.apply(this,arguments)}(c)).then((function(e){return e.length?Promise.reject(e):[]}))}return a.catch((function(e){return e})),a}function T8(){return T8=mC(X_.mark((function e(t){return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,Vb(e))})));case 1:case"end":return e.stop()}}),e)}))),T8.apply(this,arguments)}function F8(){return F8=mC(X_.mark((function e(t){var n;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.length&&e(r),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)}))),F8.apply(this,arguments)}function N8(e,t,n,r,o,i){return"function"==typeof e?e(t,n,"source"in i?{source:i.source}:{}):r!==o}var V8=function(e){F_(n,e);var t=h4(n);function n(e){var r;(Ub(this,n),(r=t.call(this,e)).state={resetCount:0},r.cancelRegisterFunc=null,r.mounted=!1,r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=[],r.cancelRegister=function(){var e=r.props,t=e.preserve,n=e.isListField,o=e.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,t,m8(o)),r.cancelRegisterFunc=null},r.getNamePath=function(){var e=r.props,t=e.name,n=e.fieldContext.prefixName;return void 0!==t?[].concat(Vb(void 0===n?[]:n),Vb(t)):[]},r.getRules=function(){var e=r.props,t=e.rules,n=void 0===t?[]:t,o=e.fieldContext;return n.map((function(e){return"function"==typeof e?e(o):e}))},r.refresh=function(){r.mounted&&r.setState((function(e){return{resetCount:e.resetCount+1}}))},r.onStoreChange=function(e,t,n){var o=r.props,i=o.shouldUpdate,a=o.dependencies,l=void 0===a?[]:a,u=o.onReset,c=n.store,s=r.getNamePath(),d=r.getValue(e),f=r.getValue(c),p=t&&_8(t,s);switch("valueUpdate"===n.type&&"external"===n.source&&d!==f&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=[]),n.type){case"reset":if(!t||p)return r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=[],u&&u(),void r.refresh();break;case"setField":if(p){var h=n.data;return"touched"in h&&(r.touched=h.touched),"validating"in h&&!("originRCField"in h)&&(r.validatePromise=h.validating?Promise.resolve([]):null),"errors"in h&&(r.errors=h.errors||[]),r.dirty=!0,void r.reRender()}if(i&&!s.length&&N8(i,e,c,d,f,n))return void r.reRender();break;case"dependenciesUpdate":if(l.map(m8).some((function(e){return _8(n.relatedFields,e)})))return void r.reRender();break;default:if(p||(!l.length||s.length||i)&&N8(i,e,c,d,f,n))return void r.reRender()}!0===i&&r.reRender()},r.validateRules=function(e){var t=r.getNamePath(),n=r.getValue(),o=Promise.resolve().then((function(){if(!r.mounted)return[];var i=r.props,a=i.validateFirst,l=void 0!==a&&a,u=i.messageVariables,c=(e||{}).triggerName,s=r.getRules();c&&(s=s.filter((function(e){var t=e.validateTrigger;return!t||U4(t).includes(c)})));var d=M8(t,n,s,e,l,u);return d.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r.validatePromise===o&&(r.validatePromise=null,r.errors=e,r.reRender())})),d}));return r.validatePromise=o,r.dirty=!0,r.errors=[],r.reRender(),o},r.isFieldValidating=function(){return!!r.validatePromise},r.isFieldTouched=function(){return r.touched},r.isFieldDirty=function(){return r.dirty},r.getErrors=function(){return r.errors},r.isListField=function(){return r.props.isListField},r.isList=function(){return r.props.isList},r.isPreserve=function(){return r.props.preserve},r.getMeta=function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,name:r.getNamePath()}},r.getOnlyChild=function(e){if("function"==typeof e){var t=r.getMeta();return s4(s4({},r.getOnlyChild(e(r.getControlled(),t,r.props.fieldContext))),{},{isFunction:!0})}var n=M4(e);return 1===n.length&&a.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},r.getValue=function(e){var t=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return y8(e||t(!0),n)},r.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,n=t.trigger,o=t.validateTrigger,i=t.getValueFromEvent,a=t.normalize,l=t.valuePropName,u=t.getValueProps,c=t.fieldContext,s=void 0!==o?o:c.validateTrigger,d=r.getNamePath(),f=c.getInternalHooks,p=c.getFieldsValue,h=f(B4).dispatch,v=r.getValue(),g=u||function(e){return $b({},l,e)},m=e[n],y=s4(s4({},e),g(v));return y[n]=function(){r.touched=!0,r.dirty=!0;for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e=i?i.apply(void 0,n):S8.apply(void 0,[l].concat(n)),a&&(e=a(e,v,p(!0))),h({type:"updateValue",namePath:d,value:e}),m&&m.apply(void 0,n)},U4(s||[]).forEach((function(e){var t=y[e];y[e]=function(){t&&t.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&h({type:"validateField",namePath:d,triggerName:e})}})),y},e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(B4).initEntityValue)(A_(r));return r}return Wb(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(B4).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,r=this.getOnlyChild(n),o=r.child;return r.isFunction?e=o:a.isValidElement(o)?e=a.cloneElement(o,this.getControlled(o.props)):(L4(!o,"`children` of Field is not validate ReactElement."),e=o),a.createElement(a.Fragment,{key:t},e)}}]),n}(a.Component);function L8(e){var t=e.name,n=Y3(e,["name"]),r=a.useContext(z4),o=void 0!==t?m8(t):void 0,i="keep";return n.isListField||(i="_".concat((o||[]).join("_"))),a.createElement(V8,u4({key:i,name:o},n,{fieldContext:r}))}V8.contextType=z4,V8.defaultProps={trigger:"onChange",valuePropName:"value"};var B8="__@field_split__";function $8(e){return e.map((function(e){return"".concat(Lb(e),":").concat(e)})).join(B8)}var z8=function(){function e(){Ub(this,e),this.kvs=new Map}return Wb(e,[{key:"set",value:function(e,t){this.kvs.set($8(e),t)}},{key:"get",value:function(e){return this.kvs.get($8(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete($8(e))}},{key:"map",value:function(e){return Vb(this.kvs.entries()).map((function(t){var n=gP(t,2),r=n[0],o=n[1],i=r.split(B8);return e({key:i.map((function(e){var t=gP(e.match(/^([^:]*):(.*)$/),3),n=t[1],r=t[2];return"number"===n?Number(r):r})),value:o})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}(),U8=function e(t){var n=this;Ub(this,e),this.formHooked=!1,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===B4?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve}):(L4(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.setInitialValues=function(e,t){n.initialValues=e||{},t&&(n.store=E8({},e,n.store))},this.getInitialValue=function(e){return y8(n.initialValues,e)},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.timeoutId=null,this.warningUnhooked=function(){},this.getFieldEntities=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new z8;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=m8(e);return t.get(n)||{INVALIDATE_NAME_PATH:m8(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),o=[];return r.forEach((function(n){var r,i="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||null===(r=n.isListField)||void 0===r||!r.call(n))if(t){var a="getMeta"in n?n.getMeta():null;t(a)&&o.push(i)}else o.push(i)})),w8(n.store,o.map(m8))},this.getFieldValue=function(e){n.warningUnhooked();var t=m8(e);return y8(n.store,t)},this.getFieldsError=function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors()}:{name:m8(e[n]),errors:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=m8(e);return n.getFieldsError([t])[0].errors},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o,i=t[0],a=t[1],l=!1;0===t.length?o=null:1===t.length?Array.isArray(i)?(o=i.map(m8),l=!1):(o=null,l=i):(o=i.map(m8),l=a);var u=n.getFieldEntities(!0),c=function(e){return e.isFieldTouched()};if(!o)return l?u.every(c):u.some(c);var s=new z8;o.forEach((function(e){s.set(e,[])})),u.forEach((function(e){var t=e.getNamePath();o.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&s.update(n,(function(t){return[].concat(Vb(t),[e])}))}))}));var d=function(e){return e.some(c)},f=s.map((function(e){return e.value}));return l?f.every(d):f.some(d)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(m8);return t.some((function(e){var t=e.getNamePath();return _8(r,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new z8,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var o=t.get(r)||new Set;o.add({entity:e,value:n}),t.set(r,o)}}));var o;e.entities?o=e.entities:e.namePathList?(o=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=o).push.apply(n,Vb(Vb(r).map((function(e){return e.entity}))))}))):o=r,o.forEach((function(r){if(void 0!==r.props.initialValue){var o=r.getNamePath();if(void 0!==n.getInitialValue(o))L4(!1,"Form already set 'initialValues' with path '".concat(o.join("."),"'. Field can not overwrite it."));else{var i=t.get(o);if(i&&i.size>1)L4(!1,"Multiple Field with path '".concat(o.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(i){var a=n.getFieldValue(o);(!e.skipExist||void 0===a)&&(n.store=b8(n.store,o,Vb(i)[0].value))}}}}))},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.store=E8({},n.initialValues),n.resetWithFieldInitialValue(),void n.notifyObservers(t,null,{type:"reset"});var r=e.map(m8);r.forEach((function(e){var t=n.getInitialValue(e);n.store=b8(n.store,e,t)})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"})},this.setFields=function(e){n.warningUnhooked();var t=n.store;e.forEach((function(e){var r=e.name;e.errors;var o=Y3(e,["name","errors"]),i=m8(r);"value"in o&&(n.store=b8(n.store,i,o.value)),n.notifyObservers(t,[i],{type:"setField",data:e})}))},this.getFields=function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=s4(s4({},e.getMeta()),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(r,"originRCField",{value:!0}),r}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===y8(n.store,r)&&(n.store=b8(n.store,r,t))}},this.registerField=function(e){if(n.fieldEntities.push(e),void 0!==e.props.initialValue){var t=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(t,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e})),!1===(void 0!==r?r:n.preserve)&&(!t||o.length>1)){var i=e.getNamePath(),a=t?void 0:y8(n.initialValues,i);i.length&&n.getFieldValue(i)!==a&&n.fieldEntities.every((function(e){return!O8(e.getNamePath(),i)}))&&(n.store=b8(n.store,i,a,!0))}}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var o=e.namePath,i=e.triggerName;n.validateFields([o],{triggerName:i})}},this.notifyObservers=function(e,t,r){if(n.subscribable){var o=s4(s4({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,o)}))}else n.forceRootUpdate()},this.updateValue=function(e,t){var r=m8(e),o=n.store;n.store=b8(n.store,r,t),n.notifyObservers(o,[r],{type:"valueUpdate",source:"internal"});var i=n.getDependencyChildrenFields(r);i.length&&n.validateFields(i),n.notifyObservers(o,i,{type:"dependenciesUpdate",relatedFields:[r].concat(Vb(i))});var a=n.callbacks.onValuesChange;a&&a(w8(n.store,[r]),n.getFieldsValue());n.triggerOnFieldsChange([r].concat(Vb(i)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;e&&(n.store=E8(n.store,e)),n.notifyObservers(t,null,{type:"valueUpdate",source:"external"})},this.getDependencyChildrenFields=function(e){var t=new Set,r=[],o=new z8;n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=m8(t);o.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(n){(o.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var o=n.getNamePath();n.isFieldDirty()&&o.length&&(r.push(o),e(o))}}))}(e),r},this.triggerOnFieldsChange=function(e,t){var r=n.callbacks.onFieldsChange;if(r){var o=n.getFields();if(t){var i=new z8;t.forEach((function(e){var t=e.name,n=e.errors;i.set(t,n)})),o.forEach((function(e){e.errors=i.get(e.name)||e.errors}))}r(o.filter((function(t){var n=t.name;return _8(e,n)})),o)}},this.validateFields=function(e,t){n.warningUnhooked();var r=!!e,o=r?e.map(m8):[],i=[];n.getFieldEntities(!0).forEach((function(a){if(r||o.push(a.getNamePath()),null!=t&&t.recursive&&r){var l=a.getNamePath();l.every((function(t,n){return e[n]===t||void 0===e[n]}))&&o.push(l)}if(a.props.rules&&a.props.rules.length){var u=a.getNamePath();if(!r||_8(o,u)){var c=a.validateRules(s4({validateMessages:s4(s4({},I8),n.validateMessages)},t));i.push(c.then((function(){return{name:u,errors:[]}})).catch((function(e){return Promise.reject({name:u,errors:e})})))}}}));var a=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(o,i){e.forEach((function(e,a){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[a]=e,!(n>0)&&(t&&i(r),o(r))}))}))})):Promise.resolve([])}(i);n.lastValidatePromise=a,a.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var l=a.then((function(){return n.lastValidatePromise===a?Promise.resolve(n.getFieldsValue(o)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(o),errorFields:t,outOfDate:n.lastValidatePromise!==a})}));return l.catch((function(e){return e})),l},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(e){console.error(e)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t};function H8(e){var t=a.useRef(),n=gP(a.useState({}),2)[1];if(!t.current)if(e)t.current=e;else{var r=new U8((function(){n({})}));t.current=r.getForm()}return[t.current]}var q8=a.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),W8=function(e,t){var n=e.name,r=e.initialValues,o=e.fields,i=e.form,l=e.preserve,u=e.children,c=e.component,s=void 0===c?"form":c,d=e.validateMessages,f=e.validateTrigger,p=void 0===f?"onChange":f,h=e.onValuesChange,v=e.onFieldsChange,g=e.onFinish,m=e.onFinishFailed,y=Y3(e,["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"]),b=a.useContext(q8),w=gP(H8(i),1)[0],_=w.getInternalHooks(B4),k=_.useSubscribe,C=_.setInitialValues,E=_.setCallbacks,O=_.setValidateMessages,S=_.setPreserve;a.useImperativeHandle(t,(function(){return w})),a.useEffect((function(){return b.registerForm(n,w),function(){b.unregisterForm(n)}}),[b,w,n]),O(s4(s4({},b.validateMessages),d)),E({onValuesChange:h,onFieldsChange:function(e){if(b.triggerFormChange(n,e),v){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];v.apply(void 0,[e].concat(r))}},onFinish:function(e){b.triggerFormFinish(n,e),g&&g(e)},onFinishFailed:m}),S(l);var x=a.useRef(null);C(r,!x.current),x.current||(x.current=!0);var j=u,I="function"==typeof u;I&&(j=u(w.getFieldsValue(!0),w));k(!I);var R=a.useRef();a.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||"object"!==Lb(e)||"object"!==Lb(t))return!1;var n=Object.keys(e),r=Object.keys(t),o=new Set([].concat(Vb(n),Vb(r)));return Vb(o).every((function(n){var r=e[n],o=t[n];return"function"==typeof r&&"function"==typeof o||r===o}))})(R.current||[],o||[])||w.setFields(o||[]),R.current=o}),[o,w]);var A=a.useMemo((function(){return s4(s4({},w),{},{validateTrigger:p})}),[w,p]),D=a.createElement(z4.Provider,{value:A},j);return!1===s?D:a.createElement(s,u4({},y,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),w.submit()},onReset:function(e){var t;e.preventDefault(),w.resetFields(),null===(t=y.onReset)||void 0===t||t.call(y,e)}}),D)},G8=a.forwardRef(W8);G8.FormProvider=function(e){var t=e.validateMessages,n=e.onFormChange,r=e.onFormFinish,o=e.children,i=a.useContext(q8),l=a.useRef({});return a.createElement(q8.Provider,{value:s4(s4({},i),{},{validateMessages:s4(s4({},i.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:l.current}),i.triggerFormChange(e,t)},triggerFormFinish:function(e,t){r&&r(e,{values:t,forms:l.current}),i.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(l.current=s4(s4({},l.current),{},$b({},e,t))),i.registerForm(e,t)},unregisterForm:function(e){var t=s4({},l.current);delete t[e],l.current=t,i.unregisterForm(e)}})},o)},G8.Field=L8,G8.List=function(e){var t=e.name,n=e.initialValue,r=e.children,o=e.rules,i=e.validateTrigger,l=a.useContext(z4),u=a.useRef({keys:[],id:0}).current;if("function"!=typeof r)return L4(!1,"Form.List only accepts function as children."),null;var c=m8(l.prefixName)||[],s=[].concat(Vb(c),Vb(m8(t)));return a.createElement(z4.Provider,{value:s4(s4({},l),{},{prefixName:s})},a.createElement(L8,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:o,validateTrigger:i,initialValue:n,isList:!0},(function(e,t){var n=e.value,o=void 0===n?[]:n,i=e.onChange,a=l.getFieldValue,c=function(){return a(s||[])||[]},d={add:function(e,t){var n=c();t>=0&&t<=n.length?(u.keys=[].concat(Vb(u.keys.slice(0,t)),[u.id],Vb(u.keys.slice(t))),i([].concat(Vb(n.slice(0,t)),[e],Vb(n.slice(t))))):(u.keys=[].concat(Vb(u.keys),[u.id]),i([].concat(Vb(n),[e]))),u.id+=1},remove:function(e){var t=c(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(u.keys=u.keys.filter((function(e,t){return!n.has(t)})),i(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=c();e<0||e>=n.length||t<0||t>=n.length||(u.keys=x8(u.keys,e,t),i(x8(n,e,t)))}}},f=o||[];return Array.isArray(f)||(f=[]),r(f.map((function(e,t){var n=u.keys[t];return void 0===n&&(u.keys[t]=u.id,n=u.keys[t],u.id+=1),{name:t,key:n,isListField:!0}})),d,t)})))},G8.useForm=H8;const K8=function(e,t,n){L4(e,"[antd: ".concat(t,"] ").concat(n))};var Y8={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},X8={lang:u4({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),timePickerLocale:u4({},Y8)},J8="${label} is not a valid ${type}",Z8={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:X8,TimePicker:Y8,Calendar:X8,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:J8,method:J8,array:J8,object:J8,number:J8,date:J8,boolean:J8,integer:J8,float:J8,regexp:J8,email:J8,url:J8,hex:J8},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},Q8=Object(a.createContext)(void 0),e9=function(e){F_(n,e);var t=h4(n);function n(){return Ub(this,n),t.apply(this,arguments)}return Wb(n,[{key:"getLocale",value:function(){var e=this.props,t=e.componentName,n=e.defaultLocale||Z8[t||"global"],r=this.context,o=t&&r?r[t]:{};return u4(u4({},"function"==typeof n?n():n),o||{})}},{key:"getLocaleCode",value:function(){var e=this.context,t=e&&e.locale;return e&&e.exist&&!t?Z8.locale:t}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),n}(a.Component);e9.defaultProps={componentName:"global"},e9.contextType=Q8;var t9=function(){var e=(0,a.useContext(a9).getPrefixCls)("empty-img-default");return a.createElement("svg",{className:e,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("g",{transform:"translate(24 31.67)"},a.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),a.createElement("path",{className:"".concat(e,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),a.createElement("path",{className:"".concat(e,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"}),a.createElement("path",{className:"".concat(e,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),a.createElement("path",{className:"".concat(e,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})),a.createElement("path",{className:"".concat(e,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),a.createElement("g",{className:"".concat(e,"-g"),transform:"translate(149.65 15.383)"},a.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),a.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},n9=function(){var e=(0,a.useContext(a9).getPrefixCls)("empty-img-simple");return a.createElement("svg",{className:e,width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},a.createElement("ellipse",{className:"".concat(e,"-ellipse"),cx:"32",cy:"33",rx:"32",ry:"7"}),a.createElement("g",{className:"".concat(e,"-g"),fillRule:"nonzero"},a.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),a.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"".concat(e,"-path")}))))},r9=a.createElement(t9,null),o9=a.createElement(n9,null),i9=function(e){var t=e.className,n=e.prefixCls,r=e.image,o=void 0===r?r9:r,i=e.description,l=e.children,u=e.imageStyle,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["className","prefixCls","image","description","children","imageStyle"]),s=a.useContext(a9),d=s.getPrefixCls,f=s.direction;return a.createElement(e9,{componentName:"Empty"},(function(e){var r,s=d("empty",n),p=typeof i<"u"?i:e.description,h="string"==typeof p?p:"empty",v=null;return v="string"==typeof o?a.createElement("img",{alt:h,src:o}):o,a.createElement("div",u4({className:u$(s,(r={},$b(r,"".concat(s,"-normal"),o===o9),$b(r,"".concat(s,"-rtl"),"rtl"===f),r),t)},c),a.createElement("div",{className:"".concat(s,"-image"),style:u},v),p&&a.createElement("div",{className:"".concat(s,"-description")},p),l&&a.createElement("div",{className:"".concat(s,"-footer")},l))}))};i9.PRESENTED_IMAGE_DEFAULT=r9,i9.PRESENTED_IMAGE_SIMPLE=o9;var a9=a.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")},renderEmpty:function(e){return a.createElement(l9,null,(function(t){var n=(0,t.getPrefixCls)("empty");switch(e){case"Table":case"List":return a.createElement(i9,{image:i9.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return a.createElement(i9,{image:i9.PRESENTED_IMAGE_SIMPLE,className:"".concat(n,"-small")});default:return a.createElement(i9,null)}}))}}),l9=a9.Consumer,u9=a.createContext(void 0);function c9(e){return e instanceof HTMLElement||e instanceof SVGElement}function s9(e){var t,n=function(e){return e&&"object"===Lb(e)&&c9(e.nativeElement)?e.nativeElement:c9(e)?e:null}(e);return n||(e instanceof l.a.Component?null===(t=c.a.findDOMNode)||void 0===t?void 0:t.call(c.a,e):null)}var d9=function(e,t){"function"==typeof e?e(t):"object"===Lb(e)&&e&&"current"in e&&(e.current=t)},f9=function(e){var t,n,r=P4.isMemo(e)?e.type.type:e.type;return!("function"==typeof r&&(null===(t=r.prototype)||void 0===t||!t.render)&&r.$$typeof!==P4.ForwardRef||"function"==typeof e&&(null===(n=e.prototype)||void 0===n||!n.render)&&e.$$typeof!==P4.ForwardRef)},p9=a.createContext({}),h9=function(e){F_(n,e);var t=h4(n);function n(){return Ub(this,n),t.apply(this,arguments)}return Wb(n,[{key:"render",value:function(){return this.props.children}}]),n}(a.Component);function v9(e){var t=a.useRef(!1),n=gP(a.useState(e),2),r=n[0],o=n[1];return a.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[r,function(e,n){n&&t.current||o(e)}]}var g9="none",m9="appear",y9="enter",b9="leave",w9="none",_9="prepare",k9="start",C9="active",E9="end",O9="prepared";function S9(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function x9(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var j9=function(e,t){var n={animationend:x9("Animation","AnimationEnd"),transitionend:x9("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(S9(),typeof window<"u"?window:{}),I9={};if(S9()){var R9=document.createElement("div");I9=R9.style}var A9={};function D9(e){if(A9[e])return A9[e];var t=j9[e];if(t)for(var n=Object.keys(t),r=n.length,o=0;o<r;o+=1){var i=n[o];if(Object.prototype.hasOwnProperty.call(t,i)&&i in I9)return A9[e]=t[i],A9[e]}return""}var P9=D9("animationend"),M9=D9("transitionend"),T9=!(!P9||!M9),F9=P9||"animationend",N9=M9||"transitionend";function V9(e,t){if(!e)return null;if("object"===Lb(e)){var n=t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));return e[n]}return"".concat(e,"-").concat(t)}const L9=function(e){var t=Object(a.useRef)();function n(t){t&&(t.removeEventListener(N9,e),t.removeEventListener(F9,e))}return a.useEffect((function(){return function(){n(t.current)}}),[]),[function(r){t.current&&t.current!==r&&n(t.current),r&&r!==t.current&&(r.addEventListener(N9,e),r.addEventListener(F9,e),t.current=r)},n]};var B9=S9()?a.useLayoutEffect:a.useEffect,$9=function(e){return+setTimeout(e,16)},z9=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&($9=function(e){return window.requestAnimationFrame(e)},z9=function(e){return window.cancelAnimationFrame(e)});var U9=0,H9=new Map;function q9(e){H9.delete(e)}var W9=function(e){var t=U9+=1;return function n(r){if(0===r)q9(t),e();else{var o=$9((function(){n(r-1)}));H9.set(t,o)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};W9.cancel=function(e){var t=H9.get(e);return q9(e),z9(t)};var G9=[_9,k9,C9,E9],K9=[_9,O9],Y9=!1,X9=!0;function J9(e){return e===C9||e===E9}const Z9=function(e,t,n){var r=gP(v9(w9),2),o=r[0],i=r[1],l=function(){var e=a.useRef(null);function t(){W9.cancel(e.current)}return a.useEffect((function(){return function(){t()}}),[]),[function n(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var i=W9((function(){o<=1?r({isCanceled:function(){return i!==e.current}}):n(r,o-1)}));e.current=i},t]}(),u=gP(l,2),c=u[0],s=u[1];var d=t?K9:G9;return B9((function(){if(o!==w9&&o!==E9){var e=d.indexOf(o),t=d[e+1],r=n(o);r===Y9?i(t,!0):t&&c((function(e){function n(){e.isCanceled()||i(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,o]),a.useEffect((function(){return function(){s()}}),[]),[function(){i(_9,!0)},o]};const Q9=function(e){var t=e;"object"===Lb(e)&&(t=e.transitionSupport);var n=a.forwardRef((function(e,n){var r=e.visible,o=void 0===r||r,i=e.removeOnLeave,l=void 0===i||i,u=e.forceRender,c=e.children,s=e.motionName,d=e.leavedClassName,f=e.eventProps,p=function(e,n){return!(!e.motionName||!t||!1===n)}(e,a.useContext(p9).motion),h=Object(a.useRef)(),v=Object(a.useRef)();var g=function(e,t,n,r){var o=r.motionEnter,i=void 0===o||o,l=r.motionAppear,u=void 0===l||l,c=r.motionLeave,s=void 0===c||c,d=r.motionDeadline,f=r.motionLeaveImmediately,p=r.onAppearPrepare,h=r.onEnterPrepare,v=r.onLeavePrepare,g=r.onAppearStart,m=r.onEnterStart,y=r.onLeaveStart,b=r.onAppearActive,w=r.onEnterActive,_=r.onLeaveActive,k=r.onAppearEnd,C=r.onEnterEnd,E=r.onLeaveEnd,O=r.onVisibleChanged,S=gP(v9(),2),x=S[0],j=S[1],I=gP(v9(g9),2),R=I[0],A=I[1],D=gP(v9(null),2),P=D[0],M=D[1],T=Object(a.useRef)(!1),F=Object(a.useRef)(null);function N(){return n()}var V=Object(a.useRef)(!1);function L(){A(g9,!0),M(null,!0)}var B=lH((function(e){if(R!==g9){var t=N();if(!e||e.deadline||e.target===t){var n,r=V.current;R===m9&&r?n=null==k?void 0:k(t,e):R===y9&&r?n=null==C?void 0:C(t,e):R===b9&&r&&(n=null==E?void 0:E(t,e)),r&&!1!==n&&L()}}})),$=gP(L9(B),1)[0],z=function(e){switch(e){case m9:return $b($b($b({},_9,p),k9,g),C9,b);case y9:return $b($b($b({},_9,h),k9,m),C9,w);case b9:return $b($b($b({},_9,v),k9,y),C9,_);default:return{}}},U=a.useMemo((function(){return z(R)}),[R]),H=gP(Z9(R,!e,(function(e){if(e===_9){var t=U[_9];return t?t(N()):Y9}var n;return W in U&&M((null===(n=U[W])||void 0===n?void 0:n.call(U,N(),null))||null),W===C9&&R!==g9&&($(N()),d>0&&(clearTimeout(F.current),F.current=setTimeout((function(){B({deadline:!0})}),d))),W===O9&&L(),X9})),2),q=H[0],W=H[1],G=J9(W);V.current=G,B9((function(){j(t);var n,r=T.current;T.current=!0,!r&&t&&u&&(n=m9),r&&t&&i&&(n=y9),(r&&!t&&s||!r&&f&&!t&&s)&&(n=b9);var o=z(n);n&&(e||o[_9])?(A(n),q()):A(g9)}),[t]),Object(a.useEffect)((function(){(R===m9&&!u||R===y9&&!i||R===b9&&!s)&&A(g9)}),[u,i,s]),Object(a.useEffect)((function(){return function(){T.current=!1,clearTimeout(F.current)}}),[]);var K=a.useRef(!1);Object(a.useEffect)((function(){x&&(K.current=!0),void 0!==x&&R===g9&&((K.current||x)&&(null==O||O(x)),K.current=!0)}),[x,R]);var Y=P;return U[_9]&&W===k9&&(Y=s4({transition:"none"},Y)),[R,W,Y,null!=x?x:t]}(p,o,(function(){try{return h.current instanceof HTMLElement?h.current:s9(v.current)}catch{return null}}),e),m=gP(g,4),y=m[0],b=m[1],w=m[2],_=m[3],k=a.useRef(_);_&&(k.current=!0);var C,E=a.useCallback((function(e){h.current=e,d9(n,e)}),[n]),O=s4(s4({},f),{},{visible:o});if(c)if(y===g9)C=_?c(s4({},O),E):!l&&k.current&&d?c(s4(s4({},O),{},{className:d}),E):u||!l&&!d?c(s4(s4({},O),{},{style:{display:"none"}}),E):null;else{var S;b===_9?S="prepare":J9(b)?S="active":b===k9&&(S="start");var x=V9(s,"".concat(y,"-").concat(S));C=c(s4(s4({},O),{},{className:u$(V9(s,y),$b($b({},x,x&&S),s,"string"==typeof s)),style:w}),E)}else C=null;a.isValidElement(C)&&f9(C)&&(C.ref||(C=a.cloneElement(C,{ref:E})));return a.createElement(h9,{ref:v},C)}));return n.displayName="CSSMotion",n}(T9);var e7="add",t7="keep",n7="remove",r7="removed";function o7(e){var t;return s4(s4({},t=e&&"object"===Lb(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function i7(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(o7)}var a7=["component","children","onVisibleChanged","onAllRemoved"],l7=["status"],u7=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q9,n=function(e){F_(r,e);var n=h4(r);function r(){var e;Ub(this,r);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return $b(A_(e=n.call.apply(n,[this].concat(o))),"state",{keyEntities:[]}),$b(A_(e),"removeKey",(function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:s4(s4({},e),{},{status:r7})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==r7})).length})),e}return Wb(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,o=r.component,i=r.children,l=r.onVisibleChanged,u=r.onAllRemoved,c=Y3(r,a7),s=o||a.Fragment,d={};return u7.forEach((function(e){d[e]=c[e],delete c[e]})),delete c.keys,a.createElement(s,c,n.map((function(n,r){var o=n.status,c=Y3(n,l7),s=o===e7||o===t7;return a.createElement(t,u4({},d,{key:c.key,visible:s,eventProps:c,onVisibleChanged:function(t){(null==l||l(t,{key:c.key}),t)||0===e.removeKey(c.key)&&u&&u()}}),(function(e,t){return i(s4(s4({},e),{},{index:r}),t)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,o=i7(n),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,o=t.length,i=i7(e),a=i7(t);i.forEach((function(e){for(var t=!1,i=r;i<o;i+=1){var l=a[i];if(l.key===e.key){r<i&&(n=n.concat(a.slice(r,i).map((function(e){return s4(s4({},e),{},{status:e7})}))),r=i),n.push(s4(s4({},l),{},{status:t7})),r+=1,t=!0;break}}t||n.push(s4(s4({},e),{},{status:n7}))})),r<o&&(n=n.concat(a.slice(r).map((function(e){return s4(s4({},e),{},{status:e7})}))));var l={};return n.forEach((function(e){var t=e.key;l[t]=(l[t]||0)+1})),Object.keys(l).filter((function(e){return l[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==n7}))).forEach((function(t){t.key===e&&(t.status=t7)}))})),n}(r,o);return{keyEntities:i.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!(t&&t.status===r7&&e.status===n7)}))}}}]),r}(a.Component);$b(n,"defaultProps",{component:"div"})}(T9);var c7={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};function s7(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function d7(e){return e<=1?"".concat(100*Number(e),"%"):e}function f7(e){return 1===e.length?"0"+e:String(e)}function p7(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function h7(e){return v7(e)/255}function v7(e){return parseInt(e,16)}var g7={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function m7(e){var t={r:0,g:0,b:0},n=1,r=null,o=null,i=null,a=!1,l=!1;return"string"==typeof e&&(e=function(e){if(e=e.trim().toLowerCase(),0===e.length)return!1;var t=!1;if(g7[e])e=g7[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=_7.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=_7.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=_7.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=_7.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=_7.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=_7.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=_7.hex8.exec(e),n?{r:v7(n[1]),g:v7(n[2]),b:v7(n[3]),a:h7(n[4]),format:t?"name":"hex8"}:(n=_7.hex6.exec(e),n?{r:v7(n[1]),g:v7(n[2]),b:v7(n[3]),format:t?"name":"hex"}:(n=_7.hex4.exec(e),n?{r:v7(n[1]+n[1]),g:v7(n[2]+n[2]),b:v7(n[3]+n[3]),a:h7(n[4]+n[4]),format:t?"name":"hex8"}:(n=_7.hex3.exec(e),!!n&&{r:v7(n[1]+n[1]),g:v7(n[2]+n[2]),b:v7(n[3]+n[3]),format:t?"name":"hex"})))))))))}(e)),"object"===Lb(e)&&(k7(e.r)&&k7(e.g)&&k7(e.b)?(t=function(e,t,n){return{r:255*s7(e,255),g:255*s7(t,255),b:255*s7(n,255)}}(e.r,e.g,e.b),a=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):k7(e.h)&&k7(e.s)&&k7(e.v)?(r=d7(e.s),o=d7(e.v),t=function(e,t,n){e=6*s7(e,360),t=s7(t,100),n=s7(n,100);var r=Math.floor(e),o=e-r,i=n*(1-t),a=n*(1-o*t),l=n*(1-(1-o)*t),u=r%6;return{r:255*[n,a,i,i,l,n][u],g:255*[l,n,n,a,i,i][u],b:255*[i,i,l,n,n,a][u]}}(e.h,r,o),a=!0,l="hsv"):k7(e.h)&&k7(e.s)&&k7(e.l)&&(r=d7(e.s),i=d7(e.l),t=function(e,t,n){var r,o,i;if(e=s7(e,360),t=s7(t,100),n=s7(n,100),0===t)o=n,i=n,r=n;else{var a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;r=p7(l,a,e+1/3),o=p7(l,a,e),i=p7(l,a,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,r,i),a=!0,l="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(n),{ok:a,format:e.format||l,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var y7="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),b7="[\\s|\\(]+(".concat(y7,")[,|\\s]+(").concat(y7,")[,|\\s]+(").concat(y7,")\\s*\\)?"),w7="[\\s|\\(]+(".concat(y7,")[,|\\s]+(").concat(y7,")[,|\\s]+(").concat(y7,")[,|\\s]+(").concat(y7,")\\s*\\)?"),_7={CSS_UNIT:new RegExp(y7),rgb:new RegExp("rgb"+b7),rgba:new RegExp("rgba"+w7),hsl:new RegExp("hsl"+b7),hsla:new RegExp("hsla"+w7),hsv:new RegExp("hsv"+b7),hsva:new RegExp("hsva"+w7),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function k7(e){return!!_7.CSS_UNIT.exec(String(e))}var C7=2,E7=.16,O7=.05,S7=.05,x7=.15,j7=5,I7=4,R7=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function A7(e){var t=function(e,t,n){e=s7(e,255),t=s7(t,255),n=s7(n,255);var r=Math.max(e,t,n),o=Math.min(e,t,n),i=0,a=r,l=r-o,u=0===r?0:l/r;if(r===o)i=0;else{switch(r){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:u,v:a}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function D7(e){var t=e.r,n=e.g,r=e.b;return"#".concat(function(e,t,n,r){return[f7(Math.round(e).toString(16)),f7(Math.round(t).toString(16)),f7(Math.round(n).toString(16))].join("")}(t,n,r))}function P7(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-C7*t:Math.round(e.h)+C7*t:n?Math.round(e.h)+C7*t:Math.round(e.h)-C7*t)<0?r+=360:r>=360&&(r-=360),r}function M7(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-E7*t:t===I7?e.s+E7:e.s+O7*t)>1&&(r=1),n&&t===j7&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function T7(e,t,n){var r;return(r=n?e.v+S7*t:e.v-x7*t)>1&&(r=1),Number(r.toFixed(2))}function F7(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=m7(e),o=j7;o>0;o-=1){var i=A7(r),a=D7(m7({h:P7(i,o,!0),s:M7(i,o,!0),v:T7(i,o,!0)}));n.push(a)}n.push(D7(r));for(var l=1;l<=I7;l+=1){var u=A7(r),c=D7(m7({h:P7(u,l),s:M7(u,l),v:T7(u,l)}));n.push(c)}return"dark"===t.theme?R7.map((function(e){var r=e.index,o=e.opacity,i=D7(function(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}(m7(t.backgroundColor||"#141414"),m7(n[r]),100*o));return i})):n}var N7={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},V7={},L7={};Object.keys(N7).forEach((function(e){V7[e]=F7(N7[e]),V7[e].primary=V7[e][5],L7[e]=F7(N7[e],{theme:"dark",backgroundColor:"#141414"}),L7[e].primary=L7[e][5]}));var B7="data-rc-order",$7="data-rc-priority",z7="rc-util-key",U7=new Map;function H7(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):z7}function q7(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function W7(e){return Array.from((U7.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function G7(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!S9())return null;var n=t.csp,r=t.prepend,o=t.priority,i=void 0===o?0:o,a=function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r),l="prependQueue"===a,u=document.createElement("style");u.setAttribute(B7,a),l&&i&&u.setAttribute($7,"".concat(i)),null!=n&&n.nonce&&(u.nonce=null==n?void 0:n.nonce),u.innerHTML=e;var c=q7(t),s=c.firstChild;if(r){if(l){var d=(t.styles||W7(c)).filter((function(e){if(!["prepend","prependQueue"].includes(e.getAttribute(B7)))return!1;var t=Number(e.getAttribute($7)||0);return i>=t}));if(d.length)return c.insertBefore(u,d[d.length-1].nextSibling),u}c.insertBefore(u,s)}else c.appendChild(u);return u}function K7(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=q7(n),o=W7(r),i=s4(s4({},n),{},{styles:o});!function(e,t){var n=U7.get(e);if(!n||!function(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}(document,n)){var r=G7("",t),o=r.parentNode;U7.set(e,o),e.removeChild(r)}}(r,i);var a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=q7(t);return(t.styles||W7(n)).find((function(n){return n.getAttribute(H7(t))===e}))}(t,i);if(a){var l,u,c;if(null!==(l=i.csp)&&void 0!==l&&l.nonce&&a.nonce!==(null===(u=i.csp)||void 0===u?void 0:u.nonce))a.nonce=null===(c=i.csp)||void 0===c?void 0:c.nonce;return a.innerHTML!==e&&(a.innerHTML=e),a}var s=G7(e,i);return s.setAttribute(H7(i),t),s}var Y7="object"==Lb(kw)&&kw&&kw.Object===Object&&kw,X7="object"==(typeof self>"u"?"undefined":Lb(self))&&self&&self.Object===Object&&self,J7=(Y7||X7||Function("return this")()).Symbol;var Z7=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},Q7=Array.isArray,eee=J7,tee=Object.prototype,nee=tee.hasOwnProperty,ree=tee.toString,oee=eee?eee.toStringTag:void 0;var iee=function(e){var t=nee.call(e,oee),n=e[oee];try{e[oee]=void 0;var r=!0}catch{}var o=ree.call(e);return r&&(t?e[oee]=n:delete e[oee]),o},aee=Object.prototype.toString;var lee=function(e){return aee.call(e)},uee=iee,cee=lee,see=J7?J7.toStringTag:void 0;var dee=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":see&&see in Object(e)?uee(e):cee(e)};var fee=function(e){return null!=e&&"object"==Lb(e)},pee=dee,hee=fee;var vee=function(e){return"symbol"==Lb(e)||hee(e)&&"[object Symbol]"==pee(e)},gee=Z7,mee=Q7,yee=vee,bee=J7?J7.prototype:void 0,wee=bee?bee.toString:void 0;var _ee=function e(t){if("string"==typeof t)return t;if(mee(t))return gee(t,e)+"";if(yee(t))return wee?wee.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n},kee=_ee;var Cee=function(e){return null==e?"":kee(e)};var Eee=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i},Oee=Eee;var See=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Oee(e,t,n)},xee=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var jee=function(e){return xee.test(e)};var Iee=function(e){return e.split("")},Ree="\\ud800-\\udfff",Aee="["+Ree+"]",Dee="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Pee="\\ud83c[\\udffb-\\udfff]",Mee="[^"+Ree+"]",Tee="(?:\\ud83c[\\udde6-\\uddff]){2}",Fee="[\\ud800-\\udbff][\\udc00-\\udfff]",Nee="(?:"+Dee+"|"+Pee+")"+"?",Vee="[\\ufe0e\\ufe0f]?",Lee=Vee+Nee+("(?:\\u200d(?:"+[Mee,Tee,Fee].join("|")+")"+Vee+Nee+")*"),Bee="(?:"+[Mee+Dee+"?",Dee,Tee,Fee,Aee].join("|")+")",$ee=RegExp(Pee+"(?="+Pee+")|"+Bee+Lee,"g");var zee=function(e){return e.match($ee)||[]},Uee=Iee,Hee=jee,qee=zee;var Wee=function(e){return Hee(e)?qee(e):Uee(e)},Gee=See,Kee=jee,Yee=Wee,Xee=Cee;var Jee=function(e){return function(t){t=Xee(t);var n=Kee(t)?Yee(t):void 0,r=n?n[0]:t.charAt(0),o=n?Gee(n,1).join(""):t.slice(1);return r[e]()+o}},Zee=Jee("toUpperCase"),Qee=Cee,ete=Zee;var tte=function(e){return ete(Qee(e).toLowerCase())};var nte=function(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n};var rte=function(e){return function(t){return null==e?void 0:e[t]}},ote=rte({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ite=Cee,ate=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lte=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var ute=function(e){return(e=ite(e))&&e.replace(ate,ote).replace(lte,"")},cte=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var ste=function(e){return e.match(cte)||[]},dte=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var fte=function(e){return dte.test(e)},pte="\\ud800-\\udfff",hte="\\u2700-\\u27bf",vte="a-z\\xdf-\\xf6\\xf8-\\xff",gte="A-Z\\xc0-\\xd6\\xd8-\\xde",mte="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yte="["+mte+"]",bte="\\d+",wte="["+hte+"]",_te="["+vte+"]",kte="[^"+pte+mte+bte+hte+vte+gte+"]",Cte="(?:\\ud83c[\\udde6-\\uddff]){2}",Ete="[\\ud800-\\udbff][\\udc00-\\udfff]",Ote="["+gte+"]",Ste="(?:"+_te+"|"+kte+")",xte="(?:"+Ote+"|"+kte+")",jte="(?:['’](?:d|ll|m|re|s|t|ve))?",Ite="(?:['’](?:D|LL|M|RE|S|T|VE))?",Rte="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Ate="[\\ufe0e\\ufe0f]?",Dte=Ate+Rte+("(?:\\u200d(?:"+["[^"+pte+"]",Cte,Ete].join("|")+")"+Ate+Rte+")*"),Pte="(?:"+[wte,Cte,Ete].join("|")+")"+Dte,Mte=RegExp([Ote+"?"+_te+"+"+jte+"(?="+[yte,Ote,"$"].join("|")+")",xte+"+"+Ite+"(?="+[yte,Ote+Ste,"$"].join("|")+")",Ote+"?"+Ste+"+"+jte,Ote+"+"+Ite,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bte,Pte].join("|"),"g");var Tte=function(e){return e.match(Mte)||[]},Fte=ste,Nte=fte,Vte=Cee,Lte=Tte;var Bte=function(e,t,n){return e=Vte(e),void 0===(t=n?void 0:t)?Nte(e)?Lte(e):Fte(e):e.match(t)||[]},$te=nte,zte=ute,Ute=Bte,Hte=RegExp("['’]","g");var qte=function(e){return function(t){return $te(Ute(zte(t).replace(Hte,"")),e,"")}},Wte=tte,Gte=qte((function(e,t,n){return t=t.toLowerCase(),e+(n?Wte(t):t)}));const Kte=Cw(Gte);function Yte(e){return"object"===Lb(e)&&"string"==typeof e.name&&"string"==typeof e.theme&&("object"===Lb(e.icon)||"function"==typeof e.icon)}function Xte(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else delete t[n],t[Kte(n)]=r;return t}),{})}function Jte(e,t,n){return n?l.a.createElement(e.tag,s4(s4({key:t},Xte(e.attrs)),n),(e.children||[]).map((function(n,r){return Jte(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):l.a.createElement(e.tag,s4({key:t},Xte(e.attrs)),(e.children||[]).map((function(n,r){return Jte(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function Zte(e){return F7(e)[0]}function Qte(e){return e?Array.isArray(e)?e:[e]:[]}var ene=["icon","className","onClick","style","primaryColor","secondaryColor"],tne={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var nne=function(e){var t=e.icon,n=e.className,r=e.onClick,o=e.style,i=e.primaryColor,l=e.secondaryColor,u=Y3(e,ene),c=tne;if(i&&(c={primaryColor:i,secondaryColor:l||Zte(i)}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n.anticon {\n  display: inline-flex;\n  alignItems: center;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",t=Object(a.useContext)(f4).csp;Object(a.useEffect)((function(){K7(e,"@ant-design-icons",{prepend:!0,csp:t})}),[])}(),function(e,t){L4(e,"[@ant-design/icons] ".concat(t))}(Yte(t),"icon should be icon definiton, but got ".concat(t)),!Yte(t))return null;var s=t;return s&&"function"==typeof s.icon&&(s=s4(s4({},s),{},{icon:s.icon(c.primaryColor,c.secondaryColor)})),Jte(s.icon,"svg-".concat(s.name),s4({className:n,onClick:r,style:o,"data-icon":s.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},u))};function rne(e){var t=gP(Qte(e),2),n=t[0],r=t[1];return nne.setTwoToneColors({primaryColor:n,secondaryColor:r})}nne.displayName="IconReact",nne.getTwoToneColors=function(){return s4({},tne)},nne.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;tne.primaryColor=t,tne.secondaryColor=n||Zte(t),tne.calculated=!!n};var one=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];rne("#1890ff");var ine=a.forwardRef((function(e,t){var n=e.className,r=e.icon,o=e.spin,i=e.rotate,l=e.tabIndex,u=e.onClick,c=e.twoToneColor,s=Y3(e,one),d=a.useContext(f4),f=d.prefixCls,p=void 0===f?"anticon":f,h=d.rootClassName,v=u$(h,p,$b($b({},"".concat(p,"-").concat(r.name),!!r.name),"".concat(p,"-spin"),!!o||"loading"===r.name),n),g=l;void 0===g&&u&&(g=-1);var m=i?{msTransform:"rotate(".concat(i,"deg)"),transform:"rotate(".concat(i,"deg)")}:void 0,y=gP(Qte(c),2),b=y[0],w=y[1];return a.createElement("span",s4(s4({role:"img","aria-label":r.name},s),{},{ref:t,tabIndex:g,onClick:u,className:v}),a.createElement(nne,{icon:r,primaryColor:b,secondaryColor:w,style:m}))}));ine.displayName="AntdIcon",ine.getTwoToneColor=function(){var e=nne.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},ine.setTwoToneColor=rne;var ane=function(e,t){return a.createElement(ine,s4(s4({},e),{},{ref:t,icon:c7}))},lne=a.forwardRef(ane),une={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},cne=function(e,t){return a.createElement(ine,s4(s4({},e),{},{ref:t,icon:une}))},sne=a.forwardRef(cne),dne={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},fne=function(e,t){return a.createElement(ine,s4(s4({},e),{},{ref:t,icon:dne}))},pne=a.forwardRef(fne),hne=function e(t){return Ub(this,e),new Error("unreachable case: ".concat(JSON.stringify(t)))},vne=0,gne={};function mne(e){var t=vne++,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return gne[t]=W9((function r(){(n-=1)<=0?(e(),delete gne[t]):gne[t]=W9(r)})),t}mne.cancel=function(e){void 0!==e&&(W9.cancel(gne[e]),delete gne[e])},mne.ids=gne;var yne,bne=a.isValidElement;function wne(e,t){return function(e,t,n){return bne(e)?a.cloneElement(e,"function"==typeof n?n(e.props||{}):n):t}(e,e,t)}function _ne(e){return!e||null===e.offsetParent||e.hidden}var kne=function(e){F_(n,e);var t=h4(n);function n(){var e;return Ub(this,n),(e=t.apply(this,arguments)).containerRef=a.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,n){var r,o;if(!(!t||_ne(t)||t.className.indexOf("-leave")>=0)){var i=e.props.insertExtraNode;e.extraNode=document.createElement("div");var a=A_(e).extraNode,l=e.context.getPrefixCls;a.className="".concat(l(""),"-click-animating-node");var u=e.getAttributeName();if(t.setAttribute(u,"true"),n&&"#ffffff"!==n&&"rgb(255, 255, 255)"!==n&&function(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(t&&t[1]&&t[2]&&t[3]&&t[1]===t[2]&&t[2]===t[3])}(n)&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&"transparent"!==n){a.style.borderColor=n;var c=(null===(r=t.getRootNode)||void 0===r?void 0:r.call(t))||t.ownerDocument,s=c instanceof Document?c.body:null!==(o=c.firstChild)&&void 0!==o?o:c;yne=K7("\n      [".concat(l(""),"-click-animating-without-extra-node='true']::after, .").concat(l(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(n,";\n      }"),"antd-wave",{csp:e.csp,attachTo:s})}i&&t.appendChild(a),["transition","animation"].forEach((function(n){t.addEventListener("".concat(n,"start"),e.onTransitionStart),t.addEventListener("".concat(n,"end"),e.onTransitionEnd)}))}},e.onTransitionStart=function(t){if(!e.destroyed){var n=e.containerRef.current;!t||t.target!==n||e.animationStart||e.resetEffect(n)}},e.onTransitionEnd=function(t){!t||"fadeEffect"!==t.animationName||e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var n=function(n){if("INPUT"!==n.target.tagName&&!_ne(n.target)){e.resetEffect(t);var r=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout((function(){return e.onClick(t,r)}),0),mne.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=mne((function(){e.animationStart=!1}),10)}};return t.addEventListener("click",n,!0),{cancel:function(){t.removeEventListener("click",n,!0)}}}},e.renderWave=function(t){var n=t.csp,r=e.props.children;if(e.csp=n,!a.isValidElement(r))return r;var o=e.containerRef;return f9(r)&&(o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(e){t.forEach((function(t){d9(t,e)}))}}(r.ref,e.containerRef)),wne(r,{ref:o})},e}return Wb(n,[{key:"componentDidMount",value:function(){var e=this.containerRef.current;!e||1!==e.nodeType||(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,t=this.props.insertExtraNode;return"".concat(e(""),t?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var t=this;if(e&&e!==this.extraNode&&e instanceof Element){var n=this.props.insertExtraNode,r=this.getAttributeName();e.setAttribute(r,"false"),yne&&(yne.innerHTML=""),n&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach((function(n){e.removeEventListener("".concat(n,"start"),t.onTransitionStart),e.removeEventListener("".concat(n,"end"),t.onTransitionEnd)}))}}},{key:"render",value:function(){return a.createElement(l9,null,this.renderWave)}}]),n}(a.Component);kne.contextType=a9;var Cne=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},Ene=function(){return{width:0,opacity:0,transform:"scale(0)"}},One=function(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}},Sne=function(e){var t=e.prefixCls,n=!!e.loading;return e.existIcon?l.a.createElement("span",{className:"".concat(t,"-loading-icon")},l.a.createElement(lne,null)):l.a.createElement(Q9,{visible:n,motionName:"".concat(t,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:Ene,onAppearActive:One,onEnterStart:Ene,onEnterActive:One,onLeaveStart:One,onLeaveActive:Ene},(function(e,n){var r=e.className,o=e.style;return l.a.createElement("span",{className:"".concat(t,"-loading-icon"),style:o,ref:n},l.a.createElement(lne,{className:r}))}))},xne=/^[\u4e00-\u9fa5]{2}$/,jne=xne.test.bind(xne);function Ine(e){return"text"===e||"link"===e}function Rne(e,t){var n=!1,r=[];return a.Children.forEach(e,(function(e){var t=Lb(e),o="string"===t||"number"===t;if(n&&o){var i=r.length-1,a=r[i];r[i]="".concat(a).concat(e)}else r.push(e);n=o})),a.Children.map(r,(function(e){return function(e,t){if(null!=e){var n=t?" ":"";return"string"!=typeof e&&"number"!=typeof e&&function(e){return"string"==typeof e}(e.type)&&jne(e.props.children)?wne(e,{children:e.props.children.split("").join(n)}):"string"==typeof e?(jne(e)&&(e=e.split("").join(n)),a.createElement("span",null,e)):e}}(e,t)}))}Cne("default","primary","ghost","dashed","link","text"),Cne("circle","round"),Cne("submit","button","reset");var Ane=function(e,t){var n,r,o=e.loading,i=void 0!==o&&o,l=e.prefixCls,u=e.type,c=e.danger,s=e.shape,d=e.size,f=e.className,p=e.children,h=e.icon,v=e.ghost,g=void 0!==v&&v,m=e.block,y=void 0!==m&&m,b=e.htmlType,w=void 0===b?"button":b,_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["loading","prefixCls","type","danger","shape","size","className","children","icon","ghost","block","htmlType"]),k=a.useContext(u9),C=gP(a.useState(!!i),2),E=C[0],O=C[1],S=gP(a.useState(!1),2),x=S[0],j=S[1],I=a.useContext(a9),R=I.getPrefixCls,A=I.autoInsertSpaceInButton,D=I.direction,P=t||a.createRef(),M=a.useRef(),T=function(){return 1===a.Children.count(p)&&!h&&!Ine(u)};r="object"===Lb(i)&&i.delay?i.delay||!0:!!i,a.useEffect((function(){clearTimeout(M.current),"number"==typeof r?M.current=window.setTimeout((function(){O(r)}),r):O(r)}),[r]),a.useEffect((function(){if(P&&P.current&&!1!==A){var e=P.current.textContent;T()&&jne(e)?x||j(!0):x&&j(!1)}}),[P]);var F=function(t){var n,r=e.onClick,o=e.disabled;E||o?t.preventDefault():null===(n=r)||void 0===n||n(t)};K8(!("string"==typeof h&&h.length>2),"Button","`icon` is using ReactNode instead of string naming in v4. Please check `".concat(h,"` at https://ant.design/components/icon")),K8(!(g&&Ine(u)),"Button","`link` or `text` button can't be a `ghost` button.");var N=R("btn",l),V=!1!==A,L="";switch(d||k){case"large":L="lg";break;case"small":L="sm"}var B=E?"loading":h,$=u$(N,($b(n={},"".concat(N,"-").concat(u),u),$b(n,"".concat(N,"-").concat(s),s),$b(n,"".concat(N,"-").concat(L),L),$b(n,"".concat(N,"-icon-only"),!p&&0!==p&&!!B),$b(n,"".concat(N,"-background-ghost"),g&&!Ine(u)),$b(n,"".concat(N,"-loading"),E),$b(n,"".concat(N,"-two-chinese-chars"),x&&V),$b(n,"".concat(N,"-block"),y),$b(n,"".concat(N,"-dangerous"),!!c),$b(n,"".concat(N,"-rtl"),"rtl"===D),n),f),z=h&&!E?h:a.createElement(Sne,{existIcon:!!h,prefixCls:N,loading:!!E}),U=p||0===p?Rne(p,T()&&V):null,H=d4(_,["navigate"]);if(void 0!==H.href)return a.createElement("a",u4({},H,{className:$,onClick:F,ref:P}),z,U);var q=a.createElement("button",u4({},_,{type:w,className:$,onClick:F,ref:P}),z,U);return Ine(u)?q:a.createElement(kne,null,q)},Dne=a.forwardRef(Ane);Dne.displayName="Button",Dne.Group=function(e){return a.createElement(l9,null,(function(t){var n,r=t.getPrefixCls,o=t.direction,i=e.prefixCls,l=e.size,u=e.className,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","size","className"]),s=r("btn-group",i),d="";switch(l){case"large":d="lg";break;case"small":d="sm";break;case"middle":case void 0:break;default:console.warn(new hne(l))}var f=u$(s,($b(n={},"".concat(s,"-").concat(d),d),$b(n,"".concat(s,"-rtl"),"rtl"===o),n),u);return a.createElement("div",u4({},c,{className:f}))}))},Dne.__ANT_BUTTON=!0;var Pne=Cne("success","processing","error","default","warning"),Mne=Cne("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"),Tne=new RegExp("^(".concat(Mne.join("|"),")(-inverse)?$")),Fne=new RegExp("^(".concat(Pne.join("|"),")$")),Nne=function(e,t){var n,r=e.prefixCls,o=e.className,i=e.style,l=e.children,u=e.icon,c=e.color,s=e.onClose,d=e.closeIcon,f=e.closable,p=void 0!==f&&f,h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),v=a.useContext(a9),g=v.getPrefixCls,m=v.direction,y=gP(a.useState(!0),2),b=y[0],w=y[1];a.useEffect((function(){"visible"in h&&w(h.visible)}),[h.visible]);var _=function(){return!!c&&(Tne.test(c)||Fne.test(c))},k=u4({backgroundColor:c&&!_()?c:void 0},i),C=_(),E=g("tag",r),O=u$(E,($b(n={},"".concat(E,"-").concat(c),C),$b(n,"".concat(E,"-has-color"),c&&!C),$b(n,"".concat(E,"-hidden"),!b),$b(n,"".concat(E,"-rtl"),"rtl"===m),n),o),S=function(e){e.stopPropagation(),null==s||s(e),!e.defaultPrevented&&("visible"in h||w(!1))},x="onClick"in h||l&&"a"===l.type,j=d4(h,["visible"]),I=u||null,R=I?a.createElement(a.Fragment,null,I,a.createElement("span",null,l)):l,A=a.createElement("span",u4({},j,{ref:t,className:O,style:k}),R,p?d?a.createElement("span",{className:"".concat(E,"-close-icon"),onClick:S},d):a.createElement(pne,{className:"".concat(E,"-close-icon"),onClick:S}):null);return x?a.createElement(kne,null,A):A},Vne=a.forwardRef(Nne);Vne.displayName="Tag",Vne.CheckableTag=function(e){var t,n=e.prefixCls,r=e.className,o=e.checked,i=e.onChange,l=e.onClick,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prefixCls","className","checked","onChange","onClick"]),c=(0,a.useContext(a9).getPrefixCls)("tag",n),s=u$(c,($b(t={},"".concat(c,"-checkable"),!0),$b(t,"".concat(c,"-checkable-checked"),o),t),r);return a.createElement("span",u4({},u,{className:s,onClick:function(e){null==i||i(!o),null==l||l(e)}}))};var Lne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"},Bne=function(e,t){return a.createElement(ine,s4(s4({},e),{},{ref:t,icon:Lne}))},$ne=a.forwardRef(Bne),zne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},Une=function(e,t){return a.createElement(ine,s4(s4({},e),{},{ref:t,icon:zne}))},Hne=a.forwardRef(Une);function qne(e,t,n){return void 0!==n?n:"year"===e&&t.lang.yearPlaceholder?t.lang.yearPlaceholder:"quarter"===e&&t.lang.quarterPlaceholder?t.lang.quarterPlaceholder:"month"===e&&t.lang.monthPlaceholder?t.lang.monthPlaceholder:"week"===e&&t.lang.weekPlaceholder?t.lang.weekPlaceholder:"time"===e&&t.timePickerLocale.placeholder?t.timePickerLocale.placeholder:t.lang.placeholder}function Wne(e,t,n){return void 0!==n?n:"year"===e&&t.lang.yearPlaceholder?t.lang.rangeYearPlaceholder:"month"===e&&t.lang.monthPlaceholder?t.lang.rangeMonthPlaceholder:"week"===e&&t.lang.weekPlaceholder?t.lang.rangeWeekPlaceholder:"time"===e&&t.timePickerLocale.placeholder?t.timePickerLocale.rangePlaceholder:t.lang.rangePlaceholder}var Gne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};var Kne={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"},Yne=function(e,t){return a.createElement(ine,s4(s4({},e),{},{ref:t,icon:Kne}))},Xne=a.forwardRef(Yne),Jne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};var Zne={button:function(e){return a.createElement(Dne,u4({size:"small",type:"primary"},e))},rangeItem:function(e){return a.createElement(Vne,u4({color:"blue"},e))}};function Qne(e){var t=e.format,n=e.picker,r=e.showHour,o=e.showMinute,i=e.showSecond,a=e.use12Hours,l=function(e){return e?Array.isArray(e)?e:[e]:[]}(t)[0],u=u4({},e);return l&&"string"==typeof l&&(!l.includes("s")&&void 0===i&&(u.showSecond=!1),!l.includes("m")&&void 0===o&&(u.showMinute=!1),!l.includes("H")&&!l.includes("h")&&void 0===r&&(u.showHour=!1),(l.includes("a")||l.includes("A"))&&void 0===a&&(u.use12Hours=!0)),"time"===n?u:("function"==typeof l&&delete u.format,{showTime:u})}var ere,tre={},nre={},rre={};var ore,ire={},are={exports:{}};function lre(){return ore||(ore=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(are)),are.exports}var ure,cre={};var sre,dre,fre={};function pre(){return sre||(sre=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};e.default=t}(fre)),fre}function hre(){return dre||(dre=1,function(e){var t=SP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(lre()),r=t(function(){if(ure)return cre;ure=1,Object.defineProperty(cre,"__esModule",{value:!0}),cre.default=void 0;var e={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};return cre.default=e,cre}()),o=t(pre()),i={lang:(0,n.default)({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},r.default),timePickerLocale:(0,n.default)({},o.default)};e.default=i}(ire)),ire}var vre,gre,mre={};function yre(){return gre||(gre=1,function(e){var t=SP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t((ere||(ere=1,Object.defineProperty(rre,"__esModule",{value:!0}),rre.default=void 0,rre.default={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"}),rre)),r=t(hre()),o=t(pre()),i=t((vre||(vre=1,function(e){var t=SP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(hre()).default;e.default=n}(mre)),mre)),a="${label} is not a valid ${type}",l={locale:"en",Pagination:n.default,DatePicker:r.default,TimePicker:o.default,Calendar:i.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:a,method:a,array:a,object:a,number:a,date:a,boolean:a,integer:a,float:a,regexp:a,email:a,url:a,hex:a},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};e.default=l}(nre)),nre}!function(e){var t=SP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(yre()).default;e.default=n}(tre);const bre=Cw(tre);var wre,_re={},kre={};var Cre,Ere={},Ore={};var Sre,xre,jre={};function Ire(){return Sre||(Sre=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};e.default=t}(jre)),jre}function Rre(){return xre||(xre=1,function(e){var t=SP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(lre()),r=t(function(){if(Cre)return Ore;Cre=1,Object.defineProperty(Ore,"__esModule",{value:!0}),Ore.default=void 0;var e={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"};return Ore.default=e,Ore}()),o=t(Ire()),i={lang:(0,n.default)({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeWeekPlaceholder:["开始周","结束周"]},r.default),timePickerLocale:(0,n.default)({},o.default)};i.lang.ok="确 定";var a=i;e.default=a}(Ere)),Ere}var Are,Dre={};!function(e){var t=SP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t((wre||(wre=1,Object.defineProperty(kre,"__esModule",{value:!0}),kre.default=void 0,kre.default={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"}),kre)),r=t(Rre()),o=t(Ire()),i=t((Are||(Are=1,function(e){var t=SP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Rre()).default;e.default=n}(Dre)),Dre)),a="${label}不是一个有效的${type}",l={locale:"zh-cn",Pagination:n.default,DatePicker:r.default,TimePicker:o.default,Calendar:i.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:a,method:a,array:a,object:a,number:a,date:a,boolean:a,integer:a,float:a,regexp:a,email:a,url:a,hex:a},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"}};e.default=l}(_re);const Pre=Cw(_re);const Mre=Cw(V6());const Tre=Cw(T6());function Fre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nre(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fre(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fre(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}i.a.extend(Tre),i.a.extend(Mre);var Vre=function(e){var t=function(e){function t(t,n){var r=function(r){F_(i,r);var o=h4(i);function i(r){var l;return Ub(this,i),(l=o.call(this,r)).pickerRef=a.createRef(),l.focus=function(){l.pickerRef.current&&l.pickerRef.current.focus()},l.blur=function(){l.pickerRef.current&&l.pickerRef.current.blur()},l.renderPicker=function(n){var r=u4(u4({},n),l.props.locale),o=l.context,i=o.getPrefixCls,u=o.direction,c=o.getPopupContainer,s=l.props,d=s.prefixCls,f=s.getPopupContainer,p=s.className,h=s.size,v=s.bordered,g=void 0===v||v,m=s.placeholder,y=Gne(s,["prefixCls","getPopupContainer","className","size","bordered","placeholder"]),b=l.props,w=b.format,_=b.showTime,k=i("picker",d),C={showToday:!0},E={};t&&(E.picker=t);var O=t||l.props.picker;E=u4(u4(u4({},E),_?Qne(u4({format:w,picker:O},_)):{}),"time"===O?Qne(u4(u4({format:w},l.props),{picker:O})):{});var S=i();return a.createElement(u9.Consumer,null,(function(t){var n,o=h||t;return a.createElement(VY,u4({ref:l.pickerRef,placeholder:qne(O,r,m),suffixIcon:"time"===O?a.createElement(Hne,null):a.createElement($ne,null),clearIcon:a.createElement(sne,null),allowClear:!0,transitionName:"".concat(S,"-slide-up")},C,y,E,{locale:r.lang,className:u$((n={},$b(n,"".concat(k,"-").concat(o),o),$b(n,"".concat(k,"-borderless"),!g),n),p),prefixCls:k,getPopupContainer:f||c,generateConfig:e,prevIcon:a.createElement("span",{className:"".concat(k,"-prev-icon")}),nextIcon:a.createElement("span",{className:"".concat(k,"-next-icon")}),superPrevIcon:a.createElement("span",{className:"".concat(k,"-super-prev-icon")}),superNextIcon:a.createElement("span",{className:"".concat(k,"-super-next-icon")}),components:Zne,direction:u}))}))},K8("quarter"!==t,n,"DatePicker.".concat(n," is legacy usage. Please use DatePicker[picker='").concat(t,"'] directly.")),l}return Wb(i,[{key:"render",value:function(){return a.createElement(e9,{componentName:"DatePicker",defaultLocale:X8},this.renderPicker)}}]),i}(a.Component);return r.contextType=a9,n&&(r.displayName=n),r}return{DatePicker:t(),WeekPicker:t("week","WeekPicker"),MonthPicker:t("month","MonthPicker"),YearPicker:t("year","YearPicker"),TimePicker:t("time","TimePicker"),QuarterPicker:t("quarter","QuarterPicker")}}(e),n=t.DatePicker,r=t.WeekPicker,o=t.MonthPicker,i=t.YearPicker,l=t.TimePicker,u=t.QuarterPicker,c=function(e){var t=function(t){F_(r,t);var n=h4(r);function r(){var t;return Ub(this,r),(t=n.apply(this,arguments)).pickerRef=a.createRef(),t.focus=function(){t.pickerRef.current&&t.pickerRef.current.focus()},t.blur=function(){t.pickerRef.current&&t.pickerRef.current.blur()},t.renderPicker=function(n){var r=u4(u4({},n),t.props.locale),o=t.context,i=o.getPrefixCls,l=o.direction,u=o.getPopupContainer,c=t.props,s=c.prefixCls,d=c.getPopupContainer,f=c.className,p=c.size,h=c.bordered,v=void 0===h||h,g=c.placeholder,m=Jne(c,["prefixCls","getPopupContainer","className","size","bordered","placeholder"]),y=t.props,b=y.format,w=y.showTime,_=y.picker,k=i("picker",s),C={};C=u4(u4(u4({},C),w?Qne(u4({format:b,picker:_},w)):{}),"time"===_?Qne(u4(u4({format:b},t.props),{picker:_})):{});var E=i();return a.createElement(u9.Consumer,null,(function(n){var o,i=p||n;return a.createElement(HY,u4({separator:a.createElement("span",{"aria-label":"to",className:"".concat(k,"-separator")},a.createElement(Xne,null)),ref:t.pickerRef,placeholder:Wne(_,r,g),suffixIcon:"time"===_?a.createElement(Hne,null):a.createElement($ne,null),clearIcon:a.createElement(sne,null),allowClear:!0,transitionName:"".concat(E,"-slide-up")},m,C,{className:u$((o={},$b(o,"".concat(k,"-").concat(i),i),$b(o,"".concat(k,"-borderless"),!v),o),f),locale:r.lang,prefixCls:k,getPopupContainer:d||u,generateConfig:e,prevIcon:a.createElement("span",{className:"".concat(k,"-prev-icon")}),nextIcon:a.createElement("span",{className:"".concat(k,"-next-icon")}),superPrevIcon:a.createElement("span",{className:"".concat(k,"-super-prev-icon")}),superNextIcon:a.createElement("span",{className:"".concat(k,"-super-next-icon")}),components:Zne,direction:l}))}))},t}return Wb(r,[{key:"render",value:function(){return a.createElement(e9,{componentName:"DatePicker",defaultLocale:X8},this.renderPicker)}}]),r}(a.Component);return t.contextType=a9,t}(e),s=n;return s.WeekPicker=r,s.MonthPicker=o,s.YearPicker=i,s.RangePicker=c,s.TimePicker=l,s.QuarterPicker=u,s}(K6),Lre="zhCN"===lw._lang?Pre:bre,Bre=Object(a.forwardRef)((function(e,t){return l.a.createElement(Vre,Nre(Nre({locale:Lre.DatePicker},e),{},{ref:t}))})),$re=["src","darkSrc","width","height","theme","style","darkAlpha","className","children"];function zre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ure(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zre(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zre(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hre=function(e){var t=e.src,n=e.darkSrc,r=e.width,o=e.height,i=e.theme,u=e.style,c=e.darkAlpha,s=e.className,d=e.children,f=Y3(e,$re);r=r||(null==u?void 0:u.width),o=o||(null==u?void 0:u.height);var p=G3(aM),h=gP(l.a.useState(i||(null==p?void 0:p.getCurrent())),2),v=h[0],g=h[1],m=gP(l.a.useState(v===AP.dark?n:t),2),y=m[0],b=m[1];if(Object(a.useEffect)((function(){null==p||p.onChange((function(e){g(e),b(e===AP.dark?n:t)}))}),[]),!y)return null;var w=Ure({width:r,height:o},u);return w.backgroundImage="url(".concat(y,")"),v===AP.dark&&c&&(w.opacity=c),d?l.a.createElement("div",Ure({className:u$("lakex-table-image",s),style:w},f),d):(delete w.backgroundImage,l.a.createElement("img",Ure({src:y,className:u$("lakex-table-image",s),style:w},f)))};Hre.displayName="Image";var qre={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=qre.F1&&t<=qre.F12)return!1;switch(t){case qre.ALT:case qre.CAPS_LOCK:case qre.CONTEXT_MENU:case qre.CTRL:case qre.DOWN:case qre.END:case qre.ESC:case qre.HOME:case qre.INSERT:case qre.LEFT:case qre.MAC_FF_META:case qre.META:case qre.NUMLOCK:case qre.NUM_CENTER:case qre.PAGE_DOWN:case qre.PAGE_UP:case qre.PAUSE:case qre.PRINT_SCREEN:case qre.RIGHT:case qre.SHIFT:case qre.UP:case qre.WIN_KEY:case qre.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=qre.ZERO&&e<=qre.NINE||e>=qre.NUM_ZERO&&e<=qre.NUM_MULTIPLY||e>=qre.A&&e<=qre.Z||-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case qre.SPACE:case qre.QUESTION_MARK:case qre.NUM_PLUS:case qre.NUM_MINUS:case qre.NUM_PERIOD:case qre.NUM_DIVISION:case qre.SEMICOLON:case qre.DASH:case qre.EQUALS:case qre.COMMA:case qre.PERIOD:case qre.SLASH:case qre.APOSTROPHE:case qre.SINGLE_QUOTE:case qre.OPEN_SQUARE_BRACKET:case qre.BACKSLASH:case qre.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};function Wre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Gre="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),Kre="aria-",Yre="data-";function Xre(e,t){return 0===e.indexOf(t)}function Jre(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wre(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wre(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);var r={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||Xre(n,Kre))||t.data&&Xre(n,Yre)||t.attr&&Gre.includes(n))&&(r[n]=e[n])})),r}var Zre=a.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}});function Qre(e,t,n){return(e-t)/(n-t)}function eoe(e,t,n,r){var o=Qre(t,n,r),i={};switch(e){case"rtl":i.right="".concat(100*o,"%"),i.transform="translateX(50%)";break;case"btt":i.bottom="".concat(100*o,"%"),i.transform="translateY(50%)";break;case"ttb":i.top="".concat(100*o,"%"),i.transform="translateY(-50%)";break;default:i.left="".concat(100*o,"%"),i.transform="translateX(-50%)"}return i}function toe(e,t){return Array.isArray(e)?e[t]:e}var noe=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange","onChangeComplete"];function roe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ooe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?roe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):roe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ioe=a.forwardRef((function(e,t){var n,r=e.prefixCls,o=e.value,i=e.valueIndex,l=e.onStartMove,u=e.style,c=e.render,s=e.dragging,d=e.onOffsetChange,f=e.onChangeComplete,p=Y3(e,noe),h=a.useContext(Zre),v=h.min,g=h.max,m=h.direction,y=h.disabled,b=h.keyboard,w=h.range,_=h.tabIndex,k=h.ariaLabelForHandle,C=h.ariaLabelledByForHandle,E=h.ariaValueTextFormatterForHandle,O=h.styles,S=h.classNames,x="".concat(r,"-handle"),j=function(e){y||l(e,i)},I=eoe(m,o,v,g),R=a.createElement("div",ooe({ref:t,className:u$(x,$b($b({},"".concat(x,"-").concat(i+1),w),"".concat(x,"-dragging"),s),S.handle),style:ooe(ooe(ooe({},I),u),O.handle),onMouseDown:j,onTouchStart:j,onKeyDown:function(e){if(!y&&b){var t=null;switch(e.which||e.keyCode){case qre.LEFT:t="ltr"===m||"btt"===m?-1:1;break;case qre.RIGHT:t="ltr"===m||"btt"===m?1:-1;break;case qre.UP:t="ttb"!==m?1:-1;break;case qre.DOWN:t="ttb"!==m?-1:1;break;case qre.HOME:t="min";break;case qre.END:t="max";break;case qre.PAGE_UP:t=2;break;case qre.PAGE_DOWN:t=-2}null!==t&&(e.preventDefault(),d(t,i))}},onKeyUp:function(e){switch(e.which||e.keyCode){case qre.LEFT:case qre.RIGHT:case qre.UP:case qre.DOWN:case qre.HOME:case qre.END:case qre.PAGE_UP:case qre.PAGE_DOWN:null==f||f()}},tabIndex:y?null:toe(_,i),role:"slider","aria-valuemin":v,"aria-valuemax":g,"aria-valuenow":o,"aria-disabled":y,"aria-label":toe(k,i),"aria-labelledby":toe(C,i),"aria-valuetext":null==(n=toe(E,i))?void 0:n(o),"aria-orientation":"ltr"===m||"rtl"===m?"horizontal":"vertical"},p));return c&&(R=c(R,{index:i,prefixCls:r,value:o,dragging:s})),R})),aoe=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"];function loe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var uoe=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.style,o=e.onStartMove,i=e.onOffsetChange,l=e.values,u=e.handleRender,c=e.draggingIndex,s=Y3(e,aoe),d=a.useRef({});return a.useImperativeHandle(t,(function(){return{focus:function(e){var t;null==(t=d.current[e])||t.focus()}}})),a.createElement(a.Fragment,null,l.map((function(e,t){return a.createElement(ioe,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?loe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):loe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:function(e){e?d.current[t]=e:delete d.current[t]},dragging:c===t,prefixCls:n,style:toe(r,t),key:t,value:e,valueIndex:t,onStartMove:o,onOffsetChange:i,render:u},s))})))}));function coe(e){var t="touches"in e?e.touches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function soe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function doe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?soe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):soe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function foe(e){var t=e.prefixCls,n=e.style,r=e.children,o=e.value,i=e.onClick,l=a.useContext(Zre),u=l.min,c=l.max,s=l.direction,d=l.includedStart,f=l.includedEnd,p=l.included,h="".concat(t,"-text"),v=eoe(s,o,u,c);return a.createElement("span",{className:u$(h,$b({},"".concat(h,"-active"),p&&d<=o&&o<=f)),style:doe(doe({},v),n),onMouseDown:function(e){e.stopPropagation()},onClick:function(){i(o)}},r)}function poe(e){var t=e.prefixCls,n=e.marks,r=e.onClick,o="".concat(t,"-mark");return n.length?a.createElement("div",{className:o},n.map((function(e){var t=e.value,n=e.style,i=e.label;return a.createElement(foe,{key:t,prefixCls:o,style:n,value:t,onClick:r},i)}))):null}function hoe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function voe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hoe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hoe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function goe(e){var t=e.prefixCls,n=e.value,r=e.style,o=e.activeStyle,i=a.useContext(Zre),l=i.min,u=i.max,c=i.direction,s=i.included,d=i.includedStart,f=i.includedEnd,p="".concat(t,"-dot"),h=s&&d<=n&&n<=f,v=voe(voe({},eoe(c,n,l,u)),"function"==typeof r?r(n):r);return h&&(v=voe(voe({},v),"function"==typeof o?o(n):o)),a.createElement("span",{className:u$(p,$b({},"".concat(p,"-active"),h)),style:v})}function moe(e){var t=e.prefixCls,n=e.marks,r=e.dots,o=e.style,i=e.activeStyle,l=a.useContext(Zre),u=l.min,c=l.max,s=l.step,d=a.useMemo((function(){var e=new Set;if(n.forEach((function(t){e.add(t.value)})),r&&null!==s)for(var t=u;t<=c;)e.add(t),t+=s;return Array.from(e)}),[u,c,s,r,n]);return a.createElement("div",{className:"".concat(t,"-step")},d.map((function(e){return a.createElement(goe,{prefixCls:t,key:e,value:e,style:o,activeStyle:i})})))}function yoe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function boe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yoe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yoe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function woe(e){var t=e.prefixCls,n=e.style,r=e.start,o=e.end,i=e.index,l=e.onStartMove,u=e.replaceCls,c=a.useContext(Zre),s=c.direction,d=c.min,f=c.max,p=c.disabled,h=c.range,v=c.classNames,g="".concat(t,"-track"),m=Qre(r,d,f),y=Qre(o,d,f),b=function(e){!p&&l&&l(e,-1)},w={};switch(s){case"rtl":w.right="".concat(100*m,"%"),w.width="".concat(100*y-100*m,"%");break;case"btt":w.bottom="".concat(100*m,"%"),w.height="".concat(100*y-100*m,"%");break;case"ttb":w.top="".concat(100*m,"%"),w.height="".concat(100*y-100*m,"%");break;default:w.left="".concat(100*m,"%"),w.width="".concat(100*y-100*m,"%")}var _=u||u$(g,$b($b({},"".concat(g,"-").concat(i+1),null!==i&&h),"".concat(t,"-track-draggable"),l),v.track);return a.createElement("div",{className:_,style:boe(boe({},w),n),onMouseDown:b,onTouchStart:b})}function _oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function koe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_oe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Coe(e){var t=e.prefixCls,n=e.style,r=e.values,o=e.startPoint,i=e.onStartMove,l=a.useContext(Zre),u=l.included,c=l.range,s=l.min,d=l.styles,f=l.classNames,p=a.useMemo((function(){if(!c){if(0===r.length)return[];var e=null!=o?o:s,t=r[0];return[{start:Math.min(e,t),end:Math.max(e,t)}]}for(var n=[],i=0;i<r.length-1;i+=1)n.push({start:r[i],end:r[i+1]});return n}),[r,c,o,s]),h=null;return(f.tracks||d.tracks)&&(h=a.createElement(woe,{index:null,prefixCls:t,start:p[0].start,end:p[p.length-1].end,replaceCls:u$(f.tracks,"".concat(t,"-tracks")),style:d.tracks})),u?a.createElement(a.Fragment,null,h,p.map((function(e,r){var o=e.start,l=e.end;return a.createElement(woe,{index:r,prefixCls:t,style:koe(koe({},toe(n,r)),d.track),start:o,end:l,key:r,onStartMove:i})}))):null}function Eoe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ooe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eoe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eoe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Soe=a.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"rc-slider":n,o=e.className,i=e.style,l=e.classNames,u=e.styles,c=e.disabled,s=void 0!==c&&c,d=e.keyboard,f=void 0===d||d,p=e.autoFocus,h=e.onFocus,v=e.onBlur,g=e.min,m=void 0===g?0:g,y=e.max,b=void 0===y?100:y,w=e.step,_=void 0===w?1:w,k=e.value,C=e.defaultValue,E=e.range,O=e.count,S=e.onChange,x=e.onBeforeChange,j=e.onAfterChange,I=e.onChangeComplete,R=e.allowCross,A=void 0===R||R,D=e.pushable,P=void 0!==D&&D,M=e.draggableTrack,T=e.reverse,F=e.vertical,N=e.included,V=void 0===N||N,L=e.startPoint,B=e.trackStyle,$=e.handleStyle,z=e.railStyle,U=e.dotStyle,H=e.activeDotStyle,q=e.marks,W=e.dots,G=e.handleRender,K=e.tabIndex,Y=void 0===K?0:K,X=e.ariaLabelForHandle,J=e.ariaLabelledByForHandle,Z=e.ariaValueTextFormatterForHandle,Q=gP(a.useState(!1),2),ee=Q[0],te=Q[1],ne=a.useRef(),re=a.useRef(),oe=a.useMemo((function(){return F?T?"ttb":"btt":T?"rtl":"ltr"}),[T,F]),ie=a.useMemo((function(){return isFinite(m)?m:0}),[m]),ae=a.useMemo((function(){return isFinite(b)?b:100}),[b]),le=a.useMemo((function(){return null!==_&&_<=0?1:_}),[_]),ue=a.useMemo((function(){return"boolean"==typeof P?!!P&&le:P>=0&&P}),[P,le]),ce=a.useMemo((function(){return Object.keys(q||{}).map((function(e){var t=q[e],n={value:Number(e)};return t&&"object"===Lb(t)&&!a.isValidElement(t)&&("label"in t||"style"in t)?(n.style=t.style,n.label=t.label):n.label=t,n})).filter((function(e){var t=e.label;return t||"number"==typeof t})).sort((function(e,t){return e.value-t.value}))}),[q]),se=function(e,t,n,r,o,i){var l=a.useCallback((function(n){var r=isFinite(n)?n:e;return r=Math.min(t,n),Math.max(e,r)}),[e,t]),u=a.useCallback((function(r){if(null!==n){var o=e+Math.round((l(r)-e)/n)*n,i=function(e){return(String(e).split(".")[1]||"").length},a=Math.max(i(n),i(t),i(e)),u=Number(o.toFixed(a));return e<=u&&u<=t?u:null}return null}),[n,e,t,l]),c=a.useCallback((function(o){var i=l(o),a=r.map((function(e){return e.value}));null!==n&&a.push(u(o)),a.push(e,t);var c=a[0],s=t-e;return a.forEach((function(e){var t=Math.abs(i-e);t<=s&&(c=e,s=t)})),c}),[e,t,r,n,l,u]),s=function o(i,a,l){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"==typeof a){var s,d=i[l],f=d+a,p=[];r.forEach((function(e){p.push(e.value)})),p.push(e,t),p.push(u(d));var h=a>0?1:-1;"unit"===c?p.push(u(d+h*n)):p.push(u(f)),p=p.filter((function(e){return null!==e})).filter((function(e){return a<0?e<=d:e>=d})),"unit"===c&&(p=p.filter((function(e){return e!==d})));var v="unit"===c?d:f;s=p[0];var g=Math.abs(s-v);if(p.forEach((function(e){var t=Math.abs(e-v);t<g&&(s=e,g=t)})),void 0===s)return a<0?e:t;if("dist"===c)return s;if(Math.abs(a)>1){var m=Vb(i);return m[l]=s,o(m,a-h,l,c)}return s}return"min"===a?e:"max"===a?t:void 0},d=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",o=e[n],i=s(e,t,n,r);return{value:i,changed:i!==o}},f=function(e){return null===i&&0===e||"number"==typeof i&&e<i};return[c,function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",a=e.map(c),l=a[n],u=s(a,t,n,r);if(a[n]=u,!1===o){var p=i||0;n>0&&a[n-1]!==l&&(a[n]=Math.max(a[n],a[n-1]+p)),n<a.length-1&&a[n+1]!==l&&(a[n]=Math.min(a[n],a[n+1]-p))}else if("number"==typeof i||null===i){for(var h=n+1;h<a.length;h+=1)for(var v=!0;f(a[h]-a[h-1])&&v;){var g=d(a,1,h);a[h]=g.value,v=g.changed}for(var m=n;m>0;m-=1)for(var y=!0;f(a[m]-a[m-1])&&y;){var b=d(a,-1,m-1);a[m-1]=b.value,y=b.changed}for(var w=a.length-1;w>0;w-=1)for(var _=!0;f(a[w]-a[w-1])&&_;){var k=d(a,-1,w-1);a[w-1]=k.value,_=k.changed}for(var C=0;C<a.length-1;C+=1)for(var E=!0;f(a[C+1]-a[C])&&E;){var O=d(a,1,C+1);a[C+1]=O.value,E=O.changed}}return{value:a[n],values:a}}]}(ie,ae,le,ce,A,ue),de=gP(se,2),fe=de[0],pe=de[1],he=gP(mH(C,{value:k}),2),ve=he[0],ge=he[1],me=a.useMemo((function(){var e=null==ve?[]:Array.isArray(ve)?ve:[ve],t=gP(e,1)[0],n=null===ve?[]:[void 0===t?ie:t];if(E){if(n=Vb(e),O||void 0===ve){var r=O>=0?O+1:2;for(n=n.slice(0,r);n.length<r;){var o;n.push(null!==(o=n[n.length-1])&&void 0!==o?o:ie)}}n.sort((function(e,t){return e-t}))}return n.forEach((function(e,t){n[t]=fe(e)})),n}),[ve,E,ie,O,fe]),ye=a.useRef(me);ye.current=me;var be=function(e){return E?e:e[0]},we=function(e){var t=Vb(e).sort((function(e,t){return e-t}));S&&!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(r.has(t))return!1;if(t===o)return!0;if(n&&i>1)return!1;r.add(t);var a=i+1;if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],o[l],a))return!1;return!0}if(t&&o&&"object"===Lb(t)&&"object"===Lb(o)){var u=Object.keys(t);return u.length===Object.keys(o).length&&u.every((function(n){return e(t[n],o[n],a)}))}return!1}(e,t)}(t,ye.current,!0)&&S(be(t)),ge(t)},_e=function(){null==j||j(be(ye.current)),null==I||I(be(ye.current))},ke=function(e,t,n,r,o,i,l,u,c){var s=gP(a.useState(null),2),d=s[0],f=s[1],p=gP(a.useState(-1),2),h=p[0],v=p[1],g=gP(a.useState(n),2),m=g[0],y=g[1],b=gP(a.useState(n),2),w=b[0],_=b[1],k=a.useRef(null),C=a.useRef(null);a.useEffect((function(){-1===h&&y(n)}),[n,h]),a.useEffect((function(){return function(){document.removeEventListener("mousemove",k.current),document.removeEventListener("mouseup",C.current),document.removeEventListener("touchmove",k.current),document.removeEventListener("touchend",C.current)}}),[]);var E=function(e,t){m.some((function(t,n){return t!==e[n]}))&&(void 0!==t&&f(t),y(e),l(e))},O=function(e,t){if(-1===e){var n=w[0],a=w[w.length-1],l=r-n,u=o-a,s=t*(o-r);s=Math.max(s,l),s=Math.min(s,u);var d=i(n+s);s=d-n;var f=w.map((function(e){return e+s}));E(f)}else{var p=(o-r)*t,h=Vb(m);h[e]=w[e];var v=c(h,p,e,"dist");E(v.values,v.value)}},S=a.useRef(O);S.current=O;var x=a.useMemo((function(){var e=Vb(n).sort((function(e,t){return e-t})),t=Vb(m).sort((function(e,t){return e-t}));return e.every((function(e,n){return e===t[n]}))?m:n}),[n,m]);return[h,d,x,function(r,o,i){r.stopPropagation();var a=i||n,l=a[o];v(o),f(l),_(a);var c=coe(r),s=c.pageX,d=c.pageY,p=function(n){n.preventDefault();var r,i=coe(n),a=i.pageX,l=i.pageY,u=a-s,c=l-d,f=e.current.getBoundingClientRect(),p=f.width,h=f.height;switch(t){case"btt":r=-c/h;break;case"ttb":r=c/h;break;case"rtl":r=-u/p;break;default:r=u/p}S.current(o,r)},h=function e(t){t.preventDefault(),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",p),document.removeEventListener("touchend",e),document.removeEventListener("touchmove",p),k.current=null,C.current=null,v(-1),u()};document.addEventListener("mouseup",h),document.addEventListener("mousemove",p),document.addEventListener("touchend",h),document.addEventListener("touchmove",p),k.current=p,C.current=h}]}(re,oe,me,ie,ae,fe,we,_e,pe),Ce=gP(ke,4),Ee=Ce[0],Oe=Ce[1],Se=Ce[2],xe=Ce[3],je=function(e,t){if(!s){var n=0,r=ae-ie;me.forEach((function(t,o){var i=Math.abs(e-t);i<=r&&(r=i,n=o)}));var o=Vb(me);o[n]=e,E&&!me.length&&void 0===O&&o.push(e),null==x||x(be(o)),we(o),t&&xe(t,n,o)}},Ie=gP(a.useState(null),2),Re=Ie[0],Ae=Ie[1];a.useEffect((function(){var e;if(null!==Re){var t=me.indexOf(Re);t>=0&&(null==(e=ne.current)||e.focus(t))}Ae(null)}),[Re]);var De=a.useMemo((function(){return(!M||null!==le)&&M}),[M,le]),Pe=function(e,t){xe(e,t),null==x||x(be(ye.current))},Me=a.useCallback((function(e){e?te(!0):-1===Ee&&te(!1)}),[Ee]),Te=-1!==Ee;a.useEffect((function(){var e;if(!Te){var t=me.lastIndexOf(Oe);null==(e=ne.current)||e.focus(t)}}),[Te]);var Fe=a.useMemo((function(){return Vb(Se).sort((function(e,t){return e-t}))}),[Se]),Ne=gP(a.useMemo((function(){return E?[Fe[0],Fe[Fe.length-1]]:[ie,Fe[0]]}),[Fe,E,ie]),2),Ve=Ne[0],Le=Ne[1];a.useImperativeHandle(t,(function(){return{focus:function(){ne.current.focus(0)},blur:function(){var e=document.activeElement;re.current.contains(e)&&(null==e||e.blur())}}})),a.useEffect((function(){var e;p&&(null==(e=ne.current)||e.focus(0))}),[]);var Be=a.useMemo((function(){return{min:ie,max:ae,direction:oe,disabled:s,keyboard:f,step:le,included:V,includedStart:Ve,includedEnd:Le,range:E,tabIndex:Y,ariaLabelForHandle:X,ariaLabelledByForHandle:J,ariaValueTextFormatterForHandle:Z,styles:u||{},classNames:l||{}}}),[ie,ae,oe,s,f,le,V,Ve,Le,E,Y,X,J,Z,u,l]);return a.createElement(Zre.Provider,{value:Be},a.createElement("div",{ref:re,className:u$(r,o,$b($b($b($b({},"".concat(r,"-disabled"),s),"".concat(r,"-vertical"),F),"".concat(r,"-horizontal"),!F),"".concat(r,"-with-marks"),ce.length)),style:i,onMouseDown:function(e){e.preventDefault();var t,n=re.current.getBoundingClientRect(),r=n.width,o=n.height,i=n.left,a=n.top,l=n.bottom,u=n.right,c=e.clientX,s=e.clientY;switch(oe){case"btt":t=(l-s)/o;break;case"ttb":t=(s-a)/o;break;case"rtl":t=(u-c)/r;break;default:t=(c-i)/r}je(fe(ie+t*(ae-ie)),e)},onMouseEnter:function(){return Me(!0)},onMouseMove:function(){return Me(!0)},onMouseLeave:function(){return Me(!1)}},a.createElement("div",{className:u$("".concat(r,"-rail"),null==l?void 0:l.rail),style:Ooe(Ooe({},z),null==u?void 0:u.rail)}),a.createElement(Coe,{prefixCls:r,style:B,values:Fe,startPoint:L,onStartMove:De?Pe:null}),a.createElement(moe,{prefixCls:r,marks:ce,dots:W,style:U,activeStyle:H}),ee&&a.createElement(uoe,{ref:ne,prefixCls:r,style:$,values:Se,draggingIndex:Ee,onStartMove:Pe,onOffsetChange:function(e,t){if(!s){var n=pe(me,e,t);null==x||x(be(me)),we(n.values),Ae(n.value)}},onFocus:h,onBlur:v,handleRender:G,onChangeComplete:_e}),a.createElement(poe,{prefixCls:r,marks:ce,onClick:je})))}));const xoe=l.a.forwardRef((function(e,t){var n=e.disabled,r=e.prefixCls,o=e.character,i=e.characterRender,a=e.index,u=e.count,c=e.value,s=void 0===c?0:c,d=e.hoverValue,f=void 0===d?0:d,p=e.allowHalf,h=e.focused,v=e.onHover,g=e.onClick,m=null!=f?f:s,y=a+1,b=new Set([r]);0===m&&0===a&&h?b.add("".concat(r,"-focused")):p&&m+.5>=y&&m<y?(b.add("".concat(r,"-half")),b.add("".concat(r,"-active")),h&&b.add("".concat(r,"-focused"))):(y<=m?b.add("".concat(r,"-full")):b.add("".concat(r,"-zero")),y===m&&h&&b.add("".concat(r,"-focused"))),y>s&&f>=y&&b.add("".concat(r,"-waiting"));var w="function"==typeof o?o(e):o,_=l.a.createElement("li",{className:u$(Array.from(b)),ref:t},l.a.createElement("div",{onClick:n?null:function(e){g(e,a)},onKeyDown:n?null:function(e){e.keyCode===qre.ENTER&&g(e,a)},onMouseMove:n?null:function(e){v(e,a)},role:"radio","aria-checked":m>a?"true":"false","aria-posinset":a+1,"aria-setsize":u,tabIndex:n?-1:0},l.a.createElement("div",{className:"".concat(r,"-first")},w),l.a.createElement("div",{className:"".concat(r,"-second")},w)));return i&&(_=i(_,e)),_}));var joe=["prefixCls","className","defaultValue","value","count","allowHalf","allowClear","character","characterRender","disabled","direction","tabIndex","autoFocus","onHoverChange","onChange","onFocus","onBlur","onKeyDown","onMouseLeave"];function Ioe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Roe=l.a.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"ant".concat("-rate"):n,o=e.className,i=e.defaultValue,u=e.value,c=e.count,s=void 0===c?5:c,d=e.allowHalf,f=void 0!==d&&d,p=e.allowClear,h=void 0===p||p,v=e.character,g=void 0===v?"★":v,m=e.characterRender,y=e.disabled,b=e.direction,w=void 0===b?"ltr":b,_=e.tabIndex,k=void 0===_?0:_,C=e.autoFocus,E=e.onHoverChange,O=e.onChange,S=e.onFocus,x=e.onBlur,j=e.onKeyDown,I=e.onMouseLeave,R=Y3(e,joe),A=function(){var e=a.useRef({});return[function(t){return e.current[t]},function(t){return function(n){e.current[t]=n}}]}(),D=gP(A,2),P=D[0],M=D[1],T=l.a.useRef(null),F=function(){var e;y||null==(e=T.current)||e.focus()};l.a.useImperativeHandle(t,(function(){return{focus:F,blur:function(){var e;y||null==(e=T.current)||e.blur()}}}));var N=gP(mH(i||0,{value:u}),2),V=N[0],L=N[1],B=gP(mH(null),2),$=B[0],z=B[1],U=function(e,t){var n="rtl"===w,r=e+1;if(f){var o=P(e),i=function(e){var t=function(e){var t,n,r=e.ownerDocument,o=r.body,i=r&&r.documentElement,a=e.getBoundingClientRect();return t=a.left,n=a.top,{left:t-=i.clientLeft||o.clientLeft||0,top:n-=i.clientTop||o.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=function(e){var t=e.pageXOffset,n="scrollLeft";if("number"!=typeof t){var r=e.document;"number"!=typeof(t=r.documentElement[n])&&(t=r.body[n])}return t}(r),t.left}(o),a=o.clientWidth;(n&&t-i>a/2||!n&&t-i<a/2)&&(r-=.5)}return r},H=function(e){L(e),null==O||O(e)},q=gP(l.a.useState(!1),2),W=q[0],G=q[1],K=gP(l.a.useState(null),2),Y=K[0],X=K[1],J=function(e,t){var n=U(t,e.pageX);n!==$&&(X(n),z(null)),null==E||E(n)},Z=function(e){y||(X(null),z(null),null==E||E(void 0)),e&&(null==I||I(e))},Q=function(e,t){var n=U(t,e.pageX),r=!1;h&&(r=n===V),Z(),H(r?0:n),z(r?n:null)};l.a.useEffect((function(){C&&!y&&F()}),[]);var ee=new Array(s).fill(0).map((function(e,t){return l.a.createElement(xoe,{ref:M(t),index:t,count:s,disabled:y,prefixCls:"".concat(r,"-star"),allowHalf:f,hoverValue:Y,value:V,onClick:Q,onHover:J,key:e||t,character:g,characterRender:m,focused:W})})),te=u$(r,o,$b($b({},"".concat(r,"-disabled"),y),"".concat(r,"-rtl"),"rtl"===w));return l.a.createElement("ul",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ioe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ioe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:te,onMouseLeave:Z,tabIndex:y?-1:k,onFocus:y?null:function(){G(!0),null==S||S()},onBlur:y?null:function(){G(!1),null==x||x()},onKeyDown:y?null:function(e){var t=e.keyCode,n="rtl"===w,r=V;t===qre.RIGHT&&r<s&&!n?(H(r+=f?.5:1),e.preventDefault()):t===qre.LEFT&&r>0&&!n||t===qre.RIGHT&&r>0&&n?(H(r-=f?.5:1),e.preventDefault()):t===qre.LEFT&&r<s&&n&&(H(r+=f?.5:1),e.preventDefault()),null==j||j(e)},ref:T,role:"radiogroup"},Jre(R,{aria:!0,data:!0,attr:!0})),ee)}));var Aoe=function(e){return e.Checkbox="checkbox",e.Radio="radio",e}(Aoe||{}),Doe=function(e){return l.a.createElement("div",{className:"lakex-table-form-checkbox-readonly"},l.a.createElement(p.a,{checked:e.value,onChange:function(t){var n=t.target.checked;e.onChange(n)}}))};function Poe(){var e=gP(Object(a.useState)(0),2);e[0];var t=e[1];return function(){return t((function(e){return e+1}))}}var Moe=Ts.defineToken("HotKeyServiceToken"),Toe=Ts.defineToken("HotkeyContribution"),Foe={preventDefault:!1,enableOnInput:!1,isEnable:function(){return!0}},Noe={esc:WY.ESC,left:WY.LEFT,up:WY.UP,right:WY.RIGHT,down:WY.DOWN,enter:WY.ENTER,tab:WY.TAB,space:WY.SPACE,del:WY.DEL,backspace:WY.BACKSPACE},Voe=Object.keys(Noe).reduce((function(e,t){return e[Noe[t]]=t,e}),{});function Loe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Voe[e]||e.toUpperCase()}function Boe(e){return mw(e)?Kk.isMac?e:e.replace(/⌘/g,"ctrl").replace(/option/g,"alt"):(console.error("hotKey needs to be string!"),"")}var $oe,zoe=function(e){var t=e.altKey,n=e.ctrlKey,r=e.metaKey,o=e.shiftKey,i=e.key,a=$b({"⌘":r,ctrl:n,shift:o,alt:t},i,Loe(i));return Object.keys(a).reduce((function(e,t){var n=a[t];return n&&e.push(mw(n)?n:t),e}),[]).sort((function(e,t){return Number(e)-Number(t)})).join("+")},Uoe=function(e){return mw(e)?e.split(/[,]\s+/):[]},Hoe=function(e,t){var n=zoe(e),r=Boe(t);return(Uoe(r)||[]).some((function(e){return e===n}))};function qoe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Woe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qoe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qoe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Goe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Koe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Koe(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Koe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){e.adapterHotKey=Boe,e.isKeyboardEventMatchingHotkey=Hoe,e.getFormatHotkey=Loe,e.keyEventToHotKey=zoe}($oe||($oe={}));var Yoe=Object.defineProperty,Xoe=Object.getOwnPropertyDescriptor,Joe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Xoe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Yoe(t,n,i),i},Zoe=function(){return Wb((function e(){Ub(this,e),this._hotkeys=new Map,this._hotkeyToCommandId=new Map,this._init=!1}),[{key:"init",value:function(){if(!this._init){this._init=!0;var e,t=Goe(this._hotkeyPluginProvider.getContributions());try{for(t.s();!(e=t.n()).done;){var n=e.value;try{n.registerHotkey(this)}catch(e){console.error(e)}}}catch(e){t.e(e)}finally{t.f()}}}},{key:"registerItem",value:function(e){var t=this,n=e.id,r=e.hotkey;if(this._hotkeys.has(n))throw new Error("A hotkey is already registered with the id '".concat(n,"'"));this._hotkeys.set(n,Woe(Woe({},e),{},{preventDefault:ww(e.preventDefault)?Foe.preventDefault:e.preventDefault,enableOnInput:ww(e.enableOnInput)?Foe.enableOnInput:e.enableOnInput,isEnable:ww(e.isEnable)?Foe.isEnable:e.isEnable})),Uoe(r).forEach((function(e){var r=$oe.adapterHotKey(e),o=t._hotkeyToCommandId.get(r)||[];o.push(n),t._hotkeyToCommandId.set(r,o)}))}},{key:"getRegisterHotkeyIdsByPressedKey",value:function(e){return this._hotkeyToCommandId.get(e)}},{key:"getHotkeyItem",value:function(e){return this._hotkeys.get(e)}},{key:"getHotkeyItems",value:function(){return this._hotkeys.values()}},{key:"unRegister",value:function(){this._hotkeys.clear(),this._hotkeyToCommandId.clear()}}])}();Joe([bd(Toe)],Zoe.prototype,"_hotkeyPluginProvider",2),Zoe=Joe([Ys()],Zoe);var Qoe=Ts.defineToken("RenderPluginContribution"),eie=Ts.defineToken("RenderPluginFieldContribution"),tie=function(e){return e.NORMAL="normal",e.MOBILE="mobile",e}(tie||{}),nie=function(e){return e.DISABLE="disable",e.SYNC="sync",e.SEQUENTIAL="sequential",e.ASYNC_CONCURRENT="async-concurrent",e}(nie||{}),rie=function(e){return e.NORMAL="normal",e.LITE="lite",e}(rie||{}),oie=Ts.defineToken("ViewerContribution"),iie=function(e){return e.ACTIVE="active",e.INACTIVE="inactive",e}(iie||{}),aie=Ts.defineToken("ActiveTableServiceToken"),lie=Object.defineProperty,uie=Object.getOwnPropertyDescriptor,cie=function(){return Wb((function e(){Ub(this,e)}),[{key:"getRenderBoundingClientRect",value:function(){var e=this.$workbenchRoot.querySelector(".lakex-table-workbench-toolbar-container");if(e){var t=this.$workbenchRoot.getBoundingClientRect(),n=this.$root.getBoundingClientRect();return new DOMRect(n.x,n.y,n.width,t.height-e.getBoundingClientRect().height)}return this.$root.getBoundingClientRect()}}])}();cie=function(e,t,n,r){for(var o,i=r>1?void 0:r?uie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&lie(t,n,i),i}([Ys()],cie);var sie=Object.defineProperty,die=Object.getOwnPropertyDescriptor,fie=function(e,t,n,r){for(var o,i=r>1?void 0:r?die(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&sie(t,n,i),i},pie=function(){return Wb((function e(){Ub(this,e),this._viewport=null,this._resizeListener=null}),[{key:"viewport",get:function(){return this._viewport||this._updateViewport(),this._viewport}},{key:"init",value:function(){var e=this;this._resizeListener=t6(this._renderContextService.$root,"resize",(function(){e._updateViewport()}))}},{key:"destroy",value:function(){var e;null==(e=this._resizeListener)||e.destroy()}},{key:"_updateViewport",value:function(){var e=this._renderContextService.$root;this._viewport=e.getBoundingClientRect()}},{key:"isDotInViewPort",value:function(e,t){if(!this._viewport)return!1;var n=e>this._viewport.left&&e<this._viewport.right,r=t>this._viewport.top&&t<this._viewport.bottom;return n&&r}}])}();function hie(e,t,n){return t=P_(t),D_(e,vie()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function vie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(vie=function(){return!!e})()}fie([Xs(cie)],pie.prototype,"_renderContextService",2),pie=fie([Ys()],pie);var gie=Object.defineProperty,mie=Object.getOwnPropertyDescriptor,yie=function(e,t,n,r){for(var o,i=r>1?void 0:r?mie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&gie(t,n,i),i},bie=function(e){function t(){var e;return Ub(this,t),(e=hie(this,t,arguments))._viewNodes=new Map,e._currentView=null,e._prevView=null,e._isFirstRender=!0,e._onDoubleClickCell=e._register(new ck),e.onDoubleClickCell=e._onDoubleClickCell.event,e._onClickCellIcon=e._register(new ck),e.onClickCellIcon=e._onClickCellIcon.event,e._onClickRecord=e._register(new ck),e.onClickRecord=e._onClickRecord.event,e._onClickEvent=e._register(new ck),e.onClickEvent=e._onClickEvent.event,e._onClickIcon=e._register(new ck),e.onClickIcon=e._onClickIcon.event,e._onScroll=e._register(new ck),e.onScroll=e._onScroll.event,e._onViewWidthChange=e._register(new ck),e.onViewWidthChange=e._onViewWidthChange.event,e.getRenderWidth=function(){return e.renderContextService.$root.clientWidth},e._handleScroll=function(){e.emitOnScroll(1)},e}return F_(t,e),Wb(t,[{key:"emitDoubleClickCell",value:function(e){this._onDoubleClickCell.emit(e)}},{key:"emitClickCellIcon",value:function(e){this._onClickCellIcon.emit(e)}},{key:"emitClickRecord",value:function(e){this._onClickRecord.emit(e)}},{key:"emitClickEvent",value:function(e){this._onClickEvent.emit(e)}},{key:"emitClickIcon",value:function(e){this._onClickIcon.emit(e)}},{key:"emitOnScroll",value:function(e){this._onScroll.emit(e)}},{key:"emitViewWidthChange",value:function(e){this._onViewWidthChange.emit(e)}},{key:"init",value:function(){var e=mC(X_.mark((function e(t){var n;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.onError,this.configuration.getValue("render.autoActive")&&this.activeTableService.active(),this.onError=n,this._initPlugins(),this._initViewers();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initDom",value:function(e,t){var n=this;this.renderContextService.$root=e,this.renderContextService.$workbenchRoot=t,this._renderViewPort.init(),this.renderContextService.$root.addEventListener("wheel",this._handleScroll,{passive:!0}),this.onViewWidthChange((function(e){var t=n.renderContextService.$root;e&&(t.style.width="number"==typeof e?e+"px":e)}))}},{key:"_initPlugins",value:function(){var e=this;this.renderPluginProvider.getContributions({cache:!1}).forEach((function(t){t._inited||(t.init(e),t._inited=!0)}))}},{key:"_initViewers",value:function(){var e=this;this.viewerProvider.getContributions({cache:!1}).forEach((function(t){t.registerViewer(e)}))}},{key:"render",value:function(e,t){this._renderViewer(e.get("uuid"),e.get("type"),t)}},{key:"destroy",value:function(){var e,n,r;M_(P_(t.prototype),"destroy",this).call(this),this.renderPluginProvider.getContributions({cache:!1}).forEach((function(e){var t;null==(t=e.destroy)||t.call(e)})),this._renderViewPort.destroy(),this._viewNodes.clear(),null==(e=this._currentView)||e.destroy(),this._currentView=null,null==(n=this._prevView)||n.destroy(),this._prevView=null,this.renderContextService.$root.removeEventListener("wheel",this._handleScroll),null==(r=this.renderContextService.$root.parentNode)||r.removeChild(this.renderContextService.$root)}},{key:"_renderViewer",value:function(e,t,n){var r,o=this.renderContextService.$root,i=document.createElement("div");i.className="lakex-table-view-container",i.dataset.viewId=e,o.appendChild(i);var a=this._viewNodes.get(t);this._prevView=this._currentView,null==(r=this._prevView)||r.destroyAsync(),this._currentView=a?a.render(i,{viewId:e,deferMode:"CARD"===t?"disable":this.configuration.getValue("render.deferMode")},n):null,this._currentView||(o.innerHTML="",o.appendChild(this._defaultViewer())),this._isFirstRender&&(this._lifeService.status=Jb.Rendered,this._isFirstRender=!1)}},{key:"_defaultViewer",value:function(){var e=document.createElement("h3");return e.innerHTML="没有注册 Viewer 这里是骨架屏",e}},{key:"registerItem",value:function(e){if(this._viewNodes.get(e.viewType))throw Error("".concat(e.viewType," view has been registered"));this._viewNodes.set(e.viewType,e)}},{key:"getViewNodes",value:function(){return this._viewNodes}}])}($_);yie([bd(Qoe)],bie.prototype,"renderPluginProvider",2),yie([bd(oie)],bie.prototype,"viewerProvider",2),yie([Xs(cie)],bie.prototype,"renderContextService",2),yie([Xs(R_)],bie.prototype,"configuration",2),yie([Xs(aie)],bie.prototype,"activeTableService",2),yie([Xs(pie)],bie.prototype,"_renderViewPort",2),yie([Xs(Zb)],bie.prototype,"_lifeService",2),yie([Vs()],bie.prototype,"destroy",1),bie=yie([Ys()],bie);var wie=Object.defineProperty,_ie=Object.getOwnPropertyDescriptor,kie=function(e,t,n,r){for(var o,i=r>1?void 0:r?_ie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&wie(t,n,i),i},Cie=function(){return Wb((function e(){var t=this;Ub(this,e),this.getFieldComponent=function(e){var n,r;return null==(r=null==(n=t.getFieldTargetPlugin(e))?void 0:n.getFieldComponent)?void 0:r.call(n)},this.getFieldEditComponent=function(e){var n,r;return null==(r=null==(n=t.plugins.find((function(t){return t.fieldType===e})))?void 0:n.getFieldEditComponent)?void 0:r.call(n)},this.getFieldFormComponent=function(e){var n,r;return null==(r=null==(n=t.plugins.find((function(t){return t.fieldType===e})))?void 0:n.getFieldFormComponent)?void 0:r.call(n)},this.getFieldIcon=function(e){var n,r;return null==(r=null==(n=t.getFieldTargetPlugin(e))?void 0:n.getFieldIcon)?void 0:r.call(n)},this.getFieldTagComponent=function(e){var n,r;return null==(r=null==(n=t.getFieldTargetPlugin(e))?void 0:n.getFieldTagComponent)?void 0:r.call(n)}}),[{key:"plugins",get:function(){return this.renderPluginFieldProvider.getContributions({cache:!1})}},{key:"getFieldTargetPlugin",value:function(e){return this.plugins.find((function(t){return t.fieldType===e}))}},{key:"getCellIsShowValidTip",value:function(e){var t;return null==(t=this.getFieldTargetPlugin(e))?void 0:t.isShowValidTipInGrid}},{key:"getFieldIsStrictValidatedValue",value:function(e){var t;return!(null==(t=this.getFieldTargetPlugin(e))||!t.isStrictValidatedValue)}},{key:"getFieldRules",value:function(e){var t,n;return null==(n=null==(t=this.plugins.find((function(t){return t.fieldType===e})))?void 0:t.getFieldRules)?void 0:n.call(t)}},{key:"cellValueChecker",value:function(e,t){var n,r,o,i,a=null==(i=null==(o=null==(r=null==(n=this._readService)?void 0:n.getValueField)?void 0:r.call(n,e))?void 0:o.getVerify)?void 0:i.call(o,t);return null==a?void 0:a.errorMessage}}])}();kie([bd(eie)],Cie.prototype,"renderPluginFieldProvider",2),kie([Xs(MI)],Cie.prototype,"_readService",2),Cie=kie([Ys()],Cie);var Eie=Object.defineProperty,Oie=Object.getOwnPropertyDescriptor,Sie=function(e,t,n,r){for(var o,i=r>1?void 0:r?Oie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Eie(t,n,i),i},xie=function(){return Wb((function e(){Ub(this,e)}),[{key:"_init",value:function(){this.zIndex={render:0,gridCell:0,gridCellPreviewer:1,gridStickyContent:2,gridCellFrozen:3,gridCellFrozenPreviewer:4,gridHeader:5,gridFooter:5}}}])}();Sie([Ns()],xie.prototype,"_init",1),xie=Sie([Ys()],xie);var jie=Object.defineProperty,Iie=Object.getOwnPropertyDescriptor,Rie=function(){return Wb((function e(){Ub(this,e),this.gridCellEditorAutoFocus=!0}),[{key:"setGridCellEditorAutoFocus",value:function(e){this.gridCellEditorAutoFocus=e}}])}();Rie=function(e,t,n,r){for(var o,i=r>1?void 0:r?Iie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jie(t,n,i),i}([Ys()],Rie);var Aie=Ts.defineToken("OpenerContribution"),Die=Object.defineProperty,Pie=Object.getOwnPropertyDescriptor,Mie=function(){return Wb((function e(){Ub(this,e),this.openerName="href-opener",this.apps=["phone"]}),[{key:"open",value:function(e){window.location.href=e}}])}();Mie=function(e,t,n,r){for(var o,i=r>1?void 0:r?Pie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Die(t,n,i),i}([Ys()],Mie);var Tie=Object.defineProperty,Fie=Object.getOwnPropertyDescriptor,Nie=function(){return Wb((function e(){Ub(this,e),this.openerName="safe-redirect-opener",this.apps=["link:external"]}),[{key:"open",value:function(e){var t=document.location,n=t.protocol,r=t.host;window.open("".concat(n,"//").concat(r,"/r/goto?url=").concat(encodeURIComponent(e)),"_blank")}}])}();Nie=function(e,t,n,r){for(var o,i=r>1?void 0:r?Fie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Tie(t,n,i),i}([Ys()],Nie);var Vie=Object.defineProperty,Lie=Object.getOwnPropertyDescriptor,Bie=function(){return Wb((function e(){Ub(this,e),this.openerName="window-new-opener",this.apps=["link"]}),[{key:"open",value:function(e){window.open(e,"_blank")}}])}();Bie=function(e,t,n,r){for(var o,i=r>1?void 0:r?Lie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Vie(t,n,i),i}([Ys()],Bie);var $ie=Object.defineProperty,zie=Object.getOwnPropertyDescriptor,Uie=function(){return Wb((function e(){Ub(this,e),this.openerName="window-opener",this.apps=["email"]}),[{key:"open",value:function(e){window.open(e,"_self")}}])}();function Hie(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qie(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function qie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Uie=function(e,t,n,r){for(var o,i=r>1?void 0:r?zie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&$ie(t,n,i),i}([Ys()],Uie);var Wie=Object.defineProperty,Gie=Object.getOwnPropertyDescriptor,Kie=function(e,t,n,r){for(var o,i=r>1?void 0:r?Gie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Wie(t,n,i),i},Yie=function(){return Wb((function e(){Ub(this,e),this.openers=[],this.apps=[]}),[{key:"init",value:function(){var e,t=Hie(this._openerProvider.getContributions());try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.registerOpener){var r=n.registerOpener();r&&r.length>0&&this.registerOpeners(r)}if(n.registerOpenerApp){var o=n.registerOpenerApp();if(o&&o.length>0){var i,a=Hie(o);try{for(a.s();!(i=a.n()).done;){var l=i.value;this.registerApp(l)}}catch(e){a.e(e)}finally{a.f()}}}}}catch(e){t.e(e)}finally{t.f()}}},{key:"registerOpeners",value:function(e){if(e){var t,n=Hie(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.registerOpener(r)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"registerOpener",value:function(e){var t=this.openers.findIndex((function(t){return t.openerName===e.openerName}));if(t>-1){var n=this.openers[t];e.apps||(e.apps=n.apps),this.openers.splice(t,1)}e.apps?this.openers.push(e):console.warn("missing opener apps",e)}},{key:"registerApp",value:function(e){var t=this.apps.findIndex((function(t){return t.name===e.name&&(!e.sub_name||t.sub_name===e.sub_name)}));t>-1&&this.apps.splice(t,1),this.apps.push(e)}},{key:"getApps",value:function(){return this.apps}},{key:"getOpener",value:function(e){var t,n=Hie(this.openers);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.apps.includes(e.name+(e.sub_name?":"+e.sub_name:"")))return r}}catch(e){n.e(e)}finally{n.f()}}}])}();function Xie(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Jie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jie(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Jie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Kie([bd(Aie)],Yie.prototype,"_openerProvider",2),Yie=Kie([Ys()],Yie);var Zie=Object.defineProperty,Qie=Object.getOwnPropertyDescriptor,eae=function(e,t,n,r){for(var o,i=r>1?void 0:r?Qie(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Zie(t,n,i),i},tae=function(){return Wb((function e(){Ub(this,e)}),[{key:"getOpenerApp",value:function(e,t){var n,r,o=Xie(this.registry.getApps().filter((function(t){return t.name===e})));try{for(o.s();!(r=o.n()).done;){var i=r.value,a=!0;if(i.pattern)new RegExp(i.pattern).test(t)||(a=!1);var l=i.include;l&&(mw(l)&&l.startsWith("{")&&(l=JSON.parse(l)),gw(l)&&!l.test(t)&&(a=!1));var u=i.exclude;if(u&&(mw(u)&&u.startsWith("{")&&(u=JSON.parse(u)),gw(u)&&u.test(t)&&(a=!1)),a){n=i;break}}}catch(e){o.e(e)}finally{o.f()}return n}}])}();function nae(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return rae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rae(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function rae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}eae([Xs(Yie)],tae.prototype,"registry",2),tae=eae([Ys()],tae);var oae=Object.defineProperty,iae=Object.getOwnPropertyDescriptor,aae=function(){return Wb((function e(){Ub(this,e)}),[{key:"getHashes",value:function(){var e=window.location.hash;if(e){var t=e.replace("#","").split(";");if(t.length>0){var n,r=[],o=nae(t);try{for(o.s();!(n=o.n()).done;){var i=gP(n.value.split(":"),2),a=i[0],l=i[1];a&&!l&&32===a.length&&(l=a,a="view"),l&&r.push({name:a,url:l})}}catch(e){o.e(e)}finally{o.f()}return r}}}},{key:"setHash",value:function(e,t){var n=this.buildHash(e,t);n&&(window.location.hash=n)}},{key:"removeHash",value:function(e){var t=this.getHashes();if(t)if(t=t.filter((function(t){return t.name!==e})),t.length>0){var n=this._buildHashStr(t);window.location.hash=n}else window.location.hash=""}},{key:"buildHash",value:function(e,t){var n=this.getHashes()||[],r=n.findIndex((function(t){return t.name===e}));return r>-1&&n.splice(r,1),n.push({name:e,url:t}),this._buildHashStr(n)}},{key:"_buildHashStr",value:function(e){return e.map((function(e){return e.name+":"+e.url})).join(";")}}])}();aae=function(e,t,n,r){for(var o,i=r>1?void 0:r?iae(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&oae(t,n,i),i}([Ys()],aae);var lae=Object.defineProperty,uae=Object.getOwnPropertyDescriptor,cae=function(e,t,n,r){for(var o,i=r>1?void 0:r?uae(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&lae(t,n,i),i},sae=function(){return Wb((function e(){Ub(this,e)}),[{key:"open",value:function(e,t){var n=this._appService.getOpenerApp(e,t);if(!n)throw new Error("Not match app by url: ".concat(t));var r=this.registry.getOpener(n);if(!r)throw new Error("Not define link app opener: ".concat(n.name));for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];r.open.apply(r,[t].concat(i)),r.autoClear?this._openerHash.removeHash(e):r.hash&&this.setHash(e,t)}},{key:"getOpenLink",value:function(e,t){var n=this._openerHash.buildHash(e,t);return window.location.origin+window.location.pathname+window.location.search+"#"+n}},{key:"setHash",value:function(e,t){this._configurationService.getValue("opener").useHash&&this._openerHash.setHash(e,t)}}])}();cae([Xs(Yie)],sae.prototype,"registry",2),cae([Xs(aae)],sae.prototype,"_openerHash",2),cae([Xs(tae)],sae.prototype,"_appService",2),cae([Xs(R_)],sae.prototype,"_configurationService",2),sae=cae([Ys()],sae);var dae={name:"email",display_name:"Email",description:"邮件",include:/mailto\:\S+@\S+\.\S+$/},fae={name:"file",display_name:"File",description:"附件"},pae={name:"image",display_name:"Image",description:"图片"},hae=/^https?:\/\/(.*(antfin|yuque|alibaba|antfin-inc|alibaba-inc).com|lark.alipay.net)/i,vae={name:"link",display_name:"Yuque Link",description:"链接",include:hae},gae={name:"link",sub_name:"external",display_name:"External Link",description:"外部链接",exclude:hae},mae={name:"phone",display_name:"Phone",description:"手机号码",include:/tel\:\d+$/},yae={name:"user",display_name:"用户",description:"用户首页"},bae=Ts.defineToken("FileContribution"),wae=Object.defineProperty,_ae=Object.getOwnPropertyDescriptor,kae=function(e,t,n,r){for(var o,i=r>1?void 0:r?_ae(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&wae(t,n,i),i},Cae=function(){return Wb((function e(){Ub(this,e)}),[{key:"getProvider",value:function(){var e=this.fileProvider.getContributions()||[],t=e[e.length-1];return null==t?void 0:t.registerFile()}}])}();kae([bd(bae)],Cae.prototype,"fileProvider",2),Cae=kae([Ys()],Cae);const Eae={FILE_EXT:[".dwg",".vsd",".vsdm",".vsdx",".vss",".vssm",".vst",".vstm",".vstx",".msi",".chm",".sub",".idx",".sst",".son",".srt",".ssa",".ass",".smi",".psb",".pjs",".stl",".tts",".vsf",".zeg",".ipynb",".msg",".caj",".jar",".tar",".gz",".cnf",".ini",".rpm",".conf"],IMAGE_EXT:[".svg",".png",".bmp",".jpg",".jpeg",".gif",".tif",".tiff",".emf",".webp",".heic",".heif"],TEXT_FILE_EXT:[".txt",".abap",".ada",".adp",".ahk",".as",".as3",".asc",".ascx",".asm",".asp",".awk",".bash",".bash_login",".bash_logout",".bash_profile",".bashrc",".bat",".bib",".bsh",".build",".builder",".c",".c++",".capfile",".cc",".cfc",".cfm",".cfml",".cl",".clj",".cls",".cmake",".cmd",".coffee",".config",".cpp",".cpt",".cpy",".cs",".cshtml",".cson",".csproj",".css",".ctp",".cxx",".dart",".d",".ddl",".di",".diff",".disco",".dml",".dtd",".dtml",".el",".emakefile",".erb",".erl",".f",".f90",".f95",".fs",".fsi",".fsscript",".fsx",".gemfile",".gemspec",".gitconfig",".go",".groovy",".gvy",".Hcp",".h",".h++",".haml",".handlebars",".hbs",".hh",".hpp",".hrl",".hs",".htc",".hxx",".html",".htm",".idl",".iim",".inc",".inf",".ini",".inl",".ipp",".irbrc",".pug",".jade",".jav",".java",".js",".json",".jsp",".jsx",".l",".less",".lhs",".lisp",".log",".lst",".ltx",".lua",".m",".mak",".make",".manifest",".master",".md",".mkd",".markdn",".markdown",".mdown",".mkdn",".ml",".mli",".mll",".mly",".mud",".makefile",".nfo",".opml",".osascript",".p",".pas",".patch",".php",".php2",".php3",".php4",".php5",".phtml",".pl",".plx",".perl",".pm",".pod",".pp",".profile",".ps1",".ps1xml",".psd1",".psm1",".pss",".pt",".py",".pyw",".proto",".r",".rake",".rb",".rbx",".rc",".rdf",".re",".reg",".rest",".resw",".resx",".rhtml",".rjs",".rprofile",".rpy",".rs",".rss",".rst",".ruby",".rxml",".s",".sass",".scala",".scm",".sconscript",".sconstruct",".script",".scss",".sgml",".sh",".shtml",".sml",".svn-base",".swift",".sql",".sty",".tcl",".tex",".textile",".tld",".tli",".tmpl",".tpl",".ts",".tsx",".vb",".vi",".vim",".vmg",".webpart",".wsp",".wsdl",".xhtml",".xml",".jmx",".xoml",".xsd",".xslt",".yaml",".yaws",".yml",".zsh",".arxml"],VIDEO_EXT:[".mp4",".mov",".avi",".wmv",".m4a",".m4v",".webm",".flv",".mkv",".mpg",".ts",".mts",".swf",".3gp",".ogg",".aac",".dv",".f4v",".flac",".rmvb",".vob",".asf",".dat",".m2t",".m3u8",".mj2",".mjpeg",".mpe",".mpeg",".qt",".rm",".rmvb",".wmv"],OFFICE_EXT:[".docx",".doc",".dotx",".dot",".rtf",".txt",".html",".htm",".lake",".lakebook",".lakesheet",".lakemind",".lakeshow",".pdf",".xls",".xlsx",".xltx",".xlsm",".xlt",".csv",".pptx",".ppt",".potx",".pot",".ppsx",".pps",".pages",".numbers",".nmbtemplate",".template",".key",".keynote",".kth",".et",".ett",".dps",".dpt",".wps",".wpt",".txt",".md",".mark",".markdown",".xmind",".graffle",".gtemplate",".gstencil",".mindnode",".vpp",".mmap",".mm",".mpp"],MAC_OFFICE_EXT:[".key",".keynote",".pages",".numbers"],AUDIO_EXT:[".mp3",".mpga",".wav",".m4a",".flac"],PRESENTATION_EXT:[".ppt",".pptx",".ppsx",".potx",".pot",".key"],SHEET_EXT:[".xls",".xlsx",".xlsm",".xltx",".xlt",".csv",".numbers"],MMAP_EXT:[".mindnode",".mindnode.zip",".xmind",".xmind.zip",".mmap",".mmap.zip",".mm"],COMPRESS_EXT:[".zip",".rar",".gz",".tgz",".gzip",".7z",".tar",".jar",".dmg",".pkg"]},Oae={"image/jpeg":["jpeg","jpg","jpe"],"image/png":["png"],"image/gif":["gif"],"image/vnd.wap.wbmp":["wbmp"],"image/tiff":["tiff","tiff"],"image/vnd.adobe.photoshop":["psd"],"image/svg+xml":["svg","svgz"],"text/jsx":["jsx"],"text/less":["less"],"text/css":["css"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/csv":["csv"],"text/xml":["xml"],"text/x-vcard":["vcf"],"text/x-vcalendar":["vcs"],"text/markdown":["md"],"text/plain":["txt"],"text/richtext":["rtx"],"text/rtf":["rtf"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js"],"text/yaml":["yaml","yml"],"audio/mp3":["mp3"],"audio/mp4":["mp4","mp4a"],"video/mp4":["mp4"],"audio/mpeg":["mpeg","mp2","mp3"],"audio/ogg":["oga"],"audio/wav":["wav"],"audio/wave":["wav"],"audio/webm":["weba"],"video/x-msvideo":["avi"],"video/quicktime":["mov","qt"],"video/ogg":["ogv"],"video/x-sgi-movie":["movie"],"application/rss+xml":["rss"],"application/json":["json"],"application/zip":["zip"],"application/gzip":["gzip"],"application/pdf":["pdf"],"application/postscript":["ai","eps","ps"],"application/msword":["doc","dot"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.ms-fontobject":["eot"],"application/vnd.android.package-archive":["apk"],"application/x-apple-diskimage":["dmg"],"application/x-iwork-keynote-sffkey":["key"],"application/x-iwork-pages-sffpages":["pages"],"application/x-iwork-keynote-sffnumbers":["numbers"],"application/x-iwork-numbers-sffnumbers":["numbers"]};function Sae(e){if(!e)return"";var t;if(t="string"==typeof e?e:e.name){if((t=t.toLowerCase()).endsWith(".mindnode.zip"))return"mindnode.zip";if(t.endsWith(".xmind.zip"))return"xmind.zip";if(t.endsWith(".mmap.zip"))return"mmap.zip";if(t.endsWith(".mpp.zip"))return"mpp.zip"}var n=t&&t.split(".").pop()||"",r=e.type&&Oae[e.type];return r?r.includes(n)?n:r[0]:n}function xae(e){var t=Sae(e);return function(e){var t=Sae(e);return Eae.IMAGE_EXT.includes(t)}(e)?"image":function(e){var t=Sae(e);return Eae.VIDEO_EXT.includes(t)}(e)?"video":function(e){var t=Sae(e);return Eae.AUDIO_EXT.includes(t)}(e)?"audio":["doc","docx","dot","dotx"].includes(t)?"word":function(e){var t=Sae(e);return["pdf"].includes(t)}(e)?"pdf":"txt"===t?"txt":["pages","md","markdown","rtf"].includes(t)?"doc":"numbers"===t?"numbers":["xls","xlsx","xlsm","xltx","xlt"].includes(t)?"excel":function(e){var t=Sae(e);return Eae.SHEET_EXT.includes(t)}(e)?"sheet":"key"===e?"keynote":function(e){var t=Sae(e);return Eae.PRESENTATION_EXT.includes(t)}(e)?"ppt":["xmind","xmind.zip"].includes(t)?"xmind":["mindnode","mindnode.zip"].includes(t)?"mindnote":function(e){var t=Sae(e);return Eae.MMAP_EXT.includes(t)}(e)?"minimap":"sketch"===t?"sketch":["rp","rplib"].includes(t)?"axure":"psd"===t?"psd":"ai"===t?"ai":"graffle"===t?"graffle":"zip"===t?"rar":"lake"===t?"lake":"lakesheet"===t?"lakesheet":"default"}var jae=Object.defineProperty,Iae=Object.getOwnPropertyDescriptor,Rae=function(e,t,n,r){for(var o,i=r>1?void 0:r?Iae(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jae(t,n,i),i},Aae=function(){return Wb((function e(){Ub(this,e)}),[{key:"_provider",get:function(){return this._fileRegistry.getProvider()}},{key:"getExts",value:function(){var e;return null!=(e=this._provider)&&e.getExts?this._provider.getExts():function(){var e=[];return Object.keys(Eae).forEach((function(t){e=e.concat(Eae[t])})),e}().join(",")}},{key:"getFileKey",value:function(e){var t;return null!=(t=this._provider)&&t.getFileKey?this._provider.getFileKey(e):xae(e)}},{key:"getPreviewUrl",value:function(e){var t,n;return null!=(t=this._provider)&&t.getPreviewUrl?null==(n=this._provider)?void 0:n.getPreviewUrl(e):e}},{key:"getPreviewOrDownloadUrl",value:function(e,t){var n,r;return null!=(n=this._provider)&&n.getPreviewOrDownloadUrl?null==(r=this._provider)?void 0:r.getPreviewOrDownloadUrl(e,t):e}}])}();Rae([Xs(Cae)],Aae.prototype,"_fileRegistry",2),Aae=Rae([Ys()],Aae);var Dae=pd().contribution(bae).register(Cae).register(Aae),Pae=Object.defineProperty,Mae=Object.getOwnPropertyDescriptor,Tae=function(e,t,n,r){for(var o,i=r>1?void 0:r?Mae(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Pae(t,n,i),i},Fae=function(){return Wb((function e(){Ub(this,e),this.openerName="file-previewer-opener",this.apps=["file"]}),[{key:"open",value:function(e,t){var n=this._fileService.getPreviewOrDownloadUrl(e,t.size);n&&window.open(n,"_blank","noopener,noreferrer")}}])}();Tae([Xs(Aae)],Fae.prototype,"_fileService",2),Fae=Tae([Ys()],Fae);var Nae={exports:{}};!function(e,t){e.exports=function(){var e=function(e,t){var n,r,o,i,a,l,u,c,s,d,f,p,h,v,g,m,y,b,w=this,_=!1,k=!0,C=!0,E={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},O=function(e){if(m)return!0;e=e||window.event,g.timeToIdle&&g.mouseUsed&&!s&&T();for(var n,r,o=(e.target||e.srcElement).getAttribute("class")||"",i=0;i<U.length;i++)(n=U[i]).onTap&&o.indexOf("pswp__"+n.name)>-1&&(n.onTap(),r=!0);if(r){e.stopPropagation&&e.stopPropagation(),m=!0;var a=t.features.isOldAndroid?600:30;setTimeout((function(){m=!1}),a)}},S=function(){return!e.likelyTouchDevice||g.mouseUsed||screen.width>g.fitControlsWidth},x=function(e,n,r){t[(r?"add":"remove")+"Class"](e,"pswp__"+n)},j=function(){var e=1===g.getNumItemsFn();e!==v&&(x(r,"ui--one-slide",e),v=e)},I=function(){x(u,"share-modal--hidden",C)},R=function(){return(C=!C)?(t.removeClass(u,"pswp__share-modal--fade-in"),setTimeout((function(){C&&I()}),300)):(I(),setTimeout((function(){C||t.addClass(u,"pswp__share-modal--fade-in")}),30)),C||D(),!1},A=function(t){var n=(t=t||window.event).target||t.srcElement;return e.shout("shareLinkClick",t,n),!(!n.href||!n.hasAttribute("download")&&(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),C||R(),1))},D=function(){for(var e,t,n,r,o="",i=0;i<g.shareButtons.length;i++)e=g.shareButtons[i],t=g.getImageURLForShare(e),n=g.getPageURLForShare(e),r=g.getTextForShare(e),o+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(r))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",g.parseShareButtonOut&&(o=g.parseShareButtonOut(e,o));u.children[0].innerHTML=o,u.children[0].onclick=A},P=function(e){for(var n=0;n<g.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+g.closeElClasses[n]))return!0},M=0,T=function(){clearTimeout(b),M=0,s&&w.setIdle(!1)},F=function(e){var t=(e=e||window.event).relatedTarget||e.toElement;(!t||"HTML"===t.nodeName)&&(clearTimeout(b),b=setTimeout((function(){w.setIdle(!0)}),g.timeToIdleOutside))},N=function(){g.fullscreenEl&&!t.features.isOldAndroid&&(n||(n=w.getFullscreenAPI()),n?(t.bind(document,n.eventK,w.updateFullscreen),w.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},V=function(){g.preloaderEl&&(L(!0),d("beforeChange",(function(){clearTimeout(h),h=setTimeout((function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&L(!1):L(!0)}),g.loadingIndicatorDelay)})),d("imageLoadComplete",(function(t,n){e.currItem===n&&L(!0)})))},L=function(e){p!==e&&(x(f,"preloader--active",!e),p=e)},B=function(e){var n=e.vGap;if(S()){var a=g.barsSize;if(g.captionEl&&"auto"===a.bottom)if(i||((i=t.createEl("pswp__caption pswp__caption--fake")).appendChild(t.createEl("pswp__caption__center")),r.insertBefore(i,o),t.addClass(r,"pswp__ui--fit")),g.addCaptionHTMLFn(e,i,!0)){var l=i.clientHeight;n.bottom=parseInt(l,10)||44}else n.bottom=a.top;else n.bottom="auto"===a.bottom?0:a.bottom;n.top=a.top}else n.top=n.bottom=0},$=function(){g.timeToIdle&&d("mouseUsed",(function(){t.bind(document,"mousemove",T),t.bind(document,"mouseout",F),y=setInterval((function(){2==++M&&w.setIdle(!0)}),g.timeToIdle/2)}))},z=function(){var e;d("onVerticalDrag",(function(e){k&&e<.95?w.hideControls():!k&&e>=.95&&w.showControls()})),d("onPinchClose",(function(t){k&&t<.9?(w.hideControls(),e=!0):e&&!k&&t>.9&&w.showControls()})),d("zoomGestureEnded",(function(){(e=!1)&&!k&&w.showControls()}))},U=[{name:"caption",option:"captionEl",onInit:function(e){o=e}},{name:"share-modal",option:"shareEl",onInit:function(e){u=e},onTap:function(){R()}},{name:"button--share",option:"shareEl",onInit:function(e){l=e},onTap:function(){R()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){a=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){f=e}}],H=function(){var e,n,o,i=function(r){if(r)for(var i=r.length,a=0;a<i;a++){e=r[a],n=e.className;for(var l=0;l<U.length;l++)o=U[l],n.indexOf("pswp__"+o.name)>-1&&(g[o.option]?(t.removeClass(e,"pswp__element--disabled"),o.onInit&&o.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};i(r.children);var a=t.getChildByClass(r,"pswp__top-bar");a&&i(a.children)};w.init=function(){t.extend(e.options,E,!0),g=e.options,r=t.getChildByClass(e.scrollWrap,"pswp__ui"),d=e.listen,z(),d("beforeChange",w.update),d("doubleTap",(function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(g.getDoubleTapZoom(!1,e.currItem),t,333)})),d("preventDragEvent",(function(e,t,n){var r=e.target||e.srcElement;r&&r.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(r.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(r.tagName))&&(n.prevent=!1)})),d("bindEvents",(function(){t.bind(r,"pswpTap click",O),t.bind(e.scrollWrap,"pswpTap",w.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",w.onMouseOver)})),d("unbindEvents",(function(){C||R(),y&&clearInterval(y),t.unbind(document,"mouseout",F),t.unbind(document,"mousemove",T),t.unbind(r,"pswpTap click",O),t.unbind(e.scrollWrap,"pswpTap",w.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",w.onMouseOver),n&&(t.unbind(document,n.eventK,w.updateFullscreen),n.isFullscreen()&&(g.hideAnimationDuration=0,n.exit()),n=null)})),d("destroy",(function(){g.captionEl&&(i&&r.removeChild(i),t.removeClass(o,"pswp__caption--empty")),u&&(u.children[0].onclick=null),t.removeClass(r,"pswp__ui--over-close"),t.addClass(r,"pswp__ui--hidden"),w.setIdle(!1)})),g.showAnimationDuration||t.removeClass(r,"pswp__ui--hidden"),d("initialZoomIn",(function(){g.showAnimationDuration&&t.removeClass(r,"pswp__ui--hidden")})),d("initialZoomOut",(function(){t.addClass(r,"pswp__ui--hidden")})),d("parseVerticalMargin",B),H(),g.shareEl&&l&&u&&(C=!0),j(),$(),N(),V()},w.setIdle=function(e){s=e,x(r,"ui--idle",e)},w.update=function(){k&&e.currItem?(w.updateIndexIndicator(),g.captionEl&&(g.addCaptionHTMLFn(e.currItem,o),x(o,"caption--empty",!e.currItem.title)),_=!0):_=!1,C||R(),j()},w.updateFullscreen=function(r){r&&setTimeout((function(){e.setScrollOffset(0,t.getScrollY())}),50),t[(n.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},w.updateIndexIndicator=function(){g.counterEl&&(a.innerHTML=e.getCurrentIndex()+1+g.indexIndicatorSep+g.getNumItemsFn())},w.onGlobalTap=function(n){var r=(n=n||window.event).target||n.srcElement;if(!m)if(n.detail&&"mouse"===n.detail.pointerType){if(P(r))return void e.close();t.hasClass(r,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?g.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(n.detail.releasePoint))}else if(g.tapToToggleControls&&(k?w.hideControls():w.showControls()),g.tapToClose&&(t.hasClass(r,"pswp__img")||P(r)))return void e.close()},w.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;x(r,"ui--over-close",P(t))},w.hideControls=function(){t.addClass(r,"pswp__ui--hidden"),k=!1},w.showControls=function(){k=!0,_||w.update(),t.removeClass(r,"pswp__ui--hidden")},w.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},w.getFullscreenAPI=function(){var t,n=document.documentElement,r="fullscreenchange";return n.requestFullscreen?t={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:r}:n.mozRequestFullScreen?t={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+r}:n.webkitRequestFullscreen?t={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+r}:n.msRequestFullscreen&&(t={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),t&&(t.enter=function(){if(c=g.closeOnScroll,g.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return e.template[this.enterK]();e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},t.exit=function(){return g.closeOnScroll=c,document[this.exitK]()},t.isFullscreen=function(){return document[this.elementK]}),t}};return e}()}(Nae);const Vae=Cw(Nae.exports);var Lae={exports:{}};function Bae(){}function $ae(){}$ae.resetWarningCache=Bae;Lae.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:$ae,resetWarningCache:Bae};return n.PropTypes=n,n}();const zae=Cw(Lae.exports);var Uae=.05;function Hae(e,t,n){return t=P_(t),D_(e,qae()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function qae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(qae=function(){return!!e})()}var Wae=function(e){function t(e){var n;return Ub(this,t),(n=Hae(this,t,[e])).state={prevStatus:"default",nextStatus:"default",zoomInStatus:"default",zoomOutStatus:"default",originSizeStatus:"default",bestSizeStatus:"default"},n}return F_(t,e),Wb(t,[{key:"afterZoom",value:function(){var e,t=this.props.imageBrowser,n=t.getCurrentZoomLevel(),r=t.getInitialZoomLevel();n===r&&(e="activated"),1===r&&(e="disable"),this.setState({zoomOutStatus:n===Uae?"disable":"default",zoomInStatus:5===n?"disable":"default",originSizeStatus:1===n?"activated":"default",bestSizeStatus:e})}},{key:"afterChange",value:function(){var e=this.props.imageBrowser.getCount();this.setState({nextStatus:1===e?"disable":"default",prevStatus:1===e?"disable":"default"})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.imageBrowser;t.on("afterzoom",(function(){e.afterZoom()})),t.on("afterchange",(function(){e.afterChange()})),t.on("resize",(function(){setTimeout((function(){e.afterChange(),e.afterZoom()}),333)})),this.setState({tooltipContainer:this.tooltipContainer})}},{key:"renderBtn",value:function(e,t,n,r){var o=this.state.tooltipContainer;return o?l.a.createElement(h.a,{title:t,getPopupContainer:function(){return o},mouseEnterDelay:1},l.a.createElement("span",{className:"lake-pswp-".concat(e," btn ").concat(n),onClick:r})):""}},{key:"render",value:function(){var e=this,t=this.props,n=t.imageBrowser,r=t.shouldShowNavigation,o=t.shouldShowDownload,i=t.shouldShowRemove,a=this.state,u=a.prevStatus,c=a.nextStatus,s=a.zoomInStatus,d=a.zoomOutStatus,f=a.originSizeStatus,p=a.bestSizeStatus;return l.a.createElement("div",{className:"lake-pswp-tool-bar"},l.a.createElement("div",{ref:function(t){e.tooltipContainer=t}}),l.a.createElement("div",{className:"pswp-toolbar-content"},r&&l.a.createElement(l.a.Fragment,null,this.renderBtn("arrow-left",uw("上一张"),u,(function(){"disable"!==u&&n.prev()})),l.a.createElement("span",{className:"lake-pswp-counter"}),this.renderBtn("arrow-right",uw("下一张"),c,(function(){"disable"!==c&&n.next()})),l.a.createElement("span",{className:"separation"})),this.renderBtn("zoom-out",uw("缩小"),d,(function(){"disable"!==d&&n.zoomOut()})),this.renderBtn("zoom-in",uw("放大"),s,(function(){"disable"!==s&&n.zoomIn()})),this.renderBtn("origin-size",uw("实际尺寸"),f,(function(){"disable"!==f&&n.zoomToOriginSize()})),this.renderBtn("best-size",uw("适应屏幕"),p,(function(){"disable"!==p&&n.zoomToBestSize()})),o&&this.renderBtn("download",uw("下载图片"),null,(function(){n.download()})),i&&this.renderBtn("remove",uw("删除图片"),null,(function(){n.remove()}))))}}])}(l.a.Component);function Gae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gae(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yae(e,t,n){return t=P_(t),D_(e,Xae()?Reflect.construct(t,[],P_(e).constructor):t.apply(e,n))}function Xae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Xae=function(){return!!e})()}function Jae(e){return["http:","https:","data:","blob:","/"].some((function(t){return e.startsWith(t)}))?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):""}Wae.propTypes={imageBrowser:zae.object,shouldShowNavigation:zae.bool,shouldShowDownload:zae.bool,shouldShowRemove:zae.bool};var Zae=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ub(this,t),e=Yae(this,t);var r=n.pswpOptions||{};return e.options=Kae(Kae(Kae({shouldToggleOnHover:!1,shouldShowNavigation:!0,shouldShowDownload:!1,shouldShowRemove:!1,closable:!0,container:document.body},globalThis.__LakeTableImageBrowser_options||{}),n),{},{pswpOptions:Kae({shareEl:!1,fullscreenEl:!1,zoomEl:!1,history:!1,dragging:Kk.isMobile,closeOnScroll:!1,preloaderEl:!1,captionEl:!1,counterEl:!1,clickToCloseNonZoomable:!0,bgOpacity:.8,showAnimationDuration:0,hideAnimationDuration:0,closeOnVerticalDrag:Kk.isMobile,tapToClose:!0,barsSize:{top:44,bottom:80}},r)}),e.options.closable||(e.options.pswpOptions.escKey=!1,e.options.pswpOptions.closeElClasses=[]),e.images=[],e.pswpDestroy=!0,e.timeouts={},e._initRoot(),e}return F_(t,e),Wb(t,[{key:"_initRoot",value:function(){var e=this,t=this.options.closable?'<button type="button" class="pswp__button lake-pswp-button-close" title="Close (Esc)"></button>':"",n=document.createElement("div");n.innerHTML='\n    <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">\n        <div class="pswp__bg"></div>\n        <div class="pswp__scroll-wrap">\n            <div class="pswp__container">\n                <div class="pswp__item"></div>\n                <div class="pswp__item"></div>\n                <div class="pswp__item"></div>\n            </div>\n            <div class="pswp__ui pswp__ui--hidden">\n                '.concat(t,'\n                <div class="lake-pswp-custom-top-bar"></div>\n            </div>\n        </div>\n    </div>\n    '),this.options.container?this.options.container.appendChild(n):document.body.appendChild(n),this.root=n.children[0],Kk.isMobile?this.root.classList.add("lake-pswp-mobile"):this.root.classList.add("lake-pswp-pc");var r=this.root.querySelector(".lake-pswp-custom-top-bar"),o=this.root.querySelector(".lake-pswp-button-close");this.toolbarContainer=r,this.closeBtnContainer=o,c.a.render(l.a.createElement(Wae,{imageBrowser:this,shouldShowNavigation:this.options.shouldShowNavigation,shouldShowDownload:this.options.shouldShowDownload,shouldShowRemove:this.options.shouldShowRemove}),r,(function(){Kk.isMobile||(e.bindKeyboardEvnet(),e.bindClickEvent(),e.options.shouldToggleOnHover&&e.hoverControllerFadeInAndOut())}))}},{key:"hoverControllerFadeInAndOut",value:function(){var e=this,t=this.toolbarContainer,n=this.closeBtnContainer;t.addEventListener("mouseenter",(function(){e.removeFadeOut(t,"toolbarFadeInAndOut"),e.removeFadeOut(n,"closeFadeInAndOut")})),t.addEventListener("mouseleave",(function(){e.fadeOut(t,"toolbarFadeInAndOut"),e.fadeOut(n,"closeFadeInAndOut")})),n.addEventListener("mouseenter",(function(){e.removeFadeOut(t,"toolbarFadeInAndOut"),e.removeFadeOut(n,"closeFadeInAndOut")})),n.addEventListener("mouseleave",(function(){e.fadeOut(t,"toolbarFadeInAndOut"),e.fadeOut(n,"closeFadeInAndOut")}))}},{key:"removeFadeOut",value:function(e,t){var n=this.timeouts;n[t]&&clearTimeout(n[t]),e.removeClass("pswp-fade-out")}},{key:"fadeOut",value:function(e,t){var n=this.timeouts;n[t]&&clearTimeout(n[t]),n[t]=setTimeout((function(){e.addClass("pswp-fade-out")}),3e3)}},{key:"bindClickEvent",value:function(){var e=this,t=this.root,n=this.closeBtnContainer;t.addEventListener("click",(function(t){var n=t.target;n.classList.contains("pswp__img")&&setTimeout((function(){e.currentZoom=null,e.afterZoom()}),366),(n.classList.contains("pswp__bg")||n.classList.contains("lake-pswp-tool-bar"))&&e.close()})),n.addEventListener("click",(function(){e.close()}))}},{key:"prev",value:function(){this.pswp.prev()}},{key:"next",value:function(){this.pswp.next()}},{key:"renderCounter",value:function(){var e=this.toolbarContainer,t=this.pswp;e&&(e.querySelector(".lake-pswp-counter").innerHTML="".concat(t.getCurrentIndex()+1," / ").concat(t.items.length))}},{key:"getCurrentZoomLevel",value:function(){return this.currentZoom&&Number(this.currentZoom.toFixed(2))||this.pswp&&Number(this.pswp.getZoomLevel().toFixed(2))}},{key:"zoomTo",value:function(e){var t=this.pswp;t.zoomTo(e,{x:t.viewportSize.x/2,y:t.viewportSize.y/2},100),this.currentZoom=e,this.afterZoom()}},{key:"zoomIn",value:function(){var e=this.getCurrentZoomLevel(),t=1.2*e;5!==e&&(t>5&&(t=5),this.zoomTo(t))}},{key:"zoomOut",value:function(){var e=this.getCurrentZoomLevel();if(e!==Uae){var t=e/1.2;t<Uae&&(t=Uae),this.zoomTo(t)}}},{key:"bindKeyboardEvnet",value:function(){var e=this;this.root.addEventListener("keydown",(function(t){(t.metaKey||t.ctrlKey)&&187===t.keyCode&&(t.preventDefault(),e.zoomIn()),(t.metaKey||t.ctrlKey)&&189===t.keyCode&&(t.preventDefault(),e.zoomOut())}))}},{key:"zoomToOriginSize",value:function(){this.zoomTo(1)}},{key:"zoomToBestSize",value:function(){var e=this.getInitialZoomLevel();this.zoomTo(e)}},{key:"getInitialZoomLevel",value:function(){return Number(this.pswp.currItem.initialZoomLevel.toFixed(2))}},{key:"afterZoom",value:function(){this.emit("afterzoom")}},{key:"getCount",value:function(){return this.pswp.items.length}},{key:"afterChange",value:function(){var e=this;if(!Kk.isMobile){var t=this.getInitialZoomLevel();this.renderCounter(),this.currentZoom=t,setTimeout((function(){e.afterZoom()}),100),this.emit("afterchange"),this.currentZoom=this.getInitialZoomLevel()}this.setWhiteBackground()}},{key:"bindPswpEvent",value:function(){var e=this,t=this.pswp;t.listen("afterChange",(function(){e.afterChange()})),t.listen("destroy",(function(){e.pswpDestroy=!0})),t.listen("resize",(function(){e.emit("resize")})),t.listen("imageLoadComplete",(function(){e.setWhiteBackground()}))}},{key:"setWhiteBackground",value:function(){var e=this.root,t=0===this.options.pswpOptions.bgOpacity?"0 2px 14px rgba(0, 0, 0, 0.25)":"0 0 10px rgba(0, 0, 0, 0.5)";e.querySelectorAll(".pswp__img").forEach((function(e){e.complete?(e.style.background="white",e.style["box-shadow"]=t):e.onload=function(){e.style.background="white",e.style["box-shadow"]=t}}))}},{key:"open",value:function(e,n){var r=this;if(!0===this.pswpDestroy){e.forEach((function(e){return e.src=Jae(e.src),e.msrc=Jae(e.msrc),e}));var o=this.root,i=this.options.pswpOptions,a=new XY(o,Vae,e.map((function(e){return Kae({},e)})),Kae({index:n},i)),l=a.lazyLoadItem;a.lazyLoadItem=function(t){if(!e[(e.length+t)%e.length].layoutSelf)return l.call(a,t)},a.listen("gettingData",(function(n,o){isNaN(o.w)||isNaN(o.h)?(o.w=0,o.h=0,t.loadImageSize(o,a,r)):e[n].layoutSelf&&t.loadImageSize(o,a,r,e[n].layoutSelf)})),a.items=e.map((function(e){return e.src=Jae(e.src),e.msrc=Jae(e.msrc),e})),a.init(),this.pswp=a,this.pswpDestroy=!1,this.options.shouldToggleOnHover&&(Kk.isMobile||(this.toolbarContainer.removeClass("pswp-fade-out"),this.fadeOut(this.toolbarContainer,"toolbarFadeInAndOut"),this.closeBtnContainer.removeClass("pswp-fade-out"),this.fadeOut(this.closeBtnContainer,"closeFadeInAndOut")),o.removeClass("pswp-fade-in"),o.addClass("pswp-fade-in")),this.afterChange(),this.bindPswpEvent()}}},{key:"download",value:function(){window.open(this.pswp.currItem.src,"_blank")}},{key:"remove",value:function(){this.emit("remove"),this.destroy()}},{key:"close",value:function(){this.options.closable&&this.pswp&&this.pswp.close()}},{key:"destroy",value:function(){this.root&&(this.close(),this.root.remove(),this.options=null)}}],[{key:"loadImageSize",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t.cleanSlide(e),e.loading=!0,r)e.img=r(),e.img.className="pswp__img",setTimeout((function(){var t;e.loading=!1,e.loaded=!0,null==(t=e.loadComplete)||t.call(e,e)}));else{var o=document.createElement("img");o.className="pswp__img",e.img=o;var i=function(){if(n.pswpDestroy)return o=null,void(e.img=null);(0===e.w||0===e.h)&&(e.w=o.width,e.h=o.height),e.needUpdate=!0,t.updateSize(),e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,o.onload=o.onerror=null,o=null};o.onload=i,o.onerror=function(){e.loadError=!0,i()},o.src=e.src}}}])}(ZY);var Qae=Object.defineProperty,ele=Object.getOwnPropertyDescriptor,tle=function(e){return{src:e.src,msrc:e.src,w:null==e?void 0:e.width,h:null==e?void 0:e.height}};function nle(e,t){var n=(globalThis.__LakeTableImageBrowser||(globalThis.__LakeTableImageBrowser=new Zae),globalThis.__LakeTableImageBrowser),r=Array.isArray(e)?e.map((function(e){return tle(e)})):[e].map((function(e){return tle(e)}));n.open(r,t||0)}var rle=function(){return Wb((function e(){Ub(this,e),this.openerName="image-viewer-opener",this.apps=["image"]}),[{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.list,r=t.index||0;n||(r=0,n=[{src:e,width:t.width,height:t.height}]),nle(n,r)}}])}();rle=function(e,t,n,r){for(var o,i=r>1?void 0:r?ele(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Qae(t,n,i),i}([Ys()],rle);var ole=Object.defineProperty,ile=Object.getOwnPropertyDescriptor,ale=function(){return Wb((function e(){Ub(this,e),this.openerName="user-opener",this.apps=["user"]}),[{key:"open",value:function(e){e.login&&window.open("/"+e.login,"_blank")}}])}();function lle(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ule(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ule(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function ule(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ale=function(e,t,n,r){for(var o,i=r>1?void 0:r?ile(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ole(t,n,i),i}([Ys()],ale);var cle=Object.defineProperty,sle=Object.getOwnPropertyDescriptor,dle=function(e,t,n,r){for(var o,i=r>1?void 0:r?sle(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cle(t,n,i),i},fle=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.registry.registerApp(dae),this.registry.registerApp(fae),this.registry.registerApp(dae),this.registry.registerApp(pae),this.registry.registerApp(vae),this.registry.registerApp(gae),this.registry.registerApp(mae),this.registry.registerApp(yae),this.registry.registerOpener(this.filePreviewOpener),this.registry.registerOpener(this.imageViewerOpener),this.registry.registerOpener(this.hrefOpener),this.registry.registerOpener(this.safeRedirectOpener),this.registry.registerOpener(this.userOpener),this.registry.registerOpener(this.windowOpener),this.registry.registerOpener(this.windowNewOpener),this.registry.init();var e=this.openerHash.getHashes();if(e){var t,n=lle(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;!r.name||!r.url||this.openerService.open(r.name,r.url)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"initConfiguration",value:function(){this._configurationService.registerConfiguration({id:"opener",type:"object",title:"打开器",properties:{useHash:{type:"boolean",description:"opener 是否同步更新 url hash"}}}),this._configurationService.registerDefaultValue({"opener.useHash":!0})}}])}();dle([Xs(Yie)],fle.prototype,"registry",2),dle([Xs(aae)],fle.prototype,"openerHash",2),dle([Xs(sae)],fle.prototype,"openerService",2),dle([Xs(R_)],fle.prototype,"_configurationService",2),dle([Xs(Fae)],fle.prototype,"filePreviewOpener",2),dle([Xs(rle)],fle.prototype,"imageViewerOpener",2),dle([Xs(Mie)],fle.prototype,"hrefOpener",2),dle([Xs(Nie)],fle.prototype,"safeRedirectOpener",2),dle([Xs(ale)],fle.prototype,"userOpener",2),dle([Xs(Uie)],fle.prototype,"windowOpener",2),dle([Xs(Bie)],fle.prototype,"windowNewOpener",2),fle=dle([Ys()],fle);var ple=pd().contribution(Aie).register(tae).register(Yie).register(sae).register(aae).register(fle).register(Fae).register(rle).register(Uie).register(Bie).register(Mie).register(Nie).register(ale);function hle(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vle(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vle(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function vle(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gle(e,t,n){return t=P_(t),D_(e,mle()?Reflect.construct(t,[],P_(e).constructor):t.apply(e,n))}function mle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(mle=function(){return!!e})()}var yle=function(e){function t(e){var n;return Ub(this,t),(n=gle(this,t))._activeViewId="",n._options=e,n.container=e.container,n._kernelService=e.kernelService,n._loadCoreServices(),n.registerPlugins(e.plugins,{container:n.container}),n._registerContribs(e.contribs),n.init(),n._logger.log({type:rR.render,action:"renderInited",data:null}),n}return F_(t,e),Wb(t,[{key:"renderService",get:function(){return this._renderService}},{key:"init",value:function(){this._listenEvent(),this._renderService.init({onError:this._options.onError})}},{key:"destroy",value:function(){this._renderService.destroy(),this.unregisterPlugins(this.container)}},{key:"render",value:function(e){if(!e)throw Error("Can't get active view data.");this._renderService.render(e,this.container)}},{key:"_logger",get:function(){return this.container.get(oR)}},{key:"_listenEvent",value:function(){var e=this;this._kernelService.onDataLoaded((function(t){var n=e.container.get(R_).getValue("render.noRecord");if("loadedRecords"===t||n){var r=e._readService.getActiveView();r&&(e._activeViewId=r.get("uuid"),e.render(r))}})),this._kernelService.onDataChanged((function(){if(e.container.get(R_).getValue("render.noRecord")||!(e._lifeService.status<Jb.RecordReady)){var t=e._readService.getActiveView();t&&e._activeViewId!==t.get("uuid")&&(e._activeViewId=t.get("uuid"),e.render(t))}})),this._lifeService.when(Jb.Rendered,(function(){e.container.get(fle).init()}))}},{key:"_loadCoreServices",value:function(){this._renderService=this.container.get(bie),this._lifeService=this.container.get(Zb),this._readService=this.container.get(MI)}},{key:"_registerContribs",value:function(e){if(e){var t,n=hle(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.container.register(r)}}catch(e){n.e(e)}finally{n.f()}}}}])}(Xk);function ble(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wle(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ble(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ble(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _le(e,t,n){return t=P_(t),D_(e,kle()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function kle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(kle=function(){return!!e})()}var Cle=function(e){function t(e){var n;return Ub(this,t),(n=_le(this,t,[e])).state={key:+new Date},n._props=e.props,n._ref=l.a.createRef(),n.DeferRenderComponent=aX(e.component),n}return F_(t,e),Wb(t,[{key:"componentDidMount",value:function(){}},{key:"getRef",value:function(){return this._ref.current}},{key:"update",value:function(e){this._props=wle(wle({},this._props),e),this.forceUpdate()}},{key:"render",value:function(){var e=this.props,t=e.component,n=e.container,r=this._props.deferMode,o=r===nie.DISABLE?t:this.DeferRenderComponent;return l.a.createElement(R6,{onError:this.props.onError},l.a.createElement(wX,{mode:r===nie.DISABLE?nie.ASYNC_CONCURRENT:r,batchSize:5},l.a.createElement(W3,{value:{container:n,onError:this.props.onError},key:this.state.key},l.a.createElement(o,wle(wle({},this._props),{},{ref:this._ref})))))}}])}(a.Component);function Ele(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Cle.propTypes={props:zae.object.isRequired,component:zae.any.isRequired,container:zae.object.isRequired,onError:zae.func};var Ole=function(){return Wb((function e(t){var n=t.onError;Ub(this,e),this._onError=n}),[{key:"render",value:function(e,t,n){var r=null;if(!this.Component)throw Error("This view didn't provide view component.");return c.a.render(l.a.createElement(Cle,{props:t,component:this.Component,container:n,ref:function(e){r=e},onError:this._onError}),e),{getRoot:function(){return e},getViewNode:function(){return r},getReactRef:function(){return null==r?void 0:r.getRef()},rerender:function(e){r&&r.update(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ele(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ele(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},destroy:function(){var t;c.a.unmountComponentAtNode(e),r=null,null==(t=e.parentNode)||t.removeChild(e)},destroyAsync:function(){var t=this;e.style.display="none",vC((function(){t.destroy()}))}}}},{key:"unmount",value:function(e){}}])}();function Sle(e,t,n){return t=P_(t),D_(e,xle()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function xle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(xle=function(){return!!e})()}var jle=Object.defineProperty,Ile=Object.getOwnPropertyDescriptor,Rle=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ile(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jle(t,n,i),i},Ale=function(e){function t(){var e;return Ub(this,t),(e=Sle(this,t,arguments))._onStatusChange=e._register(new ck),e.onStatusChange=e._onStatusChange.event,e.isActive=!1,e}return F_(t,e),Wb(t,[{key:"isAutoActive",get:function(){return this._configurationService.getValue("render.autoActive")}},{key:"active",value:function(){this.isActive||(this.isActive=!0,this._onStatusChange.emit({status:iie.ACTIVE,isActive:this.isActive}))}},{key:"inactive",value:function(){this.isActive&&(this.isActive=!1,this._onStatusChange.emit({status:iie.INACTIVE,isActive:this.isActive}))}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);Rle([Xs(R_)],Ale.prototype,"_configurationService",2),Rle([Vs()],Ale.prototype,"destroy",1),Ale=Rle([Ys({token:aie})],Ale);var Dle=pd().contribution(eie).contribution(Qoe).contribution(oie).register(bie).register(Cie).register(pie).register(xie).register(cie).register(Rie).register(Ale);function Ple(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mle(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mle(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Mle(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tle=Object.defineProperty,Fle=Object.getOwnPropertyDescriptor,Nle=function(e,t,n,r){for(var o,i=r>1?void 0:r?Fle(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Tle(t,n,i),i},Vle=["copy","paste","cut"],Lle=function(){return Wb((function e(){Ub(this,e),this._toDestroyStore=new H_,this._ignoreEnableOnInputVerify=!1}),[{key:"init",value:function(){this._hotkeyRegister.init(),this._$container=document,this._hotkeyListenerBindEvents()}},{key:"_getTargetHotkeyByEvent",value:function(e){var t=this._getPotentialHotkeyIdsByEvent(e);return this._getEnableHotkey(e,t)}},{key:"fireEventByEditable",value:function(e,t){this._ignoreEnableOnInputVerify=!0,this._dispatchEvent(e,t),this._ignoreEnableOnInputVerify=!1}},{key:"_dispatchEvent",value:function(e,t){var n=null;tu(t)&&Vle.includes(t)&&(n=this._hotkeyRegister.getHotkeyItem(t)),t||(n=this._getTargetHotkeyByEvent(e))&&e.preventDefault(),n&&this._isValidEventInThisHotKey(e,n)&&this._runHotkeyCallBack(e,n)}},{key:"registerItem",value:function(e){this._hotkeyRegister.registerItem(e)}},{key:"getRegisterHotKeys",value:function(){return this._hotkeyRegister.getHotkeyItems()}},{key:"_hotkeyListenerBindEvents",value:function(){var e=this;this._toDestroyStore.push(t6(this._$container,"keydown",(function(t){e._dispatchEvent(t)}))),Vle.forEach((function(t){e._toDestroyStore.push(t6(document,t,(function(n){e._dispatchEvent(n,t)})))}))}},{key:"_getPotentialHotkeyIdsByEvent",value:function(e){var t=$oe.keyEventToHotKey(e);return this._hotkeyRegister.getRegisterHotkeyIdsByPressedKey(t)}},{key:"_getEnableHotkey",value:function(e,t){if(t){var n,r=Ple(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=this._hotkeyRegister.getHotkeyItem(o);if(this._isValidEventInThisHotKey(e,i))return i}}catch(e){r.e(e)}finally{r.f()}}}},{key:"_isValidEventInThisHotKey",value:function(e,t){var n;return!(!e||!t||!this._ignoreEnableOnInputVerify&&function(e){var t=e.target,n=t&&t.tagName,r=!(!n||!o6.some((function(e){return e.toLocaleLowerCase()===n.toLocaleLowerCase()}))),o=!(null==t||!t.isContentEditable);return r||o}(e)&&!t.enableOnInput||!this._activeTableService.isActive)&&(!(null==(n=t.isEnable)||!n.call(t))||(r6(e),e.preventDefault(),!1))}},{key:"_runHotkeyCallBack",value:function(e,t){t&&(t.preventDefault&&e.preventDefault(),t.onHotKey(e))}},{key:"destroy",value:function(){this._toDestroyStore.destroy(),this._hotkeyRegister.unRegister()}}])}();Nle([Xs(Zoe)],Lle.prototype,"_hotkeyRegister",2),Nle([Xs(aie)],Lle.prototype,"_activeTableService",2),Lle=Nle([Ys({token:Moe})],Lle);var Ble=pd().contribution(Toe).register(Lle).register(Zoe);function $le(){throw new Error("INVALID_USEEVENT_INVOCATION: the callback from useEvent cannot be invoked before the component has mounted.")}function zle(e){var t=Object(a.useRef)($le);Object(a.useLayoutEffect)((function(){t.current=e}),[e]);var n=Object(a.useRef)(null);return n.current||(n.current=function(){return t.current.apply(this,arguments)}),n.current}function Ule(e,t,n){var r=Object(a.useRef)(null),o=(null==n?void 0:n.isEnable)||Foe.isEnable,i=zle(t);return Object(a.useLayoutEffect)((function(){var t=function(t){if(null!==r.current&&document.activeElement!==r.current&&!r.current.contains(document.activeElement))return r6(t),void t.preventDefault();Uoe(e).forEach((function(e){if($oe.isKeyboardEventMatchingHotkey(t,e)){if(!o())return r6(t),void t.preventDefault();null!=n&&n.preventDefault&&t.preventDefault(),i(t)}}))};return(r.current||document).addEventListener("keydown",t),function(){(r.current||document).removeEventListener("keydown",t)}}),[e,i]),r}function Hle(e,t,n){var r=this,o=Object(a.useRef)(null),i=Object(a.useRef)(0),l=Object(a.useRef)(),u=Object(a.useRef)([]),c=Object(a.useRef)(),s=Object(a.useRef)(),d=Object(a.useRef)(e),f=Object(a.useRef)(!0);Object(a.useEffect)((function(){d.current=e}),[e]);var p=!t&&0!==t&&typeof window<"u";if("function"!=typeof e)throw new TypeError("Expected a function");t=t||0;var h=!!(n=n||{}).leading,v=!("trailing"in n)||!!n.trailing,g="maxWait"in n,m=g?Math.max(n.maxWait||0,t):null;Object(a.useEffect)((function(){return f.current=!0,function(){f.current=!1}}),[]);var y=Object(a.useMemo)((function(){var e=function(e){var t=u.current,n=c.current;return u.current=c.current=[],i.current=e,s.current=d.current.apply(n,t)},n=function(e,t){p&&l.current&&cancelAnimationFrame(l.current),l.current=p?requestAnimationFrame(e):setTimeout(e,t)},a=function(e){if(!f.current)return!1;var n=e-(o.current||0),r=e-i.current;return!o.current||n>=(t||0)||n<0||g&&r>=(m||0)},y=function(t){return l.current=null,v&&u.current?e(t):(u.current=c.current=null,s.current)},b=function e(){var r=Date.now();if(a(r))return y(r);if(f.current){var l=r-(o.current||0),u=r-i.current,c=(t||0)-l,s=g?Math.min(c,(m||0)-u):c;n(e,s)}},w=function(){for(var d=Date.now(),p=a(d),v=arguments.length,m=new Array(v),y=0;y<v;y++)m[y]=arguments[y];if(u.current=m,c.current=r,o.current=d,p){if(!l.current&&f.current)return i.current=o.current,n(b,t||0),h?e(o.current):s.current;if(g)return n(b,t||0),e(o.current)}return l.current||n(b,t||0),s.current};return w.cancel=function(){l.current&&(p?cancelAnimationFrame(l.current):clearTimeout(l.current)),i.current=0,u.current=o.current=c.current=l.current=null},w.isPending=function(){return!!l.current},w.flush=function(){return l.current?y(Date.now()):s.current},w}),[h,g,t,m,v,p]);return Object(a.useEffect)((function(){return function(){y.flush()}}),[y]),y}function qle(e){var t=gP(Object(a.useState)({bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0}),2),n=t[0],r=t[1],o=Object(a.useRef)(),i=Object(a.useRef)(),l=Object(a.useCallback)((function(e){return e.width!==(null==n?void 0:n.width)||e.height!==(null==n?void 0:n.height)||e.left!==(null==n?void 0:n.left)||e.right!==(null==n?void 0:n.right)||e.top!==(null==n?void 0:n.top)||e.bottom!==(null==n?void 0:n.bottom)||e.x!==(null==n?void 0:n.x)||e.y!==(null==n?void 0:n.y)}),[n]),u=Hle((function(e){r(e)}),(null==e?void 0:e.debounce)||300),c=Object(a.useCallback)((function(e){var t,n;null==(t=i.current)||t.disconnect(),null!=o.current&&cancelAnimationFrame(o.current),e&&(null==(n=i.current)||n.unobserve(e))}),[i.current]),s=Object(a.useCallback)((function(e){r(e)}),[]);return[n,function(t){null!==t&&(i.current=new ResizeObserver((function(n){c(t),o.current=requestAnimationFrame((function(){var t=n[0].contentRect.toJSON();if(null!=e&&e.debounce)u(t);else{if(!l(t))return;r(t)}}))})),i.current.observe(t))},c,s]}function Wle(e){var t=e.value,n=e.defaultValue,r=e.onChange,o=Array.isArray(t)?t.map((function(e){return"string"==typeof e?e:e.value?e.value:e.name?e.name:e})).join(","):t,i=Poe(),l=Object(a.useRef)(void 0!==t?t:n),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="function"==typeof e?e(l.current):e;!t&&n===l.current||(l.current=n,i(),null==r||r(n))};return Object(a.useEffect)((function(){void 0!==t&&!ou(t,l.current)&&u(t)}),[o]),[l.current,u]}var Gle=function(e){var t=Object(a.useRef)(e);t.current=e,Object(a.useEffect)((function(){return function(){return t.current()}}),[])},Kle=[{value:!0,name:uw("是")},{value:!1,name:uw("否")}],Yle=function(e){var t,n=e.id,r=e.type,o=void 0===r?Aoe.Checkbox:r,i=e.defaultValue,a=e.value,u=e.onChange,c=e.focus,s=gP(Wle({value:a,defaultValue:i,onChange:u}),2),d=s[0],f=s[1];return o===Aoe.Checkbox?t=l.a.createElement(p.a,{checked:d,onChange:function(e){var t=e.target.checked;null==u||u(t),f(t)}}):o===Aoe.Radio&&(t=l.a.createElement(v.a.Group,{defaultValue:d,autoFocus:c},Kle.map((function(e,t){return l.a.createElement(v.a,{value:e.value,key:t,onChange:function(t){var n=e.value;null==u||u(n),f(n)}},l.a.createElement("span",{className:"lakex-table-form-type-checkbox-value"},e.name))})))),l.a.createElement("div",{className:"lakex-table-form-checkbox",id:n},t)};function Xle(){return l.a.createElement("div",{className:"lakex-table-form-empty"},"(".concat(uw("空"),")"))}var Jle=function(e){var t=e.value,n=e.format,r=void 0===n?"YYYY-MM-DD":n,o=e.showEmpty;return t?l.a.createElement("div",{className:"lakex-table-form-date-readonly"},t?i()(t).format(r):""):o?l.a.createElement(Xle,null):null},Zle=["id","onChange","defaultValue","value","focus","renderMode","format","rectStyle"];function Qle(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function eue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qle(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qle(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tue=function(e){var t=e.id,n=e.onChange,r=void 0===n?function(){}:n,o=e.defaultValue,u=e.value,c=e.focus,s=e.renderMode,d=e.format,f=e.rectStyle,p=void 0===f?{}:f,h=Y3(e,Zle),v=G3(R_),g=gP(Wle({value:u,defaultValue:o,onChange:r}),2),m=g[0],y=g[1],b=Object(a.useRef)(null),w=Object(a.useMemo)((function(){return m?i()(m):""}),[m]);Object(a.useEffect)((function(){c&&setTimeout((function(){var e;null==(e=b.current)||e.focus()}),100)}),[c]);var _=(null==d?void 0:d.split(" "))||[],k=_[1];return l.a.createElement("div",{className:"lakex-table-form-date lakex-table-form-date-render-mode-".concat(s),id:t},l.a.createElement(Bre,eue(eue({ref:b,defaultValue:w,value:w,autoFocus:c,format:d,showTime:k&&{format:_[1]},onChange:function(){var e;y(null==(e=arguments.length<=0?void 0:arguments[0])?void 0:e.toDate())},style:eue({},p)},h),{},{getPopupContainer:function(){var e=(null==v?void 0:v.getValue("modal.customModalContainer"))||document.body,t=e.querySelector(".lakex-table-date-picker-container");return t||((t=document.createElement("div")).classList.add("lakex-table-date-picker-container"),e.appendChild(t)),t}})))},nue=function(e){var t=e.value,n=e.showEmpty,r=G3(sae);if(!t)return n?l.a.createElement(Xle,null):null;return l.a.createElement("div",{className:"lakex-table-form-email-readonly"},l.a.createElement("span",{className:"lakex-table-form-email-text"},t),l.a.createElement(g6,{className:"lakex-table-form-email-action",type:"FieldEmail",onClick:function(e){e.stopPropagation(),null==r||r.open("email","mailto:"+t)}}))},rue=function(e){var t=e.id,n=e.defaultValue,r=void 0===n?"":n,o=e.focus,i=e.onBlur,u=e.renderMode,c=e.prefix,d=Object(a.useRef)(null),f=gP(Wle({value:e.value,defaultValue:e.defaultValue,onChange:e.onChange}),2),p=f[0],h=f[1],v=G3(sae);Object(a.useEffect)((function(){o&&d.current&&d.current.focus({cursor:"end"})}),[o]);var g=null!==c?c:l.a.createElement(g6,{type:"FieldEmail",size:14});return l.a.createElement("div",{className:"lakex-table-form-email lakex-table-form-email-render-mode-".concat(u),id:t},l.a.createElement(s.a,{allowClear:u!==rie.LITE,value:p,defaultValue:r,type:"text",placeholder:uw("请输入"),prefix:g,onChange:function(t){var n,r=t.target.value;h(r),null==(n=e.onChange)||n.call(e,r)},onBlur:i,suffix:l.a.createElement(g6,{className:u$("lakex-table-form-email-action",{hasValue:p}),type:"FieldEmail",onClick:function(e){e.stopPropagation(),null==v||v.open("email","mailto:"+p)}}),autoFocus:o,ref:d}))},oue=Ts.defineToken("ImageContribution"),iue=Object.defineProperty,aue=Object.getOwnPropertyDescriptor,lue=function(e,t,n,r){for(var o,i=r>1?void 0:r?aue(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&iue(t,n,i),i},uue=function(){return Wb((function e(){Ub(this,e)}),[{key:"getProvider",value:function(){var e=this.imageProvider.getContributions()||[],t=e[e.length-1];return null==t?void 0:t.registerImage()}}])}();lue([bd(oue)],uue.prototype,"imageProvider",2),uue=lue([Ys()],uue);var cue=Object.defineProperty,sue=Object.getOwnPropertyDescriptor,due=function(e,t,n,r){for(var o,i=r>1?void 0:r?sue(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cue(t,n,i),i},fue=function(){return Wb((function e(){Ub(this,e)}),[{key:"_provider",get:function(){return this._imageRegistry.getProvider()}},{key:"getExts",value:function(){var e;return null!=(e=this._provider)&&e.getExts?this._provider.getExts():Eae.IMAGE_EXT.join(",")}},{key:"tryGetWebp",value:function(e,t,n){var r;return null!=(r=this._provider)&&r.tryGetWebp?this._provider.tryGetWebp(e,t,n):e}},{key:"getRenderUrl",value:function(e,t,n){var r;return null!=(r=this._provider)&&r.getRenderUrl?this._provider.getRenderUrl(e,t,n):e}},{key:"getThumbnailUrl",value:function(e,t,n,r){var o;return null!=(o=this._provider)&&o.getThumbnailUrl?this._provider.getThumbnailUrl(e,t,n,r):e}}])}();due([Xs(uue)],fue.prototype,"_imageRegistry",2),fue=due([Ys()],fue);var pue=pd().contribution(oue).register(uue).register(fue);function hue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hue(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gue=function(e){var t,n=e.type,r=void 0===n?"file":n,o=e.file,i=e.list,a=void 0===i?[]:i,u=e.size,c=void 0===u?32:u,s=G3(sae),d=G3(Aae),f=G3(fue),p=o.src;if(!p)return null;if("file"===r){var h=null==d?void 0:d.getFileKey(o);h&&(t=function(e){return l.a.createElement(b6,vue(vue({ext:h},e),{},{size:c}))})}else p=(null==f?void 0:f.getThumbnailUrl(p,o.width,o.height,c))||p,a=a.map((function(e){return e.src=null==f?void 0:f.getRenderUrl(e.src,e.width,e.height),e})),t=function(e){return l.a.createElement("img",vue({loading:"lazy",src:p},e))};return l.a.createElement("div",{className:"lakex-table-simple-file-item ".concat(r),"data-id":o.uid},l.a.createElement("div",{className:"lakex-table-simple-file-img"},t&&l.a.createElement(t,{className:"lakex-table-simple-file-".concat(r),onClick:function(e){e.preventDefault(),e.stopPropagation();var t={};"image"===r?t={list:a,index:a.findIndex((function(e){return e.src===o.src}))}:"file"===r&&(t={size:o.size}),null==s||s.open(r,o.src,t)}})),l.a.createElement("div",{className:"lakex-table-simple-file-name"},o.name))},mue=function(e){var t,n=e.id,r=e.value,o=void 0===r?[]:r;return o?l.a.createElement("div",{className:"lakex-table-file-list",id:n},null==(t=o.map)?void 0:t.call(o,(function(e,t){return l.a.createElement(gue,{key:e.uid||t,type:"file",file:e,size:24})}))):null},yue=function(e){return e.IMAGE="image",e.FILE="file",e}(yue||{}),bue=function(e){return e.PENDING="pending",e.RUNNING="running",e.SUCCESS="success",e.ERROR="error",e.ABORTED="aborted",e.TIMEOUT="timeout",e}(bue||{}),wue=Ts.defineToken("UploadContribution"),_ue=Object.defineProperty,kue=Object.getOwnPropertyDescriptor,Cue=function(e,t,n,r){for(var o,i=r>1?void 0:r?kue(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_ue(t,n,i),i},Eue=function(){return Wb((function e(){Ub(this,e)}),[{key:"getUploader",value:function(){if(this._uploader)return this._uploader;var e=this.uploadProvider.getContributions(),t=e[e.length-1];return this._uploader=t.registerUpload(),this._uploader}}])}();function Oue(e,t,n){return t=P_(t),D_(e,Sue()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Sue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Sue=function(){return!!e})()}Cue([bd(wue)],Eue.prototype,"uploadProvider",2),Eue=Cue([Ys()],Eue);var xue=Object.defineProperty,jue=Object.getOwnPropertyDescriptor,Iue=function(e,t,n,r){for(var o,i=r>1?void 0:r?jue(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&xue(t,n,i),i},Rue=function(e){function t(){var e;return Ub(this,t),(e=Oue(this,t,arguments))._onDidChange=e._register(new ck),e.onDidChange=e._onDidChange.event,e._fileMap={},e}return F_(t,e),Wb(t,[{key:"beforeUpload",value:function(){var e=mC(X_.mark((function e(t){return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"init",value:function(){this.uploadTask=this.taskService.createQueueTask({name:this.name})}},{key:"uploadFile",value:function(){var e=mC(X_.mark((function e(t,n){var r,o=this;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.uid=(null==t?void 0:t.uid)||fw(),(r=this._uploadRegistry.getUploader()).checkSize&&r.checkSize(t,this.code),e.prev=3,e.next=6,this.beforeUpload(t);case 6:e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(3),console.error(e.t0),g.a.error(uw("文件读取失败，请重新上传")),this._onDidChange.emit({status:bue.ERROR,file:t}),e.abrupt("return");case 14:if(r.upload){e.next=16;break}return e.abrupt("return");case 16:r.upload(t,this.type,(function(e){e.status===bue.RUNNING&&e.percent?n.onProcess(e.percent):e.status===bue.SUCCESS?n.onSuccess():e.status===bue.ERROR&&n.onError(),o._onDidChange.emit(e)}));case 17:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addFile",value:function(e){var t=this;return e.uid=(null==e?void 0:e.uid)||fw(),this._fileMap[e.uid]=e,this.uploadTask.addJob(e.uid,function(){var e=mC(X_.mark((function e(n){return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.uploadFile(t._fileMap[n.jobId],n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this),this.uploadTask.destroy()}}])}($_);function Aue(e,t,n){return t=P_(t),D_(e,Due()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Due(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Due=function(){return!!e})()}Iue([Xs(OR)],Rue.prototype,"taskService",2),Iue([Xs(R_)],Rue.prototype,"configuration",2),Iue([Xs(Eue)],Rue.prototype,"_uploadRegistry",2),Iue([Ns()],Rue.prototype,"init",1),Iue([Vs()],Rue.prototype,"destroy",1),Rue=Iue([Ks()],Rue);var Pue=Object.defineProperty,Mue=Object.getOwnPropertyDescriptor,Tue=function(e){function t(){var e;return Ub(this,t),(e=Aue(this,t,arguments)).name=uw("图片上传任务"),e.type=yue.IMAGE,e.maxSizeCode="max_single_image_size",e}return F_(t,e),Wb(t,[{key:"beforeUpload",value:function(e){var t=this;return new Promise((function(n,r){var o=new FileReader;o.addEventListener("load",(function(r){var o=function(){t._onDidChange.emit({status:bue.RUNNING,file:e}),n(e)};if(r.target){var i=new Image;i.src=r.target.result,i.onload=function(){e.width=i.width,e.height=i.height,o()},i.onerror=function(t){console.error("图片预处理失败",t),n(e)}}else o()}),!1),o.addEventListener("error",(function(){r(e)})),o.readAsDataURL(e)}))}}])}(Rue);function Fue(e,t,n){return t=P_(t),D_(e,Nue()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Nue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Nue=function(){return!!e})()}Tue=function(e,t,n,r){for(var o,i=r>1?void 0:r?Mue(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Pue(t,n,i),i}([Ys()],Tue);var Vue=Object.defineProperty,Lue=Object.getOwnPropertyDescriptor,Bue=function(e){function t(){var e;return Ub(this,t),(e=Fue(this,t,arguments)).name=uw("附件上传任务"),e.type=yue.FILE,e.maxSizeCode="max_single_file_size",e}return F_(t,e),Wb(t)}(Rue);Bue=function(e,t,n,r){for(var o,i=r>1?void 0:r?Lue(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Vue(t,n,i),i}([Ys()],Bue);var $ue=Object.defineProperty,zue=Object.getOwnPropertyDescriptor,Uue=function(e,t,n,r){for(var o,i=r>1?void 0:r?zue(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&$ue(t,n,i),i},Hue=function(){return Wb((function e(){Ub(this,e)}),[{key:"initConfiguration",value:function(){this._configuration.registerConfiguration({id:"upload",type:"object",title:"上传",properties:{image:{type:"object",properties:{accept:{type:"string",description:"图片可接受的格式"}}},file:{type:"object",properties:{accept:{type:"string",description:"文件可接受的格式"}}}}}),this._configuration.registerDefaultValue({"upload.image.accept":this._imageService.getExts(),"upload.file.accept":this._fileService.getExts()})}},{key:"getAccept",value:function(e){return e===yue.IMAGE?this._configuration.getValue("upload.image.accept"):e===yue.FILE?this._configuration.getValue("upload.file.accept"):void 0}},{key:"uploadImage",value:function(e){return this.imageUploadTask.addFile(e)}},{key:"uploadFile",value:function(e){return this.fileUploadTask.addFile(e)}}])}();Uue([Xs(R_)],Hue.prototype,"_configuration",2),Uue([Xs(Aae)],Hue.prototype,"_fileService",2),Uue([Xs(fue)],Hue.prototype,"_imageService",2),Uue([Xs(Bue)],Hue.prototype,"fileUploadTask",2),Uue([Xs(Tue)],Hue.prototype,"imageUploadTask",2),Hue=Uue([Ys()],Hue);var que=pd().contribution(wue).register(Eue).register(Hue).register(Bue).register(Tue),Wue=function(e){var t=e.onRetry,n=e.onRemove;return l.a.createElement("div",{className:"lakex-table-file-upload-error"},l.a.createElement(g6,{className:"remove-file-icon",type:"Delete",onClick:n}),uw("上传失败"),l.a.createElement("div",{className:"re-upload-file",onClick:t},uw("重新上传")))};function Gue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gue(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yue=function(e){var t,n=e.file,r=e.list,o=void 0===r?[]:r,i=e.type,a=void 0===i?"file":i,u=e.readonly,c=e.onRemove,s=void 0===c?function(){}:c,d=G3(sae),f=G3(Aae),p=G3(fue),h=n.src;if(!h)return null;if("file"===a){var v=null==f?void 0:f.getFileKey(n);v&&(t=function(e){return l.a.createElement(b6,Kue({ext:v},e))})}else h=(null==p?void 0:p.getThumbnailUrl(h,n.width,n.height,150))||h,t=function(e){return l.a.createElement("img",Kue({loading:"lazy",src:h},e))};return l.a.createElement("div",{className:u$("lakex-table-file-item"),"data-id":n.uid},l.a.createElement("div",{className:"lakex-table-file-".concat(a)},t&&l.a.createElement(t,{className:"lakex-table-file-item-image",size:120}),l.a.createElement("div",{className:"lakex-table-file-actions"},l.a.createElement(g6,{type:"Preview",onClick:function(e){var t={};"image"===a?t={list:o,index:o.findIndex((function(e){return e.src===n.src}))}:"file"===a&&(t={size:n.size}),null==d||d.open(a,n.src,t)}}),l.a.createElement(g6,{type:"Download",onClick:function(){return e=n.src,void window.open(e,"_blank");var e}}),!u&&l.a.createElement(g6,{type:"Delete",onClick:function(){return s(n)}}))),l.a.createElement("div",{className:"lakex-table-file-name"},n.name))},Xue=function(e){var t=e.percent;return l.a.createElement("div",{className:"lakex-table-file-uploading-file"},parseFloat(t.toFixed(2)),"%",l.a.createElement(m.a,{indicator:l.a.createElement(g6,{className:"lakex-table-file-uploading-icon",type:"Loading"})}))},Jue=function(){return l.a.createElement("div",{className:"lakex-table-file-uploading-file"},0,"%",l.a.createElement(m.a,{indicator:l.a.createElement(g6,{className:"lakex-table-file-uploading-icon",type:"Loading"})}))};function Zue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Que(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zue(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ece=function(e){var t=e.event,n=e.type,r=e.list,o=e.onRemove,i=void 0===o?function(){}:o,a=e.onRetry,u=void 0===a?function(){}:a,c=tH({id:t.file.uid}),s=c.attributes,d=c.listeners,f=c.setNodeRef,p=c.transform,h=c.transition,v=c.isDragging,g={transform:d6.Transform.toString(p),transition:h,zIndex:v?"100":"auto",opacity:v?.3:1},m=null;return t.status===bue.SUCCESS?m=l.a.createElement(Yue,{type:n,key:t.file.uid,file:t.file,list:r.filter((function(e){return e.status===bue.SUCCESS})).map((function(e){return e.file})),onRemove:i}):t.status===bue.RUNNING?m=l.a.createElement(Xue,{key:t.file.uid,percent:t.percent||0}):t.status===bue.PENDING?m=l.a.createElement(Jue,null):t.status===bue.ERROR&&(m=l.a.createElement(Wue,{onRemove:function(){return i(t.file)},onRetry:function(){return u(t.file)}})),l.a.createElement("div",Que(Que({ref:f,style:Que({},g)},d),s),m)},tce=function(e){var t=e.id,n=e.type,r=e.list,o=e.onDragEnd,i=void 0===o?function(){}:o,u=e.onRemove,c=void 0===u?function(){}:u,s=e.onRetry,d=void 0===s?function(){}:s,f=Object(a.useMemo)((function(){return r.map((function(e){return Que(Que({},e),{},{id:e.file.uid||fw()})}))}),[r]),p=function(e){var t=gP(Object(a.useState)(null),2),n=t[0],r=t[1],o=function(){var t=mC(X_.mark((function t(n){var o,i;return X_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r(null),o=n.active,i=n.over,o.id!==i.id&&e(i.id,o.id);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{activeId:n,sensors:U$(z$(Vz,{activationConstraint:{distance:8}})),handleDragStart:function(e){r(e.active.id)},handleDragEnd:o}}(i),h=p.activeId,v=p.sensors,g=p.handleDragStart,m=p.handleDragEnd,y=Object(a.useMemo)((function(){return r.find((function(e){return e.file.uid===h}))}),[h,r]);return l.a.createElement("div",{id:t},l.a.createElement(bU,{sensors:v,collisionDetection:Z$,onDragStart:g,onDragEnd:m},l.a.createElement(KU,{items:f,strategy:UU},l.a.createElement("div",{className:"lakex-table-file"},r.map((function(e,t){return l.a.createElement("div",{key:e.id||t,className:"lakex-table-file-item-wrap"},l.a.createElement(ece,{event:e,type:n,list:r,onRemove:c,onRetry:d}))})))),l.a.createElement(NU,{dropAnimation:null},y?l.a.createElement(ece,{event:y,type:n,list:r,onRemove:c,onRetry:d}):null)))},nce=y.a.Dragger,rce=function(e){var t;return(null==(t=null==e?void 0:e.map)?void 0:t.call(e,(function(e){return{id:e.uid,status:bue.SUCCESS,file:e}})))||[]},oce=function(e){var t=e.id,n=void 0===t?fw(32):t,r=e.type,o=void 0===r?yue.IMAGE:r,i=e.files,u=e.className,c=e.onChange,s=void 0===c?function(){}:c,d=e.onCreate,f=void 0===d?function(){}:d,p=e.onRemove,h=void 0===p?function(){}:p,v=e.onOrderChange,m=void 0===v?function(){}:v,w=Hle((function(e){s(e)}),300),_=Object(a.useRef)(null),k=Poe(),C=G3(Hue),E=null==C?void 0:C.getAccept(o),O=gP(Object(a.useState)(rce(i)),2),S=O[0],x=O[1],j=Object(a.useRef)(rce(i)),I=gP(Object(a.useState)(0===S.length),2),R=I[0],A=I[1];Object(a.useEffect)((function(){var e=rce(i);x(e),j.current=e}),[i]);var D=function(e){e.status===bue.ERROR&&g.a.error(e.message||uw("上传失败，请重试"));var t=j.current,n=t.findIndex((function(t){return t.file.uid===e.file.uid}));n>-1?(e.id=e.file.uid,t[n]=e):t.push(e),e.status===bue.SUCCESS&&f(e.file),j.current=t,M(t)};Object(a.useEffect)((function(){null==C||C.imageUploadTask.onDidChange((function(e){e.file.uploadId===n&&D(e)})),null==C||C.fileUploadTask.onDidChange((function(e){e.file.uploadId===n&&D(e)}))}),[]);var P=Object(a.useCallback)((function(e){e.uploadId=n,"image"===o?null==C||C.uploadImage(e):"file"===o&&(null==C||C.uploadFile(e))}),[]),M=Object(a.useCallback)((function(e){var t=e.filter((function(e){return e.status===bue.SUCCESS})).map((function(e){return e.file}));S.map((function(e){return e.file.uid})).join(",")!==t.map((function(e){return e.uid})).join(",")&&w(t),x(e),A(0===e.length),k()}),[S]),T=Kk.isMobile?"lakex-table-file-manage-component-h5":"";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:u$("lakex-table-file-manage-component",T,u)},l.a.createElement("div",{onClick:function(){var e;null==(e=_.current)||e.focus()},onPaste:function(e){var t;e.preventDefault(),e.stopPropagation();var n=null==(t=e.clipboardData)?void 0:t.files;if(n&&n.length){var r=Array.from(n);null==r||r.forEach((function(e){return P(e)}))}else g.a.error(uw("剪贴板里没有文件可粘贴"))},className:"lakex-table-file-manage-component-upload"},l.a.createElement("input",{className:"lakex-table-file-manage-component-paste-container",ref:_}),l.a.createElement(nce,{showUploadList:!1,customRequest:function(e){return P(e.file)},accept:E,openFileDialogOnClick:!1,multiple:!0},l.a.createElement("div",{className:R?"lakex-table-file-manage-component-empty-content":"lakex-table-file-manage-component-content"},l.a.createElement(g6,{type:"EditorPaste",size:22}),l.a.createElement("span",{className:"lakex-table-file-manage-component-title"},uw("直接粘贴或拖拽到这里")),l.a.createElement(y.a,{customRequest:function(e){return P(e.file)},accept:E,showUploadList:!1,multiple:!0},l.a.createElement(b.a,{className:"lakex-table-file-manage-component-upload-button"},l.a.createElement(g6,{className:"lakex-table-file-manage-component-plus-icon",type:"Add",size:18}),l.a.createElement("div",{className:"lakex-table-file-manage-component-button-title"},uw("本地上传"))))))),!R&&l.a.createElement(tce,{type:o,list:S,onRemove:function(e){var t=Vb(S),n=t.findIndex((function(t){return t.file.uid===e.uid}));n>-1&&(t.splice(n,1),j.current=t,M(t),h(e))},onRetry:function(e){P(e)},onDragEnd:function(e,t){var n=S.findIndex((function(e){return e.file.uid===t})),r=S.findIndex((function(t){return t.file.uid===e})),o=Vb(S),i=gP(o.splice(n,1),1)[0];o.splice(r,0,i),j.current=o,M(o),cw((function(){m({targetUid:e,sourceUid:t})}))}})))},ice=function(e){var t=e.id,n=e.onChange,r=e.defaultValue,o=e.onCreate,i=void 0===o?function(){}:o,a=e.onUpdate,u=void 0===a?function(){}:a,c=e.onRemove,s=void 0===c?function(){}:c,d=e.onOrderChange,f=void 0===d?function(){}:d,p=e.style;return l.a.createElement("div",{className:"lakex-table-file-form-upload",style:p||{}},l.a.createElement(oce,{id:t||fw(6),type:yue.FILE,onChange:n,onCreate:i,onUpdate:u,onRemove:s,onOrderChange:f,files:r}))},ace=function(e){var t=e.id,n=e.onChange,r=e.defaultValue,o=e.onCreate,i=void 0===o?function(){}:o,a=e.onUpdate,u=void 0===a?function(){}:a,c=e.onRemove,s=void 0===c?function(){}:c,d=e.onOrderChange,f=void 0===d?function(){}:d,p=e.style;return l.a.createElement("div",{className:"lakex-table-file-form-upload",style:p||{}},l.a.createElement(oce,{id:t,type:yue.IMAGE,onChange:n,onCreate:i,onUpdate:u,onRemove:s,onOrderChange:f,files:r}))},lce=function(e){var t,n=e.id,r=e.value;return r?l.a.createElement("div",{className:"lakex-table-image-list",id:n},null==(t=r.map)?void 0:t.call(r,(function(e,t){return l.a.createElement(gue,{key:e.uid||t,type:"image",file:e,list:r})}))):null},uce=function(e){var t=e.onClick,n=void 0===t?function(){}:t,r=e.list,o=e.onUnSelect,i=void 0===o?function(){}:o,a=e.onMentionTagClick,u=void 0===a?function(){}:a,c=e.writeable,s=e.showPlaceholder,d=e.hideDropdownIcon,f=null;return f=r&&0!==r.length||!s?l.a.createElement("div",{className:"lakex-table-form-mention-tag-wrap"},null==r?void 0:r.map((function(e){return e?l.a.createElement("span",{className:"lakex-table-form-mention-tag",key:e.uid,onClick:function(t){u(e)}},l.a.createElement("img",{className:"lakex-table-form-mention-tag-avatar",src:e.icon}),l.a.createElement("span",{className:"lakex-table-form-mention-tag-name"},e.name),c&&l.a.createElement("span",{className:"lakex-table-form-mention-tag-close",onClick:function(t){t.stopPropagation(),i(e,t)}},l.a.createElement(g6,{type:"Close"}))):null}))):l.a.createElement("p",{className:"lakex-table-form-mention-placeholder"},uw("请选择")),l.a.createElement("div",{className:u$("lakex-table-form-mention-content",{writeable:c}),onClick:n},f,c&&!d&&l.a.createElement("span",{className:"lakex-table-form-mention-caret-down",onClick:e.onClickDropDownIcon},l.a.createElement(g6,{type:"ReviewArrowDown",size:16})))};uce.defaultProps={writeable:!1,showPlaceholder:!0};var cce=function(e){var t=e.isSelected,n=e.user,r=e.onSelect,o=void 0===r?function(){}:r,i=e.onUnselect,a=void 0===i?function(){}:i,u=u$("lakex-table-form-mention-selector-item",{selected:t});return l.a.createElement("div",{onClick:function(e){t?a(n):o(n)},className:u},l.a.createElement("div",{className:"lakex-table-form-mention-selector-content"},l.a.createElement("span",{className:"lakex-table-form-mention-selector-avatar"},l.a.createElement("img",{src:n.icon})),l.a.createElement("div",null,l.a.createElement("div",{className:"lakex-table-form-mention-selector-name"},n.name),l.a.createElement("div",{className:"lakex-table-form-mention-selector-login"},n.login))),t&&l.a.createElement(g6,{type:"Check"}))},sce=function(e){var t=e.list,n=e.highlightId,r=e.selectedIds,o=e.emptyText,i=void 0===o?uw("未搜索到结果"):o,u=e.onSelect,c=e.onUnselect;return function(e){var t=e.highlightId;Object(a.useEffect)((function(){var e=document.querySelector(".lakex-table-form-mention-selector-list");if(e){var t=document.querySelector(".highlight");if(t){var n=t.offsetTop-38,r=n+t.getBoundingClientRect().height;n<e.scrollTop?e.scrollTop-=e.scrollTop-n:r-e.scrollTop>e.getBoundingClientRect().height&&(e.scrollTop=r-e.getBoundingClientRect().height)}}}),[t])}({highlightId:n}),t&&t.length>0?l.a.createElement("ul",{className:"lakex-table-form-mention-selector-list"},t.map((function(e){if(!e)return null;var t=u$({highlight:n===e.uid});return l.a.createElement("li",{key:e.uid,className:t},l.a.createElement(cce,{isSelected:r.includes(e.uid),onSelect:u,onUnselect:c,user:e}))}))):l.a.createElement("div",{className:"lakex-table-form-mention-selector-empty"},l.a.createElement("span",null,i))};function dce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dce(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pce=function(e){var t=e.type,n=void 0===t?"text":t,r=e.defaultValue,o=void 0===r?"":r,i=e.value,u=e.focus,c=e.onSearch,s=void 0===c?function(){}:c,d=e.onChange,f=void 0===d?function(){}:d,p=e.inputRef,h=Object(a.useRef)(),v=p||h,g=Object(a.useRef)();Object(a.useEffect)((function(){u&&setTimeout((function(){var e;null==(e=v.current)||e.focus()}),300)}),[u]);var m={type:n,placeholder:uw("搜索人员"),onChange:function(e){f(e),!g.current&&s(e)},onCompositionStart:function(){g.current=!0},onCompositionEnd:function(e){g.current=!1,s(e)},bordered:!1,defaultValue:o,value:i};return l.a.createElement(s6,fce(fce({},m),{},{ref:v,allowEnter:!1}))},hce=function(e){var t=new Set;return e&&Array.isArray(e)&&e.forEach((function(e){t.add(e.uid)})),Vb(t.values())},vce=function(e){var t=e.inputRef,n=function(e){var t=e.selected,n=e.inputRef,r=e.focus,o=G3(TR),i=gP(Object(a.useState)(""),2),l=i[0],u=i[1],c=gP(Object(a.useState)([]),2),s=c[0],d=c[1],f=gP(Object(a.useState)(!1),2),p=f[0],h=f[1],v=gP(Object(a.useState)(),2),g=v[0],m=v[1],y=gP(Object(a.useState)((function(){return hce(t)})),2),b=y[0],w=y[1];Object(a.useEffect)((function(){null==o||o.contextUsers().then((function(e){d(e)})),setTimeout((function(){var e;r&&(null==(e=null==n?void 0:n.current)||e.focus())}),40)}),[]),Object(a.useEffect)((function(){w(hce(t))}),[t]);var _=Object(a.useCallback)((function(e){var t,n=e.keyCode||e.which;if([qY.UP,qY.DOWN].includes(n)){e.preventDefault();var r=s.findIndex((function(e){return e.uid===g}));n===qY.UP?(r-=1)<0&&(r=0):n===qY.DOWN&&(r+=1)>=s.length&&(r=s.length-1),m(null==(t=s[r])?void 0:t.uid)}else if(n===qY.ENTER){e.preventDefault();var o=document.querySelector(".highlight .lakex-table-form-mention-selector-item");o&&o.click()}}),[s,g]);Object(a.useEffect)((function(){var e=document.querySelector(".lakex-table-form-mention-selector-list"),t=null==e?void 0:e.querySelector("li.highlight");if(t){var n=t.offsetTop-38,r=n+t.getBoundingClientRect().height;n<e.scrollTop?e.scrollTop-=e.scrollTop-n:r-e.scrollTop>e.getBoundingClientRect().height&&(e.scrollTop=r-e.getBoundingClientRect().height)}}),[g]);var k=Object(a.useCallback)((function(t){var n;null==(n=e.onSelect)||n.call(e,t),!b.includes(t.uid)&&(w(b.concat(t.uid)),u(""))}),[e.onSelect,t]),C=Object(a.useCallback)((function(t){var n;null==(n=e.onUnselect)||n.call(e,t);var r=b.filter((function(e){return e!==t.uid}));w(r)}),[e.onUnselect]),E=Object(a.useCallback)((function(e){var t=e.target.value||"";u(t)}),[]);return Object(a.useLayoutEffect)((function(){!e.visible&&l&&u("")}),[e.visible]),{state:{list:s,loading:p,highlightId:g,selectedUserIds:b,filterValue:l},onKeyDown:_,onSearch:function(e){h(!0);var t=e.target.value;null==o||o.searchUser(t).then((function(e){d(e),h(!1)}))},onSelect:k,onUnselect:C,onChange:E}}(e),r=n.state,o=n.onKeyDown,i=n.onSearch,u=n.onSelect,c=n.onUnselect,s=n.onChange;return l.a.createElement("div",{className:"lakex-table-form-mention-selector-container lakex-table-mention-wrapper",onKeyDown:o},l.a.createElement("div",{className:"lakex-table-form-mention-selector-search"},l.a.createElement(pce,{focus:e.focus,onSearch:i,onChange:s,inputRef:t,value:r.filterValue})),r.loading?l.a.createElement("div",{className:"lakex-table-form-mention-selector-spin"},l.a.createElement(m.a,null)):l.a.createElement("div",{className:"lakex-table-form-mention-selector-body"},l.a.createElement(sce,{selectedIds:r.selectedUserIds,list:r.list,highlightId:r.highlightId,onSelect:u,onUnselect:c})))};var gce=function(e){var t=e.defaultValue,n=e.onChange,r=e.onSelect,o=e.onUnselect,i=Object(a.useState)((function(){return function(e){return lu(e)?[]:Array.isArray(e)?e:[e]}(t)})),l=gP(i,2),u=l[0],c=l[1],s=gP(Object(a.useState)(!1),2),d=s[0],f=s[1];return Object(a.useEffect)((function(){var e=function(e){for(var t=e.target;t&&t!==document.body;){if(t.classList.contains("lakex-table-mention-wrapper"))return;t=t.parentNode}f(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),{state:{visible:d,selected:u},onMentionSelect:function(e){var t=u.concat(e);c(t),f(!1),n(t),r(e)},onMentionUnselect:function(e){var t=u.filter((function(t){return t.uid!==e.uid}));c(t),f(!1),n(t),o(e)},onToggleVisible:function(){f(!d)}}},mce=function(e){var t=e.id,n=e.onChange,r=void 0===n?function(){}:n,o=e.onSelect,i=void 0===o?function(){}:o,a=e.onUnselect,u=void 0===a?function(){}:a,c=e.defaultValue,s=void 0===c?[]:c,d=e.onMentionTagClick,f=void 0===d?function(){}:d,p=e.renderMode,h=gce({defaultValue:s,onChange:r,onSelect:i,onUnselect:u}),v=h.state,g=h.onMentionSelect,m=h.onMentionUnselect,y=h.onToggleVisible;return l.a.createElement(l.a.Fragment,null,l.a.createElement(w.a,{overlay:l.a.createElement(vce,{focus:!1,visible:v.visible,selected:v.selected,onSelect:g,onUnselect:m}),visible:v.visible,placement:"bottomLeft",dropdownClassName:"lakex-table-mention-wrapper"},l.a.createElement("div",{className:"lakex-table-form-mention lakex-table-mention-wrapper lakex-table-form-mention-render-mode-".concat(p),id:t,onClick:function(){return y()}},l.a.createElement(uce,{writeable:v.visible,list:v.selected,hideDropdownIcon:p===rie.LITE,onUnSelect:m,onMentionTagClick:f}))))};function yce(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return bce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bce(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function bce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wce=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n,r=e.value,o=e.showEmpty,i=e.onMentionTagClick,u=void 0===i?function(){}:i,c=Object(a.useRef)(null),s=Object(a.useRef)([]),d=gP(Object(a.useState)(null),2),f=d[0],p=d[1];Object(a.useImperativeHandle)(t,(function(){return{applyOverflow:function(e){v(e)}}}));var h=Object(a.useCallback)((function(e,t){var n={};return f&&f.width&&f.index===t&&(n.width=f.width),n}),[f]);Object(a.useLayoutEffect)((function(){var e=c.current,t=s.current,n=null==e?void 0:e.childNodes;n&&n.forEach((function(e){var n=e;t.push({width:n.scrollWidth,height:n.offsetHeight})}))}),[]);var v=Object(a.useCallback)((function(e){var t,n=s.current;if(e&&n&&!(n.length<=1)){var r,o=e.height,i=e.width,a=-1,l=0,u=0,c=0,d=yce(n);try{for(d.s();!(r=d.n()).done;){var f=r.value;a++;var h=f.width,v=f.height,g=l+h+3+12>i,m=i-l-h-3-12;if(g&&u+v+3>=o){var y=h>0&&h<m?h:c,b=y<12?(null==(t=n[a-1])?void 0:t.width)-12:y;return void p({index:b<12?a-1:a,width:Math.max(b,12)})}g&&(u+=3+v+3,l=0),l+=3+h,c=m}}catch(e){d.e(e)}finally{d.f()}p(null)}}),[s]);return r&&0!==r.length?l.a.createElement("div",{className:"lakex-table-form-mention-readonly"},l.a.createElement("div",{className:"lakex-table-form-mention-tag-wrap",ref:c},null==(n=null==r?void 0:r.map)?void 0:n.call(r,(function(e,t){if(!e)return null;var n=h(e,t);return l.a.createElement("span",{className:"lakex-table-form-mention-tag",key:e.uuid,style:n,onClick:function(t){u(e)}},l.a.createElement("img",{className:"lakex-table-form-mention-tag-avatar",src:e.icon}),l.a.createElement("span",{className:"lakex-table-form-mention-tag-name"},e.name))})))):o?l.a.createElement("div",{className:"lakex-table-form-mention-readonly"},l.a.createElement(Xle,null)):null}))),_ce=function(e){var t=e.value,n=e.showEmpty;return t||0===Number(t)?l.a.createElement("div",{className:"lakex-table-form-number-readonly"},t):n?l.a.createElement(Xle,null):null},kce=function(e){var t=e.id,n=e.defaultValue,r=e.focus,o=e.onBlur,i=e.renderMode,u=null!==e.prefix?e.prefix:l.a.createElement(g6,{type:"FieldNumber",size:14}),c=gP(Wle({value:e.value,defaultValue:e.defaultValue,onChange:e.onChange}),2),s=c[0],d=c[1],f=Object(a.useRef)(null);return Object(a.useEffect)((function(){r&&f.current&&f.current.focus({cursor:"end"})}),[r]),l.a.createElement("div",{className:"lakex-table-form-number lakex-table-form-number-render-mode-".concat(i),id:t},l.a.createElement(_.a,{allowClear:i!==rie.LITE,type:"text",value:s,defaultValue:n,placeholder:uw("请输入"),prefix:u,onChange:function(t){var n;d(t),null==(n=e.onChange)||n.call(e,t)},onBlur:o,autoFocus:r,ref:f}))},Cce=function(e){var t=e.value,n=e.showEmpty,r=G3(sae);if(!t)return n?l.a.createElement(Xle,null):null;return l.a.createElement("div",{className:"lakex-table-form-phone-readonly"},l.a.createElement("span",{className:"lakex-table-form-phone-text"},t),l.a.createElement(g6,{className:"lakex-table-form-phone-action",type:"FieldPhone",onClick:function(e){e.stopPropagation(),null==r||r.open("phone","tel:"+t)}}))},Ece=function(e){var t=e.id,n=e.defaultValue,r=e.prefix,o=e.focus,i=e.renderMode,u=e.onChange,c=void 0===u?function(){}:u,d=e.onBlur,f=G3(sae),p=gP(Wle({value:e.value,defaultValue:e.defaultValue,onChange:e.onChange}),2),h=p[0],v=p[1],g=null!==r?r:l.a.createElement(g6,{type:"FieldPhone"}),m=Object(a.useRef)(null);return Object(a.useEffect)((function(){o&&m.current&&m.current.focus({cursor:"end"})}),[o]),l.a.createElement("div",{className:"lakex-table-form-phone lakex-table-form-phone-render-mode-".concat(i),id:t},l.a.createElement(s.a,{allowClear:i!==rie.LITE,value:h,defaultValue:n,autoFocus:o,type:"text",placeholder:uw("请输入"),prefix:g,onChange:function(e){var t=e.target.value;v(t),null==c||c(t)},onBlur:d,suffix:l.a.createElement(g6,{className:u$("lakex-table-form-phone-action",{hasValue:h}),type:"FieldPhone",onClick:function(e){e.stopPropagation(),null==f||f.open("phone","tel:"+h)}}),ref:m}))},Oce=function(e){return e.Dropdown="dropdown",e.List="list",e}(Oce||{}),Sce=function(e){return e.Select="select",e.MultiSelect="multiSelect",e}(Sce||{}),xce=function(e){var t=e.placeholder,n=e.defaultValue,r=void 0===n?"":n,o=e.value,i=void 0===o?"":o,u=e.onChange,c=void 0===u?function(){}:u,s=e.focus,d=e.inputRef,f=Object(a.useRef)(),p=d||f;return Object(a.useEffect)((function(){s&&setTimeout((function(){var e;null==(e=p.current)||e.focus()}),300)}),[s]),l.a.createElement("div",{className:"lakex-table-dropdown-search"},l.a.createElement(s6,{ref:p,type:"text",placeholder:t,onChange:c,bordered:!1,defaultValue:r,value:i,allowEnter:!1}))},jce=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.value,r=e.color,o=function(e){var t=e.value,n=e.color,r=gP(Object(a.useState)(t),2),o=r[0],i=r[1],l=G3(mM),u=n?{background:(null==l?void 0:l.getRenderColor(n))||"none"}:{};return u.color=null==l?void 0:l.getRenderTextColor(n),Object(a.useEffect)((function(){i(t)}),[t]),{state:{optionValue:o},style:u}}({value:n,color:r}),i=o.state,u=o.style;return Object(a.useImperativeHandle)(t,(function(){return{getValue:function(){return n||""}}})),l.a.createElement("div",{className:u$("lakex-table-dropdown-item create",{active:e.isActive}),onClick:function(){e.onCreate(n)}},l.a.createElement("span",{className:"lakex-table-dropdown-item-prefix"},uw("新建选项")),i.optionValue&&l.a.createElement("span",{className:"lakex-table-dropdown-item-text",style:u},i.optionValue))})));function Ice(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ice(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ice(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ace=function(e){var t=e.item,n=e.colorable,r={labelColor:G3(mM)}.labelColor,o=gP(Object(a.useState)(t.name),2),i=o[0],u=o[1],c=Object(a.useRef)(!1),d=Object(a.useRef)(null),p=Hle((function(){var n,r,o;c.current&&(null==(r=e.onOptionChange)||r.call(e,Rce(Rce({},t),{},{name:null==(n=d.current)?void 0:n.input.value})),c.current=!1,null==(o=e.onClose)||o.call(e,t))}),400);return Object(a.useEffect)((function(){return function(){var n,r;c.current&&(null==(r=e.onOptionChange)||r.call(e,Rce(Rce({},t),{},{name:null==(n=d.current)?void 0:n.input.value})))}}),[]),l.a.createElement("div",{key:t.id,className:"lakex-table-dropdown-item editing active"},l.a.createElement(s.a,{ref:d,className:"lakex-table-dropdown-item-input editing-input",value:i,onChange:function(e){var t=(e.target.value||"").trim();u(t),c.current=!0},onPressEnter:function(e){e.stopPropagation(),p()},onKeyDown:function(n){var r;n.stopPropagation(),n.keyCode===qY.ESC&&(null==(r=e.onClose)||r.call(e,t))},onBlur:function(){setTimeout((function(){var e;(null==(e=d.current)?void 0:e.input)!==document.activeElement&&p()}),300)},autoFocus:!0}),n&&l.a.createElement(f.a,{placement:"rightTop",overlayClassName:"lakex-table-colorpicker",overlayStyle:{zIndex:1050},content:l.a.createElement(K3,{colorSource:Vb(sM),activeColor:t.color,onSelect:function(n){var r,o;null==(r=e.onOptionChange)||r.call(e,Rce(Rce({},t),{},{color:n})),null==(o=d.current)||o.focus(),c.current=!0}})},l.a.createElement("span",{className:"option-color",style:{background:null==r?void 0:r.getRenderColor(t.color)}})))},Dce=function(e){var t=e.isEditing,n=e.isActive,r=e.isSelected,o=e.canEditing,i=void 0===o||o,u=e.item,c=e.colorable,s=e.editable,p=e.onSelect,h=void 0===p?function(){}:p,v=e.onSetActive,g=void 0===v?function(){}:v,m=function(e){var t=e.item,n=e.colorable,r=G3(mM),o=gP(Object(a.useState)(t),2),i=o[0],l=o[1],u=Object(a.useMemo)((function(){return n?{background:t.color?null==r?void 0:r.getRenderColor(t.color):"none",color:null==r?void 0:r.getRenderTextColor(t.color)}:{}}),[t,n]);return{optionItem:i,setOptionItem:l,labelColor:r,style:u}}({item:u,colorable:c}),y=m.optionItem,b=m.setOptionItem,w=m.style,_=gP(Object(a.useState)(!1),2),k=_[0],C=_[1];return Object(a.useEffect)((function(){!n&&C(!1)}),[n]),t?l.a.createElement(Ace,{onOptionChange:function(t){var n;(t.name!==u.name||t.color!==u.color)&&(null==(n=e.onOptionChange)||n.call(e,t),b(t))},item:y,colorable:c,onClose:function(){var t;null==(t=e.onSetEditing)||t.call(e,null)}}):l.a.createElement("div",{key:y.uuid,className:u$("lakex-table-dropdown-item",{active:n}),onClick:function(){i&&h(y)}},r&&l.a.createElement(g6,{type:"Check",size:14}),l.a.createElement("span",{className:"lakex-table-dropdown-item-text",style:w},y.name),s&&l.a.createElement(f.a,{visible:k,overlayClassName:"lakex-table-dropdown-popover-container",overlayStyle:{zIndex:1051},getPopupContainer:function(){var e=document.getElementById("lakex-table-dropdown-popup-container");return e||((e=document.createElement("div")).id="lakex-table-dropdown-popup-container",e.onmouseup=function(e){e.preventDefault(),e.stopPropagation()},document.body.appendChild(e),e)},content:l.a.createElement(d.a,{onClick:function(t){var n,r,o=t.key;t.domEvent.stopPropagation(),"edit"===o?null==(n=e.onSetEditing)||n.call(e,y.uuid):"del"===o&&(null==(r=e.onRemove)||r.call(e,y.uuid)),C(!1)}},l.a.createElement(d.a.Item,{key:"edit",icon:l.a.createElement(g6,{type:"Edit",size:14})},uw("编辑")),l.a.createElement(d.a.Item,{key:"del",icon:l.a.createElement(g6,{type:"Delete",size:14})},uw("删除"))),trigger:"click",placement:"rightTop",onClick:function(e){return e.stopPropagation()}},l.a.createElement(g6,{type:"MoreHorizontal",onClick:function(){C(!k),g()}})))};Dce.defaultProps={canEditing:!1,colorable:!1,editable:!1};var Pce=function(e){var t=e.options,n=void 0===t?[]:t,r=e.focus,o=e.selectedIds,i=e.colorable,u=e.optionEditable,c=e.inputRef,s=function(e){var t=e.options,n=e.onOptionCreate,r=e.colorable,o=e.inputRef,i=e.visible,l=e.focus,u=gP(Object(a.useState)(0),2),c=u[0],s=u[1],d=gP(Object(a.useState)(""),2),f=d[0],p=d[1],h=G3(mM),v=Object(a.useMemo)((function(){var e,n,o;if(r)return 0===t.length?null==(e=mM)?void 0:e.getNextColor(""):null==(o=mM)?void 0:o.getNextColor(null==(n=t[t.length-1])?void 0:n.color)}),[r,h,t]),m=Object(a.useMemo)((function(){return f?t.filter((function(e){var t,n;return null==(n=null==(t=e.name)?void 0:t.toLowerCase)?void 0:n.call(t).includes(f.toLowerCase())})):t}),[f,t]);Object(a.useEffect)((function(){setTimeout((function(){var e;l&&(null==(e=null==o?void 0:o.current)||e.focus())}),20)}),[]),Object(a.useLayoutEffect)((function(){!i&&f&&p("")}),[i,f]);var y=Object(a.useMemo)((function(){return""!==f&&!m.some((function(e){return e.name===f}))}),[f,m]),b=zle((function(e){var t=e.trim();if(t){var r={name:t,uuid:fw(6),color:v||""};null==n||n(r),p(""),s(0)}else g.a.error(uw("新建选项不能为空字符"))})),w=Object(a.useMemo)((function(){return{value:f,selectOptions:m,showNew:y,newOptionColor:v,activeIdx:c}}),[f,y,v,m,c]),_=zle((function(t){var n,r;null==(n=e.onOptionChange)||n.call(e,t),null==(r=null==o?void 0:o.current)||r.focus()})),k=zle((function(t,n){var r;s(n),e.onOptionSelect(t),p(""),null==(r=null==o?void 0:o.current)||r.focus()})),C=Object(a.useCallback)((function(t){var n;e.onOptionDelete(t),null==(n=null==o?void 0:o.current)||n.focus()}),[]);return{state:w,onInputChange:Object(a.useCallback)((function(e){var t=e.target.value;p(t),s(0)}),[]),onCreateOption:b,setActiveIdx:s,onOptionChange:_,onOptionDelete:C,onOptionSelect:k}}(e),d=s.state,f=s.onInputChange,p=s.onCreateOption,h=s.setActiveIdx,v=s.onOptionChange,m=s.onOptionDelete,y=s.onOptionSelect,b=d.activeIdx,w=gP(Object(a.useState)(null),2),_=w[0],k=w[1],C=Object(a.useRef)(null),E=Object(a.useCallback)((function(e){var t,n=e.keyCode||e.which,r=n===qY.UP,o=n===qY.DOWN,i=d.selectOptions.length,a=d.showNew?i:i-1;if((r||o)&&i>0){e.preventDefault();h(0===b?r?a:1:b===a?r?b-1:0:b+(r?-1:1))}else if(n===qY.ENTER){var l=0===i||b===i;if(d.showNew&&l){var u=null==(t=C.current)?void 0:t.getValue();u&&p(u)}else{var c=d.selectOptions[b];c&&y(c,b)}}}),[b,n,d.showNew,C.current,d.selectOptions]);return Object(a.useEffect)((function(){var e=document.querySelector(".lakex-table-dropdown-list"),t=document.querySelector(".lakex-table-dropdown-item.active");if(t){var n=t.offsetTop-38,r=n+t.getBoundingClientRect().height;n<e.scrollTop?e.scrollTop-=e.scrollTop-n:r-e.scrollTop>e.getBoundingClientRect().height&&(e.scrollTop=r-e.getBoundingClientRect().height)}}),[b]),l.a.createElement("div",{className:"lakex-table-dropdown-celleditor",onKeyDown:E},l.a.createElement(xce,{placeholder:uw(u?"可搜索或新建选项":"搜索选项"),onChange:f,focus:r,value:d.value,inputRef:c}),l.a.createElement("div",{className:"lakex-table-dropdown-list"},d.selectOptions.map((function(e,t){var n=b===t,r=null==o?void 0:o.includes(e.uuid),a=e.uuid===_;return l.a.createElement(Dce,{key:e.uuid,isEditing:a,onSetEditing:function(e){k(e)},canEditing:!0,colorable:i,onOptionChange:v,onRemove:m,onSelect:function(e){return y(e,t)},onSetActive:function(){h(t)},isActive:n,isSelected:r,item:e,editable:!!u})})),d.showNew&&u&&l.a.createElement(jce,{isActive:b===d.selectOptions.length||0===d.selectOptions.length,ref:C,onCreate:function(e){p(e)},value:d.value,colorable:i,color:d.newOptionColor})))};Pce.defaultProps={colorable:!0,editable:!1};var Mce=function(e){var t=e.value,n=void 0===t?[]:t,r=e.colorable,o=e.onDelete,i=void 0===o?function(){}:o,a=e.onClickDropDownIcon,u=void 0===a?function(){}:a,c=e.writeable,s=e.showPlaceholder,d=e.hideDropdownIcon,f={labelColor:G3(mM)}.labelColor;return Array.isArray(n)?0===n.length&&s?l.a.createElement("p",{className:"lakex-table-dropdown-selected-placeholder"},uw("请选择")):l.a.createElement("div",{className:"lakex-table-dropdown-selector"},l.a.createElement("div",{className:"lakex-table-dropdown-selected-list ".concat(c?"writeable":"")},n.map((function(e){return l.a.createElement("div",{className:"lakex-table-dropdown-selected-item",key:e.uuid,style:r?{background:e.color?null==f?void 0:f.getRenderColor(e.color):"none",color:null==f?void 0:f.getRenderTextColor(e.color)}:{}},l.a.createElement("span",{className:"lakex-table-dropdown-selected-item-text"},e.name),c&&l.a.createElement(g6,{className:"lakex-table-select-close-action",type:"Close",size:12,onClick:function(t){t.stopPropagation(),i(e)}}))}))),c&&!d?l.a.createElement("span",{className:"lakex-table-form-mention-caret-down",onClick:function(e){null==u||u(e)}},l.a.createElement(g6,{type:"ReviewArrowDown",size:16})):null):null};function Tce(e){return ww(e)?[]:Array.isArray(e)?e:[e]}Mce.defaultProps={hideDropdownIcon:!1,writeable:!1,showPlaceholder:!0};var Fce=function(e){var t=e.options,n=e.editable,r=e.optionEditable,o=e.colorable,i=function(e){var t=e.defaultValue,n=e.options,r=e.type,o=gP(Object(a.useState)(!1),2),i=o[0],l=o[1],u=gP(Object(a.useState)((function(){return Tce(t)})),2),c=u[0],s=u[1],d=Object(a.useRef)(null),f=Object(a.useMemo)((function(){return!ww(e.onChange)}),[e.onChange]);Object(a.useEffect)((function(){if(f){var e=Tce(t);s(e)}}),[t,f]),Object(a.useEffect)((function(){var e=function(e){for(var t=e.target;t&&t!==document.body;){if(t.classList.contains("lakex-table-colorpicker")||t.classList.contains("lakex-table-dropdown-popover-container")||t.classList.contains("lakex-table-dropdown-celleditor")||t.classList.contains("lakex-table-select-close-action"))return;t=t.parentNode}l(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]);var p=Object(a.useCallback)((function(e){(e.keyCode||e.which)===qY.ESC&&l(!1)}),[n]),h=Object(a.useMemo)((function(){return n.filter((function(e){return c.includes(e.uuid)}))}),[n,c]),v=Object(a.useCallback)((function(){l(!i)}),[i]),g=Object(a.useCallback)((function(t){var o,i=r===Sce.MultiSelect,a=t.uuid,l=c.includes(a),u=i?c.concat(a):[a],d=i?c.filter((function(e){return e!==a})):[],p=l?d:u;f?null==(o=e.onChange)||o.call(e,n.filter((function(e){return p.includes(e.uuid)}))):s(p),!i&&!l&&v()}),[i,r,c,f,n]);return{state:{visible:i,selectedOptions:h,selectedIds:c,selectInputRef:d},onKeyDown:p,onToggleVisible:v,onToggleSelect:g}}(e),u=i.state,c=i.onKeyDown,s=i.onToggleVisible,d=i.onToggleSelect;return l.a.createElement("div",{className:"lakex-table-dropdown",onKeyDown:c},l.a.createElement(w.a,{overlay:l.a.createElement(Pce,{visible:u.visible,inputRef:u.selectInputRef,focus:!0,colorable:!!o,options:t,editable:!!n,optionEditable:!!r,selectedIds:u.selectedIds||[],onOptionCreate:function(t){var n;null==(n=e.onOptionCreate)||n.call(e,t)},onOptionChange:function(t){var n;null==(n=e.onOptionChange)||n.call(e,t)},onOptionDelete:function(t){var n;null==(n=e.onOptionDelete)||n.call(e,t)},onOptionSelect:function(e){d(e)}}),placement:"bottomLeft",visible:u.visible,overlayClassName:"lakex-table-dropdown"},l.a.createElement("div",{className:"lakex-table-dropdown-cellview",onClick:s},l.a.createElement(Mce,{writeable:u.visible,colorable:!!o,value:u.selectedOptions,hideDropdownIcon:e.hideDropdownIcon,onDelete:function(e){return d(e)},showPlaceholder:!0}))))},Nce=function(e){var t=e.options,n=e.value,r=e.focus,o=e.onOptionSelect,i=void 0===o?function(){}:o,u=function(e){var t=e.focus,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){t&&setTimeout((function(){var e;null==(e=n.current)||e.focus()}),300)}),[t]),{radioRef:n}}({focus:r}),c=u.radioRef;return l.a.createElement(v.a.Group,{ref:c,value:n},t.map((function(e,t){return l.a.createElement(v.a,{className:"lakex-table-form-select-radio",value:e.uuid,key:t,onChange:function(){i([e])}},l.a.createElement("span",{className:"lakex-table-form-select-value"},e.name))})))},Vce=function(e){var t=e.options,n=void 0===t?[]:t,r=e.focus,o=e.value,i=e.onOptionSelect,a=void 0===i?function(){}:i;return l.a.createElement(p.a.Group,{onChange:function(e){a(n.filter((function(t){return e.includes(t.uuid)})))},value:o,autoFocus:r},n.map((function(e,t){return l.a.createElement(p.a,{className:"lakex-table-form-select-checkbox",value:e.uuid,key:t},l.a.createElement("span",{className:"lakex-table-form-select-value"},e.name))})))},Lce=["defaultValue","onChange"];function Bce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bce(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zce=function(e,t){return e!==Sce.Select||Array.isArray(t)?t:[t]},Uce=function(e){var t,n=e.id,r=e.type,o=void 0===r?Sce.Select:r,i=e.defaultValue,a=void 0===i?[]:i,u=e.value,c=e.options,s=e.renderMode,d=e.displayType,f=void 0===d?Oce.List:d,p=e.focus,h=void 0!==p&&p,v=e.className,g=void 0===v?"":v;e.onChange&&(t=function(t){var n,r=o===Sce.Select?t[0]:t;null==(n=e.onChange)||n.call(e,r)});var m,y=gP(Wle({value:u?zce(o,u):void 0,defaultValue:zce(o,a),onChange:t}),2),b=y[0],w=y[1];if(f===Oce.Dropdown){e.defaultValue,e.onChange;var _=Y3(e,Lce);m=l.a.createElement(Fce,$ce($ce({},_),{},{defaultValue:b,value:b,onChange:function(e){w(e.map((function(e){return e.uuid})))},onOptionCreate:function(t){var n;null==(n=e.onOptionCreate)||n.call(e,t),b.push(t.uuid),w(b)},onOptionChange:e.onOptionChange,onOptionDelete:e.onOptionDelete,hideDropdownIcon:s===rie.LITE}))}else f===Oce.List&&o===Sce.Select?m=l.a.createElement(Nce,{value:b[0],options:c,focus:h,onOptionSelect:function(e){w(e.map((function(e){return e.uuid})))}}):f===Oce.List&&o===Sce.MultiSelect&&(m=l.a.createElement(Vce,{value:b,options:c,focus:h,onOptionSelect:function(e){w(e.map((function(e){return e.uuid})))}}));return l.a.createElement("div",{className:"lakex-table-form-select lakex-table-form-select-".concat(o||"normal"," ").concat(g," lakex-table-form-select-render-mode-").concat(s),id:n},m)};function Hce(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qce(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function qce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wce=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.colorable,r=e.type,o=void 0===r?"":r,i=e.value,u=void 0===i?[]:i,c=e.className,s=void 0===c?"":c,d=e.showEmpty,f=void 0!==d&&d,p=G3(mM),h=Object(a.useRef)(null),v=Object(a.useRef)([]),g=gP(Object(a.useState)(null),2),m=g[0],y=g[1],b=Object(a.useCallback)((function(e,t){var r={};if(n){var o=e.color?null==p?void 0:p.getRenderColor(e.color):"none";r.background=o,r.color=null==p?void 0:p.getRenderTextColor(e.color)}return m&&m.width&&m.index===t&&(r.width=m.width),r}),[n,m]);Object(a.useImperativeHandle)(t,(function(){return{applyOverflow:function(e){w(e)}}})),Object(a.useLayoutEffect)((function(){var e=h.current,t=v.current,n=null==e?void 0:e.childNodes;n&&n.forEach((function(e){var n=e;t.push({width:n.scrollWidth,height:n.offsetHeight})}))}),[]);var w=Object(a.useCallback)((function(e){var t,n=v.current;if(e&&n&&!(n.length<=1)){var r,o=e.height,i=e.width,a=-1,l=0,u=0,c=0,s=Hce(n);try{for(s.s();!(r=s.n()).done;){var d=r.value;a++;var f=d.width,p=d.height,h=l+f+4+5>i,g=i-l-f-4-5;if(h&&u+p+4>=o){var m=f>0&&f<g?f:c,b=m<5?(null==(t=n[a-1])?void 0:t.width)-m:m-5;return void y({index:b<5?a-1:a,width:Math.max(b,12)})}h&&(u+=4+p+4,l=0),l+=4+f,c=g}}catch(e){s.e(e)}finally{s.f()}y(null)}}),[v]);return u&&0!==u.length?l.a.createElement("div",{className:"lakex-table-form-select lakex-table-form-select-".concat(o||"normal"," ").concat(s)},l.a.createElement("div",{className:"lakex-table-form-select-readonly",ref:h},u.map((function(e,t){var n=b(e,t);return l.a.createElement("div",{className:"lakex-table-select-item lakex-table-select-item-overflow-apply",key:t,style:n},l.a.createElement("span",{className:"lakex-table-select-item-text"},e.name||""))})))):f?l.a.createElement(Xle,null):null})));function Gce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gce(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yce(e,t,n){return t=P_(t),D_(e,Xce()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Xce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Xce=function(){return!!e})()}var Jce=function(e){function t(e){var n;return Ub(this,t),(n=Yce(this,t,[e]))._inputRefs=[],n.getDefaultOptions=function(){var e=n.props,t=e.configs,r=e.multiple,o=t.options,i=t.color,a=!!i;if(o&&o.length>0)return o.forEach((function(e){e.uuid||(e.uuid=fw(6)),typeof i>"u"&&(a=!!o[0]&&!!o[0].color)})),{options:o,multi:r,hasColor:a};var l=[{name:"",uuid:fw(6),color:"$label-back-color:0-0"},{name:"",uuid:fw(6),color:"$label-back-color:0-1"},{name:"",uuid:fw(6),color:"$label-back-color:0-2"}];return l.forEach((function(e,t){a&&!e.color&&(e.color=0===t?mM.getNextColor(""):mM.getNextColor(l[t-1].color))})),{options:l,multi:r,hasColor:a}},n.onAddItem=function(e){var t=n.state.options,r={name:"",uuid:fw(6),color:""},o=0===t.length?"":t[t.length-1].color;r.color=mM.getNextColor(o),t.push(r),n.setState({options:t.slice()},(function(){n._optionListRef&&n._optionListRef.current&&(n._optionListRef.current.scrollTop=1e4),e&&n._inputRefs.length>1&&n._inputRefs[n._inputRefs.length-1].focus(),n.onChange()}))},n.onChangeItem=function(e,t){var r=e.target.value,o=n.state.options,i=[];o.forEach((function(e,n){var o=n===t?r:e.name;i.push(Kce(Kce({},e),{},{name:o}))})),n.setState({options:i},(function(){n._inputRefs[t].focus(),n.onChange()}))},n.onDeleteItem=function(e,t){var r=n.state.options.filter((function(e,n){return n!==t}));n._inputRefs.splice(t,1),n.setState({options:r},(function(){n.onChange()}))},n.onChangeColor=function(e,t){var r=n.state.options,o=[];r.forEach((function(n){var r=n.uuid===e?t:n.color;o.push(Kce(Kce({},n),{},{color:r}))})),n.setState({options:o},(function(){n.onChange()}))},n.toggleColor=function(e){var t=e.target.checked,r=n.state.options;t&&r[0]&&!r[0].color&&r.forEach((function(e,t){e.color=n.props.labelColor.getByIndex(t)})),n.setState({options:r,hasColor:t},(function(){n.onChange()}))},n.beforeChange=function(e){n.setState({options:e},(function(){n.onChange()}))},n.onPressEnter=function(e){e>=n.state.options.length-1?n.onAddItem(!0):n._inputRefs[e+1].input.focus()},n.onChangeOrder=function(e,t){var r=n.state.options,o=r.findIndex((function(t){return t.uuid===e})),i=r.findIndex((function(e){return e.uuid===t}));n.setState({options:VU(r,o,i)},(function(){var r,o;null==(o=(r=n.props).onChangeOrder)||o.call(r,e,t),n.onChange()}))},n.state={options:[],multi:!1,hasColor:!1},n}return F_(t,e),Wb(t,[{key:"componentDidMount",value:function(){this._optionListRef=l.a.createRef();var e=this.getDefaultOptions(),t=e.options,n=e.multi,r=e.hasColor;this.setState({options:t,multi:n,hasColor:r})}},{key:"onChange",value:function(){var e=this,t={color:this.state.hasColor,options:[]},n=[];this.state.options.forEach((function(t){if(""!==t.name){var r={name:t.name,uuid:t.uuid,color:e.state.hasColor?t.color:null};""!==t.name&&n.push(r)}})),t.options=Cu(n,(function(e){return e.name})),this.props.multiple&&(t.multi=!!this.state.multi),this.props.onChange&&this.props.onChange(t)}},{key:"_ignoreSortableRule",value:function(e){return!(null==e||!e.tagName||"input"!==e.tagName.toLowerCase())}},{key:"render",value:function(){return this.state.options?l.a.createElement("div",{className:"col-config-select-options"},this.props.title,l.a.createElement("div",{className:"multi-select"},l.a.createElement(p.a,{size:"small",checked:!!this.state.hasColor,onChange:this.toggleColor,style:{marginLeft:12}}),uw("颜色")),l.a.createElement("div",{className:"option-list",ref:this._optionListRef},l.a.createElement(ese,{hasColor:this.state.hasColor,labelColor:this.props.labelColor,options:this.state.options,inputRefs:this._inputRefs,onChangeColor:this.onChangeColor,onChangeItem:this.onChangeItem,onDeleteItem:this.onDeleteItem,onPressEnter:this.onPressEnter,onChangeOrder:this.onChangeOrder,autoFocus:this.props.autoFocus})),l.a.createElement("div",{className:"select-options-add-item"+(this.state.hasColor?" colored":""),onClick:this.onAddItem},l.a.createElement(g6,{type:"Add"}),uw("添加一个选项"))):null}}])}(l.a.Component),Zce=function(e){var t=G3(mM);return t?l.a.createElement(Jce,Kce({labelColor:t},e)):null},Qce=function(e){var t=e.hasColor,n=e.labelColor,r=e.option,o=e.index,i=e.inputRefs,a=e.autoFocus,u=e.onChangeColor,c=e.onChangeItem,d=e.onPressEnter,p=e.onDeleteItem,h=tH({id:r.uuid}),v=h.attributes,g=h.listeners,m=h.setNodeRef,y=h.transform,b=h.transition,w=h.isDragging,_=null;t&&(_=l.a.createElement(f.a,{placement:"leftTop",overlayClassName:"lakex-table-colorpicker",content:l.a.createElement(K3,{colorSource:Vb(sM),activeColor:r.color||"",onSelect:function(e){u(r.uuid,e)}})},l.a.createElement("span",{className:"option-color",style:{background:n.getRenderColor(r.color)}})));var k={transform:d6.Transform.toString(y),transition:b,zIndex:w?"100":"auto",opacity:w?.3:1};return l.a.createElement("div",Kce({ref:m,className:"input-item",key:r.uuid,"data-id":r.uuid,style:k},v),l.a.createElement("span",{className:"input-item-content"},_,l.a.createElement(s.a,{value:r.name,onChange:function(e){c(e,o)},onPressEnter:function(){d(o)},ref:function(e){i[o]=e},autoFocus:a&&0===o}),l.a.createElement(g6,{type:"Delete",onClick:function(e){p(e,o)}})),l.a.createElement("div",Kce({className:"input-item-drag"},g),l.a.createElement(g6,{type:"Drag"})))},ese=function(e){var t=e.autoFocus,n=e.hasColor,r=e.labelColor,o=e.options,i=e.inputRefs,a=e.onChangeColor,u=e.onChangeItem,c=e.onPressEnter,s=e.onDeleteItem,d=e.onChangeOrder,f=U$(z$(Vz,{activationConstraint:{distance:8}})),p=function(){var e=mC(X_.mark((function e(t){var n,r;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.active,r=t.over,n.id!==r.id&&d(n.id,r.id);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(bU,{sensors:f,modifiers:[aH,oH],collisionDetection:Z$,onDragEnd:p},l.a.createElement(KU,{items:o.map((function(e){return Kce(Kce({},e),{},{id:e.uuid})})),strategy:qU},o.map((function(e,o){return l.a.createElement(Qce,{key:e.uuid,option:e,index:o,hasColor:n,labelColor:r,inputRefs:i,onChangeColor:a,onChangeItem:u,onPressEnter:c,onDeleteItem:s,autoFocus:!!t})}))))},tse=function(e){var t=e.value,n=e.showEmpty;return t?l.a.createElement("div",{className:"lakex-table-form-textarea-readonly"},t):n?l.a.createElement(Xle,null):null},nse=function(e){var t=e.id,n=e.focus,r=e.defaultValue,o=void 0===r?"":r,i=e.renderMode,u=e.value,c=e.onChange,d=Object(a.useRef)(null),f=gP(Wle({value:u,defaultValue:o,onChange:c}),2),p=f[0],h=f[1];return Object(a.useEffect)((function(){n&&d.current&&d.current.focus({cursor:"end"})}),[n]),l.a.createElement("div",{className:"lakex-table-form-textarea lakex-table-form-textarea-render-mode-".concat(i),id:t||""},l.a.createElement(s.a.TextArea,{defaultValue:o,value:p,autoSize:{minRows:1},placeholder:uw("请输入"),onChange:function(e){var t=e.target.value;h(t),null==c||c(t)},autoFocus:n,ref:d}))},rse=function(){var e,t=G3(tM),n=gP(Object(a.useState)(null==(e=t.getCurrentTheme)?void 0:e.call(t)),2),r=n[0],o=n[1];return Object(a.useEffect)((function(){t.addThemeChangeListener((function(){var e;o(null==(e=t.getCurrentTheme)?void 0:e.call(t))}))}),[]),{themeHelper:t,currentTheme:r}},ose=["icon"];function ise(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ase,lse=function(e){var t=rse().currentTheme,n=e.icon,r=Y3(e,ose),o=Object(a.useMemo)((function(){if(null==n||!n.startsWith("yuqueicon:"))return null;var e=n.split(":")[2],r="DocTypeDefault";return"sheet"===e?r="DocTypeSheet":"design"===e||"artboard"===e?r="DocTypeArtboard":"board"===e?r="DocTypeBoard":"mind"===e?r="DocTypeMind":"table"===e?r="DocTypeTable":"note"===e&&(r="DocTypeNote"),"dark"===t&&(r+="Dark"),r}),[t,n]);return o?l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ise(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ise(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:o},r)):null},use=function(e){var t=G3(sae);return l.a.createElement("span",{className:u$("lakex-table-ui-link",e.className),onClick:function(n){null==t||t.open("link",e.href),e.onClick&&e.onClick(n)}},e.children)},cse=function(e){var t=e.value,n=e.showEmpty;return t?l.a.createElement("div",{className:"lakex-table-form-link-readonly"},l.a.createElement(use,{href:t.src,className:u$($b({},"lakex-table-form-link-has-icon",!!t.icon))},t.icon&&l.a.createElement(lse,{icon:t.icon,className:"lakex-table-form-link-icon"}),t.name)):n?l.a.createElement(Xle,null):null},sse=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.defaultValue,r=e.onSubmit,o=void 0===r?function(){}:r,i=e.onBlur,u=void 0===i?function(){}:i,c=e.style,d=G3(qR),f=Object(a.useRef)(),p=Object(a.useRef)(),v=l.a.useRef(null),g=gP(l.a.useState(!1),2),y=g[0],w=g[1];Object(a.useImperativeHandle)(t,(function(){return{getValues:function(){var e,t=null==(e=v.current)?void 0:e.getFieldsValue();return _(t)}}})),Object(a.useEffect)((function(){setTimeout((function(){var e;null==(e=f.current)||e.focus({cursor:"end"})}),300)}),[n]);var _=Object(a.useCallback)((function(e){var t={src:e.src||e.name||"",name:e.name||e.src||"",icon:e.icon||""};return{src:Bw(t.src)||"http://".concat(t.src),name:t.name,icon:t.icon||""}}),[]),C=function(e){var t=_(e);o(t),u()};return l.a.createElement("div",{className:"lakex-table-link-editor",style:c||{},onKeyDown:function(e){var t;if(e.key===WY.ENTER){var n=null==(t=v.current)?void 0:t.getFieldsValue();C(n)}}},l.a.createElement(k.a,{initialValues:n,onFinish:C,ref:v},l.a.createElement(k.a.Item,{name:"name",label:uw("文本"),className:"lakex-table-link-editor-title"},l.a.createElement(s.a,{ref:f,placeholder:uw("请输入"),autoComplete:"off",suffix:y?l.a.createElement(m.a,{className:"lakex-table-link-editor-fetch lakex-table-link-editor-fetching"}):l.a.createElement(h.a,{title:uw("获取链接标题")},l.a.createElement(g6,{className:"lakex-table-link-editor-fetch",type:"Change",onClick:function(e){return function(e){var t;e.preventDefault(),e.stopPropagation();var n=null==(t=v.current)?void 0:t.getFieldsValue();w(!0),null==d||d.getLinkDetail(n.src).then((function(e){var t;e&&(null==(t=v.current)||t.setFieldsValue({name:e.title,icon:d.getIconByDetail(e)})),w(!1)}))}(e)}}))})),l.a.createElement(k.a.Item,{name:"src",label:uw("链接"),className:"lakex-table-link-editor-link"},l.a.createElement(s.a,{ref:p,placeholder:uw("请输入"),autoComplete:"off",onBlur:function(e){var t;e.target.value,null==(t=v.current)||t.setFieldsValue({icon:""})}})),l.a.createElement(k.a.Item,{name:"icon",style:{display:"none"}},l.a.createElement(s.a,{type:"hidden"})),l.a.createElement(k.a.Item,{className:"lakex-table-link-editor-footer"},l.a.createElement(b.a,{onClick:function(){return u()}},uw("取消")),l.a.createElement(b.a,{type:"primary",htmlType:"submit"},uw("确定")))))}))),dse=function(e){var t,n=e.id,r=e.defaultValue,o=e.useLinkEditor,i=e.prefix,u=e.renderMode,c=e.onChange,d=void 0===c?function(){}:c,f=e.onBlur,p=void 0===f?function(){}:f,v=e.focus,g=function(e){var t=e.defaultValue,n=e.onChange,r=gP(Object(a.useState)((function(){return yw(t)?{src:t.src,name:t.name,icon:t.icon}:t})),2),o=r[0],i=r[1],l=gP(Object(a.useState)(!1),2),u=l[0],c=l[1];Object(a.useEffect)((function(){i(o)}),[o]);var s=Object(a.useCallback)((function(e){i(e),n(e)}),[n]);return Object(a.useEffect)((function(){var e=function(e){e.target.closest(".lakex-table-form-link-popover")||c(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),{state:{value:o,visible:u},setVisible:c,checkLink:function(e){e.target.closest(".lakex-table-form-link-anchor")&&(o||(e.preventDefault(),e.stopPropagation(),c(!0)))},onSubmit:s,onInputChange:function(e){var r,o;if(e.target){if(!e.target.value)return void n(null);o=e.target.value,r=Bw(e.target.value)}else r=e.src,o=e.name;var a={name:o,src:r,icon:(null==t?void 0:t.icon)||""};a.src||(a.src=a.name),a.name||(a.name=a.src),i(a),n(a)}}}({defaultValue:r,onChange:d}),m=g.state,y=g.setVisible,b=g.checkLink,_=g.onInputChange,k=g.onSubmit;void 0===i&&(i=l.a.createElement(g6,{type:"FieldLink",size:14}));var C=o?"lakex-table-form-link-useeditor":"";return l.a.createElement("div",{className:"lakex-table-form-link ".concat(C," lakex-table-form-link-render-mode-").concat(u),id:n},!o&&l.a.createElement(s.a,{allowClear:!0,defaultValue:null==r?void 0:r.src,type:"text",placeholder:uw("请输入"),prefix:i,onChange:_,autoFocus:v,onBlur:p}),o&&l.a.createElement(w.a,{overlayClassName:"lakex-table-form-link-popover",destroyTooltipOnHide:!0,overlay:l.a.createElement(sse,{defaultValue:r,onSubmit:k,onBlur:function(){return y(!1)}}),visible:m.visible},l.a.createElement(l.a.Fragment,null,m.value&&(m.value.src||m.value.name)?l.a.createElement(use,{href:null==(t=m.value)?void 0:t.src,className:u$("lakex-table-form-link-anchor",$b({},"lakex-table-form-link-has-icon",!!m.value.icon)),onClick:function(e){b(e)}},m.value.icon&&l.a.createElement(lse,{icon:m.value.icon,className:"lakex-table-form-link-icon"}),m.value.name):l.a.createElement(s.a,{allowClear:!0,defaultValue:null==r?void 0:r.src,type:"text",placeholder:uw("请输入"),onBlur:_,onPressEnter:_,autoFocus:v}),l.a.createElement(h.a,{title:uw("编辑链接")},l.a.createElement(g6,{className:"lakex-table-link-editor-action",type:"FieldLink",size:14,onClick:function(){return y(!0)}})))))},fse=Ts.defineToken("ToolbarServiceToken"),pse=Ts.defineToken("ToolbarContribution");!function(e){e.isCustom=function(e){return!!e.RenderComponent},e.isNormal=function(e){return!!e.tooltip}}(ase||(ase={}));var hse=function(e){return e.NORMAL="normal",e.LITE="lite",e}(hse||{});function vse(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gse(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gse(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function gse(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mse=Object.defineProperty,yse=Object.getOwnPropertyDescriptor,bse=function(e,t,n,r){for(var o,i=r>1?void 0:r?yse(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&mse(t,n,i),i},wse=function(){return Wb((function e(){Ub(this,e),this._items=new Map,this._customItems=new Map,this.isInit=!1}),[{key:"init",value:function(){var e;if(!this.isInit){this.isInit=!0;var t,n=vse(this.toolbarPluginProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value;try{null==(e=r.registerToolbar)||e.call(r,this)}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}}}},{key:"registerRender",value:function(e){this._toolbarRender=e}},{key:"registerItem",value:function(e){if(ase.isCustom(e))this._registerCustomItem(e);else{if(!ase.isNormal(e))throw new Error("An invalid toolbar item!");this._registerNormalItem(e)}return e}},{key:"getToolbarItem",value:function(e){return this._items.get(e)}},{key:"getCustomItem",value:function(e){return this._customItems.get(e)}},{key:"getRender",value:function(){return this._toolbarRender}},{key:"unregisterItem",value:function(e){var t="string"==typeof e?e:e.id,n=this.getToolbarItem(t),r=this.getCustomItem(t);n&&this._items.delete(t),r&&this._customItems.delete(t)}},{key:"hasToolbars",get:function(){return this._customItems.size>0||this._items.size>0}},{key:"_registerNormalItem",value:function(e){var t=e.id;if(this._items.has(t))throw new Error("A normal toolbar item is already registered with the '".concat(t,"'"));this._items.set(t,e)}},{key:"_registerCustomItem",value:function(e){var t=e.id;if(this._customItems.has(t))throw new Error("A custom toolbar item is already registered with the '".concat(t,"'"));this._customItems.set(t,e)}},{key:"destroy",value:function(){this._items.clear(),this._customItems.clear(),this._toolbarRender=null}}])}();bse([bd(pse)],wse.prototype,"toolbarPluginProvider",2),bse([Vs()],wse.prototype,"destroy",1),wse=bse([Ys()],wse);var _se=function(){},kse=function(e){var t=e.id,n=e.isActive,r=e.isDisable,o=e.isShowIcon,i=e.isShowTitle,a=e.iconType,u=e.iconSize,c=e.titleFontSize,s=e.tooltipStr,d=e.onCommand;return l.a.createElement("button",{className:u$({"lakex-workbench-toolbar-button":!0,"lakex-workbench-toolbar-button-active":n,"lakex-workbench-toolbar-button-disable":r}),id:t,onClick:function(e){r||d(e)},tabIndex:-1},o&&a&&l.a.createElement(g6,{type:a,size:u}),i&&l.a.createElement("span",{className:"toolbar-button-title",style:{fontSize:c}},s))},Cse=function(e){var t=e.onCommand,n=void 0===t?_se:t,r=e.id,o=e.tooltip,i=e.showTooltip,a=void 0!==i&&i,u=e.disable,c=e.active,s=e.showIcon,d=void 0===s||s,f=e.showTitle,p=void 0===f||f,v=e.icon,g=e.iconSize,m=void 0===g?16:g,y=e.titleFontSize,b=void 0===y?14:y,w=e.visible,_=void 0!==w&&w,k=vw(u)?u():u,C=vw(c)?c():c,E=vw(d)?d():d,O=vw(v)?v():v,S=vw(p)?p():p,x=vw(o)?o():o;return(vw(_)?_():_)?a?l.a.createElement(h.a,{title:x},l.a.createElement("div",null,l.a.createElement(kse,{id:r,isDisable:k,isActive:C,isShowIcon:E,isShowTitle:S,iconSize:m,iconType:O,tooltipStr:x,titleFontSize:b,onCommand:n}))):l.a.createElement(kse,{id:r,isDisable:k,isActive:C,isShowIcon:E,isShowTitle:S,iconSize:m,iconType:O,tooltipStr:x,titleFontSize:b,onCommand:n}):null},Ese=function(){return l.a.createElement("div",{className:"lakex-table-workbench-toolbar-btn lake-workbench-toolbar-divider"})},Ose=["RenderComponent"],Sse=["visible","onClick"];function xse(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jse(e,t,n){return t=P_(t),D_(e,Ise()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Ise(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Ise=function(){return!!e})()}var Rse=Object.defineProperty,Ase=Object.getOwnPropertyDescriptor,Dse=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ase(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Rse(t,n,i),i},Pse=function(e){function t(){var e;return Ub(this,t),(e=jse(this,t,arguments))._$ref=l.a.createRef(),e._toolbarRef=l.a.createRef(),e._onChange=e._register(new ck),e.onChange=e._onChange.event,e.Buttons=function(t){var n=t.buttons,r=t.mode;return Array.isArray(n)?l.a.createElement(l.a.Fragment,null,n.map((function(t,n){return l.a.createElement(l.a.Fragment,{key:n},e._renderButtonItem(t,r))}))):l.a.createElement(l.a.Fragment,null)},e}return F_(t,e),Wb(t,[{key:"init",value:function(){this._toolbarRegistry.init()}},{key:"getDom",value:function(){return this._$ref.current}},{key:"render",value:function(){var e=this._toolbarRegistry.getRender();return e?l.a.createElement("div",{className:"lakex-table-workbench-toolbar-container",style:{width:"100%"},ref:this._$ref},l.a.createElement(e,{ref:this._toolbarRef})):null}},{key:"rerender",value:function(){this._toolbarRef.current&&this._toolbarRef.current.refresh()}},{key:"filterVisibleButtons",value:function(e){var t=this;return e?e.filter((function(e){if("|"===e)return!0;var n=t._toolbarRegistry.getCustomItem(e);if(n)return!(null==n||!n.RenderComponent);var r=t._toolbarRegistry.getToolbarItem(e);return!(!r||!r.visible)&&(vw(r.visible)?r.visible():r.visible)})).filter((function(t,n){return!!("|"!==t||e[n-1]&&e[n+1])})):[]}},{key:"_renderButtonItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hse.NORMAL,n=this._toolbarRegistry.getCustomItem(e);if(n){var r=n.RenderComponent,o=Y3(n,Ose);return l.a.createElement(r,{onCommand:function(e){var t;null==(t=o.onClick)||t.call(o,{target:e.currentTarget})}})}var i=this._toolbarRegistry.getToolbarItem(e);if(i){var a=i.visible,u=i.onClick,c=Y3(i,Sse);return t===hse.LITE&&(uu(c.showTitle)&&(c.showTitle=!1),uu(c.showTooltip)&&(c.showTooltip=!0)),l.a.createElement(Cse,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xse(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xse(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({visible:a,onCommand:function(e){null==u||u({target:e.currentTarget})}},c))}return"|"===e&&this._toolbarRegistry.hasToolbars?l.a.createElement(Ese,null):null}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this),this._$ref.current=null,this._toolbarRef.current=null}}])}($_);Dse([Xs(wse)],Pse.prototype,"_toolbarRegistry",2),Dse([Vs()],Pse.prototype,"destroy",1),Pse=Dse([Ys({token:fse})],Pse);var Mse=Object.defineProperty,Tse=Object.getOwnPropertyDescriptor,Fse=function(e,t,n,r){for(var o,i=r>1?void 0:r?Tse(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Mse(t,n,i),i},Nse=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this._toolbarRegistry.init()}}])}();Fse([Xs(wse)],Nse.prototype,"_toolbarRegistry",2),Nse=Fse([Ys({contrib:[L3]})],Nse);var Vse=pd().contribution(pse).register(Nse).register(Pse).register(wse);function Lse(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bse(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lse(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lse(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $se,zse=Object.defineProperty,Use=Object.getOwnPropertyDescriptor,Hse=function(e,t,n,r){for(var o,i=r>1?void 0:r?Use(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zse(t,n,i),i},qse=1004,Wse=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.zIndex=Bse(Bse({},this._renderZIndexService.zIndex),{},{mask:qse,modalRenderBase:1005,modalFromRender:1006,modalFromToolbar:1007,expandRecord:1008,modalFromExpandRecord:1009,modalMessage:1010})}},{key:"maxZIndex",get:function(){var e=Object.values(this.zIndex);return Math.max.apply(Math,e)}}])}();Hse([Xs(xie)],Wse.prototype,"_renderZIndexService",2),Hse([Ns()],Wse.prototype,"init",1),Wse=Hse([Ys()],Wse),function(e){e.isAbsolutePosi=function(e){return e&&!ww(e.left)&&!ww(e.top)},e.isAttachRefPosi=function(e){return e&&!!e.placement&&!!e.origin}}($se||($se={}));var Gse=function(e){return e.MODAL="modal",e.DRAWER="drawer",e}(Gse||{}),Kse=Ts.defineToken("ModalServiceToken"),Yse=Ts.defineToken("ModalContribution");function Xse(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Jse(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jse(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Jse(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zse=Object.defineProperty,Qse=Object.getOwnPropertyDescriptor,ede=function(e,t,n,r){for(var o,i=r>1?void 0:r?Qse(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Zse(t,n,i),i},tde=function(){return Wb((function e(){Ub(this,e),this._modals=new Map,this._hasInit=!1}),[{key:"init",value:function(){var e;if(!this._hasInit){this._hasInit=!0;var t,n=Xse(this._modalPluginProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value;try{null==(e=r.registerModal)||e.call(r,this)}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}}}},{key:"registerItem",value:function(e){var t=e.id;this._modals.has(t)&&this._modals.delete(t),this._modals.set(t,e)}},{key:"getModalItem",value:function(e){return this._modals.get(e)}},{key:"getModalItems",value:function(){return Vb(this._modals.values())}}])}();function nde(e,t,n){return t=P_(t),D_(e,rde()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function rde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(rde=function(){return!!e})()}ede([bd(Yse)],tde.prototype,"_modalPluginProvider",2),tde=ede([Ys()],tde);var ode=Object.defineProperty,ide=Object.getOwnPropertyDescriptor,ade=function(e,t,n,r){for(var o,i=r>1?void 0:r?ide(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ode(t,n,i),i},lde=function(e){function t(){var e;return Ub(this,t),(e=nde(this,t,arguments))._$scrollContainer=null,e._hasScrollListener=!1,e._scrolledCount=0,e._onScrollEmitter=e._register(new ck),e._onScroll=e._onScrollEmitter.event,e._scrolledDistance=0,e._scrollHandler=function(t){e._getScrollDistance(t),e._scrolledDistance>10&&e._onScrollEmitter.emit()},e}return F_(t,e),Wb(t,[{key:"attachScrollContainer",value:function(e){e&&(this._$scrollContainer=e)}},{key:"attachScrollListener",value:function(e,t){var n=this;this._hasScrollListener||this._addGlobalScrollListener();var r=this._onScroll((function(){e()}));return this._scrolledCount++,{destroy:function(){n._scrolledCount--,r.destroy(),n._scrolledCount<=0&&n._removeGlobalScrollListener()}}}},{key:"_getScrollDistance",value:function(e){var t=Math.abs(e.deltaX),n=Math.abs(e.deltaY);this._scrolledDistance=n||t}},{key:"_addGlobalScrollListener",value:function(){this._$scrollContainer&&this._$scrollContainer.addEventListener("wheel",this._scrollHandler,{passive:!0})}},{key:"_removeGlobalScrollListener",value:function(){this._$scrollContainer&&this._$scrollContainer.removeEventListener("wheel",this._scrollHandler)}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);function ude(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ude(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ude(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sde(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return dde(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dde(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function dde(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ade([Vs()],lde.prototype,"destroy",1),lde=ade([Ys()],lde);var fde=function(e){if(!(e instanceof HTMLElement||e instanceof SVGElement))return!1;var t=getComputedStyle(e);return["overflow","overflow-x","overflow-y"].some((function(e){var n=t.getPropertyValue(e);return"auto"===n||"scroll"===n||"overlay"===n}))};function pde(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];if(!e)return[];var n,r=sde(e);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=document.querySelectorAll(o);if(i.length>0){var a,l=sde(i);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=null==u?void 0:u.getBoundingClientRect().toJSON();t.push({dom:u,rect:c})}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){r.e(e)}finally{r.f()}return t}var hde=function(e){var t=Object(a.useRef)(null),n=G3(lde),r=gP(Object(a.useState)((function(){return pde(e.skipElements)})),2),o=r[0],i=r[1];Object(a.useEffect)((function(){n.attachScrollContainer(t.current);var r=n.attachScrollListener((function(t){"block"===e.scrollStrategy?(null==t||t.preventDefault(),null==t||t.stopPropagation()):"close"===e.scrollStrategy&&e.onScrollAutoClose()}));return function(){r.destroy()}}),[]),Object(a.useEffect)((function(){var t,n=[],r=Rl((function(){var t=pde(e.skipElements);i(t)}),200),a=e.skipElements||[];if("donut"===e.shape&&a.length>0){if(a){var l,u=sde(a);try{for(u.s();!(l=u.n()).done;){var c=l.value,s=document.querySelectorAll(c);if(0!==s.length){var d,f=sde(s);try{var p=function(){var e=d.value,t=new ResizeObserver(Rl((function(t){var n=t[0];if(n.contentRect){var r=n.target.getBoundingClientRect().toJSON(),a=o.findIndex((function(t){return t.dom===e}));if(null==a)return;o[a]={dom:e,rect:r},i(o)}}),200));t.observe(e),n.push({resizer:t,dom:e})};for(f.s();!(d=f.n()).done;)p()}catch(e){f.e(e)}finally{f.f()}}}}catch(e){u.e(e)}finally{u.f()}}t=function(e){var t,n=[],r=sde(e);try{var o=function(){var e=t.value,r=document.querySelector(e);if(!r)return 1;for(var o=r.parentElement;o;)fde(o)&&(n.find((function(e){return e!==o}))||n.push(o)),o=o.parentElement};for(r.s();!(t=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}return n.push(document),n}(a);var h,v=sde(t);try{for(v.s();!(h=v.n()).done;){h.value.addEventListener("scroll",r)}}catch(e){v.e(e)}finally{v.f()}}return function(){if(n.length>0)for(var e=0,o=n;e<o.length;e++){var i=o[e];i.resizer.unobserve(i.dom),i.resizer.disconnect()}if(t){var a,l=sde(t);try{for(l.s();!(a=l.n()).done;){a.value.removeEventListener("scroll",r)}}catch(e){l.e(e)}finally{l.f()}}}}),[e.shape]);var u=function(t){e.maskClick&&e.maskClick(),t.preventDefault()},c=cde({zIndex:e.zIndex,opacity:e.visible?1:0},e.style&&e.style);if(!e.enable)return null;if("donut"===e.shape&&o){var s=function(e){var t=document.body.getBoundingClientRect(),n=[];return e.forEach((function(r,o){if(0===o)r.top>0&&r.top>t.top&&n.push({top:0,left:r.left,width:r.width,height:r.top}),r.left>0&&r.left>t.left&&n.push({top:0,left:0,width:r.left,height:Math.max(t.bottom,t.height)}),r.right>0&&r.right<t.right&&n.push({top:0,left:r.left+r.width,width:t.right-r.right,height:Math.max(t.bottom,t.height)});else{var i=e[o-1].bottom;o>0&&r.top-i>3&&n.push({top:i,left:r.left,width:r.width,height:r.top-i})}o===e.length-1&&r.bottom>0&&r.bottom<t.bottom&&n.push({top:r.bottom,left:0,width:t.width,height:Math.max(t.bottom,t.height)-r.bottom})})),e[0].bottom<0&&n.push({top:0,left:0,width:t.width,height:t.height}),n}(o.map((function(e){return e.rect})));return l.a.createElement(l.a.Fragment,null,s.map((function(e){return l.a.createElement("div",{className:"lakex-workbench-modal-donut-mask",style:cde(cde({},c),e),onClick:u,onContextMenu:function(e){return e.preventDefault(),!1}})})))}return l.a.createElement("div",{ref:t,className:"lakex-workbench-modal-mask",style:c,onClick:u,onContextMenu:function(e){return e.preventDefault(),!1}})};function vde(e){return mw(e)&&e.endsWith("%")}function gde(e){return mw(e)&&e.startsWith("calc(")}function mde(e){return vde(e)||gde(e)}function yde(e){return!function(e){return ar(e)&&1===e.nodeType&&!Ni(e)}(e)}function bde(e,t){if(!e)return 0;if(gde(e)){if((e=e.replace(/^(\s|calc\()+|(\s|\))+$/g,"")).includes("%")){var n=gP(e.split("%"),2),r=n[0],o=n[1];return V3(parseInt(r,10)/100*t+o)}}else if(vde(e)){var i=e.replace("%","");return parseInt(i,10)/100*t}return 0}function wde(e){return l.a.createElement(BX,{maxWidth:e.maxWidth,minWidth:480,defaultSize:{width:e.width,height:"auto"},enable:{top:!1,left:!0,bottom:!1,right:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},handleStyles:{left:{zIndex:1010}},onResizeStart:function(t,n,r){var o;null==(o=e.onResizeStart)||o.call(e,t,n,r)},onResizeStop:function(t,n,r,o){var i;localStorage.setItem("lakex-table-modal-resize-width",String(r.offsetWidth)),null==(i=e.onResizeStop)||i.call(e,t,n,r,o)}},e.children)}function _de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_de(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cde=function(e){var t,n,r,o=e.id,i=Poe(),u=G3(Kse),c=((null==u?void 0:u.visibleList)||[]).includes(o),s=gP(Object(a.useState)(!1),2),d=s[0],f=s[1],p=Object(a.useRef)(null),h=gP(qle(),4),v=h[0],g=h[1],m=h[2],y=h[3],b=Object(a.useRef)(null),w=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=u.onChange((function(){var e=Date.now();w.current=e,i()}));return function(){e.destroy()}}),[]),Ule("esc",(function(t){u.isDisableEscClose(o)||(t.preventDefault(),u.close(e.id))})),Object(a.useLayoutEffect)((function(){p.current?c?g(p.current):m(p.current):m()}),[p,c]),Object(a.useEffect)((function(){var e,t=u.onUpdatePosition((function(t){t.modalId===o&&(clearTimeout(e),e=cw((function(){var e,t=null==(e=p.current)?void 0:e.getBoundingClientRect();y(t||null)})))}));return function(){t.destroy(),clearTimeout(e)}}),[]);var _=Object(a.useMemo)((function(){if(u.getModalProps(e.id).mode!==Gse.DRAWER)return u.getPosition(e.id,v)||{left:0,top:0}}),[e.id,v,null==v?void 0:v.height,null==v?void 0:v.width,w.current]);if(!c)return null;var k=u.getModalProps(e.id),C={left:null!==(t=null==_?void 0:_.left)&&void 0!==t?t:"initial",top:null!==(n=null==_?void 0:_.top)&&void 0!==n?n:"initial"},E={},O=(null==(r=null==k?void 0:k.position)?void 0:r.placement)||"";if($se.isAttachRefPosi(k.position)&&"cover"===O){var S=yde(k.position.origin)?k.position.origin:k.position.origin.getBoundingClientRect();C.width=null==S?void 0:S.width,C.height=null==S?void 0:S.height,E.width="100%",E.height="100%"}var x=function(){var t;null==(t=b.current)||t.onCloseByClickAwayOrScroll(),u.close(e.id)},j=e.RenderComponent,I=null!=k.hasMask?k.hasMask:e.showMask,R=l.a.createElement("div",{className:"lakex-workbench-modal-layout",style:kde({zIndex:e.zIndex},k.mode===Gse.MODAL&&_&&C)},l.a.createElement("div",{className:"lakex-workbench-modal-content",ref:p,style:kde({},E)},l.a.createElement(j,kde(kde({},k),{},{ref:b})))),A=u.maskSkipElements(o)||[];return l.a.createElement("div",{className:u$("lakex-workbench-modal-container",$b($b($b({hasAnimation:e.hasAnimation,hasMask:I},"lakex-workbench-modal-container-mode-".concat(k.mode),!0),"lakex-workbench-modal-container-placement-".concat(O),!0),"lakex-workbench-modal-container-resizing",d)),style:{zIndex:e.zIndex,visibility:_||k.mode!==Gse.MODAL?"visible":"hidden"}},l.a.createElement(hde,{shape:A.length>0?"donut":"flat",skipElements:A,zIndex:e.maskZIndex,scrollStrategy:e.scrollStrategy,style:e.maskStyle,maskClick:x,onScrollAutoClose:x,enable:!u.isDisableClickAwayClose(o),visible:I}),k.mode===Gse.DRAWER?l.a.createElement(wde,{width:u.getWidth(),onResizeStart:function(){f(!0)},onResizeStop:function(){var t;f(!1),null==(t=e.onResize)||t.call(e)}},R):R)},Ede=function(e){var t=e.initialState.message,n=void 0===t?"":t,r=G3(Kse),o=gP(Object(a.useState)(!1),2),i=o[0],u=o[1];return Object(a.useEffect)((function(){u(!0);var e=setTimeout((function(){r.close("tooltip")}),2e3);return function(){clearTimeout(e)}}),[n]),l.a.createElement("div",{className:u$("lakex-table-tooltip",{"lakex-table-tooltip-active":i,"lakex-table-tooltip-placement-top":!0})},l.a.createElement("div",{className:"lakex-table-tooltip-message"},n))},Ode=Ts.defineToken("ViewportServiceToken"),Sde=Object.defineProperty,xde=Object.getOwnPropertyDescriptor,jde=function(e,t,n,r){for(var o,i=r>1?void 0:r?xde(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Sde(t,n,i),i},Ide=function(){return Wb((function e(){Ub(this,e)}),[{key:"getPosition",value:function(e,t){if(lu(t)||lu(t.width)||lu(t.height))return null;var n=null;return $se.isAbsolutePosi(e)?n=this._calculateAbsolutePosition(e,t):$se.isAttachRefPosi(e)&&(n=this._calculateAutoPlacementPosition(e,t)),null!=n&&n.top&&Number(n.top)<0&&(n.top=0),null!=n&&n.left&&Number(n.left)<0&&(n.left=0),!n||au(n.left)||au(n.top)?(console.warn("modal size has conflicts with the placement in this origin and viewport"),null):n}},{key:"_calculateAbsolutePosition",value:function(e,t){var n={left:e.left,top:e.top},r=this._getBoundingBox(),o=r.width,i=r.height,a=(null==t?void 0:t.height)||0,l=(null==t?void 0:t.width)||0;if(mde(e.left)){var u=bde(e.left,o);n.left=u-Math.floor(l/2)}if(mde(e.top)){var c=bde(e.top,i);n.top=c-Math.floor(a/2)}return n}},{key:"_calculateAutoPlacementPosition",value:function(e,t){if(!t)return null;var n=yde(e.origin)?e.origin:e.origin.getBoundingClientRect(),r=this._getBoundingBox(),o=(null==t?void 0:t.width)||0,i=(null==t?void 0:t.height)||0,a=e.placement,l=this.getRenderRangeBox(n,a,i,o);if(this._rectIsContain(l,r))return{left:l.left,top:l.top};var u={left:l.left,top:l.top},c=l.top+l.height>r.bottom,s=l.top<r.top;if(c||s){var d=this._autoLayoutWithMinimalOffset(n.top,i,[r.top,r.bottom]);u.top=d}var f=l.left+l.width>r.right;if(l.left<r.left||f){var p=this._autoLayoutWithMinimalOffset(n.left,o,[r.left,r.right]);u.left=p}return u}},{key:"_autoLayoutWithMinimalOffset",value:function(e,t,n){var r=gP(n,2),o=r[0],i=r[1],a=e+t+5;return e>o&&a<i?e:e<o?e+=o-e:a>i?e-=a-i:0}},{key:"_getBoundingBox",value:function(){return this._viewportService.getViewportRect()}},{key:"getRenderRangeBox",value:function(e,t,n,r){var o={left:0,top:0,width:r,height:n};if("top"===t&&(o.top=e.top-n-5),("bottom"===t||"bottomRight"===t||"bottomLeft"===t)&&(o.top=e.top+e.height+5),"top"===t||"bottom"===t){o.left=e.left-0}if("left"===t&&(o.left=e.left-r-5),"bottomRight"===t&&(o.left=e.left+e.width-r),"bottomLeft"===t&&(o.left=e.left),("right"===t||"rightTop"===t)&&(o.left=e.left+e.width+5),"rightTop"===t&&(o.top=e.top),"left"===t||"right"===t){var i=Math.ceil((n-e.height)/2);o.top=e.top-i}return"cover"===t&&(o.left=e.left,o.top=e.top,o.width=r,o.height=n),o}},{key:"_rectIsContain",value:function(e,t){if(e.left<0||e.top<0)return!1;var n=[e.left,e.top,e.left+e.width,e.top+e.height],r=n[0],o=n[1],i=n[2],a=n[3],l=[t.left,t.top,t.left+t.width,t.top+t.height];return r>=l[0]&&o>=l[1]&&i<=l[2]&&a<=l[3]}}])}();jde([Xs(Ode)],Ide.prototype,"_viewportService",2),Ide=jde([Ys()],Ide);var Rde="lakex-workbench-global-modal-container";function Ade(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ade(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ade(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pde(e,t,n){return t=P_(t),D_(e,Mde()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Mde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Mde=function(){return!!e})()}var Tde=Object.defineProperty,Fde=Object.getOwnPropertyDescriptor,Nde=function(e,t,n,r){for(var o,i=r>1?void 0:r?Fde(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Tde(t,n,i),i},Vde="lakex-table-modal-resize-width",Lde=function(e){function t(){var e;return Ub(this,t),(e=Pde(this,t,arguments))._onBeforeClose=e._register(new ck),e.onBeforeClose=e._onBeforeClose.event,e._onUpdatePosition=e._register(new ck),e.onUpdatePosition=e._onUpdatePosition.event,e._visibleList=[],e._visibleListOpenArgs=new Map,e._toDestroyList=new H_,e._onChange=e._register(new ck),e.onChange=e._onChange.event,e._onAppend=e._register(new ck),e.onAppend=e._onAppend.event,e.getMaxWidth=function(){return e._configurationService.getValue("workbench.docContainer").offsetWidth},e.getWidth=function(){var t;if(localStorage.getItem(Vde))t=Number(localStorage.getItem(Vde));else{var n=globalThis.innerWidth;t=n>1440?720:n>1280?580:480}var r=e.getMaxWidth();return t>r?r:t},e}return F_(t,e),Wb(t,[{key:"init",value:function(){this._modalRegistry.init(),this._innerModalRegister()}},{key:"destroy",value:function(){this._toDestroyList.destroy()}},{key:"_innerModalRegister",value:function(){this._modalRegistry.registerItem({id:"tooltip",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",disableClickAwayClose:!0,disableEscClose:!0,RenderComponent:Ede})}},{key:"showTooltip",value:function(e,t){this.open("tooltip",{position:t,initialState:{message:e}})}},{key:"confirm",value:function(e){var t=this._zIndexService.maxZIndex,n=e.type||"confirm",r=Dde(Dde({},e),{},{zIndex:t,getContainer:this._getOrCreateRoot()});C.a[n](r)}},{key:"open",value:function(e,t){t&&this._visibleListOpenArgs.set(e,t),this._addVisible(e)}},{key:"close",value:function(e){this._removeVisible(e),this._visibleListOpenArgs.delete(e)}},{key:"getTopVisibleModalId",value:function(){return this._visibleList[this._visibleList.length-1]}},{key:"closeAll",value:function(){this._removeVisible()}},{key:"getPosition",value:function(e,t){var n,r=this._visibleListOpenArgs.get(e),o=null==(n=this._modalRegistry.getModalItem(e))?void 0:n.position,i=(null==r?void 0:r.position)||o;return i?this._modalLayoutService.getPosition(i,t):null}},{key:"emitUpdatePosition",value:function(e){this._onUpdatePosition.emit({modalId:e})}},{key:"getModalProps",value:function(e){var t,n=this._modalRegistry.getModalItem(e),r=this._visibleListOpenArgs.get(e)||{},o=Dde(Dde({},n),r);return o.mode===Gse.DRAWER&&!(null!=(t=o.position)&&t.placement)&&(o.position={placement:"right"}),Dde(Dde({},o),{},{mode:o.mode||Gse.MODAL,position:o.position||{},initialState:o.initialState||{}})}},{key:"render",value:function(){var e=this,t=this._modalRegistry.getModalItems();return t?t.map((function(t){return e.getRenderModal(t)})):null}},{key:"getRenderModal",value:function(e){var t=e.id,n=e.RenderComponent,r=e.hasMask,o=e.mode,i=void 0===o?Gse.MODAL:o,a=e.zIndex,u=void 0===a?"modalFromToolbar":a,s=e.scrollStrategy,d=void 0===s?"block":s,f=e.maskStyle,p=e.hasAnimation,h=void 0!==p&&p,v=this._zIndexService.zIndex[u],g=this._zIndexService.zIndex.mask,m=l.a.createElement(Cde,{id:t,key:t,mode:i,showMask:r,maskStyle:f||{},zIndex:v,maskZIndex:g,scrollStrategy:d,hasAnimation:h,RenderComponent:n,maxWidth:this.getMaxWidth(),onResize:function(){var t;null==(t=e.onResize)||t.call(e)}});return c.a.createPortal(m,this._getOrCreateRoot())}},{key:"visibleList",get:function(){return this._visibleList}},{key:"isModalVisible",value:function(e){return this._visibleList.includes(e)}},{key:"isDisableEscClose",value:function(e){var t;return!(null==(t=this.getModalProps(e))||!t.disableEscClose)}},{key:"isDisableClickAwayClose",value:function(e){var t;return!(null==(t=this.getModalProps(e))||!t.disableClickAwayClose)}},{key:"maskSkipElements",value:function(e){var t;return null==(t=this.getModalProps(e))?void 0:t.maskSkipElements}},{key:"_getOrCreateRoot",value:function(){var e=this._configurationService.getValue("modal.customModalContainer")||document.body,t=e.querySelector(".".concat(Rde));if(!t){var n=document.createElement("div");n.classList.add(Rde),e.appendChild(n),t=n}return t}},{key:"_addVisible",value:function(e){if(this._isValidModal(e)){var t=this._visibleList,n=Vb(new Set(t.concat(e)));this._notify(n)}}},{key:"_removeVisible",value:function(e){var t=this;if(!e||this._isValidModal(e)){var n=this._visibleList,r=[];if(e){if(!this._modalRegistry.getModalItem(e))return void console.error("The Compo: ".concat(e," is not registered"));r=n.filter((function(t){return t!==e})),this._onBeforeClose.emit({modalId:e})}else n.forEach((function(e){t._onBeforeClose.emit({modalId:e})}));this._notify(r)}}},{key:"_isValidModal",value:function(e){return!!this._modalRegistry.getModalItem(e)}},{key:"_notify",value:function(e){this._visibleList=e,this._onChange.emit(this._visibleList)}},{key:"emitAppendEvent",value:function(e){return this._onAppend.emit(e)}}])}($_);Nde([Xs(tde)],Lde.prototype,"_modalRegistry",2),Nde([Xs(Wse)],Lde.prototype,"_zIndexService",2),Nde([Xs(Ide)],Lde.prototype,"_modalLayoutService",2),Nde([Xs(R_)],Lde.prototype,"_configurationService",2),Nde([Vs()],Lde.prototype,"destroy",1),Lde=Nde([Ys({token:Kse,contrib:[L3]})],Lde);var Bde=Object.defineProperty,$de=Object.getOwnPropertyDescriptor,zde=function(e,t,n,r){for(var o,i=r>1?void 0:r?$de(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Bde(t,n,i),i},Ude=function(){return Wb((function e(){Ub(this,e)}),[{key:"getRenderViewPort",value:function(){return this._renderContext.$root.getBoundingClientRect()}},{key:"getViewportRect",value:function(){var e=document.documentElement.getBoundingClientRect();return new DOMRect(e.x,0,e.width,e.height)}}])}();zde([Xs(cie)],Ude.prototype,"_renderContext",2),Ude=zde([Ys({token:Ode})],Ude);var Hde=pd().contribution(Yse).register(Lde).register(tde).register(lde).register(Ide).register(Wse).register(Ude),qde=function(e){var t=G3(tde),n=G3(Kse);return Object(a.useEffect)((function(){null==t||t.registerItem(e),null==n||n.emitAppendEvent(e.id)}),[]),l.a.createElement(l.a.Fragment,null)};function Wde(e,t,n){return t=P_(t),D_(e,Gde()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Gde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Gde=function(){return!!e})()}var Kde=Object.defineProperty,Yde=Object.getOwnPropertyDescriptor,Xde=function(e){function t(){var e;return Ub(this,t),(e=Wde(this,t,arguments))._key=(new Date).getTime(),e}return F_(t,e),Wb(t,[{key:"getRenderContainerId",value:function(){return"lakex-table-render-container-"+this._key}},{key:"setContainerEl",value:function(e){this._$containerEl=e}},{key:"getContainerEl",value:function(){return this._$containerEl}}])}($_);function Jde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zde(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jde(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jde(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Xde=function(e,t,n,r){for(var o,i=r>1?void 0:r?Yde(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Kde(t,n,i),i}([Ys()],Xde);var Qde=Object.defineProperty,efe=Object.getOwnPropertyDescriptor,tfe=function(e,t,n,r){for(var o,i=r>1?void 0:r?efe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Qde(t,n,i),i},nfe=1004,rfe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.zIndex=Zde(Zde({},this._renderZIndexService.zIndex),{},{mask:nfe,modalRenderBase:1005,modalFromRender:1006,modalFromToolbar:1007,expandRecord:1008,modalFromExpandRecord:1009,modalMessage:1010})}},{key:"maxZIndex",get:function(){var e=Object.values(this.zIndex);return Math.max.apply(Math,e)}}])}();function ofe(e,t,n){return t=P_(t),D_(e,ife()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function ife(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(ife=function(){return!!e})()}tfe([Xs(xie)],rfe.prototype,"_renderZIndexService",2),tfe([Ns()],rfe.prototype,"init",1),rfe=tfe([Ys()],rfe);var afe=function(e){function t(e){var n;return Ub(this,t),(n=ofe(this,t,[e]))._$renderRef=l.a.createRef(),n._$workbenchRef=l.a.createRef(),n._toDestroyCollection=[],n.state={isRenderReady:!1,isWorkbenchReady:!1,key:+new Date},n}return F_(t,e),Wb(t,[{key:"componentDidMount",value:function(){var e=this;this.props.attachRender(this._$renderRef.current);var t=this.props.container;this.toolbarService=t.get(fse),this.modalService=t.get(Kse),this._workbenchService=t.get(Xde),this._workbenchService.setContainerEl(this._$workbenchRef.current),this.setState({isRenderReady:!0}),this.props.initWorkbench(),this.setState({isWorkbenchReady:!0}),this.modalService.onAppend((function(t){e.forceUpdate()})),t.get(oR).log({type:rR.workbench,action:"workbenchReady"})}},{key:"componentWillUnmount",value:function(){this._toDestroyCollection.forEach((function(e){return e.destroy()}))}},{key:"_getWorkbenchRender",value:function(){return this.state.isWorkbenchReady?l.a.createElement(l.a.Fragment,null,l.a.createElement(R6,{onError:this.props.onError},this.toolbarService.render()),l.a.createElement(R6,{onError:this.props.onError},this.modalService.render())):null}},{key:"render",value:function(){var e,t=this.props.container;return l.a.createElement(l.a.Fragment,null,l.a.createElement(R6,{onError:this.props.onError},l.a.createElement(E.a,{prefixCls:"ant"},l.a.createElement(W3,{value:{container:t,onError:this.props.onError},key:this.state.key},l.a.createElement("div",{className:"lakex-table-workbench-container",ref:this._$workbenchRef},this._getWorkbenchRender(),l.a.createElement(R6,{onError:this.props.onError},l.a.createElement("div",{id:null==(e=this._workbenchService)?void 0:e.getRenderContainerId(),className:"lakex-table-render-container",ref:this._$renderRef,onContextMenu:function(e){return e.preventDefault()}})))))))}}])}(l.a.PureComponent);function lfe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ufe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ufe(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function ufe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cfe(e,t,n){return t=P_(t),D_(e,sfe()?Reflect.construct(t,[],P_(e).constructor):t.apply(e,n))}function sfe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(sfe=function(){return!!e})()}var dfe=function(e){function t(e){var n;return Ub(this,t),(n=cfe(this,t)).render=null,n._options=e||{},n.$root=e.$root,n.container=e.container,n._loadCoreServices(),n.registerPlugins(e.plugins,{container:n.container}),n._registerContribs(e.contribs),n._mountComponent(),n._logger.log({type:rR.workbench,action:"workbenchInited",data:null}),n}return F_(t,e),Wb(t,[{key:"attachRender",value:function(e){this._options.renderService.initDom(e,this.$root)}},{key:"initWorkbench",value:function(){this._workbenchRegistry.init(),this.container.get(Zb).status=Jb.WorkbenchInited}},{key:"destroy",value:function(){var e;null==(e=this.render)||e.destroy(),this._workbenchRegistry.destroy(),this.unregisterPlugins(this.container),this._unMountComponent()}},{key:"_loadCoreServices",value:function(){this.container.register({token:H3,useValue:{$root:this.$root}}),this._workbenchRegistry=this.container.get(U3)}},{key:"_logger",get:function(){return this.container.get(oR)}},{key:"_mountComponent",value:function(){var e=this;c.a.render(l.a.createElement(afe,{key:+new Date,container:this.container,attachRender:function(t){return e.attachRender(t)},initWorkbench:function(){return e.initWorkbench()},onError:this._options.onError}),this.$root)}},{key:"_unMountComponent",value:function(){c.a.unmountComponentAtNode(this.$root)}},{key:"_registerContribs",value:function(e){if(e){var t,n=lfe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.container.register(r)}}catch(e){n.e(e)}finally{n.f()}}}}])}(Xk),ffe=pd().contribution(L3).register(rfe).register(Xde).register(U3),pfe=function(){return Wb((function e(){Ub(this,e),this.kernelContainer=yd.createChild(),this.renderContainer=this.kernelContainer.createChild(),this.workbenchContainer=this.renderContainer.createChild()}),[{key:"init",value:function(){this._loadGlobalServices(),this._loadKernelServices(),this._loadRenderServices(),this._loadWorkbenchServices()}},{key:"destroy",value:function(){this._unloadGlobalServices(),this._unloadKernelServices(),this._unloadRenderServices(),this._unloadWorkbenchServices()}},{key:"_loadGlobalServices",value:function(){this.kernelContainer.load(bM,!0),this.kernelContainer.load(sR,!0),this.kernelContainer.load(jk,!0)}},{key:"_unloadGlobalServices",value:function(){this.kernelContainer.unload(bM),this.kernelContainer.unload(sR),this.kernelContainer.unload(jk)}},{key:"_loadKernelServices",value:function(){this.kernelContainer.load(FE,!0),this.kernelContainer.load(Uk,!0),this.kernelContainer.load(SR,!0),this.kernelContainer.load(FR,!0),this.kernelContainer.load(_x,!0),this.kernelContainer.load(JA,!0),this.kernelContainer.load(_A,!0),this.kernelContainer.load(dD,!0),this.kernelContainer.load(ZI,!0)}},{key:"_unloadKernelServices",value:function(){this.kernelContainer.unload(FE),this.kernelContainer.unload(Uk),this.kernelContainer.unload(SR),this.kernelContainer.unload(FR),this.kernelContainer.unload(_x),this.kernelContainer.unload(JA),this.kernelContainer.unload(_A),this.kernelContainer.unload(dD),this.kernelContainer.unload(ZI)}},{key:"_loadRenderServices",value:function(){this.renderContainer.load(yM,!0),this.renderContainer.load(lM,!0),this.renderContainer.load(Dae,!0),this.renderContainer.load(pue,!0),this.renderContainer.load(Dle,!0),this.renderContainer.load(que,!0),this.renderContainer.load(ple,!0)}},{key:"_unloadRenderServices",value:function(){this.renderContainer.unload(yM),this.renderContainer.unload(lM),this.renderContainer.unload(Dae),this.renderContainer.unload(pue),this.renderContainer.unload(Dle),this.renderContainer.unload(que),this.renderContainer.unload(ple)}},{key:"_loadWorkbenchServices",value:function(){this.workbenchContainer.load(ffe,!0),this.workbenchContainer.load(Vse,!0),this.workbenchContainer.load(Hde,!0)}},{key:"_unloadWorkbenchServices",value:function(){this.workbenchContainer.unload(ffe),this.workbenchContainer.unload(Vse),this.workbenchContainer.unload(Hde)}}])}(),hfe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e,t){this._options=t,this.kernelContainer=e.kernelContainer,this.renderContainer=e.renderContainer,this.workbenchContainer=e.workbenchContainer,this.configurationService=this.kernelContainer.get(R_),this._registerKernelConfig(t.kernelPlugins),this._registerRenderConfig(t.renderPlugins),this._registerWorkbenchConfig(t.workbenchPlugins),this._setInitConfigData(t.settings)}},{key:"_registerKernelConfig",value:function(e){this.configurationService.registerConfiguration({id:"development",type:"object",title:"开发配置",properties:{disableReactDevTools:{type:"boolean",description:"是否禁用 react 开发工具"}}}),this.configurationService.registerDefaultValue({"development.disableReactDevTools":!0}),this.registerPluginConfiguration(e,this.configurationService)}},{key:"_registerRenderConfig",value:function(e){this.renderContainer.get(fle).initConfiguration(),this.renderContainer.get(Hue).initConfiguration(),this.configurationService.registerConfiguration({id:"render",type:"object",title:"渲染",properties:{noRecord:{type:"boolean",description:"不渲染 record 数据，表单提交编辑器不需要加载 record"},showFieldIcon:{type:"boolean",description:"是否展示字段 icon"},mode:{type:"string",description:"通用渲染模式",enum:Object.values(tie)},deferMode:{type:"string",description:"延迟渲染模式",enum:Object.values(nie)},autoActive:{type:"boolean",description:"是否自动激活"}}}),this.configurationService.registerDefaultValue({"render.noRecord":!1,"render.showFieldIcon":!0,"render.mode":tie.NORMAL,"render.autoActive":!0,"render.deferMode":nie.ASYNC_CONCURRENT}),this.registerPluginConfiguration(e,this.configurationService)}},{key:"_registerWorkbenchConfig",value:function(e){this.configurationService.registerConfiguration({id:"workbench",type:"object",title:"Workbench",properties:{toolbar:{type:"object",properties:{visible:{type:"boolean",description:"是否显示工具栏"}}},docContainer:{type:"object",description:"文档容器"}}}),this.configurationService.registerDefaultValue({"workbench.toolbar.visible":!0,"workbench.docContainer":this._options.$root}),this.configurationService.registerConfiguration({id:"modal",type:"object",title:"弹出窗",properties:{mode:{type:"string",description:"通用弹出层模式",enum:Object.values(Gse)},customModalContainer:{type:"object",description:"自定义弹出层容器，类型为 HTMLElement | undefined"}}}),this.configurationService.registerDefaultValue({"modal.mode":Gse.MODAL,"modal.customModalContainer":void 0}),this.registerPluginConfiguration(e,this.configurationService)}},{key:"_setInitConfigData",value:function(e){e&&this.configurationService.setValue(e)}},{key:"registerPluginConfiguration",value:function(e,t){e&&e.forEach((function(e){e.registerConfiguration&&e.registerConfiguration(t)}))}}])}();md.config({lifecycle:Ts.Lifecycle.singleton});var vfe=function(){return Wb((function e(t){var n=this;Ub(this,e),this._destroy=!1,this._containerService=new pfe,this._configService=new hfe,this._errors=[],this._reactErrors=[],this._onLoad=new ck,this.onLoad=this._onLoad.event,this._options=t,lw.setLanguage(t.lang),this._containerService.init(),this._loadCoreServices(),this._lifeService.status=Jb.Init,this._configService.init({kernelContainer:this._containerService.kernelContainer,renderContainer:this._containerService.renderContainer,workbenchContainer:this._containerService.workbenchContainer},t),this._configService.configurationService.getValue("development.disableReactDevTools")&&function(){var e=function(){},t=window.__REACT_DEVTOOLS_GLOBAL_HOOK__;if("object"===Lb(t))for(var n=0,r=Object.entries(t);n<r.length;n++){var o=gP(r[n],2),i=o[0],a=o[1];t[i]="function"==typeof a?e:null}}(),this._lifeService.status=Jb.Configed,this.kernel=new sD({container:this._containerService.kernelContainer,plugins:this._filterPlugins(t.kernelPlugins),contribs:t.kernelContribs,settings:t.settings,data:t.data}),this.render=new yle({container:this._containerService.renderContainer,plugins:this._filterPlugins(t.renderPlugins),contribs:t.renderContribs,kernelService:this.kernel.kernelService,onError:function(e,t){var r,o;e&&n._errors.push(e),t&&n._reactErrors.push(t),null==(o=(r=n._options).onError)||o.call(r,e,t)}}),this.workbench=new dfe({$root:this.$root,container:this._containerService.workbenchContainer,plugins:this._filterPlugins(t.workbenchPlugins),contribs:t.workbenchContribs,renderService:this.render.renderService,onError:function(e,t){var r,o;e&&n._errors.push(e),t&&n._reactErrors.push(t),null==(o=(r=n._options).onError)||o.call(r,e,t)}}),this.logger.log({type:rR.core,action:"editorInited",data:null}),t.onDataLoaded&&this.kernel.onDataLoaded(t.onDataLoaded),t.onCollabUsersChange&&this.kernel.kernelService.onCollabUsersChange(t.onCollabUsersChange),this.kernel.onFinishExecuteCommand((function(e){var t,r;e.context.isRemote||null==(r=(t=n._options).onChange)||r.call(t)})),this._lifeService.when(Jb.Rendered,(function(){var e;null==(e=t.onRendered)||e.call(t)})),this._database=this._containerService.kernelContainer.get(u_),cw((function(){var e;null==(e=t.onLoad)||e.call(t,n),n._onLoad.emit(n)})),this.kernel.start()}),[{key:"$root",get:function(){return this._options.$root}},{key:"readService",get:function(){return this._containerService.kernelContainer.get(MI)}},{key:"commandService",get:function(){return this._getKernelService(uA)}},{key:"tableId",get:function(){return this.readService.getTable().get("uuid")}},{key:"logger",get:function(){return this._containerService.kernelContainer.get(oR)}},{key:"themeManager",get:function(){return this._containerService.renderContainer.get(tM).getThemeManager()}},{key:"_loadCoreServices",value:function(){this._lifeService=this._containerService.kernelContainer.get(Zb)}},{key:"_filterPlugins",value:function(e){var t=this._options,n=t.disablePlugins,r=t.enablePlugins;return r?e.filter((function(e){return r.some((function(t){return t.startsWith("workbench-")||t.startsWith("render-")||t.startsWith("kernel-")?t===e.pluginName:e.pluginName.replace(/^(workbench|render|kernel)-/,"")===t}))})):n?e.filter((function(e){return!n.some((function(t){return t.startsWith("workbench-")||t.startsWith("render-")||t.startsWith("kernel-")?t===e.pluginName:e.pluginName.replace(/^(workbench|render|kernel)-/,"")===t}))})):e}},{key:"_getKernelService",value:function(e){var t,n;try{return this._containerService.kernelContainer.get(e)}catch(r){return console.warn("Kernel container not found:",e),null==(n=(t=this._options).onError)||n.call(t,r),null}}},{key:"getService",value:function(e){try{return this._containerService.workbenchContainer.get(e)}catch{console.warn("Workbench container not found:",e);try{return this._containerService.renderContainer.get(e)}catch{return console.warn("Render container not found:",e),this._getKernelService(e)}}}},{key:"updateSettings",value:function(e){e&&("string"==typeof e&&(e=JSON.parse(e)),this._configService.configurationService.setValue(e))}},{key:"getContent",value:function(){return this.kernel.getContent()}},{key:"setContent",value:function(e){this.kernel.setContent(e)}},{key:"setRecords",value:function(e,t){t&&this._database.clear([jS.table]),this.kernel.setRecords(e)}},{key:"setUsers",value:function(e){this.kernel.setUsers(e)}},{key:"isEmptyTable",value:function(){return!(!this._destroy&&this.readService)||this.readService.isEmptyTable()}},{key:"destroy",value:function(){this._destroy=!0,this.kernel.destroy(),this.render.destroy(),this.workbench.destroy(),this._containerService.destroy()}}])}();lw.setData({"$1 条记录":"$1 records","$1个筛选":"$1 filters","(空)":"(Empty)","YYYY年M月":"MM, YYYY","上一个":"Previous","上一张":"Previous","上一条记录":"Prev row","上传失败":"Upload failure","上传失败，请重试":"Upload failure, please retry","上传超时，请重试":"Upload timeout, please retry","上周":"Last week","上月":"Last month","下一个":"Next","下一张":"Next","下一条记录":"Next row","下周":"Next week","下月":"Next month","下载图片":"Download Picture","不包含":"Not contains","不存在对应字段":"There is no corresponding field","不存在对应选项":"There is no corresponding option","不展示":"None","不是":"is not","不等于":"Not equal to","不能与其他列重名":"Field name must be unique","中":"Middle","为空":"is empty","人员":"Mention","今天":"Today","从大到小":"9 → 1","从小到大":"1 → 9","任务流转一目了然":"Task flow is clear at a glance","休":"RD","低":"Low","你还未进行任何分组":"You haven't done any grouping yet","你还未进行任何排序":"You haven't done any sorting yet","你还未进行任何筛选":"You haven't done any filtering yet","保存":"Save","保持排序":"Keep sort","修改人":"Update people","修改分组":"Edit group","修改分组人员":"Edit group member","修改分组名称":"Edit group name","修改时间":"Update time","关闭弹窗 (ESC)":"Close modal (ESC)","具体日期":"Specific Date","农历及节假日":"Lunar Year & Holiday","分组":"Group","分组设置":"Group configs","切换视图":"Switch View","列名不能为空":"Field name must not empty","列类型":"Field type","创建人":"creator","创建时间":"Create time","删除":"Delete","删除分组":"Delete group","删除列":"Remove field","删除图片":"Remove Picture","删除日程":"Remove schedule","删除本条记录":"Remove current record","删除行":"Remove row","删除视图":"Remove view","删除记录":"Remove record","删除该条件":"Delete this condition","剪贴板里没有文件可粘贴":"There is no file in the clipboard to paste","副本":"Copy","包含":"Contains","包含一个":"has one of","包含所有":"has all of","升序":"Asc","单选":"Select","取消":"Cancel","取消分组":"Ungroup","取消排序后，可进行拖拽":"After unsorting, you can drag and drop","取消筛选":"Unfilter","可以快速新建一个单选列进行分组":"You can quickly create a select column for grouping","可搜索或新建选项":"Select an option or create one","合并为分组":"Merge into group","向上插入 {InputNumber} 行":"Insert {InputNumber} row above","向上插入记录":"Insert record above","向下插入 {InputNumber} 行":"Insert {InputNumber} row below","向下插入记录":"Insert record below","向右插入列":"Insert field right","向右插入记录":"Insert record right","向左插入列":"Insert field left","向左插入记录":"Insert record left","否":"Not","唯一数":"Unique","唯一数 $1":"Unique $1","唯一数占比":"Percent Unique","唯一数占比 $1":"Unique $1","图片":"Image","图片上传任务":"Image upload task","图片列表":"image list","基础":"Basis","复制":"Copy","复制列":"Copy column","复制成功":"Copy success","复制行":"Copy row","复制视图":"Copy view","复制记录":"Copy record","复制链接":"Copy link","复选框":"Checkbox","多选":"Multi-select","大于":"Greater than","大于等于":"Greater than or equal to","字段配置":"Field Setting","完成":"Finish","实际尺寸":"Actual size","封面效果":"Cover displays","封面来源":"Cover source","小于":"Less than","小于等于":"Less than or equal to","展开":"Expand","展开行":"Expand row","展开行（Space）":"Expand row（Space）","展开记录":"Expand record","展开详情":"Expand detail","已勾选":"Checked","已勾选 $1":"Checked $1","已勾选占比":"Percent Checked","已勾选占比 $1":"Checked $1","已填写 $1":"Filled $1","已填写占比":"Percent Filled","已填写占比 $1":"Filled $1","已填写数":"Filled","已存在该选项，不可重复创建！":"This option already exists","已选择 $1 个单元格":"$1 cells selected","平均值":"Average","平均值 $1":"Avg $1","并且":"And","开头不是":"Not Starts with","开头是":"Starts with","开始日期":"Start Date","当":"Where","当前处于保持排序状态，为您重新定位":"Re-locate when keep sort","当前浏览器不支持访问剪贴板数据，建议您使用 Chrome 浏览器访问":"Current browser don't support access clipboard data, we recommend that you use the Chrome browser to visit","成功复制 $1 个单元格":"$1 cells copied","成功复制 $1 条记录":"$1 records copied","或者":"Or","手机号码":"Phone","按":"By","按以下选项进行分组":"Group by options","按以下选项进行排序":"Sort by the following options","按本列分组":"Group by current col","按本列筛选":"Filter by current col","排序":"Sort","排序设置":"Sort settings","搜索":"Search","搜索人员":"Search member","搜索选项":"Search option","放大":"Zoom out","数字":"Number","数字类型只能输入数字":"Number type can only enter numbers","数据表列名":"Field name","数据表已达最大行数限制":"Records in this table is over limits","文件读取失败，请重新上传":"File read failed, please re-upload","文本":"Text","文档已保存":"Document has been saved","新增一个日期列":"Create date type field","新增字段":"New field","新建分组":"New group","新建视图":"New view","新建选项":"New option","新建选项不能为空字符":"The new option cannot be an empty character","无封面":"No cover","无权访问当前视图":"Not authorized to access current view","日历视图":"Calendar View","日历配置":"Calendar Setting","日期":"Date","日期格式":"Date format","早于":"Before","时间范围 $1 天":"RNG $1 days","时间范围 $1 月":"RNG $1 months","时间范围（日）":"Date Range(days)","时间范围（月）":"Date Range(months)","明天":"Tomorrow","星期一":"Monday","星期三":"Wednesday","星期二":"Tuesday","星期五":"Friday","星期六":"Saturday","星期四":"Thursday","星期日":"Sunday","昨天":"Yesterday","是":"is","显示字段名":"Show column name","晚于":"After","暂无人员":"Empty","最大值":"Max","最大值 $1":"Max $1","最小值":"Min","最小值 $1":"Min $1","最早时间":"Earlist Date","最早时间 $1":"Earlist Date $1","最晚时间":"Lastest Date","最晚时间 $1":"Latest Date $1","未分组":"Ungrouped","未勾选":"Unchecked","未勾选 $1":"Unchecked $1","未勾选占比":"Percent Unchecked","未勾选占比 $1":"Unchecked $1","未命名日程":"Untitled schedule","未命名记录":"Untitled record","未填写 $1":"Empty $1","未填写占比":"Percent Empty","未填写占比 $1":"Empty $1","未填写数":"Empty","未搜索到结果":"No data","未来30天内":"Within the next 30 days","未来7天内":"within the next 7 days","本周":"This week","本地上传":"Local Upload","本月":"This month","本记录不属于该分组，点击其他区域将移走该记录":"This record will move to its new position when you select another record","本记录因排序规则会移动，点击其他区域将移走该记录":"This record will move to its new position when you select another record","本记录将被移动到新的排序位置":"Record moved","本记录将被移至新的分组":"Record moved","本记录将被过滤":"Record filtered","本记录已被筛选过滤，点击其他区域将隐藏该记录":"This record is no longer visible based on this view's filter, and will be hidden when you select another record","查找":"Search","查看视图需要编辑权限":"View current view requires edit permission","标题":"Title","标题展示":"Schedule title","正在处理粘贴内容...":"Processing pasted content...","求和":"Sum","求和 $1":"Sum $1","添加一个选项":"Add an option","添加下一个":"Add next","添加分组条件":"Add grouping conditions","添加排序条件":"Add sorting conditions","添加日程":"Add schedule","添加日程标题":"Add schedule title","添加筛选":"Add filter","添加筛选条件":"Add filter","添加记录":"Add record","班":"WD","画册视图":"Gallery view","画册配置":"Gallery setting","直接粘贴或拖拽到这里":"Paste or drag directly here","看板暂无分组":"Kanban no grouping","看板视图":"Kanban view","看板配置":"Kanban setting","确定":"Confirm","确认":"Confirm",'确认要删除 "$1" 字段吗':'Are you sure you want to delete the "$1" field',"空":"Empty","等于":"Equal to","筛选":"Filter","粘贴":"Paste","粘贴失败, 请稍后重试":"Paste failed, please try again later","粘贴失败，没有足够的列":"Paste failed, not enough columns","粘贴成功":"Pasted successfully","系统字段不支持粘贴修改":"System fields do not support paste modification","结尾不是":"Not ends with","结尾是":"Ends with","结束日期":"End Date","统计":"Calculation","编辑":"Edit","编辑列":"Edit field","编辑链接":"Edit link","缩小":"Zoom in","自定义颜色":"Custom color","获取链接标题":"Fetch link title","行高":"Row height","表单":"Form","表格视图":"Grid view","表格配置":"Table Config","裁剪":"Clip","规范化存储和展示数据":"Normalized storage and presentation of data","视图名称":"view name","记录总数":"Count","设置该列内容类型，支持文本、日期、数字、单选、多选等":"Set the content type of the column, support text, date, number, single select, multiple select, etc.","评分":"Rate","评分类型只能输入数字":"Rate type can only enter numbers","该日程被隐藏":"The schedule has been hidden","请上传":"Please upload","请输入":"Please enter","请输入关键词...":"Please enter a keyword...","请输入关键词搜索":"Please enter keywords to search","请输入有效手机号":"Please enter a valid mobile phone number","请输入有效邮箱":"Please enter a valid email address","请选择":"Please choose","请选择单选字段":"Please choose select field","请选择日期字段":"Please choose date field","请选择标题字段":"Please choose schedule title field","跟随字段颜色":"Follow field color","轻松搞定日程安排":"Make your schedule easily","输入格式有误":"Please enter a valid data","过去30天内":"within the past 30 days","过去7天内":"within the past 7 days","还有 $1 项":"has $1 schedules more","还未设置任何分组":"No groupings applied to this view","还未设置任何排序":"No sorts applied to this view","还未设置任何筛选":"No filters applied to this view","进度":"Progress","进度类型只能输入数字":"Progress type can only enter numbers","适合展示图片类数据":"Suitable for displaying image data","适应":"Fit","适应屏幕":"adapt to screen","选择一列进行分组":"Pick a field to group by","选择一列进行排序":"Pick a field to sort by","选择分组字段":"Select grouping field","选项倒序":"Last-First","选项名不能为空":"Option name cannot be empty","选项名不能超过最大长度限制":"Option name cannot be over max length","选项设置":"Filed options","选项顺序":"First-Last","邮箱":"Email","重命名视图":"Rename view","重新上传":"Upload again","链接":"Link","附件":"File","附件上传任务":"Attachment upload task","附件列表":"attachment list","降序":"Desc","非空":"is not empty","颜色":"Color","颜色显示":"Schedule Color","颜色设置":"Color setting","高":"High","高级":"Advanced","（空）":"(Empty)"});function gfe(e,t,n){return t=P_(t),D_(e,mfe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function mfe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(mfe=function(){return!!e})()}var yfe=Object.defineProperty,bfe=Object.getOwnPropertyDescriptor,wfe=function(e){function t(){var e;return Ub(this,t),(e=gfe(this,t,arguments)).strict=!0,e}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldNumberModel}},{key:"type",get:function(){return wfe.type}},{key:"baseType",get:function(){return wfe.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||zw(t)},errorMsg:uw("评分类型只能输入数字")}]}},{key:"validate",value:function(e){if(null==e)return!0;var t=l_(String(e),{precision:wfe.DECIMAL_PRECISION,scale:wfe.DECIMAL_SCALE});return!(Number(e)>wfe.MAX_NUM||Number(e)<wfe.MIN_NUM)&&t}},{key:"transform",value:function(e){if(!l_(e,{precision:wfe.DECIMAL_PRECISION,scale:wfe.DECIMAL_SCALE})){var t=e[0];if(t){for(var n=e.length,r=0;r<e.length;r++)if(e[r]!==t)return{value:0};return{value:n}}return{value:0}}return{value:this._safeGetValue(e)}}},{key:"formatted",value:function(e){return null==e?"":String(e)}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),value:null==n?void 0:n.get("value"),updated_at:o.get("updated_at"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new m_}},{key:"_safeGetValue",value:function(e){return e>wfe.MAX_NUM?wfe.MAX_NUM:e<wfe.MIN_NUM?wfe.MIN_NUM:e}},{key:"upsertModelCell",value:function(e,t,n,r){var o=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),o.verify,o.errorMessage,r)}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);if(!this.strict||this.getVerify(n.value).verify){var r=this._safeGetValue(n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:r}),this.upsertModelCell(e,t,r)}}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){var r=t._safeGetValue(e.value);return t.upsertModelCell(n,e.recordId,r),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:r}})))}}])}(nR);wfe.type=bC.RATE,wfe.baseType=wC.NUMBER,wfe.DECIMAL_PRECISION=1,wfe.DECIMAL_SCALE=0,wfe.MAX_NUM=5,wfe.MIN_NUM=0,wfe=function(e,t,n,r){for(var o,i=r>1?void 0:r?bfe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yfe(t,n,i),i}([Ys()],wfe);var _fe=Object.defineProperty,kfe=Object.getOwnPropertyDescriptor,Cfe=function(e,t,n,r){for(var o,i=r>1?void 0:r?kfe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_fe(t,n,i),i},Efe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._rateField)}}],[{key:"pluginModule",value:function(){return pd().register(wfe).register(this)}}])}();function Ofe(e,t,n){return t=P_(t),D_(e,Sfe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Sfe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Sfe=function(){return!!e})()}Efe.pluginName="kernel-field-rate",Cfe([Xs(wfe)],Efe.prototype,"_rateField",2),Efe=Cfe([Ys({contrib:kA})],Efe);var xfe=Object.defineProperty,jfe=Object.getOwnPropertyDescriptor,Ife=function(e){function t(){var e;return Ub(this,t),(e=Ofe(this,t,arguments)).strict=!0,e}return F_(t,e),Wb(t,[{key:"model",get:function(){return this._model.fieldNumberModel}},{key:"type",get:function(){return Ife.type}},{key:"baseType",get:function(){return Ife.baseType}},{key:"rules",get:function(){return[{validator:function(e,t){return""===t||null==t||zw(t)},errorMsg:uw("进度类型只能输入数字")}]}},{key:"validate",value:function(e){if(null==e)return!0;var t=l_(String(e),{precision:Ife.DECIMAL_PRECISION,scale:Ife.DECIMAL_SCALE});return!(Number(e)>Ife.MAX_NUM||Number(e)<Ife.MIN_NUM)&&t}},{key:"transform",value:function(e){return l_(e,{precision:Ife.DECIMAL_PRECISION,scale:Ife.DECIMAL_SCALE})?{value:this._safeGetValue(e)}:{value:0}}},{key:"formatted",value:function(e){return null==e?"":String(e)}},{key:"keyValue",value:function(e){return e}},{key:"getCellFormattedValue",value:function(e,t){var n=this.getCell(e,t);return this.formatted(null==n?void 0:n.value)}},{key:"getCellKeyValue",value:function(e,t){var n=this.getCell(e,t);return this.keyValue(n.value)}},{key:"getCell",value:function(e,t){var n=this.model.findOne({field_uuid:e,record_uuid:t}),r=null==n?void 0:n.get("value"),o=this._safeGetCell(e,t,r);return{uuid:o.get("uuid"),fieldId:o.get("field_uuid"),recordId:o.get("record_uuid"),fieldType:o.get("field_type"),formatValue:o.get("format_value"),keyValue:o.get("key_value"),value:null==n?void 0:n.get("value"),updated_at:o.get("updated_at"),by_system:o.get("by_system")}}},{key:"_safeGetCell",value:function(e,t,n){var r=this.getModelCell(e,t);return r||(this.upsertModelCell(e,t,n,!0),r=this._model.cellModel.findOne({field_uuid:e,record_uuid:t})),r||new m_}},{key:"upsertModelCell",value:function(e,t,n,r){var o=this.getVerify(n);this.updateModelCell(e,t,this.formatted(n),this.keyValue(n),o.verify,o.errorMessage,r)}},{key:"_safeGetValue",value:function(e){return e>Ife.MAX_NUM?Ife.MAX_NUM:e<Ife.MIN_NUM?Ife.MIN_NUM:e}},{key:"setCell",value:function(e,t,n){if(n){if(!n.value)return this.model.remove({field_uuid:e,record_uuid:t}),void this.upsertModelCell(e,t,n.value);if(!this.strict||this.getVerify(n.value).verify){var r=this._safeGetValue(n.value);this.model.upsert({field_uuid:e,record_uuid:t},{uuid:n.uuid,field_uuid:e,record_uuid:t,value:r}),this.upsertModelCell(e,t,r)}}}},{key:"bulkSetCell",value:function(e){var t=this,n=e[0].fieldId,r=e.map((function(e){return e.recordId}));this.model.remove({field_uuid:n,record_uuid:r}),this.model.bulkCreate(e.map((function(e){var r=t._safeGetValue(e.value);return t.upsertModelCell(n,e.recordId,e.value),{uuid:e.uuid,field_uuid:e.fieldId,record_uuid:e.recordId,value:r}})))}}])}(nR);Ife.type=bC.PROGRESS,Ife.baseType=wC.NUMBER,Ife.DECIMAL_PRECISION=3,Ife.DECIMAL_SCALE=0,Ife.MAX_NUM=100,Ife.MIN_NUM=0,Ife=function(e,t,n,r){for(var o,i=r>1?void 0:r?jfe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&xfe(t,n,i),i}([Ys()],Ife);var Rfe=Object.defineProperty,Afe=Object.getOwnPropertyDescriptor,Dfe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Afe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Rfe(t,n,i),i},Pfe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){e.registerField(this._progressField)}}],[{key:"pluginModule",value:function(){return pd().register(Ife).register(this)}}])}();function Mfe(e,t,n){return t=P_(t),D_(e,Tfe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Tfe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Tfe=function(){return!!e})()}Pfe.pluginName="kernel-field-progress",Dfe([Xs(Ife)],Pfe.prototype,"_progressField",2),Pfe=Dfe([Ys({contrib:kA})],Pfe);var Ffe=function(e){function t(){return Ub(this,t),Mfe(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){return this.writeService.importTable(e),!0}}])}(ZR);Ffe.commandName="importTable";var Nfe=Object.defineProperty,Vfe=Object.getOwnPropertyDescriptor,Lfe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Vfe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Nfe(t,n,i),i},Bfe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(Ffe.commandName,Ffe)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function $fe(e,t,n){return t=P_(t),D_(e,zfe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function zfe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(zfe=function(){return!!e})()}Bfe.pluginName="kernel-import",Lfe([Xs(uA)],Bfe.prototype,"commandService",2),Bfe=Lfe([Ys({contrib:kA})],Bfe);var Ufe=function(e){function t(){return Ub(this,t),$fe(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){if(!e.fieldId){var t=this.readService.getAllFields(),n=this.writeService.createField({viewId:e.viewId,field:{uuid:fw(32),name:EC(bC.DATE,t.toJSON()),type:bC.DATE}});return this.writeService.updateViewConfig(e.viewId,{start_date_field_uuid:null==n?void 0:n.uuid,end_date_field_uuid:null==n?void 0:n.uuid}),n}var r=this.readService.getField(e.fieldId);if(!r)throw new Error("This field is not exist");if(!zC.isDateLike(null==r?void 0:r.get("type")))throw new Error("This field is not a date field");switch(e.type){case"start":this.writeService.updateViewConfig(e.viewId,{start_date_field_uuid:r.get("uuid")});break;case"end":this.writeService.updateViewConfig(e.viewId,{end_date_field_uuid:r.get("uuid")})}return r.toJSON()}}])}(ZR);function Hfe(e,t,n){return t=P_(t),D_(e,qfe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function qfe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(qfe=function(){return!!e})()}Ufe.commandName="upsertStartOrEndDate";var Wfe=function(e){function t(){return Ub(this,t),Hfe(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){var t=e.date.format("YYYY-MM-DD");return this.writeService.updateViewConfig(e.viewId,{active_date:t}),t}}])}(ZR);function Gfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kfe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gfe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gfe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yfe(e,t,n){return t=P_(t),D_(e,Xfe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Xfe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Xfe=function(){return!!e})()}Wfe.commandName="setActiveDate";var Jfe=function(e){function t(){return Ub(this,t),Yfe(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=this.readService.getActiveViewId(),n=this.readService.getViewConfig(t);if(!n)return[];var r=n.get("start_date_field_uuid");if(!r){var o=this.readService.getAllFields(),i=this.writeService.createField({viewId:t,field:{uuid:fw(32),name:EC(bC.DATE,o.toJSON()),type:bC.DATE}});r=(null==i?void 0:i.uuid)||""}var a=n.get("end_date_field_uuid")||r,l=this.writeService.createEmptyRecord({viewId:t,uuid:fw(32),direction:"after"}),u=e.date.format("YYYY-MM-DD"),c=this.readService.getCell(r,l[0].uuid);if(this.writeService.setCell(Kfe(Kfe({},c),{},{value:u})),a!==r){var s=this.readService.getCell(a,l[0].uuid);this.writeService.setCell(Kfe(Kfe({},s),{},{value:u}))}return l}}])}(ZR);function Zfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qfe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zfe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zfe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function epe(e,t,n){return t=P_(t),D_(e,tpe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function tpe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(tpe=function(){return!!e})()}Jfe.commandName="createSchedule";var npe=function(e){function t(){return Ub(this,t),epe(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"execute",value:function(e){var t=e.recordId,n=e.startDate,r=e.endDate,o=e.targetRecordId,i=e.direction,a=this.readService.getActiveViewId(),l=this.readService.getViewConfig(a);if(l){var u=l.get("start_date_field_uuid"),c=l.get("end_date_field_uuid")||u,s=n&&!r,d=r&&!n;if(u&&c&&u===c&&(s||d)){var f=this.readService.getAllFields(),p=this.writeService.createField({viewId:a,field:{uuid:fw(32),name:EC(bC.DATE,f.toJSON()),type:bC.DATE}});s?(u=(null==p?void 0:p.uuid)||"",this.writeService.updateViewConfig(a,{start_date_field_uuid:u})):d&&(c=(null==p?void 0:p.uuid)||"",this.writeService.updateViewConfig(a,{end_date_field_uuid:c}))}if(u&&n){var h=n.format("YYYY-MM-DD"),v=this.readService.getCell(u,t);if(this.writeService.setCell(Qfe(Qfe({},v),{},{value:h})),s&&c){var g=this.readService.getCell(c,t);if(null==g||!g.value){var m=(null==v?void 0:v.value)||(null==g?void 0:g.value);this.writeService.setCell(Qfe(Qfe({},v),{},{value:m,fieldId:c}))}}}if(c&&r){var y=r.format("YYYY-MM-DD"),b=this.readService.getCell(c,t);if(this.writeService.setCell(Qfe(Qfe({},b),{},{value:y})),d&&u){var w=this.readService.getCell(u,t);if(null==w||!w.value){var _=(null==b?void 0:b.value)||(null==w?void 0:w.value);this.writeService.setCell(Qfe(Qfe({},b),{},{value:_,fieldId:u}))}}}this.writeService.updateRecordOrder(a,t,o,void 0,i)}}}])}(ZR);function rpe(e,t,n){return t=P_(t),D_(e,ope()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function ope(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(ope=function(){return!!e})()}npe.commandName="updateSchedule";var ipe=function(e){function t(){return Ub(this,t),rpe(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{show_lunar:e.show}),!0}}])}(ZR);function ape(e,t,n){return t=P_(t),D_(e,lpe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function lpe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(lpe=function(){return!!e})()}ipe.commandName="showLunar";var upe=function(e){function t(){return Ub(this,t),ape(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{date_title_field_uuid:e.titleId}),!0}}])}(ZR);upe.commandName="updateScheduleTitle";var cpe="add",spe="subtract",dpe="day",fpe="month",ppe=7,hpe=[uw("星期日"),uw("星期一"),uw("星期二"),uw("星期三"),uw("星期四"),uw("星期五"),uw("星期六")],vpe=[["$label-back-color:0-0","$label-back-color:1-3","$label-back-color:1-1","$label-back-color:0-2","$label-back-color:1-4","$label-back-color:1-2","$label-back-color:0-4","$label-back-color:1-0","$label-back-color:0-1","$label-back-color:0-3"]];function gpe(e,t,n){return t=P_(t),D_(e,mpe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function mpe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(mpe=function(){return!!e})()}var ype=function(e){function t(){return Ub(this,t),gpe(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){if(e.type===PC.CUSTOM)this.writeService.updateViewConfig(e.viewId,{date_color_type:PC.CUSTOM,date_color:vpe[0][0]});else{var t=w_(this.readService.getAllFields(),(function(e){return e.get("type")===bC.SELECT}));this.writeService.updateViewConfig(e.viewId,{date_color_type:PC.FOLLOW_FIELD,date_color:t?t.get("uuid"):""})}return!0}}])}(ZR);function bpe(e,t,n){return t=P_(t),D_(e,wpe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function wpe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(wpe=function(){return!!e})()}ype.commandName="updateScheduleColorType";var _pe=function(e){function t(){return Ub(this,t),bpe(this,t,arguments)}return F_(t,e),Wb(t,[{key:"destroy",value:function(){}},{key:"beforeExecute",value:function(e){var t;return e.viewId||(e.viewId=null==(t=this.readService.getActiveView())?void 0:t.get("uuid")),e}},{key:"execute",value:function(e){return this.writeService.updateViewConfig(e.viewId,{date_color_type:e.type,date_color:e.colorId}),!0}}])}(ZR);_pe.commandName="updateScheduleColor";var kpe=Object.defineProperty,Cpe=Object.getOwnPropertyDescriptor,Epe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Cpe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&kpe(t,n,i),i},Ope=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this.commandService.registerCommand(Ufe.commandName,Ufe),this.commandService.registerCommand(Wfe.commandName,Wfe),this.commandService.registerCommand(Jfe.commandName,Jfe),this.commandService.registerCommand(npe.commandName,npe),this.commandService.registerCommand(ipe.commandName,ipe),this.commandService.registerCommand(upe.commandName,upe),this.commandService.registerCommand(ype.commandName,ype),this.commandService.registerCommand(_pe.commandName,_pe)}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();Ope.pluginName="kernel-viewer-calendar",Epe([Xs(uA)],Ope.prototype,"commandService",2);var Spe=[gF,RM,$M,XM,lT,gT,OT,MT,UT,ZT,lF,xF,VF,zF,JF,aN,Efe,Pfe,bN,DN,qN,aV,wV,EV,MV,KV,pL,DL,qL,lB,Bfe,YN,hB,RB,NB,YB,QB,a$,Ope=Epe([Ys({contrib:kA})],Ope)];function xpe(e){var t=G3(VA);return{isReadonly:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(null==t?void 0:t.isReadonly.apply(t,[e].concat(r)))||!1},can:function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(null==t?void 0:t.can.apply(t,[n,e].concat(o)))||!1},canCreate:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(null==t?void 0:t.canCreate.apply(t,[e].concat(r)))||!1},canDelete:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(null==t?void 0:t.canDelete.apply(t,[e].concat(r)))||!1},canUpdate:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(null==t?void 0:t.canUpdate.apply(t,[e].concat(r)))||!1},canRead:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(null==t?void 0:t.canRead.apply(t,[e].concat(r)))||!1}}}function jpe(){var e=G3(MI),t=G3(iD),n=e.getActiveView(),r=gP(Object(a.useState)(n),2),o=r[0],i=r[1],l=Object(a.useCallback)((function(){var t=e.getActiveView();i(t)}),[e]);return Object(a.useLayoutEffect)((function(){var e=t.onDataLoaded((function(){l()})),n=t.onDataChanged((function(){l()}));return function(){e.destroy(),n.destroy()}}),[t,l]),o}function Ipe(){var e=G3(MI),t=G3(iD),n=gP(Object(a.useState)(e.getViews()),2),r=n[0],o=n[1],i=function(){o(e.getViews())};return Object(a.useEffect)((function(){var e=t.onDataLoaded((function(){i()})),n=t.onDataChanged((function(){i()}));return function(){e.destroy(),n.destroy()}}),[]),r}function Rpe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=G3(MI),n=G3(iD),r=function(){var e,n=t.getActiveView(),r=null==(e=t.getViewGroup())?void 0:e.group,o=r?null:t.getViewRecords(),i=r?t.getGroupViewRecords():null,a=t.getViewFields(),l=t.getViewConfig(),u=t.getViewFilters();return{view:n,group:r,fields:t.getAllFields(),viewRecords:o,groupViewRecords:i,viewFields:a,viewConfig:l,filters:u}},o=gP(Object(a.useState)(r()),2),i=o[0],l=o[1],u=function(n){var o=t.getActiveView();e.viewId&&o.get("uuid")!==e.viewId||(n=n||r(),l(n))};return Object(a.useEffect)((function(){var e=n.onDataLoaded((function(){u()})),t=n.onDataChanged((function(){u()}));return function(){e.destroy(),t.destroy()}}),[]),i}var Ape=function(e){return e.changeFieldType="changeFieldType",e.updateFieldName="updateFieldName",e.updateFieldHidden="updateFieldHidden",e.updateField="updateField",e}(Ape||{});function Dpe(e){var t=G3(iD),n=G3(MI),r=G3(uA),o=xpe(EA.TABLE).isReadonly(),i=gP(Object(a.useState)((function(){return n.getField(e)})),2),l=i[0],u=i[1],c=Poe();Object(a.useEffect)((function(){e&&u(n.getField(e))}),[e,n]);var s=null==l?void 0:l.get("type"),d=null==l?void 0:l.get("name");Object(a.useEffect)((function(){var o=null==r?void 0:r.onDidExecuteCommand((function(t){var r=t.context;if(Object.values(Ape).includes(r.commandName)){var o=r.argArray[0],i=o.uuid;"updateField"===r.commandName&&(i=o.field.get("uuid")),e&&i===e&&(u(n.getField(e)),c())}})),i=t.onDataChanged((function(t){("command-undo"===t||"command-redo"===t||"collab-synced"===t)&&u(n.getField(e))}));return function(){null==o||o.destroy(),null==i||i.destroy()}}),[r,e,n,t]);return e&&l?{field:l,fieldId:e,fieldName:d,fieldType:s,fieldConfig:l.get("config"),fieldOptions:n.getFieldOptions(l.get("uuid")),isPrimary:!1,updateProperty:function(t){return null==r||r.execCommand("updateField",{field:l,newFieldProperty:t}),n.getField(e)},hasPermissionForWrite:function(){return o}}:{}}var Ppe=["addField","removeField","changeFieldOrder"].concat(Vb(Object.values(Ape)));function Mpe(){var e=G3(iD),t=G3(MI),n=G3(uA),r=gP(Object(a.useState)((function(){return null==t?void 0:t.getAllViewFields()})),2),o=r[0],i=r[1];return Object(a.useEffect)((function(){var r=null==n?void 0:n.onDidExecuteCommand((function(e){var n=e.context;Ppe.includes(n.commandName)&&i(null==t?void 0:t.getAllViewFields())})),o=e.onDataChanged((function(e){("command-undo"===e||"command-redo"===e)&&i(null==t?void 0:t.getAllViewFields())}));return function(){r.destroy(),o.destroy()}}),[n,t,e]),o||null}function Tpe(e,t){var n=G3(MI),r=G3(ix),o=gP(Object(a.useState)((function(){return n.getPrimaryCellInRecord(e,t)})),2),i=o[0],l=o[1];return Object(a.useEffect)((function(){l(n.getPrimaryCellInRecord(e,t))}),[n,e,t]),Object(a.useEffect)((function(){var o=null==r?void 0:r.onCellChange((function(r){l(n.getPrimaryCellInRecord(e,t))}));return function(){null==o||o.destroy()}}),[n,r,e,t]),{title:(null==i?void 0:i.formattedValue)||""}}function Fpe(e,t){var n=G3(MI),r=G3(uA),o=G3(ix),i=Dpe(t),l=i.field,u=i.fieldType,c=xpe(EA.TABLE).isReadonly(),s=Object(a.useCallback)((function(e,t){return n.getCell(t,e)}),[n]),d=gP(Object(a.useState)((function(){return s(e,t)})),2),f=d[0],p=d[1];Object(a.useEffect)((function(){p(s(e,t))}),[e,t,s]),Object(a.useEffect)((function(){var n=null==o?void 0:o.onCellChange((function(n){n.recordId===e&&n.fieldId===t&&p(s(e,t))}));return function(){null==n||n.destroy()}}),[o,t,e,s]);var h=Object(a.useCallback)((function(n){if(!c){if(!e||!t||!f)return null;var o={recordId:e,fieldId:t,value:n,fieldType:u,uuid:f.uuid};o&&(null==r||r.execCommand("setCell",o))}}),[r,e,t,u,f,c]);return e&&t&&l&&f?{fieldId:t,recordId:e,fieldType:u,value:f.value,errorMessage:f.errorMessage,formatValue:f.formatValue,keyValue:f.keyValue,updated_at:f.updated_at,setCell:h}:null}var Npe=Object(a.memo)((function(e){var t=e.cell,n=e.boxRect,r=e.isSelected,o=void 0!==r&&r,i=Fpe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),u=function(e,t,n){return Object(a.useMemo)((function(){return e&&""!==e?null!=n&&n.ignore?e:hC.getRenderText(e,t,null==n?void 0:n.fonStyle):""}),[e,t,null==n?void 0:n.ignore])}(i?i.value:null==t?void 0:t.value,n,{ignore:o||!n,fonStyle:{lineHeight:24,font:"14px PingFang SC",fontSize:14}});return l.a.createElement(tse,{key:null==t?void 0:t.uuid,value:u})}),(function(e,t){var n,r,o=(null==(n=e.cell)?void 0:n.updated_at)!==(null==(r=t.cell)?void 0:r.updated_at),i=e.boxRect!==t.boxRect,a=e.isSelected!==t.isSelected;return!(o||i||a)}));function Vpe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Lpe=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vpe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vpe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldText"},e))},Bpe=["field","cell","defaultValue","onCellChange"];function $pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var zpe=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,o=Y3(e,Bpe);if(!t)return null;var i=Hle((function(e){null==r||r(e)}),100);return l.a.createElement(nse,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$pe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t.uuid,defaultValue:n,value:t.value||"",onChange:function(e){i(e)}},o))};function Upe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Hpe=function(e){return l.a.createElement(nse,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Upe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Upe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},qpe=Ts.defineToken("FieldTextPluginFieldTagContribution"),Wpe=Object.defineProperty,Gpe=Object.getOwnPropertyDescriptor,Kpe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Gpe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Wpe(t,n,i),i},Ype=Wb((function e(){var t=this;Ub(this,e),this.getTextFieldTagComponent=function(){var e,n,r=t.fieldTextPluginFieldTagProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getTextFieldTagComponent)?void 0:n.call(e):null}}));Kpe([bd(qpe)],Ype.prototype,"fieldTextPluginFieldTagProvider",2),Ype=Kpe([Ys()],Ype);var Xpe=Object.defineProperty,Jpe=Object.getOwnPropertyDescriptor,Zpe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Jpe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Xpe(t,n,i),i},Qpe=function(){return Wb((function e(){Ub(this,e),this.fieldType="text",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Npe}},{key:"getFieldEditComponent",value:function(){return zpe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Lpe:null}},{key:"getFieldTagComponent",value:function(){return this._fieldTextService.getTextFieldTagComponent()}},{key:"getFieldFormComponent",value:function(){return Hpe}}],[{key:"pluginModule",value:function(){return pd().contribution(qpe).register(this).register(Ype)}}])}();Qpe.pluginName="render-field-text",Zpe([Xs(R_)],Qpe.prototype,"_configuration",2),Zpe([Xs(Ype)],Qpe.prototype,"_fieldTextService",2),Qpe=Zpe([Ys({contrib:[eie,Qoe]})],Qpe);var ehe=Object(a.memo)((function(e){var t=e.cell,n=e.field,r=e.checkCell,o=e.isSelected,i=void 0!==o&&o,u=(null==t?void 0:t.recordId)||"",c=(null==t?void 0:t.fieldId)||"",s=xpe(EA.TABLE).isReadonly(),d=Fpe(u,c),f=G3(MI).getFieldOptions(c).toJSON(),p=d?d.value:null==t?void 0:t.value,h=f.filter((function(e){return e.uuid===p}))||null,v=G3(bie),g=Object(a.useCallback)((function(e){null==v||v.emitClickCellIcon({recordId:u,fieldId:c,event:e,iconName:"cellSelectIcon"})}),[u,c]);return!r||null!=d&&d.value?l.a.createElement(l.a.Fragment,null,l.a.createElement(Mce,{writeable:i&&!s,colorable:!(null==n||!n.get("color")),value:h,onDelete:function(e){null==d||d.setCell(null)},showPlaceholder:!1,onClickDropDownIcon:g})):null}),(function(e,t){var n=e.cell,r=t.cell,o=e.isSelected!==t.isSelected;return e.fieldUpdatedAt===t.fieldUpdatedAt&&!o&&(null==n?void 0:n.value)===(null==r?void 0:r.value)&&(null==n?void 0:n.updated_at)===(null==r?void 0:r.updated_at)}));function the(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var nhe=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?the(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):the(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldSelect"},e))},rhe=["displayType","defaultValue","cell","onCellChange"];function ohe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ihe=function(e){var t,n=e.displayType,r=e.defaultValue,o=e.cell,i=e.onCellChange,a=Y3(e,rhe),u=Dpe((null==(t=e.field)?void 0:t.get("uuid"))||""),c=u.field,s=u.fieldId,d=u.fieldOptions,f=u.updateProperty,p=xpe(EA.FIELD).canUpdate(c),h=Fpe(null==o?void 0:o.recordId,null==o?void 0:o.fieldId),v=Poe(),g=function(){var e=mC(X_.mark((function e(t){var n,r;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(null==h?void 0:h.value)||[],r=n.includes(t.uuid),null==h||h.setCell(r?"":t.uuid);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=zle(function(){var e=mC(X_.mark((function e(t){var n;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.toJSON().concat(t),e.next=3,f({options:n});case 3:g(t),v();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),y=zle((function(e){var t=d.toJSON().map((function(t){return t.uuid===e.uuid?e:t}));f({options:t}),v()})),b=zle((function(e){var t=d.toJSON().filter((function(t){return t.uuid!==e}));f({options:t}),v()})),w=zle((function(e){null==i||i(e)}));if(!c||!h)return null;var _=h?h.value:null==o?void 0:o.value;return l.a.createElement(Uce,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ohe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ohe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:s,defaultValue:r?[r.value]:[],value:_?[_]:null,type:c.type,options:d.toJSON(),colorable:c.get("color"),editable:!0,optionEditable:p,displayType:n,onChange:w,onOptionChange:y,onOptionCreate:m,onOptionDelete:b},a))},ahe=["viewField"];function lhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var uhe=function(e){var t=e.viewField,n=Y3(e,ahe),r=Dpe(t.get("field_uuid")||""),o=r.field,i=r.fieldOptions,a="dropdown"===(null==t?void 0:t.get("display_type"))?Oce.Dropdown:Oce.List;return l.a.createElement(Uce,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lhe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lhe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:Sce.Select,options:(null==i?void 0:i.toJSON())||[],colorable:null==o?void 0:o.get("color"),displayType:a,editable:!1},n))};uhe.OptionEditable=function(e){var t;if(!zC.isSelectLike(e.type))return null;var n={type:e.type,options:(null==(t=null==e?void 0:e.options)?void 0:t.toJSON())||[],color:(null==e?void 0:e.color)||!1};return l.a.createElement(Zce,{title:l.a.createElement("span",{className:"lakex-table-form-design-option-title"},uw("选项设置")),onChange:e.onChange,onChangeOrder:e.onChangeOrder,multiple:!1,configs:n,autoFocus:e.autoFocus})};var che=Object.defineProperty,she=Object.getOwnPropertyDescriptor,dhe=function(e,t,n,r){for(var o,i=r>1?void 0:r?she(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&che(t,n,i),i},fhe=function(){return Wb((function e(){Ub(this,e),this.fieldType="select",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return ehe}},{key:"getFieldEditComponent",value:function(){return ihe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?nhe:null}},{key:"getFieldFormComponent",value:function(){return uhe}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function phe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hhe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?phe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):phe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}fhe.pluginName="render-field-select",dhe([Xs(R_)],fhe.prototype,"_configuration",2),fhe=dhe([Ys({contrib:[eie,Qoe]})],fhe);var vhe=Object(a.memo)((function(e){var t=e.cell,n=e.field,r=e.writeable,o=e.isSelected,i=void 0!==o&&o,u=(null==t?void 0:t.recordId)||"",c=(null==t?void 0:t.fieldId)||"",s=xpe(EA.TABLE).isReadonly(),d=Fpe(u,c),f=(d?d.value:null==t?void 0:t.value)||[],p=G3(bie),h=G3(MI).getFieldOptions(c).toJSON(),v=Object(a.useRef)(null),g=Object(a.useMemo)((function(){var e,t,n;return null==(n=null==(e=f.map)?void 0:(t=e.call(f,(function(e){var t=h.find((function(t){return t.uuid===e}));return hhe(hhe({},t),{},{value:null==t?void 0:t.uuid})}))).filter)?void 0:n.call(t,(function(e){return!!e}))}),[f,h]),m=Object(a.useCallback)((function(e){null==p||p.emitClickCellIcon({recordId:u,fieldId:c,event:e,iconName:"cellSelectIcon"})}),[u,c]);return Object(a.useLayoutEffect)((function(){!v.current||!e.boxRect||v.current.applyOverflow(e.boxRect)}),[e.boxRect,v,i]),t?s||!i?l.a.createElement(Wce,{ref:v,colorable:!(null==n||!n.get("color")),value:g}):l.a.createElement(Mce,{writeable:lu(r)?i&&!s:r,colorable:!(null==n||!n.get("color")),value:g,onDelete:function(e){var t=g.filter((function(t){return t.uuid!==e.uuid}));null==d||d.setCell(t)},showPlaceholder:!1,onClickDropDownIcon:m}):null}),(function(e,t){var n=e.cell,r=t.cell,o=e.boxRect!==t.boxRect,i=e.isSelected!==t.isSelected;return e.fieldUpdatedAt===t.fieldUpdatedAt&&!o&&!i&&(null==n?void 0:n.updated_at)===(null==r?void 0:r.updated_at)}));function ghe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var mhe=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ghe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ghe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldMultiSelect"},e))},yhe=["displayType","cell","defaultValue","onChange","onCellChange"];function bhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var whe=function(e){var t,n=e.displayType,r=e.cell,o=e.defaultValue,i=e.onChange,a=e.onCellChange,u=Y3(e,yhe),c=Dpe((null==(t=e.field)?void 0:t.get("uuid"))||""),s=c.field,d=c.fieldOptions,f=c.updateProperty,p=Fpe(null==r?void 0:r.recordId,null==r?void 0:r.fieldId),h=Poe(),v=xpe(EA.FIELD).canUpdate(s),g=null==r?void 0:r.value,m=o||[""],y=function(){var e=mC(X_.mark((function e(t){var n,o,i;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(null==r?void 0:r.value)||[],o=n.includes(t.uuid),i=o?n.filter((function(e){return e!==t.uuid})):n.concat(t.uuid),null==p||p.setCell(i.map((function(e){return{value:e}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=zle(function(){var e=mC(X_.mark((function e(t){var n;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=d.toJSON().concat(t),f({options:n}),y(t),h();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=zle((function(e){var t=d.toJSON().map((function(t){return t.uuid===e.uuid?e:t}));f({options:t}),h()})),_=zle((function(e){var t=d.toJSON().filter((function(t){return t.uuid!==e}));f({options:t}),h()})),k=zle((function(e){var t=__(d,(function(t){return e.includes(t.get("uuid"))})).map((function(e){var t=e.toJSON();return t.value=t.uuid,t}));null==a||a(t),null==i||i(t)}));return s?l.a.createElement(Uce,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bhe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bhe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:s.get("uuid"),defaultValue:m,value:g,type:s.get("type"),options:d.toJSON(),colorable:null==s?void 0:s.get("color"),editable:!0,optionEditable:v,displayType:n,onChange:k,onOptionChange:w,onOptionCreate:b,onOptionDelete:_},u)):null},_he=["viewField","onChange"];function khe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Che=function(e){var t=e.viewField,n=e.onChange,r=Y3(e,_he),o=Dpe(t.get("field_uuid")||""),i=o.field,a=o.fieldOptions,u="dropdown"===(null==t?void 0:t.get("display_type"))?Oce.Dropdown:Oce.List;return l.a.createElement(Uce,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?khe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):khe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:Sce.MultiSelect,options:null==a?void 0:a.toJSON(),colorable:null==i?void 0:i.get("color"),displayType:u,editable:!1,onChange:function(e){if(a){var t=__(a,(function(t){return e.includes(t.get("uuid"))})).map((function(e){return e.get("uuid")}));null==n||n(t)}}},r))};Che.OptionEditable=function(e){var t;if(!zC.isSelectLike(e.type))return null;var n={type:e.type,options:(null==(t=null==e?void 0:e.options)?void 0:t.toJSON())||[],color:(null==e?void 0:e.color)||!1};return l.a.createElement(Zce,{title:l.a.createElement("span",{className:"lakex-table-form-design-option-title"},uw("选项设置")),onChange:e.onChange,onChangeOrder:e.onChangeOrder,multiple:!0,configs:n,autoFocus:e.autoFocus})};var Ehe=Object.defineProperty,Ohe=Object.getOwnPropertyDescriptor,She=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ohe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Ehe(t,n,i),i},xhe=function(){return Wb((function e(){Ub(this,e),this.fieldType="multiSelect",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return vhe}},{key:"getFieldEditComponent",value:function(){return whe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?mhe:null}},{key:"getFieldFormComponent",value:function(){return Che}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();xhe.pluginName="render-field-multi-select",She([Xs(R_)],xhe.prototype,"_configuration",2),xhe=She([Ys({contrib:[eie,Qoe]})],xhe);var jhe=Object(a.memo)((function(e){var t=e.cell,n=Fpe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),r=n?n.value:null==t?void 0:t.value;return null==r?null:l.a.createElement(_ce,{key:null==t?void 0:t.updated_at,value:r})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function Ihe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Rhe=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ihe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ihe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldNumber"},e))},Ahe=["field","cell","defaultValue","onCellChange"];function Dhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Phe=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,o=Y3(e,Ahe);return t?l.a.createElement(kce,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dhe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dhe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:null==t?void 0:t.uuid,defaultValue:n,value:t.value||"",prefix:e.renderMode===rie.LITE?void 0:l.a.createElement(g6,{type:"FieldNumber"}),onChange:function(e){null==r||r(e)}},o)):null};function Mhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var The=function(e){return l.a.createElement(kce,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mhe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mhe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},Fhe=Object.defineProperty,Nhe=Object.getOwnPropertyDescriptor,Vhe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Nhe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Fhe(t,n,i),i},Lhe=function(){return Wb((function e(){Ub(this,e),this.fieldType="number",this.isStrictValidatedValue=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return jhe}},{key:"getFieldEditComponent",value:function(){return Phe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Rhe:null}},{key:"getFieldRules",value:function(){return this._numberField.rules}},{key:"getFieldFormComponent",value:function(){return The}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();Lhe.pluginName="render-field-number",Vhe([Xs(WM)],Lhe.prototype,"_numberField",2),Vhe([Xs(R_)],Lhe.prototype,"_configuration",2),Lhe=Vhe([Ys({contrib:[eie,Qoe]})],Lhe);var Bhe=Object(a.memo)((function(e){var t=e.cell,n=e.checkCell,r=void 0===n||n,o=e.disableOpen,i=void 0!==o&&o,u=e.isSelected,c=void 0!==u&&u,s=e.boxRect,d=(null==t?void 0:t.recordId)||"",f=(null==t?void 0:t.fieldId)||"",p=xpe(EA.TABLE).isReadonly(),h=Fpe(d,f),v=(h?h.value:null==t?void 0:t.value)||[],g=G3(bie),m=G3(MI),y=G3(sae),b=Object(a.useRef)(null),w=zle((function(e){null==g||g.emitClickCellIcon({recordId:d,fieldId:f,event:e,iconName:"cellMentionIcon"})})),_=Object(a.useCallback)((function(e){!c&&m.getActiveViewType()===BC.GRID||!i&&(null==y||y.open("user",e))}),[c]);return Object(a.useLayoutEffect)((function(){!b.current||!s||b.current.applyOverflow(s)}),[s,b,c]),r&&!v?null:p||!c?l.a.createElement(wce,{ref:b,value:v.toJSON?v.toJSON():v,onMentionTagClick:_}):l.a.createElement(uce,{showPlaceholder:!1,writeable:c&&!p,list:v||[],onUnSelect:function(e){var t=null==v?void 0:v.filter((function(t){return t.uid!==e.uid}));null==h||h.setCell(t)},onMentionTagClick:_,onClickDropDownIcon:w})}),(function(e,t){var n,r,o=e.cell,i=t.cell,a=e.boxRect!==t.boxRect,l=e.isSelected!==t.isSelected;return!a&&!l&&(null!=o&&o.updated_at||null!=i&&i.updated_at?!((null==(n=e.cell)?void 0:n.updated_at)!==(null==(r=t.cell)?void 0:r.updated_at)):ou(o.uuid,i.uuid))}));function $he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var zhe=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$he(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldMention"},e))},Uhe=["field","cell","onCellChange"];function Hhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var qhe=function(e){e.field;var t=e.cell;e.onCellChange;var n=Y3(e,Uhe),r=G3(sae),o=Fpe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),i=Object(a.useCallback)((function(e){null==r||r.open("user",e)}),[]);return t?l.a.createElement(mce,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hhe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hhe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onMentionTagClick:i,id:t.uuid,defaultValue:t.value,onChange:function(e){null==o||o.setCell(e)}},n)):null};function Whe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ghe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Whe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Whe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Khe=function(e){var t=G3(sae),n=Object(a.useCallback)((function(e){null==t||t.open("user",e)}),[]);return l.a.createElement(mce,Ghe(Ghe({},e),{},{onMentionTagClick:n}))},Yhe=Object.defineProperty,Xhe=Object.getOwnPropertyDescriptor,Jhe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Xhe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Yhe(t,n,i),i},Zhe=function(){return Wb((function e(){Ub(this,e),this.fieldType="mention",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Bhe}},{key:"getFieldEditComponent",value:function(){return qhe}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?zhe:null}},{key:"getFieldFormComponent",value:function(){return Khe}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();Zhe.pluginName="render-field-mention",Jhe([Xs(R_)],Zhe.prototype,"_configuration",2),Zhe=Jhe([Ys({contrib:[eie,Qoe]})],Zhe);var Qhe=Object(a.memo)((function(e){var t,n,r=e.cell,o=Dpe(null==r?void 0:r.fieldId),i=Fpe(null==r?void 0:r.recordId,null==r?void 0:r.fieldId),a=i?i.value:null==r?void 0:r.value;return"number"==typeof a&&(a=new Date(a)),l.a.createElement(Jle,{key:null==r?void 0:r.fieldId,value:a,format:null==(n=null==(t=o.field)?void 0:t.get("config"))?void 0:n.date_format})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function eve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tve=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eve(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldDate"},e))},nve=["cell","defaultValue","onCellChange"];function rve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ove=function(e){var t,n,r=e.cell,o=e.defaultValue,i=e.onCellChange,a=Y3(e,nve),u=Dpe(null==r?void 0:r.fieldId);return r?l.a.createElement(tue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rve(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:r.fieldId,format:null==(n=null==(t=u.field)?void 0:t.get("config"))?void 0:n.date_format,defaultValue:o,value:r.value,onChange:function(e){null==i||i(e)}},a)):null};function ive(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ave(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ive(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ive(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lve=function(e){var t,n;return l.a.createElement(tue,ave(ave({},e),{},{format:null==(n=null==(t=e.viewField.get("field"))?void 0:t.get("config"))?void 0:n.date_format}))},uve=Object.defineProperty,cve=Object.getOwnPropertyDescriptor,sve=function(e,t,n,r){for(var o,i=r>1?void 0:r?cve(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&uve(t,n,i),i},dve=function(){return Wb((function e(){Ub(this,e),this.fieldType="date",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Qhe}},{key:"getFieldEditComponent",value:function(){return ove}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?tve:null}},{key:"getFieldFormComponent",value:function(){return lve}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();dve.pluginName="render-field-date",sve([Xs(R_)],dve.prototype,"_configuration",2),dve=sve([Ys({contrib:[eie,Qoe]})],dve);var fve=Object(a.memo)((function(e){var t=e.readonly,n=e.cell,r=xpe(EA.TABLE).isReadonly(),o=G3(uA),i=Fpe(null==n?void 0:n.recordId,null==n?void 0:n.fieldId),u=Object(a.useCallback)((function(e){!r&&!t&&(null==i||i.setCell(e))}),[r,t,o]),c=i?i.value:null==n?void 0:n.value;return l.a.createElement(Doe,{value:!!c,onChange:u})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)})),pve=function(e){var t=e.field,n=Fpe(e.recordId,null==t?void 0:t.get("uuid")),r=Object(a.useCallback)((function(e){null==n||n.setCell(e)}),[]);return n?l.a.createElement(Yle,{id:n.uuid,defaultValue:n.value,value:n.value,onChange:r}):null};function hve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var vve=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hve(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldCheckbox"},e))};function gve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var mve=function(e){return l.a.createElement(Yle,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gve(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:Aoe.Radio},e))},yve=Object.defineProperty,bve=Object.getOwnPropertyDescriptor,wve=function(e,t,n,r){for(var o,i=r>1?void 0:r?bve(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yve(t,n,i),i},_ve=function(){return Wb((function e(){Ub(this,e),this.fieldType="checkbox",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return fve}},{key:"getFieldEditComponent",value:function(){return pve}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?vve:null}},{key:"getFieldFormComponent",value:function(){return mve}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();_ve.pluginName="render-field-checkbox",wve([Xs(R_)],_ve.prototype,"_configuration",2),_ve=wve([Ys({contrib:[eie,Qoe]})],_ve);var kve=Object(a.memo)((function(e){var t=e.cell,n=e.isSelected,r=void 0!==n&&n,o=G3(sae),i=Object(a.useCallback)((function(e){r&&(null==o||o.open("user",e))}),[r]);return t&&null!=t.value?l.a.createElement(wce,{value:t.value?[t.value]:[],onMentionTagClick:i}):null}),(function(e,t){var n,r;return!(e.isSelected!==t.isSelected)&&(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function Cve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Eve=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cve(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldCreator"},e))},Ove=Object.defineProperty,Sve=Object.getOwnPropertyDescriptor,xve=function(e,t,n,r){for(var o,i=r>1?void 0:r?Sve(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Ove(t,n,i),i},jve=function(){return Wb((function e(){Ub(this,e),this.fieldType="userId",this.isSystemType=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return kve}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Eve:null}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();jve.pluginName="render-field-user-id",xve([Xs(R_)],jve.prototype,"_configuration",2),jve=xve([Ys({contrib:[eie,Qoe]})],jve);var Ive=Object(a.memo)((function(e){var t=e.cell,n=null==t?void 0:t.value;return"number"==typeof n&&(n=new Date(n)),l.a.createElement(Jle,{key:null==t?void 0:t.uuid,value:n,format:"YYYY-MM-DD HH:mm:ss"})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function Rve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ave=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rve(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldCreatedAt"},e))},Dve=Object.defineProperty,Pve=Object.getOwnPropertyDescriptor,Mve=function(e,t,n,r){for(var o,i=r>1?void 0:r?Pve(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Dve(t,n,i),i},Tve=function(){return Wb((function e(){Ub(this,e),this.fieldType="createdAt",this.isSystemType=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Ive}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Ave:null}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();Tve.pluginName="render-field-created-at",Mve([Xs(R_)],Tve.prototype,"_configuration",2),Tve=Mve([Ys({contrib:[eie,Qoe]})],Tve);var Fve=Object(a.memo)((function(e){var t=e.cell,n=e.isSelected,r=void 0!==n&&n,o=G3(sae),i=Object(a.useCallback)((function(e){r&&(null==o||o.open("user",e))}),[r]);return t?l.a.createElement(wce,{value:t.value?[t.value]:[],onMentionTagClick:i}):null}),(function(e,t){var n,r;return!(e.isSelected!==t.isSelected)&&(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function Nve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Vve=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nve(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldModifier"},e))},Lve=Object.defineProperty,Bve=Object.getOwnPropertyDescriptor,$ve=function(e,t,n,r){for(var o,i=r>1?void 0:r?Bve(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Lve(t,n,i),i},zve=function(){return Wb((function e(){Ub(this,e),this.fieldType="modifierId",this.isSystemType=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Fve}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Vve:null}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();zve.pluginName="render-field-modifier-id",$ve([Xs(R_)],zve.prototype,"_configuration",2),zve=$ve([Ys({contrib:[eie,Qoe]})],zve);var Uve=Object(a.memo)((function(e){var t=e.cell,n=null==t?void 0:t.value;return"number"==typeof n&&(n=new Date(n)),l.a.createElement(Jle,{value:n,format:"YYYY-MM-DD HH:mm:ss"})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function Hve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var qve=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hve(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldUpdatedAt"},e))},Wve=Object.defineProperty,Gve=Object.getOwnPropertyDescriptor,Kve=function(e,t,n,r){for(var o,i=r>1?void 0:r?Gve(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Wve(t,n,i),i},Yve=function(){return Wb((function e(){Ub(this,e),this.fieldType="updatedAt",this.isSystemType=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Uve}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?qve:null}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();Yve.pluginName="render-field-updated-at",Kve([Xs(R_)],Yve.prototype,"_configuration",2),Yve=Kve([Ys({contrib:[eie,Qoe]})],Yve);var Xve=Object(a.memo)((function(e){var t=e.cell,n=e.readonly,r=xpe(EA.TABLE).canUpdate(),o=G3(bie),i=(null==t?void 0:t.recordId)||"",u=(null==t?void 0:t.fieldId)||"",c=Fpe(i,u),s=c?c.value:null==t?void 0:t.value,d=Object(a.useCallback)((function(e){null==o||o.emitClickCellIcon({recordId:i,fieldId:u,event:e,iconName:"cellImageIcon"})}),[i,u]);return 0===s.length?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(lce,{value:s}),r&&!n&&l.a.createElement(g6,{type:"Add",onClick:d}))}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function Jve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Zve=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jve(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldImage"},e))},Qve=["field","cell","recordId","defaultValue","onCellChange"];function ege(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tge=function(e){var t=e.field,n=e.cell,r=e.recordId,o=e.defaultValue,i=e.onCellChange,a=Y3(e,Qve),u=G3(uA),c=G3(Kse),s=G3(fue),d=G3(zS).fieldUriModel;return t?e.renderMode===rie.LITE?l.a.createElement("div",{className:"lakex-table-field-image-editable-lite",onClick:function(e){var n={position:{placement:"bottom",origin:e.target},initialState:{fieldId:t.get("uuid"),fieldType:t.get("type"),recordId:r}};c.open("expandRecordFileEditable",n)}},o?o.map((function(e){var t=s.getRenderUrl(e.src,e.width,e.height);return l.a.createElement("div",{key:e.src,className:"lakex-table-field-image-editable-wrap"},l.a.createElement("img",{loading:"lazy",src:t}))})):l.a.createElement("p",{className:"lakex-table-field-image-placeholder"},uw("请上传"))):l.a.createElement(ace,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ege(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ege(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:(null==n?void 0:n.uuid)||fw(32),defaultValue:o,onChange:function(e){null==i||i(e)},onOrderChange:function(e){var n,o,i=e.targetUid,a=e.sourceUid,l=null==(n=d.findOne({uid:i}))?void 0:n.get("uuid"),c=null==(o=d.findOne({uid:a}))?void 0:o.get("uuid");u.execCommand("updateValueOrder",{fieldId:t.get("uuid"),fieldType:t.get("type"),recordId:r,targetValueId:l,sourceValueId:c})}},a)):null};function nge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rge=function(e){return l.a.createElement(ace,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nge(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},oge=Object.defineProperty,ige=Object.getOwnPropertyDescriptor,age=function(e,t,n,r){for(var o,i=r>1?void 0:r?ige(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&oge(t,n,i),i},lge=function(){return Wb((function e(){Ub(this,e),this.fieldType="image",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Xve}},{key:"getFieldEditComponent",value:function(){return tge}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Zve:null}},{key:"getFieldFormComponent",value:function(){return rge}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();lge.pluginName="render-field-image",age([Xs(R_)],lge.prototype,"_configuration",2),lge=age([Ys({contrib:[eie,Qoe]})],lge);var uge=Object(a.memo)((function(e){var t=e.cell,n=e.readonly,r=xpe(EA.TABLE).canUpdate(),o=G3(bie),i=(null==t?void 0:t.recordId)||"",u=(null==t?void 0:t.fieldId)||"",c=Fpe(i,u),s=c?c.value:null==t?void 0:t.value,d=Object(a.useCallback)((function(e){i&&u&&(null==o||o.emitClickCellIcon({recordId:i,fieldId:u,event:e,iconName:"cellFileIcon"}))}),[i,u]);return 0===(null==s?void 0:s.length)?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(mue,{value:s}),r&&!n&&l.a.createElement(g6,{type:"Add",onClick:d}))}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function cge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var sge=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cge(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldFile"},e))},dge=["field","recordId","cell","onCellChange"];function fge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var pge=function(e){var t=e.field,n=e.recordId,r=e.cell,o=e.onCellChange,i=Y3(e,dge),a=G3(uA),u=G3(Kse),c=G3(zS).fieldUriModel;return t&&r?e.renderMode===rie.LITE?l.a.createElement("div",{className:"lakex-table-field-file-editable-lite",onClick:function(e){var r={position:{placement:"bottom",origin:e.target},initialState:{fieldId:t.get("uuid"),fieldType:t.get("type"),recordId:n}};u.open("expandRecordFileEditable",r)}},r.value?r.value.map((function(e){return l.a.createElement("div",{className:"lakex-table-field-file-editable-wrap"},l.a.createElement(gue,{key:e.uid,type:"file",file:e}))})):l.a.createElement("p",{className:"lakex-table-field-file-placeholder"},uw("请上传"))):l.a.createElement(ice,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fge(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:(null==r?void 0:r.uuid)||fw(32),defaultValue:r.value,onChange:function(e){null==o||o(e)},onOrderChange:function(e){var r,o,i=e.targetUid,l=e.sourceUid,u=null==(r=c.findOne({uid:i}))?void 0:r.get("uuid"),s=null==(o=c.findOne({uid:l}))?void 0:o.get("uuid");null==a||a.execCommand("updateValueOrder",{fieldId:t.get("uuid"),fieldType:t.get("type"),recordId:n,targetValueId:u,sourceValueId:s})}},i)):null};function hge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var vge=function(e){return l.a.createElement(ice,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hge(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},gge=Object.defineProperty,mge=Object.getOwnPropertyDescriptor,yge=function(e,t,n,r){for(var o,i=r>1?void 0:r?mge(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&gge(t,n,i),i},bge=function(){return Wb((function e(){Ub(this,e),this.fieldType="file",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return uge}},{key:"getFieldEditComponent",value:function(){return pge}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?sge:null}},{key:"getFieldFormComponent",value:function(){return vge}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function wge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}bge.pluginName="render-field-file",yge([Xs(R_)],bge.prototype,"_configuration",2),bge=yge([Ys({contrib:[eie,Qoe]})],bge);var _ge=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wge(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldLink"},e))},kge=Object(a.memo)((function(e){var t=e.cell,n=e.readonly,r=xpe(EA.TABLE).isReadonly(),o=G3(bie),i=null==t?void 0:t.recordId,a=null==t?void 0:t.fieldId,u=Fpe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),c=u?u.value:null==t?void 0:t.value;return c?l.a.createElement(l.a.Fragment,null,l.a.createElement(cse,{key:a,value:c}),!r&&!n&&l.a.createElement(_ge,{onClick:function(e){e.stopPropagation(),i&&a&&(null==o||o.emitClickCellIcon({recordId:i,fieldId:a,iconName:"cellLinkIcon",event:e}))}})):null}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)})),Cge=["field","cell","defaultValue","onCellChange","useLinkEditor"];function Ege(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Oge=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,o=e.useLinkEditor,i=Y3(e,Cge);return t?l.a.createElement(dse,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ege(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ege(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({useLinkEditor:o,id:t.uuid,defaultValue:n,onChange:r},i)):null};function Sge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var xge=function(e){return l.a.createElement(dse,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sge(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},jge=Object.defineProperty,Ige=Object.getOwnPropertyDescriptor,Rge=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ige(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jge(t,n,i),i},Age=function(){return Wb((function e(){Ub(this,e),this.fieldType="link",this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return kge}},{key:"getFieldEditComponent",value:function(){return Oge}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?_ge:null}},{key:"getFieldRules",value:function(){return this._linkField.rules}},{key:"getFieldFormComponent",value:function(){return xge}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();Age.pluginName="render-field-link",Rge([Xs(JR)],Age.prototype,"_linkField",2),Rge([Xs(R_)],Age.prototype,"_configuration",2),Age=Rge([Ys({contrib:[eie,Qoe]})],Age);var Dge=Object(a.memo)((function(e){var t=e.cell,n=Fpe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),r=n?n.value:null==t?void 0:t.value;return r?l.a.createElement(nue,{key:null==t?void 0:t.fieldId,value:r||""}):null}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function Pge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Mge=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pge(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldEmail"},e))},Tge=["field","cell","defaultValue","onCellChange"];function Fge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Nge=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,o=Y3(e,Tge);return t?l.a.createElement(rue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fge(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t.uuid,defaultValue:n,value:t.value,prefix:e.renderMode===rie.LITE?void 0:l.a.createElement(g6,{type:"FieldEmail"}),onChange:function(e){null==r||r(e)}},o)):null};function Vge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Lge=function(e){return l.a.createElement(rue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vge(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},Bge=Object.defineProperty,$ge=Object.getOwnPropertyDescriptor,zge=function(e,t,n,r){for(var o,i=r>1?void 0:r?$ge(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Bge(t,n,i),i},Uge=function(){return Wb((function e(){Ub(this,e),this.fieldType="email",this.isShowValidTipInGrid=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Dge}},{key:"getFieldEditComponent",value:function(){return Nge}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Mge:null}},{key:"getFieldRules",value:function(){return this._emailField.rules}},{key:"getFieldFormComponent",value:function(){return Lge}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();Uge.pluginName="render-field-email",zge([Xs(GF)],Uge.prototype,"_emailField",2),zge([Xs(R_)],Uge.prototype,"_configuration",2),Uge=zge([Ys({contrib:[eie,Qoe]})],Uge);var Hge=Object(a.memo)((function(e){var t=e.cell,n=Fpe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),r=n?n.value:null==t?void 0:t.value;return null==r?null:l.a.createElement(Cce,{key:null==t?void 0:t.fieldId,value:r})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function qge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Wge=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qge(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldPhone"},e))},Gge=["field","cell","defaultValue","onCellChange"];function Kge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Yge=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,o=Y3(e,Gge);return t?l.a.createElement(Ece,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kge(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t.uuid,defaultValue:n,value:t.value||"",prefix:e.renderMode===rie.LITE?void 0:l.a.createElement(g6,{type:"FieldPhone"}),onChange:function(e){null==r||r(e)}},o)):null};function Xge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Jge=function(e){return l.a.createElement(Ece,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xge(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},Zge=Object.defineProperty,Qge=Object.getOwnPropertyDescriptor,eme=function(e,t,n,r){for(var o,i=r>1?void 0:r?Qge(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Zge(t,n,i),i},tme=function(){return Wb((function e(){Ub(this,e),this.fieldType="phone",this.isShowValidTipInGrid=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return Hge}},{key:"getFieldEditComponent",value:function(){return Yge}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Wge:null}},{key:"getFieldRules",value:function(){return this._phoneField.rules}},{key:"getFieldFormComponent",value:function(){return Jge}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();tme.pluginName="render-field-phone",eme([Xs(nN)],tme.prototype,"_phoneField",2),eme([Xs(R_)],tme.prototype,"_configuration",2),tme=eme([Ys({contrib:[eie,Qoe]})],tme);var nme=function(e){var t=e.value;return!t&&0!==Number(t)&&(t=0),l.a.createElement("div",{className:"lakex-table-form-rate-readonly"},l.a.createElement(Roe,{disabled:!0,defaultValue:t,count:5,character:l.a.createElement(g6,{type:"Star"})}))},rme=function(e){var t=e.defaultValue,n=void 0===t?0:t,r=e.value,o=e.onChange;return!r&&0!==Number(r)&&(r=0),l.a.createElement("div",{className:"lakex-table-form-rate-editable",onClick:function(e){e.preventDefault(),e.stopPropagation()}},l.a.createElement(Roe,{onChange:o,defaultValue:n,value:r,count:5,character:l.a.createElement(g6,{type:"Star"})}))},ome=Object(a.memo)((function(e){var t=e.cell,n=e.readonly,r=G3(uA),o=xpe(EA.TABLE).canUpdate(),i=Fpe(null==t?void 0:t.recordId,null==t?void 0:t.fieldId),a=(i?i.value:null==t?void 0:t.value)||0;return t&&o&&!n?l.a.createElement(rme,{key:null==t?void 0:t.updated_at,value:a,onChange:function(e){null==r||r.execCommand("setCell",{recordId:t.recordId,fieldId:t.fieldId,value:e,fieldType:t.fieldType})}}):l.a.createElement(nme,{key:null==t?void 0:t.updated_at,value:a})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function ime(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ame=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ime(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ime(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldRate"},e))},lme=["field","cell","defaultValue","onCellChange"];function ume(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var cme=function(e){e.field;var t=e.cell,n=e.defaultValue,r=e.onCellChange,o=Y3(e,lme);return l.a.createElement(rme,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ume(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ume(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:null==t?void 0:t.uuid,defaultValue:n,value:null!=t&&t.value?Number(t.value):0,onChange:function(e){null==r||r(e)}},o))};function sme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var dme=function(e){return l.a.createElement(rme,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sme(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sme(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},fme=Object.defineProperty,pme=Object.getOwnPropertyDescriptor,hme=function(e,t,n,r){for(var o,i=r>1?void 0:r?pme(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&fme(t,n,i),i},vme=function(){return Wb((function e(){Ub(this,e),this.fieldType="rate",this.isStrictValidatedValue=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return ome}},{key:"getFieldEditComponent",value:function(){return cme}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?ame:null}},{key:"getFieldRules",value:function(){return this._rateField.rules}},{key:"getFieldFormComponent",value:function(){return dme}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();vme.pluginName="render-field-rate",hme([Xs(wfe)],vme.prototype,"_rateField",2),hme([Xs(R_)],vme.prototype,"_configuration",2),vme=hme([Ys({contrib:[eie,Qoe]})],vme);var gme=["blue-6","magenta-6","orange-6","pea-green-6","purple-6","red-6","yuque-green-6","blue-2,blue-3,blue-4,blue-5,blue-6","magenta-2,magenta-3,magenta-4,magenta-5,magenta-6","orange-2,orange-3,orange-4,orange-5,orange-6","pea-green-2,pea-green-3,pea-green-4,pea-green-5,pea-green-6","purple-2,purple-3,purple-4,purple-5,purple-6","red-2,red-3,red-4,red-5,red-6","yuque-green-2,yuque-green-3,yuque-green-4,yuque-green-5,yuque-green-6"],mme=function(e,t,n){var r=t.split(",");if(1===r.length)return e.toThemeColor("@".concat(t));var o=r.length,i=Math.floor(100/o),a=Math.min(Math.floor(n/i),o-1);return e.toThemeColor("@".concat(r[a]))},yme=function(e){if(1===e.length)return e[0];var t=100/e.length,n=[];return e.forEach((function(e,r){n.push("".concat(e," ").concat(t*r,"%")),n.push("".concat(e," ").concat(t*(r+1),"%"))})),"linear-gradient(to right, ".concat(n.join(","),")")},bme=function(e){var t=e.value,n=e.color,r=rse().themeHelper;return!t&&0!==Number(t)&&(t=0),l.a.createElement("div",{className:"lakex-table-form-progress-readonly"},l.a.createElement(O.a,{percent:t,showInfo:!1,strokeColor:mme(r,n,t)}),l.a.createElement("span",{className:"lakex-table-form-progress-value"},t,"%"))},wme=function(e){var t=e.value,n=e.onChange,r=e.color,o=void 0===r?"blue-6":r,i=rse().themeHelper,u=gP(Object(a.useState)(t),2),c=u[0],s=u[1],d=gP(Object(a.useState)(o),2),f=d[0],p=d[1];return!t&&0!==Number(t)&&(t=0),Object(a.useEffect)((function(){s(t)}),[t]),Object(a.useEffect)((function(){p(o)}),[o]),l.a.createElement("div",{className:"lakex-table-form-progress-editable"},l.a.createElement(Soe,{prefixCls:"".concat("ant","-slider"),range:!1,onChangeComplete:n,styles:{track:{backgroundColor:f&&mme(i,f,c)}},onChange:function(e){s(e)},value:c}),l.a.createElement("span",{className:"lakex-table-form-progress-value"},c,"%"))},_me=Object(a.memo)((function(e){var t,n,r=e.cell,o=e.field,i=e.readonly,a=Dpe((null==o?void 0:o.get("uuid"))||""),u=G3(uA),c=xpe(EA.TABLE).canUpdate(),s=Fpe(null==r?void 0:r.recordId,null==r?void 0:r.fieldId),d=(s?s.value:null==r?void 0:r.value)||0;return r&&c&&!i?l.a.createElement(wme,{key:null==r?void 0:r.updated_at,value:d,color:(null==(t=null==a?void 0:a.field)?void 0:t.get("color"))||"blue-6",onChange:function(e){null==u||u.execCommand("setCell",{recordId:r.recordId,fieldId:r.fieldId,value:e,fieldType:r.fieldType})}}):l.a.createElement(bme,{key:null==r?void 0:r.updated_at,color:(null==(n=null==a?void 0:a.field)?void 0:n.get("color"))||"blue-6",value:d})}),(function(e,t){var n,r;return(null==(n=e.cell)?void 0:n.updated_at)===(null==(r=t.cell)?void 0:r.updated_at)}));function kme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Cme=function(e){return l.a.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kme(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kme(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"FieldProgress"},e))},Eme=["field","cell","defaultValue","onCellChange"];function Ome(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Sme=function(e){var t=e.field,n=e.cell;e.defaultValue;var r=e.onCellChange,o=Y3(e,Eme);return l.a.createElement(wme,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ome(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ome(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:null==n?void 0:n.uuid,value:null!=n&&n.value?Number(n.value):0,color:(null==t?void 0:t.get("color"))||"blue-6",onChange:function(e){null==r||r(e)}},o))};function xme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var jme=function(e){return l.a.createElement(wme,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xme(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xme(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},Ime=Object.defineProperty,Rme=Object.getOwnPropertyDescriptor,Ame=function(e,t,n,r){for(var o,i=r>1?void 0:r?Rme(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Ime(t,n,i),i},Dme=function(){return Wb((function e(){Ub(this,e),this.fieldType="progress",this.isStrictValidatedValue=!0,this.showFieldIcon=!0}),[{key:"init",value:function(){this.showFieldIcon=this._configuration.getValue("render.showFieldIcon")}},{key:"getFieldComponent",value:function(){return _me}},{key:"getFieldEditComponent",value:function(){return Sme}},{key:"getFieldIcon",value:function(){return this.showFieldIcon?Cme:null}},{key:"getFieldRules",value:function(){return this._progressField.rules}},{key:"getFieldFormComponent",value:function(){return jme}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function Pme(e,t,n){return t=P_(t),D_(e,Mme()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Mme(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Mme=function(){return!!e})()}Dme.pluginName="render-field-progress",Ame([Xs(Ife)],Dme.prototype,"_progressField",2),Ame([Xs(R_)],Dme.prototype,"_configuration",2),Dme=Ame([Ys({contrib:[eie,Qoe]})],Dme);var Tme=Object.defineProperty,Fme=Object.getOwnPropertyDescriptor,Nme=function(e,t,n,r){for(var o,i=r>1?void 0:r?Fme(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Tme(t,n,i),i},Vme=function(e){function t(){var e;return Ub(this,t),(e=Pme(this,t,arguments))._onShowNewGroup=e._register(new ck),e.onShowNewGroup=e._onShowNewGroup.event,e._onShowEditGroup=e._register(new ck),e.onShowEditGroup=e._onShowEditGroup.event,e}return F_(t,e),Wb(t,[{key:"showNewGroup",value:function(e,t){this._onShowNewGroup.emit({target:e,groupField:t})}},{key:"showEditGroup",value:function(e,t,n){this._onShowEditGroup.emit({target:e,groupField:t,groupOption:n})}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);Nme([Vs()],Vme.prototype,"destroy",1),Vme=Nme([Ys()],Vme);var Lme=Object.defineProperty,Bme=Object.getOwnPropertyDescriptor,$me=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return pd().register(this).register(Vme)}}])}();$me.pluginName="render-group",$me=function(e,t,n,r){for(var o,i=r>1?void 0:r?Bme(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Lme(t,n,i),i}([Ys({contrib:[L3,Yse]})],$me);var zme=Ts.defineToken("HighlightRenderPluginContribution");function Ume(e,t,n){return t=P_(t),D_(e,Hme()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Hme(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Hme=function(){return!!e})()}var qme=Object.defineProperty,Wme=Object.getOwnPropertyDescriptor,Gme=function(e,t,n,r){for(var o,i=r>1?void 0:r?Wme(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&qme(t,n,i),i},Kme=function(e){function t(){var e;return Ub(this,t),(e=Ume(this,t,arguments))._highlightCellIds=new Set,e._highlightRecordIds=new Set,e._onChange=e._register(new ck),e.onChange=e._onChange.event,e}return F_(t,e),Wb(t,[{key:"destroy",value:function(){this._clear(),this._onChange.destroy()}},{key:"_getCellIdByHighlightItem",value:function(e){return e.fieldId?"".concat(e.recordId,"-").concat(e.fieldId):null}},{key:"_setHighlightColor",value:function(e){var t=document.querySelector(":root");null==t||t.style.setProperty("--view-highlight-bg-color",e)}},{key:"_removeHighlightColor",value:function(){var e=document.querySelector(":root");null==e||e.style.removeProperty("--view-highlight-bg-color")}},{key:"isInHighlight",value:function(e){if(ww(e.recordId))return!1;if(!ww(e.fieldId)){var t=this._getCellIdByHighlightItem(e);return this._highlightCellIds.has(t)}return this._highlightRecordIds.has(e.recordId)}},{key:"setHighlights",value:function(e,t){var n=this;this._clear(),t&&this._setHighlightColor(t),e.forEach((function(e){var t=e.recordId;t&&n._highlightRecordIds.add(t);var r=n._getCellIdByHighlightItem(e);r&&n._highlightCellIds.add(r)})),this._notify()}},{key:"clearHighlights",value:function(){this._clear(),this._notify()}},{key:"_clear",value:function(){this._removeHighlightColor(),this._highlightCellIds.clear(),this._highlightRecordIds.clear()}},{key:"_notify",value:function(){this._onChange.emit({highlightCellIds:this._highlightCellIds,highlightRecordIds:this._highlightRecordIds})}}])}($_);Gme([Vs()],Kme.prototype,"destroy",1),Kme=Gme([Ys()],Kme);var Yme=Object.defineProperty,Xme=Object.getOwnPropertyDescriptor,Jme=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return pd().contribution(zme).register(this).register(Kme)}}])}();Jme.pluginName="render-highlight",Jme=function(e,t,n,r){for(var o,i=r>1?void 0:r?Xme(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Yme(t,n,i),i}([Ys({contrib:Qoe})],Jme);var Zme=Ts.defineToken("WorkbenchHotkeyContribution"),Qme=Ts.defineToken("SelectionRenderPluginScrollContribution");var eye=function(){function e(t,n){Ub(this,e),n||(n=t);var r=function(e,t){var n=e.column,r=e.row,o=t.column,i=t.row;return{minColumn:Math.min(n,o),maxColumn:Math.max(n,o),minRow:Math.min(r,i),maxRow:Math.max(r,i)}}(t,n),o=r.minRow,i=r.minColumn,a=r.maxRow,l=r.maxColumn;this._start=new cV(o,i,t.rowCount,t.columnCount),this._end=new cV(a,l,n.rowCount,n.columnCount),this._isCollapsed=cV.equal(t,this._end)}return Wb(e,[{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"isCollapsed",get:function(){return this._isCollapsed}},{key:"rowCount",get:function(){return this._start.rowCount}},{key:"columnCount",get:function(){return this._start.columnCount}},{key:"cloneRange",value:function(){return new e(this._start,this._end)}}],[{key:"createAt",value:function(t,n){return new e(t,n)}},{key:"equal",value:function(e,t){return!(!e||!t)&&(e===t||cV.equal(e.start,t.start)&&cV.equal(e.end,t.end))}}])}(),tye=function(){function e(t){Ub(this,e),this._recordId=t}return Wb(e,[{key:"isCollapsed",get:function(){return!0}},{key:"recordId",get:function(){return this._recordId}},{key:"cloneRange",value:function(){return new e(this._recordId)}}],[{key:"createAt",value:function(t){return new e(t)}},{key:"equal",value:function(e,t){return e._recordId===t._recordId}}])}();var nye=function(){function e(t,n,r){if(Ub(this,e),this._anchor=n,this._focus=r,this._ranges=[],0===t.length)throw new Error("ranges construct error");this._ranges=function(e){return 1===e.length?Vb(e):e.sort((function(e,t){return e.start.row<t.start.row?-1:e.start.row>t.start.row?1:e.start.column-t.start.column}))}(t.slice())}return Wb(e,[{key:"destroy",value:function(){delete this._ranges,delete this._anchor,delete this._focus}},{key:"type",get:function(){return 0===this.rangeCount?uV.NONE:this.isCollapsed?uV.CARET:uV.RANGE}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"ranges",get:function(){return this._ranges.slice()}},{key:"isCollapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}},{key:"isMultiSelection",get:function(){return this._ranges.length>1}},{key:"isAllSelect",get:function(){return 1===this._ranges.length&&0===this._ranges[0].start.row&&0===this._ranges[0].start.column&&this._ranges[0].end.row===this._ranges[0].start.rowCount-1&&this._ranges[0].end.column===this._ranges[0].start.columnCount-1}},{key:"focus",get:function(){return this._focus}},{key:"anchor",get:function(){return this._anchor}},{key:"rowCount",get:function(){return this.anchor.rowCount}},{key:"columnCount",get:function(){return this.anchor.columnCount}},{key:"isValid",value:function(){return this._ranges.length>0}},{key:"cloneSelection",value:function(){return new e(function(e){return e.map((function(e){return e.cloneRange()}))}(this._ranges),this._anchor,this._focus)}},{key:"getRangeAt",value:function(e){return this._ranges[e]}}],[{key:"createBy",value:function(t){return new e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t[0].start,arguments.length>2&&void 0!==arguments[2]?arguments[2]:t[t.length-1].end)}},{key:"equal",value:function(e,t){if(e.ranges.length!==t.ranges.length||e.rowCount!==t.rowCount||e.columnCount!==t.columnCount)return!1;for(var n=0;n<e.ranges.length;n++)if(!eye.equal(e.ranges[n],t.ranges[n]))return!1;return!0}}])}(),rye=function(){function e(t){if(Ub(this,e),this._ranges=[],0===t.length)throw new Error("ranges construct error");this._ranges=t.slice()}return Wb(e,[{key:"type",get:function(){return 0===this.rangeCount?uV.NONE:this.isCollapsed?uV.CARET:uV.RANGE}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"ranges",get:function(){return this._ranges.slice()}},{key:"isCollapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}},{key:"destroy",value:function(){delete this._ranges}},{key:"getRangeAt",value:function(e){return this._ranges[e]}},{key:"removeAllRanges",value:function(){this._ranges=[]}},{key:"removeRange",value:function(e){var t=this._ranges.findIndex((function(t){return t.recordId===e.recordId}));return this._ranges.splice(t,1)}}],[{key:"createBy",value:function(t){return new e(t)}}])}();function oye(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return iye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iye(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function iye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aye(e,t,n){return t=P_(t),D_(e,lye()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function lye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(lye=function(){return!!e})()}var uye=Object.defineProperty,cye=Object.getOwnPropertyDescriptor,sye=function(e,t,n,r){for(var o,i=r>1?void 0:r?cye(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&uye(t,n,i),i};function dye(e){return e instanceof nye}var fye=function(e){function t(){var e;return Ub(this,t),(e=aye(this,t,arguments))._onChange=e._register(new ck),e.onChange=e._onChange.event,e._onAnchorChange=e._register(new ck),e.onAnchorChange=e._onAnchorChange.event,e._selection=null,e._prevSelection=null,e._fieldValue=null,e._editable=!0,e._kanbanScrollService=null,e._cardScrollService=null,e._gridScrollService=null,e}return F_(t,e),Wb(t,[{key:"_currentViewType",get:function(){return this._readService.getActiveView().get("type")}},{key:"gridScrollService",get:function(){return this._gridScrollService}},{key:"setKanbanScrollService",value:function(e){this._kanbanScrollService=e}},{key:"setCardScrollService",value:function(e){this._cardScrollService=e}},{key:"setGridScrollService",value:function(e){this._gridScrollService=e}},{key:"destroy",value:function(){this._selection=null,this._onChange.destroy(),this._onAnchorChange.destroy()}},{key:"hasSelection",value:function(){return null!==this._selection}},{key:"getSelection",value:function(){return this._selection}},{key:"getFieldValue",value:function(){return this._currentViewType===BC.GRID?this._fieldValue:null}},{key:"getFieldValues",value:function(){return this._selection instanceof nye?this._getSelectFieldValues(this._selection):null}},{key:"setSelection",value:function(e){var t,n,r,o=this._readService.getActiveView();if(o){if(this._prevSelection=this._selection,o.get("type")===BC.GRID){if((r=Array.isArray(e)?nye.createBy(e):e.cloneSelection())instanceof nye&&this._prevSelection instanceof nye&&cV.equal(r.anchor,this._prevSelection.anchor)){if(r instanceof nye&&this._fieldValue){var i=this._readService.getFlatViewRecords(o.get("uuid")),a=this._readService.getViewFields(o.get("uuid"))||[],l=null==(t=i.get(r.anchor.row))?void 0:t.get("record_uuid"),u=null==(n=a.get(r.anchor.column))?void 0:n.get("field_uuid");(this._fieldValue.recordId!==l||this._fieldValue.fieldId!==u)&&(this._fieldValue=this._getSelectFieldValue(r),this._onAnchorChange.emit({selection:r,fieldValue:this._fieldValue}))}}else this._fieldValue=this._getSelectFieldValue(r),this._onAnchorChange.emit({selection:r,fieldValue:this._fieldValue});if(this._prevSelection instanceof nye&&r instanceof nye&&nye.equal(r,this._prevSelection))return}else r=e;this._selection=r,this._onChange.emit({selection:this._selection})}}},{key:"removeSelection",value:function(){this._selection=null,this._prevSelection=null,this._fieldValue=null,this._editable=!0,this._onChange.emit({selection:null}),this._onAnchorChange.emit({selection:null,fieldValue:null})}},{key:"createGridSelectionByScope",value:function(e,t,n,r){return function(e,t,n,r){var o=new cV(e.row,e.column,n,r),i=new cV(t.row,t.column,n,r),a=eye.createAt(o,i);return nye.createBy([a],o,i)}(e,t,n,r)}},{key:"createGridSelectionByIndex",value:function(e,t,n,r){if(lu(n)||lu(r)){var o=this._readService.getActiveView();n=lu(n)?(this._readService.getFlatViewRecords(null==o?void 0:o.get("uuid"))||[]).length:n,r=lu(r)?(this._readService.getViewFields(null==o?void 0:o.get("uuid"))||[]).length:r}return function(e,t,n,r){var o=eye.createAt(new cV(e,t,n,r),new cV(e,t,n,r));return nye.createBy([o])}(e,t,n,r)}},{key:"createRowGridSelectionByIndex",value:function(e,t,n){return Array.isArray(e)&&0===e.length?(this.removeSelection(),null):function(e,t,n){if(Array.isArray(e)){var r=ku(e).sort(),o=[],i=r[0],a=r[0];return r.forEach((function(e,l){if(!(r[l+1]>=0&&r[l+1]===e+1)){a=e;var u=eye.createAt(new cV(i,0,t,n),new cV(a,n-1,t,n));o.push(u),i=r[l+1]}})),nye.createBy(o)}var l=eye.createAt(new cV(e,0,t,n),new cV(e,n-1,t,n));return nye.createBy([l])}(e,t,n)}},{key:"createColumnGridSelectionByIndex",value:function(e,t,n){return function(e,t,n){var r=eye.createAt(new cV(0,e,t,n),new cV(t-1,e,t,n));return nye.createBy([r])}(e,t,n)}},{key:"createSelectionById",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._readService.getActiveView();if(!r)return null;if(r.get("type")===BC.GRID){var o=this._readService.getViewFields(r.get("uuid"))||[],i=this._readService.getFlatViewRecords(r.get("uuid"))||[],a=0;t&&"string"==typeof t&&(a=k_(o,(function(e){return e.get("field_uuid")===t})));var l=k_(i,(function(t){return t.get("record_uuid")===e})),u=eye.createAt(new cV(l,a,i.length,o.length));return this._editable=n,nye.createBy([u])}var c=tye.createAt(e);return rye.createBy([c])}},{key:"moveToRecord",value:function(e){var t=this._readService.getActiveView(),n=this._readService.getFlatViewRecords(null==t?void 0:t.get("uuid")),r=k_(n,(function(t){return t.get("record_uuid")===e}));if(!(r<0)){if((null==t?void 0:t.get("type"))===BC.GRID){var o=this._readService.getViewFieldsCount(),i=this.createGridSelectionByIndex(r,0,n.length,o);this.scrollToSelection(i,"end")}if((null==t?void 0:t.get("type"))===BC.KANBAN&&this._kanbanScrollService){var a=this._readService.getGroupViewRecords(null==t?void 0:t.get("uuid")),l=this._kanbanScrollService.getKanbanGroupPositionByRecordId(e,a),u=l.index,c=l.groupId;c&&u>=0&&this._kanbanScrollIntoView(c,u,"end")}(null==t?void 0:t.get("type"))===BC.CARD&&this._cardScrollIntoView(r,"center")}}},{key:"moveUp",value:function(){var e=this.isRowSelection();if(this._selection&&this._selection instanceof nye&&!e){var t=function(e){return e.isAtRowStart?null:nye.createBy([eye.createAt(new cV(e.row-1,e.column,e.rowCount,e.columnCount))])}(this._selection.anchor);this.scrollToSelection(t,"start")}}},{key:"moveDown",value:function(){var e=this.isRowSelection();if(this._selection&&this._selection instanceof nye&&!e){var t=function(e){return e.isAtRowEnd?null:nye.createBy([eye.createAt(new cV(e.row+1,e.column,e.rowCount,e.columnCount))])}(this._selection.anchor);this.scrollToSelection(t,"end")}}},{key:"moveLeft",value:function(){var e=this.isRowSelection();if(this._selection&&this._selection instanceof nye&&!e){var t=function(e){return e.isAtColumnStart?e.isAtRowStart?null:nye.createBy([eye.createAt(new cV(e.row-1,e.columnCount-1,e.rowCount,e.columnCount))]):nye.createBy([eye.createAt(new cV(e.row,e.column-1,e.rowCount,e.columnCount))])}(this._selection.anchor);this.scrollToSelection(t,"start")}}},{key:"moveRight",value:function(){var e=this.isRowSelection();if(this._selection&&this._selection instanceof nye&&!e){var t=function(e){return e.isAtColumnEnd?e.isAtRowEnd?null:nye.createBy([eye.createAt(new cV(e.row+1,0,e.rowCount,e.columnCount))]):nye.createBy([eye.createAt(new cV(e.row,e.column+1,e.rowCount,e.columnCount))])}(this._selection.anchor);this.scrollToSelection(t,"end")}}},{key:"moveFocusUp",value:function(){if(this._selection&&this._selection instanceof nye){var e=function(e){var t=e.anchor,n=e.focus;if(!n.isAtRowStart){var r=e.getRangeAt(0),o=new cV(n.row-1,n.column,r.rowCount,r.columnCount);return nye.createBy([eye.createAt(t,o)],t,o)}return null}(this._selection);this.scrollToSelection(e,"start")}}},{key:"moveFocusDown",value:function(){if(this._selection&&this._selection instanceof nye){var e=function(e){var t=e.anchor,n=e.focus;if(!n.isAtRowEnd){var r=e.getRangeAt(0),o=new cV(n.row+1,n.column,r.rowCount,r.columnCount);return nye.createBy([eye.createAt(t,o)],t,o)}return null}(this._selection);this.scrollToSelection(e,"end")}}},{key:"moveFocusLeft",value:function(){if(this._selection&&this._selection instanceof nye){var e=function(e){var t=e.anchor,n=e.focus;if(!n.isAtColumnStart){var r=e.getRangeAt(0),o=new cV(n.row,n.column-1,r.rowCount,r.columnCount);return nye.createBy([eye.createAt(t,o)],t,o)}return null}(this._selection);this.scrollToSelection(e,"start")}}},{key:"moveFocusRight",value:function(){if(this._selection&&this._selection instanceof nye){var e=function(e){var t=e.anchor,n=e.focus;if(!n.isAtColumnEnd){var r=e.getRangeAt(0),o=new cV(n.row,n.column+1,r.rowCount,r.columnCount);return nye.createBy([eye.createAt(t,o)],t,o)}return null}(this._selection);this.scrollToSelection(e,"end")}}},{key:"moveTop",value:function(){var e=this.isRowSelection();if(this._selection&&this._selection instanceof nye&&!e){var t=function(e){return e.isAtRowStart?null:nye.createBy([eye.createAt(new cV(0,e.column,e.rowCount,e.columnCount))])}(this._selection.anchor);this.scrollToSelection(t,"start")}}},{key:"moveBottom",value:function(){var e=this.isRowSelection();if(this._selection&&this._selection instanceof nye&&!e){var t=function(e){return e.isAtRowEnd?null:nye.createBy([eye.createAt(new cV(e.rowCount-1,e.column,e.rowCount,e.columnCount))])}(this._selection.anchor);this.scrollToSelection(t,"end")}}},{key:"moveFirstLeft",value:function(){var e=this.isRowSelection();if(this._selection&&this._selection instanceof nye&&!e){var t=function(e){return e.isAtColumnStart?null:nye.createBy([eye.createAt(new cV(e.row,0,e.rowCount,e.columnCount))])}(this._selection.anchor);this.scrollToSelection(t,"start")}}},{key:"moveLastRight",value:function(){var e=this.isRowSelection();if(this._selection&&this._selection instanceof nye&&!e){var t=function(e){return e.isAtColumnEnd?null:nye.createBy([eye.createAt(new cV(e.row,e.columnCount-1,e.rowCount,e.columnCount))])}(this._selection.anchor);this.scrollToSelection(t,"end")}}},{key:"selectAll",value:function(){var e=this._readService.getActiveView();if(e&&e.get("type")===BC.GRID){var t=this._readService.getViewRecordsCount(e.get("uuid")),n=this._readService.getViewFieldsCount(e.get("uuid")),r=this.createGridSelectionByScope({row:0,column:0},{row:t-1,column:n-1},t,n);this.setSelection(r)}}},{key:"getSelectBoundingRect",value:function(){if(this._selection){var e=this._renderContext.$root,t=this.getSelectAnchorTarget();if(t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return r.right<n.left||r.left>n.right||r.bottom<n.top||r.top>n.bottom?null:DOMRect.fromRect({x:r.x,y:r.y,width:r.width,height:r.height})}}return null}},{key:"_getSelectPositionTarget",value:function(e){return this._renderContext.$root.querySelector('.lakex-viewer-grid-row[data-row="'.concat(e.row,'"] .lakex-viewer-grid-cell[data-col="').concat(e.column,'"]'))}},{key:"getSelectAnchorTarget",value:function(e){return!e&&this._selection instanceof nye&&(e=this._selection),e?this._getSelectPositionTarget(e.anchor):null}},{key:"getSelectFocusTarget",value:function(e){return!e&&this._selection instanceof nye&&(e=this._selection),e?this._getSelectPositionTarget(e.focus):null}},{key:"isSelectOneCell",value:function(){var e;return(null==(e=this._selection)?void 0:e.isCollapsed)||!1}},{key:"isSelectOneCol",value:function(e){var t=this._selection;if(!t)return!1;if(this._currentViewType===BC.GRID){var n=t.anchor,r=t.focus,o=t.rowCount;return 0===n.row&&r.row===o-1&&n.column===r.column&&n.column===e}return!1}},{key:"isInSelect",value:function(e,t){var n=this._selection;if(!n)return!1;var r,o=oye(n.ranges);try{for(o.s();!(r=o.n()).done;){var i=r.value,a=i.start,l=i.end;if(e>=a.row&&e<=l.row&&t>=a.column&&t<=l.column)return!0}}catch(e){o.e(e)}finally{o.f()}return!1}},{key:"isInRowsSelect",value:function(e){var t=this._selection;if(!t)return!1;var n,r=oye(t.ranges);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=o.start,a=o.end,l=o.columnCount;if(0===i.column&&a.column===l-1&&e>=i.row&&e<=a.row)return!0}}catch(e){r.e(e)}finally{r.f()}return!1}},{key:"isRowSelection",value:function(){var e=this._selection;return!!e&&function(e,t,n){var r=sr(e)?zl:Ul;return n&&Co(e,t,n)&&(t=void 0),r(e,bl(t))}(e.ranges,(function(e){var t=e.start,n=e.end,r=e.columnCount;return 0===t.column&&n.column===r-1}))}},{key:"isActiveCell",value:function(e,t){var n=this._selection;return!!n&&(n.anchor.column===t&&n.anchor.row===e)}},{key:"isSelectionEnd",value:function(e,t){var n=this._selection;if(!n)return!1;var r=n.ranges[n.ranges.length-1];return r.end.column===t&&r.end.row===e}},{key:"isEditable",value:function(){return this._editable}},{key:"getSelectRowIndexes",value:function(e){if(!(e=e||this._selection))return[];var t,n=[],r=oye(e.ranges);try{for(r.s();!(t=r.n()).done;){var o=t.value;n=n.concat(new Array(o.end.row-o.start.row+1).fill(o.start.row).map((function(e,t){return e+t})))}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"scrollToAnchorPosition",value:function(e,t,n){var r=this,o=null==e?void 0:e.anchor,i=Vb(document.querySelectorAll("[data-tr-row]")).find((function(e){return Number(e.getAttribute("data-tr-row"))===o.row})),a=i?Number(i.getAttribute("data-index")):o.row;this._gridScrollIntoView(a,t,(function(){requestAnimationFrame((function(){var t,o=r.getSelectAnchorTarget(e);o&&(null==(t=r._gridScrollService)||t.horizontalScroll(o,e.anchor.column)),r.setSelection(e),n&&n()}))}))}},{key:"scrollToFocusPosition",value:function(e,t,n){var r=this,o=null==e?void 0:e.focus;this._gridScrollIntoView(o.row,t,(function(){requestAnimationFrame((function(){var t,o=r.getSelectFocusTarget(e);o&&(null==(t=r._gridScrollService)||t.horizontalScroll(o,e.focus.column)),r.setSelection(e),n&&n()}))}))}},{key:"scrollToSelection",value:function(e,t,n){var r=this;if(e){var o=this._readService.getActiveView();if((null==o?void 0:o.get("type"))===BC.GRID)this.scrollToFocusPosition(e,t,n);else if((null==o?void 0:o.get("type"))===BC.KANBAN&&this._kanbanScrollService){var i=e.getRangeAt(0).recordId,a=this._readService.getGroupViewRecords(null==o?void 0:o.get("uuid")),l=this._kanbanScrollService.getKanbanGroupPositionByRecordId(i,a),u=l.index,c=l.groupId;c&&u>=0&&this._kanbanScrollIntoView(c,u,t,(function(){var t,o;null==(o=null==(t=r._kanbanScrollService)?void 0:t.scrollers[c])||o.scrollIntoView(),r.setSelection(e),n&&n()}))}else if((null==o?void 0:o.get("type"))===BC.CARD){for(var s=e.getRangeAt(0).recordId,d=this._readService.getViewRecords(null==o?void 0:o.get("uuid")),f=-1,p=0;p<d.length;p++){if(d.get(p).get("record_uuid")===s){f=p;break}}f>=0&&this._cardScrollIntoView(f,t,(function(){r.setSelection(e),n&&n()}))}else this.setSelection(e),n&&n()}}},{key:"_gridScrollIntoView",value:function(e,t,n){var r;null==(r=this._gridScrollService)||r.scrollIntoView({index:e,align:t,done:function(){n&&n()}})}},{key:"_kanbanScrollIntoView",value:function(e,t,n,r){var o;null==(o=this._kanbanScrollService)||o.scrollIntoView(e,{index:t,align:n,done:function(){r&&r()}})}},{key:"_cardScrollIntoView",value:function(e,t,n){var r;null==(r=this._cardScrollService)||r.scrollToIndex({index:e,align:t}),n&&n()}},{key:"_getSelectFieldValue",value:function(e){var t,n;if(!e)return null;var r=this._readService.getActiveView();if(!r)return null;var o=e.anchor,i=this._readService.getViewFields(r.get("uuid")),a=this._readService.getFlatViewRecords(r.get("uuid")),l=null==(t=i.get(o.column))?void 0:t.get("field_uuid"),u=null==(n=a.get(o.row))?void 0:n.get("record_uuid");return l&&u?this._readService.getCell(l,u):null}},{key:"_getSelectFieldValues",value:function(e){var t,n;if(!e)return null;var r=this._readService.getActiveView();if(!r)return null;for(var o=this._readService.getViewFields(r.get("uuid"))||[],i=this._readService.getFlatViewRecords(r.get("uuid"))||[],a=[],l=e.getRangeAt(0),u=l.start.row;u<=l.end.row;u++)for(var c=l.start.column;c<=l.end.column;c++){var s=null==(t=null==o?void 0:o.get(c))?void 0:t.get("field_uuid"),d=null==(n=i.get(u))?void 0:n.get("record_uuid");if(s&&d){var f=this._readService.getCell(s,d);f&&a.push(f)}}return a}},{key:"getRecordIds",value:function(e){var t=[];if(!e)return t;var n=this._readService.getActiveView();if(!n)return t;for(var r=this._readService.getFlatViewRecords(n.get("uuid"))||[],o=this.getSelectRowIndexes(e),i=0;i<r.length;i++)o.includes(i)&&t.push(r.get(i).get("record_uuid"));return t}},{key:"getRecordId",value:function(e){var t;if(!(e&&e instanceof nye))return null;var n=this._readService.getActiveView();if(!n)return null;var r=e.anchor;return(null==(t=this._readService.getFlatViewRecords(n.get("uuid")).get(r.row))?void 0:t.get("record_uuid"))||null}},{key:"getAnchorPosition",value:function(e){var t,n;if(!e)return null;var r=this._readService.getActiveView();if(!r)return null;var o=e.anchor,i=this._readService.getViewFields(r.get("uuid")),a=this._readService.getFlatViewRecords(r.get("uuid")),l=null==(t=i.get(o.column))?void 0:t.get("field_uuid"),u=null==(n=a.get(o.row))?void 0:n.get("record_uuid");return l&&u?{fieldId:l,recordId:u}:null}}])}($_);function pye(){var e=G3(fye),t=gP(Object(a.useState)((function(){return null==e?void 0:e.getSelection()})),2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var t=null==e?void 0:e.onChange((function(e){var t=e.selection;r(t)}));return function(){null==t||t.destroy()}}),[e]),n}sye([Xs(MI)],fye.prototype,"_readService",2),sye([Xs(cie)],fye.prototype,"_renderContext",2),sye([Vs()],fye.prototype,"destroy",1),fye=sye([Ys()],fye);var hye=Object(a.createContext)(null);function vye(){return Object(a.useContext)(hye)}function gye(e){var t=pye();return l.a.createElement(hye.Provider,{value:t},e.children)}var mye=Object.defineProperty,yye=Object.getOwnPropertyDescriptor,bye=function(){return Wb((function e(){Ub(this,e)}),[{key:"SelectionContainer",get:function(){return gye}}])}();function wye(){var e=G3(fye),t=G3(MI),n=null==e?void 0:e.getFieldValue(),r=Object(a.useCallback)((function(e,n){return t.getCell(n,e)}),[t]);return n?r(n.recordId,n.fieldId):null}function _ye(e){var t=G3(fye),n=gP(Object(a.useState)(null),2),r=n[0],o=n[1],i=wye(),l=Object(a.useCallback)((function(){var e=null==t?void 0:t.getSelectBoundingRect();return e?{left:e.left,top:e.top,width:e.width,height:e.height}:null}),[]),u=Object(a.useCallback)((function(){var e=l();o(e)}),[]);return Object(a.useLayoutEffect)((function(){var t=setTimeout((function(){e&&u()}),80);return function(){clearTimeout(t)}}),[e,null==i?void 0:i.formatValue]),Object(a.useLayoutEffect)((function(){e&&u()}),[e]),r}bye=function(e,t,n,r){for(var o,i=r>1?void 0:r?yye(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&mye(t,n,i),i}([Ys()],bye);var kye=function(e){return e.laketable="text/laketable",e.text="text/plain",e.html="text/html",e}(kye||{});function Cye(e){var t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.clip="rect(0, 0, 0, 0)",document.body.appendChild(t),t.innerHTML=e;var n=document.createRange(),r=window.getSelection(),o=t.querySelector("table");if(!o||!r)return!1;n.selectNodeContents(o),r.removeAllRanges(),r.addRange(n);var i=!1;try{if(!(i=document.execCommand("copy")))throw"copy command was unsuccessful"}catch(e){throw new Error("unable to copy using execCommand: ",{cause:e})}finally{t.remove(),r.removeAllRanges()}return i}function Eye(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Oye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oye(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Oye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sye=function(){function e(){Ub(this,e)}return Wb(e,null,[{key:"_setDataToInnerCache",value:function(t){e._innerCache.push(t)}},{key:"_getDataFromInnerCache",value:function(){return e._innerCache[e._innerCache.length-1]}},{key:"getFilesFromClipBoard",value:function(e){var t=e&&(e.dataTransfer||e.clipboardData);if(!t)return null;var n=t.getData(kye.text),r=[];try{t.items&&t.items.length>0?r=Array.from(t.items).map((function(e){var t="file"===e.kind?e.getAsFile():null;return null!==t&&(t.type&&t.type.indexOf("image/png")>-1&&!t.lastModified&&(t=new File([t],"image.png",{type:t.type})),t.ext=n.split(".").pop()),t})).filter((function(e){return e})):t.files&&t.files.length>0&&(r=Array.from(t.files))}catch{t.files&&t.files.length>0&&(r=Array.from(t.files))}return r}},{key:"getClipboardData",value:(t=mC(X_.mark((function t(n,r,o){var i,a;return X_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==o||!o.disableClipboardApi){t.next=5;break}if(i=e._getDataFromInnerCache()){t.next=4;break}return t.abrupt("return",null);case 4:return t.abrupt("return",i[n]);case 5:if(!r){t.next=9;break}if(!(a=e.getClipboardDataFromClipboardEvent(r,n))){t.next=9;break}return t.abrupt("return",a);case 9:return t.next=11,e.getClipboardDataFromClipboardApi(n);case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"getClipboardDataFromClipboardEvent",value:function(e,t){var n,r=e&&(e.dataTransfer||e.clipboardData);return r?null==(n=r.getData)?void 0:n.call(r,t):null}},{key:"getClipboardDataFromClipboardApi",value:function(){var t=mC(X_.mark((function t(n){var r,o,i,a,l,u,c,s,d,f;return X_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(r=navigator.clipboard)&&r.read){t.next=3;break}return e.notSupportClipboardApiToast(),t.abrupt("return",null);case 3:return t.prev=3,t.next=6,navigator.clipboard.read();case 6:o=t.sent,i=Eye(o),t.prev=8,i.s();case 10:if((a=i.n()).done){t.next=37;break}l=a.value,u=Eye(l.types),t.prev=13,u.s();case 15:if((c=u.n()).done){t.next=27;break}if((s=c.value)!==n){t.next=25;break}return t.next=20,l.getType(s);case 20:return d=t.sent.text(),t.next=23,d;case 23:return f=t.sent,t.abrupt("return",f);case 25:t.next=15;break;case 27:t.next=32;break;case 29:t.prev=29,t.t0=t.catch(13),u.e(t.t0);case 32:return t.prev=32,u.f(),t.finish(32);case 35:t.next=10;break;case 37:t.next=42;break;case 39:t.prev=39,t.t1=t.catch(8),i.e(t.t1);case 42:return t.prev=42,i.f(),t.finish(42);case 45:t.next=50;break;case 47:t.prev=47,t.t2=t.catch(3),console.error("getClipboardDataFromClipboardApi err",t.t2);case 50:return t.abrupt("return",null);case 51:case"end":return t.stop()}}),t,null,[[3,47],[8,39,42,45],[13,29,32,35]])})));return function(e){return t.apply(this,arguments)}}()},{key:"writeToClipboardData",value:function(){var t=mC(X_.mark((function t(n,r,o){var i,a;return X_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==o||!o.disableClipboardApi){t.next=3;break}return e._setDataToInnerCache(n),t.abrupt("return");case 3:if(null==r||!r.setData){t.next=8;break}return null!=n.laketable&&r.setData(kye.laketable,n.laketable),null!=n.html&&r.setData(kye.html,n.html),null!=n.text&&r.setData(kye.text,n.text),t.abrupt("return");case 8:if(!n.html){t.next=21;break}return Cye(n.html),t.prev=10,i=new Blob([n.html],{type:kye.html}),a=new ClipboardItem($b({},kye.html,i)),t.next=15,navigator.clipboard.write([a]);case 15:t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(10),console.error("writeToClipboardDataByClipboardApi err",t.t0),t.abrupt("return");case 21:case"end":return t.stop()}}),t,null,[[10,17]])})));return function(e,n,r){return t.apply(this,arguments)}}()}]);var t}();Sye._innerCache=[],Sye.notSupportClipboardApiToast=Rl((function(){g.a.error(uw("当前浏览器不支持访问剪贴板数据，建议您使用 Chrome 浏览器访问"))}),100);var xye=Sye,jye=Ts.defineToken("ViewerGridPluginRecordContribution"),Iye=Ts.defineToken("ViewerGridPluginStatisticsContribution"),Rye=Ts.defineToken("ViewerGridPluginAddFieldContribution"),Aye=Ts.defineToken("ViewerGridPluginAddRecordContribution"),Dye=Object.defineProperty,Pye=Object.getOwnPropertyDescriptor,Mye=function(e,t,n,r){for(var o,i=r>1?void 0:r?Pye(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Dye(t,n,i),i},Tye=function(){return Wb((function e(){var t=this;Ub(this,e),this.UNGROUP_KEY="ungroup",this.Record=null,this.Statistics=null,this.AddField=null,this.AddRecord=null,this._getRecordComponent=function(){var e,n,r=t.viewerGridPluginRecordProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getRecordComponent)?void 0:n.call(e):null},this._getStatisticsComponent=function(){var e,n,r=t.viewerGridPluginStatisticsProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getStatisticsComponent)?void 0:n.call(e):null},this._getAddFieldComponent=function(){var e,n,r=t.viewerGridPluginAddFieldProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getAddFieldComponent)?void 0:n.call(e):null},this._getAddRecordComponent=function(){var e,n,r=t.viewerGridPluginAddRecordProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getAddRecordComponent)?void 0:n.call(e):null}}),[{key:"init",value:function(){this.Record=this._getRecordComponent(),this.Statistics=this._getStatisticsComponent(),this.AddField=this._getAddFieldComponent(),this.AddRecord=this._getAddRecordComponent()}}])}();function Fye(e,t,n){return t=P_(t),D_(e,Nye()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Nye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Nye=function(){return!!e})()}Mye([bd(jye)],Tye.prototype,"viewerGridPluginRecordProvider",2),Mye([bd(Iye)],Tye.prototype,"viewerGridPluginStatisticsProvider",2),Mye([bd(Rye)],Tye.prototype,"viewerGridPluginAddFieldProvider",2),Mye([bd(Aye)],Tye.prototype,"viewerGridPluginAddRecordProvider",2),Tye=Mye([Ys()],Tye);var Vye=Object.defineProperty,Lye=Object.getOwnPropertyDescriptor,Bye=function(e,t,n,r){for(var o,i=r>1?void 0:r?Lye(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Vye(t,n,i),i},$ye=function(e){function t(){var e;return Ub(this,t),(e=Fye(this,t,arguments))._onResizeStart=e._register(new ck),e.onResizeStart=e._onResizeStart.event,e._onResize=e._register(new ck),e.onResize=e._onResize.event,e._onResizeEnd=e._register(new ck),e.onResizeEnd=e._onResizeEnd.event,e._indexColWidth=80,e._minColWidth=80,e._maxColWidth=800,e._defaultColWidth=180,e._scrollStep=10,e._scrollThreshold=100,e._groupRowGap=14,e._rootLeft=0,e._rootRight=0,e._scrollLeft=0,e._field=null,e._index=-1,e._startW=0,e._minW=e._indexColWidth+e._minColWidth,e._maxW=Number.MAX_SAFE_INTEGER,e._stickyPaneWidth=0,e}return F_(t,e),Wb(t,[{key:"indexColWidth",get:function(){return this._indexColWidth}},{key:"defaultColWidth",get:function(){return this._defaultColWidth}},{key:"groupRowGap",get:function(){return this._groupRowGap}},{key:"stickyColNum",get:function(){return this._configuration.getValue("viewerGrid.stickyColNum")}},{key:"getStickyPaneWidth",value:function(e){return this._getColTotalWidth(e,this.stickyColNum)+this._indexColWidth}},{key:"_getColTotalWidth",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return E_(e,(function(e){return e.get("size")||t._defaultColWidth})).slice(0,n).reduce((function(e,t){return e+t}),0)}},{key:"emitResizeStart",value:function(e,t,n){var r,o=t.get(n),i=null==(r=o.get("field"))?void 0:r.get("type"),a=this._renderContext.$root.getBoundingClientRect();this._field=o,this._index=n,this._startW=this._getColTotalWidth(t,n+1)+this._indexColWidth,this._minW=this._getColTotalWidth(t,n)+this._indexColWidth+([bC.RATE,bC.PROGRESS].includes(i)?134:this._minColWidth),this._maxW=this._minW-this._minColWidth+this._maxColWidth,this._stickyPaneWidth=this.getStickyPaneWidth(t),this._rootLeft=a.left,this._rootRight=a.right,this._$scroller=this._renderContext.$root.querySelector('div[data-virtuoso-scroller="true"]'),this._scrollLeft=this._$scroller.scrollLeft,document.body.style.cursor="col-resize",this._onResizeStart.emit({field:this._field,x:e.clientX-this._rootLeft})}},{key:"emitResizing",value:function(e){if(this._index<this.stickyColNum){var t=e.clientX-this._rootLeft,n=this._minW,r=this._maxW;t>=n&&t<=r&&t>0&&this._onResize.emit({field:this._field,x:t})}else{var o=e.clientX-this._rootLeft,i=this._minW-this._scrollLeft,a=this._maxW-this._scrollLeft;o>=i&&o<a&&this._rootRight-this._rootLeft-o<=this._scrollThreshold&&(this._scrollLeft+=this._scrollStep,this._$scroller.scrollLeft+=this._scrollStep),this._scrollLeft>0&&o<this._stickyPaneWidth+this._scrollThreshold&&i<this._stickyPaneWidth&&(this._scrollLeft-=this._scrollStep,this._$scroller.scrollLeft-=this._scrollStep),o>=i&&o<=a&&o>0&&this._onResize.emit({field:this._field,x:o})}}},{key:"emitResizeEnd",value:function(e){var t,n,r;this._onResizeEnd.emit({field:this._field,x:e.clientX-this._rootLeft});var o=this._index<this.stickyColNum,i=e.clientX-this._rootLeft+(o?0:this._scrollLeft),a=Math.max(i,this._minW)-this._startW,l=(null==(t=this._field)?void 0:t.get("size"))||this._defaultColWidth,u=Math.max(l+a,this._minColWidth);this._commandService.execCommand("changeColWidth",{viewId:null==(n=this._field)?void 0:n.get("view_uuid"),fieldId:null==(r=this._field)?void 0:r.get("field_uuid"),size:Math.min(u,this._maxColWidth)}),this._reset()}},{key:"_reset",value:function(){this._startW=0,this._minW=this._indexColWidth+this._minColWidth,this._maxW=Number.MAX_SAFE_INTEGER,this._stickyPaneWidth=0,this._field=null,this._index=-1,this._rootLeft=0,this._rootRight=0,this._scrollLeft=0,document.body.style.cursor="default"}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);Bye([Xs(cie)],$ye.prototype,"_renderContext",2),Bye([Xs(uA)],$ye.prototype,"_commandService",2),Bye([Xs(R_)],$ye.prototype,"_configuration",2),Bye([Vs()],$ye.prototype,"destroy",1),$ye=Bye([Ys()],$ye);var zye=Object.defineProperty,Uye=Object.getOwnPropertyDescriptor,Hye=function(e,t,n,r){for(var o,i=r>1?void 0:r?Uye(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zye(t,n,i),i},qye=function(){return Wb((function e(){Ub(this,e),this._recordHeightMap=$b($b($b({},"low",36),"middle",58),"high",146)}),[{key:"getRowHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"low";return this._recordHeightMap[e]||this._recordHeightMap.low}},{key:"rowHeightSize",get:function(){var e=this._readService.getViewConfig().get("record_height");return this._recordHeightMap[e]}}])}();function Wye(e,t,n){return t=P_(t),D_(e,Gye()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Gye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Gye=function(){return!!e})()}Hye([Xs(MI)],qye.prototype,"_readService",2),qye=Hye([Ys()],qye);var Kye=Object.defineProperty,Yye=Object.getOwnPropertyDescriptor,Xye=function(e,t,n,r){for(var o,i=r>1?void 0:r?Yye(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Kye(t,n,i),i},Jye=function(e){function t(){var e;return Ub(this,t),(e=Wye(this,t,arguments))._virtuosoRef=null,e._scroller=null,e._timer=void 0,e._onScroll=e._register(new ck),e.onScroll=e._onScroll.event,e.scrollChangedVersion=null,e._setScrollChangedVersion=Rl((function(){e.scrollChangedVersion=fw()}),60),e.emitScrollEvent=function(t){e._setScrollChangedVersion(),e._onScroll.emit(t)},e}return F_(t,e),Wb(t,[{key:"virtuosoRef",get:function(){return this._virtuosoRef}},{key:"scroller",get:function(){if(!this._scroller){var e=this.renderContext.$root.querySelector('div[data-virtuoso-scroller="true"]');e&&(this._scroller=e)}return this._scroller}},{key:"scrollHeight",get:function(){var e;return(null==(e=this.scroller)?void 0:e.scrollHeight)||0}},{key:"viewTotalHeight",get:function(){return this.scrollHeight}},{key:"destroy",value:function(){clearTimeout(this._timer),this._virtuosoRef=null,this._scroller=null}},{key:"setVirtuosoRef",value:function(e){this._virtuosoRef=e}},{key:"isScrolling",value:function(e){var t,n=this;e?(clearTimeout(this._timer),null==(t=this._scroller)||t.setAttribute("data-scrolling","true")):this._timer=setTimeout((function(){var e;null==(e=n._scroller)||e.setAttribute("data-scrolling","false")}),600)}},{key:"scrollIntoView",value:function(e){var t,n;if(!this._virtuosoRef)return null==(t=e.done)?void 0:t.call(e);null==(n=this._virtuosoRef)||n.scrollIntoView(e)}},{key:"scrollTo",value:function(e){var t,n;if(!this._virtuosoRef)return null==(t=e.done)?void 0:t.call(e);null==(n=this._virtuosoRef)||n.scrollTo(e)}},{key:"horizontalScroll",value:function(e,t){var n=this._readService.getActiveView(),r=t<this._columnControllerService.stickyColNum,o=this._scroller;if(!r&&e&&o&&n){var i=o.getBoundingClientRect(),a=e.getBoundingClientRect(),l=this._readService.getViewFields(n.get("uuid"))||[],u=this._readService.getViewGroup(null==n?void 0:n.get("uuid"))?this._columnControllerService.groupRowGap:0,c=this._columnControllerService.getStickyPaneWidth(l)+u;a.right>i.right&&(o.scrollLeft+=a.right-i.right),a.left<i.left+c&&(o.scrollLeft-=i.left+c-a.left)}}},{key:"mouseMoveScroll",value:function(e,t,n,r,o){var i=this._scroller,a=(null==r?void 0:r.left)||0,l=(null==r?void 0:r.top)||0,u=e.clientX,c=e.clientY,s=100;i&&u+s>=t?i.scrollLeft+=10:i&&u-s<=a+this._columnControllerService.getStickyPaneWidth(o)&&(i.scrollLeft-=10),i&&c-s<=l?i.scrollTop-=10:i&&c+s>=n&&(i.scrollTop+=10)}}])}($_);function Zye(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Qye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qye(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Qye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Xye([Xs(cie)],Jye.prototype,"renderContext",2),Xye([Xs($ye)],Jye.prototype,"_columnControllerService",2),Xye([Xs(MI)],Jye.prototype,"_readService",2),Jye=Xye([Ys()],Jye);var ebe=Object.defineProperty,tbe=Object.getOwnPropertyDescriptor,nbe=function(e,t,n,r){for(var o,i=r>1?void 0:r?tbe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ebe(t,n,i),i},rbe=function(){return Wb((function e(){Ub(this,e),this._rowCoordsByIndex=new Map,this._colCoordsByIndex=new Map,this._scrollUpdatedVersion=""}),[{key:"_viewport",get:function(){return this._renderViewPort.viewport}},{key:"updateCellCoordsInViewPort",value:function(){this._scrollUpdatedVersion&&this._scrollUpdatedVersion===this._scrollService.scrollChangedVersion||(this._scrollUpdatedVersion=this._scrollService.scrollChangedVersion,this._updateRowsLayout(),this._updateColsLayout())}},{key:"getCellIndexesByClientXY",value:function(e,t){if(!this._renderViewPort.isDotInViewPort(e,t))return null;var n=this._getTargetRowIndexByClientY(t);if(lu(n))return null;var r=this._getTargetColIndexByClientX(e);return lu(r)?null:[n,r]}},{key:"_updateRowsLayout",value:function(){this._rowCoordsByIndex.clear();var e=this._renderContext.$root;if(this._viewport){var t=e.querySelectorAll(".lakex-viewer-grid-row-container.normal .lakex-viewer-grid-row[data-row]");if(t){var n,r=Zye(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=Number(o.getAttribute("data-row")),a=o.getBoundingClientRect();a.top<this._viewport.top||a.bottom>this._viewport.bottom||this._rowCoordsByIndex.set(i,{top:a.top,bottom:a.bottom})}}catch(e){r.e(e)}finally{r.f()}}}}},{key:"_updateColsLayout",value:function(){this._colCoordsByIndex.clear();var e=this._renderContext.$root;if(this._viewport){var t=e.querySelectorAll(".lakex-viewer-grid-header-column[data-col-index]");if(t){var n,r=Zye(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=Number(o.getAttribute("data-col-index")),a=o.getBoundingClientRect();a.left<this._viewport.left||a.right>this._viewport.right||this._colCoordsByIndex.set(i,{left:a.left,right:a.right})}}catch(e){r.e(e)}finally{r.f()}}}}},{key:"_getTargetRowIndexByClientY",value:function(e){if(!this._rowCoordsByIndex)return null;for(var t=Vb(this._rowCoordsByIndex.keys()),n=0,r=t.length-1,o=Date.now();n<=r;){if(Date.now()-o>500)return null;var i=Math.floor((n+r)/2),a=t[i],l=this._rowCoordsByIndex.get(a);if(!l){console.warn("_getTargetRowIndexByClientY.get curRowIndex never");break}if(e<l.bottom&&l.top<e)return a;l.bottom<e?n=i+1:e<l.top&&(r=i-1)}return null}},{key:"_getTargetColIndexByClientX",value:function(e){if(!this._colCoordsByIndex)return null;for(var t=Vb(this._colCoordsByIndex.keys()),n=0,r=t.length-1,o=Date.now();n<=r;){if(Date.now()-o>500)return null;var i=Math.floor((n+r)/2),a=t[i],l=this._colCoordsByIndex.get(a);if(!l){console.warn("_getTargetColIndexByClientX.get curRowIndex never");break}if(e<l.right&&l.left<e)return a;l.left<e?n=i+1:e<l.right&&(r=i-1)}return null}}])}();nbe([Xs(cie)],rbe.prototype,"_renderContext",2),nbe([Xs(pie)],rbe.prototype,"_renderViewPort",2),nbe([Xs(Jye)],rbe.prototype,"_scrollService",2),rbe=nbe([Ys()],rbe);var obe=function(e){return e.COPY="copy",e.CUT="cut",e.NULL="null",e}(obe||{}),ibe=function(){return Wb((function e(){Ub(this,e)}),[{key:"serialize",value:function(e){if(!e)return"";var t=e.cells,n=[],r=t.length,o=t[0].length;return KY(0,r,(function(e){var r=[];KY(0,o,(function(n){var o,i=t[e][n];o=i?i.formatValue:"",r.push(o)})),n.push(r.join("\t"))})),n.join("\n")}},{key:"deserialize",value:function(e){var t=[],n={cells:t};return e?(e.split("\n").forEach((function(e,n){var r=e.split("\t");t[n]=[],r.forEach((function(e,r){var o={fieldType:bC.TEXT,value:e};t[n][r]=o}))})),n):n}}])}(),abe=function(){return Wb((function e(){Ub(this,e)}),[{key:"serialize",value:function(e){return e?this._standardTableValueToTableHTML(e):""}},{key:"deserialize",value:function(e){return this._tableHTMLToStandardTableValue(e)}},{key:"_getTrHTML",value:function(e){var t,n=e.cells,r=e.fields,o=e.rowHeight,i=[];i.length=n.length;var a=n.length;return KY(0,(null==(t=n[0])?void 0:t.length)||0,(function(e){var t=null==r?void 0:r[e];KY(0,a,(function(r){var a;i[r]=i[r]||'<tr style="height: '.concat(o,'px">');var l=n[r][e],u="",c="";if(l&&(l.value||[bC.CHECKBOX,bC.SELECT,bC.MULTI_SELECT].includes(null==t?void 0:t.type))){switch(null==t?void 0:t.type){case bC.SELECT:case bC.MULTI_SELECT:var s=l.formatValue.split(","),d=t.options||new g_;u=' data-value="'.concat(encodeURIComponent(JSON.stringify({class:"select",value:s,options:d.map((function(e){return{id:e.get("uuid"),value:e.get("name"),color:e.get("color")}})),color:!(null==(a=d.get(0))||!a.get("color")),multi:t.type===bC.MULTI_SELECT})),'"'),c=l.formatValue;break;case bC.MENTION:u=' data-value="'.concat(encodeURIComponent(JSON.stringify({class:t.type,value:l.formatValue})),'"'),c=l.formatValue;break;case bC.IMAGE:var f=l.value;c=(null==f?void 0:f.map((function(e){return'<img src="'.concat(e.src,'" height=').concat(t.size," />")})).join(""))||"";break;case bC.LINK:var p=l.value;c=p?'<a href="'.concat(p.src,'">').concat(p.name,"</a>"):"";break;case bC.FILE:var h=l.value;c=h?h.map((function(e){return'<a href="'.concat(e.src,'">').concat(e.name,"</a>")})).join(""):"";break;case bC.CHECKBOX:var v=l.value;c=!0===v?"✅":"🔲",u=' data-value="'.concat(encodeURIComponent(JSON.stringify({class:t.type,value:!0===v})),'"');break;default:c=function(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\t/g,"&nbsp;&nbsp;").replace(/\n/g,"<br>")}(l.formatValue)}i[r]+="<td ".concat(u,">").concat(c,"</td>")}else i[r]+="<td></td>"}))})),KY(0,a,(function(e){i[e]+="</tr>"})),i}},{key:"_standardTableValueToTableHTML",value:function(e){var t=e.startCell,n=e.fields,r=this._getTrHTML(e),o=[];n&&n.forEach((function(e){o.push("<col width=".concat(e.size,">"))}));var i="<colgroup>".concat(o.join(""),"</colgroup>");return"\x3c!--StartFragment--\x3e".concat('<style type="text/css">\x3c!--\n    td {border: 0.5pt solid #ccc;white-space: nowrap;}\n    br {mso-data-placement:same-cell;}\n    .numberstr{mso-number-format:"@";}\n    .perc {mso-number-format:0%;}\n    .curr¥ {mso-number-format:"¥#,##0.00;[red]¥#,##0.00";}\n    .curr$ {mso-number-format:"$#,##0.00;[red]$#,##0.00";}\n    .curr£ {mso-number-format:"£#,##0.00;[red]£#,##0.00";}\n    .curr€ {mso-number-format:"€#,##0.00;[red]€#,##0.00";}\n    --\x3e</style>','<table style="font-size: 12px;" data-startCell="').concat(t.row,":").concat(t.column,'">').concat(i).concat(r.join(""),"</table>\x3c!--EndFragment--\x3e")}},{key:"_tableHTMLToStandardTableValue",value:function(e){for(var t=YX(e),n=t.rowCount,r=t.colCount,o=t.data,i=[],a=0;a<n;){if(i[a]=[],i[a].length=r,o[a])for(var l=0;l<r;){if(o[a][l]){var u=o[a][l],c=this._htmlValueToTableCell(u);i[a][l]=c}l++}a++}return{cells:i}}},{key:"_htmlValueToTableCell",value:function(e){var t={fieldType:bC.TEXT,value:""},n=e.value||"";if(mw(n)||function(e){return hw(e,"Number")}(n)||ru(n))return t.value=n,t;var r=n.class;if("link"===r){var o=n,i={name:o.text,src:o.url,icon:o.icon};t.fieldType=bC.LINK,t.value=i}else if("file"===r){var a=n,l=[{name:a.text,src:a.url}];t.fieldType=bC.IMAGE,t.value=l}else if("image"===r){var u=n,c=[{name:u.name,src:u.originSrc}];t.fieldType=bC.IMAGE,t.value=c}else if("select"===r){var s=n;if(s.multi){var d=s.value;t.fieldType=bC.MULTI_SELECT,t.value=d}else{var f=s.value[0];t.fieldType=bC.SELECT,t.value=f}}return t}}])}(),lbe=function(){return Wb((function e(){Ub(this,e)}),[{key:"serialize",value:function(e){return JSON.stringify(e)}},{key:"deserialize",value:function(e){return JSON.parse(e)}}])}(),ube=Wb((function e(){Ub(this,e)}));ube.html=new abe,ube.text=new ibe,ube.laketable=new lbe;var cbe=Ts.defineToken("ClipboardRegistryToken"),sbe=Ts.defineToken("ClipboardRenderPluginContribution");function dbe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return fbe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fbe(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function fbe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pbe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hbe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pbe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pbe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vbe=Object.defineProperty,gbe=Object.getOwnPropertyDescriptor,mbe=function(e,t,n,r){for(var o,i=r>1?void 0:r?gbe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&vbe(t,n,i),i},ybe=kD.Plugin("clipboard"),bbe=function(){return Wb((function e(){Ub(this,e),this.runningStatus=obe.NULL}),[{key:"_selection",get:function(){var e,t=null==(e=this._selectionService)?void 0:e.getSelection();return dye(t)?t:null}},{key:"copy",value:function(e){g.a.destroy(),this._enable()&&(!this._selection||0===this._selection.rangeCount||(this.runningStatus=obe.COPY,this.setDataToClipboard(e),this._showCopyCutSuccessMessage(),this.runningStatus=obe.NULL))}},{key:"cut",value:function(e){this._enable()&&(this.runningStatus=obe.CUT,this.runningStatus=obe.NULL)}},{key:"_enable",value:function(){var e;return!(this.runningStatus!==obe.NULL||!this._selection)&&(!!window.formulaCopy||!(this._abilityService.isReadonly(EA.TABLE)&&null!=(e=window.appData)&&e.disableDocumentCopy))}},{key:"setDataToClipboard",value:function(e){null==e||e.preventDefault();var t=this.getCopyDataBySelection(),n=e&&(e.dataTransfer||e.clipboardData),r=ube.laketable.serialize(t),o=ube.html.serialize(t),i=ube.text.serialize(t),a=this._configuration.getValue("clipboard.clipboardApi.disable");return xye.writeToClipboardData({laketable:r,html:o,text:i},n,{disableClipboardApi:a}),t}},{key:"_getCopyDataByRange",value:function(e,t,n){for(var r=e.start,o=e.end,i=o.row-r.row+1,a=o.column-r.column+1,l=new Array(i).fill(0).map((function(){return new Array(a).fill(0)})),u=[],c=0;c<a;c++){var s=t.get(c+r.column),d=s.get("field"),f=(null==d?void 0:d.get("uuid"))||"";d&&u.push(hbe(hbe({},d.toJSON()),{},{size:s.get("size")||180}));for(var p=0;p<i;p++){var h=n.get(p+r.row).get("record_uuid"),v=this._readService.getCell(f,h);v&&(l[p][c]=v)}}return{fields:u,cells:l}}},{key:"getCopyDataBySelection",value:function(){var e=this._selection;if(!e)return null;var t,n=[],r=[],o=this._readService.getActiveView(),i=this._readService.getViewFields(null==o?void 0:o.get("uuid"))||[],a=this._readService.getFlatViewRecords(null==o?void 0:o.get("uuid"))||[],l=this._readService.getViewConfig(null==o?void 0:o.get("uuid")),u=dbe(e.ranges);try{for(u.s();!(t=u.n()).done;){var c=t.value,s=this._getCopyDataByRange(c,i,a);r=Eu([].concat(Vb(r),Vb(s.fields)),(function(e,t){return e.uuid===t.uuid})),n=[].concat(Vb(n),Vb(s.cells))}}catch(e){u.e(e)}finally{u.f()}var d={tableId:this._readService.getTable().get("uuid"),fields:r,cells:n,startCell:e.getRangeAt(0).start,rowHeight:this._rowControllerService.getRowHeight(null==l?void 0:l.get("record_height"))};try{var f=this._clipboardRegistry.getCopyMiddlewares();if(f&&f.length>0){var p,h=dbe(f);try{for(h.s();!(p=h.n()).done;){var v=p.value;d=v?v(e,d):d}}catch(e){h.e(e)}finally{h.f()}}}catch(e){ybe("clipboard copy middleware error:",e)}return d}},{key:"_showCopyCutSuccessMessage",value:function(){var e=this._selection,t=null==e?void 0:e.getRangeAt(0),n=null==t?void 0:t.start,r=null==t?void 0:t.end;if(!e||!n||!r)return null;if(this._selectionService.isRowSelection()){var o=this._selectionService.getSelectRowIndexes().length;g.a.success(uw("成功复制 $1 条记录",o))}else{var i=r.row-n.row+1,a=r.column-n.column+1;g.a.success(uw("成功复制 $1 个单元格",i*a))}}}])}();function wbe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wbe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wbe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kbe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Cbe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cbe(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Cbe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mbe([Xs(MI)],bbe.prototype,"_readService",2),mbe([Xs(fye),Ds()],bbe.prototype,"_selectionService",2),mbe([Xs(qye)],bbe.prototype,"_rowControllerService",2),mbe([Xs(R_)],bbe.prototype,"_configuration",2),mbe([Xs(cbe)],bbe.prototype,"_clipboardRegistry",2),mbe([Xs(VA)],bbe.prototype,"_abilityService",2),bbe=mbe([Ys()],bbe);var Ebe=Object.defineProperty,Obe=Object.getOwnPropertyDescriptor,Sbe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Obe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Ebe(t,n,i),i},xbe=kD.Plugin("clipboard"),jbe=function(){return Wb((function e(){Ub(this,e),this._pasteData=null}),[{key:"_selection",get:function(){var e,t=null==(e=this._selectionService)?void 0:e.getSelection();if(dye(t)){var n=t.anchor,r=t.focus,o=r.row-n.row+1,i=r.column-n.column+1;return{startRowIndex:n.row,startColIndex:n.column,rowCount:o,colCount:i}}return null}},{key:"paste",value:(e=mC(X_.mark((function e(t){return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._selection){e.next=2;break}return e.abrupt("return");case 2:return g.a.destroy(),this._asyncPasteIfNeedUpload(t),e.next=6,this._getStdCellValueFromClip(t);case 6:this._pasteData=e.sent,this._process(this._selection,this._pasteData);case 8:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"_getStdCellValueFromClip",value:function(){var e=mC(X_.mark((function e(t){var n,r,o,i,a,l,u,c,s;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null,r=this._configuration.getValue("clipboard.clipboardApi.disable"),o=[{key:kye.laketable,serializer:ube.laketable},{key:kye.html,serializer:ube.html},{key:kye.text,serializer:ube.text}],i=0,a=o;case 4:if(!(i<a.length)){e.next=16;break}return l=a[i],u=l.key,c=l.serializer,e.next=9,xye.getClipboardData(u,t,{disableClipboardApi:r});case 9:if((s=e.sent)&&(n=c.deserialize(s)),!n){e.next=13;break}return e.abrupt("break",16);case 13:i++,e.next=4;break;case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_process",value:function(){var e=mC(X_.mark((function e(t,n){var r,o,i,a,l,u=this;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._enable(t,n)){e.next=2;break}return e.abrupt("return");case 2:return r=n.cells,o=r.length,i=r[0].length,a=o*i,l=g.a.loading(uw("正在处理粘贴内容..."),0),e.abrupt("return",new Promise((function(e){setTimeout((function(){var r,o,i,a,c,s,d,f,p,h,v,m,y=null==(r=u._selectionService)?void 0:r.getSelection(),b=u._commandService.execCommand("pasteUpdateRecords",{selection:t,pasteData:n,colCount:(null==y?void 0:y.columnCount)||1}),w=(null==(i=null==(o=null==b?void 0:b.result)?void 0:o.data)?void 0:i.createRecordIds)||[],_=(null==(c=null==(a=null==b?void 0:b.result)?void 0:a.data)?void 0:c.updateRecordIds)||[];try{var k=u._clipboardRegistry.getPasteMiddlewares();if(k&&k.length>0&&n){var C,E=kbe(k);try{for(E.s();!(C=E.n()).done;){var O=C.value;O&&O(t,n,w,_)}}catch(e){E.e(e)}finally{E.f()}}}catch(e){xbe("clipboard paste middleware error:",e)}if(w.length>0&&y){var S=u._selectionService.createGridSelectionByIndex(y.anchor.row,y.anchor.column,y.rowCount+w.length,y.columnCount);u._selectionService.setSelection(S)}l(),0===(null==(s=null==b?void 0:b.result)?void 0:s.code)?g.a.success(null==(d=null==b?void 0:b.result)?void 0:d.message):null!=(f=null==b?void 0:b.result)&&f.code&&(null==(p=null==b?void 0:b.result)?void 0:p.code)>0?g.a.error(null==(h=null==b?void 0:b.result)?void 0:h.message):-1===(null==(v=null==b?void 0:b.result)?void 0:v.code)&&(console.error('Internal Error After execCommand: "pasteUpdateRecords", '.concat(null==(m=null==b?void 0:b.result)?void 0:m.message)),g.a.error(uw("粘贴失败, 请稍后重试"))),e(null==b?void 0:b.result)}),a>100?100:0)})));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_enable",value:function(e,t){var n,r;if(!t||!e)return!1;var o=e.rowCount,i=e.startRowIndex,a=e.startColIndex;if(i+o>this._readService.maxRecordCount)return g.a.error(uw("数据表已达最大行数限制")),!1;var l=(null==(n=this._readService.getAllViewFields())?void 0:n.length)||0;return!(a+((null==(r=t.fields)?void 0:r.length)||0)>l)||(g.a.error(uw("粘贴失败，没有足够的列")),!1)}},{key:"_asyncPasteIfNeedUpload",value:function(){var e=mC(X_.mark((function e(t){var n,r,o,i,a,l,u=this;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._selection&&t){e.next=2;break}return e.abrupt("return");case 2:if(n=xye.getFilesFromClipBoard(t),r=null==n?void 0:n[0]){e.next=6;break}return e.abrupt("return");case 6:if((o=this._readService.getCellByIndexes(this._selection.startRowIndex,this._selection.startColIndex))&&[bC.IMAGE,bC.FILE].includes(o.fieldType)){e.next=10;break}return console.warn("target field type is not support for file"),e.abrupt("return");case 10:this._uploadService.getAccept(null==o?void 0:o.fieldType),i=(null==o?void 0:o.fieldType)===bC.IMAGE?this._uploadService.uploadImage(r):this._uploadService.uploadFile(r),a=_be(_be({},this._selection),{},{rowCount:1,colCount:1}),l=i.onDidChange(function(){var e=mC(X_.mark((function e(t){var n,r,i,c;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.status!==bue.ERROR){e.next=3;break}return g.a.error(t.message||uw("上传失败，请重试")),e.abrupt("return");case 3:if(t.status!==bue.TIMEOUT){e.next=6;break}return g.a.error(t.message||uw("上传超时，请重试")),e.abrupt("return");case 6:if(t.status!==bue.SUCCESS){e.next=13;break}return r=t.file,i=_be(_be({},o),{},{value:null==(n=o.value||[])?void 0:n.concat([r])}),c={cells:[[i]]},e.next=12,u._process(a,c);case 12:l.destroy();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]);var e}();function Ibe(e,t,n){return t=P_(t),D_(e,Rbe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Rbe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Rbe=function(){return!!e})()}Sbe([Xs(MI)],jbe.prototype,"_readService",2),Sbe([Xs(fye),Ds()],jbe.prototype,"_selectionService",2),Sbe([Xs(uA)],jbe.prototype,"_commandService",2),Sbe([Xs(R_)],jbe.prototype,"_configuration",2),Sbe([Xs(Hue)],jbe.prototype,"_uploadService",2),Sbe([Xs(cbe)],jbe.prototype,"_clipboardRegistry",2),jbe=Sbe([Ys()],jbe);var Abe=Object.defineProperty,Dbe=Object.getOwnPropertyDescriptor,Pbe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Dbe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Abe(t,n,i),i},Mbe=function(e){function t(){return Ub(this,t),Ibe(this,t,arguments)}return F_(t,e),Wb(t,[{key:"getCopyMiddlewares",value:function(){return(this.clipboardProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerCopyMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}},{key:"getPasteMiddlewares",value:function(){return(this.clipboardProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerPasteMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}}])}($_);Pbe([bd(sbe)],Mbe.prototype,"clipboardProvider",2),Mbe=Pbe([Ys({token:cbe})],Mbe);var Tbe=Object.defineProperty,Fbe=Object.getOwnPropertyDescriptor,Nbe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Fbe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Tbe(t,n,i),i},Vbe=function(){return Wb((function e(){Ub(this,e),this._onCopy=null,this._onCut=null,this._onPaste=null}),[{key:"_hasSelection",value:function(){var e;return null==(e=this._selectionService)?void 0:e.hasSelection()}},{key:"_isGridView",get:function(){return this._readService.getActiveViewType()===BC.GRID}},{key:"init",value:function(){}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"copy",hotkey:"copy",name:"copy",enableOnInput:!1,preventDefault:!0,isEnable:function(){return t._hasSelection()&&t._isGridView},onHotKey:function(e){t._copyCutService.copy(e)}}),e.registerItem({id:"cut",hotkey:"cut",name:"cut",preventDefault:!0,enableOnInput:!1,isEnable:function(){return!t._abilityService.isReadonly(EA.TABLE)&&t._hasSelection()&&t._isGridView},onHotKey:function(e){t._copyCutService.cut(e)}}),e.registerItem({id:"paste",hotkey:"paste",name:"paste",preventDefault:!0,enableOnInput:!1,isEnable:function(){var e;return!t._abilityService.isReadonly(EA.TABLE)&&t._hasSelection()&&t._isGridView&&!(null==(e=document.activeElement)||!e.closest(".lakex-grid-cell-editor-keyboard-input"))},onHotKey:function(e){t._pasteService.paste(e)}})}},{key:"destroy",value:function(){var e,t,n;null==(e=this._onCopy)||e.destroy(),null==(t=this._onCut)||t.destroy(),null==(n=this._onPaste)||n.destroy()}}],[{key:"pluginModule",value:function(){return pd().register(this).contribution(sbe).register(Mbe).register(bbe).register(jbe)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"clipboard",type:"object",title:"粘贴板",properties:{"clipboardApi.disable":{type:"boolean",description:"不使用 clipboard api"}}}),e.registerDefaultValue({"clipboard.clipboardApi.disable":!1})}}])}();Vbe.pluginName="render-clipboard",Nbe([Xs(MI)],Vbe.prototype,"_readService",2),Nbe([Xs(VA)],Vbe.prototype,"_abilityService",2),Nbe([Xs(bbe)],Vbe.prototype,"_copyCutService",2),Nbe([Xs(jbe)],Vbe.prototype,"_pasteService",2),Nbe([Xs(fye),Ds()],Vbe.prototype,"_selectionService",2),Vbe=Nbe([Ys({contrib:[Qoe,Toe]})],Vbe);var Lbe=Ts.defineToken("RefreshRenderPluginContribution");function Bbe(e,t){return e===t||e!=e&&t!=t}function $be(e,t){for(var n=e.length;n--;)if(Bbe(e[n][0],t))return n;return-1}var zbe=Array.prototype.splice;function Ube(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ube.prototype.clear=function(){this.__data__=[],this.size=0},Ube.prototype.delete=function(e){var t=this.__data__,n=$be(t,e);return!(n<0)&&(n==t.length-1?t.pop():zbe.call(t,n,1),--this.size,!0)},Ube.prototype.get=function(e){var t=this.__data__,n=$be(t,e);return n<0?void 0:t[n][1]},Ube.prototype.has=function(e){return $be(this.__data__,e)>-1},Ube.prototype.set=function(e,t){var n=this.__data__,r=$be(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const Hbe=typeof Rn<"u"?Rn:typeof self<"u"?self:typeof window<"u"?window:{};var qbe="object"==Lb(Hbe)&&Hbe&&Hbe.Object===Object&&Hbe,Wbe="object"==(typeof self>"u"?"undefined":Lb(self))&&self&&self.Object===Object&&self,Gbe=qbe||Wbe||Function("return this")(),Kbe=Gbe.Symbol,Ybe=Object.prototype,Xbe=Ybe.hasOwnProperty,Jbe=Ybe.toString,Zbe=Kbe?Kbe.toStringTag:void 0;var Qbe=Object.prototype.toString;var ewe="[object Null]",twe="[object Undefined]",nwe=Kbe?Kbe.toStringTag:void 0;function rwe(e){return null==e?void 0===e?twe:ewe:nwe&&nwe in Object(e)?function(e){var t=Xbe.call(e,Zbe),n=e[Zbe];try{e[Zbe]=void 0;var r=!0}catch{}var o=Jbe.call(e);return r&&(t?e[Zbe]=n:delete e[Zbe]),o}(e):function(e){return Qbe.call(e)}(e)}function owe(e){var t=Lb(e);return null!=e&&("object"==t||"function"==t)}var iwe="[object AsyncFunction]",awe="[object Function]",lwe="[object GeneratorFunction]",uwe="[object Proxy]";function cwe(e){if(!owe(e))return!1;var t=rwe(e);return t==awe||t==lwe||t==iwe||t==uwe}var swe=Gbe["__core-js_shared__"],dwe=function(){var e=/[^.]+$/.exec(swe&&swe.keys&&swe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var fwe=Function.prototype.toString;function pwe(e){if(null!=e){try{return fwe.call(e)}catch{}try{return e+""}catch{}}return""}var hwe=/^\[object .+?Constructor\]$/,vwe=Function.prototype,gwe=Object.prototype,mwe=vwe.toString,ywe=gwe.hasOwnProperty,bwe=RegExp("^"+mwe.call(ywe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wwe(e){return!(!owe(e)||function(e){return!!dwe&&dwe in e}(e))&&(cwe(e)?bwe:hwe).test(pwe(e))}function _we(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return wwe(n)?n:void 0}var kwe=_we(Gbe,"Map"),Cwe=_we(Object,"create");var Ewe=Object.prototype.hasOwnProperty;var Owe=Object.prototype.hasOwnProperty;function Swe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function xwe(e,t){var n=e.__data__;return function(e){var t=Lb(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function jwe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Swe.prototype.clear=function(){this.__data__=Cwe?Cwe(null):{},this.size=0},Swe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Swe.prototype.get=function(e){var t=this.__data__;if(Cwe){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Ewe.call(t,e)?t[e]:void 0},Swe.prototype.has=function(e){var t=this.__data__;return Cwe?void 0!==t[e]:Owe.call(t,e)},Swe.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Cwe&&void 0===t?"__lodash_hash_undefined__":t,this},jwe.prototype.clear=function(){this.size=0,this.__data__={hash:new Swe,map:new(kwe||Ube),string:new Swe}},jwe.prototype.delete=function(e){var t=xwe(this,e).delete(e);return this.size-=t?1:0,t},jwe.prototype.get=function(e){return xwe(this,e).get(e)},jwe.prototype.has=function(e){return xwe(this,e).has(e)},jwe.prototype.set=function(e,t){var n=xwe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Iwe(e){var t=this.__data__=new Ube(e);this.size=t.size}Iwe.prototype.clear=function(){this.__data__=new Ube,this.size=0},Iwe.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Iwe.prototype.get=function(e){return this.__data__.get(e)},Iwe.prototype.has=function(e){return this.__data__.has(e)},Iwe.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ube){var r=n.__data__;if(!kwe||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new jwe(r)}return n.set(e,t),this.size=n.size,this};function Rwe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new jwe;++t<n;)this.add(e[t])}function Awe(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Dwe(e,t){return e.has(t)}Rwe.prototype.add=Rwe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Rwe.prototype.has=function(e){return this.__data__.has(e)};var Pwe=1,Mwe=2;function Twe(e,t,n,r,o,i){var a=n&Pwe,l=e.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;var c=i.get(e),s=i.get(t);if(c&&s)return c==t&&s==e;var d=-1,f=!0,p=n&Mwe?new Rwe:void 0;for(i.set(e,t),i.set(t,e);++d<l;){var h=e[d],v=t[d];if(r)var g=a?r(v,h,d,t,e,i):r(h,v,d,e,t,i);if(void 0!==g){if(g)continue;f=!1;break}if(p){if(!Awe(t,(function(e,t){if(!Dwe(p,t)&&(h===e||o(h,e,n,r,i)))return p.push(t)}))){f=!1;break}}else if(h!==v&&!o(h,v,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f}var Fwe=Gbe.Uint8Array;function Nwe(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Vwe(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Lwe=1,Bwe=2,$we="[object Boolean]",zwe="[object Date]",Uwe="[object Error]",Hwe="[object Map]",qwe="[object Number]",Wwe="[object RegExp]",Gwe="[object Set]",Kwe="[object String]",Ywe="[object Symbol]",Xwe="[object ArrayBuffer]",Jwe="[object DataView]",Zwe=Kbe?Kbe.prototype:void 0,Qwe=Zwe?Zwe.valueOf:void 0;var e_e=Array.isArray;var t_e=Object.prototype.propertyIsEnumerable,n_e=Object.getOwnPropertySymbols,r_e=n_e?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}(n_e(e),(function(t){return t_e.call(e,t)})))}:function(){return[]};function o_e(e){return null!=e&&"object"==Lb(e)}function i_e(e){return o_e(e)&&"[object Arguments]"==rwe(e)}var a_e=Object.prototype,l_e=a_e.hasOwnProperty,u_e=a_e.propertyIsEnumerable,c_e=i_e(function(){return arguments}())?i_e:function(e){return o_e(e)&&l_e.call(e,"callee")&&!u_e.call(e,"callee")};var s_e="object"==(typeof exports>"u"?"undefined":Lb(exports))&&exports&&!exports.nodeType&&exports,d_e=s_e&&"object"==(typeof r>"u"?"undefined":Lb(r))&&r&&!r.nodeType&&r,f_e=d_e&&d_e.exports===s_e?Gbe.Buffer:void 0,p_e=(f_e?f_e.isBuffer:void 0)||function(){return!1},h_e=9007199254740991,v_e=/^(?:0|[1-9]\d*)$/;function g_e(e,t){var n=Lb(e);return!!(t=null!=t?t:h_e)&&("number"==n||"symbol"!=n&&v_e.test(e))&&e>-1&&e%1==0&&e<t}var m_e=9007199254740991;function y_e(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=m_e}var b_e={};b_e["[object Float32Array]"]=b_e["[object Float64Array]"]=b_e["[object Int8Array]"]=b_e["[object Int16Array]"]=b_e["[object Int32Array]"]=b_e["[object Uint8Array]"]=b_e["[object Uint8ClampedArray]"]=b_e["[object Uint16Array]"]=b_e["[object Uint32Array]"]=!0,b_e["[object Arguments]"]=b_e["[object Array]"]=b_e["[object ArrayBuffer]"]=b_e["[object Boolean]"]=b_e["[object DataView]"]=b_e["[object Date]"]=b_e["[object Error]"]=b_e["[object Function]"]=b_e["[object Map]"]=b_e["[object Number]"]=b_e["[object Object]"]=b_e["[object RegExp]"]=b_e["[object Set]"]=b_e["[object String]"]=b_e["[object WeakMap]"]=!1;var w_e="object"==(typeof exports>"u"?"undefined":Lb(exports))&&exports&&!exports.nodeType&&exports,__e=w_e&&"object"==(typeof r>"u"?"undefined":Lb(r))&&r&&!r.nodeType&&r,k_e=__e&&__e.exports===w_e&&qbe.process,C_e=function(){try{return __e&&__e.require&&__e.require("util").types||k_e&&k_e.binding&&k_e.binding("util")}catch{}}(),E_e=C_e&&C_e.isTypedArray,O_e=E_e?function(e){return function(t){return e(t)}}(E_e):function(e){return o_e(e)&&y_e(e.length)&&!!b_e[rwe(e)]},S_e=Object.prototype.hasOwnProperty;function x_e(e,t){var n=e_e(e),r=!n&&c_e(e),o=!n&&!r&&p_e(e),i=!n&&!r&&!o&&O_e(e),a=n||r||o||i,l=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=l.length;for(var c in e)S_e.call(e,c)&&(!a||!("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||g_e(c,u)))&&l.push(c);return l}var j_e=Object.prototype;var I_e=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),R_e=Object.prototype.hasOwnProperty;function A_e(e){if(!function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||j_e)}(e))return I_e(e);var t=[];for(var n in Object(e))R_e.call(e,n)&&"constructor"!=n&&t.push(n);return t}function D_e(e){return function(e){return null!=e&&y_e(e.length)&&!cwe(e)}(e)?x_e(e):A_e(e)}function P_e(e){return function(e,t,n){var r=t(e);return e_e(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,D_e,r_e)}var M_e=1,T_e=Object.prototype.hasOwnProperty;var F_e=_we(Gbe,"DataView"),N_e=_we(Gbe,"Promise"),V_e=_we(Gbe,"Set"),L_e=_we(Gbe,"WeakMap"),B_e="[object Map]",$_e="[object Promise]",z_e="[object Set]",U_e="[object WeakMap]",H_e="[object DataView]",q_e=pwe(F_e),W_e=pwe(kwe),G_e=pwe(N_e),K_e=pwe(V_e),Y_e=pwe(L_e),X_e=rwe;(F_e&&X_e(new F_e(new ArrayBuffer(1)))!=H_e||kwe&&X_e(new kwe)!=B_e||N_e&&X_e(N_e.resolve())!=$_e||V_e&&X_e(new V_e)!=z_e||L_e&&X_e(new L_e)!=U_e)&&(X_e=function(e){var t=rwe(e),n="[object Object]"==t?e.constructor:void 0,r=n?pwe(n):"";if(r)switch(r){case q_e:return H_e;case W_e:return B_e;case G_e:return $_e;case K_e:return z_e;case Y_e:return U_e}return t});var J_e=1,Z_e="[object Arguments]",Q_e="[object Array]",eke="[object Object]",tke=Object.prototype.hasOwnProperty;function nke(e,t,n,r,o,i){var a=e_e(e),l=e_e(t),u=a?Q_e:X_e(e),c=l?Q_e:X_e(t),s=(u=u==Z_e?eke:u)==eke,d=(c=c==Z_e?eke:c)==eke,f=u==c;if(f&&p_e(e)){if(!p_e(t))return!1;a=!0,s=!1}if(f&&!s)return i||(i=new Iwe),a||O_e(e)?Twe(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case Jwe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xwe:return!(e.byteLength!=t.byteLength||!i(new Fwe(e),new Fwe(t)));case $we:case zwe:case qwe:return Bbe(+e,+t);case Uwe:return e.name==t.name&&e.message==t.message;case Wwe:case Kwe:return e==t+"";case Hwe:var l=Nwe;case Gwe:var u=r&Lwe;if(l||(l=Vwe),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=Bwe,a.set(e,t);var s=Twe(l(e),l(t),r,o,i,a);return a.delete(e),s;case Ywe:if(Qwe)return Qwe.call(e)==Qwe.call(t)}return!1}(e,t,u,n,r,o,i);if(!(n&J_e)){var p=s&&tke.call(e,"__wrapped__"),h=d&&tke.call(t,"__wrapped__");if(p||h){var v=p?e.value():e,g=h?t.value():t;return i||(i=new Iwe),o(v,g,n,r,i)}}return!!f&&(i||(i=new Iwe),function(e,t,n,r,o,i){var a=n&M_e,l=P_e(e),u=l.length;if(u!=P_e(t).length&&!a)return!1;for(var c=u;c--;){var s=l[c];if(!(a?s in t:T_e.call(t,s)))return!1}var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var p=!0;i.set(e,t),i.set(t,e);for(var h=a;++c<u;){var v=e[s=l[c]],g=t[s];if(r)var m=a?r(g,v,s,t,e,i):r(v,g,s,e,t,i);if(!(void 0===m?v===g||o(v,g,n,r,i):m)){p=!1;break}h||(h="constructor"==s)}if(p&&!h){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(p=!1)}return i.delete(e),i.delete(t),p}(e,t,n,r,o,i))}function rke(e,t,n,r,o){return e===t||(null==e||null==t||!o_e(e)&&!o_e(t)?e!=e&&t!=t:nke(e,t,n,r,rke,o))}function oke(e,t){return rke(e,t)}function ike(e){var t=G3(Kme),n=gP(Object(a.useState)((function(){return t.isInHighlight(e)})),2),r=n[0],o=n[1];return Object(a.useEffect)((function(){var n=t.onChange((function(n){n.highlightCellIds,n.highlightRecordIds;var r=t.isInHighlight(e);o(r)}));return function(){n.destroy()}}),[t]),r}function ake(e,t,n){return t=P_(t),D_(e,lke()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function lke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(lke=function(){return!!e})()}var uke=Object.defineProperty,cke=Object.getOwnPropertyDescriptor,ske=function(e,t,n,r){for(var o,i=r>1?void 0:r?cke(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&uke(t,n,i),i},dke=function(e){function t(){var e;return Ub(this,t),(e=ake(this,t,arguments))._task=null,e._originCellValue=null,e._handleRefresh=function(){},e._selectionListener=null,e._commandListener=null,e._onRefreshTooltipChange=e._register(new ck),e.onRefreshTooltipChange=e._onRefreshTooltipChange.event,e.DESC_MAP=$b($b($b({},zI.GROUP,{text:uw("本记录将被移至新的分组"),ps:uw("本记录不属于该分组，点击其他区域将移走该记录")}),zI.FILTER,{text:uw("本记录将被过滤"),ps:uw("本记录已被筛选过滤，点击其他区域将隐藏该记录")}),zI.SORT,{text:uw("本记录将被移动到新的排序位置"),ps:uw("本记录因排序规则会移动，点击其他区域将移走该记录")}),e}return F_(t,e),Wb(t,[{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}},{key:"init",value:function(){this._bindEvent()}},{key:"_bindEvent",value:function(){var e=this;this._refreshEventService.onBeforeRefresh(function(){var t=mC(X_.mark((function t(n){var r,o,i,a,l,u,c,s,d,f,p,h,v,g,m,y,b;return X_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.type,o=n.commandName,i=n.params,a=n.action,p=e._readService.getActiveView(),null==(l=e._selectionListener)||l.destroy(),null==(u=e._commandListener)||u.destroy(),"setCell"!==o&&"removeCells"!==o){t.next=35;break}if(h="setCell"===o?i:i.cells[0],v=e._readService.getCell(h.fieldId,h.recordId),g=null==(c=e._selectionService)?void 0:c.getSelection(),!e._originCellValue&&v&&(e._originCellValue=v.value),!e._task){t.next=24;break}if(o!==e._task.commandName||h.recordId!==e._task.params.recordId||h.fieldId!==e._task.params.fieldId){t.next=19;break}if(!oke(null==h?void 0:h.value,e._originCellValue)){t.next=16;break}return e._task=null,e._hideHighlight(),e._hideTooltip(),t.abrupt("return");case 16:e._task={type:r,commandName:o,params:i,action:a},t.next=22;break;case 19:return t.next=21,e._task.action();case 21:e._task={type:r,commandName:o,params:i,action:a};case 22:t.next=25;break;case 24:e._task={type:r,commandName:o,params:i,action:a};case 25:if((null==p?void 0:p.get("type"))===BC.GRID&&e._showHighlight(p,h.recordId),e._handleRefresh=mC(X_.mark((function t(){var n,r;return X_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(n=e._commandListener)||n.destroy(),t.next=3,null==(r=e._task)?void 0:r.action();case 3:e._afterRefresh(),e._updateSelection(p,h.recordId,g);case 5:case"end":return t.stop()}}),t)}))),(m=null==p?void 0:p.get("type"))!==BC.KANBAN){t.next=31;break}return e._handleRefresh(),t.abrupt("return");case 31:return e._showTooltip(r,h.recordId),m===BC.GRID&&(e._selectionListener=null==(s=e._selectionService)?void 0:s.onChange((function(t){var n=t.selection;n?n.isCollapsed&&n.anchor.row!==g.anchor.row&&e._handleRefresh():e._handleRefresh()}))),e._commandListener=e._commandService.onDidExecuteCommand((function(){e._handleRefresh()})),t.abrupt("return");case 35:if("addEmptyRecord"!==o){t.next=51;break}if(y=i.uuid,b=null==(d=e._selectionService)?void 0:d.getSelection(),!e._task){t.next=44;break}return t.next=41,e._task.action();case 41:e._task={type:r,commandName:o,params:i,action:a},t.next=45;break;case 44:e._task={type:r,commandName:o,params:i,action:a};case 45:return(null==p?void 0:p.get("type"))===BC.GRID&&e._showHighlight(p,y),e._showTooltip(r,y),e._handleRefresh=mC(X_.mark((function t(){var n,r;return X_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(n=e._commandListener)||n.destroy(),t.next=3,null==(r=e._task)?void 0:r.action();case 3:e._afterRefresh();case 4:case"end":return t.stop()}}),t)}))),(null==p?void 0:p.get("type"))===BC.GRID&&(e._selectionListener=null==(f=e._selectionService)?void 0:f.onChange((function(t){var n,r=t.selection;r?r.isCollapsed&&r.anchor.row!==(null==(n=null==b?void 0:b.anchor)?void 0:n.row)&&e._handleRefresh():e._handleRefresh()}))),e._commandListener=e._commandService.onDidExecuteCommand((function(){e._handleRefresh()})),t.abrupt("return");case 51:a();case 52:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"_showHighlight",value:function(e,t){var n=E_(this._readService.getViewFields(null==e?void 0:e.get("uuid")),(function(e){return{recordId:t,fieldId:e.get("field_uuid")}}))||[];this._highlightService.setHighlights(n)}},{key:"_hideHighlight",value:function(){this._highlightService.clearHighlights()}},{key:"_showTooltip",value:function(e,t){this._onRefreshTooltipChange.emit({type:e,recordId:t,desc:this.DESC_MAP[e]})}},{key:"_hideTooltip",value:function(){this._onRefreshTooltipChange.emit({type:null,recordId:"",desc:{text:"",ps:""}})}},{key:"_updateSelection",value:function(e,t,n){var r,o,i;if((null==e?void 0:e.get("type"))===BC.GRID&&n){var a=this._readService.getFlatViewRecords(e.get("uuid")),l=n.anchor,u=k_(a,(function(e){return(null==e?void 0:e.get("record_uuid"))===t}));if(u>=0){var c=null==(r=this._selectionService)?void 0:r.getSelection(),s=null==(o=this._selectionService)?void 0:o.createGridSelectionByIndex(u,c?c.anchor.column:l.column,l.rowCount,l.columnCount);null==(i=this._selectionService)||i.scrollToSelection(s,"center")}}}},{key:"_afterRefresh",value:function(){var e,t;this._task=null,this._originCellValue=null,this._hideHighlight(),this._hideTooltip(),null==(e=this._selectionListener)||e.destroy(),null==(t=this._commandListener)||t.destroy()}}])}($_);ske([Xs(UI)],dke.prototype,"_refreshEventService",2),ske([Xs(fye),Ds()],dke.prototype,"_selectionService",2),ske([Xs(MI)],dke.prototype,"_readService",2),ske([Xs(Kme)],dke.prototype,"_highlightService",2),ske([Xs(uA)],dke.prototype,"_commandService",2),ske([Vs()],dke.prototype,"destroy",1),dke=ske([Ys()],dke);var fke=Object.defineProperty,pke=Object.getOwnPropertyDescriptor,hke=function(e,t,n,r){for(var o,i=r>1?void 0:r?pke(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&fke(t,n,i),i},vke=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){this._refreshService.init()}}],[{key:"pluginModule",value:function(){return pd().contribution(Lbe).register(this).register(dke)}}])}();function gke(e,t,n){return t=P_(t),D_(e,mke()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function mke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(mke=function(){return!!e})()}vke.pluginName="render-refresh",hke([Xs(dke)],vke.prototype,"_refreshService",2),vke=hke([Ys({contrib:Qoe})],vke);var yke=Object.defineProperty,bke=Object.getOwnPropertyDescriptor,wke=function(e,t,n,r){for(var o,i=r>1?void 0:r?bke(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yke(t,n,i),i},_ke=function(e){return e.HEADER="header",e.GROUP_HEADER="group_header",e.CELL="cell",e.MULTI_CELL="multi_cell",e.KANBAN_RECORD="kanban_record",e.CARD_RECORD="card_record",e.CALENDAR_RECORD="calendar_record",e}(_ke||{}),kke=function(e){function t(){var e;return Ub(this,t),(e=gke(this,t,arguments))._onContextMenu=e._register(new ck),e.contextMenuInfo=null,e.onContextMenu=e._onContextMenu.event,e}return F_(t,e),Wb(t,[{key:"showContextMenu",value:function(e){this._onContextMenu.emit(e),this.contextMenuInfo=e}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);wke([Vs()],kke.prototype,"destroy",1),kke=wke([Ys()],kke);var Cke=Object.defineProperty,Eke=Object.getOwnPropertyDescriptor,Oke=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){}}],[{key:"pluginModule",value:function(){return pd().register(this).register(kke)}}])}();Oke.pluginName="render-context-menu",Oke=function(e,t,n,r){for(var o,i=r>1?void 0:r?Eke(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Cke(t,n,i),i}([Ys({contrib:Qoe})],Oke);var Ske=Ts.defineToken("ViewerRowHeaderIconContribution"),xke=Object.defineProperty,jke=Object.getOwnPropertyDescriptor,Ike=function(e,t,n,r){for(var o,i=r>1?void 0:r?jke(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&xke(t,n,i),i},Rke=function(){return Wb((function e(){var t=this;Ub(this,e),this._getExpandRecordRecordHeaderIcon=function(){var e,n,r=t._viewerGridRecordHeaderIconContribution.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getHeaderIcon)?void 0:n.call(e):null}}),[{key:"ExpandRecordRecordHeaderIcon",get:function(){return this._getExpandRecordRecordHeaderIcon()}}])}();Ike([bd(Ske)],Rke.prototype,"_viewerGridRecordHeaderIconContribution",2),Rke=Ike([Ys()],Rke);var Ake=function(e){var t=e.recordId,n=G3(bie);return l.a.createElement(E.a,{prefixCls:"ant"},l.a.createElement(h.a,{title:uw("展开行（Space）"),placement:"top",shouldHiddenOnHover:!0,shouldArrowCenter:!0},l.a.createElement("div",{className:"lakex-viewer-grid-row-expander",onClick:function(e){e.stopPropagation(),null==n||n.emitClickRecord({recordId:t})}},l.a.createElement(g6,{type:"RowExpand"}))))},Dke=Object.defineProperty,Pke=Object.getOwnPropertyDescriptor,Mke=function(e,t,n,r){for(var o,i=r>1?void 0:r?Pke(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Dke(t,n,i),i},Tke=function(){return Wb((function e(){Ub(this,e)}),[{key:"getHeaderIcon",value:function(){return Ake}},{key:"registerOpenerApp",value:function(){return[{name:"record",display_name:"Record",description:"记录"}]}},{key:"registerOpener",value:function(){var e=this;return[{openerName:"record-opener",apps:["record"],autoClear:!0,open:function(t){var n;e._lifecycleService.status<Jb.Rendered?e._lifecycleService.when(Jb.Rendered,(function(){var n;null==(n=e._renderService)||n.emitClickRecord({recordId:t})})):null==(n=e._renderService)||n.emitClickRecord({recordId:t})}}]}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();Tke.pluginName="render-expand-record",Mke([Xs(bie)],Tke.prototype,"_renderService",2),Mke([Xs(Zb)],Tke.prototype,"_lifecycleService",2),Tke=Mke([Ys({contrib:[Ske,Aie]})],Tke);var Fke=Object.defineProperty,Nke=Object.getOwnPropertyDescriptor,Vke=function(e,t,n,r){for(var o,i=r>1?void 0:r?Nke(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Fke(t,n,i),i};function Lke(e){var t;if(!e)return null;var n,r;return n=parseInt((null==e?void 0:e.getAttribute("data-col"))||"",10),r=parseInt((null==(t=null==e?void 0:e.parentNode)?void 0:t.getAttribute("data-row"))||"",10),(au(n)||au(r))&&console.warn("getCoordinateFromNode NaN error",{column:n,row:r}),{row:r,column:n}}var Bke="ant",$ke=function(){return Wb((function e(){Ub(this,e),this._selectorMap=$b($b($b({},BC.GRID,".lakex-viewer-grid-cell"),BC.KANBAN,".lakex-viewer-kanban-record"),BC.CARD,".lakex-viewer-card-record-item"),this._baseSelector="",this._preAutofillSelection=null,this._mouseDownEmitter=null,this._mouseMoveEmitter=null,this._mouseUpEmitter=null}),[{key:"init",value:function(){var e=this,t=null,n=null,r=null;this._mouseDownEmitter=t6(document.body,"mousedown",(function(o){var i,a,l,u,c,s,d,f,p,h;if(null==(i=e._mouseMoveEmitter)||i.destroy(),null==(a=e._mouseUpEmitter)||a.destroy(),!(n6(o.target,".".concat(Rde))||n6(o.target,".".concat(Bke,"-picker-dropdown"))||n6(o.target,".".concat(Bke,"-popover"))||n6(o.target,".".concat(Bke,"-select-dropdown"))||n6(o.target,".".concat(Bke,"-slider")))){if(e._activeTableService.isAutoActive||(null!=(l=e._renderContext.$workbenchRoot)&&l.contains(o.target)?e._activeTableService.active():e._activeTableService.inactive()),null==(u=e._renderContext.$root)||!u.contains(o.target))return void e._removeSelection();var v=e._readService.getActiveView();if(v){if(v.get("type")!==BC.GRID)return void e._removeSelection();if(!(n6(o.target,".lakex-viewer-grid-header-column")||n6(o.target,".lakex-viewer-grid-row-checkbox")||n6(o.target,".lakex-viewer-grid-row-dragger")||n6(o.target,".lakex-viewer-grid-header-checkbox"))){var g=e._selectionService.gridScrollService,m=document.body.clientWidth,y=document.body.clientHeight,b=null==(c=null==g?void 0:g.scroller)?void 0:c.getBoundingClientRect();e._baseSelector=e._selectorMap[(null==v?void 0:v.get("type"))||""];var w=e._selectionService.getSelection();if(n=o.shiftKey&&w?{row:w.anchor.row,column:w.anchor.column}:Lke(n6(o.target,e._baseSelector)),!e._baseSelector||!n)return void e._removeSelection();if(2!==o.button){var _=e._readService.getViewFields(v.get("uuid"))||[],k=e._readService.getViewRecordsCount(v.get("uuid")),C=_.length;if(o.metaKey){var E=n.row,O=(null==(s=e._selectionService)?void 0:s.isRowSelection())||!1,S=(null==(d=e._selectionService)?void 0:d.getSelectRowIndexes())||[];S.includes(E)&&O?S=S.filter((function(e){return e!==E})):S.push(E);var x=null==(f=e._selectionService)?void 0:f.createRowGridSelectionByIndex(S,k,C);return void(x&&(null==(p=e._selectionService)||p.setSelection(x)))}var j=n6(o.target,e._baseSelector);j&&(r=Lke(t=j),e._updateSelection(n,r,k,C)),null!=(h=o.target)&&h.classList.contains("lakex-viewer-grid-autofill-container")&&(e._preAutofillSelection=e._selectionService.getSelection(),document.body.style.cursor="crosshair"),e._mouseMoveEmitter=t6(e._renderContext.$root,"mousemove",(function(o){if(!lu(n)){g&&b&&g.mouseMoveScroll(o,m,y,b,_);var i=n6(o.target,e._baseSelector);i!==t&&i&&(r=Lke(t=i),e._updateSelection(n,r,k,C))}})),e._mouseUpEmitter=t6(document.body,"mouseup",(function(o){var i,a;e._preAutofillSelection&&e._commandService.execCommand("autofillCells",{preSelection:e._preAutofillSelection,newSelection:e._selectionService.getSelection()}),e._preAutofillSelection=null,null==(i=e._mouseMoveEmitter)||i.destroy(),document.body.style.cursor="default";var l=n6(o.target,e._baseSelector);lu(n)||(l!==t&&l&&(r=Lke(t=l),e._updateSelection(n,r,k,C)),null==(a=e._mouseUpEmitter)||a.destroy(),n=null,r=null,t=null)}))}}}}}))}},{key:"_updateSelection",value:function(e,t,n,r){var o,i,a,l,u,c=this._preAutofillSelection,s=null==(o=this._selectionService)?void 0:o.createGridSelectionByScope(e,t,n,r);if(c){var d=c.getRangeAt(0).start,f=c.getRangeAt(c.rangeCount-1).end,p=s.getRangeAt(0).start,h=s.getRangeAt(s.rangeCount-1).end,v=null;return v=h.row>f.row?null==(i=this._selectionService)?void 0:i.createGridSelectionByScope({row:d.row,column:d.column},{row:h.row,column:f.column},n,r):p.row<d.row?null==(a=this._selectionService)?void 0:a.createGridSelectionByScope({row:p.row,column:d.column},{row:f.row,column:f.column},n,r):c,void(null==(l=this._selectionService)||l.setSelection(v))}null==(u=this._selectionService)||u.setSelection(s)}},{key:"_removeSelection",value:function(){var e;null==(e=this._selectionService)||e.removeSelection()}},{key:"destroy",value:function(){var e,t,n;null==(e=this._mouseDownEmitter)||e.destroy(),null==(t=this._mouseMoveEmitter)||t.destroy(),null==(n=this._mouseUpEmitter)||n.destroy(),this._mouseDownEmitter=null,this._mouseMoveEmitter=null,this._mouseUpEmitter=null}}])}();function zke(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Uke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uke(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Uke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Vke([Xs(cie)],$ke.prototype,"_renderContext",2),Vke([Xs(MI)],$ke.prototype,"_readService",2),Vke([Xs(aie)],$ke.prototype,"_activeTableService",2),Vke([Xs(fye),Ds()],$ke.prototype,"_selectionService",2),Vke([Xs(uA)],$ke.prototype,"_commandService",2),Vke([Vs()],$ke.prototype,"destroy",1),$ke=Vke([Ys()],$ke);var Hke=Object.defineProperty,qke=Object.getOwnPropertyDescriptor,Wke=function(e,t,n,r){for(var o,i=r>1?void 0:r?qke(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Hke(t,n,i),i},Gke=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){var e;this._registerScrollService(),null==(e=this._selectionBindingService)||e.init()}},{key:"_registerScrollService",value:function(){var e,t=zke(this._selectionPluginProvider.getContributions());try{for(t.s();!(e=t.n()).done;){var n=e.value;try{n.registerScrollService(this._selectionService)}catch(e){console.error(e)}}}catch(e){t.e(e)}finally{t.f()}}}],[{key:"pluginModule",value:function(){return pd().contribution(Qme).register(this).register(fye).register($ke).register(bye)}}])}();Gke.pluginName="render-selection",Wke([Xs(fye),Ds()],Gke.prototype,"_selectionService",2),Wke([Xs($ke),Ds()],Gke.prototype,"_selectionBindingService",2),Wke([bd(Qme)],Gke.prototype,"_selectionPluginProvider",2),Gke=Wke([Ys({contrib:Qoe})],Gke);var Kke=Object.defineProperty,Yke=Object.getOwnPropertyDescriptor,Xke=function(e,t,n,r){for(var o,i=r>1?void 0:r?Yke(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Kke(t,n,i),i},Jke=function(){return Wb((function e(){Ub(this,e)}),[{key:"_isReadonly",get:function(){return this._abilityService.isReadonly(EA.TABLE)}},{key:"_currentViewType",get:function(){return this._readService.getActiveView().get("type")}},{key:"_hasSelection",value:function(){return!1}},{key:"init",value:function(){this._hotkeyService.init()}},{key:"destroy",value:function(){this._hotkeyService.destroy()}}],[{key:"pluginModule",value:function(){return Ble.register(this),Ble}}])}();Jke.pluginName="render-hotkey",Xke([Xs(Moe)],Jke.prototype,"_hotkeyService",2),Xke([Xs(MI)],Jke.prototype,"_readService",2),Xke([Xs(VA)],Jke.prototype,"_abilityService",2),Jke=Xke([Ys({contrib:[Qoe]})],Jke);var Zke=Ts.defineToken("StatisticsRenderPluginContribution");function Qke(e,t,n){return t=P_(t),D_(e,eCe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function eCe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(eCe=function(){return!!e})()}var tCe=Object.defineProperty,nCe=Object.getOwnPropertyDescriptor,rCe=function(e,t,n,r){for(var o,i=r>1?void 0:r?nCe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&tCe(t,n,i),i},oCe=function(e){function t(){var e;return Ub(this,t),(e=Qke(this,t,arguments))._onClick=e._register(new ck),e.onClick=e._onClick.event,e}return F_(t,e),Wb(t,[{key:"open",value:function(e,t,n,r){this._onClick.emit({view:e,field:t,stat:n,target:r})}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);rCe([Vs()],oCe.prototype,"destroy",1),oCe=rCe([Ys()],oCe);var iCe=[bC.TEXT,bC.SELECT,bC.MULTI_SELECT,bC.NUMBER,bC.RATE,bC.PROGRESS,bC.DATE,bC.IMAGE,bC.FILE,bC.PHONE,bC.MENTION,bC.LINK,bC.EMAIL,bC.USER_ID,bC.CREATED_AT,bC.MODIFIER_ID,bC.UPDATED_AT],aCe=[bC.DATE,bC.CREATED_AT,bC.UPDATED_AT],lCe={none:{stats:uw("统计"),text:uw("不展示")},count:{stats:uw("$1 条记录"),text:uw("记录总数")},filled:{stats:uw("已填写 $1"),text:uw("已填写数"),types:iCe},empty:{stats:uw("未填写 $1"),text:uw("未填写数"),types:iCe},checked:{stats:uw("已勾选 $1"),text:uw("已勾选"),types:[bC.CHECKBOX]},unchecked:{stats:uw("未勾选 $1"),text:uw("未勾选"),types:[bC.CHECKBOX]},unique:{stats:uw("唯一数 $1"),text:uw("唯一数"),types:iCe},percentFilled:{stats:uw("已填写占比 $1"),text:uw("已填写占比"),types:iCe},percentEmpty:{stats:uw("未填写占比 $1"),text:uw("未填写占比"),types:iCe},percentUnique:{stats:uw("唯一数占比 $1"),text:uw("唯一数占比"),types:iCe},sum:{stats:uw("求和 $1"),text:uw("求和"),types:[bC.NUMBER]},average:{stats:uw("平均值 $1"),text:uw("平均值"),types:[bC.NUMBER]},max:{stats:uw("最大值 $1"),text:uw("最大值"),types:[bC.NUMBER,bC.RATE,bC.PROGRESS]},min:{stats:uw("最小值 $1"),text:uw("最小值"),types:[bC.NUMBER,bC.RATE,bC.PROGRESS]},earliestDate:{stats:uw("最早时间 $1"),text:uw("最早时间"),types:aCe},latestDate:{stats:uw("最晚时间 $1"),text:uw("最晚时间"),types:aCe},dateRange:{stats:uw("时间范围 $1 天"),text:uw("时间范围（日）"),types:aCe},monthRange:{stats:uw("时间范围 $1 月"),text:uw("时间范围（月）"),types:aCe},percentChecked:{stats:uw("已勾选占比 $1"),text:uw("已勾选占比"),types:[bC.CHECKBOX]},percentUnchecked:{stats:uw("未勾选占比 $1"),text:uw("未勾选占比"),types:[bC.CHECKBOX]}},uCe=function(e){var t,n=function(e){var t,n=e.viewField,r=e.recordIds,o=G3(MI),i=G3(oCe),l=o.getActiveView(),u=gP(Object(a.useState)(void 0),2),c=u[0],s=u[1],d=gP(Object(a.useState)(),2),f=d[0],p=d[1];return Object(a.useEffect)((function(){l&&n&&vC((function(){var e=o.getStatValue(l.get("uuid"),n.get("field_uuid"),r);s(null==e?void 0:e.stat.toJSON()),p(null==e?void 0:e.value)}))}),[null==l?void 0:l.get("uuid"),null==n?void 0:n.get("field_uuid"),r]),{stat:c,statValue:f,fieldType:null==(t=n.get("field"))?void 0:t.get("type"),onClick:function(e){null==i||i.open(l,n.get("field"),c,e.currentTarget)}}}({viewField:e.viewField,recordIds:e.recordIds}),r=n.stat,o=n.statValue,u=n.fieldType,c=n.onClick;if(r&&r.type){var s=lCe[r.type].stats,d=o;("earliestDate"===r.type||"latestDate"===r.type&&o)&&(d=i()(o).format("YYYY-MM-DD")),t=l.a.createElement("span",{className:"lakex-table-stats-filled"},l.a.createElement("span",{className:"lakex-table-stats-text"},uw(s,d+"")),l.a.createElement(g6,{type:"ReviewArrowDown",size:14}))}else t=l.a.createElement("span",{className:"lakex-table-stats-unfilled"},l.a.createElement("span",{className:"lakex-table-stats-text"},lCe.none.stats),l.a.createElement(g6,{type:"ReviewArrowDown",size:14}));return l.a.createElement("div",{className:"lakex-table-stats lakex-table-stats-".concat(u),onClick:c},t)},cCe=Object.defineProperty,sCe=Object.getOwnPropertyDescriptor,dCe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}},{key:"getStatisticsComponent",value:function(){return uCe}}],[{key:"pluginModule",value:function(){return pd().contribution(Zke).register(oCe).register(this)}}])}();dCe.pluginName="render-statistics",dCe=function(e,t,n,r){for(var o,i=r>1?void 0:r?sCe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cCe(t,n,i),i}([Ys({contrib:[Qoe,Iye]})],dCe);var fCe=Object.defineProperty,pCe=Object.getOwnPropertyDescriptor,hCe=function(e,t,n,r){for(var o,i=r>1?void 0:r?pCe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&fCe(t,n,i),i},vCe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"undo",hotkey:"⌘+Z",name:"撤销",enableOnInput:!1,isEnable:function(){return!0},onHotKey:function(){t._commandService.undo()}}),e.registerItem({id:"redo",hotkey:"⌘+shift+Z",name:"重做",enableOnInput:!1,isEnable:function(){return!0},onHotKey:function(){t._commandService.redo()}})}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function gCe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mCe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gCe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gCe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}vCe.pluginName="render-history",hCe([Xs(uA)],vCe.prototype,"_commandService",2),vCe=hCe([Ys({contrib:[Qoe,Toe]})],vCe);var yCe=function(e){var t=e.listeners,n=e.disable,r=void 0!==n&&n;return r?l.a.createElement(h.a,{title:uw("取消排序后，可进行拖拽")},l.a.createElement("div",mCe(mCe({className:u$("lakex-viewer-grid-row-dragger",{disable:r})},t),{},{onClick:function(e){return e.stopPropagation()}}),l.a.createElement(g6,{type:"Drag"}))):l.a.createElement("div",mCe(mCe({className:u$("lakex-viewer-grid-row-dragger")},t),{},{onClick:function(e){return e.stopPropagation()}}),l.a.createElement(g6,{type:"Drag"}))},bCe=Object.defineProperty,wCe=Object.getOwnPropertyDescriptor,_Ce=function(e,t,n,r){for(var o,i=r>1?void 0:r?wCe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&bCe(t,n,i),i},kCe=function(){return Wb((function e(){Ub(this,e)}),[{key:"OrderDragIcon",get:function(){return yCe}},{key:"updateViewOrder",value:function(e,t){this._commandService.execCommand("changeViewOrder",{sourceViewId:e,targetViewId:t})}},{key:"updateRecordOrder",value:function(e,t,n,r){var o=this._readService.getActiveView();this._commandService.execCommand("changeRecordOrder",{viewId:null==o?void 0:o.get("uuid"),sourceRecordId:e,targetRecordId:t,targetGroupItem:n,direction:r})}},{key:"updateFieldOrder",value:function(e,t){var n=this._readService.getActiveView();this._commandService.execCommand("changeFieldOrder",{viewId:null==n?void 0:n.get("uuid"),sourceFieldId:e,targetFieldId:t})}},{key:"updateFieldOptionOrder",value:function(e,t,n){this._commandService.execCommand("changeFieldOptionOrder",{fieldId:e,sourceFieldOptionId:t,targetFieldOptionId:n})}}])}();_Ce([Xs(uA)],kCe.prototype,"_commandService",2),_Ce([Xs(MI)],kCe.prototype,"_readService",2),kCe=_Ce([Ys()],kCe);var CCe=Ts.defineToken("OrderRenderPluginContribution"),ECe=Object.defineProperty,OCe=Object.getOwnPropertyDescriptor,SCe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return pd().contribution(CCe).register(this).register(kCe)}}])}();SCe.pluginName="render-order",SCe=function(e,t,n,r){for(var o,i=r>1?void 0:r?OCe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&ECe(t,n,i),i}([Ys({contrib:Qoe})],SCe);var xCe=Object.defineProperty,jCe=Object.getOwnPropertyDescriptor,ICe=function(e,t,n,r){for(var o,i=r>1?void 0:r?jCe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&xCe(t,n,i),i},RCe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){var e=this;this._commandService.onDidExecuteCommand((function(t){var n=t.context;if("switchView"===n.commandName){var r=n.argArray[0].viewId;e._openerService.setHash("view",r)}}))}},{key:"registerOpenerApp",value:function(){return[{name:"view",display_name:"View",description:"视图"}]}},{key:"registerOpener",value:function(){var e=this;return[{openerName:"view-opener",apps:["view"],open:function(t){e._commandService.execCommand("switchView",{viewId:t},!0)}}]}}],[{key:"pluginModule",value:function(){return pd().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"view",type:"object",title:"视图",properties:{useWindowScroll:{type:"boolean",description:"滚动容器是否为 window"},customScrollParent:{type:"object",description:"自定义滚动容器，useWindowScroll 场景下触发滚动加载，类型为 HTMLElement | undefined"},disableVirtualScroll:{type:"boolean",description:"是否禁用虚拟滚动"}}}),e.registerDefaultValue({"view.useWindowScroll":!1,"view.customScrollParent":void 0,"view.disableVirtualScroll":!1})}}])}();RCe.pluginName="render-viewer-manage",ICe([Xs(uA)],RCe.prototype,"_commandService",2),ICe([Xs(sae)],RCe.prototype,"_openerService",2),RCe=ICe([Ys({contrib:[Qoe,Aie]})],RCe);var ACe=function(){var e=G3(bie),t=Object(a.useCallback)((function(t){t.preventDefault(),e.emitClickIcon({iconName:"grid-field-config",event:t})}),[e]);return l.a.createElement("div",{className:"lakex-viewer-grid-header-blank",onClick:t},l.a.createElement(g6,{type:"Add"}))},DCe=Object.defineProperty,PCe=Object.getOwnPropertyDescriptor,MCe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}},{key:"getAddFieldComponent",value:function(){return ACe}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();MCe.pluginName="render-add-field",MCe=function(e,t,n,r){for(var o,i=r>1?void 0:r?PCe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&DCe(t,n,i),i}([Ys({contrib:[Qoe,Rye]})],MCe);var TCe=function(e){var t=e.inGroup,n=void 0!==t&&t,r=e.index,o=void 0===r?-1:r,i=e.viewGroupRecord,u=e.viewRecords,c=e.viewFields,s=G3(uA),d=G3(MI),f=G3(fye),p=Object(a.useCallback)((function(){var e,t;if(n){var r=null==(e=u[o])?void 0:e.get("record_uuid"),a="";if(i){var l=null==i?void 0:i.option;l&&(null!=(t=l.value)&&t.toJSON&&(l.value=l.value.toJSON()),a=d.groupValue(l))}s.execCommand("addEmptyRecord",{sourceRecordId:r,groupItemKey:a})}else s.execCommand("addEmptyRecord");if(f){var p=f.createGridSelectionByIndex(n?o+1:u.length,0,u.length+1,c.length);null==f||f.scrollToSelection(p,"end")}}),[]);return l.a.createElement("div",{className:"lakex-viewer-grid-add-record"},l.a.createElement(g6,{type:"Add",onClick:p,size:14}))},FCe=Object.defineProperty,NCe=Object.getOwnPropertyDescriptor,VCe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}},{key:"getAddRecordComponent",value:function(){return TCe}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();VCe.pluginName="render-add-record",VCe=function(e,t,n,r){for(var o,i=r>1?void 0:r?NCe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&FCe(t,n,i),i}([Ys({contrib:[Qoe,Aye]})],VCe);var LCe=Ts.defineToken("SearchRegistryToken"),BCe=Ts.defineToken("SearchRenderPluginContribution"),$Ce=function(e){var t=e.isFolding,n=e.onFold;return l.a.createElement("span",{className:"lakex-viewer-grid-group-fold"},l.a.createElement(g6,{type:"ReviewArrowDown",size:16,onClick:function(){n&&n(!t)}}))};function zCe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return UCe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UCe(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function UCe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function HCe(e,t,n){return t=P_(t),D_(e,qCe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function qCe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(qCe=function(){return!!e})()}var WCe=Object.defineProperty,GCe=Object.getOwnPropertyDescriptor,KCe=function(e,t,n,r){for(var o,i=r>1?void 0:r?GCe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&WCe(t,n,i),i},YCe=function(e){function t(){var e;return Ub(this,t),(e=HCe(this,t,arguments))._map={},e._onGroupFoldingChange=e._register(new ck),e.onGroupFoldingChange=e._onGroupFoldingChange.event,e}return F_(t,e),Wb(t,[{key:"getGroupFolding",value:function(e,t){var n,r=new Set,o=zCe(this._readService.getGroupItems(e,t));try{for(o.s();!(n=o.n()).done;){var i=n.value;i.get("collapse")&&r.add(i.get("key"))}}catch(e){o.e(e)}finally{o.f()}return this.setCache(e,t,r),r}},{key:"setCache",value:function(e,t,n){this._map[e]=this._map[e]||{},this._map[e][t]=n}},{key:"FoldIcon",get:function(){return $Ce}},{key:"setGroupFolding",value:function(e,t,n,r){var o,i;r?null==(o=this._map[e][t])||o.add(n):null==(i=this._map[e][t])||i.delete(n),this._commandService.execCommand("updateGridGroupFold",{viewId:e,fieldId:t,groupId:n,value:r}),this._onGroupFoldingChange.emit({viewId:e,fieldId:t,groupId:n,data:this._map})}},{key:"tryUnFoldCellGroup",value:function(e,t){if(e&&t){var n=this._readService.getViewRecordByRecordId(t||"");if(n){var r=this._readService.getViewGroup();if(r){var o=r.field.get("uuid"),i=(null==n?void 0:n.get("group_item_key"))||"ungroup",a=this.getGroupFolding(e,o);i&&null!=a&&a.has(i)&&this.setGroupFolding(e,o,i,!1)}}}}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);function XCe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return JCe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JCe(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function JCe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ZCe(e,t,n){return t=P_(t),D_(e,QCe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function QCe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(QCe=function(){return!!e})()}KCe([Xs(MI)],YCe.prototype,"_readService",2),KCe([Xs(uA)],YCe.prototype,"_commandService",2),KCe([Vs()],YCe.prototype,"destroy",1),YCe=KCe([Ys()],YCe);var eEe=Object.defineProperty,tEe=Object.getOwnPropertyDescriptor,nEe=function(e,t,n,r){for(var o,i=r>1?void 0:r?tEe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&eEe(t,n,i),i},rEe=kD.Plugin("search"),oEe=function(e){function t(){var e;return Ub(this,t),(e=ZCe(this,t,arguments))._selectionService=null,e._highlightService=null,e.isInSearching=!1,e._onSearching=e._register(new ck),e.onSearching=e._onSearching.event,e._onExitSearching=e._register(new ck),e.onExitSearching=e._onExitSearching.event,e}return F_(t,e),Wb(t,[{key:"_getViewSearchResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this._readService.isGroup(e),r=this._readService.getViewFields(e),o=[];if(n){var i,a=XCe(this._readService.getGroupViewRecords(e));try{for(a.s();!(i=a.n()).done;){var l=i.value.viewRecords;if(l){var u,c=XCe(l);try{for(c.s();!(u=c.n()).done;){var s,d=u.value,f=XCe(r);try{for(f.s();!(s=f.n()).done;){var p=s.value,h=this._getMatch(t,p.get("field_uuid"),d.get("record_uuid"));h&&o.push(h)}}catch(e){f.e(e)}finally{f.f()}}}catch(e){c.e(e)}finally{c.f()}}}}catch(e){a.e(e)}finally{a.f()}}else{var v=this._readService.getViewRecords(e);if(!r||0===r.length)return o;var g,m=XCe(v);try{for(m.s();!(g=m.n()).done;){var y,b=g.value,w=XCe(r);try{for(w.s();!(y=w.n()).done;){var _=y.value,k=this._getMatch(t,_.get("field_uuid"),b.get("record_uuid"));k&&o.push(k)}}catch(e){w.e(e)}finally{w.f()}}}catch(e){m.e(e)}finally{m.f()}}return o}},{key:"_getMatch",value:function(e,t,n){var r=this._readService.getCellFormattedValue(t,n);try{var o=this._searchRegistry.getMatchMiddlewares()||[];if(o.length>0){var i,a=XCe(o);try{for(a.s();!(i=a.n()).done;){var l=i.value;r=l?l(e,t,n,r):r}}catch(e){a.e(e)}finally{a.f()}}}catch(e){rEe("search match middleware error:",e)}if(r&&r.includes(e))return{fieldId:t,recordId:n}}},{key:"search",value:function(e,t){var n,r,o=this._readService.getActiveView();if(!o)return[];var i=this._getViewSearchResult(o.get("uuid"),e);return i.length>0?null==(n=this._highlightService)||n.setHighlights(i,t):null==(r=this._highlightService)||r.clearHighlights(),(null==o?void 0:o.get("type"))!==BC.GRID?Cu(i.map((function(e){return{recordId:e.recordId}})),"recordId"):i}},{key:"jumpToSearch",value:function(e,t){var n,r,o;if(e){var i=null==(n=this._selectionService)?void 0:n.createSelectionById(e.recordId,e.fieldId,!1);if(i){var a=this._readService.getActiveView();if(!a)return;this._groupFoldService.tryUnFoldCellGroup(null==a?void 0:a.get("uuid"),e.recordId),t?null==(r=this._selectionService)||r.setSelection(i):null==(o=this._selectionService)||o.scrollToSelection(i,"center")}}}},{key:"closeSearch",value:function(){var e,t,n,r;null==(e=this._highlightService)||e.clearHighlights(),(null==(n=null==(t=this._readService)?void 0:t.getActiveView())?void 0:n.get("type"))!==BC.GRID&&(null==(r=this._selectionService)||r.removeSelection())}},{key:"emitSearchingEvent",value:function(){this.isInSearching=!0,this._onSearching.emit(),this._renderFocusService.setGridCellEditorAutoFocus(!1)}},{key:"emitExitSearchingEvent",value:function(){this.isInSearching=!1,this._onExitSearching.emit(),this._renderFocusService.setGridCellEditorAutoFocus(!0)}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);function iEe(e,t,n){return t=P_(t),D_(e,aEe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function aEe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(aEe=function(){return!!e})()}nEe([Xs(MI)],oEe.prototype,"_readService",2),nEe([Xs(LCe)],oEe.prototype,"_searchRegistry",2),nEe([Xs(Rie)],oEe.prototype,"_renderFocusService",2),nEe([Xs(fye),Ds()],oEe.prototype,"_selectionService",2),nEe([Xs(Kme),Ds()],oEe.prototype,"_highlightService",2),nEe([Xs(YCe)],oEe.prototype,"_groupFoldService",2),nEe([Vs()],oEe.prototype,"destroy",1),oEe=nEe([Ys()],oEe);var lEe=Object.defineProperty,uEe=Object.getOwnPropertyDescriptor,cEe=function(e,t,n,r){for(var o,i=r>1?void 0:r?uEe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&lEe(t,n,i),i},sEe=function(e){function t(){return Ub(this,t),iEe(this,t,arguments)}return F_(t,e),Wb(t,[{key:"getMatchMiddlewares",value:function(){return(this.searchProvider.getContributions()||[]).map((function(e){var t;return null==(t=e.registerMatchMiddleware)?void 0:t.call(e)})).filter((function(e){return!!e}))}}])}($_);cEe([bd(BCe)],sEe.prototype,"searchProvider",2),sEe=cEe([Ys({token:LCe})],sEe);var dEe=Object.defineProperty,fEe=Object.getOwnPropertyDescriptor,pEe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return pd().register(this).contribution(BCe).register(sEe).register(oEe)}}])}();pEe.pluginName="render-search",pEe=function(e,t,n,r){for(var o,i=r>1?void 0:r?fEe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&dEe(t,n,i),i}([Ys({contrib:[Qoe]})],pEe);var hEe=function(e){return e.delRow="delRow",e.delCol="delCol",e}(hEe||{}),vEe=function(e){return e[e.possible=1]="possible",e[e.unpossible=0]="unpossible",e}(vEe||{});function gEe(e,t,n){return t=P_(t),D_(e,mEe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function mEe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(mEe=function(){return!!e})()}var yEe=Object.defineProperty,bEe=Object.getOwnPropertyDescriptor,wEe=function(e){function t(){var e;return Ub(this,t),(e=gEe(this,t,arguments))._onChange=e._register(new ck),e.onChange=e._onChange.event,e._possible={},e}return F_(t,e),Wb(t,[{key:"getPossible",value:function(e){return this._possible[e]}},{key:"setPossible",value:function(e,t){this._possible[e]={type:e,status:vEe.possible,data:t},this._onChange.emit({type:e,status:vEe.possible,data:t})}},{key:"setUnpossible",value:function(e,t){this._possible[e]={type:e,status:vEe.unpossible,data:t},this._onChange.emit({type:e,status:vEe.unpossible,data:t})}}])}($_);wEe=function(e,t,n,r){for(var o,i=r>1?void 0:r?bEe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yEe(t,n,i),i}([Ys()],wEe);var _Ee=Object.defineProperty,kEe=Object.getOwnPropertyDescriptor,CEe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return pd().register(wEe).register(this)}}])}();function EEe(e){var t=G3(dke),n=gP(Object(a.useState)(!1),2),r=n[0],o=n[1],i=gP(Object(a.useState)(null),2),l=i[0],u=i[1];return Object(a.useEffect)((function(){var n=null==t?void 0:t.onRefreshTooltipChange((function(t){var n=t.recordId,r=t.desc;if(!n)return o(!1),void u(null);o(e===n),u(r)}));return function(){null==n||n.destroy()}}),[t]),{isInRefresh:r,refreshDesc:l}}function OEe(e){var t=G3(wEe),n=gP(Object(a.useState)(vEe.unpossible),2),r=n[0],o=n[1];return Object(a.useEffect)((function(){var n=null==t?void 0:t.onChange((function(t){t.type===hEe.delRow&&(!t.data||t.data.includes(e))&&o(t.status)}));return function(){null==n||n.destroy()}}),[t]),r}function SEe(e){var t=G3(wEe),n=gP(Object(a.useState)(vEe.unpossible),2),r=n[0],o=n[1];return Object(a.useEffect)((function(){var n=null==t?void 0:t.onChange((function(t){t.type===hEe.delCol&&(!t.data||t.data.includes(e))&&o(t.status)}));return function(){null==n||n.destroy()}}),[t]),r}CEe.pluginName="render-possible",CEe=function(e,t,n,r){for(var o,i=r>1?void 0:r?kEe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&_Ee(t,n,i),i}([Ys({contrib:Qoe})],CEe);var xEe=function(e){var t=EEe(e.record.get("record_uuid")),n=t.isInRefresh,r=t.refreshDesc;return n?l.a.createElement("div",{className:"lakex-viewer-grid-row-tooltip"},null==r?void 0:r.text,l.a.createElement(h.a,{placement:"top",title:null==r?void 0:r.ps},l.a.createElement("div",{className:"lakex-viewer-grid-row-tooltip-icon"},l.a.createElement(g6,{type:"Question",size:16})))):null},jEe=function(e){var t=e.index,n=e.isHover,r=void 0!==n&&n,o=e.record,i=e.viewRecords,u=e.viewFields,c=e.viewConfig,s=e.sticky,d=void 0===s||s,f=e.hasBlank,p=void 0!==f&&f,h=e.isDragging,v=void 0!==h&&h,g=e.isGroupLast,m=void 0!==g&&g,y=e.disableDrag,b=void 0!==y&&y,w=e.listeners,_=G3(Tye),k=G3(fye),C=vye(),E=_.Record,O=OEe(o.get("record_uuid")),S=Object(a.useMemo)((function(){var e=null==C?void 0:C.getRangeAt(0);return(null==e?void 0:e.start.row)===t}),[C]),x=Object(a.useMemo)((function(){return!!C&&(S&&(null==k?void 0:k.isSelectOneCell()))}),[C,S]),j=Object(a.useMemo)((function(){return null==k?void 0:k.isInRowsSelect(t)}),[C,t]);return w?l.a.createElement("div",{className:u$("lakex-viewer-grid-row-container",{"is-dragging":v,sticky:d,normal:!d,"group-last":m,selected:S,"is-select-one":x,"is-in-row-select":j,"is-del-possible":O})},d&&l.a.createElement(xEe,{record:o}),E&&l.a.createElement(E,{index:t,isHover:r,record:o,records:i,fields:u,config:c,sticky:d,hasBlank:p,disableDrag:b,listeners:w})):l.a.createElement("div",{className:u$("lakex-viewer-grid-row-container",{sticky:d,normal:!d,"group-last":m,"is-select-one":x,"is-in-row-select":j,"is-del-possible":O})},d&&l.a.createElement(xEe,{record:o}),E&&l.a.createElement(E,{index:t,isHover:r,record:o,records:i,fields:u,config:c,sticky:d,hasBlank:p,disableDrag:b}))},IEe=Ts.defineToken("ContextMenuContribution");function REe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return AEe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AEe(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function AEe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var DEe=Object.defineProperty,PEe=Object.getOwnPropertyDescriptor,MEe=function(e,t,n,r){for(var o,i=r>1?void 0:r?PEe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&DEe(t,n,i),i},TEe=function(){return Wb((function e(){Ub(this,e),this._items=new Map,this.isInit=!1}),[{key:"init",value:function(){var e;if(!this.isInit){this.isInit=!0;var t,n=REe(this.toolbarPluginProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value;try{null==(e=r.registerContextMenu)||e.call(r,this)}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}}}},{key:"registerItem",value:function(e){var t=e.key;if(this._items.has(t))throw new Error("A contextmenu item is already registered with the '".concat(t,"'"));return this._items.set(t,e),e}},{key:"getContextMenuItem",value:function(e){return"|"===e?e:this._items.get(e)}},{key:"unregisterItem",value:function(e){var t="string"==typeof e?e:e.key;this.getContextMenuItem(t)&&this._items.delete(t)}},{key:"hasContextMenu",get:function(){return this._items.size>0}}])}();function FEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NEe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FEe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FEe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}MEe([bd(IEe)],TEe.prototype,"toolbarPluginProvider",2),TEe=MEe([Ys()],TEe);var VEe=Object.defineProperty,LEe=Object.getOwnPropertyDescriptor,BEe=function(e,t,n,r){for(var o,i=r>1?void 0:r?LEe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&VEe(t,n,i),i},$Ee=function(){return Wb((function e(){Ub(this,e)}),[{key:"getMenuItems",value:function(e){var t=this,n=(this._configurationService.getValue("contextMenu")||[]).map((function(e){return t._contextMenuRegistry.getContextMenuItem(e)})).filter((function(e){return void 0!==e}));return this.cleanMenuItems(n,e)}},{key:"cleanMenuItems",value:function(e,t){var n=[];return e.forEach((function(e){if("|"===e){var r=n[n.length-1];(!r||"|"===r)&&n.pop(),n.push(e)}else{if(null==e.visible&&(e.visible=!0),!(Mr(e.visible)?e.visible(t):e.visible))return;n.push(NEe(NEe({},e),{},{name:Mr(e.name)?e.name(t):e.name}))}})),"|"===n[n.length-1]&&n.pop(),"|"===n[0]&&n.shift(),n}}])}();function zEe(e,t,n){return t=P_(t),D_(e,UEe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function UEe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(UEe=function(){return!!e})()}BEe([Xs(R_)],$Ee.prototype,"_configurationService",2),BEe([Xs(TEe)],$Ee.prototype,"_contextMenuRegistry",2),$Ee=BEe([Ys()],$Ee);var HEe=function(e){function t(){return Ub(this,t),zEe(this,t,arguments)}return F_(t,e),Wb(t)}(Vz);function qEe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WEe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qEe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qEe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}HEe.activators=[{eventName:"onPointerDown",handler:function(e){var t=e.nativeEvent;return 2!==t.button&&function(e){return!(e.dataset&&e.dataset.noDnd)}(t.target)}}];var GEe=function(e){var t=e.type,n=G3(Cie).getFieldIcon(t);return n?l.a.createElement(n,{size:16}):null},KEe=function(e){var t=e.type,n=e.field,r=G3(Cie).getFieldTagComponent(t);return r&&n?l.a.createElement(r,{field:n,position:"gridHeader"}):null},YEe=function(e){var t,n,r=e.viewRecords,o=e.viewFields,i=e.groupViewRecords,u=e.group,c=e.filters,s=e.viewField,d=e.index,f=e.size,p=e.rootHeight,h=xpe(EA.TABLE).canUpdate(),v=G3(fye),g=G3($ye),m=G3(kke),y=G3(Cie),b=G3(bie),w=tH({id:s.get("uuid"),disabled:!h}),_=w.attributes,k=w.listeners,C=w.setNodeRef,E=w.over,O=w.active,S=gP(Object(a.useState)(!1),2),x=S[0],j=S[1],I=xpe(EA.FIELD),R=Dpe(s.get("field_uuid")),A=R.field,D=R.fieldId,P=Object(a.useMemo)((function(){return w_(c,(function(e){return e.get("field_uuid")===(null==A?void 0:A.get("uuid"))}))}),[c,A]),M=vye(),T=SEe(s.get("field_uuid")),F=Object(a.useMemo)((function(){return null==v?void 0:v.isSelectOneCol(d)}),[M,d]),N=Object(a.useCallback)((function(){if(v){var e=u?i.map((function(e){var t;return(null==(t=e.viewRecords)?void 0:t.length)||0})).reduce((function(e,t){return e+t}),0):r.length,t=v.createColumnGridSelectionByIndex(d,e,o.length);v.setSelection(t)}}),[d,r,o,u]),V=zle((function(e,t){I.canUpdate(t)&&(null==b||b.emitClickEvent({eventName:"gridHeader:doubleClick",data:{fieldId:t.get("uuid"),event:e}}))})),L=Object(a.useCallback)((function(e){var t=e.e,n=e.fieldId;t.preventDefault(),t.stopPropagation(),N(),null==m||m.showContextMenu({e:t,from:_ke.HEADER,fieldId:n})}),[d,r,o,u]);if(Object(a.useEffect)((function(){if(x){var e=t6(window,"mousemove",function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return yr(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Rl(e,t,{leading:r,maxWait:t,trailing:o})}((function(e){g.emitResizing(e)}),16)),t=t6(window,"mouseup",(function(t){g.emitResizeEnd(t),j(!1),e.destroy()}));return function(){e.destroy(),t.destroy()}}}),[x]),!A)return null;if(!y.getFieldTargetPlugin(A.get("type")))return null;var B=null==(t=null==O?void 0:O.data.current)?void 0:t.sortable.index,$=null==(n=null==E?void 0:E.data.current)?void 0:n.sortable.index;return l.a.createElement("div",{key:A.get("updated_at"),ref:C,className:u$("lakex-viewer-grid-header-column",{"in-filter":P,"is-selected":F,"is-del-possible":T}),"data-col-index":d,"data-field-id":D,style:{width:(f||g.defaultColWidth)+"px"},onClick:function(e){return N()},onContextMenu:function(e){return L({e:e,fieldId:D})},onDoubleClick:function(e){return V(e,A)}},l.a.createElement("div",WEe(WEe({className:"lakex-viewer-grid-header-column-content"},k),_),l.a.createElement("div",{className:"lakex-viewer-grid-header-column-icon"},l.a.createElement(GEe,{type:A.get("type")})),l.a.createElement("div",{className:"lakex-viewer-grid-header-column-name"},A.get("name")),l.a.createElement(KEe,{type:A.get("type"),field:A})),l.a.createElement("div",{className:"lakex-viewer-grid-header-column-dropdown",onClick:function(e){return L({e:e,fieldId:D})}},l.a.createElement(g6,{type:"ReviewArrowDown",size:16})),l.a.createElement("div",{className:"lakex-viewer-grid-header-column-resizer",onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),g.emitResizeStart(e,o,d),j(!0)}}),(null==E?void 0:E.id)===s.get("uuid")&&(null==E?void 0:E.id)!==(null==O?void 0:O.id)&&l.a.createElement("div",{className:u$("lakex-viewer-grid-dragger-line",{left:B>$,right:B<$}),style:{height:p}}))},XEe=function(e){var t=e.viewRecords,n=e.viewFields,r=e.groupViewRecords,o=e.group,i=e.filters,u=e.sticky,c=e.stickyColNum,s=e.rootHeight,d=e.hasBlank,f=void 0!==d&&d,h=G3(Tye),v=G3(fye),g=h.AddField,m=u?S_(n,0,c):S_(n,c,n.length),y=vye(),b=Object(a.useMemo)((function(){return!!y&&y.isAllSelect}),[y]);return l.a.createElement("div",{className:"lakex-viewer-grid-header-row"},u&&l.a.createElement("div",{className:"lakex-viewer-grid-header-index"},l.a.createElement(p.a,{className:"lakex-viewer-grid-header-checkbox",checked:b,onChange:function(e){e.stopPropagation(),e.target.checked?null==v||v.selectAll():null==v||v.removeSelection()}})),E_(m,(function(e,a){var d=a+(u?0:c);return l.a.createElement(YEe,{key:e.get("uuid"),viewFields:n,groupViewRecords:r,viewRecords:t,group:o,filters:i,viewField:e,index:d,size:e.get("size"),rootHeight:s})})),f&&g&&l.a.createElement(g,null))},JEe=function(e){var t,n,r,o,i=e.viewRecords,u=e.viewFields,c=e.groupViewRecords,s=e.group,d=e.filters,f=G3(kCe),p=G3($ye),h=G3(cie),v=xpe(EA.FIELD).canCreate(),g=gP(Object(a.useState)(null),2),m=g[0],y=g[1],b=Object(a.useRef)(null),w=U$(z$(HEe,{activationConstraint:{distance:8}})),_=Object(a.useMemo)((function(){return k_(u,(function(e){return e.get("uuid")===m}))}),[m,u]),k=u.get(_),C=function(){var e=mC(X_.mark((function e(t){var n,r,o,i,a,l;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.active,i=t.over,y(null),o.id===i.id){e.next=7;break}return a=null==(n=w_(u,(function(e){return e.get("uuid")===o.id})))?void 0:n.get("field_uuid"),l=null==(r=w_(u,(function(e){return e.get("uuid")===i.id})))?void 0:r.get("field_uuid"),e.next=7,f.updateFieldOrder(a,l);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(bU,{sensors:w,modifiers:[nH],collisionDetection:Z$,onDragStart:function(e){y(e.active.id),h.$root&&(b.current=h.$root.getBoundingClientRect())},onDragEnd:C,autoScroll:{threshold:{x:.2,y:0}}},l.a.createElement(KU,{items:E_(u,(function(e){return WEe(WEe({},e),{},{id:e.get("uuid")})})),strategy:zU},l.a.createElement("div",{className:u$("lakex-viewer-grid-header")},l.a.createElement("div",{className:"lakex-viewer-grid-header-left"},l.a.createElement("div",{className:"lakex-viewer-grid-header-main"},l.a.createElement(XEe,{viewFields:u,viewRecords:i,groupViewRecords:c,group:s,filters:d,sticky:!0,stickyColNum:p.stickyColNum,rootHeight:(null==(t=b.current)?void 0:t.height)||"100%"}))),l.a.createElement("div",{className:u$("lakex-viewer-grid-header-right",{"has-blank":v})},l.a.createElement("div",{className:"lakex-viewer-grid-header-main"},l.a.createElement(XEe,{viewFields:u,viewRecords:i,groupViewRecords:c,group:s,filters:d,sticky:!1,stickyColNum:p.stickyColNum,rootHeight:(null==(n=b.current)?void 0:n.height)||"100%",hasBlank:v})))),l.a.createElement(NU,{style:{height:null==(r=b.current)?void 0:r.height},dropAnimation:null},k?l.a.createElement("div",{className:"lakex-viewer-grid-header-drag-overlay"},l.a.createElement(YEe,{viewFields:u,viewRecords:i,groupViewRecords:c,group:s,filters:d,viewField:k,index:_,size:k.get("size"),rootHeight:(null==(o=b.current)?void 0:o.height)||"100%"})):null)))},ZEe=function(e){var t=e.cellNum;return l.a.createElement("div",{className:"lakex-viewer-grid-footer-column-name"},uw("已选择 $1 个单元格",t))},QEe=function(e){var t=e.viewField,n=e.viewRecords,r=G3(Tye).Statistics;return r?l.a.createElement(r,{viewField:t,recordIds:n.map((function(e){return e.get("record_uuid")}))}):null},eOe=function(e){var t=e.width,n=e.viewField,r=e.viewRecords,o=pye(),i=null==o?void 0:o.getRangeAt(0),u=i?(i.end.column-i.start.column+1)*(i.end.row-i.start.row+1):0;return Object(a.useMemo)((function(){return l.a.createElement("div",{className:"lakex-viewer-grid-footer-column",style:{width:t+"px"}},u>1?l.a.createElement(ZEe,{cellNum:u}):l.a.createElement(QEe,{viewField:n,viewRecords:r}))}),[u,n,r])},tOe=function(e){var t=e.viewRecords,n=e.viewFields,r=e.indexColWidth,o=e.defaultColWidth,i=e.stickyColNum,a=e.sticky,u=a?S_(n,0,i):S_(n,i,n.length);return l.a.createElement(l.a.Fragment,null,E_(u,(function(e,n){if(!e.get("field"))return null;var u=n+(a?0:i);return 0===u?l.a.createElement(eOe,{key:e.get("uuid")+"_"+u,width:r+(e.get("size")||o),viewField:e,viewRecords:t}):l.a.createElement("div",{key:e.get("uuid")+"_"+u,className:"lakex-viewer-grid-footer-column",style:{width:(e.get("size")||o)+"px"}},l.a.createElement(QEe,{viewField:e,viewRecords:t}))})))},nOe=function(e){var t=e.viewRecords,n=e.viewFields,r=G3($ye),o=r.indexColWidth,i=r.defaultColWidth,a=r.stickyColNum;return l.a.createElement("div",{className:"lakex-viewer-grid-footer"},l.a.createElement("div",{className:"lakex-viewer-grid-footer-left"},l.a.createElement(tOe,{viewRecords:t,viewFields:n,indexColWidth:o,defaultColWidth:i,stickyColNum:a,sticky:!0})),l.a.createElement("div",{className:"lakex-viewer-grid-footer-right"},l.a.createElement(tOe,{viewRecords:t,viewFields:n,indexColWidth:o,defaultColWidth:i,stickyColNum:a,sticky:!1})))},rOe=["style","context"],oOe=["style","context","item"];function iOe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aOe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iOe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iOe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lOe=function(e){var t=e.stickyPaneWidth,n=e.isUngroup,r=e.groupField,o=e.groupOption,i=e.viewRecords,a=e.fields,u=e.isFolding,c=e.onFold,s=G3(Cie),d=G3($ye),f=G3(Tye),p=G3(YCe,{optional:!0}),h=null==s?void 0:s.getFieldComponent(null==r?void 0:r.get("type")),v=f.Statistics,g=null==p?void 0:p.FoldIcon;return l.a.createElement("div",{className:u$("lakex-viewer-grid-group-header",{folded:u})},l.a.createElement("div",{className:"left",style:{width:t}},l.a.createElement("div",{className:u$("lakex-viewer-grid-group-header-index",{"no-sticky-col":0===d.stickyColNum})},g&&l.a.createElement(g,{isFolding:u,onFold:c}),n?uw("（空）"):h&&l.a.createElement("div",{className:"lakex-viewer-grid-group-field"},l.a.createElement(h,{readonly:!0,field:r,cell:o,checkCell:!1,writeable:!1}))),S_(a,0,d.stickyColNum).map((function(e,t){var n;return l.a.createElement("div",{key:"group_"+(null==(n=e.get("field"))?void 0:n.get("uuid"))+"_"+t,className:u$("lakex-viewer-grid-group-header-column sticky")},v?l.a.createElement(v,{viewField:e,recordIds:i.map((function(e){return e.get("record_uuid")}))}):null)}))),l.a.createElement("div",{className:"right"},S_(a,d.stickyColNum,a.length).map((function(e,t){var n;return l.a.createElement("div",{key:"group_"+(null==(n=e.get("field"))?void 0:n.get("uuid"))+"_"+t,className:u$("lakex-viewer-grid-group-header-column"),style:{width:e.get("size")+"px"}},v?l.a.createElement(v,{viewField:e,recordIds:i.map((function(e){return e.get("record_uuid")}))}):null)}))))},uOe=function(e){var t,n,r,o,i=e.isSameGroup,a=e.recordIndexMap,u=e.active,c=e.over,s=e.record,d=null==(n=null==(t=null==u?void 0:u.data.current)?void 0:t.sortable)?void 0:n.index,f=null==(o=null==(r=null==c?void 0:c.data.current)?void 0:r.sortable)?void 0:o.index;if(!c||!u)return null;if(!i&&c.id===s.id&&c.id!==u.id){var p=a[c.id].isGroupFirst,h=a[c.id].isGroupLast;return l.a.createElement("div",{className:u$("lakex-viewer-grid-group-dragger-line",{top:d>f,bottom:d<f,first:p,last:h})})}return null},cOe=function(e){var t=e.index,n=e.record,r=e.viewRecords,o=e.viewFields,i=e.viewConfig,u=e.listeners,c=void 0===u?{}:u,s=e.isReadonly,d=e.setNodeRef,f=e.style,p=e.attributes,h=e.isGroupLast,v=e.isSameGroup,g=e.recordIndexMap,m=e.active,y=e.over,b=gP(Object(a.useState)(!1),2),w=b[0],_=b[1];return l.a.createElement("div",aOe({ref:s?void 0:d,className:"lakex-viewer-grid-group-row",style:f,onMouseOver:function(){_(!0)},onMouseLeave:function(){_(!1)}},p),l.a.createElement(jEe,{key:(null==n?void 0:n.id)+"_sticky_"+t,index:t,isHover:w,record:n.viewRecord,viewRecords:r,viewFields:o,viewConfig:i,sticky:!0,isGroupLast:h,listeners:c}),l.a.createElement(jEe,{key:(null==n?void 0:n.id)+"_"+t,index:t,isHover:w,record:n.viewRecord,viewRecords:r,viewFields:o,viewConfig:i,sticky:!1,isGroupLast:h}),l.a.createElement(uOe,{isSameGroup:v,recordIndexMap:g,viewRecords:r,active:m,over:y,record:n}))},sOe=function(e){var t=e.stickyPaneWidth,n=e.index,r=e.record,o=e.groupViewRecords,i=e.viewFields,a=e.viewConfig,u=e.viewRecords,c=e.recordIndexMap,s=e.groupFolding,d=G3(Tye),f=G3(YCe,{optional:!0}),p=xpe(EA.TABLE).isReadonly(),h=c[r.id],v=h.groupIndex,g=h.isGroupFirst,m=h.isGroupLast,y=o[v],b=y.key||d.UNGROUP_KEY,w=s.has(b),_=null==d?void 0:d.AddRecord,k=null,C=tH({id:r.id,disabled:p}),E=C.attributes,O=C.listeners,S=C.setNodeRef,x=C.transform,j=C.transition,I=C.isDragging,R=C.over,A=C.active;if(!w){var D={transform:"",transition:j,opacity:I?0:1},P=!(!A||!R)&&c[A.id].groupIndex===c[R.id].groupIndex;P&&(D.transform=d6.Transform.toString(x)||""),k=l.a.createElement(cOe,{index:n,record:r,viewRecords:u,viewFields:i,viewConfig:a,listeners:O,isReadonly:p,setNodeRef:S,style:D,attributes:E,isGroupLast:m,isSameGroup:P,recordIndexMap:c,active:A,over:R})}return l.a.createElement("td",null,g&&l.a.createElement(lOe,{stickyPaneWidth:t,isUngroup:!y.option,groupField:y.field,groupOption:y.option,viewRecords:y.viewRecords,fields:i,isFolding:w,onFold:function(e){null==f||f.setGroupFolding(a.get("view_uuid"),y.field.get("uuid"),b,e)}}),k,!p&&m&&!w&&l.a.createElement("div",{className:"lakex-viewer-grid-row-container sticky",style:{width:t}},_?l.a.createElement(_,{inGroup:!0,index:n,viewGroupRecord:y,viewRecords:u,viewFields:i}):null))},dOe=function(e,t,n,r){var o=G3(Jye),i=G3(kCe),l=G3(fye),u=G3(MI),c=gP(Object(a.useState)(null),2),s=c[0],d=c[1],f=gP(Object(a.useState)([]),2),p=f[0],h=f[1],v=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e>=0&&s&&p.includes(s)&&r>0){var o=l.createGridSelectionByScope({row:e,column:0},{row:e+r-1,column:n.length-1},t.length,n.length);o&&l.setSelection(o)}},m=function(){var n=mC(X_.mark((function n(a){var l,c,s,f,m,y,b,w,_,k,C,E,O,S,x,j,I,R,A,D,P;return X_.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(y=a.active,b=a.over,!(y.id!==b.id||p.length>1)){n.next=20;break}if(w=y.id,_=b.id,k=e[w].groupIndex,C=e[_].groupIndex,E=t[k]||null,O=t[C]||null,null==r||!r.get("keep_sort")||E!==O){n.next=11;break}return g.a.warn(uw("取消排序后，可进行拖拽")),n.abrupt("return");case 11:return E&&O&&E!==O&&(S=null==(l=y.data.current.sortable)?void 0:l.index,x=null==(c=b.data.current.sortable)?void 0:c.index,j=u.getOriginViewRecords(),I=k_(j,(function(e){return e.get("record_uuid")===w})),R=k_(j,(function(e){return e.get("record_uuid")===_})),S<x&&I>R&&(_=null==(s=j[R+1])?void 0:s.record_uuid),S>x&&I<R&&(_=null==(f=j[R-1])?void 0:f.record_uuid)),n.next=14,i.updateRecordOrder(p.length>0?p:w,_,O);case 14:if(null==r||!r.get("keep_sort")){n.next=20;break}return A=u.getFlatViewRecords(r.get("view_uuid")),D=k_(A,(function(e){return e.get("record_uuid")===w})),o.scrollIntoView({index:D,align:"start"}),g.a.warn(uw("当前处于保持排序状态，为您重新定位")),n.abrupt("return");case 20:P=null==(m=y.data.current.sortable)?void 0:m.index,v(P,p.length),d(null),h([]);case 24:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),y=U$(z$(Vz,{activationConstraint:{distance:8}}));return{activeId:s,selectedIds:p,sensors:y,onDragStart:function(e){var r;d(e.active.id);var o=l.getSelection(),i=null==(r=e.active.data.current.sortable)?void 0:r.index;if(o&&l.isRowSelection()&&l.isInRowsSelect(i)){var a=(null==l?void 0:l.getRecordIds(o))||[];h(a),function(e){var r=l.createRowGridSelectionByIndex(e,t.length,n.length);r&&l.setSelection(r)}(i)}else h([])},onDragEnd:m}},fOe=function(e){var t=e.style,n=e.context,r=Y3(e,rOe),o=n.rootRect,i=n.useWindowScroll;return l.a.createElement("table",aOe(aOe({},r),{},{style:aOe(aOe({},t),{},{width:i?"auto":"100%",minWidth:i?"750px":"auto",minHeight:i?0:null==o?void 0:o.height})}))},pOe=l.a.forwardRef((function(e,t){var n=e.style,r=e.context,o=e.children,i=G3(xie);return r.useWindowScroll?l.a.createElement("tbody",{ref:t,style:{height:"36px"}},o):l.a.createElement("thead",{ref:t,style:aOe(aOe({},n),{},{zIndex:null==i?void 0:i.zIndex.gridHeader})},o)})),hOe=l.a.forwardRef((function(e,t){var n=e.style,r=e.context,o=e.children,i=G3(xie);return r.useWindowScroll?l.a.createElement("tbody",{ref:t,style:{height:"36px"}},o):l.a.createElement("tfoot",{ref:t,style:aOe(aOe({},n),{},{zIndex:null==i?void 0:i.zIndex.gridFooter})},o)})),vOe=function(e){var t,n=e.style,r=e.context,o=e.item,i=Y3(e,oOe),u=gP(Object(a.useState)(0),2),c=u[0],s=u[1],d=i["data-known-size"],f={"--child-height":"".concat(c,"px")},p=null==(t=r.recordIndexMap[o.id])?void 0:t.totalIndex;return Object(a.useEffect)((function(){s((function(e){return 0===d?e:d}))}),[d]),l.a.createElement("tr",aOe(aOe({className:"height-preserving-tr"},i),{},{"data-tr-row":p,style:aOe(aOe({},n),f)}))},gOe=function(e){var t=e.groupViewRecords,n=e.viewFields,r=e.viewConfig,o=e.group,i=e.filters,c=e.stickyPaneWidth,s=e.recordHeight,d=e.rootRect,f=e.useWindowScroll,p=e.customScrollParent,h=e.customModalContainer,v=e.disableVirtualScroll,g=G3(Jye),m=Poe(),y=G3(Tye),b=G3(YCe,{optional:!0}),w=null==y?void 0:y.AddRecord,_=function(e){return Object(a.useMemo)((function(){for(var t={},n=[],r=[],o=0,i=0;i<e.length;i++){var a=e[i].viewRecords||[];i>0&&(o+=(e[i-1].viewRecords||[]).length);for(var l=0;l<a.length;l++){var u=a[l];t[u.get("record_uuid")]={groupIndex:i,totalIndex:o+l,indexInGroup:l,isGroupFirst:0===l,isGroupLast:l===a.length-1},n.push({id:u.get("record_uuid"),viewRecord:u}),r.push(u)}}return{recordIndexMap:t,allRecords:n,viewRecords:r}}),[e])}(t),k=_.allRecords,C=_.viewRecords,E=_.recordIndexMap,O=dOe(E,t,n,r),S=O.activeId,x=O.selectedIds,j=O.sensors,I=O.onDragStart,R=O.onDragEnd,A=xpe(EA.RECORD).canCreate(),D=gP(Object(a.useState)((function(){return(null==b?void 0:b.getGroupFolding(r.get("view_uuid"),o.get("field_uuid")))||new Set})),2),P=D[0],M=D[1],T=Object(a.useRef)(null),F=Object(a.useMemo)((function(){var e=C.filter((function(e){var t=e.get("group_item_key")||y.UNGROUP_KEY,n=P.has(t),r=e.get("record_uuid");return!!E[r].isGroupFirst||!n})).map((function(e){return{id:e.get("record_uuid"),viewRecord:e}}));return S?e.filter((function(e){var t=e.id;return t===S||!x.includes(t)})):e}),[C,S,x,P,E]),N=F.findIndex((function(e){return e.id===S})),V=F[N];return Object(a.useEffect)((function(){var e=null==b?void 0:b.onGroupFoldingChange((function(e){var t=r.get("view_uuid"),n=o.get("field_uuid");if(e.viewId===t&&e.fieldId===n){var i=e.data[t][n];M(i),m()}}));return function(){null==e||e.destroy()}}),[b,r.get("view_uuid"),o.get("field_uuid")]),Object(a.useEffect)((function(){T.current&&(null==g||g.setVirtuosoRef(T.current))}),[g,T]),Gle((function(){null==g||g.destroy()})),0===k.length&&A?w?l.a.createElement(w,{inGroup:!0,index:-1,viewRecords:[],viewFields:n}):null:l.a.createElement(bU,{sensors:j,modifiers:[aH,iH],collisionDetection:Z$,onDragStart:I,onDragEnd:R,autoScroll:{threshold:{x:0,y:.2}}},l.a.createElement(KU,{items:F,strategy:qU},l.a.createElement(l.a.Fragment,null,l.a.createElement(s1,{ref:T,useWindowScroll:f,customScrollParent:p,context:{rootRect:d,useWindowScroll:f,groupFolding:P,ungroupKey:y.UNGROUP_KEY,recordIndexMap:E},components:{Table:fOe,TableHead:pOe,TableFoot:hOe,TableRow:vOe},isScrolling:function(e){null==g||g.isScrolling(e)},onScroll:null==g?void 0:g.emitScrollEvent,data:F,defaultItemHeight:s,itemSize:function(e){if(void 0===e.dataset.index)return s;var n=parseInt(e.dataset.index),r=F[n],o=E[r.id],i=o.isGroupFirst,a=o.isGroupLast,l=o.groupIndex,u=t[l].key||y.UNGROUP_KEY,c=P.has(u);return(c?0:s)+(i?56:0)+(a&&!c&&A?40:0)+(n===F.length-1?20:0)},increaseViewportBy:v?Number.MAX_SAFE_INTEGER:360,style:{width:"100%",height:(null==d?void 0:d.height)||0,overflow:"overlay"},fixedHeaderContent:function(){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(JEe,{groupViewRecords:t,viewFields:n,viewConfig:r,group:o,filters:i})))},fixedFooterContent:function(){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(nOe,{viewRecords:C,viewFields:n,group:o,stickyPaneWidth:c})))},itemContent:function(e,o){var i=e;return F.length!==C.length&&(i=E[o.id].totalIndex),l.a.createElement(l.a.Fragment,null,l.a.createElement(sOe,{key:o.id,groupViewRecords:t,stickyPaneWidth:c,index:i,record:o,viewFields:n,viewConfig:r,viewRecords:C,recordIndexMap:E,groupFolding:P}),e===F.length-1?l.a.createElement("div",{className:"lakex-viewer-grid-group-gap-line"}):null)}}),Object(u.createPortal)(l.a.createElement(NU,{dropAnimation:null,style:{width:"".concat(d.width,"px"),left:"".concat(d.left,"px"),overflow:"hidden"}},V?l.a.createElement("div",{className:u$("lakex-viewer-grid-group-row",{count:x.length>0}),style:{"--count":"'".concat(x.length,"'")}},l.a.createElement(jEe,{index:N,record:V.viewRecord,viewRecords:C,viewFields:n,viewConfig:r,sticky:!0,isGroupLast:!1}),l.a.createElement(jEe,{index:N,record:V.viewRecord,viewRecords:C,viewFields:n,viewConfig:r,sticky:!1,isGroupLast:!1})):null),h))))},mOe=["style","context"],yOe=["style","context","item"];function bOe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wOe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bOe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bOe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _Oe=function(e){var t=e.index,n=e.record,r=e.viewRecords,o=e.viewFields,i=e.viewConfig,u=e.listeners,c=void 0===u?{}:u,s=e.count,d=void 0===s?0:s,f=xpe(EA.FIELD).canCreate,p=gP(Object(a.useState)(!1),2),h=p[0],v=p[1];return l.a.createElement("div",{className:u$("lakex-viewer-grid-list-row",{count:d>0}),style:{"--count":"'".concat(d,"'")},onMouseOver:function(){v(!0)},onMouseLeave:function(){v(!1)}},l.a.createElement(jEe,{index:t,isHover:h,record:n,viewRecords:r,viewFields:o,viewConfig:i,sticky:!0,listeners:c,disableDrag:!(null==i||!i.get("keep_sort"))}),l.a.createElement(jEe,{index:t,isHover:h,record:n,viewRecords:r,viewFields:o,viewConfig:i,sticky:!1,hasBlank:f(),disableDrag:!(null==i||!i.get("keep_sort"))}))},kOe=function(e){var t=e.index,n=e.record,r=e.viewRecords,o=e.viewFields,i=e.viewConfig,a=!xpe(EA.TABLE).canUpdate()||!(null==i||!i.get("keep_sort")),u=tH({id:n.get("record_uuid"),disabled:a}),c=u.attributes,s=u.listeners,d=u.setNodeRef,f=u.transform,p=u.transition,h=u.isDragging,v={transform:d6.Transform.toString(f),transition:p,zIndex:h?"100":"auto",opacity:h?0:1};return l.a.createElement("td",wOe({ref:a?void 0:d,style:v},c),l.a.createElement(_Oe,{index:t,record:n,viewRecords:r,viewFields:o,viewConfig:i,listeners:s}))},COe=function(e,t){var n=G3(kCe),r=G3(fye),o=gP(Object(a.useState)(null),2),i=o[0],l=o[1],u=gP(Object(a.useState)([]),2),c=u[0],s=u[1],d=function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n>=0&&i&&c.includes(i)&&o>0){var a=r.createGridSelectionByScope({row:n,column:0},{row:n+o-1,column:t.length-1},e.length,t.length);a&&r.setSelection(a)}},f=function(){var e=mC(X_.mark((function e(t){var r,o,i,a,u,f;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.active,i=t.over,!(o.id!==i.id||c.length>1)){e.next=6;break}return a=o.id,u=i.id,e.next=6,n.updateRecordOrder(c.length>0?c:a,u);case 6:f=null==(r=o.data.current.sortable)?void 0:r.index,d(f,c.length),l(null),s([]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=U$(z$(Vz,{activationConstraint:{distance:8}}));return{activeId:i,selectedIds:c,sensors:p,onDragStart:function(n){var o;l(n.active.id);var i=r.getSelection(),a=null==(o=n.active.data.current.sortable)?void 0:o.index;if(i&&r.isRowSelection()&&r.isInRowsSelect(a)){var u=(null==r?void 0:r.getRecordIds(i))||[];s(u),function(n){var o=r.createRowGridSelectionByIndex(n,e.length,t.length);o&&r.setSelection(o)}(a)}else s([])},onDragEnd:f}},EOe=function(e){var t=e.style,n=e.context,r=Y3(e,mOe),o=n.rootRect,i=n.useWindowScroll;return l.a.createElement("table",wOe(wOe({},r),{},{style:wOe(wOe({},t),{},{width:i?"auto":"100%",minWidth:i?"750px":"auto",minHeight:i?0:null==o?void 0:o.height})}))},OOe=l.a.forwardRef((function(e,t){var n=e.style,r=e.context,o=e.children,i=G3(xie);return r.useWindowScroll?l.a.createElement("tbody",{ref:t,style:{height:"36px"}},o):l.a.createElement("thead",{ref:t,style:wOe(wOe({},n),{},{zIndex:null==i?void 0:i.zIndex.gridHeader})},o)})),SOe=l.a.forwardRef((function(e,t){var n=e.style,r=e.context,o=e.children,i=G3(xie);return r.useWindowScroll?l.a.createElement("tbody",{ref:t,style:{height:"36px"}},o):l.a.createElement("tfoot",{ref:t,style:wOe(wOe({},n),{},{zIndex:null==i?void 0:i.zIndex.gridFooter})},o)})),xOe=function(e){var t=e.style,n=e.context,r=e.item,o=Y3(e,yOe),i=gP(Object(a.useState)(0),2),u=i[0],c=i[1],s=o["data-known-size"],d={"--child-height":"".concat(u,"px")},f=n.recordIndexMap[r.id];return Object(a.useEffect)((function(){c((function(e){return 0===s?e:s}))}),[s]),l.a.createElement("tr",wOe(wOe({className:"height-preserving-tr"},o),{},{"data-tr-row":f,style:wOe(wOe({},t),d)}))},jOe=function(e){var t=e.viewRecords,n=e.viewFields,r=e.viewConfig,o=e.filters,i=e.stickyPaneWidth,c=e.recordHeight,s=e.rootRect,d=e.useWindowScroll,f=e.customScrollParent,p=e.customModalContainer,h=e.disableVirtualScroll,v=xpe(EA.RECORD).canCreate(),g=G3(Jye),m=G3(Tye),y=null==m?void 0:m.AddRecord,b=Object(a.useRef)(null),w=COe(t,n),_=w.activeId,k=w.selectedIds,C=w.sensors,E=w.onDragStart,O=w.onDragEnd,S=Object(a.useMemo)((function(){var e={};return E_(t,(function(t,n){e[t.get("record_uuid")]=n})),e}),[t]),x=Object(a.useMemo)((function(){return k_(t,(function(e){return e.get("record_uuid")===_}))}),[t,_]),j=t.get(x),I=Object(a.useMemo)((function(){var e=E_(t,(function(e){return{id:e.get("record_uuid"),viewRecord:e}}));return _?e.filter((function(e){var t=e.id;return t===_||!k.includes(t)})):e}),[t,_,k]);return Object(a.useEffect)((function(){b.current&&(null==g||g.setVirtuosoRef(b.current))}),[g,b]),Gle((function(){null==g||g.destroy()})),0===t.length&&v?y?l.a.createElement(y,{viewRecords:t,viewFields:n}):null:l.a.createElement(bU,{sensors:C,modifiers:[aH,iH],collisionDetection:Z$,onDragStart:E,onDragEnd:O,autoScroll:{threshold:{x:0,y:.2}}},l.a.createElement(KU,{items:I,strategy:qU},l.a.createElement(l.a.Fragment,null,l.a.createElement(s1,{ref:b,useWindowScroll:d,customScrollParent:f,context:{rootRect:s,useWindowScroll:d,recordIndexMap:S},components:{Table:EOe,TableHead:OOe,TableFoot:SOe,TableRow:xOe},isScrolling:function(e){null==g||g.isScrolling(e)},onScroll:null==g?void 0:g.emitScrollEvent,data:I,defaultItemHeight:c,itemSize:function(e){if(void 0===e.dataset.index)return c;var t=parseInt(e.dataset.index);return c+(t===I.length-1&&v?40:0)},increaseViewportBy:h?Number.MAX_SAFE_INTEGER:360,style:{width:"100%",height:(null==s?void 0:s.height)||0,overflow:"overlay"},fixedHeaderContent:function(){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(JEe,{viewRecords:t,viewFields:n,viewConfig:r,filters:o})))},fixedFooterContent:function(){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(nOe,{viewRecords:t,viewFields:n,stickyPaneWidth:i})))},itemContent:function(e,o){var a=o.viewRecord,u=o.id;if(!a)return null;var c=e;return I.length!==t.length&&(c=S[u]>=0?S[u]:e),l.a.createElement(l.a.Fragment,null,l.a.createElement(kOe,{key:a.get("record_uuid"),index:c,record:a,viewRecords:t,viewFields:n,viewConfig:r}),e===I.length-1&&l.a.createElement("td",null,l.a.createElement("div",{className:"lakex-viewer-grid-row-container sticky",style:{width:i}},v&&y?l.a.createElement(y,{viewRecords:t,viewFields:n}):null)))}}),Object(u.createPortal)(l.a.createElement(NU,{dropAnimation:null,style:{width:"".concat(s.width,"px"),left:"".concat(s.left,"px"),overflow:"hidden"}},_?l.a.createElement(_Oe,{index:x,record:j,viewRecords:t,viewFields:n,viewConfig:r,count:k.length}):null),p))))},IOe=function(e){var t=e.viewRecords,n=e.groupViewRecords,r=e.viewFields,o=e.viewConfig,i=e.group,u=e.filters,c=G3(qye),s=G3($ye),d=function(){var e=G3(cie),t=G3(Jye),n=G3(R_),r=Object(a.useRef)(e.getRenderBoundingClientRect()),o=G3(R_),i=gP(Object(a.useState)((null==o?void 0:o.getValue("view.useWindowScroll"))||!1),2),l=i[0],u=i[1],c=null==o?void 0:o.getValue("view.customScrollParent"),s=(null==o?void 0:o.getValue("modal.customModalContainer"))||document.body,d=gP(Object(a.useState)((null==o?void 0:o.getValue("view.disableVirtualScroll"))||!1),2),f=d[0],p=d[1];return Object(a.useEffect)((function(){var o=Rl((function(){if(!(null==n?void 0:n.getValue("view.useWindowScroll"))){var o=e.getRenderBoundingClientRect();if(r.current=o,t.scroller){t.scroller.style.height=o.height+"px";var i=t.scroller.querySelector("table"),a=t.scroller.querySelector("div[data-viewport-type]"),l=a?a.getBoundingClientRect().height:o.height;i&&(i.style.width="100%",i.style.minWidth="auto",i.style.minHeight=l+"px")}}}),300);return window.addEventListener("resize",o),window.addEventListener("lakex_table_view_resize",o),function(){window.removeEventListener("resize",o),window.removeEventListener("lakex_table_view_resize",o)}}),[e]),Object(a.useEffect)((function(){var t=null==o?void 0:o.onConfigurationChange((function(t){var n=t.key,o=t.value;if("view.useWindowScroll"===n){var i=e.getRenderBoundingClientRect();r.current=i,u(o)}else"view.disableVirtualScroll"===n&&p(o)}));return function(){null==t||t.destroy()}}),[]),{rootRect:r.current,useWindowScroll:l,customScrollParent:c,customModalContainer:s,disableVirtualScroll:f}}(),f=d.rootRect,p=d.useWindowScroll,h=d.customScrollParent,v=d.customModalContainer,g=d.disableVirtualScroll,m=Object(a.useMemo)((function(){return c.getRowHeight(null==o?void 0:o.get("record_height"))}),[c,null==o?void 0:o.get("record_height")]),y=Object(a.useMemo)((function(){var e=i?null==s?void 0:s.groupRowGap:0;return((null==s?void 0:s.getStickyPaneWidth(r||[]))||0)+e}),[s,r]);return Object(a.useEffect)((function(){var e=function(e){("ResizeObserver loop completed with undelivered notifications."===e.message||"ResizeObserver loop limit exceeded"===e.message)&&e.stopImmediatePropagation()};return window.addEventListener("error",e),function(){window.removeEventListener("error",e)}}),[]),l.a.createElement("div",{className:u$("lakex-viewer-grid-content",{"in-group":!!i})},i?l.a.createElement(gOe,{groupViewRecords:n,viewFields:r,viewConfig:o,group:i,filters:u,stickyPaneWidth:y,recordHeight:m,rootRect:f,useWindowScroll:p,customScrollParent:h,customModalContainer:v,disableVirtualScroll:g}):l.a.createElement(jOe,{viewRecords:t,viewFields:r,viewConfig:o,filters:u,stickyPaneWidth:y,recordHeight:m,rootRect:f,useWindowScroll:p,customScrollParent:h,customModalContainer:v,disableVirtualScroll:g}))},ROe=l.a.forwardRef((function(e,t){var n=G3(bye),r=Rpe({viewId:e.viewId}),o=l.a.createElement("div",{ref:t,className:"lakex-viewer-grid"},l.a.createElement("div",{className:"lakex-viewer-grid-inner"},l.a.createElement(IOe,{viewRecords:r.viewRecords,groupViewRecords:r.groupViewRecords,viewFields:r.viewFields,viewConfig:r.viewConfig,group:r.group,filters:r.filters}))),i=null==n?void 0:n.SelectionContainer;return i?l.a.createElement(i,null,o):o}));function AOe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DOe(e,t,n){return t=P_(t),D_(e,POe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function POe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(POe=function(){return!!e})()}var MOe=function(e){function t(){var e;return Ub(this,t),(e=DOe(this,t,arguments)).viewType=BC.GRID,e.title=uw("表格视图"),e.desc=uw("规范化存储和展示数据"),e.icon=function(e){return React.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AOe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AOe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"GridView",size:16},e))},e.colorCls="yuque-color-green-6",e.Component=ROe,e}return F_(t,e),Wb(t)}(Ole),TOe=Object.defineProperty,FOe=Object.getOwnPropertyDescriptor,NOe=function(e,t,n,r){for(var o,i=r>1?void 0:r?FOe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&TOe(t,n,i),i},VOe=function(){return Wb((function e(){Ub(this,e)}),[{key:"_isReadonly",get:function(){return this._abilityService.isReadonly(EA.TABLE)}},{key:"_currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"_hasSelection",value:function(){var e;return null==(e=this._selectionService)?void 0:e.hasSelection()}},{key:"init",value:function(){this._viewerGridService.init()}},{key:"registerViewer",value:function(e){e.registerItem(new MOe({onError:e.onError}))}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"grid-field-move-up",hotkey:"up",name:"up 向上移动选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveUp()}}),e.registerItem({id:"grid-field-move-down",hotkey:"down",name:"down 向下移动选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveDown()}}),e.registerItem({id:"grid-field-move-left",hotkey:"left",name:"left 向左移动选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveLeft()}}),e.registerItem({id:"grid-field-move-right",hotkey:"right, tab",name:"right 向右移动选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveRight()}}),e.registerItem({id:"grid-field-move-top",hotkey:"⌘+up",name:"移动到第一行选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveTop()}}),e.registerItem({id:"grid-field-move-bottom",hotkey:"⌘+down",name:"移动到最后一行选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveBottom()}}),e.registerItem({id:"grid-field-move-first-left",hotkey:"⌘+left",name:"移动到第一列选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFirstLeft()}}),e.registerItem({id:"grid-field-move-last-right",hotkey:"⌘+right",name:"移动到最后一列选区",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveLastRight()}}),e.registerItem({id:"grid-field-focus-move-up",hotkey:"shift+up",name:"选区终点上移",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFocusUp()}}),e.registerItem({id:"grid-field-focus-move-down",hotkey:"shift+down",name:"选区终点下移",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFocusDown()}}),e.registerItem({id:"grid-field-focus-move-left",hotkey:"shift+left",name:"选区终点左移",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFocusLeft()}}),e.registerItem({id:"grid-field-focus-move-right",hotkey:"shift+right",name:"选区终点右移",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._hasSelection();return e&&n},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.moveFocusRight()}}),e.registerItem({id:"grid-field-select-all",hotkey:"⌘+A",name:"全选",enableOnInput:!1,isEnable:function(){return t._currentViewType===BC.GRID},onHotKey:function(e){var n;e.preventDefault(),null==(n=t._selectionService)||n.selectAll()}}),e.registerItem({id:"grid-add-record-before",hotkey:"⌘+shift+enter",name:"向上插入行",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._isReadonly,r=t._hasSelection();return!n&&e&&r},onHotKey:function(e){var n,r,o,i;e.preventDefault();var a=t._readService.getFlatViewRecords(),l=null==(n=t._selectionService)?void 0:n.getFieldValue(),u=k_(a,(function(e){return e.get("record_uuid")===(null==l?void 0:l.recordId)}));if(!(u<0)){var c=t._readService.getViewFields(),s=a.get(u),d=(null==(r=t._selectionService)?void 0:r.getSelection()).anchor.column;t._commandService.execCommand("addEmptyRecord",{sourceRecordId:s.get("record_uuid"),direction:"before",groupItemKey:s.get("group_item_key")});var f=null==(o=t._selectionService)?void 0:o.createGridSelectionByIndex(u,d,((null==a?void 0:a.length)||0)+1,(null==c?void 0:c.length)||0);null==(i=t._selectionService)||i.scrollToSelection(f,"start")}}}),e.registerItem({id:"grid-add-record-after",hotkey:"shift+enter",name:"向下插入行",enableOnInput:!1,isEnable:function(){var e=t._currentViewType===BC.GRID,n=t._isReadonly,r=t._hasSelection();return!n&&e&&r},onHotKey:function(e){var n,r,o,i;e.preventDefault();var a=t._readService.getFlatViewRecords(),l=null==(n=t._selectionService)?void 0:n.getFieldValue(),u=k_(a,(function(e){return e.get("record_uuid")===(null==l?void 0:l.recordId)}));if(!(u<0)){var c=t._readService.getViewFields(),s=a.get(u),d=(null==(r=t._selectionService)?void 0:r.getSelection()).anchor.column;t._commandService.execCommand("addEmptyRecord",{sourceRecordId:s.get("record_uuid"),direction:"after",groupItemKey:s.get("group_item_key")});var f=null==(o=t._selectionService)?void 0:o.createGridSelectionByIndex(u+1,d,((null==a?void 0:a.length)||0)+1,(null==c?void 0:c.length)||0);null==(i=t._selectionService)||i.scrollToSelection(f,"end")}}})}},{key:"registerScrollService",value:function(e){e.setGridScrollService(this._scrollService)}}],[{key:"pluginModule",value:function(){return pd().contribution(jye).contribution(Iye).contribution(Rye).contribution(Aye).register(this).register(Tye).register(rbe).register($ye).register(qye).register(Jye)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"viewerGrid",type:"object",title:"表格视图",properties:{stickyColNum:{type:"number",description:"冻结列个数"}}}),e.registerDefaultValue({"viewerGrid.stickyColNum":1})}}])}();function LOe(e,t,n){return t=P_(t),D_(e,BOe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function BOe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(BOe=function(){return!!e})()}VOe.pluginName="render-viewer-grid",NOe([Xs(MI)],VOe.prototype,"_readService",2),NOe([Xs(VA)],VOe.prototype,"_abilityService",2),NOe([Xs(fye),Ds()],VOe.prototype,"_selectionService",2),NOe([Xs(uA)],VOe.prototype,"_commandService",2),NOe([Xs(Jye)],VOe.prototype,"_scrollService",2),NOe([Xs(Tye)],VOe.prototype,"_viewerGridService",2),VOe=NOe([Ys({contrib:[Qoe,Qme,Toe,oie]})],VOe);var $Oe=Object.defineProperty,zOe=Object.getOwnPropertyDescriptor,UOe=function(e,t,n,r){for(var o,i=r>1?void 0:r?zOe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&$Oe(t,n,i),i},HOe=function(e){function t(){var e;return Ub(this,t),(e=LOe(this,t,arguments))._onEditingChange=e._register(new ck),e.onEditingChange=e._onEditingChange.event,e}return F_(t,e),Wb(t,[{key:"emitEditingChange",value:function(e){var t=e.editing,n=e.recordId,r=e.fieldId;this._onEditingChange.emit({recordId:n,fieldId:r,editing:t})}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);UOe([Vs()],HOe.prototype,"destroy",1),HOe=UOe([Ys()],HOe);var qOe=Object(a.memo)((function(e){var t=e.fieldType,n=e.cell,r=G3(Cie).getCellIsShowValidTip(t),o=n.errorMessage;return o&&r?l.a.createElement(h.a,{title:o,placement:"left"},l.a.createElement("span",{className:"lakex-table-grid-invalid-flag"})):null}),(function(e,t){return e.cell.updated_at===t.cell.updated_at})),WOe=function(e){var t=e.fieldType,n=e.cell,r=e.field,o=e.isSelected,i=e.boxRect,a=e.editable,u=G3(Cie).getFieldComponent(t);return u&&r?l.a.createElement(u,{key:n.updated_at,field:r,fieldUpdatedAt:r.get("updated_at"),cell:n,focus:!1,boxRect:i,isSelected:o,writeable:a}):null},GOe=function(e){var t=e.cell,n=e.field,r=e.size,o=e.rowIndex,i=e.colIndex,u=e.rowCount,c=e.colCount,s=e.minHeight,d=e.isFrozen,f=null==t?void 0:t.recordId,p=null==n?void 0:n.get("uuid"),h=xpe(EA.TABLE).isReadonly(),v=G3(kke),g=G3(bie),m=G3(fye),y=G3(xie),b=null==n?void 0:n.get("type"),w=Object(a.useRef)(null),_=vye(),k=ike({recordId:f,fieldId:p}),C=SEe(p),E=function(e,t){var n=G3(HOe),r=gP(Object(a.useState)(!1),2),o=r[0],i=r[1];return Object(a.useEffect)((function(){var r=n.onEditingChange((function(n){var r=n.recordId,o=n.fieldId,a=n.editing;r===e&&o===t&&i(a)}));return function(){r.destroy()}}),[n]),o}(f,p),O=Object(a.useMemo)((function(){return null==m?void 0:m.isActiveCell(o,i)}),[_,o,i]),S=Object(a.useMemo)((function(){return null==m?void 0:m.isInSelect(o,i)}),[_,o,i]),x=Object(a.useMemo)((function(){return null==m?void 0:m.isInRowsSelect(o)}),[_,o]),j=Object(a.useMemo)((function(){return null==m?void 0:m.isSelectionEnd(o,i)}),[_,o,i]),I=Object(a.useMemo)((function(){return O&&d?null==y?void 0:y.zIndex.gridCellFrozenPreviewer:d?null==y?void 0:y.zIndex.gridCellFrozen:O?null==y?void 0:y.zIndex.gridCellPreviewer:null==y?void 0:y.zIndex.gridCell}),[O,d]),R=gP(Object(a.useState)(0),2),A=R[0],D=R[1],P=Object(a.useCallback)((function(e){var t=e.e,n=e.recordId,r=e.fieldId,a=null==m?void 0:m.getSelection();if(t.preventDefault(),!a||null!=m&&m.isSelectOneCell()||null==m||!m.isInSelect(o,i)){var l=null==m?void 0:m.createGridSelectionByIndex(o,i,u,c);l&&(null==m||m.setSelection(l)),null==v||v.showContextMenu({from:_ke.CELL,e:t,recordId:n,fieldId:r,selection:a})}else null==v||v.showContextMenu({from:_ke.MULTI_CELL,e:t,selection:a})}),[m,v]),M=Object(a.useCallback)((function(e){null==m||m.scrollToAnchorPosition(null==m?void 0:m.getSelection(),e.clientY>window.innerHeight/2?"end":"start",(function(){null==g||g.emitDoubleClickCell({fieldId:p,recordId:f,event:e,fieldType:b})}))}),[b,p,f]),T=Object(a.useCallback)((function(e){null==g||g.emitClickEvent({eventName:"activeCellClick",data:{fieldId:p,recordId:f,event:e,fieldType:b}})}),[b,p,f,O]),F=Object(a.useMemo)((function(){return{width:r?r-20:0,height:s-12}}),[r,s]);return Object(a.useLayoutEffect)((function(){var e;if(O&&b===bC.TEXT){var t=null==(e=w.current)?void 0:e.getBoundingClientRect();t&&window.innerHeight-t.bottom<40?D(s-t.height):D(0)}else D(0)}),[O,s,b]),l.a.createElement("div",{ref:w,"data-col":i,"data-record-uuid":null==t?void 0:t.recordId,"data-field-uuid":null==n?void 0:n.get("uuid"),className:u$("lakex-viewer-grid-cell",$b({"in-select":S&&!O||x,"in-del-possible":C,"in-highlight":k,selected:O&&!x,editing:E},"height-".concat(s),s),b),style:{width:r+"px",minHeight:s,zIndex:I,transform:O?"translateY(".concat(A,"px)"):""},onContextMenu:function(e){return P({e:e,recordId:f,fieldId:p,from:_ke.CELL})},onScrollCapture:function(e){return e.stopPropagation()},onDoubleClick:M,onClick:T},l.a.createElement(WOe,{key:t.updated_at,cell:t,field:n,fieldType:b,isSelected:!!O,boxRect:F,editable:null==m?void 0:m.isEditable()}),t&&l.a.createElement(qOe,{fieldType:b,cell:t}),j&&!x&&!h&&l.a.createElement("div",{className:"lakex-viewer-grid-autofill-container"}))},KOe=function(e){var t=e.index,n=e.isHover,r=e.recordId,o=e.colCount,i=e.rowCount,u=e.cells,c=e.fieldMap,s=e.recordHeight,d=e.disableDrag,f=void 0!==d&&d,h=e.listeners,v=void 0===h?{}:h,g=e.defaultColWidth,m=G3(Rke),y=G3(fye),b=G3(kCe),w=G3(kke),_=m.ExpandRecordRecordHeaderIcon,k=null==b?void 0:b.OrderDragIcon,C=vye(),E=Object(a.useMemo)((function(){return!!C&&(null==y?void 0:y.isInRowsSelect(t))}),[C,t]),O=Object(a.useCallback)((function(e){var n=(null==y?void 0:y.getSelectRowIndexes())||[],r=(null==y?void 0:y.isRowSelection())||!1;!n.includes(t)&&!r&&(n=[t]),n=e?[].concat(Vb(n),[t]):n.filter((function(e){return e!==t}));var a=null==y?void 0:y.createRowGridSelectionByIndex(n,i,o);return a&&(null==y||y.setSelection(a)),a}),[t,i,o]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"lakex-viewer-grid-row-index",onContextMenu:function(e){e.preventDefault(),e.stopPropagation();var t=O(!E);t&&(null==w||w.showContextMenu({from:_ke.MULTI_CELL,e:e,selection:t}))}},k&&l.a.createElement(k,{listeners:v,disable:f}),n||E?l.a.createElement(p.a,{className:"lakex-viewer-grid-row-checkbox",checked:E,onChange:function(e){e.stopPropagation();var t=e.target.checked;O(t)}}):l.a.createElement("div",{className:"lakex-viewer-grid-row-number"},t+1),_&&l.a.createElement(_,{recordId:r})),j_(u,(function(e,n){var a=c[(null==e?void 0:e.fieldId)||""];return l.a.createElement(GOe,{key:r+"_"+(null==e?void 0:e.fieldId)+"_"+n,rowIndex:t,colIndex:n,rowCount:i,colCount:o,cell:e,field:null==a?void 0:a.get("field"),size:(null==a?void 0:a.get("size"))||g,minHeight:s,isFrozen:!0})})))},YOe=function(e){var t=e.index,n=e.recordId,r=e.colCount,o=e.rowCount,i=e.cells,a=e.fieldMap,u=e.recordHeight,c=e.hasBlank,s=e.stickyColNum,d=e.defaultColWidth;return l.a.createElement(l.a.Fragment,null,j_(i,(function(e,i){var c=a[(null==e?void 0:e.fieldId)||""];return l.a.createElement(GOe,{key:n+"_"+(null==e?void 0:e.fieldId)+"_"+i,rowIndex:t,colIndex:i+s,rowCount:o,colCount:r,cell:e,field:null==c?void 0:c.get("field"),size:(null==c?void 0:c.get("size"))||d,minHeight:u,isFrozen:!1})})),c&&l.a.createElement("div",{className:"lakex-viewer-grid-row-blank"}))},XOe=function(e){var t=e.index,n=e.isHover,r=e.record,o=e.fields,i=e.records,u=e.config,c=e.sticky,s=e.hasBlank,d=void 0!==s&&s,f=e.disableDrag,p=void 0!==f&&f,h=e.listeners,v=void 0===h?{}:h,g=G3(qye),m=G3(bie),y=G3(MI),b=G3(R_),w=G3($ye),_=r.get("record_uuid"),k=w.stickyColNum,C=w.defaultColWidth,E=Object(a.useMemo)((function(){return g.getRowHeight(null==u?void 0:u.get("record_height"))}),[g,null==u?void 0:u.get("record_height")]),O=Object(a.useMemo)((function(){return C_(o,(function(e,t){return e[t.get("field_uuid")]=t,e}),{})}),[o]),S=Object(a.useMemo)((function(){return y.getViewRecordCells(_)}),[_,o]),x=Object(a.useMemo)((function(){var e=new g_;return e=c?function(e,t,n){return e.slice(t,n)}(S,0,k):S.slice(k,S.length),I_(e,(function(e){return!!e}))}),[S,k,c]),j=Object(a.useCallback)((function(){(null==b?void 0:b.getValue("render.mode"))===tie.MOBILE&&m.emitClickRecord({recordId:_})}),[_]);return l.a.createElement("div",{className:"lakex-viewer-grid-row","data-row":t,"data-record-uuid":_,style:{height:E},onClick:j},c?l.a.createElement(KOe,{index:t,isHover:n,recordId:_,colCount:o.length,rowCount:i.length,recordHeight:E,fieldMap:O,cells:x,disableDrag:p,listeners:v,config:u,defaultColWidth:C}):l.a.createElement(YOe,{index:t,recordId:_,colCount:o.length,rowCount:i.length,recordHeight:E,fieldMap:O,cells:x,hasBlank:d,stickyColNum:k,defaultColWidth:C}))},JOe=Object.defineProperty,ZOe=Object.getOwnPropertyDescriptor,QOe=function(){return Wb((function e(){Ub(this,e)}),[{key:"getRecordComponent",value:function(){return XOe}}],[{key:"pluginModule",value:function(){return pd().contribution(Ske).register(this).register(Rke)}}])}();QOe.pluginName="render-viewer-grid-record",QOe=function(e,t,n,r){for(var o,i=r>1?void 0:r?ZOe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&JOe(t,n,i),i}([Ys({contrib:jye})],QOe);var eSe=Object.defineProperty,tSe=Object.getOwnPropertyDescriptor,nSe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}}],[{key:"pluginModule",value:function(){return pd().register(YCe).register(this)}}])}();nSe.pluginName="render-viewer-grid-group",nSe=function(e,t,n,r){for(var o,i=r>1?void 0:r?tSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&eSe(t,n,i),i}([Ys({contrib:Qoe})],nSe);var rSe=Object.defineProperty,oSe=Object.getOwnPropertyDescriptor,iSe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(e){}}],[{key:"pluginModule",value:function(){return pd().register(this).register(HOe)}}])}();function aSe(e,t,n){return t=P_(t),D_(e,lSe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function lSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(lSe=function(){return!!e})()}iSe.pluginName="render-viewer-grid-cell-editor",iSe=function(e,t,n,r){for(var o,i=r>1?void 0:r?oSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&rSe(t,n,i),i}([Ys({contrib:[Qoe]})],iSe);var uSe=Object.defineProperty,cSe=Object.getOwnPropertyDescriptor,sSe=function(e,t,n,r){for(var o,i=r>1?void 0:r?cSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&uSe(t,n,i),i},dSe=function(e){function t(){var e;return Ub(this,t),(e=aSe(this,t,arguments)).gridGap=20,e._onRefreshLayout=e._register(new ck),e.onRefreshLayout=e._onRefreshLayout.event,e}return F_(t,e),Wb(t,[{key:"_getViewRect",value:function(){return this._renderContext.getRenderBoundingClientRect()}},{key:"_getColCount",value:function(e){var t=5;return e<1440&&(t=Math.max(5-Math.ceil((1440-e)/300),2)),t}},{key:"_getRowCount",value:function(e,t){return Math.ceil(e/t)}},{key:"_getCardWidth",value:function(e,t){return Math.floor(Math.floor(e-20*(t+1))/t)}},{key:"getCoverHeight",value:function(e){return Math.round(e/1.6)}},{key:"_getFieldNameHeight",value:function(){return 23}},{key:"_getCardHeight",value:function(e,t,n){var r,o=40;n.get("cover_field_uuid")&&(o+=this.getCoverHeight(e));for(var i=0;i<t.length;i++){var a=t.get(i);if(!a.get("hidden")){n.get("show_field_name")&&(o+=this._getFieldNameHeight());var l=null==(r=a.get("field"))?void 0:r.get("type");l===bC.IMAGE?o+=40:l===bC.TEXT?o+=12+(0===i?28:22):o+=40,i===t.length-1&&(o-=12)}}return o}},{key:"getLayout",value:function(e,t,n){var r=this._getViewRect(),o=this._getColCount(r.width),i=this._getRowCount(e.length,o),a=this._getCardWidth(r.width,o);return{viewRect:r,width:a,height:this._getCardHeight(a,t,n),colCount:o,rowCount:i}}},{key:"refresh",value:function(){this._onRefreshLayout.emit()}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);function fSe(e,t,n){return t=P_(t),D_(e,pSe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function pSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(pSe=function(){return!!e})()}sSe([Xs(cie)],dSe.prototype,"_renderContext",2),sSe([Vs()],dSe.prototype,"destroy",1),dSe=sSe([Ys()],dSe);var hSe=Object.defineProperty,vSe=Object.getOwnPropertyDescriptor,gSe=function(e){function t(){var e;return Ub(this,t),(e=fSe(this,t,arguments))._virtuosoRef=null,e._scroller=null,e._onScroll=e._register(new ck),e.onScroll=e._onScroll.event,e.emitScrollEvent=function(t){e._onScroll.emit(t)},e}return F_(t,e),Wb(t,[{key:"virtuosoRef",get:function(){return this._virtuosoRef}},{key:"scroller",get:function(){return this._scroller}},{key:"scrollHeight",get:function(){var e;return(null==(e=this._scroller)?void 0:e.scrollHeight)||0}},{key:"viewTotalHeight",get:function(){return this.scrollHeight}},{key:"destroy",value:function(){this._virtuosoRef=null,this._scroller=null}},{key:"setVirtuosoRef",value:function(e){this._virtuosoRef=e}},{key:"setScroller",value:function(e){this._scroller=e}},{key:"scrollToIndex",value:function(e){var t;null==(t=this._virtuosoRef)||t.scrollToIndex(e)}},{key:"scrollTo",value:function(e){var t;null==(t=this._virtuosoRef)||t.scrollTo(e)}}])}($_);gSe=function(e,t,n,r){for(var o,i=r>1?void 0:r?vSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&hSe(t,n,i),i}([Ys()],gSe);var mSe=function(e){var t=e.height,n=e.onShowRecord;return l.a.createElement("div",{className:"lakex-viewer-card-record-item-cover empty",style:{height:t},onClick:n},l.a.createElement("img",{src:"https://gw.alipayobjects.com/zos/bmw-prod/94c60ed0-e53a-4ad1-9ffe-ec7fd1266b46.svg",draggable:"false"}))},ySe=function(e){var t,n=e.viewRecord,r=e.width,o=e.onShowRecord,i=function(e){var t=e.viewRecord,n=e.width,r=G3(MI),o=G3(sae),i=G3(fue),l=G3(dSe),u=null==r?void 0:r.getViewConfig(),c=null==r?void 0:r.getCell((null==u?void 0:u.get("cover_field_uuid"))||"",t.get("record_uuid")),s=Object(a.useRef)(null),d=gP(Object(a.useState)(0),2);return{carouselRef:s,cell:c,opener:o,imageService:i,viewConfig:u,getCoverHeight:function(){return null==l?void 0:l.getCoverHeight(n)},index:d[0],setIndex:d[1]}}({viewRecord:n,width:r,onShowRecord:o}),u=i.carouselRef,c=i.getCoverHeight,s=i.cell,d=i.viewConfig,f=i.opener,p=i.imageService,h=i.index,v=i.setIndex;if(null==d||!d.get("cover_field_uuid"))return null;if(null==s||!s.value||null==(t=s.value[0])||!t.src)return l.a.createElement(mSe,{height:c(),onShowRecord:o});var g=s.value||[],m=Object(a.useMemo)((function(){return g.map((function(e){return{src:p.getRenderUrl(e.src,e.width,e.height),width:e.width,height:e.height}}))||[]}),[g]);return l.a.createElement(S.a,{ref:u,className:"lakex-viewer-card-record-item-cover",arrows:!0,infinite:!1,prevArrow:l.a.createElement(g6,{type:"ArrowLeft",size:16,onClick:function(){var e;null==(e=null==u?void 0:u.current)||e.prev()}}),nextArrow:l.a.createElement(g6,{type:"ArrowRight",size:16,onClick:function(){var e;null==(e=null==u?void 0:u.current)||e.next()}}),appendDots:function(){return l.a.createElement("div",null,h+1," / ",m.length)},beforeChange:function(e,t){v(t)}},g.map((function(e,t){var n={height:c()},r=p.getThumbnailUrl(e.src,e.width,e.height,390);return n.backgroundImage="url(".concat(r,")"),n.backgroundRepeat="no-repeat",n.backgroundPosition="center center",d.get("cover_display")===AC.Clip?n.backgroundSize="cover":n.backgroundSize="contain",l.a.createElement("div",{key:e.src},l.a.createElement("div",{className:"lakex-viewer-card-record-item-image",style:n,onClick:function(n){n.preventDefault(),n.stopPropagation(),null==f||f.open("image",e.src,{list:m,index:t})}}))})))};var bSe=function(e){var t=e.cell,n=e.field,r=e.viewConfig,o=e.index,i=G3(Cie),a=i.getFieldComponent(null==n?void 0:n.get("type")),u=function(e,t){t.value,zC.isSelectLike(e.type)||zC.isImage(e.type)||zC.isSystemDate(e.type)}(n,t),c=null==i?void 0:i.getFieldIcon(n.get("type")),s=null;return 0===o&&null==(null==t?void 0:t.value)&&(s=l.a.createElement("div",{key:null==t?void 0:t.fieldId,className:u$("lakex-viewer-card-field-content first empty")},uw("未命名记录"))),l.a.createElement("div",{className:"lakex-viewer-card-cell-field"},r.get("show_field_name")&&l.a.createElement("div",{className:"lakex-viewer-card-field-name"},c&&l.a.createElement(c,{size:16}),l.a.createElement("span",{className:"lakex-viewer-card-field-name-content"},null==n?void 0:n.get("name"))),s,a&&!s&&l.a.createElement("div",{className:u$("lakex-viewer-card-field-content","".concat(n.get("type")),{first:0===o})},l.a.createElement(a,{cell:t,field:n,fieldProps:u,readonly:!0})))};function wSe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wSe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wSe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kSe=function(e){var t=e.fieldMap,n=e.cell,r=e.index,o=e.viewConfig,i=t.get(n.fieldId);return i?React.createElement(bSe,{cell:n,field:i,viewConfig:o,index:r}):null},CSe=function(e){var t=e.className,n=e.viewRecord,r=e.width,o=void 0===r?200:r,i=e.height,l=void 0===i?300:i,u=e.viewConfig,c=e.fieldMap,s=e.disableDrag,d=void 0!==s&&s,f=function(e){var t=e.viewRecord,n=G3(kke),r=G3(bie),o=G3(MI),i=vye(),l=Object(a.useMemo)((function(){return!!i&&i.getRangeAt(0).recordId===(null==t?void 0:t.get("record_uuid"))}),[i]),u=ike({recordId:null==t?void 0:t.get("record_uuid")}),c=Object(a.useCallback)((function(){var e=null==t?void 0:t.get("record_uuid");e&&(null==r||r.emitClickRecord({recordId:e}))}),[t,r]),s=Object(a.useCallback)((function(e){e.preventDefault(),null==n||n.showContextMenu({e:e,from:_ke.CARD_RECORD,recordId:null==t?void 0:t.get("record_uuid")})}),[t,n]);return{cells:o.getViewRecordCells(t.get("record_uuid")),isSelected:l,isInHighlight:u,onShowRecord:c,onShowContextMenu:s}}({viewRecord:n}),p=f.cells,h=f.isSelected,v=f.isInHighlight,g=f.onShowRecord,m=f.onShowContextMenu,y=u$("lakex-viewer-card-record-item",t,{selected:h,"in-highlight":v});if(d)return React.createElement("div",{className:y,onContextMenu:m,"data-record-uuid":null==n?void 0:n.get("record_uuid"),style:{width:o,height:l}},React.createElement(ySe,{viewRecord:n,width:o,onShowRecord:g}),React.createElement("div",{className:"lakex-viewer-card-record-item-content",onClick:g},j_(p,(function(e,t){return React.createElement(kSe,{key:e.fieldType+e.uuid,cell:e,index:t,viewConfig:u,fieldMap:c})}))));var b=tH({id:n.get("record_uuid"),disabled:d}),w=b.attributes,_=b.listeners,k=b.setNodeRef,C=b.transform,E=b.transition,O=b.isDragging,S={transform:d6.Transform.toString(C),transition:E,zIndex:O?"100":"auto",opacity:O?0:1};return React.createElement("div",_Se(_Se({ref:k,className:y,onContextMenu:m,"data-record-uuid":null==n?void 0:n.get("record_uuid"),style:_Se(_Se({},S),{},{width:o,height:l})},_),w),React.createElement(ySe,{viewRecord:n,width:o,onShowRecord:g}),React.createElement("div",{className:"lakex-viewer-card-record-item-content",onClick:g},j_(p,(function(e,t){return React.createElement(kSe,{key:e.fieldType+e.uuid,cell:e,index:t,viewConfig:u,fieldMap:c})}))))};CSe.defaultProps={isShowEmpty:!1,isShowField:!1};var ESe=["style","context"],OSe=["context"];function SSe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xSe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SSe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SSe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jSe=l.a.forwardRef((function(e,t){var n=e.style,r=e.context,o=Y3(e,ESe),i=r.colCount,a=r.cardWidth,u=r.gridGap;return l.a.createElement("div",xSe(xSe({ref:t},o),{},{style:xSe(xSe({},n),{},{display:"grid",gridTemplateColumns:"repeat(".concat(i,", ").concat(a,"px)"),columnGap:"".concat(u,"px"),padding:"0 ".concat(u,"px")})}))})),ISe=l.a.forwardRef((function(e,t){var n=e.context,r=Y3(e,OSe),o=n.colCount,i=n.gridGap,a={};return e["data-index"]<o&&(a.paddingTop="".concat(i,"px")),l.a.createElement("div",xSe(xSe({},r),{},{style:a}))})),RSe=l.a.forwardRef((function(e,t){var n=e.fields,r=e.viewRecords,o=e.viewFields,i=e.viewConfig,c=(G3(bye)||{}).SelectionContainer,s=G3(gSe),d=xpe(EA.TABLE).isReadonly(),f=function(e){var t=e.viewRecords,n=e.viewFields,r=e.viewConfig,o=G3(dSe),i=G3(bie),l=G3(R_),u=gP(Object(a.useState)(200),2),c=u[0],s=u[1],d=gP(Object(a.useState)(300),2),f=d[0],p=d[1],h=gP(Object(a.useState)(0),2),v=h[0],g=h[1],m=gP(Object(a.useState)(),2),y=m[0],b=m[1],w=gP(Object(a.useState)((null==l?void 0:l.getValue("view.useWindowScroll"))||!1),2),_=w[0],k=w[1],C=null==l?void 0:l.getValue("view.customScrollParent"),E=(null==l?void 0:l.getValue("modal.customModalContainer"))||document.body,O=gP(Object(a.useState)((null==l?void 0:l.getValue("view.disableVirtualScroll"))||!1),2),S=O[0],x=O[1],j=Object(a.useCallback)((function(){var e=null==o?void 0:o.getLayout(t,n,r);b(null==e?void 0:e.viewRect),s((null==e?void 0:e.width)||200),p((null==e?void 0:e.height)||300),g((null==e?void 0:e.colCount)||0)}),[t,n,r]);return Object(a.useEffect)((function(){var e=null==l?void 0:l.onConfigurationChange((function(e){var t=e.key,n=e.value;"view.useWindowScroll"===t?(j(),k(n)):"view.disableVirtualScroll"===t&&x(n)})),t=null==i?void 0:i.onViewWidthChange((function(){setTimeout((function(){j()}),100)}));return function(){null==e||e.destroy(),null==t||t.destroy()}}),[j]),Object(a.useEffect)((function(){var e=Rl((function(){_||j()}),300);window.addEventListener("resize",e),window.addEventListener("lakex_table_view_resize",e);var t=null==o?void 0:o.onRefreshLayout((function(){j()}));return function(){window.removeEventListener("resize",e),window.removeEventListener("lakex_table_view_resize",e),null==t||t.destroy()}}),[_,j]),Object(a.useEffect)((function(){j()}),[j]),{rootRect:y,gridGap:null==o?void 0:o.gridGap,cardWidth:c,cardHeight:f,colCount:v,useWindowScroll:_,customScrollParent:C,customModalContainer:E,disableVirtualScroll:S}}({viewRecords:r,viewFields:o,viewConfig:i}),p=f.rootRect,h=f.cardWidth,v=f.cardHeight,g=f.colCount,m=f.gridGap,y=f.useWindowScroll,b=f.customScrollParent,w=f.customModalContainer,_=f.disableVirtualScroll,k=function(){var e=G3(kCe),t=gP(Object(a.useState)(null),2),n=t[0],r=t[1],o=function(){var t=mC(X_.mark((function t(n){var o,i,a,l;return X_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r(null),o=n.active,i=n.over,o.id===i.id){t.next=7;break}return a=o.id,l=i.id,t.next=7,e.updateRecordOrder(a,l);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{activeId:n,sensors:U$(z$(Vz,{activationConstraint:{distance:8}})),onDragStart:function(e){r(e.active.id)},onDragEnd:o}}(),C=k.activeId,E=k.sensors,O=k.onDragStart,S=k.onDragEnd,x=function(){var e=G3(gSe),t=Object(a.useRef)(null);return Object(a.useEffect)((function(){t.current&&(null==e||e.setVirtuosoRef(t.current))}),[e,t]),t}(),j=Object(a.useRef)(null),I=Object(a.useMemo)((function(){return E_(r,(function(e){return{viewRecord:e,id:e.get("record_uuid")}}))}),[r]),R=Object(a.useMemo)((function(){return w_(r,(function(e){return e.get("record_uuid")===C}))}),[C,r]),A=new Map;if(n.forEach((function(e){A.set(e.get("uuid"),e)})),Object(a.useEffect)((function(){j.current&&(null==s||s.setScroller(j.current))}),[s,j]),!i||!r||0===r.length||!o)return null;var D=l.a.createElement("div",{ref:t,className:"lakex-viewer-card"},l.a.createElement("div",{className:"lakex-viewer-card-inner"},l.a.createElement("div",{className:"lakex-viewer-card-content"},l.a.createElement(bU,{sensors:E,modifiers:[iH],collisionDetection:Z$,onDragStart:O,onDragEnd:S},l.a.createElement(l.a.Fragment,null,l.a.createElement(KU,{items:I,strategy:UU},l.a.createElement(K0,{useWindowScroll:y,customScrollParent:b,ref:x,context:{gridGap:m,colCount:g,cardWidth:h,cardHeight:v},components:{List:jSe,Item:ISe},scrollerRef:function(e){j.current=e},onScroll:null==s?void 0:s.emitScrollEvent,style:{width:"100%",height:null==p?void 0:p.height},data:I,initialItemCount:_?I.length:0,itemContent:function(e,t){return l.a.createElement(CSe,{key:t.viewRecord.get("record_uuid"),viewRecord:t.viewRecord,fieldMap:A,viewConfig:i,width:h,height:v,disableDrag:d||!(null==i||!i.get("keep_sort"))})}})),Object(u.createPortal)(l.a.createElement(NU,{dropAnimation:null},R?l.a.createElement(CSe,{viewRecord:R,fieldMap:A,viewConfig:i,width:h,height:v}):null),w))))));return c?l.a.createElement(c,null,D):D})),ASe=l.a.forwardRef((function(e,t){var n=Rpe({viewId:e.viewId});return l.a.createElement(RSe,{ref:t,fields:n.fields,viewRecords:n.viewRecords||new g_,viewFields:n.viewFields,viewConfig:n.viewConfig})}));function DSe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PSe(e,t,n){return t=P_(t),D_(e,MSe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function MSe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(MSe=function(){return!!e})()}var TSe=function(e){function t(){var e;return Ub(this,t),(e=PSe(this,t,arguments)).viewType=BC.CARD,e.title=uw("画册视图"),e.desc=uw("适合展示图片类数据"),e.icon=function(e){return React.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DSe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DSe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"CardView",size:16},e))},e.colorCls="yuque-color-blue-5",e.Component=ASe,e}return F_(t,e),Wb(t)}(Ole),FSe=Object.defineProperty,NSe=Object.getOwnPropertyDescriptor,VSe=function(e,t,n,r){for(var o,i=r>1?void 0:r?NSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&FSe(t,n,i),i},LSe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new TSe({onError:e.onError}))}},{key:"registerScrollService",value:function(e){e.setCardScrollService(this._scrollService)}}],[{key:"pluginModule",value:function(){return pd().register(this).register(dSe).register(gSe)}}])}();LSe.pluginName="render-viewer-card",VSe([Xs(gSe)],LSe.prototype,"_scrollService",2),LSe=VSe([Ys({contrib:[Qoe,oie,Qme]})],LSe);var BSe=Ts.defineToken("ViewerKanbanPluginGroupContribution"),$Se=Object.defineProperty,zSe=Object.getOwnPropertyDescriptor,USe=function(e,t,n,r){for(var o,i=r>1?void 0:r?zSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&$Se(t,n,i),i},HSe=function(){return Wb((function e(){Ub(this,e)}),[{key:"Group",get:function(){return this._getGroupComponent()}},{key:"_getGroupComponent",value:function(){var e,t,n=this.viewerKanbanPluginGroupProvider.getContributions({cache:!1});return n[0]?null==(t=(e=n[0]).getGroupComponent)?void 0:t.call(e):null}}])}();USe([bd(BSe)],HSe.prototype,"viewerKanbanPluginGroupProvider",2),HSe=USe([Ys()],HSe);var qSe=Ts.defineToken("ViewerKanbanGroupActionContribution"),WSe=Object.defineProperty,GSe=Object.getOwnPropertyDescriptor,KSe=function(e,t,n,r){for(var o,i=r>1?void 0:r?GSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&WSe(t,n,i),i},YSe=function(){return Wb((function e(){var t=this;Ub(this,e),this.getKanbanGroupActionComponents=function(){var e=t._viewerKanbanGroupActionProvider.getContributions({cache:!1});if(e.length>0){var n=[];return e.forEach((function(e){var t,r=null==(t=e.getKanbanGroupActionComponent)?void 0:t.call(e);r&&(Array.isArray(r)?n=n.concat(r):n.push(r))})),n}return null}}),[{key:"getGroup",value:function(){var e=this._readService.getActiveView();return e?this._readService.getViewGroup(null==e?void 0:e.get("uuid")):null}},{key:"getGroupField",value:function(){var e=this.getGroup();return null==e?void 0:e.field}},{key:"getSupportGroupFields",value:function(){return __(this._readService.getAllFields(),(function(e){return[bC.SELECT,bC.MENTION].includes(e.get("type"))}))}},{key:"getGroupFieldOption",value:function(e,t){return e.get("type")===bC.SELECT?w_(this._readService.getFieldOptions(e.get("uuid")),(function(e){return e.get("uuid")===t.value})):e.get("type")===bC.MENTION?t:null}},{key:"createGroup",value:function(){var e,t=this._readService.getAllFields(),n={field:{uuid:fw(32),name:EC(bC.SELECT,t.toJSON()),type:bC.SELECT,color:!0,options:[]}};null==(e=this._commandService)||e.execCommand("addField",n)}}])}();function XSe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}KSe([bd(qSe)],YSe.prototype,"_viewerKanbanGroupActionProvider",2),KSe([Xs(MI)],YSe.prototype,"_readService",2),KSe([Xs(uA)],YSe.prototype,"_commandService",2),YSe=KSe([Ys()],YSe);var JSe=Object.defineProperty,ZSe=Object.getOwnPropertyDescriptor,QSe=function(e,t,n,r){for(var o,i=r>1?void 0:r?ZSe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&JSe(t,n,i),i},exe=function(){return Wb((function e(){Ub(this,e),this.UNGROUP_KEY="ungroup"}),[{key:"toKanbanData",value:function(e){var t=this;return(null==e?void 0:e.map((function(e){var n;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XSe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XSe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:(null==(n=e.option)?void 0:n.uuid)||t.UNGROUP_KEY},e)})))||[]}},{key:"addRecord",value:function(e,t){var n,r,o,i=this._readService.getGroupViewRecords();if(o=t?i.find((function(e){var n;return(null==(n=e.option)?void 0:n.uuid)===t.uuid})):i[0]){var a=o.viewRecords.length>0?o.viewRecords[0].get("record_uuid"):"",l=this._commandService.execCommand("addEmptyRecord",{sourceRecordId:a,groupItemKey:t?null==(n=this._readService)?void 0:n.keyValue(t):"",position:"after"}),u=null==l?void 0:l.result;u&&u[0]&&(null==(r=this._renderService)||r.emitClickRecord({recordId:u[0].uuid,isNewRecord:!0}))}}}])}();function txe(e,t,n){return t=P_(t),D_(e,nxe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function nxe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(nxe=function(){return!!e})()}QSe([Xs(uA)],exe.prototype,"_commandService",2),QSe([Xs(MI)],exe.prototype,"_readService",2),QSe([Xs(bie)],exe.prototype,"_renderService",2),exe=QSe([Ys()],exe);var rxe=Object.defineProperty,oxe=Object.getOwnPropertyDescriptor,ixe=function(e,t,n,r){for(var o,i=r>1?void 0:r?oxe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&rxe(t,n,i),i},axe=function(e){function t(){var e;return Ub(this,t),(e=txe(this,t,arguments))._virtuosoRefs={},e._scrollers={},e._onScroll=e._register(new ck),e.onScroll=e._onScroll.event,e}return F_(t,e),Wb(t,[{key:"virtuosoRefs",get:function(){return this._virtuosoRefs}},{key:"scrollers",get:function(){return this._scrollers}},{key:"scrollHeight",get:function(){var e=Object.values(this._scrollers).map((function(e){return e.scrollHeight}));return Math.max.apply(Math,Vb(e))}},{key:"viewTotalHeight",get:function(){var e=this.renderContext.$root.querySelector(".lakex-viewer-kanban-group-header"),t=(null==e?void 0:e.getBoundingClientRect().height)||0;return this.scrollHeight+t}},{key:"destroy",value:function(){this._virtuosoRefs={},this._scrollers={}}},{key:"setVirtuosoRefs",value:function(e){this._virtuosoRefs=e}},{key:"setScrollers",value:function(e){this._scrollers=e}},{key:"scrollIntoView",value:function(e,t){var n,r;if(!this._virtuosoRefs[e])return null==(n=t.done)?void 0:n.call(t);null==(r=this._virtuosoRefs[e])||r.scrollIntoView(t)}},{key:"emitScrollEvent",value:function(e){this._onScroll.emit(e)}},{key:"scrollTo",value:function(e,t){var n,r;if(!this._virtuosoRefs[e])return null==(n=t.done)?void 0:n.call(t);null==(r=this._virtuosoRefs[e])||r.scrollTo(t)}},{key:"getKanbanGroupPositionByRecordId",value:function(e,t){for(var n,r="",o=-1,i=0;i<t.length;i++)for(var a=t[i].viewRecords||[],l=0;l<a.length;l++)if(a[l].get("record_uuid")===e){r=(null==(n=t[i].option)?void 0:n.uuid)||this._dataServce.UNGROUP_KEY,o=l;break}return{index:o,groupId:r}}}])}($_);ixe([Xs(exe)],axe.prototype,"_dataServce",2),ixe([Xs(cie)],axe.prototype,"renderContext",2),axe=ixe([Ys()],axe);var lxe=function(e){var t=e.groupField,n=function(e){var t=e.groupField,n=G3(Vme);return{onAddGroup:function(e){null==n||n.showNewGroup(e.target.parentNode,t)}}}({groupField:t}),r=n.onAddGroup;return t?l.a.createElement("div",{className:"lakex-viewer-kanban-group"},l.a.createElement("div",{className:"lakex-table-kanban-group-title"},l.a.createElement("div",{className:"lakex-viewer-kanban-new-group"},l.a.createElement("button",{className:"lakex-table-button lakex-viewer-kanban-new-group-button",onClick:r},l.a.createElement(g6,{type:"Add"}),uw("新建分组"))))):null},uxe=function(e){var t=xpe(EA.TABLE).isReadonly();return l.a.createElement("div",{className:"lakex-table-kanban-empty"},l.a.createElement("div",{className:"lakex-table-kanban-empty-body"},l.a.createElement("h1",null,uw("看板暂无分组")),l.a.createElement("p",null,uw("可以快速新建一个单选列进行分组")),l.a.createElement(b.a,{type:"primary",onClick:e.onCreate,disabled:t},uw("新建分组"))))};var cxe=function(e){var t=e.viewRecord,n=e.fields,r=e.viewConfig,o=G3(kke),i=G3(Cie),u=G3(bie),c=G3(MI),s=vye(),d=t.get("record_uuid"),f=(null==r?void 0:r.get("show_field_name"))||!1,p=Object(a.useMemo)((function(){return!!s&&s.getRangeAt(0).recordId===d}),[s]),h=ike({recordId:d}),v=Object(a.useCallback)((function(e){e.preventDefault(),null==o||o.showContextMenu({from:_ke.KANBAN_RECORD,e:e,recordId:d})}),[d,o]),g=Object(a.useCallback)((function(){null==u||u.emitClickRecord({recordId:d})}),[d,u]),m=null==c?void 0:c.getViewRecordCells(t.get("view_uuid"),t.get("record_uuid"));return l.a.createElement("div",{key:d+t.get("updated_at"),className:u$("lakex-viewer-kanban-record",{selected:p,"show-field-name":f,"in-highlight":h}),"data-record-uuid":d,onClick:g,onContextMenu:v},l.a.createElement("div",{className:"lakex-viewer-kanban-field-list"},null==m?void 0:m.map((function(e,t){var r=w_(n,(function(t){return t.get("uuid")===(null==e?void 0:e.fieldId)}));if(!r)return null;var o=i.getFieldComponent(r.get("type")),a=null==i?void 0:i.getFieldIcon(r.get("type"));if(null==(null==e?void 0:e.value)||""==(null==e?void 0:e.value))return 0===t?l.a.createElement("div",{key:e.fieldType+e.cellId,className:"lakex-viewer-kanban-field empty first"},f&&l.a.createElement("div",{className:u$("lakex-viewer-kanban-field-name",e.fieldType)},a&&l.a.createElement(a,{size:14}),r.get("name")),l.a.createElement("div",{className:"lakex-viewer-kanban-field-content"},l.a.createElement("span",{className:"empty-title"},uw("未命名记录")))):" ";var u=function(e,t){t.value,zC.isSelectLike(e.type)||zC.isImage(e.type)||zC.isSystemDate(e.type)}(r,e);return l.a.createElement("div",{key:r.get("updated_at")+e.fieldType+e.uuid+e.updated_at,className:u$("lakex-viewer-kanban-field",{first:0===t})},f&&l.a.createElement("div",{className:u$("lakex-viewer-kanban-field-name",e.fieldType)},a&&l.a.createElement(a,{size:14}),l.a.createElement("span",{className:"lakex-viewer-kanban-field-name-content"},r.get("name"))),l.a.createElement("div",{className:"lakex-viewer-kanban-field-content"},o?l.a.createElement(o,{readonly:!0,key:t,cell:e,field:r,fieldProps:u}):null))}))))};function sxe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dxe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sxe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sxe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fxe=function(e){var t=e.viewRecord,n=e.fields,r=e.viewConfig,o=xpe(EA.TABLE).isReadonly(),i=tH({id:t.get("record_uuid"),disabled:o}),a=i.attributes,u=i.listeners,c=i.setNodeRef,s=i.transform,d=i.transition,f=i.isDragging,p={transform:d6.Transform.toString(s),transition:d,zIndex:f?"100":"auto",opacity:f?0:1};return l.a.createElement("div",dxe(dxe({ref:o?void 0:c,className:"lakex-viewer-kanban-record-container",style:p},a),u),l.a.createElement(cxe,{key:t.get("uuid")+t.get("updated_at"),viewRecord:t,fields:n,viewConfig:r}))},pxe=["children"];function hxe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vxe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hxe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hxe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gxe=function(e){var t=e.children,n=Y3(e,pxe),r=gP(Object(a.useState)(0),2),o=r[0],i=r[1],u=n["data-known-size"],c={"--child-height":"".concat(o,"px")};return Object(a.useEffect)((function(){i((function(e){return 0===u?e:u}))}),[u]),l.a.createElement("div",vxe(vxe({},n),{},{className:"height-preserving-kanban-record",style:c}),t)};function mxe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return yxe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yxe(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function yxe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bxe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wxe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bxe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bxe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _xe=function(e,t,n,r,o){var i=G3(MI),l=G3(kCe),u=G3(axe),c=Object(a.useMemo)((function(){var e=Object.keys(t),n=e.findIndex((function(e){return e===r}));return n>-1&&(e.splice(n,1),e.unshift(r)),e}),[t]),s=gP(Object(a.useState)(null),2),d=s[0],f=s[1],p=Object(a.useRef)(null),h=Object(a.useRef)(!1),v=function(e){return e in t?e:Object.keys(t).find((function(n){return t[n].map((function(e){return e.get("record_uuid")})).includes(e)}))},m=Object(a.useCallback)((function(e){var n;if(d&&d in t)return Z$(wxe(wxe({},e),{},{droppableContainers:e.droppableContainers.filter((function(e){return e.id in t}))}));var r=(e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:r}=e;if(!r)return[];const o=[];for(const e of t){const{id:t}=e,i=n.get(t);if(i&&tz(r,i)){const n=Y$(i).reduce(((e,t)=>e+q$(r,t)),0),a=Number((n/4).toFixed(4));o.push({id:t,data:{droppableContainer:e,value:a}})}}return o.sort(G$)})(e),o=X$(r.length>0?r:ez(e),"id");if(null!=o){if(o in t){var i=t[o];i.length>0&&(o=null==(n=Z$(wxe(wxe({},e),{},{droppableContainers:e.droppableContainers.filter((function(e){return e.id!==o&&i.map((function(e){return e.get("record_uuid")})).includes(e.id)}))}))[0])?void 0:n.id)}return p.current=o,[{id:o}]}return h.current&&(p.current=d),p.current?[{id:p.current}]:[]}),[d,t]);Object(a.useEffect)((function(){requestAnimationFrame((function(){h.current=!1}))}),[t]);var y=U$(z$(Vz,{activationConstraint:{distance:8}}));return{activeId:d,containers:c,sensors:y,collisionDetectionStrategy:m,onDragStart:function(e){f(e.active.id)},onDragOver:function(e){var r=e.active,o=e.over,i=null==o?void 0:o.id;if(null!=i&&!(r.id in t)){var a=v(i),l=v(r.id);!a||!l||l!==a&&n((function(e){var t,n=e[l],u=e[a],c=u.map((function(e){return e.get("record_uuid")})).indexOf(i),s=n.map((function(e){return e.get("record_uuid")})).indexOf(r.id);if(i in e)t=u.length+1;else{var d=o&&r.rect.current.translated&&r.rect.current.translated.top>o.rect.top+o.rect.height;t=c>=0?c+(d?1:0):u.length+1}return h.current=!0,wxe(wxe({},e),{},$b($b({},l,e[l].filter((function(e){return e.get("record_uuid")!==r.id}))),a,[].concat(Vb(e[a].slice(0,t)),[e[l][s]],Vb(e[a].slice(t,e[a].length)))))}))}},onDragEnd:function(n){var a,c,s,d,p,h,m=n.active,y=n.over;if(m.id in t&&null!=y&&y.id){if(0===(null==(a=y.data.current.sortable)?void 0:a.index)&&(null==(c=null==y?void 0:y.data.current.sortable)?void 0:c.items[0])===r)return;var b=e.find((function(e){var t;return(null==(t=e.option)?void 0:t.uuid)===m.id}));l.updateFieldOptionOrder(null==b?void 0:b.option.field_uuid,m.id,y.id)}else{var w,_,k=mxe(e);try{for(k.s();!(_=k.n()).done;){var C=_.value;if(C.viewRecords.find((function(e){return e.get("record_uuid")===m.id}))){w=C.id;break}}}catch(e){k.e(e)}finally{k.f()}if(w){var E=null==y?void 0:y.id,O=v(E);if(null!=E){if(O){if(null!=o&&o.get("keep_sort")&&w===O)return void g.a.warn(uw("取消排序后，可进行拖拽"));var S=e.find((function(e){return e.id===w}))||void 0,x=e.find((function(e){return e.id===O}))||void 0,j=((null==S?void 0:S.viewRecords)||[]).map((function(e){return e.get("record_uuid")})).indexOf(m.id),I=t[O].map((function(e){return e.get("record_uuid")})).indexOf(E),R=m.id,A=null==(s=null==x?void 0:x.viewRecords[I])?void 0:s.get("record_uuid");if(w===O&&j===I)return;if(w!==O){var D=I===(null==x?void 0:x.viewRecords.length),P=i.getOriginViewRecords();if(D)A=null==(d=x.viewRecords[I-1])?void 0:d.get("record_uuid");else if(A){var M=k_(P,(function(e){return e.get("record_uuid")===A}));A=null==(p=P.get(M+1))?void 0:p.get("record_uuid")}var T=k_(P,(function(e){return e.get("record_uuid")===R})),F=k_(P,(function(e){return e.get("record_uuid")===A}));T<F&&(A=null==(h=P.get(F-1))?void 0:h.get("record_uuid"))}if(l.updateRecordOrder(R,A,x,RC.reverse),null!=o&&o.get("keep_sort")){var N=i.getGroupViewRecords(o.get("view_uuid")),V=u.getKanbanGroupPositionByRecordId(m.id,N),L=V.index,B=V.groupId;return u.scrollIntoView(B,{index:L,align:"start"}),void g.a.warn(uw("当前处于保持排序状态，为您重新定位"))}}f(null)}else f(null)}else f(null)}},onDragCancel:function(){f(null)},findContainer:v,getIndex:function(e){var n=v(e);return n?t[n].map((function(e){return e.get("record_uuid")})).indexOf(e):-1}}},kxe=function(e){var t=e.items,n=e.containerId,r=e.useWindowScroll,o=e.customScrollParent,i=e.disableVirtualScroll,a=e.fields,u=e.viewConfig,c=e.withRef,s=e.scrollerRef;return l.a.createElement(KU,{items:t[n].map((function(e){return e.get("record_uuid")})),strategy:qU},l.a.createElement(y0,{useWindowScroll:r,customScrollParent:o,ref:function(e){c(e)},scrollerRef:s,components:{Item:gxe},data:t[n],className:"lakex-viewer-kanban-group-scorller","data-group-id":n,increaseViewportBy:i?Number.MAX_SAFE_INTEGER:0,itemContent:function(e,t){return l.a.createElement(fxe,{key:t.get("record_uuid"),viewRecord:t,fields:a,viewConfig:u})}}))},Cxe=l.a.forwardRef((function(e,t){var n,r=function(e){var t=e.viewId,n=G3(MI),r=Rpe({viewId:t}),o=G3(iD),i=G3(HSe),l=G3(YSe),u=G3(exe),c=(G3(bye)||{}).SelectionContainer,s=G3(axe),d=G3(R_),f=xpe(EA.TABLE).isReadonly(),p=null==u?void 0:u.UNGROUP_KEY,h=r.groupViewRecords,v=null==u?void 0:u.toKanbanData(h),g=Object(a.useRef)({}),m=gP(Object(a.useState)((function(){var e={};return v.forEach((function(t){e[t.id]=t.viewRecords})),e})),2),y=m[0],b=m[1],w=gP(Object(a.useState)(null==d?void 0:d.getValue("view.useWindowScroll")),2),_=w[0],k=w[1],C=null==d?void 0:d.getValue("view.customScrollParent"),E=(null==d?void 0:d.getValue("modal.customModalContainer"))||document.body,O=gP(Object(a.useState)((null==d?void 0:d.getValue("view.disableVirtualScroll"))||!1),2),S=O[0],x=O[1];Object(a.useEffect)((function(){g.current&&(null==s||s.setScrollers(g.current))}),[s,g]),Object(a.useEffect)((function(){var e=o.onDataChanged((function(){var e;if(t===(null==(e=n.getActiveView())?void 0:e.get("uuid"))){var r=n.getGroupViewRecords(),o=(null==u?void 0:u.toKanbanData(r))||[],i={};o.forEach((function(e){i[e.id]=e.viewRecords})),b(i)}}));return function(){e.destroy()}}),[t]),Object(a.useEffect)((function(){var e=null==d?void 0:d.onConfigurationChange((function(e){var t=e.key,n=e.value;"view.useWindowScroll"===t?k(n):"view.disableVirtualScroll"===t&&x(n)}));return function(){null==e||e.destroy()}}),[]);var j=r.group;return{isReadonly:f,ungroupId:p,fields:r.fields,viewConfig:r.viewConfig,group:j,isEmpty:!j,data:v,items:y,setItems:b,kanbanService:i,kanbanGroupService:l,scrollService:s,groupScrollersRef:g,SelectionContainer:c,useWindowScroll:_,customScrollParent:C,customModalContainer:E,disableVirtualScroll:S}}(e),o=r.isReadonly,i=r.kanbanService,c=r.kanbanGroupService,s=r.scrollService,d=r.fields,f=r.viewConfig,p=r.isEmpty,h=r.data,v=r.items,g=r.setItems,m=r.ungroupId,y=r.groupScrollersRef,b=r.SelectionContainer,w=r.useWindowScroll,_=r.customScrollParent,k=r.customModalContainer,C=r.disableVirtualScroll,E=_xe(h,v,g,m,f),O=E.activeId,S=E.containers,x=E.sensors,j=E.collisionDetectionStrategy,I=E.onDragStart,R=E.onDragOver,A=E.onDragEnd,D=E.onDragCancel,P=G3(R_).getValue("render.deferMode"),M=Object(a.useMemo)((function(){return P===nie.DISABLE?i.Group:aX(i.Group)}),[i.Group,P]),T=Object(a.useRef)({}),F=Object(a.useMemo)((function(){if(O&&!S.includes(O))for(var e=0,t=Object.values(v);e<t.length;e++){var n=t[e].find((function(e){return e.get("record_uuid")===O}));if(n)return n}return null}),[O,S,v]);if(Object(a.useEffect)((function(){T.current&&(null==s||s.setVirtuosoRefs(T.current))}),[s,T]),!c)return null;n=p?l.a.createElement("div",{className:"lakex-viewer-kanban-content empty"},l.a.createElement(uxe,{onCreate:function(){return null==c?void 0:c.createGroup()}})):l.a.createElement("div",{className:"lakex-viewer-kanban-content"},l.a.createElement(bU,{sensors:x,collisionDetection:j,measuring:{droppable:{strategy:Gz.Always}},onDragStart:I,onDragOver:R,onDragEnd:A,onDragCancel:D},l.a.createElement(l.a.Fragment,null,l.a.createElement(KU,{items:S,strategy:zU},null==S?void 0:S.map((function(e){var t=h.find((function(t){return t.id===e}));return t&&M?l.a.createElement(M,{key:e,groupId:e,items:v[e],disableDrag:e===m,groupField:t.field,groupOption:t.option},l.a.createElement(kxe,{items:v,containerId:e,useWindowScroll:w,customScrollParent:_,disableVirtualScroll:C,fields:d,viewConfig:f,withRef:function(t){return T.current[e]=t},scrollerRef:function(t){t&&(y.current[e]=t)}})):null}))),Object(u.createPortal)(l.a.createElement(NU,{dropAnimation:null},F&&l.a.createElement(cxe,{viewRecord:F,fields:d,viewConfig:f})),k))),!o&&l.a.createElement(lxe,{groupField:c.getGroupField()}));var N=l.a.createElement("div",{ref:t,className:"lakex-viewer-kanban"},l.a.createElement("div",{className:"lakex-viewer-kanban-inner",onScroll:function(e){s.emitScrollEvent(e)}},n));return b?l.a.createElement(b,null,N):N}));function Exe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oxe(e,t,n){return t=P_(t),D_(e,Sxe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Sxe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Sxe=function(){return!!e})()}var xxe=function(e){function t(){var e;return Ub(this,t),(e=Oxe(this,t,arguments)).viewType=BC.KANBAN,e.title=uw("看板视图"),e.desc=uw("任务流转一目了然"),e.icon=function(e){return React.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Exe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Exe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"KanbanView",size:16},e))},e.colorCls="yuque-color-cyan-5",e.Component=Cxe,e}return F_(t,e),Wb(t)}(Ole),jxe=Object.defineProperty,Ixe=Object.getOwnPropertyDescriptor,Rxe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Ixe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jxe(t,n,i),i},Axe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new xxe({onError:e.onError}))}},{key:"registerScrollService",value:function(e){e.setKanbanScrollService(this._scrollService)}}],[{key:"pluginModule",value:function(){return pd().contribution(BSe).contribution(qSe).register(this).register(HSe).register(YSe).register(exe).register(axe)}}])}();Axe.pluginName="render-viewer-kanban",Rxe([Xs(axe)],Axe.prototype,"_scrollService",2),Axe=Rxe([Ys({contrib:[Qoe,oie,Qme]})],Axe);var Dxe=function(e){var t,n=e.count,r=void 0===n?0:n,o=e.groupField,i=e.groupOption,u=function(e){var t=e.groupField,n=e.groupOption,r=G3(Cie),o=G3(YSe),i=G3(Vme),l=xpe(EA.TABLE).isReadonly(),u=Object(a.useCallback)((function(e){if(!l){var r=e.target.closest(".lakex-viewer-kanban-group-header");null==i||i.showEditGroup(r,t,n)}}),[t,n]);return{isReadonly:l,onOpenSetting:u,getFieldComponent:function(e){return r.getFieldComponent(e)},getKanbanGroupActions:function(){return null==o?void 0:o.getKanbanGroupActionComponents()}}}(e),c=u.isReadonly,s=u.getFieldComponent,d=u.getKanbanGroupActions,f=u.onOpenSetting,p=s(o.get("type"));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"lakex-table-kanban-group-title"},l.a.createElement("div",{className:"lakex-table-kanban-group-title-content",onClick:f},p&&l.a.createElement(p,{readonly:!0,field:o,cell:i,checkCell:!1,writeable:!1,disableOpen:!0})),l.a.createElement("div",{className:"lakex-table-kanban-group-title-count"},r)),o&&i&&!c&&l.a.createElement("div",{className:"lakex-table-kanban-group-actions"},null==(t=d())?void 0:t.map((function(e,t){return e?l.a.createElement(e,{key:t,groupField:o,groupOption:i}):null}))))},Pxe=function(e){var t=e.count,n=void 0===t?0:t,r=e.groupField,o=e.groupOption,i=G3(exe),a=xpe(EA.TABLE).isReadonly();return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"lakex-table-kanban-group-title"},l.a.createElement("div",{className:"lakex-table-kanban-group-title-content"},uw("未分组")),l.a.createElement("div",{className:"lakex-table-kanban-group-title-count"},n)),l.a.createElement("div",{className:"lakex-table-kanban-group-actions"},!a&&l.a.createElement(h.a,{title:uw("添加记录"),placement:"bottom",overlayClassName:"lakex-table-toolbar-tooltip"},l.a.createElement("button",{className:"lakex-table-button",onClick:function(){return null==i?void 0:i.addRecord(r,o)}},l.a.createElement(g6,{type:"Add"})))))};function Mxe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Txe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mxe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mxe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fxe=function(e){var t=e.groupId,n=e.items,r=e.disableDrag,o=e.groupField,i=e.groupOption,a=e.children,u=xpe(EA.TABLE).isReadonly(),c=i&&o,s=n.length,d=tH({id:t,data:{type:"container",children:n},disabled:u||r}),f=d.attributes,p=d.listeners,h=d.setNodeRef,v=d.transform,g=d.transition,m=d.isDragging,y={transform:r?"":d6.Transform.toString(v),transition:m?g:"",zIndex:m?"100":"auto"};return l.a.createElement("div",Txe({ref:h,className:"lakex-viewer-kanban-group",style:y},f),l.a.createElement("div",Txe({className:u$("lakex-viewer-kanban-group-header",{"disable-drag":r})},p),c?l.a.createElement(Dxe,{count:s,groupField:o,groupOption:i}):l.a.createElement(Pxe,{count:s,groupField:o,groupOption:i})),l.a.createElement("div",{className:"lakex-table-kanban-group-records"},a))},Nxe=function(e){var t=e.groupField,n=e.groupOption,r=e.name,o=G3(exe);return t&&n?l.a.createElement(h.a,{title:uw("添加记录"),placement:"card"===r?"bottomRight":"bottom",overlayClassName:"lakex-table-toolbar-tooltip"},l.a.createElement("button",{className:"lakex-table-button",onClick:function(){return null==o?void 0:o.addRecord(t,n)}},l.a.createElement(g6,{type:"Add"}))):null};function Vxe(e,t,n){return t=P_(t),D_(e,Lxe()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function Lxe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(Lxe=function(){return!!e})()}var Bxe=Object.defineProperty,$xe=Object.getOwnPropertyDescriptor,zxe=function(e,t,n,r){for(var o,i=r>1?void 0:r?$xe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Bxe(t,n,i),i},Uxe=function(e){function t(){var e;return Ub(this,t),(e=Vxe(this,t,arguments))._onAddGroupRecordClick=e._register(new ck),e.onAddGroupRecordClick=e._onAddGroupRecordClick.event,e._onGroupSettingClick=e._register(new ck),e.onGroupSettingClick=e._onGroupSettingClick.event,e}return F_(t,e),Wb(t,[{key:"openSettingModal",value:function(e,t,n,r){this._onGroupSettingClick.emit({target:e.target,groupField:t,groupOption:n,$title:r})}},{key:"destroy",value:function(){M_(P_(t.prototype),"destroy",this).call(this)}}])}($_);zxe([Vs()],Uxe.prototype,"destroy",1),Uxe=zxe([Ys()],Uxe);var Hxe=function(e){var t=e.groupField,n=e.groupOption,r=function(e){var t=e.groupField,n=e.groupOption,r=G3(Uxe);return{onOpenSetting:Object(a.useCallback)((function(e){var o=e.target.closest(".lakex-viewer-kanban-group-header");null==r||r.openSettingModal(e,t,n,o)}),[t,n])}}({groupField:t,groupOption:n}),o=r.onOpenSetting;return t&&n?l.a.createElement("button",{className:"lakex-table-button",onClick:function(e){return o(e)}},l.a.createElement(g6,{type:"MoreHorizontal"})):null},qxe=Object.defineProperty,Wxe=Object.getOwnPropertyDescriptor,Gxe=function(){return Wb((function e(){Ub(this,e)}),[{key:"getKanbanGroupActionComponent",value:function(){return[Nxe,Hxe]}},{key:"getGroupComponent",value:function(){return Fxe}}],[{key:"pluginModule",value:function(){return pd().register(this).register(Uxe)}}])}();Gxe.pluginName="render-viewer-kanban-group",Gxe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Wxe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&qxe(t,n,i),i}([Ys({contrib:[BSe,qSe]})],Gxe);var Kxe=function(e){var t=e.date,n=e.onCurrentDateChange,r=Object(a.useCallback)((function(e,r,o){var i=t[e](o,r);n(i)}),[t]),o=Object(a.useCallback)((function(e){e.stopPropagation(),r(spe,fpe,1)}),[r]),i=Object(a.useCallback)((function(e){e.stopPropagation(),r(cpe,fpe,1)}),[r]),l=Object(a.useCallback)((function(){var e=Mw();t.isSame(e)||n(e)}),[t]);return React.createElement("div",{className:"lakex-table-view-calendar-header"},React.createElement("div",{className:"lakex-table-view-calendar-header-month-selector"},React.createElement("div",{className:"lakex-table-view-calendar-header-month-selector-date"},t.format(uw("YYYY年M月"))),React.createElement("div",{className:"lakex-table-view-calendar-header-month-selector-prev",onClick:o},React.createElement(g6,{type:"ArrowLeft",size:16})),React.createElement("div",{className:"lakex-table-view-calendar-header-month-selector-next",onClick:i},React.createElement(g6,{type:"ArrowRight",size:16})),React.createElement("div",{className:"lakex-table-view-calendar-header-today-button",onClick:l},uw("今天"))))};var Yxe=Ts.defineToken("ViewerCalendarDataServiceToken"),Xxe=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e);for(var t=G3(Yxe).startWeekDay,n=[],r=0;r<ppe;r++){var o=(t+r)%ppe;n.push(hpe[o])}return React.createElement("div",{className:"lakex-view-calendar-week-names"},n.map((function(e,t){return React.createElement("div",{className:"lakex-view-calendar-week-names-item",key:t},e)})))},Jxe=function(e){var t=e.date,n=e.colIndex;e.rowIndex;var r,o,i=e.schedule,l=e.activeScheduleId,u=e.dragScheduleId,c=e.onBeforeDrag,s=e.onBeforeResize,d=e.onEnterSchedule,f=e.onLeaveSchedule,p=G3(MI),h=G3(Yxe),v=G3(kke),g=xpe(EA.TABLE).isReadonly(),m=G3(bie),y=OEe(i.id),b=vye(),w=Object(a.useMemo)((function(){return!!b&&b.getRangeAt(0).recordId===i.id}),[b,i]),_=ike({recordId:i.id}),k="lakex-view-calendar-schedule-line",C=Object(a.useRef)(!1),E=Object(a.useRef)(!1),O=Object(a.useRef)(null),S=Object(a.useRef)(null),x=i.isStartDate(t),j=i.id===l,I=p.getViewConfig(),R=(null==I?void 0:I.get("start_date_field_uuid"))||"",A=(null==I?void 0:I.get("end_date_field_uuid"))||"",D=null==(r=p.getField(R))?void 0:r.get("type"),P=null==(o=p.getField(A))?void 0:o.get("type"),M=D===bC.DATE,T=P===bC.DATE,F=(null==I?void 0:I.get("date_color_type"))||PC.CUSTOM,N=(null==I?void 0:I.get("date_color"))||"",V=p.getFieldOptions(N),L=Object(a.useMemo)((function(){var e={};return F===PC.FOLLOW_FIELD&&N&&E_(V,(function(t){e[t.get("uuid")]=t.get("color")})),e}),[F,N,V]),B=Object(a.useMemo)((function(){var e=h.getScheduleLineStyle({schedule:i,colIndex:n,date:t,isActive:j,isDelPossible:!!y,isInHighlight:_,isSelected:w,scheduleColorType:F,schedlueColorFieldIdOrColorId:N,colorMap:L});return u===i.id&&(e.lineStyle.opacity=0),e}),[i,n,t,l,u,y,_,w,L]),$=B.lineStyle,z=B.labelStyle,U=B.isShowControl,H=Object(a.useCallback)((function(){O.current&&clearTimeout(O.current),O.current=null}),[O.current]),q=Object(a.useCallback)((function(e){e.preventDefault(),null==v||v.showContextMenu({e:e,from:_ke.CALENDAR_RECORD,recordId:i.id})}),[i,v]),W=Object(a.useCallback)((function(e){if(e.persist(),!g){if(E.current)return void(E.current=!1);H(),O.current=setTimeout((function(){null==m||m.emitClickEvent({eventName:"selectSchedule",data:{recordId:i.id,event:e}})}),300)}}),[i,g,E.current,H]),G=Object(a.useCallback)((function(e){H(),null==m||m.emitClickRecord({recordId:i.id})}),[i,H]),K=Object(a.useCallback)((function(e){if(2!==e.button&&!g&&M&&T){C.current=!0;var t={x:e.clientX,y:e.clientY};setTimeout((function(){C.current&&(H(),c(i,t))}),300)}}),[C.current,i,g,M,T,H]),Y=Object(a.useCallback)((function(e,t){2===e.button||g||(E.current=!0,s(i,t))}),[i,g]),X=Object(a.useCallback)((function(){E.current=!1}),[]);return React.createElement("div",{className:"".concat(k),ref:S,style:$,"data-id":i.id,"data-active":j,"data-is-start":x,"data-line":"true","data-schedule-line":"true","data-in-highlight":_,"data-control":String(U),onClick:W,onDoubleClick:G,onMouseEnter:function(){d(i)},onMouseLeave:f},x&&!g&&M?React.createElement("div",{className:"".concat(k,"-label"),style:z,onMouseDown:function(e){Y(e,"startDate")},onMouseUp:X}):null,React.createElement("div",{className:"".concat(k,"-title"),"data-not-title":!i.title,onMouseDown:K,onMouseUp:function(){C.current=!1},onContextMenu:q},i.title||uw("添加日程标题")),U&&!g&&T?React.createElement("div",{className:"".concat(k,"-control"),style:z,onMouseDown:function(e){Y(e,"endDate")},onMouseUp:X}):null)},Zxe=function(e){var t=e.onCreateSchedule;return React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-schedule-placeholder",onClick:t},React.createElement(g6,{type:"Add",size:16}),React.createElement("span",null,uw("添加日程")))},Qxe=function(e){var t=e.cell,n=e.cellHeight,r=e.colIndex,o=e.rowIndex;e.dateRows;var i=e.scheduleList,l=e.scheduleMap,u=e.isShowBorder,c=e.activeScheduleId,s=e.dragScheduleId,d=e.dragSchedulePosIndex,f=e.onBeforeDrag,p=e.onBeforeResize,h=e.onCreateSchedule,v=e.onEnterSchedule,g=e.onLeaveSchedule,m=G3(Yxe),y=G3(bie),b=G3(R_),w=xpe(EA.TABLE).isReadonly(),_=(null==b?void 0:b.getValue("view.useWindowScroll"))||!1,k=m.defaultCellMinHeight,C=m.cellScheduleHeight,E=m.defaultMaxScheduleNum,O=_?100:n>k?Math.floor((n-k+6)/C)+E:E,S=i.length>0,x=Object(a.useMemo)((function(){return m.sortScheduleList(t,i,l)}),[t,i,l]),j=Object(a.useMemo)((function(){return{renderScheduleList:x.slice(0,O),hiddenScheduleList:x.slice(O)}}),[x,O]),I=j.renderScheduleList,R=j.hiddenScheduleList,A=R.length>0,D=Object(a.useCallback)((function(e){null==y||y.emitClickEvent({eventName:"showMoreSchedule",data:{event:e,date:t,scheduleList:x}})}),[x]);return S||w?React.createElement(React.Fragment,null,I.map((function(e,n){var i,m=t.unix(),y=e.isStartDate(t),b={},w={},_=n===I.length-1,k=Pw(e.start),C=null;return(null==(i=l[k])?void 0:i[e.id])>=O?I.length>1?null:React.createElement(Zxe,{onCreateSchedule:h}):(u&&s!==e.id&&-1!==d&&(d===n&&(b.backgroundColor="var(--yq-yuque-green-500)"),_&&d>=I.length&&(w.backgroundColor="var(--yq-yuque-green-500)")),C=y||0===r?React.createElement(Jxe,{key:"".concat(m,"-").concat(e.id,"-schedule"),date:t,colIndex:r,rowIndex:o,schedule:e,activeScheduleId:c,dragScheduleId:s,onBeforeResize:p,onBeforeDrag:f,onEnterSchedule:v,onLeaveSchedule:g}):React.createElement("div",{key:"".concat(m,"-").concat(e.id,"-holder"),"data-id":e.id,className:"lakex-view-calendar-content-box-row-cell-schedule-holder","data-line":"true"}),React.createElement(a.Fragment,{key:"".concat(m,"-").concat(e.id,"-fragment")},React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-schedule-index",key:"".concat(m,"-").concat(e.id,"-index-start"),style:b}),C,_&&React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-schedule-index",key:"".concat(m,"-").concat(e.id,"-index-end"),style:w})))})),A?React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-schedule-more",onClick:D},uw("还有 $1 项",R.length)):null):React.createElement(Zxe,{onCreateSchedule:h})};function eje(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tje(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eje(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eje(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nje=function(e){var t=e.cell,n=e.cellHeight,r=e.colIndex,o=e.rowIndex,l=e.date,u=e.dateRows,c=e.scheduleList,s=e.scheduleMap,d=e.activeScheduleId,f=e.dragScheduleId,p=e.dragSchedulePosIndex,v=e.resizeSchedule,g=e.highlightDate,m=e.onBeforeResize,y=e.onBeforeDrag,b=e.onEnterSchedule,w=e.onLeaveSchedule,_=G3(Yxe),k=_.defaultCellMinHeight,C=G3(bie),E=xpe(EA.TABLE).isReadonly(),O=G3(MI),S=G3(R_),x=(null==S?void 0:S.getValue("view.useWindowScroll"))||!1,j=Object(a.useRef)(null),I=O.getViewConfig(),R=(null==I?void 0:I.get("show_lunar"))||!1,A=Object(a.useMemo)((function(){return R?_.getDateLunarInfo(t):null}),[R,t]),D=!1,P=!1;v&&v.include(t)&&(D=!0);var M=c.filter((function(e){return e.include(t)})),T=M.length>0,F=0===t.day()||6===t.day();g&&g.isSame(t,dpe)&&(P=!0,D=!0);var N=Object(a.useCallback)((function(e){var n,r=_.createSchedule(t),o=null==r?void 0:r.result,i=null==(n=null==o?void 0:o[0])?void 0:n.uuid;i&&setTimeout((function(){var t,n,r=null==(t=j.current)?void 0:t.querySelectorAll('div[data-line="true"]'),o=null==(n=j.current)?void 0:n.querySelector(".lakex-view-calendar-content-box-row-cell-schedule-more");o?null==C||C.emitClickEvent({eventName:"selectSchedule",data:{recordId:i,event:e,position:{origin:o,placement:"bottomLeft"}}}):r&&(null==C||C.emitClickEvent({eventName:"selectSchedule",data:{recordId:i,event:e,position:{origin:r[r.length-1],placement:"bottomLeft"}}}))}),300)}),[t]);return React.createElement("div",{ref:j,className:u$("lakex-view-calendar-content-box-row-cell",{lunar:R}),key:t.unix(),"data-background":P,"data-unix":t.unix(),"data-lunar-holiday":(null==A?void 0:A.displayHoliday)&&!A.isWork,"data-weekend":F,style:tje({minHeight:"".concat(k,"px")},x?{}:{height:"".concat(n,"px")})},React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-date","data-today":t.isSame(i()(),dpe),"data-fade":t.month()!==l.month()},React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-date-left"},React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-date-text"},React.createElement("span",null,t.format("D"))),A?React.createElement("span",{className:"lakex-view-calendar-content-box-row-cell-date-lunar"},A.lunarText):null,null!=A&&A.displayHoliday?React.createElement("span",{className:"lakex-view-calendar-content-box-row-cell-date-holiday"},A.isWork?uw("班"):uw("休")):null),T&&!E?React.createElement("div",{className:"lakex-view-calendar-content-box-row-cell-date-plus",onClick:N},React.createElement(h.a,{title:uw("添加日程")},React.createElement(g6,{type:"Add",size:14}))):null),React.createElement(Qxe,{cell:t,cellHeight:n,colIndex:r,rowIndex:o,dateRows:u,scheduleList:M,scheduleMap:s,isShowBorder:D,onCreateSchedule:N,activeScheduleId:d,dragScheduleId:f,dragSchedulePosIndex:p,onBeforeResize:m,onBeforeDrag:y,onEnterSchedule:b,onLeaveSchedule:w}))},rje=function(e){var t=e.boxInfo,n=e.lines,r=t.top,o=t.left;return React.createElement(React.Fragment,null,n.map((function(e,t){var n=e.getBoundingClientRect();return React.createElement("div",{className:"lakex-view-calendar-schedule-snapshot-line",key:t,style:{top:n.top-r,left:n.left-o,width:n.width,height:n.height},dangerouslySetInnerHTML:{__html:e.outerHTML}})})))},oje=Object(a.forwardRef)((function(e,t){var n=e.scheduleId,r=e.boxNode,o=e.boxInfo;if(!o)return null;var i=Object(a.useRef)(null),l=o.width,u=o.height,c=Object(a.useMemo)((function(){return Vb(r.querySelectorAll('.lakex-view-calendar-schedule-line[data-id="'.concat(n,'"]')))}),[r,n]);return Object(a.useImperativeHandle)(t,(function(){return{moving:function(e){i.current&&(i.current.style.transform="translate(".concat(e.x,"px, ").concat(e.y,"px)"))}}})),React.createElement("div",{className:"lakex-view-calendar-schedule-snapshot",ref:i,style:{width:l,height:u}},React.createElement(rje,{lines:c,boxInfo:o}))})),ije=function(){return Wb((function e(t){var n=t.id,r=t.start,o=t.end,i=t.title;Ub(this,e),this._id=n,this._start=r,this._end=o,this._title=i}),[{key:"id",get:function(){return this._id}},{key:"title",get:function(){return this._title}},{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"duration",get:function(){return this._end.diff(this._start,dpe)}},{key:"include",value:function(e){return e.isBetween(this._start,this._end,null,"[]")}},{key:"isStartDate",value:function(e){return e.isSame(this._start,dpe)}},{key:"isEndDate",value:function(e){return e.isSame(this._end,dpe)}},{key:"isSameDaySchedule",value:function(){return this.start.isSame(this._end,dpe)}},{key:"toJSON",value:function(){return{id:this._id,title:this._title,start:this._start,end:this._end}}}])}();function aje(e,t,n){return t=P_(t),D_(e,lje()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function lje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(lje=function(){return!!e})()}var uje=Object.defineProperty,cje=Object.getOwnPropertyDescriptor,sje=function(e,t,n,r){for(var o,i=r>1?void 0:r?cje(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&uje(t,n,i),i},dje=function(e){function t(){var e;return Ub(this,t),(e=aje(this,t,arguments))._scroller=null,e._onScroll=e._register(new ck),e.onScroll=e._onScroll.event,e}return F_(t,e),Wb(t,[{key:"scroller",get:function(){return this._scroller}},{key:"scrollHeight",get:function(){var e;return(null==(e=this._scroller)?void 0:e.scrollHeight)||0}},{key:"viewTotalHeight",get:function(){var e=this.renderContext.$root.querySelector(".lakex-table-view-calendar-header"),t=(null==e?void 0:e.getBoundingClientRect().height)||0,n=this.renderContext.$root.querySelector(".lakex-view-calendar-week-names"),r=(null==n?void 0:n.getBoundingClientRect().height)||0;return this.scrollHeight+t+r}},{key:"destroy",value:function(){this._scroller=null}},{key:"setScroller",value:function(e){this._scroller=e}}])}($_);function fje(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pje(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fje(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fje(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}sje([Xs(cie)],dje.prototype,"renderContext",2),dje=sje([Ys()],dje);var hje=function(e){var t=e.date,n=e.dateRows,r=e.cellHeight,o=e.scheduleList,i=G3(dje),l=Object(a.useRef)(null),u=function(){var e=Object(a.useRef)(null),t=gP(Object(a.useState)(null),2),n=t[0],r=t[1],o=function(e,t){for(var n=[],r=0;r<e;r++)"function"==typeof t?n.push(t(r,n[r-1])):n.push([r*t,(r+1)*t]);return n},i=function(t){return o(t.length,(function(t,n){var r=e.current.children[t].getBoundingClientRect().height;if(!n)return[0,r];var o=gP(n,2)[1];return[o,o+r]}))};return{boxRef:e,boxInfo:n,makeRowRecords:i,findBoxIndex:function(e,t){var n=t.x-e.left,r=t.y-e.top,o=-1,i=-1;return e.rowRecords.forEach((function(e,t){var n=gP(e,2),i=n[0],a=n[1];i<=r&&r<=a&&(o=t)})),e.colRecords.forEach((function(e,t){var r=gP(e,2),o=r[0],a=r[1];o<=n&&n<=a&&(i=t)})),{rowIndex:o,colIndex:i}},getBoxInfo:function(t){var n=e.current.getBoundingClientRect(),r=n.top,a=n.left,l=n.width,u=n.height,c=ppe,s=l/c;return{top:r,left:a,width:l,height:u,colWidth:s,rowHeight:u/t.length,colRecords:o(c,s),rowRecords:i(t)}},setBoxInfo:r}}(),c=u.boxRef,s=u.boxInfo,d=u.findBoxIndex,f=u.getBoxInfo,p=u.setBoxInfo,h=function(e){var t=e.dateRows,n=e.boxRef,r=e.boxInfo,o=e.snapshotRef,i=e.findBoxIndex,l=e.getBoxInfo,u=e.setBoxInfo,c=e.scheduleList,s=G3(Yxe),d=gP(Object(a.useState)(c),2),f=d[0],p=d[1],h=Object(a.useMemo)((function(){return s.getDateScheduleMap(t,f)}),[t,f]),v=gP(Object(a.useState)(""),2),g=v[0],m=v[1],y=gP(Object(a.useState)(null),2),b=y[0],w=y[1],_=gP(Object(a.useState)(""),2),k=_[0],C=_[1],E=gP(Object(a.useState)(-1),2),O=E[0],S=E[1],x=gP(Object(a.useState)(-1),2),j=x[0],I=x[1],R=gP(Object(a.useState)(!1),2),A=R[0],D=R[1],P=gP(Object(a.useState)(null),2),M=P[0],T=P[1],F=gP(Object(a.useState)(""),2),N=F[0],V=F[1],L=gP(Object(a.useState)(!1),2),B=L[0],$=L[1],z=gP(Object(a.useState)("endDate"),2),U=z[0],H=z[1],q=gP(Object(a.useState)(null),2),W=q[0],G=q[1],K=gP(Object(a.useState)(null),2),Y=K[0],X=K[1],J=gP(Object(a.useState)(null),2),Z=J[0],Q=J[1],ee=gP(Object(a.useState)(!1),2),te=ee[0],ne=ee[1],re=Object(a.useCallback)((function(e){for(var t,r=e.unix(),o=Vb(n.current.querySelectorAll('.lakex-view-calendar-content-box-row-cell[data-unix="'.concat(r,'"] [data-line="true"]'))),i=-1,a=Pw(e),l=h[a],u=[],c=o.map((function(e){var t=e.getBoundingClientRect(),n=!1,r=e.getAttribute("data-id");return e.hasAttribute("data-schedule-line")?(n=!0,i+=1):u.push(l[r]),{start:t.top,end:t.top+t.height,id:r,isScheduleLine:n,index:n?i:i+1}})),s=Object.values(l),d=null==(t=Gl(c,(function(e){return!e.isScheduleLine})))?void 0:t.id,f=l[d],p=[],v=0;v<f;v++)s.includes(v)||p.push(v);return{dateSchedulePosRecords:c,scheduleLineCount:i+1,freeSlot:p,maxSlotOrder:f,blackOrders:u}}),[n,h]),oe=Object(a.useCallback)((function(e){var t=-1,n=-1,r=Z.dateSchedulePosRecords,o=Z.scheduleLineCount;if((null==r?void 0:r.length)>0&&($l(r,(function(o,i){if(0===i){var a=o.end;if(e.y<=a)return t=i,n=o.index,!1}else{var l=r[i-1].end,u=o.end;if(l<e.y&&e.y<=u)return t=i,n=o.index,!1}})),-1===t)){var i=r[r.length-1].end;e.y>i&&(t=r.length,n=o)}if(-1!==t){var a=Z.freeSlot,l=Z.blackOrders;if(l.length===r.length)t=a.length?a[0]:-1;else if(l.includes(t)){for(var u=t;l.includes(u);)u+=1;a.length&&u>a[a.length-1]&&(u=a[0]),t=u}}return{posIndex:t,scheduleIndex:n}}),[Z]),ie=Object(a.useCallback)((function(e){m(e.id)}),[]),ae=Object(a.useCallback)((function(){!A&&!B&&m("")}),[A,B]),le=Object(a.useCallback)((function(e,n){document.body.style.cursor="ew-resize",m(e.id),$(!0),H(n),G(e),V(e.id),u(l(t))}),[t]),ue=Object(a.useCallback)((function(e,n){!b&&n&&w(pje({},n)),m(e.id),D(!0),T(e),C(e.id),u(l(t)),ne(!0)}),[b,t]),ce=Object(a.useCallback)((function(e){var n;if(e.stopPropagation(),e.preventDefault(),(B||A)&&r){var a={x:e.clientX,y:e.clientY};b||w(pje({},a));var l=i(r,a),u=l.rowIndex,c=l.colIndex;if(-1!==u&&-1!==c){var s=t[u][c];if(B&&W)if(s.isSameOrAfter(W.start,dpe)&&"endDate"===U){p(f.map((function(e){return e.id===W.id?new ije({id:W.id,title:W.title,start:W.start,end:s}):e})));var d=new ije({id:W.id,title:W.title,start:W.start,end:s});G(d)}else if(s.isSameOrBefore(W.end,dpe)&&"startDate"===U){p(f.map((function(e){return e.id===W.id?new ije({id:W.id,title:W.title,start:s,end:W.end}):e})));var h=new ije({id:W.id,title:W.title,start:s,end:W.end});G(h)}if(A){if(null!=Y&&Y.isSame(s)){var v=oe(a),g=v.posIndex,m=v.scheduleIndex;(j!==g||O!==m)&&(S(m),I(g))}else X(s),Q(re(s));null!=(n=o.current)&&n.moving&&b&&o.current.moving({x:a.x-b.x,y:a.y-b.y})}}}}),[B,A,U,r,o,Y]),se=Object(a.useCallback)((function(e){if(e.stopPropagation(),e.preventDefault(),B||A){if(A&&M&&Y){var t=h[Pw(Y)]||[],n=Object.entries(t).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]})),r=n[O-1],o=RC.forward;0===O&&(r=n[0],o=RC.forward),null==s||s.updateSchedule({recordId:M.id,startDate:Y,endDate:Y.add(M.duration,dpe),targetRecordId:r,direction:o})}B&&W&&("endDate"===U?null==s||s.updateSchedule({recordId:W.id,endDate:W.end}):null==s||s.updateSchedule({recordId:W.id,startDate:W.start})),document.body.style.cursor="default",m(""),$(!1),D(!1),H("endDate"),G(null),V(""),T(null),C(""),S(-1),I(-1),u(null),ne(!1),X(null),Q(null),w(null)}}),[B,A,Y,M,O,W,U]);return Object(a.useEffect)((function(){p(c)}),[c]),{renderScheduleList:f,scheduleMap:h,activeScheduleId:g,startMovingPos:b,dragScheduleId:k,isDraggingSchedule:A,dragSchedule:M,highlightDate:Y,dragSchedulePosIndex:j,resizeScheduleId:N,isResizingSchedule:B,resizeSchedule:W,isShowScheduleSnapshot:te,handleMouseEnterSchedule:ie,handleMouseLeaveSchedule:ae,handleBeforeResizeSchedule:le,handleBeforeDragSchedule:ue,handleResizeOrDragSchedule:ce,handleAfterResizeOrDragSchedule:se}}({dateRows:n,scheduleList:o,boxRef:c,boxInfo:s,snapshotRef:l,findBoxIndex:d,getBoxInfo:f,setBoxInfo:p}),v=h.renderScheduleList,g=h.scheduleMap,m=h.activeScheduleId,y=h.dragScheduleId,b=h.dragSchedulePosIndex,w=h.resizeSchedule,_=h.highlightDate,k=h.isShowScheduleSnapshot,C=h.handleMouseEnterSchedule,E=h.handleMouseLeaveSchedule,O=h.handleResizeOrDragSchedule,S=h.handleAfterResizeOrDragSchedule,x=h.handleBeforeResizeSchedule,j=h.handleBeforeDragSchedule;return Object(a.useEffect)((function(){c.current&&(null==i||i.setScroller(c.current))}),[i,c]),React.createElement("div",{ref:c,className:"lakex-view-calendar-box",onMouseMove:O,onMouseUp:S},n.map((function(e,o){return React.createElement("div",{className:"lakex-view-calendar-box-row",key:"".concat(t.month(),"-").concat(o),"data-last":o===n.length-1},e.map((function(e,i){return React.createElement(nje,{key:e.toDate().getTime(),cell:e,cellHeight:r,colIndex:i,rowIndex:o,date:t,dateRows:n,scheduleList:v,scheduleMap:g,activeScheduleId:m,dragScheduleId:y,dragSchedulePosIndex:b,resizeSchedule:w,highlightDate:_,onEnterSchedule:C,onLeaveSchedule:E,onBeforeResize:x,onBeforeDrag:j})})))})),k?React.createElement(oje,{ref:l,boxNode:c.current,boxInfo:s,scheduleId:y}):null)},vje=function(e){var t=e.date,n=e.calendarDate,r=e.scheduleList,o=e.rootRect,i=G3(Yxe),l=i.defaultCellMinHeight,u=Object(a.useRef)(null),c=gP(Object(a.useState)(l),2),s=c[0],d=c[1],f=Object(a.useMemo)((function(){return i.getDateRows(n)}),[n]);return Object(a.useEffect)((function(){if(u.current){var e=u.current.getBoundingClientRect().height,t=Math.floor(e/f.length)-1;d(t>l?t:l)}}),[o,f.length]),React.createElement("div",{ref:u,className:"lakex-viewer-calendar-content"},React.createElement(hje,{date:t,dateRows:f,cellHeight:s,scheduleList:r}))},gje=l.a.forwardRef((function(e,t){var n=e.viewRecords,r=e.viewConfig,o=(G3(bye)||{}).SelectionContainer,i=G3(Yxe),u=function(){var e=G3(R_),t=G3(cie),n=gP(Object(a.useState)(null),2),r=n[0],o=n[1],i=gP(Object(a.useState)((null==e?void 0:e.getValue("view.useWindowScroll"))||!1),2),l=i[0],u=i[1];return Object(a.useEffect)((function(){o(t.getRenderBoundingClientRect())}),[]),Object(a.useEffect)((function(){var n=null==e?void 0:e.onConfigurationChange((function(e){var n=e.key,r=e.value;"view.useWindowScroll"===n&&(o(t.getRenderBoundingClientRect()),u(r))}));return function(){null==n||n.destroy()}}),[]),Object(a.useEffect)((function(){var e=Rl((function(){l||o(t.getRenderBoundingClientRect())}),300);return window.addEventListener("resize",e),window.addEventListener("lakex_table_view_resize",e),function(){window.removeEventListener("resize",e),window.removeEventListener("lakex_table_view_resize",e)}}),[l]),{rootRect:r,useWindowScroll:l}}(),c=u.rootRect,s=u.useWindowScroll,d=i.getCurrentDate(r),f=Object(a.useMemo)((function(){return i.getCalendarDate(d)}),[d]);if(!c)return null;var p=i.getSchedules(n,r,f),h=l.a.createElement("div",{ref:t,className:"lakex-viewer-calendar"},l.a.createElement("div",{className:"lakex-viewer-calendar-inner",style:{width:"100%",height:s?"auto":null!=c&&c.height?c.height-14:0}},l.a.createElement(Kxe,{date:d,onCurrentDateChange:function(e){i.setCurrentDate(e)}}),l.a.createElement(Xxe,null),l.a.createElement(vje,{date:d,calendarDate:f,scheduleList:p,rootRect:c})));return o?l.a.createElement(o,null,h):h})),mje=l.a.forwardRef((function(e,t){var n=Rpe({viewId:e.viewId});return l.a.createElement(gje,{ref:t,fields:n.fields,viewRecords:n.viewRecords||new g_,viewFields:n.viewFields,viewConfig:n.viewConfig})}));function yje(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bje(e,t,n){return t=P_(t),D_(e,wje()?Reflect.construct(t,n||[],P_(e).constructor):t.apply(e,n))}function wje(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(wje=function(){return!!e})()}var _je=function(e){function t(){var e;return Ub(this,t),(e=bje(this,t,arguments)).viewType=BC.CALENDAR,e.title=uw("日历视图"),e.desc=uw("轻松搞定日程安排"),e.icon=function(e){return React.createElement(g6,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yje(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yje(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"Calendar",size:16},e))},e.colorCls="yuque-color-purple-4",e.Component=mje,e}return F_(t,e),Wb(t)}(Ole),kje=function(){function e(){Ub(this,e)}return Wb(e,null,[{key:"isLeapYear",value:function(e){return e<1600?e%4==0:e%4==0&&e%100!=0||e%400==0}},{key:"getDaysOfMonth",value:function(t,n){if(1582===t&&10===n)return 21;var r=n-1,o=e.DAYS_OF_MONTH[r];return 1===r&&e.isLeapYear(t)&&o++,o}},{key:"getDaysOfYear",value:function(t){return 1582===t?355:e.isLeapYear(t)?366:365}},{key:"getDaysInYear",value:function(t,n,r){for(var o=0,i=1;i<n;i++)o+=e.getDaysOfMonth(t,i);var a=r;if(1582===t&&10===n&&r>=15)if(r>=15)a-=10;else if(r>4)throw new Error("wrong solar year ".concat(t," month ").concat(n," day ").concat(r));return o+=a}},{key:"getDaysBetween",value:function(t,n,r,o,i,a){var l,u,c;if(t==o)l=e.getDaysInYear(o,i,a)-e.getDaysInYear(t,n,r);else if(t>o){for(u=e.getDaysOfYear(o)-e.getDaysInYear(o,i,a),c=o+1;c<t;c++)u+=e.getDaysOfYear(c);l=-(u+=e.getDaysInYear(t,n,r))}else{for(u=e.getDaysOfYear(t)-e.getDaysInYear(t,n,r),c=t+1;c<o;c++)u+=e.getDaysOfYear(c);l=u+=e.getDaysInYear(o,i,a)}return l}}])}();kje.DAYS_OF_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];var Cje=kje,Eje=function(){return Wb((function e(t,n,r,o){Ub(this,e),this._day=e._ymd(t),this._name=n,this._work=r,this._target=e._ymd(o)}),[{key:"getDay",value:function(){return this._day}},{key:"getName",value:function(){return this._name}},{key:"isWork",value:function(){return this._work}},{key:"getTarget",value:function(){return this._target}},{key:"toString",value:function(){return this._day+" "+this._name+(this._work?"调休":"")+" "+this._target}}],[{key:"_ymd",value:function(e){return e.indexOf("-")<0?e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6):e}}])}(),Oje=function(){function e(){Ub(this,e)}return Wb(e,null,[{key:"_padding",value:function(e){return(e<10?"0":"")+e}},{key:"_findForward",value:function(t){var n=e._DATA_IN_USE.indexOf(t);if(n<0)return null;var r=e._DATA_IN_USE.substring(n),o=r.length%e._SIZE;for(o>0&&(r=r.substring(o));0!==r.indexOf(t)&&r.length>=e._SIZE;)r=r.substring(e._SIZE);return r}},{key:"_buildHolidayForward",value:function(t){var n=t.substring(0,8),r=e._NAMES_IN_USE[t.charCodeAt(8)-e._ZERO],o=t.charCodeAt(9)===e._ZERO,i=t.substring(10,18);return new Eje(n,r,o,i)}},{key:"_findHolidaysForward",value:function(t){var n=[],r=e._findForward(t);if(null==r)return n;for(;0===r.indexOf(t);)n.push(e._buildHolidayForward(r)),r=r.substr(e._SIZE);return n}},{key:"getHoliday",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(n=0==r||0==o?e._findHolidaysForward((t+"").replace(/-/g,"")):e._findHolidaysForward(t+e._padding(r)+e._padding(o))).length<1?null:n[0]}},{key:"_fixNames",value:function(t){t&&(e._NAMES_IN_USE=t)}},{key:"_fixData",value:function(t){if(t){for(var n=[];t.length>=e._SIZE;){var r=t.substring(0,e._SIZE),o=r.substring(0,8),i=e._TAG_REMOVE==r.substring(8,9),a=e.getHoliday(o);if(a){for(var l=-1,u=0,c=e._NAMES_IN_USE.length;u<c;u++)if(e._NAMES_IN_USE[u]===a.getName()){l=u;break}if(l>-1){var s=o+String.fromCharCode(l+e._ZERO)+(a.isWork()?"0":"1")+a.getTarget().replace(/-/g,"");e._DATA_IN_USE=e._DATA_IN_USE.replace(new RegExp(s,"g"),i?"":r)}}else i||n.push(r);t=t.substring(e._SIZE)}n.length>0&&(e._DATA_IN_USE+=n.join(""))}}},{key:"_fix",value:function(t,n){n?(e._fixNames(t),e._fixData(n)):e._fixData(t)}}])}();Oje.NAMES=["元旦节","春节","清明节","劳动节","端午节","中秋节","国庆节","国庆中秋","抗战胜利日"],Oje.DATA="200112290020020101200112300020020101200201010120020101200201020120020101200201030120020101200202091020020212200202101020020212200202121120020212200202131120020212200202141120020212200202151120020212200202161120020212200202171120020212200202181120020212200204273020020501200204283020020501200205013120020501200205023120020501200205033120020501200205043120020501200205053120020501200205063120020501200205073120020501200209286020021001200209296020021001200210016120021001200210026120021001200210036120021001200210046120021001200210056120021001200210066120021001200210076120021001200301010120030101200302011120030201200302021120030201200302031120030201200302041120030201200302051120030201200302061120030201200302071120030201200302081020030201200302091020030201200304263020030501200304273020030501200305013120030501200305023120030501200305033120030501200305043120030501200305053120030501200305063120030501200305073120030501200309276020031001200309286020031001200310016120031001200310026120031001200310036120031001200310046120031001200310056120031001200310066120031001200310076120031001200401010120040101200401171020040122200401181020040122200401221120040122200401231120040122200401241120040122200401251120040122200401261120040122200401271120040122200401281120040122200405013120040501200405023120040501200405033120040501200405043120040501200405053120040501200405063120040501200405073120040501200405083020040501200405093020040501200410016120041001200410026120041001200410036120041001200410046120041001200410056120041001200410066120041001200410076120041001200410096020041001200410106020041001200501010120050101200501020120050101200501030120050101200502051020050209200502061020050209200502091120050209200502101120050209200502111120050209200502121120050209200502131120050209200502141120050209200502151120050209200504303020050501200505013120050501200505023120050501200505033120050501200505043120050501200505053120050501200505063120050501200505073120050501200505083020050501200510016120051001200510026120051001200510036120051001200510046120051001200510056120051001200510066120051001200510076120051001200510086020051001200510096020051001200512310020060101200601010120060101200601020120060101200601030120060101200601281020060129200601291120060129200601301120060129200601311120060129200602011120060129200602021120060129200602031120060129200602041120060129200602051020060129200604293020060501200604303020060501200605013120060501200605023120060501200605033120060501200605043120060501200605053120060501200605063120060501200605073120060501200609306020061001200610016120061001200610026120061001200610036120061001200610046120061001200610056120061001200610066120061001200610076120061001200610086020061001200612300020070101200612310020070101200701010120070101200701020120070101200701030120070101200702171020070218200702181120070218200702191120070218200702201120070218200702211120070218200702221120070218200702231120070218200702241120070218200702251020070218200704283020070501200704293020070501200705013120070501200705023120070501200705033120070501200705043120070501200705053120070501200705063120070501200705073120070501200709296020071001200709306020071001200710016120071001200710026120071001200710036120071001200710046120071001200710056120071001200710066120071001200710076120071001200712290020080101200712300120080101200712310120080101200801010120080101200802021020080206200802031020080206200802061120080206200802071120080206200802081120080206200802091120080206200802101120080206200802111120080206200802121120080206200804042120080404200804052120080404200804062120080404200805013120080501200805023120080501200805033120080501200805043020080501200806074120080608200806084120080608200806094120080608200809135120080914200809145120080914200809155120080914200809276020081001200809286020081001200809296120081001200809306120081001200810016120081001200810026120081001200810036120081001200810046120081001200810056120081001200901010120090101200901020120090101200901030120090101200901040020090101200901241020090125200901251120090125200901261120090125200901271120090125200901281120090125200901291120090125200901301120090125200901311120090125200902011020090125200904042120090404200904052120090404200904062120090404200905013120090501200905023120090501200905033120090501200905284120090528200905294120090528200905304120090528200905314020090528200909276020091001200910016120091001200910026120091001200910036120091001200910046120091001200910055120091003200910065120091003200910075120091003200910085120091003200910105020091003201001010120100101201001020120100101201001030120100101201002131120100213201002141120100213201002151120100213201002161120100213201002171120100213201002181120100213201002191120100213201002201020100213201002211020100213201004032120100405201004042120100405201004052120100405201005013120100501201005023120100501201005033120100501201006124020100616201006134020100616201006144120100616201006154120100616201006164120100616201009195020100922201009225120100922201009235120100922201009245120100922201009255020100922201009266020101001201010016120101001201010026120101001201010036120101001201010046120101001201010056120101001201010066120101001201010076120101001201010096020101001201101010120110101201101020120110101201101030120110101201101301020110203201102021120110203201102031120110203201102041120110203201102051120110203201102061120110203201102071120110203201102081120110203201102121020110203201104022020110405201104032120110405201104042120110405201104052120110405201104303120110501201105013120110501201105023120110501201106044120110606201106054120110606201106064120110606201109105120110912201109115120110912201109125120110912201110016120111001201110026120111001201110036120111001201110046120111001201110056120111001201110066120111001201110076120111001201110086020111001201110096020111001201112310020120101201201010120120101201201020120120101201201030120120101201201211020120123201201221120120123201201231120120123201201241120120123201201251120120123201201261120120123201201271120120123201201281120120123201201291020120123201203312020120404201204012020120404201204022120120404201204032120120404201204042120120404201204283020120501201204293120120501201204303120120501201205013120120501201205023020120501201206224120120623201206234120120623201206244120120623201209295020120930201209305120120930201210016120121001201210026120121001201210036120121001201210046120121001201210056120121001201210066120121001201210076120121001201210086020121001201301010120130101201301020120130101201301030120130101201301050020130101201301060020130101201302091120130210201302101120130210201302111120130210201302121120130210201302131120130210201302141120130210201302151120130210201302161020130210201302171020130210201304042120130404201304052120130404201304062120130404201304273020130501201304283020130501201304293120130501201304303120130501201305013120130501201306084020130612201306094020130612201306104120130612201306114120130612201306124120130612201309195120130919201309205120130919201309215120130919201309225020130919201309296020131001201310016120131001201310026120131001201310036120131001201310046120131001201310056120131001201310066120131001201310076120131001201401010120140101201401261020140131201401311120140131201402011120140131201402021120140131201402031120140131201402041120140131201402051120140131201402061120140131201402081020140131201404052120140405201404062120140405201404072120140405201405013120140501201405023120140501201405033120140501201405043020140501201405314120140602201406014120140602201406024120140602201409065120140908201409075120140908201409085120140908201409286020141001201410016120141001201410026120141001201410036120141001201410046120141004201410056120141001201410066120141001201410076120141001201410116020141001201501010120150101201501020120150101201501030120150101201501040020150101201502151020150219201502181120150219201502191120150219201502201120150219201502211120150219201502221120150219201502231120150219201502241120150219201502281020150219201504042120150405201504052120150405201504062120150405201505013120150501201505023120150501201505033120150501201506204120150620201506214120150620201506224120150620201509038120150903201509048120150903201509058120150903201509068020150903201509265120150927201509275120150927201510016120151001201510026120151001201510036120151001201510046120151004201510056120151001201510066120151001201510076120151001201510106020151001201601010120160101201601020120160101201601030120160101201602061020160208201602071120160208201602081120160208201602091120160208201602101120160208201602111120160208201602121120160208201602131120160208201602141020160208201604022120160404201604032120160404201604042120160404201604303120160501201605013120160501201605023120160501201606094120160609201606104120160609201606114120160609201606124020160609201609155120160915201609165120160915201609175120160915201609185020160915201610016120161001201610026120161001201610036120161001201610046120161001201610056120161001201610066120161001201610076120161001201610086020161001201610096020161001201612310120170101201701010120170101201701020120170101201701221020170128201701271120170128201701281120170128201701291120170128201701301120170128201701311120170128201702011120170128201702021120170128201702041020170128201704012020170404201704022120170404201704032120170404201704042120170404201704293120170501201704303120170501201705013120170501201705274020170530201705284120170530201705294120170530201705304120170530201709306020171001201710016120171001201710026120171001201710036120171001201710045120171004201710056120171001201710066120171001201710076120171001201710086120171001201712300120180101201712310120180101201801010120180101201802111020180216201802151120180216201802161120180216201802171120180216201802181120180216201802191120180216201802201120180216201802211120180216201802241020180216201804052120180405201804062120180405201804072120180405201804082020180405201804283020180501201804293120180501201804303120180501201805013120180501201806164120180618201806174120180618201806184120180618201809225120180924201809235120180924201809245120180924201809296020181001201809306020181001201810016120181001201810026120181001201810036120181001201810046120181001201810056120181001201810066120181001201810076120181001201812290020190101201812300120190101201812310120190101201901010120190101201902021020190205201902031020190205201902041120190205201902051120190205201902061120190205201902071120190205201902081120190205201902091120190205201902101120190205201904052120190405201904062120190405201904072120190405201904283020190501201905013120190501201905023120190501201905033120190501201905043120190501201905053020190501201906074120190607201906084120190607201906094120190607201909135120190913201909145120190913201909155120190913201909296020191001201910016120191001201910026120191001201910036120191001201910046120191001201910056120191001201910066120191001201910076120191001201910126020191001202001010120200101202001191020200125202001241120200125202001251120200125202001261120200125202001271120200125202001281120200125202001291120200125202001301120200125202001311120200125202002011120200125202002021120200125202004042120200404202004052120200404202004062120200404202004263020200501202005013120200501202005023120200501202005033120200501202005043120200501202005053120200501202005093020200501202006254120200625202006264120200625202006274120200625202006284020200625202009277020201001202010017120201001202010026120201001202010036120201001202010046120201001202010056120201001202010066120201001202010076120201001202010086120201001202010106020201001202101010120210101202101020120210101202101030120210101202102071020210212202102111120210212202102121120210212202102131120210212202102141120210212202102151120210212202102161120210212202102171120210212202102201020210212202104032120210404202104042120210404202104052120210404202104253020210501202105013120210501202105023120210501202105033120210501202105043120210501202105053120210501202105083020210501202106124120210614202106134120210614202106144120210614202109185020210921202109195120210921202109205120210921202109215120210921202109266020211001202110016120211001202110026120211001202110036120211001202110046120211001202110056120211001202110066120211001202110076120211001202110096020211001202201010120220101202201020120220101202201030120220101202201291020220201202201301020220201202201311120220201202202011120220201202202021120220201202202031120220201202202041120220201202202051120220201202202061120220201202204022020220405202204032120220405202204042120220405202204052120220405202204243020220501202204303120220501202205013120220501202205023120220501202205033120220501202205043120220501202205073020220501202206034120220603202206044120220603202206054120220603202209105120220910202209115120220910202209125120220910202210016120221001202210026120221001202210036120221001202210046120221001202210056120221001202210066120221001202210076120221001202210086020221001202210096020221001202212310120230101202301010120230101202301020120230101202301211120230122202301221120230122202301231120230122202301241120230122202301251120230122202301261120230122202301271120230122202301281020230122202301291020230122202304052120230405202304233020230501202304293120230501202304303120230501202305013120230501202305023120230501202305033120230501202305063020230501202306224120230622202306234120230622202306244120230622202306254020230622202309295120230929202309306120231001202310016120231001202310026120231001202310036120231001202310046120231001202310056120231001202310066120231001202310076020231001202310086020231001202312300120240101202312310120240101202401010120240101202402041020240210202402101120240210202402111120240210202402121120240210202402131120240210202402141120240210202402151120240210202402161120240210202402171120240210202402181020240210202404042120240404202404052120240404202404062120240404202404072020240404202404283020240501202405013120240501202405023120240501202405033120240501202405043120240501202405053120240501202405113020240501202406084120240610202406094120240610202406104120240610202409145020240917202409155120240917202409165120240917202409175120240917202409296020241001202410016120241001202410026120241001202410036120241001202410046120241001202410056120241001202410066120241001202410076120241001202410126020241001",Oje._SIZE=18,Oje._ZERO=48,Oje._TAG_REMOVE="~",Oje._NAMES_IN_USE=Oje.NAMES,Oje._DATA_IN_USE=Oje.DATA;var Sje=Oje,xje=function(){function e(t,n,r,o,i,a){if(Ub(this,e),1582===t&&10===n&&r>4&&r<15)throw new Error("wrong solar year ".concat(t," month ").concat(n," day ").concat(r));if(n<1||n>12)throw new Error("wrong month ".concat(n));if(r<1||r>31)throw new Error("wrong day ".concat(r));if(o<0||o>23)throw new Error("wrong hour ".concat(o));if(i<0||i>59)throw new Error("wrong minute ".concat(i));if(a<0||a>59)throw new Error("wrong second ".concat(a));this._year=t,this._month=n,this._day=r,this._hour=o,this._minute=i,this._second=a}return Wb(e,[{key:"getYear",value:function(){return this._year}},{key:"getMonth",value:function(){return this._month}},{key:"getDay",value:function(){return this._day}},{key:"getWeek",value:function(){return(Math.floor(this.getJulianDay()+.5)+7000001)%7}},{key:"toYmd",value:function(){for(var e=this._year+"";e.length<4;)e="0"+e;return[e,(this._month<10?"0":"")+this._month,(this._day<10?"0":"")+this._day].join("-")}},{key:"toString",value:function(){return this.toYmd()}},{key:"nextDay",value:function(t){var n=this._year,r=this._month,o=this._day;if(1582===n&&10===r&&o>4&&(o-=10),t>0){o+=t;for(var i=Cje.getDaysOfMonth(n,r);o>i;)o-=i,++r>12&&(r=1,n++),i=Cje.getDaysOfMonth(n,r)}else if(t<0){for(;o+t<=0;)--r<1&&(r=12,n--),o+=Cje.getDaysOfMonth(n,r);o+=t}return 1582===n&&10===r&&o>4&&(o+=10),e.fromYmdHms(n,r,o,this._hour,this._minute,this._second)}},{key:"next",value:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){var n=e.fromYmdHms(this._year,this._month,this._day,this._hour,this._minute,this._second);if(0!==t)for(var r=Math.abs(t),o=t<1?-1:1;r>0;){n=n.next(o);var i=!0,a=Sje.getHoliday(n.getYear(),n.getMonth(),n.getDay());if(a)i=a.isWork();else{var l=n.getWeek();(0===l||6===l)&&(i=!1)}i&&(r-=1)}return n}return this.nextDay(t)}},{key:"getLunar",value:function(){return Nje.fromSolar(this)}},{key:"getJulianDay",value:function(){var e=this._year,t=this._month,n=this._day+((this._second/60+this._minute)/60+this._hour)/24,r=0,o=!1;return 372*e+31*t+Math.floor(n)>=588829&&(o=!0),t<=2&&(t+=12,e--),o&&(r=2-(r=Math.floor(e/100))+Math.floor(r/4)),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+r-1524.5}},{key:"subtract",value:function(e){return Cje.getDaysBetween(e.getYear(),e.getMonth(),e.getDay(),this._year,this._month,this._day)}}],[{key:"fromYmd",value:function(t,n,r){return e.fromYmdHms(t,n,r,0,0,0)}},{key:"fromYmdHms",value:function(t,n,r,o,i,a){return new e(t,n,r,o,i,a)}},{key:"fromDate",value:function(t){return e.fromYmdHms(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())}},{key:"fromJulianDay",value:function(t){var n,r=Math.floor(t+.5),o=t+.5-r;r>=2299161&&(r+=1+(n=Math.floor((r-1867216.25)/36524.25))-Math.floor(n/4)),r+=1524;var i=Math.floor((r-122.1)/365.25);r-=Math.floor(365.25*i);var a=Math.floor(r/30.601),l=r-=Math.floor(30.601*a);a>13?(a-=13,i-=4715):(a-=1,i-=4716),o*=24;var u=Math.floor(o);o-=u,o*=60;var c=Math.floor(o);o-=c,o*=60;var s=Math.round(o);return s>59&&(s-=60,c++),c>59&&(c-=60,u++),u>23&&(u-=24,l+=1),e.fromYmdHms(i,a,l,u,c,s)}}])}();xje.J2000=2451545;var jje=xje,Ije=Wb((function e(){Ub(this,e)}));Ije.BASE_MONTH_ZHI_INDEX=2,Ije.JIE_QI=["{jq.dongZhi}","{jq.xiaoHan}","{jq.daHan}","{jq.liChun}","{jq.yuShui}","{jq.jingZhe}","{jq.chunFen}","{jq.qingMing}","{jq.guYu}","{jq.liXia}","{jq.xiaoMan}","{jq.mangZhong}","{jq.xiaZhi}","{jq.xiaoShu}","{jq.daShu}","{jq.liQiu}","{jq.chuShu}","{jq.baiLu}","{jq.qiuFen}","{jq.hanLu}","{jq.shuangJiang}","{jq.liDong}","{jq.xiaoXue}","{jq.daXue}"],Ije.JIE_QI_IN_USE=["DA_XUE","{jq.dongZhi}","{jq.xiaoHan}","{jq.daHan}","{jq.liChun}","{jq.yuShui}","{jq.jingZhe}","{jq.chunFen}","{jq.qingMing}","{jq.guYu}","{jq.liXia}","{jq.xiaoMan}","{jq.mangZhong}","{jq.xiaZhi}","{jq.xiaoShu}","{jq.daShu}","{jq.liQiu}","{jq.chuShu}","{jq.baiLu}","{jq.qiuFen}","{jq.hanLu}","{jq.shuangJiang}","{jq.liDong}","{jq.xiaoXue}","{jq.daXue}","DONG_ZHI","XIAO_HAN","DA_HAN","LI_CHUN","YU_SHUI","JING_ZHE"],Ije.NUMBER=["{n.zero}","{n.one}","{n.two}","{n.three}","{n.four}","{n.five}","{n.six}","{n.seven}","{n.eight}","{n.nine}","{n.ten}","{n.eleven}","{n.twelve}"],Ije.MONTH=["","{m.one}","{m.two}","{m.three}","{m.four}","{m.five}","{m.six}","{m.seven}","{m.eight}","{m.nine}","{m.ten}","{m.eleven}","{m.twelve}"],Ije.DAY=["","{d.one}","{d.two}","{d.three}","{d.four}","{d.five}","{d.six}","{d.seven}","{d.eight}","{d.nine}","{d.ten}","{d.eleven}","{d.twelve}","{d.thirteen}","{d.fourteen}","{d.fifteen}","{d.sixteen}","{d.seventeen}","{d.eighteen}","{d.nighteen}","{d.twenty}","{d.twentyOne}","{d.twentyTwo}","{d.twentyThree}","{d.twentyFour}","{d.twentyFive}","{d.twentySix}","{d.twentySeven}","{d.twentyEight}","{d.twentyNine}","{d.thirty}"],Ije.FESTIVAL={"1-1":"{jr.chunJie}","1-15":"{jr.yuanXiao}","2-2":"{jr.longTou}","5-5":"{jr.duanWu}","7-7":"{jr.qiXi}","8-15":"{jr.zhongQiu}","9-9":"{jr.chongYang}","12-8":"{jr.laBa}"};var Rje=function(){return Wb((function e(t,n,r,o,i){Ub(this,e),this._year=t,this._month=n,this._dayCount=r,this._firstJulianDay=o,this._index=i}),[{key:"getYear",value:function(){return this._year}},{key:"getMonth",value:function(){return this._month}},{key:"getIndex",value:function(){return this._index}},{key:"getDayCount",value:function(){return this._dayCount}},{key:"getFirstJulianDay",value:function(){return this._firstJulianDay}}],[{key:"fromYm",value:function(e,t){return Mje.fromYear(e).getMonth(t)}}])}(),Aje=function(){function e(){Ub(this,e)}return Wb(e,null,[{key:"decode",value:function(e){var t="0000000000",n=t+t;return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/J/g,"00")).replace(/I/g,"000")).replace(/H/g,"0000")).replace(/G/g,"00000")).replace(/t/g,"02")).replace(/s/g,"002")).replace(/r/g,"0002")).replace(/q/g,"00002")).replace(/p/g,"000002")).replace(/o/g,"0000002")).replace(/n/g,"00000002")).replace(/m/g,"000000002")).replace(/l/g,"0000000002")).replace(/k/g,"01")).replace(/j/g,"0101")).replace(/i/g,"001")).replace(/h/g,"001001")).replace(/g/g,"0001")).replace(/f/g,"00001")).replace(/e/g,"000001")).replace(/d/g,"0000001")).replace(/c/g,"00000001")).replace(/b/g,"000000001")).replace(/a/g,"0000000001")).replace(/A/g,n+n+n)).replace(/B/g,n+n+t)).replace(/C/g,n+n)).replace(/D/g,n+t)).replace(/E/g,n)).replace(/F/g,t)}},{key:"nutationLon2",value:function(t){for(var n=-1.742*t,r=t*t,o=0,i=0,a=e.NUT_B.length;i<a;i+=5)o+=(e.NUT_B[i+3]+n)*Math.sin(e.NUT_B[i]+e.NUT_B[i+1]*t+e.NUT_B[i+2]*r),n=0;return o/100/e.SECOND_PER_RAD}},{key:"eLon",value:function(t,n){t/=10;for(var r,o,i,a,l,u=0,c=1,s=e.XL0[2]-e.XL0[1],d=0;d<6;d++,c*=t)if(r=Math.floor(e.XL0[1+d]),0!=(l=(o=Math.floor(e.XL0[2+d]))-r)){n<0?i=o:(i=Math.floor(3*n*l/s+.5+r),0!=d&&(i+=3),i>o&&(i=o)),a=0;for(var f=r;f<i;f+=3)a+=e.XL0[f]*Math.cos(e.XL0[f+1]+t*e.XL0[f+2]);u+=a*c}u/=e.XL0[0];var p=t*t;return u+=(-.0728-2.7702*t-1.1019*p-.0996*p*t)/e.SECOND_PER_RAD}},{key:"mLon",value:function(t,n){var r,o,i=e.XL1,a=i[0].length,l=1,u=0,c=t*t,s=c*t,d=s*t,f=d*t,p=t-10;u+=(3.81034409+8399.684730072*t-3319e-8*c+3.11e-8*s-2.033e-10*d)*e.SECOND_PER_RAD,u+=5028.792262*t+1.1124406*c+7699e-8*s-23479e-9*d-1.78e-8*f,p>0&&(u+=1.43*p-.866+.054*p*p),c/=1e4,s/=1e8,d/=1e8,(n*=6)<0&&(n=a);for(var h=0,v=i.length;h<v;h++,l*=t){var g=i[h],m=g.length,y=Math.floor(n*m/a+.5);for(h>0&&(y+=6),y>=m&&(y=m),r=0,o=0;r<y;r+=6)o+=g[r]*Math.cos(g[r+1]+t*g[r+2]+c*g[r+3]+s*g[r+4]+d*g[r+5]);u+=o*l}return u/=e.SECOND_PER_RAD}},{key:"gxcSunLon",value:function(t){var n=t*t,r=628.301955*t-.043126-2732e-9*n;return-20.49552*(1+(.016708634-42037e-9*t-1.267e-7*n)*Math.cos(r))/e.SECOND_PER_RAD}},{key:"ev",value:function(e){var t=628.307585*e;return 628.332+21*Math.sin(1.527+t)+.44*Math.sin(1.48+2*t)+.129*Math.sin(5.82+t)*e+55e-5*Math.sin(4.21+t)*e*e}},{key:"saLon",value:function(t,n){return e.eLon(t,n)+e.nutationLon2(t)+e.gxcSunLon(t)+Math.PI}},{key:"dtExt",value:function(e,t){var n=(e-1820)/100;return t*n*n-20}},{key:"dtCalc",value:function(t){var n,r=e.DT_AT.length,o=e.DT_AT[r-2],i=e.DT_AT[r-1];if(t>=o){return t>o+100?e.dtExt(t,31):e.dtExt(t,31)-(e.dtExt(o,31)-i)*(o+100-t)/100}for(n=0;n<r&&!(t<e.DT_AT[n+5]);n+=5);var a=(t-e.DT_AT[n])/(e.DT_AT[n+5]-e.DT_AT[n])*10,l=a*a,u=l*a;return e.DT_AT[n+1]+e.DT_AT[n+2]*a+e.DT_AT[n+3]*l+e.DT_AT[n+4]*u}},{key:"dtT",value:function(t){return e.dtCalc(t/365.2425+2e3)/e.SECOND_PER_DAY}},{key:"mv",value:function(e){var t=8399.71-914*Math.sin(.7848+8328.691425*e+1523e-7*e*e);return t-=179*Math.sin(2.543+15542.7543*e)+160*Math.sin(.1874+7214.0629*e)+62*Math.sin(3.14+16657.3828*e)+34*Math.sin(4.827+16866.9323*e)+22*Math.sin(4.9+23871.4457*e)+12*Math.sin(2.59+14914.4523*e)+7*Math.sin(.23+6585.7609*e)+5*Math.sin(.9+25195.624*e)+5*Math.sin(2.32-7700.3895*e)+5*Math.sin(3.88+8956.9934*e)+5*Math.sin(.49+7771.3771*e)}},{key:"saLonT",value:function(t){var n,r=628.3319653318;return n=(t-1.75347-Math.PI)/r,r=e.ev(n),n+=(t-e.saLon(n,10))/r,r=e.ev(n),n+=(t-e.saLon(n,-1))/r}},{key:"msaLon",value:function(t,n,r){return e.mLon(t,n)+-34e-7-(e.eLon(t,r)+e.gxcSunLon(t)+Math.PI)}},{key:"msaLonT",value:function(t){var n,r=7771.37714500204;return n=(t+1.08472)/r,n+=(t-e.msaLon(n,3,3))/r,r=e.mv(n)-e.ev(n),n+=(t-e.msaLon(n,20,10))/r,n+=(t-e.msaLon(n,-1,60))/r}},{key:"saLonT2",value:function(t){var n=628.3319653318,r=(t-1.75347-Math.PI)/n;return r-=(5297e-9*r*r+.0334166*Math.cos(4.669257+628.307585*r)+2061e-7*Math.cos(2.67823+628.307585*r)*r)/n,r+=(t-e.eLon(r,8)-Math.PI+(20.5+17.2*Math.sin(2.1824-33.75705*r))/e.SECOND_PER_RAD)/n}},{key:"msaLonT2",value:function(t){var n,r=7771.37714500204,o=(n=(t+1.08472)/r)*n;return o=(n-=(-3309e-8*o+.10976*Math.cos(.784758+8328.6914246*n+152292e-9*o)+.02224*Math.cos(.1874+7214.0628654*n-21848e-8*o)-.03342*Math.cos(4.669257+628.307585*n))/r)*n,n+=(t-(e.mLon(n,20)-(4.8950632+628.3319653318*n+5297e-9*o+.0334166*Math.cos(4.669257+628.307585*n)+2061e-7*Math.cos(2.67823+628.307585*n)*n+349e-6*Math.cos(4.6261+1256.61517*n)-20.5/e.SECOND_PER_RAD)))/(r=7771.38-914*Math.sin(.7848+8328.691425*n+1523e-7*o)-179*Math.sin(2.543+15542.7543*n)-160*Math.sin(.1874+7214.0629*n))}},{key:"qiHigh",value:function(t){var n=36525*e.saLonT2(t),r=((n=n-e.dtT(n)+e.ONE_THIRD)+.5)%1*e.SECOND_PER_DAY;return(r<1200||r>e.SECOND_PER_DAY-1200)&&(n=36525*e.saLonT(t)-e.dtT(n)+e.ONE_THIRD),n}},{key:"shuoHigh",value:function(t){var n=36525*e.msaLonT2(t),r=((n=n-e.dtT(n)+e.ONE_THIRD)+.5)%1*e.SECOND_PER_DAY;return(r<1800||r>e.SECOND_PER_DAY-1800)&&(n=36525*e.msaLonT(t)-e.dtT(n)+e.ONE_THIRD),n}},{key:"qiLow",value:function(t){var n=628.3319653318,r=(t-4.895062166)/n;return r-=(53*r*r+334116*Math.cos(4.67+628.307585*r)+2061*Math.cos(2.678+628.3076*r)*r)/n/1e7,36525*(r-=((48950621.66+6283319653.318*r+53*r*r+334166*Math.cos(4.669257+628.307585*r)+3489*Math.cos(4.6261+1256.61517*r)+2060.6*Math.cos(2.67823+628.307585*r)*r-994-834*Math.sin(2.1824-33.75705*r))/1e7-t)/628.332+(32*(r+1.8)*(r+1.8)-20)/e.SECOND_PER_DAY/36525)+e.ONE_THIRD}},{key:"shuoLow",value:function(t){var n=7771.37714500204,r=(t+1.08472)/n;return 36525*(r-=(-331e-7*r*r+.10976*Math.cos(.785+8328.6914*r)+.02224*Math.cos(.187+7214.0629*r)-.03342*Math.cos(4.669+628.3076*r))/n+(32*(r+1.8)*(r+1.8)-20)/e.SECOND_PER_DAY/36525)+e.ONE_THIRD}},{key:"calcShuo",value:function(t){var n,r=e.SHUO_KB.length,o=0,i=14;t+=jje.J2000;var a=e.SHUO_KB[0]-i,l=e.SHUO_KB[r-1]-i,u=2436935;if(t<a||t>=u)o=Math.floor(e.shuoHigh(Math.floor((t+i-2451551)/29.5306)*Math.PI*2)+.5);else if(t>=a&&t<l){for(n=0;n<r&&!(t+i<e.SHUO_KB[n+2]);n+=2);o=e.SHUO_KB[n]+e.SHUO_KB[n+1]*Math.floor((t+i-e.SHUO_KB[n])/e.SHUO_KB[n+1]),1683460==(o=Math.floor(o+.5))&&o++,o-=jje.J2000}else if(t>=l&&t<u){o=Math.floor(e.shuoLow(Math.floor((t+i-2451551)/29.5306)*Math.PI*2)+.5);var c=Math.floor((t-l)/29.5306),s=e.SB.substring(c,c+1);"1"==s?o+=1:"2"==s&&(o-=1)}return o}},{key:"calcQi",value:function(t){var n,r=e.QI_KB.length,o=0;t+=jje.J2000;var i=e.QI_KB[0]-7,a=e.QI_KB[r-1]-7,l=2436935;if(t<i||t>=l)o=Math.floor(e.qiHigh(Math.floor((t+7-2451259)/365.2422*24)*Math.PI/12)+.5);else if(t>=i&&t<a){for(n=0;n<r&&!(t+7<e.QI_KB[n+2]);n+=2);o=e.QI_KB[n]+e.QI_KB[n+1]*Math.floor((t+7-e.QI_KB[n])/e.QI_KB[n+1]),1683460==(o=Math.floor(o+.5))&&o++,o-=jje.J2000}else if(t>=a&&t<l){o=Math.floor(e.qiLow(Math.floor((t+7-2451259)/365.2422*24)*Math.PI/12)+.5);var u=Math.floor((t-a)/365.2422*24),c=e.QB.substring(u,u+1);"1"==c?o+=1:"2"==c&&(o-=1)}return o}},{key:"qiAccurate",value:function(t){var n=36525*e.saLonT(t);return n-e.dtT(n)+e.ONE_THIRD}},{key:"qiAccurate2",value:function(t){var n=Math.PI/12,r=Math.floor((t+293)/365.2422*24)*n,o=e.qiAccurate(r);return o-t>5?e.qiAccurate(r-n):o-t<-5?e.qiAccurate(r+n):o}}])}();Aje.PI_2=2*Math.PI,Aje.ONE_THIRD=1/3,Aje.SECOND_PER_DAY=86400,Aje.SECOND_PER_RAD=648e3/Math.PI,Aje.NUT_B=[2.1824,-33.75705,36e-6,-1720,920,3.5069,1256.66393,11e-6,-132,57,1.3375,16799.4182,-51e-6,-23,10,4.3649,-67.5141,72e-6,21,-9,.04,-628.302,0,-14,0,2.36,8328.691,0,7,0,3.46,1884.966,0,-5,2,5.44,16833.175,0,-4,2,3.69,25128.11,0,-3,0,3.55,628.362,0,2,0],Aje.DT_AT=[-4e3,108371.7,-13036.8,392,0,-500,17201,-627.82,16.17,-.3413,-150,12200.6,-346.41,5.403,-.1593,150,9113.8,-328.13,-1.647,.0377,500,5707.5,-391.41,.915,.3145,900,2203.4,-283.45,13.034,-.1778,1300,490.1,-57.35,2.085,-.0072,1600,120,-9.81,-1.532,.1403,1700,10.2,-.91,.51,-.037,1800,13.4,-.72,.202,-.0193,1830,7.8,-1.81,.416,-.0247,1860,8.3,-.13,-.406,.0292,1880,-5.4,.32,-.183,.0173,1900,-2.3,2.06,.169,-.0135,1920,21.2,1.69,-.304,.0167,1940,24.2,1.22,-.064,.0031,1960,33.2,.51,.231,-.0109,1980,51,1.29,-.026,.0032,2e3,63.87,.1,0,0,2005,64.7,.21,0,0,2012,66.8,.22,0,0,2018,69,.36,0,0,2028,72.6],Aje.XL0=[1e10,20,578,920,1100,1124,1136,1148,1217,1226,1229,1229,1229,1229,1937,2363,2618,2633,2660,2666,17534704567,0,0,334165646,4.669256804,6283.075849991,3489428,4.6261024,12566.1517,349706,2.744118,5753.384885,341757,2.828866,3.523118,313590,3.62767,77713.771468,267622,4.418084,7860.419392,234269,6.135162,3930.209696,132429,.742464,11506.76977,127317,2.037097,529.690965,119917,1.109629,1577.343542,99025,5.23268,5884.92685,90186,2.04505,26.29832,85722,3.50849,398.149,77979,1.17883,5223.69392,75314,2.53339,5507.55324,50526,4.58293,18849.22755,49238,4.20507,775.52261,35666,2.91954,.06731,31709,5.84902,11790.62909,28413,1.89869,796.29801,27104,.31489,10977.0788,24281,.34481,5486.77784,20616,4.80647,2544.31442,20539,1.86948,5573.1428,20226,2.45768,6069.77675,15552,.83306,213.2991,13221,3.41118,2942.46342,12618,1.08303,20.7754,11513,.64545,.98032,10285,.636,4694.00295,10190,.97569,15720.83878,10172,4.2668,7.11355,9921,6.2099,2146.1654,9761,.681,155.4204,8580,5.9832,161000.6857,8513,1.2987,6275.9623,8471,3.6708,71430.6956,7964,1.8079,17260.1547,7876,3.037,12036.4607,7465,1.7551,5088.6288,7387,3.5032,3154.6871,7355,4.6793,801.8209,6963,.833,9437.7629,6245,3.9776,8827.3903,6115,1.8184,7084.8968,5696,2.7843,6286.599,5612,4.3869,14143.4952,5558,3.4701,6279.5527,5199,.1891,12139.5535,5161,1.3328,1748.0164,5115,.2831,5856.4777,4900,.4874,1194.447,4104,5.3682,8429.2413,4094,2.3985,19651.0485,3920,6.1683,10447.3878,3677,6.0413,10213.2855,3660,2.5696,1059.3819,3595,1.7088,2352.8662,3557,1.776,6812.7668,3329,.5931,17789.8456,3041,.4429,83996.8473,3005,2.7398,1349.8674,2535,3.1647,4690.4798,2474,.2148,3.5904,2366,.4847,8031.0923,2357,2.0653,3340.6124,2282,5.222,4705.7323,2189,5.5559,553.5694,2142,1.4256,16730.4637,2109,4.1483,951.7184,2030,.3713,283.8593,1992,5.2221,12168.0027,1986,5.7747,6309.3742,1912,3.8222,23581.2582,1889,5.3863,149854.4001,1790,2.2149,13367.9726,1748,4.5605,135.0651,1622,5.9884,11769.8537,1508,4.1957,6256.7775,1442,4.1932,242.7286,1435,3.7236,38.0277,1397,4.4014,6681.2249,1362,1.8893,7632.9433,1250,1.1305,5.5229,1205,2.6223,955.5997,1200,1.0035,632.7837,1129,.1774,4164.312,1083,.3273,103.0928,1052,.9387,11926.2544,1050,5.3591,1592.596,1033,6.1998,6438.4962,1001,6.0291,5746.2713,980,.999,11371.705,980,5.244,27511.468,938,2.624,5760.498,923,.483,522.577,922,4.571,4292.331,905,5.337,6386.169,862,4.165,7058.598,841,3.299,7234.794,836,4.539,25132.303,813,6.112,4732.031,812,6.271,426.598,801,5.821,28.449,787,.996,5643.179,776,2.957,23013.54,769,3.121,7238.676,758,3.974,11499.656,735,4.386,316.392,731,.607,11513.883,719,3.998,74.782,706,.323,263.084,676,5.911,90955.552,663,3.665,17298.182,653,5.791,18073.705,630,4.717,6836.645,615,1.458,233141.314,612,1.075,19804.827,596,3.321,6283.009,596,2.876,6283.143,555,2.452,12352.853,541,5.392,419.485,531,.382,31441.678,519,4.065,6208.294,513,2.361,10973.556,494,5.737,9917.697,450,3.272,11015.106,449,3.653,206.186,447,2.064,7079.374,435,4.423,5216.58,421,1.906,245.832,413,.921,3738.761,402,.84,20.355,387,1.826,11856.219,379,2.344,3.881,374,2.954,3128.389,370,5.031,536.805,365,1.018,16200.773,365,1.083,88860.057,352,5.978,3894.182,352,2.056,244287.6,351,3.713,6290.189,340,1.106,14712.317,339,.978,8635.942,339,3.202,5120.601,333,.837,6496.375,325,3.479,6133.513,316,5.089,21228.392,316,1.328,10873.986,309,3.646,10.637,303,1.802,35371.887,296,3.397,9225.539,288,6.026,154717.61,281,2.585,14314.168,262,3.856,266.607,262,2.579,22483.849,257,1.561,23543.231,255,3.949,1990.745,251,3.744,10575.407,240,1.161,10984.192,238,.106,7.046,236,4.272,6040.347,234,3.577,10969.965,211,3.714,65147.62,210,.754,13521.751,207,4.228,5650.292,202,.814,170.673,201,4.629,6037.244,200,.381,6172.87,199,3.933,6206.81,199,5.197,6262.3,197,1.046,18209.33,195,1.07,5230.807,195,4.869,36.028,194,4.313,6244.943,192,1.229,709.933,192,5.595,6282.096,192,.602,6284.056,189,3.744,23.878,188,1.904,15.252,188,.867,22003.915,182,3.681,15110.466,181,.491,1.484,179,3.222,39302.097,179,1.259,12559.038,62833196674749,0,0,20605886,2.67823456,6283.07584999,430343,2.635127,12566.1517,42526,1.59047,3.52312,11926,5.79557,26.29832,10898,2.96618,1577.34354,9348,2.5921,18849.2275,7212,1.1385,529.691,6777,1.8747,398.149,6733,4.4092,5507.5532,5903,2.888,5223.6939,5598,2.1747,155.4204,4541,.398,796.298,3637,.4662,775.5226,2896,2.6471,7.1135,2084,5.3414,.9803,1910,1.8463,5486.7778,1851,4.9686,213.2991,1729,2.9912,6275.9623,1623,.0322,2544.3144,1583,1.4305,2146.1654,1462,1.2053,10977.0788,1246,2.8343,1748.0164,1188,3.258,5088.6288,1181,5.2738,1194.447,1151,2.075,4694.003,1064,.7661,553.5694,997,1.303,6286.599,972,4.239,1349.867,945,2.7,242.729,858,5.645,951.718,758,5.301,2352.866,639,2.65,9437.763,610,4.666,4690.48,583,1.766,1059.382,531,.909,3154.687,522,5.661,71430.696,520,1.854,801.821,504,1.425,6438.496,433,.241,6812.767,426,.774,10447.388,413,5.24,7084.897,374,2.001,8031.092,356,2.429,14143.495,350,4.8,6279.553,337,.888,12036.461,337,3.862,1592.596,325,3.4,7632.943,322,.616,8429.241,318,3.188,4705.732,297,6.07,4292.331,295,1.431,5746.271,290,2.325,20.355,275,.935,5760.498,270,4.804,7234.794,253,6.223,6836.645,228,5.003,17789.846,225,5.672,11499.656,215,5.202,11513.883,208,3.955,10213.286,208,2.268,522.577,206,2.224,5856.478,206,2.55,25132.303,203,.91,6256.778,189,.532,3340.612,188,4.735,83996.847,179,1.474,4164.312,178,3.025,5.523,177,3.026,5753.385,159,4.637,3.286,157,6.124,5216.58,155,3.077,6681.225,154,4.2,13367.973,143,1.191,3894.182,138,3.093,135.065,136,4.245,426.598,134,5.765,6040.347,128,3.085,5643.179,127,2.092,6290.189,125,3.077,11926.254,125,3.445,536.805,114,3.244,12168.003,112,2.318,16730.464,111,3.901,11506.77,111,5.32,23.878,105,3.75,7860.419,103,2.447,1990.745,96,.82,3.88,96,4.08,6127.66,91,5.42,206.19,91,.42,7079.37,88,5.17,11790.63,81,.34,9917.7,80,3.89,10973.56,78,2.4,1589.07,78,2.58,11371.7,77,3.98,955.6,77,3.36,36.03,76,1.3,103.09,75,5.18,10969.97,75,4.96,6496.37,73,5.21,38.03,72,2.65,6309.37,70,5.61,3738.76,69,2.6,3496.03,69,.39,15.25,69,2.78,20.78,65,1.13,7058.6,64,4.28,28.45,61,5.63,10984.19,60,.73,419.48,60,5.28,10575.41,58,5.55,17298.18,58,3.19,4732.03,5291887,0,0,871984,1.072097,6283.07585,30913,.86729,12566.1517,2734,.053,3.5231,1633,5.1883,26.2983,1575,3.6846,155.4204,954,.757,18849.228,894,2.057,77713.771,695,.827,775.523,506,4.663,1577.344,406,1.031,7.114,381,3.441,5573.143,346,5.141,796.298,317,6.053,5507.553,302,1.192,242.729,289,6.117,529.691,271,.306,398.149,254,2.28,553.569,237,4.381,5223.694,208,3.754,.98,168,.902,951.718,153,5.759,1349.867,145,4.364,1748.016,134,3.721,1194.447,125,2.948,6438.496,122,2.973,2146.165,110,1.271,161000.686,104,.604,3154.687,100,5.986,6286.599,92,4.8,5088.63,89,5.23,7084.9,83,3.31,213.3,76,3.42,5486.78,71,6.19,4690.48,68,3.43,4694,65,1.6,2544.31,64,1.98,801.82,61,2.48,10977.08,50,1.44,6836.65,49,2.34,1592.6,46,1.31,4292.33,46,3.81,149854.4,43,.04,7234.79,40,4.94,7632.94,39,1.57,71430.7,38,3.17,6309.37,35,.99,6040.35,35,.67,1059.38,31,3.18,2352.87,31,3.55,8031.09,30,1.92,10447.39,30,2.52,6127.66,28,4.42,9437.76,28,2.71,3894.18,27,.67,25132.3,26,5.27,6812.77,25,.55,6279.55,23,1.38,4705.73,22,.64,6256.78,20,6.07,640.88,28923,5.84384,6283.07585,3496,0,0,1682,5.4877,12566.1517,296,5.196,155.42,129,4.722,3.523,71,5.3,18849.23,64,5.97,242.73,40,3.79,553.57,11408,3.14159,0,772,4.134,6283.076,77,3.84,12566.15,42,.42,155.42,88,3.14,0,17,2.77,6283.08,5,2.01,155.42,3,2.21,12566.15,27962,3.1987,84334.66158,10164,5.42249,5507.55324,8045,3.8801,5223.6939,4381,3.7044,2352.8662,3193,4.0003,1577.3435,2272,3.9847,1047.7473,1814,4.9837,6283.0758,1639,3.5646,5856.4777,1444,3.7028,9437.7629,1430,3.4112,10213.2855,1125,4.8282,14143.4952,1090,2.0857,6812.7668,1037,4.0566,71092.8814,971,3.473,4694.003,915,1.142,6620.89,878,4.44,5753.385,837,4.993,7084.897,770,5.554,167621.576,719,3.602,529.691,692,4.326,6275.962,558,4.41,7860.419,529,2.484,4705.732,521,6.25,18073.705,903,3.897,5507.553,618,1.73,5223.694,380,5.244,2352.866,166,1.627,84334.662,10001398880,0,0,167069963,3.098463508,6283.075849991,1395602,3.0552461,12566.1517,308372,5.198467,77713.771468,162846,1.173877,5753.384885,157557,2.846852,7860.419392,92480,5.45292,11506.76977,54244,4.56409,3930.2097,47211,3.661,5884.92685,34598,.96369,5507.55324,32878,5.89984,5223.69392,30678,.29867,5573.1428,24319,4.2735,11790.62909,21183,5.84715,1577.34354,18575,5.02194,10977.0788,17484,3.01194,18849.22755,10984,5.05511,5486.77784,9832,.8868,6069.7768,8650,5.6896,15720.8388,8583,1.2708,161000.6857,6490,.2725,17260.1547,6292,.9218,529.691,5706,2.0137,83996.8473,5574,5.2416,71430.6956,4938,3.245,2544.3144,4696,2.5781,775.5226,4466,5.5372,9437.7629,4252,6.0111,6275.9623,3897,5.3607,4694.003,3825,2.3926,8827.3903,3749,.8295,19651.0485,3696,4.9011,12139.5535,3566,1.6747,12036.4607,3454,1.8427,2942.4634,3319,.2437,7084.8968,3192,.1837,5088.6288,3185,1.7778,398.149,2846,1.2134,6286.599,2779,1.8993,6279.5527,2628,4.589,10447.3878,2460,3.7866,8429.2413,2393,4.996,5856.4777,2359,.2687,796.298,2329,2.8078,14143.4952,2210,1.95,3154.6871,2035,4.6527,2146.1654,1951,5.3823,2352.8662,1883,.6731,149854.4001,1833,2.2535,23581.2582,1796,.1987,6812.7668,1731,6.152,16730.4637,1717,4.4332,10213.2855,1619,5.2316,17789.8456,1381,5.1896,8031.0923,1364,3.6852,4705.7323,1314,.6529,13367.9726,1041,4.3329,11769.8537,1017,1.5939,4690.4798,998,4.201,6309.374,966,3.676,27511.468,874,6.064,1748.016,779,3.674,12168.003,771,.312,7632.943,756,2.626,6256.778,746,5.648,11926.254,693,2.924,6681.225,680,1.423,23013.54,674,.563,3340.612,663,5.661,11371.705,659,3.136,801.821,648,2.65,19804.827,615,3.029,233141.314,612,5.134,1194.447,563,4.341,90955.552,552,2.091,17298.182,534,5.1,31441.678,531,2.407,11499.656,523,4.624,6438.496,513,5.324,11513.883,477,.256,11856.219,461,1.722,7234.794,458,3.766,6386.169,458,4.466,5746.271,423,1.055,5760.498,422,1.557,7238.676,415,2.599,7058.598,401,3.03,1059.382,397,1.201,1349.867,379,4.907,4164.312,360,5.707,5643.179,352,3.626,244287.6,348,.761,10973.556,342,3.001,4292.331,336,4.546,4732.031,334,3.138,6836.645,324,4.164,9917.697,316,1.691,11015.106,307,.238,35371.887,298,1.306,6283.143,298,1.75,6283.009,293,5.738,16200.773,286,5.928,14712.317,281,3.515,21228.392,280,5.663,8635.942,277,.513,26.298,268,4.207,18073.705,266,.9,12352.853,260,2.962,25132.303,255,2.477,6208.294,242,2.8,709.933,231,1.054,22483.849,229,1.07,14314.168,216,1.314,154717.61,215,6.038,10873.986,200,.561,7079.374,198,2.614,951.718,197,4.369,167283.762,186,2.861,5216.58,183,1.66,39302.097,183,5.912,3738.761,175,2.145,6290.189,173,2.168,10575.407,171,3.702,1592.596,171,1.343,3128.389,164,5.55,6496.375,164,5.856,10984.192,161,1.998,10969.965,161,1.909,6133.513,157,4.955,25158.602,154,6.216,23543.231,153,5.357,13521.751,150,5.77,18209.33,150,5.439,155.42,139,1.778,9225.539,139,1.626,5120.601,128,2.46,13916.019,123,.717,143571.324,122,2.654,88860.057,121,4.414,3894.182,121,1.192,3.523,120,4.03,553.569,119,1.513,17654.781,117,3.117,14945.316,113,2.698,6040.347,110,3.085,43232.307,109,.998,955.6,108,2.939,17256.632,107,5.285,65147.62,103,.139,11712.955,103,5.85,213.299,102,3.046,6037.244,101,2.842,8662.24,100,3.626,6262.3,98,2.36,6206.81,98,5.11,6172.87,98,2,15110.47,97,2.67,5650.29,97,2.75,6244.94,96,4.02,6282.1,96,5.31,6284.06,92,.1,29088.81,85,3.26,20426.57,84,2.6,28766.92,81,3.58,10177.26,80,5.81,5230.81,78,2.53,16496.36,77,4.06,6127.66,73,.04,5481.25,72,5.96,12559.04,72,5.92,4136.91,71,5.49,22003.91,70,3.41,7.11,69,.62,11403.68,69,3.9,1589.07,69,1.96,12416.59,69,4.51,426.6,67,1.61,11087.29,66,4.5,47162.52,66,5.08,283.86,66,4.32,16858.48,65,1.04,6062.66,64,1.59,18319.54,63,5.7,45892.73,63,4.6,66567.49,63,3.82,13517.87,62,2.62,11190.38,61,1.54,33019.02,60,5.58,10344.3,60,5.38,316428.23,60,5.78,632.78,59,6.12,9623.69,57,.16,17267.27,57,3.86,6076.89,57,1.98,7668.64,56,4.78,20199.09,55,4.56,18875.53,55,3.51,17253.04,54,3.07,226858.24,54,4.83,18422.63,53,5.02,12132.44,52,3.63,5333.9,52,.97,155427.54,51,3.36,20597.24,50,.99,11609.86,50,2.21,1990.75,48,1.62,12146.67,48,1.17,12569.67,47,4.62,5436.99,47,1.81,12562.63,47,.59,21954.16,47,.76,7342.46,46,.27,4590.91,46,3.77,156137.48,45,5.66,10454.5,44,5.84,3496.03,43,.24,17996.03,41,5.93,51092.73,41,4.21,12592.45,40,5.14,1551.05,40,5.28,15671.08,39,3.69,18052.93,39,4.94,24356.78,38,2.72,11933.37,38,5.23,7477.52,38,4.99,9779.11,37,3.7,9388.01,37,4.44,4535.06,36,2.16,28237.23,36,2.54,242.73,36,.22,5429.88,35,6.15,19800.95,35,2.92,36949.23,34,5.63,2379.16,34,5.73,16460.33,34,5.11,5849.36,33,6.19,6268.85,10301861,1.1074897,6283.07584999,172124,1.064423,12566.1517,70222,3.14159,0,3235,1.0217,18849.2275,3080,2.8435,5507.5532,2497,1.3191,5223.6939,1849,1.4243,1577.3435,1008,5.9138,10977.0788,865,1.42,6275.962,863,.271,5486.778,507,1.686,5088.629,499,6.014,6286.599,467,5.987,529.691,440,.518,4694.003,410,1.084,9437.763,387,4.75,2544.314,375,5.071,796.298,352,.023,83996.847,344,.949,71430.696,341,5.412,775.523,322,6.156,2146.165,286,5.484,10447.388,284,3.42,2352.866,255,6.132,6438.496,252,.243,398.149,243,3.092,4690.48,225,3.689,7084.897,220,4.952,6812.767,219,.42,8031.092,209,1.282,1748.016,193,5.314,8429.241,185,1.82,7632.943,175,3.229,6279.553,173,1.537,4705.732,158,4.097,11499.656,158,5.539,3154.687,150,3.633,11513.883,148,3.222,7234.794,147,3.653,1194.447,144,.817,14143.495,135,6.151,5746.271,134,4.644,6836.645,128,2.693,1349.867,123,5.65,5760.498,118,2.577,13367.973,113,3.357,17789.846,110,4.497,4292.331,108,5.828,12036.461,102,5.621,6256.778,99,1.14,1059.38,98,.66,5856.48,93,2.32,10213.29,92,.77,16730.46,88,1.5,11926.25,86,1.42,5753.38,85,.66,155.42,81,1.64,6681.22,80,4.11,951.72,66,4.55,5216.58,65,.98,25132.3,64,4.19,6040.35,64,.52,6290.19,63,1.51,5643.18,59,6.18,4164.31,57,2.3,10973.56,55,2.32,11506.77,55,2.2,1592.6,55,5.27,3340.61,54,5.54,553.57,53,5.04,9917.7,53,.92,11371.7,52,3.98,17298.18,52,3.6,10969.97,49,5.91,3894.18,49,2.51,6127.66,48,1.67,12168,46,.31,801.82,42,3.7,10575.41,42,4.05,10984.19,40,2.17,7860.42,40,4.17,26.3,38,5.82,7058.6,37,3.39,6496.37,36,1.08,6309.37,36,5.34,7079.37,34,3.62,11790.63,32,.32,16200.77,31,4.24,3738.76,29,4.55,11856.22,29,1.26,8635.94,27,3.45,5884.93,26,5.08,10177.26,26,5.38,21228.39,24,2.26,11712.96,24,1.05,242.73,24,5.59,6069.78,23,3.63,6284.06,23,1.64,4732.03,22,3.46,213.3,21,1.05,3496.03,21,3.92,13916.02,21,4.01,5230.81,20,5.16,12352.85,20,.69,1990.75,19,2.73,6062.66,19,5.01,11015.11,18,6.04,6283.01,18,2.85,7238.68,18,5.6,6283.14,18,5.16,17253.04,18,2.54,14314.17,17,1.58,7.11,17,.98,3930.21,17,4.75,17267.27,16,2.19,6076.89,16,2.19,18073.7,16,6.12,3.52,16,4.61,9623.69,16,3.4,16496.36,15,.19,9779.11,15,5.3,13517.87,15,4.26,3128.39,15,.81,709.93,14,.5,25158.6,14,4.38,4136.91,13,.98,65147.62,13,3.31,154717.61,13,2.11,1589.07,13,1.92,22483.85,12,6.03,9225.54,12,1.53,12559.04,12,5.82,6282.1,12,5.61,5642.2,12,2.38,167283.76,12,.39,12132.44,12,3.98,4686.89,12,5.81,12569.67,12,.56,5849.36,11,.45,6172.87,11,5.8,16858.48,11,6.22,12146.67,11,2.27,5429.88,435939,5.784551,6283.07585,12363,5.57935,12566.1517,1234,3.1416,0,879,3.628,77713.771,569,1.87,5573.143,330,5.47,18849.228,147,4.48,5507.553,110,2.842,161000.686,101,2.815,5223.694,85,3.11,1577.34,65,5.47,775.52,61,1.38,6438.5,50,4.42,6286.6,47,3.66,7084.9,46,5.39,149854.4,42,.9,10977.08,40,3.2,5088.63,35,1.81,5486.78,32,5.35,3154.69,30,3.52,796.3,29,4.62,4690.48,28,1.84,4694,27,3.14,71430.7,27,6.17,6836.65,26,1.42,2146.17,25,2.81,1748.02,24,2.18,155.42,23,4.76,7234.79,21,3.38,7632.94,21,.22,4705.73,20,4.22,1349.87,20,2.01,1194.45,20,4.58,529.69,19,1.59,6309.37,18,5.7,6040.35,18,6.03,4292.33,17,2.9,9437.76,17,2,8031.09,17,5.78,83996.85,16,.05,2544.31,15,.95,6127.66,14,.36,10447.39,14,1.48,2352.87,13,.77,553.57,13,5.48,951.72,13,5.27,6279.55,13,3.76,6812.77,11,5.41,6256.78,10,.68,1592.6,10,4.95,398.15,10,1.15,3894.18,10,5.2,244287.6,10,1.94,11856.22,9,5.39,25132.3,8,6.18,1059.38,8,.69,8429.24,8,5.85,242.73,7,5.26,14143.5,7,.52,801.82,6,2.24,8635.94,6,4,13367.97,6,2.77,90955.55,6,5.17,7058.6,5,1.46,233141.31,5,4.13,7860.42,5,3.91,26.3,5,3.89,12036.46,5,5.58,6290.19,5,5.54,1990.75,5,.83,11506.77,5,6.22,6681.22,4,5.26,10575.41,4,1.91,7477.52,4,.43,10213.29,4,1.09,709.93,4,5.09,11015.11,4,4.22,88860.06,4,3.57,7079.37,4,1.98,6284.06,4,3.93,10973.56,4,6.18,9917.7,4,.36,10177.26,4,2.75,3738.76,4,3.33,5643.18,4,5.36,25158.6,14459,4.27319,6283.07585,673,3.917,12566.152,77,0,0,25,3.73,18849.23,4,2.8,6286.6,386,2.564,6283.076,31,2.27,12566.15,5,3.44,5573.14,2,2.05,18849.23,1,2.06,77713.77,1,4.41,161000.69,1,3.82,149854.4,1,4.08,6127.66,1,5.26,6438.5,9,1.22,6283.08,1,.66,12566.15],Aje.XL1=[[22639.586,.78475822,8328.691424623,1.5229241,25.0719,-.123598,4586.438,.1873974,7214.06286536,-2.184756,-18.86,.0828,2369.914,2.542952,15542.75428998,-.661832,6.212,-.0408,769.026,3.140313,16657.38284925,3.04585,50.144,-.2472,666.418,1.527671,628.30195521,-.02664,.062,-.0054,411.596,4.826607,16866.932315,-1.28012,-1.07,-.0059,211.656,4.115028,-1114.6285593,-3.70768,-43.93,.2064,205.436,.230523,6585.7609101,-2.15812,-18.92,.0882,191.956,4.898507,23871.4457146,.86109,31.28,-.164,164.729,2.586078,14914.4523348,-.6352,6.15,-.035,147.321,5.4553,-7700.3894694,-1.5496,-25.01,.118,124.988,.48608,7771.377145,-.3309,3.11,-.02,109.38,3.88323,8956.9933798,1.4963,25.13,-.129,55.177,5.57033,-1324.178025,.6183,7.3,-.035,45.1,.89898,25195.62374,.2428,24,-.129,39.533,3.81213,-8538.24089,2.803,26.1,-.118,38.43,4.30115,22756.817155,-2.8466,-12.6,.042,36.124,5.49587,24986.074274,4.5688,75.2,-.371,30.773,1.94559,14428.125731,-4.3695,-37.7,.166,28.397,3.28586,7842.364821,-2.2114,-18.8,.077,24.358,5.64142,16171.056245,-.6885,6.3,-.046,18.585,4.41371,-557.31428,-1.8538,-22,.1,17.954,3.58454,8399.6791,-.3576,3.2,-.03,14.53,4.9416,23243.143759,.888,31.2,-.16,14.38,.9709,32200.137139,2.384,56.4,-.29,14.251,5.7641,-2.3012,1.523,25.1,-.12,13.899,.3735,31085.50858,-1.324,12.4,-.08,13.194,1.7595,-9443.319984,-5.231,-69,.33,9.679,3.0997,-16029.080894,-3.072,-50.1,.24,9.366,.3016,24080.99518,-3.465,-19.9,.08,8.606,4.1582,-1742.930514,-3.681,-44,.21,8.453,2.8416,16100.06857,1.192,28.2,-.14,8.05,2.6292,14286.15038,-.609,6.1,-.03,7.63,6.2388,17285.684804,3.019,50.2,-.25,7.447,1.4845,1256.60391,-.053,.1,-.01,7.371,.2736,5957.458955,-2.131,-19,.09,7.063,5.6715,33.757047,-.308,-3.6,.02,6.383,4.7843,7004.5134,2.141,32.4,-.16,5.742,2.6572,32409.686605,-1.942,5,-.05,4.374,4.3443,22128.5152,-2.82,-13,.05,3.998,3.2545,33524.31516,1.766,49,-.25,3.21,2.2443,14985.44001,-2.516,-16,.06,2.915,1.7138,24499.74767,.834,31,-.17,2.732,1.9887,13799.82378,-4.343,-38,.17,2.568,5.4122,-7072.08751,-1.576,-25,.11,2.521,3.2427,8470.66678,-2.238,-19,.07,2.489,4.0719,-486.3266,-3.734,-44,.2,2.146,5.6135,-1952.47998,.645,7,-.03,1.978,2.7291,39414.2,.199,37,-.21,1.934,1.5682,33314.7657,6.092,100,-.5,1.871,.4166,30457.20662,-1.297,12,-.1,1.753,2.0582,-8886.0057,-3.38,-47,.2,1.437,2.386,-695.87607,.59,7,0,1.373,3.026,-209.54947,4.33,51,-.2,1.262,5.94,16728.37052,1.17,28,-.1,1.224,6.172,6656.74859,-4.04,-41,.2,1.187,5.873,6099.43431,-5.89,-63,.3,1.177,1.014,31571.83518,2.41,56,-.3,1.162,3.84,9585.29534,1.47,25,-.1,1.143,5.639,8364.73984,-2.18,-19,.1,1.078,1.229,70.98768,-1.88,-22,.1,1.059,3.326,40528.82856,3.91,81,-.4,.99,5.013,40738.37803,-.42,30,-.2,.948,5.687,-17772.01141,-6.75,-94,.5,.876,.298,-.35232,0,0,0,.822,2.994,393.02097,0,0,0,.788,1.836,8326.39022,3.05,50,-.2,.752,4.985,22614.8418,.91,31,-.2,.74,2.875,8330.99262,0,0,0,.669,.744,-24357.77232,-4.6,-75,.4,.644,1.314,8393.12577,-2.18,-19,.1,.639,5.888,575.33849,0,0,0,.635,1.116,23385.11911,-2.87,-13,0,.584,5.197,24428.75999,2.71,53,-.3,.583,3.513,-9095.55517,.95,4,0,.572,6.059,29970.88002,-5.03,-32,.1,.565,2.96,.32863,1.52,25,-.1,.561,4.001,-17981.56087,-2.43,-43,.2,.557,.529,7143.07519,-.3,3,0,.546,2.311,25614.37623,4.54,75,-.4,.536,4.229,15752.30376,-4.99,-45,.2,.493,3.316,-8294.9344,-1.83,-29,.1,.491,1.744,8362.4485,1.21,21,-.1,.478,1.803,-10071.6219,-5.2,-69,.3,.454,.857,15333.2048,3.66,57,-.3,.445,2.071,8311.7707,-2.18,-19,.1,.426,.345,23452.6932,-3.44,-20,.1,.42,4.941,33733.8646,-2.56,-2,0,.413,1.642,17495.2343,-1.31,-1,0,.404,1.458,23314.1314,-.99,9,-.1,.395,2.132,38299.5714,-3.51,-6,0,.382,2.7,31781.3846,-1.92,5,0,.375,4.827,6376.2114,2.17,32,-.2,.361,3.867,16833.1753,-.97,3,0,.358,5.044,15056.4277,-4.4,-38,.2,.35,5.157,-8257.7037,-3.4,-47,.2,.344,4.233,157.7344,0,0,0,.34,2.672,13657.8484,-.58,6,0,.329,5.61,41853.0066,3.29,74,-.4,.325,5.895,-39.8149,0,0,0,.309,4.387,21500.2132,-2.79,-13,.1,.302,1.278,786.0419,0,0,0,.302,5.341,-24567.3218,-.27,-24,.1,.301,1.045,5889.8848,-1.57,-12,0,.294,4.201,-2371.2325,-3.65,-44,.2,.293,3.704,21642.1886,-6.55,-57,.2,.29,4.069,32828.4391,2.36,56,-.3,.289,3.472,31713.8105,-1.35,12,-.1,.285,5.407,-33.7814,.31,4,0,.283,5.998,-16.9207,-3.71,-44,.2,.283,2.772,38785.898,.23,37,-.2,.274,5.343,15613.742,-2.54,-16,.1,.263,3.997,25823.9257,.22,24,-.1,.254,.6,24638.3095,-1.61,2,0,.253,1.344,6447.1991,.29,10,-.1,.25,.887,141.9754,-3.76,-44,.2,.247,.317,5329.157,-2.1,-19,.1,.245,.141,36.0484,-3.71,-44,.2,.231,2.287,14357.1381,-2.49,-16,.1,.227,5.158,2.6298,0,0,0,.219,5.085,47742.8914,1.72,63,-.3,.211,2.145,6638.7244,-2.18,-19,.1,.201,4.415,39623.7495,-4.13,-14,0,.194,2.091,588.4927,0,0,0,.193,3.057,-15400.7789,-3.1,-50,0,.186,5.598,16799.3582,-.72,6,0,.185,3.886,1150.677,0,0,0,.183,1.619,7178.0144,1.52,25,0,.181,2.635,8328.3391,1.52,25,0,.181,2.077,8329.0437,1.52,25,0,.179,3.215,-9652.8694,-.9,-18,0,.176,1.716,-8815.018,-5.26,-69,0,.175,5.673,550.7553,0,0,0,.17,2.06,31295.058,-5.6,-39,0,.167,1.239,7211.7617,-.7,6,0,.165,4.499,14967.4158,-.7,6,0,.164,3.595,15540.4531,.9,31,0,.164,4.237,522.3694,0,0,0,.163,4.633,15545.0555,-2.2,-19,0,.161,.478,6428.0209,-2.2,-19,0,.158,2.03,13171.5218,-4.3,-38,0,.157,2.28,7216.3641,-3.7,-44,0,.154,5.65,7935.6705,1.5,25,0,.152,.46,29828.9047,-1.3,12,0,.151,1.19,-.7113,0,0,0,.15,1.42,23942.4334,-1,9,0,.144,2.75,7753.3529,1.5,25,0,.137,2.08,7213.7105,-2.2,-19,0,.137,1.44,7214.4152,-2.2,-19,0,.136,4.46,-1185.6162,-1.8,-22,0,.136,3.03,8000.1048,-2.2,-19,0,.134,2.83,14756.7124,-.7,6,0,.131,5.05,6821.0419,-2.2,-19,0,.128,5.99,-17214.6971,-4.9,-72,0,.127,5.35,8721.7124,1.5,25,0,.126,4.49,46628.2629,-2,19,0,.125,5.94,7149.6285,1.5,25,0,.124,1.09,49067.0695,1.1,55,0,.121,2.88,15471.7666,1.2,28,0,.111,3.92,41643.4571,7.6,125,-1,.11,1.96,8904.0299,1.5,25,0,.106,3.3,-18.0489,-2.2,-19,0,.105,2.3,-4.931,1.5,25,0,.104,2.22,-6.559,-1.9,-22,0,.101,1.44,1884.9059,-.1,0,0,.1,5.92,5471.1324,-5.9,-63,0,.099,1.12,15149.7333,-.7,6,0,.096,4.73,15508.9972,-.4,10,0,.095,5.18,7230.9835,1.5,25,0,.093,3.37,39900.5266,3.9,81,0,.092,2.01,25057.0619,2.7,53,0,.092,1.21,-79.6298,0,0,0,.092,1.65,-26310.2523,-4,-68,0,.091,1.01,42062.5561,-1,23,0,.09,6.1,29342.5781,-5,-32,0,.09,4.43,15542.402,-.7,6,0,.09,3.8,15543.1066,-.7,6,0,.089,4.15,6063.3859,-2.2,-19,0,.086,4.03,52.9691,0,0,0,.085,.49,47952.4409,-2.6,11,0,.085,1.6,7632.8154,2.1,32,0,.084,.22,14392.0773,-.7,6,0,.083,6.22,6028.4466,-4,-41,0,.083,.63,-7909.9389,2.8,26,0,.083,5.2,-77.5523,0,0,0,.082,2.74,8786.1467,-2.2,-19,0,.08,2.43,9166.5428,-2.8,-26,0,.08,3.7,-25405.1732,4.1,27,0,.078,5.68,48857.52,5.4,106,-1,.077,1.85,8315.5735,-2.2,-19,0,.075,5.46,-18191.1103,1.9,8,0,.075,1.41,-16238.6304,1.3,1,0,.074,5.06,40110.0761,-.4,30,0,.072,2.1,64.4343,-3.7,-44,0,.071,2.17,37671.2695,-3.5,-6,0,.069,1.71,16693.4313,-.7,6,0,.069,3.33,-26100.7028,-8.3,-119,1,.068,1.09,8329.4028,1.5,25,0,.068,3.62,8327.9801,1.5,25,0,.068,2.41,16833.1509,-1,3,0,.067,3.4,24709.2971,-3.5,-20,0,.067,1.65,8346.7156,-.3,3,0,.066,2.61,22547.2677,1.5,39,0,.066,3.5,15576.5113,-1,3,0,.065,5.76,33037.9886,-2,5,0,.065,4.58,8322.1325,-.3,3,0,.065,6.2,17913.9868,3,50,0,.065,1.5,22685.8295,-1,9,0,.065,2.37,7180.3058,-1.9,-15,0,.064,1.06,30943.5332,2.4,56,0,.064,1.89,8288.8765,1.5,25,0,.064,4.7,6.0335,.3,4,0,.063,2.83,8368.5063,1.5,25,0,.063,5.66,-2580.7819,.7,7,0,.062,3.78,7056.3285,-2.2,-19,0,.061,1.49,8294.91,1.8,29,0,.061,.12,-10281.1714,-.9,-18,0,.061,3.06,-8362.4729,-1.2,-21,0,.061,4.43,8170.9571,1.5,25,0,.059,5.78,-13.1179,-3.7,-44,0,.059,5.97,6625.5702,-2.2,-19,0,.058,5.01,-.508,-.3,0,0,.058,2.73,7161.0938,-2.2,-19,0,.057,.19,7214.0629,-2.2,-19,0,.057,4,22199.5029,-4.7,-35,0,.057,5.38,8119.142,5.8,76,0,.056,1.07,7542.6495,1.5,25,0,.056,.28,8486.4258,1.5,25,0,.054,4.19,16655.0816,4.6,75,0,.053,.72,7267.032,-2.2,-19,0,.053,3.12,12.6192,.6,7,0,.052,2.99,-32896.013,-1.8,-49,0,.052,3.46,1097.708,0,0,0,.051,5.37,-6443.786,-1.6,-25,0,.051,1.35,7789.401,-2.2,-19,0,.051,5.83,40042.502,.2,38,0,.051,3.63,9114.733,1.5,25,0,.05,1.51,8504.484,-2.5,-22,0,.05,5.23,16659.684,1.5,25,0,.05,1.15,7247.82,-2.5,-23,0,.047,.25,-1290.421,.3,0,0,.047,4.67,-32686.464,-6.1,-100,0,.047,3.49,548.678,0,0,0,.047,2.37,6663.308,-2.2,-19,0,.046,.98,1572.084,0,0,0,.046,2.04,14954.262,-.7,6,0,.046,3.72,6691.693,-2.2,-19,0,.045,6.19,-235.287,0,0,0,.044,2.96,32967.001,-.1,27,0,.044,3.82,-1671.943,-5.6,-66,0,.043,5.82,1179.063,0,0,0,.043,.07,34152.617,1.7,49,0,.043,3.71,6514.773,-.3,0,0,.043,5.62,15.732,-2.5,-23,0,.043,5.8,8351.233,-2.2,-19,0,.042,.27,7740.199,1.5,25,0,.042,6.14,15385.02,-.7,6,0,.042,6.13,7285.051,-4.1,-41,0,.041,1.27,32757.451,4.2,78,0,.041,4.46,8275.722,1.5,25,0,.04,.23,8381.661,1.5,25,0,.04,5.87,-766.864,2.5,29,0,.04,1.66,254.431,0,0,0,.04,.4,9027.981,-.4,0,0,.04,2.96,7777.936,1.5,25,0,.039,4.67,33943.068,6.1,100,0,.039,3.52,8326.062,1.5,25,0,.039,3.75,21013.887,-6.5,-57,0,.039,5.6,606.978,0,0,0,.039,1.19,8331.321,1.5,25,0,.039,2.84,7211.433,-2.2,-19,0,.038,.67,7216.693,-2.2,-19,0,.038,6.22,25161.867,.6,28,0,.038,4.4,7806.322,1.5,25,0,.038,4.16,9179.168,-2.2,-19,0,.037,4.73,14991.999,-.7,6,0,.036,.35,67.514,-.6,-7,0,.036,3.7,25266.611,-1.6,0,0,.036,5.39,16328.796,-.7,6,0,.035,1.44,7174.248,-2.2,-19,0,.035,5,15684.73,-4.4,-38,0,.035,.39,-15.419,-2.2,-19,0,.035,6.07,15020.385,-.7,6,0,.034,6.01,7371.797,-2.2,-19,0,.034,.96,-16623.626,-3.4,-54,0,.033,6.24,9479.368,1.5,25,0,.033,3.21,23661.896,5.2,82,0,.033,4.06,8311.418,-2.2,-19,0,.033,2.4,1965.105,0,0,0,.033,5.17,15489.785,-.7,6,0,.033,5.03,21986.54,.9,31,0,.033,4.1,16691.14,2.7,46,0,.033,5.13,47114.589,1.7,63,0,.033,4.45,8917.184,1.5,25,0,.033,4.23,2.078,0,0,0,.032,2.33,75.251,1.5,25,0,.032,2.1,7253.878,-2.2,-19,0,.032,3.11,-.224,1.5,25,0,.032,4.43,16640.462,-.7,6,0,.032,5.68,8328.363,0,0,0,.031,5.32,8329.02,3,50,0,.031,3.7,16118.093,-.7,6,0,.03,3.67,16721.817,-.7,6,0,.03,5.27,-1881.492,-1.2,-15,0,.03,5.72,8157.839,-2.2,-19,0,.029,5.73,-18400.313,-6.7,-94,0,.029,2.76,16,-2.2,-19,0,.029,1.75,8879.447,1.5,25,0,.029,.32,8851.061,1.5,25,0,.029,.9,14704.903,3.7,57,0,.028,2.9,15595.723,-.7,6,0,.028,5.88,16864.631,.2,24,0,.028,.63,16869.234,-2.8,-26,0,.028,4.04,-18609.863,-2.4,-43,0,.027,5.83,6727.736,-5.9,-63,0,.027,6.12,418.752,4.3,51,0,.027,.14,41157.131,3.9,81,0,.026,3.8,15.542,0,0,0,.026,1.68,50181.698,4.8,99,-1,.026,.32,315.469,0,0,0,.025,5.67,19.188,.3,0,0,.025,3.16,62.133,-2.2,-19,0,.025,3.76,15502.939,-.7,6,0,.025,4.53,45999.961,-2,19,0,.024,3.21,837.851,-4.4,-51,0,.024,2.82,38157.596,.3,37,0,.024,5.21,15540.124,-.7,6,0,.024,.26,14218.576,0,13,0,.024,3.01,15545.384,-.7,6,0,.024,1.16,-17424.247,-.6,-21,0,.023,2.34,-67.574,.6,7,0,.023,2.44,18.024,-1.9,-22,0,.023,3.7,469.4,0,0,0,.023,.72,7136.511,-2.2,-19,0,.023,4.5,15582.569,-.7,6,0,.023,2.8,-16586.395,-4.9,-72,0,.023,1.51,80.182,0,0,0,.023,1.09,5261.583,-1.5,-12,0,.023,.56,54956.954,-.5,44,0,.023,4.01,8550.86,-2.2,-19,0,.023,4.46,38995.448,-4.1,-14,0,.023,3.82,2358.126,0,0,0,.022,3.77,32271.125,.5,34,0,.022,.82,15935.775,-.7,6,0,.022,1.07,24013.421,-2.9,-13,0,.022,.4,8940.078,-2.2,-19,0,.022,2.06,15700.489,-.7,6,0,.022,4.27,15124.002,-5,-45,0,.021,1.16,56071.583,3.2,88,0,.021,5.58,9572.189,-2.2,-19,0,.02,1.7,-17.273,-3.7,-44,0,.02,3.05,214.617,0,0,0,.02,4.41,8391.048,-2.2,-19,0,.02,5.95,23869.145,2.4,56,0,.02,.42,40947.927,-4.7,-21,0,.019,1.39,5818.897,.3,10,0,.019,.71,23873.747,-.7,6,0,.019,2.81,7291.615,-2.2,-19,0,.019,5.09,8428.018,-2.2,-19,0,.019,4.14,6518.187,-1.6,-12,0,.019,3.85,21.33,0,0,0,.018,.66,14445.046,-.7,6,0,.018,1.65,.966,-4,-48,0,.018,5.64,-17143.709,-6.8,-94,0,.018,6.01,7736.432,-2.2,-19,0,.018,2.74,31153.083,-1.9,5,0,.018,4.58,6116.355,-2.2,-19,0,.018,2.28,46.401,.3,0,0,.018,3.8,10213.597,1.4,25,0,.018,2.84,56281.132,-1.1,36,0,.018,3.53,8249.062,1.5,25,0,.017,4.43,20871.911,-3,-13,0,.017,4.44,627.596,0,0,0,.017,1.85,628.308,0,0,0,.017,1.19,8408.321,2,25,0,.017,1.95,7214.056,-2,-19,0,.017,1.57,7214.07,-2,-19,0,.017,1.65,13870.811,-6,-60,0,.017,.3,22.542,-4,-44,0,.017,2.62,-119.445,0,0,0,.016,4.87,5747.909,2,32,0,.016,4.45,14339.108,-1,6,0,.016,1.83,41366.68,0,30,0,.016,4.53,16309.618,-3,-23,0,.016,2.54,15542.754,-1,6,0,.016,6.05,1203.646,0,0,0,.015,5.2,2751.147,0,0,0,.015,1.8,-10699.924,-5,-69,0,.015,.4,22824.391,-3,-20,0,.015,2.1,30666.756,-6,-39,0,.015,2.1,6010.417,-2,-19,0,.015,.7,-23729.47,-5,-75,0,.015,1.4,14363.691,-1,6,0,.015,5.8,16900.689,-2,0,0,.015,5.2,23800.458,3,53,0,.015,5.3,6035,-2,-19,0,.015,1.2,8251.139,2,25,0,.015,3.6,-8.86,0,0,0,.015,.8,882.739,0,0,0,.015,3,1021.329,0,0,0,.015,.6,23296.107,1,31,0,.014,5.4,7227.181,2,25,0,.014,.1,7213.352,-2,-19,0,.014,4,15506.706,3,50,0,.014,3.4,7214.774,-2,-19,0,.014,4.6,6665.385,-2,-19,0,.014,.1,-8.636,-2,-22,0,.014,3.1,15465.202,-1,6,0,.014,4.9,508.863,0,0,0,.014,3.5,8406.244,2,25,0,.014,1.3,13313.497,-8,-82,0,.014,2.8,49276.619,-3,0,0,.014,.1,30528.194,-3,-10,0,.013,1.7,25128.05,1,31,0,.013,2.9,14128.405,-1,6,0,.013,3.4,57395.761,3,80,0,.013,2.7,13029.546,-1,6,0,.013,3.9,7802.556,-2,-19,0,.013,1.6,8258.802,-2,-19,0,.013,2.2,8417.709,-2,-19,0,.013,.7,9965.21,-2,-19,0,.013,3.4,50391.247,0,48,0,.013,3,7134.433,-2,-19,0,.013,2.9,30599.182,-5,-31,0,.013,3.6,-9723.857,1,0,0,.013,4.8,7607.084,-2,-19,0,.012,.8,23837.689,1,35,0,.012,3.6,4.409,-4,-44,0,.012,5,16657.031,3,50,0,.012,4.4,16657.735,3,50,0,.012,1.1,15578.803,-4,-38,0,.012,6,-11.49,0,0,0,.012,1.9,8164.398,0,0,0,.012,2.4,31852.372,-4,-17,0,.012,2.4,6607.085,-2,-19,0,.012,4.2,8359.87,0,0,0,.012,.5,5799.713,-2,-19,0,.012,2.7,7220.622,0,0,0,.012,4.3,-139.72,0,0,0,.012,2.3,13728.836,-2,-16,0,.011,3.6,14912.146,1,31,0,.011,4.7,14916.748,-2,-19,0],[1.6768,4.66926,628.301955,-.0266,.1,-.005,.51642,3.3721,6585.76091,-2.158,-18.9,.09,.41383,5.7277,14914.452335,-.635,6.2,-.04,.37115,3.9695,7700.389469,1.55,25,-.12,.2756,.7416,8956.99338,1.496,25.1,-.13,.24599,4.2253,-2.3012,1.523,25.1,-.12,.07118,.1443,7842.36482,-2.211,-19,.08,.06128,2.4998,16171.05625,-.688,6,0,.04516,.443,8399.6791,-.36,3,0,.04048,5.771,14286.15038,-.61,6,0,.03747,4.626,1256.60391,-.05,0,0,.03707,3.415,5957.45895,-2.13,-19,.1,.03649,1.8,23243.14376,.89,31,-.2,.02438,.042,16029.08089,3.07,50,-.2,.02165,1.017,-1742.93051,-3.68,-44,.2,.01923,3.097,17285.6848,3.02,50,-.3,.01692,1.28,.3286,1.52,25,-.1,.01361,.298,8326.3902,3.05,50,-.2,.01293,4.013,7072.0875,1.58,25,-.1,.01276,4.413,8330.9926,0,0,0,.0127,.101,8470.6668,-2.24,-19,.1,.01097,1.203,22128.5152,-2.82,-13,0,.01088,2.545,15542.7543,-.66,6,0,.00835,.19,7214.0629,-2.18,-19,.1,.00734,4.855,24499.7477,.83,31,-.2,.00686,5.13,13799.8238,-4.34,-38,.2,.00631,.93,-486.3266,-3.73,-44,0,.00585,.699,9585.2953,1.5,25,0,.00566,4.073,8328.3391,1.5,25,0,.00566,.638,8329.0437,1.5,25,0,.00539,2.472,-1952.48,.6,7,0,.00509,2.88,-.7113,0,0,0,.00469,3.56,30457.2066,-1.3,12,0,.00387,.78,-.3523,0,0,0,.00378,1.84,22614.8418,.9,31,0,.00362,5.53,-695.8761,.6,7,0,.00317,2.8,16728.3705,1.2,28,0,.00303,6.07,157.7344,0,0,0,.003,2.53,33.757,-.3,-4,0,.00295,4.16,31571.8352,2.4,56,0,.00289,5.98,7211.7617,-.7,6,0,.00285,2.06,15540.4531,.9,31,0,.00283,2.65,2.6298,0,0,0,.00282,6.17,15545.0555,-2.2,-19,0,.00278,1.23,-39.8149,0,0,0,.00272,3.82,7216.3641,-3.7,-44,0,.0027,4.37,70.9877,-1.9,-22,0,.00256,5.81,13657.8484,-.6,6,0,.00244,5.64,-.2237,1.5,25,0,.0024,2.96,8311.7707,-2.2,-19,0,.00239,.87,-33.7814,.3,4,0,.00216,2.31,15.9995,-2.2,-19,0,.00186,3.46,5329.157,-2.1,-19,0,.00169,2.4,24357.772,4.6,75,0,.00161,5.8,8329.403,1.5,25,0,.00161,5.2,8327.98,1.5,25,0,.0016,4.26,23385.119,-2.9,-13,0,.00156,1.26,550.755,0,0,0,.00155,1.25,21500.213,-2.8,-13,0,.00152,.6,-16.921,-3.7,-44,0,.0015,2.71,-79.63,0,0,0,.0015,5.29,15.542,0,0,0,.00148,1.06,-2371.232,-3.7,-44,0,.00141,.77,8328.691,1.5,25,0,.00141,3.67,7143.075,-.3,0,0,.00138,5.45,25614.376,4.5,75,0,.00129,4.9,23871.446,.9,31,0,.00126,4.03,141.975,-3.8,-44,0,.00124,6.01,522.369,0,0,0,.0012,4.94,-10071.622,-5.2,-69,0,.00118,5.07,-15.419,-2.2,-19,0,.00107,3.49,23452.693,-3.4,-20,0,.00104,4.78,17495.234,-1.3,0,0,.00103,1.44,-18.049,-2.2,-19,0,.00102,5.63,15542.402,-.7,6,0,.00102,2.59,15543.107,-.7,6,0,.001,4.11,-6.559,-1.9,-22,0,97e-5,.08,15400.779,3.1,50,0,96e-5,5.84,31781.385,-1.9,5,0,94e-5,1.08,8328.363,0,0,0,94e-5,2.46,16799.358,-.7,6,0,94e-5,1.69,6376.211,2.2,32,0,93e-5,3.64,8329.02,3,50,0,93e-5,2.65,16655.082,4.6,75,0,9e-4,1.9,15056.428,-4.4,-38,0,89e-5,1.59,52.969,0,0,0,88e-5,2.02,-8257.704,-3.4,-47,0,88e-5,3.02,7213.711,-2.2,-19,0,87e-5,.5,7214.415,-2.2,-19,0,87e-5,.49,16659.684,1.5,25,0,82e-5,5.64,-4.931,1.5,25,0,79e-5,5.17,13171.522,-4.3,-38,0,76e-5,3.6,29828.905,-1.3,12,0,76e-5,4.08,24567.322,.3,24,0,76e-5,4.58,1884.906,-.1,0,0,73e-5,.33,31713.811,-1.4,12,0,73e-5,.93,32828.439,2.4,56,0,71e-5,5.91,38785.898,.2,37,0,69e-5,2.2,15613.742,-2.5,-16,0,66e-5,3.87,15.732,-2.5,-23,0,66e-5,.86,25823.926,.2,24,0,65e-5,2.52,8170.957,1.5,25,0,63e-5,.18,8322.132,-.3,0,0,6e-4,5.84,8326.062,1.5,25,0,6e-4,5.15,8331.321,1.5,25,0,6e-4,2.18,8486.426,1.5,25,0,58e-5,2.3,-1.731,-4,-44,0,58e-5,5.43,14357.138,-2,-16,0,57e-5,3.09,8294.91,2,29,0,57e-5,4.67,-8362.473,-1,-21,0,56e-5,4.15,16833.151,-1,0,0,54e-5,1.93,7056.329,-2,-19,0,54e-5,5.27,8315.574,-2,-19,0,52e-5,5.6,8311.418,-2,-19,0,52e-5,2.7,-77.552,0,0,0,51e-5,4.3,7230.984,2,25,0,5e-4,.4,-.508,0,0,0,49e-5,5.4,7211.433,-2,-19,0,49e-5,4.4,7216.693,-2,-19,0,49e-5,4.3,16864.631,0,24,0,49e-5,2.2,16869.234,-3,-26,0,47e-5,6.1,627.596,0,0,0,47e-5,5,12.619,1,7,0,45e-5,4.9,-8815.018,-5,-69,0,44e-5,1.6,62.133,-2,-19,0,42e-5,2.9,-13.118,-4,-44,0,42e-5,4.1,-119.445,0,0,0,41e-5,4.3,22756.817,-3,-13,0,41e-5,3.6,8288.877,2,25,0,4e-4,.5,6663.308,-2,-19,0,4e-4,1.1,8368.506,2,25,0,39e-5,4.1,6443.786,2,25,0,39e-5,3.1,16657.383,3,50,0,38e-5,.1,16657.031,3,50,0,38e-5,3,16657.735,3,50,0,38e-5,4.6,23942.433,-1,9,0,37e-5,4.3,15385.02,-1,6,0,37e-5,5,548.678,0,0,0,36e-5,1.8,7213.352,-2,-19,0,36e-5,1.7,7214.774,-2,-19,0,35e-5,1.1,7777.936,2,25,0,35e-5,1.6,-8.86,0,0,0,35e-5,4.4,23869.145,2,56,0,35e-5,2,6691.693,-2,-19,0,34e-5,1.3,-1185.616,-2,-22,0,34e-5,2.2,23873.747,-1,6,0,33e-5,2,-235.287,0,0,0,33e-5,3.1,17913.987,3,50,0,33e-5,1,8351.233,-2,-19,0],[.00487,4.6693,628.30196,-.027,0,-.01,.00228,2.6746,-2.3012,1.523,25,-.12,.0015,3.372,6585.76091,-2.16,-19,.1,.0012,5.728,14914.45233,-.64,6,0,.00108,3.969,7700.38947,1.55,25,-.1,8e-4,.742,8956.99338,1.5,25,-.1,254e-6,6.002,.3286,1.52,25,-.1,21e-5,.144,7842.3648,-2.21,-19,0,18e-5,2.5,16171.0562,-.7,6,0,13e-5,.44,8399.6791,-.4,3,0,126e-6,5.03,8326.3902,3,50,0,12e-5,5.77,14286.1504,-.6,6,0,118e-6,5.96,8330.9926,0,0,0,11e-5,1.8,23243.1438,.9,31,0,11e-5,3.42,5957.459,-2.1,-19,0,11e-5,4.63,1256.6039,-.1,0,0,99e-6,4.7,-.7113,0,0,0,7e-5,.04,16029.0809,3.1,50,0,7e-5,5.14,8328.3391,1.5,25,0,7e-5,5.85,8329.0437,1.5,25,0,6e-5,1.02,-1742.9305,-3.7,-44,0,6e-5,3.1,17285.6848,3,50,0,54e-6,5.69,-.352,0,0,0,43e-6,.52,15.542,0,0,0,41e-6,2.03,2.63,0,0,0,4e-5,.1,8470.667,-2.2,-19,0,4e-5,4.01,7072.088,1.6,25,0,36e-6,2.93,-8.86,-.3,0,0,3e-5,1.2,22128.515,-2.8,-13,0,3e-5,2.54,15542.754,-.7,6,0,27e-6,4.43,7211.762,-.7,6,0,26e-6,.51,15540.453,.9,31,0,26e-6,1.44,15545.055,-2.2,-19,0,25e-6,5.37,7216.364,-3.7,-44,0],[12e-6,1.041,-2.3012,1.52,25,-.1,17e-7,.31,-.711,0,0,0]],Aje.QI_KB=[1640650.479938,15.218425,1642476.703182,15.21874996,1683430.515601,15.218750011,1752157.640664,15.218749978,1807675.003759,15.218620279,1883627.765182,15.218612292,1907369.1281,15.218449176,1936603.140413,15.218425,1939145.52418,15.218466998,1947180.7983,15.218524844,1964362.041824,15.218533526,1987372.340971,15.218513908,1999653.819126,15.218530782,2007445.469786,15.218535181,2021324.917146,15.218526248,2047257.232342,15.218519654,2070282.898213,15.218425,2073204.87285,15.218515221,2080144.500926,15.218530782,2086703.688963,15.218523776,2110033.182763,15.218425,2111190.300888,15.218425,2113731.271005,15.218515671,2120670.840263,15.218425,2123973.309063,15.218425,2125068.997336,15.218477932,2136026.312633,15.218472436,2156099.495538,15.218425,2159021.324663,15.218425,2162308.575254,15.218461742,2178485.706538,15.218425,2178759.662849,15.218445786,2185334.0208,15.218425,2187525.481425,15.218425,2188621.191481,15.218437494,2322147.76],Aje.QB=Aje.decode("FrcFs22AFsckF2tsDtFqEtF1posFdFgiFseFtmelpsEfhkF2anmelpFlF1ikrotcnEqEq2FfqmcDsrFor22FgFrcgDscFs22FgEeFtE2sfFs22sCoEsaF2tsD1FpeE2eFsssEciFsFnmelpFcFhkF2tcnEqEpFgkrotcnEqrEtFermcDsrE222FgBmcmr22DaEfnaF222sD1FpeForeF2tssEfiFpEoeFssD1iFstEqFppDgFstcnEqEpFg11FscnEqrAoAF2ClAEsDmDtCtBaDlAFbAEpAAAAAD2FgBiBqoBbnBaBoAAAAAAAEgDqAdBqAFrBaBoACdAAf1AACgAAAeBbCamDgEifAE2AABa1C1BgFdiAAACoCeE1ADiEifDaAEqAAFe1AcFbcAAAAAF1iFaAAACpACmFmAAAAAAAACrDaAAADG0"),Aje.SHUO_KB=[1457698.231017,29.53067166,1546082.512234,29.53085106,1640640.7353,29.5306,1642472.151543,29.53085439,1683430.5093,29.53086148,1752148.041079,29.53085097,1807665.420323,29.53059851,1883618.1141,29.5306,1907360.7047,29.5306,1936596.2249,29.5306,1939135.6753,29.5306,1947168],Aje.SB=Aje.decode("EqoFscDcrFpmEsF2DfFideFelFpFfFfFiaipqti1ksttikptikqckstekqttgkqttgkqteksttikptikq2fjstgjqttjkqttgkqtekstfkptikq2tijstgjiFkirFsAeACoFsiDaDiADc1AFbBfgdfikijFifegF1FhaikgFag1E2btaieeibggiffdeigFfqDfaiBkF1kEaikhkigeidhhdiegcFfakF1ggkidbiaedksaFffckekidhhdhdikcikiakicjF1deedFhFccgicdekgiFbiaikcfi1kbFibefgEgFdcFkFeFkdcfkF1kfkcickEiFkDacFiEfbiaejcFfffkhkdgkaiei1ehigikhdFikfckF1dhhdikcfgjikhfjicjicgiehdikcikggcifgiejF1jkieFhegikggcikFegiegkfjebhigikggcikdgkaFkijcfkcikfkcifikiggkaeeigefkcdfcfkhkdgkegieidhijcFfakhfgeidieidiegikhfkfckfcjbdehdikggikgkfkicjicjF1dbidikFiggcifgiejkiegkigcdiegfggcikdbgfgefjF1kfegikggcikdgFkeeijcfkcikfkekcikdgkabhkFikaffcfkhkdgkegbiaekfkiakicjhfgqdq2fkiakgkfkhfkfcjiekgFebicggbedF1jikejbbbiakgbgkacgiejkijjgigfiakggfggcibFifjefjF1kfekdgjcibFeFkijcfkfhkfkeaieigekgbhkfikidfcjeaibgekgdkiffiffkiakF1jhbakgdki1dj1ikfkicjicjieeFkgdkicggkighdF1jfgkgfgbdkicggfggkidFkiekgijkeigfiskiggfaidheigF1jekijcikickiggkidhhdbgcfkFikikhkigeidieFikggikhkffaffijhidhhakgdkhkijF1kiakF1kfheakgdkifiggkigicjiejkieedikgdfcggkigieeiejfgkgkigbgikicggkiaideeijkefjeijikhkiggkiaidheigcikaikffikijgkiahi1hhdikgjfifaakekighie1hiaikggikhkffakicjhiahaikggikhkijF1kfejfeFhidikggiffiggkigicjiekgieeigikggiffiggkidheigkgfjkeigiegikifiggkidhedeijcfkFikikhkiggkidhh1ehigcikaffkhkiggkidhh1hhigikekfiFkFikcidhh1hitcikggikhkfkicjicghiediaikggikhkijbjfejfeFhaikggifikiggkigiejkikgkgieeigikggiffiggkigieeigekijcijikggifikiggkideedeijkefkfckikhkiggkidhh1ehijcikaffkhkiggkidhh1hhigikhkikFikfckcidhh1hiaikgjikhfjicjicgiehdikcikggifikigiejfejkieFhegikggifikiggfghigkfjeijkhigikggifikiggkigieeijcijcikfksikifikiggkidehdeijcfdckikhkiggkhghh1ehijikifffffkhsFngErD1pAfBoDd1BlEtFqA2AqoEpDqElAEsEeB2BmADlDkqBtC1FnEpDqnEmFsFsAFnllBbFmDsDiCtDmAB2BmtCgpEplCpAEiBiEoFqFtEqsDcCnFtADnFlEgdkEgmEtEsCtDmADqFtAFrAtEcCqAE1BoFqC1F1DrFtBmFtAC2ACnFaoCgADcADcCcFfoFtDlAFgmFqBq2bpEoAEmkqnEeCtAE1bAEqgDfFfCrgEcBrACfAAABqAAB1AAClEnFeCtCgAADqDoBmtAAACbFiAAADsEtBqAB2FsDqpFqEmFsCeDtFlCeDtoEpClEqAAFrAFoCgFmFsFqEnAEcCqFeCtFtEnAEeFtAAEkFnErAABbFkADnAAeCtFeAfBoAEpFtAABtFqAApDcCGJ");var Dje=Aje,Pje=function(){function e(t){Ub(this,e),this._year=t,this._months=[],this._jieQiJulianDays=[],this.compute()}return Wb(e,[{key:"compute",value:function(){var t,n,r=[],o=[],i=[],a=[],l=this._year,u=Math.floor(365.2422*(l-2e3)+180),c=365.2422*Math.floor((u-355+183)/365.2422)+355;for(Dje.calcQi(c)>u&&(c-=365.2422),t=0;t<26;t++)r.push(Dje.calcQi(c+15.2184*t));for(t=0,n=Ije.JIE_QI_IN_USE.length;t<n;t++)u=0===t?Dje.qiAccurate2(r[0]-15.2184):t<=26?Dje.qiAccurate2(r[t-1]):Dje.qiAccurate2(r[25]+15.2184*(t-26)),this._jieQiJulianDays.push(u+jje.J2000);for((c=Dje.calcShuo(r[0]))>r[0]&&(c-=29.53),t=0;t<16;t++)o.push(Dje.calcShuo(c+29.5306*t));for(t=0;t<15;t++)i.push(Math.floor(o[t+1]-o[t])),a.push(t);var s=l-1,d=16;if(e._LEAP_11.indexOf(l)>-1)d=13;else if(e._LEAP_12.indexOf(l)>-1)d=14;else if(o[13]<=r[24]){for(t=1;o[t+1]>r[2*t]&&t<13;)t++;d=t}for(n=d;n<15;n++)a[n]-=1;var f=[11,12,1,2,3,4,5,6,7,8,9,10],p=-1,h=-1,v=s;for(t=0;t<15;t++){var g=o[t]+jje.J2000,m=a[t],y=f[m%12];1724360<=g&&g<1729794||1807724<=g&&g<1808699?y=f[(m+1)%12]:(1729794==g||1808699==g)&&(y=12),-1==p&&(p=y,h=y),y<p&&(v+=1,h=1),p=y,t==d?y=-y:(1729794==g||1808699==g)&&(y=-11),this._months.push(new Rje(v,y,i[t],o[t]+jje.J2000,h)),h++}}},{key:"getYear",value:function(){return this._year}},{key:"getJieQiJulianDays",value:function(){return this._jieQiJulianDays}},{key:"getDayCount",value:function(){for(var e=0,t=0,n=this._months.length;t<n;t++){var r=this._months[t];r.getYear()==this._year&&(e+=r.getDayCount())}return e}},{key:"getMonths",value:function(){return this._months}},{key:"getMonth",value:function(e){for(var t=0,n=this._months.length;t<n;t++){var r=this._months[t];if(r.getYear()==this._year&&r.getMonth()==e)return r}return null}},{key:"toString",value:function(){return"".concat(this.getYear())}}],[{key:"fromYear",value:function(t){var n;return e._CACHE_YEAR&&e._CACHE_YEAR.getYear()==t?n=e._CACHE_YEAR:(n=new e(t),e._CACHE_YEAR=n),n}}])}();Pje.YUAN=["下","上","中"],Pje.YUN=["七","八","九","一","二","三","四","五","六"],Pje._LEAP_11=[75,94,170,265,322,398,469,553,583,610,678,735,754,773,849,887,936,1050,1069,1126,1145,1164,1183,1259,1278,1308,1373,1403,1441,1460,1498,1555,1593,1612,1631,1642,2033,2128,2147,2242,2614,2728,2910,3062,3244,3339,3616,3711,3730,3825,4007,4159,4197,4322,4341,4379,4417,4531,4599,4694,4713,4789,4808,4971,5085,5104,5161,5180,5199,5294,5305,5476,5677,5696,5772,5791,5848,5886,6049,6068,6144,6163,6258,6402,6440,6497,6516,6630,6641,6660,6679,6736,6774,6850,6869,6899,6918,6994,7013,7032,7051,7070,7089,7108,7127,7146,7222,7271,7290,7309,7366,7385,7404,7442,7461,7480,7491,7499,7594,7624,7643,7662,7681,7719,7738,7814,7863,7882,7901,7939,7958,7977,7996,8034,8053,8072,8091,8121,8159,8186,8216,8235,8254,8273,8311,8330,8341,8349,8368,8444,8463,8474,8493,8531,8569,8588,8626,8664,8683,8694,8702,8713,8721,8751,8789,8808,8816,8827,8846,8884,8903,8922,8941,8971,9036,9066,9085,9104,9123,9142,9161,9180,9199,9218,9256,9294,9313,9324,9343,9362,9381,9419,9438,9476,9514,9533,9544,9552,9563,9571,9582,9601,9639,9658,9666,9677,9696,9734,9753,9772,9791,9802,9821,9886,9897,9916,9935,9954,9973,9992],Pje._LEAP_12=[37,56,113,132,151,189,208,227,246,284,303,341,360,379,417,436,458,477,496,515,534,572,591,629,648,667,697,716,792,811,830,868,906,925,944,963,982,1001,1020,1039,1058,1088,1153,1202,1221,1240,1297,1335,1392,1411,1422,1430,1517,1525,1536,1574,3358,3472,3806,3988,4751,4941,5066,5123,5275,5343,5438,5457,5495,5533,5552,5715,5810,5829,5905,5924,6421,6535,6793,6812,6888,6907,7002,7184,7260,7279,7374,7556,7746,7757,7776,7833,7852,7871,7966,8015,8110,8129,8148,8224,8243,8338,8406,8425,8482,8501,8520,8558,8596,8607,8615,8645,8740,8778,8835,8865,8930,8960,8979,8998,9017,9055,9074,9093,9112,9150,9188,9237,9275,9332,9351,9370,9408,9427,9446,9457,9465,9495,9560,9590,9628,9647,9685,9715,9742,9780,9810,9818,9829,9848,9867,9905,9924,9943,9962,1e4],Pje._CACHE_YEAR=null;var Mje=Pje,Tje=function(){function e(){Ub(this,e)}return Wb(e,null,[{key:"getMessage",value:function(t){return t?(t.startsWith("{")&&(t=t.replace(/(\{|\})/gi,"")),e._MESSAGES[t]):t}}])}();Tje._MESSAGES={"n.zero":"〇","n.one":"一","n.two":"二","n.three":"三","n.four":"四","n.five":"五","n.six":"六","n.seven":"七","n.eight":"八","n.nine":"九","n.ten":"十","n.eleven":"十一","n.twelve":"十二","d.one":"初一","d.two":"初二","d.three":"初三","d.four":"初四","d.five":"初五","d.six":"初六","d.seven":"初七","d.eight":"初八","d.nine":"初九","d.ten":"初十","d.eleven":"十一","d.twelve":"十二","d.thirteen":"十三","d.fourteen":"十四","d.fifteen":"十五","d.sixteen":"十六","d.seventeen":"十七","d.eighteen":"十八","d.nighteen":"十九","d.twenty":"二十","d.twentyOne":"廿一","d.twentyTwo":"廿二","d.twentyThree":"廿三","d.twentyFour":"廿四","d.twentyFive":"廿五","d.twentySix":"廿六","d.twentySeven":"廿七","d.twentyEight":"廿八","d.twentyNine":"廿九","d.thirty":"三十","m.one":"正","m.two":"二","m.three":"三","m.four":"四","m.five":"五","m.six":"六","m.seven":"七","m.eight":"八","m.nine":"九","m.ten":"十","m.eleven":"冬","m.twelve":"腊","w.sun":"日","w.mon":"一","w.tues":"二","w.wed":"三","w.thur":"四","w.fri":"五","w.sat":"六","jq.dongZhi":"冬至","jq.xiaoHan":"小寒","jq.daHan":"大寒","jq.liChun":"立春","jq.yuShui":"雨水","jq.jingZhe":"惊蛰","jq.chunFen":"春分","jq.qingMing":"清明","jq.guYu":"谷雨","jq.liXia":"立夏","jq.xiaoMan":"小满","jq.mangZhong":"芒种","jq.xiaZhi":"夏至","jq.xiaoShu":"小暑","jq.daShu":"大暑","jq.liQiu":"立秋","jq.chuShu":"处暑","jq.baiLu":"白露","jq.qiuFen":"秋分","jq.hanLu":"寒露","jq.shuangJiang":"霜降","jq.liDong":"立冬","jq.xiaoXue":"小雪","jq.daXue":"大雪","jr.chuXi":"除夕","jr.chunJie":"春节","jr.yuanXiao":"元宵节","jr.longTou":"龙头节","jr.duanWu":"端午节","jr.qiXi":"七夕节","jr.zhongQiu":"中秋节","jr.chongYang":"重阳节","jr.laBa":"腊八节","jr.yuanDan":"元旦节","jr.qingRen":"情人节","jr.fuNv":"妇女节","jr.zhiShu":"植树节","jr.xiaoFei":"消费者权益日","jr.wuYi":"劳动节","jr.qingNian":"青年节","jr.erTong":"儿童节","jr.yuRen":"愚人节","jr.jianDang":"建党节","jr.jianJun":"建军节","jr.jiaoShi":"教师节","jr.guoQing":"国庆节","jr.wanShengYe":"万圣节前夜","jr.wanSheng":"万圣节","jr.pingAn":"平安夜","jr.shengDan":"圣诞节"};var Fje=Tje,Nje=function(){function e(t,n,r,o,i){Ub(this,e);var a=e._compute(i);this._year=t,this._month=n,this._day=r,this._jieQi=a.jieQi,this._solar=o}return Wb(e,[{key:"getDayInChinese",value:function(){return Fje.getMessage(Ije.DAY[this._day])}},{key:"getYear",value:function(){return this._year}},{key:"getJieQi",value:function(){var t="";for(var n in this._jieQi){var r=this._jieQi[n];if(r.getYear()==this._solar.getYear()&&r.getMonth()==this._solar.getMonth()&&r.getDay()==this._solar.getDay()){t=n;break}}return e._convertJieQi(t)}},{key:"getFestival",value:function(){if(12==Math.abs(this._month)&&this._day>=29&&this._year!=this._next(1).getYear())return Fje.getMessage("jr.chuXi");var e=Ije.FESTIVAL[this._month+"-"+this._day];return Fje.getMessage(e)}},{key:"_next",value:function(e){return this._solar.next(e).getLunar()}}],[{key:"fromSolar",value:function(t){for(var n=0,r=0,o=0,i=Mje.fromYear(t.getYear()),a=i.getMonths(),l=0,u=a.length;l<u;l++){var c=a[l],s=t.subtract(jje.fromJulianDay(c.getFirstJulianDay()));if(s<c.getDayCount()){n=c.getYear(),r=c.getMonth(),o=s+1;break}}return new e(n,r,o,t,i)}},{key:"fromDate",value:function(t){return e.fromSolar(jje.fromDate(t))}},{key:"_computeJieQi",value:function(e,t){for(var n=t.getJieQiJulianDays(),r=0,o=Ije.JIE_QI_IN_USE.length;r<o;r++){var i=Ije.JIE_QI_IN_USE[r];e.jieQiList.push(i),e.jieQi[i]=jje.fromJulianDay(n[r])}}},{key:"_compute",value:function(t){var n={jieQi:{},jieQiList:[]};return e._computeJieQi(n,t),n}},{key:"_convertJieQi",value:function(e){return"DONG_ZHI"===e?Fje.getMessage("jq.dongZhi"):"DA_HAN"===e?Fje.getMessage("jq.daHan"):"XIAO_HAN"===e?Fje.getMessage("jq.xiaoHan"):"LI_CHUN"===e?Fje.getMessage("jq.liChun"):"DA_XUE"===e?Fje.getMessage("jq.daXue"):"YU_SHUI"===e?Fje.getMessage("jq.yuShui"):"JING_ZHE"===e?Fje.getMessage("jq.jingZhe"):Fje.getMessage(e)}}])}();function Vje(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Lje(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lje(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function Lje(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bje=Object.defineProperty,$je=Object.getOwnPropertyDescriptor,zje=function(e,t,n,r){for(var o,i=r>1?void 0:r?$je(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Bje(t,n,i),i};var Uje=function(){return Wb((function e(){Ub(this,e),this.startWeekDay=1,this.cellScheduleHeight=26}),[{key:"defaultMaxScheduleNum",get:function(){var e;return(null==(e=this._configurationService)?void 0:e.getValue("view.useWindowScroll"))||!1?3:1}},{key:"defaultCellMinHeight",get:function(){return 58+this.cellScheduleHeight*this.defaultMaxScheduleNum}},{key:"getCurrentDate",value:function(e){var t=null==e?void 0:e.get("active_date");return t?i()(t,"YYYY-MM-DD"):Mw()}},{key:"setCurrentDate",value:function(e){this._commandService.execCommand("setActiveDate",{date:e})}},{key:"getCalendarDate",value:function(e){var t=ppe,n=e.daysInMonth(),r=e.day(),o=Math.abs((r<this.startWeekDay?t:r)-this.startWeekDay),i=e.subtract(o,dpe),a=o+n,l=a%t;0!==l&&(a+=t-l%t);var u=i.add(a,dpe);return{startDate:i,endDate:u,totalDayCount:a}}},{key:"getDateRows",value:function(e){for(var t=e.startDate,n=e.totalDayCount,r=ppe,o=[],i=[],a=0;a<=n;a++)0!==a&&a%r==0&&(o.push(Vb(i)),i=[]),i.push(t.add(a,dpe));return o}},{key:"getDateLunarInfo",value:function(e){var t,n=Nje.fromDate(e.toDate()),r=Sje.getHoliday(e.year(),e.month()+1,e.date()),o=(null==r?void 0:r.getTarget())===(null==r?void 0:r.getDay()),i=null==r?void 0:r.getName();return o&&(t=i),t||(t=n.getFestival()),t||(t=n.getJieQi()),t||(t=n.getDayInChinese()),{isHolidayTarget:o,displayHoliday:i,isWork:(null==r?void 0:r.isWork())||!1,lunarText:t}}},{key:"getSchedules",value:function(e,t,n){var r,o=(null==t?void 0:t.get("start_date_field_uuid"))||"",a=(null==t?void 0:t.get("end_date_field_uuid"))||o,l=this._readService.getViewFields(),u=E_(e,(function(e){return e.get("record_uuid")})),c=(null==t?void 0:t.get("date_title_field_uuid"))||l.get(0).get("uuid"),s=this._readService.getFieldFormatValues(o,u),d=this._readService.getFieldFormatValues(a,u),f=this._readService.getFieldFormatValues(c,u).reduce((function(e,t){return e[t.recordId]=t.formatValue||"",e}),{}),p={},h=Vje(s);try{for(h.s();!(r=h.n()).done;){var v=r.value,g=i()(v.formatValue).startOf(dpe);(g.isBetween(n.startDate,n.endDate)||g.isSameOrBefore(n.startDate))&&(p[v.recordId]={start:g})}}catch(e){h.e(e)}finally{h.f()}var m,y=Vje(d);try{for(y.s();!(m=y.n()).done;){var b=m.value,w=i()(b.formatValue).endOf(dpe);if(w.isBetween(n.startDate,n.endDate)||w.isSameOrAfter(n.endDate)){var _=p[b.recordId];_?_.end=w:p[b.recordId]={end:w}}}}catch(e){y.e(e)}finally{y.f()}return u.filter((function(e){return!!p[e]})).map((function(e){var t=p[e];return new ije({id:e,title:f[e]||"",start:t.start||t.end.startOf(dpe),end:t.end||t.start.endOf(dpe)})})).filter((function(e){return e.start.isSameOrBefore(e.end)})).sort((function(e,t){return Pw(e.start)-Pw(t.start)}))}},{key:"getDateScheduleMap",value:function(e,t){for(var n={},r=function(){for(var r={},i=function(){var i=e[o][a],l=Pw(i),u=t.filter((function(e){return e.include(i)}));if(0===a&&0!==o){var c=n[Pw(i.subtract(1,dpe))];u=u.sort((function(e,t){var n,r;return(null!==(n=c[e.id])&&void 0!==n?n:99)-(null!==(r=c[t.id])&&void 0!==r?r:99)}))}n[l]={};var s=[];u.filter((function(e){var t=r[e.id];return!t||(n[l][e.id]=t,s.push(t),!1)})).forEach((function(e){var t=function(e){for(var t=0,n=0;n<e.length&&e.includes(t);n++)t+=1;return t}(s);r[e.id]=t,n[l][e.id]=t,s.push(t)}))},a=0;a<e[o].length;a++)i()},o=0;o<e.length;o++)r();return n}},{key:"sortScheduleList",value:function(e,t,n){var r=Pw(e);return t.filter((function(t){return t.include(e)})).sort((function(e,t){var o=n[r];return(o[e.id]||0)-(o[t.id]||0)}))}},{key:"getNextColorToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.match(/(.+-)(\d+)/);if(n){var r=n[1],o=n[2],i=parseInt(o)+t;return r+(i>9?9:i)}return e}},{key:"getScheduleColor",value:function(e,t,n,r){var o,i,a,l,u,c,s=vpe[0][0];if(n&&t===PC.CUSTOM)s=n;else if(n&&t===PC.FOLLOW_FIELD){var d=this._readService.getCell(n,e.id),f=r[null==d?void 0:d.value];f&&(s=f)}var p=null==(o=this._labelColor)?void 0:o.getLabelColorTokenByBackColorId(s),h=this.getNextColorToken(p,1),v=this.getNextColorToken(p,2),g=this.getNextColorToken(p,5),m=null==(i=this._labelColor)?void 0:i.getRenderColor(p),y=null==(a=this._labelColor)?void 0:a.getRenderColor(h);return{normal:m,highlight:null==(l=this._labelColor)?void 0:l.getRenderColor(v),lite:y,heavy:null==(u=this._labelColor)?void 0:u.getRenderColor(g),text:null==(c=this._labelColor)?void 0:c.getRenderTextColor(s)}}},{key:"getScheduleLineStyle",value:function(e){var t=e.schedule,n=e.colIndex,r=e.date,o=e.isActive,i=e.isDelPossible,a=e.isInHighlight,l=e.isSelected,u=e.scheduleColorType,c=e.schedlueColorFieldIdOrColorId,s=e.colorMap,d=this.getScheduleColor(t,u,c,s),f=i?{normal:"var(--yq-red-100)",lite:"var(--yq-red-200)",heavy:"var(--yq-red-600)",text:"var(--yq-red-900)"}:a?{normal:d.highlight,lite:d.highlight,heavy:d.heavy,text:d.text}:d,p={color:f.text,borderColor:i||a&&l?f.heavy:"transparent",backgroundColor:o?f.lite:f.normal},h={background:f.heavy},v=t.start.isSame(t.end),g=v;if(!v){var m=t.end.diff(r,dpe)+1,y=Math.min(ppe-n,m),b=y+(12*y-7),w=t.isStartDate(r),_=r.add(y-1,dpe);t.isEndDate(_)?(b-=w?6:1,g=!0):t.isStartDate(r)||(b+=5),p.width="calc(".concat(100*y,"% + ").concat(b,"px)")}return{lineStyle:p,labelStyle:h,isShowControl:g}}},{key:"createSchedule",value:function(e){return this._commandService.execCommand("createSchedule",{date:e})}},{key:"updateSchedule",value:function(e){var t=e.recordId,n=e.startDate,r=e.endDate,o=e.targetRecordId,i=e.direction,a=void 0===i?RC.forward:i;return this._commandService.execCommand("updateSchedule",{recordId:t,startDate:n,endDate:r,targetRecordId:o,direction:a})}}])}();zje([Xs(MI)],Uje.prototype,"_readService",2),zje([Xs(uA)],Uje.prototype,"_commandService",2),zje([Xs(R_)],Uje.prototype,"_configurationService",2),zje([Xs(mM)],Uje.prototype,"_labelColor",2),Uje=zje([Ys({token:Yxe})],Uje);var Hje=Object.defineProperty,qje=Object.getOwnPropertyDescriptor,Wje=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}},{key:"registerViewer",value:function(e){e.registerItem(new _je({onError:e.onError}))}}],[{key:"pluginModule",value:function(){return pd().register(this).register(Uje).register(dje)}}])}();Wje.pluginName="render-viewer-calendar",Wje=function(e,t,n,r){for(var o,i=r>1?void 0:r?qje(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Hje(t,n,i),i}([Ys({contrib:[Qoe,oie]})],Wje);var Gje=[Qpe,fhe,xhe,Lhe,Zhe,dve,_ve,jve,Tve,zve,Yve,lge,bge,Age,Uge,tme,vme,Dme,$me,Jme,Vbe,vke,Oke,Tke,Gke,Jke,dCe,vCe,SCe,RCe,MCe,VCe,pEe,CEe,VOe,QOe,nSe,iSe,LSe,Axe,Gxe,Wje],Kje=Object(a.forwardRef)((function(e,t){var n=G3(fse),r=G3(R_),o=G3(iD),i=G3(aie),u=n.Buttons,c=Poe(),s=Object(a.useRef)(null),d=Object(a.useRef)(),f=Object(a.useRef)(0);Object(a.useEffect)((function(){var e=o.onDataLoaded((function(){c()})),t=o.onDataChanged((function(){c()}));return function(){e.destroy(),t.destroy()}}),[]),Object(a.useEffect)((function(){var e=null==i?void 0:i.onStatusChange((function(){c()}));return function(){null==e||e.destroy()}}),[i]),Object(a.useEffect)((function(){if(s.current)return d.current=new ResizeObserver((function(e){var t=e[0].contentRect.height;f.current!==t&&(f.current=e[0].contentRect.height,window.dispatchEvent(new CustomEvent("lakex_table_view_resize")))})),d.current.observe(s.current),function(){var e;null==(e=d.current)||e.disconnect()}}),[]),Object(a.useImperativeHandle)(t,(function(){return{refresh:c}}));var p=n.filterVisibleButtons(r.getValue("toolbar.topLeft")),h=n.filterVisibleButtons(r.getValue("toolbar.topRight")),v=n.filterVisibleButtons(r.getValue("toolbar.left")),g=n.filterVisibleButtons(null!=i&&i.isActive?r.getValue("toolbar.right"):[]),m=r.getValue("toolbar.mode"),y=0!==p.length||0!==h.length;return l.a.createElement("div",{ref:s,className:"lakex-workbench-toolbar-container"},l.a.createElement("div",{className:u$("lakex-table-workbench-toolbar",{"lakex-table-workbench-toolbar-multi-row":y})},(p.length>0||h.length>0)&&l.a.createElement("div",{className:"lakex-table-workbench-toolbar-top-section"},l.a.createElement("div",{className:"lakex-table-workbench-toolbar-group lakex-table-workbench-toolbar-group-left"},p.length>0?l.a.createElement(u,{buttons:p,mode:m}):null),l.a.createElement("div",{className:"lakex-table-workbench-toolbar-group lakex-table-workbench-toolbar-group-right"},h.length>0?l.a.createElement(u,{buttons:h,mode:m}):null)),(v.length>0||g.length>0)&&l.a.createElement("div",{className:"lakex-table-workbench-toolbar-main-section"},l.a.createElement("div",{className:"lakex-table-workbench-toolbar-group lakex-table-workbench-toolbar-group-left"},v.length>0?l.a.createElement(u,{buttons:v,mode:m}):null),l.a.createElement("div",{className:"lakex-table-workbench-toolbar-group lakex-table-workbench-toolbar-group-right"},g.length>0?l.a.createElement(u,{buttons:g,mode:m}):null))))})),Yje=Object.defineProperty,Xje=Object.getOwnPropertyDescriptor,Jje=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){e.registerRender(Kje)}}],[{key:"pluginModule",value:function(){return pd().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"toolbar",type:"object",title:"工具栏",properties:{left:{type:"array",description:"左侧工具栏"},right:{type:"array",description:"右侧工具栏"},topLeft:{type:"array",description:"左上工具栏"},topRight:{type:"array",description:"右上工具栏"},mode:{type:"string",description:"展示模式",enum:Object.values(hse)}}}),e.registerDefaultValue({"toolbar.mode":hse.NORMAL})}}])}();Jje.pluginName="workbench-toolbar",Jje=function(e,t,n,r){for(var o,i=r>1?void 0:r?Xje(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Yje(t,n,i),i}([Ys({contrib:[L3,pse]})],Jje);var Zje=Object.defineProperty,Qje=Object.getOwnPropertyDescriptor,eIe=function(e,t,n,r){for(var o,i=r>1?void 0:r?Qje(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Zje(t,n,i),i},tIe=function(){return Wb((function e(){Ub(this,e)}),[{key:"getDefaultFilter",value:function(){var e=this._readService.getActiveView();if(e){var t,n=this._readService.getViewFilters(e.get("uuid"));if(0===n.length){var r=this._readService.getViewFields(null==e?void 0:e.get("uuid"));if(!r)return;t=r.get(0).get("field")}else{var o=n.get(n.length-1).get("field_uuid");t=this._readService.getField(o)}if(t){var i=this.getConditions(t.get("type"));return{uuid:fw(32),field_uuid:t.get("uuid"),func:i[0].func,expected:null,operator:n.length>0?n.get(n.length-1).get("operator"):IC.And}}}}},{key:"getFilterByFieldId",value:function(e){var t=this._readService.getField(e);if(t){var n=this.getConditions(t.get("type"));return{uuid:fw(32),field_uuid:t.get("uuid"),func:n[0].func,expected:null,operator:IC.And}}}},{key:"getConditions",value:function(e){var t=NC[e],n=FC.filter((function(e){return e.type===t}));return n}},{key:"getDateExpected",value:function(e){return LC.filter((function(t){return!(t.matchFuncs&&!t.matchFuncs.includes(e))}))}},{key:"getMentionFieldValues",value:function(e){var t=this._readService.getFieldCells(e),n=[];return null==t||t.forEach((function(e){Array.isArray(null==e?void 0:e.value)?n=n.concat(null==e?void 0:e.value):e.value&&n.push(e.value)})),Cu(n,"uid")}}])}();eIe([Xs(MI)],tIe.prototype,"_readService",2),tIe=eIe([Ys()],tIe);var nIe="lakex-table-filter-modal-empty",rIe=function(){return l.a.createElement("div",{className:nIe},l.a.createElement("div",{className:"".concat(nIe,"-desc")},uw("还未设置任何筛选")))},oIe=function(e){var t=G3(MI),n=t.getActiveView();return{filterFields:__(t.getViewFields(null==n?void 0:n.get("uuid"),!1),(function(t){var n,r;return!(!e.defaultValue||(null==(n=t.get("field"))?void 0:n.get("uuid"))!==e.defaultValue)||zC.isFilter(null==(r=t.get("field"))?void 0:r.get("type"))}))}},iIe=function(e){var t=e.filter,n=e.bordered,r=void 0===n||n,o=e.className,i=e.defaultValue,a=void 0===i?"":i,u=e.onFieldChange,c=void 0===u?function(){}:u,s=oIe({defaultValue:a}).filterFields,d=G3(xk),f=(null==d?void 0:d.getValue("modal.customModalContainer"))||document.body,p=G3(Cie);return l.a.createElement(x.a,{className:u$("lakex-table-filter-field-select",o),defaultValue:a,dropdownClassName:"lakex-table-filter-field-select-dropdown",suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:12}),onChange:function(e){var n,r=w_(s,(function(t){var n;return(null==(n=t.get("field"))?void 0:n.get("uuid"))===e}));c(t,null==(n=null==r?void 0:r.get("field"))?void 0:n.toJSON())},bordered:r,getPopupContainer:function(){return f}},E_(s,(function(e){var t,n,r,o,i=null==p?void 0:p.getFieldIcon(null==(t=e.get("field"))?void 0:t.get("type"));return l.a.createElement(x.a.Option,{value:null==(n=e.get("field"))?void 0:n.get("uuid"),key:null==(r=e.get("field"))?void 0:r.get("uuid")},i&&l.a.createElement(i,null),l.a.createElement("div",{className:"lakex-table-filter-field-select-name"},null==(o=e.get("field"))?void 0:o.get("name")))})))},aIe=function(e){var t=e.filter,n=e.onFuncChange,r=G3(tIe),o=G3(MI),i=null==o?void 0:o.getField(t.field_uuid),a=null==r?void 0:r.getConditions(null==i?void 0:i.get("type"));return null!=a&&a.some((function(e){return e.func===t.func}))||n(t,null==a?void 0:a[0].func),{conditions:a}},lIe=function(e){var t=e.filter,n=e.onFuncChange,r=void 0===n?function(){}:n,o=aIe({filter:t,onFuncChange:r}).conditions,i=G3(xk),a=(null==i?void 0:i.getValue("modal.customModalContainer"))||document.body;return l.a.createElement(x.a,{className:"lakex-table-filter-func-select",value:t.func||(null==o?void 0:o[0].func),dropdownClassName:"lakex-table-menu-item",suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:12}),style:{marginRight:5,width:110},onChange:function(e){r(t,e)},getPopupContainer:function(){return a}},null==o?void 0:o.map((function(e){return l.a.createElement(x.a.Option,{value:e.func,key:e.func},e.text)})))},uIe=function(e){var t=e.filter,n=G3(MI),r=G3(tIe);return{getDateExpected:function(e){return r.getDateExpected(e)},getMentionValues:function(){return r.getMentionFieldValues(t.field_uuid)},field:n.getField(t.field_uuid)}},cIe=function(e){var t,n,r=e.filter,o=e.onExpectedChange,a=void 0===o?function(){}:o,u=G3(MI),c=G3(xk),s=(null==c?void 0:c.getValue("modal.customModalContainer"))||document.body,d=uIe({filter:r}),f=d.getMentionValues,h=d.getDateExpected,v=d.field,g=null==v?void 0:v.get("type");if(VC.includes(r.func))return null;if(g===bC.SELECT||g===bC.MULTI_SELECT){var m=(null==r?void 0:r.expected)||[];"string"==typeof(null==r?void 0:r.expected)&&(m=null==r?void 0:r.expected.split(","));var y=u.getFieldOptions(v.get("uuid")),b=__(y,(function(e){return m.includes(e.get("uuid"))})).map((function(e){return e.get("uuid")}));n=l.a.createElement(x.a,{value:b,dropdownClassName:"lakex-table-menu-item",suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:12}),onChange:function(e){if(null!=e&&""!==e&&0!==e.length)if("select"!==g){var t=[],n=null==u?void 0:u.getFieldOptions(r.field.uuid);null==n||n.forEach((function(n){e.includes(n.get("uuid"))&&t.push(n.uuid)})),a(r,t)}else a(r,e);else a(r,"")},mode:"multiSelect"===g?"multiple":null,filterOption:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return null==(t=null==(e=null==r?void 0:r.children)?void 0:e.toLowerCase())?void 0:t.includes(n.toLowerCase())},getPopupContainer:function(){return s}},E_(y,(function(e,t){return l.a.createElement(x.a.Option,{key:t,value:e.get("uuid")},e.get("name"))})))}else if(g===bC.CHECKBOX)n=l.a.createElement("span",{className:"lakex-table-filter-checkbox"},l.a.createElement(p.a,{defaultChecked:!!r.expected,onChange:function(e){a(r,e.target.checked?"true":"false")}}));else if(zC.isMentionLike(g)){var w=f()||[],_={};null==w||w.forEach((function(e){_[e.uid]=e}));var k=null!=r&&r.expected?r.expected.split(","):[];n=l.a.createElement(x.a,{value:k,dropdownClassName:"lakex-table-menu-item lakex-table-field-mention-select",suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:12}),onChange:function(e){var t=e.map((function(e){return _[e]}));t.sort((function(e,t){return e.name.localeCompare(t.name)})),a(r,0===e.length?"":t.map((function(e){return e.uid})).join(","))},mode:"multiple",filterOption:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return null==(t=null==(e=null==r?void 0:r.children[1])?void 0:e.toLowerCase())?void 0:t.includes(n.toLowerCase())},getPopupContainer:function(){return s}},null==w?void 0:w.map((function(e,t){return l.a.createElement(x.a.Option,{key:t,value:e.uid+""},l.a.createElement("span",{className:"lakex-table-selector-avatar"},l.a.createElement("img",{src:e.icon})),e.name)})))}else if(zC.isDateLike(g)){var C=!r.expected||a_(r.expected);n=l.a.createElement(l.a.Fragment,null,l.a.createElement(x.a,{value:C?"custom":r.expected,dropdownClassName:"lakex-table-menu-item",suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:12}),style:{marginRight:5,width:110},onChange:function(e){a(r,"custom"===e?"":e)},getPopupContainer:function(){return s}},null==(t=h(r.func))?void 0:t.map((function(e){return l.a.createElement(x.a.Option,{value:e.name,key:e.name},e.text)}))),C&&l.a.createElement("div",{className:"lakex-table-select-expected-datepicker"},l.a.createElement(Bre,{defaultValue:r.expected?i()(r.expected):null,autoFocus:focus,onChange:function(){var e;a(r,null==(e=arguments.length<=0?void 0:arguments[0])?void 0:e.format("YYYY-MM-DD"))}})))}else n=l.a.createElement(Q3,{placeholder:uw("请输入"),defaultValue:r.expected,onChange:function(e){a(r,e.target.value)}});return l.a.createElement("div",{className:"lakex-table-select-expected"},n)},sIe=function(e){var t=e.index,n=e.filter,r=e.onOperatorChange,o=void 0===r?function(){}:r,i=G3(xk),a=(null==i?void 0:i.getValue("modal.customModalContainer"))||document.body;if(0===t)return l.a.createElement("div",{className:"lakex-table-filter-where"},uw("当"));if(1===t)return l.a.createElement(x.a,{value:n.operator,dropdownClassName:"lakex-table-menu-item",suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:12}),onChange:function(e){o(n,e)},style:{width:"70px",marginRight:5},getPopupContainer:function(){return a}},l.a.createElement(x.a.Option,{value:IC.And},uw("并且")),l.a.createElement(x.a.Option,{value:IC.Or},uw("或者")));var u=n.operator===IC.And?uw("并且"):uw("或者");return l.a.createElement("div",{className:"lakex-table-filter-where"},u)},dIe=function(e){var t=e.filter,n=e.index,r=void 0===n?0:n,o=e.onRemove,i=void 0===o?function(){}:o,a=e.onFieldChange,u=void 0===a?function(){}:a,c=e.onExpectedChange,s=void 0===c?function(){}:c,d=e.onFuncChange,f=void 0===d?function(){}:d,p=e.onOperatorChange,h=void 0===p?function(){}:p;return l.a.createElement("div",{className:"lakex-table-filter-item"},l.a.createElement(g6,{type:"Close",onClick:function(){i(t)},size:14}),l.a.createElement(sIe,{index:r,filter:t,onOperatorChange:h}),l.a.createElement(iIe,{filter:t,defaultValue:t.field_uuid,onFieldChange:u}),l.a.createElement(lIe,{filter:t,onFuncChange:f}),l.a.createElement(cIe,{filter:t,onExpectedChange:s}))},fIe=function(e){var t=e.onAddFilter,n=void 0===t?function(){}:t;return l.a.createElement("div",{className:"lakex-table-add-filter",onClick:n},l.a.createElement(g6,{type:"Add"}),uw("添加筛选"))};function pIe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return hIe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hIe(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function hIe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vIe=function(){var e=G3(uA),t=G3(MI),n=G3(tIe),r=t.getActiveView(),o=t.getViewFilters(null==r?void 0:r.get("uuid")).toJSON(),i=t.getViewConfig(),l=gP(Object(a.useState)(o||[]),2),u=l[0],c=l[1];return{state:{filters:u},fields:t.getAllFields(),onAddFilter:function(){var t=Vb(u),r=null==n?void 0:n.getDefaultFilter();r&&(t.push(r),null==e||e.execCommand("createFilter",{viewId:null==i?void 0:i.get("view_uuid"),filter:r}),c(t))},onRemoveFilter:function(t){var n=Vb(u);hu(n,(function(e){return e.uuid===t.uuid})),null==e||e.execCommand("removeFilter",{filterId:t.uuid}),c(n)},onFieldChange:function(t,r){var o,a,l=Vb(u),s=pIe(l);try{for(s.s();!(a=s.n()).done;){var d=a.value;if(d.uuid===t.uuid){d.field_uuid=r.uuid;var f=n.getConditions(null==r?void 0:r.type);d.func=null==(o=f[0])?void 0:o.func,d.expected=null,(null==r?void 0:r.type)===bC.CHECKBOX&&(d.expected="true"),d.field=r,null==e||e.execCommand("updateFilter",{viewId:null==i?void 0:i.get("view_uuid"),filter:d}),c(l);break}}}catch(e){s.e(e)}finally{s.f()}},onFuncChange:function(t,n){var r,o=Vb(u),a=pIe(o);try{for(a.s();!(r=a.n()).done;){var l=r.value;if(l.uuid===t.uuid){l.func=n,null==e||e.execCommand("updateFilter",{viewId:null==i?void 0:i.get("view_uuid"),filter:l}),c(o);break}}}catch(e){a.e(e)}finally{a.f()}},onExpectedChange:function(t,n){var r,o=Vb(u),a=pIe(o);try{for(a.s();!(r=a.n()).done;){var l=r.value;if(l.uuid===t.uuid){Array.isArray(n)&&(n=n.join(",")),l.expected=n,null==e||e.execCommand("updateFilter",{viewId:null==i?void 0:i.get("view_uuid"),filter:l}),c(o);break}}}catch(e){a.e(e)}finally{a.f()}},onOperatorChange:function(t,n){var r,o=Vb(u),a=pIe(o);try{for(a.s();!(r=a.n()).done;){r.value.operator=n}}catch(e){a.e(e)}finally{a.f()}null==e||e.execCommand("updateFilter",{viewId:null==i?void 0:i.get("view_uuid"),filter:o}),c(o)}}},gIe=function(){var e,t=vIe(),n=t.state,r=t.onAddFilter,o=t.onRemoveFilter,i=t.onFieldChange,a=t.onFuncChange,u=t.onExpectedChange,c=t.onOperatorChange;return e=0===n.filters.length?l.a.createElement(rIe,null):n.filters.map((function(e,t){return l.a.createElement(dIe,{key:e.field_uuid+"_"+t,index:t,filter:e,onRemove:o,onFieldChange:i,onFuncChange:a,onExpectedChange:u,onOperatorChange:c})})),l.a.createElement("div",{className:"lakex-table-filter-modal"},e,l.a.createElement(fIe,{onAddFilter:r}))},mIe=function(e){return e.showCloseIcon||e.title?l.a.createElement("div",{className:"lakex-table-ui-popup-header",onClick:e.onClose},e.title&&l.a.createElement("h1",{className:"lakex-table-ui-popup-header-title"},e.title),e.showCloseIcon&&l.a.createElement(g6,{className:"lakex-table-ui-popup-close-icon",type:"Close",size:18})):null},yIe=function(e){var t=e.title,n=e.showCloseIcon,r=e.onClose,o=e.children;return l.a.createElement("div",{className:u$("lakex-table-ui-popup")},l.a.createElement(mIe,{title:t,onClose:r,showCloseIcon:!!n}),l.a.createElement("div",{className:u$("lakex-table-ui-popup-content")},o))};function bIe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var wIe=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bIe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bIe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({maxWidth:e.maxWidth},e.style&&e.style);return l.a.createElement("span",{style:t,className:u$("lakex-table-ui-text-ellipsis",e.className)},e.children)};function _Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kIe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_Ie(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var CIe=function(e){return l.a.createElement(j.a,kIe(kIe({},e),{},{className:u$("lakex-table-h5-switch",e.className)}))};function EIe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var OIe=function(e){var t=e.options,n=e.className,r=e.style,o=e.onChange,i=e.defaultValue,u=gP(Object(a.useState)(i),2),c=u[0],s=u[1],d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EIe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EIe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r&&r);(!Array.isArray(t)||2!==t.length)&&console.error("options length is valid!");return l.a.createElement("div",{style:d,className:u$("lakex-table-h5-choose",n)},t.map((function(e){return l.a.createElement("div",{key:e.value,className:u$("lakex-table-h5-choose-item",c===e.value&&"active"),onClick:function(){return function(e){s(e.value),o(e)}(e)}},l.a.createElement("span",{className:"lakex-table-h5-choose-item-desc"},e.label))})))},SIe=function(e){var t=gP(Object(a.useState)(e.list),2),n=t[0],r=t[1];return l.a.createElement("ul",{className:"lakex-table-ui-list-switch"},n.map((function(t){return l.a.createElement("li",{className:"lakex-table-ui-item-switch",key:t.key},l.a.createElement("div",{className:"lakex-table-ui-item-left"},t.icon,l.a.createElement(wIe,{className:"lakex-table-ui-item-name"},null==t?void 0:t.title)),l.a.createElement(CIe,{disabled:t.disabled,checked:t.checked,onChange:function(o){t.checked=o,e.onSwitch(t,o),r(Vb(n))}}))})))},xIe=function(e){var t=gP(Object(a.useState)(e.defaultValue),2),n=t[0],r=t[1];return l.a.createElement("ul",{className:"lakex-table-ui-list-check"},e.list.map((function(t){var o=Array.isArray(n)?n.includes(t.key):t.key===n;return l.a.createElement("li",{className:"lakex-table-ui-item-check",key:t.key,onClick:function(){if(e.multiple){var o=Vb(n),i=o.findIndex((function(e){return e===t.key}));i>-1?o.splice(i,1):o.push(t.key),r(o),e.onCheck(e.list.filter((function(e){return o.includes(e.key)})))}else r(t.key),e.onCheck(t)}},l.a.createElement("div",{className:"lakex-table-ui-item-left"},t.icon,l.a.createElement(wIe,{className:"lakex-table-ui-item-name"},null==t?void 0:t.title)),o&&l.a.createElement(g6,{type:"Check",size:"16"}))})))},jIe=function(e){var t=gP(Object(a.useState)(e.list),2),n=t[0],r=t[1];return l.a.createElement("ul",{className:"lakex-table-ui-list-choose"},n.map((function(t){return l.a.createElement("li",{className:"lakex-table-ui-item-choose",key:t.key},l.a.createElement("div",{className:"lakex-table-ui-item-left"},l.a.createElement(wIe,{className:"lakex-table-ui-item-name"},null==t?void 0:t.title)),l.a.createElement(OIe,{defaultValue:t.defaultValue,options:t.options,onChange:function(o){t.defaultValue=o.value,e.onChoose(t,o),r(Vb(n))}}))})))},IIe=function(e){var t=gP(Object(a.useState)(e.list),2),n=t[0],r=t[1];return Object(a.useEffect)((function(){r(e.list)}),[e.list]),l.a.createElement("ul",{className:"lakex-table-ui-list-select"},n.map((function(t){var n=t.options.find((function(e){return e.value===t.defaultValue}));return l.a.createElement("li",{className:"lakex-table-ui-item-select",key:t.key},l.a.createElement("div",{className:"lakex-table-ui-item-left"},l.a.createElement(wIe,{className:"lakex-table-ui-item-name"},t.title)),l.a.createElement("div",{className:"lakex-table-ui-item-right",onClick:function(){e.onSelect(t)}},l.a.createElement(wIe,{className:"lakex-table-ui-item-name"},(null==n?void 0:n.label)||""),l.a.createElement(g6,{type:"ArrowRight",size:18})))})))};function RIe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var AIe=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RIe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RIe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.style&&e.style);return l.a.createElement("div",{className:u$("lakex-table-empty-no-data",e.className),style:t},l.a.createElement("div",{className:"intrinsic-aspect-ratio-container"},l.a.createElement("div",{className:"lakex-table-empty-no-data-inner"})),e.desc&&l.a.createElement("p",{className:"lakex-table-empty-no-data-desc"},e.desc),e.children&&e.children)},DIe=function(e){var t=e.text,n=void 0===t?"":t,r=e.prefixIcon,o=void 0===r?"":r,i=e.className,a=e.style,u=void 0===a?{}:a,c=e.border,s=e.children,d=e.autoWrap;return l.a.createElement("div",{className:u$("lakex-table-select-bar",c&&"lakex-table-select-bar-has-border",d&&"lakex-table-select-bar-auto-wrap",i),onClick:e.onClick,style:u},o&&l.a.createElement("span",{className:"prefix-icon"},o),s||l.a.createElement(wIe,{className:"lakex-table-select-bar-text"},n),l.a.createElement(g6,{type:"ArrowDown",className:"arrow-down"}))};function PIe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MIe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PIe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PIe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}DIe.defaultProps={border:!0,autoWrap:!1};var TIe=function(e){var t=e.option,n=e.style,r=e.className,o=G3(mM),i=!!t.color?{background:o.getRenderColor(t.color),color:o.getRenderTextColor(t.color)}:{},a=MIe(MIe({},n&&n),i);return l.a.createElement(wIe,{className:u$("lakex-table-select-tag",r),style:a},t.value)};function FIe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var NIe=function(e){var t=e.mention,n=e.style,r=e.className,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FIe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FIe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n&&n);return l.a.createElement("div",{className:u$("lakex-table-mention-tag",r),style:o},l.a.createElement("img",{className:"lakex-table-mention-tag-avatar",src:t.avatar_url,alt:"avatar"}),l.a.createElement(wIe,{className:"lakex-table-mention-tag-name"},t.name))},VIe=function(e){var t=e.onAddFilter,n=void 0===t?function(){}:t;return l.a.createElement("div",{className:"lakex-table-h5-empty"},l.a.createElement(AIe,{desc:uw("你还未进行任何筛选"),className:"no-data"}),l.a.createElement(b.a,{type:"primary",onClick:function(){return n()},className:"no-data-btn"},l.a.createElement(g6,{type:"Add"}),uw("添加筛选条件")))},LIe=function(e){var t=e.index,n=e.filter,r=e.onOperatorChange,o=void 0===r?function(){}:r,i=G3(R_),u=G3(Kse),c=i.getValue("modal.mode"),s=Object(a.useCallback)((function(){u.close("filter-select-operator")}),[]);if(0===t)return l.a.createElement("div",{className:"lakex-table-h5-filter-where"},uw("当"));var d=n.operator===IC.And?uw("并且"):uw("或者");return l.a.createElement("div",{className:"lakex-table-h5-filter-where"},l.a.createElement(DIe,{className:"lakex-table-h5-filter-col",text:d,onClick:function(){u.open("filter-select-operator",{initialState:{value:n.operator}})}}),l.a.createElement(qde,{id:"filter-select-operator",mode:c,hasMask:c===Gse.DRAWER,hasAnimation:c===Gse.DRAWER,position:c===Gse.DRAWER?{placement:"bottom"}:void 0,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return l.a.createElement(yIe,{title:uw("请选择"),onClose:s,showCloseIcon:!0},l.a.createElement(xIe,{defaultValue:t.value,list:[{key:IC.And,title:uw("并且")},{key:IC.Or,title:uw("或者")}],onCheck:function(e){s(),o(n,e.key)}}))}}))},BIe=function(e){var t=e.filter,n=e.className,r=void 0===n?"":n,o=e.defaultValue,i=void 0===o?"":o,u=e.onFieldChange,c=void 0===u?function(){}:u,s=oIe({defaultValue:i}).filterFields,d=G3(R_),f=G3(MI),p=G3(Kse),h=d.getValue("modal.mode"),v=G3(Cie),g=Object(a.useCallback)((function(){p.close("filter-field-select")}),[]),m=f.getField(null==t?void 0:t.field_uuid)||(null==s?void 0:s.get(0).get("field"));if(!m)return null;var y=null==v?void 0:v.getFieldIcon(null==m?void 0:m.get("type"));return l.a.createElement("div",{className:r},l.a.createElement(DIe,{prefixIcon:y,className:"lakex-table-h5-filter-col",text:m.get("name"),onClick:function(){p.open("filter-field-select",{initialState:{value:i}})}}),l.a.createElement(qde,{id:"filter-field-select",mode:h,hasMask:h===Gse.DRAWER,hasAnimation:h===Gse.DRAWER,position:h===Gse.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var n=e.initialState;return l.a.createElement(yIe,{title:uw("请选择"),onClose:g,showCloseIcon:!0},l.a.createElement(xIe,{defaultValue:n.value,list:E_(s,(function(e){var t,n=null==v?void 0:v.getFieldIcon(null==(t=e.get("field"))?void 0:t.get("type"));return{key:e.get("field").get("uuid"),title:e.get("field").get("name"),icon:n&&l.a.createElement(n,null)}})),onCheck:function(e){var n,r=w_(s,(function(t){var n;return(null==(n=t.get("field"))?void 0:n.get("uuid"))===e.key}));c(t,null==(n=null==r?void 0:r.get("field"))?void 0:n.toJSON()),g()}}))}}))},$Ie=function(e){var t,n=e.filter,r=e.className,o=void 0===r?"":r,i=e.onFuncChange,u=void 0===i?function(){}:i,c=aIe({filter:n,onFuncChange:u}).conditions,s=G3(R_),d=G3(Kse),f=s.getValue("modal.mode"),p=Object(a.useCallback)((function(){d.close("filter-func-select")}),[]),h=n.func||(null==c?void 0:c[0].func),v=(null==(t=null==c?void 0:c.find((function(e){return e.func===h})))?void 0:t.text)||(null==c?void 0:c[0].text);return l.a.createElement("div",{className:o},l.a.createElement(DIe,{className:"lakex-table-h5-filter-func",text:v,onClick:function(){d.open("filter-func-select",{initialState:{value:h}})}}),l.a.createElement(qde,{id:"filter-func-select",mode:f,hasMask:f===Gse.DRAWER,hasAnimation:f===Gse.DRAWER,position:f===Gse.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return l.a.createElement(yIe,{title:uw("请选择"),onClose:p,showCloseIcon:!0},l.a.createElement(xIe,{defaultValue:t.value,list:c.map((function(e){return{key:e.func,title:e.text}})),onCheck:function(e){u(n,e.key),p()}}))}}))},zIe=function(e){var t,n,r=e.filter,o=e.onExpectedChange,a=void 0===o?function(){}:o,u=uIe({filter:r}),c=u.getMentionValues,s=u.getDateExpected,d=u.field,f=G3(R_),h=G3(Kse),v=G3(MI),g=f.getValue("modal.mode"),m=d.get("type");if(VC.includes(r.func))return null;if(m===bC.SELECT||m===bC.MULTI_SELECT){var y=(null==r?void 0:r.expected)||[];"string"==typeof(null==r?void 0:r.expected)&&(y=null==r?void 0:r.expected.split(","));var b=v.getFieldOptions(d.get("uuid")),w=__(b,(function(e){return y.includes(e.get("uuid"))})),_=E_(w,(function(e){return e.get("uuid")}));n=l.a.createElement(l.a.Fragment,null,l.a.createElement(DIe,{className:"lakex-table-h5-filter-col",text:E_(w,(function(e){return e.get("name")})).join(", "),onClick:function(){h.open("filter-expected-select",{initialState:{value:_}})}},(!_||!_.length)&&l.a.createElement("span",{className:"lakex-table-h5-condition-placeholder"},uw("请选择"))),l.a.createElement(qde,{id:"filter-expected-select",mode:g,hasMask:g===Gse.DRAWER,hasAnimation:g===Gse.DRAWER,position:g===Gse.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return l.a.createElement(yIe,{title:uw("请选择"),onClose:function(){h.close("filter-expected-select")},showCloseIcon:!0},l.a.createElement(xIe,{multiple:m===bC.MULTI_SELECT,defaultValue:null==t?void 0:t.value,list:E_(b,(function(e){return{key:e.get("uuid"),title:l.a.createElement(TIe,{option:{color:e.get("color"),value:e.get("name")}})}})),onCheck:function(e){if(null!=e&&""!==e&&0!==e.length){if("select"===m)return a(r,e.key),void h.close("filter-expected-select");var t=[];b.forEach((function(n){e.some((function(e){return e.key===n.uuid}))&&t.push(n.uuid)})),a(r,t)}else a(r,"")}}))}}))}else if("checkbox"===m)n=l.a.createElement("span",{className:"lakex-table-h5-filter-checkbox"},l.a.createElement(p.a,{defaultChecked:!!r.expected,onChange:function(e){a(r,e.target.checked?"true":"false")}}));else if(zC.isMentionLike(m)){var k=c()||[],C={};null==k||k.forEach((function(e){C[e.uid]=e}));var E=null!=r&&r.expected?r.expected.split(","):[];n=l.a.createElement(l.a.Fragment,null,l.a.createElement(DIe,{className:"lakex-table-h5-filter-col",text:E.map((function(e){return C[e]})).map((function(e){return e.name})).join(", "),onClick:function(){h.open("filter-expected-mention",{initialState:{value:E}})}},(!E||!E.length)&&l.a.createElement("span",{className:"lakex-table-h5-condition-placeholder"},uw("请选择"))),l.a.createElement(qde,{id:"filter-expected-mention",mode:g,hasMask:g===Gse.DRAWER,hasAnimation:g===Gse.DRAWER,position:g===Gse.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return l.a.createElement(yIe,{title:uw("请选择"),onClose:function(){h.close("filter-expected-mention")},showCloseIcon:!0},k.length?l.a.createElement(xIe,{multiple:!0,defaultValue:null==t?void 0:t.value,list:k.map((function(e,t){return{key:String(e.uid),title:l.a.createElement(NIe,{mention:{avatar_url:e.icon,name:e.name}})}})),onCheck:function(e){h.close("filter-expected-mention"),null!=e&&""!==e&&0!==e.length?a(r,0===e.length?"":e.map((function(e){return e.key})).join(",")):a(r,"")}}):l.a.createElement(AIe,{desc:uw("暂无人员")}))}}))}else if(zC.isDateLike(m)){var O=!r.expected||a_(r.expected),S=O?"custom":r.expected;r.expected||(S="custom"),n=l.a.createElement(l.a.Fragment,null,l.a.createElement(DIe,{className:"lakex-table-h5-filter-col",text:null==(t=LC.find((function(e){return e.name===S})))?void 0:t.text,onClick:function(){h.open("filter-expected-date",{initialState:{value:S}})}},!S&&l.a.createElement("span",{className:"lakex-table-h5-condition-placeholder"},uw("请选择"))),l.a.createElement(qde,{id:"filter-expected-date",mode:g,hasMask:g===Gse.DRAWER,hasAnimation:g===Gse.DRAWER,position:g===Gse.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t=e.initialState;return l.a.createElement(yIe,{title:uw("请选择"),onClose:function(){h.close("filter-expected-mention")},showCloseIcon:!0},l.a.createElement(xIe,{defaultValue:null==t?void 0:t.value,list:s(r.func).map((function(e,t){return{key:e.name,title:e.text}})),onCheck:function(e){"custom"===e.key?a(r,""):a(r,e.key),h.close("filter-expected-date")}}))}}),O&&l.a.createElement("div",{className:"lakex-table-h5-select-expected-datepicker"},l.a.createElement(Bre,{defaultValue:r.expected?i()(r.expected):null,autoFocus:focus,onChange:function(){var e;a(r,null==(e=arguments.length<=0?void 0:arguments[0])?void 0:e.format("YYYY-MM-DD"))}})))}else n=l.a.createElement(Q3,{className:"lakex-table-h5-filter-expected-input",placeholder:uw("请输入"),defaultValue:r.expected,onChange:function(e){a(r,e.target.value)}});return l.a.createElement("div",{className:"lakex-table-h5-filter-expected"},n)},UIe=function(e){var t=e.filter,n=e.index,r=e.onRemove,o=e.onOperatorChange,i=e.onFieldChange,a=e.onFuncChange,u=e.onExpectedChange;return l.a.createElement("div",{className:"lakex-table-h5-filter-item",key:n},l.a.createElement(LIe,{index:n,filter:t,onOperatorChange:o}),l.a.createElement("div",{className:"lakex-table-h5-filter-item-content"},l.a.createElement("div",{className:"lakex-table-h5-filter-item-content-inner"},l.a.createElement("div",{className:"lakex-table-h5-filter-item-content-head"},l.a.createElement(BIe,{className:"lakex-table-h5-filter-item-field",filter:t,defaultValue:t.field_uuid,onFieldChange:i}),l.a.createElement($Ie,{className:"lakex-table-h5-filter-item-func",filter:t,onFuncChange:a})),l.a.createElement("div",null,l.a.createElement(zIe,{filter:t,onExpectedChange:u}))),l.a.createElement(g6,{type:"Delete",size:18,onClick:function(){r(t)}})))},HIe=function(e){var t=vIe(),n=t.state,r=t.onRemoveFilter,o=t.onFieldChange,i=t.onFuncChange,a=t.onExpectedChange,u=t.onOperatorChange,c=t.onAddFilter,s=G3(Kse);return l.a.createElement(yIe,{title:uw("筛选"),onClose:function(){null==s||s.close("filter")},showCloseIcon:!0},0===n.filters.length?l.a.createElement(VIe,{onAddFilter:c}):l.a.createElement("div",{className:"lakex-table-h5-filter"},n.filters.map((function(e,t){return l.a.createElement(UIe,{key:e.field_uuid+"_"+t,index:t,filter:e,onRemove:r,onFieldChange:o,onFuncChange:i,onExpectedChange:a,onOperatorChange:u})})),l.a.createElement(b.a,{className:"lakex-table-h5-filter-add",onClick:function(){return c()}},l.a.createElement(g6,{type:"Add"}),uw("添加筛选条件"))))},qIe=Object.defineProperty,WIe=Object.getOwnPropertyDescriptor,GIe=function(e,t,n,r){for(var o,i=r>1?void 0:r?WIe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&qIe(t,n,i),i},KIe=function(){return Wb((function e(){var t=this;Ub(this,e),this._getTitle=function(){var e=t._readService.getActiveView();if(!e)return uw("筛选");var n=t._readService.getViewFilters(e.get("uuid"));return n&&0!==n.length?uw("$1个筛选",n.length):uw("筛选")},this._getActive=function(){var e=t._readService.getActiveView();if(!e)return!1;var n=t._readService.getViewFilters(e.get("uuid"));return n&&n.length>0}}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"filter",icon:"ViewerFilter",tooltip:this._getTitle,visible:function(){var e;return!((null==(e=t._readService.getActiveView())?void 0:e.get("type"))===BC.FORM)},active:this._getActive,onClick:function(e){var n=e.target;t._modalService.open("filter",{position:{origin:n,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"filter",mode:t,hasMask:t===Gse.DRAWER,hasAnimation:t===Gse.DRAWER,position:t===Gse.DRAWER?{placement:"bottom"}:void 0,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===tie.MOBILE?HIe:gIe})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"filterByField",name:function(e){var n=e.fieldId,r=t._readService.getActiveView();return uw(w_(t._readService.getViewFilters(null==r?void 0:r.get("uuid")),(function(e){return e.get("field_uuid")===n}))?"取消筛选":"按本列筛选")},icon:"ViewerFilter",hotkey:"",visible:function(e){return e.from===_ke.HEADER},onClick:function(e){var n,r,o=e.initialState.fieldId,i=t._readService.getActiveView(),a=w_(t._readService.getViewFilters(null==i?void 0:i.get("uuid")),(function(e){return e.get("field_uuid")===o})),l=null;if(a)l=null==(n=t._commandService)?void 0:n.execCommand("removeFilter",{filterId:a.get("uuid")});else{var u=t._filterService.getFilterByFieldId(o);l=null==(r=t._commandService)?void 0:r.execCommand("createFilter",{viewId:null==i?void 0:i.get("uuid"),filter:u});var c=t._workbenchContext.$root.querySelector("#filter");c&&t._modalService.open("filter",{position:{origin:c,placement:"bottom"}})}null!=l&&l.isSuccess?t._modalService.close("context-menu-modal"):null!=l&&l.error&&g.a.error(l.error.message)}})}}],[{key:"pluginModule",value:function(){return pd().register(tIe).register(this)}}])}();KIe.pluginName="workbench-filter",GIe([Xs(Kse)],KIe.prototype,"_modalService",2),GIe([Xs(MI)],KIe.prototype,"_readService",2),GIe([Xs(uA)],KIe.prototype,"_commandService",2),GIe([Xs(tIe)],KIe.prototype,"_filterService",2),GIe([Xs(H3)],KIe.prototype,"_workbenchContext",2),GIe([Xs(R_)],KIe.prototype,"_configuration",2),KIe=GIe([Ys({contrib:[L3,pse,Yse,IEe]})],KIe);var YIe=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.groupField,r=e.groupOption,o=e.color,i=e.onSubmit,u=function(e){var t=e.groupField,n=e.groupOption,r=e.defaultColor,o=e.onSubmit,i=e.ref,l=G3(mM),u=gP(Object(a.useState)((null==n?void 0:n.color)||r||mM.getNextColor("")),2),c=u[0],s=u[1],d=gP(Object(a.useState)(null==n?void 0:n.name),2),f=d[0],p=d[1],h=Object(a.useRef)(null);Object(a.useEffect)((function(){var e;s((null==n?void 0:n.color)||r||mM.getNextColor("")),p(null==n?void 0:n.name),null==(e=h.current)||e.focus()}),[null==n?void 0:n.color,null==n?void 0:n.name]);var v=Object(a.useCallback)((function(){null==o||o({fieldId:t.get("uuid"),fieldOption:{name:f,color:c}})}),[t.get("uuid"),f,c]);return Object(a.useImperativeHandle)(i,(function(){return{onSubmit:function(){v()}}})),{inputRef:h,state:{name:f,optionColor:c},labelColor:l,onPressEnter:v,onChange:function(e){p(e.target.value)},onChangeColor:function(e){s(e)}}}({groupField:n,groupOption:r,defaultColor:e.defaultColor,onSubmit:i,ref:t}),c=u.inputRef,d=u.state,p=u.labelColor,h=u.onChange,v=u.onChangeColor,g=u.onPressEnter,m=null;return o&&(m=l.a.createElement(f.a,{placement:"leftTop",overlayClassName:"lakex-table-colorpicker",content:l.a.createElement(K3,{colorSource:Vb(sM),activeColor:d.optionColor,onSelect:v})},l.a.createElement("span",{className:"lakex-table-group-item-option-color",style:{background:p.getRenderColor(d.optionColor)}}))),l.a.createElement("div",{className:"lakex-table-group-item-input"},l.a.createElement("span",{className:"lakex-table-group-item-input-content"},m,l.a.createElement(s.a,{ref:c,value:d.name,onChange:function(e){h(e)},onPressEnter:function(){g()},autoFocus:!0})))})));function XIe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function JIe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?XIe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XIe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ZIe=function(e){var t=e.groupField,n=e.groupOption,r=void 0===n?{}:n,o=e.onSubmit;return l.a.createElement("div",{className:"lakex-table-group-item-mention"},l.a.createElement(mce,{id:t.get("uuid"),defaultValue:(null==r?void 0:r.value)||[],onChange:function(e){var n=e.map((function(e){return e.uid})).join(",");null==o||o({fieldId:t.get("uuid"),fieldOption:JIe(JIe({},r),{},{uuid:n,name:n,value:n,users:e})})}}))},QIe=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n,r=e.initialState.groupField,o=Dpe(r.get("uuid")),i=o.field,u=o.fieldType,c=o.fieldOptions,s=G3(uA),d=G3(Kse),f=Object(a.useRef)(null),p=Object(a.useCallback)((function(e){var t,n,r,o,i=e.fieldId,a=e.fieldOption;n=(t={fieldId:i,fieldOption:a}).fieldId,r=t.fieldOption,null!=(o=s.execCommand("createFieldOption",{fieldId:n,fieldOption:r}))&&o.isSuccess?d.close("addGroupItem"):null!=o&&o.error&&g.a.error(o.error.message)}),[]),h=Object(a.useCallback)((function(e){!function(e){var t=e.fieldId,n=e.fieldOption;if(n.name){var r=s.execCommand("createFieldOption",{fieldId:t,fieldOption:n});null!=r&&r.isSuccess?d.close("addGroupItem"):null!=r&&r.error&&g.a.error(r.error.message)}}({fieldId:e.fieldId,fieldOption:e.fieldOption})}),[]);if(Object(a.useImperativeHandle)(t,(function(){return{onCloseByClickAwayOrScroll:function(){var e;u===bC.SELECT&&(null==(e=f.current)||e.onSubmit())}}})),u===bC.MENTION)return l.a.createElement(ZIe,{groupField:i,onSubmit:p});var v=mM.getNextColor((null==(n=null==c?void 0:c.get(c.length-1))?void 0:n.get("color"))||"");return l.a.createElement(YIe,{ref:f,groupField:i,color:null==r?void 0:r.get("color"),defaultColor:v,onSubmit:h})}))),eRe=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n,r,o=null==(n=e.initialState)?void 0:n.groupField,i=null==(r=e.initialState)?void 0:r.groupOption,u=G3(uA),c=G3(Kse),s=Object(a.useRef)(null),d=Object(a.useCallback)((function(e){var t,n,r=e.fieldId,o=e.fieldOption;t={fieldId:r,fieldOption:o}.fieldOption,null!=(n=u.execCommand("updateFieldOption",{optionId:i.uuid,fieldOption:t}))&&n.isSuccess&&c.close("editGroupItem"),null!=n&&n.error&&g.a.error(n.error.message)}),[]),f=Object(a.useCallback)((function(e){!function(e){var t=e.fieldOption;if(t.name!==i.name||t.color!==i.color){var n=u.execCommand("updateFieldOption",{optionId:i.uuid,fieldOption:t});null!=n&&n.isSuccess?c.close("editGroupItem"):null!=n&&n.error&&g.a.error(n.error.message)}else c.close("editGroupItem")}({fieldId:e.fieldId,fieldOption:e.fieldOption})}),[]);return Object(a.useImperativeHandle)(t,(function(){return{onCloseByClickAwayOrScroll:function(){var e;o.get("type")===bC.SELECT&&(null==(e=s.current)||e.onSubmit())}}})),o.get("type")===bC.MENTION?l.a.createElement(ZIe,{groupField:o,groupOption:i,onSubmit:d}):l.a.createElement(YIe,{ref:s,groupField:o,groupOption:i,color:null==o?void 0:o.get("color"),onSubmit:f})}))),tRe=Object.defineProperty,nRe=Object.getOwnPropertyDescriptor,rRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?nRe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&tRe(t,n,i),i},oRe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){var e,t,n=this;null==(e=this._groupItemService)||e.onShowEditGroup((function(e){var t,r=e.target,o=e.groupField,i=e.groupOption;null==(t=n._modalService)||t.open("editGroupItem",{position:{origin:r,placement:"cover"},initialState:{groupField:o,groupOption:i}})})),null==(t=this._groupItemService)||t.onShowNewGroup((function(e){var t,r=e.target,o=e.groupField;null==(t=n._modalService)||t.open("addGroupItem",{position:{origin:r,placement:"cover"},initialState:{groupField:o}})}))}},{key:"registerModal",value:function(e){e.registerItem({id:"addGroupItem",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:QIe}),e.registerItem({id:"editGroupItem",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:eRe})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"groupByField",name:function(e){var n=e.fieldId,r=t._readService.getActiveView(),o=t._readService.getViewGroup(null==r?void 0:r.get("uuid"));return uw(o&&o.field.get("uuid")===n?"取消分组":"按本列分组")},icon:"ViewerGroup",hotkey:"",visible:function(e){return e.from===_ke.HEADER},onClick:function(e){var n,r,o,i=e.initialState,a=t._readService.getActiveView(),l=i.fieldId;if(a){var u=t._readService.getViewGroup(a.get("uuid")),c=u&&u.field.get("uuid")===l,s=null;null!=(s=u?c?null==(r=t._commandService)?void 0:r.execCommand("removeGridGroup",{viewId:a.get("uuid")}):null==(o=t._commandService)?void 0:o.execCommand("updateGridGroup",{viewId:a.get("uuid"),group:{field_uuid:l,type:MC.ASC}}):null==(n=t._commandService)?void 0:n.execCommand("createGridGroup",{viewId:a.get("uuid"),group:{field_uuid:l,type:MC.ASC}}))&&s.isSuccess?t._modalService.close("context-menu-modal"):null!=s&&s.error&&g.a.error(s.error.message)}}})}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();oRe.pluginName="workbench-group",rRe([Xs(Vme),Ds()],oRe.prototype,"_groupItemService",2),rRe([Xs(Kse)],oRe.prototype,"_modalService",2),rRe([Xs(MI)],oRe.prototype,"_readService",2),rRe([Xs(uA)],oRe.prototype,"_commandService",2),oRe=rRe([Ys({contrib:[L3,Yse,IEe]})],oRe);var iRe=function(e){var t=e.className,n=e.defaultValue,r=void 0===n?"":n,o=e.onFieldSelect,i=void 0===o?function(){}:o,a=function(e){var t=G3(MI),n=null==t?void 0:t.getActiveView();return{sortFields:__(null==t?void 0:t.getViewFields(null==n?void 0:n.get("uuid"),!1),(function(t){var n,r;return!(!e.defaultValue||(null==(n=t.get("field"))?void 0:n.get("uuid"))!==e.defaultValue)||zC.isSort(null==(r=t.get("field"))?void 0:r.get("type"))}))}}({defaultValue:r}),u=a.sortFields,c=G3(Cie),s=G3(xk),d=(null==s?void 0:s.getValue("modal.customModalContainer"))||document.body;return l.a.createElement(x.a,{className:"lakex-table-sort-field-select ".concat(t),defaultValue:r,dropdownClassName:"lakex-table-sort-field-select-dropdown",suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:12}),onChange:function(e){var t=w_(u,(function(t){return t.get("field_uuid")===e}));i(null==t?void 0:t.get("field"))},bordered:!1,getPopupContainer:function(){return d}},E_(u,(function(e){var t,n,r,o,i=null==c?void 0:c.getFieldIcon(null==(t=e.get("field"))?void 0:t.get("type"));return l.a.createElement(x.a.Option,{value:null==(n=e.get("field"))?void 0:n.get("uuid"),key:null==(r=e.get("field"))?void 0:r.get("uuid")},i&&l.a.createElement(i,null),l.a.createElement("div",{className:"lakex-table-sort-field-select-name"},null==(o=e.get("field"))?void 0:o.get("name")))})))},aRe="lakex-table-sort-modal-empty",lRe=function(e){var t=e.onAddOption,n=void 0===t?function(){}:t;return l.a.createElement("div",{className:aRe},l.a.createElement("div",{className:"".concat(aRe,"-empty-desc")},uw("还未设置任何排序")),l.a.createElement(iRe,{defaultValue:uw("选择一列进行排序"),onFieldSelect:n}))},uRe=function(e){var t=e.auto,n=void 0!==t&&t,r=e.onUpdateAuto,o=void 0===r?function(){}:r;return l.a.createElement("div",{className:"lakex-table-sort-setting"},l.a.createElement("h2",{className:"lakex-table-sort-setting-title"},uw("排序设置")),l.a.createElement("div",{className:"lakex-table-sort-setting-action"},l.a.createElement("span",null,uw("保持排序")),l.a.createElement(j.a,{checked:n,onChange:o,size:"small"})))},cRe=function(e){switch(e){case"select":case"multiSelect":return{asc:uw("选项顺序"),desc:uw("选项倒序")};case"number":case"phone":return{asc:uw("从小到大"),desc:uw("从大到小")};default:return{asc:uw("升序"),desc:uw("降序"),style:{padding:"0 16px"}}}},sRe=function(e){var t=e.sort,n=e.field,r=e.onUpdateType,o=void 0===r?function(){}:r;if(!n)return null;if(zC.isCheckbox(n.type))return l.a.createElement(v.a.Group,{defaultValue:t.type,onChange:function(e){o(e.target.value)}},l.a.createElement(v.a.Button,{value:"asc"},l.a.createElement("span",{className:"lakex-table-sort-field-order-radio"},l.a.createElement(p.a,{checked:!1},l.a.createElement(g6,{type:"RightArrow"})),l.a.createElement(p.a,{checked:!0}))),l.a.createElement(v.a.Button,{value:"desc"},l.a.createElement("span",{className:"lakex-table-sort-field-order-radio"},l.a.createElement(p.a,{checked:!0},l.a.createElement(g6,{type:"RightArrow"})),l.a.createElement(p.a,{checked:!1}))));var i=cRe(n.type);return l.a.createElement(v.a.Group,{defaultValue:t.type,onChange:function(e){o(e.target.value)}},l.a.createElement(v.a.Button,{value:"asc"},l.a.createElement("span",{style:i.style},i.asc)),l.a.createElement(v.a.Button,{value:"desc"},l.a.createElement("span",{style:i.style},i.desc)))},dRe=function(e){var t=e.sort,n=e.field,r=e.onRemove,o=void 0===r?function(){}:r,i=e.onChange,u=void 0===i?function(){}:i,c=e.onUpdateType,s=void 0===c?function(){}:c,d=function(e){var t=e.field,n=e.onChange,r=gP(Object(a.useState)(t),2),o=r[0],i=r[1];return{state:{activeField:o},onFieldSelect:function(e){n(e.get("uuid")),i(e)}}}({field:n,onChange:u}),f=d.state,p=d.onFieldSelect;return l.a.createElement("div",{className:"lakex-table-sort-item"},l.a.createElement(g6,{type:"Close",onClick:function(){o(t)}}),l.a.createElement(iRe,{defaultValue:null==n?void 0:n.get("uuid"),onFieldSelect:p,className:"lakex-table-sort-item-select"}),l.a.createElement(sRe,{sort:t,field:f.activeField,onUpdateType:s}))},fRe=function(e){var t=e.onCancel,n=void 0===t?function(){}:t,r=e.onSubmit,o=void 0===r?function(){}:r;return l.a.createElement("div",{className:"lakex-table-sort-footer"},l.a.createElement(b.a,{onClick:n},uw("取消")),l.a.createElement(b.a,{type:"primary",onClick:o},uw("确定")))},pRe=function(e){var t,n=G3(Kse),r=G3(uA),o=G3(MI),i=(null==(t=o.getViewSort())?void 0:t.toJSON())||void 0,l=o.getViewConfig(),u=o.getView(),c=gP(Object(a.useState)(i),2),s=c[0],d=c[1],f=gP(Object(a.useState)(!(null==l||!l.get("keep_sort"))),2),p=f[0],h=f[1],v=function(e){if(u)return e?i?null==r?void 0:r.execCommand("updateSort",{viewId:null==l?void 0:l.get("view_uuid"),sort:e,auto:p}):null==r?void 0:r.execCommand("createSort",{viewId:null==l?void 0:l.get("view_uuid"),sort:e}):null==r?void 0:r.execCommand("removeSort",{viewId:null==l?void 0:l.get("view_uuid")})},g=o.getAllFields(),m=Object(a.useCallback)((function(){return s?w_(g,(function(e){return e.get("uuid")===s.field_uuid})):null}),[s,g]);return{state:{sort:s,auto:p},fields:g,getCurrnetSortField:m,onAddOption:function(e){e||(e=o.getViewFields().get(0).get("field"));var t={field_uuid:null==e?void 0:e.get("uuid"),type:TC.ASC};if(p)return v(t),void d(t);d(t)},onRemoveOption:function(){if(p)return v(null),void d(null);d(null)},onUpdateOption:function(e){var t={field_uuid:e,type:(null==s?void 0:s.type)||TC.ASC};if(p)return v(t),void d(t);d(t)},onUpdateType:function(e){var t={field_uuid:null==s?void 0:s.field_uuid,type:e};if(p)return v(t),void d(t);d(t)},onUpdateAuto:function(e){if(p!==e)return null==r||r.execCommand("updateSort",{viewId:null==l?void 0:l.get("view_uuid"),sort:s,auto:e}),void h(e);h(e)},onCancel:function(){n.close("sort")},onSubmit:function(){v(s),n.close("sort")}}},hRe=function(){var e,t=pRe(),n=t.state,r=t.fields,o=t.onCancel,i=t.onSubmit,a=t.onAddOption,u=t.onUpdateOption,c=t.onRemoveOption,s=t.onUpdateType,d=t.onUpdateAuto;if(n.sort){var f=w_(r,(function(e){var t;return e.get("uuid")===(null==(t=n.sort)?void 0:t.field_uuid)}));e=l.a.createElement(l.a.Fragment,null,l.a.createElement(uRe,{auto:n.auto,onUpdateAuto:d}),l.a.createElement(dRe,{field:f,sort:n.sort,onRemove:c,onChange:u,onUpdateType:s}),!n.auto&&l.a.createElement(fRe,{onCancel:o,onSubmit:i}))}else e=l.a.createElement(l.a.Fragment,null,l.a.createElement(lRe,{onAddOption:a}),!n.auto&&l.a.createElement(fRe,{onCancel:o,onSubmit:i}));return l.a.createElement("div",{className:"lakex-table-sort-modal"},e)},vRe=function(e){var t=e.onAddOption,n=void 0===t?function(){}:t;return l.a.createElement("div",{className:"lakex-table-h5-empty"},l.a.createElement(AIe,{desc:uw("你还未进行任何排序"),className:"no-data"}),l.a.createElement(b.a,{type:"primary",onClick:function(){return n()},className:"no-data-btn"},l.a.createElement(g6,{type:"Add"}),uw("添加排序条件")))},gRe=function(e){var t=pRe(),n=t.state,r=t.onCancel,o=t.onSubmit,i=t.onAddOption,u=t.onUpdateOption,c=t.onRemoveOption,s=t.onUpdateType,d=t.onUpdateAuto,f=t.getCurrnetSortField,p=G3(R_),h=G3(Kse),v=p.getValue("modal.mode"),g=G3(MI),m=G3(Cie),y=Object(a.useMemo)((function(){return g.getViewFields()}),[]);return l.a.createElement(yIe,{title:uw("排序"),onClose:r,showCloseIcon:!0},function(){if(!n.sort)return l.a.createElement(vRe,{onAddOption:i});var e=f(),t=cRe(null==e?void 0:e.get("type")),r=null==m?void 0:m.getFieldIcon(null==e?void 0:e.get("type"));return l.a.createElement("div",{className:"lakex-table-h5-sort"},l.a.createElement("div",{className:"lakex-table-h5-sort-tip"},uw("按以下选项进行排序")),l.a.createElement(DIe,{prefixIcon:r,className:"lakex-table-h5-filter-col",text:null==e?void 0:e.get("name"),onClick:function(){null==h||h.open("sort-select",{initialState:{sort:n.sort}})}}),l.a.createElement(qde,{id:"sort-select",mode:v,hasMask:v===Gse.DRAWER,hasAnimation:v===Gse.DRAWER,position:v===Gse.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t,n=e.initialState;return l.a.createElement(yIe,{title:uw("请选择"),onClose:function(){null==h||h.close("sort-select")},showCloseIcon:!0},l.a.createElement(xIe,{defaultValue:null==(t=n.sort)?void 0:t.field_uuid,list:E_(y,(function(e){var t,n=null==m?void 0:m.getFieldIcon(null==(t=e.get("field"))?void 0:t.get("type"));return{key:e.get("field").get("uuid"),title:e.get("field").get("name"),icon:n&&l.a.createElement(n,null)}})),onCheck:function(e){null==h||h.close("sort-select"),u(e.key)}}))}}),l.a.createElement(OIe,{className:"lakex-table-h5-sort-display-radio",options:[{label:t.asc,value:"asc"},{label:t.desc,value:"desc"}],onChange:function(e){return s(e.value)},defaultValue:n.sort.type}),l.a.createElement(SIe,{className:"lakex-table-h5-sort-auto",list:[{key:"auto",checked:n.auto,title:uw("保持排序")}],onSwitch:function(e,t){d(t)}}),l.a.createElement(b.a,{type:"primary",className:"lakex-table-h5-sort-confirm",onClick:function(){return o()},style:{opacity:n.auto?0:1}},uw("确定")),l.a.createElement(b.a,{className:"lakex-table-h5-sort-del",onClick:function(){return c()}},l.a.createElement(g6,{type:"Delete",className:"del-icon"}),uw("删除该条件")))}())},mRe=Object.defineProperty,yRe=Object.getOwnPropertyDescriptor,bRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?yRe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&mRe(t,n,i),i},wRe=function(){return Wb((function e(){var t=this;Ub(this,e),this._getActive=function(){var e=t._readService.getActiveView();if(!e)return!1;var n=t._readService.getViewConfig(e.get("uuid"));return!(null==n||!n.get("keep_sort"))}}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"sort",icon:"ViewerSort",tooltip:uw("排序"),visible:function(){var e;return![BC.FORM,BC.CALENDAR].includes(null==(e=t._readService.getActiveView())?void 0:e.get("type"))},active:this._getActive,onClick:function(e){var n=e.target;t._modalService.open("sort",{position:{origin:n,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"sort",mode:t,hasMask:t===Gse.DRAWER,hasAnimation:t===Gse.DRAWER,position:t===Gse.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===tie.MOBILE?gRe:hRe})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"sortByAsc",name:uw("升序"),hotkey:"",visible:function(e){return e.from===_ke.HEADER},onClick:function(e){var n,r,o=e.initialState.fieldId,i=t._readService.getActiveView();if(i){var a=t._readService.getViewSort(i.get("uuid")),l=t._readService.getViewConfig(null==i?void 0:i.get("uuid")),u=null;null!=(u=a?null==(r=t._commandService)?void 0:r.execCommand("updateSort",{viewId:i.get("uuid"),sort:{field_uuid:o,type:"asc"},auto:!(null==l||!l.get("keep_sort"))}):null==(n=t._commandService)?void 0:n.execCommand("createSort",{viewId:i.get("uuid"),sort:{field_uuid:o,type:"asc"}}))&&u.isSuccess?t._modalService.close("context-menu-modal"):null!=u&&u.error&&g.a.error(u.error.message)}}}),e.registerItem({key:"sortByDesc",name:uw("降序"),hotkey:"",visible:function(e){return e.from===_ke.HEADER},onClick:function(e){var n,r,o=e.initialState.fieldId,i=t._readService.getActiveView();if(i){var a=t._readService.getViewSort(i.get("uuid")),l=t._readService.getViewConfig(null==i?void 0:i.get("uuid")),u=null;null!=(u=a?null==(r=t._commandService)?void 0:r.execCommand("updateSort",{viewId:i.get("uuid"),sort:{field_uuid:o,type:"desc"},auto:!(null==l||!l.get("keep_sort"))}):null==(n=t._commandService)?void 0:n.execCommand("createSort",{viewId:i.get("uuid"),sort:{field_uuid:o,type:"desc"}}))&&u.isSuccess?t._modalService.close("context-menu-modal"):null!=u&&u.error&&g.a.error(u.error.message)}}})}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function _Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kRe(e){var t=gP(Object(a.useState)(e.inputNumber),2),n=t[0],r=t[1],o=Object(a.useRef)(null),i=Object(a.useRef)(null);return l.a.createElement(_.a,{ref:o,defaultValue:e.inputNumber,value:n,size:e.size,controls:e.controls,onChange:function(t){i.current&&clearTimeout(i.current),e.max<t?(t=e.max,cw((function(){o.current&&(o.current.value=String(t))}))):e.min>t&&(t=e.min,cw((function(){o.current&&(o.current.value=String(t))}))),r(t),e.onChange(t)},onClick:e.onClick})}wRe.pluginName="workbench-sort",bRe([Xs(Kse)],wRe.prototype,"_modalService",2),bRe([Xs(MI)],wRe.prototype,"_readService",2),bRe([Xs(uA)],wRe.prototype,"_commandService",2),bRe([Xs(R_)],wRe.prototype,"_configuration",2),wRe=bRe([Ys({contrib:[L3,pse,Yse,IEe]})],wRe);var CRe=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_Re(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),n=t.initialState,r=n.items,o=n.disableDel,i=Object(a.useRef)(null);return l.a.createElement("div",{ref:i,className:"lakex-grid-context-menu"},l.a.createElement(d.a,{mode:"vertical"},r.map((function(e,n){return"|"===e?l.a.createElement(I.a,{key:n}):l.a.createElement(d.a.Item,{className:u$({disable:"deleteField"===e.key&&o}),key:e.key,icon:Mr(e.icon)?e.icon({}):l.a.createElement(g6,{type:e.icon}),onClick:function(n){var r;null==(r=e.onClick)||r.call(e,t,n)},onMouseEnter:function(n){var r;null==(r=e.onMouseEnter)||r.call(e,t,n)},onMouseLeave:function(n){var r;null==(r=e.onMouseLeave)||r.call(e,t,n)}},l.a.createElement("span",null,function(e){if(e.enableInputNumber&&"string"==typeof e.name&&e.name.includes("{InputNumber}")){var n=e.name.split("{InputNumber}");return t.inputNumber=e.defaultNum||1,l.a.createElement(l.a.Fragment,null,n[0],l.a.createElement(kRe,{defaultValue:t.inputNumber,min:e.minNum,max:e.maxNum,size:"small",controls:!1,onChange:function(n){null==n&&(n=e.defaultNum),t.inputNumber=n},onClick:function(e){e.preventDefault(),e.stopPropagation()}}),n[1])}return e.name}(e)),l.a.createElement("span",{className:"lakex-grid-context-menu-item-hotkey"},e.enableInputNumber?"":e.hotkey))}))))},ERe=["e","from"];function ORe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SRe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ORe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ORe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xRe=Object.defineProperty,jRe=Object.getOwnPropertyDescriptor,IRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?jRe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&xRe(t,n,i),i},RRe=function(){return Wb((function e(){Ub(this,e),this._contextMenuModalId="context-menu-modal",this._destroyList=new H_}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(EA.TABLE)}},{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"init",value:function(){var e,t=this;this._contextMenuRegistry.init(),this._destroyList.push(this._contextMenuService.onContextMenu((function(e){var n,r=e.e,o=e.from,i=Y3(e,ERe),a=t._readService.getViewFields()||[],l=r.currentTarget,u=r.clientX,c=r.clientY;n="header"===o?l:{height:0,width:0,left:u,right:u,top:c,bottom:c},t._modalService.open(t._contextMenuModalId,{position:{origin:n,placement:"bottomLeft"},initialState:SRe({items:t._contextMenuWorkbenchService.getMenuItems({from:o,fieldId:i.fieldId}),originRect:l.getBoundingClientRect(),disableDel:1===a.length},i)})})));var n=null==(e=this._selectionService)?void 0:e.onAnchorChange((function(e){var n;null!=(n=t._selectionService)&&n.hasSelection()||t._modalService.close(t._contextMenuModalId);var r=e.fieldValue,o=t._contextMenuService.contextMenuInfo;((null==r?void 0:r.fieldId)!==(null==o?void 0:o.fieldId)||(null==r?void 0:r.recordId)!==(null==o?void 0:o.recordId))&&t._modalService.close(t._contextMenuModalId)}));n&&this._destroyList.push(n)}},{key:"destroy",value:function(){this._destroyList.destroy()}},{key:"registerModal",value:function(e){e.registerItem({id:this._contextMenuModalId,hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",disableClickAwayClose:!0,disableEscClose:!0,RenderComponent:CRe})}}],[{key:"pluginModule",value:function(){return pd().contribution(IEe).register($Ee).register(TEe).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"contextMenu",type:"array",title:"右键菜单"}),e.registerDefaultValue({contextMenu:[]})}}])}();RRe.pluginName="workbench-context-menu",IRe([Xs(Kse)],RRe.prototype,"_modalService",2),IRe([Xs(kke)],RRe.prototype,"_contextMenuService",2),IRe([Xs($Ee)],RRe.prototype,"_contextMenuWorkbenchService",2),IRe([Xs(fye),Ds()],RRe.prototype,"_selectionService",2),IRe([Xs(MI)],RRe.prototype,"_readService",2),IRe([Xs(TEe)],RRe.prototype,"_contextMenuRegistry",2),IRe([Xs(VA)],RRe.prototype,"_abilityService",2),RRe=IRe([Ys({contrib:[L3,Yse,IEe]})],RRe);var ARe=Ts.defineToken("ExpandRecordContribution"),DRe=function(e){return e.NORMAL="normal",e.LITE="lite",e}(DRe||{});function PRe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return MRe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MRe(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function MRe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var TRe=Object.defineProperty,FRe=Object.getOwnPropertyDescriptor,NRe=function(e,t,n,r){for(var o,i=r>1?void 0:r?FRe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&TRe(t,n,i),i},VRe=function(){return Wb((function e(){Ub(this,e),this._recordProviders=[],this._tooltipComponent=null}),[{key:"init",value:function(){var e,t,n=PRe(this.expendRecordProvider.getContributions());try{for(n.s();!(t=n.n()).done;){var r=t.value;try{null==(e=r.registerExpandRecord)||e.call(r,this)}catch(e){console.error(e)}}}catch(e){n.e(e)}finally{n.f()}}},{key:"getProviders",value:function(){return this._recordProviders}},{key:"getTooltipComponent",value:function(){return this._tooltipComponent}},{key:"registerRecordProvider",value:function(e){this._recordProviders.push(e)}},{key:"registerRecordTooltip",value:function(e){this._tooltipComponent=e}}])}();function LRe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BRe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LRe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LRe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}NRe([bd(ARe)],VRe.prototype,"expendRecordProvider",2),VRe=NRe([Ys()],VRe);var $Re=Object(a.memo)((function(e){var t=e.recordId,n=e.field,r=Fpe(t,n.get("uuid")),o=n.get("type")||"",i=G3(Cie).getFieldComponent(o);return o&&i?ww(null==r?void 0:r.value)?l.a.createElement("div",{className:"lakex-cell-field-in-expand-record"},l.a.createElement("span",{className:"lakex-cell-field-in-expand-record cell-empty"},uw("(空)"))):l.a.createElement("div",{className:"lakex-cell-field-in-expand-record"},i&&l.a.createElement(i,{key:null==r?void 0:r.uuid,cell:r,field:n})):null})),zRe=Object(a.memo)((function(e){var t=e.recordId,n=e.field,r=e.focus,o=void 0!==r&&r,i=e.suffixIcon,u=e.allowClear,c=void 0===u||u,s=e.renderMode,d=void 0===s?rie.NORMAL:s,f=e.onCellChange,p=Fpe(t,n.get("uuid")),h=n.get("type")||"",v=G3(Cie),g=G3(VRe).getTooltipComponent(),m=gP(Object(a.useState)(""),2),y=m[0],b=m[1];if(!p&&h!==bC.RATE&&h!==bC.PROGRESS)return null;var w=v.getFieldEditComponent(h)||v.getFieldComponent(h);if(!w)return l.a.createElement("h1",null,"尚未注册FieldEditComponent");var _=BRe(BRe({},zC.isLink(h)&&{useLinkEditor:!0}),zC.isSelectLike(h)&&{displayType:"dropdown"});if(zC.isSystemType(h))return l.a.createElement("div",{className:"lakex-cell-field-in-expand-record"},l.a.createElement(w,{key:null==p?void 0:p.uuid,field:n,recordId:t,cell:p,readonly:!1,focus:!1}));var k=l.a.createElement(w,BRe({key:(null==p?void 0:p.uuid)+(null==p?void 0:p.updated_at),defaultValue:null==p?void 0:p.value,field:n,cell:p,renderMode:d,recordId:t,onCellChange:function(e){var t=v.cellValueChecker(h,e);b(t),null==p||p.setCell(e),null==f||f(e)},focus:o,suffixIcon:i,allowClear:c},_));return l.a.createElement("div",{className:"lakex-cell-field-in-expand-record"},g?l.a.createElement(g,{cell:p,field:n},k):k,l.a.createElement("p",{className:u$("lakex-table-expand-item-error",{show:y})},y))})),URe=Object(a.memo)((function(e){var t=e.type,n=G3(Cie).getFieldIcon(t);return l.a.createElement("div",{className:"lakex-cell-field-in-expand-record-icon"},n&&l.a.createElement(n,{size:16}))})),HRe=Object(a.memo)((function(e){var t=e.field,n=e.position,r=G3(Cie).getFieldTagComponent(t.get("type"));return r?l.a.createElement(r,{field:t,position:n}):null})),qRe=function(e){var t=e.field,n=e.isReadonly,r=Dpe((null==t?void 0:t.get("uuid"))||""),o=r.field,i=r.fieldType,u=r.fieldName,c=G3(Kse),s=Object(a.useCallback)((function(e){n||c.open("addOrUpdateField",{position:{origin:e.currentTarget,placement:"bottom"},initialState:{fieldId:null==o?void 0:o.get("uuid")}})}),[n]);return o?l.a.createElement("div",{className:"lakex-table-expand-record-form-item-label",onClick:s},l.a.createElement(URe,{type:i}),l.a.createElement("div",{className:"lakex-table-expand-record-form-item-label-name"},u),!n&&l.a.createElement(g6,{type:"ReviewArrowDown"}),l.a.createElement(HRe,{field:o,position:"expandRecord"})):null},WRe=function(e){var t=e.recordId,n=e.field,r=e.isReadonly,o=G3(R_);return n?l.a.createElement(l.a.Fragment,null,l.a.createElement(qRe,{isReadonly:r,field:n}),l.a.createElement("div",{className:"lakex-table-expand-record-form-item-content"},r?l.a.createElement($Re,{key:n.get("type")+n.get("uuid"),recordId:t,field:n}):l.a.createElement(zRe,{key:n.get("type")+n.get("uuid"),recordId:t,field:n,renderMode:(null==o?void 0:o.getValue("expandRecord.fieldRenderMode"))||rie.NORMAL}))):null};function GRe(e){var t=e.recordId,n=e.showAddNext,r=G3(R_),o=xpe(EA.TABLE).isReadonly(),i=function(){var e=G3(MI),t=gP(Object(a.useState)((function(){return e.getVisibleRecordIdsInActiveView()})),2),n=t[0];return t[1],{ids:n}}(),l=i.ids,u=wye(),c=Object(a.useMemo)((function(){return t||(null==u?void 0:u.recordId)}),[null==u?void 0:u.recordId,t]),s=gP(Object(a.useState)(c),2),d=s[0],f=s[1],p=EEe(d),h=p.isInRefresh,v=p.refreshDesc,g=gP(Object(a.useState)(null),2),m=g[0],y=g[1],b=Mpe(),w=Object(a.useMemo)((function(){var e=l[0];return d===e}),[d,l]),_=Tpe(d).title,k=Object(a.useMemo)((function(){var e=l[l.length-1];return d===e}),[d,l]),C=G3(uA),E=function(e){if(l){var t=null!==m?m:d,n=null,r=l.findIndex((function(e){return e===t}));"up"!==e||w?"down"===e&&!k&&(null!==m?r=l.findIndex((function(e){return e===m})):r++,n=l[r]):(r--,n=l[r]),n&&(f(n),y(null))}},O=function(){E("down")},S=zle((function(){var e,t=null==C?void 0:C.execCommand("addEmptyRecord"),n=null==t?void 0:t.result,r=null==(e=null==n?void 0:n[0])?void 0:e.uuid;f(r)}));return{showAddNext:n,isReadonly:o,layoutMode:null==r?void 0:r.getValue("expandRecord.fieldLayoutMode"),title:_,fields:E_(b,(function(e){return e.get("field")})),disableUp:w,disableDown:k,rowId:d,isInRefresh:h,removeRecord:function(){null==C||C.execCommand("removeRecords",{recordIds:[d]}),O()},refreshDesc:v,onShowNextRecord:O,onShowPrevRecord:function(){E("up")},onAddNextRecord:S}}var KRe=function(){var e=G3(Kse),t=Object(a.useCallback)((function(t){e.open("addOrUpdateField",{position:{origin:t.currentTarget,placement:"bottom"}})}),[]);return l.a.createElement("div",{id:"lark-table-expand-record-add-column",className:"add-column-button",onClick:t},l.a.createElement(g6,{type:"Add"}),l.a.createElement("div",{className:"title"},uw("新增字段")))},YRe=function(e){var t=e.focus,n=void 0!==t&&t,r=e.children,o=e.className,i=Object(a.useRef)(null);return Object(a.useLayoutEffect)((function(){if(n&&i.current){i.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"});var e=i.current.querySelector("input")||i.current.querySelector("textarea");setTimeout((function(){var t=null==e?void 0:e.value.length;t&&(null==e||e.setSelectionRange(t,t)),null==e||e.focus()}),300)}}),[n]),l.a.createElement("div",{className:o,ref:i},r)},XRe=function(e){var t=e.desc;return l.a.createElement("div",{className:"lakex-table-expand-record-refresh-tooltip"},l.a.createElement(R.a,{message:null==t?void 0:t.text,type:"warning",showIcon:!0,closable:!0}))},JRe=function(e){var t=e.mode,n=e.initialState,r=G3(Kse),o=G3(VRe),i=GRe({recordId:(null==n?void 0:n.recordId)||"",showAddNext:!(null==n||!n.showAddNext)}),u=i.showAddNext,c=i.isReadonly,s=i.title,p=i.layoutMode,v=i.rowId,m=i.fields,y=i.disableUp,w=i.disableDown,_=i.isInRefresh,k=i.refreshDesc,C=i.removeRecord,E=i.onShowNextRecord,O=i.onShowPrevRecord,S=i.onAddNextRecord,x=gP(Object(a.useState)(!1),2),j=x[0],I=x[1],R=G3(sae),A=gP(Object(a.useState)(t===Gse.MODAL?"calc(100vh - 200px)":void 0),2),D=A[0],P=A[1],M=Object(a.useRef)(null),T=(null==n?void 0:n.showAddNext)||t!==Gse.DRAWER;Ule("⌘+shift+,",(function(){O()})),Ule("⌘+shift+.",(function(){E()}));var F=function(){r.close("expandRecord")};Object(a.useEffect)((function(){if(M.current){if(t===Gse.DRAWER)return;var e=M.current.getBoundingClientRect();P(e.height)}}),[T]);var N=o.getProviders(),V=D&&"number"==typeof D?"".concat(D,"px"):D;return l.a.createElement("div",{key:v,className:"lakex-expand-record lakex-table-expand-record lakex-table-input lakex-ui-modal-mode-".concat(t," lakex-table-input lakex-table-expand-record-layout-").concat(p," ")},_&&l.a.createElement(XRe,{desc:k}),l.a.createElement("div",{className:"lakex-table-expand-record-head"},l.a.createElement("div",{className:"lakex-table-expand-record-head-action"},l.a.createElement("h1",{className:"lakex-table-expand-record-title"},s||l.a.createElement("span",{className:"lakex-table-expand-record-empty-title"},uw("未命名记录"))),l.a.createElement("div",{className:"lakex-table-expand-record-head-aciton-wrap"},l.a.createElement(h.a,{placement:"top",title:l.a.createElement("span",null,uw("复制链接"))},l.a.createElement("span",{className:"lakex-table-expand-record-more-action",onClick:function(e){e.stopPropagation();var t=null==R?void 0:R.getOpenLink("record",v);t&&(p1(t),g.a.success({content:uw("复制成功"),style:{zIndex:1050}}))}},l.a.createElement(g6,{type:"Addlink",size:14}))),l.a.createElement("span",{className:"lakex-table-expand-record-action-split"}),l.a.createElement("span",{className:"lakex-table-expand-record-direction"},l.a.createElement(h.a,{placement:"top",title:l.a.createElement("div",{className:"lakex-table-expand-record-direction-tip"},uw("上一条记录"),l.a.createElement("br",null),$oe.adapterHotKey("⌘+shift+,"))},l.a.createElement(b.a,{className:"lakex-table-expand-record-up",disabled:y,onClick:O,type:"text"},l.a.createElement(g6,{type:"ArrowUp",size:16}))),l.a.createElement(h.a,{placement:"top",title:l.a.createElement("div",{className:"lakex-table-expand-record-direction-tip"},uw("下一条记录"),l.a.createElement("br",null),$oe.adapterHotKey("⌘+shift+."))},l.a.createElement(b.a,{className:"lakex-table-expand-record-down",disabled:w,onClick:E,type:"text"},l.a.createElement(g6,{type:"ArrowDown",size:16})))),l.a.createElement("span",{className:"lakex-table-expand-record-action-split"}),l.a.createElement(f.a,{overlayClassName:"lakex-table-expand-record-more",visible:j,content:l.a.createElement(d.a,{onClick:function(e){C(),I(!1),r.close("expandRecord")}},l.a.createElement(d.a.Item,{key:"delete"},l.a.createElement("span",{className:"lakex-table-expand-record-more-list"},l.a.createElement(g6,{type:"Delete",size:14}),uw("删除本条记录")))),trigger:"click",placement:"bottomLeft",onClick:function(e){return e.stopPropagation()},onVisibleChange:function(e){I(e)}},l.a.createElement(b.a,{className:"lakex-table-expand-record-more-btn",type:"text"},l.a.createElement(g6,{type:"MoreHorizontal",size:14}))),l.a.createElement("span",{className:"lakex-table-expand-record-action-split"}),l.a.createElement(h.a,{placement:"top",title:uw("关闭弹窗 (ESC)")},l.a.createElement(g6,{type:"RowCollpse",size:16,onClick:F}))))),l.a.createElement("div",{ref:M,className:"lakex-table-expand-record-form lakex-table-expand-record-form-scroller",style:{height:V}},null==m?void 0:m.map((function(e,t){var r="".concat(v,"-").concat(null==e?void 0:e.get("uuid")),o=!(null==n||!n.isFocus)&&(n.fieldId?n.fieldId===(null==e?void 0:e.get("uuid")):0===t);return l.a.createElement(YRe,{focus:o,className:"lakex-table-expand-record-form-item",key:r},l.a.createElement(WRe,{recordId:v,field:e,isReadonly:c}))})),!c&&l.a.createElement(KRe,null),N.map((function(e){var t=e.RenderComponent;return l.a.createElement(t,{key:v,recordId:v,isReadonly:c,isNewRecord:null==n?void 0:n.isNewRecord})}))),!c&&T&&l.a.createElement("div",{className:"lakex-table-expand-record-operation-button"},l.a.createElement("div",{className:"create-row-footer"},u&&l.a.createElement(b.a,{onClick:S},uw("添加下一个")),l.a.createElement(b.a,{onClick:F},uw("完成")))))};function ZRe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QRe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZRe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZRe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var eAe=$b($b({},bC.IMAGE,ace),bC.FILE,ice),tAe=function(e){var t=e.initialState||{},n=t.fieldType,r=t.recordId,o=t.fieldId,i=G3(Kse),u=G3(uA),c=G3(zS).fieldUriModel,s=Fpe(r,o),d=null==s?void 0:s.value,f=Object(a.useMemo)((function(){return n===bC.IMAGE?uw("图片列表"):n===bC.FILE?uw("附件列表"):null}),[n]),p={style:{width:520},defaultValue:d,onChange:function(e){null==u||u.execCommand("setCell",QRe(QRe({},s),{},{value:e}))},onOrderChange:function(e){var t,i,a=e.targetUid,l=e.sourceUid,s=null==(t=c.findOne({uid:a}))?void 0:t.get("uuid"),d=null==(i=c.findOne({uid:l}))?void 0:i.get("uuid");null==u||u.execCommand("updateValueOrder",{fieldId:o,fieldType:n,recordId:r,targetValueId:s,sourceValueId:d})}};if(![bC.IMAGE,bC.FILE].includes(n))return null;var h=eAe[n];return l.a.createElement("div",{className:"lakex-table-cell-file-uploader"},l.a.createElement("div",{className:"file-uploader-header"},l.a.createElement("h4",{className:"file-uploader-header-title"},f),l.a.createElement(g6,{type:"Close",className:"file-uploader-close",onClick:function(e){null==i||i.close("expandRecordFileEditable")}})),l.a.createElement(h,QRe({},p)))},nAe=Object.defineProperty,rAe=Object.getOwnPropertyDescriptor,oAe=function(e,t,n,r){for(var o,i=r>1?void 0:r?rAe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&nAe(t,n,i),i},iAe=function(){return Wb((function e(){var t=this;Ub(this,e),this._toDestroyCollection=new H_,this._handleExpandRecord=function(e){var n=e.initialState.recordId;t._openExpandRecord({recordId:n}),t._modalService.close("context-menu-modal")}}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(EA.TABLE)}},{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"_hasSelection",value:function(){var e;return null==(e=this._selectionService)?void 0:e.hasSelection()}},{key:"init",value:function(){var e,t=this;this._expandRecordRegistry.init(),this._toDestroyCollection.push(this._renderService.onClickRecord((function(e){var n=e.recordId,r=e.isNewRecord;t.currentViewType!==BC.FORM&&(t._modalService.close("viewerGridCellEditor"),t._openExpandRecord({recordId:n,isNewRecord:r,isFocus:!0}))})));var n=null==(e=this._selectionService)?void 0:e.onChange((function(e){var n,r=e.selection,o=t._selectionService.getRecordId(r);if(o&&t._modalService.isModalVisible("expandRecord")){if(null!=(n=t._modalService.getModalProps("expandRecord").initialState)&&n.isNewRecord)return;t._openExpandRecord({recordId:o})}}));this._toDestroyCollection.push(n);var r=this._modalService.onBeforeClose((function(e){"expandRecord"===e.modalId&&t._renderService.emitViewWidthChange("100%")}));this._toDestroyCollection.push(r)}},{key:"destroy",value:function(){this._toDestroyCollection.destroy()}},{key:"_getMode",value:function(){var e;return null!=(e=this._configuration.getValue("expandRecord.modalDrawerModeViews"))&&e.includes(this.currentViewType)?Gse.DRAWER:Gse.MODAL}},{key:"_openExpandRecord",value:function(e){var t=this._getMode(),n=this._modalService.isModalVisible("expandRecord");this._modalService.open("expandRecord",{key:e.recordId,mode:t,hasMask:t!==Gse.DRAWER,maskSkipElements:t===Gse.DRAWER?[".lakex-table-workbench-toolbar-main-section",".lakex-viewer-grid-header",".lakex-viewer-grid-content tbody",".lakex-viewer-kanban",".lakex-viewer-calendar",".lakex-viewer-card"]:[],initialState:{recordId:e.recordId,fieldId:e.fieldId,isNewRecord:e.isNewRecord,isFocus:e.isFocus}}),n||this._emitViewWidthChange(e.recordId)}},{key:"_emitViewWidthChange",value:function(e){var t=this;if(this._getMode()===Gse.DRAWER){var n=this._workbenchService.getContainerEl().clientWidth,r=this._modalService.getWidth(),o=Math.max(n-r,520);this._renderService.emitViewWidthChange(o),e&&this.currentViewType===BC.CARD&&setTimeout((function(){var n;null==(n=t._selectionService)||n.moveToRecord(e)}),300)}}},{key:"registerModal",value:function(e){var t=this;e.registerItem({id:"expandRecord",hasMask:!0,scrollStrategy:"block",zIndex:"expandRecord",position:{left:"50%",top:"50%"},hasAnimation:!0,RenderComponent:JRe,onResize:function(){t._emitViewWidthChange()}}),e.registerItem({id:"expandRecordFileEditable",hasMask:!1,scrollStrategy:"block",zIndex:"expandRecord",RenderComponent:tAe})}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"expandRecord",hotkey:"space",name:"行展开",enableOnInput:!1,isEnable:function(){var e=t.currentViewType===BC.GRID;return t._hasSelection()&&e},onHotKey:function(e){var n,r;e.preventDefault(),t._modalService.close("viewerGridCellEditor");var o=null==(n=t._selectionService)?void 0:n.getSelection();if(o){var i=null==(r=t._selectionService)?void 0:r.getAnchorPosition(o);i&&t._openExpandRecord({fieldId:i.fieldId,recordId:i.recordId,isFocus:!0})}}})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"expandRecord",name:function(){return t.currentViewType===BC.GRID?uw("展开行"):t.currentViewType===BC.CALENDAR?uw("展开详情"):uw("展开记录")},icon:"RowExpand",hotkey:$oe.adapterHotKey("Space"),visible:function(e){var t=e.from;return t===_ke.CELL||t===_ke.CARD_RECORD||t===_ke.KANBAN_RECORD||t===_ke.CALENDAR_RECORD},onClick:this._handleExpandRecord})}}],[{key:"pluginModule",value:function(){return pd().contribution(ARe).register(VRe).register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"expandRecord",type:"object",title:"行展开",properties:{fieldRenderMode:{type:"string",description:"字段渲染模式",enum:Object.values(rie)},fieldLayoutMode:{type:"string",description:"字段排版模式",enum:Object.values(DRe)},modalDrawerModeViews:{type:"array",description:"使用侧边栏打开的视图列表"}}}),e.registerDefaultValue({"expandRecord.fieldRenderMode":rie.LITE,"expandRecord.fieldLayoutMode":DRe.LITE,"expandRecord.modalDrawerModeViews":[BC.GRID,BC.CARD,BC.KANBAN,BC.CALENDAR]})}}])}();iAe.pluginName="workbench-expand-record",oAe([Xs(bie)],iAe.prototype,"_renderService",2),oAe([Xs(Xde)],iAe.prototype,"_workbenchService",2),oAe([Xs(MI)],iAe.prototype,"_readService",2),oAe([Xs(VA)],iAe.prototype,"_abilityService",2),oAe([Xs(Kse)],iAe.prototype,"_modalService",2),oAe([Xs(R_)],iAe.prototype,"_configuration",2),oAe([Xs(fye),Ds()],iAe.prototype,"_selectionService",2),oAe([Xs(VRe)],iAe.prototype,"_expandRecordRegistry",2),iAe=oAe([Ys({contrib:[L3,Yse,Zme,ARe,IEe]})],iAe);var aAe=Object.defineProperty,lAe=Object.getOwnPropertyDescriptor,uAe=function(e,t,n,r){for(var o,i=r>1?void 0:r?lAe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&aAe(t,n,i),i},cAe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){var e=this;this._workbenchHotkeyPluginProvider.getContributions({cache:!1}).forEach((function(t){t.registerHotkey(e._hotkeyRegistry)}))}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"save",hotkey:"⌘+S",name:uw("保存"),enableOnInput:!1,isEnable:function(){var e;return!((null==(e=t._readService.getActiveView())?void 0:e.get("type"))===BC.FORM)},onHotKey:function(e){e.preventDefault(),g.a.success(uw("文档已保存"))}})}}],[{key:"pluginModule",value:function(){return pd().contribution(Zme).register(this)}}])}();cAe.pluginName="workbench-hotkey",uAe([bd(Zme)],cAe.prototype,"_workbenchHotkeyPluginProvider",2),uAe([Xs(Zoe)],cAe.prototype,"_hotkeyRegistry",2),uAe([Xs(MI)],cAe.prototype,"_readService",2),cAe=uAe([Ys({contrib:[L3,Zme]})],cAe);var sAe=["none","-","count","filled","empty","checked","unchecked","unique","-","percentFilled","percentEmpty","percentUnique","-","sum","average","max","min","earliestDate","latestDate","dateRange","monthRange","percentChecked","percentUnchecked"];function dAe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fAe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dAe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dAe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pAe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return hAe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hAe(e,t)}}(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(l)throw i}}}}function hAe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vAe=function(e){var t=e.initialState,n=t.stat,r=(null==n?void 0:n.type)||"none",o=function(e){var t,n=e.field,r=e.view,o=G3(uA),i=G3(Kse),a=[],l=pAe(sAe);try{for(l.s();!(t=l.n()).done;){var u=t.value,c=lCe[u];if("-"!==u){if(c){if(!c.types){a.push(fAe(fAe({},c),{},{type:u}));continue}c.types.includes(n.get("type"))&&a.push(fAe(fAe({},c),{},{type:u}))}}else a.push(u)}}catch(e){l.e(e)}finally{l.f()}return"-"===a[a.length-1]&&a.splice(a.length-1,1),{menus:a,onChange:function(e,t){"none"===e&&t?null==o||o.execCommand("removeStat",{viewId:r.get("uuid"),fieldId:n.get("uuid")}):null==o||o.execCommand("updateStat",{viewId:r.get("uuid"),fieldId:n.get("uuid"),type:e}),null==i||i.close("stat-option")}}}(t),i=o.menus,a=o.onChange;return l.a.createElement("div",{className:"lakex-table-stats-option-list"},i.map((function(e,t){if("-"===e)return l.a.createElement("div",{key:t,className:"lakex-table-stats-option-seperator"});var o=e.type,i=e.text;return o?l.a.createElement("div",{key:o,className:"lakex-table-stats-option-item",onClick:function(){a(o,n)}},o===r?l.a.createElement(g6,{type:"Check",size:14}):l.a.createElement("span",{className:"lakex-table-stats-empty"}),i):null})))},gAe=Object.defineProperty,mAe=Object.getOwnPropertyDescriptor,yAe=function(e,t,n,r){for(var o,i=r>1?void 0:r?mAe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&gAe(t,n,i),i},bAe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){var e=this;this._statControllerService.onClick((function(t){var n=t.view,r=t.field,o=t.stat,i=t.target;e._modalService.open("stat-option",{position:{placement:"top",origin:i},initialState:{view:n,field:r,stat:o}})}))}},{key:"registerModal",value:function(e){e.registerItem({id:"stat-option",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:vAe})}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();bAe.pluginName="workbench-statistics",yAe([Xs(Kse)],bAe.prototype,"_modalService",2),yAe([Xs(oCe)],bAe.prototype,"_statControllerService",2),bAe=yAe([Ys({contrib:[L3,Yse]})],bAe);var wAe=Object.defineProperty,_Ae=Object.getOwnPropertyDescriptor,kAe=function(e,t,n,r){for(var o,i=r>1?void 0:r?_Ae(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&wAe(t,n,i),i},CAe=function(){return Wb((function e(){var t=this;Ub(this,e),this._handleInsertRecordBefore=function(e){var n,r=e.initialState,o=e.inputNumber,i=r.recordId,a=t._readService.getOriginViewRecords(),l=k_(a,(function(e){return e.get("record_uuid")===i}));if(!(l<0)){var u=t._readService.getViewFields(),c=a.get(l),s=t._commandService.execCommand("addEmptyRecord",{sourceRecordId:c.get("record_uuid"),direction:"before",groupItemKey:c.get("group_item_key"),recordCount:o||1}),d=t._readService.getActiveView(),f=null==s?void 0:s.result;if((null==d?void 0:d.get("type"))===BC.GRID){var p=null==(n=t._selectionService)?void 0:n.createGridSelectionByIndex(l,0,((null==a?void 0:a.length)||0)+1,(null==u?void 0:u.length)||0);t._selectionService.scrollToSelection(p,"start")}else f&&f[0]&&t._modalService.open("expandRecord",{initialState:{recordId:f[0].uuid}});t._modalService.close("context-menu-modal")}},this._handleInsertRecordAfter=function(e){var n,r=e.initialState,o=e.inputNumber,i=r.recordId,a=t._readService.getOriginViewRecords(),l=k_(a,(function(e){return e.get("record_uuid")===i}));if(!(l<0)){var u=t._readService.getViewFields(),c=a.get(l),s=t._commandService.execCommand("addEmptyRecord",{sourceRecordId:c.get("record_uuid"),direction:"after",groupItemKey:c.get("group_item_key"),recordCount:o||1}),d=t._readService.getActiveView(),f=null==s?void 0:s.result;if((null==d?void 0:d.get("type"))===BC.GRID){var p=null==(n=t._selectionService)?void 0:n.createGridSelectionByIndex(l+1,0,((null==a?void 0:a.length)||0)+1,(null==u?void 0:u.length)||0);t._selectionService.scrollToSelection(p,"end")}else f&&f[0]&&t._modalService.open("expandRecord",{initialState:{recordId:f[0].uuid}});t._modalService.close("context-menu-modal")}},this._handleRemoveRecord=function(e){var n,r=e.initialState.recordId;t._possibleService.setUnpossible(hEe.delRow,[r]),t._commandService.execCommand("removeRecords",{recordIds:[r]}),null==(n=t._selectionService)||n.removeSelection(),t._modalService.close("context-menu-modal")},this._handleRemoveRecords=function(e){var n,r=e.initialState.selection;if(r){if(r.isAllSelect)t._possibleService.setUnpossible(hEe.delRow),t._commandService.execCommand("removeRecords",{all:!0});else{var o=t._selectionService.getRecordIds(r);t._possibleService.setUnpossible(hEe.delRow,o),t._commandService.execCommand("removeRecords",{recordIds:o})}null==(n=t._selectionService)||n.removeSelection(),t._modalService.close("context-menu-modal")}}}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(EA.TABLE)}},{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"add-record",icon:"Add",iconSize:16,tooltip:function(){return t.currentViewType===BC.CALENDAR?uw("添加日程"):uw("添加记录")},visible:function(){var e=t.currentViewType===BC.FORM;return!t.isReadonly&&!e},showTitle:!0,showTooltip:!1,onClick:function(){var e,n=null;t.currentViewType===BC.CALENDAR?(t._commandService.execCommand("setActiveDate",{date:Mw()}),n=t._commandService.execCommand("createSchedule",{date:i()()})):n=t._commandService.execCommand("addEmptyRecord");var r=null==n?void 0:n.result,o=null==(e=null==r?void 0:r[0])?void 0:e.uuid;o&&cw((function(){var e;null==(e=t._selectionService)||e.moveToRecord(o),t._modalService.open("expandRecord",{mode:Gse.MODAL,disableClickAwayClose:!1,initialState:{recordId:o,showAddNext:!0,isNewRecord:!0}})}))}})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"insertRecordUp",name:function(){return t.currentViewType===BC.GRID?uw("向上插入 {InputNumber} 行"):uw("向上插入记录")},icon:"UpArrow",hotkey:$oe.adapterHotKey("⌘+⇧+Enter"),enableInputNumber:!0,maxNum:100,minNum:1,defaultNum:1,visible:function(e){var n=e.from;return!t.isReadonly&&(n===_ke.CELL||n===_ke.KANBAN_RECORD)},onClick:function(e){t.currentViewType===BC.KANBAN?t._handleInsertRecordAfter(e):t._handleInsertRecordBefore(e)}}),e.registerItem({key:"insertRecordDown",name:function(){return t.currentViewType===BC.GRID?uw("向下插入 {InputNumber} 行"):uw("向下插入记录")},icon:"DownArrow",hotkey:$oe.adapterHotKey("⇧+Enter"),enableInputNumber:!0,maxNum:100,minNum:1,defaultNum:1,visible:function(e){var n=e.from;return!t.isReadonly&&(n===_ke.CELL||n===_ke.KANBAN_RECORD)},onClick:function(e){t.currentViewType===BC.KANBAN?t._handleInsertRecordBefore(e):t._handleInsertRecordAfter(e)}}),e.registerItem({key:"insertRecordLeft",name:uw("向左插入记录"),icon:"LeftArrow",hotkey:"",visible:function(e){var n=e.from;return!t.isReadonly&&n===_ke.CARD_RECORD},onClick:this._handleInsertRecordBefore}),e.registerItem({key:"insertRecordRight",name:uw("向右插入记录"),icon:"RightArrow",hotkey:"",visible:function(e){var n=e.from;return!t.isReadonly&&n===_ke.CARD_RECORD},onClick:this._handleInsertRecordAfter}),e.registerItem({key:"copyRecord",icon:"Copy",name:function(){return t.currentViewType===BC.GRID?uw("复制行"):uw("复制记录")},hotkey:"",visible:function(e){var t=e.from;return t===_ke.CELL||t===_ke.KANBAN_RECORD||t===_ke.CARD_RECORD},onClick:function(e){var n=e.initialState.recordId,r=t._readService.getOriginViewRecords(),o=k_(r,(function(e){return e.get("record_uuid")===n})),i=r.get(o);t._commandService.execCommand("copyRecord",{sourceRecordId:i.get("record_uuid")}),t._modalService.close("context-menu-modal")}}),e.registerItem({key:"removeRecord",name:function(){return t.currentViewType===BC.GRID?uw("删除行"):t.currentViewType===BC.CALENDAR?uw("删除日程"):uw("删除记录")},icon:"Delete",hotkey:"",visible:function(e){var n=e.from;return!t.isReadonly&&n!==_ke.HEADER&&n!==_ke.GROUP_HEADER},onClick:function(){var e=mC(X_.mark((function e(n){var r,o;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.initialState,(o=r.selection)&&!o.isCollapsed?t._handleRemoveRecords(n):t._handleRemoveRecord(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onMouseEnter:function(e){var n=e.initialState,r=n.selection,o=[n.recordId];r&&(o=t._selectionService.getRecordIds(r)),t._possibleService.setPossible(hEe.delRow,o)},onMouseLeave:function(e){var n=e.initialState,r=n.selection,o=[n.recordId];r&&(o=t._selectionService.getRecordIds(r)),t._possibleService.setUnpossible(hEe.delRow,o)}})}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();CAe.pluginName="workbench-add-record",kAe([Xs(Kse)],CAe.prototype,"_modalService",2),kAe([Xs(MI)],CAe.prototype,"_readService",2),kAe([Xs(uA)],CAe.prototype,"_commandService",2),kAe([Xs(fye),Ds()],CAe.prototype,"_selectionService",2),kAe([Xs(VA)],CAe.prototype,"_abilityService",2),kAe([Xs(wEe)],CAe.prototype,"_possibleService",2),CAe=kAe([Ys({contrib:[L3,pse,IEe]})],CAe);var EAe=function(){var e=G3(Kse),t=G3(oEe),n=gP(Object(a.useState)(null),2),r=n[0],o=n[1],i=gP(Object(a.useState)(0),2),l=i[0],u=i[1],c=gP(Object(a.useState)(0),2),s=c[0],d=c[1],f=gP(Object(a.useState)([]),2),p=f[0],h=f[1],v=Object(a.useRef)(null),g=Object(a.useRef)(null),m=Object(a.useRef)(!1);Object(a.useLayoutEffect)((function(){var e=setTimeout((function(){var e;null==(e=g.current)||e.focus()}),50);return function(){clearTimeout(e)}}),[]);var y=function(){o(null),h([]),u(0),d(0),null==t||t.closeSearch()},b=function(){setTimeout((function(){var e;null==(e=g.current)||e.focus()}),200)},w=Hle((function(){var e,n,r;if(null==m||!m.current){var i=null==(r=(null==(e=g.current)?void 0:e.input)||(null==(n=g.current)?void 0:n.nativeElement))?void 0:r.value;if(!i)return void y();var a=(null==t?void 0:t.search(i))||[];o(i),u(a.length),h(a),d(0),b()}}),300);return Object(a.useEffect)((function(){var e=p[s];e&&(null==t||t.jumpToSearch(e))}),[s,p]),Object(a.useEffect)((function(){var t=e.onBeforeClose((function(e){"search"===e.modalId&&y()}));return function(){t.destroy()}}),[]),{state:{query:r,count:l,current:s},onCloseSearch:function(){e.close("search"),y()},onCompositionStart:function(){m.current=!0},onCompositionEnd:function(){m.current=!1,w()},searchBox:v,onChangeQuery:w,onClear:function(){o(null)},searchInput:g,composition:m,onSearchPrev:function(){d(s>0?s-1:l-1),b()},onSearchNext:function(){d(s<l-1?s+1:0),b()}}};function OAe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SAe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OAe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OAe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xAe=A.a.TabPane,jAe={x:0,y:0},IAe=function(e){var t,n,r=e.top,o=void 0===r?0:r,i=e.left,a=void 0===i?0:i,u=EAe(),c=u.state,d=u.onCloseSearch,f=u.searchInput,p=u.onChangeQuery,h=u.onCompositionStart,v=u.onCompositionEnd,g=u.onSearchPrev,m=u.onSearchNext,y=CU({id:"search"}),w=y.attributes,_=y.listeners,k=y.setNodeRef,C=y.transform;return l.a.createElement("div",SAe(SAe(SAe({className:"lakex-table-search grid",ref:k},_),w),{},{style:{top:o,right:10-a,"--translate-x":"".concat(null!==(t=null==C?void 0:C.x)&&void 0!==t?t:0,"px"),"--translate-y":"".concat(null!==(n=null==C?void 0:C.y)&&void 0!==n?n:0,"px")}}),l.a.createElement(g6,{className:"lakex-search-close-action",type:"Close",size:14,onClick:d}),l.a.createElement(A.a,{defaultActiveKey:"search",animated:!1},l.a.createElement(xAe,{tab:uw("查找"),key:"search"},l.a.createElement("div",{className:"search-input"},l.a.createElement(s.a,{ref:f,className:"lakex-table-search-input",defaultValue:c.query,onChange:p,onCompositionStart:h,onCompositionEnd:v,autoFocus:!0,onPressEnter:m,onMouseDown:function(e){e.stopPropagation()}}),c.query&&l.a.createElement("span",{className:"search-result"},Math.min(c.current+1,c.count)," / ",c.count)),l.a.createElement("div",{className:"search-foot"},l.a.createElement(b.a,{size:"small",onClick:g},uw("上一个")),l.a.createElement(b.a,{size:"small",onClick:m},uw("下一个"))))))},RAe=function(){var e=gP(Object(a.useState)(jAe),2),t=e[0],n=t.x,r=t.y,o=e[1],i=U$(z$($z,{activationConstraint:{distance:8}}));return l.a.createElement(bU,{sensors:i,onDragEnd:function(e){var t=e.delta;o((function(e){var n=e.x,r=e.y;return{x:n+t.x,y:r+t.y}}))}},l.a.createElement(IAe,{top:r,left:n}))},AAe=function(){var e=EAe(),t=e.searchInput,n=e.onClear,r=e.composition,o=e.onCloseSearch,i=e.onChangeQuery;return Object(a.useEffect)((function(){r.current=!1}),[]),l.a.createElement("div",{className:u$("lakex-table-h5-search-bar")},l.a.createElement(s.a,{ref:t,prefix:l.a.createElement(g6,{type:"Search",size:"16",className:"lakex-table-h5-search-icon"}),className:"lakex-table-h5-search-input",placeholder:uw("请输入关键词搜索"),clearable:!0,onClear:n,onChange:i}),l.a.createElement("span",{className:"lakex-table-h5-search-cancel",onClick:o},uw("取消")))},DAe=function(){var e=G3(oEe),t=G3(R_),n=G3(Kse),r=G3(Ude),o=EAe(),i=o.state,u=o.searchBox,c=o.onCloseSearch,d=o.searchInput,f=o.onChangeQuery,p=o.onCompositionStart,v=o.onCompositionEnd,g=o.onSearchNext,m=gP(Object(a.useState)(!1),2),y=m[0],b=m[1],w=(null==t?void 0:t.getValue("toolbar.mode"))===hse.NORMAL,_=Object(a.useCallback)((function(){b(!1),c(),null==e||e.emitExitSearchingEvent()}),[c]),k=Object(a.useCallback)((function(e){e.keyCode===qY.ESC&&_()}),[_]);return Object(a.useEffect)((function(){var t=null==e?void 0:e.onSearching((function(){b(!0)}));return function(){c(),null==t||t.destroy()}}),[]),w?l.a.createElement("button",{className:"lakex-workbench-toolbar-button",onClick:function(){var e=null==r?void 0:r.getRenderViewPort();e&&(null==n||n.open("search",{initialState:{searchParams:{openFrom:"toolbar"}},position:{left:e.right,top:e.top}}))},tabIndex:-1},l.a.createElement(g6,{type:"Search"}),l.a.createElement("span",{className:"toolbar-button-title"},uw("搜索"))):y?l.a.createElement("div",{className:"lakex-search-toolbar-btn",ref:u.current},l.a.createElement(s.a,{ref:d,className:"lakex-table-search-input",defaultValue:i.query,placeholder:uw("请输入关键词..."),onChange:f,onCompositionStart:p,onCompositionEnd:v,autoFocus:!0,allowClear:!0,bordered:!1,onPressEnter:g,onKeyDown:k,onBlur:_})):l.a.createElement(h.a,{title:uw("搜索")},l.a.createElement("button",{className:"lakex-workbench-toolbar-button",onClick:function(){b(!0),null==e||e.emitSearchingEvent()},tabIndex:-1},l.a.createElement(g6,{type:"Search"})))},PAe=Object.defineProperty,MAe=Object.getOwnPropertyDescriptor,TAe=function(e,t,n,r){for(var o,i=r>1?void 0:r?MAe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&PAe(t,n,i),i},FAe=function(){return Wb((function e(){Ub(this,e)}),[{key:"_getSearchPosition",value:function(){var e=this._viewportService.getRenderViewPort();return{left:e.right,top:e.top}}},{key:"_isLiteMode",get:function(){return this._configuration.getValue("toolbar.mode")===hse.LITE}},{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this,n=this._configuration.getValue("render.mode");this._isLiteMode&&n!==tie.MOBILE?e.registerItem({id:"search",RenderComponent:DAe}):e.registerItem({id:"search",icon:"Search",tooltip:uw("搜索"),visible:function(){var e;return!((null==(e=t._readService.getActiveView())?void 0:e.get("type"))===BC.FORM)},onClick:function(e){var r;r=n===tie.MOBILE?{placement:"cover",origin:t._toolbarService.getDom()}:t._getSearchPosition(),t._modalService.open("search",{initialState:{searchParams:{openFrom:"toolbar"}},position:r})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("render.mode");e.registerItem({id:"search",hasMask:!1,scrollStrategy:"block",zIndex:"modalFromToolbar",disableClickAwayClose:!0,RenderComponent:t===tie.MOBILE?AAe:RAe})}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"search",hotkey:"⌘+F",name:uw("查找"),enableOnInput:!1,isEnable:function(){var e;return!((null==(e=t._readService.getActiveView())?void 0:e.get("type"))===BC.FORM)},onHotKey:function(e){e.preventDefault(),t._isLiteMode?t._searchService.emitSearchingEvent():t._modalService.open("search",{initialState:{searchParams:{openFrom:"hotkey"}},position:t._getSearchPosition()})}})}}],[{key:"pluginModule",value:function(){return pd().contribution(BCe).register(this)}}])}();FAe.pluginName="workbench-search",TAe([Xs(Kse)],FAe.prototype,"_modalService",2),TAe([Xs(MI)],FAe.prototype,"_readService",2),TAe([Xs(Ude)],FAe.prototype,"_viewportService",2),TAe([Xs(fse)],FAe.prototype,"_toolbarService",2),TAe([Xs(R_)],FAe.prototype,"_configuration",2),TAe([Xs(oEe)],FAe.prototype,"_searchService",2),FAe=TAe([Ys({contrib:[L3,pse,Yse,Zme]})],FAe);var NAe=Object.defineProperty,VAe=Object.getOwnPropertyDescriptor,LAe=function(e,t,n,r){for(var o,i=r>1?void 0:r?VAe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&NAe(t,n,i),i},BAe=function(){return Wb((function e(){var t=this;Ub(this,e),this._handleCopy=function(){t._copyCutService.copy(),t._modalService.close("context-menu-modal")},this._handlePaste=function(){t._pasteService.paste(),t._modalService.close("context-menu-modal")}}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(EA.TABLE)}},{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"init",value:function(){}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"copy",name:uw("复制"),hotkey:$oe.adapterHotKey("⌘+C"),visible:function(e){var t=e.from;return t===_ke.CELL||t===_ke.MULTI_CELL},onClick:this._handleCopy}),e.registerItem({key:"paste",name:uw("粘贴"),hotkey:$oe.adapterHotKey("⌘+V"),visible:function(e){var n=e.from;return!t.isReadonly&&(n===_ke.CELL||n===_ke.MULTI_CELL)},onClick:this._handlePaste})}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();BAe.pluginName="workbench-clipboard",LAe([Xs(Kse)],BAe.prototype,"_modalService",2),LAe([Xs(MI)],BAe.prototype,"_readService",2),LAe([Xs(VA)],BAe.prototype,"_abilityService",2),LAe([Xs(bbe)],BAe.prototype,"_copyCutService",2),LAe([Xs(jbe)],BAe.prototype,"_pasteService",2),BAe=LAe([Ys({contrib:[L3,IEe]})],BAe);var $Ae=function(){var e=xpe(EA.TABLE).isReadonly(),t=gP(Object(a.useState)(!1),2),n=t[0],r=t[1],o=G3(uA),i=G3(Kse),u=G3(aie),c=G3(bie),d=null==c?void 0:c.getViewNodes(),f=Object(a.useRef)(null),p=jpe(),h=gP(Object(a.useState)((null==p?void 0:p.get("name"))||""),2),v=h[0],g=h[1];Object(a.useEffect)((function(){g((null==p?void 0:p.get("name"))||"")}),[p]);var m=Object(a.useMemo)((function(){for(var e=0,t=0;t<v.length;t++)e+=v.charCodeAt(t)>255?14:7;return e+16}),[v]),y=function(e){var t,n,i=((null==(t=e.target)?void 0:t.value)||"").trim()||uw("表格视图");o.execCommand("updateViewName",{viewId:null==p?void 0:p.get("uuid"),name:i}),r(!1),null==(n=f.current)||n.blur()},b=Array.from(d).map((function(e){return e[1]})).find((function(e){return e.viewType===(null==p?void 0:p.get("type"))}));return b?l.a.createElement("div",{className:"view-manage-signal-toolbar-item"},l.a.createElement("div",{onClick:function(){e||r(!0)},id:"lakex-table-toolbar-view-manage",className:u$("view-manage",!n&&"view-manage-normal")},b.icon({className:b.colorCls,size:16}),l.a.createElement(s.a,{ref:f,onClick:function(){var e;null==(e=f.current)||e.focus()},onMouseDown:function(e){e.stopPropagation()},value:v,style:{width:m},onChange:function(e){var t=e.target.value;g(t)},onBlur:y,onPressEnter:y,bordered:!1,className:u$("input-name",e&&"input-name-disable"),placeholder:uw("视图名称")})),!e&&(null==u?void 0:u.isActive)&&l.a.createElement("button",{className:"lakex-workbench-toolbar-button",onClick:function(e){var t=e.currentTarget;null==i||i.open("add-view",{position:{origin:t,placement:"bottom"}})}},l.a.createElement(g6,{type:"Add"}),l.a.createElement("span",{className:"toolbar-button-title"},uw("新建视图")))):null},zAe=function(e){var t=e.onCommand,n=Ipe(),r=jpe(),o=G3(bie),i=null==o?void 0:o.getViewNodes();if(Object(a.useMemo)((function(){return 1===n.length}),[n]))return l.a.createElement($Ae,null);var u=Array.from(i).map((function(e){return e[1]})).find((function(e){return e.viewType===(null==r?void 0:r.get("type"))}));return u?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"lakex-workbench-toolbar-button view-manage-multiple-toolbar-item",onClick:t,tabIndex:-1},u.icon({className:u.colorCls,size:16}),l.a.createElement("span",{className:"lakex-table-view-manage-title"},null==r?void 0:r.get("name")),l.a.createElement(g6,{type:"ArrowDown"}))):null},UAe=[{key:"rename",title:uw("重命名视图")},{key:"copy",title:uw("复制视图")},{key:"remove",title:uw("删除视图")}],HAe=function(){var e=G3(Kse),t=G3(uA),n=G3(sae),r=G3(kCe),o=G3(bie),i=G3(R_),l=xpe(EA.TABLE).isReadonly(),u=Ipe(),c=jpe(),s=gP(Object(a.useState)(null),2),d=s[0],f=s[1],p=o.getViewNodes(),h=i.getValue("viewerManage.viewTypes"),v=__(u,(function(e){return h.includes(e.get("type"))})),g=function(n,r){var o,i=n.key,a=r.key;switch(null==(o=r.domEvent)||o.stopPropagation(),a){case"rename":f(i);break;case"copy":t.execCommand("copyView",{viewId:i}),e.close("view-manage");break;case"remove":if(v.length<=1)return;t.execCommand("removeView",{viewId:i}),e.close("view-manage")}},m=function(){f(null)},y=function(e,n){e.stopPropagation(),t.execCommand("updateViewName",{viewId:n.key,name:e.target.value}),m()};return{views:u,isReadonly:l,activeView:c,onModalClose:function(){e.close("view-manage")},onChooseView:function(t){if(!d){var r=t.key,o=w_(v,(function(e){return e.get("uuid")===r}));o&&(null==n||n.open("view",o.get("uuid")),e.close("view-manage"))}},onRenameView:function(e){f(e.key)},editingKey:d,onDragEnd:function(e){var t=e.active,n=e.over;t.id!==n.id&&r.updateViewOrder(t.id,n.id)},onCancelEditing:m,onViewNameChange:y,onHandleSetting:g,getChooseConfigs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{unActiveViewColor:!1};return E_(v,(function(t){var n,r=Array.from(p).map((function(e){return e[1]})).find((function(e){return e.viewType===t.get("type")}));return r?(n=e.unActiveViewColor&&(null==c?void 0:c.get("uuid"))!==t.get("uuid")?"":r.colorCls,{key:t.get("uuid"),title:t.get("name"),icon:r.icon({className:n,size:16}),onSettingClick:g,onTitleChange:y,settings:UAe,draggable:!0}):null})).filter((function(e){return!!e}))}}},qAe=["className"];function WAe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GAe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?WAe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WAe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var KAe=function(e){e.className;var t=Y3(e,qAe),n=tH({id:t["data-node-key"],disabled:t.disabled}),r=n.attributes,o=n.listeners,i=n.setNodeRef,a=n.transform,u=n.transition,c=GAe(GAe({},t.style),{},{transform:d6.Transform.toString(a&&GAe(GAe({},a),{},{scaleX:1})),transition:u});return l.a.cloneElement(t.children,GAe(GAe({ref:i,style:c},r),o))},YAe=function(){var e=HAe(),t=e.getChooseConfigs,n=e.onChooseView,r=e.onCancelEditing,o=e.onViewNameChange,i=e.onHandleSetting,u=e.editingKey,c=e.activeView,p=e.onDragEnd,v=e.isReadonly,g=G3(Kse),m=gP(Object(a.useState)(""),2),y=m[0],b=m[1],w=function(e,t){b(e?t.key:"")},_=U$(z$(Vz,{activationConstraint:{distance:8}})),k=function(e,t,n){"add"===t&&function(e){var t=e.currentTarget;null==g||g.open("add-view",{position:{origin:t,placement:"bottom"}})}(e)},C=function(e){return l.a.createElement("span",{onDoubleClick:function(){v||i({key:c.get("uuid")},UAe.find((function(e){return"rename"===e.key})))},className:"lakex-table-viewer-manage-tab-title"},e.title)},E=t({unActiveViewColor:!0}).map((function(e){return e?{key:e.key,label:l.a.createElement("div",{className:"lakex-table-viewer-manage-tab-item"},e.icon,e.key===u&&l.a.createElement(s.a,{className:"lakex-table-menu-configs-input",defaultValue:e.title,autoFocus:!0,onKeyDown:function(t){t.stopPropagation();var n=t.keyCode;27!==n?13===n&&o(t,e):r()},onClick:function(e){return e.stopPropagation()},onBlur:function(t){return o(t,e)}}),e.key!==u&&e.title.length>10&&l.a.createElement(h.a,{placement:"top",title:e.title,arrow:!0},C(e)),e.key!==u&&e.title.length<=10&&C(e)),closable:!v,closeIcon:e.key===c.get("uuid")?l.a.createElement(f.a,{overlayClassName:"lakex-table-menu-container lakex-table-toolbar-tab-menu",content:l.a.createElement(d.a,{onClick:function(e){i({key:c.get("uuid")},e),w(!1,e)}},UAe.map((function(e){return l.a.createElement(d.a.Item,{key:e.key},e.title)}))),visible:y===e.key,trigger:"click",placement:"bottomLeft",onClick:function(e){return e.stopPropagation()},onVisibleChange:function(t){return w(t,e)}},l.a.createElement(g6,{type:"MoreHorizontal",size:14})):l.a.createElement("span",null)}:null})).filter((function(e){return!!e}));return l.a.createElement(P3,{className:"lakex-table-viewer-manage-tab",prefixCls:"".concat("ant","-tabs"),activeKey:null==c?void 0:c.get("uuid"),onChange:function(e){return n({key:e})},items:E,editable:{onEdit:function(e,t){var n=t.key,r=t.event;null==k||k("add"===e?r:n,e)},removeIcon:l.a.createElement("span",null),showAdd:!v,addIcon:l.a.createElement(g6,{type:"Add",size:14})},popupClassName:"lakex-table-viewer-manage-tab-more-popup",moreIcon:l.a.createElement(g6,{type:"MoreHorizontal",size:14}),renderTabBar:function(e,t){return l.a.createElement(bU,{sensors:_,modifiers:[nH,oH],collisionDetection:Z$,onDragEnd:p},l.a.createElement(KU,{items:E.map((function(e){return{id:e.key}})),strategy:zU},l.a.createElement(t,GAe({},e),(function(e){return l.a.createElement(KAe,{"data-node-key":String(e.key)||"",disabled:!!u},e)}))))}})},XAe=function(e){return e.MENU="menu",e.TAB="tab",e}(XAe||{});function JAe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZAe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JAe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JAe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var QAe=function(e){return G3(R_).getValue("viewerManage.type")===XAe.MENU?React.createElement(zAe,ZAe({},e)):React.createElement(YAe,ZAe({},e))},eDe=function(e){var t=G3(Kse),n=G3(uA),r=G3(sae),o=G3(R_),i=G3(bie),u=xpe(EA.TABLE).isReadonly(),c=null==i?void 0:i.getViewNodes(),s=Object(a.useMemo)((function(){if(c){var e=o.getValue("viewerManage.viewTypes"),t=Array.from(c).map((function(e){return e[1]}));return e.map((function(e){var n=t.find((function(t){return t.viewType===e}));return n?{key:e,icon:n.icon({className:n.colorCls,size:16}),title:n.title,desc:n.desc}:null})).filter((function(e){return!!e}))}return[]}),[c]),d=Object(a.useMemo)((function(){return e.hasTitle?[{icon:l.a.createElement(g6,{type:"Add"}),title:l.a.createElement("span",null,uw("新建视图")),children:s}]:s}),[e.hasTitle]);return l.a.createElement(S6,{menuKey:"addView",configs:d,onClick:function(e){var o=fw(32);n.execCommand("addView",{uuid:o,type:e.key}),null==r||r.open("view",o),t.close("add-view"),t.close("view-manage")},className:u$({"lakex-table-menu-container":!0,"lakex-table-view-create":!0,"lakex-table-view-create-no-title":!e.hasTitle}),onDoubleClick:function(){},onInputBlur:function(){},readonly:u})};eDe.defaultProps={hasTitle:!1};var tDe=function(){var e=HAe(),t=e.views,n=e.getChooseConfigs,r=e.onChooseView,o=e.onRenameView,i=e.onCancelEditing,a=e.onDragEnd,u=e.isReadonly,c=e.editingKey,s=e.activeView;if(t.length<=1)return null;var d=n();return l.a.createElement("div",{className:"lakex-table-menu-container lakex-table-view-manage"},l.a.createElement(S6,{menuKey:d.map((function(e){return null==e?void 0:e.title})).join(","),configs:d,onClick:r,onDoubleClick:function(){return!u&&o},defaultSelectedKeys:[(null==s?void 0:s.get("uuid"))||""],onInputBlur:i,editingKey:c,className:"lakex-table-view-manage-inner",readonly:u,onDragEnd:a,draggable:!u}),!u&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"lakex-table-view-manage-hr"}),l.a.createElement(eDe,{hasTitle:!0})))},nDe=function(e){var t=HAe(),n=t.getChooseConfigs,r=t.onChooseView,o=t.onModalClose,i=t.activeView;return l.a.createElement(yIe,{title:uw("切换视图"),onClose:o,showCloseIcon:!0},l.a.createElement(xIe,{defaultValue:i.get("uuid"),list:n(),onCheck:function(e){return r(e)}}))},rDe=Object.defineProperty,oDe=Object.getOwnPropertyDescriptor,iDe=function(e,t,n,r){for(var o,i=r>1?void 0:r?oDe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&rDe(t,n,i),i},aDe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this,n=this._configuration.getValue("viewerManage.type");e.registerItem({id:"view-manage",RenderComponent:QAe,onClick:function(e){if(n!==XAe.TAB){var r={position:{placement:"bottom",origin:e.target}};t._modalService.open("view-manage",r)}}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"view-manage",mode:t,hasMask:t===Gse.DRAWER,hasAnimation:t===Gse.DRAWER,position:t===Gse.DRAWER&&{placement:"bottom"},scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===tie.MOBILE?nDe:tDe}),e.registerItem({id:"add-view",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:eDe})}}],[{key:"pluginModule",value:function(){return pd().register(this)}},{key:"registerConfiguration",value:function(e){e.registerConfiguration({id:"viewerManage",type:"object",title:"视图管理",properties:{type:{type:"string",description:"组件类型",enum:Object.values(XAe)},viewTypes:{type:"array",description:"可操作的视图列表"}}}),e.registerDefaultValue({"viewerManage.type":XAe.TAB,"viewerManage.viewTypes":[BC.GRID,BC.CARD,BC.CALENDAR,BC.KANBAN]})}}])}();aDe.pluginName="workbench-viewer-manage",iDe([Xs(Kse)],aDe.prototype,"_modalService",2),iDe([Xs(R_)],aDe.prototype,"_configuration",2),aDe=iDe([Ys({contrib:[L3,pse,Yse]})],aDe);var lDe=Ts.defineToken("AddFieldPluginConfigContribution"),uDe=Ts.defineToken("AddFieldPluginColConfigNameContribution"),cDe=Object.defineProperty,sDe=Object.getOwnPropertyDescriptor,dDe=function(e,t,n,r){for(var o,i=r>1?void 0:r?sDe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cDe(t,n,i),i},fDe=Wb((function e(){var t=this;Ub(this,e),this.getConfigComponents=function(){var e=t.addFieldPluginConfigProvider.getContributions({cache:!1});return e.length>0?e.map((function(e){return e.getConfigComponent()})):[]},this.getColConfigNameComponent=function(){var e,n,r=t.AddFieldPluginColConfigNameaddFieldPluginConfigProvider.getContributions({cache:!1});return r[0]?null==(n=(e=r[0]).getColConfigNameComponent)?void 0:n.call(e):null}}));dDe([bd(lDe)],fDe.prototype,"addFieldPluginConfigProvider",2),dDe([bd(uDe)],fDe.prototype,"AddFieldPluginColConfigNameaddFieldPluginConfigProvider",2),fDe=dDe([Ys()],fDe);var pDe=function(e){var t,n;if(!zC.isSelectLike(e.type))return null;var r={type:e.type,options:(null==(t=e.property)?void 0:t.options)||[],color:(null==(n=e.property)?void 0:n.color)||!1};return l.a.createElement("div",{className:"select-input lakex-table-col-options"},l.a.createElement(Zce,{title:l.a.createElement("span",{className:"lakex-table-option-config-title"},uw("选项设置")),onChange:e.onChange,onChangeOrder:e.onChangeOrder,multiple:e.type===bC.MULTI_SELECT,configs:r}))},hDe=function(e){var t=e.initialState||{},n=t.fieldId,r=t.showFieldTypes,o=t.sourceFieldId,i=t.direction,u=void 0===i?"after":i,c=Dpe(n||""),d=c.field,f=c.fieldName,p=c.fieldType,v=c.fieldOptions,g=c.updateProperty,m=G3(MI),y=G3(uA),w=G3(VA),_=G3(Cie),k=G3(Kse),C=G3(mM),E=G3(fDe),O=d?null==_?void 0:_.getFieldIcon(null==d?void 0:d.get("type")):null,S=(null==E?void 0:E.getConfigComponents())||[],x=ww(d),j=gP(Object(a.useState)(null),2),I=j[0],R=j[1],A=Object(a.useMemo)((function(){return x?function(e){var t,n=[];for(e.forEach((function(e){n.push(e.uuid)}));!t||n.includes(t);)t=fw(32);return{id:t,name:EC(bC.TEXT,e),type:bC.TEXT,options:null,color:null,config:null}}(m.getAllFields().toJSON()):{id:n,name:f||"",type:p||bC.TEXT,options:(null==v?void 0:v.toJSON())||[],color:null==d?void 0:d.get("color"),config:null==d?void 0:d.get("config")}}),[d]),D=gP(Object(a.useState)(A.name),2),P=D[0],M=D[1],T=gP(Object(a.useState)(A.type),2),F=T[0],N=T[1],V=gP(Object(a.useState)(A.color),2),L=V[0],B=V[1],$=gP(Object(a.useState)(A.config),2),z=$[0],U=$[1],H=Object(a.useRef)(null),q=gP(Object(a.useState)(!1),2),W=q[0],G=q[1],K=gP(Object(a.useState)((function(){return zC.isSelectLike(F)?{options:A.options,color:!(null==d||!d.get("color"))}:null})),2),Y=K[0],X=K[1],J=Object(a.useCallback)((function(){k.close("addOrUpdateField")}),[k]),Z=Object(a.useCallback)((function(e){return e?O_(m.getAllFields(),(function(t){return t.get("uuid")!==A.id&&t.get("name")===e}))?uw("不能与其他列重名"):null:uw("列名不能为空")}),[]),Q=Object(a.useCallback)((function(e){var t=Z(e);R(t)}),[]),ee=Object(a.useCallback)((function(e){var t=e.ctrlKey,n=e.metaKey;if(G(!0),13===e.keyCode&&!t&&!n){var r=e.target.value.trim();Q(r)}}),[]),te=Object(a.useCallback)(function(){var e=mC(X_.mark((function e(t){var r,i,a;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Z(P),R(r),Q(P),!r){e.next=5;break}return e.abrupt("return");case 5:x?(i={field:{uuid:t||fw(32),name:P,type:F,color:L,config:z},sourceFieldId:o,direction:u},zC.isSelectLike(F)&&Y&&(i.field.color=Y.color,i.field.options=Y.options),null==y||y.execCommand("addField",i),J()):(a={uuid:n,name:P,type:F,color:L,config:z},zC.isSelectLike(F)&&Y&&(a.color=Y.color,a.options=Y.options),g(a),J());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Z,d,x,n,o,u,P,F,L,z,Q,Y]),ne=Object(a.useCallback)((function(e){return Cu(m.getFieldCells(e.fieldId),"formatValue").filter((function(e){return!!e.formatValue})).map((function(e,t){return{color:null==C?void 0:C.getByIndex(t),name:e.formatValue,uuid:fw(6)}}))}),[]),re=Object(a.useCallback)((function(e){var t,r=e.key;if(new RegExp("".concat(OC(F),"(\\s\\d)*")).test(P)&&x&&!W){var o=EC(r,m.getAllFields().toJSON());M(o),null==(t=H.current)||t.setValue(o)}if(!zC.isSelectLike(F)&&zC.isSelectLike(r)&&(!Y||!Y.options||0===Y.options.length)){var i=n?ne({fieldId:n,type:F,color:true}):[];X({options:i,color:true}),k.emitUpdatePosition("addOrUpdateField")}N(r)}),[A,m,F,Y,n,x,W]);if(Object(a.useEffect)((function(){H&&setTimeout((function(){H.current.focus(),H.current.select()}),100)}),[]),!x&&!d)return console.warn("FieldId is valid in FieldConfigModal"),null;var oe=CC.filter((function(e){if(x){if(zC.isCreateDisable(e.type))return!1}else if(zC.isTransformDisable(e.type))return!1;return!0}));r&&(oe=CC.filter((function(e){return r.includes(e.type)})));var ie=null==_?void 0:_.getFieldIcon(F),ae=[{key:F,title:l.a.createElement("span",null,OC(F)),icon:ie?l.a.createElement(ie,{size:16}):null,groupBy:"subType",children:oe.map((function(e){var t=null==_?void 0:_.getFieldIcon(e.type),n=null==E?void 0:E.getColConfigNameComponent();return{key:e.type,title:n?l.a.createElement(n,{fieldType:e.type,fieldName:e.name}):e.name,icon:t?l.a.createElement(t,{size:16}):null,subType:e.isAdvanced?uw("高级"):uw("基础"),showActiveIcon:!0}}))}];return l.a.createElement("div",{className:"lakex-table-col-configs"},l.a.createElement("p",{className:"lakex-table-col-title"},uw("数据表列名")),l.a.createElement("div",{className:"lakex-table-col-name"},l.a.createElement(s.a,{ref:H,className:u$({error:I}),defaultValue:P,maxLength:128,onChange:function(e){var t=e.target.value.trim();M(t)},onKeyDown:ee,onBlur:function(e){Q(e.target.value.trim())}}),I&&l.a.createElement("div",{className:"lakex-table-col-error"},I)),l.a.createElement("p",{className:"lakex-table-col-title"},uw("列类型"),l.a.createElement(h.a,{title:uw("设置该列内容类型，支持文本、日期、数字、单选、多选等")},l.a.createElement(g6,{type:"Question",size:14,style:{marginLeft:4}}))),x||w.can(CA.TRANSFORM,EA.FIELD,d)?l.a.createElement(S6,{key:p,menuKey:p||"",className:"lakex-table-col-types",defaultSelectedKeys:[F],onClick:re,configs:ae}):l.a.createElement("div",{className:"lakex-table-col-readonly"},O&&l.a.createElement(O,null),l.a.createElement("span",{className:"lakex-table-col-readonly-text"},OC(null==d?void 0:d.get("type")))),l.a.createElement(pDe,{name:P,type:F,property:Y,onChange:function(e){X(e)}}),S.length>0&&S.map((function(e){return l.a.createElement(e,{key:null,originField:d,fieldType:F,fieldName:P,fieldProperty:Y,onFieldSubmitConfirm:te,onChange:function(e){null!=e&&e.color&&B(e.color),null!=(null==e?void 0:e.config)&&U(e.config)}})})),l.a.createElement("div",{className:"lakex-table-col-configs-footer"},l.a.createElement(b.a,{style:{marginRight:12},onClick:J},uw("取消")),l.a.createElement(b.a,{type:"primary",disabled:I,onClick:function(){return te()}},uw("确定"))))},vDe=Object.defineProperty,gDe=Object.getOwnPropertyDescriptor,mDe=function(e,t,n,r){for(var o,i=r>1?void 0:r?gDe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&vDe(t,n,i),i},yDe=function(){return Wb((function e(){Ub(this,e),this._toDestroyCollection=new H_}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(EA.TABLE)}},{key:"init",value:function(){var e=this;this._toDestroyCollection.push(this._renderService.onClickIcon((function(t){"grid-field-config"===t.iconName&&e._handleOpenFieldConfigCreateModal(t.event.currentTarget)}))),this._toDestroyCollection.push(this._renderService.onClickEvent((function(t){if("gridHeader:doubleClick"===t.eventName){var n=t.data,r=n.event,o=n.fieldId;e._modalService.open("addOrUpdateField",{position:{origin:r.currentTarget,placement:"bottom"},initialState:{fieldId:o}})}})))}},{key:"destroy",value:function(){this._toDestroyCollection.destroy()}},{key:"registerModal",value:function(e){e.registerItem({id:"addOrUpdateField",hasMask:!1,scrollStrategy:"block",zIndex:"expandRecord",RenderComponent:hDe})}},{key:"registerContextMenu",value:function(e){var t=this;e.registerItem({key:"updateField",name:uw("编辑列"),icon:"Edit",hotkey:"",visible:function(e){var n=e.from;return!t.isReadonly&&n===_ke.HEADER},onClick:function(e){var n=e.initialState,r=e.position,o=n.recordId,i=n.fieldId;if(r){var a=t._workbenchContext.$root.querySelector('.lakex-viewer-grid-header-column[data-field-id="'.concat(i,'"]'));t._modalService.open("addOrUpdateField",{initialState:{recordId:o,fieldId:i},position:{origin:a,placement:"bottom"}}),t._modalService.close("context-menu-modal")}}}),e.registerItem({key:"copyField",name:uw("复制列"),icon:"Copy",hotkey:"",visible:function(e){var n=e.from;return!t.isReadonly&&n===_ke.HEADER},onClick:function(e){var n=e.initialState.fieldId;t._commandService.execCommand("copyField",{sourceFieldId:n}),t._modalService.close("context-menu-modal")}}),e.registerItem({key:"insertFieldLeft",name:uw("向左插入列"),icon:"LeftArrow",hotkey:"",visible:function(e){var n=e.from;return!t.isReadonly&&n===_ke.HEADER},onClick:function(e){var n=e.initialState,r=e.position,o=t._readService.getActiveView(),i=n.fieldId,a=n.originRect;if(r&&o){var l=w_(t._readService.getViewFields(o.get("uuid"))||[],(function(e){return e.get("field_uuid")===i}));t._modalService.open("addOrUpdateField",{position:{origin:a,placement:"bottom"},initialState:{sourceFieldId:null==l?void 0:l.get("field_uuid"),direction:"before"}}),t._modalService.close("context-menu-modal")}}}),e.registerItem({key:"insertFieldRight",name:uw("向右插入列"),icon:"RightArrow",hotkey:"",visible:function(e){var n=e.from;return!t.isReadonly&&n===_ke.HEADER},onClick:function(e){var n=e.initialState,r=e.position,o=t._readService.getActiveView(),i=n.fieldId,a=n.originRect;if(r&&o){var l=w_(t._readService.getViewFields(o.get("uuid"))||[],(function(e){return e.get("field_uuid")===i}));t._modalService.open("addOrUpdateField",{position:{origin:a,placement:"bottom"},initialState:{sourceFieldId:null==l?void 0:l.get("field_uuid"),direction:"after"}}),t._modalService.close("context-menu-modal")}}}),e.registerItem({key:"removeField",name:uw("删除列"),icon:"Delete",hotkey:"",visible:function(e){var n=e.from,r=e.fieldId;if(!r)return!1;var o=t._readService.getField(r);return!t.isReadonly&&n===_ke.HEADER&&!zC.isDeleteDisable(null==o?void 0:o.get("type"))},onClick:function(e){var n=e.initialState,r=n.fieldId;n.disableDel||(t._possibleService.setUnpossible(hEe.delCol,[r]),t._commandService.execCommand("removeField",{fieldId:r}),t._modalService.close("context-menu-modal"))},onMouseEnter:function(e){var n=[e.initialState.fieldId];t._possibleService.setPossible(hEe.delCol,n)},onMouseLeave:function(e){var n=[e.initialState.fieldId];t._possibleService.setUnpossible(hEe.delCol,n)}})}},{key:"_handleOpenFieldConfigCreateModal",value:function(e){this.isReadonly||this._modalService.open("addOrUpdateField",{position:{origin:e,placement:"bottom"}})}}],[{key:"pluginModule",value:function(){return pd().contribution(lDe).contribution(uDe).register(this).register(fDe)}}])}();yDe.pluginName="workbench-add-field",mDe([Xs(Kse)],yDe.prototype,"_modalService",2),mDe([Xs(bie)],yDe.prototype,"_renderService",2),mDe([Xs(VA)],yDe.prototype,"_abilityService",2),mDe([Xs(H3)],yDe.prototype,"_workbenchContext",2),mDe([Xs(MI)],yDe.prototype,"_readService",2),mDe([Xs(uA)],yDe.prototype,"_commandService",2),mDe([Xs(wEe)],yDe.prototype,"_possibleService",2),yDe=mDe([Ys({contrib:[L3,Yse,IEe]})],yDe);var bDe=function(){var e=G3(MI),t=G3(uA),n=__(e.getAllViewFields(),(function(e){var t;return(null==(t=e.get("field"))?void 0:t.get("type"))===bC.IMAGE}))||[],r=null==e?void 0:e.getViewConfig();return{options:[{label:uw("无封面"),value:null,icon:l.a.createElement(g6,{type:"Clear",size:14})}].concat(Vb(E_(n,(function(e){var t=e.get("field");return{label:null==t?void 0:t.get("name"),value:null==t?void 0:t.get("uuid"),icon:l.a.createElement(g6,{type:"FieldImage"})}})))),defaultValue:(null==r?void 0:r.get("cover_field_uuid"))||null,onCoverSourceChange:function(n){var r;null==t||t.execCommand("updateCoverSource",{viewId:null==(r=null==e?void 0:e.getActiveView())?void 0:r.get("uuid"),coverFieldId:n})}}},wDe=function(){var e=bDe(),t=e.options,n=e.defaultValue,r=e.onCoverSourceChange,o=G3(xk),i=(null==o?void 0:o.getValue("modal.customModalContainer"))||document.body;return l.a.createElement("div",{className:"lakex-table-view-setting-wrap lakex-table-view-setting-cover-source"},l.a.createElement("span",{className:"lakex-table-view-setting-title"},uw("封面来源")),l.a.createElement(x.a,{defaultValue:n,dropdownClassName:"lakex-table-menu-container lakex-table-view-setting",onChange:r,suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:14}),getPopupContainer:function(){return i}},t.map((function(e){return l.a.createElement(x.a.Option,{value:e.value,key:e.value,className:"column-select-option"},e.icon,e.label)}))))},_De=function(){var e,t=G3(MI),n=G3(uA);return{options:[{label:uw("适应"),value:AC.Fit},{label:uw("裁剪"),value:AC.Clip}],coverDisplay:null==(e=null==t?void 0:t.getViewConfig())?void 0:e.get("cover_display"),viewFields:(null==t?void 0:t.getViewFields())||[],onCoverDisplayChange:function(e){var r;null==n||n.execCommand("updateCoverDisplay",{viewId:null==(r=null==t?void 0:t.getActiveView())?void 0:r.get("uuid"),coverDisplay:e})}}},kDe=function(){var e=_De(),t=e.options,n=e.onCoverDisplayChange,r=e.coverDisplay;return l.a.createElement("div",{className:"lakex-table-view-setting-wrap lakex-table-view-setting-cover-display"},l.a.createElement("span",{className:"lakex-table-view-setting-title"},uw("封面效果")),l.a.createElement(v.a.Group,{options:t,onChange:function(e){return n(e.target.value)},defaultValue:r,optionType:"button"}))},CDe=function(){var e=G3(MI),t=G3(uA);return{viewConfig:null==e?void 0:e.getViewConfig(),onShowFieldChange:function(n){var r;null==t||t.execCommand("updateShowFieldName",{viewId:null==(r=null==e?void 0:e.getActiveView())?void 0:r.get("uuid"),showFieldName:n})}}},EDe=function(){var e=CDe(),t=e.viewConfig,n=e.onShowFieldChange;return l.a.createElement("div",{className:"lakex-table-view-setting-wrap lakex-table-view-setting-show-name"},l.a.createElement("span",{className:"lakex-table-view-setting-title"},uw("显示字段名")),l.a.createElement(j.a,{defaultChecked:null==t?void 0:t.get("show_field_name"),onChange:n,size:"small"}))},ODe=function(){var e=G3(Cie),t=G3(uA),n=G3(Kse),r=Mpe();return{readonly:xpe(EA.TABLE).isReadonly(),viewFields:r,onFieldHiddenChange:function(e,n,r){null==t||t.execCommand("updateFieldHidden",{viewId:e,fieldId:n,hidden:r})},openConfigMenu:function(e,t,r){var o;null==n||n.open("view-field-action",{position:{origin:e.target,placement:"rightTop"},initialState:{fieldId:t.get("field_uuid"),fieldName:null==(o=t.get("field"))?void 0:o.get("name"),target:e.target,disableDel:r}})},fieldService:e}};function SDe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xDe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SDe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SDe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jDe=function(e){var t=e.readonly,n=e.viewField,r=e.disable,o=e.OrderDragIcon,i=e.onFieldHiddenChange,a=e.openConfigMenu,u=G3(Cie),c=n.get("field"),s=n.get("hidden"),d=n.get("field_uuid"),f=n.get("view_uuid"),p=tH({id:d}),h=p.attributes,v=p.listeners,g=p.setNodeRef,m=p.transform,y=p.transition,b=p.isDragging,w=c?null==u?void 0:u.getFieldIcon(c.get("type")):null,_=c?null==u?void 0:u.getFieldTagComponent(c.get("type")):null,k={transform:d6.Transform.toString(m),transition:y,zIndex:b?"100":"auto",opacity:b?.3:1};return c?l.a.createElement("div",xDe(xDe({ref:t?void 0:g,className:"lakex-table-view-setting-field-item ".concat(s?"lakex-table-view-setting-disable":"")},h),{},{style:k}),o&&!t&&l.a.createElement("span",{className:"lakex-table-view-setting-drag-icon"},l.a.createElement(o,{listeners:v})),w?l.a.createElement(w,{className:"lakex-table-view-setting-field-icon"}):null,l.a.createElement("div",{className:"lakex-table-view-setting-field-name"},l.a.createElement("span",{className:"lakex-table-view-setting-field-name-content"},c.get("name")),_?l.a.createElement(_,{field:c,position:"viewerSetting"}):null),l.a.createElement("span",{className:"lakex-table-view-setting-operation-icon"},!r&&l.a.createElement(g6,{type:s?"IconHide":"Preview",onClick:function(){return i(f,d,!s)}})),!t&&l.a.createElement(g6,{className:"lakex-table-config-container lakex-table-view-setting-operation-icon",type:"MoreHorizontal",onClick:function(e){return a(e,n,r)}})):null},IDe=function(){var e,t=ODe(),n=t.readonly,r=t.viewFields,o=t.onFieldHiddenChange,i=t.openConfigMenu,u=function(e){var t=G3(kCe),n=t.OrderDragIcon,r=Object(a.useCallback)(function(){var e=mC(X_.mark((function e(n){var r,o;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.active,o=n.over,r.id===o.id){e.next=4;break}return e.next=4,t.updateFieldOrder(r.id,o.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,e]);return{OrderDragIcon:n,onDragEnd:r}}(r),c=u.onDragEnd,s=u.OrderDragIcon,d=U$(z$(Vz,{activationConstraint:{distance:8}})),f=Object(a.useMemo)((function(){return E_(r,(function(e){return{id:e.get("field_uuid")}}))}),[r]),p=__(r,(function(e){return!e.get("hidden")}));return 1===p.length&&(e=p[0]),l.a.createElement("div",{className:"lakex-table-view-setting-fields"},l.a.createElement(bU,{sensors:d,modifiers:[aH,oH],collisionDetection:Z$,onDragEnd:c},l.a.createElement(KU,{items:f,strategy:qU},E_(r,(function(t){var r=t.get("field"),a=(null==e?void 0:e.get("uuid"))===t.get("uuid");return r?(zC.isDeleteDisable(r.get("type"))&&(a=!0),l.a.createElement(jDe,{key:t.get("field_uuid"),readonly:!!n,viewField:t,disable:a,OrderDragIcon:s,onFieldHiddenChange:o,openConfigMenu:i})):null})))))},RDe=function(e){var t=e.settings,n=void 0===t?["fields"]:t;return l.a.createElement("div",{className:"lakex-table-menu-container lakex-table-view-setting"},(null==n?void 0:n.includes("cover"))&&l.a.createElement(l.a.Fragment,null,l.a.createElement(wDe,null),l.a.createElement(kDe,null),l.a.createElement("div",{className:"lakex-table-view-setting-hr"})),(null==n?void 0:n.includes("showField"))&&l.a.createElement(l.a.Fragment,null,l.a.createElement(EDe,null),l.a.createElement("div",{className:"lakex-table-view-setting-hr"})),n.includes("fields")&&l.a.createElement(IDe,null))},ADe=function(e){var t=e.initialState;return l.a.createElement("div",{className:"lakex-table-view-setting-modal"},l.a.createElement(RDe,{settings:t.settings}))},DDe=function(e){var t=e.initialState,n=function(e){var t=e.fieldId,n=e.target,r=e.disableDel,o=G3(Kse),i=G3(uA);return{items:[{key:"field-edit",icon:"Edit",name:uw("编辑"),onClick:function(){null==o||o.close("view-field-action"),null==o||o.open("addOrUpdateField",{position:{origin:n,placement:"rightTop"},initialState:{fieldId:t}})}},{key:"field-del",icon:"Delete",name:uw("删除"),onClick:function(){r||(null==i||i.execCommand("removeField",{fieldId:t}),null==o||o.close("view-field-action"))}}]}}({fieldId:t.fieldId,fieldName:t.fieldName,target:t.target,disableDel:t.disableDel}),r=n.items;return l.a.createElement(d.a,{mode:"vertical",className:"lakex-table-field-action"},r.map((function(e,n){return l.a.createElement(d.a.Item,{className:u$({disable:"field-del"===e.key&&t.disableDel}),key:e.key,icon:l.a.createElement("span",null,l.a.createElement(g6,{type:e.icon})),onClick:function(){var t;null==(t=e.onClick)||t.call(e)}},uw(e.name))})))},PDe=function(){var e=bDe(),t=e.options,n=e.defaultValue,r=G3(Kse),o=Object(a.useMemo)((function(){return[{key:"cover-source",title:uw("封面来源"),options:t,defaultValue:n}]}),[t,n]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(IIe,{list:o,onSelect:function(e){r.open("view-field-cover-source",{position:{placement:"bottom"},initialState:{options:e.options,defaultValue:e.defaultValue}})}}))},MDe=function(){var e=_De(),t=e.options,n=e.onCoverDisplayChange,r=e.coverDisplay,o=Object(a.useMemo)((function(){return[{key:"cover-display",title:uw("封面效果"),options:t,defaultValue:r||AC.Clip}]}),[t,r]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(jIe,{list:o,onChoose:function(e,t){n(t.value)}}))},TDe=function(){var e=CDe(),t=e.viewConfig,n=e.onShowFieldChange,r=Object(a.useMemo)((function(){return[{key:t.get("uuid"),title:uw("显示字段名"),checked:!!t.get("show_field_name")}]}),[t]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(SIe,{list:r,onSwitch:function(e,t){n(t)}}))},FDe=function(){var e,t=ODe(),n=t.viewFields,r=t.onFieldHiddenChange,o=t.fieldService,i=__(n,(function(e){return!e.get("hidden")}));1===i.length&&(e=i[0]);var u=Object(a.useMemo)((function(){return E_(n,(function(t){var n=t.get("field");if(!n)return null;var r=(null==o?void 0:o.getFieldIcon(n.get("type")))||null,i=t.get("hidden"),a=(null==e?void 0:e.uuid)===t.get("uuid");return zC.isDeleteDisable(n.get("type"))&&(a=!0),{key:t.get("uuid"),title:n.get("name"),checked:!i,icon:r?l.a.createElement(r,null):null,disabled:a}})).filter((function(e){return!!e}))}),[n]);return l.a.createElement("div",{className:"lakex-table-view-setting-fields"},l.a.createElement(SIe,{list:u,onSwitch:function(e,t){var o=w_(n,(function(t){return t.get("uuid")==e.key}));o&&r(o.get("view_uuid"),o.get("field_uuid"),!t)}}))},NDe=function(e){var t=e.settings,n=void 0===t?["fields"]:t;return l.a.createElement("div",{className:"lakex-table-h5-viewer-setting"},(null==n?void 0:n.includes("cover"))&&l.a.createElement(l.a.Fragment,null,l.a.createElement(PDe,null),l.a.createElement(MDe,null)),(null==n?void 0:n.includes("showField"))&&l.a.createElement(l.a.Fragment,null,l.a.createElement(TDe,null)),n.includes("fields")&&l.a.createElement(FDe,null))},VDe=function(e){var t=e.initialState,n=G3(Kse);return l.a.createElement(l.a.Fragment,null,l.a.createElement(yIe,{title:t.title,onClose:function(){n.close("view-field-setting")},showCloseIcon:!0},l.a.createElement(NDe,{settings:t.settings})))},LDe=function(e){var t=e.initialState,n=bDe().onCoverSourceChange,r=G3(Kse),o=function(){r.close("view-field-cover-source")},i=Object(a.useMemo)((function(){return t.options.map((function(e){return{key:e.value||"",icon:e.icon,title:e.label||""}}))}),[t.options]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(yIe,{title:uw("请选择"),onClose:o,showCloseIcon:!0},l.a.createElement(xIe,{defaultValue:t.defaultValue||"",list:i,onCheck:function(e){n(e.key),o()}})))},BDe=Object.defineProperty,$De=Object.getOwnPropertyDescriptor,zDe=function(e,t,n,r){for(var o,i=r>1?void 0:r?$De(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&BDe(t,n,i),i},UDe=function(){return Wb((function e(){var t=this;Ub(this,e),this._getTitlte=function(){var e=t._readService.getActiveView();return(null==e?void 0:e.get("type"))===BC.GRID?uw("表格配置"):(null==e?void 0:e.get("type"))===BC.CARD?uw("画册配置"):(null==e?void 0:e.get("type"))===BC.KANBAN?uw("看板配置"):uw("字段配置")}}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"view-field-setting",icon:"Setting",tooltip:this._getTitlte,visible:function(){var e=t._readService.getActiveView();return[BC.GRID,BC.CARD,BC.KANBAN].includes(null==e?void 0:e.get("type"))},onClick:function(e){var n=e.target;t._modalService.open("view-field-setting",{position:{origin:n,placement:"bottom"},initialState:t._getInitstate()})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"view-field-setting",mode:t,hasMask:t===Gse.DRAWER,hasAnimation:t===Gse.DRAWER,position:t===Gse.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===tie.MOBILE?VDe:ADe}),n===tie.MOBILE&&e.registerItem({id:"view-field-cover-source",mode:Gse.DRAWER,hasMask:!0,hasAnimation:!0,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:LDe}),e.registerItem({id:"view-field-action",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:DDe})}},{key:"_getInitstate",value:function(){var e=this._readService.getActiveView();return e.get("type")===BC.GRID?{settings:["fields"],title:this._getTitlte()}:e.get("type")===BC.CARD?{settings:["cover","showField","fields"],title:this._getTitlte()}:e.get("type")===BC.KANBAN?{settings:["showField","fields"],title:this._getTitlte()}:{}}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();function HDe(e){var t=rse().themeHelper,n=gP(Object(a.useState)(e.color),2),r=n[0],o=n[1];Object(a.useEffect)((function(){o(e.color)}),[e.color]);var i=function(e){return gme.map((function(t){return{colorToken:t,colorValue:t.split(",").map((function(t){return e.toThemeColor("@".concat(t))}))}}))}(t),u=function(n){return l.a.createElement("span",{className:"lakex-table-progress-color-selector-item",onClick:function(){e.onClick(n.colorToken),o(n.colorToken)}},l.a.createElement("span",{style:{background:yme(n.colorValue)}},n.colorToken===r&&l.a.createElement("svg",{style:{fill:null==t?void 0:t.toThemeColor("@white")},viewBox:"0 0 18 18"},l.a.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))};return l.a.createElement("span",{className:"lakex-table-progress-color-selector"},e.chunk?function(e,t,n){t=(n?Co(e,t,n):void 0===t)?1:ra(jr(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var o=0,i=0,a=Array(na(r/t));o<r;)a[i++]=Vi(e,o,o+=t);return a}(i,e.chunk).map((function(e){return l.a.createElement("div",{className:"lakex-table-progress-color-selector-chunk"},e.map((function(e){return u(e)})))})):i.map((function(e){return u(e)})))}UDe.pluginName="workbench-viewer-field-setting",zDe([Xs(MI)],UDe.prototype,"_readService",2),zDe([Xs(Kse)],UDe.prototype,"_modalService",2),zDe([Xs(R_)],UDe.prototype,"_configuration",2),UDe=zDe([Ys({contrib:[L3,pse,Yse]})],UDe);var qDe=function(e){var t=e.originField,n=e.fieldType,r=e.onChange;if(n!==bC.PROGRESS)return null;var o=null==t?void 0:t.get("color");return("string"!=typeof o||!o)&&(o="blue-6",null==r||r({color:o})),React.createElement("div",{className:"lakex-table-field-progress-config"},React.createElement("p",{className:"lakex-table-field-progress-config-title"},uw("颜色设置")),React.createElement(HDe,{chunk:7,color:o,onClick:function(e){return null==r?void 0:r({color:e})}}))},WDe=Object.defineProperty,GDe=Object.getOwnPropertyDescriptor,KDe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}},{key:"getConfigComponent",value:function(){return qDe}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();KDe.pluginName="workbench-field-progress",KDe=function(e,t,n,r){for(var o,i=r>1?void 0:r?GDe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&WDe(t,n,i),i}([Ys({contrib:[L3,lDe]})],KDe);var YDe=function(e){var t=e.initialState,n=G3(cie),r=G3($ye),o=gP(Object(a.useState)(t.x),2),i=o[0],l=o[1],u=gP(Object(a.useState)(0),2),c=u[0],s=u[1];return Object(a.useEffect)((function(){var e=r.onResize((function(e){var t=e.x;l(t)}));return function(){e.destroy()}}),[]),Object(a.useEffect)((function(){var e=n.$root.getBoundingClientRect().height;s(e||"100%")}),[n]),React.createElement("div",{className:"lakex-grid-column-resize-line",style:{transform:"translateX(".concat(i,"px)"),height:c}})},XDe=Object.defineProperty,JDe=Object.getOwnPropertyDescriptor,ZDe=function(e,t,n,r){for(var o,i=r>1?void 0:r?JDe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&XDe(t,n,i),i},QDe=function(){return Wb((function e(){Ub(this,e),this._columnControllerModalId="grid-column-controller"}),[{key:"isReadonly",get:function(){return this._abilityService.isReadonly(EA.TABLE)}},{key:"init",value:function(){var e=this;this._columnControllerService.onResizeStart((function(t){var n=t.x,r=e._renderContext.$root.getBoundingClientRect(),o=r.left,i=r.top;e._modalService.open(e._columnControllerModalId,{position:{left:o,top:i},initialState:{x:n}})})),this._columnControllerService.onResizeEnd((function(){e._modalService.close(e._columnControllerModalId)}))}},{key:"registerModal",value:function(e){e.registerItem({id:this._columnControllerModalId,hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:YDe})}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();QDe.pluginName="workbench-viewer-grid",ZDe([Xs(Kse)],QDe.prototype,"_modalService",2),ZDe([Xs($ye)],QDe.prototype,"_columnControllerService",2),ZDe([Xs(cie)],QDe.prototype,"_renderContext",2),ZDe([Xs(VA)],QDe.prototype,"_abilityService",2),QDe=ZDe([Ys({contrib:[L3,Yse]})],QDe);var ePe=function(e){var t=Object(a.useRef)(null);Object(a.useEffect)((function(){var e,n=function(e){e.preventDefault(),e.stopPropagation()};return null==(e=t.current)||e.addEventListener("wheel",n,{passive:!1}),function(){var e;null==(e=t.current)||e.removeEventListener("wheel",n)}}),[e.visible]);var n=function(t){t.preventDefault(),e.onBeforeEndEdit(t)};return e.visible?l.a.createElement("div",{className:"lakex-mask-in-cell-editor",onClick:n,ref:t,onContextMenu:n}):null};function tPe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nPe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tPe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tPe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rPe=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.editing,r=e.style,o=e.fieldType,i=e.isMultiText,u=e.onBlur,c=e.onChange,s=e.onSave,d=Object(a.useRef)(null),f=G3(qye),p=G3(rbe),h=G3(fye),v=gP(Object(a.useState)(!1),2),g=v[0],m=v[1];Object(a.useImperativeHandle)(t,(function(){return{focus:function(){var e;null==(e=d.current)||e.focus()},blur:function(){var e;null==(e=d.current)||e.blur()},onEndEdit:(e=mC(X_.mark((function e(t){return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),onStartEdit:function(e){w(e)},getValue:function(){var e;return null==(e=d.current)?void 0:e.getValue()}};var e}));var y=function(){var e=mC(X_.mark((function e(t){var n,r,o,i;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return o=String(null==(n=d.current)?void 0:n.getValue()),i=null==(r=null==o?void 0:o.trim)?void 0:r.call(o),e.next=5,null==s?void 0:s(i);case 5:setTimeout((function(){var e,t;null==(e=d.current)||e.focus(),null==(t=d.current)||t.clearValue()}),30);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=Object(a.useCallback)((function(t){e.toggleEditing(!1);var n=null==p?void 0:p.getCellIndexesByClientXY(t.clientX,t.clientY);n&&cw((function(){var e=null==h?void 0:h.createGridSelectionByIndex(n[0],n[1]);e&&(null==h||h.setSelection(e))}))}),[n]),w=function(t){var n,r,o;if(void 0!==t){var i=(null==(n=e.getFormattedValue)?void 0:n.call(e,t))||t;null==(r=d.current)||r.setValue(i),null==(o=d.current)||o.setCursorToEnd(),cw((function(){null==p||p.updateCellCoordsInViewPort()}))}},_=Object(a.useMemo)((function(){if(!i){var e=null==f?void 0:f.rowHeightSize;return nPe(nPe({},r),{},{minHeight:e,height:e})}return r}),[i,r]),k={className:"textarea-cell ".concat(o),ref:d,onKeyDown:function(t){var r,i=t.shiftKey,a=t.key,l=a===WY.ENTER;if(!g){if(l)if(n&&i)document.execCommand("insertText",!1,"\n"),null==(r=d.current)||r.blur(),setTimeout((function(){var e;null==(e=d.current)||e.focus()}),0);else if(!i){if(o===bC.LINK&&!n)return;e.toggleEditing(!0)}a===WY.TAB&&n&&(t.preventDefault(),e.toggleEditing(!1))}},onCompositionStart:function(){m(!0)},onCompositionEnd:function(){m(!1)},onChange:function(e){var t=e.target.value;c&&c(t)},readOnly:!1,onBlur:function(){u&&u()},maxRows:6};return l.a.createElement(l.a.Fragment,null,l.a.createElement(ePe,{visible:n,onBeforeEndEdit:b}),l.a.createElement("div",{className:"lakex-table-text-editor",style:nPe({},_)},l.a.createElement(s6,nPe({allowEnter:i},k))))})));function oPe(e){var t=e.editing,n=G3(Ude),r=_ye(t),o=Object(a.useRef)(null),i=gP(qle(),3),l=i[0],u=i[1],c=i[2];return Object(a.useLayoutEffect)((function(){t&&o.current?u(o.current):c()}),[o,t]),{editorRelativeLayout:Object(a.useMemo)((function(){var e={position:"absolute",left:0};if(!r)return e.width=0,e;var t=Math.round((null==l?void 0:l.height)||0),o=Math.floor((null==n?void 0:n.getRenderViewPort().height)||0);return Math.floor(r.top+t+4)>o?e.bottom=0:e.top=r.height+4,e}),[t,l,r]),editorWrapperRef:o}}function iPe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aPe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iPe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iPe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lPe=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.editing,r=e.style,o=e.fieldType,i=e.inputObserverRef,u=Fpe(e.recordId,e.fieldId),c=Dpe(e.fieldId),s=c.field,d=c.fieldOptions,f=c.updateProperty,p=xpe(EA.FIELD).canUpdate(s),h=Object(a.useMemo)((function(){return o===bC.MULTI_SELECT}),[o]),v=G3(bie),g=Object(a.useMemo)((function(){var e=(null==u?void 0:u.value)||[];return Array.isArray(e)?e:[e]}),[h,null==u?void 0:u.formatValue]),m=oPe({editing:n}),y=m.editorRelativeLayout,b=m.editorWrapperRef;Object(a.useImperativeHandle)(t,(function(){return{focus:function(){var e;null==(e=i.current)||e.focus()},blur:function(){var e;null==(e=i.current)||e.blur()},onEndEdit:(e=mC(X_.mark((function e(t){var n;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(n=i.current)||n.focus();case 1:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})};var e})),Object(a.useEffect)((function(){var t=null==v?void 0:v.onClickCellIcon((function(t){"cellSelectIcon"===t.iconName&&e.toggleEditing()}));return function(){null==t||t.destroy()}}),[]);var w=function(){var e=mC(X_.mark((function e(t){var n,r;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=g.includes(t.uuid),h){e.next=7;break}return e.next=4,null==u?void 0:u.setCell(n?"":t.uuid);case 4:case 10:return e.abrupt("return",e.sent);case 7:return r=n?g.filter((function(e){return e!==t.uuid})):g.concat(t.uuid),e.next=10,null==u?void 0:u.setCell(r.map((function(e){return{value:e}})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=zle(function(){var t=mC(X_.mark((function t(r){return X_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,w(r);case 4:h||e.toggleEditing();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),k=zle((function(e){var t=__(d,(function(t){return t.get("uuid")!==e}));f({options:t.toJSON()})})),C=zle(function(){var t=mC(X_.mark((function t(r){var o;return X_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return o=d.toJSON().concat(r),t.next=5,f({options:o});case 5:w(r),h||e.toggleEditing();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),E=zle((function(e){var t=E_(d,(function(t){return t.get("uuid")===e.uuid?e:t.toJSON()}));f({options:t})}));return s&&zC.isSelectLike(o)?l.a.createElement("div",{className:"lakex-grid-cell-editor-keyboard-input",ref:b,style:aPe(aPe(aPe({},r),y),{},{maxWidth:"fit-content"}),onKeyDown:function(t){t.key===WY.ENTER&&!t.shiftKey&&!n&&e.toggleEditing(!0)}},l.a.createElement(Pce,{inputRef:i,visible:n,focus:!1,colorable:!!s.get("color"),options:d.toJSON(),editable:!0,optionEditable:p,selectedIds:g,onOptionCreate:C,onOptionChange:E,onOptionDelete:k,onOptionSelect:_})):null})));function uPe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cPe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uPe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uPe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sPe=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.editing,r=e.style,o=e.inputObserverRef,i=e.cellValue||[],u=Fpe(e.recordId,e.fieldId),c=G3(bie),s=oPe({editing:n}),d=s.editorRelativeLayout,f=s.editorWrapperRef;Object(a.useImperativeHandle)(t,(function(){return{focus:function(){var e;null==(e=o.current)||e.focus()},blur:function(){var e;null==(e=o.current)||e.blur()},onEndEdit:(e=mC(X_.mark((function e(t){var n;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(n=o.current)||n.focus();case 1:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})};var e}));var p=zle(function(){var e=mC(X_.mark((function e(t){return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,null==u?void 0:u.setCell(t.map((function(e){return e})));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Object(a.useEffect)((function(){var t=null==c?void 0:c.onClickCellIcon((function(t){"cellMentionIcon"===t.iconName&&e.toggleEditing()}));return function(){null==t||t.destroy()}}),[]);return l.a.createElement("div",{className:"lakex-grid-cell-editor-keyboard-input",ref:f,style:cPe(cPe(cPe({},r),d),{},{maxWidth:"fit-content"}),onKeyDown:function(t){t.key===WY.ENTER&&!t.shiftKey&&!n&&e.toggleEditing(!0)}},l.a.createElement(vce,{focus:!1,visible:n,inputRef:o,selected:i,onSelect:function(e){var t=i.concat(e);p(t)},onUnselect:function(e){var t=i.filter((function(t){return t.uid!==e.uid}));p(t)}}))})));function dPe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fPe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dPe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dPe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pPe=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=e.editing,r=e.style,o=e.fieldType,i=e.onBlur,u=e.onChange,c=e.onSave,s=Object(a.useRef)(null),d=G3(qye),f=G3(rbe),p=G3(fye),h=gP(Object(a.useState)(),2),v=h[0],g=h[1];Object(a.useImperativeHandle)(t,(function(){return{focus:function(){var e;null==(e=s.current)||e.focus()},blur:function(){var e;null==(e=s.current)||e.blur()},onEndEdit:(e=mC(X_.mark((function e(t){return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),onStartEdit:function(e){b(e)},getValue:function(){return v}};var e}));var m=function(){var e=mC(X_.mark((function e(t){var n,r,o;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=9;break}if(null!=v){e.next=5;break}return e.next=4,null==c?void 0:c(null);case 4:return e.abrupt("return",e.sent);case 5:return r=String(v),o=null==(n=null==r?void 0:r.trim)?void 0:n.call(r),e.next=9,null==c?void 0:c(o);case 9:setTimeout((function(){g(null)}),30);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(a.useCallback)((function(t){e.toggleEditing(!1);var n=null==f?void 0:f.getCellIndexesByClientXY(t.clientX,t.clientY);n&&cw((function(){var e=null==p?void 0:p.createGridSelectionByIndex(n[0],n[1]);e&&(null==p||p.setSelection(e))}))}),[n]),b=function(t){var n;if(void 0!==t){var r=(null==(n=e.getFormattedValue)?void 0:n.call(e,t))||t;g(r),cw((function(){null==f||f.updateCellCoordsInViewPort()}))}},w=Object(a.useMemo)((function(){var e=null==d?void 0:d.rowHeightSize;return fPe(fPe({},r),{},{minHeight:e,height:e})}),[r]),k={className:"number-cell ".concat(o),ref:s,onKeyDown:function(t){var r,o=t.shiftKey,i=t.key;i===WY.ENTER&&(n&&o?(null==(r=s.current)||r.blur(),setTimeout((function(){var e;null==(e=s.current)||e.focus()}),0)):o||e.toggleEditing(!0)),i===WY.TAB&&n&&(t.preventDefault(),e.toggleEditing(!1))},value:v,onChange:function(e){g(e),u&&u(e)},autoFocus:!0,readOnly:!1,onBlur:function(){i&&i()}};return l.a.createElement(l.a.Fragment,null,l.a.createElement(ePe,{visible:n,onBeforeEndEdit:y}),l.a.createElement("div",{className:"lakex-table-number-editor",style:fPe({},w)},l.a.createElement(_.a,fPe({allowEnter:!0},k))))}))),hPe={width:0,height:1,border:"none",padding:0,boxShadow:"none",overflowX:"hidden",overflowY:"hidden"};function vPe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gPe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vPe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vPe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mPe=function(e){return function(t){var n=wye(),r=pye();return l.a.createElement(e,{selection:r,activeCell:n})}}(Object(a.memo)((function(e){var t=e.activeCell,n=e.selection,r=Dpe((null==t?void 0:t.fieldId)||""),o=r.field,u=r.fieldType,c=G3(bie),s=G3(Moe),d=G3(Kse),f=G3(HOe),p=G3(fye),h=G3(Tye),v=G3(YCe,{optional:!0}),m=gP(Object(a.useState)(!1),2),y=m[0],b=m[1],w=null==t?void 0:t.recordId,_=null==t?void 0:t.fieldId,k=Fpe(w,_),C=Object(a.useRef)(null),E=null==k?void 0:k.value,O=Object(a.useRef)(null),S=G3(Cie),x=G3(Rie),j=G3(MI),I=_ye(y),R=function(e){var t=e.editing,n=e.width,r=e.height;return Object(a.useMemo)((function(){return t?n&&r?{width:n,minHeight:r}:{}:hPe}),[t,n,r])}({editing:y,width:(null==I?void 0:I.width)||0,height:(null==I?void 0:I.height)||0}),A=Object(a.useCallback)((function(){var e,t=C.current;t&&(null==(e=t.focus)||e.call(t))}),[]),D=zle((function(e){(zC.isString(e.fieldType)||zC.isSelectLike(e.fieldType)||zC.isNumberLike(e.fieldType)||zC.isMention(e.fieldType))&&P(!0)}));Object(a.useEffect)((function(){var e=null==c?void 0:c.onDoubleClickCell((function(e){D(e)})),t=null==c?void 0:c.onClickEvent((function(e){"activeCellClick"===e.eventName&&A()}));return function(){null==e||e.destroy(),null==t||t.destroy()}}),[]),Object(a.useEffect)((function(){null==f||f.emitEditingChange({recordId:w,fieldId:_,editing:y})}),[y]);var P=Object(a.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=C.current;n&&(b(!0),null==(e=n.onStartEdit)||e.call(n,t?E:void 0),A())}),[E,C,A,y]),M=zle((function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=C.current;if(y&&r){var o=null==(e=null==r?void 0:r.getValue)?void 0:e.call(r),i="",a=n;if(o){(i=S.cellValueChecker(u,o))&&z(i);var l=S.getFieldIsStrictValidatedValue(u)&&i;a||(a=l)}null==(t=null==r?void 0:r.onEndEdit)||t.call(r,a),b(!1)}}));Object(a.useEffect)((function(){var e=null==c?void 0:c.onScroll((function(e){null==d||d.close("tooltip"),M()}));return function(){null==e||e.destroy()}}),[M]);var T=Object(a.useCallback)((function(e){if(y)M();else if(e){var t=j.getViewGroup();if(t){var n=j.getViewRecordByRecordId(w||""),r=(null==n?void 0:n.get("group_item_key"))||(null==h?void 0:h.UNGROUP_KEY),o=null==n?void 0:n.get("view_uuid"),i=t.field.get("uuid"),a=null==v?void 0:v.getGroupFolding(o,i);r&&null!=a&&a.has(r)&&(null==v||v.setGroupFolding(o,i,r,!1))}p?null==p||p.scrollToAnchorPosition(p.getSelection(),"start",(function(){P(!0)})):requestAnimationFrame((function(){P(!0)}))}else P(!0)}),[y,P,M]);Object(a.useEffect)((function(){var e=function(){return M()};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[M]),Object(a.useEffect)((function(){var e=setTimeout((function(){1===(null==n?void 0:n.rangeCount)&&(b(!1),null!=x&&x.gridCellEditorAutoFocus&&A())}),50);return function(){clearTimeout(e)}}),[n,null==x?void 0:x.gridCellEditorAutoFocus]);var F=Object(a.useCallback)((function(e){return u===bC.LINK?(null==e?void 0:e.name)||"":u===bC.DATE?i()(e||"").format("YYYY-MM-DD"):""}),[u]),N=function(){var e=mC(X_.mark((function e(t){var n;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.keyCode||t.which,!y){e.next=11;break}if(r6(t),t.key==WY.ESC&&M(!1),83!==n||!(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)){e.next=9;break}return t.preventDefault(),e.next=8,M(!1);case 8:g.a.success(uw("文档已保存"));case 9:e.next=12;break;case 11:GY(t)?P():null==s||s.fireEventByEditable(t.nativeEvent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=Object(a.useCallback)((function(e){y||(e.persist(),null==s||s.fireEventByEditable(e,"copy"))}),[y]),L=Object(a.useCallback)((function(e){y||(e.persist(),null==s||s.fireEventByEditable(e,"paste"))}),[y]),B=Object(a.useCallback)((function(e){y||(e.persist(),null==s||s.fireEventByEditable(e,"cut"))}),[y]),$=Object(a.useCallback)(function(){var e=mC(X_.mark((function e(t){return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:if(!ou(t,E)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,null==k?void 0:k.setCell(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y,E]),z=zle((function(e){I&&(null==d||d.showTooltip(e,{origin:I,placement:"top"}))}));return t&&o&&u&&_&&w?l.a.createElement("div",{className:"lakex-table-cell-editor-container lakex-grid-cell-editor-keyboard-input",style:{position:"absolute",left:(null==I?void 0:I.left)||0,top:(null==I?void 0:I.top)||0},onKeyDown:N,onMouseDown:r6,onMouseUp:r6,onMouseMove:r6,onCopy:V,onCut:B,onPaste:L},function(){if(!(t&&o&&u&&_&&w))return null;var e,n={onSave:$,fieldType:u,editing:y,style:R,inputObserverRef:O};switch(u){case bC.TITLE:case bC.TEXT:return l.a.createElement(rPe,gPe({isMultiText:u===bC.TEXT,ref:C,toggleEditing:T},n));case bC.PHONE:case bC.EMAIL:return l.a.createElement(rPe,gPe({isMultiText:!1,ref:C,toggleEditing:T},n));case bC.PROGRESS:case bC.NUMBER:return l.a.createElement(pPe,gPe({ref:C,toggleEditing:T},n));case bC.LINK:return l.a.createElement(rPe,gPe(gPe({isMultiText:!1,getFormattedValue:F,ref:C},n),{},{onSave:(e=mC(X_.mark((function e(t){var n,r;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={src:(null==(n=null==k?void 0:k.value)?void 0:n.src)||"http://".concat(t),name:t},e.next=3,$(r);case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),toggleEditing:T}));case bC.SELECT:case bC.MULTI_SELECT:return l.a.createElement(lPe,gPe({ref:C,fieldId:_,recordId:w,toggleEditing:T},n));case bC.MENTION:return l.a.createElement(sPe,gPe({ref:C,fieldId:_,recordId:w,toggleEditing:T,cellValue:E},n));case bC.DATE:return l.a.createElement(rPe,gPe(gPe({isMultiText:!1,getFormattedValue:F,ref:C},n),{},{onSave:function(){var e=mC(X_.mark((function e(t){var n;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Dw(t||""),e.next=3,$(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),toggleEditing:T}));default:return null}}()):null})));function yPe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bPe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yPe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yPe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wPe=$b($b({},bC.IMAGE,ace),bC.FILE,ice),_Pe=function(e){var t=e.initialState||{},n=t.fieldType,r=t.recordId,o=t.fieldId,i=G3(Kse),u=G3(uA),c=G3(zS).fieldUriModel,s=Fpe(r,o),d=null==s?void 0:s.value,f=Object(a.useMemo)((function(){return n===bC.IMAGE?uw("图片列表"):n===bC.FILE?uw("附件列表"):null}),[n]),p={style:{width:520},defaultValue:d,onChange:function(e){null==u||u.execCommand("setCell",bPe(bPe({},s),{},{value:e}))},onOrderChange:function(e){var t,i,a=e.targetUid,l=e.sourceUid,s=null==(t=c.findOne({uid:a}))?void 0:t.get("uuid"),d=null==(i=c.findOne({uid:l}))?void 0:i.get("uuid");null==u||u.execCommand("updateValueOrder",{fieldId:o,fieldType:n,recordId:r,targetValueId:s,sourceValueId:d})}};if(![bC.IMAGE,bC.FILE].includes(n))return null;var h=wPe[n];return l.a.createElement("div",{className:"lakex-table-cell-file-uploader"},l.a.createElement("div",{className:"file-uploader-header"},l.a.createElement("h4",{className:"file-uploader-header-title"},f),l.a.createElement(g6,{type:"Close",className:"file-uploader-close",onClick:function(e){null==i||i.close("fileOrImageManageModal")}})),l.a.createElement(h,bPe({},p)))},kPe=Object(a.memo)(Object(a.forwardRef)((function(e,t){var n=wye(),r=Fpe(null==n?void 0:n.recordId,null==n?void 0:n.fieldId),o=G3(Kse),i=Object(a.useRef)(null);Object(a.useImperativeHandle)(t,(function(){return{onCloseByClickAwayOrScroll:function(){var e,t=null==(e=i.current)?void 0:e.getValues();t&&(null==r||r.setCell(t))}}}));var u=function(){null==o||o.close("cellLinkDropDownEditor")};return(null==r?void 0:r.fieldType)!==bC.LINK?null:l.a.createElement(sse,{ref:i,defaultValue:r.value,onSubmit:function(e){null==r||r.setCell(e),setTimeout((function(){u()}),100)},onBlur:u})}))),CPe=function(e){var t,n=wye(),r=_ye(!0),o=Fpe(null==n?void 0:n.recordId,null==n?void 0:n.fieldId),i=Dpe(null==n?void 0:n.fieldId),u=G3(Kse),c=gP(Object(a.useState)(null==n?void 0:n.value),2),s=c[0],d=c[1],f=function(){var e=mC(X_.mark((function e(t){return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(t),e.next=3,null==o?void 0:o.setCell(t);case 3:null==u||u.close("cellDateDropDownEditor");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r?l.a.createElement(tue,{className:"cell-date-dropdown-editor",focus:!0,open:!0,format:(null==(t=i.fieldConfig)?void 0:t.date_format)||"YYYY-MM-DD",defaultValue:s||"",onChange:f,rectStyle:{width:r.width-1,height:r.height}}):null};function EPe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OPe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EPe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EPe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var SPe=Object.defineProperty,xPe=Object.getOwnPropertyDescriptor,jPe=function(e,t,n,r){for(var o,i=r>1?void 0:r?xPe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&SPe(t,n,i),i},IPe=function(){return Wb((function e(){Ub(this,e),this._gridCellEditorId="viewerGridCellEditor",this._toDestroyCollection=new H_}),[{key:"isGridView",get:function(){return this._readService.getActiveView().get("type")===BC.GRID}},{key:"isReadonly",get:function(){return this._abilityService.isReadonly(EA.TABLE)}},{key:"_hasSelection",value:function(){var e;return null==(e=this._selectionService)?void 0:e.hasSelection()}},{key:"init",value:function(){var e,t=this;if(!this.isReadonly){var n=null==(e=this._selectionService)?void 0:e.onChange((function(){t._hasSelection()&&t.isGridView?t._modalService.isModalVisible(t._gridCellEditorId)||t._modalService.open(t._gridCellEditorId,{position:{left:0,top:0}}):t._modalService.close(t._gridCellEditorId)}));n&&this._toDestroyCollection.push(n),this._toDestroyCollection.push(this._renderService.onClickCellIcon((function(e){var n,r;if("cellLinkIcon"===e.iconName)t._handleOpenCellLinkDropdownEditor();else if("cellImageIcon"===e.iconName){var o=null==(n=t._selectionService)?void 0:n.getFieldValue();t._handleOpenCellFileEditor(bC.IMAGE,null==o?void 0:o.recordId,null==o?void 0:o.fieldId)}else if("cellFileIcon"===e.iconName){var i=null==(r=t._selectionService)?void 0:r.getFieldValue();t._handleOpenCellFileEditor(bC.FILE,null==i?void 0:i.recordId,null==i?void 0:i.fieldId)}}))),this._toDestroyCollection.push(this._renderService.onDoubleClickCell((function(e){var n;if(e.fieldType===bC.LINK)t._handleOpenCellLinkDropdownEditor();else if(e.fieldType===bC.DATE)t._handleOpenCellDateDropdownEditor();else if(e.fieldType===bC.IMAGE||e.fieldType===bC.FILE){var r=null==(n=t._selectionService)?void 0:n.getFieldValue();t._handleOpenCellFileEditor(e.fieldType,null==r?void 0:r.recordId,null==r?void 0:r.fieldId)}})))}}},{key:"registerModal",value:function(e){e.registerItem({id:this._gridCellEditorId,hasMask:!1,scrollStrategy:"close",zIndex:"modalRenderBase",disableClickAwayClose:!0,disableEscClose:!0,RenderComponent:mPe}),e.registerItem({id:"fileOrImageManageModal",hasMask:!0,hasAnimation:!0,scrollStrategy:"block",zIndex:"modalFromRender",position:{left:"50%",top:"50%"},RenderComponent:_Pe}),e.registerItem({id:"cellLinkDropDownEditor",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:kPe}),e.registerItem({id:"cellDateDropDownEditor",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:CPe})}},{key:"registerHotkey",value:function(e){var t=this;e.registerItem({id:"enterToCellEditor",hotkey:"enter",name:"enter进入单元格编辑",enableOnInput:!1,isEnable:function(){return!t.isReadonly&&t._hasSelection()&&t.isGridView},onHotKey:function(e){var n,r;e.preventDefault();var o,i=null==(n=t._selectionService)?void 0:n.getFieldValue(),a=(null==i?void 0:i.fieldId)||"",l=(null==i?void 0:i.recordId)||"",u=t._readService.getField(a).get("type");if(u===bC.CHECKBOX){var c=null==(r=t._readService.getCell(a,l))?void 0:r.value,s=OPe(OPe({},i),{},{value:!c});null==(o=t._commandService)||o.execCommand("setCell",s)}[bC.IMAGE,bC.FILE].includes(u)&&t._handleOpenCellFileEditor(u,null==i?void 0:i.recordId,null==i?void 0:i.fieldId),u===bC.LINK&&t._handleOpenCellLinkDropdownEditor()}}),e.registerItem({id:"deleteCell",hotkey:"del, backspace",name:"清空单元格",enableOnInput:!1,isEnable:function(){return t._hasSelection()&&t.isGridView&&!t.isReadonly},onHotKey:function(e){var n,r;e.preventDefault();var o=((null==(n=t._selectionService)?void 0:n.getFieldValues())||[]).map((function(e){return OPe(OPe({},e),{},{value:""})}));null==(r=t._commandService)||r.execCommand("removeCells",{cells:o})}}),e.registerItem({id:"openCellLinkEditor",hotkey:"⌘+K",name:"打开单元格链接编辑器",enableOnInput:!0,isEnable:function(){return t._hasSelection()&&t.isGridView&&!t.isReadonly},onHotKey:function(){var e=mC(X_.mark((function e(n){var r,o,i;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),o=null==(r=t._selectionService)?void 0:r.getFieldValue(),i=(null==o?void 0:o.fieldId)||"",t._readService.getField(i).get("type")===bC.LINK&&t._handleOpenCellLinkDropdownEditor();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}},{key:"_handleOpenCellLinkDropdownEditor",value:function(){var e,t=null==(e=this._selectionService)?void 0:e.getSelectFocusTarget();this._modalService.open("cellLinkDropDownEditor",{position:{origin:t,placement:"bottom"}})}},{key:"_handleOpenCellFileEditor",value:function(e,t,n){this._modalService.open("fileOrImageManageModal",{initialState:{fieldType:e,recordId:t,fieldId:n}})}},{key:"_handleOpenCellDateDropdownEditor",value:function(){var e,t=null==(e=this._selectionService)?void 0:e.getSelectAnchorTarget();this._modalService.open("cellDateDropDownEditor",{position:{origin:t,placement:"cover"}})}},{key:"destroy",value:function(){this._toDestroyCollection.destroy()}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();IPe.pluginName="workbench-viewer-grid-cell-editor",jPe([Xs(fye),Ds()],IPe.prototype,"_selectionService",2),jPe([Xs(MI)],IPe.prototype,"_readService",2),jPe([Xs(VA)],IPe.prototype,"_abilityService",2),jPe([Xs(Kse)],IPe.prototype,"_modalService",2),jPe([Xs(bie)],IPe.prototype,"_renderService",2),jPe([Xs(uA)],IPe.prototype,"_commandService",2),IPe=jPe([Ys({contrib:[L3,Yse,Zme]})],IPe);var RPe=function(e){var t=e.className,n=e.defaultValue,r=void 0===n?"":n,o=e.onFieldSelect,i=void 0===o?function(){}:o,a=function(e){var t=G3(MI),n=t.getActiveView();return{groupFields:__(t.getViewFields(n.get("uuid"),!1),(function(t){var n,r;return!(!e.defaultValue||(null==(n=t.get("field"))?void 0:n.get("uuid"))!==e.defaultValue)||zC.isGroup(null==(r=t.get("field"))?void 0:r.get("type"))}))}}({defaultValue:r}),u=a.groupFields,c=G3(Cie),s=G3(xk),d=(null==s?void 0:s.getValue("modal.customModalContainer"))||document.body;return l.a.createElement(x.a,{className:"lakex-table-group-field-select ".concat(t),defaultValue:r,dropdownClassName:"lakex-table-group-field-select-dropdown",suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:14}),onChange:function(e){var t,n=w_(u,(function(t){var n;return(null==(n=t.get("field"))?void 0:n.get("uuid"))===e}));i(null==(t=null==n?void 0:n.get("field"))?void 0:t.toJSON())},bordered:!1,getPopupContainer:function(){return d}},E_(u,(function(e){var t,n,r,o,i=null==c?void 0:c.getFieldIcon(null==(t=e.get("field"))?void 0:t.get("type"));return l.a.createElement(x.a.Option,{value:null==(n=e.get("field"))?void 0:n.get("uuid"),key:null==(r=e.get("field"))?void 0:r.get("uuid")},i&&l.a.createElement(i,null),l.a.createElement("div",{className:"lakex-table-group-field-select-name"},null==(o=e.get("field"))?void 0:o.get("name")))})))},APe="lakex-table-group-modal-empty",DPe=function(e){var t=e.onAddOption,n=void 0===t?function(){}:t;return l.a.createElement("div",{className:APe},l.a.createElement("div",{className:"".concat(APe,"-empty-desc")},uw("还未设置任何分组")),l.a.createElement(RPe,{defaultValue:uw("选择一列进行分组"),onFieldSelect:n}))},PPe=function(e){switch(e){case"select":case"multiSelect":return{asc:uw("选项顺序"),desc:uw("选项倒序")};case"number":case"phone":return{asc:uw("从小到大"),desc:uw("从大到小")};default:return{asc:uw("升序"),desc:uw("降序"),style:{padding:"0 16px"}}}},MPe=function(e){var t=e.group,n=e.field,r=e.onUpdateType,o=void 0===r?function(){}:r;if(!n)return null;if(zC.isCheckbox(n.type))return l.a.createElement(v.a.Group,{defaultValue:t.type,onChange:function(e){o(e.target.value)}},l.a.createElement(v.a.Button,{value:"asc"},l.a.createElement("span",{className:"lakex-table-group-field-order-radio"},l.a.createElement(p.a,{checked:!1},l.a.createElement(g6,{type:"RightArrow"})),l.a.createElement(p.a,{checked:!0}))),l.a.createElement(v.a.Button,{value:"desc"},l.a.createElement("span",{className:"lakex-table-group-field-order-radio"},l.a.createElement(p.a,{checked:!0},l.a.createElement(g6,{type:"RightArrow"})),l.a.createElement(p.a,{checked:!1}))));var i=PPe(n.type);return l.a.createElement(v.a.Group,{defaultValue:t.type,onChange:function(e){o(e.target.value)}},l.a.createElement(v.a.Button,{value:"asc"},l.a.createElement("span",{style:i.style},i.asc)),l.a.createElement(v.a.Button,{value:"desc"},l.a.createElement("span",{style:i.style},i.desc)))},TPe=function(e){var t=e.group,n=e.field,r=e.onRemove,o=void 0===r?function(){}:r,i=e.onChange,u=void 0===i?function(){}:i,c=e.onUpdateType,s=void 0===c?function(){}:c,d=function(e){var t=e.field,n=e.onChange,r=gP(Object(a.useState)(t),2),o=r[0],i=r[1];return{state:{activeField:o},onFieldSelect:function(e){n(e),i(e)}}}({field:n,onChange:u}),f=d.state,p=d.onFieldSelect;return l.a.createElement("div",{className:"lakex-table-group-item"},l.a.createElement(g6,{type:"Close",onClick:function(){o(t)}}),l.a.createElement(RPe,{defaultValue:null==n?void 0:n.get("uuid"),onFieldSelect:p,className:"lakex-table-group-item-select"}),l.a.createElement(MPe,{group:t,field:f.activeField,onUpdateType:s}))},FPe=function(){var e=G3(Kse),t=G3(uA),n=G3(MI),r=n.getViewGroup(),o=n.getViewConfig(),i=n.getAllFields(),l=gP(Object(a.useState)(null==r?void 0:r.group.toJSON()),2),u=l[0],c=l[1],s=function(e){return e?r?null==t?void 0:t.execCommand("updateGridGroup",{viewId:null==o?void 0:o.get("view_uuid"),group:e}):null==t?void 0:t.execCommand("createGridGroup",{viewId:null==o?void 0:o.get("view_uuid"),group:e}):null==t?void 0:t.execCommand("removeGridGroup",{viewId:null==o?void 0:o.get("view_uuid")})};return{state:{group:u},fields:i,onAddOption:function(e){var t,r;e||(e=null==(r=null==(t=null==n?void 0:n.getViewFields())?void 0:t.get(0).get("field"))?void 0:r.toJSON());var o={field_uuid:null==e?void 0:e.uuid,type:MC.ASC};s(o),c(o)},onRemoveOption:function(){s(null),c(null)},onUpdateOption:function(e){var t={field_uuid:null==e?void 0:e.uuid,type:(null==u?void 0:u.type)||MC.ASC};s(t),c(t)},onUpdateType:function(e){u&&(u.type=e),s(u),c(u)},onClose:function(){e.close("grid-group")}}},NPe=function(){var e,t=FPe(),n=t.state,r=t.fields,o=t.onAddOption,i=t.onUpdateOption,a=t.onRemoveOption,u=t.onUpdateType;if(n.group){var c=w_(r,(function(e){var t;return e.get("uuid")===(null==(t=n.group)?void 0:t.field_uuid)}));e=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"lakex-table-group-setting"},l.a.createElement("h2",{className:"lakex-table-group-setting-title"},uw("分组设置"))),l.a.createElement(TPe,{field:c,group:n.group,onRemove:a,onChange:i,onUpdateType:u}))}else e=l.a.createElement(DPe,{onAddOption:o});return l.a.createElement("div",{className:"lakex-table-group-modal"},e)},VPe=function(e){var t=e.onAddOption,n=void 0===t?function(){}:t;return l.a.createElement("div",{className:"lakex-table-h5-empty"},l.a.createElement(AIe,{desc:uw("你还未进行任何分组"),className:"no-data"}),l.a.createElement(b.a,{type:"primary",onClick:function(){return n()},className:"no-data-btn"},l.a.createElement(g6,{type:"Add"}),uw("添加分组条件")))},LPe=function(e){var t=FPe(),n=t.state,r=t.fields,o=t.onClose,i=t.onAddOption,u=t.onUpdateOption,c=t.onRemoveOption,s=t.onUpdateType,d=G3(R_),f=G3(Kse),p=d.getValue("modal.mode"),h=G3(MI),v=G3(Cie),g=Object(a.useMemo)((function(){return null==h?void 0:h.getViewFields()}),[]);return l.a.createElement(yIe,{title:uw("分组"),onClose:o,showCloseIcon:!0},function(){if(!n.group)return l.a.createElement(VPe,{onAddOption:i});var e=w_(r,(function(e){var t;return e.get("uuid")===(null==(t=n.group)?void 0:t.field_uuid)})),t=PPe(null==e?void 0:e.get("type")),o=null==v?void 0:v.getFieldIcon(null==e?void 0:e.get("type"));return l.a.createElement("div",{className:"lakex-table-h5-group"},l.a.createElement("div",{className:"lakex-table-h5-group-tip"},uw("按以下选项进行分组")),l.a.createElement(DIe,{prefixIcon:o,className:"lakex-table-h5-filter-col",text:null==e?void 0:e.get("name"),onClick:function(){null==f||f.open("group-select",{initialState:{group:n.group}})}}),l.a.createElement(qde,{id:"group-select",mode:p,hasMask:p===Gse.DRAWER,hasAnimation:p===Gse.DRAWER,position:p===Gse.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:function(e){var t,n=e.initialState;return l.a.createElement(yIe,{title:uw("请选择"),onClose:function(){null==f||f.close("group-select")},showCloseIcon:!0},l.a.createElement(xIe,{defaultValue:null==(t=n.group)?void 0:t.field_uuid,list:E_(g,(function(e){var t,n=null==v?void 0:v.getFieldIcon(null==(t=e.get("field"))?void 0:t.get("type"));return{key:e.get("field").get("uuid"),title:e.get("field").get("name"),icon:n&&l.a.createElement(n,null)}})),onCheck:function(e){null==f||f.close("group-select"),u({uuid:e.key})}}))}}),l.a.createElement(OIe,{className:"lakex-table-h5-group-display-radio",options:[{label:t.asc,value:"asc"},{label:t.desc,value:"desc"}],onChange:function(e){return s(e.value)},defaultValue:n.group.type}),l.a.createElement(b.a,{className:"lakex-table-h5-group-del",onClick:function(){return c()}},l.a.createElement(g6,{type:"Delete",className:"del-icon"}),uw("删除该条件")))}())},BPe=Object.defineProperty,$Pe=Object.getOwnPropertyDescriptor,zPe=function(e,t,n,r){for(var o,i=r>1?void 0:r?$Pe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&BPe(t,n,i),i},UPe=function(){return Wb((function e(){var t=this;Ub(this,e),this._getActive=function(){var e=t._readService.getActiveView();return!!e&&!!t._readService.getViewGroup(e.get("uuid"))}}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"grid-group",icon:"ViewerGroup",tooltip:uw("分组"),visible:function(){var e;return(null==(e=t._readService.getActiveView())?void 0:e.get("type"))===BC.GRID},active:this._getActive,onClick:function(e){var n=e.target;t._modalService.open("grid-group",{position:{origin:n,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"grid-group",mode:t,hasMask:t===Gse.DRAWER,hasAnimation:t===Gse.DRAWER,position:t===Gse.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===tie.MOBILE?LPe:NPe})}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();UPe.pluginName="workbench-viewer-grid-group",zPe([Xs(Kse)],UPe.prototype,"_modalService",2),zPe([Xs(MI)],UPe.prototype,"_readService",2),zPe([Xs(R_)],UPe.prototype,"_configuration",2),UPe=zPe([Ys({contrib:[L3,pse,Yse]})],UPe);var HPe=function(){var e=G3(uA),t=G3(Kse),n=G3(MI),r=n.getView();return{viewConfig:n.getViewConfig(),onConfirm:function(n){null==e||e.execCommand("updateGridRecordHeight",{viewId:r.get("uuid"),recordHeight:n.key}),t.close("grid-record-height")},onModalClose:function(){t.close("grid-record-height")}}},qPe=[{type:"low",name:uw("低")},{type:"middle",name:uw("中")},{type:"high",name:uw("高")}],WPe="lakex-table-row-height",GPe=function(){var e=HPe(),t=e.viewConfig,n=e.onConfirm;return t?l.a.createElement("div",{className:WPe},l.a.createElement(d.a,{defaultSelectedKeys:[t.get("record_height")],mode:"vertical",onClick:n},qPe.map((function(e){return l.a.createElement(d.a.Item,{key:e.type,icon:l.a.createElement("span",null,e.type===t.get("record_height")&&l.a.createElement("span",{className:"".concat(WPe,"-checked")},l.a.createElement(g6,{type:"Check"})),l.a.createElement(g6,{type:"RowHeight".concat(ta(e.type))}))},uw(e.name))})))):null},KPe=function(e){var t=HPe(),n=t.viewConfig,r=t.onConfirm,o=t.onModalClose;return n?l.a.createElement(yIe,{title:uw("行高"),onClose:o,showCloseIcon:!0},l.a.createElement(xIe,{defaultValue:n.get("record_height"),list:qPe.map((function(e){return{key:e.type,title:e.name}})),onCheck:function(e){return r(e)}})):null},YPe=Object.defineProperty,XPe=Object.getOwnPropertyDescriptor,JPe=function(e,t,n,r){for(var o,i=r>1?void 0:r?XPe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&YPe(t,n,i),i},ZPe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"grid-record-height",icon:"RowHeightLow",tooltip:uw("行高"),visible:function(){var e=t._readService.getActiveView();return(null==e?void 0:e.get("type"))===BC.GRID},onClick:function(e){var n=e.target;t._modalService.open("grid-record-height",{position:{origin:n,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"grid-record-height",mode:t,hasMask:t===Gse.DRAWER,hasAnimation:t===Gse.DRAWER,position:t===Gse.DRAWER?{placement:"bottom"}:null,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===tie.MOBILE?KPe:GPe})}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();ZPe.pluginName="workbench-viewer-grid-record-height",JPe([Xs(Kse)],ZPe.prototype,"_modalService",2),JPe([Xs(MI)],ZPe.prototype,"_readService",2),JPe([Xs(R_)],ZPe.prototype,"_configuration",2),ZPe=JPe([Ys({contrib:[L3,pse,Yse]})],ZPe);var QPe=function(e){var t=e.initialState,n=t.groupField,r=t.groupOption,o=function(e){var t=e.groupField,n=e.groupOption,r=e.$title,o=G3(uA),i=G3(Kse),u=G3(Vme),c=G3(YSe);return{settings:Object(a.useMemo)((function(){return[{key:"edit",name:zC.isMention(null==t?void 0:t.type)?uw("修改分组人员"):uw("修改分组"),icon:l.a.createElement(g6,{type:"Edit"}),onClick:function(){null==i||i.close("viewKanbanGroupSetting"),null==u||u.showEditGroup(r,t,n)}},{key:"remove",name:uw("删除分组"),icon:l.a.createElement(g6,{type:"Delete"}),onClick:function(){null==i||i.close("viewKanbanGroupSetting");var e=null==c?void 0:c.getGroupFieldOption(t,n);e&&(null==i||i.close("viewKanbanGroupSetting"),null==o||o.execCommand("removeFieldOption",{optionId:e.get("uuid")}))}}]}),[null==t?void 0:t.type])}}(t),i=o.settings;return n&&r?l.a.createElement("div",{className:"lakex-table-kanban-group-setting"},l.a.createElement(d.a,null,i.map((function(e){return l.a.createElement(d.a.Item,{key:e.key,icon:e.icon,onClick:function(){return e.onClick()}},e.name)})))):null},eMe=Object.defineProperty,tMe=Object.getOwnPropertyDescriptor,nMe=function(e,t,n,r){for(var o,i=r>1?void 0:r?tMe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&eMe(t,n,i),i},rMe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){var e=this;this._kanbanGroupActionService.onGroupSettingClick((function(t){var n,r=t.target,o=t.groupField,i=t.groupOption,a=t.$title;null==(n=e._modalService)||n.open("viewKanbanGroupSetting",{position:{origin:r,placement:"bottom"},initialState:{groupField:o,groupOption:i,$title:a}})}))}},{key:"registerModal",value:function(e){e.registerItem({id:"viewKanbanGroupSetting",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:QPe})}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();rMe.pluginName="workbench-viewer-kanban-group",nMe([Xs(Uxe)],rMe.prototype,"_kanbanGroupActionService",2),nMe([Xs(Kse)],rMe.prototype,"_modalService",2),rMe=nMe([Ys({contrib:[L3,Yse]})],rMe);var oMe=function(){var e=G3(Cie),t=G3(uA),n=G3(Kse),r=G3(MI),o=G3(YSe),i=null==r?void 0:r.getActiveView(),l=gP(Object(a.useState)(null==o?void 0:o.getGroup()),2),u=l[0],c=l[1];return{state:{group:u},fields:null==o?void 0:o.getSupportGroupFields(),onChange:function(e){c(e);var r={field_uuid:e.uuid};null==t||t.execCommand("updateKanbanGroup",{viewId:null==i?void 0:i.get("uuid"),group:r}),n.close("kanban-group-setting")},onModalClose:function(){n.close("kanban-group-setting")},fieldService:e}},iMe=function(){var e=oMe(),t=e.state,n=e.fields,r=e.onChange,o=e.fieldService;return t.group?l.a.createElement("div",{className:"lakex-table-menu-container lakex-table-menu-kanban-group lakex-table-menu-kanban-group-modal"},l.a.createElement("div",{className:"lakex-table-menu-kanban-group-options"},E_(n,(function(e){var n,i=null==o?void 0:o.getFieldIcon(e.get("type"));return l.a.createElement("div",{key:e.get("uuid"),className:"lakex-table-menu-kanban-group-option",onClick:function(){r(e)}},l.a.createElement("span",{className:"lakex-table-menu-kanban-group-option-title"},i?l.a.createElement(i,{className:"lakex-table-icon-col-type"}):null,l.a.createElement("span",{className:"lakex-table-menu-kanban-group-field-name"},e.get("name"))),e.get("uuid")===(null==(n=t.group)?void 0:n.field.get("uuid"))?l.a.createElement(g6,{type:"Check"}):l.a.createElement("span",{className:"lakex-table-menu-kanban-group-empty"}))})))):null},aMe=function(e){var t=e.field,n=G3(Cie),r=null==n?void 0:n.getFieldIcon(t.get("type"));return l.a.createElement("span",{className:"lakex-table-kanban-group-setting-title"},uw("按"),r?l.a.createElement(r,{className:"lakex-table-icon-col-type",size:14}):null,l.a.createElement("span",{className:"lakex-table-kanban-group-field-name"},t.get("name")),uw("分组"))},lMe=function(){var e,t=oMe(),n=t.state,r=t.fields,o=t.onChange,i=t.onModalClose,a=t.fieldService;if(!n.group)return null;var u=E_(r,(function(e){var t=null==a?void 0:a.getFieldIcon(e.get("type"));return{key:e.get("uuid"),icon:t?l.a.createElement(t,{className:"lakex-table-icon-col-type"}):null,title:e.get("name")}}));return l.a.createElement(yIe,{title:uw("选择分组字段"),onClose:i,showCloseIcon:!0},l.a.createElement(xIe,{defaultValue:null==(e=n.group)?void 0:e.field.get("uuid"),list:u,onCheck:function(e){return o(w_(r,(function(t){return t.get("uuid")===e.key})))}}))},uMe=Object.defineProperty,cMe=Object.getOwnPropertyDescriptor,sMe=function(e,t,n,r){for(var o,i=r>1?void 0:r?cMe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&uMe(t,n,i),i},dMe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"kanban-group-setting",tooltip:function(){var e=t._readService.getActiveView();if(!e)return null;var n=t._readService.getViewGroup(null==e?void 0:e.get("uuid"));return null!=n&&n.field?React.createElement(aMe,{field:null==n?void 0:n.field}):null},visible:function(){var e=t._readService.getActiveView();if(!e)return!1;if(!(e.get("type")===BC.KANBAN))return!1;var n=t._readService.getViewGroup(e.get("uuid"));return!(null==n||!n.field)},showTitle:!0,showTooltip:!1,onClick:function(e){t._modalService.open("kanban-group-setting",{position:{origin:e.target,placement:"bottom"}})}})}},{key:"registerModal",value:function(e){var t=this._configuration.getValue("modal.mode"),n=this._configuration.getValue("render.mode");e.registerItem({id:"kanban-group-setting",mode:t,hasMask:t===Gse.DRAWER,hasAnimation:t===Gse.DRAWER,position:t===Gse.DRAWER&&{placement:"bottom"},scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:n===tie.MOBILE?lMe:iMe})}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();dMe.pluginName="workbench-viewer-kanban-group-setting",sMe([Xs(Kse)],dMe.prototype,"_modalService",2),sMe([Xs(MI)],dMe.prototype,"_readService",2),sMe([Xs(R_)],dMe.prototype,"_configuration",2),dMe=sMe([Ys({contrib:[L3,pse,Yse]})],dMe);var fMe=function(e){e.initialState;var t=G3(Cie),n=function(){var e=G3(MI),t=G3(uA),n=e.getViewConfig(),r=gP(Object(a.useState)(e.getAllFields()),2),o=r[0],i=r[1],l=Object(a.useMemo)((function(){var e=__(o,(function(e){return zC.isDateLike(e.get("type"))}));return 0===e.length?[{name:uw("新增一个日期列"),value:"",type:bC.DATE}]:E_(e,(function(e){return{name:e.get("name"),value:e.get("uuid"),type:e.get("type")}}))}),[o]),u=Object(a.useMemo)((function(){return E_(__(o,(function(e){return zC.isSelect(e.get("type"))})),(function(e){return{name:e.get("name"),value:e.get("uuid"),type:e.get("type")}}))}),[o]),c=[{name:uw("自定义颜色"),icon:"EditorCellBgColor",value:PC.CUSTOM},{name:uw("跟随字段颜色"),icon:"FieldSelect",value:PC.FOLLOW_FIELD}],s=Object(a.useMemo)((function(){var e;return(null==(e=w_(o,(function(e){return e.get("uuid")===(null==n?void 0:n.get("start_date_field_uuid"))})))?void 0:e.get("uuid"))||null}),[o,n]),d=Object(a.useMemo)((function(){var e;return(null==(e=w_(o,(function(e){return e.get("uuid")===(null==n?void 0:n.get("end_date_field_uuid"))})))?void 0:e.get("uuid"))||null}),[o,n]),f=Object(a.useMemo)((function(){var e;return(null==(e=w_(o,(function(e){return e.get("uuid")===(null==n?void 0:n.get("date_title_field_uuid"))})))?void 0:e.get("uuid"))||null}),[o,n]),p=gP(Object(a.useState)((null==n?void 0:n.get("show_lunar"))||!1),2),h=p[0],v=p[1],g=gP(Object(a.useState)((null==n?void 0:n.get("date_color_type"))||PC.CUSTOM),2),m=g[0],y=g[1],b=Object(a.useMemo)((function(){var e;return m===PC.FOLLOW_FIELD?(null==(e=w_(o,(function(e){return e.get("uuid")===(null==n?void 0:n.get("date_color"))})))?void 0:e.get("uuid"))||"":(null==n?void 0:n.get("date_color"))||vpe[0][0]}),[o,n,m]);return{dateFieldOptions:l,selectFieldOptions:u,colorTypeOptions:c,fields:o,startDateFieldId:s,endDateFieldId:d,titleFieldId:f,showLunar:h,colorType:m,colorId:b,onStartDateChange:function(n){t.execCommand("upsertStartOrEndDate",{fieldId:n,type:"start"}),i(e.getAllFields())},onEndDateChange:function(n){t.execCommand("upsertStartOrEndDate",{fieldId:n,type:"end"}),i(e.getAllFields())},onTitleFieldChange:function(n){t.execCommand("updateScheduleTitle",{titleId:n}),i(e.getAllFields())},onShowLunarChange:function(e){t.execCommand("showLunar",{show:e}),v(e)},onColorTypeChange:function(e){t.execCommand("updateScheduleColorType",{type:e}),y(e)},onColorChange:function(n){t.execCommand("updateScheduleColor",{type:PC.CUSTOM,colorId:n}),i(e.getAllFields())},onColorFieldChange:function(n){t.execCommand("updateScheduleColor",{type:PC.FOLLOW_FIELD,colorId:n}),i(e.getAllFields())}}}(),r=n.dateFieldOptions,o=n.selectFieldOptions,i=n.colorTypeOptions,u=n.fields,c=n.startDateFieldId,s=n.endDateFieldId,d=n.titleFieldId,f=n.showLunar,p=n.colorType,h=n.colorId,v=n.onStartDateChange,g=n.onEndDateChange,m=n.onTitleFieldChange,y=n.onShowLunarChange,b=n.onColorTypeChange,w=n.onColorChange,_=n.onColorFieldChange,k=G3(xk),C=(null==k?void 0:k.getValue("modal.customModalContainer"))||document.body;return l.a.createElement("div",{className:"lakex-table-view-calendar-setting-modal"},l.a.createElement("div",{className:"title"},uw("日历配置")),l.a.createElement("div",{className:"form-item"},l.a.createElement("div",{className:"label"},l.a.createElement(g6,{className:"icon",type:"Calendar"}),l.a.createElement("span",null,uw("标题展示"))),l.a.createElement(x.a,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:14}),value:d,placeholder:uw("请选择标题字段"),onChange:m,getPopupContainer:function(){return C}},E_(u,(function(e){var n=t.getFieldIcon(e.get("type"));return l.a.createElement(x.a.Option,{className:"select-option",value:e.get("uuid"),key:e.get("uuid")},n&&l.a.createElement(n,{className:"icon"}),l.a.createElement("span",null,e.get("name")))})))),l.a.createElement("div",{className:"form-item"},l.a.createElement("div",{className:"label"},l.a.createElement(g6,{className:"icon",type:"Brush"}),l.a.createElement("span",null,uw("颜色显示"))),l.a.createElement(x.a,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:14}),value:p,onChange:b,getPopupContainer:function(){return C}},i.map((function(e){return l.a.createElement(x.a.Option,{className:"select-option",value:e.value,key:e.value},l.a.createElement(g6,{className:"icon",type:e.icon}),l.a.createElement("span",null,e.name))})))),l.a.createElement("div",{className:"form-item"},p===PC.CUSTOM?l.a.createElement(K3,{activeColor:h,colorSource:vpe,onSelect:w}):l.a.createElement(x.a,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:14}),value:h,placeholder:uw("请选择单选字段"),onChange:_,getPopupContainer:function(){return C}},o.map((function(e){var n=t.getFieldIcon(e.type);return l.a.createElement(x.a.Option,{className:"select-option",value:e.value,key:e.value},n&&l.a.createElement(n,{className:"icon"}),l.a.createElement("span",null,e.name))})))),l.a.createElement("div",{className:"form-item"},l.a.createElement("div",{className:"label"},l.a.createElement(g6,{className:"icon",type:"FieldDate"}),l.a.createElement("span",null,uw("开始日期"))),l.a.createElement(x.a,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:14}),value:c,placeholder:uw("请选择日期字段"),onChange:v,getPopupContainer:function(){return C}},r.map((function(e){var n=t.getFieldIcon(e.type);return l.a.createElement(x.a.Option,{className:"select-option",value:e.value,key:e.value},n&&l.a.createElement(n,{className:"icon"}),l.a.createElement("span",null,e.name))})))),l.a.createElement("div",{className:"form-item"},l.a.createElement("div",{className:"label"},l.a.createElement(g6,{className:"icon",type:"FieldDate"}),l.a.createElement("span",null,uw("结束日期"))),l.a.createElement(x.a,{dropdownClassName:"lakex-table-view-calendar-setting-dropdown",suffixIcon:l.a.createElement(g6,{type:"ArrowDown",size:14}),value:s,placeholder:uw("请选择日期字段"),onChange:g,getPopupContainer:function(){return C}},r.map((function(e){var n=t.getFieldIcon(e.type);return l.a.createElement(x.a.Option,{className:"select-option",value:e.value,key:e.value},n&&l.a.createElement(n,{className:"icon"}),l.a.createElement("span",null,e.name))})))),l.a.createElement("div",{className:"form-item "},l.a.createElement("div",{className:"label inline"},l.a.createElement("span",null,uw("农历及节假日")),l.a.createElement(j.a,{checked:f,onChange:y}))))},pMe=function(e){var t=e.initialState,n=G3(MI),r=G3(Kse),o=t.recordId,i=n.getActiveViewId(),u=n.getViewConfig(i),c=null==u?void 0:u.get("start_date_field_uuid"),s=null==u?void 0:u.get("end_date_field_uuid"),d=null==u?void 0:u.get("date_title_field_uuid"),f=(null==u?void 0:u.get("date_color_type"))===PC.FOLLOW_FIELD&&(null==u?void 0:u.get("date_color")),p=Tpe(o,d||"").title,v=G3(bie);if(!c||!s)return null;var m=n.getAllViewFields(i),y=w_(m,(function(e){return e.get("field_uuid")===d}))||m.get(0),b=w_(m,(function(e){return e.get("field_uuid")===f})),w=Object(a.useMemo)((function(){return __(m,(function(e){return e.get("field_uuid")===c||e.get("field_uuid")===s}))}),[m,c,s]),_=Eu(b?[y,b].concat(Vb(w)):[y].concat(Vb(w)),(function(e,t){return e.get("field_uuid")===t.get("field_uuid")}));return l.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal"},l.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal-header"},l.a.createElement("span",{className:"lakex-table-view-calendar-edit-modal-title"},p||uw("未命名日程")),l.a.createElement("span",{className:"lakex-table-view-calendar-edit-modal-expand",onClick:function(){r.close("calendar-edit-modal"),null==v||v.emitClickRecord({recordId:o})}},l.a.createElement(h.a,{title:uw("展开")},l.a.createElement(g6,{type:"RowExpand"})))),_.map((function(e,t){var n=e.get("field");return n?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal-item-label"},l.a.createElement(URe,{type:n.get("type")}),l.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal-item-label-name"},n.get("name"))),l.a.createElement("div",{className:"lakex-table-view-calendar-edit-modal-item-content"},l.a.createElement(zRe,{key:n.get("type")+n.get("uuid"),recordId:o,field:n,focus:0===t,suffixIcon:null,allowClear:!1,renderMode:rie.NORMAL,onCellChange:function(e){(n.get("uuid")===c||n.get("uuid")===s)&&requestAnimationFrame((function(){var e=document.querySelector('.lakex-view-calendar-schedule-line[data-id="'.concat(o,'"]'));e?r.open("calendar-edit-modal",{position:{origin:e,placement:"bottomLeft"},initialState:{recordId:o}}):(r.close("calendar-edit-modal"),g.a.warn(uw("该日程被隐藏")))}))}}))):null})))};function hMe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vMe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hMe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hMe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gMe=function(e){var t=e.schedule,n=G3(MI),r=n.getActiveViewId(),o=n.getViewConfig(r),i=null==o?void 0:o.get("date_title_field_uuid"),a=Tpe(t.id,i||"").title;return l.a.createElement("span",{className:"lakex-table-view-calendar-more-modal-title","data-not-title":!a},a||uw("添加日程标题"))},mMe=function(e){var t=e.readonly,n=e.schedule,r=e.colors,o=e.modalRef,i=G3(bie),u=tH({id:n.id}),c=u.attributes,s=u.listeners,d=u.setNodeRef,f=u.transform,p=u.transition,h=u.isDragging,v=gP(Object(a.useState)(!1),2),g=v[0],m=v[1],y={transform:d6.Transform.toString(f),transition:p,zIndex:h?"100":"auto",opacity:h?.3:1,backgroundColor:g?r.lite:r.normal,color:r.text};return l.a.createElement("div",vMe(vMe(vMe({ref:t?void 0:d,className:"lakex-table-view-calendar-more-modal-item"},c),s),{},{style:y,onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onClick:function(e){null==i||i.emitClickEvent({eventName:"selectSchedule",data:{recordId:n.id,event:e,position:{origin:o.current,placement:"rightTop"}}})}}),l.a.createElement(gMe,{schedule:n}))},yMe=function(e){var t=e.initialState,n=G3(Yxe),r=G3(Kse),o=G3(kCe),i=G3(uA),u=G3(MI),c=xpe(EA.TABLE).isReadonly(),s=Object(a.useRef)(null),d=t.date,f=t.scheduleList,p=gP(Object(a.useState)(f),2),h=p[0],v=p[1],g=u.getViewConfig(),m=(null==g?void 0:g.get("date_color_type"))||PC.CUSTOM,y=(null==g?void 0:g.get("date_color"))||"",b=u.getFieldOptions(y),w=Object(a.useMemo)((function(){var e={};return m===PC.FOLLOW_FIELD&&y&&E_(b,(function(t){e[t.get("uuid")]=t.get("color")})),e}),[m,y,b]),_=d.weekday(),k=U$(z$(Vz,{activationConstraint:{distance:8}})),C=Object(a.useCallback)(function(){var e=mC(X_.mark((function e(t){var n,r;return X_.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.active,r=t.over,n.id===r.id){e.next=4;break}return e.next=4,null==o?void 0:o.updateRecordOrder(n.id,r.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,r]);return Object(a.useEffect)((function(){var e=i.onDidExecuteCommand((function(e){if("changeRecordOrder"===e.context.commandName){var t=u.getViewConfig(),r=u.getViewRecords(),o=n.getCurrentDate(t),i=n.getCalendarDate(o),a=n.getDateRows(i),l=n.getSchedules(r,t,i),c=n.getDateScheduleMap(a,l),s=n.sortScheduleList(d,l,c);v(s)}}));return function(){e.destroy()}}),[]),l.a.createElement("div",{ref:s,className:"lakex-table-view-calendar-more-modal"},l.a.createElement("div",{className:"lakex-table-view-calendar-more-modal-header"},l.a.createElement("span",null,uw("".concat(d.format("M月D日")," 星期").concat(["一","二","三","四","五","六","日"][_]))),l.a.createElement("span",{className:"lakex-table-view-calendar-more-modal-close",onClick:function(){null==r||r.close("calendar-more-modal")}},l.a.createElement(g6,{type:"Close",size:12}))),l.a.createElement("div",{className:"lakex-table-view-calendar-more-modal-content"},l.a.createElement(bU,{sensors:k,modifiers:[aH,oH],collisionDetection:Z$,onDragEnd:C},l.a.createElement(KU,{items:h,strategy:qU},h.map((function(e){var t=n.getScheduleColor(e,m,y,w);return l.a.createElement(mMe,{readonly:!!c,schedule:e,colors:t,modalRef:s})}))))))},bMe=Object.defineProperty,wMe=Object.getOwnPropertyDescriptor,_Me=function(e,t,n,r){for(var o,i=r>1?void 0:r?wMe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&bMe(t,n,i),i},kMe=function(){return Wb((function e(){Ub(this,e)}),[{key:"currentViewType",get:function(){var e;return null==(e=this._readService.getActiveView())?void 0:e.get("type")}},{key:"init",value:function(){var e=this;this._renderService.onClickEvent((function(t){if("selectSchedule"===t.eventName){var n=t.data,r=n.event,o=n.recordId,i=n.position;e._modalService.open("calendar-edit-modal",{position:i||{origin:r.target,placement:"bottomLeft"},initialState:{recordId:o}})}if("showMoreSchedule"===t.eventName){var a=t.data,l=a.event,u=a.date,c=a.scheduleList;e._modalService.open("calendar-more-modal",{position:{origin:l.currentTarget,placement:"bottomLeft"},initialState:{date:u,scheduleList:c}})}}))}},{key:"registerToolbar",value:function(e){var t=this;e.registerItem({id:"calendar-setting",icon:"Setting",tooltip:uw("日历配置"),visible:function(){var e=t._readService.getActiveView();return(null==e?void 0:e.get("type"))===BC.CALENDAR},onClick:function(e){var n=e.target;t._modalService.open("calendar-setting-modal",{position:{origin:n,placement:"bottom"},initialState:{}})}})}},{key:"registerModal",value:function(e){e.registerItem({id:"calendar-setting-modal",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromToolbar",RenderComponent:fMe}),e.registerItem({id:"calendar-edit-modal",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:pMe}),e.registerItem({id:"calendar-more-modal",hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",RenderComponent:yMe})}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();kMe.pluginName="workbench-viewer-calendar",_Me([Xs(MI)],kMe.prototype,"_readService",2),_Me([Xs(Kse)],kMe.prototype,"_modalService",2),_Me([Xs(bie)],kMe.prototype,"_renderService",2),kMe=_Me([Ys({contrib:[L3,pse,Yse]})],kMe);var CMe=["YYYY-MM-DD HH:mm","YYYY-MM-DD","YYYY/MM/DD HH:mm","YYYY/MM/DD","MM-DD","MM/DD/YYYY","DD/MM/YYYY"],EMe=function(e){var t,n=e.originField,r=e.fieldType,o=e.onChange,a=G3(xk),l=(null==a?void 0:a.getValue("modal.customModalContainer"))||document.body;return r===bC.DATE?React.createElement(React.Fragment,null,React.createElement("p",{className:"lakex-table-col-title"},uw("日期格式")),React.createElement(x.a,{className:"lakex-table-field-date-config",defaultValue:(null==(t=null==n?void 0:n.get("config"))?void 0:t.date_format)||"YYYY-MM-DD",dropdownClassName:"lakex-table-filter-field-select-dropdown",suffixIcon:React.createElement(g6,{type:"ArrowDown",size:12}),onChange:function(e){var t=(null==n?void 0:n.toJSON())||{};t.config={date_format:e},null==o||o(t)},getPopupContainer:function(){return l}},CMe.map((function(e){return React.createElement(x.a.Option,{value:e,key:e},React.createElement("div",{className:"lakex-table-date-config-format"},i()().format(e)))})))):null},OMe=Object.defineProperty,SMe=Object.getOwnPropertyDescriptor,xMe=function(){return Wb((function e(){Ub(this,e)}),[{key:"init",value:function(){}},{key:"getConfigComponent",value:function(){return EMe}}],[{key:"pluginModule",value:function(){return pd().register(this)}}])}();xMe.pluginName="workbench-field-date",xMe=function(e,t,n,r){for(var o,i=r>1?void 0:r?SMe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&OMe(t,n,i),i}([Ys({contrib:[L3,lDe]})],xMe);var jMe=[Jje,KIe,oRe,wRe,RRe,iAe,cAe,bAe,CAe,FAe,BAe,aDe,yDe,UDe,KDe,QDe,IPe,UPe,ZPe,rMe,dMe,kMe,xMe],IMe=function(e){var t=e.webSdk,n=e.settings;return{settings:Object.assign({},{"model.frozenTable":["ability","user"],"toolbar.topLeft":["view-manage"],"toolbar.left":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search","|","add-record"],contextMenu:["updateField","copyField","|","insertFieldLeft","insertFieldRight","|","groupByField","filterByField","sortByAsc","sortByDesc","|","copy","paste","|","insertRecordUp","insertRecordDown","insertRecordLeft","insertRecordRight","|","copyRecord","expandRecord","removeRecord","removeField"]},n),webSdk:t}},RMe=[];const AMe=Spe.filter((function(e){return!RMe.includes(e.pluginName)}));var DMe=[];const PMe=Gje.filter((function(e){return!DMe.includes(e.pluginName)}));var MMe=["workbench-full-width","workbench-full-screen"];const TMe=jMe.filter((function(e){return!MMe.includes(e.pluginName)})),FMe=[],NMe=[],VMe=[];function LMe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BMe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LMe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LMe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $Me=function(e){var t,n,r=IMe({webSdk:e.webSdk,settings:e.settings||{}});try{n=new vfe(BMe(BMe(BMe({},e),r),{},{workbenchPlugins:[].concat(Vb(TMe),Vb(e.workbenchPlugins||[])),renderPlugins:[].concat(Vb(PMe),Vb(e.renderPlugins||[])),kernelPlugins:[].concat(Vb(AMe),Vb(e.kernelPlugins||[])),workbenchContribs:[].concat(Vb(FMe),Vb(e.workbenchContribs||[])),renderContribs:[].concat(Vb(NMe),Vb(e.renderContribs||[])),kernelContribs:[].concat(Vb(VMe),Vb(e.kernelContribs||[])),onDataLoaded:function(t){var n;null==(n=e.onDataLoaded)||n.call(e,t)}})),e.onCellChange&&n.getService(ix).onCellChange((function(t){var n;return null==(n=e.onCellChange)?void 0:n.call(e,t.cellValue)}))}catch(n){console.error(n),null==(t=e.onError)||t.call(e,n)}return n},zMe=["kernel-history","kernel-add-record"];const UMe=Spe.filter((function(e){return!zMe.includes(e.pluginName)}));var HMe=["render-history"];const qMe=Gje.filter((function(e){return!HMe.includes(e.pluginName)}));var WMe=["workbench-add-record","workbench-grid-cell-editor"];const GMe=jMe.filter((function(e){return!WMe.includes(e.pluginName)}));function KMe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YMe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KMe(Object(n),!0).forEach((function(t){$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KMe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var XMe={exports:{}},JMe={},ZMe={},QMe={},eTe={},tTe={},nTe={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof n&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function o(e,...t){const n=[e[0]];let o=0;for(;o<t.length;)l(n,t[o]),n.push(e[++o]);return new r(n)}e._Code=r,e.nil=new r(""),e._=o;const i=new r("+");function a(e,...t){const n=[c(e[0])];let o=0;for(;o<t.length;)n.push(i),l(n,t[o]),n.push(i,c(e[++o]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===i){const n=u(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new r(n)}function l(e,t){t instanceof r?e.push(...t._items):t instanceof n?e.push(t):e.push(function(e){return"number"==typeof e||"boolean"==typeof e||null===e?e:c(Array.isArray(e)?e.join(","):e)}(t))}function u(e,t){return'""'===t?e:'""'===e?t:"string"==typeof e?t instanceof n||'"'!==e[e.length-1]?void 0:"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0:"string"!=typeof t||'"'!==t[0]||e instanceof n?void 0:`"${e}${t.slice(1)}`}function c(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=a,e.addCodeArg=l,e.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},e.stringify=function(e){return new r(c(e))},e.safeStringify=c,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new r(`.${t}`):o`[${t}]`},e.getEsmExportName=function(t){if("string"==typeof t&&e.IDENTIFIER.test(t))return new r(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)},e.regexpCode=function(e){return new r(e.toString())}}(nTe);var rTe={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=nTe;class n extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var r,o;(o=r||(e.UsedValueState=r={}))[o.Started=0]="Started",o[o.Completed=1]="Completed",e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof t.Name?e:this.name(e)}name(e){return new t.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}e.Scope=i;class a extends t.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:n,itemIndex:r}){this.value=e,this.scopePath=t._`.${new t.Name(n)}[${r}]`}}e.ValueScopeName=a;const l=t._`\n`;e.ValueScope=class extends i{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:t.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const r=this.toName(e),{prefix:o}=r,i=null!==(n=t.key)&&void 0!==n?n:t.ref;let a=this._values[o];if(a){const e=a.get(i);if(e)return e}else a=this._values[o]=new Map;a.set(i,r);const l=this._scope[o]||(this._scope[o]=[]),u=l.length;return l[u]=t.ref,r.setValue(t,{property:o,itemIndex:u}),r}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,n=this._values){return this._reduceValues(n,(n=>{if(void 0===n.scopePath)throw new Error(`CodeGen: name "${n}" has no value`);return t._`${e}${n.scopePath}`}))}scopeCode(e=this._values,t,n){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,n)}_reduceValues(o,i,a={},l){let u=t.nil;for(const c in o){const s=o[c];if(!s)continue;const d=a[c]=a[c]||new Map;s.forEach((o=>{if(d.has(o))return;d.set(o,r.Started);let a=i(o);if(a){const n=this.opts.es5?e.varKinds.var:e.varKinds.const;u=t._`${u}${n} ${o} = ${a};${this.opts._n}`}else{if(!(a=null==l?void 0:l(o)))throw new n(o);u=t._`${u}${a}${this.opts._n}`}d.set(o,r.Completed)}))}return u}}}(rTe),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=nTe,n=rTe;var r=nTe;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var o=rTe;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(e,t){return this}}class a extends i{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n:t}){const r=e?n.varKinds.var:this.varKind,o=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${o};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=I(this.rhs,e,t)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class l extends i{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,n){if(!(this.lhs instanceof t.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=I(this.rhs,e,n),this}get names(){return j(this.lhs instanceof t.Name?{}:{...this.lhs.names},this.rhs)}}class u extends l{constructor(e,t,n,r){super(e,n,r),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class c extends i{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class s extends i{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class d extends i{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class f extends i{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=I(this.code,e,t),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class p extends i{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,n)=>t+n.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let r=n.length;for(;r--;){const o=n[r];o.optimizeNames(e,t)||(R(e,o.names),n.splice(r,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>x(e,t.names)),{})}}class h extends p{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class v extends p{}class g extends h{}g.kind="else";class m extends h{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new g(e):e}return t?!1===e?t instanceof m?t:t.nodes:this.nodes.length?this:new m(A(e),t instanceof m?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=I(this.condition,e,t),this}get names(){const e=super.names;return j(e,this.condition),this.else&&x(e,this.else.names),e}}m.kind="if";class y extends h{}y.kind="for";class b extends y{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=I(this.iteration,e,t),this}get names(){return x(super.names,this.iteration.names)}}class w extends y{constructor(e,t,n,r){super(),this.varKind=e,this.name=t,this.from=n,this.to=r}render(e){const t=e.es5?n.varKinds.var:this.varKind,{name:r,from:o,to:i}=this;return`for(${t} ${r}=${o}; ${r}<${i}; ${r}++)`+super.render(e)}get names(){const e=j(super.names,this.from);return j(e,this.to)}}class _ extends y{constructor(e,t,n,r){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=r}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=I(this.iterable,e,t),this}get names(){return x(super.names,this.iterable.names)}}class k extends h{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}k.kind="func";class C extends p{render(e){return"return "+super.render(e)}}C.kind="return";class E extends h{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,r;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(r=this.finally)||void 0===r||r.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&x(e,this.catch.names),this.finally&&x(e,this.finally.names),e}}class O extends h{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}O.kind="catch";class S extends h{render(e){return"finally"+super.render(e)}}S.kind="finally";function x(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function j(e,n){return n instanceof t._CodeOrName?x(e,n.names):e}function I(e,n,r){return e instanceof t.Name?i(e):(o=e)instanceof t._Code&&o._items.some((e=>e instanceof t.Name&&1===n[e.str]&&void 0!==r[e.str]))?new t._Code(e._items.reduce(((e,n)=>(n instanceof t.Name&&(n=i(n)),n instanceof t._Code?e.push(...n._items):e.push(n),e)),[])):e;var o;function i(e){const t=r[e.str];return void 0===t||1!==n[e.str]?e:(delete n[e.str],t)}}function R(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function A(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:t._`!${T(e)}`}e.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new n.Scope({parent:e}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,r){const o=this._scope.toName(t);return void 0!==n&&r&&(this._constants[o.str]=n),this._leafNode(new a(e,o,n)),o}const(e,t,r){return this._def(n.varKinds.const,e,t,r)}let(e,t,r){return this._def(n.varKinds.let,e,t,r)}var(e,t,r){return this._def(n.varKinds.var,e,t,r)}assign(e,t,n){return this._leafNode(new l(e,t,n))}add(t,n){return this._leafNode(new u(t,e.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==t.nil&&this._leafNode(new f(e)),this}object(...e){const n=["{"];for(const[r,o]of e)n.length>1&&n.push(","),n.push(r),(r!==o||this.opts.es5)&&(n.push(":"),(0,t.addCodeArg)(n,o));return n.push("}"),new t._Code(n)}if(e,t,n){if(this._blockNode(new m(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new m(e))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(m,g)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new b(e),t)}forRange(e,t,r,o,i=(this.opts.es5?n.varKinds.var:n.varKinds.let)){const a=this._scope.toName(e);return this._for(new w(i,a,t,r),(()=>o(a)))}forOf(e,r,o,i=n.varKinds.const){const a=this._scope.toName(e);if(this.opts.es5){const e=r instanceof t.Name?r:this.var("_arr",r);return this.forRange("_i",0,t._`${e}.length`,(n=>{this.var(a,t._`${e}[${n}]`),o(a)}))}return this._for(new _("of",i,a,r),(()=>o(a)))}forIn(e,r,o,i=(this.opts.es5?n.varKinds.var:n.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,t._`Object.keys(${r})`,o);const a=this._scope.toName(e);return this._for(new _("in",i,a,r),(()=>o(a)))}endFor(){return this._endBlockNode(y)}label(e){return this._leafNode(new c(e))}break(e){return this._leafNode(new s(e))}return(e){const t=new C;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const r=new E;if(this._blockNode(r),this.code(e),t){const e=this.name("e");this._currNode=r.catch=new O(e),t(e)}return n&&(this._currNode=r.finally=new S,this.code(n)),this._endBlockNode(O,S)}throw(e){return this._leafNode(new d(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,n=t.nil,r,o){return this._blockNode(new k(e,n,r)),o&&this.code(o).endFunc(),this}endFunc(){return this._endBlockNode(k)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof m))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},e.not=A;const D=M(e.operators.AND);e.and=function(...e){return e.reduce(D)};const P=M(e.operators.OR);function M(e){return(n,r)=>n===t.nil?r:r===t.nil?n:t._`${T(n)} ${e} ${T(r)}`}function T(e){return e instanceof t.Name?e:t._`(${e})`}e.or=function(...e){return e.reduce(P)}}(tTe);var oTe={};Object.defineProperty(oTe,"__esModule",{value:!0}),oTe.checkStrictMode=oTe.getErrorPath=oTe.Type=oTe.useFunc=oTe.setEvaluated=oTe.evaluatedPropsToName=oTe.mergeEvaluated=oTe.eachItem=oTe.unescapeJsonPointer=oTe.escapeJsonPointer=oTe.escapeFragment=oTe.unescapeFragment=oTe.schemaRefOrVal=oTe.schemaHasRulesButRef=oTe.schemaHasRules=oTe.checkUnknownRules=oTe.alwaysValidSchema=oTe.toHash=void 0;const iTe=tTe,aTe=nTe;function lTe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||"boolean"==typeof t)return;const o=r.RULES.keywords;for(const n in t)o[n]||gTe(e,`unknown keyword: "${n}"`)}function uTe(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function cTe(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function sTe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function dTe({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(o,i,a,l)=>{const u=void 0===a?i:a instanceof iTe.Name?(i instanceof iTe.Name?e(o,i,a):t(o,i,a),a):i instanceof iTe.Name?(t(o,a,i),i):n(i,a);return l!==iTe.Name||u instanceof iTe.Name?u:r(o,u)}}function fTe(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",iTe._`{}`);return void 0!==t&&pTe(e,n,t),n}function pTe(e,t,n){Object.keys(n).forEach((n=>e.assign(iTe._`${t}${(0,iTe.getProperty)(n)}`,!0)))}oTe.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},oTe.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(lTe(e,t),!uTe(t,e.self.RULES.all))},oTe.checkUnknownRules=lTe,oTe.schemaHasRules=uTe,oTe.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},oTe.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},n,r,o){if(!o){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return iTe._`${n}`}return iTe._`${e}${t}${(0,iTe.getProperty)(r)}`},oTe.unescapeFragment=function(e){return sTe(decodeURIComponent(e))},oTe.escapeFragment=function(e){return encodeURIComponent(cTe(e))},oTe.escapeJsonPointer=cTe,oTe.unescapeJsonPointer=sTe,oTe.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},oTe.mergeEvaluated={props:dTe({mergeNames:(e,t,n)=>e.if(iTe._`${n} !== true && ${t} !== undefined`,(()=>{e.if(iTe._`${t} === true`,(()=>e.assign(n,!0)),(()=>e.assign(n,iTe._`${n} || {}`).code(iTe._`Object.assign(${n}, ${t})`)))})),mergeToName:(e,t,n)=>e.if(iTe._`${n} !== true`,(()=>{!0===t?e.assign(n,!0):(e.assign(n,iTe._`${n} || {}`),pTe(e,n,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:fTe}),items:dTe({mergeNames:(e,t,n)=>e.if(iTe._`${n} !== true && ${t} !== undefined`,(()=>e.assign(n,iTe._`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`))),mergeToName:(e,t,n)=>e.if(iTe._`${n} !== true`,(()=>e.assign(n,!0===t||iTe._`${n} > ${t} ? ${n} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},oTe.evaluatedPropsToName=fTe,oTe.setEvaluated=pTe;const hTe={};var vTe;function gTe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}oTe.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:hTe[t.code]||(hTe[t.code]=new aTe._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(vTe||(oTe.Type=vTe={})),oTe.getErrorPath=function(e,t,n){if(e instanceof iTe.Name){const r=t===vTe.Num;return n?r?iTe._`"[" + ${e} + "]"`:iTe._`"['" + ${e} + "']"`:r?iTe._`"/" + ${e}`:iTe._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,iTe.getProperty)(e).toString():"/"+cTe(e)},oTe.checkStrictMode=gTe;var mTe={};Object.defineProperty(mTe,"__esModule",{value:!0});const yTe=tTe,bTe={data:new yTe.Name("data"),valCxt:new yTe.Name("valCxt"),instancePath:new yTe.Name("instancePath"),parentData:new yTe.Name("parentData"),parentDataProperty:new yTe.Name("parentDataProperty"),rootData:new yTe.Name("rootData"),dynamicAnchors:new yTe.Name("dynamicAnchors"),vErrors:new yTe.Name("vErrors"),errors:new yTe.Name("errors"),this:new yTe.Name("this"),self:new yTe.Name("self"),scope:new yTe.Name("scope"),json:new yTe.Name("json"),jsonPos:new yTe.Name("jsonPos"),jsonLen:new yTe.Name("jsonLen"),jsonPart:new yTe.Name("jsonPart")};mTe.default=bTe,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=tTe,n=oTe,r=mTe;function o(e,n){const o=e.const("err",n);e.if(t._`${r.default.vErrors} === null`,(()=>e.assign(r.default.vErrors,t._`[${o}]`)),t._`${r.default.vErrors}.push(${o})`),e.code(t._`${r.default.errors}++`)}function i(e,n){const{gen:r,validateName:o,schemaEnv:i}=e;i.$async?r.throw(t._`new ${e.ValidationError}(${n})`):(r.assign(t._`${o}.errors`,n),r.return(!1))}e.keywordError={message:({keyword:e})=>t.str`must pass "${e}" keyword validation`},e.keyword$DataError={message:({keyword:e,schemaType:n})=>n?t.str`"${e}" keyword must be ${n} ($data)`:t.str`"${e}" keyword is invalid ($data)`},e.reportError=function(n,r=e.keywordError,a,u){const{it:c}=n,{gen:s,compositeRule:d,allErrors:f}=c,p=l(n,r,a);(null!=u?u:d||f)?o(s,p):i(c,t._`[${p}]`)},e.reportExtraError=function(t,n=e.keywordError,a){const{it:u}=t,{gen:c,compositeRule:s,allErrors:d}=u;o(c,l(t,n,a)),s||d||i(u,r.default.vErrors)},e.resetErrorsCount=function(e,n){e.assign(r.default.errors,n),e.if(t._`${r.default.vErrors} !== null`,(()=>e.if(n,(()=>e.assign(t._`${r.default.vErrors}.length`,n)),(()=>e.assign(r.default.vErrors,null)))))},e.extendErrors=function({gen:e,keyword:n,schemaValue:o,data:i,errsCount:a,it:l}){if(void 0===a)throw new Error("ajv implementation error");const u=e.name("err");e.forRange("i",a,r.default.errors,(a=>{e.const(u,t._`${r.default.vErrors}[${a}]`),e.if(t._`${u}.instancePath === undefined`,(()=>e.assign(t._`${u}.instancePath`,(0,t.strConcat)(r.default.instancePath,l.errorPath)))),e.assign(t._`${u}.schemaPath`,t.str`${l.errSchemaPath}/${n}`),l.opts.verbose&&(e.assign(t._`${u}.schema`,o),e.assign(t._`${u}.data`,i))}))};const a={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function l(e,n,o){const{createErrors:i}=e.it;return!1===i?t._`{}`:function(e,n,o={}){const{gen:i,it:l}=e,s=[u(l,o),c(e,o)];return function(e,{params:n,message:o},i){const{keyword:l,data:u,schemaValue:c,it:s}=e,{opts:d,propertyName:f,topSchemaRef:p,schemaPath:h}=s;i.push([a.keyword,l],[a.params,"function"==typeof n?n(e):n||t._`{}`]),d.messages&&i.push([a.message,"function"==typeof o?o(e):o]),d.verbose&&i.push([a.schema,c],[a.parentSchema,t._`${p}${h}`],[r.default.data,u]),f&&i.push([a.propertyName,f])}(e,n,s),i.object(...s)}(e,n,o)}function u({errorPath:e},{instancePath:o}){const i=o?t.str`${e}${(0,n.getErrorPath)(o,n.Type.Str)}`:e;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,i)]}function c({keyword:e,it:{errSchemaPath:r}},{schemaPath:o,parentSchema:i}){let l=i?r:t.str`${r}/${e}`;return o&&(l=t.str`${l}${(0,n.getErrorPath)(o,n.Type.Str)}`),[a.schemaPath,l]}}(eTe),Object.defineProperty(QMe,"__esModule",{value:!0}),QMe.boolOrEmptySchema=QMe.topBoolOrEmptySchema=void 0;const wTe=eTe,_Te=tTe,kTe=mTe,CTe={message:"boolean schema is false"};function ETe(e,t){const{gen:n,data:r}=e,o={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,wTe.reportError)(o,CTe,void 0,t)}QMe.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:r}=e;!1===n?ETe(e,!1):"object"==typeof n&&!0===n.$async?t.return(kTe.default.data):(t.assign(_Te._`${r}.errors`,null),t.return(!0))},QMe.boolOrEmptySchema=function(e,t){const{gen:n,schema:r}=e;!1===r?(n.var(t,!1),ETe(e)):n.var(t,!0)};var OTe={},STe={};Object.defineProperty(STe,"__esModule",{value:!0}),STe.getRules=STe.isJSONType=void 0;const xTe=new Set(["string","number","integer","boolean","null","object","array"]);STe.isJSONType=function(e){return"string"==typeof e&&xTe.has(e)},STe.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}};var jTe={};function ITe(e,t){return t.rules.some((t=>RTe(e,t)))}function RTe(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((t=>void 0!==e[t])))}Object.defineProperty(jTe,"__esModule",{value:!0}),jTe.shouldUseRule=jTe.shouldUseGroup=jTe.schemaHasRulesForType=void 0,jTe.schemaHasRulesForType=function({schema:e,self:t},n){const r=t.RULES.types[n];return r&&!0!==r&&ITe(e,r)},jTe.shouldUseGroup=ITe,jTe.shouldUseRule=RTe,Object.defineProperty(OTe,"__esModule",{value:!0}),OTe.reportTypeError=OTe.checkDataTypes=OTe.checkDataType=OTe.coerceAndCheckDataType=OTe.getJSONTypes=OTe.getSchemaTypes=OTe.DataType=void 0;const ATe=STe,DTe=jTe,PTe=eTe,MTe=tTe,TTe=oTe;var FTe;function NTe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(ATe.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(FTe||(OTe.DataType=FTe={})),OTe.getSchemaTypes=function(e){const t=NTe(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},OTe.getJSONTypes=NTe,OTe.coerceAndCheckDataType=function(e,t){const{gen:n,data:r,opts:o}=e,i=function(e,t){return t?e.filter((e=>VTe.has(e)||"array"===t&&"array"===e)):[]}(t,o.coerceTypes),a=t.length>0&&!(0===i.length&&1===t.length&&(0,DTe.schemaHasRulesForType)(e,t[0]));if(a){const a=BTe(t,r,o.strictNumbers,FTe.Wrong);n.if(a,(()=>{i.length?function(e,t,n){const{gen:r,data:o,opts:i}=e,a=r.let("dataType",MTe._`typeof ${o}`),l=r.let("coerced",MTe._`undefined`);"array"===i.coerceTypes&&r.if(MTe._`${a} == 'object' && Array.isArray(${o}) && ${o}.length == 1`,(()=>r.assign(o,MTe._`${o}[0]`).assign(a,MTe._`typeof ${o}`).if(BTe(t,o,i.strictNumbers),(()=>r.assign(l,o))))),r.if(MTe._`${l} !== undefined`);for(const e of n)(VTe.has(e)||"array"===e&&"array"===i.coerceTypes)&&u(e);function u(e){switch(e){case"string":return void r.elseIf(MTe._`${a} == "number" || ${a} == "boolean"`).assign(l,MTe._`"" + ${o}`).elseIf(MTe._`${o} === null`).assign(l,MTe._`""`);case"number":return void r.elseIf(MTe._`${a} == "boolean" || ${o} === null
              || (${a} == "string" && ${o} && ${o} == +${o})`).assign(l,MTe._`+${o}`);case"integer":return void r.elseIf(MTe._`${a} === "boolean" || ${o} === null
              || (${a} === "string" && ${o} && ${o} == +${o} && !(${o} % 1))`).assign(l,MTe._`+${o}`);case"boolean":return void r.elseIf(MTe._`${o} === "false" || ${o} === 0 || ${o} === null`).assign(l,!1).elseIf(MTe._`${o} === "true" || ${o} === 1`).assign(l,!0);case"null":return r.elseIf(MTe._`${o} === "" || ${o} === 0 || ${o} === false`),void r.assign(l,null);case"array":r.elseIf(MTe._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${o} === null`).assign(l,MTe._`[${o}]`)}}r.else(),zTe(e),r.endIf(),r.if(MTe._`${l} !== undefined`,(()=>{r.assign(o,l),function({gen:e,parentData:t,parentDataProperty:n},r){e.if(MTe._`${t} !== undefined`,(()=>e.assign(MTe._`${t}[${n}]`,r)))}(e,l)}))}(e,t,i):zTe(e)}))}return a};const VTe=new Set(["string","number","integer","boolean","null"]);function LTe(e,t,n,r=FTe.Correct){const o=r===FTe.Correct?MTe.operators.EQ:MTe.operators.NEQ;let i;switch(e){case"null":return MTe._`${t} ${o} null`;case"array":i=MTe._`Array.isArray(${t})`;break;case"object":i=MTe._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=a(MTe._`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=a();break;default:return MTe._`typeof ${t} ${o} ${e}`}return r===FTe.Correct?i:(0,MTe.not)(i);function a(e=MTe.nil){return(0,MTe.and)(MTe._`typeof ${t} == "number"`,e,n?MTe._`isFinite(${t})`:MTe.nil)}}function BTe(e,t,n,r){if(1===e.length)return LTe(e[0],t,n,r);let o;const i=(0,TTe.toHash)(e);if(i.array&&i.object){const e=MTe._`typeof ${t} != "object"`;o=i.null?e:MTe._`!${t} || ${e}`,delete i.null,delete i.array,delete i.object}else o=MTe.nil;i.number&&delete i.integer;for(const e in i)o=(0,MTe.and)(o,LTe(e,t,n,r));return o}OTe.checkDataType=LTe,OTe.checkDataTypes=BTe;const $Te={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?MTe._`{type: ${e}}`:MTe._`{type: ${t}}`};function zTe(e){const t=function(e){const{gen:t,data:n,schema:r}=e,o=(0,TTe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:o,schemaValue:o,parentSchema:r,params:{},it:e}}(e);(0,PTe.reportError)(t,$Te)}OTe.reportTypeError=zTe;var UTe={};Object.defineProperty(UTe,"__esModule",{value:!0}),UTe.assignDefaults=void 0;const HTe=tTe,qTe=oTe;function WTe(e,t,n){const{gen:r,compositeRule:o,data:i,opts:a}=e;if(void 0===n)return;const l=HTe._`${i}${(0,HTe.getProperty)(t)}`;if(o)return void(0,qTe.checkStrictMode)(e,`default is ignored for: ${l}`);let u=HTe._`${l} === undefined`;"empty"===a.useDefaults&&(u=HTe._`${u} || ${l} === null || ${l} === ""`),r.if(u,HTe._`${l} = ${(0,HTe.stringify)(n)}`)}UTe.assignDefaults=function(e,t){const{properties:n,items:r}=e.schema;if("object"===t&&n)for(const t in n)WTe(e,t,n[t].default);else"array"===t&&Array.isArray(r)&&r.forEach(((t,n)=>WTe(e,n,t.default)))};var GTe={},KTe={};Object.defineProperty(KTe,"__esModule",{value:!0}),KTe.validateUnion=KTe.validateArray=KTe.usePattern=KTe.callValidateCode=KTe.schemaProperties=KTe.allSchemaProperties=KTe.noPropertyInData=KTe.propertyInData=KTe.isOwnProperty=KTe.hasPropFunc=KTe.reportMissingProp=KTe.checkMissingProp=KTe.checkReportMissingProp=void 0;const YTe=tTe,XTe=oTe,JTe=mTe,ZTe=oTe;function QTe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:YTe._`Object.prototype.hasOwnProperty`})}function eFe(e,t,n){return YTe._`${QTe(e)}.call(${t}, ${n})`}function tFe(e,t,n,r){const o=YTe._`${t}${(0,YTe.getProperty)(n)} === undefined`;return r?(0,YTe.or)(o,(0,YTe.not)(eFe(e,t,n))):o}function nFe(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}KTe.checkReportMissingProp=function(e,t){const{gen:n,data:r,it:o}=e;n.if(tFe(n,r,t,o.opts.ownProperties),(()=>{e.setParams({missingProperty:YTe._`${t}`},!0),e.error()}))},KTe.checkMissingProp=function({gen:e,data:t,it:{opts:n}},r,o){return(0,YTe.or)(...r.map((r=>(0,YTe.and)(tFe(e,t,r,n.ownProperties),YTe._`${o} = ${r}`))))},KTe.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},KTe.hasPropFunc=QTe,KTe.isOwnProperty=eFe,KTe.propertyInData=function(e,t,n,r){const o=YTe._`${t}${(0,YTe.getProperty)(n)} !== undefined`;return r?YTe._`${o} && ${eFe(e,t,n)}`:o},KTe.noPropertyInData=tFe,KTe.allSchemaProperties=nFe,KTe.schemaProperties=function(e,t){return nFe(t).filter((n=>!(0,XTe.alwaysValidSchema)(e,t[n])))},KTe.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:o,errorPath:i},it:a},l,u,c){const s=c?YTe._`${e}, ${t}, ${r}${o}`:t,d=[[JTe.default.instancePath,(0,YTe.strConcat)(JTe.default.instancePath,i)],[JTe.default.parentData,a.parentData],[JTe.default.parentDataProperty,a.parentDataProperty],[JTe.default.rootData,JTe.default.rootData]];a.opts.dynamicRef&&d.push([JTe.default.dynamicAnchors,JTe.default.dynamicAnchors]);const f=YTe._`${s}, ${n.object(...d)}`;return u!==YTe.nil?YTe._`${l}.call(${u}, ${f})`:YTe._`${l}(${f})`};const rFe=YTe._`new RegExp`;KTe.usePattern=function({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:o}=t.code,i=o(n,r);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:YTe._`${"new RegExp"===o.code?rFe:(0,ZTe.useFunc)(e,o)}(${n}, ${r})`})},KTe.validateArray=function(e){const{gen:t,data:n,keyword:r,it:o}=e,i=t.name("valid");if(o.allErrors){const e=t.let("valid",!0);return a((()=>t.assign(e,!1))),e}return t.var(i,!0),a((()=>t.break())),i;function a(o){const a=t.const("len",YTe._`${n}.length`);t.forRange("i",0,a,(n=>{e.subschema({keyword:r,dataProp:n,dataPropType:XTe.Type.Num},i),t.if((0,YTe.not)(i),o)}))}},KTe.validateUnion=function(e){const{gen:t,schema:n,keyword:r,it:o}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some((e=>(0,XTe.alwaysValidSchema)(o,e)))&&!o.opts.unevaluated)return;const i=t.let("valid",!1),a=t.name("_valid");t.block((()=>n.forEach(((n,o)=>{const l=e.subschema({keyword:r,schemaProp:o,compositeRule:!0},a);t.assign(i,YTe._`${i} || ${a}`),e.mergeValidEvaluated(l,a)||t.if((0,YTe.not)(i))})))),e.result(i,(()=>e.reset()),(()=>e.error(!0)))},Object.defineProperty(GTe,"__esModule",{value:!0}),GTe.validateKeywordUsage=GTe.validSchemaType=GTe.funcKeywordCode=GTe.macroKeywordCode=void 0;const oFe=tTe,iFe=mTe,aFe=KTe,lFe=eTe;function uFe(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,(()=>t.assign(n,oFe._`${r.parentData}[${r.parentDataProperty}]`)))}function cFe(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:(0,oFe.stringify)(n)})}GTe.macroKeywordCode=function(e,t){const{gen:n,keyword:r,schema:o,parentSchema:i,it:a}=e,l=t.macro.call(a.self,o,i,a),u=cFe(n,r,l);!1!==a.opts.validateSchema&&a.self.validateSchema(l,!0);const c=n.name("valid");e.subschema({schema:l,schemaPath:oFe.nil,errSchemaPath:`${a.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},c),e.pass(c,(()=>e.error(!0)))},GTe.funcKeywordCode=function(e,t){var n;const{gen:r,keyword:o,schema:i,parentSchema:a,$data:l,it:u}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(u,t);const c=!l&&t.compile?t.compile.call(u.self,i,a,u):t.validate,s=cFe(r,o,c),d=r.let("valid");function f(n=(t.async?oFe._`await `:oFe.nil)){const o=u.opts.passContext?iFe.default.this:iFe.default.self,i=!("compile"in t&&!l||!1===t.schema);r.assign(d,oFe._`${n}${(0,aFe.callValidateCode)(e,s,o,i)}`,t.modifying)}function p(e){var n;r.if((0,oFe.not)(null!==(n=t.valid)&&void 0!==n?n:d),e)}e.block$data(d,(function(){if(!1===t.errors)f(),t.modifying&&uFe(e),p((()=>e.error()));else{const n=t.async?function(){const e=r.let("ruleErrs",null);return r.try((()=>f(oFe._`await `)),(t=>r.assign(d,!1).if(oFe._`${t} instanceof ${u.ValidationError}`,(()=>r.assign(e,oFe._`${t}.errors`)),(()=>r.throw(t))))),e}():function(){const e=oFe._`${s}.errors`;return r.assign(e,null),f(oFe.nil),e}();t.modifying&&uFe(e),p((()=>function(e,t){const{gen:n}=e;n.if(oFe._`Array.isArray(${t})`,(()=>{n.assign(iFe.default.vErrors,oFe._`${iFe.default.vErrors} === null ? ${t} : ${iFe.default.vErrors}.concat(${t})`).assign(iFe.default.errors,oFe._`${iFe.default.vErrors}.length`),(0,lFe.extendErrors)(e)}),(()=>e.error()))}(e,n)))}})),e.ok(null!==(n=t.valid)&&void 0!==n?n:d)},GTe.validSchemaType=function(e,t,n=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&typeof e>"u"))},GTe.validateKeywordUsage=function({schema:e,opts:t,self:n,errSchemaPath:r},o,i){if(Array.isArray(o.keyword)?!o.keyword.includes(i):o.keyword!==i)throw new Error("ajv implementation error");const a=o.dependencies;if(null!=a&&a.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${i}: ${a.join(",")}`);if(o.validateSchema&&!o.validateSchema(e[i])){const e=`keyword "${i}" value is invalid at path "${r}": `+n.errorsText(o.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}};var sFe={};Object.defineProperty(sFe,"__esModule",{value:!0}),sFe.extendSubschemaMode=sFe.extendSubschemaData=sFe.getSubschema=void 0;const dFe=tTe,fFe=oTe;sFe.getSubschema=function(e,{keyword:t,schemaProp:n,schema:r,schemaPath:o,errSchemaPath:i,topSchemaRef:a}){if(void 0!==t&&void 0!==r)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const r=e.schema[t];return void 0===n?{schema:r,schemaPath:dFe._`${e.schemaPath}${(0,dFe.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:r[n],schemaPath:dFe._`${e.schemaPath}${(0,dFe.getProperty)(t)}${(0,dFe.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,fFe.escapeFragment)(n)}`}}if(void 0!==r){if(void 0===o||void 0===i||void 0===a)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:o,topSchemaRef:a,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')},sFe.extendSubschemaData=function(e,t,{dataProp:n,dataPropType:r,data:o,dataTypes:i,propertyName:a}){if(void 0!==o&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:l}=t;if(void 0!==n){const{errorPath:o,dataPathArr:i,opts:a}=t;u(l.let("data",dFe._`${t.data}${(0,dFe.getProperty)(n)}`,!0)),e.errorPath=dFe.str`${o}${(0,fFe.getErrorPath)(n,r,a.jsPropertySyntax)}`,e.parentDataProperty=dFe._`${n}`,e.dataPathArr=[...i,e.parentDataProperty]}if(void 0!==o){u(o instanceof dFe.Name?o:l.let("data",o,!0)),void 0!==a&&(e.propertyName=a)}function u(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}i&&(e.dataTypes=i)},sFe.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:o,allErrors:i}){void 0!==r&&(e.compositeRule=r),void 0!==o&&(e.createErrors=o),void 0!==i&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=n};var pFe={},hFe=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!=o--;){var a=i[o];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n},vFe={exports:{}},gFe=vFe.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),mFe(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function mFe(e,t,n,r,o,i,a,l,u,c){if(r&&"object"==typeof r&&!Array.isArray(r)){for(var s in t(r,o,i,a,l,u,c),r){var d=r[s];if(Array.isArray(d)){if(s in gFe.arrayKeywords)for(var f=0;f<d.length;f++)mFe(e,t,n,d[f],o+"/"+s+"/"+f,i,o,s,r,f)}else if(s in gFe.propsKeywords){if(d&&"object"==typeof d)for(var p in d)mFe(e,t,n,d[p],o+"/"+s+"/"+yFe(p),i,o,s,r,p)}else(s in gFe.keywords||e.allKeys&&!(s in gFe.skipKeywords))&&mFe(e,t,n,d,o+"/"+s,i,o,s,r)}n(r,o,i,a,l,u,c)}}function yFe(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}gFe.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},gFe.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},gFe.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},gFe.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},Object.defineProperty(pFe,"__esModule",{value:!0}),pFe.getSchemaRefs=pFe.resolveUrl=pFe.normalizeId=pFe._getFullPath=pFe.getFullPath=pFe.inlineRef=void 0;const bFe=oTe,wFe=hFe,_Fe=vFe.exports,kFe=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);pFe.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!EFe(e):!!t&&OFe(e)<=t)};const CFe=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function EFe(e){for(const t in e){if(CFe.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(EFe)||"object"==typeof n&&EFe(n))return!0}return!1}function OFe(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!kFe.has(n)&&("object"==typeof e[n]&&(0,bFe.eachItem)(e[n],(e=>t+=OFe(e))),t===1/0))return 1/0}return t}function SFe(e,t="",n){!1!==n&&(t=IFe(t));const r=e.parse(t);return xFe(e,r)}function xFe(e,t){return e.serialize(t).split("#")[0]+"#"}pFe.getFullPath=SFe,pFe._getFullPath=xFe;const jFe=/#\/?$/;function IFe(e){return e?e.replace(jFe,""):""}pFe.normalizeId=IFe,pFe.resolveUrl=function(e,t,n){return n=IFe(n),e.resolve(t,n)};const RFe=/^[a-z_][-a-z0-9._]*$/i;pFe.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:n,uriResolver:r}=this.opts,o=IFe(e[n]||t),i={"":o},a=SFe(r,o,!1),l={},u=new Set;return _Fe(e,{allKeys:!0},((e,t,r,o)=>{if(void 0===o)return;const d=a+t;let f=i[o];function p(t){const n=this.opts.uriResolver.resolve;if(t=IFe(f?n(f,t):t),u.has(t))throw s(t);u.add(t);let r=this.refs[t];return"string"==typeof r&&(r=this.refs[r]),"object"==typeof r?c(e,r.schema,t):t!==IFe(d)&&("#"===t[0]?(c(e,l[t],t),l[t]=e):this.refs[t]=d),t}function h(e){if("string"==typeof e){if(!RFe.test(e))throw new Error(`invalid anchor "${e}"`);p.call(this,`#${e}`)}}"string"==typeof e[n]&&(f=p.call(this,e[n])),h.call(this,e.$anchor),h.call(this,e.$dynamicAnchor),i[t]=f})),l;function c(e,t,n){if(void 0!==t&&!wFe(e,t))throw s(n)}function s(e){return new Error(`reference "${e}" resolves to more than one schema`)}},Object.defineProperty(ZMe,"__esModule",{value:!0}),ZMe.getData=ZMe.KeywordCxt=ZMe.validateFunctionCode=void 0;const AFe=QMe,DFe=OTe,PFe=jTe,MFe=OTe,TFe=UTe,FFe=GTe,NFe=sFe,VFe=tTe,LFe=mTe,BFe=pFe,$Fe=oTe,zFe=eTe;function UFe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:o},i){o.code.es5?e.func(t,VFe._`${LFe.default.data}, ${LFe.default.valCxt}`,r.$async,(()=>{e.code(VFe._`"use strict"; ${HFe(n,o)}`),function(e,t){e.if(LFe.default.valCxt,(()=>{e.var(LFe.default.instancePath,VFe._`${LFe.default.valCxt}.${LFe.default.instancePath}`),e.var(LFe.default.parentData,VFe._`${LFe.default.valCxt}.${LFe.default.parentData}`),e.var(LFe.default.parentDataProperty,VFe._`${LFe.default.valCxt}.${LFe.default.parentDataProperty}`),e.var(LFe.default.rootData,VFe._`${LFe.default.valCxt}.${LFe.default.rootData}`),t.dynamicRef&&e.var(LFe.default.dynamicAnchors,VFe._`${LFe.default.valCxt}.${LFe.default.dynamicAnchors}`)}),(()=>{e.var(LFe.default.instancePath,VFe._`""`),e.var(LFe.default.parentData,VFe._`undefined`),e.var(LFe.default.parentDataProperty,VFe._`undefined`),e.var(LFe.default.rootData,LFe.default.data),t.dynamicRef&&e.var(LFe.default.dynamicAnchors,VFe._`{}`)}))}(e,o),e.code(i)})):e.func(t,VFe._`${LFe.default.data}, ${function(e){return VFe._`{${LFe.default.instancePath}="", ${LFe.default.parentData}, ${LFe.default.parentDataProperty}, ${LFe.default.rootData}=${LFe.default.data}${e.dynamicRef?VFe._`, ${LFe.default.dynamicAnchors}={}`:VFe.nil}}={}`}(o)}`,r.$async,(()=>e.code(HFe(n,o)).code(i)))}function HFe(e,t){const n="object"==typeof e&&e[t.schemaId];return n&&(t.code.source||t.code.process)?VFe._`/*# sourceURL=${n} */`:VFe.nil}function qFe(e,t){GFe(e)&&(KFe(e),WFe(e))?function(e,t){const{schema:n,gen:r,opts:o}=e;o.$comment&&n.$comment&&XFe(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,BFe.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const i=r.const("_errs",LFe.default.errors);YFe(e,i),r.var(t,VFe._`${i} === ${LFe.default.errors}`)}(e,t):(0,AFe.boolOrEmptySchema)(e,t)}function WFe({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function GFe(e){return"boolean"!=typeof e.schema}function KFe(e){(0,$Fe.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:n,opts:r,self:o}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,$Fe.schemaHasRulesButRef)(t,o.RULES)&&o.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function YFe(e,t){if(e.opts.jtd)return JFe(e,[],!1,t);const n=(0,DFe.getSchemaTypes)(e.schema);JFe(e,n,!(0,DFe.coerceAndCheckDataType)(e,n),t)}function XFe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:o}){const i=n.$comment;if(!0===o.$comment)e.code(VFe._`${LFe.default.self}.logger.log(${i})`);else if("function"==typeof o.$comment){const n=VFe.str`${r}/$comment`,o=e.scopeValue("root",{ref:t.root});e.code(VFe._`${LFe.default.self}.opts.$comment(${i}, ${n}, ${o}.schema)`)}}function JFe(e,t,n,r){const{gen:o,schema:i,data:a,allErrors:l,opts:u,self:c}=e,{RULES:s}=c;function d(c){!(0,PFe.shouldUseGroup)(i,c)||(c.type?(o.if((0,MFe.checkDataType)(c.type,a,u.strictNumbers)),ZFe(e,c),1===t.length&&t[0]===c.type&&n&&(o.else(),(0,MFe.reportTypeError)(e)),o.endIf()):ZFe(e,c),l||o.if(VFe._`${LFe.default.errors} === ${r||0}`))}!i.$ref||!u.ignoreKeywordsWithRef&&(0,$Fe.schemaHasRulesButRef)(i,s)?(u.jtd||function(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(function(e,t){if(t.length){if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach((t=>{eNe(e.dataTypes,t)||tNe(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),function(e,t){const n=[];for(const r of e.dataTypes)eNe(t,r)?n.push(r):t.includes("integer")&&"number"===r&&n.push("integer");e.dataTypes=n}(e,t)}}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&tNe(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const n=e.self.RULES.all;for(const r in n){const o=n[r];if("object"==typeof o&&(0,PFe.shouldUseRule)(e.schema,o)){const{type:n}=o.definition;n.length&&!n.some((e=>QFe(t,e)))&&tNe(e,`missing type "${n.join(",")}" for keyword "${r}"`)}}}(e,e.dataTypes))}(e,t),o.block((()=>{for(const e of s.rules)d(e);d(s.post)}))):o.block((()=>rNe(e,"$ref",s.all.$ref.definition)))}function ZFe(e,t){const{gen:n,schema:r,opts:{useDefaults:o}}=e;o&&(0,TFe.assignDefaults)(e,t.type),n.block((()=>{for(const n of t.rules)(0,PFe.shouldUseRule)(r,n)&&rNe(e,n.keyword,n.definition,t.type)}))}function QFe(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function eNe(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function tNe(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,$Fe.checkStrictMode)(e,t,e.opts.strictTypes)}ZMe.validateFunctionCode=function(e){GFe(e)&&(KFe(e),WFe(e))?function(e){const{schema:t,opts:n,gen:r}=e;UFe(e,(()=>{n.$comment&&t.$comment&&XFe(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,$Fe.checkStrictMode)(e,"default is ignored in the schema root")}(e),r.let(LFe.default.vErrors,null),r.let(LFe.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",VFe._`${n}.evaluated`),t.if(VFe._`${e.evaluated}.dynamicProps`,(()=>t.assign(VFe._`${e.evaluated}.props`,VFe._`undefined`))),t.if(VFe._`${e.evaluated}.dynamicItems`,(()=>t.assign(VFe._`${e.evaluated}.items`,VFe._`undefined`)))}(e),YFe(e),function(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:o,opts:i}=e;n.$async?t.if(VFe._`${LFe.default.errors} === 0`,(()=>t.return(LFe.default.data)),(()=>t.throw(VFe._`new ${o}(${LFe.default.vErrors})`))):(t.assign(VFe._`${r}.errors`,LFe.default.vErrors),i.unevaluated&&function({gen:e,evaluated:t,props:n,items:r}){n instanceof VFe.Name&&e.assign(VFe._`${t}.props`,n),r instanceof VFe.Name&&e.assign(VFe._`${t}.items`,r)}(e),t.return(VFe._`${LFe.default.errors} === 0`))}(e)}))}(e):UFe(e,(()=>(0,AFe.topBoolOrEmptySchema)(e)))};class nNe{constructor(e,t,n){if((0,FFe.validateKeywordUsage)(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,$Fe.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",aNe(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,FFe.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",LFe.default.errors))}result(e,t,n){this.failResult((0,VFe.not)(e),t,n)}failResult(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,VFe.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(VFe._`${t} !== undefined && (${(0,VFe.or)(this.invalid$data(),e)})`)}error(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}_error(e,t){(e?zFe.reportExtraError:zFe.reportError)(this,this.def.error,t)}$dataError(){(0,zFe.reportError)(this,this.def.$dataError||zFe.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,zFe.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=VFe.nil){this.gen.block((()=>{this.check$data(e,n),t()}))}check$data(e=VFe.nil,t=VFe.nil){if(!this.$data)return;const{gen:n,schemaCode:r,schemaType:o,def:i}=this;n.if((0,VFe.or)(VFe._`${r} === undefined`,t)),e!==VFe.nil&&n.assign(e,!0),(o.length||i.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==VFe.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:r,it:o}=this;return(0,VFe.or)(function(){if(n.length){if(!(t instanceof VFe.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return VFe._`${(0,MFe.checkDataTypes)(e,t,o.opts.strictNumbers,MFe.DataType.Wrong)}`}return VFe.nil}(),function(){if(r.validateSchema){const n=e.scopeValue("validate$data",{ref:r.validateSchema});return VFe._`!${n}(${t})`}return VFe.nil}())}subschema(e,t){const n=(0,NFe.getSubschema)(this.it,e);(0,NFe.extendSubschemaData)(n,this.it,e),(0,NFe.extendSubschemaMode)(n,e);const r={...this.it,...n,items:void 0,props:void 0};return qFe(r,t),r}mergeEvaluated(e,t){const{it:n,gen:r}=this;!n.opts.unevaluated||(!0!==n.props&&void 0!==e.props&&(n.props=$Fe.mergeEvaluated.props(r,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=$Fe.mergeEvaluated.items(r,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:r}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return r.if(t,(()=>this.mergeEvaluated(e,VFe.Name))),!0}}function rNe(e,t,n,r){const o=new nNe(e,n,t);"code"in n?n.code(o,r):o.$data&&n.validate?(0,FFe.funcKeywordCode)(o,n):"macro"in n?(0,FFe.macroKeywordCode)(o,n):(n.compile||n.validate)&&(0,FFe.funcKeywordCode)(o,n)}ZMe.KeywordCxt=nNe;const oNe=/^\/(?:[^~]|~0|~1)*$/,iNe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function aNe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let o,i;if(""===e)return LFe.default.rootData;if("/"===e[0]){if(!oNe.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);o=e,i=LFe.default.rootData}else{const a=iNe.exec(e);if(!a)throw new Error(`Invalid JSON-pointer: ${e}`);const l=+a[1];if(o=a[2],"#"===o){if(l>=t)throw new Error(u("property/index",l));return r[t-l]}if(l>t)throw new Error(u("data",l));if(i=n[t-l],!o)return i}let a=i;const l=o.split("/");for(const e of l)e&&(i=VFe._`${i}${(0,VFe.getProperty)((0,$Fe.unescapeJsonPointer)(e))}`,a=VFe._`${a} && ${i}`);return a;function u(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}ZMe.getData=aNe;var lNe={};Object.defineProperty(lNe,"__esModule",{value:!0});class uNe extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}lNe.default=uNe;var cNe={};Object.defineProperty(cNe,"__esModule",{value:!0});const sNe=pFe;class dNe extends Error{constructor(e,t,n,r){super(r||`can't resolve reference ${n} from id ${t}`),this.missingRef=(0,sNe.resolveUrl)(e,t,n),this.missingSchema=(0,sNe.normalizeId)((0,sNe.getFullPath)(e,this.missingRef))}}cNe.default=dNe;var fNe={};Object.defineProperty(fNe,"__esModule",{value:!0}),fNe.resolveSchema=fNe.getCompilingSchema=fNe.resolveRef=fNe.compileSchema=fNe.SchemaEnv=void 0;const pNe=tTe,hNe=lNe,vNe=mTe,gNe=pFe,mNe=oTe,yNe=ZMe;class bNe{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,gNe.normalizeId)(null==n?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function wNe(e){const t=kNe.call(this,e);if(t)return t;const n=(0,gNe.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:o}=this.opts.code,{ownProperties:i}=this.opts,a=new pNe.CodeGen(this.scope,{es5:r,lines:o,ownProperties:i});let l;e.$async&&(l=a.scopeValue("Error",{ref:hNe.default,code:pNe._`require("ajv/dist/runtime/validation_error").default`}));const u=a.scopeName("validate");e.validateName=u;const c={gen:a,allErrors:this.opts.allErrors,data:vNe.default.data,parentData:vNe.default.parentData,parentDataProperty:vNe.default.parentDataProperty,dataNames:[vNe.default.data],dataPathArr:[pNe.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,pNe.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:l,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:pNe.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:pNe._`""`,opts:this.opts,self:this};let s;try{this._compilations.add(e),(0,yNe.validateFunctionCode)(c),a.optimize(this.opts.code.optimize);const t=a.toString();s=`${a.scopeRefs(vNe.default.scope)}return ${t}`,this.opts.code.process&&(s=this.opts.code.process(s,e));const n=new Function(`${vNe.default.self}`,`${vNe.default.scope}`,s)(this,this.scope.get());if(this.scope.value(u,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:u,validateCode:t,scopeValues:a._values}),this.opts.unevaluated){const{props:e,items:t}=c;n.evaluated={props:e instanceof pNe.Name?void 0:e,items:t instanceof pNe.Name?void 0:t,dynamicProps:e instanceof pNe.Name,dynamicItems:t instanceof pNe.Name},n.source&&(n.source.evaluated=(0,pNe.stringify)(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,s&&this.logger.error("Error compiling schema, function code:",s),t}finally{this._compilations.delete(e)}}function _Ne(e){return(0,gNe.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:wNe.call(this,e)}function kNe(e){for(const t of this._compilations)if(CNe(t,e))return t}function CNe(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function ENe(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||ONe.call(this,e,t)}function ONe(e,t){const n=this.opts.uriResolver.parse(t),r=(0,gNe._getFullPath)(this.opts.uriResolver,n);let o=(0,gNe.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===o)return xNe.call(this,n,e);const i=(0,gNe.normalizeId)(r),a=this.refs[i]||this.schemas[i];if("string"==typeof a){const t=ONe.call(this,e,a);return"object"!=typeof(null==t?void 0:t.schema)?void 0:xNe.call(this,n,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||wNe.call(this,a),i===(0,gNe.normalizeId)(t)){const{schema:t}=a,{schemaId:n}=this.opts,r=t[n];return r&&(o=(0,gNe.resolveUrl)(this.opts.uriResolver,o,r)),new bNe({schema:t,schemaId:n,root:e,baseId:o})}return xNe.call(this,n,a)}}fNe.SchemaEnv=bNe,fNe.compileSchema=wNe,fNe.resolveRef=function(e,t,n){var r;n=(0,gNe.resolveUrl)(this.opts.uriResolver,t,n);const o=e.refs[n];if(o)return o;let i=ENe.call(this,e,n);if(void 0===i){const o=null===(r=e.localRefs)||void 0===r?void 0:r[n],{schemaId:a}=this.opts;o&&(i=new bNe({schema:o,schemaId:a,root:e,baseId:t}))}return void 0!==i?e.refs[n]=_Ne.call(this,i):void 0},fNe.getCompilingSchema=kNe,fNe.resolveSchema=ONe;const SNe=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function xNe(e,{baseId:t,schema:n,root:r}){var o;if("/"!==(null===(o=e.fragment)||void 0===o?void 0:o[0]))return;for(const r of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;const e=n[(0,mNe.unescapeFragment)(r)];if(void 0===e)return;const o="object"==typeof(n=e)&&n[this.opts.schemaId];!SNe.has(r)&&o&&(t=(0,gNe.resolveUrl)(this.opts.uriResolver,t,o))}let i;if("boolean"!=typeof n&&n.$ref&&!(0,mNe.schemaHasRulesButRef)(n,this.RULES)){const e=(0,gNe.resolveUrl)(this.opts.uriResolver,t,n.$ref);i=ONe.call(this,r,e)}const{schemaId:a}=this.opts;return i=i||new bNe({schema:n,schemaId:a,root:r,baseId:t}),i.schema!==i.root.schema?i:void 0}const jNe={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};var INe={},RNe={exports:{}};(function(e){function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,o=1;o<r;++o)t[o]=t[o].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function o(e){return e.toUpperCase()}function i(e){return null!=e?e instanceof Array?e:"number"!=typeof e.length||e.split||e.setInterval||e.call?[e]:Array.prototype.slice.call(e):[]}function a(e,t){var n=e;if(t)for(var r in t)n[r]=t[r];return n}function l(e){var r="[A-Za-z]",o="[0-9]",i=t(o,"[A-Fa-f]"),a=n(n("%[EFef]"+i+"%"+i+i+"%"+i+i)+"|"+n("%[89A-Fa-f]"+i+"%"+i+i)+"|"+n("%"+i+i)),l="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",u=t("[\\:\\/\\?\\#\\[\\]\\@]",l),c=e?"[\\uE000-\\uF8FF]":"[]",s=t(r,o,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");n(r+t(r,o,"[\\+\\-\\.]")+"*"),n(n(a+"|"+t(s,l,"[\\:]"))+"*");var d=n(n("25[0-5]")+"|"+n("2[0-4]"+o)+"|"+n("1"+o+o)+"|"+n("0?[1-9]"+o)+"|0?0?"+o),f=n(d+"\\."+d+"\\."+d+"\\."+d),p=n(i+"{1,4}"),h=n(n(p+"\\:"+p)+"|"+f),v=n(n(p+"\\:")+"{6}"+h),g=n("\\:\\:"+n(p+"\\:")+"{5}"+h),m=n(n(p)+"?\\:\\:"+n(p+"\\:")+"{4}"+h),y=n(n(n(p+"\\:")+"{0,1}"+p)+"?\\:\\:"+n(p+"\\:")+"{3}"+h),b=n(n(n(p+"\\:")+"{0,2}"+p)+"?\\:\\:"+n(p+"\\:")+"{2}"+h),w=n(n(n(p+"\\:")+"{0,3}"+p)+"?\\:\\:"+p+"\\:"+h),_=n(n(n(p+"\\:")+"{0,4}"+p)+"?\\:\\:"+h),k=n(n(n(p+"\\:")+"{0,5}"+p)+"?\\:\\:"+p),C=n(n(n(p+"\\:")+"{0,6}"+p)+"?\\:\\:"),E=n([v,g,m,y,b,w,_,k,C].join("|")),O=n(n(s+"|"+a)+"+");n("[vV]"+i+"+\\."+t(s,l,"[\\:]")+"+"),n(n(a+"|"+t(s,l))+"*");var S=n(a+"|"+t(s,l,"[\\:\\@]"));return n(n(a+"|"+t(s,l,"[\\@]"))+"+"),n(n(S+"|"+t("[\\/\\?]",c))+"*"),{NOT_SCHEME:new RegExp(t("[^]",r,o,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",s,l),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",s,l),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",s,l),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",s,l),"g"),NOT_QUERY:new RegExp(t("[^\\%]",s,l,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",s,l,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",s,l),"g"),UNRESERVED:new RegExp(s,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",s,u),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+E+")"+n(n("\\%25|\\%(?!"+i+"{2})")+"("+O+")")+"?\\]?$")}}var u=l(!1),c=l(!0),s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},f=2147483647,p=36,h=1,v=26,g=38,m=700,y=72,b=128,w="-",_=/^xn--/,k=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=p-h,S=Math.floor,x=String.fromCharCode;function j(e){throw new RangeError(E[e])}function I(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}function R(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+I((e=e.replace(C,".")).split("."),t).join(".")}function A(e){for(var t=[],n=0,r=e.length;n<r;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),n--)}else t.push(o)}return t}var D=function(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:p},P=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},M=function(e,t,n){var r=0;for(e=n?S(e/m):e>>1,e+=S(e/t);e>O*v>>1;r+=p)e=S(e/O);return S(r+(O+1)*e/(e+g))},T=function(e){var t=[],n=e.length,r=0,o=b,i=y,a=e.lastIndexOf(w);a<0&&(a=0);for(var l=0;l<a;++l)e.charCodeAt(l)>=128&&j("not-basic"),t.push(e.charCodeAt(l));for(var u=a>0?a+1:0;u<n;){for(var c=r,s=1,d=p;;d+=p){u>=n&&j("invalid-input");var g=D(e.charCodeAt(u++));(g>=p||g>S((f-r)/s))&&j("overflow"),r+=g*s;var m=d<=i?h:d>=i+v?v:d-i;if(g<m)break;var _=p-m;s>S(f/_)&&j("overflow"),s*=_}var k=t.length+1;i=M(r-c,k,0==c),S(r/k)>f-o&&j("overflow"),o+=S(r/k),r%=k,t.splice(r++,0,o)}return String.fromCodePoint.apply(String,t)},F=function(e){var t=[],n=(e=A(e)).length,r=b,o=0,i=y,a=!0,l=!1,u=void 0;try{for(var c,s=e[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var d=c.value;d<128&&t.push(x(d))}}catch(e){l=!0,u=e}finally{try{!a&&s.return&&s.return()}finally{if(l)throw u}}var g=t.length,m=g;for(g&&t.push(w);m<n;){var _=f,k=!0,C=!1,E=void 0;try{for(var O,I=e[Symbol.iterator]();!(k=(O=I.next()).done);k=!0){var R=O.value;R>=r&&R<_&&(_=R)}}catch(e){C=!0,E=e}finally{try{!k&&I.return&&I.return()}finally{if(C)throw E}}var D=m+1;_-r>S((f-o)/D)&&j("overflow"),o+=(_-r)*D,r=_;var T=!0,F=!1,N=void 0;try{for(var V,L=e[Symbol.iterator]();!(T=(V=L.next()).done);T=!0){var B=V.value;if(B<r&&++o>f&&j("overflow"),B==r){for(var $=o,z=p;;z+=p){var U=z<=i?h:z>=i+v?v:z-i;if($<U)break;var H=$-U,q=p-U;t.push(x(P(U+H%q,0))),$=S(H/q)}t.push(x(P($,0))),i=M(o,D,m==g),o=0,++m}}}catch(e){F=!0,N=e}finally{try{!T&&L.return&&L.return()}finally{if(F)throw N}}++o,++r}return t.join("")},N=function(e){return R(e,(function(e){return _.test(e)?T(e.slice(4).toLowerCase()):e}))},V=function(e){return R(e,(function(e){return k.test(e)?"xn--"+F(e):e}))},L={version:"2.1.0",ucs2:{decode:A,encode:function(e){return String.fromCodePoint.apply(String,d(e))}},decode:T,encode:F,toASCII:V,toUnicode:N},B={};function $(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function z(e){for(var t="",n=0,r=e.length;n<r;){var o=parseInt(e.substr(n+1,2),16);if(o<128)t+=String.fromCharCode(o),n+=3;else if(o>=194&&o<224){if(r-n>=6){var i=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&o)<<6|63&i)}else t+=e.substr(n,6);n+=6}else if(o>=224){if(r-n>=9){var a=parseInt(e.substr(n+4,2),16),l=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&o)<<12|(63&a)<<6|63&l)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function U(e,t){function n(e){var n=z(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,$).replace(t.PCT_ENCODED,o)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,$).replace(t.PCT_ENCODED,o)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,$).replace(t.PCT_ENCODED,o)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,$).replace(t.PCT_ENCODED,o)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,$).replace(t.PCT_ENCODED,o)),e}function H(e){return e.replace(/^0*(.*)/,"$1")||"0"}function q(e,t){var n=e.match(t.IPV4ADDRESS)||[],r=s(n,2)[1];return r?r.split(".").map(H).join("."):e}function W(e,t){var n=e.match(t.IPV6ADDRESS)||[],r=s(n,3),o=r[1],i=r[2];if(o){for(var a=o.toLowerCase().split("::").reverse(),l=s(a,2),u=l[0],c=l[1],d=c?c.split(":").map(H):[],f=u.split(":").map(H),p=t.IPV4ADDRESS.test(f[f.length-1]),h=p?7:8,v=f.length-h,g=Array(h),m=0;m<h;++m)g[m]=d[m]||f[v+m]||"";p&&(g[h-1]=q(g[h-1],t));var y=g.reduce((function(e,t,n){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===n?r.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(y&&y.length>1){var w=g.slice(0,y.index),_=g.slice(y.index+y.length);b=w.join(":")+"::"+_.join(":")}else b=g.join(":");return i&&(b+="%"+i),b}return e}var G=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,K=void 0==="".match(/(){0}/)[1];function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?c:u;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var o=e.match(G);if(o){K?(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5])):(n.scheme=o[1]||void 0,n.userinfo=-1!==e.indexOf("@")?o[3]:void 0,n.host=-1!==e.indexOf("//")?o[4]:void 0,n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=-1!==e.indexOf("?")?o[7]:void 0,n.fragment=-1!==e.indexOf("#")?o[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?o[4]:void 0)),n.host&&(n.host=W(q(n.host,r),r)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var i=B[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||i&&i.unicodeSupport)U(n,r);else{if(n.host&&(t.domainHost||i&&i.domainHost))try{n.host=L.toASCII(n.host.replace(r.PCT_ENCODED,z).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}U(n,u)}i&&i.parse&&i.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function X(e,t){var n=!1!==t.iri?c:u,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(W(q(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),("number"==typeof e.port||"string"==typeof e.port)&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var J=/^\.\.?\//,Z=/^\/\.(\/|$)/,Q=/^\/\.\.(\/|$)/,ee=/^\/?(?:.|\n)*?(?=\/|$)/;function te(e){for(var t=[];e.length;)if(e.match(J))e=e.replace(J,"");else if(e.match(Z))e=e.replace(Z,"/");else if(e.match(Q))e=e.replace(Q,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(ee);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?c:u,r=[],o=B[(t.scheme||e.scheme||"").toLowerCase()];if(o&&o.serialize&&o.serialize(e,t),e.host&&!n.IPV6ADDRESS.test(e.host)&&(t.domainHost||o&&o.domainHost))try{e.host=t.iri?L.toUnicode(e.host):L.toASCII(e.host.replace(n.PCT_ENCODED,z).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}U(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var i=X(e,t);if(void 0!==i&&("suffix"!==t.reference&&r.push("//"),r.push(i),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var a=e.path;!t.absolutePath&&(!o||!o.absolutePath)&&(a=te(a)),void 0===i&&(a=a.replace(/^\/\//,"/%2F")),r.push(a)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(e=Y(ne(e,n),n),t=Y(ne(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=te(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=te(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?r.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:r.path=t.path:r.path="/"+t.path,r.path=te(r.path)),r.query=t.query):(r.path=e.path,void 0!==t.query?r.query=t.query:r.query=e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function oe(e,t,n){var r=a({scheme:"null"},n);return ne(re(Y(e,r),Y(t,r),r,!0),r)}function ie(e,t){return"string"==typeof e?e=ne(Y(e,t),t):"object"===r(e)&&(e=Y(ne(e,t),t)),e}function ae(e,t,n){return"string"==typeof e?e=ne(Y(e,n),n):"object"===r(e)&&(e=ne(e,n)),"string"==typeof t?t=ne(Y(t,n),n):"object"===r(t)&&(t=ne(t,n)),e===t}function le(e,t){return e&&e.toString().replace(t&&t.iri?c.ESCAPE:u.ESCAPE,$)}function ue(e,t){return e&&e.toString().replace(t&&t.iri?c.PCT_ENCODED:u.PCT_ENCODED,z)}var ce={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var n="https"===String(e.scheme).toLowerCase();return(e.port===(n?443:80)||""===e.port)&&(e.port=void 0),e.path||(e.path="/"),e}},se={scheme:"https",domainHost:ce.domainHost,parse:ce.parse,serialize:ce.serialize};function de(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var fe={scheme:"ws",domainHost:!0,parse:function(e,t){var n=e;return n.secure=de(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(e,t){if((e.port===(de(e)?443:80)||""===e.port)&&(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),r=s(n,2),o=r[0],i=r[1];e.path=o&&"/"!==o?o:void 0,e.query=i,e.resourceName=void 0}return e.fragment=void 0,e}},pe={scheme:"wss",domainHost:fe.domainHost,parse:fe.parse,serialize:fe.serialize},he={},ve="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ge="[0-9A-Fa-f]",me=n(n("%[EFef]"+ge+"%"+ge+ge+"%"+ge+ge)+"|"+n("%[89A-Fa-f]"+ge+"%"+ge+ge)+"|"+n("%"+ge+ge)),ye="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",be=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),we="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",_e=new RegExp(ve,"g"),ke=new RegExp(me,"g"),Ce=new RegExp(t("[^]",ye,"[\\.]",'[\\"]',be),"g"),Ee=new RegExp(t("[^]",ve,we),"g"),Oe=Ee;function Se(e){var t=z(e);return t.match(_e)?t:e}var xe={scheme:"mailto",parse:function(e,t){var n=e,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var o=!1,i={},a=n.query.split("&"),l=0,u=a.length;l<u;++l){var c=a[l].split("=");switch(c[0]){case"to":for(var s=c[1].split(","),d=0,f=s.length;d<f;++d)r.push(s[d]);break;case"subject":n.subject=ue(c[1],t);break;case"body":n.body=ue(c[1],t);break;default:o=!0,i[ue(c[0],t)]=ue(c[1],t)}}o&&(n.headers=i)}n.query=void 0;for(var p=0,h=r.length;p<h;++p){var v=r[p].split("@");if(v[0]=ue(v[0]),t.unicodeSupport)v[1]=ue(v[1],t).toLowerCase();else try{v[1]=L.toASCII(ue(v[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}r[p]=v.join("@")}return n},serialize:function(e,t){var n=e,r=i(e.to);if(r){for(var a=0,l=r.length;a<l;++a){var u=String(r[a]),c=u.lastIndexOf("@"),s=u.slice(0,c).replace(ke,Se).replace(ke,o).replace(Ce,$),d=u.slice(c+1);try{d=t.iri?L.toUnicode(d):L.toASCII(ue(d,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}r[a]=s+"@"+d}n.path=r.join(",")}var f=e.headers=e.headers||{};e.subject&&(f.subject=e.subject),e.body&&(f.body=e.body);var p=[];for(var h in f)f[h]!==he[h]&&p.push(h.replace(ke,Se).replace(ke,o).replace(Ee,$)+"="+f[h].replace(ke,Se).replace(ke,o).replace(Oe,$));return p.length&&(n.query=p.join("&")),n}},je=/^([^\:]+)\:(.*)/,Ie={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(je),r=e;if(n){var o=t.scheme||r.scheme||"urn",i=n[1].toLowerCase(),a=n[2],l=o+":"+(t.nid||i),u=B[l];r.nid=i,r.nss=a,r.path=void 0,u&&(r=u.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",r=e.nid,o=n+":"+(t.nid||r),i=B[o];i&&(e=i.serialize(e,t));var a=e,l=e.nss;return a.path=(r||t.nid)+":"+l,a}},Re=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ae={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,!t.tolerant&&(!n.uuid||!n.uuid.match(Re))&&(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};B[ce.scheme]=ce,B[se.scheme]=se,B[fe.scheme]=fe,B[pe.scheme]=pe,B[xe.scheme]=xe,B[Ie.scheme]=Ie,B[Ae.scheme]=Ae,e.SCHEMES=B,e.pctEncChar=$,e.pctDecChars=z,e.parse=Y,e.removeDotSegments=te,e.serialize=ne,e.resolveComponents=re,e.resolve=oe,e.normalize=ie,e.equal=ae,e.escapeComponent=le,e.unescapeComponent=ue,Object.defineProperty(e,"__esModule",{value:!0})})(RNe.exports),Object.defineProperty(INe,"__esModule",{value:!0});const ANe=RNe.exports;ANe.code='require("ajv/dist/runtime/uri").default',INe.default=ANe,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=ZMe;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=tTe;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=lNe,o=cNe,i=STe,a=fNe,l=tTe,u=pFe,c=OTe,s=oTe,d=jNe,f=INe,p=(e,t)=>new RegExp(e,t);p.code="new RegExp";const h=["removeAdditional","useDefaults","coerceTypes"],v=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},m={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function y(e){var t,n,r,o,i,a,l,u,c,s,d,h,v,g,m,y,b,w,_,k,C,E,O,S,x;const j=e.strict,I=null===(t=e.code)||void 0===t?void 0:t.optimize,R=!0===I||void 0===I?1:I||0,A=null!==(r=null===(n=e.code)||void 0===n?void 0:n.regExp)&&void 0!==r?r:p,D=null!==(o=e.uriResolver)&&void 0!==o?o:f.default;return{strictSchema:null===(a=null!==(i=e.strictSchema)&&void 0!==i?i:j)||void 0===a||a,strictNumbers:null===(u=null!==(l=e.strictNumbers)&&void 0!==l?l:j)||void 0===u||u,strictTypes:null!==(s=null!==(c=e.strictTypes)&&void 0!==c?c:j)&&void 0!==s?s:"log",strictTuples:null!==(h=null!==(d=e.strictTuples)&&void 0!==d?d:j)&&void 0!==h?h:"log",strictRequired:null!==(g=null!==(v=e.strictRequired)&&void 0!==v?v:j)&&void 0!==g&&g,code:e.code?{...e.code,optimize:R,regExp:A}:{optimize:R,regExp:A},loopRequired:null!==(m=e.loopRequired)&&void 0!==m?m:200,loopEnum:null!==(y=e.loopEnum)&&void 0!==y?y:200,meta:null===(b=e.meta)||void 0===b||b,messages:null===(w=e.messages)||void 0===w||w,inlineRefs:null===(_=e.inlineRefs)||void 0===_||_,schemaId:null!==(k=e.schemaId)&&void 0!==k?k:"$id",addUsedSchema:null===(C=e.addUsedSchema)||void 0===C||C,validateSchema:null===(E=e.validateSchema)||void 0===E||E,validateFormats:null===(O=e.validateFormats)||void 0===O||O,unicodeRegExp:null===(S=e.unicodeRegExp)||void 0===S||S,int32range:null===(x=e.int32range)||void 0===x||x,uriResolver:D}}class b{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...y(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:v,es5:t,lines:n}),this.logger=function(e){if(!1===e)return S;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const r=e.validateFormats;e.validateFormats=!1,this.RULES=(0,i.getRules)(),w.call(this,g,e,"NOT SUPPORTED"),w.call(this,m,e,"DEPRECATED","warn"),this._metaOpts=O.call(this),e.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&E.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),k.call(this),e.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:n}=this.opts;let r=d;"id"===n&&(r={...d},r.id=r.$id,delete r.$id),t&&e&&this.addMetaSchema(r,r[n],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const r=n(t);return"$async"in n||(this.errors=n.errors),r}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return r.call(this,e,t);async function r(e,t){await i.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||a.call(this,n)}async function i(e){e&&!this.getSchema(e)&&await r.call(this,{$ref:e},!0)}async function a(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof o.default))throw t;return l.call(this,t),await u.call(this,t.missingSchema),a.call(this,e)}}function l({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function u(e){const n=await c.call(this,e);this.refs[e]||await i.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,r=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,r);return this}let o;if("object"==typeof e){const{schemaId:t}=this.opts;if(o=e[t],void 0!==o&&"string"!=typeof o)throw new Error(`schema ${t} must be string`)}return t=(0,u.normalizeId)(t||o),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,r,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const r=this.validate(n,e);if(!r&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return r}getSchema(e){let t;for(;"string"==typeof(t=_.call(this,e));)e=t;if(void 0===t){const{schemaId:n}=this.opts,r=new a.SchemaEnv({schema:{},schemaId:n});if(t=a.resolveSchema.call(this,r,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=_.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let n=e[this.opts.schemaId];return n&&(n=(0,u.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(j.call(this,n,t),!t)return(0,s.eachItem)(n,(e=>I.call(this,e))),this;A.call(this,t);const r={...t,type:(0,c.getJSONTypes)(t.type),schemaType:(0,c.getJSONTypes)(t.schemaType)};return(0,s.eachItem)(n,0===r.type.length?e=>I.call(this,e,r):e=>r.type.forEach((t=>I.call(this,e,r,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex((t=>t.keyword===e));t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map((e=>`${n}${e.instancePath} ${e.message}`)).reduce(((e,n)=>e+t+n)):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const r of t){const t=r.split("/").slice(1);let o=e;for(const e of t)o=o[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:r}=t.definition,i=o[e];r&&i&&(o[e]=P(i))}}return e}_removeAllSchemas(e,t){for(const n in e){const r=e[n];(!t||t.test(n))&&("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}_addSchema(e,t,n,r=this.opts.validateSchema,o=this.opts.addUsedSchema){let i;const{schemaId:l}=this.opts;if("object"==typeof e)i=e[l];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(void 0!==c)return c;n=(0,u.normalizeId)(i||n);const s=u.getSchemaRefs.call(this,e,n);return c=new a.SchemaEnv({schema:e,schemaId:l,meta:t,baseId:n,localRefs:s}),this._cache.set(c.schema,c),o&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),r&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):a.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,e)}finally{this.opts=t}}}function w(e,t,n,r="error"){for(const o in e){const i=o;i in t&&this.logger[r](`${n}: option ${o}. ${e[i]}`)}}function _(e){return e=(0,u.normalizeId)(e),this.schemas[e]||this.refs[e]}function k(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function C(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function E(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function O(){const e={...this.opts};for(const t of h)delete e[t];return e}b.ValidationError=r.default,b.MissingRefError=o.default,e.default=b;const S={log(){},warn(){},error(){}};const x=/^[a-z_$][a-z0-9_$:-]*$/i;function j(e,t){const{RULES:n}=this;if((0,s.eachItem)(e,(e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!x.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function I(e,t,n){var r;const o=null==t?void 0:t.post;if(n&&o)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:i}=this;let a=o?i.post:i.rules.find((({type:e})=>e===n));if(a||(a={type:n,rules:[]},i.rules.push(a)),i.keywords[e]=!0,!t)return;const l={keyword:e,definition:{...t,type:(0,c.getJSONTypes)(t.type),schemaType:(0,c.getJSONTypes)(t.schemaType)}};t.before?R.call(this,a,l,t.before):a.rules.push(l),i.all[e]=l,null===(r=t.implements)||void 0===r||r.forEach((e=>this.addKeyword(e)))}function R(e,t,n){const r=e.rules.findIndex((e=>e.keyword===n));r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function A(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=P(t)),e.validateSchema=this.compile(t,!0))}const D={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function P(e){return{anyOf:[e,D]}}}(JMe);var DNe={},PNe={},MNe={};Object.defineProperty(MNe,"__esModule",{value:!0});const TNe={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};MNe.default=TNe;var FNe={};Object.defineProperty(FNe,"__esModule",{value:!0}),FNe.callRef=FNe.getValidate=void 0;const NNe=cNe,VNe=KTe,LNe=tTe,BNe=mTe,$Ne=fNe,zNe=oTe,UNe={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:o,schemaEnv:i,validateName:a,opts:l,self:u}=r,{root:c}=i;if(("#"===n||"#/"===n)&&o===c.baseId)return function(){if(i===c)return qNe(e,a,i,i.$async);const n=t.scopeValue("root",{ref:c});return qNe(e,LNe._`${n}.validate`,c,c.$async)}();const s=$Ne.resolveRef.call(u,c,o,n);if(void 0===s)throw new NNe.default(r.opts.uriResolver,o,n);return s instanceof $Ne.SchemaEnv?function(t){const n=HNe(e,t);qNe(e,n,t,t.$async)}(s):function(r){const o=t.scopeValue("schema",!0===l.code.source?{ref:r,code:(0,LNe.stringify)(r)}:{ref:r}),i=t.name("valid"),a=e.subschema({schema:r,dataTypes:[],schemaPath:LNe.nil,topSchemaRef:o,errSchemaPath:n},i);e.mergeEvaluated(a),e.ok(i)}(s)}};function HNe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):LNe._`${n.scopeValue("wrapper",{ref:t})}.validate`}function qNe(e,t,n,r){const{gen:o,it:i}=e,{allErrors:a,schemaEnv:l,opts:u}=i,c=u.passContext?BNe.default.this:LNe.nil;function s(e){const t=LNe._`${e}.errors`;o.assign(BNe.default.vErrors,LNe._`${BNe.default.vErrors} === null ? ${t} : ${BNe.default.vErrors}.concat(${t})`),o.assign(BNe.default.errors,LNe._`${BNe.default.vErrors}.length`)}function d(e){var t;if(!i.opts.unevaluated)return;const r=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==i.props)if(r&&!r.dynamicProps)void 0!==r.props&&(i.props=zNe.mergeEvaluated.props(o,r.props,i.props));else{const t=o.var("props",LNe._`${e}.evaluated.props`);i.props=zNe.mergeEvaluated.props(o,t,i.props,LNe.Name)}if(!0!==i.items)if(r&&!r.dynamicItems)void 0!==r.items&&(i.items=zNe.mergeEvaluated.items(o,r.items,i.items));else{const t=o.var("items",LNe._`${e}.evaluated.items`);i.items=zNe.mergeEvaluated.items(o,t,i.items,LNe.Name)}}r?function(){if(!l.$async)throw new Error("async schema referenced by sync schema");const n=o.let("valid");o.try((()=>{o.code(LNe._`await ${(0,VNe.callValidateCode)(e,t,c)}`),d(t),a||o.assign(n,!0)}),(e=>{o.if(LNe._`!(${e} instanceof ${i.ValidationError})`,(()=>o.throw(e))),s(e),a||o.assign(n,!1)})),e.ok(n)}():e.result((0,VNe.callValidateCode)(e,t,c),(()=>d(t)),(()=>s(t)))}FNe.getValidate=HNe,FNe.callRef=qNe,FNe.default=UNe,Object.defineProperty(PNe,"__esModule",{value:!0});const WNe=FNe,GNe=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",MNe.default,WNe.default];PNe.default=GNe;var KNe={},YNe={};Object.defineProperty(YNe,"__esModule",{value:!0});const XNe=tTe,JNe=XNe.operators,ZNe={maximum:{okStr:"<=",ok:JNe.LTE,fail:JNe.GT},minimum:{okStr:">=",ok:JNe.GTE,fail:JNe.LT},exclusiveMaximum:{okStr:"<",ok:JNe.LT,fail:JNe.GTE},exclusiveMinimum:{okStr:">",ok:JNe.GT,fail:JNe.LTE}},QNe={message:({keyword:e,schemaCode:t})=>XNe.str`must be ${ZNe[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>XNe._`{comparison: ${ZNe[e].okStr}, limit: ${t}}`},eVe={keyword:Object.keys(ZNe),type:"number",schemaType:"number",$data:!0,error:QNe,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data(XNe._`${n} ${ZNe[t].fail} ${r} || isNaN(${n})`)}};YNe.default=eVe;var tVe={};Object.defineProperty(tVe,"__esModule",{value:!0});const nVe=tTe,rVe={message:({schemaCode:e})=>nVe.str`must be multiple of ${e}`,params:({schemaCode:e})=>nVe._`{multipleOf: ${e}}`},oVe={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:rVe,code(e){const{gen:t,data:n,schemaCode:r,it:o}=e,i=o.opts.multipleOfPrecision,a=t.let("res"),l=i?nVe._`Math.abs(Math.round(${a}) - ${a}) > 1e-${i}`:nVe._`${a} !== parseInt(${a})`;e.fail$data(nVe._`(${r} === 0 || (${a} = ${n}/${r}, ${l}))`)}};tVe.default=oVe;var iVe={},aVe={};function lVe(e){const t=e.length;let n,r=0,o=0;for(;o<t;)r++,n=e.charCodeAt(o++),n>=55296&&n<=56319&&o<t&&(n=e.charCodeAt(o),56320==(64512&n)&&o++);return r}Object.defineProperty(aVe,"__esModule",{value:!0}),aVe.default=lVe,lVe.code='require("ajv/dist/runtime/ucs2length").default',Object.defineProperty(iVe,"__esModule",{value:!0});const uVe=tTe,cVe=oTe,sVe=aVe,dVe={message:({keyword:e,schemaCode:t})=>uVe.str`must NOT have ${"maxLength"===e?"more":"fewer"} than ${t} characters`,params:({schemaCode:e})=>uVe._`{limit: ${e}}`},fVe={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:dVe,code(e){const{keyword:t,data:n,schemaCode:r,it:o}=e,i="maxLength"===t?uVe.operators.GT:uVe.operators.LT,a=!1===o.opts.unicode?uVe._`${n}.length`:uVe._`${(0,cVe.useFunc)(e.gen,sVe.default)}(${n})`;e.fail$data(uVe._`${a} ${i} ${r}`)}};iVe.default=fVe;var pVe={};Object.defineProperty(pVe,"__esModule",{value:!0});const hVe=KTe,vVe=tTe,gVe={message:({schemaCode:e})=>vVe.str`must match pattern "${e}"`,params:({schemaCode:e})=>vVe._`{pattern: ${e}}`},mVe={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:gVe,code(e){const{data:t,$data:n,schema:r,schemaCode:o,it:i}=e,a=i.opts.unicodeRegExp?"u":"",l=n?vVe._`(new RegExp(${o}, ${a}))`:(0,hVe.usePattern)(e,r);e.fail$data(vVe._`!${l}.test(${t})`)}};pVe.default=mVe;var yVe={};Object.defineProperty(yVe,"__esModule",{value:!0});const bVe=tTe,wVe={message:({keyword:e,schemaCode:t})=>bVe.str`must NOT have ${"maxProperties"===e?"more":"fewer"} than ${t} properties`,params:({schemaCode:e})=>bVe._`{limit: ${e}}`},_Ve={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:wVe,code(e){const{keyword:t,data:n,schemaCode:r}=e,o="maxProperties"===t?bVe.operators.GT:bVe.operators.LT;e.fail$data(bVe._`Object.keys(${n}).length ${o} ${r}`)}};yVe.default=_Ve;var kVe={};Object.defineProperty(kVe,"__esModule",{value:!0});const CVe=KTe,EVe=tTe,OVe=oTe,SVe={message:({params:{missingProperty:e}})=>EVe.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>EVe._`{missingProperty: ${e}}`},xVe={keyword:"required",type:"object",schemaType:"array",$data:!0,error:SVe,code(e){const{gen:t,schema:n,schemaCode:r,data:o,$data:i,it:a}=e,{opts:l}=a;if(!i&&0===n.length)return;const u=n.length>=l.loopRequired;if(a.allErrors?function(){if(u||i)e.block$data(EVe.nil,c);else for(const t of n)(0,CVe.checkReportMissingProp)(e,t)}():function(){const a=t.let("missing");if(u||i){const n=t.let("valid",!0);e.block$data(n,(()=>function(n,i){e.setParams({missingProperty:n}),t.forOf(n,r,(()=>{t.assign(i,(0,CVe.propertyInData)(t,o,n,l.ownProperties)),t.if((0,EVe.not)(i),(()=>{e.error(),t.break()}))}),EVe.nil)}(a,n))),e.ok(n)}else t.if((0,CVe.checkMissingProp)(e,n,a)),(0,CVe.reportMissingProp)(e,a),t.else()}(),l.strictRequired){const t=e.parentSchema.properties,{definedProperties:r}=e.it;for(const e of n)if(void 0===(null==t?void 0:t[e])&&!r.has(e)){const t=`required property "${e}" is not defined at "${a.schemaEnv.baseId+a.errSchemaPath}" (strictRequired)`;(0,OVe.checkStrictMode)(a,t,a.opts.strictRequired)}}function c(){t.forOf("prop",r,(n=>{e.setParams({missingProperty:n}),t.if((0,CVe.noPropertyInData)(t,o,n,l.ownProperties),(()=>e.error()))}))}}};kVe.default=xVe;var jVe={};Object.defineProperty(jVe,"__esModule",{value:!0});const IVe=tTe,RVe={message:({keyword:e,schemaCode:t})=>IVe.str`must NOT have ${"maxItems"===e?"more":"fewer"} than ${t} items`,params:({schemaCode:e})=>IVe._`{limit: ${e}}`},AVe={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:RVe,code(e){const{keyword:t,data:n,schemaCode:r}=e,o="maxItems"===t?IVe.operators.GT:IVe.operators.LT;e.fail$data(IVe._`${n}.length ${o} ${r}`)}};jVe.default=AVe;var DVe={},PVe={};Object.defineProperty(PVe,"__esModule",{value:!0});const MVe=hFe;MVe.code='require("ajv/dist/runtime/equal").default',PVe.default=MVe,Object.defineProperty(DVe,"__esModule",{value:!0});const TVe=OTe,FVe=tTe,NVe=oTe,VVe=PVe,LVe={message:({params:{i:e,j:t}})=>FVe.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>FVe._`{i: ${e}, j: ${t}}`},BVe={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:LVe,code(e){const{gen:t,data:n,$data:r,schema:o,parentSchema:i,schemaCode:a,it:l}=e;if(!r&&!o)return;const u=t.let("valid"),c=i.items?(0,TVe.getSchemaTypes)(i.items):[];function s(r,o){const i=t.name("item"),a=(0,TVe.checkDataTypes)(c,i,l.opts.strictNumbers,TVe.DataType.Wrong),s=t.const("indices",FVe._`{}`);t.for(FVe._`;${r}--;`,(()=>{t.let(i,FVe._`${n}[${r}]`),t.if(a,FVe._`continue`),c.length>1&&t.if(FVe._`typeof ${i} == "string"`,FVe._`${i} += "_"`),t.if(FVe._`typeof ${s}[${i}] == "number"`,(()=>{t.assign(o,FVe._`${s}[${i}]`),e.error(),t.assign(u,!1).break()})).code(FVe._`${s}[${i}] = ${r}`)}))}function d(r,o){const i=(0,NVe.useFunc)(t,VVe.default),a=t.name("outer");t.label(a).for(FVe._`;${r}--;`,(()=>t.for(FVe._`${o} = ${r}; ${o}--;`,(()=>t.if(FVe._`${i}(${n}[${r}], ${n}[${o}])`,(()=>{e.error(),t.assign(u,!1).break(a)}))))))}e.block$data(u,(function(){const r=t.let("i",FVe._`${n}.length`),o=t.let("j");e.setParams({i:r,j:o}),t.assign(u,!0),t.if(FVe._`${r} > 1`,(()=>(c.length>0&&!c.some((e=>"object"===e||"array"===e))?s:d)(r,o)))}),FVe._`${a} === false`),e.ok(u)}};DVe.default=BVe;var $Ve={};Object.defineProperty($Ve,"__esModule",{value:!0});const zVe=tTe,UVe=oTe,HVe=PVe,qVe={message:"must be equal to constant",params:({schemaCode:e})=>zVe._`{allowedValue: ${e}}`},WVe={keyword:"const",$data:!0,error:qVe,code(e){const{gen:t,data:n,$data:r,schemaCode:o,schema:i}=e;r||i&&"object"==typeof i?e.fail$data(zVe._`!${(0,UVe.useFunc)(t,HVe.default)}(${n}, ${o})`):e.fail(zVe._`${i} !== ${n}`)}};$Ve.default=WVe;var GVe={};Object.defineProperty(GVe,"__esModule",{value:!0});const KVe=tTe,YVe=oTe,XVe=PVe,JVe={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>KVe._`{allowedValues: ${e}}`},ZVe={keyword:"enum",schemaType:"array",$data:!0,error:JVe,code(e){const{gen:t,data:n,$data:r,schema:o,schemaCode:i,it:a}=e;if(!r&&0===o.length)throw new Error("enum must have non-empty array");const l=o.length>=a.opts.loopEnum;let u;const c=()=>null!=u?u:u=(0,YVe.useFunc)(t,XVe.default);let s;if(l||r)s=t.let("valid"),e.block$data(s,(function(){t.assign(s,!1),t.forOf("v",i,(e=>t.if(KVe._`${c()}(${n}, ${e})`,(()=>t.assign(s,!0).break()))))}));else{if(!Array.isArray(o))throw new Error("ajv implementation error");const e=t.const("vSchema",i);s=(0,KVe.or)(...o.map(((t,r)=>function(e,t){const r=o[t];return"object"==typeof r&&null!==r?KVe._`${c()}(${n}, ${e}[${t}])`:KVe._`${n} === ${r}`}(e,r))))}e.pass(s)}};GVe.default=ZVe,Object.defineProperty(KNe,"__esModule",{value:!0});const QVe=tVe,eLe=iVe,tLe=pVe,nLe=yVe,rLe=kVe,oLe=jVe,iLe=DVe,aLe=$Ve,lLe=GVe,uLe=[YNe.default,QVe.default,eLe.default,tLe.default,nLe.default,rLe.default,oLe.default,iLe.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},aLe.default,lLe.default];KNe.default=uLe;var cLe={},sLe={};Object.defineProperty(sLe,"__esModule",{value:!0}),sLe.validateAdditionalItems=void 0;const dLe=tTe,fLe=oTe,pLe={message:({params:{len:e}})=>dLe.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>dLe._`{limit: ${e}}`},hLe={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:pLe,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;Array.isArray(r)?vLe(e,r):(0,fLe.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function vLe(e,t){const{gen:n,schema:r,data:o,keyword:i,it:a}=e;a.items=!0;const l=n.const("len",dLe._`${o}.length`);if(!1===r)e.setParams({len:t.length}),e.pass(dLe._`${l} <= ${t.length}`);else if("object"==typeof r&&!(0,fLe.alwaysValidSchema)(a,r)){const r=n.var("valid",dLe._`${l} <= ${t.length}`);n.if((0,dLe.not)(r),(()=>function(r){n.forRange("i",t.length,l,(t=>{e.subschema({keyword:i,dataProp:t,dataPropType:fLe.Type.Num},r),a.allErrors||n.if((0,dLe.not)(r),(()=>n.break()))}))}(r))),e.ok(r)}}sLe.validateAdditionalItems=vLe,sLe.default=hLe;var gLe={},mLe={};Object.defineProperty(mLe,"__esModule",{value:!0}),mLe.validateTuple=void 0;const yLe=tTe,bLe=oTe,wLe=KTe,_Le={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return kLe(e,"additionalItems",t);n.items=!0,!(0,bLe.alwaysValidSchema)(n,t)&&e.ok((0,wLe.validateArray)(e))}};function kLe(e,t,n=e.schema){const{gen:r,parentSchema:o,data:i,keyword:a,it:l}=e;(function(e){const{opts:r,errSchemaPath:o}=l,i=n.length,u=i===e.minItems&&(i===e.maxItems||!1===e[t]);if(r.strictTuples&&!u){const e=`"${a}" is ${i}-tuple, but minItems or maxItems/${t} are not specified or different at path "${o}"`;(0,bLe.checkStrictMode)(l,e,r.strictTuples)}})(o),l.opts.unevaluated&&n.length&&!0!==l.items&&(l.items=bLe.mergeEvaluated.items(r,n.length,l.items));const u=r.name("valid"),c=r.const("len",yLe._`${i}.length`);n.forEach(((t,n)=>{(0,bLe.alwaysValidSchema)(l,t)||(r.if(yLe._`${c} > ${n}`,(()=>e.subschema({keyword:a,schemaProp:n,dataProp:n},u))),e.ok(u))}))}mLe.validateTuple=kLe,mLe.default=_Le,Object.defineProperty(gLe,"__esModule",{value:!0});const CLe=mLe,ELe={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,CLe.validateTuple)(e,"items")};gLe.default=ELe;var OLe={};Object.defineProperty(OLe,"__esModule",{value:!0});const SLe=tTe,xLe=oTe,jLe=KTe,ILe=sLe,RLe={message:({params:{len:e}})=>SLe.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>SLe._`{limit: ${e}}`},ALe={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:RLe,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:o}=n;r.items=!0,!(0,xLe.alwaysValidSchema)(r,t)&&(o?(0,ILe.validateAdditionalItems)(e,o):e.ok((0,jLe.validateArray)(e)))}};OLe.default=ALe;var DLe={};Object.defineProperty(DLe,"__esModule",{value:!0});const PLe=tTe,MLe=oTe,TLe={message:({params:{min:e,max:t}})=>void 0===t?PLe.str`must contain at least ${e} valid item(s)`:PLe.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?PLe._`{minContains: ${e}}`:PLe._`{minContains: ${e}, maxContains: ${t}}`},FLe={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:TLe,code(e){const{gen:t,schema:n,parentSchema:r,data:o,it:i}=e;let a,l;const{minContains:u,maxContains:c}=r;i.opts.next?(a=void 0===u?1:u,l=c):a=1;const s=t.const("len",PLe._`${o}.length`);if(e.setParams({min:a,max:l}),void 0===l&&0===a)return void(0,MLe.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==l&&a>l)return(0,MLe.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,MLe.alwaysValidSchema)(i,n)){let t=PLe._`${s} >= ${a}`;return void 0!==l&&(t=PLe._`${t} && ${s} <= ${l}`),void e.pass(t)}i.items=!0;const d=t.name("valid");function f(){const e=t.name("_valid"),n=t.let("count",0);p(e,(()=>t.if(e,(()=>function(e){t.code(PLe._`${e}++`),void 0===l?t.if(PLe._`${e} >= ${a}`,(()=>t.assign(d,!0).break())):(t.if(PLe._`${e} > ${l}`,(()=>t.assign(d,!1).break())),1===a?t.assign(d,!0):t.if(PLe._`${e} >= ${a}`,(()=>t.assign(d,!0))))}(n)))))}function p(n,r){t.forRange("i",0,s,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:MLe.Type.Num,compositeRule:!0},n),r()}))}void 0===l&&1===a?p(d,(()=>t.if(d,(()=>t.break())))):0===a?(t.let(d,!0),void 0!==l&&t.if(PLe._`${o}.length > 0`,f)):(t.let(d,!1),f()),e.result(d,(()=>e.reset()))}};DLe.default=FLe;var NLe={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=tTe,n=oTe,r=KTe;e.error={message:({params:{property:e,depsCount:n,deps:r}})=>t.str`must have ${1===n?"property":"properties"} ${r} when property ${e} is present`,params:({params:{property:e,depsCount:n,deps:r,missingProperty:o}})=>t._`{property: ${e},
    missingProperty: ${o},
    depsCount: ${n},
    deps: ${r}}`};const o={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const r in e){if("__proto__"===r)continue;(Array.isArray(e[r])?t:n)[r]=e[r]}return[t,n]}(e);i(e,t),a(e,n)}};function i(e,n=e.schema){const{gen:o,data:i,it:a}=e;if(0===Object.keys(n).length)return;const l=o.let("missing");for(const u in n){const c=n[u];if(0===c.length)continue;const s=(0,r.propertyInData)(o,i,u,a.opts.ownProperties);e.setParams({property:u,depsCount:c.length,deps:c.join(", ")}),a.allErrors?o.if(s,(()=>{for(const t of c)(0,r.checkReportMissingProp)(e,t)})):(o.if(t._`${s} && (${(0,r.checkMissingProp)(e,c,l)})`),(0,r.reportMissingProp)(e,l),o.else())}}function a(e,t=e.schema){const{gen:o,data:i,keyword:a,it:l}=e,u=o.name("valid");for(const c in t)(0,n.alwaysValidSchema)(l,t[c])||(o.if((0,r.propertyInData)(o,i,c,l.opts.ownProperties),(()=>{const t=e.subschema({keyword:a,schemaProp:c},u);e.mergeValidEvaluated(t,u)}),(()=>o.var(u,!0))),e.ok(u))}e.validatePropertyDeps=i,e.validateSchemaDeps=a,e.default=o}(NLe);var VLe={};Object.defineProperty(VLe,"__esModule",{value:!0});const LLe=tTe,BLe=oTe,$Le={message:"property name must be valid",params:({params:e})=>LLe._`{propertyName: ${e.propertyName}}`},zLe={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:$Le,code(e){const{gen:t,schema:n,data:r,it:o}=e;if((0,BLe.alwaysValidSchema)(o,n))return;const i=t.name("valid");t.forIn("key",r,(n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},i),t.if((0,LLe.not)(i),(()=>{e.error(!0),o.allErrors||t.break()}))})),e.ok(i)}};VLe.default=zLe;var ULe={};Object.defineProperty(ULe,"__esModule",{value:!0});const HLe=KTe,qLe=tTe,WLe=mTe,GLe=oTe,KLe={message:"must NOT have additional properties",params:({params:e})=>qLe._`{additionalProperty: ${e.additionalProperty}}`},YLe={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:KLe,code(e){const{gen:t,schema:n,parentSchema:r,data:o,errsCount:i,it:a}=e;if(!i)throw new Error("ajv implementation error");const{allErrors:l,opts:u}=a;if(a.props=!0,"all"!==u.removeAdditional&&(0,GLe.alwaysValidSchema)(a,n))return;const c=(0,HLe.allSchemaProperties)(r.properties),s=(0,HLe.allSchemaProperties)(r.patternProperties);function d(e){t.code(qLe._`delete ${o}[${e}]`)}function f(r){if("all"===u.removeAdditional||u.removeAdditional&&!1===n)d(r);else{if(!1===n)return e.setParams({additionalProperty:r}),e.error(),void(l||t.break());if("object"==typeof n&&!(0,GLe.alwaysValidSchema)(a,n)){const n=t.name("valid");"failing"===u.removeAdditional?(p(r,n,!1),t.if((0,qLe.not)(n),(()=>{e.reset(),d(r)}))):(p(r,n),l||t.if((0,qLe.not)(n),(()=>t.break())))}}}function p(t,n,r){const o={keyword:"additionalProperties",dataProp:t,dataPropType:GLe.Type.Str};!1===r&&Object.assign(o,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(o,n)}t.forIn("key",o,(n=>{c.length||s.length?t.if(function(n){let o;if(c.length>8){const e=(0,GLe.schemaRefOrVal)(a,r.properties,"properties");o=(0,HLe.isOwnProperty)(t,e,n)}else o=c.length?(0,qLe.or)(...c.map((e=>qLe._`${n} === ${e}`))):qLe.nil;return s.length&&(o=(0,qLe.or)(o,...s.map((t=>qLe._`${(0,HLe.usePattern)(e,t)}.test(${n})`)))),(0,qLe.not)(o)}(n),(()=>f(n))):f(n)})),e.ok(qLe._`${i} === ${WLe.default.errors}`)}};ULe.default=YLe;var XLe={};Object.defineProperty(XLe,"__esModule",{value:!0});const JLe=ZMe,ZLe=KTe,QLe=oTe,eBe=ULe,tBe={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:o,it:i}=e;"all"===i.opts.removeAdditional&&void 0===r.additionalProperties&&eBe.default.code(new JLe.KeywordCxt(i,eBe.default,"additionalProperties"));const a=(0,ZLe.allSchemaProperties)(n);for(const e of a)i.definedProperties.add(e);i.opts.unevaluated&&a.length&&!0!==i.props&&(i.props=QLe.mergeEvaluated.props(t,(0,QLe.toHash)(a),i.props));const l=a.filter((e=>!(0,QLe.alwaysValidSchema)(i,n[e])));if(0===l.length)return;const u=t.name("valid");for(const n of l)c(n)?s(n):(t.if((0,ZLe.propertyInData)(t,o,n,i.opts.ownProperties)),s(n),i.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(u);function c(e){return i.opts.useDefaults&&!i.compositeRule&&void 0!==n[e].default}function s(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},u)}}};XLe.default=tBe;var nBe={};Object.defineProperty(nBe,"__esModule",{value:!0});const rBe=KTe,oBe=tTe,iBe=oTe,aBe=oTe,lBe={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:o,it:i}=e,{opts:a}=i,l=(0,rBe.allSchemaProperties)(n),u=l.filter((e=>(0,iBe.alwaysValidSchema)(i,n[e])));if(0===l.length||u.length===l.length&&(!i.opts.unevaluated||!0===i.props))return;const c=a.strictSchema&&!a.allowMatchingProperties&&o.properties,s=t.name("valid");!0!==i.props&&!(i.props instanceof oBe.Name)&&(i.props=(0,aBe.evaluatedPropsToName)(t,i.props));const{props:d}=i;function f(e){for(const t in c)new RegExp(e).test(t)&&(0,iBe.checkStrictMode)(i,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function p(n){t.forIn("key",r,(r=>{t.if(oBe._`${(0,rBe.usePattern)(e,n)}.test(${r})`,(()=>{const o=u.includes(n);o||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:r,dataPropType:aBe.Type.Str},s),i.opts.unevaluated&&!0!==d?t.assign(oBe._`${d}[${r}]`,!0):!o&&!i.allErrors&&t.if((0,oBe.not)(s),(()=>t.break()))}))}))}!function(){for(const e of l)c&&f(e),i.allErrors?p(e):(t.var(s,!0),p(e),t.if(s))}()}};nBe.default=lBe;var uBe={};Object.defineProperty(uBe,"__esModule",{value:!0});const cBe=oTe,sBe={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,cBe.alwaysValidSchema)(r,n))return void e.fail();const o=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),e.failResult(o,(()=>e.reset()),(()=>e.error()))},error:{message:"must NOT be valid"}};uBe.default=sBe;var dBe={};Object.defineProperty(dBe,"__esModule",{value:!0});const fBe={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:KTe.validateUnion,error:{message:"must match a schema in anyOf"}};dBe.default=fBe;var pBe={};Object.defineProperty(pBe,"__esModule",{value:!0});const hBe=tTe,vBe=oTe,gBe={message:"must match exactly one schema in oneOf",params:({params:e})=>hBe._`{passingSchemas: ${e.passing}}`},mBe={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:gBe,code(e){const{gen:t,schema:n,parentSchema:r,it:o}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(o.opts.discriminator&&r.discriminator)return;const i=n,a=t.let("valid",!1),l=t.let("passing",null),u=t.name("_valid");e.setParams({passing:l}),t.block((function(){i.forEach(((n,r)=>{let i;(0,vBe.alwaysValidSchema)(o,n)?t.var(u,!0):i=e.subschema({keyword:"oneOf",schemaProp:r,compositeRule:!0},u),r>0&&t.if(hBe._`${u} && ${a}`).assign(a,!1).assign(l,hBe._`[${l}, ${r}]`).else(),t.if(u,(()=>{t.assign(a,!0),t.assign(l,r),i&&e.mergeEvaluated(i,hBe.Name)}))}))})),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}};pBe.default=mBe;var yBe={};Object.defineProperty(yBe,"__esModule",{value:!0});const bBe=oTe,wBe={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const o=t.name("valid");n.forEach(((t,n)=>{if((0,bBe.alwaysValidSchema)(r,t))return;const i=e.subschema({keyword:"allOf",schemaProp:n},o);e.ok(o),e.mergeEvaluated(i)}))}};yBe.default=wBe;var _Be={};Object.defineProperty(_Be,"__esModule",{value:!0});const kBe=tTe,CBe=oTe,EBe={message:({params:e})=>kBe.str`must match "${e.ifClause}" schema`,params:({params:e})=>kBe._`{failingKeyword: ${e.ifClause}}`},OBe={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:EBe,code(e){const{gen:t,parentSchema:n,it:r}=e;void 0===n.then&&void 0===n.else&&(0,CBe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const o=SBe(r,"then"),i=SBe(r,"else");if(!o&&!i)return;const a=t.let("valid",!0),l=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},l);e.mergeEvaluated(t)}(),e.reset(),o&&i){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(l,u("then",n),u("else",n))}else o?t.if(l,u("then")):t.if((0,kBe.not)(l),u("else"));function u(n,r){return()=>{const o=e.subschema({keyword:n},l);t.assign(a,l),e.mergeValidEvaluated(o,a),r?t.assign(r,kBe._`${n}`):e.setParams({ifClause:n})}}e.pass(a,(()=>e.error(!0)))}};function SBe(e,t){const n=e.schema[t];return void 0!==n&&!(0,CBe.alwaysValidSchema)(e,n)}_Be.default=OBe;var xBe={};Object.defineProperty(xBe,"__esModule",{value:!0});const jBe=oTe,IBe={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&(0,jBe.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};xBe.default=IBe,Object.defineProperty(cLe,"__esModule",{value:!0});const RBe=sLe,ABe=gLe,DBe=mLe,PBe=OLe,MBe=DLe,TBe=NLe,FBe=VLe,NBe=ULe,VBe=XLe,LBe=nBe,BBe=uBe,$Be=dBe,zBe=pBe,UBe=yBe,HBe=_Be,qBe=xBe;cLe.default=function(e=!1){const t=[BBe.default,$Be.default,zBe.default,UBe.default,HBe.default,qBe.default,FBe.default,NBe.default,TBe.default,VBe.default,LBe.default];return e?t.push(ABe.default,PBe.default):t.push(RBe.default,DBe.default),t.push(MBe.default),t};var WBe={},GBe={};Object.defineProperty(GBe,"__esModule",{value:!0});const KBe=tTe,YBe={message:({schemaCode:e})=>KBe.str`must match format "${e}"`,params:({schemaCode:e})=>KBe._`{format: ${e}}`},XBe={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:YBe,code(e,t){const{gen:n,data:r,$data:o,schema:i,schemaCode:a,it:l}=e,{opts:u,errSchemaPath:c,schemaEnv:s,self:d}=l;u.validateFormats&&(o?function(){const o=n.scopeValue("formats",{ref:d.formats,code:u.code.formats}),i=n.const("fDef",KBe._`${o}[${a}]`),l=n.let("fType"),c=n.let("format");n.if(KBe._`typeof ${i} == "object" && !(${i} instanceof RegExp)`,(()=>n.assign(l,KBe._`${i}.type || "string"`).assign(c,KBe._`${i}.validate`)),(()=>n.assign(l,KBe._`"string"`).assign(c,i))),e.fail$data((0,KBe.or)(!1===u.strictSchema?KBe.nil:KBe._`${a} && !${c}`,function(){const e=s.$async?KBe._`(${i}.async ? await ${c}(${r}) : ${c}(${r}))`:KBe._`${c}(${r})`,n=KBe._`(typeof ${c} == "function" ? ${e} : ${c}.test(${r}))`;return KBe._`${c} && ${c} !== true && ${l} === ${t} && !${n}`}()))}():function(){const o=d.formats[i];if(!o)return void function(){if(!1===u.strictSchema)return void d.logger.warn(e());throw new Error(e());function e(){return`unknown format "${i}" ignored in schema at path "${c}"`}}();if(!0===o)return;const[a,l,f]=function(e){const t=e instanceof RegExp?(0,KBe.regexpCode)(e):u.code.formats?KBe._`${u.code.formats}${(0,KBe.getProperty)(i)}`:void 0,r=n.scopeValue("formats",{key:i,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,r]:[e.type||"string",e.validate,KBe._`${r}.validate`]}(o);a===t&&e.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!s.$async)throw new Error("async format in sync schema");return KBe._`await ${f}(${r})`}return"function"==typeof l?KBe._`${f}(${r})`:KBe._`${f}.test(${r})`}())}())}};GBe.default=XBe,Object.defineProperty(WBe,"__esModule",{value:!0});const JBe=[GBe.default];WBe.default=JBe;var ZBe={};Object.defineProperty(ZBe,"__esModule",{value:!0}),ZBe.contentVocabulary=ZBe.metadataVocabulary=void 0,ZBe.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],ZBe.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"],Object.defineProperty(DNe,"__esModule",{value:!0});const QBe=KNe,e$e=cLe,t$e=WBe,n$e=ZBe,r$e=[PNe.default,QBe.default,(0,e$e.default)(),t$e.default,n$e.metadataVocabulary,n$e.contentVocabulary];DNe.default=r$e;var o$e,i$e={},a$e={};Object.defineProperty(a$e,"__esModule",{value:!0}),a$e.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(o$e||(a$e.DiscrError=o$e={})),Object.defineProperty(i$e,"__esModule",{value:!0});const l$e=tTe,u$e=a$e,c$e=fNe,s$e=cNe,d$e=oTe,f$e={message:({params:{discrError:e,tagName:t}})=>e===u$e.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>l$e._`{error: ${e}, tag: ${n}, tagValue: ${t}}`},p$e={keyword:"discriminator",type:"object",schemaType:"object",error:f$e,code(e){const{gen:t,data:n,schema:r,parentSchema:o,it:i}=e,{oneOf:a}=o;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const l=r.propertyName;if("string"!=typeof l)throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),c=t.const("tag",l$e._`${n}${(0,l$e.getProperty)(l)}`);function s(n){const r=t.name("valid"),o=e.subschema({keyword:"oneOf",schemaProp:n},r);return e.mergeEvaluated(o,l$e.Name),r}t.if(l$e._`typeof ${c} == "string"`,(()=>function(){const n=function(){var e;const t={},n=u(o);let r=!0;for(let t=0;t<a.length;t++){let o=a[t];if((null==o?void 0:o.$ref)&&!(0,d$e.schemaHasRulesButRef)(o,i.self.RULES)){const e=o.$ref;if(o=c$e.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,e),o instanceof c$e.SchemaEnv&&(o=o.schema),void 0===o)throw new s$e.default(i.opts.uriResolver,i.baseId,e)}const s=null===(e=null==o?void 0:o.properties)||void 0===e?void 0:e[l];if("object"!=typeof s)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${l}"`);r=r&&(n||u(o)),c(s,t)}if(!r)throw new Error(`discriminator: "${l}" must be required`);return t;function u({required:e}){return Array.isArray(e)&&e.includes(l)}function c(e,t){if(e.const)s(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${l}" must have "const" or "enum"`);for(const n of e.enum)s(n,t)}}function s(e,n){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${l}" values must be unique strings`);t[e]=n}}();t.if(!1);for(const e in n)t.elseIf(l$e._`${c} === ${e}`),t.assign(u,s(n[e]));t.else(),e.error(!1,{discrError:u$e.DiscrError.Mapping,tag:c,tagName:l}),t.endIf()}()),(()=>e.error(!1,{discrError:u$e.DiscrError.Tag,tag:c,tagName:l}))),e.ok(u)}};i$e.default=p$e;const h$e={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=JMe,r=DNe,o=i$e,i=h$e,a=["/properties"],l="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach((e=>this.addVocabulary(e))),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(i,a):i;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var c=ZMe;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var s=tTe;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});var d=lNe;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.default}});var f=cNe;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return f.default}})}(XMe,XMe.exports);var v$e={exports:{}},g$e={exports:{}},m$e={exports:{}},y$e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=tTe,r=["undefined","string","number","object","function","boolean","symbol"];function o(){return{keyword:"typeof",schemaType:["string","array"],code(e){const{data:t,schema:r,schemaValue:o}=e;e.fail("string"==typeof r?n._`typeof ${t} != ${r}`:n._`${o}.indexOf(typeof ${t}) < 0`)},metaSchema:{anyOf:[{type:"string",enum:r},{type:"array",items:{type:"string",enum:r}}]}}}t.default=o,e.exports=o}(y$e,y$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(y$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}(m$e,m$e.exports);var b$e={exports:{}},w$e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n={Object:Object,Array:Array,Function:Function,Number:Number,String:String,Date:Date,RegExp:RegExp};typeof Of.Buffer<"u"&&(n.Buffer=Of.Buffer),typeof Promise<"u"&&(n.Promise=Promise);const r=Object.assign((function(){return{keyword:"instanceof",schemaType:["string","array"],compile(e){if("string"==typeof e){const t=o(e);return e=>e instanceof t}if(Array.isArray(e)){const t=e.map(o);return e=>{for(const n of t)if(e instanceof n)return!0;return!1}}throw new Error("ajv implementation error")},metaSchema:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}]}}}),{CONSTRUCTORS:n});function o(e){const t=n[e];if(t)return t;throw new Error(`invalid "instanceof" keyword value ${e}`)}t.default=r,e.exports=r}(w$e,w$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(w$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}(b$e,b$e.exports);var _$e={exports:{}},k$e={exports:{}},C$e={};Object.defineProperty(C$e,"__esModule",{value:!0}),C$e.default=function(e){return()=>({keyword:e,type:"number",schemaType:"array",macro:function([t,n]){return function(t,n){if(t>n||"exclusiveRange"===e&&t===n)throw new Error("There are no numbers in range")}(t,n),"range"===e?{minimum:t,maximum:n}:{exclusiveMinimum:t,exclusiveMaximum:n}},metaSchema:{type:"array",minItems:2,maxItems:2,items:{type:"number"}}})},function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=(0,n(C$e).default)("range");t.default=r,e.exports=r}(k$e,k$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(k$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}(_$e,_$e.exports);var E$e={exports:{}},O$e={exports:{}};!function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=(0,n(C$e).default)("exclusiveRange");t.default=r,e.exports=r}(O$e,O$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(O$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}(E$e,E$e.exports);var S$e={exports:{}},x$e={exports:{}},j$e={};Object.defineProperty(j$e,"__esModule",{value:!0}),j$e.usePattern=j$e.metaSchemaRef=void 0;const I$e=tTe;j$e.metaSchemaRef=function({defaultMeta:e}={}){return!1===e?{}:{$ref:e||"http://json-schema.org/schema"}},j$e.usePattern=function({gen:e,it:{opts:t}},n,r=(t.unicodeRegExp?"u":"")){const o=new RegExp(n,r);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:I$e._`new RegExp(${n}, ${r})`})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=tTe,r=j$e,o={type:"object",properties:{pattern:{type:"string"},flags:{type:"string",nullable:!0}},required:["pattern"],additionalProperties:!1},i=/^\/(.*)\/([gimuy]*)$/;function a(){return{keyword:"regexp",type:"string",schemaType:["string","object"],code(e){const{data:t,schema:o}=e,a=function(t){if("object"==typeof t)return(0,r.usePattern)(e,t.pattern,t.flags);const n=i.exec(t);if(n)return(0,r.usePattern)(e,n[1],n[2]);throw new Error("cannot parse string into RegExp")}(o);e.pass(n._`${a}.test(${t})`)},metaSchema:{anyOf:[{type:"string"},o]}}}t.default=a,e.exports=a}(x$e,x$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(x$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}(S$e,S$e.exports);var R$e={exports:{}},A$e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=tTe,r={trimStart:e=>e.trimStart(),trimEnd:e=>e.trimEnd(),trimLeft:e=>e.trimStart(),trimRight:e=>e.trimEnd(),trim:e=>e.trim(),toLowerCase:e=>e.toLowerCase(),toUpperCase:e=>e.toUpperCase(),toEnumCase:(e,t)=>(null==t?void 0:t.hash[i(e)])||e},o=Object.assign((function(){return{keyword:"transform",schemaType:"array",before:"enum",code(e){const{gen:t,data:o,schema:a,parentSchema:l,it:u}=e,{parentData:c,parentDataProperty:s}=u,d=a;if(!d.length)return;let f;if(d.includes("toEnumCase")){const e=function(e){const t={hash:{}};if(!e.enum)throw new Error('transform: "toEnumCase" requires "enum"');for(const n of e.enum){if("string"!=typeof n)continue;const e=i(n);if(t.hash[e])throw new Error('transform: "toEnumCase" requires all lowercased "enum" values to be unique');t.hash[e]=n}return t}(l);f=t.scopeValue("obj",{ref:e,code:(0,n.stringify)(e)})}function p(e){if(!e.length)return o;const i=e.pop();if(!(i in r))throw new Error(`transform: unknown transformation ${i}`);const a=t.scopeValue("func",{ref:r[i],code:n._`require("ajv-keywords/dist/definitions/transform").transform${(0,n.getProperty)(i)}`}),l=p(e);return f&&"toEnumCase"===i?n._`${a}(${l}, ${f})`:n._`${a}(${l})`}t.if(n._`typeof ${o} == "string" && ${c} !== undefined`,(()=>{t.assign(o,p(d.slice())),t.assign(n._`${c}[${s}]`,o)}))},metaSchema:{type:"array",items:{type:"string",enum:Object.keys(r)}}}}),{transform:r});function i(e){return e.toLowerCase()}t.default=o,e.exports=o}(A$e,A$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(A$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}(R$e,R$e.exports);var D$e={exports:{}},P$e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=hFe,r=["number","integer","string","boolean","null"];function o(){return{keyword:"uniqueItemProperties",type:"array",schemaType:"array",compile(e,t){const o=function(e,t){return e.map((e=>{var n,o,i;const a=null===(i=null===(o=null===(n=t.items)||void 0===n?void 0:n.properties)||void 0===o?void 0:o[e])||void 0===i?void 0:i.type;return Array.isArray(a)?!a.includes("object")&&!a.includes("array"):r.includes(a)}))}(e,t);return t=>{if(t.length<=1)return!0;for(let r=0;r<e.length;r++){const i=e[r];if(o[r]){const e={};for(const n of t){if(!n||"object"!=typeof n)continue;let t=n[i];if(!t||"object"!=typeof t){if("string"==typeof t&&(t='"'+t),e[t])return!1;e[t]=!0}}}else for(let e=t.length;e--;){const r=t[e];if(r&&"object"==typeof r)for(let o=e;o--;){const e=t[o];if(e&&"object"==typeof e&&n(r[i],e[i]))return!1}}}return!0}},metaSchema:{type:"array",items:{type:"string"}}}}t.default=o,e.exports=o}(P$e,P$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(P$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}(D$e,D$e.exports);var M$e={exports:{}},T$e={exports:{}};!function(e,t){function n(){return{keyword:"allRequired",type:"object",schemaType:"boolean",macro(e,t){if(!e)return!0;const n=Object.keys(t.properties);return 0===n.length||{required:n}},dependencies:["properties"]}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=n}(T$e,T$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(T$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}(M$e,M$e.exports);var F$e={exports:{}},N$e={exports:{}},V$e={};Object.defineProperty(V$e,"__esModule",{value:!0}),V$e.default=function(e){return()=>({keyword:e,type:"object",schemaType:"array",macro:t=>0===t.length||(1===t.length?{required:t}:{["anyRequired"===e?"anyOf":"oneOf"]:t.map((e=>({required:[e]})))}),metaSchema:{type:"array",items:{type:"string"}}})},function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=(0,n(V$e).default)("anyRequired");t.default=r,e.exports=r}(N$e,N$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(N$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}(F$e,F$e.exports);var L$e={exports:{}},B$e={exports:{}};!function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=(0,n(V$e).default)("oneRequired");t.default=r,e.exports=r}(B$e,B$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(B$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}(L$e,L$e.exports);var $$e={exports:{}},z$e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=tTe,r=j$e,o={message:({params:{missingPattern:e}})=>n.str`should have property matching pattern '${e}'`,params:({params:{missingPattern:e}})=>n._`{missingPattern: ${e}}`};function i(){return{keyword:"patternRequired",type:"object",schemaType:"array",error:o,code(e){const{gen:t,schema:o,data:i}=e;if(0===o.length)return;const a=t.let("valid",!0);for(const e of o)l(e);function l(o){const l=t.let("matched",!1);t.forIn("key",i,(i=>{t.assign(l,n._`${(0,r.usePattern)(e,o)}.test(${i})`),t.if(l,(()=>t.break()))})),e.setParams({missingPattern:o}),t.assign(a,(0,n.and)(a,l)),e.pass(a)}},metaSchema:{type:"array",items:{type:"string",format:"regex"},uniqueItems:!0}}}t.default=i,e.exports=i}(z$e,z$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(z$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}($$e,$$e.exports);var U$e={exports:{}},H$e={exports:{}};!function(e,t){function n(){return{keyword:"prohibited",type:"object",schemaType:"array",macro:function(e){return 0===e.length||(1===e.length?{not:{required:e}}:{not:{anyOf:e.map((e=>({required:[e]})))}})},metaSchema:{type:"array",items:{type:"string"}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=n}(H$e,H$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(H$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}(U$e,U$e.exports);var q$e={exports:{}},W$e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=j$e;function r(e){return{keyword:"deepProperties",type:"object",schemaType:"object",macro:function(e){const t=[];for(const n in e)t.push(o(n,e[n]));return{allOf:t}},metaSchema:{type:"object",propertyNames:{type:"string",format:"json-pointer"},additionalProperties:(0,n.metaSchemaRef)(e)}}}function o(e,t){const n=e.split("/"),r={};let o=r;for(let e=1;e<n.length;e++){let r=n[e];const a=e===n.length-1;r=i(r);const l=o.properties={};let u;if(/[0-9]+/.test(r)){let e=+r;for(u=o.items=[],o.type=["object","array"];e--;)u.push({})}else o.type="object";o=a?t:{},l[r]=o,u&&u.push(o)}return r}function i(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}t.default=r,e.exports=r}(W$e,W$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(W$e.exports),o=(e,t)=>e.addKeyword((0,r.default)(t));t.default=o,e.exports=o}(q$e,q$e.exports);var G$e={exports:{}},K$e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=tTe;function r(){return{keyword:"deepRequired",type:"object",schemaType:"array",code(e){const{schema:t,data:r}=e,o=t.map((e=>n._`(${function(e){if(""===e)throw new Error("empty JSON pointer not allowed");const t=e.split("/");let o=r;const i=t.map(((e,t)=>t?o=n._`${o}${(0,n.getProperty)(function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}(e))}`:o));return(0,n.and)(...i)}(e)}) === undefined`));e.fail((0,n.or)(...o))},metaSchema:{type:"array",items:{type:"string",format:"json-pointer"}}}}t.default=r,e.exports=r}(K$e,K$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(K$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}(G$e,G$e.exports);var Y$e={exports:{}},X$e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n={},r={timestamp:()=>()=>Date.now(),datetime:()=>()=>(new Date).toISOString(),date:()=>()=>(new Date).toISOString().slice(0,10),time:()=>()=>(new Date).toISOString().slice(11),random:()=>()=>Math.random(),randomint:e=>{var t;const n=null!==(t=null==e?void 0:e.max)&&void 0!==t?t:2;return()=>Math.floor(Math.random()*n)},seq:e=>{var t;const r=null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"";return n[r]||(n[r]=0),()=>n[r]++}},o=Object.assign((function(){return{keyword:"dynamicDefaults",type:"object",schemaType:["string","object"],modifying:!0,valid:!0,compile(e,t,n){if(!n.opts.useDefaults||n.compositeRule)return()=>!0;const r={};for(const t in e)r[t]=i(e[t]);const o="empty"===n.opts.useDefaults;return t=>{for(const n in e)(void 0===t[n]||o&&(null===t[n]||""===t[n]))&&(t[n]=r[n]());return!0}},metaSchema:{type:"object",additionalProperties:{anyOf:[{type:"string"},{type:"object",additionalProperties:!1,required:["func","args"],properties:{func:{type:"string"},args:{type:"object"}}}]}}}}),{DEFAULTS:r});function i(e){return"object"==typeof e?function({func:e,args:t}){const n=r[e];return a(e,n),n(t)}(e):function(e=""){const t=r[e];return a(e,t),t()}(e)}function a(e,t){if(!t)throw new Error(`invalid "dynamicDefaults" keyword property value: ${e}`)}t.default=o,e.exports=o}(X$e,X$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(X$e.exports),o=e=>e.addKeyword((0,r.default)());t.default=o,e.exports=o}(Y$e,Y$e.exports);var J$e={exports:{}},Z$e={exports:{}};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const n=tTe,r=j$e,o={message:({params:{schemaProp:e}})=>e?n.str`should match case "${e}" schema`:n.str`should match default case schema`,params:({params:{schemaProp:e}})=>e?n._`{failingCase: ${e}}`:n._`{failingDefault: true}`};function i(e){const t=(0,r.metaSchemaRef)(e);return[{keyword:"select",schemaType:["string","number","boolean","null"],$data:!0,error:o,dependencies:["selectCases"],code(e){const{gen:t,schemaCode:r,parentSchema:o}=e;e.block$data(n.nil,(()=>{const i=t.let("valid",!0),a=t.name("_valid"),l=t.const("value",n._`${r} === null ? "null" : ${r}`);t.if(!1);for(const r in o.selectCases){e.setParams({schemaProp:r}),t.elseIf(n._`"" + ${l} == ${r}`);const o=e.subschema({keyword:"selectCases",schemaProp:r},a);e.mergeEvaluated(o,n.Name),t.assign(i,a)}if(t.else(),void 0!==o.selectDefault){e.setParams({schemaProp:void 0});const r=e.subschema({keyword:"selectDefault"},a);e.mergeEvaluated(r,n.Name),t.assign(i,a)}t.endIf(),e.pass(i)}))}},{keyword:"selectCases",dependencies:["select"],metaSchema:{type:"object",additionalProperties:t}},{keyword:"selectDefault",dependencies:["select","selectCases"],metaSchema:t}]}t.default=i,e.exports=i}(Z$e,Z$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(Z$e.exports),o=(e,t)=>((0,r.default)(t).forEach((t=>e.addKeyword(t))),e);t.default=o,e.exports=o}(J$e,J$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(m$e.exports),o=n(b$e.exports),i=n(_$e.exports),a=n(E$e.exports),l=n(S$e.exports),u=n(R$e.exports),c=n(D$e.exports),s=n(M$e.exports),d=n(F$e.exports),f=n(L$e.exports),p=n($$e.exports),h=n(U$e.exports),v=n(q$e.exports),g=n(G$e.exports),m=n(Y$e.exports),y=n(J$e.exports),b={typeof:r.default,instanceof:o.default,range:i.default,exclusiveRange:a.default,regexp:l.default,transform:u.default,uniqueItemProperties:c.default,allRequired:s.default,anyRequired:d.default,oneRequired:f.default,patternRequired:p.default,prohibited:h.default,deepProperties:v.default,deepRequired:g.default,dynamicDefaults:m.default,select:y.default};t.default=b,e.exports=b}(g$e,g$e.exports),function(e,t){var n=Pn&&Pn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(g$e.exports),o=(e,t)=>{if(Array.isArray(t)){for(const n of t)i(n)(e);return e}if(t)return i(t)(e),e;for(t in r.default)i(t)(e);return e};function i(e){const t=r.default[e];if(!t)throw new Error("Unknown keyword "+e);return t}o.get=i,t.default=o,e.exports=o,e.exports.default=o}(v$e,v$e.exports);const Q$e=Ts.defineToken("ContentEditorContribution"),eze=Ts.defineToken("ContentViewerContribution"),tze=Ts.defineToken("ContentDatasourceContribution"),nze=Ts.defineToken("ContentDatasourceServiceToken"),rze=Ts.defineToken("ContentServiceToken"),oze=Ts.defineToken("ContentEditorServiceToken"),ize=Ts.defineToken("ContentViewerServiceToken");var aze=(e=>(e[e.FULL_SCREEN=0]="FULL_SCREEN",e[e.NORMAL=1]="NORMAL",e))(aze||{}),lze=Object.defineProperty,uze=Object.getOwnPropertyDescriptor,cze=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?uze(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&lze(t,n,i),i};let sze=class{constructor(){this._onStatusChange=new ck,this.onStatusChange=this._onStatusChange.event,this.status=aze.NORMAL}get isFullScreen(){return this.status===aze.FULL_SCREEN}emitStatusChange(){this.status===aze.NORMAL?this.status=aze.FULL_SCREEN:this.status=aze.NORMAL,this._onStatusChange.emit(this.status)}enterFullScreen(e){var t;let n=["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search"];this.status=aze.FULL_SCREEN,e&&(n=n.concat(["|","add-record"])),this._configuration.setValue("toolbar.topLeft",["view-manage"]),this._configuration.setValue("toolbar.left",n),this._configuration.setValue("toolbar.right",[]),this._configuration.setValue("toolbar.mode",hse.NORMAL),this._configuration.setValue("viewerManage.type","tab"),this._configuration.setValue("view.customScrollParent",void 0),this._configuration.setValue("view.useWindowScroll",!1),this._configuration.setValue("render.autoActive",!0),null==(t=this._activeTableService)||t.active(),this._toolbarService.rerender()}exitFullScreen(e,t){var n;let r=["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","full-width","full-screen","search"];this.status=aze.NORMAL,e&&(r=r.concat(["|","add-record"])),this._configuration.setValue("toolbar.topLeft",[]),this._configuration.setValue("toolbar.left",["view-manage"]),this._configuration.setValue("toolbar.right",r),this._configuration.setValue("toolbar.mode",hse.LITE),this._configuration.setValue("viewerManage.type","menu"),this._configuration.setValue("view.customScrollParent",t),this._configuration.setValue("view.useWindowScroll",!0),this._configuration.setValue("render.autoActive",!1),null==(n=this._activeTableService)||n.active(),this._toolbarService.rerender()}};cze([Xs(R_)],sze.prototype,"_configuration",2),cze([Xs(aie)],sze.prototype,"_activeTableService",2),cze([Xs(fse)],sze.prototype,"_toolbarService",2),sze=cze([Ys()],sze);var dze=(e=>(e[e.NORMAL="normal"]="NORMAL",e[e.CONTAIN="contain"]="CONTAIN",e))(dze||{}),fze=Object.defineProperty,pze=Object.getOwnPropertyDescriptor,hze=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?pze(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&fze(t,n,i),i};const vze=750;let gze=class{constructor(){this._cardWidthMode=null,this._getMaxWidth=null,this._$card=null,this._cardWidth=0,this._contentWidth=0,this._scrollListener=null,this._onModeUIChange=new ck,this.onModeUIChange=this._onModeUIChange.event,this._onModeChange=new ck,this.onModeChange=this._onModeChange.event,this._onCardWidthChange=new ck,this.onCardWidthChange=this._onCardWidthChange.event,this.initCardWidth=(e,t)=>{if(this._getMaxWidth&&this._$card){if(this._fullScreenService.isFullScreen)this._setCardWidth("100%");else{const t=Math.min(this._getMaxWidth(),e);this._updateCardWidth(t)}this.syncWidthMode(t),this.bindEvent()}else console.error("[lakex-table-next] FullWidthService.initCardWidth is not ready, please apply getMaxWidtFunction and cardRef.")},this._updateCardWidth=e=>{var t;null==(t=this._setCardWidth)||t.call(this,e),this._onCardWidthChange.emit(e)},this._setCardWidth=e=>{this._$card&&(this._$card.style.width="string"==typeof e?e:`${e}px`)},this._showCardRightShadow=()=>{this.canScroll?this._$card&&(this._$card.classList.remove("left-shadow"),this._$card.classList.add("right-shadow")):this._removeCardShadow()},this._showCardLeftShadow=()=>{this.canScroll?this._$card&&(this._$card.classList.remove("right-shadow"),this._$card.classList.add("left-shadow")):this._removeCardShadow()},this._showCardBothShadow=()=>{this.canScroll?this._$card&&(this._$card.classList.add("right-shadow"),this._$card.classList.add("left-shadow")):this._removeCardShadow()},this._removeCardShadow=()=>{this._$card&&(this._$card.classList.remove("left-shadow"),this._$card.classList.remove("right-shadow"))},this._initCardShadow=(e,t)=>{"number"==typeof e&&"number"==typeof t&&(this._contentWidth=e,this._cardWidth=t),this.canScroll?this._showCardRightShadow():this._removeCardShadow()},this._handleCardViewWidth=()=>{if(!this._getMaxWidth)return;const e=this._getMaxWidth();this.isNormalMode&&this._updateCardWidth(Math.min(vze,e)),this.isContainMode&&this._updateCardWidth(e),this._initCardShadow(0,0),this._viewerCardLayoutService.refresh()},this._handleKanbanViewWidth=()=>{if(!this._getMaxWidth)return;const e=this._readService.getViewGroup(),t=this._getMaxWidth();if(!e)return this._updateCardWidth(Math.min(vze,t)),void this._initCardShadow(0,0);const n=this._renderContextService.$root.querySelector(".lakex-viewer-kanban-content");if(n){const e=n.getBoundingClientRect().width,r=Math.max(e,vze),o=t<vze?t:Math.min(r,t);this._updateCardWidth(o),this._initCardShadow(e,o)}},this._handleGridViewWidth=()=>{if(!this._getMaxWidth)return;const e=this._renderContextService.$root.querySelector("table");if(e){const t=e.getBoundingClientRect().width,n=Math.max(t,vze),r=this._getMaxWidth(),o=r<vze?r:Math.min(n,r);this._updateCardWidth(o),this._initCardShadow(t,o)}}}get isDisable(){return this._fullScreenService.status===aze.FULL_SCREEN}get isNormalMode(){return this._cardWidthMode===dze.NORMAL}get isContainMode(){return this._cardWidthMode===dze.CONTAIN}get cardWidthMode(){return this._cardWidthMode}get canScroll(){return this._contentWidth>this._cardWidth}setWidthMode(e){this.syncWidthMode(e),this._onModeChange.emit(e)}applyGetMaxWidthFunction(e){this._getMaxWidth=e}applyCardRef(e){this._$card=e}resetWidth(){this._handleUpdateWidth()}setCardWidth(e){var t;null==(t=this._setCardWidth)||t.call(this,e)}syncWidthMode(e){this._cardWidthMode=e,this._onModeUIChange.emit(e)}_handleUpdateWidth(){if(this._getMaxWidth){if(Kk.isMobile)return void this._updateCardWidth(this._getMaxWidth());if(this.isDisable)return null;requestAnimationFrame((()=>{switch(this._readService.getActiveViewType()){case BC.KANBAN:this._handleKanbanViewWidth();break;case BC.GRID:this._handleGridViewWidth();break;case BC.CARD:case BC.CALENDAR:this._handleCardViewWidth();break;default:return}}))}}bindEvent(){this._commandService.onDidExecuteCommand((({context:e})=>{const{commandName:t}=e;if(this.isDisable)return null;("addView"===t||"removeView"===t||"switchView"===t||"updateShowFieldName"===t||"updateCoverSource"===t||"changeColWidth"===t||"updateFieldHidden"===t||"addField"===t||"removeField"===t||"copyField"===t)&&this.resetWidth(),"switchView"===t&&this.listenScroll()})),this._commandService.onDidRedoCommand((()=>{this.resetWidth()})),this._commandService.onDidUndoCommand((()=>{this.resetWidth()})),this.listenScroll()}listenScroll(){var e;switch(null==(e=this._scrollListener)||e.destroy(),this._readService.getActiveViewType()){case BC.KANBAN:this._scrollListener=this._viewerKanbanScrollService.onScroll((e=>{const t=e.target.scrollLeft;t>=this._contentWidth-this._cardWidth?this._showCardLeftShadow():0===t?this._showCardRightShadow():this._showCardBothShadow()}));break;case BC.GRID:this._scrollListener=this._viewerGridScrollService.onScroll((e=>{e.target.scrollLeft>=this._contentWidth-this._cardWidth?this._removeCardShadow():this._showCardRightShadow()}));break;case BC.CARD:case BC.CALENDAR:this._removeCardShadow();default:return}}};hze([Xs(sze)],gze.prototype,"_fullScreenService",2),hze([Xs(MI)],gze.prototype,"_readService",2),hze([Xs(cie)],gze.prototype,"_renderContextService",2),hze([Xs(dSe)],gze.prototype,"_viewerCardLayoutService",2),hze([Xs(uA)],gze.prototype,"_commandService",2),hze([Xs(Jye)],gze.prototype,"_viewerGridScrollService",2),hze([Xs(axe)],gze.prototype,"_viewerKanbanScrollService",2),gze=hze([Ys()],gze);const mze=null,yze=Ts.defineToken("CommentContribution"),bze={"AI 智能填写":"AI autofill","上传失败":"Upload failure","下拉":"Dropdown","为必填项":"Is required","今天":"Today","使用钉钉扫码$1":"Use Dingding to scan the code to $1","停止收集":"Stop collection","像问卷一样收集信息":"collect information like a questionnaire","全宽":"Full width","全屏":"Full screen","关闭":"Off","其他数据更新时同步更新":"Update when data changes","内容总结":"Summary","内容规则：":"Prompt type:","分享":"Share","列表":"List","单选":"Select","取消":"Cancel","取消添加":"remove","可用于问卷调查、活动组织、登记报名等信息收集与整理场景。":"The data table is a new type of table for more convenient multi-person collaboration and data management through multiple views.","向上移动":"Move up","向下移动":"Move down","回复":"","复制填写链接":"Copy and fill in the link","复制成功":"Copy successfully","复制表单项":"Clone this item","多选":"Multi-select","将自动对每条记录进行总结":"Summarize each record automatically","已停止填写":"Autofill Stopped","已重新填写":"Autofill Done","布局方式":"Layout","开启收集":"Start form collect","开始自动填写":"Start autofill","当前文档中此文件类型不支持预览和下载":"This file is not supported for preview and download","必填":"Required","所有列":"all the columns","打开":"Open","提交":"Submit","收集中":"Collecting","数据表中所有列":"All the columns in table","明天":"Tomorrow","昨天":"Yesterday","智能填写":"Autofill","未命名问题":"Untitled question","查看表单视图需要编辑权限":"Viewing form view requires edit permission","标宽":"Standard width","正在填写中...":"Autofilling...","此处由填写者输入":"This field is for form user","添加":"Add","点击「开启收集」按钮获得表单填写链接":"Click「Start form collect」button to get then form link","点击修改字段":"Click and change field","点击左侧列表添加已有列 或 点击下方按钮添加新表单项":"Click a field or the button above to add an item","生成新表单":"Create new form","生成表单":"Generate form","移除表单项":"Remove this item","自定义":"Custom","获得链接的所有人，可填写并提交表单":"Anyone who gets the link can fill out and submit the form","表单为空":"This form is empty","表单提交失败，请稍后重试":"Form submission failed, please try again later","表单提交成功":"Form submitted successfully","表单收集未开启":"Form collection is not turned on","表单视图":"Form view","要点提取":"Extract","规则不能为空":"Rules can't be null","规则最长支持255字符":"Rules maximun length limit 255","评论":"Comment","请输入必填项":"Please enter required fields","请输入表单描述":"please input form descriptor","请输入表单标题":"please input form title","请输入问题":"Enter a question","输入智能填写规则\n如：为每个商品生成 50 字的宣传文案":"Please input autofill rules\n","输入要点提取规则\n如：提取每天记录中出现的人名":"Please input extract rules\n","重新填写":"Re-autofill","重新填写本列内容":"Re-autofill current col","数据处理比较耗时，请耐心等待...":"Data processing takes time, please wait patiently...","已完成":"Completed"};function wze(e,t){const n=globalThis.appData;return n&&void 0!==n[e]?n[e]:t}lw.setData(bze);const _ze=ww(navigator)?"":navigator.userAgent,kze=/YuqueDesktopApp\/[\d.]+/i.test(_ze),Cze=/YuqueMobileApp\/[\d.]+/i.test(_ze);class Eze{static get locale(){return wze("locale","zh-cn")}static get isYuque(){return wze("isYuque",!1)}static get isEnterprise(){return wze("isEnterprise",!1)}static get isPublicCloud(){return wze("isPublicCloud",!1)}static get isOrganization(){return!!wze("organization")}static get isUIATest(){const e=ww(navigator)?"":navigator.userAgent;return/Macaca UI Robot/.test(e)}static get isYuqueMobile(){return Cze}static get isDesktop(){return kze||wze("isDesktopApp",!1)}static get isYuqueMobileApp(){return wze("isYuqueMobileApp",!1)}static get imageServiceDomains(){return wze("imageServiceDomains",[])}static get docId(){return _n()(globalThis.appData||{},"doc.id")}static get group(){return wze("group",void 0)}static get me(){return wze("me",void 0)}static get doc(){return wze("doc",void 0)}static get organization(){return wze("organization",void 0)}static get env(){return wze("env","prod")}static get settings(){return wze("settings",{})}static get isOfficialTemplate(){return wze("isOfficialTemplate",!1)}static get themeManager(){return wze("themeManager")}}const Oze=({webSdk:e})=>({"record.maxCount":5e3,"view.maxCount":1e3,"toolbar.topLeft":["view-manage"],"toolbar.left":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search","|","add-record","expandRecord"],"toolbar.right":["create-form"],contextMenu:["updateField","copyField","autofillField","|","insertFieldLeft","insertFieldRight","|","groupByField","filterByField","sortByAsc","sortByDesc","|","copy","paste","|","insertRecordUp","insertRecordDown","insertRecordLeft","insertRecordRight","|","copyRecord","expandRecord","removeRecord","removeField"],"comment.actions":["reply","emoji","edit","delete"],"monitor.startAt":+new Date,"server.webSdk":e,"clipboard.clipboardApi.disable":Eze.isUIATest,"collab.enable":!1,"collab.skipTable":["table","ability"],"viewerManage.viewTypes":["GRID","CARD","CALENDAR","KANBAN","FORM"],"logger.maxLen":500});class Sze extends ZR{destroy(){}execute(e){return!0}}class xze extends ZR{destroy(){}execute(e){return this.writeService.upsertViewShare(e.viewId,{src:e.src,status:e.status}),!0}}class jze extends ZR{destroy(){}execute(e){return this.writeService.removeViewField(e.viewId,e.fieldId),!0}}class Ize extends ZR{destroy(){}execute(e){return this.writeService.insertViewField(e.viewId,e.fieldId),!0}}class Rze extends ZR{destroy(){}execute(e){return this.writeService.updateView(e.viewId,{desc:e.desc}),!0}}Rze.commandName="updateViewDesc";class Aze extends ZR{destroy(){}execute(e){return this.writeService.updateViewField(e.viewId,e.fieldId,{display_type:e.displayType}),!0}}Aze.commandName="updateViewFieldDisplayType";class Dze extends ZR{destroy(){}execute(e){return this.writeService.updateViewField(e.viewId,e.fieldId,{required:e.required}),!0}}Dze.commandName="updateViewFieldRequired";class Pze extends ZR{destroy(){}execute(e){return this.writeService.updateViewField(e.viewId,e.fieldId,{name:e.name}),!0}}Pze.commandName="updateViewFieldName";class Mze extends ZR{destroy(){}beforeExecute(e){return e.newFieldId||(e.newFieldId=fw(32)),e}execute(e){return this.writeService.cloneViewField(e.viewId,e.fieldId,e.newFieldId),!0}}Mze.commandName="cloneViewField";const Tze=Ts.defineToken("ViewerFormContribution");var Fze=(e=>(e.PENDING="pending",e.COLLECTING="collecting",e))(Fze||{});const Nze=Ts.defineToken("ViewerFormKernelPluginContribution");var Vze=Object.defineProperty,Lze=Object.getOwnPropertyDescriptor,Bze=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?Lze(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Vze(t,n,i),i};let $ze=class{getProvider(){const e=this.formProvider.getContributions();return e[e.length-1].registerForm()}getForm(e){return this.getProvider().getForm(e)}};Bze([bd(Tze)],$ze.prototype,"formProvider",2),$ze=Bze([Ys()],$ze);var zze=Object.defineProperty,Uze=Object.getOwnPropertyDescriptor,Hze=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?Uze(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zze(t,n,i),i};let qze=class{async initForm(e){const t=this._readService.getView(e);if(!t||this.getShare(e))return;const n=await this._formRegistry.getForm(t.get("id"));return n&&this._writeService.upsertViewShare(t.get("uuid"),n),n}getShare(e){if(e)return this._readService.getViewShare(e)}getForm(e){return this._readService.getView(e)}getFormEditData(e){const t=this._readService.getViewFields(e),n=this._readService.getAllFields();return{view:this._readService.getView(e),viewConfig:this._readService.getViewConfig(e),fields:__(n,(e=>!zC.isSystemType(e.get("type")))),viewFields:t&&__(t,(e=>{var t;return!zC.isSystemType(null==(t=e.get("field"))?void 0:t.get("type"))}))}}};Hze([Xs(MI)],qze.prototype,"_readService",2),Hze([Xs(JI)],qze.prototype,"_writeService",2),Hze([Xs($ze)],qze.prototype,"_formRegistry",2),qze=Hze([Ys()],qze);var Wze=Object.defineProperty,Gze=Object.getOwnPropertyDescriptor,Kze=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?Gze(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Wze(t,n,i),i};let Yze=class{static pluginModule(){return pd().contribution(Nze).contribution(Tze).register($ze).register(qze).register(this)}init(e){this.commandService.registerCommand("addFormRecord",Sze),this.commandService.registerCommand("removeViewField",jze),this.commandService.registerCommand("insertViewField",Ize),this.commandService.registerCommand(Rze.commandName,Rze),this.commandService.registerCommand(Aze.commandName,Aze),this.commandService.registerCommand(Dze.commandName,Dze),this.commandService.registerCommand(Pze.commandName,Pze),this.commandService.registerCommand(Mze.commandName,Mze),this.commandService.registerCommand("upsertViewShare",xze)}};Yze.pluginName="kernel-viewer-form",Kze([Xs(uA)],Yze.prototype,"commandService",2),Yze=Kze([Ys({contrib:kA})],Yze);var Xze=Object.defineProperty,Jze=Object.getOwnPropertyDescriptor;let Zze=class{constructor(){this._onCommandHook=new ck,this.onCommandHook=this._onCommandHook.event}emitHook(e){this._onCommandHook.emit(e)}};Zze=((e,t,n,r)=>{for(var o,i=r>1?void 0:r?Jze(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Xze(t,n,i),i})([Ys()],Zze);var Qze=Object.defineProperty,eUe=Object.getOwnPropertyDescriptor,tUe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?eUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Qze(t,n,i),i};const nUe=kD.Plugin("monitor");let rUe=class{constructor(){this._commandLogs=[],this._startTaskWithDebounce=Cn()((async()=>{const e=this._commandLogs;0!==this._commandLogs.length&&(this._queueTask.addJob((async t=>{try{await this._startTask(e)}catch(e){return console.error(e),t.onError(e)}t.onSuccess()})),this._commandLogs=[])}),3e3)}startMainPerfLog(){const e={};e.startAt=this._configuration.getValue("monitor.startAt"),e.initAt=this._lifeCycleService.getStatusChangedAt(Jb.Inited),e.initAt||this._lifeCycleService.when(Jb.Inited,(()=>{e.initAt=this._lifeCycleService.getStatusChangedAt(Jb.Inited)})),e.readyAt=this._lifeCycleService.getStatusChangedAt(Jb.Ready),e.readyAt||this._lifeCycleService.when(Jb.Ready,(()=>{e.readyAt=this._lifeCycleService.getStatusChangedAt(Jb.Ready)})),e.recordInitAt=this._lifeCycleService.getStatusChangedAt(Jb.RecordInit),e.recordInitAt||this._lifeCycleService.when(Jb.RecordInit,(()=>{e.recordInitAt=this._lifeCycleService.getStatusChangedAt(Jb.RecordInit)})),e.recordReadyAt=this._lifeCycleService.getStatusChangedAt(Jb.RecordReady),e.recordReadyAt||this._lifeCycleService.when(Jb.RecordReady,(()=>{e.recordReadyAt=this._lifeCycleService.getStatusChangedAt(Jb.RecordReady)})),e.renderAt=this._lifeCycleService.getStatusChangedAt(Jb.Rendered),e.renderAt?this._sendMainPerfLog(e):this._lifeCycleService.when(Jb.Rendered,(()=>{e.renderAt=this._lifeCycleService.getStatusChangedAt(Jb.Rendered),this._sendMainPerfLog(e)}))}_sendMainPerfLog(e){const t=this._configuration.getValue("monitor.sendLog"),n={msg:"新数据表性能上报",m1:e.initAt-e.startAt,m2:e.readyAt-e.initAt,m3:e.recordInitAt-e.readyAt,m4:e.recordReadyAt-e.recordInitAt,m5:e.renderAt-e.recordReadyAt,m6:e.renderAt-e.startAt,c1:this._readService.getRecords().length,c2:this._readService.getAllFields().length};n.m5>5e3||n.m6>2e4||(nUe("main perf: %j",n),null==t||t(59,n))}startCommandPerfLog(){this._queueTask=new bR({name:"指令性能同步任务",parallel:1}),this._commandHook.onCommandHook((e=>{this._logCommandPerf(e)}))}async _logCommandPerf(e){this._commandLogs.push(e),this._startTaskWithDebounce()}_getCommandPerfData(e){const t={msg:"新数据表指令性能上报"},n={m1:0,m2:0,m3:0,m4:0,m5:0,m6:0,m7:0};for(const r of e)"setCell"===r.commandName?(t.m1=t.m1||0,n.m1+=1,t.m1=(t.m1+r.time)/n.m1):"switchView"===r.commandName?(t.m2=t.m2||0,n.m2+=1,t.m2=(t.m2+r.time)/n.m2):"addView"===r.commandName?(t.m3=t.m3||0,n.m3+=1,t.m3=(t.m3+r.time)/n.m3):"createFilter"===r.commandName||"updateFilter"===r.commandName||"removeFilter"===r.commandName?(t.m4=t.m4||0,n.m4+=1,t.m4=(t.m4+r.time)/n.m4):"createGridGroup"===r.commandName||"updateGridGroup"===r.commandName||"removeGridGroup"===r.commandName?(t.m5=t.m5||0,n.m5+=1,t.m5=(t.m5+r.time)/n.m5):"createSort"===r.commandName||"updateSort"===r.commandName||"removeSort"===r.commandName?(t.m6=t.m6||0,n.m6+=1,t.m6=(t.m6+r.time)/n.m6):"addEmptyRecord"===r.commandName&&(t.m7=t.m7||0,n.m7+=1,t.m7=(t.m7+r.time)/n.m7);return t.m1||t.m2||t.m3||t.m4||t.m5||t.m6||t.m7?(t.c1=this._readService.getRecords().length,t.c2=this._readService.getAllFields().length,t):null}_startTask(e){const t=this._configuration.getValue("monitor.sendLog"),n=this._getCommandPerfData(e);!n||(nUe("command perf: %j",n),null==t||t(61,n))}};tUe([Xs(R_)],rUe.prototype,"_configuration",2),tUe([Xs(Zb)],rUe.prototype,"_lifeCycleService",2),tUe([Xs(MI)],rUe.prototype,"_readService",2),tUe([Xs(Zze)],rUe.prototype,"_commandHook",2),rUe=tUe([Ys()],rUe);var oUe=Object.defineProperty,iUe=Object.getOwnPropertyDescriptor;const aUe=globalThis;const lUe=function(e,t,n){return()=>null!=e?e.performance.now():null!=t?t.hrtime()[1]/1e6:(new n).getTime()}(aUe.window,aUe.process,Date),uUe=(e,t)=>{const n=(t-e).toFixed(2);return Number(n)};let cUe=class{constructor(){this.commandName=""}beforeExecute(e){return e._executeAt=lUe(),e}afterExecute(e,t){this.commandHook.emitHook({commandName:this.commandName,time:uUe(t._executeAt,lUe())})}};cUe=((e,t,n,r)=>{for(var o,i=r>1?void 0:r?iUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&oUe(t,n,i),i})([Ks()],cUe);var sUe=Object.defineProperty,dUe=Object.getOwnPropertyDescriptor,fUe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?dUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&sUe(t,n,i),i};let pUe=class extends cUe{constructor(){super(...arguments),this.commandName="setCell"}};fUe([Xs(Zze)],pUe.prototype,"commandHook",2),pUe=fUe([Ys()],pUe);var hUe=Object.defineProperty,vUe=Object.getOwnPropertyDescriptor,gUe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?vUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&hUe(t,n,i),i};let mUe=class extends cUe{constructor(){super(...arguments),this.commandName="switchView"}};gUe([Xs(Zze)],mUe.prototype,"commandHook",2),mUe=gUe([Ys()],mUe);var yUe=Object.defineProperty,bUe=Object.getOwnPropertyDescriptor,wUe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?bUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yUe(t,n,i),i};let _Ue=class extends cUe{constructor(){super(...arguments),this.commandName="createFilter"}};wUe([Xs(Zze)],_Ue.prototype,"commandHook",2),_Ue=wUe([Ys()],_Ue);var kUe=Object.defineProperty,CUe=Object.getOwnPropertyDescriptor,EUe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?CUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&kUe(t,n,i),i};let OUe=class extends cUe{constructor(){super(...arguments),this.commandName="removeFilter"}};EUe([Xs(Zze)],OUe.prototype,"commandHook",2),OUe=EUe([Ys()],OUe);var SUe=Object.defineProperty,xUe=Object.getOwnPropertyDescriptor,jUe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?xUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&SUe(t,n,i),i};let IUe=class extends cUe{constructor(){super(...arguments),this.commandName="updateFilter"}};jUe([Xs(Zze)],IUe.prototype,"commandHook",2),IUe=jUe([Ys()],IUe);var RUe=Object.defineProperty,AUe=Object.getOwnPropertyDescriptor,DUe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?AUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&RUe(t,n,i),i};let PUe=class extends cUe{constructor(){super(...arguments),this.commandName="createGridGroup"}};DUe([Xs(Zze)],PUe.prototype,"commandHook",2),PUe=DUe([Ys()],PUe);var MUe=Object.defineProperty,TUe=Object.getOwnPropertyDescriptor,FUe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?TUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&MUe(t,n,i),i};let NUe=class extends cUe{constructor(){super(...arguments),this.commandName="removeGridGroup"}};FUe([Xs(Zze)],NUe.prototype,"commandHook",2),NUe=FUe([Ys()],NUe);var VUe=Object.defineProperty,LUe=Object.getOwnPropertyDescriptor,BUe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?LUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&VUe(t,n,i),i};let $Ue=class extends cUe{constructor(){super(...arguments),this.commandName="updateGridGroup"}};BUe([Xs(Zze)],$Ue.prototype,"commandHook",2),$Ue=BUe([Ys()],$Ue);var zUe=Object.defineProperty,UUe=Object.getOwnPropertyDescriptor,HUe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?UUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zUe(t,n,i),i};let qUe=class extends cUe{constructor(){super(...arguments),this.commandName="createSort"}};HUe([Xs(Zze)],qUe.prototype,"commandHook",2),qUe=HUe([Ys()],qUe);var WUe=Object.defineProperty,GUe=Object.getOwnPropertyDescriptor,KUe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?GUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&WUe(t,n,i),i};let YUe=class extends cUe{constructor(){super(...arguments),this.commandName="removeSort"}};KUe([Xs(Zze)],YUe.prototype,"commandHook",2),YUe=KUe([Ys()],YUe);var XUe=Object.defineProperty,JUe=Object.getOwnPropertyDescriptor,ZUe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?JUe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&XUe(t,n,i),i};let QUe=class extends cUe{constructor(){super(...arguments),this.commandName="updateSort"}};ZUe([Xs(Zze)],QUe.prototype,"commandHook",2),QUe=ZUe([Ys()],QUe);var eHe=Object.defineProperty,tHe=Object.getOwnPropertyDescriptor,nHe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?tHe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&eHe(t,n,i),i};let rHe=class extends cUe{constructor(){super(...arguments),this.commandName="addView"}};nHe([Xs(Zze)],rHe.prototype,"commandHook",2),rHe=nHe([Ys()],rHe);var oHe=Object.defineProperty,iHe=Object.getOwnPropertyDescriptor,aHe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?iHe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&oHe(t,n,i),i};let lHe=class extends cUe{constructor(){super(...arguments),this.commandName="addEmptyRecord"}};aHe([Xs(Zze)],lHe.prototype,"commandHook",2),lHe=aHe([Ys()],lHe);var uHe=Object.defineProperty,cHe=Object.getOwnPropertyDescriptor,sHe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?cHe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&uHe(t,n,i),i};let dHe=class{static pluginModule(){return pd().register(rUe).register(Zze).register(pUe).register(rHe).register(mUe).register(_Ue).register(OUe).register(IUe).register(PUe).register(NUe).register($Ue).register(qUe).register(YUe).register(QUe).register(lHe).register(this)}static registerConfiguration(e){e.registerConfiguration({id:"monitor",type:"object",properties:{sendLog:{typeof:"function",description:"外部传入的日志处理对象"},startAt:{type:"number",description:"编辑器开始加载时间"}}})}init(){this._initHooks(),this._monitorService.startMainPerfLog(),this._monitorService.startCommandPerfLog()}_initHooks(){this._commandRegistry.registerCommandHook(this._setCellCommandHook.commandName,this._setCellCommandHook),this._commandRegistry.registerCommandHook(this._switchViewCommandHook.commandName,this._switchViewCommandHook),this._commandRegistry.registerCommandHook(this._addViewCommandHook.commandName,this._addViewCommandHook),this._commandRegistry.registerCommandHook(this._createFilterCellCommandHook.commandName,this._createFilterCellCommandHook),this._commandRegistry.registerCommandHook(this._removeFilterCellCommandHook.commandName,this._removeFilterCellCommandHook),this._commandRegistry.registerCommandHook(this._updateFilterCellCommandHook.commandName,this._updateFilterCellCommandHook),this._commandRegistry.registerCommandHook(this._createGroupCellCommandHook.commandName,this._createGroupCellCommandHook),this._commandRegistry.registerCommandHook(this._removeGroupCellCommandHook.commandName,this._removeGroupCellCommandHook),this._commandRegistry.registerCommandHook(this._updateGroupCellCommandHook.commandName,this._updateGroupCellCommandHook),this._commandRegistry.registerCommandHook(this._createSortCellCommandHook.commandName,this._createSortCellCommandHook),this._commandRegistry.registerCommandHook(this._removeSortCellCommandHook.commandName,this._removeSortCellCommandHook),this._commandRegistry.registerCommandHook(this._updateSortCellCommandHook.commandName,this._updateSortCellCommandHook),this._commandRegistry.registerCommandHook(this._addEmptyRecordCommandHook.commandName,this._addEmptyRecordCommandHook)}};dHe.pluginName="kernel-monitor",sHe([Xs(rUe)],dHe.prototype,"_monitorService",2),sHe([Xs(QR)],dHe.prototype,"_commandRegistry",2),sHe([Xs(pUe)],dHe.prototype,"_setCellCommandHook",2),sHe([Xs(mUe)],dHe.prototype,"_switchViewCommandHook",2),sHe([Xs(rHe)],dHe.prototype,"_addViewCommandHook",2),sHe([Xs(_Ue)],dHe.prototype,"_createFilterCellCommandHook",2),sHe([Xs(OUe)],dHe.prototype,"_removeFilterCellCommandHook",2),sHe([Xs(IUe)],dHe.prototype,"_updateFilterCellCommandHook",2),sHe([Xs(PUe)],dHe.prototype,"_createGroupCellCommandHook",2),sHe([Xs(NUe)],dHe.prototype,"_removeGroupCellCommandHook",2),sHe([Xs($Ue)],dHe.prototype,"_updateGroupCellCommandHook",2),sHe([Xs(qUe)],dHe.prototype,"_createSortCellCommandHook",2),sHe([Xs(YUe)],dHe.prototype,"_removeSortCellCommandHook",2),sHe([Xs(QUe)],dHe.prototype,"_updateSortCellCommandHook",2),sHe([Xs(lHe)],dHe.prototype,"_addEmptyRecordCommandHook",2),dHe=sHe([Ys({contrib:[kA]})],dHe);const fHe=Ts.defineToken("ServerContribution"),pHe=Ts.defineToken("SyncQueueToken");var hHe=(e=>(e.RUNNING="running",e.SUCCESS="success",e))(hHe||{}),vHe=(e=>(e.SUMMARY="summary",e.EXTRACT="extract",e.CUSTOM="custom",e))(vHe||{});const gHe=Ts.defineToken("AiWritingServiceToken"),mHe=Ts.defineToken("AiWritingTaskServiceToken"),yHe=Ts.defineToken("AiWritingDatasourceContribution"),bHe=Ts.defineToken("AiWritingDatasourceToken");var wHe=Object.defineProperty,_He=Object.getOwnPropertyDescriptor,kHe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?_He(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&wHe(t,n,i),i};let CHe=class{get _queueTask(){return this.aiWritingTaskService.queueTask}getAiWritingConfig(e){const t=this._modelService.getModel("ai_writing").findOne({field_uuid:e}),n=this._readService.getField(e||"");return(null==t?void 0:t.get("open"))&&n&&n.get("type")!==bC.TEXT?{open:!1,type:vHe.SUMMARY,prompt:"",auto:!1}:null==t?void 0:t.toJSON()}_generatePrompt(e,t,n){let r="",o="";switch(t.forEach(((e,r)=>{o+=`${n.get(e.fieldId)||""}是${e.formatValue||""}`,r<t.length-1&&(o+="，")})),e.type){case vHe.SUMMARY:r=`帮我给以下内容生成摘要，尽可能简洁：${o}`;break;case vHe.EXTRACT:r=`帮我总结出以下内容里的${e.prompt}：${o}`;break;case vHe.CUSTOM:r=`帮我给以下内容${e.prompt}：${o}`}return r}async _getAiWritingData(e,t,n,r){var o;try{const i=this._generatePrompt(e,I_(r,(e=>e.fieldId!==t)),n),a=await(null==(o=this.aiWritingDatasource)?void 0:o.handlePost({content:i,type:"custom"}));return(null==a?void 0:a.data.result)||""}catch(e){return console.error(e),""}}async autofillCell(e,t,n,r){var o;const i=this._readService.getViewRecordCells(n),a=function(e,t){for(const n of e)if(t(n))return n;return null}(i,(e=>e.fieldId===t)),l=await this._getAiWritingData(e,t,r,i);if(!l||!a)return;const u={...a,value:l};null==(o=this._commandService)||o.execCommand("setCell",u)}async startAiWriting(e,t){var n;if(!e)return!1;const r=this._readService.getField(e),o=this.getAiWritingConfig(e);if((null==r?void 0:r.get("type"))!==bC.TEXT||null==o||!o.open)return!1;const i=this._readService.getAllFields(),a=new Map;if(null==i||i.forEach((e=>{a.set(e.get("uuid"),e.get("name"))})),t)await this.autofillCell(o,e,t,a);else{const t=this._readService.getRecords();null==(n=this.aiWritingTaskService)||n.emitStartAiWritingTask(e),t.forEach((t=>{var n;const r=`${e}-${t.get("uuid")}`;null==(n=this._queueTask)||n.addJob(r,(async n=>{var i;try{await this.autofillCell(o,e,t.get("uuid"),a)}catch(e){return console.error(e),n.onError(e)}n.onSuccess(),null==(i=this._queueTask)||i.removeSuccessJob(r)}))}))}}async stopAiWriting(e){var t;!e||null==(t=this.aiWritingTaskService)||t.emitStopAiWritingTask(e)}destroy(){var e;null==(e=this.aiWritingTaskService)||e.destroy()}};kHe([Xs(ME)],CHe.prototype,"_modelService",2),kHe([Xs(MI)],CHe.prototype,"_readService",2),kHe([Xs(uA)],CHe.prototype,"_commandService",2),kHe([Xs(mHe)],CHe.prototype,"aiWritingTaskService",2),kHe([Xs(bHe)],CHe.prototype,"aiWritingDatasource",2),CHe=kHe([Ys({token:gHe})],CHe);const EHe=[{uuid:vHe.SUMMARY,name:uw("内容总结"),placeholder:uw("将自动对每条记录进行总结")},{uuid:vHe.CUSTOM,name:uw("自定义"),placeholder:uw("输入智能填写规则\n如：为每个商品生成 50 字的宣传文案")}];var OHe=Object.defineProperty,SHe=Object.getOwnPropertyDescriptor,xHe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?SHe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&OHe(t,n,i),i};let jHe=class{getProvider(){const e=this.serverProvider.getContributions(),t=e[e.length-1];return null==t?void 0:t.registerServer()}hasProvider(){return this.serverProvider.getContributions().length>0}};xHe([bd(fHe)],jHe.prototype,"serverProvider",2),jHe=xHe([Ys()],jHe);var IHe=Object.defineProperty,RHe=Object.getOwnPropertyDescriptor,AHe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?RHe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&IHe(t,n,i),i};let DHe=class{getCommonParams(e){var t,n;const r=e?this._readService.getView(e):this._readService.getActiveView();this.tableId||(this.tableId=null==(t=this._readService.getTable())?void 0:t.get("uuid"));let o={sheetId:this.tableId,type:null==r?void 0:r.get("type"),viewId:(null==r?void 0:r.get("uuid"))||e};const i=null==(n=this._serverRegistry.getProvider())?void 0:n.processParams;return i&&(o=i(o)),o}getSdk(){var e;return null==(e=this._serverRegistry.getProvider())?void 0:e.apiSdk}setActiveView(){const e=this._readService.getTable(),t=this.getCommonParams(e.get("active_view_uuid"));this._syncQueue.addJob((async()=>{await this.getSdk().TableViewController.setActive(t)}))}updateCell(e){const t=this.getCommonParams();t.records=[];for(const n of e){const e=this._readService.getOriginRecord(n.recordId),r=this._readService.getCell(n.fieldId,n.recordId);!r||!e||t.records.push({data:this._toProcess.toValue(r),fieldId:r.fieldId,recordId:r.recordId})}0!==t.records.length&&this._syncQueue.addJob((async()=>{await this.getSdk().TableRecordValueController.bulkUpdate(t)}))}addRecord(e){const t=this.getCommonParams();t.data=e.map((e=>({id:e}))),this._syncQueue.addJob((async()=>{await this.getSdk().TableRecordController.create(t)}))}removeRecord(e){const t=this.getCommonParams();t.recordIds=e,this._syncQueue.addJob((async()=>{await this.getSdk().TableRecordController.remove(t)}))}addField(e){const t=this.getCommonParams();t.fields=e.map((e=>this._toProcess.toColumn(new m_(e)))),this._syncQueue.addJob((async()=>{await this.getSdk().TableFieldController.create(t)}))}updateField(e,t){const n=this._readService.getField(e),r=this._aiWritingService.getAiWritingConfig(e),o=this.getCommonParams();o.field=this._toProcess.toColumn(n),r&&(o.field.enableAI=r.open,o.field.aiWritingType=r.type,o.field.aiPrompt=r.prompt,o.field.enableAutoAIGC=r.auto),this._syncQueue.addJob((async()=>{await this.getSdk().TableFieldController.update(o)})),t&&this._updateFieldRecord()}_updateFieldRecord(){const e=this.getCommonParams(),t=this._readService.getRecords();e.data=E_(t,(e=>{const t=this._readService.getOriginRecord(e.get("uuid"));return{id:e.get("uuid"),data:JSON.stringify(this._toProcess.toRecord(t))}})),this._syncQueue.addJob((async()=>{await this.getSdk().TableRecordController.update(e)}))}removeField(e){const t=this.getCommonParams();t.fieldIds=e,this._syncQueue.addJob((async()=>{await this.getSdk().TableFieldController.remove(t)}))}addView(e){const t=this._getViewData(e);if(!t)return;const n=this.getCommonParams(e);n.data=this._toProcess.toView(t),this._syncQueue.addJob((async()=>{var e,t;const r=await this.getSdk().TableViewController.create(n);!r||this._model.viewModel.upsert({uuid:null==(e=r.data)?void 0:e.view_id},{id:null==(t=r.data)?void 0:t.data.iid},{slient:!0})}))}updateView(e){const t=this._getViewData(e);if(!t)return;const n=this.getCommonParams(e);n.data=this._toProcess.toView(t),this._syncQueue.addJob((async()=>{await this.getSdk().TableViewController.update(n)}))}updateViewOrder(e,t){const n=this.getCommonParams(e);n.targetViewId=t,this._syncQueue.addJob((async()=>{await this.getSdk().TableViewController.moveAfter(n)}))}removeView(e){const t=this.getCommonParams(e);this._syncQueue.addJob((async()=>{await this.getSdk().TableViewController.remove(t)}))}updateForm(e,t){this._syncQueue.addJob((async()=>{var n;const r=this._model.viewModel.findOne({uuid:e});let o={type:"form",status:t,viewId:e,target_id:null==r?void 0:r.get("id"),target_type:"Skythings.View"};const i=null==(n=this._serverRegistry.getProvider())?void 0:n.processParams;i&&(o=i(o)),await this.getSdk().TableShareController.update(o)}))}updateContent(e,t){const n=this._readService.getTable().get("uuid");this._syncQueue.addJob((async()=>{await this._contentDatasource.handlePut(e,n,t)}))}_getViewData(e){var t;const n={},r=this._readService.getView(e);return r?(n.view=this._readService.getView(r.get("uuid")),n.sort=this._readService.getViewSort(r.get("uuid")),n.stats=this._readService.getViewStats(r.get("uuid")),n.viewGroup=this._readService.getViewGroup(r.get("uuid")),n.filters=this._readService.getViewFilters(r.get("uuid")),n.groupViewRecords=null!=(t=n.viewGroup)&&t.group?this._readService.getGroupViewRecords(r.get("uuid")):null,n.viewConfig=this._readService.getViewConfig(r.get("uuid")),n):null}};AHe([Xs(MI)],DHe.prototype,"_readService",2),AHe([Xs(bD)],DHe.prototype,"_toProcess",2),AHe([Xs(jHe)],DHe.prototype,"_serverRegistry",2),AHe([Xs(pHe)],DHe.prototype,"_syncQueue",2),AHe([Xs(gHe)],DHe.prototype,"_aiWritingService",2),AHe([Xs(nze)],DHe.prototype,"_contentDatasource",2),AHe([Xs(zS)],DHe.prototype,"_model",2),DHe=AHe([Ys()],DHe);var PHe=Object.defineProperty,MHe=Object.getOwnPropertyDescriptor,THe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?MHe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&PHe(t,n,i),i};let FHe=class{constructor(){this._events=[],this.isSync=!1,this.handleEvents=e=>{if(this._abilityService.canUpdate(EA.TABLE))for(const t of e){if(!this._isCurrentOrigin(t.transaction))continue;const e=t.path[0],n=t.path.slice(1,t.path.length),r=this._getTrustDeleted(t)||[],o=this._getTruestAdded(t)||[];if("view"===e&&1===t.changes.deleted.size&&1===t.changes.added.size&&0===r.length&&0===o.length){const r=Array.from(t.changes.added)[0].content.type,o=this._readService.getViews(),i=k_(o,(e=>e.get("uuid")===r.get("uuid")))-1;let a;i>-1&&(a=o.get(i)),this.syncEvents({table:e,command:"moveAfter",path:n,item:r,targetItem:a});continue}let i=!1;if(t.changes.deleted.size>0)for(const t of r)this.syncEvents({table:e,command:"delete",path:n,item:t}),i=!0;if(t.changes.added.size>0)for(const t of o)this.syncEvents({table:e,command:"insert",path:n,item:t}),i=!0;if(!i){if(t.keys)for(const r of t.keys)if(32===r[0].length)if("delete"===r[1].action){let t=r[1].oldValue;if(t instanceof Mh){t=t._start;const e=t.content.type._map,n=e.keys(),r=new m_;for(const t of n)r.set(t,e.get(t).content.arr[0]);t=r}this.syncEvents({table:e,command:"delete",path:n,item:t}),i=!0}else if("add"===r[1].action){let o=t.target;r[0]&&(o=o.get(r[0])),o instanceof Mh&&(o=o.get(0)),this.syncEvents({table:e,command:"insert",path:n,item:o,keysChanged:t.keysChanged}),i=!0}else if("update"===r[1].action){let o=t.target;r[0]&&(o=o.get(r[0])),o instanceof Mh&&(o=o.get(0)),this.syncEvents({table:e,command:"update",path:n,item:o,keysChanged:t.keysChanged}),i=!0}if(!i)if(t.target instanceof Mh)for(const r of t.target)this.syncEvents({table:e,command:"update",path:n,item:r});else this.syncEvents({table:e,command:"update",path:n,item:t.target,keysChanged:t.keysChanged})}}},this.startTaskWithDebounce=Rl((()=>{const e=this._events;this.startTask(e),this._events=[]}),300)}start(){!this._database.root||!this._database.root.observeDeep||this._database.root.observeDeep(this.handleEvents)}_isCurrentOrigin(e){const t=e.origin;if(null!=t&&t.trackedOrigins){for(const e of t.trackedOrigins)if(e===this._database.struct.ystruct)return!0;return!1}return t===this._database.struct.ystruct}_getTrustDeleted(e){const t=Array.from(e.changes.deleted),n=Array.from(e.changes.added).reduce(((e,t)=>(e[t.content.type._map.get("uuid").content.arr[0]]=!0,e)),{}),r=[];for(const e of t){const t=e.content.type._map;if(n[t.get("uuid").content.arr[0]])continue;const o=t.keys(),i=new m_;for(const e of o)i.set(e,t.get(e).content.arr[0]);r.push(i)}return r}_getTruestAdded(e){const t=Array.from(e.changes.deleted),n=Array.from(e.changes.added),r=t.reduce(((e,t)=>(e[t.content.type._map.get("uuid").content.arr[0]]=!0,e)),{}),o=[];for(const e of n){const t=e.content.type;r[t.get("uuid")]||o.push(t)}return o}syncEvents(e){if(this._events.push(e),this.isSync)return this.startTask(this._events),void(this._events=[]);this.startTaskWithDebounce()}startTask(e){if(e.length>0){this.addField(e),this.updateField(e),this.removeField(e),this.addRecord(e);const t=this.removeRecord(e);this.updateCell(e,t),this.addView(e),this.updateView(e),this.removeView(e),this.updateContent(e),this.updateForm(e),this.updateTable(e)}}addField(e){var t,n;const r=[];for(const o of e)if("field"===o.table&&"insert"===o.command){const e=null==(n=this._readService.getField(null==(t=o.item)?void 0:t.get("uuid")))?void 0:n.toJSON();r.push(e)}r.length>0&&this._syncHelper.addField(r)}updateField(e){var t,n,r,o,i,a,l,u,c,s;const d={};for(const n of e)if("field"===n.table&&("delete"===n.command||"insert"===n.command)){d[null==(t=n.item)?void 0:t.get("uuid")]=!0}const f={};for(const t of e){let e;if("field"===t.table&&"update"===t.command)e=null==(n=t.item)?void 0:n.get("uuid");else if("field_option"===t.table){if(e=null==(r=t.item)?void 0:r.get("field_uuid"),!e&&t.keysChanged){const n=Array.from(t.keysChanged)[0];e=null==(a=null==(i=null==(o=t.item)?void 0:o.get(n))?void 0:i.get(0))?void 0:a.get("field_uuid")}}else if("ai_writing"===t.table&&(e=null==(l=t.item)?void 0:l.get("field_uuid"),!e&&t.keysChanged)){const n=Array.from(t.keysChanged)[0];e=null==(c=null==(u=t.item)?void 0:u.get(n))?void 0:c.get(0).get("field_uuid")}d[e]||e&&(f[e]||(f[e]=t))}const p=Object.keys(f);for(const e of p){const t=f[e];this._syncHelper.updateField(e,null==(s=t.keysChanged)?void 0:s.has("type"))}}removeField(e){var t;const n=[];for(const r of e)"field"===r.table&&"delete"===r.command&&n.push(null==(t=r.item)?void 0:t.get("uuid"));n.length>0&&this._syncHelper.removeField(n)}addView(e){var t;for(const n of e)"view"===n.table&&"insert"===n.command&&this._syncHelper.addView(null==(t=n.item)?void 0:t.get("uuid"))}addRecord(e){var t;const n=[];for(const r of e)"record"===r.table&&"insert"===r.command&&n.push(null==(t=r.item)?void 0:t.get("uuid"));n.length>0&&this._syncHelper.addRecord(n)}removeRecord(e){var t;const n=[];for(const r of e)if("record"===r.table&&"delete"===r.command){const e=null==(t=r.item)?void 0:t.get("uuid");e&&n.push(e)}return n.length>0&&this._syncHelper.removeRecord(ku(n)),n}updateCell(e,t=[]){var n,r,o,i;const a=[];for(const l of e)if(["field_boolean","field_date","field_number","field_select","field_string","field_uri","cell"].includes(l.table)){let e;if(1===l.path.length){const e=null==(n=l.item)?void 0:n.keys();if(!e)return;for(const n of e){if(null!=t&&t.includes(n))continue;const e=null==(i=null==(o=null==(r=l.item)?void 0:r.get(n))?void 0:o.get(0))?void 0:i.get("field_uuid");if(e){if("cell"===l.table&&"update"===l.command){const t=this._readService.getCell(e,n);if(null!=t&&t.by_system)continue}a.push({fieldId:e,recordId:n})}}}else if(2===l.path.length){const e=l.path[1];if(l.keysChanged){const n=Array.from(l.keysChanged);for(const r of n)if(null==t||!t.includes(r)){if("cell"===l.table&&"update"===l.command){const t=this._readService.getCell(e,r);if(null!=t&&t.by_system)continue}a.push({fieldId:e,recordId:r})}}}else{const n=l.path[1];if(e=l.path[2],!e&&l.keysChanged&&(e=Array.from(l.keysChanged)[0]),!n||!e||null!=t&&t.includes(e))continue;if("cell"===l.table&&"update"===l.command){const t=this._readService.getCell(n,e);if(null!=t&&t.by_system)continue}a.push({fieldId:n,recordId:e})}}a.length>0&&this._syncHelper.updateCell(Cu(a,(e=>e.fieldId+":"+e.recordId)))}updateView(e){var t,n,r,o,i,a,l,u;const c={},s={};for(const d of e){if("view"===d.table&&("delete"===d.command||"insert"===d.command)){const e=null==(t=d.item)?void 0:t.get("uuid");s[e]=!0,delete c[e]}if("view"===d.table&&"update"===d.command){const e=null==(n=d.item)?void 0:n.get("uuid");if(s[e])continue;c[e]=!0}else if(["view_config","view_field","view_record","sort","group","group_item","filter","stat"].includes(d.table)){let e;if(1===d.path.length&&d.keysChanged)e=Array.from(d.keysChanged)[0];else if(2===d.path.length&&d.keysChanged){const t=Array.from(d.keysChanged)[0];e=null==(i=null==(o=null==(r=d.item)?void 0:r.get(t))?void 0:o.get(0))?void 0:i.get("view_uuid")}else e=null==(a=d.item)?void 0:a.get("view_uuid");if(s[e]||!e)continue;c[e]=!0}if("view"===d.table&&"moveAfter"===d.command){const e=null==(l=d.item)?void 0:l.get("uuid"),t=null==(u=d.targetItem)?void 0:u.get("uuid");this._syncHelper.updateViewOrder(e,t)}}const d=Object.keys(c);for(const e of d)this._syncHelper.updateView(e)}removeView(e){var t;for(const n of e)if("view"===n.table&&"delete"===n.command){const e=null==(t=n.item)?void 0:t.get("uuid");this._syncHelper.removeView(e)}}updateContent(e){var t,n,r,o,i,a,l;const u={};for(const o of e)if("content"===o.table&&("update"===o.command||"insert"===o.command)){const e=null==(t=o.item)?void 0:t.get("target_uuid"),i=null==(n=o.item)?void 0:n.get("target_type"),a=null==(r=o.item)?void 0:r.get("status");if("record"!==i||0===a)continue;u[e]=o}const c=Object.keys(u);for(const e of c){const t=u[e];this._syncHelper.updateContent(null==(o=t.item)?void 0:o.get("target_uuid"),{format:null==(i=t.item)?void 0:i.get("format"),html:null==(a=t.item)?void 0:a.get("html"),source:null==(l=t.item)?void 0:l.get("source")})}}updateForm(e){var t,n;for(const r of e)if("view_share"===r.table&&("update"===r.command||"insert"===r.command)){let e,o;if(0===r.path.length){const o=null==(t=r.item)?void 0:t.get("data"),i=Array.from(o.keys())[0];e=null==(n=o.get(i))?void 0:n.get(0)}else 1===r.path.length&&(o=Array.from(r.keysChanged)[0]),e=r.item;const i=null==e?void 0:e.get("status");if(o=o||(null==e?void 0:e.get("view_uuid")),i===xC.ACTIVE)return;this._syncHelper.updateForm(o,i)}}updateTable(e){let t=!1;for(const n of e)["table"].includes(n.table)&&(t=!0);t&&this._syncHelper.setActiveView()}destroy(){this._database.root.unobserveDeep(this.handleEvents)}};THe([Xs(u_)],FHe.prototype,"_database",2),THe([Xs(MI)],FHe.prototype,"_readService",2),THe([Xs(VA)],FHe.prototype,"_abilityService",2),THe([Xs(DHe)],FHe.prototype,"_syncHelper",2),FHe=THe([Ys()],FHe);var NHe=Object.defineProperty,VHe=Object.getOwnPropertyDescriptor,LHe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?VHe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&NHe(t,n,i),i};let BHe=class{init(){this._syncQueue.init(),this._lifecycleService.when(Jb.Rendered,(()=>{setTimeout((()=>{this._hasInited||(this._syncYjs.start(),this._hasInited=!0)}),1e3)}))}destroy(){this._syncQueue.destroy()}};LHe([Xs(Zb)],BHe.prototype,"_lifecycleService",2),LHe([Xs(FHe)],BHe.prototype,"_syncYjs",2),LHe([Xs(pHe)],BHe.prototype,"_syncQueue",2),BHe=LHe([Ys()],BHe);var $He=Object.defineProperty,zHe=Object.getOwnPropertyDescriptor,UHe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?zHe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&$He(t,n,i),i};let HHe=class{constructor(){this._onSyncChange=new ck,this.onSyncChange=this._onSyncChange.event}init(){this._queueTask=this._taskService.createQueueTask({name:"服务端接口同步任务队列",parallel:1}),this._queueTask.onDidStatusChange((e=>{e.status===dR.PENDING?this._onSyncChange.emit({status:hHe.RUNNING}):e.status===dR.WAITING&&this._onSyncChange.emit({status:hHe.SUCCESS})})),this.timerId=setInterval((()=>{var e;null==(e=this._queueTask)||e.resume()}),1e3)}destroy(){var e;null==(e=this._queueTask)||e.destroy(),this._queueTask=null,clearInterval(this.timerId),this.timerId=null}addJob(e){var t;null==(t=this._queueTask)||t.addJob((async t=>{try{await e()}catch(e){return console.error(e),t.onError(e)}t.onSuccess()}))}};UHe([Xs(OR)],HHe.prototype,"_taskService",2),HHe=UHe([Ys({token:pHe})],HHe);var qHe=Object.defineProperty,WHe=Object.getOwnPropertyDescriptor,GHe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?WHe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&qHe(t,n,i),i};let KHe=class{static pluginModule(){return pd().contribution(fHe).register(jHe).register(DHe).register(BHe).register(HHe).register(FHe).register(this)}init(){!this._serverRegistry.hasProvider()||this._syncServer.init()}destroy(){this._syncServer.destroy()}};KHe.pluginName="kernel-server",GHe([Xs(BHe)],KHe.prototype,"_syncServer",2),GHe([Xs(jHe)],KHe.prototype,"_serverRegistry",2),KHe=GHe([Ys({contrib:kA})],KHe);class YHe extends ZR{destroy(){}execute(e){return this.modelService.getModel("ai_writing").upsert({field_uuid:e.fieldId},{field_uuid:e.fieldId,open:e.open,type:vHe.SUMMARY,prompt:"",auto:!1}),!0}}YHe.commandName="updateAiWritingOpen";class XHe extends ZR{destroy(){}execute(e){const t=this.modelService.getModel("ai_writing"),n={field_uuid:e.fieldId,type:e.type};return e.type!==vHe.SUMMARY&&(n.prompt=""),t.upsert({field_uuid:e.fieldId},n),!0}}XHe.commandName="updateAiWritingType";class JHe extends ZR{destroy(){}execute(e){return this.modelService.getModel("ai_writing").upsert({field_uuid:e.fieldId},{field_uuid:e.fieldId,prompt:e.prompt}),!0}}JHe.commandName="updateAiWritingPrompt";class ZHe extends ZR{destroy(){}execute(e){return this.modelService.getModel("ai_writing").upsert({field_uuid:e.fieldId},{field_uuid:e.fieldId,auto:e.auto}),!0}}ZHe.commandName="updateAiWritingAuto";var QHe=Object.defineProperty,eqe=Object.getOwnPropertyDescriptor,tqe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?eqe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&QHe(t,n,i),i};class nqe extends TE{}nqe.table="ai_writing",nqe.indexes=["field_uuid"],tqe([tE()],nqe.prototype,"field_uuid",2),tqe([tE()],nqe.prototype,"open",2),tqe([tE()],nqe.prototype,"type",2),tqe([tE()],nqe.prototype,"prompt",2),tqe([tE()],nqe.prototype,"auto",2);var rqe=Object.defineProperty,oqe=Object.getOwnPropertyDescriptor,iqe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?oqe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&rqe(t,n,i),i};let aqe=class{init(){var e;const t=this.aiWritingDatasourceProvider.getContributions();for(const n of t){const t=null==(e=n.registerAiWritingDatasourcePost)?void 0:e.call(n);t&&(this._datasourcePost=t)}}get Post(){return this._datasourcePost}};iqe([bd(yHe),Ds()],aqe.prototype,"aiWritingDatasourceProvider",2),aqe=iqe([Ys()],aqe);var lqe=Object.defineProperty,uqe=Object.getOwnPropertyDescriptor,cqe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?uqe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&lqe(t,n,i),i};let sqe=class{handlePost(e){return this._aiWritingDatasourceRegistry.Post(e)}};cqe([Xs(aqe)],sqe.prototype,"_aiWritingDatasourceRegistry",2),sqe=cqe([Ys({token:bHe})],sqe);var dqe=Object.defineProperty,fqe=Object.getOwnPropertyDescriptor,pqe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?fqe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&dqe(t,n,i),i};let hqe=class{constructor(){this._onAiWritingStatusChange=new ck,this.onAiWritingStatusChange=this._onAiWritingStatusChange.event,this.queueTask=null,this.taskListener=null,this.isGenerating=!1,this.generateFieldId=null}init(){this.queueTask=this._taskService.createQueueTask({name:"智能填写任务队列",parallel:3})}clearTask(){var e,t;null==(e=this.queueTask)||e.destroy(),null==(t=this.taskListener)||t.destroy()}listenEvent(){var e;this.clearTask(),this.taskListener=null==(e=this.queueTask)?void 0:e.onDidStatusChange((({status:e})=>{var t,n;e===dR.WAITING&&(null==(t=this.queueTask)||!t.hasPenddingJob())&&(null==(n=this.queueTask)||!n.hasRuningJob())&&(this.isGenerating=!1,this._onAiWritingStatusChange.emit({isGenerating:this.isGenerating,fieldId:this.generateFieldId,type:"auto"}),this.generateFieldId=null,g.a.success(uw("已重新填写")))}))}destroy(){this.clearTask(),this.queueTask=null}emitStartAiWritingTask(e){this.listenEvent(),this.isGenerating=!0,this.generateFieldId=e,this._onAiWritingStatusChange.emit({isGenerating:this.isGenerating,fieldId:this.generateFieldId,type:"manual"})}emitStopAiWritingTask(e){this.clearTask(),this.isGenerating=!1,this.generateFieldId=null,this._onAiWritingStatusChange.emit({isGenerating:this.isGenerating,fieldId:e,type:"manual"})}isFieldGenerating(e){return this.isGenerating&&e===this.generateFieldId}};pqe([Xs(OR)],hqe.prototype,"_taskService",2),pqe([Ns()],hqe.prototype,"init",1),pqe([Vs()],hqe.prototype,"destroy",1),hqe=pqe([Ys({token:mHe})],hqe);var vqe=Object.defineProperty,gqe=Object.getOwnPropertyDescriptor,mqe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?gqe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&vqe(t,n,i),i};let yqe=class{constructor(){this._listener=null}static pluginModule(){return pd().contribution(yHe).register(aqe).register(sqe).register(CHe).register(hqe).register(this)}static registerConfiguration(e){e.registerConfiguration({id:"aiWriting",type:"object",properties:{disable:{type:"boolean"}}}),e.registerDefaultValue({"aiWriting.disable":!0})}get isAiWritingEnable(){return!!this._configurationService.getValue("aiWriting.enable")}init(){this.commandService.registerCommand(YHe.commandName,YHe),this.commandService.registerCommand(XHe.commandName,XHe),this.commandService.registerCommand(JHe.commandName,JHe),this.commandService.registerCommand(ZHe.commandName,ZHe),this.aiWritingDatasourceRegistry.init(),this.isAiWritingEnable&&(this._listener=this.commandService.onDidExecuteCommand((async({context:e})=>{if("updateField"===e.commandName){const t=e.argArray[0],{field:n,newFieldProperty:r}=t,o=n.get("uuid");r.type!==bC.TEXT&&await this.commandService.execCommand("updateAiWritingOpen",{fieldId:o,open:!1})}})))}destroy(){var e,t;null==(e=this._listener)||e.destroy(),null==(t=this.aiWritingService)||t.destroy()}registerModel(){return nqe}registerProcessTableMiddleware(){return(e,t)=>{const n=e.sheet.columns;if(n&&n.length>0){const e=n.map((e=>({uuid:fw(32),field_uuid:e.uuid||e.id,open:e.enableAI||!1,type:e.aiWritingType||vHe.SUMMARY,prompt:e.aiPrompt||"",auto:e.enableAutoAIGC||!1})));t.setData("ai_writing",e)}return e}}};yqe.pluginName="kernel-ai-writing",mqe([Xs(uA)],yqe.prototype,"commandService",2),mqe([Xs(aqe)],yqe.prototype,"aiWritingDatasourceRegistry",2),mqe([Xs(CHe)],yqe.prototype,"aiWritingService",2),mqe([Xs(R_)],yqe.prototype,"_configurationService",2),yqe=mqe([Ys({contrib:[kA,ZC,CD]})],yqe);class bqe extends ZR{destroy(){}execute(e){return this.modelService.getModel("content").upsert({target_uuid:e.recordId,target_type:"record"},{format:e.content.format,html:e.content.html,source:e.content.source,target_uuid:e.recordId,target_type:"record",status:1}),this.updateRecord(e.recordId),!0}updateRecord(e){var t;this.modelService.getModel("record").update({uuid:e},{updated_at:+new Date}),this.modelService.getModel("record").update({uuid:e},{modifier_id:null==(t=this.context.user)?void 0:t.uid})}}bqe.commandName="updateContent";var wqe=Object.defineProperty,_qe=Object.getOwnPropertyDescriptor,kqe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?_qe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&wqe(t,n,i),i};class Cqe extends TE{}Cqe.table="content",Cqe.indexes=["target_type","target_uuid"],kqe([tE()],Cqe.prototype,"target_uuid",2),kqe([tE()],Cqe.prototype,"target_type",2),kqe([tE()],Cqe.prototype,"format",2),kqe([tE()],Cqe.prototype,"html",2),kqe([tE()],Cqe.prototype,"source",2),kqe([tE()],Cqe.prototype,"status",2);var Eqe=Object.defineProperty,Oqe=Object.getOwnPropertyDescriptor,Sqe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?Oqe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Eqe(t,n,i),i};let xqe=class{init(){var e,t;const n=this.contentDatasourceProvider.getContributions();for(const r of n){const n=null==(e=r.registerContentDatasourceGet)?void 0:e.call(r);n&&(this._datasourceGet=n);const o=null==(t=r.registerContentDatasourcePut)?void 0:t.call(r);o&&(this._datasourcePut=o)}}get Get(){return this._datasourceGet}get Put(){return this._datasourcePut}};Sqe([bd(tze),Ds()],xqe.prototype,"contentDatasourceProvider",2),xqe=Sqe([Ys()],xqe);var jqe=Object.defineProperty,Iqe=Object.getOwnPropertyDescriptor,Rqe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?Iqe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&jqe(t,n,i),i};let Aqe=class{getContent(e,t){return this._modelService.getModel("content").findOne({target_uuid:e,target_type:t})}setContentWithSlient(e,t,n){this._modelService.getModel("content").upsert({target_uuid:e,target_type:t},{format:n.format,html:n.html,source:n.source,target_uuid:e,target_type:t,status:0},{slient:!0})}};Rqe([Xs(ME)],Aqe.prototype,"_modelService",2),Aqe=Rqe([Ys({token:rze})],Aqe);var Dqe=Object.defineProperty,Pqe=Object.getOwnPropertyDescriptor,Mqe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?Pqe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Dqe(t,n,i),i};let Tqe=class{handleGet(e,t){return this._contentDatasourceRegistry.Get(e,t)}handlePut(e,t,n){return this._contentDatasourceRegistry.Put(e,t,n)}};Mqe([Xs(xqe)],Tqe.prototype,"_contentDatasourceRegistry",2),Tqe=Mqe([Ys({token:nze})],Tqe);var Fqe=Object.defineProperty,Nqe=Object.getOwnPropertyDescriptor,Vqe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?Nqe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&Fqe(t,n,i),i};let Lqe=class{static pluginModule(){return pd().contribution(tze).register(xqe).register(Tqe).register(Aqe).register(this)}init(){this.commandService.registerCommand(bqe.commandName,bqe),this.contentDatasourceRegistry.init()}registerModel(){return Cqe}registerProcessTableMiddleware(){return e=>{const t=e.records;if(t)for(const e of t)!e.content||this.contentService.setContentWithSlient(e.uuid,"record",e.content);return e}}};Lqe.pluginName="kernel-content",Vqe([Xs(uA)],Lqe.prototype,"commandService",2),Vqe([Xs(xqe)],Lqe.prototype,"contentDatasourceRegistry",2),Vqe([Xs(Aqe)],Lqe.prototype,"contentService",2),Lqe=Vqe([Ys({contrib:[kA,ZC,CD]})],Lqe);const Bqe=[dHe,Yze,KHe,yqe,Lqe],$qe=({docId:e,docType:t,webSdk:n})=>({token:tze,useValue:{registerContentDatasourceGet:()=>async(r,o)=>{var i,a,l,u;const c={docId:e,docType:t,sheetId:o};if(Array.isArray(r))return c.recordIds=r,(await(null==(a=(i=n.TableRecordController).getContent)?void 0:a.call(i,c))).content;{c.recordId=r;let e=(await(null==(u=(l=n.TableRecordController).getContent)?void 0:u.call(l,c))).content;return e||(e={format:"lake",html:"",source:""}),e}},registerContentDatasourcePut:()=>async(r,o,i)=>{const a={docId:e,docType:t,sheetId:o,recordId:r,content:i};await n.TableRecordController.putContent(a)}}});var zqe={exports:{}};!function(e,t){e.exports=function(){var e=/^(b|B)$/,t={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},n={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},r={floor:Math.floor,ceil:Math.ceil};function o(o){var i,a,l,u,c,s,d,f,p,h,v,g,m,y,b,w,_,k,C,E,O,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},x=[],j=0;if(isNaN(o))throw new TypeError("Invalid number");if(l=!0===S.bits,b=!0===S.unix,g=!0===S.pad,a=S.base||2,m=void 0!==S.round?S.round:b?1:2,d=void 0!==S.locale?S.locale:"",f=S.localeOptions||{},w=void 0!==S.separator?S.separator:"",_=void 0!==S.spacer?S.spacer:b?"":" ",C=S.symbols||{},k=2===a&&S.standard||"jedec",v=S.output||"string",c=!0===S.fullform,s=S.fullforms instanceof Array?S.fullforms:[],i=void 0!==S.exponent?S.exponent:-1,E=r[S.roundingMethod]||Math.round,p=(h=Number(o))<0,u=a>2?1e3:1024,O=!1===isNaN(S.precision)?parseInt(S.precision,10):0,p&&(h=-h),(-1===i||isNaN(i))&&(i=Math.floor(Math.log(h)/Math.log(u)))<0&&(i=0),i>8&&(O>0&&(O+=8-i),i=8),"exponent"===v)return i;if(0===h)x[0]=0,y=x[1]=b?"":t[k][l?"bits":"bytes"][i];else{j=h/(2===a?Math.pow(2,10*i):Math.pow(1e3,i)),l&&(j*=8)>=u&&i<8&&(j/=u,i++);var I=Math.pow(10,i>0?m:0);x[0]=E(j*I)/I,x[0]===u&&i<8&&void 0===S.exponent&&(x[0]=1,i++),y=x[1]=10===a&&1===i?l?"kb":"kB":t[k][l?"bits":"bytes"][i],b&&(x[1]="jedec"===k?x[1].charAt(0):i>0?x[1].replace(/B$/,""):x[1],e.test(x[1])&&(x[0]=Math.floor(x[0]),x[1]=""))}if(p&&(x[0]=-x[0]),O>0&&(x[0]=x[0].toPrecision(O)),x[1]=C[x[1]]||x[1],!0===d?x[0]=x[0].toLocaleString():d.length>0?x[0]=x[0].toLocaleString(d,f):w.length>0&&(x[0]=x[0].toString().replace(".",w)),g&&!1===Number.isInteger(x[0])&&m>0){var R=w||".",A=x[0].toString().split(R),D=A[1]||"",P=D.length,M=m-P;x[0]="".concat(A[0]).concat(R).concat(D.padEnd(P+M,"0"))}return c&&(x[1]=s[i]?s[i]:n[k][i]+(l?"bit":"byte")+(1===x[0]?"":"s")),"array"===v?x:"object"===v?{value:x[0],symbol:x[1],exponent:i,unit:y}:x.join(_)}return o.partial=function(e){return function(t){return o(t,e)}},o}()}(zqe);const Uqe=zqe.exports;var Hqe={exports:{}},qqe={exports:{}};!function(e,t){(t=e.exports=[".docx",".doc",".dotx",".dot",".rtf",".txt",".html",".htm",".lake",".lakebook",".lakesheet",".lakemind",".lakeshow",".pdf",".xls",".xlsx",".xltx",".xlsm",".xlt",".csv",".pptx",".ppt",".potx",".pot",".ppsx",".pps",".pages",".numbers",".nmbtemplate",".template",".key",".keynote",".kth",".et",".ett",".dps",".dpt",".wps",".wpt",".txt",".md",".mark",".markdown",".xmind",".graffle",".gtemplate",".gstencil",".mindnode",".vpp",".mmap",".mm",".mpp"]).normal=[".docx",".doc",".txt",".lake",".lakebook",".lakesheet",".pdf",".xls",".xlsx",".xlsm",".csv",".pptx",".ppt",".pages",".numbers",".key",".keynote",".txt",".md",".mark",".markdown",".xmind",".mindnode",".mmap",".mm"],t.paid=[...t.normal,".htm",".html",".dotx",".dot",".rtf",".xltx",".xlt",".potx",".pot",".ppsx",".pps",".wps",".wpt",".graffle",".gtemplate",".gstencil"]}(qqe,qqe.exports);var Wqe={exports:{}},Gqe={exports:{}};!function(e,t){(t=e.exports=[".doc",".docx",".ppt",".pptx",".xls",".xlsm",".xlsx",".dot",".dotx",".pot",".potx",".xlt",".xltx",".pps",".ppsx",".csv",".rtf"]).normal=[".doc",".docx",".ppt",".pptx",".xls",".xlsm",".xlsx",".csv"],t.paid=[...t.normal,".dot",".dotx",".pot",".potx",".xlt",".xltx",".pps",".ppsx",".rtf"]}(Gqe,Gqe.exports);const Kqe=Gqe.exports;!function(e,t){const n=Gqe.exports;(t=e.exports=n.concat([".pdf"])).normal=n.normal.concat([".pdf"]),t.paid=n.paid.concat([".pdf"])}(Wqe,Wqe.exports);const Yqe=Wqe.exports;var Xqe={exports:{}},Jqe={exports:{}};!function(e,t){(t=e.exports=[".rp",".rplib",".psd",".sketch",".ai",".eddx",".edx",".drawio",".xd",".dwg"]).normal=[".rp",".psd",".sketch"],t.paid=[...t.normal,".rplib",".ai",".xd"]}(Jqe,Jqe.exports);const Zqe=Jqe.exports;var Qqe={exports:{}};!function(e,t){(t=e.exports=[".key",".keynote",".pages",".numbers"]).normal=[".key",".keynote",".pages",".numbers"],t.paid=[...t.normal]}(Qqe,Qqe.exports);const eWe=Qqe.exports;var tWe={exports:{}};!function(e,t){(t=e.exports=[".xmind",".xmind.zip"]).normal=[".xmind"],t.paid=[...t.normal,".xmind.zip"]}(tWe,tWe.exports);const nWe=tWe.exports;!function(e,t){const n=Jqe.exports,r=Qqe.exports,o=tWe.exports;(t=e.exports=n.concat(r,o)).normal=n.normal.concat(r.normal,o.normal),t.paid=n.paid.concat(r.paid,o.paid)}(Xqe,Xqe.exports);const rWe=Xqe.exports;var oWe={exports:{}};!function(e,t){(t=e.exports=[".svg",".png",".bmp",".jpg",".jpeg",".gif",".tif",".tiff",".emf",".webp",".heic",".heif"]).normal=[".svg",".png",".bmp",".jpg",".jpeg",".gif",".webp",".heic",".heif"],t.paid=[...t.normal,".emf",".tif",".tiff"]}(oWe,oWe.exports);const iWe=oWe.exports;var aWe={exports:{}};!function(e,t){(t=e.exports=[".sketch",".psd",".ai",".rp",".rplib",".aep",".c4d",".fbx",".xd",".eps"]).normal=[".sketch",".psd",".rp"],t.paid=[...t.normal,".ai",".rplib",".xd"]}(aWe,aWe.exports);var lWe={exports:{}};!function(e,t){(t=e.exports=[".mp4",".mov",".avi",".wmv",".m4a",".m4v",".webm",".flv",".mkv",".mpg",".ts",".mts",".swf",".3gp",".ogg",".aac",".dv",".f4v",".flac",".rmvb",".vob",".asf",".dat",".m2t",".m3u8",".mj2",".mjpeg",".mpe",".mpeg",".qt",".rm",".rmvb",".wmv"]).normal=[],t.paid=e.exports}(lWe,lWe.exports);const uWe=lWe.exports;var cWe={exports:{}};!function(e,t){(t=e.exports=[".mp3",".mpga",".wav",".m4a",".flac"]).normal=[".mp3",".mpga",".wav"],t.paid=[...t.normal,".m4a"]}(cWe,cWe.exports);const sWe=cWe.exports;var dWe={exports:{}};!function(e,t){(t=e.exports=[".zip",".rar",".gz",".tgz",".gzip",".7z",".tar",".jar",".dmg",".pkg"]).normal=[],t.paid=[".zip",".rar",".7z"]}(dWe,dWe.exports);const fWe=dWe.exports;var pWe={exports:{}};!function(e,t){(t=e.exports=[".abap",".ada",".adp",".ahk",".as",".as3",".asc",".ascx",".asm",".asp",".awk",".bash",".bash_login",".bash_logout",".bash_profile",".bashrc",".bat",".bib",".bsh",".build",".builder",".c",".c++",".capfile",".cc",".cfc",".cfm",".cfml",".cl",".clj",".cls",".cmake",".cmd",".coffee",".config",".cpp",".cpt",".cpy",".cs",".cshtml",".cson",".csproj",".css",".ctp",".cxx",".dart",".d",".ddl",".di",".diff",".disco",".dml",".dtd",".dtml",".el",".emakefile",".erb",".erl",".f",".f90",".f95",".fs",".fsi",".fsscript",".fsx",".gemfile",".gemspec",".gitconfig",".go",".groovy",".gvy",".Hcp",".h",".h++",".haml",".handlebars",".hbs",".hh",".hpp",".hrl",".hs",".htc",".hxx",".html",".htm",".idl",".iim",".inc",".inf",".ini",".inl",".ipp",".irbrc",".pug",".jade",".jav",".java",".js",".json",".jsonl",".jsp",".jsx",".l",".less",".lhs",".lisp",".log",".lst",".ltx",".lua",".m",".mak",".make",".manifest",".master",".md",".mkd",".markdn",".markdown",".mdown",".mkdn",".ml",".mli",".mll",".mly",".mud",".makefile",".nfo",".opml",".osascript",".p",".pas",".patch",".php",".php2",".php3",".php4",".php5",".phtml",".pl",".plx",".perl",".pm",".pod",".pp",".profile",".ps1",".ps1xml",".psd1",".psm1",".pss",".pt",".py",".pyw",".proto",".r",".rake",".rb",".rbx",".rc",".rdf",".re",".reg",".rest",".resw",".resx",".rhtml",".rjs",".rprofile",".rpy",".rs",".rss",".rst",".ruby",".rxml",".s",".sass",".scala",".scm",".sconscript",".sconstruct",".script",".scss",".sgml",".sh",".shtml",".sml",".svn-base",".swift",".sql",".sty",".tcl",".tex",".textile",".tld",".tli",".tmpl",".tpl",".ts",".tsx",".vb",".vi",".vim",".vmg",".webpart",".wsp",".wsdl",".xhtml",".xml",".jmx",".xoml",".xsd",".xslt",".yaml",".yaws",".yml",".zsh",".arxml"]).normal=[".sql",".js",".md",".mkd",".css",".json",".jsonl",".java",".xml",".py",".yaml",".sh",".yml",".markdown",".log",".jmx",".php",".ts",".bat",".m",".c",".go",".r",".cpp",".h"],t.paid=[...t.normal,".html",".dart",".jsp",".cs",".pl",".reg",".tsx",".proto",".sgml",".cpt",".ass",".patch",".xsd",".jsx",".ps1",".lua",".pas",".htm",".tex",".config",".cmake",".rb",".cmd",".scss",".less",".xhtml",".shtml",".cc",".coffee",".groovy",".d",".opml",".scala",".svn-base",".hpp",".rdf",".p",".wsdl",".bash",".el",".tpl",".diff",".asp",".asc",".inf",".ddl",".cls",".tmpl",".lst",".ahk",".asm",".make",".pm",".vi",".vim",".s",".abap",".tld",".bib",".script",".ada",".adp",".as",".as3",".ascx",".awk",".bash_login",".bash_logout",".bash_profile",".bashrc",".bsh",".build",".builder",".c++",".capfile",".cfc",".cfm",".cfml",".cl",".clj",".cpy",".cshtml",".cson",".csproj",".ctp",".cxx",".di",".disco",".dml",".dtd",".dtml",".emakefile",".erb",".erl",".f",".f90",".f95",".fs",".fsi",".fsscript",".fsx",".gemfile",".gemspec",".gitconfig",".gvy",".h++",".haml",".handlebars",".hbs",".Hcp",".hh",".hrl",".hs",".htc",".hxx",".idl",".iim",".inc",".inl",".ipp",".irbrc",".jade",".jav",".l",".lhs",".lisp",".ltx",".mak",".makefile",".manifest",".markdn",".master",".mdown",".mkdn",".ml",".mli",".mll",".mly",".mud",".nfo",".osascript",".perl",".php2",".php3",".php4",".php5",".phtml",".plx",".pod",".pp",".profile",".ps1xml",".psd1",".psm1",".pss",".pt",".pug",".pyw",".rake",".rbx",".rc",".re",".rest",".resw",".resx",".rhtml",".rjs",".rprofile",".rpy",".rs",".rss",".rst",".ruby",".rxml",".sass",".scm",".sconscript",".sconstruct",".sml",".sty",".swift",".tcl",".textile",".tli",".vb",".vmg",".webpart",".wsp",".xoml",".xslt",".yaws",".zsh"]}(pWe,pWe.exports);const hWe=pWe.exports;var vWe={exports:{}};!function(e,t){(t=e.exports=[".dwg",".vsd",".vsdm",".vsdx",".vss",".vssm",".vst",".vstm",".vstx",".msi",".chm",".sub",".idx",".sst",".son",".srt",".ssa",".ass",".smi",".psb",".pjs",".stl",".tts",".vsf",".zeg",".ipynb",".msg",".caj",".jar",".tar",".gz",".cnf",".ini",".rpm",".conf"]).normal=[".ipynb"],t.paid=[...t.normal,".chm",".ass",".jar",".tar",".gz",".cnf",".ini",".rpm",".conf"]}(vWe,vWe.exports);var gWe={exports:{}};!function(e,t){(t=e.exports=[".xls",".xlsx",".xlsm",".xltx",".xlt",".csv",".numbers"]).normal=[".xls",".xlsx",".xlsm",".csv",".numbers"],t.paid=[...t.normal,".xlt",".xltx"]}(gWe,gWe.exports);const mWe=gWe.exports;var yWe={exports:{}};!function(e,t){(t=e.exports=[".ppt",".pptx",".ppsx",".potx",".pot",".key"]).normal=[".ppt",".pptx",".key"],t.paid=[...t.normal,".ppsx",".potx",".pot"]}(yWe,yWe.exports);const bWe=yWe.exports;var wWe={exports:{}};!function(e,t){(t=e.exports=[".mindnode",".mindnode.zip",".xmind",".xmind.zip",".mmap",".mmap.zip",".mm"]).normal=[".xmind",".mmap",".mindnode"],t.paid=[...t.normal,".xmind.zip",".mmap.zip",".mindnode.zip",".mm"]}(wWe,wWe.exports);const _We=wWe.exports;!function(e,t){const n=qqe.exports,r=Wqe.exports,o=Xqe.exports,i=oWe.exports,a=aWe.exports,l=lWe.exports,u=cWe.exports,c=dWe.exports,s=pWe.exports,d=vWe.exports,f=gWe.exports,p=yWe.exports,h=wWe.exports;t=e.exports=[].concat(n,r,o,i,a,l,u,c,s,d,f,p,h);let v=[n,r,o,i,a,l,u,c,s,d,f,p,h].map((e=>e.normal)),g=[n,r,o,i,a,l,u,c,s,d,f,p,h].map((e=>e.paid));t.normal=[].concat(...v),t.paid=[].concat(...g)}(Hqe,Hqe.exports);const kWe=Hqe.exports;var CWe=typeof navigator<"u"?navigator.userAgent:"",EWe=/edge/i.test(CWe),OWe=!EWe&&/chrome/i.test(CWe);/firefox/i.test(CWe),!EWe&&!OWe&&/safari/i.test(CWe),/dingtalk/i.test(CWe),/mobile/i.test(CWe),/yuque-desktop\/[\d.]+/i.test(CWe);var SWe=/os [\.\_\d]+ like mac os/i.test(CWe);/android/i.test(CWe);!SWe&&/mac os x/i.test(CWe);var xWe=/windows\s*(?:nt)?\s*[\.\_\d]+/i.test(CWe);/ipad/i.test(CWe)||typeof navigator<"u"&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints,/YuqueMobileApp/i.test(CWe),/YuqueMobileApp.+\(.+Device\/Phone/i.test(CWe),/YuqueMobileApp.+\(.+Device\/Pad/i.test(CWe);for(var jWe={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},IWe=1;IWe<20;IWe++)jWe["f"+IWe]=111+IWe;var RWe=iWe.map((function(e){return e.substring(1)})),AWe=iWe.normal.map((function(e){return e.substring(1)})),DWe=iWe.paid.map((function(e){return e.substring(1)})),PWe=uWe.map((function(e){return e.substring(1)})),MWe=uWe.normal.map((function(e){return e.substring(1)})),TWe=uWe.paid.map((function(e){return e.substring(1)})),FWe=sWe.map((function(e){return e.substring(1)})),NWe=sWe.normal.map((function(e){return e.substring(1)})),VWe=sWe.paid.map((function(e){return e.substring(1)})),LWe=bWe.map((function(e){return e.substring(1)})),BWe=bWe.normal.map((function(e){return e.substring(1)})),$We=bWe.paid.map((function(e){return e.substring(1)})),zWe=mWe.map((function(e){return e.substring(1)})),UWe=mWe.normal.map((function(e){return e.substring(1)})),HWe=mWe.paid.map((function(e){return e.substring(1)})),qWe=fWe.map((function(e){return e.substring(1)})),WWe=fWe.normal.map((function(e){return e.substring(1)})),GWe=fWe.paid.map((function(e){return e.substring(1)})),KWe=_We.map((function(e){return e.substring(1)})),YWe=_We.normal.map((function(e){return e.substring(1)})),XWe=_We.paid.map((function(e){return e.substring(1)})),JWe=Yqe.map((function(e){return e.substring(1)})),ZWe=Yqe.normal.map((function(e){return e.substring(1)})),QWe=Yqe.paid.map((function(e){return e.substring(1)})),eGe=rWe.map((function(e){return e.substring(1)})),tGe=rWe.normal.map((function(e){return e.substring(1)})),nGe=rWe.paid.map((function(e){return e.substring(1)})),rGe=kWe.map((function(e){return e.substring(1)})),oGe=kWe.normal.map((function(e){return e.substring(1)})),iGe=kWe.paid.map((function(e){return e.substring(1)})),aGe=[".txt"].concat(hWe).map((function(e){return e.substring(1)})),lGe=[".txt"].concat(hWe.normal).map((function(e){return e.substring(1)})),uGe=[".txt"].concat(hWe.paid).map((function(e){return e.substring(1)})),cGe=Kqe.map((function(e){return e.substring(1)})),sGe=Kqe.normal.map((function(e){return e.substring(1)})),dGe=Kqe.paid.map((function(e){return e.substring(1)})),fGe=eWe.map((function(e){return e.substring(1)})),pGe=eWe.normal.map((function(e){return e.substring(1)})),hGe=eWe.paid.map((function(e){return e.substring(1)})),vGe=Zqe.map((function(e){return e.substring(1)})),gGe=Zqe.normal.map((function(e){return e.substring(1)})),mGe=Zqe.paid.map((function(e){return e.substring(1)})),yGe=nWe.map((function(e){return e.substring(1)})),bGe=nWe.normal.map((function(e){return e.substring(1)})),wGe=nWe.paid.map((function(e){return e.substring(1)})),_Ge={FILE_EXT:rGe,FILE_EXT_STR:kGe(rGe),FILE_EXT_NORMAL:oGe,FILE_EXT_NORMAL_STR:kGe(oGe),FILE_EXT_PAID:iGe,FILE_EXT_PAID_STR:kGe(iGe),IMAGE_EXT:RWe,IMAGE_EXT_STR:kGe(RWe),IMAGE_EXT_NORMAL:AWe,IMAGE_EXT_NORMAL_STR:kGe(AWe),IMAGE_EXT_PAID:DWe,IMAGE_EXT_PAID_STR:kGe(DWe),VIDEO_EXT:PWe,VIDEO_EXT_STR:kGe(PWe),VIDEO_EXT_NORMAL:MWe,VIDEO_EXT_NORMAL_STR:kGe(MWe),VIDEO_EXT_PAID:TWe,VIDEO_EXT_PAID_STR:kGe(TWe),OFFICE_EXT:JWe,OFFICE_EXT_STR:kGe(JWe),OFFICE_EXT_NORMAL:ZWe,OFFICE_EXT_NORMAL_STR:kGe(ZWe),OFFICE_EXT_PAID:QWe,OFFICE_EXT_PAID_STR:kGe(QWe),MAC_OFFICE_EXT:eGe,MAC_OFFICE_STR:kGe(eGe),MAC_OFFICE_EXT_NORMAL:tGe,MAC_OFFICE_NORMAL_STR:kGe(tGe),MAC_OFFICE_EXT_PAID:nGe,MAC_OFFICE_PAID_STR:kGe(nGe),DOC_MS_OFFICE_EXT:cGe,DOC_MS_OFFICE_STR:kGe(cGe),DOC_MS_OFFICE_EXT_NORMAL:sGe,DOC_MS_OFFICE_NORMAL_STR:kGe(sGe),DOC_MS_OFFICE_EXT_PAID:dGe,DOC_MS_OFFICE_PAID_STR:kGe(dGe),DOC_MAC_OFFICE_EXT:fGe,DOC_MAC_OFFICE_STR:kGe(fGe),DOC_MAC_OFFICE_EXT_NORMAL:pGe,DOC_MAC_OFFICE_NORMAL_STR:kGe(pGe),DOC_MAC_OFFICE_EXT_PAID:hGe,DOC_MAC_OFFICE_PAID_STR:kGe(hGe),DOC_DESIGN_EXT:vGe,DOC_DESIGN_STR:kGe(vGe),DOC_DESIGN_EXT_NORMAL:gGe,DOC_DESIGN_NORMAL_STR:kGe(gGe),DOC_DESIGN_EXT_PAID:mGe,DOC_DESIGN_PAID_STR:kGe(mGe),DOC_MIND_EXT:yGe,DOC_MIND_STR:kGe(yGe),DOC_MIND_EXT_NORMAL:bGe,DOC_MIND_NORMAL_STR:kGe(bGe),DOC_MIND_EXT_PAID:wGe,DOC_MIND_PAID_STR:kGe(wGe),TEXT_FILE_EXT:aGe,TEXT_FILE_EXT_NORMAL:lGe,TEXT_FILE_EXT_PAID:uGe,AUDIO_EXT:FWe,AUDIO_EXT_NORMAL:NWe,AUDIO_EXT_PAID:VWe,PRESENTATION_EXT:LWe,PRESENTATION_EXT_NORMAL:BWe,PRESENTATION_EXT_PAID:$We,SHEET_EXT:zWe,SHEET_EXT_NORMAL:UWe,SHEET_EXT_PAID:HWe,COMPRESS_EXT:qWe,COMPRESS_EXT_NORMAL:WWe,COMPRESS_EXT_PAID:GWe,MMAP_EXT:KWe,MMAP_EXT_NORMAL:YWe,MMAP_EXT_PAID:XWe};function kGe(e){return e.map((function(e){return".".concat(e)})).join(", ")}var CGe={"image/jpeg":["jpeg","jpg","jpe"],"image/png":["png"],"image/gif":["gif"],"image/vnd.wap.wbmp":["wbmp"],"image/tiff":["tiff","tiff"],"image/vnd.adobe.photoshop":["psd"],"image/svg+xml":["svg","svgz"],"text/jsx":["jsx"],"text/less":["less"],"text/css":["css"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/csv":["csv"],"text/xml":["xml"],"text/x-vcard":["vcf"],"text/x-vcalendar":["vcs"],"text/markdown":["md"],"text/plain":["txt"],"text/richtext":["rtx"],"text/rtf":["rtf"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js"],"text/yaml":["yaml","yml"],"audio/mp3":["mp3"],"audio/mp4":["mp4","mp4a"],"video/mp4":["mp4"],"audio/mpeg":["mpeg","mp2","mp3"],"audio/ogg":["oga"],"audio/wav":["wav"],"audio/wave":["wav"],"audio/webm":["weba"],"video/x-msvideo":["avi"],"video/quicktime":["mov","qt"],"video/ogg":["ogv"],"video/x-sgi-movie":["movie"],"application/rss+xml":["rss"],"application/json":["json"],"application/zip":["zip"],"application/gzip":["gzip"],"application/pdf":["pdf"],"application/postscript":["ai","eps","ps"],"application/msword":["doc","dot"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.ms-fontobject":["eot"],"application/vnd.android.package-archive":["apk"],"application/x-apple-diskimage":["dmg"],"application/x-iwork-keynote-sffkey":["key"],"application/x-iwork-pages-sffpages":["pages"],"application/x-iwork-keynote-sffnumbers":["numbers"],"application/x-iwork-numbers-sffnumbers":["numbers"]};function EGe(e){if(!e)return"";var t;if(t="string"==typeof e?e:e.name){if((t=t.toLowerCase()).endsWith(".mindnode.zip"))return"mindnode.zip";if(t.endsWith(".xmind.zip"))return"xmind.zip";if(t.endsWith(".mmap.zip"))return"mmap.zip";if(t.endsWith(".mpp.zip"))return"mpp.zip"}var n=t&&t.split(".").pop()||"",r=e.type&&CGe[e.type];return r?r.includes(n)?n:r[0]:n}function OGe(e,t){return{file:524288e3,video:209715200,image:10485760,previewOffice:104857600,previewMacOffice:209715200,previewPdf:104857600}[e]>t}function SGe(e){var t=EGe(e);return _Ge.IMAGE_EXT.includes(t)}function xGe(e){var t=EGe(e);return _Ge.TEXT_FILE_EXT.includes(t)}function jGe(e){var t=EGe(e);return _Ge.VIDEO_EXT.includes(t)}function IGe(e){var t=EGe(e);return _Ge.OFFICE_EXT.includes(t)}function RGe(e){var t=EGe(e);return _Ge.MAC_OFFICE_EXT.includes(t)}function AGe(e){var t=EGe(e);return["pdf"].includes(t)}function DGe(e){var t=EGe(e);return _Ge.AUDIO_EXT.includes(t)}function PGe(e){var t=EGe(e);return _Ge.PRESENTATION_EXT.includes(t)}function MGe(e){var t=EGe(e);return _Ge.SHEET_EXT.includes(t)}function TGe(e){var t=EGe(e);return _Ge.MMAP_EXT.includes(t)}function FGe(e){var t=e.replace(/^https?:\/\/[^/]+/,"").replace(/^\/attachments\//,"");return"/"===t.charAt(0)&&(t=t.substr(1)),t}var NGe={getFileExtname:EGe,getFileSize:function(e,t){return t=t||(xWe?2:10),Uqe(e,e<1048576?{base:t,exponent:1,round:0}:{base:t,exponent:2,round:1})},isSizeLimit:OGe,isImage:SGe,isFile:function(e){var t=EGe(e);return _Ge.FILE_EXT.includes(t)},isTextFile:xGe,isVideo:jGe,isOffice:IGe,isMacOffice:RGe,isPdf:AGe,isAudio:DGe,isPresentation:PGe,isSheet:MGe,isMMap:TGe,isCompressed:function(e){var t=EGe(e);return _Ge.COMPRESS_EXT.includes(t)},isExt:function(e,t){return Array.isArray(e)?e.includes(t):e===t},isFileCanPreview:function(e){var t=function(e,t){var n;return IGe("a.".concat(e))?n="previewOffice":RGe("a.".concat(e))&&(n="previewMacOffice"),!!n&&OGe(n,t)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=_Ge.MAC_OFFICE_EXT.concat(_Ge.OFFICE_EXT);return!!(SGe(e)||xGe(e)||["mp3","wav"].indexOf(e)>=0||n.indexOf(e)>=0&&t||TGe(e)&&t)},getFileKeyByUrl:FGe,getPreviewUrl:function(e){var t,n=FGe(e),r="";return typeof window<"u"&&(r=(null===(t=window)||void 0===t||null===(t=t.appData)||void 0===t||null===(t=t.space)||void 0===t?void 0:t.host)||origin),IGe(n)||RGe(n)||"pdf"===EGe(e)?"".concat(r,"/office/").concat(n):"".concat(r,"/preview/").concat(n)},getFileKey:function(e){var t=EGe(e);return SGe(e)?"image":jGe(e)?"video":DGe(e)?"audio":["doc","docx","dot","dotx"].includes(t)?"word":AGe(e)?"pdf":"txt"===t?"txt":["pages","md","markdown","rtf"].includes(t)?"doc":"numbers"===t?"numbers":["xls","xlsx","xlsm","xltx","xlt"].includes(t)?"excel":MGe(e)?"sheet":"key"===e?"keynote":PGe(e)?"ppt":["xmind","xmind.zip"].includes(t)?"xmind":["mindnode","mindnode.zip"].includes(t)?"mindnote":TGe(e)?"minimap":"sketch"===t?"sketch":["rp","rplib"].includes(t)?"axure":"psd"===t?"psd":"ai"===t?"ai":"graffle"===t?"graffle":"zip"===t?"rar":"lake"===t?"lake":"lakesheet"===t?"lakesheet":"default"},EXTS:_Ge};function VGe(){return Math.ceil(typeof window<"u"&&window.devicePixelRatio||1)}var LGe=Object.freeze({__proto__:null,getDevicePixelRatio:VGe}),BGe=[/^.*?\.yuque\.com$/i,"cdn.nlark.com","yuque.antfin.com","aliyuque.antfin.com","yuque.antfin-inc.com","yuque.antgroup-inc.cn","lark.alipay.com","bkyuque.mybank.cn","yuque.alibaba-inc.com","intranetproxy.alipay.com","lark-assets-dev-aliyun.oss-cn-hangzhou.aliyuncs.com","lark-assets-test-aliyun.oss-cn-hangzhou.aliyuncs.com"];function $Ge(e,t,n){"string"==typeof e&&(e=new URL(e));var r=e.searchParams.get("x-oss-process");return r?r.includes("/".concat(t,","))||(r+="/".concat(t,",").concat(n)):r="image/".concat(t,",").concat(n),e.searchParams.set("x-oss-process",r),e.toString()}function zGe(e){return UGe(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:BGe)}function UGe(e,t){var n=null;try{n=new URL(e).host}catch{}if(!n)return!1;for(var r=0,o=t.length;r<o;r++){var i=t[r];if("string"==typeof i){if(i===n)return!0}else if(i.test&&i.test(n))return!0}return!1}typeof window<"u"&&void 0!==window.location&&BGe.push(window.location.host);var HGe=Object.freeze({__proto__:null,addImageProcess:$Ge,isURLInOSS:zGe,tryAddWebpFormat:function(e,t,n){var r=null;try{r=new URL(e)}catch{}if(!r)return e;var o=r.pathname&&r.pathname.toLowerCase();return zGe(e,n)&&e.startsWith("http")?o.endsWith(".svg")||o.endsWith(".gif")||o.endsWith(".webp")&&t?e:t?$Ge(r,"format","webp"):o.endsWith(".heic")||o.endsWith(".heif")||o.endsWith(".webp")?$Ge(r,"format","jpg"):e:e},resizeImage:function(e){var t=e.maxWidth,n=e.src,r=e.data,o=e.ossProcessDomains;if(!n)return null;if(!(r.width&&r.originWidth&&r.originHeight&&n.startsWith("http"))||r.originWidth>3e4||r.originHeight>3e4)return n;var i=parseInt(r.width);i>t?i=t:i<300&&r.originWidth>300&&(i=300);var a=VGe();i=parseInt(i*a);var l=n.toLowerCase();if(!UGe(l,o||BGe))return n;var u=i*(r.originHeight/r.originWidth);return i>0&&i*u<16777216&&i<16384&&u<16384&&i<r.originWidth&&!/^https?:\/\/\w+\.alipayobjects\.com\//i.test(l)&&!l.endsWith(".gif")&&!l.endsWith(".svg")?$Ge(n,"resize","w_".concat(i)):n}});function qGe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body,n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,o){var i=document.querySelector('script[src="'.concat(e,'"]'));i||((i=document.createElement("script")).src=e),i.getAttribute("loaded")?r():i.getAttribute("error")?o(new Error("load failed : ".concat(e))):(i.addEventListener("load",(function(){i.setAttribute("loaded","true"),r()}),!1),i.addEventListener("error",(function(){i.setAttribute("error","true"),o(new Error("load failed: ".concat(e)))}),!1),t.appendChild(i),n&&setTimeout(r,n))}))}function WGe(e,t,n,r,o,i,a){try{var l=e[i](a),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function GGe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){WGe(i,r,o,a,l,"next",e)}function l(e){WGe(i,r,o,a,l,"throw",e)}a(void 0)}))}}function KGe(e){return KGe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KGe(e)}Object.freeze({__proto__:null,getLocale:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window)||void 0===e?void 0:e.location.search,n=new URLSearchParams(t),r=document.cookie.match(/(?:^|; ?)lang=([^;]+)(?:;|$)/);return"en-us"===(r?r[1]:n.get("language"))?"en-us":"zh-cn"}}),Object.freeze({__proto__:null,getItem:function(e){try{return localStorage.getItem(e)}catch(e){console.warn(e)}return null},setItem:function(e,t){try{return localStorage.setItem(e,t)}catch(e){console.warn(e)}}});var YGe={exports:{}},XGe={exports:{}};(function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(XGe),function(e){var t=XGe.exports.default;function n(){e.exports=n=function(){return o},e.exports.__esModule=!0,e.exports.default=e.exports;var r,o={},i=Object.prototype,a=i.hasOwnProperty,l=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",s=u.asyncIterator||"@@asyncIterator",d=u.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch{f=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new P(r||[]);return l(i,"_invoke",{value:I(e,n,a)}),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}o.wrap=p;var v="suspendedStart",g="suspendedYield",m="executing",y="completed",b={};function w(){}function _(){}function k(){}var C={};f(C,c,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(M([])));O&&O!==i&&a.call(O,c)&&(C=O);var S=k.prototype=w.prototype=Object.create(C);function x(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,n){function r(o,i,l,u){var c=h(e[o],e,i);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==t(d)&&a.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,l,u)}),(function(e){r("throw",e,l,u)})):n.resolve(d).then((function(e){s.value=e,l(s)}),(function(e){return r("throw",e,l,u)}))}u(c.arg)}var o;l(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(i,i):i()}})}function I(e,t,n){var o=v;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:r,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var u=R(l,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var c=h(e,t,n);if("normal"===c.type){if(o=n.done?y:g,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function R(e,t){var n=t.method,o=e.iterator[n];if(o===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=r,R(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=h(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,b;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,b):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,b)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function M(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(a.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}throw new TypeError(t(e)+" is not iterable")}return _.prototype=k,l(S,"constructor",{value:k,configurable:!0}),l(k,"constructor",{value:_,configurable:!0}),_.displayName=f(k,d,"GeneratorFunction"),o.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,f(e,d,"GeneratorFunction")),e.prototype=Object.create(S),e},o.awrap=function(e){return{__await:e}},x(j.prototype),f(j.prototype,s,(function(){return this})),o.AsyncIterator=j,o.async=function(e,t,n,r,i){void 0===i&&(i=Promise);var a=new j(p(e,t,n,r),i);return o.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),f(S,d,"Generator"),f(S,c,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),o.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},o.values=M,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(D),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return l.type="throw",l.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;D(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),b}},o}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(YGe);var JGe=YGe.exports(),ZGe=JGe;try{regeneratorRuntime=JGe}catch{"object"===(typeof globalThis>"u"?"undefined":KGe(globalThis))?globalThis.regeneratorRuntime=JGe:Function("r","regeneratorRuntime = r")(JGe)}var QGe=67108864;function eKe(e,t,n){return new Promise((function(r,o){var i;t.onload=(i=GGe(ZGe.mark((function e(t){var o;return ZGe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=new Uint8Array(t.target.result),n.update(o),r();case 3:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),t.onerror=o,t.readAsArrayBuffer(e)}))}function tKe(){return tKe=GGe(ZGe.mark((function e(t){var n,r,o,i,a,l;return ZGe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qGe("https://gw.alipayobjects.com/os/lib/hash-wasm/4.7.0/dist/md5.umd.min.js");case 2:return e.next=4,window.hashwasm.createMD5();case 4:n=e.sent,r=FileReader&&new FileReader,o=Math.floor(t.size/QGe),i=0;case 8:if(!(i<=o)){e.next=15;break}return a=t.slice(QGe*i,Math.min(QGe*(i+1),t.size)),e.next=12,eKe(a,r,n);case 12:i++,e.next=8;break;case 15:return l=n.digest(),e.abrupt("return",l);case 17:case"end":return e.stop()}}),e)}))),tKe.apply(this,arguments)}function nKe(e){var t=function(e,t){if("object"!==KGe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==KGe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===KGe(t)?t:String(t)}function rKe(e,t,n){return(t=nKe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oKe="https://www.yuque.com/yuque/qa/wm14rbiy7p8ge1g4#EHVFh";function iKe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aKe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nKe(r.key),r)}}function lKe(e,t,n){return t&&aKe(e.prototype,t),n&&aKe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var uKe="ctoken",cKe="yuque_ctoken",sKe=Array.isArray;function dKe(e,t,n,r){var o,i,a,l=/\[\]$/;if(sKe(t))for(i=0;t&&i<t.length;i++)a=t[i],n||l.test(e)?r(e,a):dKe(e+"["+("object"===KGe(a)?i:"")+"]",a,n,r);else if(t&&"[object Object]"===t.toString())for(o in t)t.hasOwnProperty(o)&&dKe(e+"["+o+"]",t[o],n,r);else r(e,t)}function fKe(e,t){return e+(/\?/.test(e)?"&":"?")+t}function pKe(e,t){var n,r,o=t||!1,i=[],a=encodeURIComponent;function l(e,t){var n=t;"function"==typeof t?n=t():null==t&&(n=""),i[i.length]=a(e)+"="+a(n)}if(sKe(e))for(r=0;e&&r<e.length;r++)l(e[r].name,e[r].value);else for(n in e)e.hasOwnProperty(n)&&dKe(n,e[n],o,l);return i.join("&").replace(/%20/g,"+")}function hKe(e){return typeof FormData<"u"&&e instanceof FormData}function vKe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gKe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vKe(Object(n),!0).forEach((function(t){rKe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vKe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mKe=/^http/,yKe=/(^\w+):\/\//,bKe=/^20\d$/,wKe="readyState",_Ke="Content-Type",kKe="X-Requested-With";function CKe(){}var EKe={traditional:!1,contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",withCredentials:!0,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},dataFilter:function(e){return e}};function OKe(e,t){var n=this.o,r=(n.method||"GET").toUpperCase(),o="string"==typeof n?n:n.url,i=!1!==n.processData&&n.data&&"string"!=typeof n.data&&!hKe(n.data)?pKe(n.data,n.traditional||EKe.traditional):n.data||null;"GET"===r&&i&&(o=fKe(o,i),i=null);var a,l,u=n.xhr&&n.xhr(n)||function(e){var t=new XMLHttpRequest;if(!0===e.crossOrigin&&!("withCredentials"in t))throw new Error("Browser does not support cross-origin requests");return t}(n);return n.timeout&&(u.timeout=n.timeout),u.open(r,o,!1!==n.async),function(e,t){var n,r=t.headers||{};for(n in r.Accept=r.Accept||EKe.accept[t.type]||EKe.accept["*"],t.crossOrigin||r[kKe]||(r[kKe]=EKe.requestedWith),r[_Ke]||hKe(t.data)||(r[_Ke]=t.contentType||EKe.contentType),r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}(u,n),a=u,void 0!==(l=n).withCredentials&&void 0!==a.withCredentials&&(a.withCredentials=!!l.withCredentials),u.onreadystatechange=function(e,t,n){return function(){return e._aborted?n("Request is aborted",e.request):e._timedOut?n("Request is aborted: timeout",e.request):void(e.request&&4===e.request[wKe]&&(e.request.onreadystatechange=CKe,function(e){var t=yKe.exec(e.url),n="";return t&&(n=t[1]),n||(n=(e.o.context||window).location.protocol),mKe.test(n)?bKe.test(e.request.status):!!e.request.response}(e)?t(e.request):n(e.request.statusText,e.request)))}}(this,e,t),n.before&&n.before(u),u.send(i),u}function SKe(){this.initPromise()}function xKe(){return new SKe}function jKe(e){var t=this;this.url="string"==typeof e?e:e.url,this.timeout&&clearTimeout(this.timeout),this.timeout=null,e.timeout&&(this.timeout=setTimeout((function(){t._timedOut=!0,t.request.abort()}),e.timeout)),this.request=OKe.call(this,(function(e){t.triggerSuccess(e)}),(function(e,n){t.triggerError(e,n)}))}function IKe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RKe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IKe(Object(n),!0).forEach((function(t){rKe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IKe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}SKe.prototype={triggerSuccess:function(e){var t=this.o,n=t.type,r=(t.dataFilter||EKe.dataFilter)(e.responseText,n);if(n||(n=e&&function(e){if(e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}(e.getResponseHeader("Content-Type"))),e=this.request,r)switch(n){case"json":try{e=JSON.parse(r)}catch{return this.triggerError("Could not parse JSON in response",e)}break;case"html":e=r;break;case"xml":e=e.responseXML&&e.responseXML.parseError&&e.responseXML.parseError.errorCode&&e.responseXML.parseError.reason?null:e.responseXML}t.success&&t.success(e),this.triggerComplete(e),this.__resolve(e)},triggerError:function(e,t){var n=this.o,r=new Error(e);r.xhr=t,n.error&&n.error(r),this.triggerComplete(r),this.__reject(r)},triggerComplete:function(e){var t=this.o;t.timeout&&clearTimeout(this.timeout),this.timeout=null,t.complete&&t.complete(e)},initPromise:function(){var e=this;e.promise=new Promise((function(t,n){e.__resolve=t,e.__reject=n}))},abort:function(){this._aborted=!0,this.request.abort()},retry:function(){this.initPromise(),jKe.call(this,this.o)},then:function(e,t){return this.promise.then(e,t)},always:function(e){return this.promise.then(e,e)},fail:function(e){return this.promise.then(void 0,e)},catch:function(e){return this.fail(e)},setup:function(e){this.o=gKe(gKe({},EKe),e)},start:function(e){this.setup(e),jKe.call(this,this.o)}},xKe.ajaxSetup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)e.hasOwnProperty(t)&&EKe.hasOwnProperty(t)&&(EKe[t]=e[t])};var AKe="_ts",DKe="_input_charset",PKe="utf-8",MKe=RKe({withCToken:!0,withInputCharset:!0,cache:!0},typeof window<"u"?window.__ajax_global_setup_options:{});function TKe(e,t){var n;e=(n="string"==typeof e?{url:e,success:t}:e).url;var r=xKe();return e.startsWith("//")&&(e=location.protocol+e),function(e){return!/^https?:\/\/\w+\.alipayobjects\.com\//g.test(e)}(e)&&(n=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,r=RKe({},e),o=MKe.cache||"post"===r.method,i=function(e){for(var t=e.document.cookie.split(/;\s/g),n=0,r=t.length;n<r;n++){var o=t[n].match(/([^=]+)=/i);if(o&&o[1]===cKe)return t[n].substring(o[1].length+1)}}(n),a=MKe.withCToken,l=MKe.withInputCharset,u=MKe.withReferrerParam;r.data=r.data||{};var c,s=function(e){return l&&-1===e.indexOf(DKe)&&(e+="&".concat(DKe,"=").concat(PKe)),a&&i&&-1===e.indexOf(uKe)&&(e+="&".concat(uKe,"=").concat(encodeURIComponent(i))),o||(e+="&".concat(AKe,"=").concat(Date.now())),e};if(Array.isArray(r.data))t=[],a&&i&&t.push({name:uKe,value:encodeURIComponent(i)}),l&&t.push({name:DKe,value:PKe}),o||t.push({name:AKe,value:Date.now()}),r.data=r.data.concat(t);else if("string"==typeof r.data)if(r.data.startsWith("{"))try{var d=JSON.parse(r.data);r.data=JSON.stringify((c=d,l&&(c[DKe]=PKe),o||(c[AKe]=Date.now()),a&&i&&!c[uKe]&&(c[uKe]=i),c))}catch{r.data=s(r.data)}else r.data=s(r.data);else hKe(r.data)?(l&&!r.data.get(DKe)&&r.data.append(DKe,PKe),r.url&&a&&i&&(r.url=fKe(r.url,pKe(rKe({},uKe,i))))):(l&&(r.data[DKe]=PKe),o||(r.data[AKe]=Date.now()),a&&i&&!r.data[uKe]&&(r.data[uKe]=i));if(r.url){var f,p,h,v=null===(f=navigator)||void 0===f?void 0:f.userAgent;if(null!==(p=window)&&void 0!==p&&p.appData&&null!==(h=window)&&void 0!==h&&h.appData.isServicifyRequest){var g;r.url.startsWith("/")&&(r.url=document.location.origin+r.url);var m=new URL(r.url);m.searchParams.append("sign_url",encodeURIComponent(null===(g=window)||void 0===g?void 0:g.appData.href)),r.url=m.toString()}else if(u&&v.includes("Safari")&&!v.includes("Chrome")){var y=new URL(r.url),b=new URL(document.location.href);y.origin!==b.origin&&(y.searchParams.set("referer",b.pathname+b.search),r.url=y.toString())}}return r}(n)),r.start(n),r}function FKe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NKe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FKe(Object(n),!0).forEach((function(t){rKe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FKe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VKe(e,t){if(void 0===e||!t)return"";let n=""+e,r="";const o=n.indexOf(".")>=0;if("-"===n[0]&&(n=n.substr(1),r="-"),n.length>=t)return r+n;let i=t-n.length;for(;i--;)n=o?n+"0":"0"+n;return r+n}TKe.ajaxSetup=function(e){for(var t in e)e.hasOwnProperty(t)&&MKe.hasOwnProperty(t)&&(MKe[t]=e[t]);xKe.ajaxSetup(e)},TKe.ajaxSetup({withInputCharset:!1}),new(function(){function e(t){iKe(this,e),this.options=NKe({ajaxOptions:{progress:function(){},error:function(){},success:function(){},data:{},method:"post",url:""}},t)}return lKe(e,[{key:"ajax",value:function(e){var t=(e=NKe(NKe({},this.options.ajaxOptions),e)).success,n=e.error;if(!e.url)return!!n&&n(new Error("request options.url missing"));var r=new Promise((function(r){e.success=function(e){t(e),r(e)},e.error=function(e){n(e),r(e)}}));return{xhr:TKe(e),promise:r}}}]),e}()),function(){function e(){iKe(this,e)}lKe(e,null,[{key:"check",value:function(e,t){if(!window.__member_message_ref)return null;var n;switch(e){case"image":n="max_single_image_size";break;case"video":n="max_single_video_size";break;default:n="max_single_file_size"}try{var r=window.__member_message_ref.current.getMessageWithFile({filesize:t},n)||null;if(r)return{level:r.level||"error",msg:r.msg||"unknown error",alwaysOpen:!!r.alwaysOpen,callback:r.callback||function(){},result:r}}catch(e){return console.log(e),null}return null}},{key:"getMessageByCode",value:function(e,t){if(!window.__member_message_ref)return null;try{var n=window.__member_message_ref.current.getMessage(e,{},t)||null;if(n)return{level:n.level||"error",msg:n.msg||"unknown error",alwaysOpen:!!n.alwaysOpen,callback:n.callback||function(){}}}catch(e){return console.log(e),null}return null}}])}();const LKe="1899-12-30",BKe="YYYY-MM-DD";i.a.extend(On.a),function(e){i.a.utc(e)}(LKe);const $Ke=[/^([1-9]\d{3,4})(.{1})(0?[1-9]|1[0-2])(.{1})(0?[1-9]|[1-2][0-9]|3[0-1])(日?)$/,/^(0?[1-9]|1[0-2])(.{1})(0?[1-9]|[1-2][0-9]|3[0-1])(.{1})([1-9]\d{3,4})$/],zKe=/^(20|21|22|23|[0-1]\d):[0-5]\d$/,UKe=/^(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/,HKe=/^([A-Za-z]{3,8})\s(0?[1-9]|[1-2][0-9]|3[0-1]),(([1-9]\d{3,4}))$/,qKe={zh:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],zhNum:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],en:["January","February","March","April","May","June","July","August","September","October","November","December"],enShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"]},WKe={mmdd:/^(0?[1-9]|1[0-2])(\-|\/|月)(0?[1-9]|[1-2][0-9]|3[0-1])(日?)$/,ddmm:/^(0?[1-9]|[1-2][0-9]|3[0-1])(\-|\/)(0?[1-9]|1[0-2])$/,yymm:/^(\d{2})(\-|\/)(0?[1-9]|1[0-2])$/,yymmdd:/^(\d{2})(\-|\/)(0?[1-9]|1[0-2])(\-|\/)(0?[1-9]|[1-2][0-9]|3[0-1])$/,yyyymm:/^([1-9]\d{3,4})(\-|\/|年)(0?[1-9]|1[0-2])(月?)$/};function GKe(e){const t=function(e){let t,n,r,o="";if(function(e){return UKe.test(e)||zKe.test(e)}(e))return function(e){return i()(`${LKe} ${e}`).diff(i.a.utc(LKe),"seconds")}(e);let a=e.match(/ (20|21|22|23|[0-1]\d):[0-5]\d(:([0-5]\d))?$/);return a&&(o=a[0],e=e.slice(0,-o.length)),a=e.match($Ke[0]),a?(t=a[1],n=a[3],r=a[5]):(a=e.match($Ke[1]),a?(t=a[5],n=a[1],r=a[3]):(a=e.match(HKe),a&&(t=a[3],n=qKe.en.indexOf(a[1])+1,n=0===n?NaN:n,r=a[2]))),isNaN(t)||isNaN(n)||isNaN(r)?(e+=o,function(e){if(!e)return!1;let t,n,r,o="sheet-en";for(const r in WKe){const o=e.match(WKe[r]);if(o){t=r,n=o[2];break}}if(!t||["年","月","-","/"].indexOf(n)<0)return!1;switch(t){case"mmdd":"月"===n?(o="sheet-cn",r="M月D日"):r="MM/DD";break;case"ddmm":r="MM/DD";break;case"yymm":r="YYYY-MM";break;case"yymmdd":r=`YYYY${n}MM${n}DD`;break;case"yyyymm":"年"===n?(r="YYYY年M月",o="sheet-cn"):r="YYYY-MM"}return{name:"date",formatter:r,lang:o}}(e)?function(e){const t=i()(),n=1*+t.format("YY"),r=t.format("YYYY");for(const t in WKe){const o=e.match(WKe[t]);if(o){let a="";switch(t){case"yymm":a=(1*o[1]>n?"19":"20")+VKe(o[1],2)+"-"+VKe(o[3],2)+"-01";break;case"yyyymm":a=o[1]+"-"+VKe(o[3],2)+"-01";break;case"mmdd":a=r+"-"+VKe(o[1],2)+"-"+VKe(o[3],2);break;case"ddmm":a=r+"-"+VKe(o[3],2)+"-"+VKe(o[1],2);break;case"yymmdd":a=(1*o[1]>n?"19":"20")+o[1]+"-"+VKe(o[3],2)+"-"+VKe(o[5],2);break;default:a=e}return i.a.utc(a).diff(i.a.utc(LKe),"seconds")}}return 0}(e):e):JKe(`${t}-${VKe(n,2)}-${VKe(r,2)}${o}`)}(e);return isNaN(t)?"":{seconds:t,text:KKe({seconds:t})}}function KKe(e){const t=i.a.utc(LKe).add(e.seconds,"seconds");return"Invalid date"!==t.toString()?(e.text=t.format(BKe),e.text):(e.text="","")}function YKe(e){const t=i()(e.time);return"Invalid date"!==t.toString()?(e.text=t.format("YYYY-MM-DD HH:mm:ss"),e.text):(e.text="","")}function XKe(e){if(e>=31708800){e+=i()("1901-01-01").diff("1900-12-31 23:59:59","seconds")-1}return i()(LKe).add(e,"seconds").format("YYYY-MM-DDTHH:mm:ssZ")}function JKe(e){return i.a.utc(e).diff(i.a.utc(LKe),"seconds")}class ZKe{toFieldModel(e,t){const n=e.type,r=e.options;return n===bC.TEXTAREA||n===bC.INPUT||n===bC.TEXT?this.toTextareaModel(t):n===bC.CHECKBOX?this.toCheckboxModel(t):n===bC.DATE?this.toDate(t):n===bC.EMAIL?this.toEmailModel(t):n===bC.FILE?this.toFileModel(t):n===bC.IMAGE?this.toImageModel(t):n===bC.LINK?this.toLinkModel(t):n===bC.MENTION?this.toMentionModel(t):n===bC.SELECT?this.toSelectModel(t,r):n===bC.MULTI_SELECT?this.toMultiSelectModel(t,r):n===bC.NUMBER?this.toNumberModel(t):n===bC.PHONE?this.toPhoneModel(t):t}toTextareaModel(e){return e&&"boolean"!=typeof e?Array.isArray(e)?e.map((e=>e?e.name?e.name:e:"")).join(","):e.seconds?KKe(e):e.time?YKe(e):e.name?e.name:e+"":""}toCheckboxModel(e){return!(!e||!["1","true","是","yes","✅"].includes(String(e).toLowerCase()))}toDate(e){if(!e||"boolean"==typeof e)return"";if(Array.isArray(e)&&(e=e[0]),void 0!==e.time||void 0!==e.seconds){const t={seconds:e.seconds||JKe(e.time),time:e.time||XKe(e.seconds)};return t.text=KKe(t),"Invalid Date"===t.text?"":t}return!isNaN(e)||"string"==typeof e&&-1!==e.indexOf("\n")?"":(e.name&&(e=e.name),GKe(e))}toEmailModel(e){return!e||"boolean"==typeof e||Array.isArray(e)&&!(e=e[0])||(e.name&&(e=e.name),"string"!=typeof e)?"":e=e.replace(/\n/g,"")}toFileModel(e){if(!e)return[];Array.isArray(e)||(e=[e]);return e.map((e=>(e=>"error"===e.status||"progress"===e.status?e:void 0!==e.src&&e.uid&&(e.fileKey=NGe.getFileKey(e.src),e.fileKey)?(e.name||(e.name=e.src),e.src=Bw(e.src),e):"")(e)))}toImageModel(e){if(!e)return[];Array.isArray(e)||(e=[e]);const t=e=>e?(e.login&&(e.src=e.avatar_url),"error"===e.status||"progress"===e.status?e:void 0!==e.src&&(e=>{try{const t=new URL(e);return NGe.isImage(t.origin+t.pathname)}catch{return!1}})(e.src)?(e.name||(e.name=e.src),e.src=Bw(e.src),e):""):"";return e.map((e=>t(e)))}toLinkModel(e){if(!e||e.seconds||e.time||"boolean"==typeof e)return"";if(e.src)return e.src=String(Bw(e.src)),e.name=String(e.name)||"",e;if(Array.isArray(e)&&!(e=e[0]))return"";if(e.login)return{name:e.name,src:`/${e.login}`};e.name&&(e=e.name);let t=Bw(e=(e=String(e)).replace(/\n/gi,""));return _w(e)&&(t="mailto:"+e),t?{src:t,name:e}:{name:e,src:"http://"+e}}toMentionModel(e){var t,n;return Array.isArray(e)&&0!==e.length&&null!=(t=e[0])&&t.login&&null!=(n=e[0])&&n.name?e.map((e=>(e.work_id&&!e.avatar_url&&(e.avatar_url=`/__workers/r/avatar_buc/${e.work_id}`),e))):""}toSelectModel(e,t){if(!e)return"";let n=e;if(Array.isArray(e))n=e[0];else if(void 0!==e.seconds)n=e.text||KKe(e);else if(void 0!==e.time)n=e.text||YKe(e);else{if(e&&"boolean"==typeof e)return"";isNaN(e)||(n=e+"")}if(!n)return"";n.name&&(n=n.name);const r=t.find((e=>e.uuid===n||e.name===n));return r?[r.uuid]:null}toMultiSelectModel(e,t){if(!e)return"";let n=e;if(Array.isArray(e)){const n=[];return e.forEach((e=>{if(!e)return;e=e.name||e;const r=t.find((t=>t.uuid===e||t.name===e));r&&n.push(r.uuid)})),0!==n.length?n:""}if(void 0!==e.seconds)n=e.text||KKe(e);else if(void 0!==e.time)n=e.text||YKe(e);else{if("boolean"==typeof e)return"";isNaN(e)||(n=e+"")}e.name&&(n=e.name);const r=t.find((e=>e.uuid===n||e.name===n));return r?[r.uuid]:null}toNumberModel(e){return e?"boolean"==typeof e?$w(e?"1":"0"):Array.isArray(e)&&!(e=e[0])?"":(e.name&&(e=e.name),$w(e)):""}toPhoneModel(e){return!e||"boolean"==typeof e||Array.isArray(e)&&!(e=e[0])||(e.name&&(e=e.name),"string"!=typeof e&&"number"!=typeof e)?"":e=(e=String(e)).replace(/\n/g,"")}}const QKe={token:CD,useValue:{registerProcess(){const e=new ZKe;return{processFieldModel:(t,n)=>e.toFieldModel(t,n)}}}},eYe=({docId:e,docType:t,webSdk:n,webProxy:r})=>({token:fHe,useValue:{registerServer:()=>(n.TableShareController={update:async e=>await r.shares.update(e)},{apiSdk:n,processParams:n=>(n.docId=e,n.docType=t,n)})}}),tYe=({docId:e,docType:t,webProxy:n,currentUser:r})=>({token:xR,useValue:{registerUser:()=>({searchUser:async e=>(await n.users.complete({q:e})).map((e=>{var t,n;return{uid:String(e.id||e.uid),name:(null==(t=e.membership)?void 0:t.name)||e.name,login:e.login,icon:(null==(n=e.membership)?void 0:n.avatar)||e.avatar||e.avatar_url||e.icon,work_id:e.work_id}})),async contextUsers(){if("Doc"!==t)return[];let r=await n.users.listDocContextUsers({id:e})||[];const o=this.getCurrentUser();return o&&r.push(o),r=xn()(r.map((e=>{var t,n;return{uid:String(e.id||e.uid),name:(null==(t=e.membership)?void 0:t.name)||e.name,login:e.login,icon:(null==(n=e.membership)?void 0:n.avatar)||e.avatar_url||e.icon,work_id:e.work_id}})),"uid"),r},getCurrentUser:()=>r?{uid:r.uid||String(r.id),work_id:r.work_id,login:r.login,name:r.name,icon:r.icon||r.avatar_url}:Eze.me?{uid:String(Eze.me.id),work_id:Eze.me.work_id,login:Eze.me.login,name:Eze.me.name,icon:Eze.me.avatar_url}:null})}});const nYe=({docId:e,webSdk:t})=>({token:yHe,useValue:{registerAiWritingDatasourcePost:()=>async({content:n,type:r})=>await async function(e,t,n={}){return e.post("/api/ai/table/completion",t,n)}(t.req,{content:n,type:r,context_id:e})}}),rYe=({docId:e,docType:t,webProxy:n})=>({token:Tze,useValue:{registerForm:()=>({async getForm(e){if("Doclet"===t)return;const r=await n.shares.findOne({target_id:e,target_type:"Skythings.View",type:"form"});return r&&r.token?{src:`/forms/share/${r.token}`,status:r.status}:void 0}})}}),oYe=({webProxy:e})=>({token:NR,useValue:{registerLinkDetail:()=>({async getLinkDetail(t){var n,r;if(!t)return null;try{return await(null==(r=null==(n=e.editor)?void 0:n.linkDetail)?void 0:r.call(n,{url:Bw(t)},{ignoreGlobalMessage:!0}))}catch(e){return console.error(e),{url:t,title:t}}}})}}),iYe=({docId:e,docType:t,webSdk:n,webProxy:r,currentUser:o})=>[QKe,eYe({docId:e,docType:t,webSdk:n,webProxy:r}),tYe({docId:e,docType:t,webProxy:r,currentUser:o}),rYe({docId:e,docType:t,webProxy:r}),oYe({webProxy:r}),$qe({docId:e,docType:t,webSdk:n}),nYe({docId:e,webSdk:n})],aYe="ctoken",lYe="yuque_ctoken",uYe=Array.isArray;function cYe(e,t,n,r){let o,i,a;const l=/\[\]$/;if(uYe(t))for(i=0;t&&i<t.length;i++)a=t[i],n||l.test(e)?r(e,a):cYe(e+"["+("object"==typeof a?i:"")+"]",a,n,r);else if(t&&"[object Object]"===t.toString())for(o in t)t.hasOwnProperty(o)&&cYe(e+"["+o+"]",t[o],n,r);else r(e,t)}function sYe(e,t){return e+(/\?/.test(e)?"&":"?")+t}function dYe(e,t){let n,r;const o=t||!1,i=[],a=encodeURIComponent;function l(e,t){let n=t;"function"==typeof t?n=t():null==t&&(n=""),i[i.length]=a(e)+"="+a(n)}if(uYe(e))for(r=0;e&&r<e.length;r++)l(e[r].name,e[r].value);else for(n in e)e.hasOwnProperty(n)&&cYe(n,e[n],o,l);return i.join("&").replace(/%20/g,"+")}function fYe(e){return typeof FormData<"u"&&e instanceof FormData}const pYe=window,hYe=document,{head:vYe}=document,gYe=/^http/,mYe=/(^\w+):\/\//,yYe=/^20\d$/,bYe="readyState",wYe="Content-Type",_Ye="X-Requested-With",kYe="reqwest_"+ +new Date;let CYe,EYe=0;function OYe(){}const SYe={traditional:!1,contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},dataFilter:e=>e};function xYe(e,t,n){return()=>e._aborted?n("Request is aborted",e.request):e._timedOut?n("Request is aborted: timeout",e.request):void(e.request&&4===e.request[bYe]&&(e.request.onreadystatechange=OYe,function(e){const t=mYe.exec(e.url);let n="";return t&&(n=t[1]),n||(n=(e.o.context||pYe).location.protocol),gYe.test(n)?yYe.test(e.request.status):!!e.request.response}(e)?t(e.request):n(e.request.statusText,e.request)))}function jYe(e){CYe=e}function IYe(e,t,n,r){let o=r;const i=EYe++,a=e.jsonpCallback||"callback";let l=e.jsonpCallbackName||function(e){return kYe+"_"+e}(i);const u=new RegExp("((^|\\?|&)"+a+")=([^&]+)"),c=o.match(u),s=hYe.createElement("script");let d=0;return c?"?"===c[3]?o=o.replace(u,"$1="+l):l=c[3]:o=sYe(o,a+"="+l),pYe[l]=jYe,s.type="text/javascript",s.src=o,s.async=!0,s.onload=s.onreadystatechange=()=>{if(s[bYe]&&"complete"!==s[bYe]&&"loaded"!==s[bYe]||d)return!1;s.onload=s.onreadystatechange=null,s.onclick&&s.onclick(),t(CYe),CYe=void 0,vYe.removeChild(s),d=1},vYe.appendChild(s),{abort(){s.onload=s.onreadystatechange=null,n("Request is aborted: timeout"),CYe=void 0,vYe.removeChild(s),d=1}}}function RYe(e,t){const n=this.o,r=(n.method||"GET").toUpperCase();let o="string"==typeof n?n:n.url,i=!1!==n.processData&&n.data&&"string"!=typeof n.data&&!fYe(n.data)?dYe(n.data,n.traditional||SYe.traditional):n.data||null;if(("jsonp"===n.type||"GET"===r)&&i&&(o=sYe(o,i),i=null),"jsonp"===n.type)return IYe(n,e,t,o);const a=n.xhr&&n.xhr(n)||function(e){const t=new XMLHttpRequest;if(!0===e.crossOrigin&&!("withCredentials"in t))throw new Error("Browser does not support cross-origin requests");return t}(n);return a.open(r,o,!1!==n.async),function(e,t){const n=t.headers||{};let r;for(r in n.Accept=n.Accept||SYe.accept[t.type]||SYe.accept["*"],!t.crossOrigin&&!n[_Ye]&&(n[_Ye]=SYe.requestedWith),!n[wYe]&&!fYe(t.data)&&(n[wYe]=t.contentType||SYe.contentType),n)n.hasOwnProperty(r)&&"setRequestHeader"in e&&e.setRequestHeader(r,n[r])}(a,n),function(e,t){typeof t.withCredentials<"u"&&typeof e.withCredentials<"u"&&(e.withCredentials=!!t.withCredentials)}(a,n),a.onreadystatechange=xYe(this,e,t),n.before&&n.before(a),a.send(i),a}function AYe(){this.initPromise()}function DYe(){return new AYe}function PYe(e){const t=this;this.url="string"==typeof e?e:e.url,this.timeout&&clearTimeout(this.timeout),this.timeout=null,e.timeout&&(this.timeout=setTimeout((function(){t._timedOut=!0,t.request.abort()}),e.timeout)),this.request=RYe.call(this,(function(e){t.triggerSuccess(e)}),(function(e,n){t.triggerError(e,n)}))}AYe.prototype={triggerSuccess(e){const t=this.o;let n=t.type;const r=(t.dataFilter||SYe.dataFilter)(e.responseText,n);if(n||(n=e&&function(e){if(e){if(e.match("json"))return"json";if(e.match("javascript"))return"js";if(e.match("text"))return"html";if(e.match("xml"))return"xml"}}(e.getResponseHeader("Content-Type"))),e="jsonp"!==n?this.request:e,r)switch(n){case"json":try{e=pYe.JSON.parse(r)}catch{return this.triggerError("Could not parse JSON in response",e)}break;case"html":e=r;break;case"xml":e=e.responseXML&&e.responseXML.parseError&&e.responseXML.parseError.errorCode&&e.responseXML.parseError.reason?null:e.responseXML}t.success&&t.success(e),this.triggerComplete(e),this.__resolve(e)},triggerError(e,t){const n=this.o,r=new Error(e);r.xhr=t,n.error&&n.error(r),this.triggerComplete(r),this.__reject(r)},triggerComplete(e){const t=this.o;t.timeout&&clearTimeout(this.timeout),this.timeout=null,t.complete&&t.complete(e)},initPromise(){const e=this;e.promise=new Promise(((t,n)=>{e.__resolve=t,e.__reject=n}))},abort(){this._aborted=!0,this.request.abort()},retry(){this.initPromise(),PYe.call(this,this.o)},then(e,t){return this.promise.then(e,t)},always(e){return this.promise.then(e,e)},fail(e){return this.promise.then(void 0,e)},catch(e){return this.fail(e)},setup(e){this.o={...SYe,...e}},start(e){this.setup(e),PYe.call(this,this.o)}},DYe.ajaxSetup=(e={})=>{for(const t in e)e.hasOwnProperty(t)&&SYe.hasOwnProperty(t)&&(SYe[t]=e[t])};const MYe="_ts",TYe="_input_charset",FYe="utf-8",NYe={withCToken:!0,withInputCharset:!0,cache:!0};function VYe(e,t=window){const n={...NYe,...e},r=NYe.cache||"post"===n.method,o=function(e){const t=e.document.cookie.split(/;\s/g);for(let e=0,n=t.length;e<n;e++){const n=t[e].match(/([^=]+)=/i);if(n&&n[1]===lYe)return t[e].substring(n[1].length+1)}}(t),{withCToken:i,withInputCharset:a}=n;let l;return n.data=n.data||{},Array.isArray(n.data)?(l=[],i&&o&&l.push({name:aYe,value:encodeURIComponent(o)}),a&&l.push({name:TYe,value:FYe}),r||l.push({name:MYe,value:Date.now()}),n.data=n.data.concat(l)):"string"==typeof n.data?(a&&-1===n.data.indexOf(TYe)&&(n.data+="&"+TYe+"="+FYe),i&&o&&-1===n.data.indexOf(aYe)&&(n.data+="&"+aYe+"="+encodeURIComponent(o)),r||(n.data+="&"+MYe+"="+Date.now())):fYe(n.data)?(a&&!n.data.get(TYe)&&n.data.append(TYe,FYe),n.url&&i&&o&&(n.url=sYe(n.url,dYe({[aYe]:o})))):(a&&(n.data[TYe]=FYe),r||(n.data[MYe]=Date.now()),i&&o&&!n.data[aYe]&&(n.data[aYe]=o)),n}function LYe(e,t){let n;n="string"==typeof e?{url:e,success:t}:e,e=n.url;const r=DYe();return e.startsWith("//")&&(e=location.protocol+e),function(e){return!/^https?:\/\/\w+\.alipayobjects\.com\//g.test(e)}(e)&&(n=VYe(n)),r.start(n),r}LYe.ajaxSetup=e=>{for(const t in e)e.hasOwnProperty(t)&&NYe.hasOwnProperty(t)&&(NYe[t]=e[t]);DYe.ajaxSetup(e)},LYe.ajaxSetup({withInputCharset:!1});const BYe=new class{constructor(e={}){this.options={ajaxOptions:{progress(){},error(){},success(){},data:{},method:"post",url:""},...e}}ajax(e){(e={...this.options.ajaxOptions,...e}).url=function(e){var t,n,r,o;if(e.startsWith("http"))return e;const i=(null==(n=null==(t=globalThis.nebulaMobileApp)?void 0:t.envInfo)?void 0:n.origin)||(null==(o=null==(r=globalThis.yqWebApp)?void 0:r.globalServiceEnv)?void 0:o.host);return i?`${i}${e}`:e}(e.url);const t=e.success,n=e.error,r=new Promise((r=>{e.success=e=>{t(e),r(e)},e.error=e=>{n(e),r(e)}}));return{xhr:LYe(e),promise:r}}},$Ye=e=>{if(globalThis.__ajaxProxy){const t=globalThis.__ajaxProxy(e);if(t)return t}return BYe.ajax(e)};var zYe=Object.defineProperty,UYe=Object.getOwnPropertyDescriptor,HYe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?UYe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&zYe(t,n,i),i};let qYe=class{getConfig(e){return this._configuration.getValue(`upload.${e}`)}async tryQuickUpload(e,t){const n=this.getConfig(t);if(!n.quickUrl)return!1;const r=await function(e){return tKe.apply(this,arguments)}(e),o=e.size,i=e.name,a=e.type;let l;return await $Ye({xhr:()=>new window.XMLHttpRequest,url:n.quickUrl,data:{md5:r,filesize:o,filename:i,filetype:a,type:t},dataType:"json",success:e=>{e&&!1===e.data.success||(l=e)},error:e=>{console.error(e)},method:"POST",processData:!0}).xhr.promise,!(!l||!1===l.success)&&l}async uploadFile(e,t,n){const r=this.getConfig(t),o=new FormData;o.append("file",e,e.name);const i=(r.url||"").replace(/ctoken=[^&]+&/,"");$Ye({xhr:()=>{const t=new window.XMLHttpRequest;return t.upload.addEventListener("progress",(t=>{t.lengthComputable&&n({id:e.uid,status:"running",file:e,percent:parseInt(String(t.loaded/t.total*100),10)})}),!1),t},url:i,data:o,dataType:"json",success:({data:t})=>{t?(e.src=t.url,n({id:e.uid,status:"success",file:e})):n({id:e.uid,status:"error",message:uw("上传失败"),file:e})},error:t=>{let r,o="";if(t&&t.xhr&&t.xhr.response)try{r=JSON.parse(t.xhr.response),o=r.message||""}catch{o=""}else o=t.message;o||(o=uw("上传失败")),n({id:e.uid,status:"error",file:e,message:o})},method:"POST",processData:!0})}async upload(e,t,n){try{const r=await this.tryQuickUpload(e,t);r?(e.src=r.data.url,n({id:e.uid,status:"success",file:e})):await this.uploadFile(e,t,n)}catch(r){console.error(r),await this.uploadFile(e,t,n)}}};HYe([Xs(R_)],qYe.prototype,"_configuration",2),qYe=HYe([Ys()],qYe);var WYe=Object.defineProperty,GYe=Object.getOwnPropertyDescriptor,KYe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?GYe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&WYe(t,n,i),i};let YYe=class{static pluginModule(){return pd().register(qYe).register(this)}static registerConfiguration(e){e.registerConfiguration({id:"upload",type:"object",properties:{image:{type:"object",properties:{url:{type:"string",description:"图片上传接口"},quickUrl:{type:"string",description:"图片秒传接口"}}},file:{type:"object",properties:{url:{type:"string",description:"文件上传接口"},quickUrl:{type:"string",description:"文件秒传接口"}}}}}),e.registerDefaultValue({"upload.image.url":"/api/upload/attach?&type=image","upload.image.quickUrl":"/api/upload/upload_by_digset?&type=image","upload.file.url":"/api/upload/attach?&type=attach","upload.file.quickUrl":"/api/upload/upload_by_digset?&type=attach"})}init(){}registerUpload(){return{upload:(e,t,n)=>this._uploadService.upload(e,t,n),checkSize:(e,t)=>{try{if(window.__member_message_ref){const{msg:n,alwaysOpen:r,level:o,callback:i}=window.__member_message_ref.current.getMessageWithFile({filesize:e.size},t)||{};if(n)return i(g.a[o||"error"](n,r?0:void 0)),!1}}catch(e){return console.error(e),!1}return!0}}}};YYe.pluginName="render-upload",KYe([Xs(qYe)],YYe.prototype,"_uploadService",2),YYe=KYe([Ys({contrib:[Qoe,wue]})],YYe);const XYe=({field:e,position:t})=>{const n=G3(CHe),r=G3(mHe),o=G3(R_),i=null==n?void 0:n.getAiWritingConfig(e.get("uuid")),u=null==o?void 0:o.getValue("aiWriting.enable"),[c,s]=Object(a.useState)((null==r?void 0:r.isFieldGenerating(e.get("uuid")))||!1),d=(null==i?void 0:i.open)&&u;return Object(a.useLayoutEffect)((()=>{if(!d||"gridHeader"!==t)return void s(!1);const n=null==r?void 0:r.onAiWritingStatusChange((({isGenerating:t,fieldId:n})=>{n===e.get("uuid")&&t?s(!0):s(!1)}));return()=>{null==n||n.destroy()}}),[r,d,t,e.get("uuid")]),d?l.a.createElement(l.a.Fragment,null,l.a.createElement(ln.default,{className:"lakex-table-grid-header-ai-writing-icon",width:16,height:16}),c&&l.a.createElement(un.default,{className:"lakex-table-ai-writing-loading-icon","data-no-dnd":"true",width:16,height:16,onClick:async()=>{await(null==n?void 0:n.stopAiWriting(e.get("uuid"))),g.a.success(uw("已停止填写"))}})):null};var JYe=Object.defineProperty,ZYe=Object.getOwnPropertyDescriptor;let QYe=class{static pluginModule(){return pd().register(this)}init(){}getTextFieldTagComponent(){return XYe}};QYe.pluginName="render-ai-writing",QYe=((e,t,n,r)=>{for(var o,i=r>1?void 0:r?ZYe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&JYe(t,n,i),i})([Ys({contrib:[Qoe,qpe]})],QYe);const eXe=({fields:e,view:t,viewFields:n})=>{const{viewFieldIds:r,onInsert:o,onRemove:i,canUpdate:u}=(({view:e,viewFields:t})=>{const n=xpe(EA.TABLE),r=G3(uA),o=Object(a.useMemo)((()=>E_(t,(e=>{var t;return null==(t=e.get("field"))?void 0:t.get("uuid")}))),[t]),i=n.canUpdate();return{viewFieldIds:o,canUpdate:i,onInsert:t=>{!i||null==r||r.execCommand("insertViewField",{viewId:e.get("uuid"),fieldId:t.uuid})},onRemove:t=>{!i||null==r||r.execCommand("removeViewField",{viewId:e.get("uuid"),fieldId:t.uuid})}}})({view:t,viewFields:n}),c=G3(Cie);return l.a.createElement("div",{className:"lakex-form-col-container"},l.a.createElement("div",{className:"lakex-form-col-intro"},uw("所有列"),l.a.createElement(h.a,{title:uw("数据表中所有列")},l.a.createElement(g6,{type:"Question"}))),l.a.createElement("div",{className:"lakex-form-col-items"},E_(e,((e,t)=>{const n=r.includes(e.get("uuid")),a=r.findIndex((t=>t===e.get("uuid"))),s=c.getFieldIcon(e.get("type"));return l.a.createElement("div",{className:"lakex-form-col "+(n?"active":"deactive"),key:e.get("uuid"),onClick:()=>{o(e)}},l.a.createElement("div",{className:"lakex-form-col-name"},s&&l.a.createElement(s,null),e.get("name")),u&&n&&l.a.createElement("span",{className:"lakex-form-col-state"},uw("添加")),u&&n&&l.a.createElement("span",{className:"lakex-form-col-state-remove",onClick:t=>{t.stopPropagation(),t.preventDefault(),i(e)}},uw("取消添加")),u&&!n&&l.a.createElement("span",{className:"lakex-form-col-state add"},uw("添加")," ",l.a.createElement(g6,{type:"ArrowRight",style:{marginLeft:4}})),l.a.createElement("div",{className:"lakex-form-col-fields"},function(e,t){return e?l.a.createElement("span",null,null!=t?`${t+1}.`:"",e.get("name")):l.a.createElement("span",{className:"lakex-form-col-untitled"},uw("未命名问题"))}(e,a)))}))))},tXe=({view:e,defaultValue:t})=>{const n=xpe(EA.TABLE),r=G3(uA),o=G3(qC),i=Object(a.useRef)(null);return Object(a.useEffect)((()=>{null==o||o.onChange((({spell:t})=>{var n,r;"view"===t.table&&t.command===GC.UPDATE&&e.get("uuid")===(null==(n=t.where)?void 0:n.uuid)&&null!=t.sets.name&&(null==(r=i.current)||r.setValue(t.sets.name))}))}),[]),l.a.createElement(s.a,{ref:i,className:"lakex-form-title",autoFocus:""===t,autoSize:!0,defaultValue:t,disabled:!n.canUpdate(),onBlur:t=>{null==r||r.execCommand("updateViewName",{viewId:null==e?void 0:e.get("uuid"),name:t.target.value})},onClick:e=>{e.stopPropagation()},placeholder:uw("请输入表单标题")})},nXe=({view:e,defaultValue:t,maxLength:n=255})=>{const r=xpe(EA.TABLE),o=G3(uA);return l.a.createElement(s.a.TextArea,{autoSize:!0,className:"lakex-form-desc",maxLength:n,defaultValue:t,disabled:!(null!=r&&r.canUpdate()),onBlur:t=>{null==o||o.execCommand("updateViewDesc",{viewId:null==e?void 0:e.get("uuid"),desc:t.target.value})},size:"small",onClick:e=>{e.stopPropagation()},placeholder:uw("请输入表单描述")})},rXe=({view:e})=>{const t=xpe(EA.TABLE),n=G3(MI),r=G3(uA);return t.canUpdate()?l.a.createElement("div",{className:"lakex-form-empty-field"},l.a.createElement("img",{className:"lakex-form-empty-field-img",src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*oG_ZTrK2ylsAAAAAAAAAAAAADvuFAQ/original"}),l.a.createElement("p",null,uw("表单为空")),l.a.createElement("span",{className:"lakex-form-empty-field-tip"},uw("点击左侧列表添加已有列 或 点击下方按钮添加新表单项")),l.a.createElement("br",null),l.a.createElement(b.a,{type:"primary",onClick:()=>{const t=n.getAllFields(),o=EC(bC.TEXT,E_(t,(e=>({name:e.get("name"),type:e.get("type")}))));r.execCommand("addField",{viewId:e.get("uuid"),field:{uuid:fw(32),name:o,type:bC.TEXT}})}},l.a.createElement(g6,{type:"Add"}),uw("添加"))):null},oXe=e=>{const{defaultValue:t}=e,n=!t;return l.a.createElement("div",{className:"lake-form-item-ui-container "+(n?"lake-form-item-ui-show-tooltip":"")},l.a.createElement(s.a,{autoFocus:!0,placeholder:uw("请输入问题"),...e,maxLength:128}),n&&l.a.createElement(h.a,{title:uw("当问题为空时，会使用列名作为问题；如未重命名列，所填写的问题会自动同步给列名。")},l.a.createElement(g6,{className:"lake-form-item-input-tooltip",type:"Question"})))},iXe=({viewField:e})=>{const{getFormComponent:t}=(()=>{const e=G3(Cie);return{getFormComponent:t=>e.getFieldFormComponent(t)}})();if(!e||!e.get("field"))return null;const n=t(e.get("field").get("type"));return n?l.a.createElement(h.a,{placement:"bottom",title:uw("此处由填写者输入")},l.a.createElement("div",{className:"lakex-form-item-field"},l.a.createElement("div",{className:"lakex-form-item-field-mask"}),l.a.createElement(n,{viewField:e}))):null},aXe=({viewField:e})=>{var t,n;const{getFormComponent:r,onChange:o,onChangeOrder:i}=(({viewField:e})=>{const t=G3(Cie),n=G3(uA),r=G3(kCe);return{getFormComponent:e=>t.getFieldFormComponent(e),onChange(t){null==n||n.execCommand("updateFieldProperty",{uuid:e.get("field").get("uuid"),...t})},onChangeOrder(t,n){null==r||r.updateFieldOptionOrder(e.get("field").get("uuid"),t,n)}}})({viewField:e});if(!e||!e.get("field"))return null;const a=e.get("field").get("type"),u=r(a);if(!u)return null;const c=u.OptionEditable;return c?l.a.createElement("div",{className:"lakex-table-form-designer-option-wrap"},l.a.createElement(c,{type:a,options:null==(t=e.get("field"))?void 0:t.get("options"),color:null==(n=e.get("field"))?void 0:n.get("color"),onChange:o,onChangeOrder:i,autoFocus:!1})):null},lXe=({view:e,viewField:t,viewFields:n})=>{const{onMoveUp:r,onMoveDown:o,onClone:i,onRemove:a,onChangeRequired:u,onChangeName:c,onCreateAfter:s,onChangeDisplayType:d,openFieldConfigModal:f,Icon:v}=(({view:e,viewField:t,viewFields:n})=>{const r=G3(MI),o=G3(uA),i=G3(bie),a=G3(Cie);return{onMoveUp:t=>{var r;const i=k_(n,(e=>e.get("uuid")===t.get("uuid")));if(0===i)return;const a=null==(r=n.get(i-1))?void 0:r.get("field_uuid");null==o||o.execCommand("changeFieldOrder",{viewId:e.get("uuid"),sourceFieldId:t.get("field_uuid"),targetFieldId:a})},onMoveDown:t=>{var r;const i=k_(n,(e=>e.get("uuid")===t.get("uuid"))),a=null==(r=n.get(i+1))?void 0:r.get("field_uuid");!a||null==o||o.execCommand("changeFieldOrder",{viewId:e.get("uuid"),sourceFieldId:t.get("field_uuid"),targetFieldId:a})},onClone:t=>{null==o||o.execCommand(Mze.commandName,{viewId:e.get("uuid"),fieldId:t.get("field_uuid")})},onRemove:e=>{null==o||o.execCommand("removeViewField",{viewId:e.get("view_uuid"),fieldId:e.get("field").get("uuid")})},onChangeRequired:(t,n)=>{null==o||o.execCommand(Dze.commandName,{viewId:e.get("uuid"),fieldId:t.get("field_uuid"),required:n.target.checked})},onChangeDisplayType:(t,n)=>{null==o||o.execCommand(Aze.commandName,{viewId:e.get("uuid"),fieldId:t.get("field_uuid"),displayType:n})},onChangeName:Cn()(((t,n)=>{(t.get("name")||t.get("field").get("name"))!==n&&(null==o||o.execCommand(Pze.commandName,{viewId:e.get("uuid"),fieldId:t.get("field_uuid"),name:n}))}),1e3),onCreateAfter:t=>{const n=r.getAllFields(),i=EC(bC.TEXT,E_(n,(e=>({name:e.get("name"),type:e.get("type")}))));null==o||o.execCommand("addField",{viewId:e.get("uuid"),field:{uuid:fw(32),name:i,type:bC.TEXT},sourceFieldId:t.get("field_uuid")})},openFieldConfigModal(e,t){null==i||i.emitClickEvent({eventName:"fieldConfigClick",data:{viewField:e,e:t}})},Icon:({type:e})=>{const t=null==a?void 0:a.getFieldIcon(e);return t?l.a.createElement(t,{size:16}):null}}})({view:e,viewField:t,viewFields:n});if(!t.get("field"))return null;const g=t.get("field").get("type");return l.a.createElement("div",{className:"lakex-form-item active"},l.a.createElement("div",{className:"lakex-form-item-inner"},l.a.createElement("div",{className:"lakex-form-item-inner-sidebar",onClick:e=>{e.stopPropagation()}},l.a.createElement(h.a,{placement:"left",title:uw("向上移动")},l.a.createElement(g6,{type:"ArrowUp",onClick:()=>{r(t)}})),l.a.createElement(h.a,{placement:"left",title:uw("向下移动")},l.a.createElement(g6,{type:"ArrowDown",onClick:()=>{o(t)}})),l.a.createElement(h.a,{placement:"left",title:uw("复制表单项")},l.a.createElement(g6,{type:"Copy",onClick:()=>{i(t)}})),l.a.createElement(h.a,{placement:"left",title:uw("移除表单项")},l.a.createElement(g6,{type:"Clear",onClick:()=>{a(t)}}))),l.a.createElement("div",{className:"lakex-form-item-inner-container"},l.a.createElement("div",{className:"lakex-form-item-inner-column-configs"},l.a.createElement("div",{className:"lakex-form-item-inner-column-name"},l.a.createElement(h.a,{placement:"top",title:uw("点击修改字段")},l.a.createElement("span",{className:"lakex-form-item-inner-column-content",onClick:e=>f(t,e)},l.a.createElement(v,{type:g}),null==t?void 0:t.get("field").get("name"),l.a.createElement(g6,{type:"Edit"})))),l.a.createElement("div",{className:"lakex-form-item-inner-type"},l.a.createElement("div",{className:"lakex-form-item-inner-validation"},l.a.createElement(p.a,{defaultChecked:t.get("required"),onChange:e=>u(t,e)},uw("必填"))))),l.a.createElement("div",{className:"lakex-form-item-inner-field-configs"},l.a.createElement(oXe,{defaultValue:t.get("name")||t.get("field").get("name"),onChange:e=>{c(t,e.target.value)},onBlur:e=>{c(t,e.target.value)}}),l.a.createElement(iXe,{viewField:t}),l.a.createElement(aXe,{viewField:t}),zC.isSelectLike(g)&&l.a.createElement("div",{className:"lakex-form-item-option-layout"},l.a.createElement("span",{style:{color:"#8c8c8c"}},uw("布局方式"),":"),l.a.createElement(x.a,{defaultValue:t.get("display_type")||"list",bordered:!1,onChange:e=>{d(t,e)},dropdownClassName:"lakex-form-item-dropdown"},l.a.createElement(x.a.Option,{value:"list"},uw("列表")),l.a.createElement(x.a.Option,{value:"dropdown"},uw("下拉")))))),t.get("required")&&""===t.get("name")?l.a.createElement("div",{className:"lakex-form-item-inner-error"},uw("请输入问题")):null),l.a.createElement("div",{className:"lakex-form-item-inner-add"},l.a.createElement(b.a,{onClick:e=>{s(t)},onMouseDown:e=>{e.stopPropagation()}},l.a.createElement(g6,{type:"Add"}),uw("添加"))))},uXe=({viewField:e,onClick:t=(()=>{}),index:n})=>{var r;return l.a.createElement("div",{className:"lakex-form-item lakex-form-item-normal",onClick:t},l.a.createElement("div",{className:"lakex-form-item-normal-preview"},l.a.createElement("div",{className:e.get("required")?"lakex-form-item-normal-preview-required":""},`${n+1}. ${e.get("name")||(null==(r=e.get("field"))?void 0:r.get("name"))}`),l.a.createElement("div",{className:"lakex-form-item-normal-comp"},l.a.createElement(iXe,{viewField:e}))),e.get("required")&&""===e.get("name")?l.a.createElement("div",{className:"lakex-form-item-error"},uw("请输入问题")):null)},cXe=({index:e,active:t,view:n,viewField:r,viewFields:o,onClick:i=(()=>{})})=>t?l.a.createElement(lXe,{view:n,viewField:r,viewFields:o}):l.a.createElement(uXe,{onClick:i,index:e,viewField:r}),sXe=({view:e,viewFields:t})=>{const{state:n,forceUpdate:r,setActiveId:o,onCreate:i,canUpdate:u}=(({view:e,viewFields:t})=>{const n=xpe(EA.TABLE),[r,o]=Object(a.useState)(),i=G3(MI),l=G3(uA),u=Poe();return Object(a.useEffect)((()=>{const e=e=>{let t=e.target;if("INPUT"!==t.tagName){for(;t&&t.classList&&t!==document.body;){if(t.classList.contains("lakex-form-item")||t.classList.contains("lakex-form-item-dropdown")||t.classList.contains("lakex-table-col-configs")||t.classList.contains("lakex-table-colorpicker")||t.classList.contains("lakex-table-menu-configs-submenu")||t.classList.contains("lakex-table-ai-writing-config-modal"))return;t=t.parentNode}o(void 0),u()}};return window.addEventListener("mousedown",e),()=>{window.removeEventListener("mousedown",e)}}),[]),{state:{activeId:r},canUpdate:n.canUpdate(),forceUpdate:u,setActiveId:o,onCreate(){var n;const r=i.getAllFields(),o=EC(bC.TEXT,E_(r,(e=>({name:e.get("name"),type:e.get("type")}))));null==l||l.execCommand("addField",{viewId:e.uuid,field:{uuid:fw(32),name:o,type:bC.TEXT},sourceFieldId:null==(n=t[t.length-1])?void 0:n.field_uuid})}}})({view:e,viewFields:t});return l.a.createElement("div",{className:"lakex-form-list"},E_(t,((i,a)=>{const c=i.get("field");return c?l.a.createElement(cXe,{view:e,viewField:i,viewFields:t,index:a,active:i.get("uuid")===n.activeId,key:c.get("uuid"),onClick:()=>{!u||(o(i.get("uuid")),r())}}):null})),u&&l.a.createElement("div",{className:"lakex-form-list-footer"},l.a.createElement(b.a,{type:"primary",onClick:e=>{i()}},l.a.createElement(g6,{type:"Add"}),uw("添加"))))},dXe=({viewId:e})=>{const t=G3(qze),n=G3(iD),[r,o]=Object(a.useState)(null==t?void 0:t.getFormEditData(e));return Object(a.useEffect)((()=>{const r=n.onDataChanged((()=>{(()=>{const n=null==t?void 0:t.getFormEditData(e);o(n)})()}));return()=>{r.destroy()}}),[]),{formData:r}},fXe=e=>{var t,n,r,o;const{formData:i}=dXe({viewId:e.viewId});return i?l.a.createElement("div",{className:"lakex-form-container"},(null==i?void 0:i.fields)&&l.a.createElement(eXe,{view:i.view,fields:i.fields,viewFields:i.viewFields}),l.a.createElement("div",{className:"lakex-form-configs"},l.a.createElement("div",{className:"lakex-form-configs-bg"},0!==(null==(t=i.viewFields)?void 0:t.length)&&l.a.createElement("div",{className:"lakex-form-configs-title"},l.a.createElement(tXe,{view:i.view,defaultValue:null==(n=i.view)?void 0:n.get("name")}),l.a.createElement(nXe,{view:i.view,defaultValue:null==(r=i.view)?void 0:r.get("desc")})),0===(null==(o=i.viewFields)?void 0:o.length)?l.a.createElement(rXe,{view:i.view}):l.a.createElement(sXe,{view:i.view,viewFields:i.viewFields})))):null},pXe=l.a.forwardRef(((e,t)=>{const{status:n,onOpenManage:r,viewId:o,canUpdate:i}=(()=>{const e=Rpe(),t=xpe(EA.TABLE),n=G3(qze),r=G3(bie),o=G3(qC),[i,l]=Object(a.useState)(Fze.PENDING),u=e.view.get("id"),c=e.view.get("uuid"),s=Object(a.useCallback)((e=>{const t=null==n?void 0:n.getShare(e);(null==t?void 0:t.get("status"))===xC.ACTIVE?l(Fze.COLLECTING):l(Fze.PENDING)}),[c]);return Object(a.useEffect)((()=>{if(u){const e=null==n?void 0:n.getShare(c);e?e.get("status")===xC.ACTIVE?l(Fze.COLLECTING):l(Fze.PENDING):null==n||n.initForm(c).then((()=>{s(c)})),null==o||o.onChange((({spell:e})=>{"view_share"===e.table&&e.command===GC.UPSERT&&s(c)}))}else l(Fze.PENDING)}),[u,c]),{status:i,viewId:c,canUpdate:t.canUpdate(),onOpenManage(t){var n;r.emitClickEvent({eventName:"clickFormManageButton",data:{target:t.currentTarget,viewId:null==(n=null==e?void 0:e.view)?void 0:n.get("uuid"),status:i}})}}})();let u=uw("开启收集");return n===Fze.COLLECTING&&(u=uw("收集中")),l.a.createElement("div",{className:"lakex-table-form",ref:t,key:o},l.a.createElement(fXe,{viewId:o}),i&&l.a.createElement(b.a,{className:"lakex-table-form-manage",type:"primary",onClick:r},u))}));class hXe extends Ole{constructor(){super(...arguments),this.viewType=BC.FORM,this.title=uw("表单视图"),this.desc=uw("像问卷一样收集信息"),this.icon=e=>l.a.createElement(g6,{type:"FormView",...e}),this.colorCls="yuque-color-orange-5",this.Component=pXe}}var vXe=Object.defineProperty,gXe=Object.getOwnPropertyDescriptor;let mXe=class{static pluginModule(){return pd().register(this)}init(){}registerViewer(e){e.registerItem(new hXe({onError:e.onError}))}};mXe.pluginName="render-viewer-form",mXe=((e,t,n,r)=>{for(var o,i=r>1?void 0:r?gXe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&vXe(t,n,i),i})([Ys({contrib:[Qoe,oie]})],mXe);var yXe=Object.defineProperty,bXe=Object.getOwnPropertyDescriptor,wXe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?bXe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&yXe(t,n,i),i};let _Xe=class{static pluginModule(){return pd().register(this)}init(){}registerCopyMiddleware(){return(e,t)=>{if(this.selectionService.isRowSelection()){const n=this.selectionService.getRecordIds(e).map((e=>{const t=this.contentService.getContent(e,"record");return t?{target_uuid:t.get("target_uuid"),target_type:t.get("target_type"),format:t.get("format"),source:t.get("source"),html:t.get("html")}:null}));return{...t,recordContents:n.filter((e=>!!e))}}return t}}registerPasteMiddleware(){return(e,t,n,r)=>{if(t.recordContents&&t.recordContents.length>0){const e=t.recordContents,o=[...r,...n.reverse()],i=t.cells.map((e=>e[0].recordId));e.map((e=>{const t=i.findIndex((t=>t===e.target_uuid)),n=o[t];n&&this.contentService.setContentWithSlient(n,e.target_type,{html:e.html,source:e.source,format:e.format})}))}}}registerMatchMiddleware(){return(e,t,n,r)=>{let o=r;if(n){const e=this.contentService.getContent(n,"record");if(e){const t=e.get("html"),n=new RegExp("<[^<>]+>","g");o+=t.replace(n,"")}}return o}}};_Xe.pluginName="render-content",wXe([Xs(fye)],_Xe.prototype,"selectionService",2),wXe([Xs(Aqe)],_Xe.prototype,"contentService",2),_Xe=wXe([Ys({contrib:[Qoe,sbe,BCe]})],_Xe);const kXe=[YYe,QYe,mXe,_Xe];let CXe=!1,EXe=!1;function OXe(){if(CXe)return EXe;const e=document.createElement("canvas");return EXe=!(!e.getContext||!e.getContext("2d"))&&(Yk.isChrome||Yk.isFirefox||0===e.toDataURL("image/webp").indexOf("data:image/webp")),CXe=!0,EXe}const SXe=(e,t,n)=>{if(t&&t>16383||n&&n>16383)return e;if(OXe()&&HGe.isURLInOSS(e)){const t=new URL(e);if(!t.pathname)return e;const n=t.pathname.toLowerCase(),r=[".webp",".svg"],o=n.substring(n.lastIndexOf("."));r.includes(o)||(e=HGe.addImageProcess(t,"format","webp"))}return e};const xXe={token:oue,useValue:{registerImage:()=>({getExts:()=>NGe.EXTS.IMAGE_EXT_STR,tryGetWebp:SXe,getRenderUrl:(e,t,n)=>((e,t,n)=>{if(OXe())return SXe(e,t,n);const r=new URL(e);if(!r.pathname)return e;const o=r.pathname.toLowerCase(),i=o.substring(o.lastIndexOf("."));return[".heic",".heif"].includes(i)?HGe.addImageProcess(r,"format","png"):e})(e,t,n),getThumbnailUrl(e,t,n,r){e=SXe(e,t,n);const o=t||r,i=LGe.getDevicePixelRatio();return o<=parseInt(r)*Number(i)?e:function(e,t,n){if(!n.width||!n.originWidth||!n.originHeight||!t||!t.startsWith("http")||n.originWidth>3e4||n.originHeight>3e4)return null;let r=parseInt(n.width,10);r>e&&(r=e),r*=LGe.getDevicePixelRatio();const o=t.toLowerCase();if(!HGe.isURLInOSS(o))return null;const i=r*(n.originHeight/n.originWidth);return r>0&&r*i<16777216&&r<4096&&i<4096&&r<n.originWidth&&!/^https?:\/\/\w+\.alipayobjects\.com\//i.test(o)&&!o.endsWith(".gif")&&!o.endsWith(".svg")?HGe.addImageProcess(t,"resize",`w_${r}`):null}(r,e,{width:r,originWidth:o,originHeight:n})||e}})}};function jXe(e,t){const n=NGe.getFileExtname(e);return NGe.isFileCanPreview(n,t)?NGe.getPreviewUrl(e):e}const IXe={token:bae,useValue:{registerFile:()=>({getExts:()=>NGe.EXTS.FILE_EXT_STR,getFileKey:e=>NGe.getFileKey(e),getPreviewUrl:e=>NGe.getPreviewUrl(e),getPreviewOrDownloadUrl:jXe})}},RXe={token:CP,useValue:{registerTheme:()=>({getThemeManager(){let e=Eze.themeManager;return e||(e=new jn.DefaultThemeManager),e}})}};class AXe{static openExternalLink(e){if(!globalThis.openExternalLink)return window.open(e,"_blank","noopener,noreferrer");globalThis.openExternalLink(e,!0)}}class DXe{constructor(e){this.openerName="file-previewer-opener",this.canPreview=e=>!0,"function"==typeof e&&(this.canPreview=e)}open(e,t){const n=NGe.getFileExtname(e);if(!this.canPreview(n))return void g.a.warning(l.a.createElement("span",{},[uw("当前文档中此文件类型不支持预览和下载"),l.a.createElement("a",{style:{marginLeft:5},rel:"noreferrer",href:oKe,target:"_blank",onClick:e=>{e.preventDefault(),AXe.openExternalLink(oKe)}},[l.a.createElement(cn.default)])]));const r=NGe.getPreviewUrl(e);!r||AXe.openExternalLink(r)}}class PXe{constructor(){this.openerName="safe-redirect-opener",this.apps=["link:external"]}open(e){AXe.openExternalLink(e)}}class MXe{constructor(){this.openerName="window-new-opener"}open(e){AXe.openExternalLink(e)}}const TXe=e=>[new MXe,new PXe,new DXe(e.canFilePreview)];const FXe=[new class{constructor(){this.openerName="image-viewer-opener",this.apps=["image"]}open(e,t={}){var n;let r=t.list,o=t.index||0;r||(o=0,r=[{src:e,msrc:e,width:t.width,height:t.height}]),null==(n=globalThis.NativeBridges)||n.previewImage({images:r.map((e=>({url:e.src,thumbnailUrl:e.msrc||e.src,width:e.width,height:e.height}))),index:o})}}];class NXe{constructor(e){this.openerName="file-previewer-opener",this.apps=["file"],this.canPreview=e=>!0,"function"==typeof e&&(this.canPreview=e)}open(e,t){const n=NGe.getFileExtname(e);if(!this.canPreview(n))return void g.a.warning(l.a.createElement("span",{},[uw("当前文档中此文件类型不支持预览和下载"),l.a.createElement("a",{style:{marginLeft:5},rel:"noreferrer",href:oKe,target:"_blank",onClick:e=>{e.preventDefault(),window.open(oKe,"_blank","noopener,noreferrer")}},[l.a.createElement(cn.default)])]));const r=jXe(e,t.size);!r||window.open(r,"_blank","noopener,noreferrer")}}const VXe=e=>({src:e.src,msrc:e.src,w:null==e?void 0:e.width,h:null==e?void 0:e.height});class LXe{constructor(){this.openerName="image-viewer-opener",this.apps=["image"]}open(e,t={}){let n=t.list,r=t.index||0;n||(r=0,n=[{src:e,width:t.width,height:t.height}]),function(e,t){const n=Object(In.getImageBrowser)(),r=Array.isArray(e)?e.map((e=>VXe(e))):[e].map((e=>VXe(e)));n.open(r,t||0)}(n,r)}}const BXe=e=>({token:Aie,useValue:{registerOpener(){const t=[new NXe(e.canFilePreview),new LXe];return Eze.isDesktop?[...t,...TXe(e)]:Eze.isYuqueMobileApp?[...t,...FXe]:t}}}),$Xe=e=>{const t=e["opener.filePreview.canPreview"];return[IXe,xXe,RXe,BXe({canFilePreview:t})]},zXe=Ts.defineToken("ViewerFormManageContribution");var UXe=Object.defineProperty,HXe=Object.getOwnPropertyDescriptor,qXe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?HXe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&UXe(t,n,i),i};let WXe=class{getProvider(){const e=this.formManageProvider.getContributions();return e[e.length-1].registerFormManage()}enableForm(e,t){return this.getProvider().enableForm(e,t)}};qXe([bd(zXe)],WXe.prototype,"formManageProvider",2),WXe=qXe([Ys()],WXe);var GXe=Object.defineProperty,KXe=Object.getOwnPropertyDescriptor,YXe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?KXe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&GXe(t,n,i),i};let XXe=class{getShare(e){if(e)return this._readService.getViewShare(e)}reOpenModal(){this._modalService.close("form-manange"),setTimeout((()=>{this._modalService.open("form-manage",{position:this._position})}),100)}setModalPosition(e){this._position=e}async createForm(e){this._readService.getView(e)||await this._commandService.execCommand("addView",{uuid:fw(32),type:BC.FORM,noSwitchView:!0},!0),this._modalService.close("form-create-modal"),this._modalService.open("form-disabled-modal",{position:this._position}),this._modalService.open("form-editor",{position:{left:0,top:0}})}async removeForm(e,t){const n=this._readService.getView(e);!n||(this._commandService.execCommand("removeView",{viewId:n.get("uuid")}),this._modalService.close(t))}async disableForm(e){const t=this._readService.getView(e);!t||(this._commandService.execCommand("upsertViewShare",{viewId:t.get("uuid"),status:xC.INACTIVE}),this._modalService.close("form-enabled-modal"))}async enableForm(e){const t=this._readService.getView(e);if(!t)return;let n="create";this._readService.getViewShare(t.get("uuid"))&&(n="update");const r=await this._formManageRegistry.enableForm(t.get("id"),n);this._commandService.execCommand("upsertViewShare",{viewId:t.get("uuid"),status:xC.ACTIVE,src:r.src}),this._modalService.close("form-disabled-modal"),this._modalService.open("form-enabled-modal",{position:this._position})}isEnableManage(){return!this._configuration.getValue("form.manage.disable")}};YXe([Xs(MI)],XXe.prototype,"_readService",2),YXe([Xs(uA)],XXe.prototype,"_commandService",2),YXe([Xs(Kse)],XXe.prototype,"_modalService",2),YXe([Xs(R_)],XXe.prototype,"_configuration",2),YXe([Xs(WXe)],XXe.prototype,"_formManageRegistry",2),XXe=YXe([Ys()],XXe);const JXe=({onCreate:e})=>l.a.createElement("div",{className:"lakex-table-form-create-container"},l.a.createElement("div",null,l.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*fH-gQbQajwgAAAAAAAAAAAAAARQnAQ",width:"142",height:"92"})),l.a.createElement("p",{className:"lakex-table-form-create-add-desc"},uw("可用于问卷调查、活动组织、登记报名等信息收集与整理场景。")),l.a.createElement("div",{className:"lakex-table-form-create-add"},l.a.createElement(b.a,{type:"primary",onClick:e},uw("生成新表单")))),ZXe=()=>{const{onCreate:e}=(()=>{const e=jpe(),t=G3(XXe);return{onCreate(){t.createForm(e.get("uuid"))}}})();return l.a.createElement("div",{className:"lakex-table-form-modal"},l.a.createElement(JXe,{onCreate:e}))};var QXe={},eJe={},tJe={};let nJe;const rJe=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];tJe.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},tJe.getSymbolTotalCodewords=function(e){return rJe[e]},tJe.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},tJe.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');nJe=e},tJe.isKanjiModeEnabled=function(){return typeof nJe<"u"},tJe.toSJIS=function(e){return nJe(e)};var oJe={};function iJe(){this.buffer=[],this.length=0}!function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(e){return e&&typeof e.bit<"u"&&e.bit>=0&&e.bit<4},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch{return n}}}(oJe),iJe.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var aJe=iJe;function lJe(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}lJe.prototype.set=function(e,t,n,r){const o=e*this.size+t;this.data[o]=n,r&&(this.reservedBit[o]=!0)},lJe.prototype.get=function(e,t){return this.data[e*this.size+t]},lJe.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},lJe.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var uJe=lJe,cJe={};!function(e){const t=tJe.getSymbolSize;e.getRowColCoords=function(e){if(1===e)return[];const n=Math.floor(e/7)+2,r=t(e),o=145===r?26:2*Math.ceil((r-13)/(2*n-2)),i=[r-7];for(let e=1;e<n-1;e++)i[e]=i[e-1]-o;return i.push(6),i.reverse()},e.getPositions=function(t){const n=[],r=e.getRowColCoords(t),o=r.length;for(let e=0;e<o;e++)for(let t=0;t<o;t++)0===e&&0===t||0===e&&t===o-1||e===o-1&&0===t||n.push([r[e],r[t]]);return n}}(cJe);var sJe={};const dJe=tJe.getSymbolSize;sJe.getPositions=function(e){const t=dJe(e);return[[0,0],[t-7,0],[0,t-7]]};var fJe={};!function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t=3,n=3,r=40,o=10;function i(t,n,r){switch(t){case e.Patterns.PATTERN000:return(n+r)%2==0;case e.Patterns.PATTERN001:return n%2==0;case e.Patterns.PATTERN010:return r%3==0;case e.Patterns.PATTERN011:return(n+r)%3==0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case e.Patterns.PATTERN101:return n*r%2+n*r%3==0;case e.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case e.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(e){const n=e.size;let r=0,o=0,i=0,a=null,l=null;for(let u=0;u<n;u++){o=i=0,a=l=null;for(let c=0;c<n;c++){let n=e.get(u,c);n===a?o++:(o>=5&&(r+=t+(o-5)),a=n,o=1),n=e.get(c,u),n===l?i++:(i>=5&&(r+=t+(i-5)),l=n,i=1)}o>=5&&(r+=t+(o-5)),i>=5&&(r+=t+(i-5))}return r},e.getPenaltyN2=function(e){const t=e.size;let r=0;for(let n=0;n<t-1;n++)for(let o=0;o<t-1;o++){const t=e.get(n,o)+e.get(n,o+1)+e.get(n+1,o)+e.get(n+1,o+1);(4===t||0===t)&&r++}return r*n},e.getPenaltyN3=function(e){const t=e.size;let n=0,o=0,i=0;for(let r=0;r<t;r++){o=i=0;for(let a=0;a<t;a++)o=o<<1&2047|e.get(r,a),a>=10&&(1488===o||93===o)&&n++,i=i<<1&2047|e.get(a,r),a>=10&&(1488===i||93===i)&&n++}return n*r},e.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*o},e.applyMask=function(e,t){const n=t.size;for(let r=0;r<n;r++)for(let o=0;o<n;o++)t.isReserved(o,r)||t.xor(o,r,i(e,o,r))},e.getBestMask=function(t,n){const r=Object.keys(e.Patterns).length;let o=0,i=1/0;for(let a=0;a<r;a++){n(a),e.applyMask(a,t);const r=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(a,t),r<i&&(i=r,o=a)}return o}}(fJe);var pJe={};const hJe=oJe,vJe=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],gJe=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];pJe.getBlocksCount=function(e,t){switch(t){case hJe.L:return vJe[4*(e-1)+0];case hJe.M:return vJe[4*(e-1)+1];case hJe.Q:return vJe[4*(e-1)+2];case hJe.H:return vJe[4*(e-1)+3];default:return}},pJe.getTotalCodewordsCount=function(e,t){switch(t){case hJe.L:return gJe[4*(e-1)+0];case hJe.M:return gJe[4*(e-1)+1];case hJe.Q:return gJe[4*(e-1)+2];case hJe.H:return gJe[4*(e-1)+3];default:return}};var mJe={},yJe={};const bJe=new Uint8Array(512),wJe=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)bJe[t]=e,wJe[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)bJe[e]=bJe[e-255]}(),yJe.log=function(e){if(e<1)throw new Error("log("+e+")");return wJe[e]},yJe.exp=function(e){return bJe[e]},yJe.mul=function(e,t){return 0===e||0===t?0:bJe[wJe[e]+wJe[t]]},function(e){const t=yJe;e.mul=function(e,n){const r=new Uint8Array(e.length+n.length-1);for(let o=0;o<e.length;o++)for(let i=0;i<n.length;i++)r[o+i]^=t.mul(e[o],n[i]);return r},e.mod=function(e,n){let r=new Uint8Array(e);for(;r.length-n.length>=0;){const e=r[0];for(let o=0;o<n.length;o++)r[o]^=t.mul(n[o],e);let o=0;for(;o<r.length&&0===r[o];)o++;r=r.slice(o)}return r},e.generateECPolynomial=function(n){let r=new Uint8Array([1]);for(let o=0;o<n;o++)r=e.mul(r,new Uint8Array([1,t.exp(o)]));return r}}(mJe);const _Je=mJe;function kJe(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}kJe.prototype.initialize=function(e){this.degree=e,this.genPoly=_Je.generateECPolynomial(this.degree)},kJe.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=_Je.mod(t,this.genPoly),r=this.degree-n.length;if(r>0){const e=new Uint8Array(this.degree);return e.set(n,r),e}return n};var CJe=kJe,EJe={},OJe={},SJe={isValid:function(e){return!isNaN(e)&&e>=1&&e<=40}},xJe={};const jJe="[0-9]+";let IJe="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";IJe=IJe.replace(/u/g,"\\u");const RJe="(?:(?![A-Z0-9 $%*+\\-./:]|"+IJe+")(?:.|[\r\n]))+";xJe.KANJI=new RegExp(IJe,"g"),xJe.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),xJe.BYTE=new RegExp(RJe,"g"),xJe.NUMERIC=new RegExp(jJe,"g"),xJe.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const AJe=new RegExp("^"+IJe+"$"),DJe=new RegExp("^"+jJe+"$"),PJe=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");xJe.testKanji=function(e){return AJe.test(e)},xJe.testNumeric=function(e){return DJe.test(e)},xJe.testAlphanumeric=function(e){return PJe.test(e)},function(e){const t=SJe,n=xJe;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(e,n){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!t.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?e.ccBits[0]:n<27?e.ccBits[1]:e.ccBits[2]},e.getBestModeForData=function(t){return n.testNumeric(t)?e.NUMERIC:n.testAlphanumeric(t)?e.ALPHANUMERIC:n.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},e.isValid=function(e){return e&&e.bit&&e.ccBits},e.from=function(t,n){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch{return n}}}(OJe),function(e){const t=tJe,n=pJe,r=oJe,o=OJe,i=SJe,a=t.getBCHDigit(7973);function l(e,t){return o.getCharCountIndicator(e,t)+4}function u(e,t){let n=0;return e.forEach((function(e){const r=l(e.mode,t);n+=r+e.getBitsLength()})),n}e.from=function(e,t){return i.isValid(e)?parseInt(e,10):t},e.getCapacity=function(e,r,a){if(!i.isValid(e))throw new Error("Invalid QR Code version");typeof a>"u"&&(a=o.BYTE);const u=8*(t.getSymbolTotalCodewords(e)-n.getTotalCodewordsCount(e,r));if(a===o.MIXED)return u;const c=u-l(a,e);switch(a){case o.NUMERIC:return Math.floor(c/10*3);case o.ALPHANUMERIC:return Math.floor(c/11*2);case o.KANJI:return Math.floor(c/13);case o.BYTE:default:return Math.floor(c/8)}},e.getBestVersionForData=function(t,n){let i;const a=r.from(n,r.M);if(Array.isArray(t)){if(t.length>1)return function(t,n){for(let r=1;r<=40;r++)if(u(t,r)<=e.getCapacity(r,n,o.MIXED))return r}(t,a);if(0===t.length)return 1;i=t[0]}else i=t;return function(t,n,r){for(let o=1;o<=40;o++)if(n<=e.getCapacity(o,r,t))return o}(i.mode,i.getLength(),a)},e.getEncodedBits=function(e){if(!i.isValid(e)||e<7)throw new Error("Invalid QR Code version");let n=e<<12;for(;t.getBCHDigit(n)-a>=0;)n^=7973<<t.getBCHDigit(n)-a;return e<<12|n}}(EJe);var MJe={};const TJe=tJe,FJe=TJe.getBCHDigit(1335);MJe.getEncodedBits=function(e,t){const n=e.bit<<3|t;let r=n<<10;for(;TJe.getBCHDigit(r)-FJe>=0;)r^=1335<<TJe.getBCHDigit(r)-FJe;return 21522^(n<<10|r)};var NJe={};const VJe=OJe;function LJe(e){this.mode=VJe.NUMERIC,this.data=e.toString()}LJe.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},LJe.prototype.getLength=function(){return this.data.length},LJe.prototype.getBitsLength=function(){return LJe.getBitsLength(this.data.length)},LJe.prototype.write=function(e){let t,n,r;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),r=parseInt(n,10),e.put(r,10);const o=this.data.length-t;o>0&&(n=this.data.substr(t),r=parseInt(n,10),e.put(r,3*o+1))};var BJe=LJe;const $Je=OJe,zJe=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function UJe(e){this.mode=$Je.ALPHANUMERIC,this.data=e}UJe.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},UJe.prototype.getLength=function(){return this.data.length},UJe.prototype.getBitsLength=function(){return UJe.getBitsLength(this.data.length)},UJe.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*zJe.indexOf(this.data[t]);n+=zJe.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(zJe.indexOf(this.data[t]),6)};var HJe=UJe;const qJe=function(e){for(var t=[],n=e.length,r=0;r<n;r++){var o=e.charCodeAt(r);if(o>=55296&&o<=56319&&n>r+1){var i=e.charCodeAt(r+1);i>=56320&&i<=57343&&(o=1024*(o-55296)+i-56320+65536,r+=1)}o<128?t.push(o):o<2048?(t.push(o>>6|192),t.push(63&o|128)):o<55296||o>=57344&&o<65536?(t.push(o>>12|224),t.push(o>>6&63|128),t.push(63&o|128)):o>=65536&&o<=1114111?(t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(63&o|128)):t.push(239,191,189)}return new Uint8Array(t).buffer},WJe=OJe;function GJe(e){this.mode=WJe.BYTE,"string"==typeof e&&(e=qJe(e)),this.data=new Uint8Array(e)}GJe.getBitsLength=function(e){return 8*e},GJe.prototype.getLength=function(){return this.data.length},GJe.prototype.getBitsLength=function(){return GJe.getBitsLength(this.data.length)},GJe.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var KJe=GJe;const YJe=OJe,XJe=tJe;function JJe(e){this.mode=YJe.KANJI,this.data=e}JJe.getBitsLength=function(e){return 13*e},JJe.prototype.getLength=function(){return this.data.length},JJe.prototype.getBitsLength=function(){return JJe.getBitsLength(this.data.length)},JJe.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=XJe.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}};var ZJe=JJe,QJe={exports:{}};!function(e){var t={single_source_shortest_paths:function(e,n,r){var o={},i={};i[n]=0;var a,l,u,c,s,d,f,p=t.PriorityQueue.make();for(p.push(n,0);!p.empty();)for(u in l=(a=p.pop()).value,c=a.cost,s=e[l]||{})s.hasOwnProperty(u)&&(d=c+s[u],f=i[u],(typeof i[u]>"u"||f>d)&&(i[u]=d,p.push(u,d),o[u]=l));if(typeof r<"u"&&typeof i[r]>"u"){var h=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(h)}return o},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,n,r){var o=t.single_source_shortest_paths(e,n,r);return t.extract_shortest_path_from_predecessor_list(o,r)},PriorityQueue:{make:function(e){var n,r=t.PriorityQueue,o={};for(n in e=e||{},r)r.hasOwnProperty(n)&&(o[n]=r[n]);return o.queue=[],o.sorter=e.sorter||r.default_sorter,o},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t}(QJe),function(e){const t=OJe,n=BJe,r=HJe,o=KJe,i=ZJe,a=xJe,l=tJe,u=QJe.exports;function c(e){return unescape(encodeURIComponent(e)).length}function s(e,t,n){const r=[];let o;for(;null!==(o=e.exec(n));)r.push({data:o[0],index:o.index,mode:t,length:o[0].length});return r}function d(e){const n=s(a.NUMERIC,t.NUMERIC,e),r=s(a.ALPHANUMERIC,t.ALPHANUMERIC,e);let o,i;return l.isKanjiModeEnabled()?(o=s(a.BYTE,t.BYTE,e),i=s(a.KANJI,t.KANJI,e)):(o=s(a.BYTE_KANJI,t.BYTE,e),i=[]),n.concat(r,o,i).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function f(e,a){switch(a){case t.NUMERIC:return n.getBitsLength(e);case t.ALPHANUMERIC:return r.getBitsLength(e);case t.KANJI:return i.getBitsLength(e);case t.BYTE:return o.getBitsLength(e)}}function p(e,a){let u;const c=t.getBestModeForData(e);if(u=t.from(a,c),u!==t.BYTE&&u.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+t.toString(u)+".\n Suggested mode is: "+t.toString(c));switch(u===t.KANJI&&!l.isKanjiModeEnabled()&&(u=t.BYTE),u){case t.NUMERIC:return new n(e);case t.ALPHANUMERIC:return new r(e);case t.KANJI:return new i(e);case t.BYTE:return new o(e)}}e.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(p(t,null)):t.data&&e.push(p(t.data,t.mode)),e}),[])},e.fromString=function(n,r){const o=function(e){const n=[];for(let r=0;r<e.length;r++){const o=e[r];switch(o.mode){case t.NUMERIC:n.push([o,{data:o.data,mode:t.ALPHANUMERIC,length:o.length},{data:o.data,mode:t.BYTE,length:o.length}]);break;case t.ALPHANUMERIC:n.push([o,{data:o.data,mode:t.BYTE,length:o.length}]);break;case t.KANJI:n.push([o,{data:o.data,mode:t.BYTE,length:c(o.data)}]);break;case t.BYTE:n.push([{data:o.data,mode:t.BYTE,length:c(o.data)}])}}return n}(d(n,l.isKanjiModeEnabled())),i=function(e,n){const r={},o={start:{}};let i=["start"];for(let a=0;a<e.length;a++){const l=e[a],u=[];for(let e=0;e<l.length;e++){const c=l[e],s=""+a+e;u.push(s),r[s]={node:c,lastCount:0},o[s]={};for(let e=0;e<i.length;e++){const a=i[e];r[a]&&r[a].node.mode===c.mode?(o[a][s]=f(r[a].lastCount+c.length,c.mode)-f(r[a].lastCount,c.mode),r[a].lastCount+=c.length):(r[a]&&(r[a].lastCount=c.length),o[a][s]=f(c.length,c.mode)+4+t.getCharCountIndicator(c.mode,n))}}i=u}for(let e=0;e<i.length;e++)o[i[e]].end=0;return{map:o,table:r}}(o,r),a=u.find_path(i.map,"start","end"),s=[];for(let e=1;e<a.length-1;e++)s.push(i.table[a[e]].node);return e.fromArray(s.reduce((function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[]))},e.rawSplit=function(t){return e.fromArray(d(t,l.isKanjiModeEnabled()))}}(NJe);const eZe=tJe,tZe=oJe,nZe=aJe,rZe=uJe,oZe=cJe,iZe=sJe,aZe=fJe,lZe=pJe,uZe=CJe,cZe=EJe,sZe=MJe,dZe=OJe,fZe=NJe;function pZe(e,t,n){const r=e.size,o=sZe.getEncodedBits(t,n);let i,a;for(i=0;i<15;i++)a=1==(o>>i&1),i<6?e.set(i,8,a,!0):i<8?e.set(i+1,8,a,!0):e.set(r-15+i,8,a,!0),i<8?e.set(8,r-i-1,a,!0):i<9?e.set(8,15-i-1+1,a,!0):e.set(8,15-i-1,a,!0);e.set(r-8,8,1,!0)}function hZe(e,t,n){const r=new nZe;n.forEach((function(t){r.put(t.mode.bit,4),r.put(t.getLength(),dZe.getCharCountIndicator(t.mode,e)),t.write(r)}));const o=8*(eZe.getSymbolTotalCodewords(e)-lZe.getTotalCodewordsCount(e,t));for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);const i=(o-r.getLengthInBits())/8;for(let e=0;e<i;e++)r.put(e%2?17:236,8);return function(e,t,n){const r=eZe.getSymbolTotalCodewords(t),o=lZe.getTotalCodewordsCount(t,n),i=r-o,a=lZe.getBlocksCount(t,n),l=r%a,u=a-l,c=Math.floor(r/a),s=Math.floor(i/a),d=s+1,f=c-s,p=new uZe(f);let h=0;const v=new Array(a),g=new Array(a);let m=0;const y=new Uint8Array(e.buffer);for(let e=0;e<a;e++){const t=e<u?s:d;v[e]=y.slice(h,h+t),g[e]=p.encode(v[e]),h+=t,m=Math.max(m,t)}const b=new Uint8Array(r);let w,_,k=0;for(w=0;w<m;w++)for(_=0;_<a;_++)w<v[_].length&&(b[k++]=v[_][w]);for(w=0;w<f;w++)for(_=0;_<a;_++)b[k++]=g[_][w];return b}(r,e,t)}function vZe(e,t,n,r){let o;if(Array.isArray(e))o=fZe.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let r=t;if(!r){const t=fZe.rawSplit(e);r=cZe.getBestVersionForData(t,n)}o=fZe.fromString(e,r||40)}}const i=cZe.getBestVersionForData(o,n);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<i)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+i+".\n")}else t=i;const a=hZe(t,n,o),l=eZe.getSymbolSize(t),u=new rZe(l);return function(e,t){const n=e.size,r=iZe.getPositions(t);for(let t=0;t<r.length;t++){const o=r[t][0],i=r[t][1];for(let t=-1;t<=7;t++)if(!(o+t<=-1||n<=o+t))for(let r=-1;r<=7;r++)i+r<=-1||n<=i+r||(t>=0&&t<=6&&(0===r||6===r)||r>=0&&r<=6&&(0===t||6===t)||t>=2&&t<=4&&r>=2&&r<=4?e.set(o+t,i+r,!0,!0):e.set(o+t,i+r,!1,!0))}}(u,t),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2==0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(u),function(e,t){const n=oZe.getPositions(t);for(let t=0;t<n.length;t++){const r=n[t][0],o=n[t][1];for(let t=-2;t<=2;t++)for(let n=-2;n<=2;n++)-2===t||2===t||-2===n||2===n||0===t&&0===n?e.set(r+t,o+n,!0,!0):e.set(r+t,o+n,!1,!0)}}(u,t),pZe(u,n,0),t>=7&&function(e,t){const n=e.size,r=cZe.getEncodedBits(t);let o,i,a;for(let t=0;t<18;t++)o=Math.floor(t/3),i=t%3+n-8-3,a=1==(r>>t&1),e.set(o,i,a,!0),e.set(i,o,a,!0)}(u,t),function(e,t){const n=e.size;let r=-1,o=n-1,i=7,a=0;for(let l=n-1;l>0;l-=2)for(6===l&&l--;;){for(let n=0;n<2;n++)if(!e.isReserved(o,l-n)){let r=!1;a<t.length&&(r=1==(t[a]>>>i&1)),e.set(o,l-n,r),i--,-1===i&&(a++,i=7)}if(o+=r,o<0||n<=o){o-=r,r=-r;break}}}(u,a),isNaN(r)&&(r=aZe.getBestMask(u,pZe.bind(null,u,n))),aZe.applyMask(r,u),pZe(u,n,r),{modules:u,version:t,errorCorrectionLevel:n,maskPattern:r,segments:o}}eJe.create=function(e,t){if(typeof e>"u"||""===e)throw new Error("No input text");let n,r,o=tZe.M;return typeof t<"u"&&(o=tZe.from(t.errorCorrectionLevel,tZe.M),n=cZe.from(t.version),r=aZe.from(t.maskPattern),t.toSJISFunc&&eZe.setToSJISFunction(t.toSJISFunc)),vZe(e,n,o,r)};var gZe={},mZe={};!function(e){function t(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}e.getOptions=function(e){e||(e={}),e.color||(e.color={});const n=typeof e.margin>"u"||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,o=e.scale||4;return{width:r,scale:r?4:o,margin:n,color:{dark:t(e.color.dark||"#000000ff"),light:t(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},e.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},e.getImageWidth=function(t,n){const r=e.getScale(t,n);return Math.floor((t+2*n.margin)*r)},e.qrToImageData=function(t,n,r){const o=n.modules.size,i=n.modules.data,a=e.getScale(o,r),l=Math.floor((o+2*r.margin)*a),u=r.margin*a,c=[r.color.light,r.color.dark];for(let e=0;e<l;e++)for(let n=0;n<l;n++){let s=4*(e*l+n),d=r.color.light;if(e>=u&&n>=u&&e<l-u&&n<l-u){d=c[i[Math.floor((e-u)/a)*o+Math.floor((n-u)/a)]?1:0]}t[s++]=d.r,t[s++]=d.g,t[s++]=d.b,t[s]=d.a}}}(mZe),function(e){const t=mZe;e.render=function(e,n,r){let o=r,i=n;typeof o>"u"&&(!n||!n.getContext)&&(o=n,n=void 0),n||(i=function(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),o=t.getOptions(o);const a=t.getImageWidth(e.modules.size,o),l=i.getContext("2d"),u=l.createImageData(a,a);return t.qrToImageData(u.data,e,o),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(l,i,a),l.putImageData(u,0,0),i},e.renderToDataURL=function(t,n,r){let o=r;typeof o>"u"&&(!n||!n.getContext)&&(o=n,n=void 0),o||(o={});const i=e.render(t,n,o),a=o.type||"image/png",l=o.rendererOpts||{};return i.toDataURL(a,l.quality)}}(gZe);var yZe={};const bZe=mZe;function wZe(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function _Ze(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}yZe.render=function(e,t,n){const r=bZe.getOptions(t),o=e.modules.size,i=e.modules.data,a=o+2*r.margin,l=r.color.light.a?"<path "+wZe(r.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+wZe(r.color.dark,"stroke")+' d="'+function(e,t,n){let r="",o=0,i=!1,a=0;for(let l=0;l<e.length;l++){const u=Math.floor(l%t),c=Math.floor(l/t);!u&&!i&&(i=!0),e[l]?(a++,l>0&&u>0&&e[l-1]||(r+=i?_Ze("M",u+n,.5+c+n):_Ze("m",o,0),o=0,i=!1),u+1<t&&e[l+1]||(r+=_Ze("h",a),a=0)):o++}return r}(i,o,r.margin)+'"/>',c='viewBox="0 0 '+a+" "+a+'"',s='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+c+' shape-rendering="crispEdges">'+l+u+"</svg>\n";return"function"==typeof n&&n(null,s),s};const kZe=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then},CZe=eJe,EZe=gZe,OZe=yZe;function SZe(e,t,n,r,o){const i=[].slice.call(arguments,1),a=i.length,l="function"==typeof i[a-1];if(!l&&!kZe())throw new Error("Callback required as last argument");if(!l){if(a<1)throw new Error("Too few arguments provided");return 1===a?(n=t,t=r=void 0):2===a&&!t.getContext&&(r=n,n=t,t=void 0),new Promise((function(o,i){try{const i=CZe.create(n,r);o(e(i,t,r))}catch(e){i(e)}}))}if(a<2)throw new Error("Too few arguments provided");2===a?(o=n,n=t,t=r=void 0):3===a&&(t.getContext&&typeof o>"u"?(o=r,r=void 0):(o=r,r=n,n=t,t=void 0));try{const i=CZe.create(n,r);o(null,e(i,t,r))}catch(e){o(e)}}QXe.create=CZe.create,QXe.toCanvas=SZe.bind(null,EZe.render),QXe.toDataURL=SZe.bind(null,EZe.renderToDataURL),QXe.toString=SZe.bind(null,(function(e,t,n){return OZe.render(e,n)}));const xZe=e=>{const{state:t,shareUrl:n,copyLink:r,canUpdate:o,onDisable:i}=(e=>{var t;const n=xpe(EA.TABLE).canUpdate(),r=G3(XXe),o=null==(t=null==r?void 0:r.getShare(e.form.get("uuid")))?void 0:t.get("src"),[i,l]=Object(a.useState)(),u=`${location.origin}${o}`;return Object(a.useEffect)((()=>{QXe.toDataURL(u,{margin:0},((e,t)=>{l(t)}))}),[]),{state:{qrcode:i},shareUrl:u,copyLink:e=>{e.preventDefault(),p1(u),g.a.success({content:uw("复制成功"),style:{zIndex:1050}})},canUpdate:n,onDisable(){var t;null==(t=e.onDisable)||t.call(e)}}})(e);return l.a.createElement("div",{className:"lakex-table-form-share-link"},o?l.a.createElement("div",{className:"lakex-table-form-share-link-title"},l.a.createElement("div",null,uw("获得链接的所有人，可填写并提交表单")),l.a.createElement("span",{className:"lakex-table-form-share-link-unlink"},uw("停止收集"),l.a.createElement(j.a,{onChange:i}))):null,l.a.createElement("div",{className:"lakex-table-form-share-link-content"},l.a.createElement(b.a.Group,null,l.a.createElement(s.a,{value:n,disabled:!0,className:"lakex-table-form-share-link-input"}),l.a.createElement(b.a,{type:"primary",onClick:r,className:"lakex-table-form-share-link-btn"},uw("复制填写链接"))),l.a.createElement("div",{className:"lakex-table-form-share-link-qrcode"},t.qrcode?l.a.createElement("img",{src:t.qrcode}):l.a.createElement("span",null),l.a.createElement("span",null,uw("使用钉钉扫码$1",uw(o?"分享":"打开"))))))},jZe=e=>l.a.createElement("div",{className:"lakex-table-form-enabled-centered"},l.a.createElement(xZe,{form:e.form,onDisable:e.onDisable})),IZe=()=>{const{form:e,onDisable:t,isEnableManage:n}=(()=>{const e=jpe(),t=G3(qze),n=G3(XXe),[r]=Object(a.useState)(null==t?void 0:t.getForm(e.get("uuid")));return{form:r,onDisable(){n.disableForm(e.get("uuid"))},isEnableManage:n.isEnableManage()}})();return l.a.createElement("div",{className:"lakex-table-form-modal"},l.a.createElement("div",{className:"lakex-table-form-model-content"},n&&l.a.createElement(jZe,{form:e,onDisable:t})))},RZe=({onEnable:e})=>l.a.createElement("div",{className:"lakex-table-form-disabled-centered"},l.a.createElement(Hre,{src:"https://gw.alipayobjects.com/mdn/rms_740edc/afts/img/A*5bdXSJkjvI0AAAAAAAAAAAAAARQnAQ",darkSrc:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*eBesTrDkSP8AAAAAAAAAAAAAARQnAQ"}),l.a.createElement("div",{className:"lakex-table-form-disabled-title"},uw("表单收集未开启")),l.a.createElement("p",{className:"lakex-table-form-disabled-desc"},uw("点击「开启收集」按钮获得表单填写链接")),l.a.createElement("div",{className:"lakex-table-form-disabled-button"},l.a.createElement(b.a,{onClick:e,type:"primary"},uw("开启收集")))),AZe=()=>{const{form:e,onEnable:t,isEnableManage:n}=(()=>{const e=jpe(),t=G3(qze),n=G3(XXe),[r]=Object(a.useState)(null==t?void 0:t.getForm(e.get("uuid")));return{form:r,onEnable(){n.enableForm(e.get("uuid"))},isEnableManage:n.isEnableManage()}})();return l.a.createElement("div",{className:"lakex-table-form-modal"},l.a.createElement("div",{className:"lakex-table-form-model-content"},n&&l.a.createElement(RZe,{form:e,onEnable:t})))};var DZe=Object.defineProperty,PZe=Object.getOwnPropertyDescriptor,MZe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?PZe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&DZe(t,n,i),i};let TZe=class{constructor(){this._toDestroyCollection=new H_}static pluginModule(){return pd().contribution(zXe).register(this).register(XXe).register(WXe)}static registerConfiguration(e){e.registerConfiguration({id:"form",type:"object",properties:{manage:{type:"object",properties:{disable:{type:"boolean"}}}}})}init(){this._toDestroyCollection.push(this._renderService.onClickEvent((e=>{if("clickFormManageButton"===e.eventName){const t=e.data.target,n=e.data.status,r={origin:t,placement:"bottomRight"};if(this._viewerFormManageService.setModalPosition(r),n!==Fze.COLLECTING)return void this._modalService.open("form-disabled-modal",{position:r});this._modalService.open("form-enabled-modal",{position:r})}})))}destroy(){this._toDestroyCollection.destroy()}registerModal(e){e.registerItem({id:"form-create-modal",hasMask:!1,scrollStrategy:"block",zIndex:"modalFromToolbar",RenderComponent:ZXe}),e.registerItem({id:"form-enabled-modal",hasMask:!1,scrollStrategy:"block",zIndex:"modalFromToolbar",RenderComponent:IZe}),e.registerItem({id:"form-disabled-modal",hasMask:!1,scrollStrategy:"block",zIndex:"modalFromToolbar",RenderComponent:AZe})}};TZe.pluginName="workbench-viewer-form-manage",MZe([Xs(bie)],TZe.prototype,"_renderService",2),MZe([Xs(Kse)],TZe.prototype,"_modalService",2),MZe([Xs(XXe)],TZe.prototype,"_viewerFormManageService",2),TZe=MZe([Ys({contrib:[L3,pse,Yse]})],TZe);var FZe=Object.defineProperty,NZe=Object.getOwnPropertyDescriptor,VZe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?NZe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&FZe(t,n,i),i};let LZe=class{static pluginModule(){return pd().register(this)}init(){this._renderService.onClickEvent((e=>{var t;if("fieldConfigClick"===e.eventName){const n=e.data,r=n.e,o=n.viewField;this._modalService.open("addOrUpdateField",{position:{origin:r.target,placement:"bottom"},initialState:{fieldId:o.get("field_uuid"),showFieldTypes:null==(t=CC)?void 0:t.filter((e=>{var t;return!(zC.isSystemType(e.type)||e.type===(null==(t=o.get("field"))?void 0:t.get("type")))})).map((e=>e.type))}})}}))}registerToolbar(e){e.registerItem({id:"create-form",icon:"FormView",tooltip:uw("生成表单"),visible:()=>{const e=this._readService.getActiveView();return[BC.GRID,BC.CARD,BC.KANBAN].includes(null==e?void 0:e.get("type"))},onClick:()=>{var e;const t=fw(32);this._commandService.execCommand("addView",{uuid:t,type:BC.FORM}),null==(e=this._openerService)||e.open("view",t)}})}destroy(){}};LZe.pluginName="workbench-viewer-form",VZe([Xs(Kse)],LZe.prototype,"_modalService",2),VZe([Xs(bie)],LZe.prototype,"_renderService",2),VZe([Xs(MI)],LZe.prototype,"_readService",2),VZe([Xs(uA)],LZe.prototype,"_commandService",2),VZe([Xs(sae)],LZe.prototype,"_openerService",2),LZe=VZe([Ys({contrib:[L3,pse]})],LZe);var BZe=Object.defineProperty,$Ze=Object.getOwnPropertyDescriptor,zZe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?$Ze(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&BZe(t,n,i),i};let UZe=class{static pluginModule(){return pd().register(this).register(sze)}init(){}registerToolbar(e){e.registerItem({id:"full-screen",icon:"Fullscreen",tooltip:uw("全屏"),visible:()=>{var e;return!((null==(e=this._readService.getActiveView())?void 0:e.get("type"))===BC.FORM)&&this._fullScreenService.status!==aze.FULL_SCREEN},onClick:()=>{this._fullScreenService.emitStatusChange()}})}};UZe.pluginName="workbench-full-screen",zZe([Xs(MI)],UZe.prototype,"_readService",2),zZe([Xs(sze)],UZe.prototype,"_fullScreenService",2),UZe=zZe([Ys({contrib:[L3,pse]})],UZe);const HZe=()=>{const e=G3(gze),[t,n]=Object(a.useState)(e.cardWidthMode),r=t===dze.NORMAL;return Object(a.useEffect)((()=>{const t=e.onModeUIChange((e=>{n(e)}));return()=>{null==t||t.destroy()}}),[e]),l.a.createElement(h.a,{title:uw(r?"全宽":"标宽")},l.a.createElement("button",{className:"lakex-workbench-toolbar-button",onClick:()=>{const r=t===dze.NORMAL?dze.CONTAIN:dze.NORMAL;n(r),null==e||e.setWidthMode(r)},tabIndex:-1},l.a.createElement(g6,{type:r?"FullWidth":"NormalWidth"})))};var qZe=Object.defineProperty,WZe=Object.getOwnPropertyDescriptor;let GZe=class{static pluginModule(){return pd().register(this).register(gze)}init(){}destroy(){}registerToolbar(e){e.registerItem({id:"full-width",RenderComponent:HZe})}};GZe.pluginName="workbench-full-width",GZe=((e,t,n,r)=>{for(var o,i=r>1?void 0:r?WZe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&qZe(t,n,i),i})([Ys({contrib:[L3,pse]})],GZe);const KZe=({originField:e,fieldType:t,onFieldSubmitConfirm:n})=>{var r;const o=!e,i=e&&e.get("type")!==bC.TEXT,a=o?fw(32):e.get("uuid"),u=G3(Kse),c=G3(R_),s=G3(gHe).getAiWritingConfig(a),f=(null==s?void 0:s.open)?null==(r=EHe.find((e=>e.uuid===(null==s?void 0:s.type))))?void 0:r.name:uw("关闭"),p=!!c.getValue("aiWriting.enable");return t===bC.TEXT&&p?l.a.createElement(d.a,{className:"lakex-table-ai-writing-config"},l.a.createElement(d.a.Item,{className:"lakex-table-ai-writing-config-item",onClick:()=>{const e=u.getModalProps("addOrUpdateField");null==u||u.open("ai-writing-config-modal",{initialState:{fieldId:a,isCreateNewCol:o,isChangedFieldType:i,onFieldSubmitConfirm:n},position:e.position}),null==u||u.close("addOrUpdateField")}},l.a.createElement(sn.default,{className:"tag",width:14,height:14}),uw("AI 智能填写"),l.a.createElement("div",{className:"right"},l.a.createElement("span",{className:"status"},f),l.a.createElement(g6,{type:"ArrowRight",size:14})))):null},YZe=({initialState:e})=>{const{fieldId:t,isCreateNewCol:n,isChangedFieldType:r,onFieldSubmitConfirm:o}=e,[i,u]=Object(a.useState)(!1),c=G3(Kse),f=G3(uA),p=G3(gHe),h=p.getAiWritingConfig(t),[v,m]=Object(a.useState)((null==h?void 0:h.open)||!1),[y,_]=Object(a.useState)((null==h?void 0:h.type)||vHe.SUMMARY),[k,C]=Object(a.useState)((null==h?void 0:h.prompt)||""),[E,O]=Object(a.useState)((null==h?void 0:h.auto)||!1),S=Object(a.useMemo)((()=>EHe.find((e=>e.uuid===y))||EHe[0]),[y]),x=Object(a.useCallback)((()=>{const e=c.getModalProps("ai-writing-config-modal");null==c||c.open("addOrUpdateField",{initialState:{fieldId:t},position:e.position}),c.close("ai-writing-config-modal")}),[c]),I=Object(a.useCallback)((e=>{m(e),f.execCommand("updateAiWritingOpen",{fieldId:t,open:e})}),[f,t]),R=Object(a.useCallback)((e=>{_(e),f.execCommand("updateAiWritingType",{fieldId:t,type:e})}),[f,t,v]),A=Object(a.useCallback)((e=>{const t=e.target.value.trim();t.length>255?g.a.error(uw("规则最长支持255字符")):C(t)}),[]);Object(a.useCallback)((e=>{O(e),f.execCommand("updateAiWritingAuto",{fieldId:t,auto:e})}),[f,t]);const D=Object(a.useCallback)((async()=>{y===vHe.SUMMARY||k?(n?await o(t):r&&await o(),await f.execCommand("updateAiWritingPrompt",{fieldId:t,prompt:k}),u(!0),await p.startAiWriting(t),null==c||c.close("ai-writing-config-modal"),g.a.success(uw("正在填写中..."))):g.a.error(uw("规则不能为空"))}),[c,f,t,y,k,n,r]),P=Object(a.useCallback)((()=>{null==c||c.close("ai-writing-config-modal")}),[c]);return l.a.createElement("div",{className:u$("lakex-table-ai-writing-config-modal",{disabled:!v})},l.a.createElement("div",{className:"lakex-table-ai-writing-config-modal-header"},l.a.createElement("div",{className:"left",onClick:x},l.a.createElement(B.default,{className:"lakex-table-ai-writing-config-modal-back",width:16,height:16}),uw("智能填写"),l.a.createElement(ln.default,{className:"tag",width:16,height:16})),l.a.createElement("div",{className:"right"},l.a.createElement(j.a,{size:"small",checked:v,onChange:I}))),l.a.createElement("div",{className:"lakex-table-ai-writing-config-modal-content"},l.a.createElement("div",{className:"lakex-table-ai-writing-config-modal-type"},l.a.createElement("span",null,uw("内容规则：")),l.a.createElement(w.a,{trigger:["click"],placement:"bottomRight",disabled:!v,overlay:l.a.createElement(d.a,{className:"lakex-table-ai-writing-config-menu",mode:"vertical",selectedKeys:[`${y}`]},EHe.map(((e,t)=>l.a.createElement(d.a.Item,{key:t,onClick:()=>{R(e.uuid)}},e.name,l.a.createElement(dn.default,{width:16,height:16,style:{display:y===e.uuid?"inline":"none"}})))))},l.a.createElement("span",{className:u$("lakex-table-ai-writing-config-modal-select",{disabled:!v})},S.name,l.a.createElement(N.default,{width:14,height:14,style:{marginLeft:"4px"}})))),y===vHe.SUMMARY?l.a.createElement(s.a.TextArea,{disabled:!0,defaultValue:"",autoSize:{minRows:1},placeholder:S.placeholder}):l.a.createElement(s.a.TextArea,{disabled:!v,defaultValue:"",value:k,autoSize:{minRows:3},placeholder:S.placeholder,onChange:A})),l.a.createElement("div",{className:"lakex-table-ai-writing-config-modal-footer"},l.a.createElement("div",{className:"lakex-table-ai-writing-config-buttons"},l.a.createElement(b.a,{className:"lakex-table-ai-writing-config-cancel",disabled:!v,onClick:P},uw("取消")),l.a.createElement(b.a,{className:"lakex-table-ai-writing-config-start",disabled:!v,onClick:D,type:"primary"},uw("开始自动填写"),i&&l.a.createElement(un.default,{className:"lakex-table-ai-writing-loading-icon",width:16,height:16})))))},XZe=({initialState:e})=>{const{fieldId:t,recordId:n}=e,[r,o]=Object(a.useState)(!1),i=G3(gHe),u=Object(a.useCallback)((async()=>{o(!0),await i.startAiWriting(t,n),o(!1),g.a.success(uw("已重新填写"))}),[t,n]);return l.a.createElement("div",{className:"lakex-table-aotufill-cell-modal",onClick:u},l.a.createElement(sn.default,{width:16,height:16,style:{marginRight:"6px"}}),uw("重新填写"),r&&l.a.createElement(un.default,{className:"lakex-table-ai-writing-loading-icon",width:16,height:16}))},JZe=({fieldType:e,fieldName:t})=>{const n=G3(R_);return(null==n?void 0:n.getValue("aiWriting.enable"))&&e===bC.TEXT?l.a.createElement("span",null,t,l.a.createElement(ln.default,{className:"lakex-table-grid-header-ai-writing-icon",width:14,height:14})):l.a.createElement(l.a.Fragment,null,t)},ZZe=({cell:e,field:t,children:n})=>{const r=G3(R_),o=(null==r?void 0:r.getValue("aiWriting.enable"))||!1,i=G3(gHe),u=i.getAiWritingConfig(t.get("uuid")),[c,s]=Object(a.useState)(!1),d=Object(a.useCallback)((async()=>{s(!0),await i.startAiWriting(e.fieldId,e.recordId),s(!1),g.a.success(uw("已重新填写"))}),[]);return o&&(null==u?void 0:u.open)?l.a.createElement(f.a,{overlayClassName:"lakex-table-expand-record-ai-writing-popover",content:l.a.createElement("div",{className:"content",onClick:d},l.a.createElement(sn.default,{width:16,height:16,style:{marginRight:"6px"}}),uw("重新填写"),c&&l.a.createElement(un.default,{className:"lakex-table-ai-writing-loading-icon",width:16,height:16})),placement:"topRight",noArrow:!0,hideWhenInactive:!0},l.a.createElement("div",null,n)):l.a.createElement(l.a.Fragment,null,n)};var QZe=Object.defineProperty,eQe=Object.getOwnPropertyDescriptor,tQe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?eQe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&QZe(t,n,i),i};let nQe=class{constructor(){this._modalId="ai-writing-autofill-cell",this._toDestroyCollection=new H_}static pluginModule(){return pd().register(this)}static registerConfiguration(e){e.registerConfiguration({id:"aiWriting",type:"object",properties:{enable:{type:"boolean",description:"是否允许使用文本 AI 助手"}}}),e.registerDefaultValue({"aiWriting.enable":!1})}get isGridView(){var e;return(null==(e=this._readService.getActiveView())?void 0:e.get("type"))===BC.GRID}get isReadonly(){return this._abilityService.isReadonly(EA.TABLE)}get isAiWritingEnable(){return!!this._configurationService.getValue("aiWriting.enable")}showAutofill(){var e;if(!this.isGridView)return;const t=this._selectionService.hasSelection(),n=this._selectionService.isSelectOneCell(),r=this._selectionService.getFieldValue(),o=null==(e=this._aiWritingService.getAiWritingConfig((null==r?void 0:r.fieldId)||""))?void 0:e.open;if(t&&n&&o){const e=this._renderContext.$root.querySelector(`.lakex-viewer-grid-cell[data-field-uuid="${null==r?void 0:r.fieldId}"][data-record-uuid="${null==r?void 0:r.recordId}"]`);e&&this._modalService.open(this._modalId,{position:{origin:e,placement:"top"},initialState:{fieldId:null==r?void 0:r.fieldId,recordId:null==r?void 0:r.recordId}})}else this._modalService.close(this._modalId)}init(){var e;if(this.isReadonly||!this.isAiWritingEnable||!this._selectionService)return;const t=this._selectionService.onChange((()=>{this.showAutofill()})),n=null==(e=this._gridCellEditService)?void 0:e.onEditingChange((({editing:e})=>{e?this._modalService.close(this._modalId):this.showAutofill()}));t&&this._toDestroyCollection.push(t),n&&this._toDestroyCollection.push(n)}destroy(){this._toDestroyCollection.destroy()}getConfigComponent(){return KZe}getColConfigNameComponent(){return JZe}registerContextMenu(e){e.registerItem({key:"autofillField",name:uw("重新填写本列内容"),icon:()=>l.a.createElement(sn.default,{width:16,height:16}),hotkey:"",visible:({from:e,fieldId:t})=>{var n;const r=null==(n=this._aiWritingService.getAiWritingConfig(t||""))?void 0:n.open;return!this.isReadonly&&e===_ke.HEADER&&this.isAiWritingEnable&&!!r},onClick:async({initialState:e,position:t})=>{const{fieldId:n}=e;!t||(this._modalService.close("context-menu-modal"),await this._aiWritingService.startAiWriting(n||""),g.a.success(uw("正在填写中...")))}})}registerModal(e){e.registerItem({id:"ai-writing-config-modal",hasMask:!1,scrollStrategy:"block",zIndex:"expandRecord",RenderComponent:YZe}),e.registerItem({id:this._modalId,hasMask:!1,scrollStrategy:"close",zIndex:"modalFromRender",disableClickAwayClose:!0,disableEscClose:!0,RenderComponent:XZe})}registerExpandRecord(e){e.registerRecordTooltip(ZZe)}};nQe.pluginName="workbench-ai-writing",tQe([Xs(Kse)],nQe.prototype,"_modalService",2),tQe([Xs(VA)],nQe.prototype,"_abilityService",2),tQe([Xs(R_)],nQe.prototype,"_configurationService",2),tQe([Xs(gHe)],nQe.prototype,"_aiWritingService",2),tQe([Xs(MI)],nQe.prototype,"_readService",2),tQe([Xs(cie)],nQe.prototype,"_renderContext",2),tQe([Xs(fye),Ds()],nQe.prototype,"_selectionService",2),tQe([Xs(HOe),Ds()],nQe.prototype,"_gridCellEditService",2),nQe=tQe([Ys({contrib:[L3,Yse,IEe,lDe,uDe,ARe]})],nQe);class rQe{constructor(e,t){this._ref=l.a.createRef(),this.el=e,this.options=t,this.render()}setContent(e){var t;null!=(t=this._ref)&&t.current&&this._ref.current.setValue(e.source)}getDefault(){return{format:"plain",source:""}}getContent(){var e,t;return{format:"plain",source:(null==(t=null==(e=this._ref)?void 0:e.current)?void 0:t.getValue())||""}}onFocus(e=(e=>{})){this._focusCallback=e}render(){c.a.render(l.a.createElement(s6,{ref:this._ref,allowEnter:!0,autoFocus:!!this.options.autoFocus,rows:4,defaultValue:this.options.defaultValue,autoComplete:"off",placeholder:this.options.placeholder,onChange:()=>{var e,t;null==(t=(e=this.options).onChange)||t.call(e)},onFocus:()=>{var e;null==(e=this._focusCallback)||e.call(this,!0)},onBlur:()=>{var e;null==(e=this._focusCallback)||e.call(this,!1)}}),this.el,(()=>{var e,t;null==(t=(e=this.options).onLoad)||t.call(e,this)}))}destroy(){c.a.unmountComponentAtNode(this.el)}}class oQe{constructor(e,t){this.el=e,this.options=t,this.render()}setContent(){}render(){c.a.render(l.a.createElement("div",null,this.options.defaultValue),this.el,(()=>{var e,t;null==(t=(e=this.options).onLoad)||t.call(e,this)}))}destroy(){c.a.unmountComponentAtNode(this.el)}}var iQe=Object.defineProperty,aQe=Object.getOwnPropertyDescriptor,lQe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?aQe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&iQe(t,n,i),i};let uQe=class{constructor(){this._editor=new Map,this._viewer=new Map}init(){const e=this.contentEditorProvider.getContributions();for(const t of e){const e=t.registerContentEditor();this._editor.has(e.format)||this._editor.set(e.format,e.Editor)}const t=this.contentViewerProvider.getContributions();for(const e of t){const t=e.registerContentViewer();this._viewer.has(t.format)||this._viewer.set(t.format,t.Viewer)}}getEditor(e){return this._editor.get(e)}getViewer(e){return this._viewer.get(e)}};lQe([bd(Q$e)],uQe.prototype,"contentEditorProvider",2),lQe([bd(eze)],uQe.prototype,"contentViewerProvider",2),uQe=lQe([Ys()],uQe);var cQe=Object.defineProperty,sQe=Object.getOwnPropertyDescriptor,dQe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?sQe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&cQe(t,n,i),i};let fQe=class{create(e,t){const n=this._configuration.getValue("content.defaultFormat"),r=this._contentRegistry.getEditor(n);return t.currentUser=this._contextService.currentUser,new r(e,t)}};dQe([Xs(qS)],fQe.prototype,"_contextService",2),dQe([Xs(uQe)],fQe.prototype,"_contentRegistry",2),dQe([Xs(R_)],fQe.prototype,"_configuration",2),fQe=dQe([Ys({token:oze})],fQe);var pQe=Object.defineProperty,hQe=Object.getOwnPropertyDescriptor,vQe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?hQe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&pQe(t,n,i),i};let gQe=class{create(e,t){const n=this._configuration.getValue("content.defaultFormat"),r=this._contentRegistry.getViewer(n);if(r)return new r(e,t)}};vQe([Xs(uQe)],gQe.prototype,"_contentRegistry",2),vQe([Xs(R_)],gQe.prototype,"_configuration",2),gQe=vQe([Ys({token:ize})],gQe);var mQe=Object.defineProperty,yQe=Object.getOwnPropertyDescriptor,bQe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?yQe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&mQe(t,n,i),i};let wQe=class{static pluginModule(){return pd().contribution(Q$e).contribution(eze).register(fQe).register(gQe).register(uQe).register(this)}static registerConfiguration(e){e.registerConfiguration({id:"content",type:"object",properties:{defaultFormat:{type:"string"},disableDatasource:{type:"boolean",description:"禁用 datasource"}}}),e.registerDefaultValue({"content.defaultFormat":"plain","content.disableDatasource":!1})}init(){this._contentRegistry.init()}registerContentEditor(){return{format:"plain",Editor:rQe}}registerContentViewer(){return{format:"plain",Viewer:oQe}}};wQe.pluginName="workbench-content",bQe([Xs(uQe)],wQe.prototype,"_contentRegistry",2),wQe=bQe([Ys({contrib:[L3,Q$e,eze]})],wQe);const _Qe=({recordId:e,isReadonly:t,isNewRecord:n})=>{const[r,o]=Object(a.useState)(!1),i=Object(a.useRef)(null),u=Object(a.useRef)(!1),c=Object(a.useRef)(!1),s=Object(a.useRef)(),d=Object(a.useRef)(),f=G3(R_),p=G3(oze,{optional:!0}),h=G3(ize,{optional:!0}),v=G3(rze),g=G3(uA),m=G3(MI),y=G3(nze),b=Hle((()=>{var t;const n=null==(t=s.current)?void 0:t.getContent();c.current=!1,n&&(null==g||g.execCommand("updateContent",{recordId:e,content:n}))}),1e3),w=Object(a.useCallback)((e=>{var t;null==(t=s.current)||t.setContent(e),setTimeout((()=>{u.current=!0}),100)}),[]),_=Object(a.useCallback)((e=>{!u.current||o(!!e)}),[]);Object(a.useEffect)((()=>{var t,r;const o=m.getTable();!(null==f?void 0:f.getValue("content.disableDatasource"))&&!n&&((null==(t=v.getContent(e,"record"))?void 0:t.toJSON())||null==(r=null==y?void 0:y.handleGet)||r.call(y,e,o.get("uuid")).then((t=>{if(!t)return;const n=t;v.setContentWithSlient(e,"record",n),d.current?d.current.setContent(n):w(t)})))}),[e]),Object(a.useEffect)((()=>{var r;if(i.current){if(t){const t=null==h?void 0:h.create(i.current,{defaultValue:(null==(r=v.getContent(e,"record"))?void 0:r.get("source"))||""});if(!t)return;return void(d.current=t)}s.current=null==p?void 0:p.create(i.current,{onLoad:()=>{var t,r,o;null==(t=s.current)||t.onFocus((e=>{_(e)}));try{let t=null==(r=v.getContent(e,"record"))?void 0:r.toJSON();if(!t&&n&&(t=null==(o=s.current)?void 0:o.getDefault()),!t)return;w(t)}catch(e){console.error("set text editor content error",e)}},onChange(){b(),c.current=!0}})}return()=>{var t;if(s.current&&c.current){const n=null==(t=s.current)?void 0:t.getContent();n&&(null==g||g.execCommand("updateContent",{recordId:e,content:n})),s.current.destroy()}}}),[]);const k=r?"lakex-table-record-desc-active":"lakex-table-record-desc-noactive";return l.a.createElement("div",{className:`lakex-table-record-desc ${k}`},l.a.createElement("div",{ref:i}))};var kQe=Object.defineProperty,CQe=Object.getOwnPropertyDescriptor;let EQe=class{static pluginModule(){return pd().register(this)}init(){}registerExpandRecord(e){e.registerRecordProvider({RenderComponent:_Qe})}};function OQe(e){return l.a.createElement("div",{...e,className:"lakex-table-loading-content"},l.a.createElement("div",{className:"lakex-table-loading-content-box"},l.a.createElement(m.a,null),l.a.createElement("p",null,uw("数据处理比较耗时，请耐心等待..."))))}EQe.pluginName="workbench-record-desc",EQe=((e,t,n,r)=>{for(var o,i=r>1?void 0:r?CQe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&kQe(t,n,i),i})([Ys({contrib:[L3,ARe]})],EQe);var SQe=Object.defineProperty,xQe=Object.getOwnPropertyDescriptor,jQe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?xQe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&SQe(t,n,i),i};let IQe=class extends $_{isExist(){return!!this._id}createModal(){this._id||(this._id=fw(6),this._container=document.createElement("div"),this._container.id="lakex-table-loading-container",document.body.appendChild(this._container),c.a.render(l.a.createElement(OQe,{id:this._id}),this._container))}closeModal(){var e,t,n;null==(n=null==(t=null==(e=this._container)?void 0:e.parentNode)?void 0:t.removeChild)||n.call(t,this._container),this._id=null}destroy(){this.closeModal()}};jQe([Vs()],IQe.prototype,"destroy",1),IQe=jQe([Ys()],IQe);var RQe=Object.defineProperty,AQe=Object.getOwnPropertyDescriptor,DQe=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?AQe(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&RQe(t,n,i),i};let PQe=class{static pluginModule(){return pd().register(this).register(IQe)}init(){this._syncQueue.onSyncChange((e=>{e.status===hHe.RUNNING?(clearTimeout(this._timerId),this._timerId=setTimeout((()=>{this._loadingModalService.createModal()}),2e3)):(clearTimeout(this._timerId),this._loadingModalService.isExist()&&(this._loadingModalService.closeModal(),e.status===hHe.SUCCESS&&g.a.success(uw("已完成"))))}))}destroy(){clearTimeout(this._timerId)}};PQe.pluginName="workbench-server",DQe([Xs(pHe)],PQe.prototype,"_syncQueue",2),DQe([Xs(IQe)],PQe.prototype,"_loadingModalService",2),PQe=DQe([Ys({contrib:[L3]})],PQe);const MQe=[UZe,GZe,TZe,LZe,nQe,wQe,EQe,PQe],TQe={token:yze,useValue:{registerComment(e){e.registerCommentDatasource({fetchComments:async e=>[]})}}},FQe=({webProxy:e})=>({token:zXe,useValue:{registerFormManage:()=>({async enableForm(t,n){let r;const o={scope:0,status:0,target_id:t,target_type:"Skythings.View",type:"form"};return r="create"===n?await e.shares.create(o):await e.shares.update(o),{src:`/forms/share/${r.token}`}}})}}),NQe=({webProxy:e})=>[TQe,FQe({webProxy:e})],VQe=({docId:e,docType:t,webProxy:n,webSdk:r,settings:o})=>({settings:Object.assign({},Oze({webSdk:r}),o),webSdk:r,webProxy:n}),LQe=[],BQe=Bqe.filter((e=>!LQe.includes(e.pluginName))),$Qe=[],zQe=kXe.filter((e=>!$Qe.includes(e.pluginName))),UQe=["workbench-full-width","workbench-full-screen","workbench-field-group"],HQe=MQe.filter((e=>!UQe.includes(e.pluginName))),qQe=[],WQe=[],GQe=[],KQe=e=>{var t;const n=VQe({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:e.settings}),r=null==(t=e.data)?void 0:t.records,o=$Me({...e,...n,workbenchPlugins:HQe,renderPlugins:zQe,kernelPlugins:BQe,workbenchContribs:[...qQe,...NQe({webProxy:e.webProxy}),...e.workbenchContribs||[]],renderContribs:[...WQe,...$Xe(n.settings),...e.renderContribs||[]],kernelContribs:[...GQe,...iYe({docId:e.docId,docType:e.docType,webSdk:e.webSdk,webProxy:e.webProxy,currentUser:e.currentUser}),...e.kernelContribs||[]],onRendered:()=>{e.onSyncChange&&o.getService(pHe).onSyncChange(e.onSyncChange)},onCollabUsersChange:e.onCollabUsersChange,onDataLoaded:async t=>{var i,a,l;if(r)return!1;if("loadedData"===t)try{const t=await e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:n.settings["record.maxCount"],offset:0,sheetId:o.tableId});if(null!=t&&t.users&&o.setUsers(t.users),null!=t&&t.records){o.setRecords(t.records);const e=o.getService(nze),n=o.getService(rze),r=t.records.map((e=>e.uuid));e&&(null==(i=null==e?void 0:e.handleGet)||i.call(e,r,o.tableId).then((e=>{Object.entries(e).forEach((([e,t])=>{t&&n.setContentWithSlient(e,"record",{html:t.html,source:t.source,format:t.format})}))})))}}catch{null==(a=e.onRecordLoaded)||a.call(e)}else"loadedRecords"===t&&(null==(l=e.onRecordLoaded)||l.call(e))}});return o},YQe=["kernel-history","kernel-collaboration","kernel-add-record","kernel-add-field"],XQe=Bqe.filter((e=>!YQe.includes(e.pluginName))),JQe=["render-history","render-refresh","render-upload"],ZQe=kXe.filter((e=>!JQe.includes(e.pluginName))),QQe=["workbench-add-record","workbench-add-field","workbench-viewer-form","workbench-viewer-form-manage","workbench-grid-cell-editor","workbench-full-width","workbench-full-screen","workbench-field-group"],e0e=MQe.filter((e=>!QQe.includes(e.pluginName))),t0e=e=>{var t;const n=VQe({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:e.settings}),r=null==(t=e.data)?void 0:t.records,o=function(e){var t,n,r=IMe({webSdk:e.webSdk,settings:e.settings||{}});try{n=new vfe(YMe(YMe(YMe({},e),r),{},{workbenchPlugins:[].concat(Vb(GMe),Vb(e.workbenchPlugins||[])),renderPlugins:[].concat(Vb(qMe),Vb(e.renderPlugins||[])),kernelPlugins:[].concat(Vb(UMe),Vb(e.kernelPlugins||[])),workbenchContribs:Vb(e.workbenchContribs||[]),renderContribs:Vb(e.renderContribs||[]),kernelContribs:Vb(e.kernelContribs||[])}))}catch(n){console.error(n),null==(t=e.onError)||t.call(e,n)}return n}({...e,...n,kernelPlugins:XQe,renderPlugins:ZQe,workbenchPlugins:e0e,renderContribs:[...$Xe(n.settings)],kernelContribs:[...iYe({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,currentUser:e.currentUser})],onDataLoaded:async t=>{var i,a,l;if(!r)if("loadedData"===t)try{const t=await e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:n.settings["record.maxCount"],offset:0,sheetId:o.tableId});if(null!=t&&t.users&&o.setUsers(t.users),null!=t&&t.records){o.setRecords(t.records);const e=o.getService(nze),n=o.getService(rze),r=t.records.map((e=>e.uuid));e&&(null==(i=null==e?void 0:e.handleGet)||i.call(e,r,o.tableId).then((e=>{Object.entries(e).forEach((([e,t])=>{t&&n.setContentWithSlient(e,"record",{html:t.html,source:t.source,format:t.format})}))})))}}catch{null==(a=e.onRecordLoaded)||a.call(e)}else"loadedRecords"===t&&(null==(l=e.onRecordLoaded)||l.call(e))}});return o},n0e=["kernel-statistics","kernel-selection","kernel-context-menu","kernel-history","kernel-collaboration","kernel-clipboard","kernel-add-record","kernel-add-field","kernel-viewer-form"],r0e=Bqe.filter((e=>!n0e.includes(e.pluginName))),o0e=["render-hotkey","render-selection","render-statistics","render-context-menu","render-history","render-group","render-clipboard","render-refresh","render-upload"],i0e=kXe.filter((e=>!o0e.includes(e.pluginName))),a0e=["workbench-hotkey","workbench-context-menu","workbench-statistics","workbench-add-record","workbench-add-field","workbench-viewer-form","workbench-viewer-form-manage","workbench-grid-cell-editor","workbench-full-width","workbench-full-screen","workbench-field-group"],l0e=MQe.filter((e=>!a0e.includes(e.pluginName))),u0e=[],c0e=[],s0e=[],d0e=e=>{const t=VQe({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:{...e.settings,"ability.table.update":!1,"ability.table.delete":!1,"ability.record.create":!1,"ability.record.update":!1,"ability.field.create":!1,"toolbar.mode":hse.LITE,"toolbar.topLeft":[],"toolbar.left":["view-manage"],"toolbar.right":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search"],"viewerManage.type":"menu","modal.mode":Gse.DRAWER,"render.mode":tie.MOBILE,"viewerGrid.stickyColNum":0,"expandRecord.modalDrawerModeViews":[]}}),n=$Me({...e,...t,workbenchPlugins:l0e,renderPlugins:i0e,kernelPlugins:r0e,workbenchContribs:[...u0e,...NQe({webProxy:e.webProxy}),...e.workbenchContribs||[]],renderContribs:[...c0e,...$Xe(t.settings),...e.renderContribs||[]],kernelContribs:[...s0e,...iYe({docId:e.docId,docType:e.docType,webSdk:e.webSdk,webProxy:e.webProxy,currentUser:e.currentUser}),...e.kernelContribs||[]],onDataLoaded:async r=>{var o,i,a;if("loadedData"===r)try{const r=await e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:t.settings["record.maxCount"],offset:0,sheetId:n.tableId});if(null!=r&&r.users&&n.setUsers(r.users),null!=r&&r.records){n.setRecords(r.records);const e=n.getService(nze),t=n.getService(rze),i=r.records.map((e=>e.uuid));e&&(null==(o=null==e?void 0:e.handleGet)||o.call(e,i,n.tableId).then((e=>{Object.entries(e).forEach((([e,n])=>{n&&t.setContentWithSlient(e,"record",{html:n.html,source:n.source,format:n.format})}))})))}}catch{null==(i=e.onRecordLoaded)||i.call(e)}else"loadedRecords"===r&&(null==(a=e.onRecordLoaded)||a.call(e))}});return n},f0e=[...Spe.filter((e=>["kernel-field-text","kernel-field-select","kernel-field-multi-select","kernel-field-number","kernel-field-mention","kernel-field-date","kernel-field-checkbox","kernel-field-image","kernel-field-file","kernel-field-link","kernel-field-email","kernel-field-phone","kernel-field-title","kernel-field-rate","kernel-field-progress","kernel-process","kernel-user"].includes(e.pluginName))),Yze],p0e=Ts.defineToken("ViewerFormShareContribution"),h0e=({viewField:e,rules:t,FieldComponent:n,validateTrigger:r=["onBlur","onChange"]})=>{var o,i;const a=`lakex-form-form-viewer-${null==(o=e.get("field"))?void 0:o.get("type")}`;return l.a.createElement("div",{className:`${a} ${Kk.isMobile?a+"-h5":""}`},l.a.createElement(k.a.Item,{name:null==(i=e.get("field"))?void 0:i.get("uuid"),rules:t,validateTrigger:r,noStyle:!0},l.a.createElement(n,{viewField:e})))};var v0e=Object.defineProperty,g0e=Object.getOwnPropertyDescriptor,m0e=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?g0e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&v0e(t,n,i),i};let y0e=class{getProvider(){const e=this.formManageProvider.getContributions();return e[e.length-1].registerFormShare()}submitForm(e){return this.getProvider().submitForm(e)}};m0e([bd(p0e)],y0e.prototype,"formManageProvider",2),y0e=m0e([Ys()],y0e);var b0e=Object.defineProperty,w0e=Object.getOwnPropertyDescriptor,_0e=(e,t,n,r)=>{for(var o,i=r>1?void 0:r?w0e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&b0e(t,n,i),i};function k0e(e){return function(...t){return new Promise((function(n,r){const o=e.apply(this,t);o?n(o):r(o)}))}}let C0e=class{constructor(){this.getFormComponent=e=>this._fieldService.getFieldFormComponent(e),this.getFormFieldRules=e=>{var t,n;const r=null==(n=(t=this._fieldService).getFieldRules)?void 0:n.call(t,e),o=[];return r&&Array.isArray(r)&&r.forEach((e=>{o.push({validator:k0e(e.validator),message:e.errorMsg})})),o}}async submit(e){const t=e.reduce(((e,t)=>(e[t.fieldId]=this._toProcess.toValue(t),e)),{});await this._viewerFormShareRegistry.getProvider().submitForm(t)}};_0e([Xs(bD)],C0e.prototype,"_toProcess",2),_0e([Xs(Cie)],C0e.prototype,"_fieldService",2),_0e([Xs(y0e)],C0e.prototype,"_viewerFormShareRegistry",2),C0e=_0e([Ys()],C0e);const E0e=l.a.forwardRef(((e,t)=>{const{state:n,view:r,viewFields:o,handleSubmit:i,getFormComponent:u,getFormFieldRules:c}=(()=>{const e=jpe(),t=G3(qze),n=G3(C0e),r=null==t?void 0:t.getFormEditData(e.get("uuid")),[o]=k.a.useForm(),[i,l]=Object(a.useState)(!1),[u,c]=Object(a.useState)(!1);return Object(a.useEffect)((()=>{function e(e){const t=o.getFieldsValue();Object.values(t).some((e=>void 0!==e))&&!u&&(e.preventDefault(),e.returnValue="")}return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)}),[u]),{state:{loading:i,formState:o},viewFields:(null==r?void 0:r.viewFields)||[],view:null==r?void 0:r.view,handleSubmit:e=>{if(i)return!1;l(!0),c(!0);const t=Object.keys(e),r=[];for(const n of t)r.push({fieldId:n,value:e[n]});null==n||n.submit(r).then((()=>{l(!1)})).catch((e=>{l(!1)}))},getFormComponent:e=>null==n?void 0:n.getFormComponent(e),getFormFieldRules:e=>null==n?void 0:n.getFormFieldRules(e)}})(),s="lakex-viewer-form";return l.a.createElement("div",{ref:t,className:`${s} ${Kk.isMobile?s+"-h5":""}`},l.a.createElement("h1",{className:`${s}-title`},null==r?void 0:r.get("name")),l.a.createElement("div",null,l.a.createElement("div",{className:`${s}-desc`},null==r?void 0:r.get("desc")),l.a.createElement("div",{className:`${s}-rule`},l.a.createElement("span",{className:`${s}-required`},"*"),uw("为必填项"))),l.a.createElement(k.a,{form:n.formState,layout:"vertical",className:`${s}-list`,onFinish:i,scrollToFirstError:!0},E_(o,((e,t)=>{var n;const r=null==(n=e.get("field"))?void 0:n.get("type");if(!r)return null;const o=u(r);if(!o)return null;const i=e.get("required");let a=`${t+1}.${e.get("name")}`;const d=c(r)||[];if(i&&d.push({required:i,message:uw("请输入必填项")}),zC.isSelectLike(r)){const e=zC.isSelect(r)?uw("单选"):uw("多选");a=l.a.createElement("span",null,a,l.a.createElement("span",{className:`${s}-lable`},"(",e,")"))}return l.a.createElement(k.a.Item,{key:e.get("uuid"),label:a,required:i},l.a.createElement(h0e,{viewField:e,rules:d,FieldComponent:o}))})),l.a.createElement(k.a.Item,null,l.a.createElement(b.a,{type:"primary",htmlType:"submit",size:"large",disabled:n.loading},uw("提交")))))}));class O0e extends Ole{constructor(){super(...arguments),this.viewType=BC.FORM,this.title=uw("表单视图"),this.desc="",this.icon=e=>l.a.createElement(g6,{type:"FormView",...e}),this.colorCls="yuque-color-orange-5",this.Component=E0e}}var S0e=Object.defineProperty,x0e=Object.getOwnPropertyDescriptor;let j0e=class{static pluginModule(){return pd().contribution(p0e).register(C0e).register(y0e).register(this)}init(){}registerViewer(e){e.registerItem(new O0e({onError:e.onError}))}};j0e.pluginName="render-viewer-form-share",j0e=((e,t,n,r)=>{for(var o,i=r>1?void 0:r?x0e(t,n):t,a=e.length-1;a>=0;a--)(o=e[a])&&(i=(r?o(t,n,i):o(i))||i);return r&&i&&S0e(t,n,i),i})([Ys({contrib:[Qoe,oie]})],j0e);const I0e=[...Gje.filter((e=>["render-field-text","render-field-select","render-field-multi-select","render-field-number","render-field-mention","render-field-date","render-field-checkbox","render-field-image","render-field-file","render-field-link","render-field-email","render-field-phone","render-field-title","render-field-rate","render-field-progress","render-opener"].includes(e.pluginName))),j0e,YYe],R0e=[TZe],A0e=()=>{var e,t;return{"render.noRecord":!0,"upload.image.url":`/api/tables/upload?type=image&token=${null==(e=wze("share"))?void 0:e.token}`,"upload.image.quickUrl":"","upload.file.url":`/api/tables/upload?type=attachment&token=${null==(t=wze("share"))?void 0:t.token}`,"upload.file.quickUrl":""}},D0e=({webProxy:e})=>({token:p0e,useValue:{registerFormShare:()=>({async submitForm(t){var n;try{await e.tables.submitRecord({token:null==(n=wze("share"))?void 0:n.token,type:"FORM",data:[{data:JSON.stringify(t)}]},{ignoreGlobalMessage:!0}),g.a.success(uw("表单提交成功"),.8),g.a.destroy(),window.location.href+="/success"}catch(e){console.error(e),g.a.error(uw("表单提交失败，请稍后重试"))}}})}}),P0e=e=>{const t=VQe({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:{...A0e(),...e.settings,"ability.table.update":!1,"ability.table.delete":!1}});return new vfe({...e,...t,renderPlugins:I0e,kernelPlugins:f0e,workbenchPlugins:R0e,renderContribs:[...$Xe(t.settings),D0e({webProxy:e.webProxy})],kernelContribs:[...iYe({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,currentUser:Eze.me})]})},M0e=[],T0e=Bqe.filter((e=>!M0e.includes(e.pluginName))),F0e=[],N0e=kXe.filter((e=>!F0e.includes(e.pluginName))),V0e=["workbench-field-group"],L0e=MQe.filter((e=>!V0e.includes(e.pluginName))),B0e=[],$0e=[],z0e=[],U0e=e=>{var t;const n=VQe({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:{"opener.useHash":!1,"view.useWindowScroll":!0,"toolbar.topLeft":[],"toolbar.left":["view-manage"],"toolbar.right":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","full-width","full-screen","search","|","add-record"],"toolbar.mode":hse.LITE,"modal.mode":Gse.MODAL,"viewerManage.type":"menu","viewerManage.viewTypes":[BC.GRID,BC.CARD,BC.CALENDAR,BC.KANBAN],"expandRecord.modalDrawerModeViews":[],"render.autoActive":!1,"render.deferMode":nie.DISABLE,...e.settings}}),r=null==(t=e.data)?void 0:t.records,o=$Me({...e,...n,renderPlugins:N0e,kernelPlugins:T0e,workbenchPlugins:L0e,workbenchContribs:[...B0e,...NQe({webProxy:e.webProxy}),...e.workbenchContribs||[]],renderContribs:[...$0e,...$Xe(n.settings),...e.renderContribs||[]],kernelContribs:[...z0e,...iYe({docId:e.docId,docType:e.docType,webSdk:e.webSdk,webProxy:e.webProxy,currentUser:e.currentUser}),...e.kernelContribs||[]],onDataLoaded:async t=>{var i,a,l;if(r)return!1;if("loadedData"===t)try{const t=await e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:n.settings["record.maxCount"],offset:0,sheetId:e.data.sheet[0].id});if(null!=t&&t.users&&o.setUsers(t.users),null!=t&&t.records){o.setRecords(t.records);const e=o.getService(nze),n=o.getService(rze),r=t.records.map((e=>e.uuid));e&&(null==(i=null==e?void 0:e.handleGet)||i.call(e,r,o.tableId).then((e=>{Object.entries(e).forEach((([e,t])=>{t&&n.setContentWithSlient(e,"record",{html:t.html,source:t.source,format:t.format})}))})))}}catch{null==(a=e.onRecordLoaded)||a.call(e)}else"loadedRecords"===t&&(null==(l=e.onRecordLoaded)||l.call(e))}});return o},H0e=[],q0e=Bqe.filter((e=>!H0e.includes(e.pluginName))),W0e=[],G0e=kXe.filter((e=>!W0e.includes(e.pluginName))),K0e=["workbench-field-group"],Y0e=MQe.filter((e=>!K0e.includes(e.pluginName))),X0e=[],J0e=[],Z0e=[],Q0e=e=>{var t;const n=VQe({docId:e.docId,docType:e.docType,webProxy:e.webProxy,webSdk:e.webSdk,settings:{...e.settings,"ability.table.create":!1,"ability.table.delete":!1,"ability.table.read":!0,"ability.table.update":!1,"opener.useHash":!1,"view.useWindowScroll":!0,"toolbar.topLeft":[],"toolbar.left":["view-manage"],"toolbar.right":["calendar-setting","kanban-group-setting","view-field-setting","filter","grid-group","sort","grid-record-height","search"],"toolbar.mode":hse.LITE,"modal.mode":Gse.DRAWER,"render.mode":tie.MOBILE,"viewerManage.type":"menu","viewerManage.viewTypes":[BC.GRID,BC.CARD,BC.CALENDAR,BC.KANBAN],"expandRecord.modalDrawerModeViews":[],"render.autoActive":!1,"render.deferMode":nie.DISABLE,"viewerGrid.stickyColNum":0}}),r=null==(t=e.data)?void 0:t.records,o=$Me({...e,...n,renderPlugins:G0e,kernelPlugins:q0e,workbenchPlugins:Y0e,workbenchContribs:[...X0e,...NQe({webProxy:e.webProxy}),...e.workbenchContribs||[]],renderContribs:[...J0e,...$Xe(n.settings),...e.renderContribs||[]],kernelContribs:[...Z0e,...iYe({docId:e.docId,docType:e.docType,webSdk:e.webSdk,webProxy:e.webProxy,currentUser:e.currentUser}),...e.kernelContribs||[]],onDataLoaded:async t=>{var i,a,l;if(r)return!1;if("loadedData"===t)try{const t=await e.webSdk.TableRecordController.show({docId:e.docId,docType:e.docType,limit:n.settings["record.maxCount"],offset:0,sheetId:e.data.sheet[0].id});if(null!=t&&t.users&&o.setUsers(t.users),null!=t&&t.records){o.setRecords(t.records);const e=o.getService(nze),n=o.getService(rze),r=t.records.map((e=>e.uuid));e&&(null==(i=null==e?void 0:e.handleGet)||i.call(e,r,o.tableId).then((e=>{Object.entries(e).forEach((([e,t])=>{t&&n.setContentWithSlient(e,"record",{html:t.html,source:t.source,format:t.format})}))})))}}catch{null==(a=e.onRecordLoaded)||a.call(e)}else"loadedRecords"===t&&(null==(l=e.onRecordLoaded)||l.call(e))}});return o}}.call(this,n(92),n(3955)(e))}}]);