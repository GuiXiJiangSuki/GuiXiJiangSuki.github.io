/*! For license information please see c__BookManage~c__CatalogItemActions~c__CatalogModule~c__DashboardBooks~c__DashboardRecycles~c__DocEd~ae5a8e4e.d7840173.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1422:function(t,e,r){"use strict";var n=r(70),i=r.n(n),a=r(61),o=r.n(a),c=r(507),s=r.n(c),h=r(531),l=r.n(h),u=r(568),p=r.n(u),f=r(941),d=r.n(f),m=r(569),v=r.n(m),g=r(0),y=r.n(g),b=r(2),w=r.n(b),x=r(2753),O=r.n(x),E=(r(2742),["width","height"]);function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=v()(t);if(e){var i=v()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d()(this,r)}}var M=["aspectRatio","preview","viewMode","dragMode","guides","autoCropArea","checkCrossOrigin"],S=function(t){p()(r,t);var e=j(r);function r(){return s()(this,r),e.apply(this,arguments)}return l()(r,[{key:"componentDidMount",value:function(){var t=this,e=Object.keys(this.props).filter((function(t){return M.indexOf(t)>=0})).reduce((function(e,r){return Object.assign({},e,o()({},r,t.props[r]))}),{});this.cropper=new O.a(this.img,e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){t.src!==this.props.src&&this.cropper.reset().clear().replace(t.src)}},{key:"componentWillUnmount",value:function(){this.img&&(this.cropper.destroy(),delete this.img,delete this.cropper)}},{key:"getCroppedCanvas",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props,r=e.containerWidth,n=e.cropWidth,a=e.aspectRatio,c=t.width||n||r,s=t.height||c/a,h=t.width,l=void 0===h?c:h,u=t.height,p=void 0===u?s:u,f=i()(t,E);return this.cropper.getCroppedCanvas(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({width:l,height:p},f))}},{key:"render",value:function(){var t=this,e=this.props,r=e.className,n=e.containerWidth,i=e.containerHeight,a=e.aspectRatio,o=e.src,c=e.alt,s=e.crossOrigin,h=i||n/a;return y.a.createElement("div",{style:{width:n,height:h},className:r},y.a.createElement("img",{ref:function(e){t.img=e},src:o,crossOrigin:s,alt:void 0===c?"picture":c,style:{opacity:0}}))}}]),r}(g.Component);S.propTypes={containerWidth:w.a.number.isRequired,containerHeight:w.a.number,src:w.a.string.isRequired,cropWidth:w.a.number,className:w.a.string,alt:w.a.string,crossOrigin:w.a.oneOf(["anonymous","use-credentials"]),aspectRatio:w.a.number,dragMode:w.a.oneOf(["crop","move","none"]),viewMode:w.a.oneOf([0,1,2,3]),preview:w.a.string,guides:w.a.bool,autoCropArea:w.a.number,checkCrossOrigin:w.a.bool},S.defaultProps={aspectRatio:4/3,dragMode:"move",viewMode:1,guides:!1,autoCropArea:1},e.a=S},1514:function(t,e,r){"use strict";var n=r(357);r.d(e,"a",(function(){return n.a}))},1673:function(t,e,r){"use strict";var n=r(1704);r.d(e,"a",(function(){return n.a}))},2753:function(t,e,r){t.exports=function(){"use strict";function t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function e(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function n(t){var e=r(t,"string");return"symbol"==typeof e?e:e+""}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}function c(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,r){return(e=n(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){return l(t)||u(t)||p(t)||d()}function l(t){if(Array.isArray(t))return f(t)}function u(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function p(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var m="undefined"!=typeof window&&void 0!==window.document,v=m?window:{},g=!(!m||!v.document.documentElement)&&"ontouchstart"in v.document.documentElement,y=!!m&&"PointerEvent"in v,b="cropper",w="all",x="crop",O="move",E="zoom",C="e",j="w",M="s",S="n",_="ne",D="nw",L="se",k="sw",N="".concat(b,"-crop"),P="".concat(b,"-disabled"),T="".concat(b,"-hidden"),R="".concat(b,"-hide"),A="".concat(b,"-invisible"),B="".concat(b,"-modal"),W="".concat(b,"-move"),z="".concat(b,"Action"),I="".concat(b,"Preview"),H="crop",Y="move",U="none",X="crop",F="cropend",G="cropmove",V="cropstart",q="dblclick",$=g?"touchstart":"mousedown",K=g?"touchmove":"mousemove",Q=g?"touchend touchcancel":"mouseup",Z=y?"pointerdown":$,J=y?"pointermove":K,tt=y?"pointerup pointercancel":Q,et="ready",rt="resize",nt="wheel",it="zoom",at="image/jpeg",ot=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ct=/^data:/,st=/^data:image\/jpeg;base64,/,ht=/^img|canvas$/i,lt=200,ut=100,pt={viewMode:0,dragMode:H,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:lt,minContainerHeight:ut,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ft='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',dt=Number.isNaN||v.isNaN;function mt(t){return"number"==typeof t&&!dt(t)}var vt=function(t){return t>0&&t<1/0};function gt(t){return void 0===t}function yt(t){return"object"===i(t)&&null!==t}var bt=Object.prototype.hasOwnProperty;function wt(t){if(!yt(t))return!1;try{var e=t.constructor,r=e.prototype;return e&&r&&bt.call(r,"isPrototypeOf")}catch(t){return!1}}function xt(t){return"function"==typeof t}var Ot=Array.prototype.slice;function Et(t){return Array.from?Array.from(t):Ot.call(t)}function Ct(t,e){return t&&xt(e)&&(Array.isArray(t)||mt(t.length)?Et(t).forEach((function(r,n){e.call(t,r,n,t)})):yt(t)&&Object.keys(t).forEach((function(r){e.call(t,t[r],r,t)}))),t}var jt=Object.assign||function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return yt(t)&&r.length>0&&r.forEach((function(e){yt(e)&&Object.keys(e).forEach((function(r){t[r]=e[r]}))})),t},Mt=/\.\d*(?:0|9){12}\d*$/;function St(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Mt.test(t)?Math.round(t*e)/e:t}var _t=/^width|height|left|top|marginLeft|marginTop$/;function Dt(t,e){var r=t.style;Ct(e,(function(t,e){_t.test(e)&&mt(t)&&(t="".concat(t,"px")),r[e]=t}))}function Lt(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function kt(t,e){if(e)if(mt(t.length))Ct(t,(function(t){kt(t,e)}));else if(t.classList)t.classList.add(e);else{var r=t.className.trim();r?r.indexOf(e)<0&&(t.className="".concat(r," ").concat(e)):t.className=e}}function Nt(t,e){e&&(mt(t.length)?Ct(t,(function(t){Nt(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function Pt(t,e,r){e&&(mt(t.length)?Ct(t,(function(t){Pt(t,e,r)})):r?kt(t,e):Nt(t,e))}var Tt=/([a-z\d])([A-Z])/g;function Rt(t){return t.replace(Tt,"$1-$2").toLowerCase()}function At(t,e){return yt(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Rt(e)))}function Bt(t,e,r){yt(r)?t[e]=r:t.dataset?t.dataset[e]=r:t.setAttribute("data-".concat(Rt(e)),r)}function Wt(t,e){if(yt(t[e]))try{delete t[e]}catch(r){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(r){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Rt(e)))}var zt=/\s\s*/,It=function(){var t=!1;if(m){var e=!1,r=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});v.addEventListener("test",r,n),v.removeEventListener("test",r,n)}return t}();function Ht(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r;e.trim().split(zt).forEach((function(e){if(!It){var a=t.listeners;a&&a[e]&&a[e][r]&&(i=a[e][r],delete a[e][r],0===Object.keys(a[e]).length&&delete a[e],0===Object.keys(a).length&&delete t.listeners)}t.removeEventListener(e,i,n)}))}function Yt(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r;e.trim().split(zt).forEach((function(e){if(n.once&&!It){var a=t.listeners,o=void 0===a?{}:a;i=function(){delete o[e][r],t.removeEventListener(e,i,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];r.apply(t,c)},o[e]||(o[e]={}),o[e][r]&&t.removeEventListener(e,o[e][r],n),o[e][r]=i,t.listeners=o}t.addEventListener(e,i,n)}))}function Ut(t,e,r){var n;return xt(Event)&&xt(CustomEvent)?n=new CustomEvent(e,{detail:r,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,r),t.dispatchEvent(n)}function Xt(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ft=v.location,Gt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Vt(t){var e=t.match(Gt);return null!==e&&(e[1]!==Ft.protocol||e[2]!==Ft.hostname||e[3]!==Ft.port)}function qt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function $t(t){var e=t.rotate,r=t.scaleX,n=t.scaleY,i=t.translateX,a=t.translateY,o=[];mt(i)&&0!==i&&o.push("translateX(".concat(i,"px)")),mt(a)&&0!==a&&o.push("translateY(".concat(a,"px)")),mt(e)&&0!==e&&o.push("rotate(".concat(e,"deg)")),mt(r)&&1!==r&&o.push("scaleX(".concat(r,")")),mt(n)&&1!==n&&o.push("scaleY(".concat(n,")"));var c=o.length?o.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function Kt(t){var r=e({},t),n=0;return Ct(t,(function(t,e){delete r[e],Ct(r,(function(e){var r=Math.abs(t.startX-e.startX),i=Math.abs(t.startY-e.startY),a=Math.abs(t.endX-e.endX),o=Math.abs(t.endY-e.endY),c=Math.sqrt(r*r+i*i),s=(Math.sqrt(a*a+o*o)-c)/c;Math.abs(s)>Math.abs(n)&&(n=s)}))})),n}function Qt(t,r){var n=t.pageX,i=t.pageY,a={endX:n,endY:i};return r?a:e({startX:n,startY:i},a)}function Zt(t){var e=0,r=0,n=0;return Ct(t,(function(t){var i=t.startX,a=t.startY;e+=i,r+=a,n+=1})),{pageX:e/=n,pageY:r/=n}}function Jt(t){var e=t.aspectRatio,r=t.height,n=t.width,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",a=vt(n),o=vt(r);if(a&&o){var c=r*e;"contain"===i&&c>n||"cover"===i&&c<n?r=n/e:n=r*e}else a?r=n/e:o&&(n=r*e);return{width:n,height:r}}function te(t){var e=t.width,r=t.height,n=t.degree;if(90==(n=Math.abs(n)%180))return{width:r,height:e};var i=n%90*Math.PI/180,a=Math.sin(i),o=Math.cos(i),c=e*o+r*a,s=e*a+r*o;return n>90?{width:s,height:c}:{width:c,height:s}}function ee(t,e,r,n){var i=e.aspectRatio,a=e.naturalWidth,o=e.naturalHeight,c=e.rotate,s=void 0===c?0:c,l=e.scaleX,u=void 0===l?1:l,p=e.scaleY,f=void 0===p?1:p,d=r.aspectRatio,m=r.naturalWidth,v=r.naturalHeight,g=n.fillColor,y=void 0===g?"transparent":g,b=n.imageSmoothingEnabled,w=void 0===b||b,x=n.imageSmoothingQuality,O=void 0===x?"low":x,E=n.maxWidth,C=void 0===E?1/0:E,j=n.maxHeight,M=void 0===j?1/0:j,S=n.minWidth,_=void 0===S?0:S,D=n.minHeight,L=void 0===D?0:D,k=document.createElement("canvas"),N=k.getContext("2d"),P=Jt({aspectRatio:d,width:C,height:M}),T=Jt({aspectRatio:d,width:_,height:L},"cover"),R=Math.min(P.width,Math.max(T.width,m)),A=Math.min(P.height,Math.max(T.height,v)),B=Jt({aspectRatio:i,width:C,height:M}),W=Jt({aspectRatio:i,width:_,height:L},"cover"),z=Math.min(B.width,Math.max(W.width,a)),I=Math.min(B.height,Math.max(W.height,o)),H=[-z/2,-I/2,z,I];return k.width=St(R),k.height=St(A),N.fillStyle=y,N.fillRect(0,0,R,A),N.save(),N.translate(R/2,A/2),N.rotate(s*Math.PI/180),N.scale(u,f),N.imageSmoothingEnabled=w,N.imageSmoothingQuality=O,N.drawImage.apply(N,[t].concat(h(H.map((function(t){return Math.floor(St(t))}))))),N.restore(),k}var re=String.fromCharCode;function ne(t,e,r){var n="";r+=e;for(var i=e;i<r;i+=1)n+=re(t.getUint8(i));return n}var ie=/^data:.*,/;function ae(t){var e=t.replace(ie,""),r=atob(e),n=new ArrayBuffer(r.length),i=new Uint8Array(n);return Ct(i,(function(t,e){i[e]=r.charCodeAt(e)})),n}function oe(t,e){for(var r=[],n=8192,i=new Uint8Array(t);i.length>0;)r.push(re.apply(null,Et(i.subarray(0,n)))),i=i.subarray(n);return"data:".concat(e,";base64,").concat(btoa(r.join("")))}function ce(t){var e,r=new DataView(t);try{var n,i,a;if(255===r.getUint8(0)&&216===r.getUint8(1))for(var o=r.byteLength,c=2;c+1<o;){if(255===r.getUint8(c)&&225===r.getUint8(c+1)){i=c;break}c+=1}if(i){var s=i+10;if("Exif"===ne(r,i+4,4)){var h=r.getUint16(s);if(((n=18761===h)||19789===h)&&42===r.getUint16(s+2,n)){var l=r.getUint32(s+4,n);l>=8&&(a=s+l)}}}if(a){var u,p,f=r.getUint16(a,n);for(p=0;p<f;p+=1)if(u=a+12*p+2,274===r.getUint16(u,n)){u+=8,e=r.getUint16(u,n),r.setUint16(u,1,n);break}}}catch(t){e=1}return e}function se(t){var e=0,r=1,n=1;switch(t){case 2:r=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,r=-1;break;case 8:e=-90}return{rotate:e,scaleX:r,scaleY:n}}var he={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,r=this.container,n=this.cropper,i=Number(e.minContainerWidth),a=Number(e.minContainerHeight);kt(n,T),Nt(t,T);var o={width:Math.max(r.offsetWidth,i>=0?i:lt),height:Math.max(r.offsetHeight,a>=0?a:ut)};this.containerData=o,Dt(n,{width:o.width,height:o.height}),kt(t,T),Nt(n,T)},initCanvas:function(){var t=this.containerData,e=this.imageData,r=this.options.viewMode,n=Math.abs(e.rotate)%180==90,i=n?e.naturalHeight:e.naturalWidth,a=n?e.naturalWidth:e.naturalHeight,o=i/a,c=t.width,s=t.height;t.height*o>t.width?3===r?c=t.height*o:s=t.width/o:3===r?s=t.width/o:c=t.height*o;var h={aspectRatio:o,naturalWidth:i,naturalHeight:a,width:c,height:s};this.canvasData=h,this.limited=1===r||2===r,this.limitCanvas(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.left=(t.width-h.width)/2,h.top=(t.height-h.height)/2,h.oldLeft=h.left,h.oldTop=h.top,this.initialCanvasData=jt({},h)},limitCanvas:function(t,e){var r=this.options,n=this.containerData,i=this.canvasData,a=this.cropBoxData,o=r.viewMode,c=i.aspectRatio,s=this.cropped&&a;if(t){var h=Number(r.minCanvasWidth)||0,l=Number(r.minCanvasHeight)||0;o>1?(h=Math.max(h,n.width),l=Math.max(l,n.height),3===o&&(l*c>h?h=l*c:l=h/c)):o>0&&(h?h=Math.max(h,s?a.width:0):l?l=Math.max(l,s?a.height:0):s&&(h=a.width,(l=a.height)*c>h?h=l*c:l=h/c));var u=Jt({aspectRatio:c,width:h,height:l});h=u.width,l=u.height,i.minWidth=h,i.minHeight=l,i.maxWidth=1/0,i.maxHeight=1/0}if(e)if(o>(s?0:1)){var p=n.width-i.width,f=n.height-i.height;i.minLeft=Math.min(0,p),i.minTop=Math.min(0,f),i.maxLeft=Math.max(0,p),i.maxTop=Math.max(0,f),s&&this.limited&&(i.minLeft=Math.min(a.left,a.left+(a.width-i.width)),i.minTop=Math.min(a.top,a.top+(a.height-i.height)),i.maxLeft=a.left,i.maxTop=a.top,2===o&&(i.width>=n.width&&(i.minLeft=Math.min(0,p),i.maxLeft=Math.max(0,p)),i.height>=n.height&&(i.minTop=Math.min(0,f),i.maxTop=Math.max(0,f))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=n.width,i.maxTop=n.height},renderCanvas:function(t,e){var r=this.canvasData,n=this.imageData;if(e){var i=te({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),a=i.width,o=i.height,c=r.width*(a/r.naturalWidth),s=r.height*(o/r.naturalHeight);r.left-=(c-r.width)/2,r.top-=(s-r.height)/2,r.width=c,r.height=s,r.aspectRatio=a/o,r.naturalWidth=a,r.naturalHeight=o,this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCanvas(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,Dt(this.canvas,jt({width:r.width,height:r.height},$t({translateX:r.left,translateY:r.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,r=this.imageData,n=r.naturalWidth*(e.width/e.naturalWidth),i=r.naturalHeight*(e.height/e.naturalHeight);jt(r,{width:n,height:i,left:(e.width-n)/2,top:(e.height-i)/2}),Dt(this.image,jt({width:r.width,height:r.height},$t(jt({translateX:r.left,translateY:r.top},r)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,r=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,i={width:e.width,height:e.height};r&&(e.height*r>e.width?i.height=i.width/r:i.width=i.height*r),this.cropBoxData=i,this.limitCropBox(!0,!0),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),i.width=Math.max(i.minWidth,i.width*n),i.height=Math.max(i.minHeight,i.height*n),i.left=e.left+(e.width-i.width)/2,i.top=e.top+(e.height-i.height)/2,i.oldLeft=i.left,i.oldTop=i.top,this.initialCropBoxData=jt({},i)},limitCropBox:function(t,e){var r=this.options,n=this.containerData,i=this.canvasData,a=this.cropBoxData,o=this.limited,c=r.aspectRatio;if(t){var s=Number(r.minCropBoxWidth)||0,h=Number(r.minCropBoxHeight)||0,l=o?Math.min(n.width,i.width,i.width+i.left,n.width-i.left):n.width,u=o?Math.min(n.height,i.height,i.height+i.top,n.height-i.top):n.height;s=Math.min(s,n.width),h=Math.min(h,n.height),c&&(s&&h?h*c>s?h=s/c:s=h*c:s?h=s/c:h&&(s=h*c),u*c>l?u=l/c:l=u*c),a.minWidth=Math.min(s,l),a.minHeight=Math.min(h,u),a.maxWidth=l,a.maxHeight=u}e&&(o?(a.minLeft=Math.max(0,i.left),a.minTop=Math.max(0,i.top),a.maxLeft=Math.min(n.width,i.left+i.width)-a.width,a.maxTop=Math.min(n.height,i.top+i.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=n.width-a.width,a.maxTop=n.height-a.height))},renderCropBox:function(){var t=this.options,e=this.containerData,r=this.cropBoxData;(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft),(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),this.limitCropBox(!1,!0),r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft),r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop),r.oldLeft=r.left,r.oldTop=r.top,t.movable&&t.cropBoxMovable&&Bt(this.face,z,r.width>=e.width&&r.height>=e.height?O:w),Dt(this.cropBox,jt({width:r.width,height:r.height},$t({translateX:r.left,translateY:r.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ut(this.element,X,this.getData())}},le={initPreview:function(){var t=this.element,e=this.crossOrigin,r=this.options.preview,n=e?this.crossOriginUrl:this.url,i=t.alt||"The image to preview",a=document.createElement("img");if(e&&(a.crossOrigin=e),a.src=n,a.alt=i,this.viewBox.appendChild(a),this.viewBoxImage=a,r){var o=r;"string"==typeof r?o=t.ownerDocument.querySelectorAll(r):r.querySelector&&(o=[r]),this.previews=o,Ct(o,(function(t){var r=document.createElement("img");Bt(t,I,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(r.crossOrigin=e),r.src=n,r.alt=i,r.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(r)}))}},resetPreview:function(){Ct(this.previews,(function(t){var e=At(t,I);Dt(t,{width:e.width,height:e.height}),t.innerHTML=e.html,Wt(t,I)}))},preview:function(){var t=this.imageData,e=this.canvasData,r=this.cropBoxData,n=r.width,i=r.height,a=t.width,o=t.height,c=r.left-e.left-t.left,s=r.top-e.top-t.top;this.cropped&&!this.disabled&&(Dt(this.viewBoxImage,jt({width:a,height:o},$t(jt({translateX:-c,translateY:-s},t)))),Ct(this.previews,(function(e){var r=At(e,I),h=r.width,l=r.height,u=h,p=l,f=1;n&&(p=i*(f=h/n)),i&&p>l&&(u=n*(f=l/i),p=l),Dt(e,{width:u,height:p}),Dt(e.getElementsByTagName("img")[0],jt({width:a*f,height:o*f},$t(jt({translateX:-c*f,translateY:-s*f},t))))})))}},ue={bind:function(){var t=this.element,e=this.options,r=this.cropper;xt(e.cropstart)&&Yt(t,V,e.cropstart),xt(e.cropmove)&&Yt(t,G,e.cropmove),xt(e.cropend)&&Yt(t,F,e.cropend),xt(e.crop)&&Yt(t,X,e.crop),xt(e.zoom)&&Yt(t,it,e.zoom),Yt(r,Z,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&Yt(r,nt,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Yt(r,q,this.onDblclick=this.dblclick.bind(this)),Yt(t.ownerDocument,J,this.onCropMove=this.cropMove.bind(this)),Yt(t.ownerDocument,tt,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&Yt(window,rt,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,r=this.cropper;xt(e.cropstart)&&Ht(t,V,e.cropstart),xt(e.cropmove)&&Ht(t,G,e.cropmove),xt(e.cropend)&&Ht(t,F,e.cropend),xt(e.crop)&&Ht(t,X,e.crop),xt(e.zoom)&&Ht(t,it,e.zoom),Ht(r,Z,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Ht(r,nt,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Ht(r,q,this.onDblclick),Ht(t.ownerDocument,J,this.onCropMove),Ht(t.ownerDocument,tt,this.onCropEnd),e.responsive&&Ht(window,rt,this.onResize)}},pe={resize:function(){if(!this.disabled){var t,e,r=this.options,n=this.container,i=this.containerData,a=n.offsetWidth/i.width,o=n.offsetHeight/i.height,c=Math.abs(a-1)>Math.abs(o-1)?a:o;1!==c&&(r.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),r.restore&&(this.setCanvasData(Ct(t,(function(e,r){t[r]=e*c}))),this.setCropBoxData(Ct(e,(function(t,r){e[r]=t*c})))))}},dblclick:function(){this.disabled||this.options.dragMode===U||this.setDragMode(Lt(this.dragBox,N)?Y:H)},wheel:function(t){var e=this,r=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*r,t)))},cropStart:function(t){var e=t.buttons,r=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(mt(e)&&1!==e||mt(r)&&0!==r||t.ctrlKey))){var n,i=this.options,a=this.pointers;t.changedTouches?Ct(t.changedTouches,(function(t){a[t.identifier]=Qt(t)})):a[t.pointerId||0]=Qt(t),n=Object.keys(a).length>1&&i.zoomable&&i.zoomOnTouch?E:At(t.target,z),ot.test(n)&&!1!==Ut(this.element,V,{originalEvent:t,action:n})&&(t.preventDefault(),this.action=n,this.cropping=!1,n===x&&(this.cropping=!0,kt(this.dragBox,B)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var r=this.pointers;t.preventDefault(),!1!==Ut(this.element,G,{originalEvent:t,action:e})&&(t.changedTouches?Ct(t.changedTouches,(function(t){jt(r[t.identifier]||{},Qt(t,!0))})):jt(r[t.pointerId||0]||{},Qt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,r=this.pointers;t.changedTouches?Ct(t.changedTouches,(function(t){delete r[t.identifier]})):delete r[t.pointerId||0],e&&(t.preventDefault(),Object.keys(r).length||(this.action=""),this.cropping&&(this.cropping=!1,Pt(this.dragBox,B,this.cropped&&this.options.modal)),Ut(this.element,F,{originalEvent:t,action:e}))}}},fe={change:function(t){var e,r=this.options,n=this.canvasData,i=this.containerData,a=this.cropBoxData,o=this.pointers,c=this.action,s=r.aspectRatio,h=a.left,l=a.top,u=a.width,p=a.height,f=h+u,d=l+p,m=0,v=0,g=i.width,y=i.height,b=!0;!s&&t.shiftKey&&(s=u&&p?u/p:1),this.limited&&(m=a.minLeft,v=a.minTop,g=m+Math.min(i.width,n.width,n.left+n.width),y=v+Math.min(i.height,n.height,n.top+n.height));var N=o[Object.keys(o)[0]],P={x:N.endX-N.startX,y:N.endY-N.startY},R=function(t){switch(t){case C:f+P.x>g&&(P.x=g-f);break;case j:h+P.x<m&&(P.x=m-h);break;case S:l+P.y<v&&(P.y=v-l);break;case M:d+P.y>y&&(P.y=y-d)}};switch(c){case w:h+=P.x,l+=P.y;break;case C:if(P.x>=0&&(f>=g||s&&(l<=v||d>=y))){b=!1;break}R(C),(u+=P.x)<0&&(c=j,h-=u=-u),s&&(p=u/s,l+=(a.height-p)/2);break;case S:if(P.y<=0&&(l<=v||s&&(h<=m||f>=g))){b=!1;break}R(S),p-=P.y,l+=P.y,p<0&&(c=M,l-=p=-p),s&&(u=p*s,h+=(a.width-u)/2);break;case j:if(P.x<=0&&(h<=m||s&&(l<=v||d>=y))){b=!1;break}R(j),u-=P.x,h+=P.x,u<0&&(c=C,h-=u=-u),s&&(p=u/s,l+=(a.height-p)/2);break;case M:if(P.y>=0&&(d>=y||s&&(h<=m||f>=g))){b=!1;break}R(M),(p+=P.y)<0&&(c=S,l-=p=-p),s&&(u=p*s,h+=(a.width-u)/2);break;case _:if(s){if(P.y<=0&&(l<=v||f>=g)){b=!1;break}R(S),p-=P.y,l+=P.y,u=p*s}else R(S),R(C),P.x>=0?f<g?u+=P.x:P.y<=0&&l<=v&&(b=!1):u+=P.x,P.y<=0?l>v&&(p-=P.y,l+=P.y):(p-=P.y,l+=P.y);u<0&&p<0?(c=k,l-=p=-p,h-=u=-u):u<0?(c=D,h-=u=-u):p<0&&(c=L,l-=p=-p);break;case D:if(s){if(P.y<=0&&(l<=v||h<=m)){b=!1;break}R(S),p-=P.y,l+=P.y,u=p*s,h+=a.width-u}else R(S),R(j),P.x<=0?h>m?(u-=P.x,h+=P.x):P.y<=0&&l<=v&&(b=!1):(u-=P.x,h+=P.x),P.y<=0?l>v&&(p-=P.y,l+=P.y):(p-=P.y,l+=P.y);u<0&&p<0?(c=L,l-=p=-p,h-=u=-u):u<0?(c=_,h-=u=-u):p<0&&(c=k,l-=p=-p);break;case k:if(s){if(P.x<=0&&(h<=m||d>=y)){b=!1;break}R(j),u-=P.x,h+=P.x,p=u/s}else R(M),R(j),P.x<=0?h>m?(u-=P.x,h+=P.x):P.y>=0&&d>=y&&(b=!1):(u-=P.x,h+=P.x),P.y>=0?d<y&&(p+=P.y):p+=P.y;u<0&&p<0?(c=_,l-=p=-p,h-=u=-u):u<0?(c=L,h-=u=-u):p<0&&(c=D,l-=p=-p);break;case L:if(s){if(P.x>=0&&(f>=g||d>=y)){b=!1;break}R(C),p=(u+=P.x)/s}else R(M),R(C),P.x>=0?f<g?u+=P.x:P.y>=0&&d>=y&&(b=!1):u+=P.x,P.y>=0?d<y&&(p+=P.y):p+=P.y;u<0&&p<0?(c=D,l-=p=-p,h-=u=-u):u<0?(c=k,h-=u=-u):p<0&&(c=_,l-=p=-p);break;case O:this.move(P.x,P.y),b=!1;break;case E:this.zoom(Kt(o),t),b=!1;break;case x:if(!P.x||!P.y){b=!1;break}e=Xt(this.cropper),h=N.startX-e.left,l=N.startY-e.top,u=a.minWidth,p=a.minHeight,P.x>0?c=P.y>0?L:_:P.x<0&&(h-=u,c=P.y>0?k:D),P.y<0&&(l-=p),this.cropped||(Nt(this.cropBox,T),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}b&&(a.width=u,a.height=p,a.left=h,a.top=l,this.action=c,this.renderCropBox()),Ct(o,(function(t){t.startX=t.endX,t.startY=t.endY}))}},de={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&kt(this.dragBox,B),Nt(this.cropBox,T),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=jt({},this.initialImageData),this.canvasData=jt({},this.initialCanvasData),this.cropBoxData=jt({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(jt(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Nt(this.dragBox,B),kt(this.cropBox,T)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,Ct(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Nt(this.cropper,P)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,kt(this.cropper,P)),this},destroy:function(){var t=this.element;return t[b]?(t[b]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=this.canvasData,n=r.left,i=r.top;return this.moveTo(gt(t)?t:n+Number(t),gt(e)?e:i+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(mt(t)&&(r.left=t,n=!0),mt(e)&&(r.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var r=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(r.width*t/r.naturalWidth,null,e)},zoomTo:function(t,e,r){var n=this.options,i=this.canvasData,a=i.width,o=i.height,c=i.naturalWidth,s=i.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var h=c*t,l=s*t;if(!1===Ut(this.element,it,{ratio:t,oldRatio:a/c,originalEvent:r}))return this;if(r){var u=this.pointers,p=Xt(this.cropper),f=u&&Object.keys(u).length?Zt(u):{pageX:r.pageX,pageY:r.pageY};i.left-=(h-a)*((f.pageX-p.left-i.left)/a),i.top-=(l-o)*((f.pageY-p.top-i.top)/o)}else wt(e)&&mt(e.x)&&mt(e.y)?(i.left-=(h-a)*((e.x-i.left)/a),i.top-=(l-o)*((e.y-i.top)/o)):(i.left-=(h-a)/2,i.top-=(l-o)/2);i.width=h,i.height=l,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return mt(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,mt(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(mt(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(mt(t)&&(r.scaleX=t,n=!0),mt(e)&&(r.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.options,n=this.imageData,i=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){t={x:a.left-i.left,y:a.top-i.top,width:a.width,height:a.height};var o=n.width/n.naturalWidth;if(Ct(t,(function(e,r){t[r]=e/o})),e){var c=Math.round(t.y+t.height),s=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=s-t.x,t.height=c-t.y}}else t={x:0,y:0,width:0,height:0};return r.rotatable&&(t.rotate=n.rotate||0),r.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var e=this.options,r=this.imageData,n=this.canvasData,i={};if(this.ready&&!this.disabled&&wt(t)){var a=!1;e.rotatable&&mt(t.rotate)&&t.rotate!==r.rotate&&(r.rotate=t.rotate,a=!0),e.scalable&&(mt(t.scaleX)&&t.scaleX!==r.scaleX&&(r.scaleX=t.scaleX,a=!0),mt(t.scaleY)&&t.scaleY!==r.scaleY&&(r.scaleY=t.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var o=r.width/r.naturalWidth;mt(t.x)&&(i.left=t.x*o+n.left),mt(t.y)&&(i.top=t.y*o+n.top),mt(t.width)&&(i.width=t.width*o),mt(t.height)&&(i.height=t.height*o),this.setCropBoxData(i)}return this},getContainerData:function(){return this.ready?jt({},this.containerData):{}},getImageData:function(){return this.sized?jt({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&Ct(["left","top","width","height","naturalWidth","naturalHeight"],(function(r){e[r]=t[r]})),e},setCanvasData:function(t){var e=this.canvasData,r=e.aspectRatio;return this.ready&&!this.disabled&&wt(t)&&(mt(t.left)&&(e.left=t.left),mt(t.top)&&(e.top=t.top),mt(t.width)?(e.width=t.width,e.height=t.width/r):mt(t.height)&&(e.height=t.height,e.width=t.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,r,n=this.cropBoxData,i=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&wt(t)&&(mt(t.left)&&(n.left=t.left),mt(t.top)&&(n.top=t.top),mt(t.width)&&t.width!==n.width&&(e=!0,n.width=t.width),mt(t.height)&&t.height!==n.height&&(r=!0,n.height=t.height),i&&(e?n.height=n.width/i:r&&(n.width=n.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,r=ee(this.image,this.imageData,e,t);if(!this.cropped)return r;var n=this.getData(t.rounded),i=n.x,a=n.y,o=n.width,c=n.height,s=r.width/Math.floor(e.naturalWidth);1!==s&&(i*=s,a*=s,o*=s,c*=s);var l=o/c,u=Jt({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=Jt({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),f=Jt({aspectRatio:l,width:t.width||(1!==s?r.width:o),height:t.height||(1!==s?r.height:c)}),d=f.width,m=f.height;d=Math.min(u.width,Math.max(p.width,d)),m=Math.min(u.height,Math.max(p.height,m));var v=document.createElement("canvas"),g=v.getContext("2d");v.width=St(d),v.height=St(m),g.fillStyle=t.fillColor||"transparent",g.fillRect(0,0,d,m);var y=t.imageSmoothingEnabled,b=void 0===y||y,w=t.imageSmoothingQuality;g.imageSmoothingEnabled=b,w&&(g.imageSmoothingQuality=w);var x,O,E,C,j,M,S=r.width,_=r.height,D=i,L=a;D<=-o||D>S?(D=0,x=0,E=0,j=0):D<=0?(E=-D,D=0,j=x=Math.min(S,o+D)):D<=S&&(E=0,j=x=Math.min(o,S-D)),x<=0||L<=-c||L>_?(L=0,O=0,C=0,M=0):L<=0?(C=-L,L=0,M=O=Math.min(_,c+L)):L<=_&&(C=0,M=O=Math.min(c,_-L));var k=[D,L,x,O];if(j>0&&M>0){var N=d/o;k.push(E*N,C*N,j*N,M*N)}return g.drawImage.apply(g,[r].concat(h(k.map((function(t){return Math.floor(St(t))}))))),v},setAspectRatio:function(t){var e=this.options;return this.disabled||gt(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,r=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var i=t===H,a=e.movable&&t===Y;t=i||a?t:U,e.dragMode=t,Bt(r,z,t),Pt(r,N,i),Pt(r,W,a),e.cropBoxMovable||(Bt(n,z,t),Pt(n,N,i),Pt(n,W,a))}return this}},me=v.Cropper,ve=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,t),!e||!ht.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=jt({},pt,wt(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return c(t,[{key:"init",value:function(){var t,e=this.element,r=e.tagName.toLowerCase();if(!e[b]){if(e[b]=this,"img"===r){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===r&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var r=this.element,n=this.options;if(n.rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer)if(ct.test(t))st.test(t)?this.read(ae(t)):this.clone();else{var i=new XMLHttpRequest,a=this.clone.bind(this);this.reloading=!0,this.xhr=i,i.onabort=a,i.onerror=a,i.ontimeout=a,i.onprogress=function(){i.getResponseHeader("content-type")!==at&&i.abort()},i.onload=function(){e.read(i.response)},i.onloadend=function(){e.reloading=!1,e.xhr=null},n.checkCrossOrigin&&Vt(t)&&r.crossOrigin&&(t=qt(t)),i.open("GET",t,!0),i.responseType="arraybuffer",i.withCredentials="use-credentials"===r.crossOrigin,i.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,r=this.imageData,n=ce(t),i=0,a=1,o=1;if(n>1){this.url=oe(t,at);var c=se(n);i=c.rotate,a=c.scaleX,o=c.scaleY}e.rotatable&&(r.rotate=i),e.scalable&&(r.scaleX=a,r.scaleY=o),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,r=t.crossOrigin,n=e;this.options.checkCrossOrigin&&Vt(e)&&(r||(r="anonymous"),n=qt(e)),this.crossOrigin=r,this.crossOriginUrl=n;var i=document.createElement("img");r&&(i.crossOrigin=r),i.src=n||e,i.alt=t.alt||"The image to crop",this.image=i,i.onload=this.start.bind(this),i.onerror=this.stop.bind(this),kt(i,R),t.parentNode.insertBefore(i,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var r=v.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(v.navigator.userAgent),n=function(e,r){jt(t.imageData,{naturalWidth:e,naturalHeight:r,aspectRatio:e/r}),t.initialImageData=jt({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||r){var i=document.createElement("img"),a=document.body||document.documentElement;this.sizingImage=i,i.onload=function(){n(i.width,i.height),r||a.removeChild(i)},i.src=e.src,r||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(i))}else n(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,r=this.image,n=t.parentNode,i=document.createElement("div");i.innerHTML=ft;var a=i.querySelector(".".concat(b,"-container")),o=a.querySelector(".".concat(b,"-canvas")),c=a.querySelector(".".concat(b,"-drag-box")),s=a.querySelector(".".concat(b,"-crop-box")),h=s.querySelector(".".concat(b,"-face"));this.container=n,this.cropper=a,this.canvas=o,this.dragBox=c,this.cropBox=s,this.viewBox=a.querySelector(".".concat(b,"-view-box")),this.face=h,o.appendChild(r),kt(t,T),n.insertBefore(a,t.nextSibling),Nt(r,R),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,kt(s,T),e.guides||kt(s.getElementsByClassName("".concat(b,"-dashed")),T),e.center||kt(s.getElementsByClassName("".concat(b,"-center")),T),e.background&&kt(a,"".concat(b,"-bg")),e.highlight||kt(h,A),e.cropBoxMovable&&(kt(h,W),Bt(h,z,w)),e.cropBoxResizable||(kt(s.getElementsByClassName("".concat(b,"-line")),T),kt(s.getElementsByClassName("".concat(b,"-point")),T)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),xt(e.ready)&&Yt(t,et,e.ready,{once:!0}),Ut(t,et)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),Nt(this.element,T)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=me,t}},{key:"setDefaults",value:function(t){jt(pt,wt(t)&&t)}}])}();return jt(ve.prototype,he,le,ue,pe,fe,de),ve}()},3742:function(t,e,r){"use strict";e.a={contentArea:"index-module_contentArea_0xSfa",switchTitle:"index-module_switchTitle_qW8aM",switchButton:"index-module_switchButton_xHUSN",tip:"index-module_tip_eCtT0"}},3789:function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));r(715);var n=r(395),i=r(0),a=r.n(i),o=r(3476),c=r(526),s=r(11),h=r(215),l=r(3742);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function p(){p=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,o=Object.create(a.prototype),c=new N(n||[]);return i(o,"_invoke",{value:_(t,r,c)}),o}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function b(){}function w(){}function x(){}var O={};h(O,o,(function(){return this}));var E=Object.getPrototypeOf,C=E&&E(E(P([])));C&&C!==r&&n.call(C,o)&&(O=C);var j=x.prototype=b.prototype=Object.create(O);function M(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(i,a,o,c){var s=f(t[i],t,a);if("throw"!==s.type){var h=s.arg,l=h.value;return l&&"object"==u(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,o,c)}),(function(t){r("throw",t,o,c)})):e.resolve(l).then((function(t){h.value=t,o(h)}),(function(t){return r("throw",t,o,c)}))}c(s.arg)}var a;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return a=a?a.then(i,i):i()}})}function _(e,r,n){var i=d;return function(a,o){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===a)throw o;return{value:t,done:!0}}for(n.method=a,n.arg=o;;){var c=n.delegate;if(c){var s=D(c,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=v;var h=f(e,r,n);if("normal"===h.type){if(i=n.done?g:m,h.arg===y)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(i=g,n.method="throw",n.arg=h.arg)}}}function D(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,D(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(i,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(u(e)+" is not iterable")}return w.prototype=x,i(j,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=h(x,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,h(t,s,"GeneratorFunction")),t.prototype=Object.create(j),t},e.awrap=function(t){return{__await:t}},M(S.prototype),h(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new S(l(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},M(j),h(j,s,"Generator"),h(j,o,(function(){return this})),h(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return c.type="throw",c.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),h=n.call(o,"finallyLoc");if(s&&h){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;k(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function f(t,e,r,n,i,a,o){try{var c=t[a](o),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,i)}var d=function(t){t.type;var e=t.checked,r=t.organization,i=t.onChangePermission,u=a.a.useMemo((function(){var t=null!=r&&r.id?c.a.ORG:c.a.PERSON;return Object(h.a)()?t:c.a.INTERNAL}),[r]),d=function(){var t,e=(t=p().mark((function t(e){var r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e?u===c.a.PERSON?s.PRIVACY.public:s.PRIVACY.intranet:s.PRIVACY.private,i(r);case 2:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){f(a,n,i,o,c,"next",t)}function c(t){f(a,n,i,o,c,"throw",t)}o(void 0)}))});return function(t){return e.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:l.a.contentArea},a.a.createElement("span",{className:l.a.switchTitle},o.p[u]),a.a.createElement("div",{className:l.a.switchButton},a.a.createElement(n.a,{size:"small",onChange:d,checked:e}))))}},3804:function(t,e,r){"use strict";r.r(e);r(44);var n=r(10),i=(r(59),r(30)),a=(r(57),r(13)),o=(r(37),r(8)),c=(r(154),r(22)),s=r(0),h=r.n(s),l=r(2),u=r.n(l),p=r(2968),f=r.n(p),d=r(3522),m=r.n(d),v=r(1532),g=r(3612),y=r(532),b=r(3609),w=r(3610),x=r(3611),O=b.a.LiteSearchSelector,E=function(t){var e,r,n={type:t.type,me:t.me},i=Object(s.useMemo)((function(){return w.a.create(n)}),[n]);return null!==(e=t.organization)&&void 0!==e&&e.id&&(r=h.a.createElement(x.a,null)),h.a.createElement(O,{type:t.type,userClassType:"normal",isLiteSearchSelector:!0,searchUser:i.searchUser,getDefaultUsers:t.getDefaultUsers||i.searchUsersByIds,checkValid:i.checkValid,onChange:t.onChange,initialValues:t.initialValues,notFoundContent:r})};E.propTypes={type:u.a.string,onChange:u.a.func,initialValues:u.a.array,getDefaultUsers:u.a.func};var C=Object(y.d)((function(t){return{organization:t.organization,me:t.me}}))(E),j=r(52),M=r(3789),S=r(11),_=r(3469),D=r(149),L=r(3867),k=r(357),N={newGroupModal:"index-module_newGroupModal_An+Qw",title:"index-module_title_gTevv",titleDesc:"index-module_titleDesc_EmDkC",newGroupModalContent:"index-module_newGroupModalContent_LFB42",nameWrapper:"index-module_nameWrapper_OFOD6",avatarGroup:"index-module_avatarGroup_olnac",addMember:"index-module_addMember_i0kI8",addMemberBtn:"index-module_addMemberBtn_nvC2a",btnText:"index-module_btnText_6V0fp",submitBtn:"index-module_submitBtn_ZJkHv"};function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach((function(e){A(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=P(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B(t){return function(t){if(Array.isArray(t))return U(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(){W=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,o=Object.create(a.prototype),c=new L(n||[]);return i(o,"_invoke",{value:M(t,r,c)}),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",f="suspendedYield",d="executing",m="completed",v={};function g(){}function y(){}function b(){}var w={};h(w,o,(function(){return this}));var x=Object.getPrototypeOf,O=x&&x(x(k([])));O&&O!==r&&n.call(O,o)&&(w=O);var E=b.prototype=g.prototype=Object.create(w);function C(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(i,a,o,c){var s=u(t[i],t,a);if("throw"!==s.type){var h=s.arg,l=h.value;return l&&"object"==P(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,o,c)}),(function(t){r("throw",t,o,c)})):e.resolve(l).then((function(t){h.value=t,o(h)}),(function(t){return r("throw",t,o,c)}))}c(s.arg)}var a;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return a=a?a.then(i,i):i()}})}function M(e,r,n){var i=p;return function(a,o){if(i===d)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:t,done:!0}}for(n.method=a,n.arg=o;;){var c=n.delegate;if(c){var s=S(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var h=u(e,r,n);if("normal"===h.type){if(i=n.done?m:f,h.arg===v)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(i=m,n.method="throw",n.arg=h.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=u(i,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(P(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=h(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,h(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},C(j.prototype),h(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new j(l(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(E),h(E,s,"Generator"),h(E,o,(function(){return this})),h(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return c.type="throw",c.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),h=n.call(o,"finallyLoc");if(s&&h){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;D(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function z(t,e,r,n,i,a,o){try{var c=t[a](o),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,i)}function I(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){z(a,n,i,o,c,"next",t)}function c(t){z(a,n,i,o,c,"throw",t)}o(void 0)}))}}function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,h=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){h=!0,i=t}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw i}}return c}}(t,e)||Y(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){if(t){if("string"==typeof t)return U(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(t,e):void 0}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var X=c.a.Item,F=function(t){var e=t.isModalVisible,r=t.handleCancel,l=t.organization,u=t.isAntDingTalkDesktopApp,p=H(Object(s.useState)(),2),d=p[0],y=p[1],b=H(Object(s.useState)(!0),2),w=b[0],x=b[1],O=H(Object(s.useState)(!1),2),E=O[0],P=O[1],T=H(Object(s.useState)(!1),2),R=T[0],A=T[1],z=H(Object(s.useState)([]),2),Y=z[0],U=z[1],F=H(Object(s.useState)(S.PRIVACY.private),2),G=F[0],V=F[1],q=Object(s.useRef)(),$=Object(s.useRef)(null),K=Object(s.useMemo)((function(){return Y.map((function(t){return t.user_id||t.id}))}),[Y]);Object(s.useEffect)((function(){var t;null===(t=q.current)||void 0===t||t.focus()}),[]);var Q=H(c.a.useForm(),1)[0],Z=function(t){t&&t.preventDefault(),A((function(t){return!t}))};function J(){return(J=I(W().mark((function e(r){var i,a,o,c,s,h,p,m,v;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),P(!0),i=Q.getFieldsValue(),Y&&(i.members=Y),a={name:d,description:i.description,avatar:i.avatar,public:G,scene:i.scene||D.d[0]},null!=l&&l.id&&(a.organization_id=l.id),e.prev=6,e.next=9,j.a.groups.createGroup(a);case 9:if(o=e.sent){if(i.members)try{h=null===(s=i.members.find(_.a.isDepartment))||void 0===s?void 0:s.id,p=i.members.filter((function(t){return!_.a.isDepartment(t)})),m=f()({group_id:o.id,role:1,users:_.a.serializeUserPostBody(p),department_id:h}),j.a.groupUsers.create(m)}catch(t){n.a.error(t.message)}v="/".concat(o.login),u?window.open(v):(n.a.success(__("新建成功"),1e3),window.location.href=v),null===(c=t.handleSuccess)||void 0===c||c.call(t)}return P(!1),e.abrupt("return",o);case 15:e.prev=15,e.t0=e.catch(6),P(!1);case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}var tt=Object(s.useCallback)(I(W().mark((function t(){return W().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Y);case 1:case"end":return t.stop()}}),t)}))),[Y]),et=function(){var e=I(W().mark((function e(r){var n,i,a,o;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=$&&$.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,$.current.searchSelectorBiz.getRealUsers(r);case 4:n=e.sent,i=t.me,a=i.user_id||i.id,o=n.filter((function(t){return(t.user_id||t.id)!==a})),U((function(t){var e=t.findIndex(_.a.isDepartment);return[e,o.findIndex(_.a.isDepartment)].every((function(t){return t>-1}))&&t.splice(e,1),m()([].concat(B(t),B(o)),(function(t){return t.user_id||t.id}))})),Z();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return h.a.createElement(h.a.Fragment,null,h.a.createElement(i.a,{className:N.newGroupModal,title:h.a.createElement("div",{className:N.title},h.a.createElement("p",null,__("新建团队")),h.a.createElement("p",{className:N.titleDesc},__("和成员一起进行项目协作和知识管理"))),width:432,visible:e,onCancel:r,footer:[h.a.createElement(o.a,{className:N.submitBtn,key:"submit",type:"primary",disabled:w,loading:E,onClick:function(t){return J.apply(this,arguments)}},__("新建"))]},h.a.createElement("div",{className:N.newGroupModalContent},h.a.createElement(c.a,{form:Q,layout:"vertical",onValuesChange:function(t){Q.setFieldsValue(t)}},h.a.createElement(X,{name:"name",colon:!1,label:__("基本信息")},h.a.createElement("div",{className:N.nameWrapper},h.a.createElement(X,{noStyle:!0,shouldUpdate:function(t,e){return t.scene!==e.scene||t.avatar!==e.avatar}},(function(t){var e=t.getFieldValue;return h.a.createElement(k.a,{mr:8,component:L.a,componentProps:{getFieldValue:e}})})),h.a.createElement(a.a,{type:"text",autoComplete:"off",maxLength:36,placeholder:__("团队名称"),onChange:function(t){y(t.target.value),t.target.value.trim()?x(!1):x(!0)},ref:q}))),h.a.createElement(X,{colon:!1,name:"description"},h.a.createElement(a.a.TextArea,{className:"group-form-desc",autoComplete:"off",autoSize:{minRows:4},maxLength:100,placeholder:__("团队")+__("简介")})),h.a.createElement(X,{colon:!1,label:h.a.createElement("div",{className:N.addMember},h.a.createElement("div",{className:N.addMemberText},__("添加成员")),h.a.createElement("div",{onClick:Z},h.a.createElement("div",{className:N.addMemberBtn},h.a.createElement(v.default,null),h.a.createElement("span",{className:N.btnText},__("批量添加"))))),name:"users"},!R&&h.a.createElement(C,{getDefaultUsers:window.appData.isYuque?null:tt,type:"simple",initialValues:K,onChange:function(t){U(t)}})),h.a.createElement(X,{colon:!1,label:__("公开性")},h.a.createElement(M.a,{type:"group",checked:G!==S.PRIVACY.private,onChangePermission:function(t){V(t)},organization:l}))))),R&&h.a.createElement(g.a,{ref:$,type:"simpleWithRole",visible:R,title:__("批量添加"),roles:[{key:"member",label:__("成员"),value:2}],onCancel:Z,onSubmit:et,initialValues:K,getDefaultUsers:window.appData.isYuque?null:tt}))};F.propTypes={isModalVisible:u.a.bool,handleCancel:u.a.func,handleSuccess:u.a.func,group:u.a.object,organization:u.a.object};e.default=function(t){var e=window.appData,r=e.me,n=e.organization,i=e.isAntDingTalkDesktopApp,a=R(R({},t),{},{me:r,organization:n,isAntDingTalkDesktopApp:i});return h.a.createElement(F,a)}},3867:function(t,e,r){"use strict";r(690);var n=r(294),i=(r(37),r(8)),a=r(532),o=r(0),c=r(1673),s=r(149),h=(r(154),r(22)),l=r(5),u=r.n(l),p=r(1514),f=(r(246),r(123)),d=(r(358),r(176)),m=(r(2742),r(1422)),v=(r(44),r(10)),g=r(1389),y=r(43),b=r(357);function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,h=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){h=!0,i=t}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw i}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return x(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var O=function(){var t=w(Object(o.useState)(),2),e=t[0],r=t[1],n=w(Object(o.useState)(),2),i=n[0],a=n[1],c=new FileReader;return c.addEventListener("load",(function(){r(c.result)}),!1),Object(o.useEffect)((function(){i&&c.readAsDataURL(i)}),[i]),{url:e,uploadFile:a}},E=r(190),C="index-module_iconListContainer_2kTPj",j="index-module_iconListHeader_zgb1B",M="index-module_iconListHeaderTab_Rb7UW",S="index-module_iconListHeaderTabActive_l9CpK",_="index-module_iconListContent_5acPP",D="index-module_iconListIconContainer_W2jPd",L="index-module_iconListIconContainerActive_m+9aX",k="index-module_groupIconBtn_1pBes",N="index-module_groupIconBtnLarge_PGNAs",P="index-module_uploader_uEToK",T="index-module_dragger_yzTL7",R="index-module_imageContainer_lklS2",A="index-module_uploaderContainer_Y0VkK",B="index-module_reupload_3agQP",W="index-module_uploaderFooter_F5A9k",z="index-module_previewContainer_s7urA",I="index-module_preview_8GFmF";function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function Y(){return Y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Y.apply(null,arguments)}function U(){U=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof g?e:g,o=Object.create(a.prototype),c=new L(n||[]);return i(o,"_invoke",{value:M(t,r,c)}),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",f="suspendedYield",d="executing",m="completed",v={};function g(){}function y(){}function b(){}var w={};h(w,o,(function(){return this}));var x=Object.getPrototypeOf,O=x&&x(x(k([])));O&&O!==r&&n.call(O,o)&&(w=O);var E=b.prototype=g.prototype=Object.create(w);function C(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(i,a,o,c){var s=u(t[i],t,a);if("throw"!==s.type){var h=s.arg,l=h.value;return l&&"object"==H(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,o,c)}),(function(t){r("throw",t,o,c)})):e.resolve(l).then((function(t){h.value=t,o(h)}),(function(t){return r("throw",t,o,c)}))}c(s.arg)}var a;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return a=a?a.then(i,i):i()}})}function M(e,r,n){var i=p;return function(a,o){if(i===d)throw Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:t,done:!0}}for(n.method=a,n.arg=o;;){var c=n.delegate;if(c){var s=S(c,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var h=u(e,r,n);if("normal"===h.type){if(i=n.done?m:f,h.arg===v)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(i=m,n.method="throw",n.arg=h.arg)}}}function S(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=u(i,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function k(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(H(e)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=h(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,h(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},C(j.prototype),h(j.prototype,c,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new j(l(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(E),h(E,s,"Generator"),h(E,o,(function(){return this})),h(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=k,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return c.type="throw",c.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),h=n.call(o,"finallyLoc");if(s&&h){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;D(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:k(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function X(t,e,r,n,i,a,o){try{var c=t[a](o),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,i)}function F(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var a=t.apply(e,r);function o(t){X(a,n,i,o,c,"next",t)}function c(t){X(a,n,i,o,c,"throw",t)}o(void 0)}))}}function G(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,h=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){h=!0,i=t}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw i}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return V(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var q=function(t){var e=t.value,r=t.onChange,n=t.uploadUrl,a=t.hideDropdown,c=function(t){var e=t.uploadUrl,r=t.onChange,n=t.hideDropdown,i=Object(o.useRef)(),a=O(),c=a.url,s=a.uploadFile,h=Object(o.useRef)(),l=G(Object(o.useState)(!1),2),u=l[0],p=l[1],f=function(){var t=F(U().mark((function t(){return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.current){t.next=2;break}return t.abrupt("return");case 2:if(void 0!==i.current.getCroppedCanvas()){t.next=4;break}return t.abrupt("return");case 4:return t.abrupt("return",new Promise((function(t,r){i.current.getCroppedCanvas().toBlob((function(n){var i=new FormData;i.append("file",n,"image.png"),Object(E.ajax)({url:e,method:"POST",data:i,dataType:"json",processData:!1,success:function(e){t(e.data.url)},error:function(t){r(t),v.a.error(__("上传失败"))}})}))})));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),d=function(){var t=F(U().mark((function t(){var e;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.prev=1,t.next=4,f();case 4:e=t.sent,null==r||r(e),n();case 7:return t.prev=7,p(!1),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])})));return function(){return t.apply(this,arguments)}}();return{loading:u,localUrl:c,cropper:i,getUploadProps:function(){return{name:"file",showUploadList:!1,dataType:"json",accept:"image/*",beforeUpload:function(t){return t.size/1024/1024>20?(v.a.error(__("图片大小不能超过 {size}M",{size:20})),!1):(s(t),!1)}}},upload:f,preview:h,onOk:d}}({uploadUrl:n,onChange:r,hideDropdown:a}),s=c.loading,h=c.cropper,l=c.getUploadProps,u=c.localUrl,p=c.preview,w=c.onOk;return React.createElement("div",{className:P,"data-testid":"mocked-avatar-uploader"},u||e?React.createElement(f.a,{spinning:!1},React.createElement("div",{className:R},React.createElement("div",{className:A},React.createElement(m.a,{ref:h,src:u||e,containerWidth:window.h5?200:320,cropWidth:window.h5?200:320,aspectRatio:1,preview:p}),React.createElement(b.a,{ml:40,className:z},React.createElement("div",{className:I,ref:p}),React.createElement(b.a,{mt:16},__("预览")))),React.createElement(d.a,l(),React.createElement(i.a,{icon:React.createElement(g.default,null),className:B},__("重新上传"))),React.createElement("div",{className:W},React.createElement(i.a,{onClick:function(){return a()}},__("取消")),React.createElement(i.a,{type:"primary",onClick:w,loading:s},__("确定"))))):React.createElement(d.a.Dragger,Y({},l(),{className:T}),React.createElement(i.a,{icon:React.createElement(y.b,{name:"avatar-upload",size:16})},__("上传头像")),React.createElement(b.a,{variant:"caption",fontSize:14,mt:12},__("在此上传或拖入头像"))))};q.defaultProps={uploadUrl:"/api/upload/avatar"};var $=q;function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function Q(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=K(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==K(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Z=function(t){var e=t.value,r=t.onChange,n=t.hideDropdown,i=t.avatar,a=t.setFieldsValue,o=t.iconMap||s.d;return React.createElement("div",{className:_},o.map((function(t){return React.createElement(p.a,{className:u()(D,Q({},L,e===t&&!i)),type:"iconButton",onClick:function(){a({avatar:null}),null==r||r(t),n()}},React.createElement(y.b,{name:t,size:24}))})))};function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function tt(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=J(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==J(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,h=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){h=!0,i=t}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw i}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return rt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var nt=function(t){var e=et(Object(o.useState)(0),2),r=e[0],n=e[1],i=(null==t?void 0:t.iconMap)||s.d,a=[__("图标"),__("自定义")];return React.createElement("div",{className:u()(C,t.prefixCls)},React.createElement("div",{className:j},a.map((function(t,e){return React.createElement(p.a,{mr:8,className:u()(M,tt({},S,r===e)),onClick:function(){return n(e)},"data-testid":"GroupAvatarSelector-Tabs-".concat(e)},t)}))),React.createElement(h.a.Item,{noStyle:!0,shouldUpdate:function(t,e){return t.avatar!==e.avatar}},(function(e){var n=e.setFieldsValue,a=e.getFieldValue;return React.createElement(h.a.Item,{name:"scene",noStyle:!0,hidden:0!==r,initialValue:i[0]},React.createElement(Z,{iconMap:i,setFieldsValue:n,hideDropdown:t.hideDropdown,avatar:a("avatar")}))})),React.createElement(h.a.Item,{name:"avatar",noStyle:!0,hidden:1!==r},React.createElement($,{hideDropdown:t.hideDropdown})))};function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?at(Object(r),!0).forEach((function(e){ct(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ct(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=it(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==it(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function st(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,a,o,c=[],s=!0,h=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){h=!0,i=t}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(h)throw i}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ht(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ht(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){var e=t.getFieldValue,r=t.style,h=t.largeSize,l="publicPage"===t.type?s.f:s.d,u=Object(a.f)((function(t){return t.group})),p=e("scene")||l[0],f=e("avatar"),d=st(Object(o.useState)(!1),2),m=d[0],v=d[1];return React.createElement(n.a,{overlay:React.createElement(nt,{iconMap:l,avatar:f,hideDropdown:function(){return v(!1)}}),trigger:["click"],visible:m,onVisibleChange:v},React.createElement(i.a,{"data-testid":"GroupAvatarSelector",className:h?N:k,style:r,icon:React.createElement(c.a,{group:ot(ot({},u),{},{avatar:f,scene:p,avatar_url:f,iconMap:l}),iconSize:h?38:27,size:38,radius:6})}))}}}]);