/*! For license information please see c__DocEditMode.3c6c6cc4.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1262,26,65,161,200,219,544,574,612,747,887,919,922,983,999,1142,1299],Array(159).concat([function(e,t,r){e.exports=r(257)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r(2781);var n=r(952);r(542);t.a=n.a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";t.a={option:"index-module_option_kIhZi",item:"index-module_item_THV+2",listItem:"index-module_listItem_SQDdc",localValue:"index-module_localValue_kC1GM",divider:"index-module_divider_NQlDz",disabledPin:"index-module_disabledPin_51pdP",searchIcon:"index-module_searchIcon_4m0J4",clearIcon:"index-module_clearIcon_6ZLcB",placeholder:"index-module_placeholder_oof15",title:"index-module_title_qC2JT",link:"index-module_link_p0IfA"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r(3079);var n=r(1342);r(2821);t.a=n.a},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r(2819);var n=r(1043);r(1040);t.a=n.a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return u})),r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return c})),r.d(t,"c",(function(){return s}));var n=r(424).i18n,o={disabled:0,enable:1},a={Group:"Group",Field:"Field",Book:"Book",Official:"Official"},i={System:"System",SelfQuestion:"SelfQuestion",Searching:"Searching",Generating:"Generating",AIAnswer:"AIAnswer",Operate:"Operate",AIQuestion:"AIQuestion",LinkOperate:"LinkOperate"},u={PENDING:0,SUCCESS:1,FAILED:2},l={Insert:0,Update:1,Delete:2},c=(function(){var e=n();e("正在进行知识库搜索"),e("已为你在你的小记和个人知识库内匹配到信息源"),e("并未匹配到信息源"),e("大模型正在回答你..."),e("这个问题有点难，请稍候..."),e("答案如下")}(),function(){var e=n();e("正在进行知识库搜索"),e("已为你在知识库内匹配到信息源"),e("并未匹配到信息源"),e("大模型正在回答你..."),e("这个问题有点难，请稍候..."),e("答案如下")}(),function(){var e=n();return{isChitChat:e("对不起，我只能回答知识库相关的问题哦"),infosecScanFailed:e("作为一个人工智能语言模型，这个问题超出我目前的学习范围了，您可以问我其他问题，我将尽力为您解答"),hasNoChunks:e("根据现有的知识库，无法回答该问题。"),default:e("换个话题吧，我更擅长回答团队知识库内的问题哦！为你找到如下文档可能能解决你的问题"),exception:e("抱歉发生了未知错误，请再问一次哦"),limited:e("提问过于频繁，请稍候再试")}}()),s={Note:"Note",Doc:"Doc"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r(727);var n=r(422);r(1104);t.a=n.a},,,,function(e,t,r){"use strict";var n=r(2798),o=r(2774),a=Object(o.b)(n.a);t.a=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){e.exports=r(845)},,,,,,,function(e,t,r){"use strict";r(3078);var n=r(1340);r(1474);t.a=n.a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-home",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M12.734 14.844H7.266a.703.703 0 1 0 0 1.406h5.468a.703.703 0 1 0 0-1.406Zm0-2.813H7.266a.703.703 0 1 0 0 1.406h5.468a.703.703 0 1 0 0-1.406Zm5.698-4.433-8.02-5.616A.698.698 0 0 0 10 1.855a.698.698 0 0 0-.412.127l-8.02 5.616a.702.702 0 1 0 .807 1.15l.125-.086v8.799a.703.703 0 1 0 1.406 0V7.678L10 3.41l6.094 4.268v9.783a.703.703 0 1 0 1.406 0V8.662l.125.088a.704.704 0 0 0 .807-1.152Zm-5.698 1.62H7.266a.703.703 0 1 0 0 1.407h5.468a.703.703 0 1 0 0-1.406Z",fill:"currentColor",fillRule:"nonzero"}))},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-user",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M16.004 15.508a6.5 6.5 0 0 0-1.397-2.07 6.5 6.5 0 0 0-2.878-1.678 5.362 5.362 0 0 0 2.076-1.293 5.346 5.346 0 0 0 1.576-3.803 5.337 5.337 0 0 0-1.576-3.803 5.346 5.346 0 0 0-3.803-1.576 5.337 5.337 0 0 0-3.803 1.576 5.346 5.346 0 0 0-1.576 3.803c0 1.436.559 2.787 1.576 3.803a5.362 5.362 0 0 0 2.076 1.293 6.5 6.5 0 0 0-2.879 1.678 6.5 6.5 0 0 0-1.908 4.607.703.703 0 1 0 1.407 0c0-1.365.53-2.649 1.496-3.613a5.076 5.076 0 0 1 3.613-1.496c1.365 0 2.648.53 3.613 1.496a5.076 5.076 0 0 1 1.496 3.613.703.703 0 1 0 1.407 0 6.552 6.552 0 0 0-.516-2.537ZM10 10.637a3.977 3.977 0 0 1-3.973-3.973A3.977 3.977 0 0 1 10 2.691a3.977 3.977 0 0 1 3.973 3.973A3.976 3.976 0 0 1 10 10.637Z",fill:"currentColor",fillRule:"nonzero"}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-team",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M17.057 12.45c.086-.446.13-.905.13-1.376A7.19 7.19 0 0 0 13 4.541a3.008 3.008 0 0 0-6 0 7.19 7.19 0 0 0-4.057 7.908 3.011 3.011 0 0 0-1.693 2.707 3.007 3.007 0 0 0 5.13 2.13 7.147 7.147 0 0 0 3.62.976c1.32 0 2.555-.356 3.62-.977a3.007 3.007 0 0 0 5.13-2.129c0-1.19-.691-2.218-1.693-2.707ZM10 3.163a1.601 1.601 0 1 1 0 3.203 1.601 1.601 0 0 1 0-3.203ZM4.258 16.758a1.601 1.601 0 1 1 0-3.203 1.601 1.601 0 0 1 0 3.203Zm8.476-1.602a3 3 0 0 0 .147.932 5.755 5.755 0 0 1-2.881.767 5.755 5.755 0 0 1-2.88-.767 3.01 3.01 0 0 0-2.8-3.94A5.784 5.784 0 0 1 7.25 5.986a3.01 3.01 0 0 0 5.498 0 5.784 5.784 0 0 1 2.932 6.162 3.01 3.01 0 0 0-2.948 3.008Zm3.008 1.602a1.601 1.601 0 1 1 0-3.203 1.601 1.601 0 0 1 0 3.203Z",fill:"currentColor",fillRule:"nonzero"}))},function(e,t,r){"use strict";r.d(t,"c",(function(){return m})),r.d(t,"f",(function(){return g})),r.d(t,"k",(function(){return w})),r.d(t,"m",(function(){return E})),r.d(t,"e",(function(){return j})),r.d(t,"h",(function(){return k})),r.d(t,"j",(function(){return S})),r.d(t,"d",(function(){return x})),r.d(t,"i",(function(){return D})),r.d(t,"a",(function(){return R})),r.d(t,"b",(function(){return I})),r.d(t,"l",(function(){return M})),r.d(t,"g",(function(){return F}));var n=r(1075),o=r.n(n),a=r(159),i=r(146),u=r(52),l=r(112),c=r(2751);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(){h=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",y="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=d(e[o],e,a);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==s(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=p;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?m:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(s(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function y(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){y(a,n,o,i,u,"next",e)}function u(e){y(a,n,o,i,u,"throw",e)}i(void 0)}))}}function m(e,t){return v.apply(this,arguments)}function v(){return v=b(h().mark((function e(t,r){var n,o,a=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{useOriginResp:!1},e.next=3,u.a.templates.v2.useTemplate({template_id:r.id,book_id:t.id,doc_id:n.docId},{useOriginResp:n.useOriginResp});case 3:return o=e.sent,Object(l.spmClick)(c.a.TEMPLATE_USAGE,{id:r.id,type:r.type,format:r.format,name:r.name,platform:n.isDesktop?"desktop":"pc"}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function g(e){return _.apply(this,arguments)}function _(){return(_=b(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.templates.v2.destroy({id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return O.apply(this,arguments)}function O(){return(O=b(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.templates.v2.findOne({id:t,usage:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return P.apply(this,arguments)}function P(){return(P=b(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.templates.v2.update({id:t,name:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,r,n,o){return C.apply(this,arguments)}function C(){return C=b(h().mark((function e(t,r,n,o,i){var l,c,s,f=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=f.length>5&&void 0!==f[5]?f[5]:null,c=f.length>6&&void 0!==f[6]&&f[6],s={target_id:t,target_type:r,template_type:n,format:a.TYPE_FORMAT_MAP[o],type:o,name:i,in_edit:c},null!==l&&(s.doc_id=l),e.next=6,u.a.templates.v2.create(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function k(e){var t={lakesheet:"https://gw.alipayobjects.com/zos/bmw-prod/766284e3-a150-4438-a294-171a15cf216b.svg",laketable:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*W_NeRqkOsJsAAAAAAAAAAAAAARQnAQ",lake:"https://gw.alipayobjects.com/zos/bmw-prod/7c85db16-e017-4002-b37c-77dcf275d31f.svg",lakemind:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*R1-oT6osRqQAAAAAAAAAAAAAARQnAQ",lakeboard:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*R1-oT6osRqQAAAAAAAAAAAAAARQnAQ",lakeshow:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*-GRzR6CgSGUAAAAAAAAAAAAAARQnAQ"};return e.cover?e.cover:t[e.format]||t.lake}function S(e,t){return A.apply(this,arguments)}function A(){return(A=b(h().mark((function e(t,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.docs.findOne({book_id:r,id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t,r){return N.apply(this,arguments)}function N(){return(N=b(h().mark((function e(t,r,n){var o,a,i,l,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t,r);case 2:if(o=e.sent,a="/go/doc/".concat(o.id,"/edit"),"doc_toc"!==(null==n?void 0:n.create_from)){e.next=12;break}return i=o.id,e.next=8,u.a.docs.addToCatalog({ids:[i],book_id:t.id,target_node_uuid:n.toc_node_uuid,action:"prependChild"});case 8:return(l=new URLSearchParams).set("toc_node_uuid",n.toc_node_uuid),window.location.href="".concat(a,"?").concat(l.toString()),e.abrupt("return");case 12:return c=o.id,e.next=15,u.a.docs.addToCatalog({ids:[c],book_id:t.id,target_node_uuid:null,action:"prependChild"});case 15:window.location.href=a;case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.book_id,r=e.group_id,n=e.include_personal,o=e.official_channel,i=[],u={limit:e.limit,format:e.format,include_types:""};return t&&(i.push(a.TEMPLATE_TYPE_MAP.BOOK),u.book_id=t),r&&(i.push(a.TEMPLATE_TYPE_MAP.GROUP),u.group_id=r),o&&(i.push(a.TEMPLATE_TYPE_MAP.OFFICIAL),u.official_channel=o),n&&i.push(a.TEMPLATE_TYPE_MAP.PERSONAL),i.length&&(u.include_types=i.join(",")),u}function D(){return L.apply(this,arguments)}function L(){return L=b(h().mark((function e(){var t,r,n,o,i,l=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,u.a.templates.v2.find(T(t));case 4:return n=e.sent,o=new URLSearchParams(window.location.search),i=o.has("isSupportTable"),r.isDesktop&&!i&&(n.data=n.data.filter((function(e){return e.format!==a.TYPE_FORMAT_MAP.Table}))),Array.isArray(n.meta.official)&&(n.meta.official=n.meta.official.map((function(e){return d(d({},e),{},{name:"en-us"!==r.locale?e.name_zh:e.name_en})}))),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function R(e){var t;return!(null==e||null===(t=e.abilities)||void 0===t||!t.create_doc)}function I(e){var t;return Boolean("Group"===(null==e?void 0:e.type)&&(null==e||null===(t=e.abilities)||void 0===t?void 0:t.read_private))}function M(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return{book_id:R(e)?e.id:void 0,group_id:I(t)?t.id:void 0,include_personal:r}}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.filter((function(e){return!!i.MIXING_BOOK_TYPES.includes(e.type)}));return o()(t)?r:r.filter((function(e){return e.user_id===t.id}))}},,,,,,,,,,,function(e,t,r){"use strict";r(3080);var n=r(1341);r(1475);t.a=n.a},function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},i=r(15),u=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(u);t.a=l},function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r(62),o=r.n(n),a=r(228),i=r.n(a),u=r(148);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function s(e,t,r){return t=d(t),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,r||[],d(e).constructor):t.apply(e,r))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function h(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var b=o()("pagestatus"),m={ACTIVE:"active",INACTIVE:"inActive",ONLINE:"online",OFFLINE:"offline",CLOSE:"close",LONG_TIME_NO_REFRESH:"longTimeNoRefresh"},v=new Date,g=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(e=s(this,t),"onVisibilityChange",(function(){b("visibility change to: ",document.visibilityState),"hidden"===document.visibilityState?e.onPageHide():"visible"===document.visibilityState&&e.onActive()})),h(e,"registerCloseChecker",(function(t){e.closeChecker.push(t)})),h(e,"closeAbleCheck",(function(){var t=e.closeChecker;for(var r in t)if(!t[r]())return!1;return!0})),h(e,"onBeforeunload",(function(t){if(b("close"),e.emit(m.CLOSE),!e.closeAbleCheck())return t.returnValue="确定要离开么？","确定要离开么？"})),h(e,"onBlur",(function(){e.transmitStatus(m.INACTIVE)})),h(e,"onPageHide",(function(){e.transmitStatus(m.INACTIVE),e.checkPageReload()})),h(e,"onPageNetworkChange",(function(t){t?e.emit(m.ONLINE):e.emit(m.OFFLINE)})),h(e,"checkPageReload",(function(){new Date-v>e.REFRESH_INTERVAL&&u.b.onLine&&e.emit(m.LONG_TIME_NO_REFRESH)})),h(e,"transmitStatus",(function(t){e.status!==t&&(e.status=t,b(t),e.emit(t))})),h(e,"onActive",(function(t){e.startIdle(),e.transmitStatus(m.ACTIVE)})),e.IDLE_INTERVAL=r.idleInterval||60,e.status=m.ACTIVE,e.init(),e.closeChecker=[],e.REFRESH_INTERVAL=2592e5,e.destroyed=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),r=t,(n=[{key:"isActive",get:function(){return this.status===m.ACTIVE}},{key:"init",value:function(){this.bindEvents()}},{key:"destroy",value:function(){this.destroyed||(this.unbindEvents(),this.clearIdle(),this.destroyed=!0)}},{key:"bindEvents",value:function(){var e=this;window.addEventListener("beforeunload",this.onBeforeunload),window.addEventListener("visibilitychange",this.onVisibilityChange),window.addEventListener("pagehide",this.onPageHide),u.b.on(u.a,this.onPageNetworkChange),window.addEventListener("blur",this.onBlur),["focus","mousemove","click","touchStart","compositionend"].forEach((function(t){window.addEventListener(t,e.onActive)})),this.startIdle()}},{key:"unbindEvents",value:function(){var e=this;window.removeEventListener("beforeunload",this.onBeforeunload),window.removeEventListener("visibilitychange",this.onVisibilityChange),window.removeEventListener("pagehide",this.onPageHide),u.b.off(u.a,this.onPageNetworkChange),window.removeEventListener("blur",this.onBlur),["focus","mousemove","click","touchStart","compositionend"].forEach((function(t){window.removeEventListener(t,e.onActive)})),this.closeChecker=[]}},{key:"setIdle",value:function(e){isNaN(e)||(this.IDLE_INTERVAL=e)}},{key:"startIdle",value:function(){var e=this;this.clearIdle(),this._idleTimer=setTimeout((function(){e.transmitStatus(m.INACTIVE),e.checkPageReload()}),1e3*this.IDLE_INTERVAL)}},{key:"clearIdle",value:function(){this._idleTimer&&clearTimeout(this._idleTimer)}}])&&c(r.prototype,n),o&&c(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(i.a);t.b=g},function(e,t,r){"use strict";r(690);var n=r(294),o=(r(57),r(13)),a=(r(497),r(95)),i=r(0),u=r.n(i),l=r(2),c=r.n(l),s=r(1084),f=r(1312),d=r(1085),p=r(1077),h=r(932),y=r(248);r(1459);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e){var t,r,l=e.isOfficial,c=e.isDesktop,m=e.newTemplateName,v=e.onSetNewTemplateName,g=e.onSetSelectedScope,_=e.group,w=e.organization,O=c?_&&Object(y.f)(_):_&&Object(y.f)(_)&&(null===(t=_.abilities)||void 0===t?void 0:t.read_private),E=!!w,P=b(Object(i.useState)(O||E||l?0:1),2),j=P[0],C=P[1];r=O?[{header:__("本知识库可用"),icon:u.a.createElement(s.default,{width:20,height:20}),desc:__("仅在本知识库中可以使用"),type:0},{header:__("本团队可用"),icon:u.a.createElement(f.default,{width:20,height:20}),desc:__("成员在团队中新建文档时均可使用"),type:2},{header:__("仅自己可用"),icon:u.a.createElement(d.default,{width:20,height:20}),desc:__("可以在你参与的所有知识库中使用"),type:3}]:[{header:__("本知识库可用"),icon:u.a.createElement(s.default,{width:20,height:20}),desc:__("仅在本知识库中可以使用"),type:0},{header:__("仅自己可用"),icon:u.a.createElement(d.default,{width:20,height:20}),desc:__("可以在你参与的所有知识库中使用"),type:3}];var k=[{header:__("官方模板"),icon:u.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*KnODQ5KXlh4AAAAAAAAAAABjAQAAAQ/original",alt:"语雀logo",height:20}),desc:__("所有知识库中都可以使用"),type:1}];l&&(r=k);var S=r[j];Object(i.useEffect)((function(){return g(r[j].type)}),[]);var A=u.a.createElement(a.a,null,r.map((function(e,t){var n=u.a.createElement("div",{"data-testid":"dropdown-item-".concat(e.type),className:"template-scope-menu-item"},u.a.createElement("div",{className:"template-scope-icon"},e.icon),u.a.createElement("div",{className:"template-scope-text"},u.a.createElement("h4",null,e.header),u.a.createElement("p",null,e.desc)),t===j&&u.a.createElement("div",{className:"template-scope-more-icon"},u.a.createElement(p.default,{width:20})));return u.a.createElement(a.a.Item,{key:e.header,onClick:function(){C(t),g(r[t].type)}},n)})));return u.a.createElement("div",{"data-testid":"creator-view",className:"template-creator-content"},u.a.createElement("p",null,__("模板名称")),u.a.createElement(o.a,{value:m||"",onChange:function(e){return v(e.target.value)},onFocus:function(e){return e.target.setSelectionRange(0,e.target.value.length)}}),u.a.createElement("p",null,__("可用范围")),u.a.createElement(n.a,{trigger:["click"],overlay:A},u.a.createElement("div",{"data-testid":"dropdown-trigger",className:"template-scope"},u.a.createElement("div",{className:"template-scope-icon"},S.icon),u.a.createElement("div",{className:"template-scope-text"},u.a.createElement("h4",null,S.header),u.a.createElement("p",null,S.desc)),u.a.createElement("div",{className:"template-scope-more-icon"},u.a.createElement(h.default,null)))))}v.defaultProps={isOfficial:!1},v.propTypes={newTemplateName:c.a.string,onSetNewTemplateName:c.a.func,onSetSelectedScope:c.a.func,isOfficial:c.a.bool,isDesktop:c.a.bool,group:c.a.object,organization:c.a.object},t.a=v},,,,,,function(e,t,r){"use strict";t.a={container:"index-module_container_bP9wV",userInfo:"index-module_userInfo_yk3wr",userInfoOnlyAvatar:"index-module_userInfoOnlyAvatar_d7S6E",userInfoOnlyAvatarExpand:"index-module_userInfoOnlyAvatarExpand_FbWOP",avatar:"index-module_avatar_y3R5A",loadingPlaceholder:"index-module_loadingPlaceholder_lV33B",value:"index-module_value_f2Swu",clearIcon:"index-module_clearIcon_86YPU",empty:"index-module_empty_An6D-",emptyImg:"index-module_emptyImg_txqYL",assigneeIds:"index-module_assigneeIds_ClfM1",transitionName:"index-module_transitionName_A13Iu",hidden:"index-module_hidden_1yhPl"}},function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"d",(function(){return g})),r.d(t,"b",(function(){return _})),r.d(t,"c",(function(){return w}));r(938);var n=r(503),o=(r(116),r(38)),a=(r(132),r(27)),i=(r(144),r(60)),u=r(357),l=r(0),c=r(5),s=r.n(c),f=r(43),d=r(691),p=r(1673),h=r(1469),y=r(470);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){var t=e.item,r=e.size,n=void 0===r?20:r;if(null!=t&&t.icon)return React.createElement("img",{src:t.icon,width:n});switch(null==t?void 0:t.type){case"Book":case"Field":return React.createElement(f.b,{name:d.b.getName("Book",t),style:d.b.getStyle(t),className:"book-icon",width:20});case"Group":return React.createElement(p.a,{group:t,size:22,iconSize:20,radius:4});default:return null}},g=function(e){var t=e.isDisabled,r=e.isSelected,n=e.item,o=e.onClick,a=(null==t?void 0:t(n))||!1,l=r(n);return React.createElement(i.a,{title:a?__("默认助手，无法取消常用"):l?__("取消常用"):__("设为常用")},React.createElement(u.a,{onClick:o,type:"iconButton",className:s()(m({},y.a.disabledPin,a))},React.createElement(f.b,{name:l?"pin":"pin-outlined",size:16})))},_=function(e){var t=e.item,r=e.isSelected,n=e.isDisabled,i=e.onClick,l=e.iconSize,c=void 0===l?20:l;return t?React.createElement("div",{className:s()(y.a.listItem,"list-item"),style:{display:"block",height:"auto",padding:"12px 0"}},React.createElement(o.a,{gutter:16,align:"middle"},React.createElement(a.a,{span:4},React.createElement(v,{item:t,size:c})),React.createElement(a.a,{span:18},React.createElement(u.a,{style:{flex:"auto"}},React.createElement(u.a,{variant:"title",className:y.a.title},t.title||t.name,t.producer_name&&React.createElement(u.a,{variant:"caption-small",className:y.a.link},__("{name}提供",{name:React.createElement("a",{target:"_blank",href:t.producer_url},t.producer_name)}))),t.description&&React.createElement(u.a,{variant:"caption-small"},t.description))),React.createElement(a.a,{span:2},React.createElement(g,{item:t,isSelected:r,isDisabled:n,onClick:i})))):null},w=function(e){var t,r=e.onChange,o=e.searcher,a=e.minWidth,i=e.isSelected,u=e.isDisabled,c={group:__("团队"),book:"知识库"},f=Object(l.useMemo)((function(){return o.searchVal?React.createElement(h.a,{text:__("不存在该{type}",{type:c[e.type]}),minWidth:a}):null}),[o]);return React.createElement(n.a,{className:s()(y.a.userList,"ant-dropdown-menu"),direction:"vertical"},React.createElement(h.b,{spinning:o.loading,minWidth:a},!(null!==(t=o.state)&&void 0!==t&&t.length)&&!o.typing&&!o.loading&&f,((null==o?void 0:o.state)||[]).slice(0,20).map((function(e,t){return React.createElement(React.Fragment,null,React.createElement("div",{key:"".concat(e.id,"_").concat(e.type),className:s()(y.a.item),style:{minWidth:a}},React.createElement(_,{item:e,isSelected:i,isDisabled:u,onClick:function(){null==r||r(e),o.setLocalValue(e),o.clear(),o.setVisible(!1)}})),t<(null==o?void 0:o.state.length)-1&&React.createElement("div",{className:y.a.divider}))}))))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r(3063);var n=r(1330);r(2776);t.a=n.a},,,,,,,function(e,t,r){"use strict";r.r(t);r(690);var n=r(294),o=(r(497),r(95)),a=(r(144),r(60)),i=(r(37),r(8)),u=r(0),l=r.n(u),c=r(2),s=r.n(c),f=r(5),d=r.n(f),p=r(43),h=r(63),y=r(29),b=r(48),m=r(2737),v=r(32),g="index-module_belongs_A3uam",_="index-module_meta_Jn6WP",w="index-module_truncation_g-6vp";function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C={};C.Login=function(e){var t,r=e.goto,n=e.registerWithScene,o=r?"/login?goto=".concat(encodeURIComponent(r)):"/login",a=null===(t=document.querySelector('meta[name="pagename"]'))||void 0===t?void 0:t.getAttribute("content"),c=h.a.genCreateFromKey(y.CREATE_FROM.official_website_top_button);return n&&(o="/"===window.location.pathname||"/about"===window.location.pathname?"/login?register_with_scene=true&defaultType=org&register_from=".concat(c):"/login?register_with_scene=true&register_from=".concat(c)),Object(u.useEffect)((function(){Object(m.b)()}),[]),l.a.createElement(l.a.Fragment,null,"doc_read"===a?l.a.createElement(i.a,{onClick:function(e){v.c&&(e.preventDefault(),e.stopPropagation(),window.YuqueDesktopAppJSBridge.logout())},href:o,size:e.size,type:"primary","data-aspm-click":"d65962"},__("免费使用")):l.a.createElement(i.a,{onClick:function(e){v.c&&(e.preventDefault(),e.stopPropagation(),window.YuqueDesktopAppJSBridge.logout())},href:o,size:e.size,type:"primary","data-aspm-click":"d65962"},__("登录 / 注册")))},C.Login.propTypes={size:s.a.oneOf(["small","large"]),goto:s.a.string},C.Job=function(e){var t=e.user,r=e.truncation;if(t)return l.a.createElement("span",{className:d()(_,j({},w,r))},l.a.createElement(p.b,{name:"user-job",width:16,height:16}),l.a.createElement("span",null,t.job_title||__("未填写")))},C.Job.propTypes={user:s.a.object.isRequired,truncation:s.a.bool},C.Location=function(e){var t=e.user,r=e.truncation,n=e.size,o=void 0===n?16:n;return t=t||{},l.a.createElement("span",{className:d()(_,j({},w,r))},l.a.createElement(p.b,{name:"user-location",width:o,height:o}),l.a.createElement("span",null,t.location||__("未填写")))},C.Location.propTypes={size:s.a.object.number,user:s.a.object.isRequired,truncation:s.a.bool},C.Department=function(e){var t,r=e.user,n=e.truncation;if(r)return l.a.createElement("div",null,null!==(t=r.departments)&&void 0!==t&&t.length?r.departments.map((function(e){return l.a.createElement("span",{className:d()(_,j({},w,n))},l.a.createElement(p.b,{name:"department",width:16,height:16}),l.a.createElement("span",null,e))})):l.a.createElement("span",{className:d()(_,j({},w,n))},l.a.createElement(p.b,{name:"department",width:16,height:16}),l.a.createElement("span",null,r.department||__("未填写"))))},C.Department.propTypes={user:s.a.object.isRequired,truncation:s.a.bool},C.Link=function(e){var t=e.user,r=e.className;return l.a.createElement("a",{href:"/".concat(t.login),title:t.name,className:r},t.name)},C.Link.propTypes={user:s.a.object.isRequired,className:s.a.string},C.Name=function(e){var t=e.user,r=e.className;return l.a.createElement("span",{title:t.name,className:r},t.name)},C.Name.propTypes={user:s.a.object.isRequired,className:s.a.string},C.ContentRiskStatus=function(e){var t=e.user,r=e.me;if(r&&(r.isAdmin||r.isSecurityOperator)&&[b.STATUS.banned,b.STATUS.blocked].includes(t.status)){var n={};n[b.STATUS.banned]="已封禁",n[b.STATUS.blocked]="已屏蔽";var o=n[t.status];return l.a.createElement(a.a,{title:o},l.a.createElement(p.b,{title:!0,name:"doc-has-content-risk",width:20,style:{marginLeft:8,marginBottom:2}}))}return null},C.Name.propTypes={user:s.a.object.isRequired,me:s.a.object};var k=function(e){var t=e.belongs,r=e.onChange,a=E(Object(u.useState)(__("管理员")),2),i=a[0],c=a[1];return l.a.createElement(n.a,{trigger:["click"],overlay:l.a.createElement(o.a,{className:"dashboard-dropdown-menu",selectedKeys:[]},t.map((function(e,t){return l.a.createElement(o.a.Item,{key:e.type},l.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),function(e){r(e.type),c(e.text)}(e)}},e.text))})))},l.a.createElement("span",null,i,l.a.createElement("span",{className:d()("larkicon","larkicon-arrow-down",g)})))};k.propTypes={belongs:s.a.array.isRequired,onChange:s.a.func.isRequired},C.BelongMenu=k;t.default=C},,,,,,,,,,,function(e,t,r){var n=r(3065),o=r(243),a=r(3066);e.exports=function(e){return o(e)?a(e):n(e)}},,,,,function(e,t,r){},,,function(e,t,r){"use strict";r(3077);var n=r(1338);r(2816);t.a=n.a},,,,,,function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return c}));var n=r(0);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw a}}}}function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e){if(null!=e&&e.addEventListener){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];e.addEventListener.apply(e,a(r))}}function c(e){if(null!=e&&e.removeEventListener){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];e.removeEventListener.apply(e,a(r))}}var s=["mousedown","touchstart"];t.a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,a=Object(n.useRef)(t);Object(n.useEffect)((function(){a.current=t}),[t]),Object(n.useEffect)((function(){var t,n=function(t){var r=e.current;r&&!r.contains(t.target)&&a.current(t)},i=o(r);try{for(i.s();!(t=i.n()).done;){var u=t.value;l(document,u,n)}}catch(e){i.e(e)}finally{i.f()}return function(){var e,t=o(r);try{for(t.s();!(e=t.n()).done;){var a=e.value;c(document,a,n)}}catch(e){t.e(e)}finally{t.f()}}}),[r,e])}},function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return s}));r(246);var n=r(123),o=r(0),a=r(1333),i=r(1514),u=r(249),l=["https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Pqd6T57ZpDMAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*3q2oSIsgEvYAAAAAAAAAAAAAARQnAQ"],c=function(e){var t=e.children,r=e.spinning,i=e.minWidth,u=o.Children.toArray(t).filter(o.isValidElement);return React.createElement(n.a,{spinning:r},u.length?u:React.createElement("div",{className:a.a.loadingPlaceholder,style:{minWidth:null!=i?i:290}}))},s=function(e){var t=e.text,r=e.minWidth;return React.createElement("div",{className:a.a.empty,style:{minWidth:r}},React.createElement(u.a,{className:a.a.emptyImg,src:l[0],darkSrc:l[1]}),React.createElement(i.a,{variant:"caption"},t))}},function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return u}));var n="left",o="right",a="center",i=/\S+[ ]*\|[ ]*\S+.*?\n.*?(-)+[ ]*\|[ ]*(-)+.*?\n.*?\S+[ ]*\|[ ]*\S+.*?/g,u=function(e){if(!e)return null;if(!e.match(i))return null;var t=[],r=[],u=0,l="beforeTable",c="",s="";if(e.split("\n").forEach((function(e){var i=e.split("|");if(i.length>=2){l="inTable";var f=i.map((function(e){return e.trim()})),d=f.filter((function(e,t){return 0!==t&&t!==f.length-1||e}));d.every((function(e){return/^:[-]+:$/.test(e)?(r.push(a),!0):/^[-]+:/.test(e)?(r.push(o),!0):!!/^:?[-]+/.test(e)&&(r.push(n),!0)}))||(u=Math.max(u,d.length),t.push(d))}else e&&("inTable"===l&&(l="afterTable"),"beforeTable"===l?c+=c?"\n".concat(e):e:s+=s?"\n".concat(e):e)})),0===t.length)return null;if(0===t[0].length)return null;var f={};return t.forEach((function(e,t){e.forEach((function(e,n){var o=r[n];f[t]=f[t]||{},f[t][n]={value:e,style:{hAlign:o}}}))})),{colCount:u,rowCount:t.length,data:f,rows:[],columns:[],beforeText:c,afterText:s}}},function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},i=r(15),u=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(u);t.a=l},function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},i=r(15),u=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(u);t.a=l},function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},i=r(15),u=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(u);t.a=l},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(5),i=r.n(a),u=r(716),l=r(712),c=r(691),s=r(248),f=r(149);t.a=function(e){var t=window.appData.isPublicCloud,r=e.group,n=e.size,a=e.showOrgLabel,d=void 0!==a&&a,p=e.iconSize,h=e.radius,y=e.className,b=null==r?void 0:r.organization,m=(null==r?void 0:r.iconMap)||f.d;s.c.isPublicPage(r)&&(m[0]=f.f[0]);var v=c.b.getName("User",r)||m[0];return o.a.createElement("div",{className:i()("group-avatar",y),style:{width:"".concat(n,"px"),height:"".concat(n,"px")}},t&&d&&b&&o.a.createElement("span",{className:"lock"},o.a.createElement(l.c,{src:b.logo,size:n>32?20:13,radius:100})),r?o.a.createElement(u.a,{src:r.avatar||r.avatar_url||r.avatarUrl,size:n,className:i()({"group-type-default":v}),name:r.name,icon:v,iconSize:p||Math.floor(.9*n),radius:h}):o.a.createElement("span",{className:"default-group-avatar"},o.a.createElement("span",{className:"larkicon larkicon-group-avatar"})))}},,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-information",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M128.5 15.5c62.408 0 113 50.592 113 113s-50.592 113-113 113-113-50.592-113-113 50.592-113 113-113Zm0 20c-51.362 0-93 41.638-93 93s41.638 93 93 93 93-41.638 93-93-41.638-93-93-93ZM131 113c5.523 0 10 4.477 10 10v62c0 5.523-4.477 10-10 10s-10-4.477-10-10v-52h-6c-5.523 0-10-4.477-10-10s4.477-10 10-10h16Zm-3-44c7.732 0 14 6.268 14 14s-6.268 14-14 14-14-6.268-14-14 6.268-14 14-14Z",fill:"currentColor",fillRule:"nonzero"}))},,,,,,function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({viewBox:"64 64 896 896",fill:"currentColor",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-antd-warning",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M464 720a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}))},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-warning",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M7 0a7 7 0 0 1 7 7 7 7 0 0 1-7 7 7 7 0 0 1-7-7 7 7 0 0 1 7-7Zm.438 10.938a.437.437 0 1 0-.875-.001.437.437 0 0 0 .875 0Zm0-1.75V3.061a.437.437 0 1 0-.875 0v6.126a.437.437 0 1 0 .875 0Z",fill:"#FAAD14",fillRule:"evenodd"}))},,function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-icon-public",e.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M0 0h16v16H0z"}),n.createElement("path",{d:"M8 1.487a6.513 6.513 0 1 1 0 13.026A6.513 6.513 0 0 1 8 1.487Zm5.005 8.765-.029.003c-.223.042-.491.213-.875.54l-.53.465-.196.166-.082.066-.144.107c-.044.03-.086.056-.126.078l-.12.06-.13.049a1.162 1.162 0 0 1-.447.08c-.578-.011-.863-.24-1.08-.693l-.073-.163c-.075-.18-.091-.199-.169-.22-.359-.094-1.08.61-1.212 1.37-.054.315-.008.488.204.797l.155.216c.083.112.151.21.21.302a5.489 5.489 0 0 0 4.644-3.223ZM8.46 2.532l.022.046c.108.26.139.533.055.775-.062.181-.15.31-.293.462l-.266.261c-.068.07-.08.097-.08.122.002.058.09.132.35.234l.2.072.255.08.317.09c1.615.442 1.65 2.616-.231 3.395-1.288.534-2.074.239-2.707-.647L5.92 7.18l-.145-.221c-.222-.315-.835-.451-1.057-.3l-.005.009-.045.114-.051.152-.068.216-.1.348-.099.308c-.226.66-.454.9-1.005.865-.335-.022-.581-.148-.823-.39a5.486 5.486 0 0 0 4.543 5.126c-.289-.46-.382-.85-.283-1.422.221-1.283 1.432-2.465 2.484-2.187.408.108.617.316.79.672l.127.293c.032.069.05.075.117.076l.064-.001.062-.02.071-.03.079-.048.096-.07.124-.1.256-.22.231-.204c.819-.725 1.394-1.052 2.065-.914a5.488 5.488 0 0 0-4.889-6.701Zm-1.323.047c-2.224.355-4 2.04-4.49 4.211a.497.497 0 0 1 .025.028l.099.125.222.303c.132.181.229.291.304.349l.022.015.017-.033.051-.127.057-.172.132-.452.092-.296c.131-.391.242-.56.475-.719.7-.475 1.937-.2 2.471.558l.235.358c.402.61.705.744 1.547.395 1.007-.417.993-1.283.354-1.457l-.204-.057-.367-.113c-.913-.302-1.29-.622-1.306-1.27-.01-.377.11-.6.394-.889l.204-.199.07-.075a.157.157 0 0 0 .026-.042c.018-.053-.26-.413-.43-.441Z",fill:"currentColor",fillRule:"nonzero"})))},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-icon-lock",e.className].filter(Boolean).join(" ")}),n.createElement("defs",null,n.createElement("path",{id:"2932495269a",d:"M0 0h20v20H0z"})),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("mask",{id:"2932495269b",fill:"#fff"},n.createElement("use",{xlinkHref:"#2932495269a"})),n.createElement("g",{mask:"url(#2932495269b)",fill:"#FFF",fillRule:"nonzero"},n.createElement("path",{d:"M10 1.172a4.219 4.219 0 0 1 4.219 4.219l-.001 1.874h1.407c1.036 0 1.875.84 1.875 1.876v7.812c0 1.036-.84 1.875-1.875 1.875H4.375A1.875 1.875 0 0 1 2.5 16.953V9.141c0-1.036.84-1.875 1.875-1.875l1.406-.001V5.39A4.219 4.219 0 0 1 10 1.17Zm5.64 7.657H4.376a.313.313 0 0 0-.312.296v7.828c0 .167.131.304.296.312h11.266a.313.313 0 0 0 .312-.296V9.14a.313.313 0 0 0-.296-.312ZM10 10.78a1.406 1.406 0 0 1 .782 2.575v1.175a.781.781 0 1 1-1.563 0l-.001-1.175A1.405 1.405 0 0 1 10 10.781Zm.044-8.046H10a2.656 2.656 0 0 0-2.656 2.612v1.919h5.312V5.39a2.656 2.656 0 0 0-2.612-2.656Z"}))))},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-icon-qrcode2",e.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M0 0h256v256H0z"}),n.createElement("path",{d:"M122.353 133.647v73.412c0 9.353-7.588 16.941-16.941 16.941h-56.47C39.587 224 32 216.412 32 207.059v-56.47c0-9.354 7.588-16.942 16.941-16.942h73.412Zm45.176-.224L167.52 160l22.56-.001v-26.576H224v33.92l-29.185-.016v20.672L224 188v33.92h-33.92v-29.921h-22.513v29.921h-33.92V188l29.168-.001.001-20.703-29.169.01v-33.883h33.882Zm-62.794 17.842H49.618v55.117h55.117v-55.117ZM105.412 32c9.353 0 16.94 7.588 16.94 16.941v73.412h-73.41c-9.354 0-16.942-7.588-16.942-16.941v-56.47C32 39.587 39.588 32 48.941 32h56.47Zm101.647 0C216.412 32 224 39.588 224 48.941v56.47c0 9.354-7.588 16.942-16.941 16.942h-73.412V48.94c0-9.353 7.588-16.941 16.941-16.941h56.47ZM104.735 49.618H49.618v55.117h55.117V49.618Zm101.647 0h-55.117v55.117h55.117V49.618Z",fill:"currentColor",fillRule:"nonzero"})))},,,,,function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-review-arrow-up",e.className].filter(Boolean).join(" ")}),n.createElement("defs",null,n.createElement("path",{id:"779936003a",d:"M0 0h256v256H0z"})),n.createElement("g",{transform:"matrix(1 0 0 -1 0 256)",fill:"none",fillRule:"evenodd"},n.createElement("mask",{id:"779936003b",fill:"#fff"},n.createElement("use",{xlinkHref:"#779936003a"})),n.createElement("path",{d:"M181.1 118.925 135 165.096a9.889 9.889 0 0 1-14 0l-46.1-46.17c-3.866-3.873-3.866-10.15 0-14.022a9.892 9.892 0 0 1 7-2.904h92.2c5.468 0 9.9 4.439 9.9 9.915a9.922 9.922 0 0 1-2.9 7.01Z",fill:"currentColor",fillRule:"nonzero",mask:"url(#779936003b)"})))},,function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-new-tab-outlined",e.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"currentColor",fillRule:"evenodd"},n.createElement("rect",{transform:"rotate(45 150.929 105.071)",x:140.929,y:20.071,width:20,height:170,rx:10}),n.createElement("path",{d:"M83.705 28c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996l-.28.004H58c-5.43 0-9.848 4.327-9.996 9.72L48 58v140c0 5.43 4.327 9.848 9.72 9.996L58 208h140c5.43 0 9.848-4.327 9.996-9.72L208 198v-22.997c0-5.522 4.477-10 10-10 5.43 0 9.848 4.327 9.996 9.72l.004.28V198c0 16.403-13.164 29.731-29.504 29.996L198 228H58c-16.403 0-29.731-13.164-29.996-29.504L28 198V58c0-16.403 13.164-29.731 29.504-29.996L58 28h25.705ZM198.047 28c16.403 0 29.732 13.164 29.996 29.504l.004.496v50c0 5.523-4.477 10-10 10-5.429 0-9.847-4.327-9.996-9.72l-.004-.28V58c0-5.43-4.326-9.848-9.72-9.996l-.28-.004h-50c-5.522 0-10-4.477-10-10 0-5.43 4.327-9.848 9.72-9.996l.28-.004h50Z",fillRule:"nonzero"})))},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-import",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M198 28c16.403 0 29.731 13.146 29.996 29.463l.004.496v20.194c0 5.515-4.477 9.986-10 9.986-5.43 0-9.848-4.32-9.996-9.706l-.004-.28V57.96c0-5.422-4.327-9.835-9.72-9.983l-.28-.004H58c-5.43 0-9.848 4.321-9.996 9.707l-.004.28v139.807c0 5.421 4.327 9.834 9.72 9.982l.28.004h140c5.43 0 9.848-4.321 9.996-9.707l.004-.28v-20.15c0-5.515 4.477-9.986 10-9.986 5.43 0 9.848 4.32 9.996 9.707l.004.28v20.15c0 16.38-13.164 29.69-29.504 29.954l-.496.004H58c-16.403 0-29.731-13.146-29.996-29.463l-.004-.495V57.959c0-16.38 13.164-29.69 29.504-29.955L58 28h140Zm-79.03 49.72c3.92-3.695 10.093-3.625 13.927.209 3.905 3.905 3.905 10.237 0 14.142l-26.124 26.123L209.388 118l.28.003c5.394.138 9.729 4.549 9.74 9.978.01 5.523-4.459 10.008-9.982 10.019l-102.485.194 26.333 26.333.21.215c3.694 3.92 3.625 10.093-.21 13.927-3.905 3.905-10.236 3.905-14.142 0l-29.345-29.346-.348-.353c-11.367-11.741-11.25-30.474.348-42.073l28.968-28.968Z",fill:"currentColor",fillRule:"nonzero"}))},function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-expand",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M50 116c5.43 0 9.848 4.327 9.996 9.72L60 126v63.158c0 3.7 2.937 6.714 6.607 6.838l.235.004H130c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996L130 216H66.842c-14.676 0-26.601-11.778-26.838-26.398l-.004-.444V126c0-5.523 4.477-10 10-10Zm139.658-75.5c14.676 0 26.601 11.778 26.838 26.398l.004.444V130.5c0 5.523-4.477 10-10 10-5.43 0-9.848-4.327-9.996-9.72l-.004-.28V67.342c0-3.7-2.937-6.714-6.607-6.838l-.235-.004H126.5c-5.523 0-10-4.477-10-10 0-5.43 4.327-9.848 9.72-9.996l.28-.004h63.158Z",fill:"currentColor",fillRule:"nonzero"}))},,function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-editor-mention",e.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"currentColor",fillRule:"nonzero"},n.createElement("path",{d:"M126.176 69.924c20.217-3.751 43.414 7.895 50.835 23.78 2.337 5.003.176 10.955-4.828 13.292-4.917 2.298-10.75.25-13.168-4.571l-.124-.256c-3.529-7.554-17.731-14.684-29.067-12.58-6.744 1.25-14.801 5.795-21.456 12.497-7.497 7.55-12.556 17.05-14.134 27.418-1.586 10.42-.485 18 2.721 23.807 2.581 4.673 6.59 8.417 12.855 12.37 3.404 2.148 10.347 2.486 17.518.248 7.854-2.452 14.36-7.386 17.748-13.726l.204-.39c2.507-4.92 8.53-6.877 13.45-4.37 4.92 2.508 6.877 8.53 4.37 13.45-11.8 23.156-45.16 33.569-63.964 21.702-8.869-5.597-15.224-11.53-19.688-19.616-5.46-9.885-7.205-21.907-4.986-36.483 4.334-28.481 27.828-52.14 51.714-56.572Z"}),n.createElement("path",{d:"M133.072 18.737c24.705.303 47.9 7.613 64.769 21.918 17.012 14.425 24.756 34.704 24.65 57.85-.08 17.544-4.865 36.077-11.702 49.385-5.818 11.324-16.494 22.142-27.87 28.853-5.863 3.458-11.686 5.684-17.07 6.298-7.316.835-13.975-1.319-18.238-7.049-2.774-3.728-3.868-8.593-3.593-15.03l.044-.848.028-.43.066-.876.04-.445.089-.903.104-.922.058-.468.126-.95.069-.482.148-.98c.052-.33.106-.662.163-.998l.176-1.019c.062-.342.125-.689.191-1.038l.205-1.059.218-1.078.232-1.1.245-1.12.259-1.142.271-1.162.285-1.184.45-1.817.32-1.25.51-1.936.543-1.993.38-1.36.395-1.386.41-1.411.425-1.436.44-1.462.686-2.24.476-1.526.49-1.55.506-1.576.786-2.412.819-2.469.852-2.526.586-1.716.908-2.622.94-2.68.974-2.736 1.007-2.795 1.04-2.852 1.073-2.91 1.107-2.967 1.14-3.025 1.172-3.082 1.206-3.141.822-2.126 1.262-3.237c2.012-5.144 7.813-7.682 12.956-5.67 5.143 2.013 7.681 7.814 5.669 12.957l-1.607 4.13-1.169 3.033-1.136 2.975-.74 1.952-1.082 2.88-1.051 2.825-1.351 3.677-.976 2.692-.944 2.635-.912 2.578-.59 1.687-.576 1.662-.837 2.445-.805 2.388-.773 2.33-.498 1.523-.483 1.497-.469 1.47-.454 1.447-.655 2.12-.42 1.383-.404 1.357-.39 1.33-.56 1.95-.354 1.267-.34 1.242-.326 1.216-.312 1.19-.321 1.258-.325 1.316-.306 1.277-.285 1.24-.265 1.2-.246 1.162-.225 1.123a96.766 96.766 0 0 0-.3 1.611l-.176 1.025c-.028.168-.055.334-.08.498l-.146.966-.127.925a45.088 45.088 0 0 0-.286 2.922 28.11 28.11 0 0 0-.056 1.486v.412l.095-.015c2.139-.364 5.03-1.499 8.218-3.333l.417-.243c8.244-4.863 16.229-12.955 20.243-20.767 5.437-10.582 9.426-26.035 9.492-40.337.08-17.644-5.5-32.256-17.586-42.504-13-11.024-31.719-16.924-52.078-17.173-18.416-.225-36.035 4.346-45.923 11.44-.537.386-1.068.77-1.593 1.15l-1.557 1.141a225.894 225.894 0 0 0-5.174 3.931l-1.403 1.11C66.312 66.192 58.396 74.544 51.843 85.03c-11.245 17.996-15.712 39.438-11.739 66.021 3.818 25.55 17.285 43.182 38.353 54.378 16.423 8.727 36.69 12.926 54.815 12.926 27.741 0 58.302-13.292 75.24-32.426 3.661-4.135 9.981-4.52 14.116-.86 4.136 3.662 4.52 9.981.86 14.117-20.799 23.494-56.838 39.169-90.216 39.169-21.176 0-44.612-4.855-64.2-15.265-26.447-14.054-43.95-36.971-48.748-69.083-4.677-31.295.79-57.543 14.559-79.576 9.083-14.535 19.999-25.327 35.361-36.84l1.634-1.214c.55-.406 1.105-.813 1.667-1.221l1.701-1.229c13.686-9.819 35.437-15.462 57.826-15.189Z"})))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function i(e,t,r){return t=l(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,u()?Reflect.construct(t,r||[],l(e).constructor):t.apply(e,r))}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}e.exports=function(e){for(var t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),r=t,n&&o(r.prototype,n),a&&o(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,a}(e),r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.forEach((function(e){!function(e,t){Object.getOwnPropertyNames(t).forEach((function(r){if("constructor"!==r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n)}}))}(t.prototype,e.prototype)})),t}},,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={TEMPLATE_USAGE:"c100045.d210978"}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(55),o=r.n(n),a=r(70),i=r.n(a),u=r(61),l=r.n(u),c=r(1102),s=r.n(c),f=r(164),d=r.n(f),p=r(113),h=r.n(p),y=r(0),b=r(5),m=r.n(b),v=r(2813),g=(r(3074),r(2799),["options","block","size","className","onChange","multiple"]),_=["icon","label"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=function(e){var t=e.className,r=e.options,n=e.value,o=e.defaultValue,a=void 0===o?[]:o,i=e.onChange,u=y.useState(n||a),c=d()(u,2),f=c[0],p=c[1],h=function(e){var t,r=e.target.value;t=f.includes(r)?f.filter((function(e){return e!==r})):[].concat(s()(f),[r]),p(t),null==i||i(t)};return y.createElement("div",{className:m()("rc-segmented",t)},y.createElement("div",{className:"rc-segmented-group"},r.map((function(e){return y.createElement("label",{className:m()("rc-segmented-item",l()({},"rc-segmented-item-selected",f.includes(e.value))),key:e.value},y.createElement("input",{className:"rc-segmented-item-input",type:"checkbox",value:e.value,checked:f.includes(e.value),onChange:h}),y.createElement("div",{className:"rc-segmented-item-label"},e.label))}))))},P=y.forwardRef((function(e,t){var r=e.options,n=e.block,a=e.size,u=e.className,c=e.onChange,s=e.multiple,f=i()(e,g),d=y.useMemo((function(){return r.map((function(e){if(function(e){return!("object"!==h()(e)||null==e||!e.icon)}(e)){var t=e,r=t.icon,n=void 0===r?void 0:r,o=t.label;return O(O({},i()(t,_)),{},{label:y.createElement("div",{className:"larkui-segmented-label"},y.createElement("span",null,n),o&&y.createElement("span",null,o))})}return e}))}),[r]);return s?y.createElement(E,{value:e.value,defaultValue:e.defaultValue,className:m()("larkui-segmented","larkui-segmented-".concat(a),"larkui-segemented-multiple",u,l()({},"larkui-segmented-block",n)),options:d,onChange:function(e){return null==c?void 0:c(e)}}):y.createElement(v.a,o()({},f,{className:m()("larkui-segmented","larkui-segmented-".concat(a),u,l()({},"larkui-segmented-block",n)),options:d,onChange:function(e){return null==c?void 0:c(e)},ref:t}))}));t.a=P},,,,,,function(e,t,r){"use strict";r(1435),r(501)},function(e,t,r){"use strict";r(37);var n=r(8),o=(r(358),r(176)),a=(r(2742),r(1422)),i=(r(44),r(10)),u=r(0),l=r.n(u),c=r(2),s=r.n(c),f=r(1389),d=r(190),p=r(5),h=r.n(p),y=r(43),b="index-module_coverUploaderWrapper_JM8NQ",m="index-module_miniCoverUploaderWrapper_VBkGu",v="index-module_cropper_FJZMe",g="index-module_miniCropperWrapper_kKArf",_="index-module_miniCropper_x-fcL",w="index-module_placeholderWrapper_I8JnT",O="index-module_miniPlaceholderWrapper_CXNui",E="index-module_placeholder_fRP2-",P="index-module_placeholderImg_RI3Xy",j="index-module_preview_0S38r",C="index-module_uploadWrapper_Lddj1",k="index-module_miniUploadWrapper_kA5F2",S="index-module_uploadAction_IvY3J",A="index-module_miniUploadAction_zkhyc",x="index-module_uploadBtn_3NoLt",N="index-module_clearBtn_Jvd1P",T="index-module_btnRemove_ewCeL",D="index-module_btnRemoveIcon_Kaa0G";function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R.apply(null,arguments)}function I(){I=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==L(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(L(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function M(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function F(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){M(a,n,o,i,u,"next",e)}function u(e){M(a,n,o,i,u,"throw",e)}i(void 0)}))}}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z(n.key),n)}}function U(e,t,r){return t=V(t),function(e,t){if(t&&("object"==L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,H()?Reflect.construct(t,r||[],V(e).constructor):t.apply(e,r))}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H=function(){return!!e})()}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function q(e,t,r){return(t=z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:t+""}var W=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),q(r=U(this,t,[e]),"onSubmit",F(I().mark((function e(){var t,n,o,a,u,l,c,s,f;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.cropper){e.next=14;break}return e.prev=1,e.next=4,r.handleUpload();case 4:return t=e.sent,e.abrupt("return",null==t?void 0:t.url);case 8:e.prev=8,e.t0=e.catch(1),null!==(n=e.t0.xhr)&&void 0!==n&&n.response&&(a=JSON.parse(e.t0.xhr.response),u=window.__member_message_ref&&(null===(o=window.__member_message_ref.current)||void 0===o?void 0:o.getMessage(a.code,{isOwner:!0},a))||{},l=u.msg,c=u.alwaysOpen,s=u.level,f=u.callback,l?f(i.a[s||"info"](l,c?0:void 0)):i.a.error(__("封面上传失败，请重试"))),console.error(e.t0);case 12:e.next=15;break;case 14:return e.abrupt("return",r.state.cover);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})))),q(r,"getUploadProps",(function(){return{beforeUpload:function(e){var t=r.props.fileSizeLimit;if(e.size/1024/1024>t)return i.a.error(__("图片大小不能超过 {size}M",{size:t})),!1;var n=new FileReader;return n.addEventListener("load",(function(){r.setState({cover:n.result}),r.coverRef.current.focus(),"function"==typeof r.props.beforeUpload&&r.props.beforeUpload(n.result)}),!1),e&&n.readAsDataURL(e),!1},showUploadList:!1,accept:"image/*"}})),q(r,"handleUpload",(function(){if(r.cropper){var e=r.cropper.getCroppedCanvas({imageSmoothingQuality:"high"});if(!e)throw new Error("can not get cropper");return new Promise((function(t,n){e.toBlob((function(e){var o=new FormData;r.props.attachable_type&&o.append("attachable_type",r.props.attachable_type),r.props.attachable_id&&o.append("attachable_id",r.props.attachable_id),o.append("file",e,"image.png"),o.append("ocr","off"),Object(d.ajax)({url:"/api/upload/attach",method:"POST",data:o,dataType:"json",processData:!1,success:function(e){t(e.data)},error:function(e){n(e)}})}),"image/png",1)}))}})),q(r,"handleRemoveImg",(function(){r.setState({cover:""});var e=r.props.onRemove;e&&"function"==typeof e&&e()})),q(r,"renderCropper",(function(){var e=r.props,n=e.miniMode,i=e.cropperStyle,u=e.aspectRatio,c=e.previewKey,s=e.placeholder,f=e.cropperClassName,d=e.getCropper,p=e.cropperCheckCrossOrigin,y=e.cropperCrossOrigin,b=r.state.cover,m=i.containerWidth,w=i.containerHeight,O=i.cropWidth;return n?l.a.createElement("div",{className:g},l.a.createElement("div",{className:h()(_,f)},l.a.createElement(o.a.Dragger,R({},r.getUploadProps(),{openFileDialogOnClick:!b}),b?l.a.createElement(a.a,{ref:function(e){r.cropper=e,d(r.cropper)},checkCrossOrigin:p,crossOrigin:y,src:b,containerWidth:263,containerHeight:w,aspectRatio:u,preview:c?".".concat(c):".image-preview",cropWidth:O}):l.a.createElement(t.MiniPlaceholder,{placeholder:s})))):l.a.createElement("div",{className:h()(v,f),"data-testid":"cover-uploader-cropper"},l.a.createElement(o.a.Dragger,R({},r.getUploadProps(),{openFileDialogOnClick:!b}),b?l.a.createElement(a.a,{ref:function(e){r.cropper=e,d(r.cropper)},checkCrossOrigin:p,crossOrigin:y,src:b,containerWidth:m,containerHeight:w,aspectRatio:u,preview:c?".".concat(c):".image-preview",cropWidth:O}):l.a.createElement(t.Placeholder,{placeholder:s})))})),q(r,"renderUploader",(function(){var e=r.props,t=e.miniMode,a=e.previewClassName,i=e.previewKey,u=e.buttonSize,c=e.uploadWrapperClassName,s=r.state.cover;return t?l.a.createElement("div",{className:k},l.a.createElement("div",{className:A},l.a.createElement(o.a,r.getUploadProps(),s?l.a.createElement(n.a,{className:x},__("重新上传")):l.a.createElement(n.a,null,l.a.createElement(f.default,null),l.a.createElement("span",{className:"text"},__("上传图片")))),s&&l.a.createElement(n.a,{className:N,onClick:r.handleRemoveImg},__("清除")))):l.a.createElement("div",{className:h()(C,[c])},s&&l.a.createElement("div",{className:h()("image-preview",j,a,i),"data-testid":"cover-uploader-previewKey"}),l.a.createElement("div",{className:S},l.a.createElement(o.a,r.getUploadProps(),s?l.a.createElement(n.a,{size:u},__("重新上传")):l.a.createElement(n.a,{size:u},l.a.createElement(f.default,null),l.a.createElement("span",{className:"text"},__("上传图片")))),s&&l.a.createElement("span",{className:T,onClick:r.handleRemoveImg},l.a.createElement("span",{className:D},l.a.createElement(y.b,{name:"icon-delete",width:16})),l.a.createElement("span",null,__("清除")))))}));var c=e.defaultPreviewImage,s=e.cover;return r.state={cover:s||c},r.coverRef=Object(u.createRef)(),r.cropper=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(t,e),r=t,(c=[{key:"componentDidUpdate",value:function(e){e.cover!==this.props.cover&&this.setState({cover:this.props.cover})}},{key:"componentWillUnmount",value:function(){this.coverRef=null,this.cropper=null}},{key:"render",value:function(){var e=this.props.miniMode;return l.a.createElement("div",{className:h()(e?m:b,this.props.className),ref:this.coverRef,tabIndex:"-1"},this.renderCropper(),this.renderUploader())}}])&&B(r.prototype,c),s&&B(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,c,s}(u.Component);W.Placeholder=function(e){var t=e.placeholder;return l.a.createElement("div",{className:w},l.a.createElement("div",{className:h()(E,"cover-uploader-placeholder")},l.a.createElement("div",{className:P}),l.a.createElement("p",null,t||__("添加封面有助于吸引读者"))))},W.MiniPlaceholder=function(e){var t=e.placeholder;return l.a.createElement("div",{className:O},l.a.createElement("div",{className:h()(E,"cover-uploader-placeholder")},l.a.createElement("div",{className:P}),l.a.createElement("p",null,t||__("添加封面有助于吸引读者"))))},W.Placeholder.propTypes={placeholder:s.a.string},W.propTypes={cover:s.a.string,beforeUpload:s.a.func,aspectRatio:s.a.number,cropperStyle:s.a.shape({containerWidth:s.a.number,containerHeight:s.a.number,cropWidth:s.a.number}),defaultPreviewImage:s.a.string,fileSizeLimit:s.a.number,cropperClassName:s.a.string,previewClassName:s.a.string,uploadWrapperClassName:s.a.string,previewKey:s.a.string,onRemove:s.a.func,placeholder:s.a.string,attachable_type:s.a.string,attachable_id:s.a.number,miniMode:s.a.bool,getCropper:s.a.func,cropperCheckCrossOrigin:s.a.bool,cropperCrossOrigin:s.a.oneOf(["anonymous","use-credentials"]),buttonSize:s.a.oneOf(["large","middle","small"])},W.defaultProps={cropperStyle:{containerWidth:240,containerHeight:150,cropWidth:400},aspectRatio:1.6,fileSizeLimit:20,getCropper:function(){},cropperCheckCrossOrigin:!0,buttonSize:"middle"};t.a=W},,,,function(e,t,r){var n=r(3064),o=r(369),a=r(370),i=r(243),u=r(1454),l=r(367),c=Math.ceil;e.exports=function(e,t){var r=(t=void 0===t?" ":o(t)).length;if(r<2)return r?n(t,e):t;var s=n(t,c(e/u(t)));return i(t)?a(l(s),0,e).join(""):s.slice(0,e)}},,,,,,function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},i=r(15),u=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(u);t.a=l},function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},i=r(15),u=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(u);t.a=l},function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},i=r(15),u=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(u);t.a=l},function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},i=r(15),u=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(u);t.a=l},function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},i=r(15),u=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(u);t.a=l},,,,,,,,function(e,t,r){var n=r(2786),o=r(1454),a=r(694),i=r(125);e.exports=function(e,t,r){e=i(e);var u=(t=a(t))?o(e):0;return t&&u<t?n(t-u,r)+e:e}},,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0),o=r.n(n),a=r(1470),i=function(e,t){var r=null,n=null,i={colCount:0,preTextEle:e||"",afterTextEle:n,tableEle:null};if(!e)return i;if(!e.match(a.b))return i;try{var u=Object(a.a)(e);if(!u)return i;var l=u.data,c=u.beforeText,s=u.afterText,f=u.colCount;c&&(r=c.split("\n").map((function(e,t){return e?o.a.createElement("div",{key:t},e):null})));var d=[],p=[];return Object.keys(l).forEach((function(e,t){var r=l[e],n=Object.keys(r).length;0!==t?p.push(o.a.createElement("tr",{key:t},Object.keys(r).map((function(e,t){return o.a.createElement("td",{key:t},r[e].value||"")})),Array(f-n).fill(0).map((function(e,t){return o.a.createElement("td",{key:t})})))):d.push(o.a.createElement("tr",{key:t},Object.keys(r).map((function(e,t){return o.a.createElement("th",{key:t},r[e].value||"")})),Array(f-n).fill(0).map((function(e,t){return o.a.createElement("th",{key:t})}))))})),s&&(n=s.split("\n").map((function(e,t){return e?o.a.createElement("div",{key:t},e):null}))),{colCount:u.colCount,preTextEle:r,afterTextEle:n,tableEle:d.length||p.length?o.a.createElement("table",{id:t},o.a.createElement("thead",null,d),o.a.createElement("tbody",null,p)):null}}catch(e){return i}}},,,,,,,,,,,,,,,,,,,,function(e,t,r){var n=r(2786),o=r(1454),a=r(694),i=r(125);e.exports=function(e,t,r){e=i(e);var u=(t=a(t))?o(e):0;return t&&u<t?e+n(t-u,r):e}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){var r=Math.floor;e.exports=function(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=r(t/2))&&(e+=e)}while(t);return n}},function(e,t,r){var n=r(543)("length");e.exports=n},function(e,t){var r="\\ud800-\\udfff",n="["+r+"]",o="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",i="[^"+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+o+"|"+a+")"+"?",s="[\\ufe0e\\ufe0f]?",f=s+c+("(?:\\u200d(?:"+[i,u,l].join("|")+")"+s+c+")*"),d="(?:"+[i+o+"?",o,u,l,n].join("|")+")",p=RegExp(a+"(?="+a+")|"+d+f,"g");e.exports=function(e){for(var t=p.lastIndex=0;p.test(e);)++t;return t}},function(e,t,r){"use strict";var n=r(2798),o=r(4),a=r(6),i=r(7),u=r(0),l=r(79),c=r(5),s=r.n(c),f=r(2804),d=r.n(f),p=r(1314),h=r(198),y=r(748),b=r(179),m=r(325),v=r(1510),g=r(1509),_=10,w=20;function O(e){var t=e.fullscreen,r=e.validRange,n=e.generateConfig,o=e.locale,a=e.prefixCls,l=e.value,c=e.onChange,s=e.divRef,f=n.getYear(l||n.getNow()),d=f-_,p=d+w;r&&(d=n.getYear(r[0]),p=n.getYear(r[1])+1);for(var h=o&&"年"===o.year?"年":"",y=[],b=d;b<p;b++)y.push({label:"".concat(b).concat(h),value:b});return u.createElement(m.a,{size:t?void 0:"small",options:y,value:f,className:"".concat(a,"-year-select"),onChange:function(e){var t=n.setYear(l,e);if(r){var o=Object(i.a)(r,2),a=o[0],u=o[1],s=n.getYear(t),f=n.getMonth(t);s===n.getYear(u)&&f>n.getMonth(u)&&(t=n.setMonth(t,n.getMonth(u))),s===n.getYear(a)&&f<n.getMonth(a)&&(t=n.setMonth(t,n.getMonth(a)))}c(t)},getPopupContainer:function(){return s.current}})}function E(e){var t=e.prefixCls,r=e.fullscreen,n=e.validRange,o=e.value,a=e.generateConfig,l=e.locale,c=e.onChange,s=e.divRef,f=a.getMonth(o||a.getNow()),d=0,p=11;if(n){var h=Object(i.a)(n,2),y=h[0],b=h[1],v=a.getYear(o);a.getYear(b)===v&&(p=a.getMonth(b)),a.getYear(y)===v&&(d=a.getMonth(y))}for(var g=l.shortMonths||a.locale.getShortMonths(l.locale),_=[],w=d;w<=p;w+=1)_.push({label:g[w],value:w});return u.createElement(m.a,{size:r?void 0:"small",className:"".concat(t,"-month-select"),value:f,options:_,onChange:function(e){c(a.setMonth(o,e))},getPopupContainer:function(){return s.current}})}function P(e){var t=e.prefixCls,r=e.locale,n=e.mode,o=e.fullscreen,a=e.onModeChange;return u.createElement(v.a,{onChange:function(e){var t=e.target.value;a(t)},value:n,size:o?void 0:"small",className:"".concat(t,"-mode-switch")},u.createElement(g.a,{value:"month"},r.month),u.createElement(g.a,{value:"year"},r.year))}var j=function(e){var t=e.prefixCls,r=e.fullscreen,n=e.mode,o=e.onChange,i=e.onModeChange,l=u.useRef(null),c=Object(a.a)(Object(a.a)({},e),{onChange:o,fullscreen:r,divRef:l});return u.createElement("div",{className:"".concat(t,"-header"),ref:l},u.createElement(O,c),"month"===n&&u.createElement(E,c),u.createElement(P,Object(a.a)({},c,{onModeChange:i})))};var C=function(e){function t(t,r){return t&&r&&e.getYear(t)===e.getYear(r)}function r(r,n){return t(r,n)&&e.getMonth(r)===e.getMonth(n)}function n(t,n){return r(t,n)&&e.getDate(t)===e.getDate(n)}return function(c){var f=c.prefixCls,m=c.className,v=c.style,g=c.dateFullCellRender,_=c.dateCellRender,w=c.monthFullCellRender,O=c.monthCellRender,E=c.headerRender,P=c.value,C=c.defaultValue,k=c.disabledDate,S=c.mode,A=c.validRange,x=c.fullscreen,N=void 0===x||x,T=c.onChange,D=c.onPanelChange,L=c.onSelect,R=u.useContext(b.b),I=R.getPrefixCls,M=R.direction,F=I("picker",f),B="".concat(F,"-calendar"),U=e.getNow(),H=Object(l.a)((function(){return P||e.getNow()}),{defaultValue:C,value:P}),V=Object(i.a)(H,2),G=V[0],q=V[1],z=Object(l.a)("month",{value:S}),W=Object(i.a)(z,2),K=W[0],Y=W[1],J=u.useMemo((function(){return"year"===K?"month":"date"}),[K]),$=u.useCallback((function(t){return!!A&&(e.isAfter(A[0],t)||e.isAfter(t,A[1]))||!!(null==k?void 0:k(t))}),[k,A]),X=function(e,t){null==D||D(e,t)},Q=function(e){Y(e),X(G,e)},Z=function(e){!function(e){q(e),n(e,G)||(("date"===J&&!r(e,G)||"month"===J&&!t(e,G))&&X(e,K),null==T||T(e))}(e),null==L||L(e)},ee=u.useCallback((function(t){return g?g(t):u.createElement("div",{className:s()("".concat(F,"-cell-inner"),"".concat(B,"-date"),Object(o.a)({},"".concat(B,"-date-today"),n(U,t)))},u.createElement("div",{className:"".concat(B,"-date-value")},d()(String(e.getDate(t)),2,"0")),u.createElement("div",{className:"".concat(B,"-date-content")},_&&_(t)))}),[g,_]),te=u.useCallback((function(t,n){if(w)return w(t);var a=n.shortMonths||e.locale.getShortMonths(n.locale);return u.createElement("div",{className:s()("".concat(F,"-cell-inner"),"".concat(B,"-date"),Object(o.a)({},"".concat(B,"-date-today"),r(U,t)))},u.createElement("div",{className:"".concat(B,"-date-value")},a[e.getMonth(t)]),u.createElement("div",{className:"".concat(B,"-date-content")},O&&O(t)))}),[w,O]);return u.createElement(h.a,{componentName:"Calendar",defaultLocale:function(){var e=c.locale,t=Object(a.a)(Object(a.a)({},y.a),e);return t.lang=Object(a.a)(Object(a.a)({},t.lang),(e||{}).lang),t}},(function(t){var r;return u.createElement("div",{className:s()(B,(r={},Object(o.a)(r,"".concat(B,"-full"),N),Object(o.a)(r,"".concat(B,"-mini"),!N),Object(o.a)(r,"".concat(B,"-rtl"),"rtl"===M),r),m),style:v},E?E({value:G,type:K,onChange:Z,onTypeChange:Q}):u.createElement(j,{prefixCls:B,value:G,generateConfig:e,mode:K,fullscreen:N,locale:t.lang,validRange:A,onChange:Z,onModeChange:Q}),u.createElement(p.a,{value:G,prefixCls:F,locale:t.lang,generateConfig:e,dateRender:ee,monthCellRender:function(e){return te(e,t.lang)},onSelect:Z,mode:J,picker:J,disabledDate:$,hideHeader:!0}))}))}}(n.a);t.a=C},,function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},i=r(15),u=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(u);t.a=l},function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},i=r(15),u=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(u);t.a=l},function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"}}]},name:"star",theme:"filled"},i=r(15),u=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(u);t.a=l},function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zM480 416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416zm32 352a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"warning",theme:"filled"},i=r(15),u=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(u);t.a=l},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateAttrOperation=t.RemoveAttrOperation=t.AddAttrOperation=t.RemoveOperation=t.MoveOperation=t.InsertOperation=t.OperationType=t.Transaction=t.ModelDocument=t.TextNode=t.RootNode=t.TextNodeName=t.CardNodeName=t.RootNodeName=t.ModelCardNode=t.Hole=t.WriterManager=t.ReaderManager=t.INodeUtil=t.CardUtil=t.SelectionUtil=t.INLINE_CARD_ATTRS=t.parseTableLayout=t.parseToRowLayout=t.INodeHelper=t.RangeUtil=t.Selection=t.AnchorType=t.Element=t.ModelNode=t.CardHelper=t.RootChildCard=t.PositionUtil=t.NodeConverter=t.TextConverter=t.Command=t.DataSourceManager=t.DataSource=t.Range=t.NodeUtil=t.NodeType=t.KNodeType=t.Position=t.KernelAbstractCommand=t.KernelPlugin=t.KernelOption=t.KernelAbstractService=t.MetaFilter=t.JobMode=t.Category=void 0,t.CARD_ATTRS_SCHEMA=t.INLINE_CARD_SCHEMA=t.BLOCK_CARD_SCHEMA=t.CardType=t.ValuedAttributeCommand=t.ToggleAttributeCommand=t.InlineNodeCommand=t.GeneralCommand=t.GeneralCommandV2=t.CardData=t.BlockNodeAttributeCommand=t.AttributeHelper=t.getAttrValue=t.KernelFactory=t.Kernel=t.JsonDataSource=t.Model=t.setINode=t.DefaultSchema=t.CommandManager=t.SnapshotUtil=t.Schema=t.Editing=t.addOperation=t.OperationDataMapKey=t.Job=t.flushJob=t.isCommitted=t.commitJob=t.TableSelectionUtil=t.ModelNodeHelper=t.NODE_CHANGE_TEXT_CHANGE=t.NODE_CHANGE_ATTR_CHANGE=t.NODE_CHANGE_ATTR_REMOVE=t.NODE_CHANGE_ATTR_ADD=t.NODE_CHANGE_INSERT=t.NODE_CHANGE_REMOVE=t.UpdateTextOperation=void 0;var u=r(3459);Object.defineProperty(t,"Category",{enumerable:!0,get:function(){return u.Category}});var l=r(3991);Object.defineProperty(t,"JobMode",{enumerable:!0,get:function(){return l.JobMode}});var c=i(r(4134));t.MetaFilter=c.default;var s=r(3475);Object.defineProperty(t,"KernelAbstractService",{enumerable:!0,get:function(){return s.KernelAbstractService}});var f=i(r(4135));t.KernelOption=f.default;var d=i(r(4136));t.KernelPlugin=d.default;var p=r(3457);Object.defineProperty(t,"KernelAbstractCommand",{enumerable:!0,get:function(){return p.KernelAbstractCommand}});var h=i(r(3516));t.Position=h.default;var y=r(4137);Object.defineProperty(t,"KNodeType",{enumerable:!0,get:function(){return y.KNodeType}});var b=r(3517);Object.defineProperty(t,"NodeType",{enumerable:!0,get:function(){return b.NodeType}});var m=i(r(3497));t.NodeUtil=m.default;var v=i(r(3526));t.Range=v.default;var g=i(r(3994));t.DataSource=g.default;var _=i(r(4140));t.DataSourceManager=_.default;var w=i(r(3755));t.Command=w.default;var O=i(r(4401));t.TextConverter=O.default;var E=i(r(4402));t.NodeConverter=E.default;var P=i(r(3711));t.PositionUtil=P.default;var j=i(r(4145));t.RootChildCard=j.default;var C=i(r(4e3));t.CardHelper=C.default;var k=i(r(3902));t.ModelNode=k.default;var S=i(r(3903));t.Element=S.default;var A=a(r(3904));t.Selection=A.default,Object.defineProperty(t,"AnchorType",{enumerable:!0,get:function(){return A.AnchorType}});var x=i(r(3841));t.RangeUtil=x.default;var N=i(r(3458));t.INodeHelper=N.default;var T=r(4006);Object.defineProperty(t,"parseToRowLayout",{enumerable:!0,get:function(){return T.parseToRowLayout}});var D=r(4151);Object.defineProperty(t,"parseTableLayout",{enumerable:!0,get:function(){return D.parseTableLayout}});var L=r(4152);Object.defineProperty(t,"INLINE_CARD_ATTRS",{enumerable:!0,get:function(){return L.INLINE_CARD_ATTRS}});var R=i(r(3714));t.SelectionUtil=R.default;var I=i(r(4454));t.CardUtil=I.default;var M=i(r(4455));t.INodeUtil=M.default;var F=i(r(4157));t.ReaderManager=F.default;var B=i(r(4158));t.WriterManager=B.default;var U=i(r(4159));t.Hole=U.default;var H=i(r(4160));t.ModelCardNode=H.default;var V=r(4008);Object.defineProperty(t,"RootNodeName",{enumerable:!0,get:function(){return V.RootNodeName}}),Object.defineProperty(t,"CardNodeName",{enumerable:!0,get:function(){return V.CardNodeName}}),Object.defineProperty(t,"TextNodeName",{enumerable:!0,get:function(){return V.TextNodeName}});var G=i(r(4162));t.RootNode=G.default;var q=i(r(4163));t.TextNode=q.default;var z=i(r(4164));t.ModelDocument=z.default;var W=i(r(4165));t.Transaction=W.default;var K=r(3632);Object.defineProperty(t,"OperationType",{enumerable:!0,get:function(){return K.OperationType}});var Y=i(r(4166));t.InsertOperation=Y.default;var J=i(r(4167));t.MoveOperation=J.default;var $=i(r(4168));t.RemoveOperation=$.default;var X=i(r(4169));t.AddAttrOperation=X.default;var Q=i(r(4170));t.RemoveAttrOperation=Q.default;var Z=i(r(4171));t.UpdateAttrOperation=Z.default;var ee=i(r(4172));t.UpdateTextOperation=ee.default;var te=r(4173);Object.defineProperty(t,"NODE_CHANGE_REMOVE",{enumerable:!0,get:function(){return te.NODE_CHANGE_REMOVE}}),Object.defineProperty(t,"NODE_CHANGE_INSERT",{enumerable:!0,get:function(){return te.NODE_CHANGE_INSERT}}),Object.defineProperty(t,"NODE_CHANGE_ATTR_ADD",{enumerable:!0,get:function(){return te.NODE_CHANGE_ATTR_ADD}}),Object.defineProperty(t,"NODE_CHANGE_ATTR_REMOVE",{enumerable:!0,get:function(){return te.NODE_CHANGE_ATTR_REMOVE}}),Object.defineProperty(t,"NODE_CHANGE_ATTR_CHANGE",{enumerable:!0,get:function(){return te.NODE_CHANGE_ATTR_CHANGE}}),Object.defineProperty(t,"NODE_CHANGE_TEXT_CHANGE",{enumerable:!0,get:function(){return te.NODE_CHANGE_TEXT_CHANGE}});var re=i(r(4174));t.ModelNodeHelper=re.default;var ne=i(r(3843));t.TableSelectionUtil=ne.default;var oe=a(r(3909));t.Job=oe.default,Object.defineProperty(t,"commitJob",{enumerable:!0,get:function(){return oe.commitJob}}),Object.defineProperty(t,"isCommitted",{enumerable:!0,get:function(){return oe.isCommitted}}),Object.defineProperty(t,"flushJob",{enumerable:!0,get:function(){return oe.flushJob}});var ae=r(4009);Object.defineProperty(t,"OperationDataMapKey",{enumerable:!0,get:function(){return ae.OperationDataMapKey}}),Object.defineProperty(t,"addOperation",{enumerable:!0,get:function(){return ae.addOperation}});var ie=i(r(4177));t.Editing=ie.default;var ue=i(r(4178));t.Schema=ue.default;var le=i(r(4180));t.SnapshotUtil=le.default;var ce=i(r(4181));t.CommandManager=ce.default;var se=i(r(4182));t.DefaultSchema=se.default;var fe=r(4183);Object.defineProperty(t,"setINode",{enumerable:!0,get:function(){return fe.setINode}});var de=i(r(4184));t.Model=de.default;var pe=i(r(4185));t.JsonDataSource=pe.default;var he=i(r(4186));t.Kernel=he.default;var ye=r(4187);Object.defineProperty(t,"KernelFactory",{enumerable:!0,get:function(){return ye.KernelFactory}});var be=r(4188);Object.defineProperty(t,"getAttrValue",{enumerable:!0,get:function(){return be.getAttrValue}});var me=i(r(3911));t.AttributeHelper=me.default;var ve=i(r(4189));t.BlockNodeAttributeCommand=ve.default;var ge=i(r(3512));t.CardData=ge.default;var _e=a(r(3513));t.GeneralCommand=_e.default,Object.defineProperty(t,"GeneralCommandV2",{enumerable:!0,get:function(){return _e.GeneralCommandV2}});var we=i(r(4011));t.InlineNodeCommand=we.default;var Oe=i(r(3844));t.ToggleAttributeCommand=Oe.default;var Ee=i(r(3715));t.ValuedAttributeCommand=Ee.default;var Pe=r(4161);Object.defineProperty(t,"CardType",{enumerable:!0,get:function(){return Pe.CardType}});var je=r(4179);Object.defineProperty(t,"BLOCK_CARD_SCHEMA",{enumerable:!0,get:function(){return je.BLOCK_CARD_SCHEMA}}),Object.defineProperty(t,"INLINE_CARD_SCHEMA",{enumerable:!0,get:function(){return je.INLINE_CARD_SCHEMA}}),Object.defineProperty(t,"CARD_ATTRS_SCHEMA",{enumerable:!0,get:function(){return je.CARD_ATTRS_SCHEMA}}),t.default=he.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rank=t.assert=void 0;var n={fatal:0,error:1,warn:2,info:3,debug:4};t.Rank=n;var o=function(e,t,r,a){if(void 0===t&&(t=""),void 0===r&&(r=""),void 0===a&&(a=n.error),!e)throw o.globalLogger&&o.globalLogger("".concat(t||""),"".concat(r||t||""),a),new Error("lakex_editor_assert_error ".concat(t||""," ").concat(r||""))};t.assert=o,o.setGlobalLogger=function(e){return o.globalLogger=e,function(){o.globalLogger=void 0}},o.fatal=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e[0],e[1],e[2],n.fatal)},o.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e[0],e[1],e[2],n.error)},o.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e[0],e[1],e[2],n.warn)},o.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e[0],e[1],e[2],n.info)},o.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e[0],e[1],e[2],n.debug)}},,,function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelAbstractCommand=void 0;var i=function(e){function t(t,r,n){var o=e.call(this)||this;return Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(o,"editing",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:n}),o}return o(t,e),t}(a(r(3755)).default);t.KernelAbstractCommand=i},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3454),u=r(3598),l=r(3517),c=function(){function e(){}return Object.defineProperty(e,"createFragment",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return{type:"fragment",name:"#fragment",children:a([],o(e||[]),!1),attrs:n({},t)}}}),Object.defineProperty(e,"isEmptyNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.type===l.NodeType.Element||"fragment"===e.type?!e.children||0===e.children.length:(i.assert.fatal(e.type===l.NodeType.Text,"framework/kernel/src/public/inode-helper.ts:26"),!e.data)}}),Object.defineProperty(e,"isElementNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.type===l.NodeType.Element}}),Object.defineProperty(e,"isTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.type===l.NodeType.Text}}),Object.defineProperty(e,"isCardNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.type===l.NodeType.Card}}),Object.defineProperty(e,"isFragmentNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"fragment"===e.type}}),Object.defineProperty(e,"createElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return{id:r||"",type:l.NodeType.Element,name:e,attrs:n({},t)}}}),Object.defineProperty(e,"createCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n={type:l.NodeType.Card,name:e};return t&&(n.attrs={value:t}),r&&(n.id=r),n}}),Object.defineProperty(e,"isLikeEmpty",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t.type===l.NodeType.Text?0===t.data.length:t.type===l.NodeType.Element&&(0===t.children.length||t.children.every((function(t){return e.isLikeEmpty(t)})))}}),Object.defineProperty(e,"createTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var o={type:l.NodeType.Text,name:"#text",data:"string"!=typeof e?"":e};return t&&(o.attrs=n({},t)),r&&(o.id=r),o}}),Object.defineProperty(e,"appendChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.children?e.children.push(t):e.children=[t]}}),Object.defineProperty(e,"prependChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.children?e.children.unshift(t):e.children=[t]}}),Object.defineProperty(e,"setChildByOffset",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){e.children||(e.children=[]),e.children[t]=r}}),Object.defineProperty(e,"setChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.children=a([],o(t),!1)}}),Object.defineProperty(e,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.children.indexOf(t);i.assert.fatal(-1!==r,"framework/kernel/src/public/inode-helper.ts:173"),e.children.splice(r,1)}}),Object.defineProperty(e,"unwrapNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=e.children.indexOf(t);i.assert.fatal(-1!==n,"framework/kernel/src/public/inode-helper.ts:183"),(r=e.children).splice.apply(r,a([n,1],o(t.children||[]),!1))}}),Object.defineProperty(e,"cloneNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={type:e.type,id:e.id,name:e.name};return(0,u.hasOwnProperty)(e,"data")&&(t.data=e.data),e.attrs&&(t.attrs=n({},e.attrs)),t}}),Object.defineProperty(e,"setAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var o={};"string"==typeof t?o[t]=r:o=n({},t),e.attrs=n(n({},e.attrs),o)}}),Object.defineProperty(e,"removeAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.attrs&&delete e.attrs[t]}}),e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Category=void 0,t.Category={Root:"#root",LikeRoot:"~likeRoot",VirtualLikeRoot:"~virtualLikeRoot",TextContainer:"~textContainer",Level:"~level",Text:"#text",Block:"~block",Inline:"~inline",InlineBox:"$inlineBox",Card:"~card",InlineCard:"~inlineCard",BlockCard:"~blockCard",Sticky:"~sticky",DisallowEmpty:"~disallowEmpty",Clean:"~clean",Heading:"~heading",TableHole:"~tableHole",Table:"~table",TableRow:"~tableRow",TableCell:"~tableCell",Hole:"~hole",RootCardHole:"~rootChildHole",AttrContext:"~attrContext",AlertHole:"~AlertHole",ContainerHole:"~containerHole",WidthModeBox:"~widthModeBox",OnlyText:"~onlyText",Brick:"~brick"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPluginRegister=void 0;t.createPluginRegister=function(e){return e}},,,function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ILakeKernelService=void 0;var a=r(3472),i=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("ILakeKernelService")}),t}(r(3475).KernelAbstractService);t.ILakeKernelService=i},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandState=t.COMMAND_UNKNOWN=t.COMMAND_EXECUTED=t.COMMAND_NOT_EXECUTED=t.COMMAND_UNAVAILABLE=void 0,t.COMMAND_UNAVAILABLE=-1,t.COMMAND_NOT_EXECUTED=0,t.COMMAND_EXECUTED=1,t.COMMAND_UNKNOWN=2,function(e){e[e.Unavailable=-1]="Unavailable",e[e.NotExecuted=0]="NotExecuted",e[e.Executed=1]="Executed",e[e.Unknown=2]="Unknown"}(t.CommandState||(t.CommandState={}))},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IHTMLKernelService=void 0;var a=r(3472),i=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("IHTMLKernelService")}),t}(r(3475).KernelAbstractService);t.IHTMLKernelService=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"table",toolbar:{tableCellBgColor:"tableCellBgColor",tableMergeCell:"tableMergeCell",tableVerticalAlign:"tableVerticalAlign",tableBorderVisible:"tableBorderVisible"},cardSelect:"table",command:{tableBorderVisible:"tableBorderVisible",tableClearContent:"tableClearContent",tableColumnMoveTo:"tableColumnMoveTo",tableColumnWidth:"tableColumnWidth",tableDeleteColumn:"tableDeleteColumn",tableDeleteRow:"tableDeleteRow",deleteTable:"deleteTable",tableEquallyColumn:"tableEquallyColumn",tableInsertBeforeColumn:"tableInsertBeforeColumn",tableInsertAfterColumn:"tableInsertAfterColumn",tableInsertBeforeRow:"tableInsertBeforeRow",tableInsertAfterRow:"tableInsertAfterRow",tableMergeCell:"tableMergeCell",moveTable:"moveTable",tableRowHeight:"tableRowHeight",tableRowMoveTo:"tableRowMoveTo",tableSpacing:"tableSpacing",tableCellBgColor:"tableCellBgColor",tableSetQueueNo:"tableSetQueueNo",table:"table",tableToggleWidthMode:"tableToggleWidthMode",tableUnmergeCell:"tableUnmergeCell",tableVerticalAlign:"tableVerticalAlign",tableRowHead:"tableRowHead",tableColHead:"tableColHead",tableColumnAdaptation:"tableColumnAdaptation"},attr:{colspan:"colspan",colSpan:"colSpan",col:"col",rowspan:"rowspan",rowSpan:"rowSpan",width:"width",height:"height",cellBgColor:"cellBgColor",verticalAlign:"verticalAlign",colHead:"colHead",rowHead:"rowHead"},node:{tableHole:"tableHole",table:"table",th:"th",td:"td",tr:"tr"}})},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"leaveNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),e}();t.default=n},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwrapID=t.wrapID=t.AbstractService=void 0;var n=function(){};t.AbstractService=n,t.wrapID=function(e){return{kind:"ServiceID",value:e,_:1}},t.unwrapID=function(e){return e.value}},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty;function o(e,t){return n.call(e,t)}function a(e){return!(e>=55296&&e<=57343)&&(!(e>=64976&&e<=65007)&&(65535!=(65535&e)&&65534!=(65535&e)&&(!(e>=0&&e<=8)&&(11!==e&&(!(e>=14&&e<=31)&&(!(e>=127&&e<=159)&&!(e>1114111)))))))}function i(e){if(e>65535){var t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}var u=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,l=new RegExp(u.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),c=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i,s=r(4299);var f=/[&<>"]/,d=/[&<>"]/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function h(e){return p[e]}var y=/[.?*+^$[\]\\(){}|-]/g;var b=r(4056);t.lib={},t.lib.mdurl=r(4300),t.lib.ucmicro=r(5207),t.assign=function(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach((function(r){e[r]=t[r]}))}})),e},t.isString=function(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)},t.has=o,t.unescapeMd=function(e){return e.indexOf("\\")<0?e:e.replace(u,"$1")},t.unescapeAll=function(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(l,(function(e,t,r){return t||function(e,t){var r;return o(s,t)?s[t]:35===t.charCodeAt(0)&&c.test(t)&&a(r="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10))?i(r):e}(e,r)}))},t.isValidEntityCode=a,t.fromCodePoint=i,t.escapeHtml=function(e){return f.test(e)?e.replace(d,h):e},t.arrayReplaceAt=function(e,t,r){return[].concat(e.slice(0,t),r,e.slice(t+1))},t.isSpace=function(e){switch(e){case 9:case 32:return!0}return!1},t.isWhiteSpace=function(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},t.isMdAsciiPunct=function(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},t.isPunctChar=function(e){return b.test(e)},t.escapeRE=function(e){return e.replace(y,"\\$&")},t.normalizeReference=function(e){return e=e.trim().replace(/\s+/g," "),"Ṿ"==="ẞ".toLowerCase()&&(e=e.replace(/ẞ/g,"ß")),e.toLowerCase().toUpperCase()}},,function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.KernelAbstractService=void 0;var a=function(e){function t(t,r,n){var o=e.call(this)||this;return Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(o,"editing",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:n}),o}return o(t,e),t}(r(3472).AbstractService);t.KernelAbstractService=a},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyRange=void 0;var n=r(3454),o=r(3546),a=r(3992);function i(e,t){for(;e;){if(e.parentNode===t)return e;e=e.parentNode}return null}t.verifyRange=function(e,t){void 0===t&&(t=!1);var r,u,l,c=e.start,s=e.end,f=e.collapsed;if((0,o.verifyPosition)(c,t),!f)if((0,o.verifyPosition)(s,t),c.node===s.node)n.assert.fatal(s.offset>c.offset,"end.offset is less than start.offset. end: ".concat(s.node.nodeName,"_").concat(s.offset,"_").concat(s.node.isConnected,", start: ").concat(c.node.nodeName,"_").concat(c.offset,"_").concat(c.node.isConnected),"framework/kernel/src/model/utils/range/helpers/verify-range.ts:20");else{var d=(0,a.compareNode)(c.node,s.node);if(d.preceding)return;n.assert.fatal(!d.equal&&!d.following,"framework/kernel/src/model/utils/range/helpers/verify-range.ts:31"),d.contains?n.assert.fatal((r=c,u=s.node,l=i(u,r.node),n.assert.fatal(l,"framework/kernel/src/model/utils/range/helpers/verify-range.ts:48"),l.offset>=r.offset),"framework/kernel/src/model/utils/range/helpers/verify-range.ts:34"):(n.assert.fatal(d.containedBy,"framework/kernel/src/model/utils/range/helpers/verify-range.ts:36"),n.assert.fatal(function(e,t){var r=i(t,e.node);return n.assert.fatal(r,"framework/kernel/src/model/utils/range/helpers/verify-range.ts:59"),r.offset<=e.offset}(s,c.node),"framework/kernel/src/model/utils/range/helpers/verify-range.ts:37"))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"list",node:{oli:"oli",uli:"uli",tli:"tli"},domNode:{oli:"ne-oli","oli-i":"ne-oli-i","oli-c":"ne-oli-c",tli:"ne-tli","tli-i":"ne-tli-i","tli-c":"ne-tli-c",uli:"ne-uli","uli-i":"ne-uli-i","uli-c":"ne-uli-c"},attr:{list:"list",fid:"fid",level:"level",index:"index",start:"start",indexStyle:"indexStyle",indexType:"indexType",parentIndex:"parentIndex",checked:"checked",version:"version"},service:{listDataProcessService:"IListDataProcessService"},command:{orderedList:"orderedList",unorderedList:"unorderedList",taskList:"taskList",orderedListIndexType:"orderedListIndexType",orderedListIndexQuery:"orderedListIndexQuery",taskStatus:"taskStatus"},toolbar:{orderedList:"orderedList",unorderedList:"unorderedList",taskList:"taskList",notetaskList:"notetaskList","note-taskList-black":"note-taskList-black"},cardSelect:{orderedList:"orderedList",unorderedList:"unorderedList",taskList:"taskList"}})},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LakeCardReader=void 0;var n=function(){function e(){}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),e}();t.LakeCardReader=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={MATH:{PLUGIN_NAME:"math",NODE_NAME:"math",UI_NAME:"math",OPTION_NAME:"math"},MENTION:{PLUGIN_NAME:"mention",NODE_NAME:"mention",UI_NAME:"mention",OPTION_NAME:"mention"},CODEBLOCK:{PLUGIN_NAME:"codeblock",NODE_NAME:"codeblock",UI_NAME:"codeblock",OPTION_NAME:"codeblock"},TEXT_DIAGRAM:{PLUGIN_NAME:"textDiagram",NODE_NAME:"textDiagram",UI_NAME:"text-diagram",OPTION_NAME:"textDiagram"},EMOJI:{PLUGIN_NAME:"emoji",NODE_NAME:"emoji",UI_NAME:"emoji",OPTION_NAME:"emoji",COMMAND:"emoji"},UNICODE_EMOJI:{PLUGIN_NAME:"unicodeEmoji",NODE_NAME:"unicodeEmoji",UI_NAME:"unicodeEmoji",OPTION_NAME:"unicodeEmoji",COMMAND:"unicodeEmoji"},CALENDAR:{NODE_NAME:"calendar",UI_NAME:"calendar",OPTION_NAME:"calendar",LAKE_NAME:"calendar"},VOTE:{NODE_NAME:"vote",UI_NAME:"vote",OPTION_NAME:"vote",LAKE_NAME:"vote"},FILE:{NODE_NAME:"file",UI_NAME:"file",OPTION_NAME:"file",LAKE_NAME:"file"},LOCKED_TEXT:{NODE_NAME:"lockedtext",UI_NAME:"lockedtext",OPTION_NAME:"lockedtext",LAKE_NAME:"lockedtext"},LOCAL_DOC:{NODE_NAME:"localdoc",UI_NAME:"localdoc",OPTION_NAME:"localdoc",LAKE_NAME:"localdoc"},AUDIO:{NODE_NAME:"audio",UI_NAME:"audio",OPTION_NAME:"audio"},VIDEO:{NODE_NAME:"video",UI_NAME:"video",OPTION_NAME:"video"},TRANSFER:{NODE_NAME:"transfer",UI_NAME:"transfer",OPTION_NAME:"transfer",LAKE_NAME:"transfer"},IFRAME_QUERY_FLAG:"_isCardInner",THREE:{NODE_NAME:"three",UI_NAME:"three",PLUGIN_NAME:"three",LAKE_NAME:"three"}};t.default=n},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SUMMARY=t.COLLAPSE=void 0,t.COLLAPSE="collapse",t.SUMMARY="summary"},,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_WIDTH=t.MAX_COLS=t.COLUMN=t.COLUMNS=void 0,t.COLUMNS="columns",t.COLUMN="column",t.MAX_COLS=6,t.MIN_WIDTH=.08},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CARD_TYPE=t.CARD_TYPE_DATA=t.CARD_TYPE_FORM=t.CARD_TYPE_DEVELOPMENT=t.CARD_TYPE_DESIGN=t.CARD_TYPE_MAP=t.CARD_TYPE_MEDIA_VIDEO=t.CARD_TYPE_MEDIA_AUDIO=t.CARD_TYPE_MEDIA=void 0,t.CARD_TYPE_MEDIA="media",t.CARD_TYPE_MEDIA_AUDIO="audio",t.CARD_TYPE_MEDIA_VIDEO="video",t.CARD_TYPE_MAP="map",t.CARD_TYPE_DESIGN="design",t.CARD_TYPE_DEVELOPMENT="development",t.CARD_TYPE_FORM="form",t.CARD_TYPE_DATA="data",t.CARD_TYPE={MEDIA:"media",MEDIA_AUDIO:"audio",MEDIA_VIDEO:"video",MAP:"map",DESIGN:"design",DEVELOPMENT:"development",FORM:"form",DATA:"data"}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3549),a=function(){function e(){}return Object.defineProperty(e,"getType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.prototype.constructor.config.type}}),Object.defineProperty(e,"isAvailable",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1!==this.prototype.constructor.config.available}}),Object.defineProperty(e,"getName",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.prototype.constructor.config.name}}),Object.defineProperty(e,"getExample",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.prototype.constructor.config.example}}),Object.defineProperty(e,"getHelp",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.prototype.constructor.config.help}}),Object.defineProperty(e,"getSimple",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.prototype.constructor.config.simple}}),Object.defineProperty(e,"getLabel",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.prototype.constructor.config.label}}),Object.defineProperty(e,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[]}}),Object.defineProperty(e,"getHeight",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.prototype.constructor.config.height||500}}),Object.defineProperty(e,"getResize",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.prototype.constructor.config.resize}}),Object.defineProperty(e,"getMaximize",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.prototype.constructor.config.maximize}}),Object.defineProperty(e,"getCardSelect",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.prototype.constructor,t=e.config,r=e.getKeywords,o=e.getMainSearch,a=r(),i=null==o?void 0:o(),u={type:"TextItem",icon:"card-".concat(t.name),label:t.label,name:t.name,keywords:Array.isArray(a)?a.join(","):a,recordDisable:!0};return i?n(n({},u),{mainSearch:i}):u}}),Object.defineProperty(e,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(e,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(e,"getPlaceholder",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.prototype.constructor.config,t=e.label,r=void 0===t?"":t,n=e.simple,a=/^[a-z]+$/i.test(r)?" ".concat(r," "):r,i="".concat((0,o.i18n)("粘贴")).concat(a).concat((0,o.i18n)("链接"));return n&&(i+="，".concat((0,o.i18n)("如")," ").concat(n)),i}}),Object.defineProperty(e,"getIframeAllow",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return null}}),Object.defineProperty(e,"config",{enumerable:!0,configurable:!0,writable:!0,value:{}}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IINodeReaderKernelService=void 0;var a=r(3472),i=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("IINodeReaderKernelService")}),t}(r(3475).KernelAbstractService);t.IINodeReaderKernelService=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"leaveNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),e}();t.default=n},,,function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var a=r(3454),i=r(3992),u=r(3756),l=r(4394),c=r(4138),s=r(4395),f=r(4396),d=r(4397),p=r(3560),h=r(4399),y=r(4139),b=r(4400),m=r(3993),v=function(){function e(){}return Object.defineProperty(e,"closest",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){for(;e;){if(e.hasCategory(t))return e;e=e.parent}return null}}),Object.defineProperty(e,"jsonToNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,h.jsonToNode)(e,t)}}),Object.defineProperty(e,"getAncestors",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,u.getAncestors)(e,t)}}),Object.defineProperty(e,"getAncestor",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){for(void 0===r&&(r=!1),a.assert.fatal(t.length>0,"invalid getAncestor","framework/kernel/src/model/utils/node/index.ts:63");e;){if(e.hasCategory(t,r))return e;if(e.isRootNode())return null;e=e.parent}return null}}),Object.defineProperty(e,"getCommonAncestor",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,l.getCommonAncestor)(e,t)}}),Object.defineProperty(e,"compare",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,i.compareNode)(e,t)}}),Object.defineProperty(e,"unwrapNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,b.unwrapNode)(e,t)}}),Object.defineProperty(e,"getHeadInputPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,c.getHeadInputPosition)(e)}}),Object.defineProperty(e,"getTailInputPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,s.getTailInputPosition)(e)}}),Object.defineProperty(e,"isLikeEmptyElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,p.isLikeEmptyElement)(e)}}),Object.defineProperty(e,"walkNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,m.walkNode)(e,t)}}),Object.defineProperty(e,"reverseWalkNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,y.reverseWalkNode)(e,t)}}),Object.defineProperty(e,"getTopNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,f.getTopNode)(e)}}),Object.defineProperty(e,"isInCollapsed",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!e.isConnected&&(0,d.isInCollapsed)(e)}}),Object.defineProperty(e,"isBelongsToHeadingNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.isBelongsToHeadingNode.apply(void 0,o([],n(e),!1))}}),Object.defineProperty(e,"getAncestorHeadingNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,d.getAncestorHeadingNodes)(e)}}),Object.defineProperty(e,"getHeadingNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,d.getHeadingNodes)(e)}}),Object.defineProperty(e,"isInHeadingCollapsed",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,d.isInHeadingCollapsed)(e,t)}}),Object.defineProperty(e,"getRootCollapsedNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,d.getRootCollapsedNode)(e,t)}}),Object.defineProperty(e,"getLastNodeBelongsToHeadingNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,d.getLastNodeBelongsToHeadingNode)(e)}}),Object.defineProperty(e,"getAllBelongsToHeadingNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,d.getAllBelongsToHeadingNode)(e)}}),e}();t.default=v},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3454),a=r(4143),i=r(4406),u=r(4408),l=/[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E\u00A1-\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65\uFFE5]/,c=/[\u3400-\u9FBF]/,s=/[A-z|0-9|\u00C0-\u00FF|\u0100-\u02AF|\u0370-\u03FF|\u1D00-\u1DBF|\u1E00-\u1FFF|\u2070-\u2079|\u2080-\u2089|\u2460-\u24FF|\u2776-\u2793|\u2100-\u218F|\u2200-\u22FF|\u2C60-\u2C7F|\uA720-\uA7FF]/,f=function(){function e(){}return Object.defineProperty(e,"isChineseChar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!e&&c.test(e)}}),Object.defineProperty(e,"isEnAndNumber",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!e&&s.test(e)}}),Object.defineProperty(e,"isPunc",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!e&&l.test(e)}}),Object.defineProperty(e,"splitEmoji",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,i.splitEmoji)(e)}}),Object.defineProperty(e,"codePointAt",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,a.codePointAt)(e,t)}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,a.fromCodePoint)(e)}}),Object.defineProperty(e,"codePointSize",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,a.codePointSize)(e)}}),Object.defineProperty(e,"splitString",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(0===t)return["",e];if(t>e.length)throw new Error("invalid");return[e.substring(0,t),e.substring(t)]}}),Object.defineProperty(e,"insertString",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,n){if(0===r)return n+t;var o=e.splitString(t,r);return o[0]+n+o[1]}}),Object.defineProperty(e,"deleteChar",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){void 0===n&&(n=1);var o=t.substring(0,r),a=t.substring(r);if("forward"===e){var u=(0,i.strToArray)(o);return(u=u.slice(0,u.length-n)).join("")+a}return o+(0,i.strToArray)(a).slice(n).join("")}}),Object.defineProperty(e,"deleteString",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return e.substring(0,t)+e.substring(r)}}),Object.defineProperty(e,"substring",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return e.substring(t,r)}}),Object.defineProperty(e,"replaceString",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return(0,o.assert)(t>=0&&r<=e.length,"framework/utils/src/strings/index.ts:126"),e.substring(0,t)+n+e.substring(r)}}),Object.defineProperty(e,"replaceSourceText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(!e)return e;var o=e.split(t);return n>=o.length-1?e:o.reduce((function(e,o,a){return 0===a?o:a===n+1?e+r+o:e+t+o}),"")}}),Object.defineProperty(e,"replaceAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return void 0===n&&(n=!0),u.StringQuery.replaceAll(e,t,r,n)}}),Object.defineProperty(e,"search",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return void 0===r&&(r=!1),u.StringQuery.matchAll(e,t,r)}}),Object.defineProperty(e,"splitByRanges",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,o,a=0,i=[];try{for(var u=n(t),l=u.next();!l.done;l=u.next()){var c=l.value;i.push(e.substring(a,c.from)),i.push(e.slice(c.from,c.to)),a=c.to}}catch(e){r={error:e}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}return i.push(e.slice(a)),i}}),Object.defineProperty(e,"replaceRange",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return e.substring(0,t.from)+r+e.substring(t.to)}}),Object.defineProperty(e,"size",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.length}}),e}();t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LakeNodeWriter=void 0;var n=function(){function e(){}return Object.defineProperty(e.prototype,"leaveNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){}}),e}();t.LakeNodeWriter=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!0}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),e}();t.default=n},,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"columns",service:{IColumnsKernelService:"IColumnsKernelService"},command:{columns:"columns",columnsWidths:"columnsWidths",columnsAddColumn:"columnsAddColumn",columnDelete:"columnDelete",columnDeleteByIndex:"columnDeleteByIndex",selectColumnEnd:"selectColumnEnd",deleteColumns:"deleteColumns",moveColumns:"moveColumns",moveColumn:"moveColumn",columnsToggleWidthMode:"columnsToggleWidthMode"},node:{columns:"columns",column:"column"},lakeNode:{article:"article"},htmlNode:{article:"article"},domNode:{columns:"ne-columns",column:"ne-column",columnsContent:"ne-columns-content",columnContent:"ne-column-content",columnBorder:"ne-column-border",columnHover:"ne-column-hover",columnController:"ne-column-controller"},attr:{width:"width"},cardSelect:{columns:"columns",columns2:"columns2",columns3:"columns3",columns4:"columns4",columns5:"columns5",columns6:"columns6"}})},,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloneObject=void 0;var n=r(3454);t.cloneObject=function e(t){var r=typeof t;if(null===t||"string"===r||"number"===r||"undefined"===r||"boolean"===r||"function"===r)return t;if((0,n.assert)("object"===r,"framework/utils/src/clone-object.ts:17"),Array.isArray(t))return t.map((function(t){return e(t)}));(0,n.assert)("[object Object]"===Object.prototype.toString.call(t),"framework/utils/src/clone-object.ts:23");var o={};return Object.keys(t).forEach((function(r){o[r]=e(t[r])})),o}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(3320)),l=r(3454),c=r(3511),s=r(3518),f=r(3561),d=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"_cardValue",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(n,"_pluginOption",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._resetCardValue(t),n._pluginOption=r||null,n}return o(t,e),Object.defineProperty(t,"setCardSpacingToValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return l.assert.fatal(t,"framework/kernel/src/public/card-data.ts:34"),a(a({},t),{__spacing:e})}}),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.removeAllListeners()}}),Object.defineProperty(t.prototype,"cardAlias",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pluginOption",{get:function(){return this._pluginOption},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resetCardValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!1),l.assert.fatal("boolean"==typeof t,"framework/kernel/src/public/card-data.ts:80"),this._resetCardValue(e,t),this.afterChange(t)}}),Object.defineProperty(t.prototype,"formatCardValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.constructor.DefaultCardValue;return a(a({},(0,c.cloneObject)(t)),e)}}),Object.defineProperty(t.prototype,"getCardValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return a({},this._cardValue)}}),Object.defineProperty(t.prototype,"afterChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=!0),this.emit("change",e)}}),Object.defineProperty(t.prototype,"setCardSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e!==this._cardValue.__spacing&&(e?this._cardValue.__spacing=e:delete this._cardValue.__spacing,this.emit("spacingChange"))}}),Object.defineProperty(t.prototype,"addCardTopSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._cardValue.__spacing;e?e===s.CARD_SPACING.BOTTOM&&(this._cardValue.__spacing=s.CARD_SPACING.BOTH,this.emit("spacingChange")):(this._cardValue.__spacing=s.CARD_SPACING.TOP,this.emit("spacingChange"))}}),Object.defineProperty(t.prototype,"removeCardTopSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._cardValue.__spacing;e===s.CARD_SPACING.BOTH?(this._cardValue.__spacing=s.CARD_SPACING.BOTTOM,this.emit("spacingChange")):e===s.CARD_SPACING.TOP&&(delete this._cardValue.__spacing,this.emit("spacingChange"))}}),Object.defineProperty(t.prototype,"addCardBottomSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._cardValue.__spacing;e?e===s.CARD_SPACING.TOP&&(this._cardValue.__spacing=s.CARD_SPACING.BOTH,this.emit("spacingChange")):(this._cardValue.__spacing=s.CARD_SPACING.BOTTOM,this.emit("spacingChange"))}}),Object.defineProperty(t.prototype,"removeCardBottomSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._cardValue.__spacing;e===s.CARD_SPACING.BOTH?(this._cardValue.__spacing=s.CARD_SPACING.TOP,this.emit("spacingChange")):e===s.CARD_SPACING.BOTTOM&&(delete this._cardValue.__spacing,this.emit("spacingChange"))}}),Object.defineProperty(t.prototype,"toggleCardSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._cardValue.__spacing?delete this._cardValue.__spacing:this._cardValue.__spacing=s.CARD_SPACING.BOTH,this.emit("spacingChange")}}),Object.defineProperty(t.prototype,"getWidthMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;return(null===(e=this._cardValue)||void 0===e?void 0:e.__widthMode)===f.WIDTH_MODE_CONTAIN?f.WIDTH_MODE_CONTAIN:f.WIDTH_MODE_NORMAL}}),Object.defineProperty(t.prototype,"toggleWidthMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=(null===(e=this._cardValue)||void 0===e?void 0:e.__widthMode)===f.WIDTH_MODE_CONTAIN?f.WIDTH_MODE_NORMAL:f.WIDTH_MODE_CONTAIN;this._cardValue.__widthMode=t,this.emit("widthModeChange",t)}}),Object.defineProperty(t.prototype,"removeCardSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._cardValue.__spacing,this.emit("spacingChange")}}),Object.defineProperty(t.prototype,"getCardSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.__spacing}}),Object.defineProperty(t.prototype,"hasCardSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.__spacing===s.CARD_SPACING.BOTH}}),Object.defineProperty(t.prototype,"hasCardTopSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._cardValue.__spacing;return e===s.CARD_SPACING.BOTH||e===s.CARD_SPACING.TOP}}),Object.defineProperty(t.prototype,"hasCardBottomSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._cardValue.__spacing;return e===s.CARD_SPACING.BOTH||e===s.CARD_SPACING.BOTTOM}}),Object.defineProperty(t.prototype,"__getCardValueWithNewHeight",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return a(a({},this._cardValue),{__height:e})}}),Object.defineProperty(t.prototype,"recoverCardHeight",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._cardValue.__height,this.emit("cardHeightReset")}}),Object.defineProperty(t.prototype,"getCardHeight",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.__height}}),Object.defineProperty(t.prototype,"sync",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!!e}}),Object.defineProperty(t.prototype,"_resetCardValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o;void 0===e&&(e={}),void 0===t&&(t=!1);var a=!!this._cardValue,i=p(e.__height),u=p(null===(r=this._cardValue)||void 0===r?void 0:r.__height),c=e.__spacing,s=null===(n=this._cardValue)||void 0===n?void 0:n.__spacing,f=e.__widthMode,d=null===(o=this._cardValue)||void 0===o?void 0:o.__widthMode;this._cardValue=this.formatCardValue(e),l.assert.fatal(this._cardValue&&"object"==typeof this._cardValue,"framework/kernel/src/public/card-data.ts:275"),a&&i!==u&&this.emit("heightChange",{newHeight:i,oldHeight:u}),a&&s!==c&&this.emit("spacingChange"),a&&f!==d&&this.emit("widthModeChange",f)}}),t}(u.default);function p(e){if(null!==e)return e}t.default=d},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralCommandV2=void 0;var i=r(3465),u=r(3457),l=a(r(3755)),c=a(r(3714)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return t.rangeCount>1||c.default.isInCard(t)||c.default.isInHole(t)?i.COMMAND_UNAVAILABLE:i.COMMAND_NOT_EXECUTED}}),t}(u.KernelAbstractCommand);t.GeneralCommandV2=s;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return t.rangeCount>1||c.default.isInCard(t)||c.default.isInHole(t)?i.COMMAND_UNAVAILABLE:i.COMMAND_NOT_EXECUTED}}),t}(l.default);t.default=f},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=function(){function e(e,t){void 0===t&&(t=0),Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_offset",{enumerable:!0,configurable:!0,writable:!0,value:t})}return Object.defineProperty(e,"equal",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e===t||e._node===t._node&&e._offset===t._offset}}),Object.defineProperty(e.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAtStart",{get:function(){return 0===this._offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAtEnd",{get:function(){return this._node.isElement()?this._node.childCount===this._offset:!!this._node.isCardNode()||(n.assert.fatal(this._node.isTextNode(),"framework/kernel/src/model/selection/position.ts:44"),this._node.dataLength===this._offset)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clone",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new e(this._node,this._offset)}}),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeType=void 0,function(e){e.Element="element",e.Card="card",e.Text="text"}(t.NodeType||(t.NodeType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CARD_SPACING=t.CARD_SPACING_BOTTOM=t.CARD_SPACING_TOP=t.CARD_SPACING_BOTH=void 0,t.CARD_SPACING_BOTH="both",t.CARD_SPACING_TOP="top",t.CARD_SPACING_BOTTOM="bottom",function(e){e.BOTH="both",e.TOP="top",e.BOTTOM="bottom"}(t.CARD_SPACING||(t.CARD_SPACING={}))},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IMarkdownKernelService=t.TriggerType=void 0;var a=r(3472),i=r(3475),u=r(4190);!function(e){e.whiteSpace="whiteSpace",e.enter="enter"}(t.TriggerType||(t.TriggerType={}));var l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)(u.pluginRegister.service.IMarkdownKernelService)}),t}(i.KernelAbstractService);t.IMarkdownKernelService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractSrc=void 0;var n=null;t.extractSrc=function(e){n||(n=new DOMParser);try{var t=n.parseFromString(e,"text/html");if(!t.body)return null;var r=t.body.firstChild;if("IFRAME"!==(null==r?void 0:r.nodeName))return null;if(r)return r.src.startsWith("//")?"http:"+r.src:r.src}catch(e){return null}return null}},,function(e,t,r){var n=r(529),o=r(250),a=r(852),i=r(505),u=r(3483),l=r(939),c=a((function(e){var t=l(e);return u(t)&&(t=void 0),i(n(e,1,u,!0),o(t,2))}));e.exports=c},,,,function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3454),a=n(r(3516)),i=n(r(3497)),u=function(){function e(e,t){Object.defineProperty(this,"_start",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_end",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_collapsed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._start=e,this._end=t||e,this._collapsed=a.default.equal(e,this._end)}return Object.defineProperty(e,"createAt",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return new e(t,r)}}),Object.defineProperty(e,"selectNodeContents",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(t.isElement())return e.createAt(new a.default(t,0),new a.default(t,t.childCount));if(t.isTextNode())return e.createAt(new a.default(t,0),new a.default(t,t.dataLength));if(t.isCardNode())return e.createAt(new a.default(t,0));throw new Error("invalid range")}}),Object.defineProperty(e,"selectNode",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return o.assert.fatal(t.isConnected,"framework/kernel/src/model/selection/range.ts:44"),t.isRootNode()?e.createAt(new a.default(t,0),new a.default(t,t.childCount)):e.createAt(new a.default(t.parentNode,t.offset),new a.default(t.parentNode,t.offset+1))}}),Object.defineProperty(e,"equal",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!(!e||!t)&&(e===t||a.default.equal(e.start,t.start)&&a.default.equal(e.end,t.end))}}),Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"collapsed",{get:function(){return this._collapsed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commonAncestorContainer",{get:function(){if(this._collapsed)return this._start.node;for(var e=i.default.getAncestors(this._start.node),t=i.default.getAncestors(this._end.node),r=Math.min(e.length,t.length),n=0;n<r;n++)if(e[n]!==t[n])return e[n].parentNode;return e[r-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cloneRange",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new e(this._start,this._end)}}),e}();t.default=u},,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyPosition=t.AT_ROOT=t.AT_TEXT=void 0;var n=r(3454),o=r(3459);t.AT_TEXT=1,t.AT_ROOT=2,t.verifyPosition=function(e,r){void 0===r&&(r=!1),n.assert.fatal(e&&e.node.isConnected,"framework/kernel/src/model/utils/position/helpers/verify-position.ts:13");var a=r?3:0;e.node.isCardNode()?n.assert.fatal(0===e.offset,"framework/kernel/src/model/utils/position/helpers/verify-position.ts:18"):e.node.isTextNode()?n.assert.fatal(e.offset>=0&&e.offset<=e.node.data.length,"position.offset: ".concat(e.offset," is out of range, node.data.length: ").concat(e.node.data.length,", connected: ").concat(e.node.isConnected),"framework/kernel/src/model/utils/position/helpers/verify-position.ts:23"):(n.assert.fatal(e.node.isElement()&&e.offset>=0&&e.offset<=e.node.childCount,"framework/kernel/src/model/utils/position/helpers/verify-position.ts:28"),!0===r||0!=((t.AT_TEXT|t.AT_ROOT)&a)?n.assert.fatal(e.node.hasCategory([o.Category.TextContainer,o.Category.Root,o.Category.LikeRoot,o.Category.TableHole,o.Category.Hole]),"framework/kernel/src/model/utils/position/helpers/verify-position.ts:36"):r&&(0!=(t.AT_TEXT&a)?n.assert.fatal(e.node.hasCategory(o.Category.TextContainer),"framework/kernel/src/model/utils/position/helpers/verify-position.ts:50"):0!=(t.AT_ROOT&r)&&n.assert.fatal(e.node.hasCategory([o.Category.Root,o.Category.LikeRoot,o.Category.TableHole,o.Category.Hole]),"framework/kernel/src/model/utils/position/helpers/verify-position.ts:53")))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LakeNodeReader=void 0;var n=function(){};t.LakeNodeReader=n},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Theme=t.DefaultThemeSchema=t.colorRegistry=t.ColorRegistry=t.i18n=t.Locale=t.langEvent=t.LANG_EVENT_MAP=t.TaskObserver=t.VirtualTask=t.TaskManager=t.TaskThread=t.BaseTask=t.ColorScheme=void 0;var u=r(3925);Object.defineProperty(t,"ColorScheme",{enumerable:!0,get:function(){return u.ColorScheme}});var l=i(r(4033));t.BaseTask=l.default;var c=i(r(4266));t.TaskThread=c.default;var s=i(r(5019));t.TaskManager=s.default;var f=i(r(4267));t.VirtualTask=f.default;var d=i(r(5020));t.TaskObserver=d.default;var p=r(4239);Object.defineProperty(t,"LANG_EVENT_MAP",{enumerable:!0,get:function(){return p.LANG_EVENT_MAP}}),Object.defineProperty(t,"langEvent",{enumerable:!0,get:function(){return p.langEvent}});var h=a(r(3721));t.Locale=h.default,Object.defineProperty(t,"i18n",{enumerable:!0,get:function(){return h.i18n}});var y=a(r(3924));t.colorRegistry=y.default,Object.defineProperty(t,"ColorRegistry",{enumerable:!0,get:function(){return y.ColorRegistry}});var b=i(r(4268));t.DefaultThemeSchema=b.default;var m=i(r(5021));t.Theme=m.default},,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));r(144);var n=r(60),o=r(0),a=r.n(o),i=r(11),u=r(43),l=r(202),c=r(248),s=r(189),f=["group","size","placement","getPopupContainer"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(null,arguments)}var p=function(e){var t,r,o,s=e.group,p=e.size,h=e.placement,y=e.getPopupContainer,b=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,f);h=h||"top",p=p||14;var m=(null===(t=window.appData)||void 0===t?void 0:t.organization)||(null===(r=window.appData)||void 0===r?void 0:r.currentOrganization)||s.organization||{id:s.organization_id},v=Object(l.c)({type:"group",target:s,group:s,org:m}),g=Object(l.d)({privacy:v,type:"group",organization:m,group:s});return a.a.createElement(n.a,{title:a.a.createElement("span",null,g,!Object(c.h)(s)&&(null===(o=s.abilities)||void 0===o?void 0:o.manage)&&a.a.createElement("a",{onClick:function(e){e.stopPropagation(),window.open("/".concat(s.login,"/settings/permission"))},style:{marginLeft:12}},__("切换公开性"))),getPopupContainer:y,placement:h},a.a.createElement("span",{className:"name-lock"},a.a.createElement(u.b,d({},b,{name:v!==i.PRIVACY.private?"icon-public":(null==s||s.extend_private,i.EXTEND_PRIVATE.BIND_DEPARTMENTS,"permission-private"),width:p,height:p}))))},h=function(e){return a.a.createElement(s.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement("span",{"data-test-id":"group-access-scope"})}},a.a.createElement(p,e))}},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLikeEmptyElement=void 0;var n=r(3454),o=r(3459);t.isLikeEmptyElement=function e(t){return t.isTextNode()?0===t.dataLength:!t.isCardNode()&&(!t.hasCategory([o.Category.Table,o.Category.TableRow,o.Category.TableCell])&&(n.assert.fatal(t.isElement(),"framework/kernel/src/model/utils/node/is-like-empty-element.ts:25"),!!t.isEmpty()||t.children.every((function(t){return e(t)}))))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WIDTH_MODE_CONTAIN=t.WIDTH_MODE_NORMAL=void 0,t.WIDTH_MODE_NORMAL="normal",t.WIDTH_MODE_CONTAIN="contain"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"basicTextStyle",attr:{bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough"},toolbar:{bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough"},command:{bold:"bold",italic:"italic",underline:"underline",strikethrough:"strikethrough"},service:{IBasicTextStyleKernelService:"IBasicTextStyleKernelService"}})},,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(0),o=r.n(n),a=r(295),i=Object(a.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(4),r.e(1257)]).then(r.bind(null,3870))}),{suspense:!0});function u(e){return o.a.createElement(i,e,e.children)}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateNodeId=void 0;var n=r(3597);t.generateNodeId=function(){return(0,n.uuid)(9)}},,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=void 0;var n=r(4063),o={};t.uuid=function(e){var t;void 0===e&&(e=36);do{t="u"+(0,n.v4)().substring(0,e-1)}while(!t||o[t]);return o[t]=!0,t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasOwnProperty=void 0;var n=Object.prototype.hasOwnProperty;t.hasOwnProperty=function(e,t){return!!e&&n.call(e,t)}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3454),l=r(3511),c=i(r(4192)),s=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],f=function(){function e(){}return Object.defineProperty(e,"createElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=void 0===t?{}:t;return{type:"element",name:e,attrs:r.attrs,style:r.style,className:r.className}}}),Object.defineProperty(e,"createTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=void 0===t?{}:t;return{type:"text",name:"#text",plain:!1,data:e,attrs:r.attrs,style:r.style,className:r.className}}}),Object.defineProperty(e,"createPlainTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=e.createTextNode(t);return r.plain=!0,r}}),Object.defineProperty(e,"updateAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=void 0===t?{}:t,i=r.attrs,u=r.style,l=r.className;if(i&&(e.attrs=n(n({},e.attrs),i)),u&&(e.style=n(n({},e.style),u)),l){var c=[];c=Array.isArray(l)?l:[l],c=Array.from(new Set(a(a([],o(e.className||[]),!1),o(c),!1))),e.className=c}}}),Object.defineProperty(e,"appendChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){(0,u.assert)("#text"!==e.name,"framework/utils/src/dom/html-node-helper.ts:113"),e.children||(e.children=[]),e.children.push(t)}}),Object.defineProperty(e,"setChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.children=a([],o(t),!1)}}),Object.defineProperty(e,"isLikeEmpty",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return"text"===t.type?0===t.data.length:"element"===t.type&&(!t.children||0===t.children.length||t.children.every((function(t){return e.isLikeEmpty(t)})))}}),Object.defineProperty(e,"toHTML",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return d(e)}}),Object.defineProperty(e,"setAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){e.attrs||(e.attrs={}),e.attrs[t]=r}}),Object.defineProperty(e,"removeAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.attrs&&delete e.attrs[t]}}),Object.defineProperty(e,"removeAllAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){delete e.attrs}}),Object.defineProperty(e,"removeAllStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){delete e.style}}),Object.defineProperty(e,"cloneNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={type:e.type,name:e.name,attrs:(0,l.cloneObject)(e.attrs),style:(0,l.cloneObject)(e.style),className:(0,l.cloneObject)(e.className)};return e.data&&(t.data=e.data),t}}),Object.defineProperty(e,"formatStyleName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return h(e)}}),e}();function d(e){if("text"===e.type)return function(e){var t=e.data,r=void 0===t?"":t;r=c.default.encodeHTML(r),e.plain||(r=r.replace(/\n/g,"<br />"));var n=e.attrs,o=e.style,a=e.className,i=p(n,o,a);if(!i)return r||"";return"<span ".concat(i,">").concat(r,"</span>")}(e);var t;(0,u.assert)("element"===e.type,"framework/utils/src/dom/html-node-helper.ts:202"),e.children&&(t=e.children.map((function(e){return d(e)})));var r=o(function(e){var t=e.name,r=e.attrs,n=e.style,o=e.className;(0,u.assert)(t,"framework/utils/src/dom/html-node-helper.ts:219");var a=["<".concat(t)],i=p(r,n,o);i&&a.push(" "+i);if(a.push(">"),s.includes(t))return[a.join(""),""];return[a.join(""),"</".concat(t,">")]}(e),2),n=r[0],a=r[1];return n+(t?t.join(""):"")+a}function p(e,t,r){var n=[],o=[];if(e&&Object.keys(e).forEach((function(t){if("class"!==t&&"style"!==t){var r=e[t];void 0!==r&&n.push(c.default.encodeHTML(t)+'="'+c.default.encodeHTML(r+"")+'"')}})),t&&Object.keys(t).forEach((function(e){var r=t[e];void 0!==r?o.push("".concat(h(e),": ").concat(r)):console.warn("warning: invalid style value for "+e)})),r&&r.length)if(Array.isArray(r))r=r.filter((function(e){return!!e})).map((function(e){return e.trim()})),n.push('class="'.concat(c.default.encodeHTML(r.join(" ")),'"'));else{var a=r.trim();a&&n.push('class="'.concat(c.default.encodeHTML(a),'"'))}var i=[];return n.length&&i.push(n.join(" ")),o.length&&i.push('style="'+c.default.encodeHTML(o.join("; "))+'"'),i.join(" ")}function h(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))}t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"card",command:{setCardValue:"setCardValue",insertCard:"insertCard",focusCard:"focusCard",deleteCard:"deleteCard",cardValue:"cardValue",moveCard:"moveCard",cardIsExist:"cardIsExist",cardBatchApply:"cardBatchApply"}})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ITextDataSourceKernelService=void 0;var a=r(3472),i=r(3475),u=r(3926),l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)(u.pluginRegister.service.ITextDataSourceKernelService)}),t}(i.KernelAbstractService);t.ITextDataSourceKernelService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"collapse",node:"collapse",command:{collapse:"collapse",moveCollapse:"moveCollapse",deleteCollapse:"deleteCollapse",collapseOpen:"collapseOpen",collspseClosable:"collspseClosable",collapseBreakLine:"collapseBreakLine",collapseToggleWidthMode:"collapseToggleWidthMode",tryUnfoldCollapse:"tryUnfoldCollapse"},cardSelect:"collapse"})},,function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var i=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__=t},(t=[{key:"_stringify",value:function(e){return null==e||"number"==typeof e&&isNaN(e)?e="":"string"!=typeof e&&(e=String(e)),e}}])&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();t.BaseValidatorClass=i},,,,,,,,,,,,,,,function(e,t,r){"use strict";r(3341);var n=r(2801);r(3323);t.a=n.a},,,,,,,,,,function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(3459),t),o(r(4137),t),o(r(4398),t)},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.splitTextNode=t.SPLIT_TO_EMPTY_TEXT=t.SPLIT_TO_BEHIND=t.SPLIT_TO_FRONT=t.SPLIT_TO_BETWEEN=void 0;var a=r(3454),i=o(r(3498));t.SPLIT_TO_BETWEEN="between",t.SPLIT_TO_FRONT="front",t.SPLIT_TO_BEHIND="behind",t.SPLIT_TO_EMPTY_TEXT="empty_text",t.splitTextNode=function(e,r,o){void 0===o&&(o=t.SPLIT_TO_BETWEEN);var u=r.node,l=r.offset;return u.isTextNode()?0===l?function(e,r,n){if(n===t.SPLIT_TO_BETWEEN)return e.newPosition(r.parentNode,r.offset);if(n===t.SPLIT_TO_FRONT||n===t.SPLIT_TO_BEHIND)return e.newPosition(r,0);a.assert.fatal(n===t.SPLIT_TO_EMPTY_TEXT,"framework/kernel/src/model/utils/position/helpers/split-text-node.ts:54");var o=r.cloneNode(!1);return e.setTextNodeData(o,""),e.insertBefore(r.parentNode,o,r),e.newPosition(o,0)}(e,u,o):l===i.default.size(u.data)?function(e,r,n){if(n===t.SPLIT_TO_BETWEEN)return e.newPosition(r.parentNode,r.offset+1);if(n===t.SPLIT_TO_FRONT||n===t.SPLIT_TO_BEHIND)return e.newPosition(r,0);a.assert.fatal(n===t.SPLIT_TO_EMPTY_TEXT,"framework/kernel/src/model/utils/position/helpers/split-text-node.ts:77");var o=r.cloneNode(!1);return e.setTextNodeData(o,""),e.insertAfter(r.parentNode,o,r),e.newPosition(o,0)}(e,u,o):function(e,r,o,u){var l=n(i.default.splitString(r.data,o),2),c=l[0],s=l[1];a.assert.fatal(c&&s,"framework/kernel/src/model/utils/position/helpers/split-text-node.ts:95");var f=r.cloneNode(!1);e.setTextNodeData(r,c),e.setTextNodeData(f,s),e.insertAfter(r.parentNode,f,r);var d=e.editing.kernel.getExtend("text_helper");d&&d.afterSplitText(e,r,f);if(u===t.SPLIT_TO_BETWEEN)return e.newPosition(r.parentNode,r.offset+1);if(u===t.SPLIT_TO_FRONT)return e.newPosition(r,o);if(u===t.SPLIT_TO_BEHIND)return e.newPosition(f,0);a.assert.fatal(u===t.SPLIT_TO_EMPTY_TEXT,"framework/kernel/src/model/utils/position/helpers/split-text-node.ts:120");var p=r.cloneNode(!1);return e.setTextNodeData(p,""),e.insertAfter(r.parentNode,p,r),e.newPosition(p,0)}(e,u,l,o):r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fullWalkRange=void 0;var n=r(3454),o=r(3712),a=r(3756),i=r(3459);function u(e,t,r){var n=e.nextSibling;return n&&c(n,t,r)?n:null}function l(e,t,r){if(!e.isElement())return null;for(var n=e.firstChild;n;){if(c(n,t,r))return n;n=n.nextSibling}return n}function c(e,t,r){for(var n=e.getPath(),o=0,a=Math.min(n.length,t.length);o<a;o++){if(n[o]<t[o])return!1;if(n[o]>t[o])break}var i=r[r.length-1],u=r.slice(0,-1);for(o=0,a=Math.min(n.length,u.length);o<a;o++){if(n[o]<u[o])return!0;if(n[o]!==u[o])return!1}var l=n[r.length-1];return void 0===l||l<i}t.fullWalkRange=function(e,t){var r=t||{},c=r.enter,s=r.leave;(c||s)&&(c=c||function(){},s=s||function(){},e.collapsed?function(e,t,r){for(var n=e.node,o=(0,a.getAncestors)(n,[i.Category.Root,i.Category.LikeRoot]),u=[],l=0,c=o.length;l<c;l++){var s=o[l];if(u.push(s),!1===t(s))break}u.reverse().forEach((function(e){r(e)}))}(e.start,c,s):function(e,t,r){var a=e.commonAncestorContainer,c=(0,o.closest)(a,[i.Category.Root,i.Category.LikeRoot]),s=function(e,t){if(e===t)return[e];var r=[];for(;e!==t;)r.push(e),e=e.parentNode;return r.push(t),r.reverse()}(a,c);n.assert.fatal(s[s.length-1]===a,"framework/kernel/src/model/utils/range/full-walk-range.ts:60"),function(e,t,r,o){var a=new Set,i=new Set,c=e.pop(),s=t.start.node.getPath(),f=t.end.node.getPath(),d=r,p=o;r=function(e){return n.assert.fatal(!a.has(e),"framework/kernel/src/model/utils/range/full-walk-range.ts:83"),a.add(e),d(e)},o=function(e){return n.assert.fatal(!i.has(e)&&a.has(e),"framework/kernel/src/model/utils/range/full-walk-range.ts:91"),i.add(e),p(e)},t.start.node.isElement()?s.push(t.start.offset):s.push(t.start.node.offset);t.end.node.isElement()?f.push(t.end.offset):f.push(t.end.node.offset+1);for(var h=[],y=!0,b=0,m=e.length;b<m;b++){var v=e[b];if(h.push(v),!1===r(v)){y=!1;break}}y&&function(e,t,r,o,a){var i=[e],c=e;for(;c;){if(!1!==o(c)){var s=l(c,t,r);if(s){c=s,i.push(s);continue}}for(c=null;i.length;){var f=i.pop();a(f);var d=u(f,t,r);if(d){c=d,i.push(d);break}}}n.assert.fatal(0===i.length,"framework/kernel/src/model/utils/range/full-walk-range.ts:172")}(c,s,f,r,o);for(b=h.length-1;b>=0;b--)o(h[b]);n.assert.fatal(a.size===i.size,"framework/kernel/src/model/utils/range/full-walk-range.ts:132")}(s,e,t,r)}(e,c,s))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OperationType=void 0,function(e){e.Insert="insert",e.Remove="remove",e.Move="move",e.UpdateText="update_text",e.AddAttr="add_attr",e.RemoveAttr="remove_attr",e.UpdateAttr="update_attr"}(t.OperationType||(t.OperationType={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SOURCE_FROM_MATERIAL_LIBRARY=t.SOURCE_FROM_UI=t.SOURCE_FROM_DROP=t.SOURCE_FROM_PASTE=t.SOURCE_FROM_INIT=void 0,t.SOURCE_FROM_INIT="init",t.SOURCE_FROM_PASTE="paste",t.SOURCE_FROM_DROP="drop",t.SOURCE_FROM_UI="ui",t.SOURCE_FROM_MATERIAL_LIBRARY="materialLibrary"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"image",cardName:"image",command:{image:"image",imageTask:"imageTask",moveImage:"moveImage",insertImage:"insertImage",imageTitleBreakLine:"imageTitleBreakLine",updateImageData:"updateImageData",insertAfterImage:"insertAfterImage"},toolbar:{image:"image",noteImage:"note-image",noteImageBlack:"note-image-black"},cardSelect:"image"})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3472),i=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("IMarkdownService")}),t}(r(3475).KernelAbstractService);t.default=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownDataSourcePlugin=t.IMarkdownService=t.pluginRegister=void 0;var o=r(4209);Object.defineProperty(t,"pluginRegister",{enumerable:!0,get:function(){return o.pluginRegister}});var a=n(r(3635));t.IMarkdownService=a.default;var i=n(r(4210));t.MarkdownDataSourcePlugin=i.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"color",attr:{color:"color"},toolbar:{color:"color"},command:{color:"color",clearColor:"clearColor"},service:{IColorKernelService:"IColorKernelService"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"link",node:"link",toolbar:"link",command:{link:"link",unlink:"unlink",insertLink:"insertLink",linkText:"linkText",updateLink:"updateLink",cardToLink:"cardToLink",selectionPureLink:"selectionPureLink"},cardSelect:"link"})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),e}();t.default=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var i=r(1103),u=r(359),l=r(2736),c=r(3604).BaseValidatorClass,s=r(3753).MobileValidatorClass,f=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/,d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"httpURL",value:function(e){e=this._stringify(e);try{var t=new URL(e);if("https:"!==t.protocol&&"http:"!==t.protocol)throw new Error("protocol error")}catch(e){return this.__("请输入正确的 HTTP(s) URL 地址")}}},{key:"alphanumeric",value:function(e){if(!(e=this._stringify(e))||!i.isAlphanumeric(e))return this.__("必须都是字符和数字")}},{key:"numeric",value:function(e){if(!(e=this._stringify(e))||!i.isNumeric(e))return this.__("必须都是数字字符")}},{key:"decimal",value:function(e){if(!(e=this._stringify(e))||!i.isDecimal(e))return this.__("必须是小数或者整数")}},{key:"mobileCode",value:function(e,t){if("string"!=typeof e)return this.__("必须是字符串");if(!i.isNumeric(e))return this.__("必须都是数字字符");var r=t&&t.min||4;return e.length<r?this.__("至少 {s} 个数字",{s:r}):void 0}},{key:"IP",value:function(e){if(!(e=this._stringify(e))||!i.isIP(e))return this.__("必须是 IP v4 或者 v6 格式")}},{key:"IPv4",value:function(e){if(!(e=this._stringify(e))||!i.isIP(e,4))return this.__("必须是 IP v4 格式")}},{key:"IPv6",value:function(e){if(!(e=this._stringify(e))||!i.isIP(e,6))return this.__("必须是 IP v6 格式")}},{key:"bookPublic",value:function(e){if("number"!=typeof e){if(!(e=this._stringify(e))||!i.isNumeric(e))return this.__("public 参数只允许是 0、1 或者 2");e=parseInt(e)}var t=u.book.PUBLIC;if(e!==t.public&&e!==t.private&&e!==t.intranet)return this.__("public 参数只允许是 0、1 或者 2")}},{key:"starType",value:function(e){if(e){var t=["Book","Design"];return t.includes(e)?void 0:this.__("type 参数只允许为 {s}",{s:t.join(", ")})}}},{key:"searchPage250",value:function(e){if("number"!=typeof e){if(!(e=this._stringify(e))||!i.isNumeric(e))return this.__("只允许是正整数并且要小于等于 250");e=parseInt(e)}if(e<1||e>250||isNaN(e))return this.__("只允许是正整数并且要小于等于 250")}},{key:"isEmail",value:function(e){return e=this._stringify(e),i.isEmail(e)}},{key:"isUser",value:function(e){return e=this._stringify(e),/^[A-Za-z0-9][A-Za-z0-9\-_\.]{1,64}$/.test(e)}},{key:"isoDate",value:function(e){if(!e||!f.test(e))return this.__("必须是符合 ISO Date 格式的字符串")}},{key:"looseUrl",value:function(e){e=this._stringify(e);var t=this.__("请输入正确的 URL 地址");if(!e)return t;if(!/^\//.test(e)){if(/^\s*javascript:\/\//i.test(e))return t;try{new URL(e)}catch(e){return t}}}},{key:"stringArr",value:function(e,t){if(e&&t.values&&(e=e.split(",").map((function(e){return e.trim()})),e.some((function(e){return!t.values.includes(e)}))))return this.__("必须是 {type} 其中的值",{type:t.values.join("、")})}}],t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),p=l.apply(void 0,[c].concat([s,d]));t.Validator=p,"undefined"!=typeof window&&"function"==typeof window.__&&(t.validator=new p(window.__))},,,,,function(e,t,r){"use strict";var n=r(0);t.a=function(e,t){Object(n.useEffect)((function(){if(!t){var r=window.appData.siteName||__("语雀");document.title="".concat(e," · ").concat(r)}}),[e])}},,,,,,,,,,,function(e,t,r){"use strict";var n=r(68),o=r.n(n),a={_bookGrayscaleConfig:null,getDefaultDocumentFormat:function(e,t,r){return t=t||"",r=r||{},o.a.DOC_DEFAULT_FORMAT[e]||o.a.FORMAT.LAKE}};t.a=a},,function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var a=r(4403),i=r(4404),u=r(4409),l=r(4410),c=r(4411),s=r(4412),f=r(3999),d=r(4413),p=r(4414),h=r(4415),y=function(){function e(){}return Object.defineProperty(e,"breakLine",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.breakLine.apply(void 0,o([],n(e),!1))}}),Object.defineProperty(e,"insertNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s.insertNodes.apply(void 0,o([],n(e),!1))}}),Object.defineProperty(e,"makeSureAtInput",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d.makeSureAtInput.apply(void 0,o([],n(e),!1))}}),Object.defineProperty(e,"insertText",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f.insertText.apply(void 0,o([],n(e),!1))}}),Object.defineProperty(e,"getPreviousText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,p.getPreviousText)(e)}}),Object.defineProperty(e,"insertInlineNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.insertInlineNode.apply(void 0,o([],n(e),!1))}}),Object.defineProperty(e,"alignmentToElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.alignmentToElement.apply(void 0,o([],n(e),!1))}}),Object.defineProperty(e,"shrinkPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return void 0===t&&(t=!1),(0,h.shrinkPosition)(e,t)}}),Object.defineProperty(e,"closestInlineAttrs",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return(0,u.closestInlineAttrs)(e,t,r)}}),Object.defineProperty(e,"isInEmptyLine",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,l.isInEmptyLine)(e)}}),e}();t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closest=void 0,t.closest=function(e,t){for("string"==typeof(t=t||[])&&(t=[t]);e;){if(e.hasCategory(t))return e;e=e.parentNode}return null}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(1012)),a=r(3454),i=r(3630),u=r(3477),l=function(){function e(){}return Object.defineProperty(e,"insertNodeToOffset",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,n){a.assert.fatal("*"===n.nodeName&&t.isElement()&&r>=0&&r<=t.childCount,"failed to execute insertNodeToOffset","framework/kernel/src/model/utils/node/dangerous-node-helper.ts:34"),n._parent&&e.removeChild(n);var o=t._children;o.splice(r,0,n),n._parent=t,n._dirty=!0;for(var i=0,u=o.length;i<u;i++)o[i]._offset=i}}),Object.defineProperty(e,"appendChild",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return e.insertNodeToOffset(t,t.childCount,r)}}),Object.defineProperty(e,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e){a.assert.fatal("*"===e.nodeName,"framework/kernel/src/model/utils/node/dangerous-node-helper.ts:66");var t=e._parent;a.assert.fatal(t&&e._dirty,"failed to execute removeChild","framework/kernel/src/model/utils/node/dangerous-node-helper.ts:70"),e._parent=null,e._offset=-1;var r=t._children,n=r.indexOf(e);r.splice(n,1);for(var o=n,i=r.length;o<i;o++)r[o]._offset=o}}),Object.defineProperty(e,"markRange",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.start,n=t.end,o={needMerge:r.node.isTextNode()&&0!==r.offset&&r.offset!==r.node.dataLength,node:e.createElement("*")},a=t.collapsed?null:{needMerge:n.node.isTextNode()&&0!==n.offset&&n.offset!==n.node.dataLength,node:e.createElement("*")};return r.node.isCardNode()&&(r=e.newPosition(r.node.parentNode,r.node.offset)),t.collapsed?n=r:n.node.isCardNode()&&(n=e.newPosition(n.node.parentNode,n.node.offset+1)),a&&(n=(0,i.splitTextNode)(e,n),e.insertNodeByPosition(n,a.node)),o&&(r=(0,i.splitTextNode)(e,r)),e.insertNodeByPosition(r,o.node),r=e.newPosition(o.node.parentNode,o.node.offset),n=a?e.newPosition(a.node.parentNode,a.node.offset):r,{range:e.newRange(r,n),startSentry:o,endSentry:a}}}),Object.defineProperty(e,"recoverRange",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.startSentry,n=t.endSentry,o=e.newPosition(r.node.parentNode,r.node.offset);e.removeChild(r.node.parentNode,r.node),r.needMerge&&(o=c(e,o));var a=o;n&&(a=e.newPosition(n.node.parentNode,n.node.offset),e.removeChild(n.node.parentNode,n.node),n.needMerge&&(a=c(e,a)));var i=e.newRange(o,a);return(0,u.verifyRange)(i),i}}),e}();function c(e,t){var r=t.node,n=t.offset;a.assert.fatal(!r.isTextNode(),"framework/kernel/src/model/utils/node/dangerous-node-helper.ts:184");var i=r.getChildByOffset(n-1),u=r.getChildByOffset(n);a.assert.fatal(i&&u&&i.isTextNode()&&u.isTextNode(),"framework/kernel/src/model/utils/node/dangerous-node-helper.ts:189"),a.assert.fatal((0,o.default)(i.attrs,u.attrs),"framework/kernel/src/model/utils/node/dangerous-node-helper.ts:190");var l=i,c=i.dataLength;return e.setTextNodeData(i,i.data+u.data),e.removeChild(u.parentNode,u),e.newPosition(l,c)}t.default=l},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var a=r(3454),i=r(4439),u=r(4154),l=r(4153),c=r(4155),s=r(4445),f=r(4446),d=r(4448),p=r(4450),h=r(4451),y=r(4003),b=r(3459),m=r(4453),v=function(){function e(){}return Object.defineProperty(e,"toStart",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,s.moveTo)(e,!0)}}),Object.defineProperty(e,"toEnd",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,s.moveTo)(e,!1)}}),Object.defineProperty(e,"moveToNodeById",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.getNodeById(t);return r?(a.assert.fatal(r.hasCategory(b.Category.TextContainer),"framework/kernel/src/model/utils/selection/index.ts:36"),e.newSelection(e.newRange(e.newPosition(r,0)))):null}}),Object.defineProperty(e,"shrinkToElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,d.shrinkToElement)(e)}}),Object.defineProperty(e,"setAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,n,o,a){return e.updateAttribute(t,r,[{name:n,value:o}],a)}}),Object.defineProperty(e,"removeAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,n,o){return e.updateAttribute(t,r,[{name:n,value:null}],o)}}),Object.defineProperty(e,"updateAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=t.ranges.map((function(t){return(0,y.updateAttribute)(e,t,r,n)}));return e.newSelection(o)}}),Object.defineProperty(e,"fullWalkSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.fullWalkSelection.apply(void 0,o([],n(e),!1))}}),Object.defineProperty(e,"allBlockNodeHasCategory",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,i.allBlockNodeHasCategory)(e,t)}}),Object.defineProperty(e,"deleteContent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n,o,a){return void 0===r&&(r=!0),void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===a&&(a=!0),(0,u.deleteContent)(e,t,r,n,o,a)}}),Object.defineProperty(e,"extractINode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,h.extractINode)(e,t.ranges)}}),Object.defineProperty(e,"insertINode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return(0,c.insertINode)(e,t,r)}}),Object.defineProperty(e,"replaceBlockNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n,o){return void 0===n&&(n=!0),void 0===o&&(o=null),(0,f.replaceBlockNode)(e,t,r,n,o)}}),Object.defineProperty(e,"isInCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.isCardSelection}}),Object.defineProperty(e,"isInHole",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!e.isCollapsed&&!!e.firstRange.start.node.hasCategory(b.Category.Hole)}}),Object.defineProperty(e,"isUnbreakable",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.isCardSelection||e.isTableSelection||e.isColumnsSelection}}),Object.defineProperty(e,"unCollapseAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){(0,p.unCollapseAll)(e,t)}}),Object.defineProperty(e,"getSelectionIndent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,m.getSelectionIndent)(e)}}),e}();t.default=v},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3465),u=a(r(3911)),l=r(3457),c=a(r(3714)),s=a(r(3755)),f=a(r(3711)),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();if(c.default.isInCard(t)||c.default.isInHole(t))return i.COMMAND_UNAVAILABLE;var r=u.default.getAttrValue(e,this._formatSelection(t),this.attrName,!1);return r.length>1?s.default.UNKNOWN:1===r.length&&r[0]?s.default.EXECUTED:s.default.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n=e.getSelection();if(c.default.isInCard(n))return(null===(r=null===(t=n.firstRange.commonAncestorContainer)||void 0===t?void 0:t.attrs)||void 0===r?void 0:r[this.attrName])||null;n=this._formatSelection(n);var o=u.default.getAttrValue(e,n,this.attrName,!1);if(1===o.length&&o[0])return o[0];if(o.length>1)return o[0];if(n.isCollapsed){var a=f.default.closestInlineAttrs(n.firstRange.start);return(null==a?void 0:a[this.attrName])||null}return null}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getSelection();if(this.getState(n)===s.default.UNAVAILABLE)return e.cancelJob(n),!1;if(o.collapsed&&o.firstRange.start.node.isRootNode()&&o.firstRange.start.isAtEnd){var a=n.createElement(n.defaultElementName);n.appendChild(o.firstRange.start.node,a),o=n.newSelection([n.newRange(n.newPosition(a,0))])}var i=null;return i=t?c.default.setAttribute(n,this._formatSelection(o),this.attrName,t,r):c.default.removeAttribute(n,this._formatSelection(o),this.attrName,r),n.setSelection(i),e.commitJob(n),!0}}),Object.defineProperty(t.prototype,"_formatSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.isCollapsed?e:c.default.shrinkToElement(e)}}),t}(l.KernelAbstractCommand);t.default=d},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(97)),l=i(r(3464)),c=r(3454),s=i(r(3912)),f=i(r(3512)),d=r(3518),p=r(3633),h=r(4013),y=function(e){function t(t,r){return e.call(this,t,r)||this}return o(t,e),Object.defineProperty(t,"getAllImages",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),Object.defineProperty(t,"createValueByURL",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r,n=e.type,o=e.src,a=e.originalURL,i=e.ratio,u=e.link,c=e.linkExternal,s=e.name,p=e.size,y=e.width,b=e.ocr,m=null===(r=this.getAllImages())||void 0===r?void 0:r.reverse()[0];return f.default.setCardSpacingToValue(m?m.__spacing:d.CARD_SPACING_BOTH,(0,l.default)({},t.DefaultCardValue,{original:{type:n,from:"url",ratio:i,url:a},src:o,status:h.IMAGE_STATUS_DONE,link:u,linkExternal:c,name:s,size:p,ocr:b,width:y,style:m?m.style:t.DefaultCardValue.style}))}}),Object.defineProperty(t,"createWillUploadValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r,n=e.type,o=e.from,a=e.name,i=e.ratio,u=e.taskId,c=e.clientId,s=e.originalURL,p=e.link,y=e.width,b=e.linkExternal,m=null===(r=this.getAllImages())||void 0===r?void 0:r.reverse()[0];return f.default.setCardSpacingToValue(m?m.__spacing:d.CARD_SPACING_BOTH,(0,l.default)({},t.DefaultCardValue,{original:{type:n,from:o,ratio:i,url:s},name:a,taskId:u,clientId:c,status:h.IMAGE_STATUS_PENDING,link:p,width:y,linkExternal:b,style:m?m.style:t.DefaultCardValue.style}))}}),Object.defineProperty(t,"fromRepository",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=e.copiedFileInfo;return(0,l.default)({},t.DefaultCardValue,{source:"transfer",src:r.url,status:h.IMAGE_STATUS_DONE})}}),Object.defineProperty(t,"processValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;return(null===(t=e.crop)||void 0===t?void 0:t.includes(null))&&(e.crop=[0,0,1,1]),e}}),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r;return this.processValue((0,l.default)({},t.DefaultCardValue,{src:"object"==typeof e.src?null===(r=e.src)||void 0===r?void 0:r.url:e.src,name:e.name,size:e.size,taskId:e.taskId,clientId:e.clientId,errorMessage:e.errorMessage,link:e.link,linkExternal:"_blank"===e.linkTarget,style:e.style,original:{type:e.originalType,from:e.from,ratio:e.ratio||1,width:e.originWidth,height:e.originHeight},width:e.width,status:e.status,ocr:e.ocrLocations,search:e.search,showTitle:e.showTitle,title:e.title,rotation:e.rotation,crop:e.crop||[0,0,1,1],averageHue:e.averageHue}))}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return{src:e.src,taskId:e.taskId,clientId:e.clientId,originalType:(0,u.default)(e,"original.type"),width:e.width,height:m(e),link:e.link,linkTarget:e.linkExternal?"_blank":"",name:e.name,size:e.size,from:(0,u.default)(e,"original.from"),originWidth:(0,u.default)(e,"original.width"),originHeight:(0,u.default)(e,"original.height"),ratio:(0,u.default)(e,"original.ratio"),status:e.status,style:e.style,errorMessage:e.errorMessage,search:e.search,ocrLocations:e.ocr,showTitle:e.showTitle,title:e.title,rotation:e.rotation,crop:e.crop||[0,0,1,1],averageHue:e.averageHue}}}),Object.defineProperty(t.prototype,"getStatus",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.status}}),Object.defineProperty(t.prototype,"getSrc",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.src}}),Object.defineProperty(t.prototype,"getSize",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.size}}),Object.defineProperty(t.prototype,"getPreviewSrc",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.toDisplaySrc(this._cardValue.src)}}),Object.defineProperty(t.prototype,"getDisplaySrc",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.toDisplaySrc(this._cardValue.src)}}),Object.defineProperty(t.prototype,"toDisplaySrc",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;return e?s.default.isBase64ImageURL(e)?e:(null===(t=this._pluginOption)||void 0===t?void 0:t.onBeforeRenderImage(e,this._pluginOption.isCaptureImageURL(e)))||e:e}}),Object.defineProperty(t.prototype,"getName",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.name}}),Object.defineProperty(t.prototype,"getTaskId",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.taskId}}),Object.defineProperty(t.prototype,"getClientId",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.clientId}}),Object.defineProperty(t.prototype,"getOcrLocations",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.ocr}}),Object.defineProperty(t.prototype,"hasUserWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!!this._cardValue.width}}),Object.defineProperty(t.prototype,"getUserWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.width}}),Object.defineProperty(t.prototype,"getOriginalWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.original.width}}),Object.defineProperty(t.prototype,"getOriginalHeight",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.original.height}}),Object.defineProperty(t.prototype,"getCropWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Math.round(this._cardValue.original.width*(this._cardValue.crop[2]-this._cardValue.crop[0]))}}),Object.defineProperty(t.prototype,"getCropHeight",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Math.round(this._cardValue.original.height*(this._cardValue.crop[3]-this._cardValue.crop[1]))}}),Object.defineProperty(t.prototype,"getRotationCropWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.rotation%180==0?this.getCropWidth():this.getCropHeight()}}),Object.defineProperty(t.prototype,"getRotationCropHeight",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.rotation%180==0?this.getCropHeight():this.getCropWidth()}}),Object.defineProperty(t.prototype,"getOriginDisplayWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.rotation%180==0?Math.round(this.getDisplayWidth()*this.getOriginalWidth()/this.getCropWidth()):Math.round(this.getDisplayHeight()*this.getOriginalWidth()/this.getCropWidth())}}),Object.defineProperty(t.prototype,"getDisplayWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.width?this._cardValue.width:this.getRotationCropWidth()}}),Object.defineProperty(t.prototype,"getDisplayHeight",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getDisplayWidth(),t=this.getRotationCropWidth(),r=this.getRotationCropHeight();return e===t?r:Math.round(e/t*r)}}),Object.defineProperty(t.prototype,"isCompleted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._cardValue.status;return e===h.IMAGE_STATUS_DONE||e===h.IMAGE_STATUS_ERROR}}),Object.defineProperty(t.prototype,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!!this._cardValue.src}}),Object.defineProperty(t.prototype,"isFromPaste",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,u.default)(this._cardValue,"original.from",null)===p.SOURCE_FROM_PASTE}}),Object.defineProperty(t.prototype,"isBinaryType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"binary"===(0,u.default)(this._cardValue,"original.type",null)}}),Object.defineProperty(t.prototype,"getRatio",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,u.default)(this._cardValue,"original.ratio",1)}}),Object.defineProperty(t.prototype,"setImageOriginSize",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._cardValue.original=a(a({},this._cardValue.original),{width:e,height:t})}}),Object.defineProperty(t.prototype,"setDisplayWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.width=e}}),Object.defineProperty(t.prototype,"resetDisplayWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._cardValue.width}}),Object.defineProperty(t.prototype,"resetRotationCrop",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this._cardValue.width){var e=this._cardValue.width/this.getRotationCropWidth();this._cardValue.width=Math.ceil(e*this.getOriginalWidth())}this._cardValue.rotation=0,this._cardValue.crop=[0,0,1,1]}}),Object.defineProperty(t.prototype,"setImageInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.url,r=e.filename,n=e.ocrLocations,o=e.size;c.assert.fatal(t,"plugins/image/src/kernel/image-card-data.ts:470");var a=this._cardValue;a.src=t,a.size=o,a.status=h.IMAGE_STATUS_ENUM.DONE,r&&(a.name=r),n&&(a.ocr=this.roundOCRPosition(n),a.search=this._getSearchText(n))}}),Object.defineProperty(t.prototype,"roundOCRPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.map((function(e){return e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=Math.round(e.width),e.height=Math.round(e.height),e}))}}),Object.defineProperty(t.prototype,"setUploadError",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.status=h.IMAGE_STATUS_ENUM.ERROR,this._cardValue.errorMessage=e||"unknown error"}}),Object.defineProperty(t.prototype,"setLink",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e?e!==this._cardValue.link&&(this._cardValue.link=e):delete this._cardValue.link}}),Object.defineProperty(t.prototype,"getLink",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.link}}),Object.defineProperty(t.prototype,"setLinkExternal",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.linkExternal=e}}),Object.defineProperty(t.prototype,"isOpenLinkInSelf",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1===this._cardValue.linkExternal}}),Object.defineProperty(t.prototype,"setStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e&&"none"!==e?e!==this._cardValue.style&&(this._cardValue.style=e):delete this._cardValue.style}}),Object.defineProperty(t.prototype,"getStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.style}}),Object.defineProperty(t.prototype,"setAverageHue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e&&(this._cardValue.averageHue=e,this.sync(!1))}}),Object.defineProperty(t.prototype,"getAverageHue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.averageHue}}),Object.defineProperty(t.prototype,"_getSearchText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.map((function(e){return e.text})).join(" ")}}),Object.defineProperty(t.prototype,"showTitle",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.showTitle}}),Object.defineProperty(t.prototype,"getTitle",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.title}}),Object.defineProperty(t.prototype,"getRotation",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.rotation}}),Object.defineProperty(t.prototype,"getCrop",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.crop}}),Object.defineProperty(t.prototype,"setShowTitle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.showTitle=e}}),Object.defineProperty(t.prototype,"setTitle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.title=e}}),Object.defineProperty(t.prototype,"setRotation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.rotation=e%360}}),Object.defineProperty(t.prototype,"setCrop",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.crop=e}}),Object.defineProperty(t.prototype,"isAfterEdit",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 0!==this._cardValue.rotation||b(this._cardValue.crop[0]-0,this.getOriginalWidth())||b(this._cardValue.crop[1]-0,this.getOriginalHeight())||b(this._cardValue.crop[2]-1,this.getOriginalWidth())||b(this._cardValue.crop[3]-1,this.getOriginalHeight())}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{src:"",original:{type:h.IMAGE_ORIGINAL_TYPE_ENUM.binary,from:void 0,ratio:1,width:void 0,height:void 0},name:void 0,size:void 0,width:void 0,status:h.IMAGE_STATUS_ENUM.PENDING,errorMessage:void 0,style:"none",taskId:void 0,clientId:void 0,link:void 0,linkExternal:!0,ocr:void 0,search:void 0,crop:[0,0,1,1],showTitle:!1,title:"",rotation:0}}),t}(f.default);function b(e,t){return Math.abs(e*t)>=1}function m(e){var t,r,n=null===(t=e.original)||void 0===t?void 0:t.width,o=null===(r=e.original)||void 0===r?void 0:r.height,a=e.width;if(n&&o&&a)return a===n?o:Math.round(a/n*o)}t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"alignment",attr:{alignment:"alignment"},toolbar:{alignment:"alignment"},command:{alignment:"alignment"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"bgColor",attr:{bgColor:"bgColor"},toolbar:{bgColor:"bgColor"},command:{bgColor:"bgColor",clearBgColor:"clearBgColor"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"content",command:{wordCount:"wordCount",wordCountSelection:"wordCountSelection",isEmpty:"isEmpty",getNodeContent:"getNodeContent",insertAtSelection:"insertAtSelection"},service:{IContentKernelService:"IContentKernelService"}})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return u(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=c(r(3528)),f=c(r(3464)),d=r(3454),p=c(r(3512)),h=r(3518),y=l(r(4626)),b=r(3762),m={src:"",name:"",size:0,ext:"",source:"",status:y.Status.Pending,download:!1},v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r){var n=r.type;if((0,s.default)(e))return(0,f.default)({},t.DefaultCardValue,{src:e});e.src&&e.status!==y.Status.Done&&(e.status=y.Status.Done);var o=e.mode;return n===b.FILE_TYPE_INLINE&&(e.mode=b.FILE_MODE_TITLE,e.download=void 0===e.download||e.download),n===b.FILE_TYPE_BLOCK&&o===b.FILE_MODE_TITLE&&(e.mode=b.FILE_MODE_CARD),(0,f.default)({},t.DefaultCardValue,e)}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(t,"fromRepository",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.copiedFileInfo,r={};return r.src=t.url,r.size=t.size,r.name=t.filename,r.ext=t.extname,r.status=y.Status.Done,r.source="transfer",r.mode=b.FILE_MODE_CARD,p.default.setCardSpacingToValue(h.CARD_SPACING_BOTH,(0,f.default)({},m,r))}}),Object.defineProperty(t,"fromTransfer",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,a,i,u,l={};return l.taskId=t.id,l.taskType=y.TaskType.Transfer,l.status=y.Status.Transfering,l.name=null!==(r=null==e?void 0:e.name)&&void 0!==r?r:m.name,l.size=null!==(n=null==e?void 0:e.size)&&void 0!==n?n:m.size,l.type=null!==(o=null==e?void 0:e.type)&&void 0!==o?o:m.type,l.ext=null!==(a=null==e?void 0:e.ext)&&void 0!==a?a:m.ext,l.mode=null!==(i=null==e?void 0:e.mode)&&void 0!==i?i:m.mode,l.download=null!==(u=null==e?void 0:e.download)&&void 0!==u?u:m.download,(0,f.default)({},m,l)}}),Object.defineProperty(t,"getInitCardValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,a=t.type,i=t.getFileExtname,u={};return e&&(u.taskId=e.id,u.taskType=y.TaskType.Upload,e.file&&(u.name=null!==(r=e.file.name)&&void 0!==r?r:m.name,u.size=null!==(n=e.file.size)&&void 0!==n?n:m.size,u.type=null!==(o=e.file.type)&&void 0!==o?o:m.type,u.ext=e.file.ext?e.file.ext:e.file.name?i(e.file.name):m.ext)),a===b.FILE_TYPE_INLINE?u.download=!0:u.download=!1,p.default.setCardSpacingToValue(h.CARD_SPACING_BOTH,(0,f.default)({},m,u))}}),Object.defineProperty(t.prototype,"cardAlias",{get:function(){return this.getMode()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getTaskId",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.taskId}}),Object.defineProperty(t.prototype,"getTaskType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.taskType}}),Object.defineProperty(t.prototype,"getName",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.name}}),Object.defineProperty(t.prototype,"setName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.name=e}}),Object.defineProperty(t.prototype,"getExt",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.ext}}),Object.defineProperty(t.prototype,"setExt",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.ext=e}}),Object.defineProperty(t.prototype,"getSrc",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.src}}),Object.defineProperty(t.prototype,"setSrc",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.src=e}}),Object.defineProperty(t.prototype,"getStatus",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.status}}),Object.defineProperty(t.prototype,"setStatus",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.status=e}}),Object.defineProperty(t.prototype,"getType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.type}}),Object.defineProperty(t.prototype,"setType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.type=e}}),Object.defineProperty(t.prototype,"getSize",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.size}}),Object.defineProperty(t.prototype,"setSize",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.size=e}}),Object.defineProperty(t.prototype,"getMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.message||""}}),Object.defineProperty(t.prototype,"setMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.message=e}}),Object.defineProperty(t.prototype,"getMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.mode||b.FILE_MODE_EMBED}}),Object.defineProperty(t.prototype,"setMode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.mode=e}}),Object.defineProperty(t.prototype,"getRuntimeMode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=!1),d.assert.fatal("boolean"==typeof e,"plugins/file/src/kernel/file-card-data.ts:251");var t=this._cardValue.mode;return e&&t===b.FILE_MODE_EMBED?b.FILE_MODE_CARD:t||b.FILE_MODE_EMBED}}),Object.defineProperty(t.prototype,"isEmbedMode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return void 0===e&&(e=!1),d.assert.fatal("boolean"==typeof e,"plugins/file/src/kernel/file-card-data.ts:262"),this.getRuntimeMode(e)===b.FILE_MODE_EMBED}}),Object.defineProperty(t.prototype,"isTitleMode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return void 0===e&&(e=!1),d.assert.fatal("boolean"==typeof e,"plugins/file/src/kernel/file-card-data.ts:267"),this.getRuntimeMode(e)===b.FILE_MODE_TITLE}}),Object.defineProperty(t.prototype,"isCardMode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return void 0===e&&(e=!1),d.assert.fatal("boolean"==typeof e,"plugins/file/src/kernel/file-card-data.ts:272"),this.getRuntimeMode(e)===b.FILE_MODE_CARD}}),Object.defineProperty(t.prototype,"getDownload",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.download}}),Object.defineProperty(t.prototype,"setDownload",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.download=e}}),Object.defineProperty(t.prototype,"isCompleted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getStatus();return!(!this.getSrc()&&![y.Status.Done,y.Status.Error].includes(e))||!this._cardValue.taskId}}),Object.defineProperty(t.prototype,"toJSON",{enumerable:!1,configurable:!0,writable:!0,value:function(){return a({},this._cardValue)}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:m}),t}(p.default);t.default=v},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.i18n=void 0;var a=o(r(3969)),i=r(4239),u=o(r(4736));var l=function(){function e(){}return Object.defineProperty(e,"getLanguage",{enumerable:!1,configurable:!0,writable:!0,value:function(){return e._lang}}),Object.defineProperty(e,"setEnLang",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e.i18n=(0,a.default)({en:t,useEn:function(){return"enUS"===e._lang}}),this.enMap=t}}),Object.defineProperty(e,"addEnLang",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.enMap=n(n({},this.enMap),t),e.i18n=(0,a.default)({en:this.enMap,useEn:function(){return"enUS"===e._lang}})}}),Object.defineProperty(e,"setLanguage",{enumerable:!1,configurable:!0,writable:!0,value:function(t){e._lang="enUS"===t||"en-US"===t||"en"===t||"en-us"===t?"enUS":"zhCN",i.langEvent.emit(i.LANG_EVENT_MAP.CHANGE,e._lang)}}),Object.defineProperty(e,"_lang",{enumerable:!0,configurable:!0,writable:!0,value:"zhCN"}),Object.defineProperty(e,"i18n",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(e,"enMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),e}();l.setLanguage(function(){var e="zh-cn";if("undefined"!=typeof window&&"undefined"!=typeof document){var t=window.location.search,r=new URLSearchParams(t).get("language");if(r)return r;var n=document.cookie.match(/(?:^|; ?)lang=([^;]+)(?:;|$)/);return n?n[1]:e}return e}()),l.setEnLang(u.default),t.default=l;t.i18n=function(e,t){return l.i18n?l.i18n(e,t):e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"quote",node:"quote",domNode:"ne-quote",toolbar:"quote",cardSelect:"quote",command:{quote:"quote"},service:{IQuoteEditingService:"IQuoteEditingService"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_CELL=t.TABLE_ROW=t.TABLE=void 0;var n=r(3467);t.TABLE=n.pluginRegister.node.table,t.TABLE_ROW=n.pluginRegister.node.tr,t.TABLE_CELL=n.pluginRegister.node.td},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=function(){function e(e){Object.defineProperty(this,"_layout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.assert.fatal(e&&"table"===e.nodeName,"plugins/table/src/kernel/commands/helpers/table-layout.ts:26"),this._layout=this._analyzeLayout(e)}return Object.defineProperty(e,"getLayout",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return new e(t)._layout}}),Object.defineProperty(e,"verify",{enumerable:!1,configurable:!0,writable:!0,value:function(t){a(t,new e(t)._layout)}}),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_analyzeLayout",{enumerable:!1,configurable:!0,writable:!0,value:function(t){for(var r=[],n=0,o=t.childCount;n<o;n++)r.push([]);return t.children.forEach((function(t){var n=t.offset;t.children.forEach((function(t){for(var o=t.attrs,a=o.col,i=o.rowSpan,u=void 0===i?1:i,l=o.colSpan,c=void 0===l?1:l,s=0;s<u;s++)for(var f=0;f<c;f++)r[n+s][a+f]={node:t,row:n,col:a,type:0===s&&0===f?e.TYPE_NODE:e.TYPE_REF}}))})),r}}),Object.defineProperty(e,"TYPE_REF",{enumerable:!0,configurable:!0,writable:!0,value:"#ref"}),Object.defineProperty(e,"TYPE_NODE",{enumerable:!0,configurable:!0,writable:!0,value:"#node"}),e}();function a(e,t){t.forEach((function(e){var t=0,r=0;e.forEach((function(e){var a=e.type,i=e.col,u=e.node;a===o.TYPE_NODE&&(n.assert.fatal(r===i,"plugins/table/src/kernel/commands/helpers/table-layout.ts:85"),n.assert.fatal(u.offset===t,"plugins/table/src/kernel/commands/helpers/table-layout.ts:86"),n.assert.fatal(u.attrs.col===i,"plugins/table/src/kernel/commands/helpers/table-layout.ts:87"),t++),r++}))}))}t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLarkDomainURL=void 0;var n=[/(^|\.)yuque-ali(-pre)?\.(antfin|alibaba)-inc\.com$/,/(^|\.)yuque(-pre)?\.(antfin|alibaba)-inc\.com$/,/(^|\.)yuque(-pre)?\.antgroup-inc\.cn$/,/(^|\.)yuque(-pre)?\.antfin\.com$/,/(^|\.)aliyuque?\.antfin\.com$/,/^lark\.alipay\.com$/,/^bkyuque\.mybank\.cn$/,/\.alipay\.net$/];t.isLarkDomainURL=function(e){try{var t=new URL(e).hostname;return!!n.some((function(e){return e.test(t)}))}catch(e){return!1}}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3464)),u=r(3454),l=a(r(3512)),c=r(3518),s=r(3772),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"createBy",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r,n){return u.assert.fatal(e&&r&&n,"plugins/bookmark/src/kernel/bookmark-card-data.ts:29"),(0,i.default)({},l.default.setCardSpacingToValue(c.CARD_SPACING_BOTH,t.DefaultCardValue),{src:e,text:r,mode:n})}}),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r){var n=r.type,o=(e=e||{}).mode;return n===s.BOOKMARK_TYPE_INLINE&&(e.mode=s.BOOKMARK_MODE_TITLE),n===s.BOOKMARK_TYPE_BLOCK&&o===s.BOOKMARK_MODE_TITLE&&(e.mode=s.BOOKMARK_MODE_CARD),(0,i.default)({},t.DefaultCardValue,e)}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(t.prototype,"cardAlias",{get:function(){return this._cardValue.mode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSrc",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.src}}),Object.defineProperty(t.prototype,"setDetail",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.detail=e}}),Object.defineProperty(t.prototype,"getDetail",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.detail}}),Object.defineProperty(t.prototype,"hasDetail",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!!this._cardValue.detail}}),Object.defineProperty(t.prototype,"getMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.mode||s.BOOKMARK_MODE_CARD}}),Object.defineProperty(t.prototype,"setMode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.mode=e}}),Object.defineProperty(t.prototype,"getRuntimeMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.mode||s.BOOKMARK_MODE_CARD}}),Object.defineProperty(t.prototype,"isTitleMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.getRuntimeMode()===s.BOOKMARK_MODE_TITLE}}),Object.defineProperty(t.prototype,"isCardMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.getRuntimeMode()===s.BOOKMARK_MODE_CARD}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{mode:void 0,src:void 0,text:void 0,detail:void 0}}),t}(l.default);t.default=f},,,,,function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(2),i=r.n(a),u=r(5),l=r.n(u),c=r(1673),s=r(248),f=r(3558),d="index-module_groupName_DppYx",p="index-module_groupNameText_XYhrt",h="index-module_groupNameScope_qP0XF",y=function(e){var t=e.group,r=e.size,n=e.nameStyleCls,a=e.linkStyleCls,i=e.showName,u=void 0===i||i,y=e.isLink,b=void 0===y||y,m=e.iconSize,v=e.radius,g=Object(s.e)(t)||Object(s.h)(t),_=u?o.a.createElement("a",{"data-testid":"group-name-link",href:"/".concat(t.login),title:t.name,className:l()(d,n)},o.a.createElement("span",{"data-testid":"group-name-text",className:l()(p,"group-name-text")},t.name),g&&o.a.createElement("span",{className:l()(h,"group-name-scope")},o.a.createElement(f.a,{group:t,size:16}))):null;return!b&&_&&(_=o.a.createElement("span",{title:t.name,className:l()(d,n)},o.a.createElement("span",{"data-testid":"group-name-text",className:l()(p,"group-name-text")},t.name),g&&o.a.createElement("span",{className:l()(h,"group-name-scope")},o.a.createElement(f.a,{group:t,size:16})))),o.a.createElement(o.a.Fragment,null,b?o.a.createElement("a",{"data-testid":"group-avatar-link",href:"/".concat(t.login),title:t.name,className:a},o.a.createElement(c.a,{group:t,size:r,iconSize:m,radius:v})):o.a.createElement(c.a,{group:t,size:r,iconSize:m,radius:v}),_)};y.propTypes={organization:i.a.object,group:i.a.object.isRequired,size:i.a.number,showName:i.a.bool,isLink:i.a.bool,nameStyleCls:i.a.string,iconSize:i.a.number,radius:i.a.number};t.a=y},,,,,,,,,,,,,function(e,t,r){"use strict";t.a={mediaCard:"index-module_mediaCard_rJwhl",mediaCardImg:"index-module_mediaCardImg_+eTt+",descCard:"index-module_descCard_aQ1eH",mediaBody:"index-module_mediaBody_cUJQ1",actionsButtonWrapper:"index-module_actionsButtonWrapper_7+VwK",button:"index-module_button_D4dXO",mediaCardGarden:"index-module_mediaCardGarden_WYcpy",content:"index-module_content_Opxbi",header:"index-module_header_kVIJA",closeBtn:"index-module_closeBtn_pDaXe",placeholder:"index-module_placeholder_HMURl",collapse:"index-module_collapse_ZkO7Q",collapsePanel:"index-module_collapsePanel_IY3Mu",collapsePanelContent:"index-module_collapsePanelContent_WfYF7",collapsePanelActive:"index-module_collapsePanelActive_pQ2r3",collapseHeader:"index-module_collapseHeader_hqOMx",collapseHeaderArrow:"index-module_collapseHeaderArrow_974uk",closeWrapper:"index-module_closeWrapper_t5yVf",close:"index-module_close_Z0Z3-"}},,function(e,t,r){"use strict";r(196);var n=r(36),o=r(0),a=r.n(o),i=r(2),u=r.n(i),l=r(238),c=r.n(l),s=r(1077),f=r(248),d=r(396),p=r(3731),h=r(3804),y="index-module_name_2g47z";function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var v=n.a.Option;function g(e){var t,r=e.current,i=e.disabled,u=e.groups,l=e.orgs,m=e.placeholder,g=e.size,_=e.loading,w=Object(f.h)()?__("知识小组"):__("团队"),O=b(Object(o.useState)(!1),2),E=O[0],P=O[1];function j(e,t){var r=t.type;return"User"===(null==t?void 0:t.type)&&(r="Group"),e.type===r&&e.id===t.id}function C(){P(!0)}return a.a.createElement("div",{className:"group-selector ".concat(e.className||""),"data-testid":"group-selector"},a.a.createElement(n.a,{size:g,showSearch:!0,disabled:i,loading:_,getPopupContainer:function(e){return e.parentNode},placeholder:m,dropdownMatchSelectWidth:!1,notFoundContent:a.a.createElement("div",{className:"blankslate"},a.a.createElement("span",null,Object(f.h)()?__("没有{groupTitle}信息",{create:a.a.createElement("a",{onClick:C},__("新建")),groupTitle:w}):__("没有{groupTitle}信息，快去{create}一个吧",{create:a.a.createElement("a",{onClick:C},__("新建")),groupTitle:w}))),value:r&&(t=r,null!=t&&t.id?"".concat("isNewOrg"in t?"organization":"group","-").concat(null==t?void 0:t.id):null),onChange:function(t,r){var n;(null!=u&&u.length||null!=l&&l.length)&&(null!=r&&null!==(n=r.value)&&void 0!==n&&n.startsWith("organization")&&(r.target.type="Organization"),e.onChange&&e.onChange(r.target))},filterOption:function(e,t){if(!t.target)return!1;var r=t.target,n=r.login,o=r.name,a=e.toLowerCase();return n.toLowerCase().indexOf(a)>=0||o.toLowerCase().indexOf(a)>=0},placement:"bottomLeft"},u&&u.length?c()(u,"id").map((function(e){return a.a.createElement(v,{"data-testid":"group-selector-".concat(e.login),key:"group-".concat(e.id),value:"group-".concat(e.id),target:e,title:e.name},a.a.createElement("div",{className:"group-selector-item"},a.a.createElement(p.a,{organization:e.organization,group:e,size:24,showCard:!1,nameStyleCls:y,isLink:!1})),j(r,e)&&a.a.createElement(s.default,null))})):null,null!=l&&l.length?l.map((function(e){return a.a.createElement(v,{key:"organization-".concat(e.id),value:"organization-".concat(e.id),title:e.name,target:e},a.a.createElement("div",{className:"group-selector-item"},a.a.createElement(d.g,{className:"group-selector-org-icon",src:e.logo||e.logo_url,size:24,radius:"2px"}),a.a.createElement(d.h,{organization:e,className:"group-selector-org-name"})),j(r,e)&&a.a.createElement(s.default,null))})):null),a.a.createElement(h.default,{isModalVisible:E,handleCancel:function(){P(!1)}}))}g.defaultProps={size:"middle",placeholder:__("请选择{groupTitle}",{groupTitle:Object(f.h)()?__("知识小组"):__("团队")}),groups:[],current:{},onChange:function(){}},g.propTypes={groups:u.a.arrayOf(u.a.object),current:u.a.shape({login:u.a.string,name:u.a.string}),onChange:u.a.func,className:u.a.string,placeholder:u.a.string,disabled:u.a.bool,size:u.a.string};t.a=g},,,,,,,function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var i=r(2736),u=r(3604).BaseValidatorClass,l=/^(13\d|14\d|15[012356789]|16[567]|17[01235678]|18\d|19\d)\d{8}(\+\d+)?$/,c=/^\+[1-9]\d{0,2}? \d{1,20}$/,s=/^\+86 /,f=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"chinaMobilePhone",value:function(e){if(!(e=this._stringify(e))||!l.test(e))return this.__("输入正确手机号")}},{key:"globalMobilePhone",value:function(e){return(e=this._stringify(e))&&c.test(e)?s.test(e)?this.__("中国手机号码不需要添加 +86"):void 0:this.__("必须是合法的手机号码")}},{key:"mobilePhone",value:function(e){if(this.globalMobilePhone(e))return s.test(e)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(e)}},{key:"mobilePhoneForNonChinese",value:function(e){if(this.globalMobilePhone(e))return s.test(e)?this.__("中国手机号码不需要添加 +86"):this.chinaMobilePhone(e)?this.__("必须是合法的手机号码"):void 0}}])&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();t.MobileValidatorClass=f,t.chinaMobilePhoneRE=l,t.globalMobilePhoneRE=c,t.MobileValidator=i.apply(void 0,[u].concat([f]))},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return f})),r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return p})),r.d(t,"d",(function(){return s}));var n=r(452),o=(r(93),r(89),r(146));function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function l(e){return n.ALL_PERMISSIONS.includes(e)}function c(e){return e===n.ROLE.noPermission?0-e:e}var s={gte:function(e,t){return!(!l(e)||!l(t))&&c(e)>=c(t)},gt:function(e,t){return!(!l(e)||!l(t))&&c(e)>c(t)},lt:function(e,t){return!(!l(e)||!l(t))&&c(e)<c(t)},lte:function(e,t){return!(!l(e)||!l(t))&&c(e)<=c(t)},eq:function(e,t){return!(!l(e)||!l(t))&&c(e)===c(t)},max:function(e,t){var r=[l(e),l(t)];if(r.every((function(e){return!!e})))return c(e)>c(t)?e:t;var n=r.indexOf(!0);return n<0?null:n>0?t:e}};function f(e,t,r){if(!e||!t)return null;var a=n.ALL_PERMISSIONS;if(null!=r&&(a=a.filter((function(e){return s.lte(e,r)}))),e.owner_type===n.OWNER_TYPE.User)return a=a.filter((function(e){return e!==n.ROLE.noPermission})),e.owner_id===t.user_id?{edit:!1,delete:!1}:{edit:!0,delete:!0,permissions:a};var i=o.PUBLIC_PRIVACY.includes(t.public),u=t.public===o.PUBLIC.public;return e.owner_type===n.OWNER_TYPE.GroupManager||e.owner_type===n.OWNER_TYPE.OrganizationOwner?{edit:!1,delete:!1}:e.owner_type===n.OWNER_TYPE.GroupMember?{edit:!0,delete:!1,permissions:a.filter((function(e){return i?e!==n.ROLE.noPermission:void 0!==e})),availableTargetPermission:i&&e.role===n.ROLE.noPermission?n.ROLE.readonly:e.role}:e.owner_type===n.OWNER_TYPE.OrganizationMember?{edit:i,delete:!1,permissions:a.filter((function(e){return i?e!==n.ROLE.noPermission:void 0!==e})),availableTargetPermission:i&&e.role===n.ROLE.noPermission?n.ROLE.readonly:i?e.role:n.ROLE.noPermission}:e.owner_type===n.OWNER_TYPE.GroupReadonlyMember?{edit:!i,delete:!1,permissions:i?[n.ROLE.readonly]:[n.ROLE.readonly,n.ROLE.noPermission],availableTargetPermission:i&&e.role===n.ROLE.noPermission?n.ROLE.readonly:e.role}:e.owner_type===n.OWNER_TYPE.OrganizationOutsourcer?{edit:!u&&i,delete:!1,permissions:u?[n.ROLE.readonly]:[n.ROLE.readonly,n.ROLE.noPermission].filter((function(e){return i?void 0!==e:e!==n.ROLE.readonly})),availableTargetPermission:u?n.ROLE.readonly:n.ROLE.noPermission}:{edit:!0,delete:!0,permissions:a}}function d(t,r){var o=function(e){return e};return void 0!==e.window&&"function"==typeof e.window.__&&(o=e.window.__),r&&(o=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.__).call.apply(e,[r].concat(n))}),i(i(i(i({},n.ROLE.readonly,o("可阅读")),n.ROLE.edit,o("可编辑")),n.ROLE.manage,o("可管理")),n.ROLE.noPermission,o("无权限"))[t]}function p(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.inOrganization,a=r.ctx,u=r.isYuque,l=void 0===u||u,c=function(e,t){return e};void 0!==e.window&&"function"==typeof e.window.__&&(c=e.window.__),a&&(c=function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=a.__).call.apply(e,[a].concat(r))});var s=c(!l||o?"团队":"知识小组");return i(i(i(i(i(i(i({},n.OWNER_TYPE.User,c("用户")),n.OWNER_TYPE.GroupManager,c("{groupTypeName}管理员",{groupTypeName:s})),n.OWNER_TYPE.GroupMember,c("{groupTypeName}成员",{groupTypeName:s})),n.OWNER_TYPE.GroupReadonlyMember,c("{groupTypeName}只读成员",{groupTypeName:s})),n.OWNER_TYPE.OrganizationOwner,c("空间管理员")),n.OWNER_TYPE.OrganizationMember,c("空间成员")),n.OWNER_TYPE.OrganizationOutsourcer,c("空间外部联系人"))[t]}}).call(this,r(92))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3465),o=function(){function e(){Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"editing",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(e.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.kernel=e,this.editing=t}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return n.CommandState.Unavailable}}),Object.defineProperty(e.prototype,"isEnabled",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.getState(e)!==n.CommandState.Unavailable}}),Object.defineProperty(e.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return!1}}),Object.defineProperty(e.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return!1}}),Object.defineProperty(e,"UNAVAILABLE",{enumerable:!0,configurable:!0,writable:!0,value:n.CommandState.Unavailable}),Object.defineProperty(e,"EXECUTED",{enumerable:!0,configurable:!0,writable:!0,value:n.CommandState.Executed}),Object.defineProperty(e,"NOT_EXECUTED",{enumerable:!0,configurable:!0,writable:!0,value:n.CommandState.NotExecuted}),Object.defineProperty(e,"UNKNOWN",{enumerable:!0,configurable:!0,writable:!0,value:n.CommandState.Unknown}),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAncestors=void 0,t.getAncestors=function(e,t){var r=[];for("string"==typeof(t=t||[])&&(t=[t]);e&&(r.push(e),!t.length||!e.hasCategory(t));){if(e.isRootNode()){if(t.length)return null;break}e=e.parent}return r.reverse()}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteContent=void 0;var o=r(3454),a=r(4419),i=r(4148),u=r(4147),l=r(3477),c=n(r(3526));t.deleteContent=function(e,t,r,n){if(void 0===r&&(r=!0),void 0===n&&(n=!0),t.collapsed&&t.start.node.isCardNode()){o.assert.fatal(0===t.start.offset,"framework/kernel/src/model/utils/range/delete-content.ts:17");var s=t.start.node;t=e.newRange(e.newPosition(s.parentNode,n?s.offset+1:s.offset))}if((0,l.verifyRange)(t,!0),t.collapsed){var f=(0,u.deleteContentByPosition)(e,t.start,r,n);t=f instanceof c.default?f:e.newRange(f)}else t=(0,a.deleteContentByRange)(e,t,r),o.assert.fatal(t.collapsed,"framework/kernel/src/model/utils/range/delete-content.ts:45");return(0,i.shrinkRange)(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ALERT_TYPE_SORT=t.ALERT_TYPE=t.ALERT_TYPE_COLOR5=t.ALERT_TYPE_COLOR4=t.ALERT_TYPE_COLOR3=t.ALERT_TYPE_COLOR2=t.ALERT_TYPE_COLOR1=t.ALERT_TYPE_TIPS=t.ALERT_TYPE_SUCCESS=t.ALERT_TYPE_DANGER=t.ALERT_TYPE_WARNING=t.ALERT_TYPE_INFO=t.ALERT=void 0,t.ALERT="alert",t.ALERT_TYPE_INFO="info",t.ALERT_TYPE_WARNING="warning",t.ALERT_TYPE_DANGER="danger",t.ALERT_TYPE_SUCCESS="success",t.ALERT_TYPE_TIPS="tips",t.ALERT_TYPE_COLOR1="color1",t.ALERT_TYPE_COLOR2="color2",t.ALERT_TYPE_COLOR3="color3",t.ALERT_TYPE_COLOR4="color4",t.ALERT_TYPE_COLOR5="color5",t.ALERT_TYPE=[t.ALERT_TYPE_INFO,t.ALERT_TYPE_WARNING,t.ALERT_TYPE_DANGER,t.ALERT_TYPE_SUCCESS,t.ALERT_TYPE_TIPS,t.ALERT_TYPE_COLOR1,t.ALERT_TYPE_COLOR2,t.ALERT_TYPE_COLOR3,t.ALERT_TYPE_COLOR4,t.ALERT_TYPE_COLOR5],t.ALERT_TYPE_SORT=[t.ALERT_TYPE_TIPS,t.ALERT_TYPE_INFO,t.ALERT_TYPE_COLOR1,t.ALERT_TYPE_COLOR2,t.ALERT_TYPE_SUCCESS,t.ALERT_TYPE_WARNING,t.ALERT_TYPE_COLOR3,t.ALERT_TYPE_DANGER,t.ALERT_TYPE_COLOR4,t.ALERT_TYPE_COLOR5]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlAttrName=t.HtmlNodeName=t.LakeStyle=t.HtmlStyle=t.AlignmentValues=t.ALIGNMENT_DISTRIBUTED=t.ALIGNMENT_JUSTIFY=t.ALIGNMENT_RIGHT=t.ALIGNMENT_CENTER=t.ALIGNMENT_LEFT=void 0,t.ALIGNMENT_LEFT="left",t.ALIGNMENT_CENTER="center",t.ALIGNMENT_RIGHT="right",t.ALIGNMENT_JUSTIFY="justify",t.ALIGNMENT_DISTRIBUTED="distributed",t.AlignmentValues=[t.ALIGNMENT_LEFT,t.ALIGNMENT_CENTER,t.ALIGNMENT_RIGHT,t.ALIGNMENT_JUSTIFY,t.ALIGNMENT_DISTRIBUTED],t.HtmlStyle="text-align",t.LakeStyle="text-align",t.HtmlNodeName="center",t.HtmlAttrName="ne-alignment"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.default=n},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FOCUS_CARD_BEFORE=t.FOCUS_CARD=t.EVENT_OPERATION_ROLLBACK=t.EVENT_SELECTION_CHANGE=t.EVENT_AFTER_CONTENT_CHANGE=t.EVENT_BEFORE_CONTENT_CHANGE=t.EVENT_CONTENT_CHANGE=t.EVENT_JOB_CREATED=t.EVENT_OPERATION_SUBMITTED=t.EVENT_NODE_WILL_CHANGE=t.EVENT_BOUNDARY_CLASS_NAME=t.EVENT_BOUNDARY_ATTR_NAME=t.ENV_YUQUE=t.ENV_LARK=t.DEFAULT_LINK=t.COMMENT_LEFT_GAP=t.CommandState=t.COMMAND_UNKNOWN=t.COMMAND_EXECUTED=t.COMMAND_NOT_EXECUTED=t.COMMAND_UNAVAILABLE=t.MIN_WIDTH=t.MAX_COLS=t.COLUMN=t.COLUMNS=t.SUMMARY=t.COLLAPSE=t.CARD=t.CARD_SPACING=t.CARD_SPACING_BOTTOM=t.CARD_SPACING_TOP=t.CARD_SPACING_BOTH=t.DONT_SHOW=t.SELECTED=t.NOT_SELECTED=t.ANCHOR_TYPE_BOTTOM_LEFT=t.ANCHOR_TYPE_TOP_RIGHT=t.ANCHOR_TYPE_END=t.ANCHOR_TYPE_START=t.CommandInterceptor=t.PureCommand=t.Hub=t.unwrapID=t.wrapID=t.AbstractService=t.AttributeSynchronizer=t.Registry=t.AttrTranslator=t.TYPE_ATTR_NAME=t.TYPE_STYLE_NAME=void 0,t.sliceTextNodeByLine=t.getRectsByTextNode=t.Drawer=t.TinyCanvas=t.WIDTH_MODE_CONTAIN=t.WIDTH_MODE_NORMAL=t.VIEWER_BODY_SELECTOR=t.VIEWER_ROOT_SELECTOR=t.VIEWER_MODE=t.UI_TYPE=t.TYPE_SMALL=t.TYPE_NOTE=t.TYPE_SIMPLE=t.TYPE_DEFAULT=t.THEME_DARK=t.THEME_LIGHT=t.TABLE_BOX_NODE_NAME=t.TABLE_INNER_WRAP_NODE_NAME=t.TABLE_WRAP_NODE_NAME=t.SOURCE_FROM_MATERIAL_LIBRARY=t.SOURCE_FROM_UI=t.SOURCE_FROM_DROP=t.SOURCE_FROM_PASTE=t.SOURCE_FROM_INIT=t.SCENE_MOBILE_APP=t.LOW_PRIORITY=t.MEDIUM_PRIORITY=t.HIGH_PRIORITY=t.OVERLAY_PLACEMENT_RIGHT_BOTTOM=t.OVERLAY_PLACEMENT_RIGHT_TOP=t.OVERLAY_PLACEMENT_RIGHT=t.OVERLAY_PLACEMENT_LEFT_BOTTOM=t.OVERLAY_PLACEMENT_LEFT_TOP=t.OVERLAY_PLACEMENT_LEFT=t.OVERLAY_PLACEMENT_BOTTOM_RIGHT=t.OVERLAY_PLACEMENT_BOTTOM_LEFT=t.OVERLAY_PLACEMENT_BOTTOM=t.OVERLAY_PLACEMENT_TOP_RIGHT=t.OVERLAY_PLACEMENT_TOP_LEFT=t.OVERLAY_PLACEMENT_TOP=t.KEY_IN_COMPOSITION=t.THROUTH_INHERIT_ATTRS=t.INLINE_INHERIT_ATTRS=t.INHERIT_TYPES=t.INHERIT_TEXT=t.INHERIT_INLINE_CARD=t.HTML_WRITER_MODE=t.HTML_WRITER_MODE_CLEAN=t.HTML_WRITER_MODE_INLINE=t.FOCUS_CARD_AFTER=void 0,t.TABLE_TOOLBAR=t.MOBILE_TOOLBAR=t.DEFAULT_TOOLBAR=t.Theme=t.SidebarUIDescriptor=t.createPluginRegister=t.fileTypeEnum=t.getRectsByRange=void 0;var o=r(4201);Object.defineProperty(t,"TYPE_STYLE_NAME",{enumerable:!0,get:function(){return o.TYPE_STYLE_NAME}}),Object.defineProperty(t,"TYPE_ATTR_NAME",{enumerable:!0,get:function(){return o.TYPE_ATTR_NAME}});var a=r(4016);Object.defineProperty(t,"AttrTranslator",{enumerable:!0,get:function(){return a.AttrTranslator}});var i=n(r(4524));t.Registry=i.default;var u=n(r(4525));t.AttributeSynchronizer=u.default;var l=r(3472);Object.defineProperty(t,"AbstractService",{enumerable:!0,get:function(){return l.AbstractService}}),Object.defineProperty(t,"wrapID",{enumerable:!0,get:function(){return l.wrapID}}),Object.defineProperty(t,"unwrapID",{enumerable:!0,get:function(){return l.unwrapID}});var c=n(r(3910));t.Hub=c.default;var s=n(r(4202));t.PureCommand=s.default;var f=n(r(4526));t.CommandInterceptor=f.default;var d=r(4527);Object.defineProperty(t,"ANCHOR_TYPE_START",{enumerable:!0,get:function(){return d.ANCHOR_TYPE_START}}),Object.defineProperty(t,"ANCHOR_TYPE_END",{enumerable:!0,get:function(){return d.ANCHOR_TYPE_END}}),Object.defineProperty(t,"ANCHOR_TYPE_TOP_RIGHT",{enumerable:!0,get:function(){return d.ANCHOR_TYPE_TOP_RIGHT}}),Object.defineProperty(t,"ANCHOR_TYPE_BOTTOM_LEFT",{enumerable:!0,get:function(){return d.ANCHOR_TYPE_BOTTOM_LEFT}});var p=r(4528);Object.defineProperty(t,"NOT_SELECTED",{enumerable:!0,get:function(){return p.NOT_SELECTED}}),Object.defineProperty(t,"SELECTED",{enumerable:!0,get:function(){return p.SELECTED}}),Object.defineProperty(t,"DONT_SHOW",{enumerable:!0,get:function(){return p.DONT_SHOW}});var h=r(3518);Object.defineProperty(t,"CARD_SPACING_BOTH",{enumerable:!0,get:function(){return h.CARD_SPACING_BOTH}}),Object.defineProperty(t,"CARD_SPACING_TOP",{enumerable:!0,get:function(){return h.CARD_SPACING_TOP}}),Object.defineProperty(t,"CARD_SPACING_BOTTOM",{enumerable:!0,get:function(){return h.CARD_SPACING_BOTTOM}}),Object.defineProperty(t,"CARD_SPACING",{enumerable:!0,get:function(){return h.CARD_SPACING}});var y=n(r(3482));t.CARD=y.default;var b=r(3484);Object.defineProperty(t,"COLLAPSE",{enumerable:!0,get:function(){return b.COLLAPSE}}),Object.defineProperty(t,"SUMMARY",{enumerable:!0,get:function(){return b.SUMMARY}});var m=r(3490);Object.defineProperty(t,"COLUMNS",{enumerable:!0,get:function(){return m.COLUMNS}}),Object.defineProperty(t,"COLUMN",{enumerable:!0,get:function(){return m.COLUMN}}),Object.defineProperty(t,"MAX_COLS",{enumerable:!0,get:function(){return m.MAX_COLS}}),Object.defineProperty(t,"MIN_WIDTH",{enumerable:!0,get:function(){return m.MIN_WIDTH}});var v=r(3465);Object.defineProperty(t,"COMMAND_UNAVAILABLE",{enumerable:!0,get:function(){return v.COMMAND_UNAVAILABLE}}),Object.defineProperty(t,"COMMAND_NOT_EXECUTED",{enumerable:!0,get:function(){return v.COMMAND_NOT_EXECUTED}}),Object.defineProperty(t,"COMMAND_EXECUTED",{enumerable:!0,get:function(){return v.COMMAND_EXECUTED}}),Object.defineProperty(t,"COMMAND_UNKNOWN",{enumerable:!0,get:function(){return v.COMMAND_UNKNOWN}}),Object.defineProperty(t,"CommandState",{enumerable:!0,get:function(){return v.CommandState}});var g=r(4529);Object.defineProperty(t,"COMMENT_LEFT_GAP",{enumerable:!0,get:function(){return g.COMMENT_LEFT_GAP}});var _=r(4530);Object.defineProperty(t,"DEFAULT_LINK",{enumerable:!0,get:function(){return _.DEFAULT_LINK}});var w=r(4531);Object.defineProperty(t,"ENV_LARK",{enumerable:!0,get:function(){return w.ENV_LARK}}),Object.defineProperty(t,"ENV_YUQUE",{enumerable:!0,get:function(){return w.ENV_YUQUE}});var O=r(4532);Object.defineProperty(t,"EVENT_BOUNDARY_ATTR_NAME",{enumerable:!0,get:function(){return O.EVENT_BOUNDARY_ATTR_NAME}}),Object.defineProperty(t,"EVENT_BOUNDARY_CLASS_NAME",{enumerable:!0,get:function(){return O.EVENT_BOUNDARY_CLASS_NAME}});var E=r(3842);Object.defineProperty(t,"EVENT_NODE_WILL_CHANGE",{enumerable:!0,get:function(){return E.EVENT_NODE_WILL_CHANGE}}),Object.defineProperty(t,"EVENT_OPERATION_SUBMITTED",{enumerable:!0,get:function(){return E.EVENT_OPERATION_SUBMITTED}}),Object.defineProperty(t,"EVENT_JOB_CREATED",{enumerable:!0,get:function(){return E.EVENT_JOB_CREATED}}),Object.defineProperty(t,"EVENT_CONTENT_CHANGE",{enumerable:!0,get:function(){return E.EVENT_CONTENT_CHANGE}}),Object.defineProperty(t,"EVENT_BEFORE_CONTENT_CHANGE",{enumerable:!0,get:function(){return E.EVENT_BEFORE_CONTENT_CHANGE}}),Object.defineProperty(t,"EVENT_AFTER_CONTENT_CHANGE",{enumerable:!0,get:function(){return E.EVENT_AFTER_CONTENT_CHANGE}}),Object.defineProperty(t,"EVENT_SELECTION_CHANGE",{enumerable:!0,get:function(){return E.EVENT_SELECTION_CHANGE}}),Object.defineProperty(t,"EVENT_OPERATION_ROLLBACK",{enumerable:!0,get:function(){return E.EVENT_OPERATION_ROLLBACK}});var P=r(4203);Object.defineProperty(t,"FOCUS_CARD",{enumerable:!0,get:function(){return P.FOCUS_CARD}}),Object.defineProperty(t,"FOCUS_CARD_BEFORE",{enumerable:!0,get:function(){return P.FOCUS_CARD_BEFORE}}),Object.defineProperty(t,"FOCUS_CARD_AFTER",{enumerable:!0,get:function(){return P.FOCUS_CARD_AFTER}});var j=r(3914);Object.defineProperty(t,"HTML_WRITER_MODE_INLINE",{enumerable:!0,get:function(){return j.HTML_WRITER_MODE_INLINE}}),Object.defineProperty(t,"HTML_WRITER_MODE_CLEAN",{enumerable:!0,get:function(){return j.HTML_WRITER_MODE_CLEAN}}),Object.defineProperty(t,"HTML_WRITER_MODE",{enumerable:!0,get:function(){return j.HTML_WRITER_MODE}});var C=r(3998);Object.defineProperty(t,"INHERIT_INLINE_CARD",{enumerable:!0,get:function(){return C.INHERIT_INLINE_CARD}}),Object.defineProperty(t,"INHERIT_TEXT",{enumerable:!0,get:function(){return C.INHERIT_TEXT}}),Object.defineProperty(t,"INHERIT_TYPES",{enumerable:!0,get:function(){return C.INHERIT_TYPES}}),Object.defineProperty(t,"INLINE_INHERIT_ATTRS",{enumerable:!0,get:function(){return C.INLINE_INHERIT_ATTRS}}),Object.defineProperty(t,"THROUTH_INHERIT_ATTRS",{enumerable:!0,get:function(){return C.THROUTH_INHERIT_ATTRS}});var k=r(4533);Object.defineProperty(t,"KEY_IN_COMPOSITION",{enumerable:!0,get:function(){return k.KEY_IN_COMPOSITION}});var S=r(4534);Object.defineProperty(t,"OVERLAY_PLACEMENT_TOP",{enumerable:!0,get:function(){return S.OVERLAY_PLACEMENT_TOP}}),Object.defineProperty(t,"OVERLAY_PLACEMENT_TOP_LEFT",{enumerable:!0,get:function(){return S.OVERLAY_PLACEMENT_TOP_LEFT}}),Object.defineProperty(t,"OVERLAY_PLACEMENT_TOP_RIGHT",{enumerable:!0,get:function(){return S.OVERLAY_PLACEMENT_TOP_RIGHT}}),Object.defineProperty(t,"OVERLAY_PLACEMENT_BOTTOM",{enumerable:!0,get:function(){return S.OVERLAY_PLACEMENT_BOTTOM}}),Object.defineProperty(t,"OVERLAY_PLACEMENT_BOTTOM_LEFT",{enumerable:!0,get:function(){return S.OVERLAY_PLACEMENT_BOTTOM_LEFT}}),Object.defineProperty(t,"OVERLAY_PLACEMENT_BOTTOM_RIGHT",{enumerable:!0,get:function(){return S.OVERLAY_PLACEMENT_BOTTOM_RIGHT}}),Object.defineProperty(t,"OVERLAY_PLACEMENT_LEFT",{enumerable:!0,get:function(){return S.OVERLAY_PLACEMENT_LEFT}}),Object.defineProperty(t,"OVERLAY_PLACEMENT_LEFT_TOP",{enumerable:!0,get:function(){return S.OVERLAY_PLACEMENT_LEFT_TOP}}),Object.defineProperty(t,"OVERLAY_PLACEMENT_LEFT_BOTTOM",{enumerable:!0,get:function(){return S.OVERLAY_PLACEMENT_LEFT_BOTTOM}}),Object.defineProperty(t,"OVERLAY_PLACEMENT_RIGHT",{enumerable:!0,get:function(){return S.OVERLAY_PLACEMENT_RIGHT}}),Object.defineProperty(t,"OVERLAY_PLACEMENT_RIGHT_TOP",{enumerable:!0,get:function(){return S.OVERLAY_PLACEMENT_RIGHT_TOP}}),Object.defineProperty(t,"OVERLAY_PLACEMENT_RIGHT_BOTTOM",{enumerable:!0,get:function(){return S.OVERLAY_PLACEMENT_RIGHT_BOTTOM}});var A=r(4535);Object.defineProperty(t,"HIGH_PRIORITY",{enumerable:!0,get:function(){return A.HIGH_PRIORITY}}),Object.defineProperty(t,"MEDIUM_PRIORITY",{enumerable:!0,get:function(){return A.MEDIUM_PRIORITY}}),Object.defineProperty(t,"LOW_PRIORITY",{enumerable:!0,get:function(){return A.LOW_PRIORITY}});var x=r(4536);Object.defineProperty(t,"SCENE_MOBILE_APP",{enumerable:!0,get:function(){return x.SCENE_MOBILE_APP}});var N=r(3633);Object.defineProperty(t,"SOURCE_FROM_INIT",{enumerable:!0,get:function(){return N.SOURCE_FROM_INIT}}),Object.defineProperty(t,"SOURCE_FROM_PASTE",{enumerable:!0,get:function(){return N.SOURCE_FROM_PASTE}}),Object.defineProperty(t,"SOURCE_FROM_DROP",{enumerable:!0,get:function(){return N.SOURCE_FROM_DROP}}),Object.defineProperty(t,"SOURCE_FROM_UI",{enumerable:!0,get:function(){return N.SOURCE_FROM_UI}}),Object.defineProperty(t,"SOURCE_FROM_MATERIAL_LIBRARY",{enumerable:!0,get:function(){return N.SOURCE_FROM_MATERIAL_LIBRARY}});var T=r(4537);Object.defineProperty(t,"TABLE_WRAP_NODE_NAME",{enumerable:!0,get:function(){return T.TABLE_WRAP_NODE_NAME}}),Object.defineProperty(t,"TABLE_INNER_WRAP_NODE_NAME",{enumerable:!0,get:function(){return T.TABLE_INNER_WRAP_NODE_NAME}}),Object.defineProperty(t,"TABLE_BOX_NODE_NAME",{enumerable:!0,get:function(){return T.TABLE_BOX_NODE_NAME}});var D=r(4538);Object.defineProperty(t,"THEME_LIGHT",{enumerable:!0,get:function(){return D.THEME_LIGHT}}),Object.defineProperty(t,"THEME_DARK",{enumerable:!0,get:function(){return D.THEME_DARK}});var L=r(4539);Object.defineProperty(t,"TYPE_DEFAULT",{enumerable:!0,get:function(){return L.TYPE_DEFAULT}}),Object.defineProperty(t,"TYPE_SIMPLE",{enumerable:!0,get:function(){return L.TYPE_SIMPLE}}),Object.defineProperty(t,"TYPE_NOTE",{enumerable:!0,get:function(){return L.TYPE_NOTE}}),Object.defineProperty(t,"UI_TYPE",{enumerable:!0,get:function(){return L.UI_TYPE}}),Object.defineProperty(t,"TYPE_SMALL",{enumerable:!0,get:function(){return L.TYPE_SMALL}});var R=r(4540);Object.defineProperty(t,"VIEWER_MODE",{enumerable:!0,get:function(){return R.VIEWER_MODE}}),Object.defineProperty(t,"VIEWER_ROOT_SELECTOR",{enumerable:!0,get:function(){return R.VIEWER_ROOT_SELECTOR}}),Object.defineProperty(t,"VIEWER_BODY_SELECTOR",{enumerable:!0,get:function(){return R.VIEWER_BODY_SELECTOR}});var I=r(3561);Object.defineProperty(t,"WIDTH_MODE_NORMAL",{enumerable:!0,get:function(){return I.WIDTH_MODE_NORMAL}}),Object.defineProperty(t,"WIDTH_MODE_CONTAIN",{enumerable:!0,get:function(){return I.WIDTH_MODE_CONTAIN}});var M=n(r(4204));t.TinyCanvas=M.default;var F=n(r(4541));t.Drawer=F.default;var B=r(4542);Object.defineProperty(t,"getRectsByTextNode",{enumerable:!0,get:function(){return B.getRectsByTextNode}}),Object.defineProperty(t,"sliceTextNodeByLine",{enumerable:!0,get:function(){return B.sliceTextNodeByLine}}),Object.defineProperty(t,"getRectsByRange",{enumerable:!0,get:function(){return B.getRectsByRange}});var U=r(4543);Object.defineProperty(t,"fileTypeEnum",{enumerable:!0,get:function(){return U.fileTypeEnum}});var H=r(3460);Object.defineProperty(t,"createPluginRegister",{enumerable:!0,get:function(){return H.createPluginRegister}});var V=n(r(4544));t.SidebarUIDescriptor=V.default;var G=r(4205);Object.defineProperty(t,"Theme",{enumerable:!0,get:function(){return G.Theme}});var q=r(4545);Object.defineProperty(t,"DEFAULT_TOOLBAR",{enumerable:!0,get:function(){return q.DEFAULT_TOOLBAR}}),Object.defineProperty(t,"MOBILE_TOOLBAR",{enumerable:!0,get:function(){return q.MOBILE_TOOLBAR}}),Object.defineProperty(t,"TABLE_TOOLBAR",{enumerable:!0,get:function(){return q.TABLE_TOOLBAR}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbedButtonStatus=t.FILE_TYPE_BLOCK=t.FILE_TYPE_INLINE=t.FILE_MODE_TITLE=t.FILE_MODE_EMBED=t.FILE_MODE_CARD=void 0,t.FILE_MODE_CARD="card",t.FILE_MODE_EMBED="embed",t.FILE_MODE_TITLE="title",t.FILE_TYPE_INLINE="inline",t.FILE_TYPE_BLOCK="block",t.EmbedButtonStatus={NORMAL:0,DISABLE:1,PREVENT:2}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.bindEvent=void 0;var a=r(3454);t.bindEvent=function(e,t,r,i){for(var u=[],l=4;l<arguments.length;l++)u[l-4]=arguments[l];(0,a.assert)("function"==typeof e.destroy,"framework/utils/src/bind-event.ts:19"),(0,a.assert)("function"==typeof t.on,"framework/utils/src/bind-event.ts:20"),(0,a.assert)("function"==typeof t.off,"framework/utils/src/bind-event.ts:21");var c=e.destroy;t.on.apply(t,o([r,i],n(u),!1)),e.destroy=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];c.apply(e,a),t.off.apply(t,o([r,i],n(u),!1))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLastHeadingIndexType=t.getLastHeadingIndexType=t.setLastIndexType=t.getLastIndexType=void 0;var n=0,o=2;t.getLastIndexType=function(){return n},t.setLastIndexType=function(e){n=e},t.getLastHeadingIndexType=function(){return o},t.setLastHeadingIndexType=function(e){o=e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"paragraph",node:{p:"p"},domNode:{p:"ne-p"},command:{plainText:"plainText"},cardSelect:"p"})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_COL_WIDTH=t.DEFAULT_TABLE_ROW_HEIGHT=t.DEFAULT_TABLE_WIDTH=t.BORDER_DEFAULTS=void 0,t.BORDER_DEFAULTS={width:1,style:"solid",color:"#D9D9D9"},t.DEFAULT_TABLE_WIDTH=750,t.DEFAULT_TABLE_ROW_HEIGHT=33,t.DEFAULT_COL_WIDTH=100},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function o(e,t){return!t.node.isConnected||(!!(t.node.isTextNode()&&t.offset>t.node.dataLength)||t.node.offset>t.node.childCount)}function a(e,t,r){if(function(e){var t,r;if(e.childCount>1)return null;var o=e.children[0];if(!o)return null;var a="";try{for(var i=n(o.children),u=i.next();!u.done;u=i.next()){var l=u.value;if("#text"!==l.nodeName)return null;a+=l.data}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return a.trim()}(t)!==r){var a=t.children.slice(0),i=0,u=a[0];(null==u?void 0:u.nodeName)===e.defaultElementName?i=1:(i=0,u=e.createElement("p",{alignment:"center"}));for(var l=i;l<a.length;l++){var c=a[l];e.removeChild(t,c)}if(0===u.childCount)return u.parent!==t&&e.appendChild(t,u),void e.appendChild(u,e.createTextNode(r));var s=u.children[0];i=0,"#text"===(null==s?void 0:s.nodeName)?(i=1,e.setTextNodeData(s,r)):(i=0,s=e.createTextNode(r));for(l=i;l<u.childCount;l++){c=u.children[l];e.removeChild(u,c)}u.parent!==t&&e.appendChild(t,u),s.parent!==u&&e.appendChild(u,s);var f=function(e,t){var r,a,i=e.getSelection();if(!i)return!1;var u=[],l=!1;try{for(var c=n(i.ranges),s=c.next();!s.done;s=c.next()){var f=s.value;if(f.collapsed){if(o(0,f.start)){u.push(e.newRange(t,t)),l=!0;continue}}else if(o(0,f.start)||o(0,f.end)){u.push(e.newRange(t,t)),l=!0;continue}u.push(f)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}return!!l&&u}(e,e.newPosition(s,s.dataLength));f&&e.setSelection(e.newSelection(f))}}Object.defineProperty(t,"__esModule",{value:!0}),t.flushQueueNoToTableNode=t.getTableQueueStartAndEnd=void 0,t.getTableQueueStartAndEnd=function(e,t){for(var r,o,a,i,u=t.children,l=-1,c=t.childCount-1,s=c;s>=0;s--){var f=u[s].children[0];if(!f)return null;if(0===f._attrs.col){if(f.childCount>1||(null===(i=null===(a=f.children)||void 0===a?void 0:a[0])||void 0===i?void 0:i.nodeName)!==e.defaultElementName)return null;var d=f.children[0];if(!d)return null;var p="";try{for(var h=(r=void 0,n(d.children)),y=h.next();!y.done;y=h.next()){var b=y.value;if("#text"!==b.nodeName)return null;p+=b.data}}catch(e){r={error:e}}finally{try{y&&!y.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}var m=parseInt(p.trim(),10);if(isNaN(l)||m+""!==p.trim())return null;if(-1===l)l=m;else{if(m!==l-1)return null;l=m}if(1===l)return{startRow:s,endRow:c}}}return null},t.flushQueueNoToTableNode=function(e,t,r,o){var i,u;void 0===o&&(o=-1);var l=t.children,c=0;if(l.forEach((function(t,n){n<r||t.children.forEach((function(t,r){r>0||0!==t.attrs.col||(c++,a(e,t,""+c))}))})),o>=0&&o<r)for(var s=o;s<r;s++){var f=l[s].children[0];if(0===f.attrs.col)try{for(var d=(i=void 0,n(f.children.slice(0))),p=d.next();!p.done;p=d.next()){var h=p.value;e.removeChild(f,h)}}catch(e){i={error:e}}finally{try{p&&!p.done&&(u=d.return)&&u.call(d)}finally{if(i)throw i.error}}}}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.INTERSECTION_MARGIN=t.DELAY_INIT=t.getValidTheme=t.DARK_CODEBLOCK_THEME_NAME=t.DEFAULT_CODEBLOCK_THEME_NAME=t.THEMES=t.CODE_THEME_ENUM=t.BRACKET_LIGHTS_PRO_THEME=t.GITHUB_THEME=t.ONE_DARK_PRO_THEME=t.NIGHT_OWL_THEME=t.DARCULAR_THEME=t.DEFAULT_DARDK_THEME=t.DEFAULT_THEME=t.DISABLE_FORMAT_MODE=t.MODES=void 0,t.MODES=[{value:"agda",syntax:"text/x-agda",name:"Agda",ext:["agda"]},{value:"arkts",syntax:"text/x-arkts",name:"ArkTS",ext:["ets","arkts"]},{value:"bash",syntax:"shell",name:"Bash",ext:["bash"]},{value:"basic",syntax:"vbscript",name:"Basic",ext:["vbs"]},{value:"c",syntax:"text/x-csrc",name:"C",ext:["c","h","ino"]},{value:"cpp",syntax:"text/x-c++src",name:"C++",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"]},{value:"csharp",syntax:"text/x-csharp",name:"C#",ext:["cs"]},{value:"css",syntax:"css",name:"CSS",ext:["css"]},{value:"dart",syntax:"dart",name:"Dart",ext:["dart"]},{value:"diff",syntax:"diff",name:"Diff",ext:["diff","patch"]},{value:"dockerfile",syntax:"dockerfile",name:"Dockerfile"},{value:"erlang",syntax:"erlang",name:"Erlang",ext:["erl"]},{value:"glsl",syntax:"x-shader/x-vertex",name:"Glsl",ext:["glsl"]},{value:"git",syntax:"shell",name:"Git"},{value:"go",syntax:"go",name:"Go",ext:["go"]},{value:"graphql",syntax:"graphql",name:"GraphQL"},{value:"groovy",syntax:"groovy",name:"Groovy",ext:["groovy","gradle"]},{value:"html",syntax:"htmlmixed",name:"HTML",ext:["html","htm","handlebars","hbs"]},{value:"http",syntax:"http",name:"HTTP"},{value:"java",syntax:"text/x-java",name:"Java",ext:["java"]},{value:"javascript",syntax:"text/javascript",name:"JavaScript",ext:["js"]},{value:"json",syntax:"application/json",name:"JSON",ext:["json","map"]},{value:"jsx",syntax:"jsx",name:"JSX",ext:["jsx"]},{value:"katex",syntax:"simplemode",name:"KaTeX"},{value:"kotlin",syntax:"text/x-kotlin",name:"Kotlin",ext:["kt"]},{value:"less",syntax:"css",name:"Less",ext:["less"]},{value:"makefile",syntax:"cmake",name:"Makefile"},{value:"markdown",syntax:"markdown",name:"Markdown",ext:["markdown","md","mkd"]},{value:"matlab",syntax:"octave",name:"MATLAB"},{value:"nginx",syntax:"nginx",name:"Nginx",ext:["conf"]},{value:"objectivec",syntax:"text/x-objectivec",name:"Objective-C",ext:["m"]},{value:"pascal",syntax:"pascal",name:"Pascal",ext:["p","pas"]},{value:"perl",syntax:"perl",name:"Perl",ext:["pl","pm"]},{value:"php",syntax:"text/x-php",name:"PHP",ext:["php","php3","php4","php5","php7","phtml"]},{value:"powershell",syntax:"powershell",name:"PowerShell",ext:["ps1","psd1","psm1"]},{value:"protobuf",syntax:"protobuf",name:"Protobuf",ext:["proto"]},{value:"python",syntax:"python",name:"Python",ext:["build","bzl","py","pyw"]},{value:"r",syntax:"r",name:"R",ext:["r","R"]},{value:"ruby",syntax:"ruby",name:"Ruby",ext:["rb"]},{value:"rust",syntax:"rust",name:"Rust",ext:["rs"]},{value:"scala",syntax:"text/x-scala",name:"Scala",ext:["scala"]},{value:"shell",syntax:"shell",name:"Shell",ext:["sh","ksh"]},{value:"sql",syntax:"text/x-sql",name:"SQL",ext:["sql"]},{value:"plsql",syntax:"text/x-plsql",name:"PL/SQL"},{value:"swift",syntax:"swift",name:"Swift",ext:["swift"]},{value:"typescript",syntax:"text/typescript",name:"TypeScript",ext:["ts"]},{value:"vbnet",syntax:"vb",name:"VB.net",ext:["vb"]},{value:"velocity",syntax:"velocity",name:"Velocity",ext:["vtl"]},{value:"xml",syntax:"xml",name:"XML",ext:["xml","xsl","xsd","svg"]},{value:"yaml",syntax:"yaml",name:"YAML",ext:["yaml","yml"]},{value:"stex",syntax:"text/x-stex",name:"sTeX"},{value:"latex",syntax:"text/x-latex",name:"LaTeX",ext:["text","ltx","tex"]},{value:"systemverilog",syntax:"text/x-systemverilog",name:"SystemVerilog",ext:["sv","svh"]},{value:"sass",name:"Sass",syntax:"text/x-sass",ext:["sass","scss"]},{value:"tcl",syntax:"text/x-tcl",name:"Tcl",ext:["tcl"]},{value:"verilog",syntax:"text/x-verilog",name:"Verilog",ext:["v"]},{value:"vue",syntax:"text/x-vue",name:"Vue"},{value:"lua",syntax:"text/x-lua",name:"Lua",ext:["lua"]},{value:"haskell",syntax:"haskell",name:"Haskell",ext:["hs"]},{value:"properties",syntax:"properties",name:"Properties",ext:["properties","ini","in"]},{value:"toml",syntax:"toml",name:"TOML",ext:["toml"]},{value:"cypher",syntax:"cypher",name:"Cypher",ext:["cyp","cypher"]},{value:"tsx",syntax:"jsx",name:"TSX",ext:["tsx"]},{value:"f#",syntax:"mllike",name:"F#",ext:["fs"]},{value:"ocaml",syntax:"mllike",name:"OCaml",ext:["ml","mli","mll","mly"]},{value:"clojure",syntax:"clojure",name:"Clojure",ext:["clj","cljc","cljx"]},{value:"abap",syntax:"abap",name:"ABAP"},{value:"julia",syntax:"julia",name:"Julia",ext:["jl"]},{value:"cmake",syntax:"cmake",name:"CMake",ext:["cmake"]},{value:"scheme",syntax:"scheme",name:"Scheme",ext:["scm","ss"]},{value:"commonlisp",syntax:"commonlisp",name:"Lisp",ext:["cl","lisp","el"]},{value:"fortran",syntax:"fortran",name:"Fortran",ext:["f90","f95","f03"]},{value:"solidity",syntax:"solidity",name:"Solidity",ext:["sol"]}],t.DISABLE_FORMAT_MODE=["yaml"],t.MODES.sort((function(e,t){var r=e.name.toLowerCase(),n=t.name.toLowerCase();return r===n?0:r<n?-1:1})),t.MODES.unshift({value:"plain",syntax:"simplemode",name:"Plain Text"}),t.DEFAULT_THEME="default",t.DEFAULT_DARDK_THEME="dark-default",t.DARCULAR_THEME="Darcula",t.NIGHT_OWL_THEME="Night Owl",t.ONE_DARK_PRO_THEME="One Dark Pro",t.GITHUB_THEME="Github Light",t.BRACKET_LIGHTS_PRO_THEME="Bracket Lights Pro",function(e){e.DEFAULT="default",e.DEFAULT_DARDK="dark-default",e.DARCULAR="Darcula",e.NIGHT_OWL="Night Owl",e.ONE_DARK_PRO="One Dark Pro",e.GITHUB="Github Light",e.BRACKET_LIGHTS_PRO="Bracket Lights Pro"}(n=t.CODE_THEME_ENUM||(t.CODE_THEME_ENUM={})),t.THEMES=[{name:"Yuque Light Pro",value:n.GITHUB,isDark:!1},{name:"Yuque Light",value:n.DEFAULT,isDark:!1},{name:n.BRACKET_LIGHTS_PRO,value:n.BRACKET_LIGHTS_PRO,isDark:!1},{name:n.ONE_DARK_PRO,value:n.ONE_DARK_PRO,isDark:!0},{name:n.NIGHT_OWL,value:n.NIGHT_OWL,isDark:!0},{name:n.DARCULAR,value:n.DARCULAR,isDark:!0}],t.DEFAULT_CODEBLOCK_THEME_NAME=n.DEFAULT,t.DARK_CODEBLOCK_THEME_NAME=n.DARCULAR,t.getValidTheme=function(e,r){var n=t.THEMES.find((function(t){return t.value===e||t.name===e}));return n?n.value:r?t.DARK_CODEBLOCK_THEME_NAME:t.DEFAULT_CODEBLOCK_THEME_NAME},t.DELAY_INIT=3e3,t.INTERSECTION_MARGIN="800px 0%"},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return u(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=c(r(3464)),f=c(r(3512)),d=r(3518),p=l(r(4261)),h={status:p.Status.Pending,name:null,size:null,taskId:null,taskType:"",url:null,cover:null,videoId:null},y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getInitCardValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r,n,o={};return e&&(o.taskId=e.id,o.taskType=p.TaskType.Upload,e.file&&(o.name=null!==(r=e.file.name)&&void 0!==r?r:h.name,o.size=null!==(n=e.file.size)&&void 0!==n?n:h.size)),f.default.setCardSpacingToValue(d.CARD_SPACING_BOTH,(0,s.default)({},t.DefaultCardValue,o))}}),Object.defineProperty(t,"fromRepository",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.copiedFileInfo,r={status:p.Status.Uploaded,name:t.filename,size:t.size,url:t.url,videoId:t.video_id};return f.default.setCardSpacingToValue(d.CARD_SPACING_BOTH,(0,s.default)({},h,r))}}),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=a({},e);return t.url&&t.status!==p.Status.Done&&(t.status=p.Status.Done),(0,s.default)({},h,t)}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(t.prototype,"getTaskId",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.taskId}}),Object.defineProperty(t.prototype,"getName",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.name}}),Object.defineProperty(t.prototype,"setName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.name=e}}),Object.defineProperty(t.prototype,"getStatus",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.status}}),Object.defineProperty(t.prototype,"setStatus",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.status=e}}),Object.defineProperty(t.prototype,"getUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.url}}),Object.defineProperty(t.prototype,"setUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.url=e}}),Object.defineProperty(t.prototype,"getCover",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.cover}}),Object.defineProperty(t.prototype,"setCover",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.cover=e}}),Object.defineProperty(t.prototype,"getCode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.code}}),Object.defineProperty(t.prototype,"setCode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.code=e}}),Object.defineProperty(t.prototype,"getMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.message}}),Object.defineProperty(t.prototype,"setMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.message=e}}),Object.defineProperty(t.prototype,"getSize",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.size}}),Object.defineProperty(t.prototype,"setSize",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.size=e}}),Object.defineProperty(t.prototype,"isCompleted",{enumerable:!1,configurable:!0,writable:!0,value:function(){switch(this.getStatus()){case p.Status.Uploaded:case p.Status.Done:case p.Status.Error:return!0;default:return!1}}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:h}),t}(f.default);t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isYuqueDomainURL=void 0;var n=[/\.yuque\.com$/];t.isYuqueDomainURL=function(e){try{var t=new URL(e).hostname;return!!n.some((function(e){return e.test(t)}))}catch(e){return!1}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"customCard",cardName:{customInline:"customInline",customBlock:"customBlock"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BOOKMARK_TYPE_BLOCK=t.BOOKMARK_TYPE_INLINE=t.BOOKMARK_MODE_TITLE=t.BOOKMARK_MODE_EMBED=t.BOOKMARK_MODE_CARD=void 0,t.BOOKMARK_MODE_CARD="card",t.BOOKMARK_MODE_EMBED="embed",t.BOOKMARK_MODE_TITLE="title",t.BOOKMARK_TYPE_INLINE="inline",t.BOOKMARK_TYPE_BLOCK="block"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"dateCard",cardName:"dateCard",cardSelect:"dateCard",command:{dateCard:"dateCard",getSelectDateCard:"getSelectDateCard"},eventName:{openDateCardIdEditor:"openDateCardIdEditor"}})},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return P})),r.d(t,"b",(function(){return j}));r(44);var n=r(10),o=r(725),a=r.n(o),i=r(0),u=r.n(i),l=r(3947),c=r(4088),s=r(237),f=r.n(s),d=r(3784);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(){h=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",y="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==p(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?m:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(p(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function y(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){y(a,n,o,i,u,"next",e)}function u(e){y(a,n,o,i,u,"throw",e)}i(void 0)}))}}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var O={editable:!1,steps:[],stepValue:r(4132).a.init,setStepValue:a.a,setEditable:a.a,docGen:{id:0,title:"文档生成器页面",content:{value:{}},user_id:0,isPublished:!1,status:c.b.DRAFT,type:c.a.SRE,created_at:"",updated_at:""},docGenLake:"",updateDocGen:a.a,saveContent:a.a,refManager:{current:{}},hasPublished:!0,showRepoModal:!1,setDocGenLake:a.a,setHasPublished:a.a,setShowRepoModal:a.a,handleSaveTitle:a.a},E=u.a.createContext(O);function P(e){var t=e.docGenId,r=e.steps,o=e.initialStepValue,a=e.onSave,s=_(Object(i.useState)(O.editable),2),p=s[0],y=s[1],m=_(Object(i.useState)(o),2),g=m[0],w=m[1],P=_(Object(i.useState)(v(v({},O.docGen),{},{id:t})),2),j=P[0],C=P[1],k=_(Object(i.useState)(""),2),S=k[0],A=k[1],x=_(u.a.useState(O.hasPublished),2),N=x[0],T=x[1],D=_(u.a.useState(O.showRepoModal),2),L=D[0],R=D[1],I=Object(i.useRef)({}),M=Object(i.useCallback)(function(){var e=b(h().mark((function e(t,r){var o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.f({id:j.id,content:JSON.stringify({value:t})});case 3:(o=e.sent).success?(C(v(v({},j),{},{updated_at:o.data.updated_at})),null!=r&&r.silent||n.a.success("已保存")):n.a.error("保存失败"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.a.error("保存失败");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),[j]),F=Object(i.useCallback)(function(){var e=b(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.g({id:j.id,title:t});case 3:(r=e.sent).success?C(v(v({},j),{},{title:t,updated_at:r.data.updated_at})):n.a.error("标题保存失败"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.a.error("标题保存失败");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[j]),B=Object(i.useMemo)((function(){return{editable:p,setEditable:y,stepValue:g,setStepValue:w,steps:r,docGen:j,docGenLake:S,setDocGenLake:A,updateDocGen:function(e){return C(v(v({},j),e))},refManager:I,saveContent:M,hasPublished:N,setHasPublished:T,showRepoModal:L,setShowRepoModal:R,handleSaveTitle:F}}),[p,g,j,S,N,L,I,M]);return Object(i.useEffect)((function(){if(!B.hasPublished){var e=setInterval((function(){a(B)}),1e4);return function(){clearInterval(e)}}}),[B]),Object(i.useEffect)((function(){function e(){return(e=b(h().mark((function e(){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.c({id:t});case 2:(r=e.sent).success&&(C(r.data),r.data.status===c.b.PUBLISH?(y(!1),T(!0)):(y(!0),T(!1)));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(i.useEffect)((function(){if(!N){var e=f.a.windows?"ctrl+s":"⌘+s";return Object(d.a)(e,(function(e){e.preventDefault(),a(B,!1)})),function(){d.a.unbind(e)}}}),[N,B]),u.a.createElement(E.Provider,{value:B},e.children)}function j(){return Object(i.useContext)(E)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(0),o=r(492),a=r(189),i=function(e){var t=e.loader,r=n.useRef(null);return function(){return r.current?Promise.resolve(r.current):t().then((function(e){return r.current=e,r.current})).catch((function(e){return console.error(e.stack)}))}},u={modal:"styles-module_modal_8nT+9"};function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(){c=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",y="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};f(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var c=p(e[o],e,a);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==l(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=h;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=p(t,r,n);if("normal"===c.type){if(o=n.done?m:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(l(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=f(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,s,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),f(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),f(j,s,"Generator"),f(j,i,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e){var t=e.loader,r=e.name,l=h(o.a.useModal(),2),s=l[0],d=l[1],y=i({loader:t}),b=function(){var e,t=(e=c().mark((function e(t,o){var i,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:if(i=e.sent){e.next=6;break}return console.error("SelectorComponent for ".concat(r," load failed")),e.abrupt("return");case 6:return l=new Promise((function(e){var r=s.info({}),l=function(){var e,n;r.destroy(),null==t||null===(e=t.onClose)||void 0===e||e.call(t),null==o||null===(n=o.afterClose)||void 0===n||n.call(o)},c=f(f({},t),{},{onSelect:function(t){e(t),l()},onClose:function(){e(void 0),l()}});r.update(f(f({className:u.modal,icon:null,centered:!0,cancelText:""},o),{},{content:n.createElement(a.a,null,n.createElement(i,c))}))})),e.next=9,l;case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){p(a,n,o,i,u,"next",e)}function u(e){p(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return{loadSelector:function(){return y()},showSelector:b,contextHolder:d}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(3777),o=function(){return Promise.all([r.e(0),r.e(1),r.e(8),r.e(1380)]).then(r.bind(null,4340)).then((function(e){return e.default}))};function a(){var e=Object(n.a)({loader:o,name:"TemplateSelector"}),t=e.loadSelector,r=e.showSelector;return{loadTemplateSelector:t,showTemplateSelector:function(e){return r(e,{width:e.isDesktop?1100:1140,maskClosable:!0,centered:!0})},contextHolder:e.contextHolder}}},,,,,function(e,t,r){"use strict";var n,o=r(55),a=r.n(o),i=r(61),u=r.n(i),l=r(70),c=r.n(l),s=r(0),f=r.n(s),d=r(2),p=r.n(d),h=r(5),y=r.n(h),b=(r(3331),["onSort","className"]);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e){var t,r,o=e.onSort,i=e.className,u=c()(e,b),l=Object(s.useRef)();function d(e){var t=e.target;if(t.classList.remove("placeholder"),Object.assign(t.style,{width:"",height:""}),!n.dropped){var r=parseInt(t.dataset.index,10);l.current.removeChild(t),l.current.insertBefore(t,l.current.children[r])}}function p(e){if(r!==e){r=e,l.current.classList.add("droppable");var n=l.current.children[r],o=l.current.querySelector(".placeholder")||document.createElement("div");o.classList.add("placeholder"),o!==n&&(l.current.insertBefore(o,n),t=null)}}function h(){r=null;var e=l.current.querySelector(".placeholder:empty");e&&e.remove(),l.current.classList.remove("droppable")}Object(s.useEffect)((function(){Array.from(l.current.querySelectorAll('[draggable="true"]'),(function(e,t){e.dataset.index=t}))}),[e.children]);var m={};return f.a.createElement("div",a()({},u,{className:y()("larkui-sortable",i),onDragStart:function(t){var r=t.target;if(r.parentNode===l.current){var o;t.stopPropagation();try{o=JSON.parse(r.dataset.drag)}catch(e){}var a=v(v({},o),{},{type:l.current.dataset.type,index:parseInt(r.dataset.index,10),rect:r.getBoundingClientRect(),origin:{x:t.clientX,y:t.clientY}});t.dataTransfer.setData("application/json",JSON.stringify(a)),n=a,t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(r,t.clientX-a.rect.x,t.clientY-a.rect.y),r.addEventListener("dragend",d,{once:!0}),e.onDragStart(),setTimeout((function(){r.classList.add("placeholder"),Object.assign(r.style,{width:"".concat(a.rect.width,"px"),height:"".concat(a.rect.height,"px")})}),1)}},onDragEnter:function(e){e.dataTransfer.dropEffect="move",t=null},onDragOver:function(e){var r=n;if(r&&r.type===l.current.dataset.type){e.preventDefault();var o=e.clientX-r.origin.x,a=e.clientY-r.origin.y,i={width:r.rect.width,height:r.rect.height,top:r.rect.top+a,right:r.rect.right+o,bottom:r.rect.bottom+a,left:r.rect.left+o},u=(e.clientY,m.clientY,e.clientX-m.clientX>0),c=(e.clientX,m.clientX,e.clientY-m.clientY>0);m={clientX:e.clientX,clientY:e.clientY},t||(t=Array.from(l.current.children,(function(e){return e.getBoundingClientRect()})));var s=t.reduce((function(e,t,r){if(i.top>t.bottom||i.right<t.left||i.bottom<t.top||i.left>t.right)return e;var n=Math.max(i.left,t.left),o=Math.max(i.top,t.top),a=(Math.min(i.right,t.right)-n)*(Math.min(i.bottom,t.bottom)-o);return a>e.area?{area:a,index:u||c?r+1:r}:e}),{area:0});s.area/(i.width*i.height)>=.3?p(s.index):p(t.length)}},onDragLeave:function(e){if(!e.currentTarget.contains(e.relatedTarget)){var t=e.currentTarget.getBoundingClientRect(),r=getComputedStyle(e.currentTarget).marginTop,n=Math.max(t.top,t.top-parseInt(r,10));e.clientX>=t.left&&e.clientX<=t.right&&e.clientY>=n&&e.clientY<=t.bottom||h()}},onDrop:function(e){e.preventDefault();var t=n;null!=t.index&&null!=r&&(t.dropped=!0,o(t,r)),h()},ref:l}),e.children)}g.defaultProps={onDragStart:function(){}},g.propTypes={children:p.a.array,className:p.a.string,onSort:p.a.func,onDragStart:p.a.func},t.a=g},,,,function(e,t,r){"use strict";r(3348);var n=r(2809);r(3333);t.a=n.a},,,,function(e,t,r){"use strict";r(3347);var n=r(1332);r(3334);t.a=n.a},function(e,t,r){var n=r(1100).EventEmitter;t.EventEmitter=n,t.mixin=function(e){for(var t in n.prototype)e.prototype[t]=n.prototype[t]}},function(e,t){t.doNothing=function(){},t.hasKeys=function(e){for(var t in e)return!0;return!1},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isValidVersion=function(e){return null===e||t.isInteger(e)&&e>=0},t.isValidTimestamp=function(e){return t.isValidVersion(e)},t.MAX_SAFE_INTEGER=9007199254740991},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";t.a={revertLink:"index-module_revertLink_csROb"}},,,function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(2),i=r.n(a),u=r(532),l=r(33),c=r(295),s=Object(c.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(14),r.e(22),r.e(1353)]).then(r.bind(null,4319))}),{suspense:!0}),f=function(e){return o.a.createElement(s,e)};f.propTypes={onHistroyChange:i.a.func,onCancel:i.a.func,theme:i.a.string,embed:i.a.bool,isMiniType:i.a.bool,onSearch:i.a.func,location:i.a.object,onClose:i.a.func,isMobile:i.a.bool,sence:i.a.string,subSence:i.a.string,forceDisplay:i.a.bool,history:i.a.object,organization:i.a.object,group:i.a.object,book:i.a.object,doc:i.a.object,me:i.a.object,jumpToNewPage:i.a.bool},t.a=Object(u.d)((function(e){return{search:e.search,group:e.group,book:e.book,doc:e.doc,me:e.me,organization:e.organization}}))(Object(l.withRouter)(f))},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3757),o=r(4420),a=r(4421),i=r(4149),u=r(4422),l=r(3631),c=r(4423),s=r(4002),f=r(4425),d=r(4001),p=r(4426),h=r(4428),y=r(4429),b=r(4430),m=r(4431),v=r(4432),g=r(4433),_=r(4148),w=r(4434),O=r(4150),E=r(3905),P=r(4436),j=r(4005),C=r(4003),k=r(3906),S=r(4437),A=r(4438),x={isValidRange:d.isValidRange,isEqualRange:f.isEqualRange,deleteContent:n.deleteContent,walkRange:k.walkRange,fullWalkRange:l.fullWalkRange,shrinkRange:_.shrinkRange,shrinkBlockNodeBoundary:g.shrinkBlockNodeBoundary,setAttribute:v.setAttribute,removeAttribute:p.removeAttribute,updateAttribute:C.updateAttribute,enlargeRangeContainsBlockNode:a.enlargeRangeContainsBlockNode,enlargeRangeInBlockNode:i.enlargeRangeInBlockNode,enlargeRangeToCommonAncestor:u.enlargeRangeToCommonAncestor,splitTextContent:E.splitTextContent,splitBlock:w.splitBlock,splitBlockContent:O.splitBlockContent,wrapInlineNode:S.wrapInlineNode,unwrapInlineNode:P.unwrapInlineNode,getTextSections:s.getTextSections,searchText:m.searchText,getTextContent:c.getTextContent,wrapRootNode:A.wrapRootNode,unwrapNode:j.unwrapNode,deleteNode:o.deleteNode,replaceText:b.replaceText,replaceMultiText:y.replaceMultiText,replaceBlockNodeAndContentTextAttr:h.replaceBlockNodeAndContentTextAttr};t.default=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_OPERATION_ROLLBACK=t.EVENT_SELECTION_CHANGE=t.EVENT_AFTER_CONTENT_CHANGE=t.EVENT_BEFORE_CONTENT_CHANGE=t.EVENT_CONTENT_CHANGE=t.EVENT_JOB_CREATED=t.EVENT_OPERATION_SUBMITTED=t.EVENT_NODE_WILL_CHANGE=void 0,t.EVENT_NODE_WILL_CHANGE="node.will.change",t.EVENT_OPERATION_SUBMITTED="operation.submitted",t.EVENT_JOB_CREATED="job.created",t.EVENT_CONTENT_CHANGE="contentchange",t.EVENT_BEFORE_CONTENT_CHANGE="beforecontentchange",t.EVENT_AFTER_CONTENT_CHANGE="aftercontentchange",t.EVENT_SELECTION_CHANGE="selectionchange",t.EVENT_OPERATION_ROLLBACK="operationRollback"},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(3454),i=o(r(3497)),u=o(r(3526)),l=r(3459),c=function(){function e(){}return Object.defineProperty(e,"isInTable",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!i.default.closest(e.firstRange.commonAncestorContainer,l.Category.Table)}}),Object.defineProperty(e,"isInvalidTablePosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.node;return"table"===t.nodeName||"tr"===t.nodeName}}),Object.defineProperty(e,"normalizeTdPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.node,n=t.offset;return"table"===r.nodeName&&(r=r.children[n]&&r.children[n].firstChild?r.children[n].firstChild:r.children[n-1]&&r.children[n-1].firstChild?r.children[n-1].firstChild:r.firstChild.firstChild,n=0),"tr"===r.nodeName&&(r=r.children[n]?r.children[n]:r.children[n-1]?r.children[n-1]:r.firstChild?r.firstChild:r.parent.firstChild.firstChild,n=0),e.newPosition(r,n)}}),Object.defineProperty(e,"isSelectAllTable",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=i.default.closest(e.firstRange.commonAncestorContainer,l.Category.TableCell),r=i.default.closest(e.lastRange.commonAncestorContainer,l.Category.TableCell),n=t.parentNode.parentNode,o=t.attrs.col,u=t.parentNode.offset,c=t.attrs.colSpan||1,s=r.attrs.col,f=r.parentNode.offset,d=r.attrs.colSpan||1;return u<=f?(a.assert.fatal("end"===e.focus||"bottomLeft"===e.focus,"framework/kernel/src/model/utils/table-selection/index.ts:83"),0===o&&0===u&&s+d===n.attrs.columnCount&&f===n.attrs.rowCount-1):(a.assert.fatal("start"===e.focus||"topRight"===e.focus,"framework/kernel/src/model/utils/table-selection/index.ts:94"),0===s&&0===f&&o+c===n.attrs.columnCount&&u===n.attrs.rowCount-1)}}),Object.defineProperty(e,"isSelectColumn",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=i.default.closest(e.firstRange.commonAncestorContainer,l.Category.Table);if(!t)return!1;var r=t.attrs.rowCount,n=[],o=[],a=-1;if(!e.ranges.every((function(e){var t=i.default.closest(e.commonAncestorContainer,l.Category.TableCell),r=t.parentNode.offset,u=t.attrs,c=u.col,s=u.colSpan,f=void 0===s?1:s,d=u.rowSpan,p=void 0===d?1:d;a=-1===a?c:a;for(var h=0;h<p;h++)n[r+h]=n[r+h]||0,void 0!==o[r+h]?o[r+h]=Math.min(c,o[r+h]):o[r+h]=c,n[r+h]+=f;return!0})))return!1;if(!n[0]||!n[r-1])return!1;var u=n[0],c=n.every((function(e){return e===u})),s=o.every((function(e){return e===a}));return c&&s}}),Object.defineProperty(e,"isSelectRow",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=i.default.closest(e.firstRange.commonAncestorContainer,l.Category.Table);if(!t)return!1;if(t!==i.default.closest(e.lastRange.commonAncestorContainer,l.Category.Table))return!1;var r={},n=new WeakSet;e.ranges.forEach((function(e){var t=i.default.closest(e.commonAncestorContainer,l.Category.TableCell),o=t.parentNode.offset;r[o]=!0,n.add(t)}));var o=Object.keys(r);return 0!==o.length&&o.every((function(e){return t.children[e].children.every((function(e){return n.has(e)}))}))}}),Object.defineProperty(e,"selectTableCells",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){a.assert.fatal(t.hasCategory(l.Category.Table),"framework/kernel/src/model/utils/table-selection/index.ts:226");var r=[];return t.children.forEach((function(e){e.children.forEach((function(e){r.push(u.default.selectNodeContents(e))}))})),e.newSelection(r)}}),Object.defineProperty(e,"isInTableHead",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r,o,a;if(!e.isInTable(t))return!1;var i=t.ranges;if(0===i.length)return!1;try{for(var u=n(i),c=u.next();!c.done;c=u.next()){var s=c.value.commonAncestorContainer.closest(l.Category.TableCell);if(!s)return!1;var f=s.closest(l.Category.Table);if((!(null==f?void 0:f.attrs.colHead)||(null===(a=s.parent)||void 0===a?void 0:a.firstChild)!==s)&&(!(null==f?void 0:f.attrs.rowHead)||f.firstChild!==s.parent))return!1}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}return!0}}),e}();t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3711)),u=a(r(3714)),l=a(r(3755)),c=a(r(3911)),s=r(3457),f=a(r(3841)),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:""}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();if(u.default.isInCard(t)||u.default.isInHole(t))return l.default.UNAVAILABLE;if(1===t.rangeCount&&t.isCollapsed&&i.default.closestInlineAttrs(t.firstRange.start)[this.attrName])return l.default.EXECUTED;var r=c.default.getAttrValue(e,this._formatSelection(e,t),this.attrName,!1);return r.length>1?l.default.UNKNOWN:1===r.length&&r[0]?l.default.EXECUTED:l.default.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.getSelection();return!(1!==r.rangeCount||!r.isCollapsed||!i.default.closestInlineAttrs(r.firstRange.start)[this.attrName])||c.default.getAttrValue(e,this._formatSelection(e,e.getSelection()),this.attrName,!1,t)}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob(),n=r.getSelection();if(this.getState(r)===l.default.UNAVAILABLE)return e.cancelJob(r),!1;if(n.collapsed&&n.firstRange.start.node.isRootNode()&&n.firstRange.start.isAtEnd){var o=r.createElement(r.defaultElementName);r.appendChild(n.firstRange.start.node,o),n=r.newSelection([r.newRange(r.newPosition(o,0))])}else n=this._formatSelection(r,n);return n=c.default.getAttrValue(r,n,this.attrName,!0,t)[0]?u.default.removeAttribute(r,n,this.attrName,t):u.default.setAttribute(r,n,this.attrName,!0,t),r.setSelection(n),e.commitJob(r),!0}}),Object.defineProperty(t.prototype,"_formatSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(t.rangeCount>1)return t;var r=t.ranges.map((function(t){return f.default.shrinkRange(e,t,!0)}));return t.cloneByRange(r)}}),t}(s.KernelAbstractCommand);t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o=r(3454),a=function(){function e(e,t,r,n,o){void 0===o&&(o=function(){return!0}),Object.defineProperty(this,"_editing",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_handler",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_blockNodes",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"canInsertPosition",{enumerable:!0,configurable:!0,writable:!0,value:o})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._editing,delete this._pattern,delete this._handler,delete this._blockNodes}}),Object.defineProperty(e.prototype,"match",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!this.canInsertPosition(t))return null;if(1!==e.length)return null;var r=e[e.length-1];if(!r)return null;(0,o.assert)(1===r.fragments.length,"plugins/markdown/src/public/head-markdown-matcher.ts:74");var a=null,i=[];if("string"==typeof this._pattern){if(r.text!==this._pattern)return null;a=this._pattern}else{var u="function"==typeof this._pattern?this._pattern(r.text):this._pattern.exec(r.text);if(!u)return null;for(var l=1;l<u.length;l++)i.push(u[l]);a=RegExp.lastMatch}l=0;for(var c=e.length-1;l<c;l++){var s=e[l];if(!s)return null;if(!s.text)return null}var f=n.NodeUtil.closest(r.fragments[0].start.node,n.Category.Block);if(this._blockNodes)if("function"==typeof this._blockNodes){if(!this._blockNodes(f))return null}else if(!f.hasCategory(this._blockNodes))return null;return(0,o.assert)(f,"plugins/markdown/src/public/head-markdown-matcher.ts:133"),{section:e,blockNode:f,matchedText:a,matchedGroup:i}}}),Object.defineProperty(e.prototype,"exec",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._editing.newJob(n.JobMode.User),r=e.section,o=e.blockNode,a=e.matchedText,i=r[r.length-1].fragments[0].start.node;t.setTextNodeData(i,i.data.substring(a.length)),this._handler(t,o,i,e),this._editing.commitJob(t)}}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IFileReaderKernelService=void 0;var a=r(3472),i=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("IFileReaderKernelService")}),t}(r(3475).KernelAbstractService);t.IFileReaderKernelService=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IUploadKernelService=void 0;var a=r(3475),i=r(3472),u=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,i.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,i.wrapID)("IUploadKernelService")}),t}(a.KernelAbstractService);t.IUploadKernelService=u},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLHeadingTags=t.HTMLExcludeTags=t.HTMLInlineTags=t.HTMLBlockTags=void 0;var a=["h1","h2","h3","h4","h5","h6"],i=o(["html","body","address","article","aside","blockquote","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","hr","legend","menu","nav","ol","optgroup","option","p","pre","section","summary","ul","table","tbody","thead","tr","li"],n(a),!1);t.HTMLBlockTags={},t.HTMLInlineTags={},t.HTMLExcludeTags={},t.HTMLHeadingTags={},a.forEach((function(e){t.HTMLHeadingTags[e]=!0})),i.forEach((function(e){t.HTMLBlockTags[e]=!0})),["a","abbr","acronym","area","audio","b","base","basefont","bdi","bdo","big","body","br","button","canvas","caption","cite","code","col","colgroup","datalist","del","dfn","em","embed","font","frame","frameset","head","html","i","iframe","img","input","ins","kbd","keygen","label","link","map","mark","meta","meter","noframes","object","output","param","progress","q","rp","rt","ruby","s","samp","select","small","source","span","strike","strong","sub","sup","td","textarea","tfoot","th","time","title","track","tt","u","var","video","wbr","applet"].forEach((function(e){t.HTMLInlineTags[e]=!0})),["svg","script","noscript"].forEach((function(e){t.HTMLExcludeTags[e]=!0}))},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3472),i=r(3475),u=r(4199),l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)(u.pluginRegister.service.IMetaService)}),t}(i.KernelAbstractService);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o=function(){function e(e,t,r,n){void 0===n&&(n=!1),Object.defineProperty(this,"_editing",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_patternStr",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_handler",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_skipSpace",{enumerable:!0,configurable:!0,writable:!0,value:n})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._editing}}),Object.defineProperty(e.prototype,"match",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._doMatch(e);if(!t)return null;for(var r=t.start,n=t.end.node;n;){if(a(n))return null;if(n===r.node)break;var o=n.previousSibling;if(!(null==o?void 0:o.isTextNode()))return null;n=o}return t}}),Object.defineProperty(e.prototype,"_getLastIndexSkipSpace",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){for(;r>=0;){var n=e.lastIndexOf(t,r);if(n<0)return n;if(" "!==e[n+t.length])return n;r=n-1}return-1}}),Object.defineProperty(e.prototype,"_doMatch",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._patternStr,r=t.length,n=e[e.length-1];if(!n)return null;if(!n.text.endsWith(t))return null;if(this._skipSpace&&n.text.endsWith(" "+t))return null;var o=e.map((function(e){return e?e.text:" "})).join(""),a=this._skipSpace?this._getLastIndexSkipSpace(o,t,o.length-r-1):o.lastIndexOf(t,o.length-r-1);if(-1===a||a+r+r>=o.length)return null;for(var i=0,u=0;i<e.length;i++){var l=e[i],c=l?l.text:" ";if(l){if(u+c.length>a)return{start:{node:l.fragments[0].start.node,offset:l.fragments[0].start.offset+a-u},end:{node:n.fragments[0].end.node,offset:n.fragments[0].end.offset}};u+=c.length}else u+=c.length}return null}}),Object.defineProperty(e.prototype,"exec",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._editing.newJob(n.JobMode.User),r=e.start,o=e.end,a=this._patternStr.length;if(r.node===o.node){var i=r.node,u=i.data.substring(0,r.offset),l=i.data.substring(o.offset),c=i.data.substring(r.offset+a,o.offset-a);t.setTextNodeData(i,u+c+l),this._handler(t,t.newRange(t.newPosition(i,u.length),t.newPosition(i,u.length+c.length)))}else{var s=r.node.data.substring(0,r.offset)+r.node.data.substring(r.offset+a),f=o.node.data.substring(0,o.offset-a)+o.node.data.substring(o.offset);t.setTextNodeData(r.node,s),t.setTextNodeData(o.node,f),this._handler(t,t.newRange(t.newPosition(r.node,r.offset),t.newPosition(o.node,o.offset-a)))}this._editing.commitJob(t)}}),e}();function a(e){return!!n.NodeUtil.closest(e,n.Category.InlineBox)}t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LakeNodeName=t.HtmlNodeName=void 0,t.HtmlNodeName="code",t.LakeNodeName="code"},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ITypographyKernelService=void 0;var a=r(3472),i=r(3475),u=r(3918),l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)(u.pluginRegister.service.ITypographyKernelService)}),t}(i.KernelAbstractService);t.ITypographyKernelService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"needPersistent",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(e.prototype,"formatValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e}}),Object.defineProperty(e.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!0}}),Object.defineProperty(e.prototype,"isDefault",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return void 0===e}}),Object.defineProperty(e.prototype,"onPersistent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e}}),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypographyEnum=t.TYPOGRAPHY_CLASSIC=t.TYPOGRAPHY_TRADITIONAL=void 0,t.TYPOGRAPHY_TRADITIONAL="traditional",t.TYPOGRAPHY_CLASSIC="classic",function(e){e.TRADITIONAL="traditional",e.CLASSIC="classic"}(t.TypographyEnum||(t.TypographyEnum={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"subscript",command:{sup:"sup",sub:"sub"},attr:{sup:"sup",sub:"sub"}})},,,,,,function(e,t,r){"use strict";r(144);var n=r(60),o=(r(37),r(8)),a=r(0),i=r(357),u=r(1536),l="index-module_container_YifTz",c="index-module_titleContainer_E19Ts",s="index-module_content_u6ksX",f="index-module_close_xIF4s",d=function(e){var t=e.onReadGuide,r=e.sign,d=e.visible,p=e.arrowPointAtCenter,h=e.placement;return a.createElement(n.a,{overlayClassName:l,arrowPointAtCenter:p,destroyTooltipOnHide:!0,autoAdjustOverflow:!0,getPopupContainer:function(){return document.querySelector("#dragBarContainer")},title:a.createElement("div",{className:c},a.createElement("div",{className:s},a.createElement(i.a,{variant:"caption",mt:4,mb:4},__("知识库全新升级，来看看吧"))),a.createElement(o.a,{onClick:t,icon:a.createElement(u.default,{width:14,height:14}),type:"text",className:f})),placement:h,visible:d,align:{targetOffset:[0,4]}},r)},p={FEATURES:[{area:"GROUP_PAGE",enable:!0,type:"custom",tip_id:"feature_group_introduce",tip:__("功能说明"),createdAt:"2022-09-20"},{area:"WIKI_PAGE",enable:!0,type:"custom",tip_id:"feature_org_wiki_introduce",tip:__("功能说明"),createdAt:"2022-09-20"},{area:"GROUP_PAGE",enable:!0,type:"custom",tip_id:"feature_group_introduce",tip:__("功能说明"),createdAt:"2022-10-27"},{area:"GARDEN_PAGE",enable:!0,type:"custom",tip_id:"feature_garden_introduce",tip:__("功能说明"),createdAt:"2022-11-17"},{area:"DASHBOARD_BOOK_MENU",type:"custom",enable:!0,tip_id:"desktop_online_book_entry_tip",customRender:d,placement:"right",containerSelector:'[data-feature-guide-container="desktop_online_book_entry_tip"]',readTrigger:["click"],createdAt:"2023-06-26",styleFix:function(e){e.style.position="absolute",e.style.transform="translateY(-21px)",e.style.left="50px",e.style.zIndex=4},closeGuide:function(e){e.target.closest(".larkui-feature-guide")&&(e.preventDefault(),e.stopPropagation())}},{area:"DASHBOARD_BOOK_MENU_COLLAPSED",type:"custom",enable:!0,tip_id:"desktop_online_book_entry_tip_isCollapsed",customRender:d,placement:"right",containerSelector:'[data-feature-guide-container="desktop_online_book_entry_tip_isCollapsed"]',readTrigger:["click"],createdAt:"2023-06-26",styleFix:function(e){e.style.position="absolute",e.style.left="17px",e.style.top="-30px",e.style.zIndex=4},closeGuide:function(e){e.target.closest(".larkui-feature-guide")&&(e.preventDefault(),e.stopPropagation())}}]},h=r(52),y=r(194),b=p.FEATURES,m={readLiteFeatureGuide:function(e){if("function"==typeof navigator.sendBeacon){var t=new URLSearchParams;t.set("ctoken",Object(y.a)(window)),t.set("type",e.tip_id),navigator.sendBeacon("/api/mine/read_guide?".concat(t.toString()))}else h.a.mine.readGuide({type:e.tip_id});var r=e.containerSelector&&document.querySelector(e.containerSelector);if(r){var n=r.querySelector(".larkui-feature-guide");if(!n)return;n.style.display="none"}},readMiniFeatureGuide:function(e,t){var r=e.tip_id;h.a.mine.readGuide({type:r}),t({type:"guide/readFeatureGuide",payload:{tip_id:r}})},findFeatureGuide:function(e){var t=e.tip_id,r=e.type;return b.find((function(e){return e.tip_id===t&&e.type===r}))},needDisplayGuide:function(e){if("#guide"===window.location.hash)return!0;var t=window.appData.readTip;return!t||!t[e]}};m.FEATURES=b;t.a=m},,,,function(e,t,r){"use strict";r(3354);var n=r(2814);r(3340);t.a=n.a},,,function(e,t,r){"use strict";var n=r(52);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){a=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",s=u.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),u=new T(n||[]);return i(a,"_invoke",{value:S(e,r,u)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",y="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};f(O,l,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,l)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(a,i,u,l){var c=p(e[a],e,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==o(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,u,l)}),(function(e){r("throw",e,u,l)})):t.resolve(f).then((function(e){s.value=e,u(s)}),(function(e){return r("throw",e,u,l)}))}l(c.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=h;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=p(t,r,n);if("normal"===c.type){if(o=n.done?m:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(o(t)+" is not iterable")}return _.prototype=w,i(j,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:_,configurable:!0}),_.displayName=f(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,s,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),f(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),f(j,s,"Generator"),f(j,l,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function i(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,l,"next",e)}function l(e){i(a,n,o,u,l,"throw",e)}u(void 0)}))}}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s={removeItem:function(e,t){var r=l(t),n=r.findIndex((function(t){return t.id===e.id}));return n>=0&&r.splice(n,1),r},removeItemById:function(e,t){var r=arguments;return u(a().mark((function o(){var i;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r.length>2&&void 0!==r[2]?r[2]:{},o.next=3,n.a.quickLinks.destroy({id:e});case 3:return i=t.find((function(t){return t.id===e})),o.abrupt("return",s.removeItem(i,l(t)));case 5:case"end":return o.stop()}}),o)})))()},removeItemByTarget:function(e,t){var r=arguments;return u(a().mark((function o(){var i,u;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=r.length>2&&void 0!==r[2]?r[2]:{},o.next=3,n.a.quickLinks.destroyByTarget({target_id:e.id,target_type:i.targetType});case 3:return u=t.find((function(t){return t.target_id===e.id})),o.abrupt("return",s.removeItem(u,l(t)));case 5:case"end":return o.stop()}}),o)})))()},addItemByTarget:function(e,t){var r=arguments;return u(a().mark((function o(){var i,u,c,s,f,d,p;return a().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return u=(i=r.length>2&&void 0!==r[2]?r[2]:{}).type,c=i.targetType,s=void 0===c?"":c,f=i.refId,d="/go/".concat(s.toLowerCase(),"/").concat(e.id),o.next=5,n.a.quickLinks.create({title:e.name.substr(0,20),url:d,target_id:e.id,type:u,target_type:s,ref_id:f});case 5:return(p=o.sent).user=e.user,p.target=e,p.url=d,o.abrupt("return",[].concat(l(t),[p]));case 10:case"end":return o.stop()}}),o)})))()},sortItem:function(e,t,r){var n=l(e),o=n[t];return n.splice(t,1),n.splice(r,0,o),n}};t.a=s},,,,,,,,,,,function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(33),i=r(3744);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.a=function(e){var t,r=Object(a.useHistory)();return o.a.createElement("div",{className:i.a.actionsButtonWrapper},null==e||null===(t=e.actions)||void 0===t?void 0:t.map((function(t,n){return t.render?t.render(c(c({},e),{},{history:r})):o.a.createElement("div",{className:i.a.button,onClick:function(){return t.onClick(c(c({},e),{},{history:r}))},key:n},t.title)})))}},,function(e,t,r){"use strict";r(3353);var n=r(2815);r(3342);t.a=n.a},function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var i="x-yuque-pt-signature",u=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.query=new URLSearchParams(window.location.search),this.isServify=!!this.get(i),this.viewport=this.get("viewport"),this.sidebar="0"===this.get("toc_sidebar")?"none":"toc",this.cards=this.get("cards").split(",").map((function(e){return e.trim()})).filter((function(e){return!!e})),this.thirdpartyCards=this.get("thirdparty_cards")?this.get("thirdparty_cards").split(",").map((function(e){return e.trim()})).filter((function(e){return!!e})):[],this.showTitle="0"!==this.get("title"),this.showHeader="0"!==this.get("header"),this.isEmbedMode=this.get("mode").startsWith("embed"),this.autoHeight=this.getAutoHeight(),this.editorType=this.get("editor_type"),this.editorMode=this.get("editor_mode"),this.language=this.get("language")||"zh-cn",this.pageMinWidth=this.get("page_min_width"),this.onchange="1"===this.get("onchange"),this.allowMention="0"!==this.get("mention"),this.allowResource="1"===this.get("resource"),this.watermark=this.get("watermark"),this.backgroundColor=this.get("background_color"),this.bodyBackgroundColor=this.get("body_background_color"),this.toolbarBackgroundColor=this.get("toolbar_background_color"),this.autoSaveInterval=this.getAutoSaveInterval(),this.saveToServer="0"!==this.get("save_to_server"),this.customUploadUrl=this.get("upload_url"),this.customUploadTypes=this.get("upload_types"),this.customMentionUrl=this.getMentionUrl(),this.customMentionOrigin=this.get("search_user_origin"),this.imageUploadUrl=this.getImageUploadUrl(),this.fileUploadUrl=this.getFileUploadUrl(),this.videoUploadUrl=this.getVideoUploadUrl(),this.videoUploadStatusUrl=this.getVideoUploadStatusUrl(),this.fullHTML="1"===this.query.get("full_html"),this.allowResizeVideo=!0,this.extraConfig=JSON.parse(this.query.get("extra_config")||"{}")},(t=[{key:"get",value:function(e){return this.query.get(e)||""}},{key:"getAutoHeight",value:function(){return!window.h5&&"0"!==this.get("auto_height")}},{key:"getAutoSaveInterval",value:function(){var e=this.get("auto_save_interval");return e&&!Number.isNaN(Number(e))?((e=Number(e))<60&&(e=60),1e3*e):null}},{key:"getMentionUrl",value:function(){var e=this.get("search_user_url");return this._joinCsrf(e)}},{key:"getImageUploadUrl",value:function(){return this.customUploadTypes&&this.customUploadTypes.includes("image")?"".concat(this._joinCsrf(this.customUploadUrl),"&type=image"):null}},{key:"getFileUploadUrl",value:function(){return this.customUploadTypes&&this.customUploadTypes.includes("attachment")?"".concat(this._joinCsrf(this.customUploadUrl),"&type=attachment"):null}},{key:"getVideoUploadUrl",value:function(){var e=this.get("upload_video_url");return e?this._joinCsrf(e):null}},{key:"getVideoUploadStatusUrl",value:function(){var e=this.get("upload_video_status_url");return e?this._joinCsrf(e):null}},{key:"_joinCsrf",value:function(e){var t=e.includes("?")?"&":"?";return"".concat(e).concat(t).concat(this._getCustomCsrf())}},{key:"_getCustomCsrf",value:function(){var e=this.get("upload_csrf_token_field"),t=this.get("upload_csrf_token_value");return e?"".concat(e,"=").concat(encodeURIComponent(t)):""}},{key:"isExtremeMode",value:function(){return"extreme"===this.editorMode}}])&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();u.isServify=function(){var e=new URLSearchParams(window.location.search).get("from");if(!e)return!1;try{if(new URL(e).searchParams.get(i))return!0}catch(e){}return!1},u.SERVIFY_TAG_SRT=i,t.a=u},,function(e,t,r){"use strict";r(3351);var n=r(2811);r(3343);t.a=n.a},,function(e,t,r){"use strict";r(3076);var n=r(1337);r(3344);t.a=n.a},,,function(e,t,r){"use strict";r.r(t),r.d(t,"getAvailableGroups",(function(){return w}));r(59);var n=r(30),o=(r(44),r(10)),a=r(0),i=r.n(a),u=r(2),l=r.n(u),c=r(52),s=r(93),f=r(63),d=r(4039),p="index-module_newRepoModal_Z6mze",h="index-module_title_ECR9O";function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(){b=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==y(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(y(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){g(a,n,o,i,u,"next",e)}function u(e){g(a,n,o,i,u,"throw",e)}i(void 0)}))}}var w=function(){var e=_(b().mark((function e(){var t,r,n,o,a,i,u,l,d,p;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.appData,r=t.isYuque,n=t.organization,o=t.me,a=t.settings,i=f.a.isInOrg(),u=null==a?void 0:a.publication_enable_whitelist,l=!r&&((null==u?void 0:u.includes(null==o?void 0:o.id))||(null==u?void 0:u.includes("all"))),d={filterByAbility:"create_book",scene:"create_book"},i&&(d.organization_id=n.id),p=l?c.a.mine.publications:function(){return[]},e.next=9,Promise.all([c.a.mine.groups(d),p(d)]).then((function(e){var t=m(e,2),r=t[0],n=t[1],o=r.concat(n);return o=o.filter((function(e){var t;return e.group_user_role!==s.default.ROLE.readonly&&(null===(t=e.abilities)||void 0===t?void 0:t.createBook)}))}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e){var t=e.isModalVisible,r=e.handleCancel,u=e.stackId,l=e.onBookCreated,c=e.belongTo,s=e.bookNameDefault,y=e.group,v=m(Object(a.useState)(t),2),g=v[0],O=v[1],E=f.a.isInOrg(),P=m(Object(a.useState)([]),2),j=P[0],C=P[1];return Object(a.useEffect)((function(){var e=function(){var e=_(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:if(t=e.sent,!E||0!==(null==t?void 0:t.length)){e.next=7;break}return null==r||r(),o.a.warning(__("暂时无法操作，请先联系管理员，加入团队成员后才能进行知识协作")),e.abrupt("return");case 7:C(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(a.useEffect)((function(){O(t)}),[t]),E&&0===j.length?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(n.a,{className:p,title:i.a.createElement("div",{className:h},__("新建知识库")),width:424,visible:g,onCancel:function(){O(!1),null==r||r()},footer:null},i.a.createElement(d.a,{stackId:u,onBookCreated:l,onCancel:function(){O(!1),null==r||r()},belongTo:null!=y&&y.isWiki?[]:c,bookNameDefault:s,group:y,availableGroups:j})))};O.propTypes={isModalVisible:l.a.bool,handleCancel:l.a.func,stackId:l.a.string,onBookCreated:l.a.func,belongTo:l.a.array,bookNameDefault:l.a.string,group:l.a.object};t.default=O},function(e,t,r){"use strict";r(3350);var n=r(2812);r(3345);t.a=n.a},,,function(e,t,r){var n=new(r(4333));e.exports=n},function(e,t){function r(e,t){this.code=e,this.message=t||"",Error.captureStackTrace?Error.captureStackTrace(this,r):this.stack=(new Error).stack}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r.prototype.name="ShareDBError",r.CODES={ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT:"ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT",ERR_APPLY_SNAPSHOT_NOT_PROVIDED:"ERR_APPLY_SNAPSHOT_NOT_PROVIDED",ERR_CLIENT_ID_BADLY_FORMED:"ERR_CLIENT_ID_BADLY_FORMED",ERR_CONNECTION_SEQ_INTEGER_OVERFLOW:"ERR_CONNECTION_SEQ_INTEGER_OVERFLOW",ERR_CONNECTION_STATE_TRANSITION_INVALID:"ERR_CONNECTION_STATE_TRANSITION_INVALID",ERR_DATABASE_ADAPTER_NOT_FOUND:"ERR_DATABASE_ADAPTER_NOT_FOUND",ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE:"ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE",ERR_DATABASE_METHOD_NOT_IMPLEMENTED:"ERR_DATABASE_METHOD_NOT_IMPLEMENTED",ERR_DEFAULT_TYPE_MISMATCH:"ERR_DEFAULT_TYPE_MISMATCH",ERR_DOC_MISSING_VERSION:"ERR_DOC_MISSING_VERSION",ERR_DOC_ALREADY_CREATED:"ERR_DOC_ALREADY_CREATED",ERR_DOC_DOES_NOT_EXIST:"ERR_DOC_DOES_NOT_EXIST",ERR_DOC_TYPE_NOT_RECOGNIZED:"ERR_DOC_TYPE_NOT_RECOGNIZED",ERR_DOC_WAS_DELETED:"ERR_DOC_WAS_DELETED",ERR_INFLIGHT_OP_MISSING:"ERR_INFLIGHT_OP_MISSING",ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION:"ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION",ERR_MAX_SUBMIT_RETRIES_EXCEEDED:"ERR_MAX_SUBMIT_RETRIES_EXCEEDED",ERR_MESSAGE_BADLY_FORMED:"ERR_MESSAGE_BADLY_FORMED",ERR_MILESTONE_ARGUMENT_INVALID:"ERR_MILESTONE_ARGUMENT_INVALID",ERR_OP_ALREADY_SUBMITTED:"ERR_OP_ALREADY_SUBMITTED",ERR_OP_NOT_ALLOWED_IN_PROJECTION:"ERR_OP_NOT_ALLOWED_IN_PROJECTION",ERR_OP_SUBMIT_REJECTED:"ERR_OP_SUBMIT_REJECTED",ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM:"ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM",ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM:"ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM",ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT:"ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT",ERR_OT_OP_BADLY_FORMED:"ERR_OT_OP_BADLY_FORMED",ERR_OT_OP_NOT_PROVIDED:"ERR_OT_OP_NOT_PROVIDED",ERR_PROTOCOL_VERSION_NOT_SUPPORTED:"ERR_PROTOCOL_VERSION_NOT_SUPPORTED",ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED:"ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED",ERR_SNAPSHOT_READ_SILENT_REJECTION:"ERR_SNAPSHOT_READ_SILENT_REJECTION",ERR_SNAPSHOT_READS_REJECTED:"ERR_SNAPSHOT_READS_REJECTED",ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND:"ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND",ERR_TYPE_CANNOT_BE_PROJECTED:"ERR_TYPE_CANNOT_BE_PROJECTED",ERR_UNKNOWN_ERROR:"ERR_UNKNOWN_ERROR"},e.exports=r},function(e,t,r){t.defaultType=r(3941).type,t.map={},t.register=function(e){e.name&&(t.map[e.name]=e),e.uri&&(t.map[e.uri]=e)},t.register(t.defaultType)},,,,,function(e,t,r){"use strict";r.d(t,"h",(function(){return l})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return d})),r.d(t,"e",(function(){return h})),r.d(t,"j",(function(){return b})),r.d(t,"d",(function(){return v})),r.d(t,"f",(function(){return _})),r.d(t,"a",(function(){return O})),r.d(t,"i",(function(){return P})),r.d(t,"l",(function(){return C})),r.d(t,"m",(function(){return S})),r.d(t,"g",(function(){return x})),r.d(t,"k",(function(){return T}));var n=r(1);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){a=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",s=u.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),u=new T(n||[]);return i(a,"_invoke",{value:S(e,r,u)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",y="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};f(O,l,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,l)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(a,i,u,l){var c=p(e[a],e,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==o(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,u,l)}),(function(e){r("throw",e,u,l)})):t.resolve(f).then((function(e){s.value=e,u(s)}),(function(e){return r("throw",e,u,l)}))}l(c.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=h;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=p(t,r,n);if("normal"===c.type){if(o=n.done?m:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(o(t)+" is not iterable")}return _.prototype=w,i(j,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:_,configurable:!0}),_.displayName=f(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,s,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),f(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),f(j,s,"Generator"),f(j,l,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function i(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,l,"next",e)}function l(e){i(a,n,o,u,l,"throw",e)}u(void 0)}))}}function l(e){return c.apply(this,arguments)}function c(){return c=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/OpsgptController/queryMsg",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/OpsgptController/queryMsg",t,r));case 3:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function s(e){return f.apply(this,arguments)}function f(){return f=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/OpsgptController/emcEventPull",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/OpsgptController/emcEventPull",t,r));case 3:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return p=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/OpsgptController/emcEventMonitor",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/OpsgptController/emcEventMonitor",t,r));case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function h(e){return y.apply(this,arguments)}function y(){return y=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/OpsgptController/eventsSummary",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/OpsgptController/eventsSummary",t,r));case 3:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function b(e){return m.apply(this,arguments)}function m(){return m=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/OpsgptController/stepSummary",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/OpsgptController/stepSummary",t,r));case 3:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return g=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/OpsgptController/emergencyOutline",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/OpsgptController/emergencyOutline",t,r));case 3:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function _(e){return w.apply(this,arguments)}function w(){return w=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/OpsgptController/experience",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/OpsgptController/experience",t,r));case 3:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function O(e){return E.apply(this,arguments)}function E(){return E=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/OpsgptController/emcDiagnoseFlowChart",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/OpsgptController/emcDiagnoseFlowChart",t,r));case 3:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function P(e){return j.apply(this,arguments)}function j(){return j=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/OpsgptController/relatedEventPull",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/OpsgptController/relatedEventPull",t,r));case 3:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function C(e){return k.apply(this,arguments)}function k(){return k=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/OpsgptController/validateAlarmContent",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/OpsgptController/validateAlarmContent",t,r));case 3:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function S(e){return A.apply(this,arguments)}function A(){return A=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/OpsgptController/validateSummarySolution",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/OpsgptController/validateSummarySolution",t,r));case 3:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function x(e){return N.apply(this,arguments)}function N(){return N=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/OpsgptController/overviewValidateSummarySolution",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/OpsgptController/overviewValidateSummarySolution",t,r));case 3:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function T(e){return D.apply(this,arguments)}function D(){return D=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/OpsgptController/submitToAlgorithm",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/OpsgptController/submitToAlgorithm",t,r));case 3:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3511),a=r(3591),i=r(3598),u=r(3454),l=r(3459);function c(e,t,r,n){var o,i=e.schema.getNodeSchema(t);n?(o=n,null==r||delete r.id):(null==r?void 0:r.id)?(o=r.id+"",delete r.id):o=(null==i?void 0:i.id)?i.id():(0,a.generateNodeId)();var u=e.getNodeById(o);return u?e.disableSameIdentifier?c(e,t):!u.isConnected&&u.hasCategory(l.Category.Heading)&&(null==i?void 0:i.category.includes(l.Category.Heading))?o:c(e,t):o}var s=function(){function e(e,t,r,n){Object.defineProperty(this,"_document",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_nodeName",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_category",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_docVersion",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_attrs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_offset",{enumerable:!0,configurable:!0,writable:!0,value:-1}),r=(0,o.cloneObject)(r),this._id=c(e,t,r,n),this._docVersion=e.version,this._category=e.schema.getCategoryByNodeName(t),this._attrs=r||{},this._document.indexNode(this)}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._document.unIndexNode(this)}}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"document",{get:function(){return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rootNode",{get:function(){return this._document.rootNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attrs",{get:function(){return n({},this._attrs)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConnected",{get:function(){for(var e=this;e;){if(e.isRootNode())return!0;e=e.parent}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nodeName",{get:function(){return this._nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this._parent?this._parent.getChildByOffset(this._offset-1):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this._parent?this._parent.getChildByOffset(this._offset+1):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this._category},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childCount",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compare",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={equal:!1,contains:!1,containedBy:!1,preceding:!1,following:!1};if(this===e)return t.equal=!0,t;if(this.isRootNode())return t.contains=!0,t;if(e.isRootNode())return t.containedBy=!0,t;for(var r=this.getPath(),n=e.getPath(),o=r.length,a=n.length,i=0,l=Math.min(o,a);i<l;i++){var c=r[i],s=n[i];if(c<s)return t.preceding=!0,t;if(c>s)return t.following=!0,t}return(0,u.assert)(o!==a,"invalid compare node","framework/kernel/src/model/node/node.ts:241"),r.length<n.length?t.contains=!0:t.containedBy=!0,t}}),Object.defineProperty(e.prototype,"getChildByOffset",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return null}}),Object.defineProperty(e.prototype,"getPath",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.isRootNode())return[];for(var e=[this.offset],t=this;(t=null==t?void 0:t.parent)&&!t.isRootNode();)e.push(t.offset);return e.reverse()}}),Object.defineProperty(e.prototype,"getSchema",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._document.schema.getNodeSchema(this._nodeName)}}),Object.defineProperty(e.prototype,"hasAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,i.hasOwnProperty)(this._attrs,e)}}),Object.defineProperty(e.prototype,"getAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._attrs[e];return void 0===t?null:t}}),Object.defineProperty(e.prototype,"hasCategory",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!1);for(var r,n=this._category,o=0,a=(r="string"==typeof e?[e]:e).length;o<a;o++)if(n[r[o]]){if(!t)return!0}else if(t)return!1;return t}}),Object.defineProperty(e.prototype,"closest",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!1);for(var r=this;r;){if(r.hasCategory(e,t))return r;r=r.parentNode}return null}}),Object.defineProperty(e.prototype,"toJSON",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return void 0===e&&(e=!1),this.toData(e)}}),Object.defineProperty(e.prototype,"toData",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={type:this.nodeType,id:this._id,name:this._nodeName,attrs:{}};return Object.keys(this._attrs).length&&(t.attrs=(0,o.cloneObject)(this._attrs)),t}}),e}();t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3511),u=a(r(3902)),l=r(3517),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:l.NodeType.Element}),Object.defineProperty(t,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),t}return o(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this._children.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childCount",{get:function(){return this._children.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._children[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this._children[this._children.length-1]||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 0===this._children.length}}),Object.defineProperty(t.prototype,"getChildByOffset",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._children[e]||null}}),Object.defineProperty(t.prototype,"toData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){void 0===t&&(t=!1);var r=e.prototype.toData.call(this,t);return t&&this._children.length?r.children=this._children.map((function(e){return e.toJSON(t)})):r.children=[],r}}),Object.defineProperty(t.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=!1);var t=this.nodeName,r=this.attrs,n=[];Object.keys(r).forEach((function(e){var t=r[e];"object"==typeof t?t=JSON.stringify(t):t+="",n.push("".concat(e,'="').concat(t,'"'))}));var o="";return e&&(o=this._children.map((function(t){return t.toString(e)})).join("")),"<".concat(t).concat(n.length?" "+n.join(" "):"",">").concat(o,"</").concat(t,">")}}),Object.defineProperty(t.prototype,"cloneNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=this;void 0===e&&(e=!1);var n=(0,i.cloneObject)(this._attrs);Object.keys(n).forEach((function(e){r._document.schema.allowCloneAttr(e)||delete n[e]}));var o=new t(this._document,this._nodeName,n);return e&&(o._children=this._children.map((function(e){return e.cloneNode(!0)}))),o}}),Object.defineProperty(t.prototype,"isHole",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"isElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(t.prototype,"isTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"isCardNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"isRootNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AnchorType=void 0;var i,u=r(3454),l=r(3490),c=a(r(3516)),s=a(r(3526)),f=r(4416),d=r(4417),p=r(4418),h=r(3459);!function(e){e.start="start",e.end="end",e.topRight="topRight",e.bottomLeft="bottomLeft"}(i=t.AnchorType||(t.AnchorType={}));var y=function(){function e(e,t,r,a){Object.defineProperty(this,"_document",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_anchor",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_focus",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"_ranges",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),u.assert.fatal(t.length,"framework/kernel/src/model/selection/selection.ts:184"),r!==i.topRight&&r!==i.bottomLeft&&a!==i.topRight&&a!==i.bottomLeft||u.assert.fatal(t.length>1,"framework/kernel/src/model/selection/selection.ts:192"),this._ranges=function(e){if(1===e.length)return o([],n(e),!1);return e.map((function(e,t){var r=e.start;return{start:o(o([],n(r.node.getPath()),!1),[r.offset],!1),index:t}})).sort((function(e,t){var r=(0,d.compareNodePath)(e.start,t.start);return r===d.PATH_BEFORE?-1:r===d.PATH_AFTER?1:0})).map((function(t){var r=t.index;return e[r]}))}(t.slice())}return Object.defineProperty(e,"createBy",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,n,o){return void 0===n&&(n=i.start),void 0===o&&(o=i.end),new e(t,Array.isArray(r)?r:[r],n,o)}}),Object.defineProperty(e,"fromJson",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var n=r.ranges,o=r.anchor,a=r.focus;u.assert.fatal(n.length,"framework/kernel/src/model/selection/selection.ts:95");var l=n.map((function(e){var r,n,o=e.start,a=e.end,i=0,l=0;return r=o.nodePath?(0,f.getExistNodeByPath)(t,o.nodePath):o.node,n=a.nodePath?(0,f.getExistNodeByPath)(t,a.nodePath):a.node,u.assert.fatal(r&&n,"framework/kernel/src/model/selection/selection.ts:117"),r.isTextNode()?i=Math.min(r.dataLength,o.offset):r.isCardNode()?i=0:(u.assert.fatal(r.isElement(),"framework/kernel/src/model/selection/selection.ts:124"),i=Math.min(r.childCount||0,o.offset)),n.isTextNode()?l=Math.min(n.dataLength,a.offset):n.isCardNode()?l=0:(u.assert.fatal(n.isElement(),"framework/kernel/src/model/selection/selection.ts:137"),l=Math.min(n.childCount||0,a.offset)),s.default.createAt(new c.default(r,i),new c.default(n,l))})),d=o,p=a;return 1===l.length&&l[0].collapsed&&(d=i.start,p=i.start),new e(t,l,d,p)}}),Object.defineProperty(e,"equal",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!(!e||!t)&&(e.rangeCount===t.rangeCount&&e._ranges.every((function(e,r){return s.default.equal(e,t._ranges[r])})))}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._document,delete this._ranges,delete this._anchor,delete this._focus}}),Object.defineProperty(e.prototype,"document",{get:function(){return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rangeCount",{get:function(){return this._ranges.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstRange",{get:function(){return this._ranges[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastRange",{get:function(){return this._ranges[this._ranges.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTableSelection",{get:function(){return this.rangeCount>1&&this._ranges[0].start.node.hasCategory(h.Category.TableCell)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isColumnsSelection",{get:function(){return this.rangeCount>1&&this._ranges[0].start.node.hasCategory(l.COLUMN)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTextSelection",{get:function(){return 1===this.rangeCount&&this.firstRange.start.node.isTextNode()&&this.firstRange.end.node.isTextNode()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCardSelection",{get:function(){var e=this._ranges[0];return 1===this.rangeCount&&e.collapsed&&e.start.node.isCardNode()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ranges",{get:function(){return this._ranges.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"collapsed",{get:function(){return 1===this._ranges.length&&this._ranges[0].collapsed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this.collapsed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"focus",{get:function(){return this._focus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cloneSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new e(this._document,(0,p.copyRanges)(this._ranges),this._anchor,this._focus)}}),Object.defineProperty(e.prototype,"cloneByRange",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r;return r=Array.isArray(t)?t:[t],e.createBy(this._document,(0,p.copyRanges)(r),this._anchor,this._focus)}}),Object.defineProperty(e.prototype,"toJSON",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=e.ranges,r=e.anchor,n=e.focus;return t?{ranges:t.map((function(e){var t=e.start,r=e.end,n=e.collapsed;return{start:{nodePath:t.node.getPath(),offset:t.offset,isText:t.node.isTextNode()},end:{nodePath:r.node.getPath(),offset:r.offset,isText:r.node.isTextNode()},collapsed:n}})),anchor:r,focus:n}:null}}),e}();t.default=y},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.splitTextContent=void 0;var a=r(3454),i=o(r(3498)),u=r(3560),l=r(3477);function c(e,t,r){var o=t.node,a=t.offset;if(!o.isTextNode())return{position:t,childrenChanged:!1};if(0===a)return r&&(0,u.isLikeEmptyElement)(o)?{position:e.newPosition(o.parentNode,o.offset+1),childrenChanged:!1}:{position:e.newPosition(o.parentNode,o.offset),childrenChanged:!1};if(a===o.dataLength)return{position:e.newPosition(o.parentNode,o.offset+1),childrenChanged:!1};var l=n(i.default.splitString(o.data,a),2),c=l[0],s=l[1],f=o.cloneNode(!1);return e.setTextNodeData(f,s),e.setTextNodeData(o,c),e.insertAfter(o.parentNode,f,o),{position:e.newPosition(o.parentNode,o.offset+1),childrenChanged:!0}}t.splitTextContent=function(e,t){(0,l.verifyRange)(t);var r=t.start,n=t.end;if(t.collapsed)return r.node.isTextNode()?(r=c(e,r,!1).position,e.newRange(r)):t.cloneRange();if(n.node.isTextNode()&&(n=c(e,n,!0).position),r.node.isTextNode()){var o=c(e,r,!1);r=o.position,o.childrenChanged&&r.node===n.node&&(n=e.newPosition(n.node,n.offset+1))}var i=e.newRange(r,n);return a.assert.fatal(!i.collapsed,"framework/kernel/src/model/utils/range/split-text-content.ts:39"),(0,l.verifyRange)(i),i}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.walkRange=void 0;var a=r(3454),i=o(r(3497));function u(){var e={stopped:!1,skipped:!1};return[e,{stop:function(){e.stopped=!0},skip:function(){e.skipped=!0}}]}function l(e){for(;e&&!e.isRootNode();){if(e.nextSibling)return e.nextSibling;e=e.parent}return null}function c(e){var t;if(!e)return null;if(e.isTextNode()){for(t=e;t&&!t.isRootNode();){if(t.nextSibling)return t.nextSibling;t=t.parent}return null}if(e.childCount)return e.firstChild;for(t=e;t&&!t.isRootNode();){if(t.nextSibling)return t.nextSibling;t=t.parent}return null}t.walkRange=function(e,t){a.assert.fatal(!e.collapsed,"walkRange error","framework/kernel/src/model/utils/range/walk-range.ts:20");var r,o=e.start,s=o.node,f=o.offset,d=function(e){var t=e.node,r=e.offset;if(t.isElement()){if(r<t.childCount)return t.getChildByOffset(r)}else a.assert.fatal(t.isTextNode(),"invalid node type","framework/kernel/src/model/utils/range/walk-range.ts:186");var n=t;for(;n&&!n.isRootNode();){if(n.nextSibling)return n.nextSibling;n=n.parent}return null}(e.end);r=s.isTextNode()?s:s.getChildByOffset(f)||l(s),a.assert.fatal(r,"framework/kernel/src/model/utils/range/walk-range.ts:32");var p=n(u(),2),h=p[0];if(t(r,p[1]),!h.stopped){if(h.skipped){if(!(r=l(r)))return;if(d){var y=i.default.compare(r,d);if(a.assert.fatal(!y.containedBy,"invalid stopNode","framework/kernel/src/model/utils/range/walk-range.ts:54"),y.equal||y.following)return}}else r=c(r);for(var b=new Map;r&&r!==d;){var m=n(u(),2),v=m[0],g=m[1];if(a.assert.fatal(!b.has(r),"framework/kernel/src/model/utils/range/walk-range.ts:70"),b.set(r,1),t(r,g),v.stopped)return;if(v.skipped){if(!(r=l(r)))return;if(d){y=i.default.compare(r,d);if(a.assert.fatal(!y.containedBy,"invalid stopNode","framework/kernel/src/model/utils/range/walk-range.ts:90"),y.equal||y.following)return}}else r=c(r)}}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.optimizeRange=void 0;var o=r(3454),a=n(r(3498)),i=n(r(3497)),u=r(3993),l=r(3546),c=r(3477),s=r(3459);function f(e,t,r){if(!t.isElement())return r;for(var n=t.firstChild;n&&n.nextSibling;){var a=n.nextSibling;d(n,a)?a.isTextNode()?(r=p(e,n,a,r),o.assert.fatal(!a.isConnected,"framework/kernel/src/model/utils/range/optimize-range.ts:138"),o.assert.fatal(n.isConnected,"framework/kernel/src/model/utils/range/optimize-range.ts:139")):n=a:n=a}return t.children.forEach((function(t){r=f(e,t,r)})),r}function d(e,t){return!(!e.isTextNode()||!t.isTextNode())&&y(e.attrs,t.attrs)}function p(e,t,r,n){return t.isTextNode()?r.isTextNode()?function(e,t,r,n){o.assert.fatal(t.parentNode===r.parentNode,"framework/kernel/src/model/utils/range/optimize-range.ts:185");var i=t.data,u=r.data;return e.setTextNodeData(t,i+u),n=n.map((function(n){var l=n.node,c=n.offset;if(l===r)return e.newPosition(t,a.default.size(i)+c);if(r.parentNode===l){if(r.offset<c)return o.assert.fatal(c-1>=0,"framework/kernel/src/model/utils/range/optimize-range.ts:201"),e.newPosition(l,c-1);if((t.offset+1===c||r.offset===c)&&u)return e.newPosition(t,a.default.size(i))}return n})),e.removeChild(r.parentNode,r),n.forEach((function(e){return(0,l.verifyPosition)(e)})),n}(e,t,r,n):n:t.isElement()&&r.isElement()?function(e,t,r,n){o.assert.fatal(t.nextSibling===r,"framework/kernel/src/model/utils/range/optimize-range.ts:228");var a=t.childCount,i=r.childCount;return r.children.forEach((function(r){e.appendChild(t,r)})),n=n.map((function(n){var u=n.node,l=n.offset;if(u===r)return e.newPosition(t,a+l);if(r.parent===u){if(o.assert.fatal(t.parent===u,"framework/kernel/src/model/utils/range/optimize-range.ts:245"),r.offset<l)return o.assert.fatal(l-1>=0,"framework/kernel/src/model/utils/range/optimize-range.ts:248"),e.newPosition(u,l-1);if((t.offset+1===l||r.offset===l)&&i>0)return e.newPosition(t,a)}return n})),e.removeChild(r.parentNode,r),n.forEach((function(e){return(0,l.verifyPosition)(e)})),n}(e,t,r,n):n}function h(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((function(e,r){return y(e,t[r])}));if("object"!=typeof e&&"object"!=typeof t)return!1;if(e&&t){o.assert.fatal(h(e)&&h(t),"framework/kernel/src/model/utils/range/optimize-range.ts:357");var r=Object.keys(e),n=Object.keys(t);return r.length===n.length&&r.every((function(r){return y(e[r],t[r])}))}return!1}t.optimizeRange=function(e,t){var r=[t.start];t.collapsed||r.push(t.end);var n=function(e,t){var r=[];return t.forEach((function(e){var t=e.node,n=e.offset,a=t;if(!t.hasCategory([s.Category.Root,s.Category.LikeRoot,s.Category.TableHole,s.Category.Hole])){t.isElement()&&(a=t.getChildByOffset(n)||t);var u=i.default.getAncestors(a,s.Category.Block)[0];o.assert.fatal(u,"framework/kernel/src/model/utils/range/optimize-range.ts:295"),-1===r.indexOf(u)&&r.push(u)}})),r}(0,r);return n.forEach((function(t){r=function(e,t,r){return(0,u.walkNode)(t,{leave:function(n){if(n!==t&&"*"!==n.nodeName){if(n.isTextNode()){if(""!==n.data||function(e,t){return e.some((function(e){return e.node===t}))}(r,n))return}else{if(!n.isElement())return;if(n.childCount>0)return}(function(e,t){var r=t.parentNode;for(;r;){if(r.childCount>1)return!1;if(r===e)return!0;r=r.parentNode}return!0})(t,n)||n.hasCategory(s.Category.InlineBox)||(r=r.map((function(t){var r=t.node,a=t.offset;return n===r?e.newPosition(r.parentNode,r.offset):n.parentNode!==r?t:a>n.offset?(o.assert.fatal(a-1>=0,"framework/kernel/src/model/utils/range/optimize-range.ts:95"),e.newPosition(r,a-1)):t})),e.removeChild(n.parentNode,n))}}}),r}(e,t,r)})),n.forEach((function(t){r=f(e,t,r)})),t=e.newRange(r[0],r[1]),(0,c.verifyRange)(t),t}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.insertINodeByPosition=void 0;var u=r(3454),l=r(3511),c=r(4004),s=r(3630),f=i(r(3497)),d=i(r(4e3)),p=r(3459),h=r(3517),y=i(r(3458));function b(e,t){var r=[];return t.forEach((function(t){var i;if(null===(i=t.children)||void 0===i?void 0:i.length){var u=b(e,t.children);if(e.hasCategory(t.name,[p.Category.VirtualLikeRoot,p.Category.LikeRoot,p.Category.Root],!1))return y.default.setChildren(t,u),void r.push(t);if(y.default.setChildren(t,[]),u.length>0&&u[0].name===e.defaultElementName&&(u[0].children||[]).every((function(r){return e.acceptNode(t.name,r.name)}))&&u.every((function(t){return e.hasCategory(t.name,[p.Category.Block,p.Category.BlockCard,p.Category.Hole,p.Category.AlertHole,p.Category.Table,p.Category.TableHole])}))){var l=u[0],c=l.children||[];u=a(a([],o(c),!1),o(u.slice(1)),!1),y.default.setAttribute(t,n(n({},t.attrs),_(e,t.name,l.attrs)))}var s=null,f=!1;u.forEach((function(n){e.acceptNode(t.name,n.name)?(s?f&&(s=y.default.cloneNode(t),r.push(s)):(s=t,r.push(s)),f=!1,y.default.appendChild(s,n)):(f=!0,r.push(n))}))}else r.push(t)})),r}function m(e,t,r){return r.forEach((function(r){if(f.default.isLikeEmptyElement(r))if(r.parentNode){var n=[r.parentNode];e.removeChild(r.parentNode,r),m(e,t,n)}else{var o=t.indexOf(r);-1!==o&&t.splice(o,1)}})),t}function v(e,t,r,n){var o=[];return n?(n&&n.forEach((function(n){var a=function(e,t,r,n){var o,a,i=t.getNodeSchema(n.name);if(!i)return n.children?v(e,t,r,n.children):[];if(i.category.includes(p.Category.Table))return function(e,t,r,n){if(!(null==r?void 0:r.hasCategory(p.Category.TableHole))){var o=t.createHole("tableHole");return g(e,t,o,n),u.assert.fatal(o.firstChild.hasCategory(p.Category.Table),"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:447"),j(t,n,o),r?w(e,t,r,o,n):[o]}return j(t,n,r),g(e,t,r,n)}(e,t,r,n);if(null===(o=i.parents)||void 0===o?void 0:o.includes(p.Category.ContainerHole))return function(e,t,r,n){if(!(null==r?void 0:r.hasCategory(p.Category.ContainerHole))){var o=t.createHole("containerHole");return g(e,t,o,n),j(t,n,o),r?w(e,t,r,o,n):[o]}return j(t,n,r),g(e,t,r,n)}(e,t,r,n);if(null===(a=i.parents)||void 0===a?void 0:a.includes(p.Category.AlertHole))return function(e,t,r,n){if(!(null==r?void 0:r.hasCategory(p.Category.AlertHole))){var o=t.createHole("alertHole");return g(e,t,o,n),u.assert.fatal(o.firstChild.hasCategory("alert"),"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:417"),j(t,n,o),r?w(e,t,r,o,n):[o]}return j(t,n,r),g(e,t,r,n)}(e,t,r,n);if(i.type===h.NodeType.Element)return g(e,t,r,n);if(i.type===h.NodeType.Text)return function(e,t,r,n){var o=_(t,n.name,n.attrs),a=t.editing.kernel.getExtend("text_helper");if(a){var i=a.createTextNode(t,n,o);if(!r)return i;var u=[];return i.forEach((function(o){u=u.concat(w(e,t,r,o,n))})),u}var l=t.createTextNode(n.data,o,n.id);if(!r)return[l];return w(e,t,r,l,n)}(e,t,r,n);return u.assert.fatal(i.type===h.NodeType.Card,"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:245"),function(e,t,r,n){var o=d.default.createCardNode(t,n.name,_(t,n.name,n.attrs),n.id);if(null==r?void 0:r.hasCategory(p.Category.Hole))return j(t,n,r),w(e,t,r,o.firstChild,n);return j(t,n,o),w(e,t,r,o,n)}(e,t,r,n)}(e,t,r,n);a.forEach((function(e){o.push(e)}))})),o):o}function g(e,t,r,n){var o,a;a=(null===(o=t.getNodeSchema(n.name))||void 0===o?void 0:o.category.includes(p.Category.Hole))?t.createHole(n.name,_(t,n.name,n.attrs),n.id):t.createElement(n.name,_(t,n.name,n.attrs),n.id);var i=w(e,t,r,a,n),u=[];return a.parentNode||i.includes(a)?u=v(e,t,a,n.children):r?u=v(e,t,r,n.children):(i.push(a),u=v(e,t,a,n.children)),u.forEach((function(e){i.push(e)})),i}function _(e,t,r){var n={};return r?(Object.keys(r).forEach((function(o){var a=r[o];e.acceptAttr(t,o,a)&&(n[o]=a)})),n):n}function w(e,t,r,n,o){var a;if(void 0===o&&(o=null),r&&t.acceptNode(r.nodeName,n.nodeName))return e.wrapNode=null,t.appendChild(r,n),[];if(e.wrapNode){if(t.acceptNode(e.wrapNode.nodeName,n.nodeName))return t.appendChild(e.wrapNode,n),[];e.wrapNode=null}if(!r)return[n];var i=t.defaultElementName;if(t.acceptNode(i,n.nodeName)&&t.acceptNode(r.nodeName,i)){var u=o?_(t,i,o.attrs):{},l=t.createElement(i,u);return e.wrapNode=l,t.appendChild(l,n),t.appendChild(r,l),[]}if(n.nodeName===t.defaultElementName&&r.nodeName!==n.nodeName&&r.hasCategory(p.Category.Block)){var c=[];return null===(a=n.children)||void 0===a||a.forEach((function(n){w(e,t,r,n,null).forEach((function(e){c.push(e)}))})),c}return e.recordCheckNode(r),r.parentNode?w(e,t,r.parentNode,n,o):[n]}function O(e,t,r,n){var o=e.isTopProcessContext&&function(e){var t=e.node,r=e.offset;if(t.isTextNode()&&r!==t.dataLength)return!0;var n=f.default.closest(t,p.Category.Block);if(!n)return!1;for(;t!==n;){if(r!==t.childCount)return!0;r=(t=t.parentNode).offset+1}return u.assert.fatal(t===n,"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:888"),r<n.childCount}(r);return e.isTopProcessContext=!1,n.forEach((function(n){e.needBreak&&(u.assert.fatal(r.node.isElement(),"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:629"),r=function(e,t){u.assert.fatal(!t.node.isRootNode(),"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:807"),t.node.isTextNode()&&(t=(0,c.breakBlockContent)(e,t,c.FOCUS_BLOCK));var r=t.node,n=t.offset;if(f.default.isLikeEmptyElement(r))return r.parentNode.hasCategory(p.Category.Hole)?(t=e.newPosition(r.parentNode.parentNode,r.parentNode.offset),e.removeChild(r.parentNode.parentNode,r.parentNode)):(t=e.newPosition(r.parentNode,r.offset),e.removeChild(r.parentNode,r)),t;if(0===n)return e.newPosition(r.parentNode,r.offset);if(n===r.childCount)return e.newPosition(r.parentNode,r.offset+1);var o=r.cloneNode(!1);if(r.children.slice(n).forEach((function(t){e.appendChild(o,t)})),u.assert.fatal(r.childCount>0,"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:844"),u.assert.fatal(o.childCount>0,"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:845"),r.parentNode.hasCategory([p.Category.AlertHole,p.Category.ContainerHole])){var a=r.parentNode,i=e.createElement(a.nodeName);return e.appendChild(i,o),e.insertAfter(a.parentNode,i,a),e.newPosition(i.parentNode,i.offset)}return e.insertAfter(r.parentNode,o,r),e.newPosition(o.parentNode,o.offset)}(t,r),e.needBreak=!1),u.assert.fatal(r.node.isElement(),"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:636"),r=E(e,t,r,n),e.allowMergeFirstLine=!1})),o?P(t,r):r}function E(e,t,r,n){var o,a=r.node;if(u.assert.fatal(a.isElement(),"framework/kernel/src/model/utils/position/helpers/insert-inode-by-position.ts:659"),a.hasCategory([p.Category.Hole,p.Category.TableHole])&&(n.hasCategory([p.Category.Hole,p.Category.TableHole])||a.childCount>0)){var i=t.newPosition(a.parentNode,0===r.offset?a.offset:a.offset+1);return E(e,t,i,n)}if(t.acceptNode(a.nodeName,n.nodeName))return C(n,(function(r){!function(e,t,r){var n;if(!r.isTextNode())return r;if(r.isTextNode()&&(!r.attrs||0===Object.keys(r.attrs).length)){try{var o=e.editing.kernel;o.hasExtendMethod("beforeInsertTextInheritAttrs")&&(t=null===(n=o.getExtendMethod("beforeInsertTextInheritAttrs"))||void 0===n?void 0:n(e,r,t))}catch(e){}Object.keys(t).forEach((function(n){e.document.schema.allowCloneAttr(n)&&e.setAttribute(r,n,t[n])}))}}(t,e.textAttrs,r)})),t.insertNodeByPosition(r,n);if(a.hasCategory([p.Category.Root,p.Category.LikeRoot])){var l=function(e,t,r){var n=e.defaultElementName;if(e.acceptNode(n,r.nodeName))return e.createElement(n);return null}(t,0,n);if(l)return t.insertNodeByPosition(r,l),E(e,t,t.newPosition(l,0),n);if(!a.hasCategory(p.Category.VirtualLikeRoot))return n.isElement()&&!n.isEmpty()?O(e,t,r,n.children):r}if(e.allowMergeFirstLine&&(a.nodeName===n.nodeName||n.hasCategory([p.Category.ContainerHole,p.Category.AlertHole])&&(null===(o=n.firstChild)||void 0===o?void 0:o.nodeName)===a.nodeName||n.nodeName===t.defaultElementName&&a.hasCategory(p.Category.TextContainer))){var c=n.hasCategory([p.Category.ContainerHole,p.Category.AlertHole])?n.firstChild:n;return c.children.forEach((function(e){r=t.insertNodeByPosition(r,e)})),function(e,t,r){var n=r.attrs,o=t.nodeName;Object.keys(n).forEach((function(r){var a=n[r];!e.isStandardAttr(o,r)&&e.acceptAttr(o,r,a)&&e.setAttribute(t,r,a)}))}(t,a,c),e.needBreak=!0,r}return e.needBreak=!0,O(e,t,r,[n])}function P(e,t){var r=t.node,n=t.offset;if(!r.isElement())return t;if(r.hasCategory(p.Category.Block)&&n===r.childCount)return P(e,e.newPosition(r.parentNode,r.offset+1));var o=r.getChildByOffset(n-1),a=r.getChildByOffset(n);if(!o||!a)return t;if(o.nodeName!==a.nodeName||!o.isElement())return t;var i=e.newPosition(o,o.childCount);return t=i.clone(),a.children.forEach((function(r){t=e.insertNodeByPosition(t,r)})),e.removeChild(a.parentNode,a),i}function j(e,t,r){var n;(null===(n=null==t?void 0:t.attrs)||void 0===n?void 0:n.hindent)&&r&&e.acceptAttr(r.nodeName,"indent",t.attrs.hindent)&&e.setAttribute(r,"indent",t.attrs.hindent)}function C(e,t){var r;e.isTextNode()?t(e):e.isElement()&&(null===(r=e.children)||void 0===r||r.forEach((function(e){C(e,t)})))}t.insertINodeByPosition=function(e,t,r){var n=function(e,t){var r=new Set,n={recordCheckNode:function(e){r.add(e)}};if(!y.default.isFragmentNode(t))return null;var o=b(e,t.children||[]),a=v(n,e,null,o);return m(e,a,Array.from(r))}(e,r);return n?function(e,t,r){var n={isTopProcessContext:!0,needBreak:!1,allowMergeFirstLine:!0,textAttrs:t.node.isTextNode()&&(0,l.cloneObject)(t.node.attrs)||{}};1!==r.length||r[0].nodeName!==e.defaultElementName||e.acceptNode(t.node.nodeName,e.defaultElementName)||(r=r[0].children);t=r.some((function(e){return!e.hasCategory([p.Category.Text,p.Category.Inline])}))?(0,c.breakBlockContent)(e,t,c.FOCUS_BLOCK):(0,s.splitTextNode)(e,t);return t=function(e,t){if(!t.node.isElement())return t;for(var r=t.node,n=r.children,o=t.offset,a=o,i=n.length;a<i;a++){if(!(u=n[a]).isTextNode()||0!==u.dataLength)break;e.removeChild(r,u)}for(a=o-1;a>=0;a--){var u;if(!(u=n[a]).isTextNode()||0!==u.dataLength)break;e.removeChild(r,u),o--}return e.newPosition(r,o)}(e,t),t=O(n,e,t,r),t}(e,t,n):t}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.flushJob=t.isCommitted=t.commitJob=void 0;var i=r(3454),u=a(r(4174)),l=r(4009),c=a(r(3516)),s=a(r(3526)),f=a(r(3904)),d=a(r(3711)),p=r(4175),h=r(3459),y=r(3991);t.commitJob=function(e){e._committed=!0},t.isCommitted=function(e){return e._committed},t.flushJob=function(e){return e._flush()};var b=function(){function e(t,r,n){void 0===n&&(n=e.MODE_USER),Object.defineProperty(this,"_editing",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_model",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_mode",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_document",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cachedSelection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_syncedOperations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_unSyncOperations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_committed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._document=r.document,this._cachedSelection=this._document.selection}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._editing,delete this._model,delete this._document,delete this._cachedSelection,delete this._syncedOperations,delete this._unSyncOperations}}),Object.defineProperty(e.prototype,"editing",{get:function(){return this._editing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"document",{get:function(){return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultElementName",{get:function(){return this._model.schema.defaultElementName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textAttrs",{get:function(){return this._model.schema.textAttrs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"operations",{get:function(){return this._syncedOperations.concat(this._unSyncOperations)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cachedSelection",{get:function(){return this._cachedSelection},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUserMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._mode===e.MODE_USER}}),Object.defineProperty(e.prototype,"isHistoryMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._mode===e.MODE_HISTORY}}),Object.defineProperty(e.prototype,"isAutoMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._mode===e.MODE_AUTO}}),Object.defineProperty(e.prototype,"isOTMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._mode===e.MODE_OT}}),Object.defineProperty(e.prototype,"isSilentMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._mode===e.MODE_SILENT}}),Object.defineProperty(e.prototype,"getNodeById",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._document.getNodeById(e)}}),Object.defineProperty(e.prototype,"getNodesByName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._document.getNodesByName(e)}}),Object.defineProperty(e.prototype,"getNodeByPath",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._document.getNodeByPath(e)}}),Object.defineProperty(e.prototype,"applyOperation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.apply(this)}}),Object.defineProperty(e.prototype,"hasCategory",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return this._model.hasCategory(e,t,r)}}),Object.defineProperty(e.prototype,"getNodeSchema",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._model.getNodeSchema(e)}}),Object.defineProperty(e.prototype,"isStandardAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._model.isStandardAttr(e,t)}}),Object.defineProperty(e.prototype,"getAttrSchema",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._model.getAttrSchema(e)}}),Object.defineProperty(e.prototype,"isEmpty",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 0===this._unSyncOperations.length}}),Object.defineProperty(e.prototype,"_flush",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(0===this._unSyncOperations.length)return null;var e=this._unSyncOperations.slice();return this._syncedOperations=this._syncedOperations.concat(this._unSyncOperations),this._unSyncOperations=[],e}}),Object.defineProperty(e.prototype,"setSelectionWithoutOptimize",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;t=Array.isArray(e)?f.default.createBy(this._document,e):e,this._document.selection=(0,p.normalizeSelection)(this,t,!1)}}),Object.defineProperty(e.prototype,"setSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;t=Array.isArray(e)?f.default.createBy(this._document,e):e,this._document.selection=(0,p.normalizeSelection)(this,t)}}),Object.defineProperty(e.prototype,"execCommand",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return(t=this._model).execCommand.apply(t,o([e],n(r),!1))}}),Object.defineProperty(e.prototype,"dangerDirectSetSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;t=Array.isArray(e)?f.default.createBy(this._document,e):e,this._document.selection=t}}),Object.defineProperty(e.prototype,"getSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._document.selection}}),Object.defineProperty(e.prototype,"acceptNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._model.acceptNode(e,t)}}),Object.defineProperty(e.prototype,"acceptAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return this._model.schema.acceptAttr(e,t,r)}}),Object.defineProperty(e.prototype,"acceptAttrName",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._model.schema.acceptAttrName(e,t)}}),Object.defineProperty(e.prototype,"isContextAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._model.schema.isContextAttr(e)}}),Object.defineProperty(e.prototype,"supportContextAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._model.schema.supportContextAttr(e,t)}}),Object.defineProperty(e.prototype,"processContextAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return this._model.schema.processContextAttr(e,t,r)}}),Object.defineProperty(e.prototype,"newPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return new c.default(e,t)}}),Object.defineProperty(e.prototype,"newRange",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return void 0===t&&(t=e),s.default.createAt(e,t)}}),Object.defineProperty(e.prototype,"newSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return f.default.createBy(this._document,e,t,r)}}),Object.defineProperty(e.prototype,"newSelectionFromJson",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return f.default.fromJson(this._document,e)}}),Object.defineProperty(e.prototype,"setSelectionFromJson",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=f.default.fromJson(this._document,e);this.setSelection(t)}}),Object.defineProperty(e.prototype,"selectNodeContents",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return f.default.createBy(this._document,[s.default.selectNodeContents(e)])}}),Object.defineProperty(e.prototype,"selectNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return f.default.createBy(this._document,[s.default.selectNode(e)])}}),Object.defineProperty(e.prototype,"createElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this;return t&&Object.keys(t).forEach((function(r){i.assert.fatal(n.acceptAttr(e,r,t[r]),"framework/kernel/src/model/editing/job/job.ts:298")})),this._document.createElement(e,t,r)}}),Object.defineProperty(e.prototype,"createHole",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return this._document.createHole(e,t,r)}}),Object.defineProperty(e.prototype,"createTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this;return t&&Object.keys(t).forEach((function(e){i.assert.fatal(n.acceptAttr(h.Category.Text,e,t[e]),"framework/kernel/src/model/editing/job/job.ts:312")})),this._document.createTextNode(e,t,r)}}),Object.defineProperty(e.prototype,"createInheritTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,n=d.default.closestInlineAttrs(t),o={};return Object.keys(n).forEach((function(e){r.acceptAttr(h.Category.Text,e,n[e])&&(o[e]=n[e])})),this.createTextNode(e,o)}}),Object.defineProperty(e.prototype,"createCardNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this;return t&&Object.keys(t).forEach((function(r){i.assert.fatal(n.acceptAttr(e,r,t[r]),"framework/kernel/src/model/editing/job/job.ts:333")})),this._document.createCardNode(e,t,r)}}),Object.defineProperty(e.prototype,"isValidAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._model.schema.isValidAttr(e,t)}}),Object.defineProperty(e.prototype,"removeAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.hasAttribute(t)&&(0,l.addOperation)(this,u.default.removeAttribute(this,e,t))}}),Object.defineProperty(e.prototype,"setAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if(e.attrs[t]!==r){var n=u.default.setAttribute(this,e,t,r);n&&(0,l.addOperation)(this,n)}}}),Object.defineProperty(e.prototype,"insertNodeByPosition",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){u.default.assertAcceptNode(this._model,e.node.nodeName,t.nodeName);var r=u.default.insertByOffset(this,e.node,e.offset,t);return r&&(0,l.addOperation)(this,r),i.assert.fatal(t.parentNode===e.node,"framework/kernel/src/model/editing/job/job.ts:381"),new c.default(e.node,t.offset+1)}}),Object.defineProperty(e.prototype,"cloneNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;if(void 0===t&&(t=!1),!t)return e.cloneNode(!1);var n=e.cloneNode(!1);return e.isElement()&&e.children.forEach((function(e){e=r.cloneNode(e,!0),r.appendChild(n,e)})),n}}),Object.defineProperty(e.prototype,"appendChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){u.default.assertAcceptNode(this._model,e.nodeName,t.nodeName),(0,l.addOperation)(this,u.default.appendChild(this,e,t))}}),Object.defineProperty(e.prototype,"prependChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){u.default.assertAcceptNode(this._model,e.nodeName,t.nodeName),(0,l.addOperation)(this,u.default.prependChild(this,e,t))}}),Object.defineProperty(e.prototype,"replaceChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){i.assert.fatal(t!==r,"framework/kernel/src/model/editing/job/job.ts:426");var n,o=r.offset;return(0,l.addOperation)(this,u.default.removeChild(this,e,r)),n="function"==typeof t?t(this,r,e):t,u.default.assertAcceptNode(this._model,e.nodeName,n.nodeName),(0,l.addOperation)(this,u.default.insertByOffset(this,e,o,n)),n}}),Object.defineProperty(e.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){(0,l.addOperation)(this,u.default.removeChild(this,e,t))}}),Object.defineProperty(e.prototype,"insertBefore",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){u.default.assertAcceptNode(this._model,e.nodeName,t.nodeName),(0,l.addOperation)(this,u.default.insertBefore(this,e,t,r))}}),Object.defineProperty(e.prototype,"insertAfter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){u.default.assertAcceptNode(this._model,e.nodeName,t.nodeName),(0,l.addOperation)(this,u.default.insertAfter(this,e,t,r))}}),Object.defineProperty(e.prototype,"insertByOffset",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){u.default.assertAcceptNode(this._model,e.nodeName,r.nodeName);var n=u.default.insertByOffset(this,e,t,r);n&&(0,l.addOperation)(this,n)}}),Object.defineProperty(e.prototype,"setTextNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){(0,l.addOperation)(this,u.default.setTextNodeData(this,e,t))}}),Object.defineProperty(e,"MODE_USER",{enumerable:!0,configurable:!0,writable:!0,value:y.JobMode.User}),Object.defineProperty(e,"MODE_INIT",{enumerable:!0,configurable:!0,writable:!0,value:y.JobMode.Init}),Object.defineProperty(e,"MODE_AUTO",{enumerable:!0,configurable:!0,writable:!0,value:y.JobMode.Auto}),Object.defineProperty(e,"MODE_HISTORY",{enumerable:!0,configurable:!0,writable:!0,value:y.JobMode.History}),Object.defineProperty(e,"MODE_OT",{enumerable:!0,configurable:!0,writable:!0,value:y.JobMode.OT}),Object.defineProperty(e,"MODE_SILENT",{enumerable:!0,configurable:!0,writable:!0,value:y.JobMode.Silent}),e}();t.default=b},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=u(r(3320)),c=r(3454),s=r(3598),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_$extendMethods",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"_$extends",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"_$services",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"_pluginEventEmitter",{enumerable:!0,configurable:!0,writable:!0,value:new l.default}),t}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._pluginEventEmitter.removeAllListeners(),this.removeAllListeners(),delete this._pluginEventEmitter,delete this._$extendMethods,delete this._$extends,delete this._$services}}),Object.defineProperty(t.prototype,"extendMethods",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,r=this._$extendMethods;Object.keys(e).forEach((function(n){(0,c.assert)(!(0,s.hasOwnProperty)(r,n),"framework/public/src/hub.ts:34"),(0,c.assert)(!t[n],"framework/public/src/hub.ts:35"),t[n]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e[n].apply(e,i([],a(t),!1))},r[n]=e[n]}))}}),Object.defineProperty(t.prototype,"hasExtendMethod",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,s.hasOwnProperty)(this._$extendMethods,e)}}),Object.defineProperty(t.prototype,"getExtendMethod",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._$extendMethods[e]}}),Object.defineProperty(t.prototype,"getExtendInterface",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this}}),Object.defineProperty(t.prototype,"extend",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this._$extends;(0,c.assert)(void 0===this[e],"framework/public/src/hub.ts:71"),(0,c.assert)(!(0,s.hasOwnProperty)(r,e),"framework/public/src/hub.ts:72"),r[e]=t,this[e]=t}}),Object.defineProperty(t.prototype,"hasExtend",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,s.hasOwnProperty)(this._$extends,e)}}),Object.defineProperty(t.prototype,"getExtend",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._$extends[e]}}),Object.defineProperty(t.prototype,"emitPluginEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;null===(r=this._pluginEventEmitter)||void 0===r||r.emit(e,t)}}),Object.defineProperty(t.prototype,"onPluginEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;return this._pluginEventEmitter.on(e,t),function(){r._pluginEventEmitter.off(e,t)}}}),Object.defineProperty(t.prototype,"emitSafe",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];try{this.emit.apply(this,i([e],a(t),!1))}catch(e){}}}),Object.defineProperty(t.prototype,"registerService",{enumerable:!1,configurable:!0,writable:!0,value:function(e){(0,c.assert)(!this._$services[e.id],"framework/public/src/hub.ts:111"),this._$services[e.id]=e}}),Object.defineProperty(t.prototype,"getService",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._$services[e.value]||null}}),Object.defineProperty(t.prototype,"requireService",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._$services[e.value];return(0,c.assert)(t,"Service is not found: ".concat(String(e.value)),"framework/public/src/hub.ts:122"),t}}),t}(l.default);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4188),o=function(){function e(){}return Object.defineProperty(e,"getAttrValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,o,a){return void 0===o&&(o=!0),(0,n.getAttrValue)(e,t,r,o,a)}}),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addUrlParam=t.sanitizeUrl=t.validUrl=t.protocols=void 0;var n=["0.0.0.0","255.255.255.255",/^127\./,/^192\.168\./,/^10\./],o=function(){function e(){}return Object.defineProperty(e,"isBase64ImageURL",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!e&&/^data:image\//i.test(e)}}),Object.defineProperty(e,"isFullHttpURL",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if("string"!=typeof e)return!1;if(!e)return!1;if(/[\u0020\n]/.test(e))return!1;try{var t=new URL(e).protocol;return"http:"===t||"https:"===t}catch(e){return!1}}}),Object.defineProperty(e,"parseQuery",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r="";return t.forEach((function(t){var n=t[0],o=t[1];"number"==typeof o&&(o=e[o]),r+="".concat(n,"=").concat(o,"&")})),r.substring(0,r.length-1)}}),Object.defineProperty(e,"matchAndReplaceUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){for(var n=!1,o=0;o<t.length;o++){var a=t[o],i=a[0],u=a[1],l=r.match(u);if(l){n="".concat(l[1],"?").concat(e.parseQuery(l,i));break}}return n}}),Object.defineProperty(e,"validateLocalHost",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{var t=new URL(e,"http://localhost").hostname;return!(!t||"localhost"===t)&&(!/^\d+\.\d+.\d+.\d+$/.test(t)||!n.some((function(e){return"string"==typeof e?e===t:e.test(t)})))}catch(e){return!1}}}),Object.defineProperty(e,"getExtName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t="";try{t=new URL(e,"http://localhost").pathname}catch(e){return null}var r=t.split("/"),n=r[r.length-1]||"";if(!n)return null;var o=n.split("."),a=o[o.length-1];return a?a.toLowerCase():null}}),Object.defineProperty(e,"sanitizeUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return i(e)}}),Object.defineProperty(e,"sanitizeImageSrc",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.isBase64ImageURL(e)?e:i(e)}}),Object.defineProperty(e,"getProtocol",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)return null;try{return new URL(e).protocol}catch(e){return null}}}),Object.defineProperty(e,"validUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return a(e)}}),Object.defineProperty(e,"addSearchParam",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if(!e)return e;try{var n=new URL(e);return n.searchParams.set(t,String(r)),n.toString()}catch(n){if(e.includes("?")){var o=new RegExp("".concat(t,"=[^&]+"));return o.test(e)?e.replace(o,"".concat(t,"=").concat(encodeURIComponent(r))):"".concat(e,"&").concat(t,"=").concat(encodeURIComponent(r))}return"".concat(e,"?").concat(t,"=").concat(encodeURIComponent(r))}}}),Object.defineProperty(e,"openUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"undefined"!=typeof window&&window.open(e)}}),e}();function a(e){if("string"!=typeof e)return!1;if((e=e.toLowerCase()).startsWith("data:text/html"))return!1;var r=e.split("#")[0];return!/\s/.test(r)&&(!!t.protocols.some((function(t){return e.startsWith(t)}))||(!(!e.startsWith("./")&&!e.startsWith("/"))||e.indexOf(":")<0))}function i(e){return"string"==typeof e&&(e=e.trim()),a(e)?e:""}t.default=o,t.protocols=["http:","https:","blob:","data:","dingtalk:","ftp:","mailto:","fleamarket:","alipays:","qinpai:"],t.validUrl=a,t.sanitizeUrl=i,t.addUrlParam=function(e,t,r){if(void 0===r&&(r=""),!e||!t||"object"!=typeof t)return e;try{var n=new URL(e,r);Object.keys(t).forEach((function(e){n.searchParams.append(e,t[e])}));var o=n.search;return e.split("?")[0]+o}catch(t){return console.warn(t),e}}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MoveCardCommand=void 0,o(r(4193),t);var i=r(4194);Object.defineProperty(t,"MoveCardCommand",{enumerable:!0,get:function(){return a(i).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTML_WRITER_MODE=t.HTML_WRITER_MODE_CLEAN=t.HTML_WRITER_MODE_INLINE=void 0,t.HTML_WRITER_MODE_INLINE="inline",t.HTML_WRITER_MODE_CLEAN="clean",function(e){e.INLINE="inline",e.CLEAN="clean"}(t.HTML_WRITER_MODE||(t.HTML_WRITER_MODE={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LakeStyle=t.HtmlStyle=t.BROWSER_COLOR_NAMES=void 0,t.BROWSER_COLOR_NAMES={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},t.HtmlStyle="background-color",t.LakeStyle="background-color"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"clipboard",command:{copy:"copy",cut:"cut",paste:"paste"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"delete",command:{delete:"delete",deleteByRange:"deleteByRange",deleteToBlockEnd:"deleteToBlockEnd"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"typography",command:{typography:"typography",paragraphSpacing:"paragraphSpacing"},service:{ITypographyKernelService:"ITypographyKernelService"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"fontsize",command:{fontsize:"fontsize",defaultFontsize:"defaultFontsize",clearDefaultFontsize:"clearDefaultFontsize"},toolbar:"fontsize"})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"history",command:{redo:"redo",undo:"undo",rollbackHistory:"rollbackHistory"},toolbar:{redo:"redo",undo:"undo"}})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.INodeReaderKernelService=void 0;var i=a(r(4688)),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"reader",{enumerable:!0,configurable:!0,writable:!0,value:new i.default(t.kernel)}),t}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this.reader}}),Object.defineProperty(t.prototype,"registerINodeCardPreReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.reader.registerCardPreReader(e,t)}}),Object.defineProperty(t.prototype,"registerINodeCardReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.reader.registerCardReader(e,t)}}),Object.defineProperty(t.prototype,"registerINodeNodePreReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.reader.registerNodePreReader(e,t)}}),Object.defineProperty(t.prototype,"registerINodeNodeReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.reader.registerNodeReader(e,t)}}),t}(r(3493).IINodeReaderKernelService);t.INodeReaderKernelService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"indent",command:{indent:"indent",outdent:"outdent",canIndent:"canIndent"},toolbar:"indent"})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"input",command:{input:"input",canInput:"canInput",insertText:"insertText",autoSpacing:"autoSpacing",autoClosing:"autoClosing"}})},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.toCssValueName=t.ColorRegistry=void 0;var a=r(3454),i=r(4733),u=r(3925),l=r(4734),c=function(){function e(){Object.defineProperty(this,"colorMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"lightToDark",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"darkToLight",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}return Object.defineProperty(e.prototype,"getColor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.colorMap.get(e)}}),Object.defineProperty(e.prototype,"setColor",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.colorMap.set(e,t),t.light&&t.dark&&(this.lightToDark.set(t.light,t.dark),this.darkToLight.set(t.dark,t.light))}}),Object.defineProperty(e.prototype,"registerColor",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.setColor(e,t),this}}),Object.defineProperty(e.prototype,"registerColors",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r;try{for(var a=n(Object.entries(e)),i=a.next();!i.done;i=a.next()){var u=o(i.value,2),l=u[0],c=u[1];this.setColor(l,c)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return this}}),Object.defineProperty(e.prototype,"getIColorRegistry",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this}}),Object.defineProperty(e.prototype,"transform",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e||u.ColorScheme.LIGHT,o=t||u.ColorScheme.LIGHT;if(n===o)return r;if(n===u.ColorScheme.LIGHT&&o===u.ColorScheme.DARK&&this.lightToDark.has(r))return this.lightToDark.get(r);if(n===u.ColorScheme.DARK&&o===u.ColorScheme.LIGHT&&this.darkToLight.has(r))return this.darkToLight.get(r);var a=i.ColorParse.parse(r);return a?a.invert().toCSSValue():r}}),Object.defineProperty(e.prototype,"clone",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=new e;return t.colorMap=new Map(this.colorMap),t}}),Object.defineProperty(e.prototype,"getRefColoScheme",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.colorMap.get(e);return(null==t?void 0:t.ref)?this.getRefColoScheme(t.ref):t||{light:"#fff",dark:"#000"}}}),Object.defineProperty(e.prototype,"getProcessColorValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;if(void 0===t&&(t=u.ColorScheme.LIGHT),e.ref&&!e.process)return"var(".concat(s(e.ref),")");var n=e.ref?this.getRefColoScheme(e.ref):e,o=n[t]||n[u.ColorScheme.LIGHT];if(o){var l=i.ColorParse.parse(o);return(0,a.assert)(l,"color parse error ".concat(o),"framework/infra/src/theme/color-registry.ts:104"),(null===(r=e.process)||void 0===r?void 0:r.call(e,l))||o}return null}}),Object.defineProperty(e.prototype,"toStyleValues",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,a;void 0===t&&(t=u.ColorScheme.LIGHT);var i=[".",e,"{"];try{for(var l=n(this.colorMap),c=l.next();!c.done;c=l.next()){var f=o(c.value,2),d=f[0],p=f[1],h=this.getProcessColorValue(p,t);h&&i.push(s(d),":",h,";")}}catch(e){r={error:e}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}return i.push("}"),i.join("")}}),e}();function s(e){return"--lakex-".concat(e.replace(/\./g,"-"))}t.ColorRegistry=c,t.toCssValueName=s;var f=(new c).registerColors(l.Colors).getIColorRegistry();t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorScheme=void 0,function(e){e.DARK="dark",e.LIGHT="light"}(t.ColorScheme||(t.ColorScheme={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"textDataSource",command:{text:"text"},service:{ITextDataSourceKernelService:"ITextDataSourceKernelService"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QUEUE_NO_INIT_WIDTH=t.INHERITABLE_CELL_ATTRS=t.BORDER_STYLE=t.VERTICAL_ALIGN=void 0,t.VERTICAL_ALIGN=["top","middle","bottom"],t.BORDER_STYLE=["solid","dashed"],t.INHERITABLE_CELL_ATTRS=["cellBgColor","verticalAlign"],t.QUEUE_NO_INIT_WIDTH=80},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PARAGRAPH_SPACING_DEFAULT=t.PARAGRAPH_SPACING_RELAX=void 0,t.PARAGRAPH_SPACING_RELAX="relax",t.PARAGRAPH_SPACING_DEFAULT="default"},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(3464)),l=i(r(191)),c=r(3598),s=i(r(3512)),f=r(3518),d=r(3768),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"createStandardCardValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r){void 0===r&&(r=null);var n=e||{mode:"plain",autoWrap:!1,theme:d.CODE_THEME_ENUM.GITHUB},o={mode:n.mode,tabSize:n.tabSize||null,collapsed:!!n.collapsed,indentWithTab:!!n.indentWithTab,name:n.name||"",autoWrap:!!n.autoWrap,hideToolbar:!!n.hideToolbar,lineNumbers:!(0,c.hasOwnProperty)(n,"lineNumbers")||!!n.lineNumbers,lightLines:n.lightLines||[],foldLines:n.foldLines||[],customStyle:n.customStyle||[],code:r||"",theme:n.theme};return o.code&&"object"==typeof o.code&&(o=Object.assign(o,o.code)),s.default.setCardSpacingToValue(f.CARD_SPACING.BOTH,(0,u.default)({},t.DefaultCardValue,o))}}),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=(0,l.default)(e,["mode","code","autoWrap","lineNumbers","theme","heightLimit","collapsed","hideToolbar","indentWithTab","name","lightLines","foldLines","customStyle","tabSize"]);return r.code&&"object"==typeof r.code&&(r=Object.assign(r,r.code)),r.mode&&(r.mode=(d.MODES.find((function(e){var t,n,o;return[null===(t=e.value)||void 0===t?void 0:t.toLowerCase(),null===(n=e.name)||void 0===n?void 0:n.toLowerCase()].includes(r.mode.toLowerCase())||(null===(o=e.ext)||void 0===o?void 0:o.includes(r.mode.toLowerCase()))}))||d.MODES[0]).value),(0,u.default)({},t.DefaultCardValue,r)}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=[e.name||""].join(",");return a(a({search:t},e),{heightLimit:!0})}}),Object.defineProperty(t,"setCodeTheme",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.theme=t}}),Object.defineProperty(t.prototype,"mode",{get:function(){return this._cardValue.mode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this._cardValue.code},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"heightLimit",{get:function(){return this._cardValue.heightLimit},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoWrap",{get:function(){return this._cardValue.autoWrap},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineNumbers",{get:function(){return this._cardValue.lineNumbers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return this._cardValue.theme},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"foldLines",{get:function(){return this._cardValue.foldLines},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lightLines",{get:function(){return this._cardValue.lightLines},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customStyle",{get:function(){return this._cardValue.customStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tabSize",{get:function(){return this._cardValue.tabSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collapsed",{get:function(){return this._cardValue.collapsed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideToolbar",{get:function(){return this._cardValue.hideToolbar},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._cardValue.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"indentWithTab",{get:function(){return this._cardValue.indentWithTab},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isHeightLimit",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!this.getCardHeight()}}),Object.defineProperty(t.prototype,"update",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue=a(a({},this._cardValue),e),this.afterChange()}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{mode:"plain",code:"",autoWrap:!1,lineNumbers:!0,heightLimit:!0,collapsed:!1,hideToolbar:!1,name:"",tabSize:null,indentWithTab:!1,lightLines:[],foldLines:[],customStyle:[],theme:d.CODE_THEME_ENUM.GITHUB}}),t}(s.default);t.default=p},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseToNodeTree=t.HTMLDataSourcePlugin=t.pluginRegister=t.IHTMLKernelService=t.HtmlTextNodePreWriter=t.HtmlStyleReader=t.NodeHTMLWriter=t.HtmlNodeReader=t.HtmlNodePreReader=t.AttributeHTMLWriter=t.HtmlAttributeReader=void 0;var o=n(r(4028));t.HtmlAttributeReader=o.default;var a=n(r(3562));t.AttributeHTMLWriter=a.default;var i=n(r(4029));t.HtmlNodePreReader=i.default;var u=n(r(3494));t.HtmlNodeReader=u.default;var l=n(r(3470));t.NodeHTMLWriter=l.default;var c=n(r(3760));t.HtmlStyleReader=c.default;var s=n(r(4970));t.HtmlTextNodePreWriter=s.default;var f=r(3466);Object.defineProperty(t,"IHTMLKernelService",{enumerable:!0,get:function(){return f.IHTMLKernelService}});var d=r(4021);Object.defineProperty(t,"pluginRegister",{enumerable:!0,get:function(){return d.pluginRegister}});var p=n(r(4233));t.HTMLDataSourcePlugin=p.default;var h=r(4234);Object.defineProperty(t,"parseToNodeTree",{enumerable:!0,get:function(){return h.parseToNodeTree}})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(97)),l=i(r(3464)),c=r(3454),s=i(r(3512)),f=r(3518),d=r(4265),p=i(r(5051)),h={deepinsight:"ali",riddle:"ali",herbox:"ali"},y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=(0,u.default)(e,"url")||(0,u.default)(e,"src"),o=(0,u.default)(e,"entrance");o||(o=t),h[o]&&(o=h[o]);var a=e.type;return n&&!a&&(a=p.default.getTypeByURL(n,r)),a||p.default.isValidEntrance(o,r)||(console.warn("非法数据",e,t),o="youku",n=""),{entrance:o,src:n,type:a}}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={entrance:(0,u.default)(e,"entrance"),src:(0,u.default)(e,"src"),url:(0,u.default)(e,"src"),height:e.__height};return(null==e?void 0:e.type)&&(t.type=e.type),t}}),Object.defineProperty(t,"getInitCardValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return s.default.setCardSpacingToValue(f.CARD_SPACING_BOTH,(0,l.default)({},t.DefaultCardValue,e))}}),Object.defineProperty(t,"createBy",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=p.default.matchURL(e,t);if(!r)return null;var n=r.Service.getName();return{src:r.validUrl,type:n,entrance:n}}}),Object.defineProperty(t.prototype,"cardAlias",{get:function(){var e,t=this._cardValue.type;return t&&a(a({},d.Services),null===(e=this.pluginOption)||void 0===e?void 0:e.services)[t].isAvailable()?t:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getEntrance",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.entrance}}),Object.defineProperty(t.prototype,"getType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.type}}),Object.defineProperty(t.prototype,"setType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.type=e}}),Object.defineProperty(t.prototype,"getSrc",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.src}}),Object.defineProperty(t.prototype,"setSrc",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.src=e}}),Object.defineProperty(t.prototype,"getEmbedURL",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=p.default.matchURL(this._cardValue.src||"",null===(e=this.pluginOption)||void 0===e?void 0:e.services);return t?t.validUrl:""}}),Object.defineProperty(t.prototype,"getServiceName",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._cardValue,t=e.entrance,r=e.type;return e.src?r:t}}),Object.defineProperty(t.prototype,"getDetail",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=a(a({},d.Services),null===(e=this.pluginOption)||void 0===e?void 0:e.services)[this.getServiceName()];return c.assert.fatal(t,"plugins/thirdparty/src/kernel/thirdparty-card-data.ts:189"),{src:this._cardValue.src,example:t.getExample(),help:t.getHelp(),placeholder:t.getPlaceholder()}}}),Object.defineProperty(t.prototype,"isAllowMaximize",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;if(!this._cardValue.type)return!1;var t=a(a({},d.Services),null===(e=this.pluginOption)||void 0===e?void 0:e.services)[this.getServiceName()];return c.assert.fatal(t,"plugins/thirdparty/src/kernel/thirdparty-card-data.ts:209"),t.getMaximize()}}),Object.defineProperty(t.prototype,"isAllowResize",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;if(!this._cardValue.type)return!1;var t=a(a({},d.Services),null===(e=this.pluginOption)||void 0===e?void 0:e.services)[this.getServiceName()];return c.assert.fatal(t,"plugins/thirdparty/src/kernel/thirdparty-card-data.ts:224"),t.getResize()}}),Object.defineProperty(t.prototype,"isAvailable",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;if(!this._cardValue.type)return!1;var t=a(a({},d.Services),null===(e=this.pluginOption)||void 0===e?void 0:e.services)[this.getServiceName()];return c.assert.fatal(t,"plugins/thirdparty/src/kernel/thirdparty-card-data.ts:239"),t.isAvailable()}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{entrance:null,type:null,src:null}}),t}(s.default);t.default=y},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseDayNumberToDate=t.parseDayToNumber=t.getCurrentMonthFirstDay=t.weekYear=t.weekOfYear=t.weekday=t.localeData=t.customParseFormat=t.advancedFormat=t.isTodyPlugin=t.isSameOrBeforePlugin=t.isSameOrAfterPlugin=t.isBetweenPlugin=t.customParseFormatPlugin=t.dayjs=void 0;var o=n(r(14));t.dayjs=o.default;var a=n(r(310));t.advancedFormat=a.default;var i=n(r(309));t.customParseFormatPlugin=i.default;var u=n(r(309));t.customParseFormat=u.default;var l=n(r(2784));t.isBetweenPlugin=l.default;var c=n(r(330));t.isSameOrAfterPlugin=c.default;var s=n(r(332));t.isSameOrBeforePlugin=s.default;var f=n(r(3970));t.isTodyPlugin=f.default;var d=n(r(314));t.localeData=d.default;var p=n(r(313));t.weekOfYear=p.default;var h=n(r(312));t.weekYear=h.default;var y=n(r(311));t.weekday=y.default;var b=n(r(3721));r(579),o.default.extend(i.default),o.default.extend(f.default),o.default.extend(c.default),o.default.extend(s.default),o.default.extend(l.default),o.default.extend(u.default),o.default.extend(a.default),o.default.extend(y.default),o.default.extend(d.default),o.default.extend(p.default),o.default.extend(h.default),"zhCN"===b.default.getLanguage()&&o.default.locale("zh-cn");var m="01:01:01";t.getCurrentMonthFirstDay=function(){var e=(0,o.default)();return(0,o.default)("".concat(e.format("YYYY-MM"),"-01 ").concat(m))},t.parseDayToNumber=function(e){return Number.parseInt(e.format("YYYYMMDD"),10)},t.parseDayNumberToDate=function(e){return(0,o.default)("".concat(e," ").concat(m),"YYYYMMDD HH:mm:ss")}},,function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(){o=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",s=u.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),u=new T(n||[]);return i(a,"_invoke",{value:S(e,r,u)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",y="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};f(O,l,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&a.call(P,l)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,u,l){var c=p(e[o],e,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,u,l)}),(function(e){r("throw",e,u,l)})):t.resolve(f).then((function(e){s.value=e,u(s)}),(function(e){return r("throw",e,u,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function S(t,r,n){var o=h;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=p(t,r,n);if("normal"===c.type){if(o=n.done?m:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return _.prototype=w,i(j,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:_,configurable:!0}),_.displayName=f(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,s,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),f(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),f(j,s,"Generator"),f(j,l,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function a(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function u(e){a(i,n,o,u,l,"next",e)}function l(e){a(i,n,o,u,l,"throw",e)}u(void 0)}))}}function u(e,t,r){return l.apply(this,arguments)}function l(){return(l=i(o().mark((function e(t,r,n){var a,u,l,c,s,f,d,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=n||{delayTime:1e4,retryIntervalTime:5e3,retryCount:4},e.next=3,t();case 3:if((c=e.sent).success){e.next=6;break}return e.abrupt("return",c);case 6:return s=c.data.msgId,f=new Promise((function(e,t){setTimeout(i(o().mark((function n(){var a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r({msgId:s});case 3:a=n.sent,e(a),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])}))),l.delayTime)})),e.next=10,f;case 10:if(!(d=e.sent).success||1!==(null===(a=d.data)||void 0===a?void 0:a.status)&&0!==(null===(u=d.data)||void 0===u?void 0:u.status)){e.next=13;break}return e.abrupt("return",d);case 13:return p=new Promise((function(e,t){var n,a=l.retryCount,u=setInterval(i(o().mark((function i(){var l,c;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(a>0)){o.next=19;break}return a--,o.prev=2,o.next=5,r({msgId:s});case 5:if(!(n=o.sent).success||1!==(null===(l=n.data)||void 0===l?void 0:l.status)&&0!==(null===(c=n.data)||void 0===c?void 0:c.status)){o.next=11;break}return e(n),a=0,clearInterval(u),o.abrupt("return");case 11:o.next=17;break;case 13:o.prev=13,o.t0=o.catch(2),t(n),clearInterval(u);case 17:o.next=21;break;case 19:e(n),clearInterval(u);case 21:case"end":return o.stop()}}),i,null,[[2,13]])}))),l.retryIntervalTime)})),e.next=16,p;case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.d(t,"a",(function(){return u}))},,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(0),o=r.n(n),a=r(526),i=r(11),u=r(215),l=r(3742),c=function(e){var t=e.organization,r=e.publicValue,n=o.a.useMemo((function(){var e=null!=t&&t.id?a.a.ORG:a.a.PERSON;return Object(u.a)()?e:a.a.INTERNAL}),[t]);return r===i.PRIVACY.private?null:o.a.createElement(o.a.Fragment,null,n===a.a.INTERNAL&&o.a.createElement("div",{className:l.a.tip,"data-testid":"ali-security-tip"},__("如涉及到公司敏感信息（包括L3、L4及部分L2级信息），请勿开启！")),n===a.a.PERSON&&o.a.createElement("div",{className:l.a.tip,"data-testid":"ali-security-tip"},__("开启后，互联网所有获得链接的人皆可访问知识库下的全部内容。你需对其合法合规性负责，遵守相关法律法规及语雀 {terms} 约定，违规内容可能无法被查看。",{terms:o.a.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6",target:"_blank"},__("服务协议"))})))}},,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));r(37);var n=r(8),o=(r(59),r(30)),a=(r(57),r(13)),i=(r(154),r(22)),u=r(0),l=r.n(u),c=r(2),s=r.n(c),f=r(261),d=r(1007),p={nameVersion:"SaveAsVersion-module_nameVersion_VphI2"};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(){y=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==h(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(h(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function b(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e){var t=e.version,r=m(i.a.useForm(),1)[0],n=function(){var n,o=(n=y().mark((function n(){var o,a;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.validateFields();case 3:return o=n.sent,n.next=6,e.docVersionProxy.name({id:t.id,name:o.name});case 6:a=n.sent,e.onCreated(a),e.onCancel(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})),function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){b(a,r,o,i,u,"next",e)}function u(e){b(a,r,o,i,u,"throw",e)}i(void 0)}))});return function(){return o.apply(this,arguments)}}();return l.a.createElement(o.a,{"data-testid":"history-name-model",closable:!1,maskClosable:!1,onClose:e.onCancel,onCancel:e.onCancel,onOk:n,title:__("保存为版本"),getContainer:function(){var t;return(null===(t=e.getContainer)||void 0===t?void 0:t.call(e))||document.body},visible:!0},l.a.createElement(i.a,{"data-testid":"history-name-form",className:p.nameVersion,form:r,layout:"vertical"},l.a.createElement(i.a.Item,{label:__("版本名称"),name:"name",rules:[{required:!0,message:__("请输入版本名称")},{max:40,message:__("最多 40 个字符")}]},l.a.createElement(a.a,{placeholder:__("最多 40 个字符"),"data-testid":"version-name-input"}))))}function _(e){var t=e.version,r=m(Object(u.useState)(!1),2),o=r[0],a=r[1],i=t.local&&t.draft;return!Object(d.b)()||i?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(n.a,{"data-testid":"save-as-version",onClick:function(){a(!0)}},__("保存为版本")),o&&l.a.createElement(g,{getContainer:e.getContainer,version:e.version,onCreated:e.onCreated,docVersionProxy:e.docVersionProxy,onCancel:function(){a(!1)}}))}g.propTypes={version:s.a.object.isRequired,onCreated:s.a.func.isRequired,onCancel:s.a.func.isRequired,docVersionProxy:s.a.object.isRequired},_.propTypes={version:s.a.object.isRequired,onCreated:s.a.func.isRequired,docVersionProxy:s.a.object.isRequired};t.b=Object(f.b)(g,!1)},,function(e,t,r){"use strict";r(59);var n=r(30),o=(r(37),r(8)),a=(r(246),r(123)),i=(r(44),r(10)),u=r(0),l=r.n(u),c=r(2),s=r.n(c),f=r(74),d=r.n(f),p=r(1398),h=r(326),y=r(52),b=r(215),m=r(1386),v=r.n(m),g=r(189),_=r(295),w=r(32),O=r(1712),E=r(1023),P="DocExport-module_docExport_zwx9b",j="DocExport-module_title_eGdGG",C="DocExport-module_entry_qjwYu",k="DocExport-module_setting_yai1Y",S="DocExport-module_settingTitle_IjcSw",A="DocExport-module_settingUpload_3ymtX";function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(){L=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new N(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(T([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==x(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(x(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function R(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){R(a,n,o,i,u,"next",e)}function u(e){R(a,n,o,i,u,"throw",e)}i(void 0)}))}}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var B=Object(_.b)((function(){return Promise.all([r.e(14),r.e(1210)]).then(r.bind(null,6860))}),{suspense:!0}),U=E.a.STATUS,H=function(e){var t=e.bookId,r=e.exportParams,c=e.onCancel,s=e.wrapModal,f=void 0===s||s,m=function(e){var t=e.doc,r=e.bookId,n=e.exportParams,o=M(Object(u.useState)(t||null),2),a=o[0],i=o[1],c=M(Object(u.useState)(!1),2),s=c[0],f=c[1],p=M(Object(u.useState)(t?v.a.SUPPORTED_EXPORT_FORMATS[t.type]:[]),2),h=p[0],b=p[1],m=Object(u.useRef)();return Object(u.useEffect)((function(){var e=a&&("Mind"===a.type||"Board"===a.type),t=null,o=function(){var e=I(L().mark((function e(){var t;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.doc_id){e.next=11;break}return f(!0),e.next=5,y.a.docs.findOne({id:n.toc_node_url,book_id:r});case 5:t=e.sent,i(t),f(!1),b(v.a.SUPPORTED_EXPORT_FORMATS[t.type]),e.next=12;break;case 11:b([v.a.THIRD_PARTY_FORMAT.LAKE]);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(a){if(!e)return;t=document.createElement("div"),document.body.appendChild(t),d.a.render(l.a.createElement(B,{height:"100%",width:"100%",onLoad:function(e){m.current=e},content:a.content}),t)}else o();return function(){t&&(document.body.removeChild(t),t=null)}}),[a]),{state:{currentDoc:a,loading:s,formats:h},lakeBoardEngineRef:m}}(e),g=m.state,_=g.currentDoc,x=g.loading,N=g.formats,D=m.lakeBoardEngineRef,R=M(Object(u.useState)(),2),F=R[0],H=R[1],V=M(Object(u.useState)(),2),G=V[0],q=V[1],z=M(Object(u.useState)(),2),W=z[0],K=z[1],Y=M(Object(u.useState)(U.INIT),2),J=Y[0],$=Y[1],X=M(Object(u.useState)(""),2),Q=X[0],Z=X[1],ee=Object(u.useRef)(),te={markdown:[[{label:__("导出 LaTeX 公式图片"),name:"latexType",default:!0,value:1},{label:__("导出 LaTeX 公式为 Markdown 语法"),name:"latexType",value:2}],{label:__("导出保持语雀的锚点"),name:"enableAnchor",value:1},{label:__("导出保持语雀的换行"),name:"enableBreak",value:1}],pdf:[{label:__("导出文档大纲"),default:!0,name:"enableToc",value:1}]},re=function(){var e=I(L().mark((function e(n){var o,a,i,u,l,c;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={type:n,force:0},ee.current&&(a=ee.current.getValue())&&(o.options=JSON.stringify(a)),u=66e4/(i=5e3),l=0;case 5:if(!(l<u)){e.next=33;break}if(e.prev=6,"lakebook"!==n){e.next=13;break}return e.next=10,y.a.books.exports(T(T({},o),{},{id:t,title:r.toc_node_title,toc_node_uuid:r.toc_node_uuid,toc_node_url:r.toc_node_url,with_children:!0}));case 10:c=e.sent,e.next=17;break;case 13:if(!_){e.next=17;break}return e.next=16,y.a.docs.exports(T(T({},o),{},{id:_.id}));case 16:c=e.sent;case 17:if("success"!==c.state){e.next=19;break}return e.abrupt("return",c);case 19:if("error"!==c.state){e.next=23;break}if(!c.error){e.next=22;break}return e.abrupt("return",c.error);case 22:return e.abrupt("return",{error:c.message});case 23:return e.next=25,Object(h.a)(i);case 25:l++,e.next=31;break;case 28:return e.prev=28,e.t0=e.catch(6),e.abrupt("return",{error:e.t0.message});case 31:e.next=5;break;case 33:throw new Error("处理超时，请重试...");case 34:case"end":return e.stop()}}),e,null,[[6,28]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=I(L().mark((function e(t){var r;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_||v.a.SUPPORTED_EXPORT_FORMATS[_.type]){e.next=2;break}return e.abrupt("return");case 2:return H(t),$(U.PROCESSING),K(null),e.prev=5,e.next=8,re(t);case 8:if(!(r=e.sent).error){e.next=13;break}return $(U.ERROR),Z(r.error),e.abrupt("return");case 13:H(t),$(U.SUCCESS),K(r.url),Object(b.b)(r.url),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),$(U.ERROR),Z(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=I(L().mark((function e(t,r){var n;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D.current&&(null===(n=D.current)||void 0===n||n.export(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ae=function(e){var t=_&&("Mind"===_.type||"Board"===_.type);!t||_.content?(q(v.a.THIRD_PARTY_FORMAT[e.toUpperCase()]),!t||e!==v.a.THIRD_PARTY_FORMAT.JPG.key&&e!==v.a.THIRD_PARTY_FORMAT.PNG.key?("Show"!==(null==_?void 0:_.type)||"pdf"!==e)&&te[e]?(H(e),$(U.SETTING)):ne(e):oe(e,{filename:_.title})):i.a.warn(__("画板为空，请编辑发布后导出"))},ie=null;return J===U.PROCESSING?ie=G?l.a.createElement("div",{className:k},l.a.createElement("h1",{className:S},__("导出 {type}",{type:G.name})),l.a.createElement(E.a.Processing,{tip:__("正在导出中...")})):null:J===U.SUCCESS?ie=G?l.a.createElement("div",{className:k},l.a.createElement("h1",{className:S},__("导出 {type}",{type:G.name})),l.a.createElement(E.a.Success,{tip:__("文件生成成功"),action:l.a.createElement("a",{href:w.c?null:W,desktopDisableHref:!0,target:"_blank",onClick:function(){Object(b.b)(W)}},__("点击下载"))})):null:J===U.ERROR?ie=l.a.createElement(E.a.Error,{tip:__("文件生成失败"),error:Q,action:l.a.createElement(o.a,{icon:l.a.createElement(p.default,null),size:"small",onClick:function(){ne(F)}},__("重新生成"))}):J===U.INIT&&(ie=l.a.createElement("div",{className:C},l.a.createElement("div",{className:j},__("导出文档")),l.a.createElement(a.a,{spinning:x},l.a.createElement(O.a,{mode:"export",types:N,onSelect:ae})))),ie=l.a.createElement("div",{className:P},ie,function(){if(!G||!_)return null;var e=te[G.key];return e?l.a.createElement("div",{className:k,style:{display:J===U.SETTING?"block":"none"}},l.a.createElement("h1",{className:S},__("{type} 导出配置",{type:G.name})),l.a.createElement(E.a.AdvanceSetting,{wrappedComponentRef:ee,target:_,type:G,settings:e,actions:l.a.createElement(o.a,{type:"primary",className:A,onClick:function(){return ne(F)}},__("导出"))})):null}()),l.a.createElement("div",null,f?l.a.createElement(n.a,{title:null,onCancel:c,visible:!0,footer:null,width:640,maskClosable:!1},ie):ie)};H.defaultProps={exportParams:{}},H.propTypes={doc:s.a.object,exportParams:s.a.object,bookId:s.a.number.isRequired,onCancel:s.a.func.isRequired,wrapModal:s.a.bool};t.a=Object(g.b)(H,!0)},function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"f",(function(){return s})),r.d(t,"g",(function(){return d})),r.d(t,"e",(function(){return h})),r.d(t,"d",(function(){return b})),r.d(t,"c",(function(){return v})),r.d(t,"b",(function(){return _}));var n=r(1);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){a=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",s=u.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),u=new T(n||[]);return i(a,"_invoke",{value:S(e,r,u)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",y="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};f(O,l,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,l)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(a,i,u,l){var c=p(e[a],e,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==o(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,u,l)}),(function(e){r("throw",e,u,l)})):t.resolve(f).then((function(e){s.value=e,u(s)}),(function(e){return r("throw",e,u,l)}))}l(c.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=h;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=p(t,r,n);if("normal"===c.type){if(o=n.done?m:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(o(t)+" is not iterable")}return _.prototype=w,i(j,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:_,configurable:!0}),_.displayName=f(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,s,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),f(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),f(j,s,"Generator"),f(j,l,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function i(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,l,"next",e)}function l(e){i(a,n,o,u,l,"throw",e)}u(void 0)}))}}function l(e){return c.apply(this,arguments)}function c(){return c=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/createDocGen",e.abrupt("return",n.put("/api/modules/doc_generator/docgens/DocGeneratorController/createDocGen",t,r));case 3:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function s(e){return f.apply(this,arguments)}function f(){return f=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/saveDocGenContent",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/DocGeneratorController/saveDocGenContent",t,r));case 3:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function d(e){return p.apply(this,arguments)}function p(){return p=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/updateDocGenTitle",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/DocGeneratorController/updateDocGenTitle",t,r));case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function h(e){return y.apply(this,arguments)}function y(){return y=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/publishToDoc",e.abrupt("return",n.post("/api/modules/doc_generator/docgens/DocGeneratorController/publishToDoc",t,r));case 3:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function b(e){return m.apply(this,arguments)}function m(){return m=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/getDocGenRecordsByUser",e.abrupt("return",n.get("/api/modules/doc_generator/docgens/DocGeneratorController/getDocGenRecordsByUser",t,r));case 3:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return g=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/getDocGen",e.abrupt("return",n.get("/api/modules/doc_generator/docgens/DocGeneratorController/getDocGen",t,r));case 3:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function _(e){return w.apply(this,arguments)}function w(){return w=u(a().mark((function e(t){var r,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},"/api/modules/doc_generator/docgens/DocGeneratorController/deleteDocGen",e.abrupt("return",n.delete("/api/modules/doc_generator/docgens/DocGeneratorController/deleteDocGen",t,r));case 3:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return u}));var n=r(127),o=r.n(n),a=r(0),i=function(e){if(e.render)return Object(a.createElement)(e.render,o()(e,["render"]))},u=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return"function"==typeof e?e.apply(void 0,r):e}},,,,,,,,,function(e,t,r){"use strict";var n=r(1386);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a={adaptDocToDocument:function(e){return{origin:"database",format:e.format,draft_version:e.draft_version,base_timestamp:e.content_updated_at,value:this.adaptBodyToContent(e)}},adaptBodyToContent:function(e){var t;return"object"===o(t=n.FORMATS_SAVE_TO_BODY_ASL.includes(e.format)?e.body_draft_asl||e.body_asl||"":e.body_draft||e.body||"")&&(t=JSON.stringify(t)),t.trim()},adaptCacheDataToDocument:function(e,t){if(!e)return null;var r=JSON.parse(e);return"object"!==o(r)?null:["lakesheet","spreadjs"].includes(t)&&r.doc?{origin:"cache",format:t,draft_version:r.doc.data.draft_version,value:r.doc.value}:{origin:"cache",format:t,draft_version:r.draft_version,base_timestamp:r.base_timestamp||null,value:r.content}},adaptChangeToCacheData:function(e,t){var r={draft_version:e.draft_version,base_timestamp:t,content:e.value,offline:navigator&&!1===navigator.onLine};return JSON.stringify(r)},adapterDocumentContent:function(e){return"string"==typeof e.value?e.value:"object"===o(e.value)?JSON.stringify(e.value):""}};t.a=a},,function(e,t,r){"use strict";r(3356);var n=r(2817);r(3349);t.a=n.a},,,,,,,,,function(e,t,r){"use strict";r(3355);var n=r(2818);r(3352);t.a=n.b},,,,,function(e,t,r){"use strict";var n=r(530),o=r.n(n),a=r(146),i={default:[{id:"book",name:__("文档知识库"),desc:__("创作在线文档、表格"),icon:"book-type-default2",book_icon:"book-type-default",intro:__("提供结构化展示，在线完成知识创作。覆盖产品文档、项目文档、帮助手册、周报、个人笔记、旅行攻略、财务报表、报价单等场景。"),cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*0zoQT6wVAEMAAAAAAAAAAABkARQnAQ",detail:__("覆盖产品文档、项目文档、帮助手册、周报、个人笔记、旅行攻略、财务报表、报价单等场景"),help:window.appData.isYuque?"https://www.yuque.com/yuque/thyzgp/repository":"".concat(window.location.origin,"/lark/bsgp0v/repository"),type:"Book",mode:"custom",spm:{factory:"c36318.d73307"}},{id:"resource",name:__("资源知识库"),desc:__("上传并预览本地文件"),icon:"book-type-resource2",book_icon:"book-type-resource",intro:__("支持上传并预览 Word、 Excel 、Keynote 、Xmind 等办公文件。覆盖本地文件上传、资源管理、Word 在线预览等场景。"),cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*Y6gPQ5rExJkAAAAAAAAAAABkARQnAQ",detail:__("覆盖本地文件上传、资源管理、Word 在线预览等场景"),help:window.appData.isYuque?"https://www.yuque.com/yuque/thyzgp/utx3aa":"".concat(window.location.origin,"/lark/bsgp0v/utx3aa"),type:"Resource",mode:"custom",spm:{factory:"c36318.d73305"}},{id:"design",name:__("图片知识库"),desc:__("上传并预览设计稿"),icon:"book-type-design2",book_icon:"book-type-design",intro:__("提供设计稿、图片管理，分享与交流创意。覆盖 Sketch 设计稿、PSD 设计稿等图片管理场景。"),cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*5Db6SY8QwnsAAAAAAAAAAABkARQnAQ",detail:__("覆盖 Sketch 设计稿、PSD 设计稿等图片管理场景"),help:window.appData.isYuque?"https://www.yuque.com/yuque/thyzgp/rppabq":"".concat(window.location.origin,"/lark/bsgp0v/rppabq"),type:"Design",mode:"custom",spm:{factory:"c36318.d73304"}},{id:"thread",name:__("话题知识库"),desc:__("基于话题的多人协同交流"),icon:"book-type-thread2",book_icon:"book-type-thread",intro:__("发起话题，与大家一起展开讨论与交流。可用于日报周报收集、会议记录汇总、产品讨论、想法交流等。"),cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*K_dmR7rFswcAAAAAAAAAAABkARQnAQ",detail:__("可用于日报周报收集、会议记录汇总、产品讨论、想法交流等"),help:window.appData.isYuque?"https://www.yuque.com/yuque/thyzgp/threads":"".concat(window.location.origin,"/lark/bsgp0v/threads"),type:"Thread",mode:"custom",spm:{factory:"c36318"}},{id:"challenge_works",name:"",name_placeholder:"请输入名称：学校-姓名-学号",desc:"",desc_placeholder:"建议 100 字",desc_extra:"",cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*tPThT5dB5BIAAAAAAAAAAAAAARQnAQ",show_in_create_entry:!1,type:"Book",mode:"template",icon:"book-type-default2",book_icon:"book-type-default",spm:{factory:"c36318.d732971",guide:"c36329.d733371"}},{id:"challenge_thinking",name:"",name_placeholder:"请输入名称：学校-姓名-学号",desc:"",desc_placeholder:"建议 100 字",desc_extra:"",cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*w5L9SpRyDJoAAAAAAAAAAAAAARQnAQ",show_in_create_entry:!1,type:"Book",mode:"template",icon:"book-type-default2",book_icon:"book-type-default",spm:{factory:"c36318.d732972",guide:"c36329.d733372"}}],user:[{id:"notes",name:__("学习笔记"),desc:__("点滴学习，随时记录"),icon:"book-type-notes",book_icon:"book-type-notes",intro:__("点滴学习，随时记录"),cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*oYTyS4EZZ3MAAAAAAAAAAABkARQnAQ",detail:"",type:"Book",mode:"template",spm:{factory:"c36318.d73299",guide:"c36329.d73339"}},{id:"blog",name:__("博客专栏"),desc:__("分享与交流你的知识"),icon:"book-type-blog",book_icon:"book-type-blog",intro:__("分享与交流你的知识"),cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*QyEWTose5kAAAAAAAAAAAABkARQnAQ",detail:"",type:"Book",mode:"template",spm:{factory:"c36318.d73298",guide:"c36329.d73338"}},{id:"travel",name:__("旅行攻略"),desc:__("行程单、预算、游记"),icon:"book-type-travel",book_icon:"book-type-travel",intro:__("行程单、预算、游记"),cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*QTUnQaJmAgMAAAAAAAAAAABkARQnAQ",detail:"",type:"Book",mode:"template",spm:{factory:"c36318.d73297",guide:"c36329.d73337"}}],group:[{id:"project",name:__("项目方案"),icon:"book-type-project",book_icon:"book-type-project",intro:"",desc:__("项目相关的所有文档"),cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*vAlXQIVsv8IAAAAAAAAAAABkARQnAQ",detail:"",type:"Book",mode:"template",spm:{factory:"c36318.d73302"}},{id:"manual",name:__("产品手册"),desc:__("规范形式的产品说明"),icon:"book-type-manual",book_icon:"book-type-manual",intro:"",cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*qHFuTYn2evsAAAAAAAAAAABkARQnAQ",detail:"",type:"Book",mode:"template",spm:{factory:"c36318.d73301"}},{id:"reports",name:__("团队周报"),desc:__("团队内约定的周总结"),icon:"book-type-reports",book_icon:"book-type-reports",intro:"",cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*RF7nTJJwxWEAAAAAAAAAAABkARQnAQ",detail:"",type:"Book",mode:"template",spm:{factory:"c36318.d73300"}},{id:"team_blog",name:__("团队博客"),desc:__("知识沉淀与经验分享"),icon:"book-type-blog",book_icon:"book-type-blog",intro:"",cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*WK-PQ5aEASwAAAAAAAAAAABkARQnAQ",detail:"",type:"Book",mode:"template",spm:{factory:"c36318.d74002"}}],publication:[{id:"publication_book",name:__("文档知识库"),desc:__("创作在线文档、表格"),icon:"book-type-default2",book_icon:"book-type-default",intro:__("提供结构化展示，在线完成知识创作。覆盖产品文档、项目文档、帮助手册、周报、个人笔记、旅行攻略、财务报表、报价单等场景。"),cover:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*0zoQT6wVAEMAAAAAAAAAAABkARQnAQ",detail:__("覆盖产品文档、项目文档、帮助手册、周报、个人笔记、旅行攻略、财务报表、报价单等场景"),help:"https://www.yuque.com/yuque/thyzgp/repository",type:"Book",mode:"custom",layout:a.BOOK_LAYOUT.Column,bookPublic:1,spm:{factory:"c36318.d73308"}}]},u=o()(Object.values(i)),l={SCENES:i,findById:function(e){return e?u.find((function(t){return t.id===e})):null},isTemplate:function(e){return"template"===e.mode}};t.a=l},function(e,t,r){"use strict";r(144);var n=r(60),o=r(0),a=r.n(o),i=r(2),u=r.n(i),l=r(74),c=r.n(l),s=r(1536);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){return a.a.createElement("span",{className:"larkui-feature-guide-sign",style:t,onClick:e,"data-testid":"feature-guide-sign"},a.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-outer"}),a.a.createElement("span",{className:"larkui-feature-guide-sign-spirit-inner"}))}function v(e){var t=e.type,r=void 0===t?"lite":t,i=e.tip,u=e.enableMultiLines,l=e.guideSignContainerStyle,f=y(Object(o.useState)(!0),2),d=f[0],h=f[1];if(!d)return null;var b=document.querySelector(e.containerSelector);if(!b)return null;var v=function(){h(!1),e.onRead()},g=function(){var t=b.querySelector(".larkui-feature-guide");if(t)return t;(t=document.createElement("div")).classList.add("larkui-feature-guide");if(t.classList.add({lite:"larkui-feature-guide-lite",mini:"larkui-feature-guide-mini",custom:"larkui-feature-guide-custom"}[r]),t.setAttribute("data-testid","feature-guide"),["lite","custom"].includes(r)){b.style.position="relative";var n=b.getBoundingClientRect();switch(e.placement){case"right":t.style.left="".concat(n.width+2,"px");break;case"left":t.style.left="-14px";break;case"top":t.style.bottom="".concat((e.offsetY?parseInt(e.offsetY,10):0)+n.height,"px"),t.style.left="".concat(n.width/2-6,"px");break;default:t.style.left="".concat((n.width-12)/2,"px"),t.style.bottom=e.offsetY||"0"}e.styleFix&&e.styleFix(t)}var o=e.readTrigger||[],a=function t(r){r.target.closest(".larkui-feature-guide")&&(r.preventDefault(),r.stopPropagation()),h(!1),e.onRead(),o.forEach((function(r){b.removeEventListener(r,e.closeGuide||t)}))};return o.forEach((function(t){b.addEventListener(t,e.closeGuide||a)})),b.appendChild(t),t}(),_=m(v,l),w=u?"larkui-feature-guide-lite-close-multi-line":"larkui-feature-guide-lite-close";if("mini"===r)return c.a.createPortal(_,g);var O="center"!==e.placement&&"top"!==e.placement;return"custom"===r?c.a.createPortal(a.a.createElement(e.customRender,p(p({},e),{},{sign:_,visible:d,arrowPointAtCenter:O,portalDom:g,onReadGuide:v,setVisible:h})),g):"lite"===r?c.a.createPortal(a.a.createElement(n.a,{overlayClassName:"larkui-feature-guide-lite-tip",arrowPointAtCenter:O,autoAdjustOverflow:!1,defaultVisible:!0,title:a.a.createElement(a.a.Fragment,null,u?a.a.createElement("div",{className:"larkui-feature-guide-content",onClick:v},i):a.a.createElement("span",{className:"larkui-feature-guide-lite-content"},a.a.createElement("strong",null,i)),a.a.createElement("span",{onClick:v,className:w},a.a.createElement(s.default,{width:16,height:16}))),placement:e.placement,visible:d,align:{targetOffset:[0,4]}},_),g):void 0}v.Mini=function(){return a.a.createElement("span",{className:"larkui-feature-guide-mini","data-testid":"standalone-mini-guide"},m((function(){})))},v.defaultProps={enableMultiLines:!1},v.propTypes={type:u.a.oneOf(["lite","mini","custom"]),tip:u.a.oneOfType([u.a.string,u.a.node]),containerSelector:u.a.string.isRequired,readTrigger:u.a.array,placement:u.a.oneOf(["bottomRight","bottomLeft","bottom","right","left","top"]),offsetY:u.a.string,onRead:u.a.func.isRequired,guideSignContainerStyle:u.a.object,enableMultiLines:u.a.bool,customRender:u.a.element,styleFix:u.a.func,closeGuide:u.a.func};t.a=v},,function(e,t,r){"use strict";var n=/["'&<>]/;e.exports=function(e){var t,r=""+e,o=n.exec(r);if(!o)return r;var a="",i=0,u=0;for(i=o.index;i<r.length;i++){switch(r.charCodeAt(i)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}u!==i&&(a+=r.substring(u,i)),u=i+1,a+=t}return u!==i?a+r.substring(u,i):a}},,,,,,,function(e,t,r){!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},r=e.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,o=function(){for(var e,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,o=r.length,a={};n<o;n++)if((e=r[n])&&e[1]in t){for(n=0;n<e.length;n++)a[r[0][n]]=e[n];return a}return!1}(),a={change:o.fullscreenchange,error:o.fullscreenerror},i={request:function(e){var r=o.requestFullscreen;e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[r]():e[r](n?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){t[o.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,r){var n=a[e];n&&t.addEventListener(n,r,!1)},off:function(e,r){var n=a[e];n&&t.removeEventListener(n,r,!1)},raw:o};o?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[o.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[o.fullscreenEnabled])}}}),r?e.exports=i:window.screenfull=i):r?e.exports=!1:window.screenfull=!1}()},,,,,function(e,t,r){"use strict";r(44);var n=r(10),o=r(0),a=r.n(o),i=r(2),u=r.n(i),l=r(3944);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(){s=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",y="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};f(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=p(e[o],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==c(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=h;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=p(t,r,n);if("normal"===c.type){if(o=n.done?m:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(c(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=f(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),f(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),f(j,l,"Generator"),f(j,i,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function f(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e){var t=e.doc,r=e.docDomain,i=e.type,u=d(Object(o.useState)(null),2),c=u[0],p=u[1],h=d(Object(o.useState)(!1),2),y=h[0],b=h[1],m=function(){var o,a=(o=s().mark((function o(){var a,u;return s().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.docVersionProxy.find({doc_id:t.id,doc_type:r,draft:"published"===i?0:1,limit:1});case 2:1===(a=o.sent).length?p(a[0]):(u="published"===i?__("文档尚未发布"):__("暂无历史记录，请先保存文档"),n.a.warning(u)),b(!1);case 5:case"end":return o.stop()}}),o)})),function(){var e=this,t=arguments;return new Promise((function(r,n){var a=o.apply(e,t);function i(e){f(a,r,n,i,u,"next",e)}function u(e){f(a,r,n,i,u,"throw",e)}i(void 0)}))});return function(){return a.apply(this,arguments)}}();return Object(o.useEffect)((function(){m()}),[]),y||!c?null:a.a.createElement(l.b,{version:c,docVersionProxy:e.docVersionProxy,onCancel:e.onCancel,onCreated:e.onCreated||function(e){n.a.success(__("保存版本成功，点击查看 {link}",{link:a.a.createElement("a",{href:"/r/doc_versions/".concat(e.id),target:"_blank","data-testid":"version-link"},e.name)}))}})}h.propTypes={doc:u.a.object.isRequired,docDomain:u.a.string.isRequired,type:u.a.oneOf(["draft","published"]),onCancel:u.a.func.isRequired,onCreated:u.a.func,docVersionProxy:u.a.object.isRequired},t.a=h},function(e,t,r){"use strict";r.d(t,"d",(function(){return i})),r.d(t,"a",(function(){return u})),r.d(t,"e",(function(){return l})),r.d(t,"c",(function(){return c})),r.d(t,"b",(function(){return s})),r.d(t,"f",(function(){return f}));var n=r(461);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=[{title:"应聘登记表",ques:"请帮我生成一个应聘登记表，包含姓名、性别、出生年月、籍贯、电话、住址、学历、应聘岗位、目前是否在职、最快到岗时间、对新工作的期望等信息。"},{title:"Outing 征集表",ques:"请帮我生成一个团建活动征集表。"},{title:"人员信息收集表",ques:"请帮我生成一个人员信息收集表。"},{title:"满意度调研",ques:"请帮我生成一个用户满意度收集表。"},{title:"用户反馈收集表",ques:"请帮我生成一个用户反馈收集表，用于收集用户使用语雀的情况和对语雀的改进建议，包含使用频率、使用场景、常用设备、反馈类型、改进建议、联系方式、其他补充等信息。"}],u={generateForm:n.AITableType.generateForm,generateTitle:n.AITableType.generateTitle,summaryTable:n.AITableType.summaryTable},l={user:"user",ai:"ai"},c={modelError:"modelError",netError:"netError",contentInvalid:"content invalid"},s=a(a(a({},c.modelError,__("作为一个人工智能语言模型，这个问题超出我目前的学习范围了，您可以问我其他问题，我将尽力为您解答")),c.netError,__("网络异常，请稍后重试")),c.contentInvalid,__("当前数据表内容过大，无法生成")),f=Object.keys(s)},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(3776),o=r(4120);function a(){var e=Object(n.b)();return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Object(o.b)(e);e.saveContent(r,{silent:t})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JobMode=void 0,function(e){e.User="user",e.Init="init",e.History="history",e.Auto="auto",e.Silent="silent",e.OT="ot"}(t.JobMode||(t.JobMode={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareNode=void 0;var n=r(3454);t.compareNode=function(e,t){var r={equal:!1,contains:!1,containedBy:!1,preceding:!1,following:!1};if(e===t)return r.equal=!0,r;if(e.isRootNode())return r.contains=!0,r;if(t.isRootNode())return r.containedBy=!0,r;for(var o=e.getPath(),a=t.getPath(),i=o.length,u=a.length,l=0,c=Math.min(i,u);l<c;l++){var s=o[l],f=a[l];if(s<f)return r.preceding=!0,r;if(s>f)return r.following=!0,r}return n.assert.fatal(i!==u,"invalid compare node, aPath=".concat(o,", bPath=").concat(a),"framework/kernel/src/model/utils/node/compare-node.ts:65"),o.length<a.length?r.contains=!0:r.containedBy=!0,r}},function(e,t,r){"use strict";function n(e,t,r){if(t&&!1===t(e))return!1;if(e.isElement())for(var o=e.children,a=0,i=o.length;a<i;a++)if(!1===n(o[a],t,r))return!1;return(!r||!1!==r(e))&&void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.walkNode=void 0,t.walkNode=function(e,t){var r=t.enter,o=t.leave;(r||o)&&n(e,r,o)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAtElementStart=void 0,t.isAtElementStart=function(e){var t=e.node,r=e.offset;if(t.isTextNode()){if(0!==r)return!1;r=t.offset}return 0===r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitElement=void 0;var n=r(3454),o=r(3560);t.splitElement=function(e,t){var r=t.node,a=t.offset;if(!r.isElement())return t;if(n.assert.fatal(!r.isCardNode(),"framework/kernel/src/model/utils/position/helpers/split-element.ts:13"),(0,o.isLikeEmptyElement)(r))return e.newPosition(r.parentNode,r.offset+1);if(0===a)return e.newPosition(r.parentNode,r.offset);if(a===r.childCount)return e.newPosition(r.parentNode,r.offset+1);var i=r.cloneNode(!1);return r.children.slice(a).forEach((function(t){e.appendChild(i,t)})),e.insertAfter(r.parentNode,i,r),e.newPosition(i.parentNode,i.offset)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitInlineNode=void 0;var n=r(3454),o=r(3459);t.splitInlineNode=function(e,t){var r=t.node,a=t.offset;return r.hasCategory(o.Category.Inline)?0===a?e.newPosition(r.parentNode,r.offset):a===r.childCount?e.newPosition(r.parentNode,r.offset+1):function(e,t,r){var o=t.cloneNode(!1);return t.children.slice(r).forEach((function(t){e.appendChild(o,t)})),n.assert.fatal(o.childCount>0&&t.childCount>0,"framework/kernel/src/model/utils/position/helpers/split-inline-node.ts:32"),e.insertAfter(t.parentNode,o,t),e.newPosition(o.parentNode,o.offset)}(e,r,a):t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THROUTH_INHERIT_ATTRS=t.INLINE_INHERIT_ATTRS=t.INHERIT_TYPES=t.INHERIT_TEXT=t.INHERIT_INLINE_CARD=void 0,t.INHERIT_INLINE_CARD="inlineCard",t.INHERIT_TEXT="text",t.INHERIT_TYPES=[t.INHERIT_TEXT,t.INHERIT_INLINE_CARD],t.INLINE_INHERIT_ATTRS=["fontsize","color","bgColor","bold","italic","strikethrough","underline"],t.THROUTH_INHERIT_ATTRS=["fontsize"]},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.insertText=void 0;var o=r(3454),a=n(r(3498)),i=r(3546);t.insertText=function(e,t,r,n){o.assert.fatal("string"==typeof r,"framework/kernel/src/model/utils/position/insert-text.ts:22");var u=t.node,l=t.offset,c=e.editing.kernel.getExtend("text_helper");if(c)return c.insertText(e,u,l,r,n);if(u.isTextNode())return e.setTextNodeData(u,a.default.insertString(u.data,l,r)),e.newPosition(u,l+a.default.size(r));var s=e.createTextNode(r,n);return e.insertByOffset(u,l,s),t=e.newPosition(s,a.default.size(r)),(0,i.verifyPosition)(t,i.AT_TEXT),t}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3454),a=n(r(4145)),i=r(3459),u=function(){function e(){}return Object.defineProperty(e,"createCardNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var u=e.createCardNode(t,r,n);if(e.hasCategory(t,i.Category.BlockCard)){var l=e.createHole(a.default.includes(t)?"rootCardHole":"hole",(null==r?void 0:r.hindent)?{indent:r.hindent}:{});return e.appendChild(l,u),l}return o.assert.fatal(e.hasCategory(t,i.Category.InlineCard),"framework/kernel/src/model/utils/card/card-helper.ts:30"),u}}),e}();t.default=u},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.isValidRange=void 0;var a=r(3454),i=-1,u=0,l=1;function c(e){var t=e.node,r=e.offset;return!(!t.isConnected||r<0)&&(0===r||(t.isTextNode()?r<=t.dataLength:t.isElement()?r<=t.childCount:(a.assert.fatal(t.isCardNode(),"framework/kernel/src/model/utils/range/is-valid-range.ts:46"),!1)))}t.isValidRange=function(e){var t=e.start,r=e.end,a=e.collapsed;return!!c(t)&&(!!a||!!c(r)&&function(e,t){for(var r=o(o([],n(e.node.getPath()),!1),[e.offset],!1),a=o(o([],n(t.node.getPath()),!1),[t.offset],!1),c=0,s=r.length;c<s;c++){var f=r[c],d=a[c];if(void 0===d)return l;if(f<d)return i;if(f>d)return l}if(r.length===a.length)return u;return i}(t,r)===i)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getTextSections=void 0;var o=r(3454),a=n(r(3498)),i=r(4424),u=r(3477),l=r(3459),c=function(){function e(){Object.defineProperty(this,"_sections",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_section",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_textFragment",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}return Object.defineProperty(e.prototype,"isStopped",{get:function(){return this._stopped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._stopped=!0}}),Object.defineProperty(e.prototype,"nextSection",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._section?o.assert.fatal(this._sections[this._sections.length-1]===this._section,"framework/kernel/src/model/utils/range/get-text-sections.ts:45"):o.assert.fatal(0===this._sections.length,"framework/kernel/src/model/utils/range/get-text-sections.ts:43"),this._section=[],this._textFragment=null,this._sections.push(this._section)}}),Object.defineProperty(e.prototype,"break",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._section||this.nextSection(),this._section.push(null),this.nextText()}}),Object.defineProperty(e.prototype,"nextText",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._textFragment=null}}),Object.defineProperty(e.prototype,"pushText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){this._section||this.nextSection(),this._textFragment||(this._textFragment={text:"",fragments:[]},this._section.push(this._textFragment)),this._textFragment.text=this._textFragment.text+e,this._textFragment.fragments.push({text:e,start:t,end:r})}}),Object.defineProperty(e.prototype,"getResult",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._sections}}),e}();function s(e,t,r,n){var u=r.node,c=r.offset;if(u.isTextNode())return function(e,t,r,n){var i=r.node,u=r.offset,l=n.node,c=n.offset;if(!i.isTextNode())return null;if(i===l)return o.assert.fatal(u<=c,"framework/kernel/src/model/utils/range/get-text-sections.ts:210"),e.pushText(a.default.substring(i.data,u,c),{node:i,offset:u},{node:i,offset:c}),e.stop(),null;return e.pushText(a.default.substring(i.data,u),{node:i,offset:u},{node:i,offset:i.dataLength}),t.newPosition(i.parentNode,i.offset+1)}(e,t,r,n);o.assert.fatal(u.isElement(),"framework/kernel/src/model/utils/range/get-text-sections.ts:135");var s,f=u.getChildByOffset(c);if(f)f.hasCategory(l.Category.BlockCard)?(e.nextSection(),s=t.newPosition(u,c+1)):f.isTextNode()?(e.nextText(),s=t.newPosition(f,0)):f.hasCategory(l.Category.InlineCard)?(e.break(),s=t.newPosition(u,c+1)):(o.assert.fatal(f.isElement(),"framework/kernel/src/model/utils/range/get-text-sections.ts:171"),f.hasCategory(l.Category.Block)?(e.nextSection(),s=t.newPosition(f,0)):s=t.newPosition(f,0));else{if(u.isRootNode())return e.stop(),null;s=t.newPosition(u.parentNode,u.offset+1)}return(0,i.comparePosition)(s,n)!==i.POS_BEFORE?(e.stop(),null):s}t.getTextSections=function(e,t){if((0,u.verifyRange)(t),t.collapsed)return[];var r=t.start,n=t.end,o=new c;return function(e,t,r,n){for(;!e.isStopped;)r=s(e,t,r,n)}(o,e,r,n),o.getResult()}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateAttribute=void 0;var o=r(3454),a=n(r(3497)),i=r(3631),u=r(3907),l=r(3905),c=r(3756),s=r(3630),f=r(3477),d=r(3459);function p(e,t,r,n){var o=e.defaultElementName;if(t.isEmpty()&&t.hasCategory([d.Category.Root,d.Category.LikeRoot])){var a,i=e.createElement(o);return e.appendChild(t,i),n&&(a=e.createTextNode(""),e.appendChild(i,a)),r.forEach((function(t){var r=t.name,n=t.value;e.acceptAttr(i.nodeName,r,n)&&e.setAttribute(i,r,n),a&&e.acceptAttr(a.nodeName,r,n)&&e.setAttribute(a,r,n)})),a?e.newPosition(a,0):e.newPosition(i,0)}if(n&&t.isEmpty()&&t.hasCategory(d.Category.TextContainer)){var u=e.createTextNode("");return e.appendChild(t,u),r.forEach((function(t){var r=t.name,n=t.value;u&&e.acceptAttr(u.nodeName,r,n)&&e.setAttribute(u,r,n)})),e.newPosition(u,0)}return null}t.updateAttribute=function(e,t,r,n){var h=t.collapsed;if(t.collapsed){var y=function(e,t,r,n){if(n){var o=a.default.closest(t.node,d.Category.Block);if(o&&o.hasCategory(n))return t}t=(0,s.splitTextNode)(e,t,s.SPLIT_TO_EMPTY_TEXT);var i=(0,c.getAncestors)(t.node),u=e.textAttrs,l=r.some((function(e){var t=e.name;return u.includes(t)}));return i.forEach((function(t){r.forEach((function(r){var n=r.name,o=r.value;e.acceptAttrName(t.nodeName,n)&&(null==o?e.removeAttribute(t,n):e.setAttribute(t,n,o))}))})),p(e,t.node,r,l)||t}(e,t.start,r,n);t=e.newRange(y)}else t=function(e,t,r,n){var o=[],a=[];return r.forEach((function(e){null!==e.value&&void 0!==e.value?o.push(e):a.push(e)})),t=(0,l.splitTextContent)(e,t),function(e,t,r,n){(0,i.fullWalkRange)(t,{enter:function(t){if(n&&t.hasCategory(d.Category.Block)&&t.hasCategory(n))return!1;r.forEach((function(r){var n=r.name;e.removeAttribute(t,n)}))}})}(e,t,a,n),function(e,t,r,n){var o=e.textAttrs,a=r.some((function(e){var t=e.name;return o.includes(t)}));(0,i.fullWalkRange)(t,{enter:function(t){if(n&&t.hasCategory(d.Category.Block)&&t.hasCategory(n))return!1;r.forEach((function(r){var n=r.name,o=r.value;e.acceptAttrName(t.nodeName,n)&&e.setAttribute(t,n,o)}))},leave:function(t){p(e,t,r,a)}})}(e,t,o,n),t}(e,t,r,n);return o.assert.fatal(h===t.collapsed,"framework/kernel/src/model/utils/range/update-attribute.ts:47"),(0,f.verifyRange)(t),(0,u.optimizeRange)(e,t)}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.breakBlockContent=t.FOCUS_BLOCK=t.FOCUS_BACKWARD=t.FOCUS_STANDALONE=t.FOCUS_FORWARD=void 0;var a=r(3454),i=o(r(3498)),u=r(3997),l=r(3546),c=o(r(3516)),s=r(3459);t.FOCUS_FORWARD=-1,t.FOCUS_STANDALONE=0,t.FOCUS_BACKWARD=1,t.FOCUS_BLOCK=2,t.breakBlockContent=function(e,r,o,f){if(a.assert.fatal(o===t.FOCUS_STANDALONE||o===t.FOCUS_BACKWARD||o===t.FOCUS_FORWARD||o===t.FOCUS_BLOCK,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:38"),a.assert.fatal(!r.node.isCardNode(),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:45"),f&&a.assert.fatal(!c.default.equal(r,f.position),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:49"),r.node.hasCategory([s.Category.Root,s.Category.LikeRoot,s.Category.TableHole,s.Category.Table,s.Category.Hole,s.Category.Card]))return r;if(a.assert.fatal(r.node.isTextNode()||r.node.hasCategory(s.Category.Block),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:65"),r.node.isTextNode()&&(r=function(e,t,r){var o=t.node,a=t.offset;if(!o.isTextNode())return t;if(a===o.dataLength)return e.newPosition(o.parentNode,o.offset+1);if(0===a)return e.newPosition(o.parentNode,o.offset);var u=n(i.default.splitString(o.data,a),2),l=u[0],s=u[1],f=o.cloneNode(!1);e.setTextNodeData(o,l),e.setTextNodeData(f,s),e.insertAfter(o.parentNode,f,o),r&&function(e,t,r){var n=e.node,o=e.offset,a=r.position,i=a.node,u=a.offset;if(i===n){if(u<=o)return;r.position=new c.default(t,u-o)}else if(i===n.parentNode){if(u<=n.offset)return;r.position=new c.default(i,u+1)}}(t,f,r);return e.newPosition(f.parentNode,f.offset)}(e,r,f)),a.assert.fatal(!r.node.isTextNode(),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:73"),r.node.hasCategory(s.Category.Inline))r=(0,u.splitInlineNode)(e,r);else{if(r.node.isEmpty())return r;a.assert.fatal(r.node.firstChild.isTextNode()||r.node.firstChild.hasCategory(s.Category.Inline)||r.node.firstChild.isCardNode(),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:82")}return a.assert.fatal(r.node.hasCategory(s.Category.Block),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:89"),o===t.FOCUS_BLOCK?(a.assert.fatal(r.node.hasCategory(s.Category.Block),"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:92"),r):o===t.FOCUS_FORWARD?(a.assert.fatal(!f,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:99"),function(e,t){var r=t.node,n=t.offset,o=r.getChildByOffset(n-1);if(o)return o.isCardNode()&&a.assert.fatal(!1,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:158"),e.newPosition(o,o.dataLength);o=r.getChildByOffset(n),a.assert.fatal(o,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:166"),o.isCardNode()&&a.assert.fatal(!1,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:169");if(o.isEmpty())return e.newPosition(o,0);var i=o.cloneNode(!1);return e.setTextNodeData(i,""),e.insertBefore(o.parentNode,i,o),e.newPosition(i,0)}(e,r)):o===t.FOCUS_BACKWARD?(a.assert.fatal(!f,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:105"),function(e,t){var r=t.node,n=t.offset,o=r.getChildByOffset(n);if(o&&!o.isCardNode())return e.newPosition(o,0);if(!(o=r.getChildByOffset(n-1)))return t;if(a.assert.fatal(o,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:201"),o.isCardNode())return t;if(o.isEmpty())return e.newPosition(o,0);var i=o.cloneNode(!1);return e.setTextNodeData(i,""),e.insertAfter(o.parentNode,i,o),e.newPosition(i,0)}(e,r)):(a.assert.fatal(o===t.FOCUS_STANDALONE,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:109"),r=function(e,t,r){var n=t.node,o=t.offset,i=n.getChildByOffset(o)||n.getChildByOffset(o-1);if(a.assert.fatal(i,"framework/kernel/src/model/utils/position/helpers/break-block-content.ts:228"),i.isEmpty())return e.newPosition(i,0);i=i.cloneNode(!1),e.setTextNodeData(i,""),e.insertByOffset(n,o,i),r&&r.node===n&&r.offset>o&&(r.position=e.newPosition(n,r.offset+1));return e.newPosition(i,0)}(e,r,f),(0,l.verifyPosition)(r),r)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.unwrapNode=void 0;var o=r(3631),a=n(r(3713)),i=r(3477);t.unwrapNode=function(e,t,r){var n=e.createElement("*"),u=n.cloneNode(!1),l=!t.start.node.isTextNode(),c=!t.end.node.isTextNode(),s=t.start,f=t.end;c&&a.default.insertNodeToOffset(f.node,f.offset,u),l&&a.default.insertNodeToOffset(s.node,s.offset,n),c&&(f=e.newPosition(u.parentNode,u.offset+1)),l&&(s=e.newPosition(n.parentNode,n.offset));var d=[];return(0,o.fullWalkRange)(e.newRange(s,f),{enter:function(e){e.nodeName===r&&d.push(e)}}),d.forEach((function(t){!function(e,t){var r=t.parentNode,n=t.children,o=t.offset;n.reverse().forEach((function(t){e.insertByOffset(r,o,t)})),e.removeChild(r,t)}(e,t)})),s=t.start,f=t.end,l&&(s=e.newPosition(n.parentNode,n.offset),a.default.removeChild(n)),c&&(f=e.newPosition(u.parentNode,u.offset),a.default.removeChild(u)),t=e.newRange(s,f),(0,i.verifyRange)(t),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseToRowLayout=void 0;var n=r(3454),o=r(3511),a=r(3459);t.parseToRowLayout=function(e){n.assert.fatal(e.length>1,"framework/kernel/src/model/utils/table/parse-to-row-layout.ts:23");var t={},r=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER,c=e[0].start.node.parentNode.parentNode;e.forEach((function(e){var o=e.start.node;n.assert.fatal(o.hasCategory(a.Category.TableCell),"framework/kernel/src/model/utils/table/parse-to-row-layout.ts:36");var c=o.parentNode.offset,s=o.attrs.col,f=o.attrs.rowSpan||1,d=o.attrs.colSpan||1;t[c]||(t[c]={}),n.assert.fatal(!t[c][s],"framework/kernel/src/model/utils/table/parse-to-row-layout.ts:47"),t[c][s]=e,r=Math.min(r,c),i=Math.max(i,c+f-1),u=Math.min(u,s),l=Math.max(l,s+d-1)})),n.assert.fatal(r>=0&&u>=0,"framework/kernel/src/model/utils/table/parse-to-row-layout.ts:57"),n.assert.fatal(i<c.attrs.rowCount&&l<c.attrs.colCount,"framework/kernel/src/model/utils/table/parse-to-row-layout.ts:58");for(var s=[],f=r;f<=i;f++){for(var d=[],p=(0,o.cloneObject)(c.children[f].attrs),h=u;h<=l;h++){var y=(t[f]||{})[h];y&&d.push({range:y,colIndex:h-u})}s.push({attrs:p,cells:d})}return n.assert.fatal(s.length,"framework/kernel/src/model/utils/table/parse-to-row-layout.ts:87"),{minCol:u,maxCol:l,minRow:r,maxRow:i,rowLayout:s,colWidths:c.attrs.colWidths.slice(u,l+1)}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isFullSelectTable=void 0;var o=n(r(3497)),a=r(3629);t.isFullSelectTable=function(e,t){var r=Array.isArray(t)?t:t.ranges;if(r.length>1){var n=o.default.closest(r[0].start.node,a.Category.TableCell),i=o.default.closest(r[r.length-1].end.node,a.Category.TableCell);if(!(n&&i&&n.parentNode&&i.parentNode))return!1;var u=n.parentNode.parentNode;return!!u&&(0===n.parentNode.offset&&i.parentNode.offset+(i.attrs.rowSpan||1)===u.childCount&&i.attrs.col+(i.attrs.colSpan||1)-n.attrs.col===u.attrs.colCount)}return 1===e.attrs.rowCount&&1===e.attrs.colCount}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextNodeName=t.CardNodeName=t.RootNodeName=void 0,t.RootNodeName="#root",t.CardNodeName="#card",t.TextNodeName="#text"},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.addOperation=t.OperationDataMapKey=void 0;var a=o(r(4166)),i=o(r(4167)),u=o(r(4168)),l=o(r(4169)),c=o(r(4170)),s=o(r(4171)),f=o(r(4172));function d(e,t){e.editing.emit("nodechange",{type:"children",job:e,node:t})}function p(e,t){e.editing.emit("nodechange",n({type:"attribute",job:e},t))}function h(e,t,r){e.editing.emit("nodechange",{type:r,job:e,node:t})}t.OperationDataMapKey={Move:"document.node.move",Insert:"document.node.insert",Remove:"document.node.remove",UpdateText:"document.node.text.change",AddAttr:"document.node.attr.add",UpdateAttr:"document.node.attr.change",RemoveAttr:"document.node.attr.remove"},t.addOperation=function(e,r){if(r){var n,o=r.type;if(o===t.OperationDataMapKey.Move){var y=r.data;n=new i.default(e.mode,y.parentNode,y.oldParent,y.childNode,y.offset,y.oldOffset,y.realOffset)}else if(o===t.OperationDataMapKey.Insert){y=r.data;n=new a.default(e.mode,y.parentNode,y.childNode,y.offset)}else if(o===t.OperationDataMapKey.Remove){y=r.data;n=new u.default(e.mode,y.parentNode,y.childNode,y.offset)}else if(o===t.OperationDataMapKey.UpdateText){y=r.data;n=new f.default(e.mode,y.node,y.text,y.oldText)}else if(o===t.OperationDataMapKey.AddAttr){y=r.data;n=new l.default(e.mode,y.node,y.name,y.value)}else if(o===t.OperationDataMapKey.UpdateAttr){y=r.data;n=new s.default(e.mode,y.node,y.name,y.value,y.oldValue)}else{if(o!==t.OperationDataMapKey.RemoveAttr)throw new Error("invalid operation type");y=r.data;n=new c.default(e.mode,y.node,y.name,y.value)}e._unSyncOperations.push(n),function(e,r){var n=r.type;if(n===t.OperationDataMapKey.Move){h(e,(o=r.data).childNode,"remove"),d(e,o.oldParent),h(e,o.childNode,"insert"),d(e,o.parentNode)}else if(n===t.OperationDataMapKey.Insert){h(e,(o=r.data).childNode,"insert"),d(e,o.parentNode)}else if(n===t.OperationDataMapKey.Remove){h(e,(o=r.data).childNode,"remove"),d(e,o.parentNode)}else if(n===t.OperationDataMapKey.UpdateText){!function(e,t){e.editing.emit("nodechange",{type:"text",job:e,node:t})}(e,(o=r.data).node)}else if(n===t.OperationDataMapKey.AddAttr){p(e,{subType:"add",node:(o=r.data).node,attrName:o.name,value:o.value})}else if(n===t.OperationDataMapKey.UpdateAttr){p(e,{subType:"update",node:(o=r.data).node,attrName:o.name,oldValue:o.oldValue,value:o.value})}else{if(n!==t.OperationDataMapKey.RemoveAttr)throw new Error("invalid operation type");var o;p(e,{subType:"remove",node:(o=r.data).node,attrName:o.name,oldValue:o.value})}}(e,r)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateHashID=void 0;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t.generateHashID=function(){for(var e="",t=n.charAt(Math.floor(52*Math.random())),r=1;r<5;r++)e+=o.charAt(Math.floor(62*Math.random()));return t+e}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3465),u=r(3457),l=r(3459),c=a(r(3841)),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_nodeName",{enumerable:!0,configurable:!0,writable:!0,value:""}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();if(t.isTableSelection)return i.COMMAND_UNAVAILABLE;var r=t.firstRange;if(r.collapsed)return i.COMMAND_UNAVAILABLE;var n=t.firstRange,o=n.start,a=n.end;if(o.node.closest(l.Category.OnlyText)||a.node.closest(l.Category.OnlyText))return i.COMMAND_UNAVAILABLE;var u=r.start.node.closest(l.Category.Block),s=r.end.node.closest(l.Category.Block);if(!u||u!==s)return i.COMMAND_UNAVAILABLE;var f=this._nodeName,d=r.start.node.closest(l.Category.Inline);if(d&&!e.acceptNode(d.nodeName,f))return i.COMMAND_UNAVAILABLE;var p=r.end.node.closest(l.Category.Inline);if(p&&!e.acceptNode(p.nodeName,f))return i.COMMAND_UNAVAILABLE;var h=(r=c.default.enlargeRangeToCommonAncestor(e,r)).commonAncestorContainer;for(h.isTextNode()&&(h=h.parentNode);h!==u;){if(!e.acceptNode(h.nodeName,f))return i.COMMAND_UNAVAILABLE;h=h.parentNode}var y=!0;return c.default.walkRange(r,(function(t){y&&(e.acceptNode(f,t.nodeName)||(y=!1))})),y?i.COMMAND_NOT_EXECUTED:i.COMMAND_UNAVAILABLE}}),t}(u.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3453),a=r(3454),i=n(r(3498)),u=function(){function e(e,t,r,n){void 0===n&&(n=function(){return!0}),Object.defineProperty(this,"_editing",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_handler",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"canInsertPosition",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_matchPattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_excludePattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t instanceof RegExp?this._matchPattern=t:(this._matchPattern=t.match,this._excludePattern=t.exclude)}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._editing,delete this._matchPattern,delete this._excludePattern,delete this._handler}}),Object.defineProperty(e.prototype,"match",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!this.canInsertPosition(t))return null;var r,n=e[e.length-1];if(!n)return null;if((0,a.assert)(1===n.fragments.length,"plugins/markdown/src/public/pattern-markdown-matcher.ts:79"),!(r=this._matchPattern instanceof RegExp?this._matchPattern.exec(n.text):this._matchPattern(n.text)))return null;if(this._excludePattern&&this._excludePattern.test(n.text))return null;var i=o.NodeUtil.closest(n.fragments[0].start.node,o.Category.Block);return(0,a.assert)(i,"plugins/markdown/src/public/pattern-markdown-matcher.ts:102"),{section:e,blockNode:i,matched:r}}}),Object.defineProperty(e.prototype,"exec",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._editing.newJob(o.JobMode.User),r=e.section,n=e.blockNode,a=e.matched,u=r[r.length-1].fragments[0].start.node;try{t.setTextNodeData(u,i.default.deleteString(u.data,a.index,a.index+a[0].length)),this._handler(t,n,u,e),this._editing.commitJob(t)}catch(e){this._editing.cancelJob(t)}}}),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMAGE_FROM_ENUM=t.IMAGE_ORIGINAL_TYPE_ENUM=t.IMAGE_STATUS_ENUM=t.IMAGE_STATUS_ERROR=t.IMAGE_STATUS_DONE=t.IMAGE_STATUS_UPLOADING=t.IMAGE_STATUS_PENDING=void 0,t.IMAGE_STATUS_PENDING="pending",t.IMAGE_STATUS_UPLOADING="uploading",t.IMAGE_STATUS_DONE="done",t.IMAGE_STATUS_ERROR="error",function(e){e.PENDING="pending",e.UPLOADING="uploading",e.DONE="done",e.ERROR="error"}(t.IMAGE_STATUS_ENUM||(t.IMAGE_STATUS_ENUM={})),function(e){e.binary="binary",e.url="url",e.file="file",e.base64="base64"}(t.IMAGE_ORIGINAL_TYPE_ENUM||(t.IMAGE_ORIGINAL_TYPE_ENUM={})),function(e){e.init="init",e.paste="paste",e.drop="drop",e.ui="ui",e.materialLibrary="materialLibrary"}(t.IMAGE_FROM_ENUM||(t.IMAGE_FROM_ENUM={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LakeAttrReader=void 0;var n=function(){};t.LakeAttrReader=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LakeStyleReader=void 0;var n=function(){};t.LakeStyleReader=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttrTranslator=void 0;var n=r(4201),o=function(){function e(){}return Object.defineProperty(e,"STYLE_NAME",{enumerable:!0,configurable:!0,writable:!0,value:n.TYPE_STYLE_NAME}),Object.defineProperty(e,"ATTR_NAME",{enumerable:!0,configurable:!0,writable:!0,value:n.TYPE_ATTR_NAME}),Object.defineProperty(e,"CUSTOM_NAME",{enumerable:!0,configurable:!0,writable:!0,value:n.TYPE_CUSTOM_NAME}),e}();t.AttrTranslator=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.elementNextNode=t.reduceSelection=void 0;var n=r(3453),o=r(3454),a=r(4176),i=r(3477);function u(e){for((0,o.assert)(e.isElement(),"plugins/clipboard/src/common/reduce-selection.ts:48");e&&!e.isRootNode();){if(e.nextSibling)return e.nextSibling;e=e.parent}return null}t.reduceSelection=function(e,t){return t.cloneByRange(t.ranges.map((function(t){var r=t.start,o=r.node,l=r.offset,c=t.end;if(!t.collapsed&&o.isElement()&&o.childCount===l){var s=u(o);if(s){var f=n.Range.createAt(new n.Position(s,0),c);return(0,i.verifyRange)(f),(0,a.normalizeRange)(e,f)}}return t})))},t.elementNextNode=u},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.wordCount=void 0;var a=/[\u0100-\uffff]+/g,i=/--+/g,u=/\s+/;t.wordCount=function(e){if(!e)return 0;var t=0;return(e=(e=e.replace(a,(function(e){return e.codePointAt(0)>127?(t+=o([],n(e),!1).length," "):e})).replace(i,(function(e,r,n){return u.test(n[r-1])&&t++," "}))).trim())&&(t+=e.split(u).length),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"dropFile",command:{dropFile:"dropFile"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_FONTSIZES=void 0,t.DEFAULT_FONTSIZES=[12,13,14,15,16,19,22,24]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"htmlDataSource"})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INDENT_BLACKLIST=t.MAX_INDENT=void 0,t.MAX_INDENT=8,t.INDENT_BLACKLIST=["columns"]},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(3464)),l=i(r(4192)),c=i(r(3512)),s=r(4732),f=r(3924),d=function(e){function t(r){return e.call(this,(0,u.default)({},t.DefaultCardValue,r))||this}return o(t,e),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=(0,u.default)({},t.DefaultCardValue,e);return(null==r?void 0:r.label)&&(r.label=l.default.decodeHTML(r.label)),r}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return a(a({},e),{label:(null==e?void 0:e.label)?l.default.encodeHTML(e.label):void 0})}}),Object.defineProperty(t.prototype,"getLabel",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.label}}),Object.defineProperty(t.prototype,"setLabel",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.label=e}}),Object.defineProperty(t.prototype,"getColorIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.colorIndex||0}}),Object.defineProperty(t.prototype,"setColorIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.colorIndex=e}}),Object.defineProperty(t.prototype,"getStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e||this._cardValue,r=t.colorIndex,n=t.label;return{background:"var(".concat((0,f.toCssValueName)("label.".concat(s.COLOR_NAMES[r],".bg")),")"),color:"var(".concat((0,f.toCssValueName)("label.".concat(s.COLOR_NAMES[r],".text")),")"),opacity:n?1:.45}}}),Object.defineProperty(t.prototype,"getHtmlStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e||this._cardValue,r=t.colorIndex,n=t.label;return{background:s.LABEL_COLORS["label.".concat(s.COLOR_NAMES[r],".bg")].light,color:s.LABEL_COLORS["label.".concat(s.COLOR_NAMES[r],".text")].light,opacity:n?1:.45}}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{label:void 0,colorIndex:0}}),t}(c.default);t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COLLAPSE_WIDTH=t.SCROLLBAR_WIDTH=t.SIDEBAR_WIDTH=t.TOC_WIDTH=t.H_SPACE=t.STANDARD_AREA_WIDTH=t.LAYOUT_ADAPT=t.LAYOUT_FIXED=void 0,t.LAYOUT_FIXED="fixed",t.LAYOUT_ADAPT="adapt",t.STANDARD_AREA_WIDTH=750,t.H_SPACE=40,t.TOC_WIDTH=305,t.SIDEBAR_WIDTH=305,t.SCROLLBAR_WIDTH=15,t.COLLAPSE_WIDTH=500+2*t.H_SPACE},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"kernelAssistant",service:{IKernelAssistantService:"IKernelAssistantService"}})},function(e,t,r){"use strict";var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.LIST_LABEL=t.LIST_ICONS=t.NAME_MAP=t.LIST_NAMES=t.INDEX_TYPE_CHANGE_EVENT=t.LIST_INDEX_ATTR_NAMES=t.MAX_LIST_LEVEL=void 0;var a=r(3721),i=r(3478);t.MAX_LIST_LEVEL=8,t.LIST_INDEX_ATTR_NAMES=["bold","italic","fontsize","color"],t.INDEX_TYPE_CHANGE_EVENT="headingIndexTypeChange",t.LIST_NAMES=[i.pluginRegister.node.oli,i.pluginRegister.node.tli,i.pluginRegister.node.uli],t.NAME_MAP={orderedList:i.pluginRegister.node.oli,unorderedList:i.pluginRegister.node.uli,taskList:i.pluginRegister.node.tli},t.LIST_ICONS=((n={})[i.pluginRegister.node.oli]={mainIcon:"editor-main-ordered-list",icon:"t-order-list"},n[i.pluginRegister.node.uli]={mainIcon:"editor-main-unordered-list",icon:"t-unorder-list"},n[i.pluginRegister.node.tli]={mainIcon:"editor-main-task-list",icon:"t-task-list"},n),t.LIST_LABEL=(o={},Object.defineProperty(o,i.pluginRegister.node.oli,{get:function(){return(0,a.i18n)("有序列表")},enumerable:!1,configurable:!0}),Object.defineProperty(o,i.pluginRegister.node.uli,{get:function(){return(0,a.i18n)("无序列表")},enumerable:!1,configurable:!0}),Object.defineProperty(o,i.pluginRegister.node.tli,{get:function(){return(0,a.i18n)("任务列表")},enumerable:!1,configurable:!0}),o)},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=r(3453),c=r(3453),s=r(3454),f=r(3591),d=r(3513),p=r(3465),h=u(r(4244)),y=r(3478),b=r(3764),m=function(e){function t(t,r,n,o){var a=e.call(this,t,r,n)||this;return Object.defineProperty(a,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(a,"editing",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(a,"_nodeName",{enumerable:!0,configurable:!0,writable:!0,value:o}),a}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(e.prototype.getState.call(this,t)===p.COMMAND_UNAVAILABLE)return p.COMMAND_UNAVAILABLE;var r=t.getSelection().firstRange,n=r.start,o=r.end;return n.node.closest(l.Category.OnlyText)||o.node.closest(l.Category.OnlyText)?p.COMMAND_UNAVAILABLE:this.getValue(t)===this._nodeName?p.COMMAND_EXECUTED:p.COMMAND_NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._getNodes(e);if(!t)return null;var r=new Set;return t.forEach((function(e){return r.add(e.nodeName)})),1!==r.size?null:Array.from(r)[0]}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r){var n,o,a=this,u=e.newJob(),l=u.getSelection();if(this._nodeName===y.pluginRegister.node.oli){var s=h.default.isHeadingSelection(l);if(s){void 0===r&&(r=(0,b.getLastHeadingIndexType)());var d=s.every((function(e){return e.attrs.indexType===r}));try{for(var p=i(s),m=p.next();!m.done;m=p.next()){var w=m.value;d?u.removeAttribute(w,"indexType"):h.default.setBlockNodeIndexType(u,w,r)}}catch(e){n={error:e}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}return u.setSelection(l),void e.commitJob(u)}void 0!==r&&(0,b.setLastIndexType)(r)}void 0===r&&(r=(0,b.getLastIndexType)());var O=l;if(this.getState(u)===t.NOT_EXECUTED)O=c.SelectionUtil.replaceBlockNode(u,l,u.createElement(this._nodeName,this._nodeName===y.pluginRegister.node.oli?{list:(0,f.generateNodeId)(),indexType:r}:{list:(0,f.generateNodeId)()}),(function(e,t,n){var o=function(e,t,r){g(e,t,r,_)}(e,t,n);return a._nodeName===y.pluginRegister.node.oli&&e.setAttribute(t,y.pluginRegister.attr.indexType,r),o}),!0);else{var E=this._getNodes(u);E&&E[0].nodeName===y.pluginRegister.node.oli&&E[0].attrs.indexType!==r?E.forEach((function(e){u.setAttribute(e,y.pluginRegister.attr.indexType,r)})):O=c.SelectionUtil.replaceBlockNode(u,l,u.createElement(u.defaultElementName),v,!0)}return u.setSelection(O),e.commitJob(u),!0}}),Object.defineProperty(t.prototype,"_getNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._nodeName,r=new Set,n=!1;return c.SelectionUtil.fullWalkSelection(e.getSelection(),{enter:function(e){return!n&&(e.hasCategory(l.Category.TextContainer)?(s.assert.fatal(e.isElement(),"plugins/list/src/kernel/commands/list-command.ts:167"),e.hasCategory(t)?r.add(e):c.NodeUtil.isLikeEmptyElement(e)||(n=!0),!1):void 0)}}),n?null:Array.from(r)}}),t}(d.GeneralCommandV2);function v(e,t,r){g(e,t,r,w)}function g(e,t,r,n){if(r.attrs){var o=a({},r.attrs);n(e,o,t),Object.keys(o).forEach((function(r){var n=o[r];e.acceptAttr(t.nodeName,r,n)&&e.setAttribute(t,r,n)}))}}function _(e,t,r){var n=(t.textIndent||0)+(t.indent||0);0!==n&&(e.setAttribute(r,y.pluginRegister.attr.level,n),delete t.textIndent,delete t.indent)}function w(e,t,r){t.level&&(e.setAttribute(r,"indent",t.level),delete t.level)}t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"selectAll",command:{selectAll:"selectAll",selectAllDoc:"selectAllDoc"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"slash",toolbar:{cardSelect:"cardSelect"},command:{insertSlash:"insertSlash",canInsertSlash:"canInsertSlash"},node:{slash:"slash"}})},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fixTableINode=void 0;var o=n(r(3458)),a=n(r(4901));t.fixTableINode=function(e){var t=e.children,r=void 0===t?[]:t;return!!r&&(r.forEach((function(t){"tr"!==t.name?o.default.removeChild(e,t):t.children&&t.children.forEach((function(e){"td"!==e.name&&o.default.removeChild(t,e)}))})),function(e){var t=e.children;if(!(null==t?void 0:t.length))return!1;var r=new a.default;t.forEach((function(e,t){var n=e.children||[];r.addRow(t),n.forEach((function(e){r.addCellNode(t,e)}))}));var n=r.fix(e),i=n.rowCount,u=n.colWidths,l=n.colCount;if(0===l)return!1;return o.default.setAttribute(e,{rowCount:i,colCount:l,colWidths:u}),!0}(e))}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"_status",{enumerable:!0,configurable:!0,writable:!0,value:t.STATUS_PENDING}),r}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.removeAllListeners()}}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"abort",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"getStatus",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._status}}),Object.defineProperty(t.prototype,"isPending",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._status===t.STATUS_PENDING}}),Object.defineProperty(t.prototype,"isRunning",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._status===t.STATUS_RUNNING}}),Object.defineProperty(t.prototype,"isSuccess",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._status===t.STATUS_SUCCESS}}),Object.defineProperty(t.prototype,"isAborted",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._status===t.STATUS_ABORTED}}),Object.defineProperty(t.prototype,"isError",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._status===t.STATUS_ERROR}}),Object.defineProperty(t.prototype,"isTimeout",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._status===t.STATUS_TIMEOUT}}),Object.defineProperty(t.prototype,"isCompleted",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.isSuccess()||this.isError()||this.isAborted()}}),Object.defineProperty(t.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];switch(r){case t.EVENT_START:this._status=t.STATUS_RUNNING;break;case t.EVENT_SUCCESS:this._status=t.STATUS_SUCCESS;break;case t.EVENT_ERROR:this._status=t.STATUS_ERROR;break;case t.EVENT_ABORTED:this._status=t.STATUS_ABORTED;break;case t.EVENT_TIMEOUT:this._status=t.STATUS_TIMEOUT}return e.prototype.emit.apply(this,i([r],a(n),!1)),!1}}),Object.defineProperty(t.prototype,"on",{enumerable:!1,configurable:!0,writable:!0,value:function(r,n){return r===t.EVENT_TIMEOUT&&this.isTimeout()?setTimeout((function(){n()}),100):e.prototype.on.call(this,r,n),this}}),Object.defineProperty(t,"STATUS_PENDING",{enumerable:!0,configurable:!0,writable:!0,value:"pending"}),Object.defineProperty(t,"STATUS_RUNNING",{enumerable:!0,configurable:!0,writable:!0,value:"running"}),Object.defineProperty(t,"STATUS_SUCCESS",{enumerable:!0,configurable:!0,writable:!0,value:"success"}),Object.defineProperty(t,"STATUS_ERROR",{enumerable:!0,configurable:!0,writable:!0,value:"error"}),Object.defineProperty(t,"STATUS_ABORTED",{enumerable:!0,configurable:!0,writable:!0,value:"aborted"}),Object.defineProperty(t,"STATUS_TIMEOUT",{enumerable:!0,configurable:!0,writable:!0,value:"timeout"}),Object.defineProperty(t,"EVENT_START",{enumerable:!0,configurable:!0,writable:!0,value:"start"}),Object.defineProperty(t,"EVENT_PROGRESS",{enumerable:!0,configurable:!0,writable:!0,value:"progress"}),Object.defineProperty(t,"EVENT_SUCCESS",{enumerable:!0,configurable:!0,writable:!0,value:"success"}),Object.defineProperty(t,"EVENT_ERROR",{enumerable:!0,configurable:!0,writable:!0,value:"error"}),Object.defineProperty(t,"EVENT_ABORTED",{enumerable:!0,configurable:!0,writable:!0,value:"aborted"}),Object.defineProperty(t,"EVENT_TIMEOUT",{enumerable:!0,configurable:!0,writable:!0,value:"timeout"}),t}(u(r(3320)).default);t.default=l},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextWriter=t.TextDataSourcePlugin=t.ITextDataSourceKernelService=t.pluginRegister=void 0;var o=r(3926);Object.defineProperty(t,"pluginRegister",{enumerable:!0,get:function(){return o.pluginRegister}});var a=r(3601);Object.defineProperty(t,"ITextDataSourceKernelService",{enumerable:!0,get:function(){return a.ITextDataSourceKernelService}});var i=n(r(4257));t.TextDataSourcePlugin=i.default;var u=n(r(3639));t.TextWriter=u.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"search",toolbar:"search",command:{search:"search",replaceText:"replaceText",replaceAll:"replaceAll"},service:{ISearchService:"ISearchService"}})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(97)),u=a(r(3464)),l=r(3511),c=a(r(3512)),s=r(3518),f=r(4282),d={status:"pending",audioInfo:{id:null,fileName:null,fileSize:null},allowDownloadInViewer:!1,errorMessage:null,taskId:null},p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getInitCardValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n=(0,l.cloneObject)(d);return e&&(n.taskId=e.id,n.audioInfo={},e.file&&(n.audioInfo.fileName=null!==(t=e.file.name)&&void 0!==t?t:d.audioInfo.fileName,n.audioInfo.fileSize=null!==(r=e.file.size)&&void 0!==r?r:d.audioInfo.fileSize,n.status=f.TYPE_PENDING)),c.default.setCardSpacingToValue(s.CARD_SPACING_BOTH,n)}}),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=(0,l.cloneObject)(t.DefaultCardValue);return"done"===e.status||"uploaded"===e.status?r.status=f.TYPE_UPLOADED:r.status=e.status,r.audioInfo=r.audioInfo||{},r.audioInfo.id=e.audioId,r.audioInfo.fileName=e.fileName,r.audioInfo.fileSize=e.fileSize,r.taskId=e.taskId,r.errorMessage=e.message,r.allowDownloadInViewer=e.download,r}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return{status:e.status,audioId:(0,i.default)(e,"audioInfo.id"),fileName:(0,i.default)(e,"audioInfo.fileName"),fileSize:(0,i.default)(e,"audioInfo.fileSize"),taskId:(0,i.default)(e,"tasId"),message:(0,i.default)(e,"errorMessage"),download:(0,i.default)(e,"allowDownloadInViewer")}}}),Object.defineProperty(t,"fromRepository",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.copiedFileInfo,r={status:f.TYPE_UPLOADED,source:"transfer",audioInfo:{id:t.video_id,fileSize:t.size,fileName:t.filename}};return c.default.setCardSpacingToValue(s.CARD_SPACING_BOTH,(0,u.default)({},d,r))}}),Object.defineProperty(t.prototype,"getTaskId",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.taskId}}),Object.defineProperty(t.prototype,"getAudioInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.audioInfo}}),Object.defineProperty(t.prototype,"setAudioInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.audioInfo=e}}),Object.defineProperty(t.prototype,"getStatus",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.status}}),Object.defineProperty(t.prototype,"setStatus",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.status=e}}),Object.defineProperty(t.prototype,"getErrorMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.errorMessage}}),Object.defineProperty(t.prototype,"setErrorMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.errorMessage=e}}),Object.defineProperty(t.prototype,"getAllowDownloadInViewer",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.allowDownloadInViewer}}),Object.defineProperty(t.prototype,"setAllowDownloadInViewer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.allowDownloadInViewer=e}}),Object.defineProperty(t.prototype,"getFileName",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;return null===(e=this._cardValue.audioInfo)||void 0===e?void 0:e.fileName}}),Object.defineProperty(t.prototype,"setFileName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.audioInfo.fileName=e}}),Object.defineProperty(t.prototype,"getFileSize",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;return null===(e=this._cardValue.audioInfo)||void 0===e?void 0:e.fileSize}}),Object.defineProperty(t.prototype,"setFileSize",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.audioInfo.fileSize=e}}),Object.defineProperty(t.prototype,"getId",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;return null===(e=this._cardValue.audioInfo)||void 0===e?void 0:e.id}}),Object.defineProperty(t.prototype,"setId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.audioInfo.id=e}}),Object.defineProperty(t.prototype,"isCompleted",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._cardValue,t=e.status,r=e.audioInfo;return!!(null==r?void 0:r.id)||t!==f.TYPE_PENDING&&t!==f.TYPE_UPLOADING}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:d}),t}(c.default);t.default=p},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getValidDate=void 0;var o=n(r(3721));function a(e){return e<10?"0".concat(e):e}t.default=function(e){var t=new Date,r=new Date(e),n=r.getFullYear(),i=r.getMonth()+1,u=r.getDate();return t.getFullYear()===n?"enUS"===o.default.getLanguage()?"".concat(a(i),"-").concat(a(u)):"".concat(a(i),"月").concat(a(u),"日"):"enUS"===o.default.getLanguage()?"".concat(n,"-").concat(a(i),"-").concat(a(u)):"".concat(n,"年").concat(a(i),"月").concat(a(u),"日")};var i={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};function u(e){for(var t=0,r=0;r<e.length;r++){var n=e[r];if(void 0===i[n])return null;t=10*t+i[n]}return t}t.getValidDate=function(e){if(2===e.length){if(null===(r=u(e[0]))||r<1||r>12)return null;if(null===(n=u(e[1]))||n<1||n>31)return null;var t=(o=new Date).getFullYear();return o.setFullYear(t,r-1,n)}if(3===e.length){if(null===(r=u(e[0]))||r<1||r>12)return null;if(null===(n=u(e.slice(1)))||n<1||n>31)return null;t=(o=new Date).getFullYear();return o.setFullYear(t,r-1,n)}if(4===e.length||5===e.length){if(5===e.length&&"-"!==e[2])return null;var r,n,o;if(null===(r=u(e.slice(0,2)))||r<1||r>12)return null;if(null===(n=u(5===e.length?e.slice(3):e.slice(2)))||n<1||n>31)return null;if((t=(o=new Date).getFullYear())%100==0&&t%400==0||t%100!=0&&t%4==0){if(2===r&&n>29)return null}else if(2===r&&n>28)return null;return o.setFullYear(t,r-1,n)}return null}},function(e,t,r){"use strict";r.d(t,"c",(function(){return d})),r.d(t,"e",(function(){return O})),r.d(t,"d",(function(){return j})),r.d(t,"b",(function(){return C})),r.d(t,"a",(function(){return S}));r(44);var n=r(10),o=r(0),a=r(68),i=r.n(a);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e,t){return t.book&&Object.values(i.a.TYPE).includes(e.type)},s=function(e,t){if(!e.joinToken)return"";var r=e.joinToken;if("Doc"===r.target_type){var n=e.slug,o=t.group,a=t.book,i=t.isEditing,u="".concat(window.location.origin,"/g/").concat(o.login,"/").concat(a.slug,"/").concat(n,"/collaborator/join?token=").concat(r.token);if(i){var l="/".concat(o.login,"/").concat(a.slug,"/").concat(n,"/edit");u="".concat(u,"&goto=").concat(encodeURIComponent(l))}return u+="# ".concat(__("邀你参与文档协作"),"《").concat(e.title,"》")}return""},f=function(e){return!e.joinToken||!!e.joinToken.approve},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u(Object(o.useState)(!1),2),a=r[0],i=r[1],l=u(Object(o.useState)(s(e,t)),2),d=l[0],p=l[1],h=u(Object(o.useState)(f(e)),2),y=h[0],b=h[1],m=t.dispatch,v=function(r){i(!0);var o="proxy.web/books.token",a="book/updateToken",u=e.id;c(e,t)&&(o="proxy.web/docs.token",a="doc/updateToken",u=e.id),m({type:o,payload:{data:{id:u,force:r},reducer:a}}).then((function(o){r&&n.a.success(__("重置链接成功")),e.joinToken=o;var a=s(e,t);p(a),b(f(e)),i(!1)}))};return Object(o.useEffect)((function(){e.abilities&&e.abilities.create_collaborator&&!d&&v()}),[e.id]),[d,function(){return v(!0)},a,y,function(r){var n="proxy.web/books.updateToken",o="book/updateToken",a=e.id;c(e,t)&&(n="proxy.web/docs.updateToken",o="doc/updateToken",a=e.id),m({type:n,payload:{data:{id:a,approve:!0===r?1:0},reducer:o}}).then((function(e){b(r)}))}]},p=r(416),h=r.n(p),y=r(3515),b=r(52);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(){v=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==m(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(m(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function g(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.organization,n=_(Object(o.useState)(!1),2),a=n[0],i=n[1],u=_(Object(o.useState)([]),2),l=u[0],c=u[1],s=Object(o.useCallback)(h()(function(){var e,n=(e=v().mark((function e(n){var o,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return i(!1),e.abrupt("return");case 3:return i(!0),o={q:n.trim(),include_unconfirmed_corp_account:!0,optional_properties:t.optional_properties},r&&r.id||(o.global=!0),e.prev=6,e.next=9,b.a.users.complete(o);case 9:a=e.sent,c(Object(y.format)(a));case 11:return e.prev=11,i(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[6,,11,14]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){g(a,n,o,i,u,"next",e)}function u(e){g(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),200),[]);return[l,s,a,function(){return c([])}]};function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var j=function(){var e=E(Object(o.useState)(!1),2),t=e[0],r=e[1];return[t,Object(o.useCallback)((function(){return r((function(e){return!e}))}),[])]},C=function(e){return[window.location.hash==="#".concat(e),function(){window.location.hash=""}]};function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}var S=function(e,t){return function(r,n){var o=e.id,a=e.settings.homepage,i=a?a.layout:{};Object.keys(i).map((function(e){return i[e]&&i[e].length>0&&(i[e]=i[e].map((function(e){return"string"==typeof e&&e===t||"object"===k(e)&&e.type===t?{name:r,type:t}:e}))),i[e]})),b.a.groups.settings({id:o,homepage:{layout:i}}).then((function(e){n&&"function"==typeof n&&n(e)}))}}},function(e,t,r){"use strict";r(37);var n=r(8),o=(r(196),r(36)),a=(r(57),r(13)),i=(r(44),r(10)),u=(r(154),r(22)),l=r(0),c=r.n(l),s=r(532),f=r(2),d=r.n(f),p=r(34),h=r(93),y=r(48),b=r(457),m=(r(144),r(60)),v=r(722),g=r(43),_=r(3476),w=r(526),O=r(63),E=r(248),P=r(11),j=r(215);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function k(){k=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(D([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==C(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(C(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function S(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}var A=o.a.Option,x=function(e){var t,r=e.group,n=e.organization,a=e.bookPrivacy,i=e.onChange,u=c.a.useMemo((function(){var e;return e=null!=n&&n.id?null!=r&&r.isPublicPage?w.a.PUBLIC_PAGE:w.a.ORG:w.a.PERSON,Object(j.a)()?e:w.a.INTERNAL}),[n,r]),l=function(){return a.public===P.PRIVACY.private&&a.extendPrivate===P.EXTEND_PRIVATE.BIND_DEPARTMENTS?P.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE:a.public},s=function(){var e,t=(e=k().mark((function e(t){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==P.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE){e.next=3;break}return i({public:P.PRIVACY.private,extendPrivate:P.EXTEND_PRIVATE.BIND_DEPARTMENTS}),e.abrupt("return");case 3:i({public:t,extendPrivate:P.EXTEND_PRIVATE.NONE});case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){S(a,n,o,i,u,"next",e)}function u(e){S(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",{className:"group-selector","data-testid":"group-selector"},c.a.createElement(o.a,{placement:"bottomLeft",getPopupContainer:function(e){return e.parentNode},dropdownMatchSelectWidth:!0,value:l(),onChange:s},(t=O.a.isExpired(n)&&Object(E.g)(r),_.m[u].actions.map((function(e){return r.type===y.TYPES_MAP.user&&e.value===P.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE||(null==r?void 0:r.extend_private)===P.EXTEND_PRIVATE.NONE&&e.value===P.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE?null:c.a.createElement(A,{"data-testid":"public-selector-".concat(e.value),key:e.value,value:e.value,disabled:t&&e.value===P.PRIVACY.public},c.a.createElement("div",{className:"group-selector-item"},c.a.createElement("div",null,e.label),e.value===P.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE&&c.a.createElement(m.a,{title:__("具体绑定部门由团队设置")},c.a.createElement("div",{className:"tip-icon",onClick:function(){window.open("https://yuque.antfin.com/lark/zp2v9g/emrme5")}},c.a.createElement(g.b,{size:16,name:"help"})))),l()===e.value&&c.a.createElement(v.a,null))})))))},N=r(3940),T=r(3869),D=r(3868),L=r(3746),R=r(1713),I=r(3973),M=r(52),F=r(3892),B="index-module_newRepoWrap_dEIFH",U="index-module_content_Paldp",H="index-module_basicInfoNormal_0J70G",V="index-module_bookIcon_LCBKs",G="index-module_submitBtnWrapper_D+zDy",q="index-module_submitBtn_ANP9f",z=r(846);function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function K(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(){Y=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==W(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(W(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){X(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Q(a,n,o,i,u,"next",e)}function u(e){Q(a,n,o,i,u,"throw",e)}i(void 0)}))}}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){if(e){if("string"==typeof e)return re(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ne=u.a.Item,oe=I.a.SCENES;function ae(e){return e?!window.appData.isYuque||(null==e?void 0:e.type)!==y.TYPES_MAP.group&&(null==e?void 0:e.type)!==y.TYPES_MAP.wiki&&(null==e?void 0:e.type)!==y.TYPES_MAP.publicPage||"number"!=typeof e.public?{public:P.PRIVACY.private,extendPrivate:e.extend_private}:(null==e?void 0:e.type)===y.TYPES_MAP.publicPage&&O.a.isExpired(null===(t=window.appData)||void 0===t?void 0:t.organization)?{public:P.PRIVACY.intranet,extendPrivate:P.EXTEND_PRIVATE.NONE}:{public:e.public,extendPrivate:P.EXTEND_PRIVATE.NONE}:{};var t}function ie(e){var t,r,s=e.group,f=e.me,d=e.organization,m=e.isPublicCloud,v=e.disabled,g=e.book,_=e.scene,w=e.isYuque,O=e.belongTo,E=e.availableGroups,j=e.bookNameDefault,C=e.dispatch,k=ee(u.a.useForm(),1)[0],S=window.appData.settings.publication_enable_whitelist,A=!window.appData.isYuque&&((null==S?void 0:S.includes(null==f?void 0:f.id))||(null==S?void 0:S.includes("all"))),W=!(!d||!d.id),J=ee(Object(l.useState)(s),2),X=J[0],Q=J[1],te=ee(Object(l.useState)(oe.default),2),re=te[0],ie=te[1],ue=ee(Object(l.useState)(null==re||null===(t=re[0])||void 0===t?void 0:t.type),2),le=ue[0],ce=ue[1],se=ee(Object(l.useState)(null),2),fe=se[0],de=se[1],pe=ee(Object(l.useState)((function(){return ae(X)})),2),he=pe[0],ye=pe[1],be=ee(Object(l.useState)(!0),2),me=be[0],ve=be[1],ge=ee(Object(l.useState)((function(){return[y.TYPES_MAP.group,y.TYPES_MAP.publicPage].includes(null==s?void 0:s.type)?[s]:s||!O.includes("mine")||W?[]:[f]})),2),_e=ge[0],we=ge[1],Oe=ee(Object(l.useState)(!1),2),Ee=Oe[0],Pe=Oe[1],je=Object(l.useRef)(),Ce=!W&&X.id&&"User"===X.type&&!X.isPaid,ke=(null==X?void 0:X.type)&&!Ce;Object(l.useEffect)((function(){ye(Ce?{public:P.PRIVACY.private,extendPrivate:P.EXTEND_PRIVATE.NONE}:ae(X))}),[X]),Object(l.useEffect)((function(){var e;null===(e=je.current)||void 0===e||e.focus(),j&&ve(!1)}),[]),Object(l.useEffect)((function(){["Resource","Design","Thread"].includes(le)||null!=s&&s.isPublicPage?Pe(!0):Pe(!1)}),[le,s]),Object(l.useEffect)((function(){ce(_||(null==re?void 0:re[0].type))}),[JSON.stringify(re)]),Object(l.useEffect)((function(){if(w||e.isH5||null==X||!X.isWiki)if(!w&&e.isH5&&null!=X&&X.isWiki){var t=["book","resource","thread"],r=oe.default.filter((function(e){return t.includes(e.id)}));ie(r)}else{var n=oe.default.filter((function(e){return"book"===e.id}));ie(n)}else ie(oe.default)}),[X]);var Se=function(){var e=Z(Y().mark((function e(t){var r,n,o,a,u,l,c,s,h,b;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.a.destroy(),t){e.next=5;break}return Q(null),ve(!0),e.abrupt("return");case 5:if(!m||d||t.isPaid){e.next=10;break}return e.next=8,M.a.books.getCount({user_id:t.id});case 8:(r=e.sent)&&(n="max_book_number",o=t.isGroupOrPublication()?p.MEMBER_RULE.Group.normal[n]:p.MEMBER_RULE.User[y.MEMBER_LEVEL.free][n],r.count>=o&&(a=R.h.getMessage(n,{isOwner:r.isOwner,user:t})||{},u=a.msg,l=a.alwaysOpen,c=a.level,s=a.callback,u&&s(i.a[c||"error"](u,l?0:void 0))));case 10:if(t.id!==f.id){e.next=16;break}return e.next=13,M.a.mine.bookStacks();case 13:return h=e.sent,Q($($({},t),{},{book_stacks:h})),e.abrupt("return");case 16:return e.next=18,M.a.groups.getBookStacks({id:t.id});case 18:(b=e.sent)&&Q($($({},t),{},{book_stacks:b}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(e){var t;return null!=s&&s.id&&null!=s&&null!==(t=s.abilities)&&void 0!==t&&t.create_book?s.name?s:e.find((function(e){return e.id===s.id})):W?e[0]:f},xe=function(){var e=Z(Y().mark((function e(){var t,r;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={filterByAbility:"create_book",scene:"create_book"},W&&(t.organization_id=d.id),r=A?M.a.mine.publications:function(){return[]},e.next=5,Promise.all([M.a.mine.groups(t),r(t)]).then((function(e){var t=ee(e,2),r=t[0],n=t[1],o=r.concat(n);return o=o.filter((function(e){var t;return e.group_user_role!==h.default.ROLE.readonly&&(null===(t=e.abilities)||void 0===t?void 0:t.createBook)}))}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){var e=function(){var e=Z(Y().mark((function e(){var t,r;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],O.includes("mine")&&!W&&t.push(f),!O.includes("group")){e.next=10;break}if(e.t0=E,e.t0){e.next=8;break}return e.next=7,xe();case 7:e.t0=e.sent;case 8:r=e.t0,t.push.apply(t,K(r));case 10:if(0!==t.length){e.next=13;break}return i.a.warning(__("暂时无法操作，请先联系管理员，加入团队成员后才能进行知识协作")),e.abrupt("return");case 13:we(t),Se(Ae(r));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var Ne,Te=function(){var t=Z(Y().mark((function t(r){var n,o;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=K(e.me.commonUsedBooks),t.next=4,T.a.addItemByTarget(r,n,{refId:"dashboard_books",type:"Book",targetType:"Book"});case 4:o=t.sent,C({type:"me/update",payload:{commonUsedBooks:o}}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),De=function(e){ye(e)};return c.a.createElement("div",{className:B},c.a.createElement("div",{className:U},c.a.createElement(u.a,{form:k,layout:"vertical",initialValues:{name:j}},c.a.createElement(ne,{colon:!1,label:__("基本信息"),name:"name",rules:[{max:50,message:__("名称过长，最多输入50个字")}]},c.a.createElement("div",{className:H},c.a.createElement(F.b,{className:V,disabled:v,updateIcon:function(e){de(e)}}),c.a.createElement(a.a,{"data-testid":"input-name",type:"text",disabled:v,placeholder:__("知识库名称"),autoComplete:"off",ref:je,maxLength:50,onChange:function(e){e.target.value.trim()?ve(!1):ve(!0)},defaultValue:j}))),c.a.createElement(ne,{colon:!1,name:"description",rules:[{max:255,message:__("简介过长，最多输入255个字")}]},c.a.createElement(a.a.TextArea,{"data-testid":"input-desc",name:"description",autoComplete:"off",className:"book-form-desc",disabled:v,autoSize:{minRows:4},placeholder:__("知识库简介（选填）")})),!W||_e.length||null!=d&&null!==(Ne=d.abilities)&&void 0!==Ne&&Ne.create_group?c.a.createElement(ne,{colon:!1,label:__("新建至")},c.a.createElement(L.a,{size:"large",groups:_e,onChange:Se,current:X,disabled:Ee})):null,ke&&c.a.createElement(ne,{colon:!1,label:__("公开性")},c.a.createElement(x,{group:X,bookPrivacy:he,organization:d,onChange:De})),c.a.createElement(N.a,{publicValue:he.public,organization:d}),(null==X||null===(r=X.book_stacks)||void 0===r?void 0:r.length)>1&&c.a.createElement(ne,{colon:!1,label:__("分组"),name:"stack_id"},c.a.createElement(o.a,{size:"large",getPopupContainer:function(e){return e.parentNode},disabled:v,defaultValue:e.stackId||(null==g?void 0:g.stack_id)||X.book_stacks.find((function(e){return e.is_default})).id},null==X?void 0:X.book_stacks.map((function(e){return c.a.createElement(o.a.Option,{key:e.id,value:e.id},e.name)})))))),c.a.createElement("div",{className:G},c.a.createElement(D.a,{content:[__("点击「 新建 」"),__("即可创建完成你的知识库")],placement:"left",stage:b.ACTION.new_book,taskId:b.TASK_ID.NOVICE_OFFER,step:2,width:392,height:56,offsetX:16,popWidth:218,offsetY:-8,borderRadius:8,action:"click",popMarginLeft:20},c.a.createElement(n.a,{className:q,disabled:me||0===_e.length||!(null!=X&&X.id),type:"primary",onClick:function(t){t.preventDefault(),k.validateFields().then(function(){var t=Z(Y().mark((function t(r){var n,o,a,u,l;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ve(!0),n={user_id:X.id,name:r.name.trim(),public:he.public,extend_private:he.extendPrivate,type:le},fe&&fe.symbol&&(n.book_icon=fe),X.book_stacks&&X.book_stacks.length>1&&(n.stack_id=r.stack_id||e.stackId),_&&(n.type=_.type,I.a.isTemplate(_)&&(r.scene=_.id)),o=Object.assign(r,n),t.next=8,M.a.books.createBook(o);case 8:if(a=t.sent,u="/".concat(X.login,"/").concat(a.slug),!e.onBookCreated){t.next=14;break}e.onBookCreated({book:a,user:X}),t.next=22;break;case 14:if(i.a.success(__("新建成功")),!window.appData.isYuqueMobileApp){t.next=17;break}return t.abrupt("return",window.location.replace(u));case 17:if((null==X?void 0:X.id)!==(null==f?void 0:f.id)){t.next=20;break}return t.next=20,Te(a);case 20:null===(l=e.onCancel)||void 0===l||l.call(e),Object(z.c)(u,{page:"bookOverview"});case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},"data-aspm-click":"c323989.d353721"},__("新建")))))}ie.defaultProps={organization:window.appData.organization,isYuque:window.appData.isYuque,isPublicCloud:window.appData.isPublicCloud,belongTo:["mine","group"]},ie.propTypes={me:d.a.object.isRequired,group:d.a.object,organization:d.a.object,scene:d.a.object,isH5:d.a.bool,onBookCreated:d.a.func,isYuque:d.a.bool,isPublicCloud:d.a.bool,disabled:d.a.bool,book:d.a.object,stackId:d.a.string,belongTo:d.a.array,bookNameDefault:d.a.string,availableGroups:d.a.array};t.a=Object(s.d)((function(e,t){var r=e.group,n=e.me,o=e.organization;return{group:t.group||r,me:n,organization:o}}))(ie)},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(532),i=r(3862),u=r(261),l=r(3974);t.a=Object(u.b)(Object(a.d)((function(e){return{guide:e.guide}}))((function(e){var t=e.guide,r=e.tip_id;return Object(n.useEffect)((function(){var e=i.a.findFeatureGuide({tip_id:r,type:"lite"});e&&i.a.readLiteFeatureGuide(e)}),[]),o.a.createElement("div",{className:e.className||"",style:e.style,"data-testid":"guide_".concat(r),onClick:function(){var t=i.a.findFeatureGuide({tip_id:r,type:"mini"});i.a.readMiniFeatureGuide(t,e.dispatch)}},e.children,("#guide"===window.location.hash||!t.readTip[r])&&o.a.createElement(l.a.Mini,null))})),!1)},,,,,,,function(e,t,r){"use strict";r(167);var n=r(39),o=(r(37),r(8)),a=(r(246),r(123)),i=(r(711),r(356)),u=(r(44),r(10)),l=(r(116),r(38)),c=(r(132),r(27)),s=(r(59),r(30)),f=r(0),d=r.n(f),p=r(2),h=r.n(p),y=r(1396),b=r(1392),m=r(1387),v=r(97),g=r.n(v),_=r(237),w=r.n(_),O=r(4116),E=r(1386),P=r.n(E),j=r(96);var C=function(e,t){var r=Object(f.useRef)();Object(f.useEffect)((function(){r.current=e}),[e]),Object(f.useEffect)((function(){if(null!==t){var e=setInterval((function(){r.current()}),t);return function(){return clearInterval(e)}}}),[t])},k=r(4068),S=r(189),A=r(1713),x=r(215),N=r(52),T=r(1712),D=r(4069);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function R(){R=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==L(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(L(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function I(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}Promise.all([r.e(3),r.e(5),r.e(6),r.e(0),r.e(1),r.e(1224)]).then(r.bind(null,3699));var M=function(e){var t=e.docs,n=e.onSuccess,o=e.bookId,a=t.length,i=function(){var e,i=(e=R().mark((function e(){var i,u;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=R().mark((function e(){var a,i,l,c,s,f,d;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t[u].slug,e.prev=1,e.next=4,N.a.docs.findOne({id:a,book_id:o});case 4:if(i=e.sent,l=i.format,c=i.content,s=null,"lakesheet_html"!==l){e.next=12;break}s=Object(D.a)(i.content),f="lakesheet",e.next=17;break;case 12:if("html"!==l){e.next=17;break}return e.next=15,Promise.all([r.e(3),r.e(5),r.e(6),r.e(0),r.e(1),r.e(1224)]).then(r.bind(null,3699)).then((function(e){return e.htmlToLakeAndHtml(c)}));case 15:s=e.sent,f="lake";case 17:return d={id:i.id,format:f,body_asl:s.value,draft_version:i.draft_version,save_type:"auto"},s.html&&(d.body_html=s.html),e.next=21,N.a.docs.updateContent(d);case 21:return e.next=23,N.a.docs.publish({id:i.id,format:f,notify:!1,force:!0});case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(1),console.log("convert error",e.t0),n();case 29:case"end":return e.stop()}}),e,null,[[1,25]])})),u=0;case 2:if(!(u<a)){e.next=7;break}return e.delegateYield(i(),"t0",4);case 4:u++,e.next=2;break;case 7:n();case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){I(a,n,o,i,u,"next",e)}function u(e){I(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(){return i.apply(this,arguments)}}();return Object(f.useEffect)((function(){return i(),function(){}}),[]),d.a.createElement("div",null)};M.propTypes={onSuccess:h.a.func.isRequired,bookId:h.a.number.isRequired,docs:h.a.array.isRequired};var F=M,B=r(1023),U="DocImport-module_docImport_uDZWD",H="DocImport-module_title_vylxD",V="DocImport-module_tips_gx2+N",G="DocImport-module_help_YDms4",q="DocImport-module_processingModal_5vLO+",z="DocImport-module_setting_6ttU6",W="DocImport-module_settingTitle_EsA43",K="DocImport-module_settingUpload_WXf0g",Y="DocImport-module_processing_K3nVL",J="DocImport-module_processingTitle_UzLg1",$="DocImport-module_processingFooter_xOxG5",X="DocImport-module_fileList_jRvlw",Q="DocImport-module_fileItem_gtT95",Z="DocImport-module_fileItemIcon_SdTY-",ee="DocImport-module_fileItemTitle_qprAi",te="DocImport-module_spin_aEZeg",re="DocImport-module_uploadingStatus_UWCen",ne="DocImport-module_hr_nD0TF",oe="DocImport-module_footerTitle_2O1eI",ae="DocImport-module_radioGroup_klLUa",ie=r(357),ue=r(2783),le={id:14,content:'{"popupType":"activity","title":"👋🏻 Hi，亲爱的印象笔记用户","desc":"欢迎加入语雀，开启新的创作旅程，语雀会稳定地陪伴着你。\\n<br />\\n<br />\\n为感谢你的选择，已赠送你 1 个月语雀会员。\\n<br />\\n<br />\\n✨ 分享你的迁移经验 / 使用心得，再获得 1 个月会员。 <br /><a target=\\"_blank\\" href=\\"https://www.yuque.com/yuque/eaghk3/share-events\\">了解详情</a>\\n<br />\\n<br />\\n<a target=\\"_blank\\" href=\\"https://www.yuque.com/yuque/eaghk3/evernote\\">👉🏻 迁移支持与反馈</a>","image":"https://intranetproxy.alipay.com/skylark/lark/0/2023/png/345912/1678879373131-361a8d0b-c661-4afa-8714-9b49afc2ef87.png?x-oss-process=image%2Fresize%2Cw_1272%2Climit_0","type":"normal","mainButton":{"title":"我知道了","openType":"close"},"viceButton":{"title":"","openType":"close"},"otherButton":{"openType":"href"}}',type:"public_popup",user_id:null,created_at:"2023-07-22T02:22:29.000Z",updated_at:"2023-07-22T02:25:07.000Z",deleted_at:null,_serializer:"admin.tip"};function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function se(){se=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==ce(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ce(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function fe(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function de(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){fe(a,n,o,i,u,"next",e)}function u(e){fe(a,n,o,i,u,"throw",e)}i(void 0)}))}}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ye(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e){return function(e){if(Array.isArray(e))return ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||ve(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){if(e){if("string"==typeof e)return ge(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ge(e,t):void 0}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _e=s.a.confirm,we=B.a.STATUS,Oe=window.appData.settings&&window.appData.settings.max_import_task_count||2,Ee=function(e){var t=e.visible,r=e.book,p=e.group,h=e.formats,v=e.importType,_=e.importParams,E=e.wrapModal,P=void 0===E||E,S=e.autoConvert,D=void 0===S||S,L=me(Object(f.useState)(we.INIT),2),R=L[0],I=L[1],M=me(Object(f.useState)([]),2),ce=M[0],fe=M[1],pe=me(Object(f.useState)([]),2),ye=pe[0],ge=pe[1],Ee=me(Object(f.useState)(0),2),Pe=Ee[0],je=Ee[1],Ce=me(Object(f.useState)(0),2),ke=Ce[0],Se=Ce[1],Ae=me(Object(f.useState)(0),2),xe=Ae[0],Ne=Ae[1],Te=me(Object(f.useState)({}),2),De=Te[0],Le=Te[1],Re=me(Object(f.useState)(!1),2),Ie=Re[0],Me=Re[1],Fe=me(Object(f.useState)(!0),2),Be=Fe[0],Ue=Fe[1],He=me(Object(f.useState)(!1),2),Ve=He[0],Ge=He[1],qe=me(Object(f.useState)([]),2),ze=qe[0],We=qe[1],Ke=me(Object(f.useState)(!1),2),Ye=Ke[0],Je=Ke[1],$e=Object(f.useRef)();Object(k.a)(!Ve&&R===we.PROCESSING,__("还没导入完成，确认关闭窗口吗？"));var Xe=function(e){if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])){if(ze.length>0)return ze.push(e),void We(be(ze));ze.push(e)}var t=e.data,r=e.file,n=e.filename,o=e.onError,a=e.onSuccess;e.__uploaded=!0;var i=he(he(he({},_),t),{},{filename:n,path:r.path});r.uploading=!0,Object(x.f)({requestData:i,params:e,onError:o,onSuccess:function(e){a(e,r)}})},Qe={evernote:[{default:w.a.windows,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],gitbook:[{default:w.a.windows,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],markdown:[{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1}],confluence:[{type:"text",label:d.a.createElement(l.a,{type:"flex",justify:"space-between"},d.a.createElement(c.a,null,__("批量替换链接")),d.a.createElement(c.a,null,d.a.createElement("a",{href:"https://www.yuque.com/yuque/eaghk3/bu0hnd",target:"_blank"},__("如何从 Confluence 导出？")))),colon:!1,placeholder:__("请输入 Confluence 地址"),name:"host",autoFocus:!0,validateOnBlur:!0,validator:function(e,t,r){var n=O.validator.httpURL(t);Ue(!n),r(n)}},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}],zip:[{default:!0,name:"overrideExistsNode",label:__("是否覆盖相同节点的已有内容，否则自动重命名"),value:!0},{default:!0,name:"useFilenameAsTitle",label:__("是否使用文件名作为目录节点名称，否则会取内容中的标题作为名称"),value:!0},{default:!0,name:"enableLatex",label:__("识别 Markdown 文件中 LaTeX 公式语法"),value:1},{default:!1,name:"isGBK",label:__("zip 使用 GBK 编码文件名(导入乱码时请勾选)"),value:1}]},Ze=[{key:"markdown",value:"markdown",invertedIndex:["markdown","zip"],title:__("单个 Markdown 文件"),desc:".md .markdown .mark .txt",name:__("Markdown")},{key:"zip",value:"zip1",invertedIndex:["markdown","zip"],title:__("Markdown 打包后的压缩文件"),desc:".zip",name:__("Markdown"),formValue:{fileFormat:"markdown"}},{key:"zip",value:"zip2",invertedIndex:["markdown","zip"],title:__("HTML 打包后的压缩文件"),desc:".zip",name:__("HTML"),formValue:{fileFormat:"html"}},{key:"zip",value:"zip3",invertedIndex:["markdown","zip"],title:__("Lake 打包后的压缩文件"),desc:".zip",name:"LAKE",formValue:{fileFormat:"html"}}];Object(f.useEffect)((function(){R!==we.PROCESSING||Ie||I(we.SUCCESS)}),[R,Ie]);var et=function(e){return e.response&&e.response.data&&e.response.data.status},tt=function(e){var t=e||{},n=t.data,o=t.joinedEvernoteIncentive,a={};if(n){var i,l=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ve(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}(n);try{for(l.s();!(i=l.n()).done;){var c=i.value;a[c.id]=c}}catch(e){l.e(e)}finally{l.f()}}var s=ye.map((function(e){var t,r,n;if(!e.response||!e.response.data)return e;var o=a[e.response.data.id];if(!o)return e;var i=g()(o,"error.limitError");if(i&&400===i.status&&i.code){if(window.appData.isDesktopApp)return u.a.error(__("桌面端不支持此操作，请去 web 端完成"));var l=A.h.getMessage(i.code,{isImport:!0},i)||{},c=l.msg,s=l.alwaysOpen,f=l.level,d=l.callback;if(c)return d(u.a[f||"error"](c,s?0:void 0)),Ge(!0),e}e.response.data=he(he({},e.response.data),o),o.status===we.SUCCESS?(e.status=we.SUCCESS,e.url=o.url):(o.status===we.ERROR||o.error)&&(e.status=we.ERROR);var p=null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r||null===(n=r.successDocs)||void 0===n?void 0:n.filter((function(e){return"html"===e.format||"lakesheet_html"===e.format}));return(null==p?void 0:p.length)>0&&D&&fe(ce.concat(p)),e})),f=0,d=0;s.forEach((function(e){var t=et(e);e.status!==we.ERROR&&t!==we.ERROR&&t!==we.SUCCESS||f++,e.status!==we.ERROR&&t!==we.ERROR||d++})),s.filter((function(e){var t=et(e);return t===we.PENDING||e.status!==we.ERROR&&!(null!=t||!e.uploading&&"done"!==e.status&&100!==e.percent)})).length<Oe&&function(){for(var e=ze.shift();e&&e.__uploaded;)e=ze.shift();e&&Xe(e,!0),We(be(ze))}(),f>ke&&Se(f),Ne(d),ge(s),Pe===f?(Me(!1),function(){if(r.toc){var e="highlightBookImport_".concat(r.slug,"_").concat(r.id),t=r.toc[0];j.a.set(e,t?t.uuid:"_")}}()):I(we.PROCESSING),o&&Object(ue.b)({tip:le})};C(de(se().mark((function e(){var r,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=ye.filter((function(e){return e.response&&e.response.data}))).length){e.next=3;break}return e.abrupt("return",tt());case 3:if(t){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,N.a.import.getImportResult({files:JSON.stringify(r.map((function(e){return{convertTaskId:e.response.data.convertTaskId,id:e.response.data.id,type:e.response.data.type,name:e.name}}))),toc_node_uuid:_&&_.toc_node_uuid,format:null==De?void 0:De.key},{useOriginResp:!0});case 7:n=e.sent,tt(n);case 9:case"end":return e.stop()}}),e)}))),Ie?5e3:null);var rt,nt,ot,at=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=he(he({},h.find((function(t){return t.key===e}))),t);Le(r),Qe[e]&&I(we.SETTING),"confluence"===e&&Ue(!1)},it=function(e){return!!Qe[e.key]},ut=function(e){var t=be(e.fileList),r=t.length;r!==t.filter((function(e){var t=et(e);return t===we.ERROR||t===we.SUCCESS})).length&&I(we.PROCESSING),Me(!0),ge(t),je(r)},lt=function(){Me(!1),I((function(t){if(t!==we.PROCESSING)return e.onCancel(),t;ge((function(t){return e.onCancel(),t}))}))},ct=function(){var t,n;if(_&&"doc_toc"===_.create_from)return lt(),ye.forEach((function(e){if(!t){var o=e.response&&e.response.data||{};o.import_toc&&o.import_toc[0]&&o.import_toc[0].url?(t="/".concat(p.login,"/").concat(r.slug,"/").concat(o.import_toc[0].url),n=o.import_toc[0]):"doc"!==o.type&&"Doc"!==o.type||"success"!==o.status||!o.slug||(t="/".concat(p.login,"/").concat(r.slug,"/").concat(o.slug),n=o)}})),void(t&&(e.onRead?e.onRead(n):window.location.href=t));window.location.href="/".concat(p.login,"/").concat(r.slug)},st=d.a.createElement("div",{className:U},(rt=window.appData.isYuque?"https://www.yuque.com/yuque/eaghk3":"https://yuque.antfin.com/lark/non1k6",nt=h.filter((function(e){return e.key.startsWith("lake")})),ot=h.filter((function(e){return!e.key.startsWith("lake")&&"zip"!==e.key})).filter((function(e){return!window.appData.isYuque||"dingdocs"!==e.key})),d.a.createElement("div",{className:"entry",style:{display:R===we.INIT?"block":"none"}},d.a.createElement("div",{className:H},__("导入")),d.a.createElement("div",{className:V},__("点击下方格式进行导入，可一次导入多个文件，导入非语雀格式的文件可能存在样式不兼容、耗时较长的情况，请耐心等待。"),d.a.createElement("a",{href:rt,target:"_blank","data-desktoptarget":"_browser",className:G},__("帮助文档"))),d.a.createElement("div",null,d.a.createElement("h4",null,__("三方格式")),d.a.createElement(T.a,{mode:"import",book:r,types:ot,importType:v,disableUpload:it,onSelect:at,onUploadChange:ut,customRequest:Xe,maxCount:0,setModalHide:Je})),d.a.createElement("div",null,d.a.createElement("h4",null,__("语雀格式")),d.a.createElement(T.a,{mode:"import",book:r,types:nt,importType:v,disableUpload:it,onSelect:at,onUploadChange:ut,customRequest:Xe,maxCount:0})))),function(){var e;if(!De)return null;var t=De.key,a=De.multiSettingValue,i=Ze.filter((function(e){return e.invertedIndex.includes(t)})),u=i.find((function(e){return e.value===a}))||(null==i?void 0:i[0]),l=Qe[t];return l?d.a.createElement("div",{className:z,style:{display:R===we.SETTING?"block":"none"}},d.a.createElement("h1",{className:W},__("{type} 导入配置",{type:(null==u?void 0:u.name)||De.name})),!!i.length&&d.a.createElement(n.a.Group,{value:null===(e=u||(null==i?void 0:i[0]))||void 0===e?void 0:e.value,className:ae},null==i?void 0:i.map((function(e){return d.a.createElement(n.a,{value:e.value,onClick:function(){return at(e.key,{multiSettingValue:e.value})}},d.a.createElement(ie.a,{variant:"title",type:"strong"},e.title),d.a.createElement(ie.a,{variant:"caption-small"},e.desc))}))),d.a.createElement(B.a.AdvanceSetting,{wrappedComponentRef:$e,type:De,settings:l,hideHeader:i,actions:d.a.createElement(T.a.FileUpload,{mode:"import",book:r,getParamsOption:function(){return he(he({},(null==u?void 0:u.formValue)||{}),$e.current.getValue())},fileOption:De,importType:v,customRequest:Xe,onUploadChange:ut,maxCount:0},d.a.createElement(o.a,{type:"primary",disabled:!Be,className:K},__("选择本地文件")))})):null}(),R!==we.INIT&&R!==we.SETTING?d.a.createElement("div",{className:Y},d.a.createElement("h1",{className:J},R===we.DONE?__("导入完成"):__("导入中")),d.a.createElement("div",{className:X},ye.map((function(e){return d.a.createElement(l.a,{type:"flex",justify:"space-between",align:"middle",className:Q,key:e.uid},d.a.createElement(c.a,null,d.a.createElement(l.a,{type:"flex",align:"middle"},d.a.createElement(c.a,null,d.a.createElement("img",{src:De.icon,className:Z}),function(e){var t,r=e.name,n=et(e);return t=e.url?d.a.createElement("a",{className:ee,href:e.url,target:"_blank"},r):d.a.createElement("h2",{className:ee},r),e.status!==we.ERROR&&n!==we.ERROR||(t=d.a.createElement(i.a,{placement:"right",content:__("文件处理失败，请重新上传。")},t)),t}(e)))),d.a.createElement(c.a,null,function(e){var t=et(e);if(e.status===we.ERROR||t===we.ERROR){var r=e.error&&e.error.response&&e.error.response.data&&e.error.response.data.message;r||(r=e.response&&e.response.data&&e.response.data.error&&e.response.data.error.message);var n=e.response&&e.response.data&&e.response.data.id;return n&&(r="".concat(r," [id: ").concat(n,"]")),r?r+=__("（请重新上传，如果持续失败，请反馈到语雀）"):r=__("文件处理失败，请重新上传，如果持续失败，请反馈到语雀。"),d.a.createElement("span",null,d.a.createElement(i.a,{placement:"right",width:600,content:r},d.a.createElement(y.default,null)))}return e.status===we.SUCCESS||t===we.SUCCESS?d.a.createElement("span",null,d.a.createElement(b.default,null)):d.a.createElement("span",null,d.a.createElement("span",{className:re},0===e.percent&&__("等待中"),100===e.percent&&__("处理中"),0!==e.percent&&100!==e.percent&&d.a.createElement("span",null,parseInt(e.percent,10),"%")),d.a.createElement(a.a,{indicator:d.a.createElement(m.default,{style:{fontSize:16},spin:!0}),className:te}))}(e)))}))),d.a.createElement("div",{className:ne}),function(){var e;if(0!==ke&&Pe===ke&&0===ce.length){var t;ye.forEach((function(e){if(!t){e.status===we.ERROR&&((t=e.error&&e.error.response&&e.error.response.data&&e.error.response.data.message)||(t=e.response&&e.response.data&&e.response.data.error&&e.response.data.error.message));var r=e.response&&e.response.data&&e.response.data.id;t&&r&&(t="".concat(t," [id: ").concat(r,"]"))}}));var r=xe?__("导入结束，有文件导入失败"):__("导入完成");t&&(r="".concat(r," (").concat(t,")")),e=d.a.createElement(l.a,{type:"flex",justify:"space-between",align:"middle"},d.a.createElement(c.a,null,xe?d.a.createElement(y.default,null):d.a.createElement(b.default,null),d.a.createElement("span",{className:oe},r)),d.a.createElement(c.a,null,d.a.createElement(o.a,{type:"primary",onClick:ct},__("查看"))))}else R===we.PROCESSING||R===we.UPLOADING||R===we.PENDING?e=d.a.createElement("div",null,d.a.createElement(a.a,{indicator:d.a.createElement(m.default,{style:{fontSize:16},spin:!0})}),d.a.createElement("span",{className:oe},__("文件导入中")),"(".concat(ke,"/").concat(Pe,")")):0!==ce.length&&(e=d.a.createElement("div",null,d.a.createElement(a.a,{indicator:d.a.createElement(m.default,{style:{fontSize:16},spin:!0})}),d.a.createElement("span",{className:oe},__("文件转换中"))));return d.a.createElement("div",{className:$},e)}()):null,D&&function(){if(ke&&Pe===ke&&ce.length)return d.a.createElement(F,{docs:ce,bookId:r.id,onSuccess:function(){fe([])}})}());return P?d.a.createElement(s.a,{title:null,onCancel:function(e){R!==we.INIT&&R!==we.DONE?(e.preventDefault(),e.stopPropagation(),R===we.PROCESSING?_e({title:__("导入尚未完成，确认要停止导入?"),content:d.a.createElement("div",null,__("处理中的文件无法取消，请稍后从知识库中删除。")),okText:__("确认"),okType:"danger",cancelText:__("取消"),centered:!0,onOk:lt,onCancel:function(){}}):lt()):lt()},visible:t,footer:null,centered:!0,width:R===we.INIT?160*Math.min(h.length,4):406,maskClosable:!1,className:R!==we.INIT&&q,style:Ye?{display:"none"}:{}},st):st};Ee.defaultProps={visible:!0,importType:P.a.IMPORT_TYPE.PARSE},Ee.propTypes={visible:h.a.bool,book:h.a.object.isRequired,formats:h.a.array.isRequired,importType:h.a.oneOf([P.a.IMPORT_TYPE.CREATE,P.a.IMPORT_TYPE.PARSE]),onCancel:h.a.func.isRequired,onRead:h.a.func,importParams:h.a.object,group:h.a.object.isRequired,wrapModal:h.a.bool,autoConvert:h.a.bool};t.a=Object(S.b)(Ee,!0)},,,function(e,t,r){(function(t){var n=r(3792),o=r(3894),a=r(3895),i=r(3896),u=r(3793),l=a.CODES;function c(e,t,r){n.EventEmitter.call(this),this.connection=e,this.collection=t,this.id=r,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=[],this.inflightUnsubscribe=[],this.pendingFetch=[],this.subscribed=!1,this.wantSubscribe=!1,this.inflightOp=null,this.pendingOps=[],this.type=null,this.applyStack=null,this.preventCompose=!1}function s(e,t,r){if(t){var n=e.pop();e.push((function(e){n&&n(e),r&&r(e)}))}else e.push(r)}function f(e,t){if(e.del)return delete(r=t).op,delete r.create,void delete r.del;var r;if(t.del)return new a(l.ERR_DOC_WAS_DELETED,"Document was deleted");if(t.create)return new a(l.ERR_DOC_ALREADY_CREATED,"Document already created");if(t.op){if(e.create)return new a(l.ERR_DOC_ALREADY_CREATED,"Document already created");if(e.type.transformX){var n=e.type.transformX(e.op,t.op);e.op=n[0],t.op=n[1]}else{var o=e.type.transform(e.op,t.op,"left"),i=e.type.transform(t.op,e.op,"right");e.op=o,t.op=i}}}function d(e,t){for(var r=!1,n=0;n<e.length;n++){var o=e[n];o&&(o(t),r=!0)}return r}e.exports=c,n.mixin(c),c.prototype.destroy=function(e){var t=this;t.whenNothingPending((function(){t.wantSubscribe?t.unsubscribe((function(r){if(r)return e?e(r):t.emit("error",r);t.connection._destroyDoc(t),e&&e()})):(t.connection._destroyDoc(t),e&&e())}))},c.prototype._setType=function(e){if("string"==typeof e&&(e=i.map[e]),e)this.type=e;else{if(null!==e){var t=new a(l.ERR_DOC_TYPE_NOT_RECOGNIZED,"Missing type "+e);return this.emit("error",t)}this.type=e,this.data=void 0}},c.prototype.ingestSnapshot=function(e,t){if(!e)return t&&t();if("number"!=typeof e.v){var r=new a(l.ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return t?t(r):this.emit("error",r)}if(this.type||this.hasWritePending()){if(null==this.version){if(this.hasWritePending())return t&&this.once("no write pending",t);r=new a(l.ERR_DOC_MISSING_VERSION,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return t?t(r):this.emit("error",r)}return e.v>this.version?this.fetch(t):t&&t()}if(this.version>e.v)return t&&t();this.version=e.v;var n=void 0===e.type?i.defaultType:e.type;this._setType(n),this.data=this.type&&this.type.deserialize?this.type.deserialize(e.data):e.data,this.emit("load"),t&&t()},c.prototype.whenNothingPending=function(e){var r=this;t.nextTick((function(){r.hasPending()?r.once("nothing pending",e):e()}))},c.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe.length||this.inflightUnsubscribe.length||this.pendingFetch.length)},c.prototype.hasWritePending=function(){return!(!this.inflightOp&&!this.pendingOps.length)},c.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),this.hasPending()||this.emit("nothing pending"))},c.prototype._emitResponseError=function(e,t){return e&&e.code===l.ERR_SNAPSHOT_READ_SILENT_REJECTION?(this.wantSubscribe=!1,t&&t(),void this._emitNothingPending()):t?(t(e),void this._emitNothingPending()):(this._emitNothingPending(),void this.emit("error",e))},c.prototype._handleFetch=function(e,t){var r=this.inflightFetch.shift();if(e)return this._emitResponseError(e,r);this.ingestSnapshot(t,r),this._emitNothingPending()},c.prototype._handleSubscribe=function(e,t){var r=this.inflightSubscribe.shift();if(e)return this._emitResponseError(e,r);this.wantSubscribe&&(this.subscribed=!0),this.ingestSnapshot(t,r),this._emitNothingPending()},c.prototype._handleUnsubscribe=function(e){var t=this.inflightUnsubscribe.shift();if(e)return this._emitResponseError(e,t);t&&t(),this._emitNothingPending()},c.prototype._handleOp=function(e,t){if(e)return this.inflightOp?(e.code===l.ERR_OP_SUBMIT_REJECTED&&(e=null),this._rollback(e)):this.emit("error",e);if(this.inflightOp&&t.src===this.inflightOp.src&&t.seq===this.inflightOp.seq)this._opAcknowledged(t);else if(null==this.version||t.v>this.version)this.fetch();else if(!(t.v<this.version)){if(this.inflightOp)if(n=f(this.inflightOp,t))return this._hardRollback(n);for(var r=0;r<this.pendingOps.length;r++){var n;if(n=f(this.pendingOps[r],t))return this._hardRollback(n)}this.version++;try{this._otApply(t,!1)}catch(e){return this._hardRollback(e)}}},c.prototype._onConnectionStateChanged=function(){if(this.connection.canSend)this.flush(),this._resubscribe();else if(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,(this.inflightFetch.length||this.inflightSubscribe.length)&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch,this.inflightSubscribe),this.inflightFetch.length=0,this.inflightSubscribe.length=0),this.inflightUnsubscribe.length){var e=this.inflightUnsubscribe;this.inflightUnsubscribe=[],d(e)}},c.prototype._resubscribe=function(){var e=this.pendingFetch;if(this.pendingFetch=[],this.wantSubscribe)return e.length?void this.subscribe((function(t){d(e,t)})):void this.subscribe();e.length&&this.fetch((function(t){d(e,t)}))},c.prototype.fetch=function(e){if(this.connection.canSend){var t=this.connection.sendFetch(this);s(this.inflightFetch,t,e)}else this.pendingFetch.push(e)},c.prototype.subscribe=function(e){if(this.wantSubscribe=!0,this.connection.canSend){var t=this.connection.sendSubscribe(this);s(this.inflightSubscribe,t,e)}else this.pendingFetch.push(e)},c.prototype.unsubscribe=function(e){if(this.wantSubscribe=!1,this.subscribed=!1,this.connection.canSend){var r=this.connection.sendUnsubscribe(this);s(this.inflightUnsubscribe,r,e)}else e&&t.nextTick(e)},c.prototype.flush=function(){this.connection.canSend&&!this.inflightOp&&!this.paused&&this.pendingOps.length&&this._sendOp()},c.prototype._otApply=function(e,t){if(e.op){if(!this.type)throw new a(l.ERR_DOC_DOES_NOT_EXIST,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);if(!t&&this.type===i.defaultType&&e.op.length>1){this.applyStack||(this.applyStack=[]);for(var r=this.applyStack.length,n=0;n<e.op.length;n++){for(var o={op:[e.op[n]]},u=r;u<this.applyStack.length;u++){var c=f(this.applyStack[u],o);if(c)return this._hardRollback(c)}this.emit("before op",o.op,t),this.data=this.type.apply(this.data,o.op),this.emit("op",o.op,t)}return void this._popApplyStack(r)}return this.emit("before op",e.op,t),this.data=this.type.apply(this.data,e.op),void this.emit("op",e.op,t)}if(e.create)return this._setType(e.create.type),this.data=this.type.deserialize?this.type.createDeserialized?this.type.createDeserialized(e.create.data):this.type.deserialize(this.type.create(e.create.data)):this.type.create(e.create.data),void this.emit("create",t);if(e.del){var s=this.data;return this._setType(null),void this.emit("del",s,t)}},c.prototype._sendOp=function(){if(this.connection.canSend){var e=this.connection.id;this.inflightOp||(this.inflightOp=this.pendingOps.shift());var t=this.inflightOp;if(!t){var r=new a(l.ERR_INFLIGHT_OP_MISSING,"No op to send on call to _sendOp");return this.emit("error",r)}if(t.sentAt=Date.now(),t.retries=null==t.retries?0:t.retries+1,null==t.seq){if(this.connection.seq>=u.MAX_SAFE_INTEGER)return this.emit("error",new a(l.ERR_CONNECTION_SEQ_INTEGER_OVERFLOW,"Connection seq has exceeded the max safe integer, maybe from being open for too long"));t.seq=this.connection.seq++}this.connection.sendOp(this,t),null==t.src&&(t.src=e)}},c.prototype._submit=function(e,r,n){if(r||(r=!0),e.op){if(!this.type){var o=new a(l.ERR_DOC_DOES_NOT_EXIST,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return n?n(o):this.emit("error",o)}this.type.normalize&&(e.op=this.type.normalize(e.op))}try{this._pushOp(e,n),this._otApply(e,r)}catch(e){return this._hardRollback(e)}var i=this;t.nextTick((function(){i.flush()}))},c.prototype._pushOp=function(e,t){if(this.applyStack)this.applyStack.push(e);else{var r=this._tryCompose(e);if(r)return void r.callbacks.push(t)}e.type=this.type,e.callbacks=[t],this.pendingOps.push(e)},c.prototype._popApplyStack=function(e){if(e>0)this.applyStack.length=e;else{var t=this.applyStack[0];if(this.applyStack=null,t)if(-1!==(n=this.pendingOps.indexOf(t)))for(var r=this.pendingOps.splice(n),n=0;n<r.length;n++){t=r[n];var o=this._tryCompose(t);o?o.callbacks=o.callbacks.concat(t.callbacks):this.pendingOps.push(t)}}},c.prototype._tryCompose=function(e){if(!this.preventCompose){var t=this.pendingOps[this.pendingOps.length-1];if(t&&!t.sentAt)return t.create&&e.op?(t.create.data=this.type.apply(t.create.data,e.op),t):t.op&&e.op&&this.type.compose?(t.op=this.type.compose(t.op,e.op),t):void 0}},c.prototype.submitOp=function(e,t,r){"function"==typeof t&&(r=t,t=null);var n={op:e},o=t&&t.source;this._submit(n,o,r)},c.prototype.create=function(e,t,r,n){if("function"==typeof t?(n=t,r=null,t=null):"function"==typeof r&&(n=r,r=null),t||(t=i.defaultType.uri),this.type){var o=new a(l.ERR_DOC_ALREADY_CREATED,"Document already exists");return n?n(o):this.emit("error",o)}var u={create:{type:t,data:e}},c=r&&r.source;this._submit(u,c,n)},c.prototype.del=function(e,t){if("function"==typeof e&&(t=e,e=null),!this.type){var r=new a(l.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");return t?t(r):this.emit("error",r)}var n=e&&e.source;this._submit({del:!0},n,t)},c.prototype.pause=function(){this.paused=!0},c.prototype.resume=function(){this.paused=!1,this.flush()},c.prototype._opAcknowledged=function(e){if(this.inflightOp.create)this.version=e.v;else if(e.v!==this.version)return o.warn("Invalid version from server. Expected: "+this.version+" Received: "+e.v,e),this.fetch();this.version++,this._clearInflightOp()},c.prototype._rollback=function(e){var t=this.inflightOp;if(t.op&&t.type.invert){t.op=t.type.invert(t.op);for(var r=0;r<this.pendingOps.length;r++){var n=f(this.pendingOps[r],t);if(n)return this._hardRollback(n)}try{this._otApply(t,!1)}catch(e){return this._hardRollback(e)}this._clearInflightOp(e)}else this._hardRollback(e)},c.prototype._hardRollback=function(e){var t=[];this.inflightOp&&t.push(this.inflightOp),t=t.concat(this.pendingOps),this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var r=this;this.fetch((function(){for(var n=!!t.length,o=0;o<t.length;o++)n=d(t[o].callbacks,e)&&n;if(e&&!n)return r.emit("error",e)}))},c.prototype._clearInflightOp=function(e){var t=this.inflightOp;this.inflightOp=null;var r=d(t.callbacks,e);if(this.flush(),this._emitNothingPending(),e&&!r)return this.emit("error",e)}}).call(this,r(150))},function(e,t,r){(function(t){var n=r(3792);function o(e,t,r,o,a,i,u){n.EventEmitter.call(this),this.action=e,this.connection=t,this.id=r,this.collection=o,this.query=a,this.results=null,i&&i.results&&(this.results=i.results,delete i.results),this.extra=void 0,this.options=i,this.callback=u,this.ready=!1,this.sent=!1}e.exports=o,n.mixin(o),o.prototype.hasPending=function(){return!this.ready},o.prototype.send=function(){if(this.connection.canSend){var e={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(e.o=this.options),this.results){for(var t=[],r=0;r<this.results.length;r++){var n=this.results[r];t.push([n.id,n.version])}e.r=t}this.connection.send(e),this.sent=!0}},o.prototype.destroy=function(e){this.connection.canSend&&"qs"===this.action&&this.connection.send({a:"qu",id:this.id}),this.connection._destroyQuery(this),e&&t.nextTick(e)},o.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1},o.prototype._handleFetch=function(e,t,r){this.connection._destroyQuery(this),this._handleResponse(e,t,r)},o.prototype._handleSubscribe=function(e,t,r){this._handleResponse(e,t,r)},o.prototype._handleResponse=function(e,t,r){var n=this.callback;if(this.callback=null,e)return this._finishResponse(e,n);if(!t)return this._finishResponse(null,n);var o=this,a=1,i=function(e){if(e)return o._finishResponse(e,n);--a||o._finishResponse(null,n)};if(Array.isArray(t))a+=t.length,this.results=this._ingestSnapshots(t,i),this.extra=r;else for(var u in t){a++;var l=t[u];this.connection.get(l.c||this.collection,u).ingestSnapshot(l,i)}i()},o.prototype._ingestSnapshots=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=e[n],a=this.connection.get(o.c||this.collection,o.d);a.ingestSnapshot(o,t),r.push(a)}return r},o.prototype._finishResponse=function(e,t){if(this.emit("ready"),this.ready=!0,e)return this.connection._destroyQuery(this),t?t(e):this.emit("error",e);t&&t(null,this.results,this.extra)},o.prototype._handleError=function(e){this.emit("error",e)},o.prototype._handleDiff=function(e){for(var t=0;t<e.length;t++){"insert"===(r=e[t]).type&&(r.values=this._ingestSnapshots(r.values))}for(t=0;t<e.length;t++){var r;switch((r=e[t]).type){case"insert":var n=r.values;Array.prototype.splice.apply(this.results,[r.index,0].concat(n)),this.emit("insert",n,r.index);break;case"remove":var o=r.howMany||1,a=this.results.splice(r.index,o);this.emit("remove",a,r.index);break;case"move":o=r.howMany||1;var i=this.results.splice(r.from,o);Array.prototype.splice.apply(this.results,[r.to,0].concat(i)),this.emit("move",i,r.from,r.to)}}this.emit("changed",this.results)},o.prototype._handleExtra=function(e){this.extra=e,this.emit("extra",e)}}).call(this,r(150))},function(e,t,r){var n=r(4335),o=r(3792);function a(e,t,r,n,a){if(o.EventEmitter.call(this),"function"!=typeof a)throw new Error("Callback is required for SnapshotRequest");this.requestId=t,this.connection=e,this.id=n,this.collection=r,this.callback=a,this.sent=!1}e.exports=a,o.mixin(a),a.prototype.send=function(){this.connection.canSend&&(this.connection.send(this._message()),this.sent=!0)},a.prototype._onConnectionStateChanged=function(){this.connection.canSend?this.sent||this.send():this.sent=!1},a.prototype._handleResponse=function(e,t){if(this.emit("ready"),e)return this.callback(e);var r=t.meta?t.meta:null,o=new n(this.id,t.v,t.type,t.data,r);this.callback(null,o)}},,,function(e,t,r){"use strict";r(59);var n=r(30),o=(r(37),r(8)),a=(r(44),r(10)),i=r(0),u=r.n(i),l=r(2),c=r.n(l),s=r(189),f=r(159),d=r(1313),p=r(1327);r(1459);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(){y=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==h(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(h(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function b(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e){var t=m(Object(i.useState)(e.doc.title),2),r=t[0],l=t[1],c=m(Object(i.useState)(-1),2),s=c[0],h=c[1],v=function(){var t,n=(t=y().mark((function t(){var n,o,i,l,c,p,h;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.book,o=e.doc,i=e.docletType,l=e.onOpenTemplateSelector,c=e.inEdit,s===f.TYPE.BOOK?(p=n.id,h=f.TARGET_TYPE.BOOK):s===f.TYPE.PERSONAL?(p=window.appData.me.id,h=f.TARGET_TYPE.USER):(p=n.user_id,h=f.TARGET_TYPE.USER),Object(d.e)(p,h,s,i,r,o.id,c).then((function(){var t=u.a.createElement("span",null,__("模板已创建")," ",u.a.createElement("a",{onClick:l},__("查看全部模板")));a.a.success(t),e.onCancel()})).catch((function(e){console.error(e)}));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){b(a,n,o,i,u,"next",e)}function u(e){b(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),g=e.group,_=e.organization,w=e.isDesktop;return u.a.createElement(n.a,{className:"modal-without-padding",visible:e.visible,style:{top:78},width:"368px",onCancel:e.onCancel,title:e.modalTitle,footer:u.a.createElement(u.a.Fragment,null,u.a.createElement(o.a,{onClick:e.onCancel},__("取消")),u.a.createElement(o.a,{type:"primary",onClick:v},__("确定")))},u.a.createElement(p.a,{newTemplateName:r,onSetNewTemplateName:l,onSetSelectedScope:h,group:g,organization:_,isDesktop:w}))}g.propTypes={visible:c.a.bool,onCancel:c.a.func,modalTitle:c.a.string,docletType:c.a.string,doc:c.a.object,book:c.a.object,group:c.a.object,organization:c.a.object,isDesktop:c.a.bool,onOpenTemplateSelector:c.a.func,templateProxy:c.a.object,docProxy:c.a.object,inEdit:c.a.bool},t.a=Object(s.b)(g,!0)},function(e,t){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},function(e,t,r){"use strict";function n(){this.__rules__=[],this.__cache__=null}n.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},n.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach((function(e){e.enabled&&e.alt.forEach((function(e){t.indexOf(e)<0&&t.push(e)}))})),e.__cache__={},t.forEach((function(t){e.__cache__[t]=[],e.__rules__.forEach((function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||e.__cache__[t].push(r.fn))}))}))},n.prototype.at=function(e,t,r){var n=this.__find__(e),o=r||{};if(-1===n)throw new Error("Parser rule not found: "+e);this.__rules__[n].fn=t,this.__rules__[n].alt=o.alt||[],this.__cache__=null},n.prototype.before=function(e,t,r,n){var o=this.__find__(e),a=n||{};if(-1===o)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o,0,{name:t,enabled:!0,fn:r,alt:a.alt||[]}),this.__cache__=null},n.prototype.after=function(e,t,r,n){var o=this.__find__(e),a=n||{};if(-1===o)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o+1,0,{name:t,enabled:!0,fn:r,alt:a.alt||[]}),this.__cache__=null},n.prototype.push=function(e,t,r){var n=r||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:n.alt||[]}),this.__cache__=null},n.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var r=[];return e.forEach((function(e){var n=this.__find__(e);if(n<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!0,r.push(e)}),this),this.__cache__=null,r},n.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach((function(e){e.enabled=!1})),this.enable(e,t)},n.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var r=[];return e.forEach((function(e){var n=this.__find__(e);if(n<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!1,r.push(e)}),this),this.__cache__=null,r},n.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},e.exports=n},function(e,t,r){"use strict";function n(e,t,r){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}n.prototype.attrIndex=function(e){var t,r,n;if(!this.attrs)return-1;for(r=0,n=(t=this.attrs).length;r<n;r++)if(t[r][0]===e)return r;return-1},n.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},n.prototype.attrSet=function(e,t){var r=this.attrIndex(e),n=[e,t];r<0?this.attrPush(n):this.attrs[r]=n},n.prototype.attrGet=function(e){var t=this.attrIndex(e),r=null;return t>=0&&(r=this.attrs[t][1]),r},n.prototype.attrJoin=function(e,t){var r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t},e.exports=n},,,,,function(e,t,r){"use strict";r.r(t),r.d(t,"v1",(function(){return c})),r.d(t,"v3",(function(){return _})),r.d(t,"v4",(function(){return w.a})),r.d(t,"v5",(function(){return P})),r.d(t,"NIL",(function(){return j})),r.d(t,"version",(function(){return C})),r.d(t,"validate",(function(){return s.a})),r.d(t,"stringify",(function(){return i.a})),r.d(t,"parse",(function(){return f}));var n,o,a=r(3733),i=r(3559),u=0,l=0;var c=function(e,t,r){var c=t&&r||0,s=t||new Array(16),f=(e=e||{}).node||n,d=void 0!==e.clockseq?e.clockseq:o;if(null==f||null==d){var p=e.random||(e.rng||a.a)();null==f&&(f=n=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=o=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:Date.now(),y=void 0!==e.nsecs?e.nsecs:l+1,b=h-u+(y-l)/1e4;if(b<0&&void 0===e.clockseq&&(d=d+1&16383),(b<0||h>u)&&void 0===e.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=h,l=y,o=d;var m=(1e4*(268435455&(h+=122192928e5))+y)%4294967296;s[c++]=m>>>24&255,s[c++]=m>>>16&255,s[c++]=m>>>8&255,s[c++]=255&m;var v=h/4294967296*1e4&268435455;s[c++]=v>>>8&255,s[c++]=255&v,s[c++]=v>>>24&15|16,s[c++]=v>>>16&255,s[c++]=d>>>8|128,s[c++]=255&d;for(var g=0;g<6;++g)s[c+g]=f[g];return t||Object(i.a)(s)},s=r(3564);var f=function(e){if(!Object(s.a)(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};var d=function(e,t,r){function n(e,n,o,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=f(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+e.length);if(u.set(n),u.set(e,n.length),(u=r(u))[6]=15&u[6]|t,u[8]=63&u[8]|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=u[l];return o}return Object(i.a)(u)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};function p(e){return 14+(e+64>>>9<<4)+1}function h(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function y(e,t,r,n,o,a){return h((i=h(h(t,e),h(n,a)))<<(u=o)|i>>>32-u,r);var i,u}function b(e,t,r,n,o,a,i){return y(t&r|~t&n,e,t,o,a,i)}function m(e,t,r,n,o,a,i){return y(t&n|r&~n,e,t,o,a,i)}function v(e,t,r,n,o,a,i){return y(t^r^n,e,t,o,a,i)}function g(e,t,r,n,o,a,i){return y(r^(t|~n),e,t,o,a,i)}var _=d("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",o=0;o<r;o+=8){var a=e[o>>5]>>>o%32&255,i=parseInt(n.charAt(a>>>4&15)+n.charAt(15&a),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[p(t)-1]=t;for(var r=1732584193,n=-271733879,o=-1732584194,a=271733878,i=0;i<e.length;i+=16){var u=r,l=n,c=o,s=a;r=b(r,n,o,a,e[i],7,-680876936),a=b(a,r,n,o,e[i+1],12,-389564586),o=b(o,a,r,n,e[i+2],17,606105819),n=b(n,o,a,r,e[i+3],22,-1044525330),r=b(r,n,o,a,e[i+4],7,-176418897),a=b(a,r,n,o,e[i+5],12,1200080426),o=b(o,a,r,n,e[i+6],17,-1473231341),n=b(n,o,a,r,e[i+7],22,-45705983),r=b(r,n,o,a,e[i+8],7,1770035416),a=b(a,r,n,o,e[i+9],12,-1958414417),o=b(o,a,r,n,e[i+10],17,-42063),n=b(n,o,a,r,e[i+11],22,-1990404162),r=b(r,n,o,a,e[i+12],7,1804603682),a=b(a,r,n,o,e[i+13],12,-40341101),o=b(o,a,r,n,e[i+14],17,-1502002290),r=m(r,n=b(n,o,a,r,e[i+15],22,1236535329),o,a,e[i+1],5,-165796510),a=m(a,r,n,o,e[i+6],9,-1069501632),o=m(o,a,r,n,e[i+11],14,643717713),n=m(n,o,a,r,e[i],20,-373897302),r=m(r,n,o,a,e[i+5],5,-701558691),a=m(a,r,n,o,e[i+10],9,38016083),o=m(o,a,r,n,e[i+15],14,-660478335),n=m(n,o,a,r,e[i+4],20,-405537848),r=m(r,n,o,a,e[i+9],5,568446438),a=m(a,r,n,o,e[i+14],9,-1019803690),o=m(o,a,r,n,e[i+3],14,-187363961),n=m(n,o,a,r,e[i+8],20,1163531501),r=m(r,n,o,a,e[i+13],5,-1444681467),a=m(a,r,n,o,e[i+2],9,-51403784),o=m(o,a,r,n,e[i+7],14,1735328473),r=v(r,n=m(n,o,a,r,e[i+12],20,-1926607734),o,a,e[i+5],4,-378558),a=v(a,r,n,o,e[i+8],11,-2022574463),o=v(o,a,r,n,e[i+11],16,1839030562),n=v(n,o,a,r,e[i+14],23,-35309556),r=v(r,n,o,a,e[i+1],4,-1530992060),a=v(a,r,n,o,e[i+4],11,1272893353),o=v(o,a,r,n,e[i+7],16,-155497632),n=v(n,o,a,r,e[i+10],23,-1094730640),r=v(r,n,o,a,e[i+13],4,681279174),a=v(a,r,n,o,e[i],11,-358537222),o=v(o,a,r,n,e[i+3],16,-722521979),n=v(n,o,a,r,e[i+6],23,76029189),r=v(r,n,o,a,e[i+9],4,-640364487),a=v(a,r,n,o,e[i+12],11,-421815835),o=v(o,a,r,n,e[i+15],16,530742520),r=g(r,n=v(n,o,a,r,e[i+2],23,-995338651),o,a,e[i],6,-198630844),a=g(a,r,n,o,e[i+7],10,1126891415),o=g(o,a,r,n,e[i+14],15,-1416354905),n=g(n,o,a,r,e[i+5],21,-57434055),r=g(r,n,o,a,e[i+12],6,1700485571),a=g(a,r,n,o,e[i+3],10,-1894986606),o=g(o,a,r,n,e[i+10],15,-1051523),n=g(n,o,a,r,e[i+1],21,-2054922799),r=g(r,n,o,a,e[i+8],6,1873313359),a=g(a,r,n,o,e[i+15],10,-30611744),o=g(o,a,r,n,e[i+6],15,-1560198380),n=g(n,o,a,r,e[i+13],21,1309151649),r=g(r,n,o,a,e[i+4],6,-145523070),a=g(a,r,n,o,e[i+11],10,-1120210379),o=g(o,a,r,n,e[i+2],15,718787259),n=g(n,o,a,r,e[i+9],21,-343485551),r=h(r,u),n=h(n,l),o=h(o,c),a=h(a,s)}return[r,n,o,a]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(p(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))})),w=r(3840);function O(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function E(e,t){return e<<t|e>>>32-t}var P=d("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,i=Math.ceil(a/16),u=new Array(i),l=0;l<i;++l){for(var c=new Uint32Array(16),s=0;s<16;++s)c[s]=e[64*l+4*s]<<24|e[64*l+4*s+1]<<16|e[64*l+4*s+2]<<8|e[64*l+4*s+3];u[l]=c}u[i-1][14]=8*(e.length-1)/Math.pow(2,32),u[i-1][14]=Math.floor(u[i-1][14]),u[i-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<i;++f){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=u[f][p];for(var h=16;h<80;++h)d[h]=E(d[h-3]^d[h-8]^d[h-14]^d[h-16],1);for(var y=r[0],b=r[1],m=r[2],v=r[3],g=r[4],_=0;_<80;++_){var w=Math.floor(_/20),P=E(y,5)+O(w,b,m,v)+g+t[w]+d[_]>>>0;g=v,v=m,m=E(b,30)>>>0,b=y,y=P}r[0]=r[0]+y>>>0,r[1]=r[1]+b>>>0,r[2]=r[2]+m>>>0,r[3]=r[3]+v>>>0,r[4]=r[4]+g>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),j="00000000-0000-0000-0000-000000000000";var C=function(e){if(!Object(s.a)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},function(e,t,r){"use strict";r.d(t,"b",(function(){return O})),r.d(t,"c",(function(){return E})),r.d(t,"d",(function(){return P})),r.d(t,"a",(function(){return j}));r(1040);var n=r(538),o=r(0),a=r.n(o),i=r(3890),u=r(4072),l=r(1514),c=r(3880),s=r(3948),f=r(3744),d=function(e){var t=e.content,r=e.actions;return a.a.createElement("div",null,a.a.createElement("div",{className:f.a.descCard},a.a.createElement(l.a,null,Object(s.a)(t))),r&&a.a.createElement(c.a,{actions:r}))},p=r(532),h=function(e){var t=e.img,r=e.actions,n=Object(p.f)((function(e){return e.group}));return a.a.createElement("div",null,a.a.createElement("div",{className:f.a.mediaCard},a.a.createElement("img",{className:f.a.mediaCardImg,src:t})),a.a.createElement(c.a,{actions:r,group:n}))};function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(){var e=y(Object(o.useState)(!1),2),t=e[0],r=e[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:f.a.button,onClick:function(){return r(!0)}},__("立即体验")),t&&a.a.createElement(i.default,{isModalVisible:t,handleCancel:function(){return r(!1)}}))}var v=window.appData,g=v.isYuque,_=v.defaultSpaceHost,w=v.me,O={route:{path:["/:group","/r/:group"],key:"1"},collapseProps:{defaultActiveKey:"1"},header:{title:__("欢迎来到团队"),desc:__("在团队里，和成员一起协作，让过程有沉淀，沟通有质量，执行更有序。")},collapseList:[{key:"1",title:__("用知识库管理团队文档和知识"),content:{img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*-vF0Qoz_udUAAAAAAAAAAAAAARQnAQ",render:h,actions:[{render:function(){return a.a.createElement(m,null)}},{title:__("了解更多"),onClick:function(){return window.open(g?"https://www.yuque.com/yuque/thyzgp/repository":"https://yuque.antfin.com/lark/bsgp0v/repository")}}]}},{key:"2",title:__("用任务将想法变成可执行的行动"),content:{img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*y1aUQbzdKSoAAAAAAAAAAAAAARQnAQ",render:h,actions:[{title:__("立即体验"),onClick:function(e){var t=e.history,r=e.group;t.push("/r/".concat(r.login,"/issues?clickMark=createModal"))}},{title:__("了解更多"),onClick:function(){return window.open(g?"https://www.yuque.com/yuque/rvzzxz/cmcg4n":"https://yuque.antfin.com/lark/zp2v9g/lgmx3y")}}]}},{key:"3",title:__("用话题和成员进行重要议题讨论"),hidden:function(e){var t,r=e.group;return null==r||null===(t=r.settings)||void 0===t?void 0:t.thread_enable},content:{img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*MUArR6wqhwwAAAAAAAAAAAAAARQnAQ",render:h,actions:[{title:__("立即体验"),onClick:function(e){var t=e.history,r=e.group;return t.push("/r/".concat(r.login,"/thread?clickMark=createModal"))}},{title:__("了解更多"),onClick:function(){return window.open(g?"https://www.yuque.com/yuque/rvzzxz/pe0o80":"https://yuque.antfin.com/lark/zp2v9g/ppg4yz")}}]}},{key:"4",title:__("邀请成员加入团队协作"),content:{img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*FGX_S6zzMBIAAAAAAAAAAAAAARQnAQ",render:h,actions:[{title:__("立即体验"),onClick:function(e){var t=e.history,r=e.group;return t.push("/".concat(r.login,"/members"))}},{title:__("了解更多"),onClick:function(){return window.open(g?"https://www.yuque.com/yuque/rvzzxz/mgo5il":"https://yuque.antfin.com/lark/zp2v9g/eri1hn")}}]}}]},E={route:{path:["/dashboard/org_wiki"],key:"feature_org_wiki_introduce"},collapseProps:{defaultActiveKey:"1"},header:{title:__("欢迎来到公共区")},collapseList:[{key:"1",title:__("公共区是组织内知识沉淀的阵地"),content:{img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*feHUQqTfcXoAAAAAAAAAAAAAARQnAQ",render:u.a,content:{render:function(){return a.a.createElement(n.a,null,__("公共区是面向空间全员的，让组织内的知识得以系统性地沉淀并创造价值。"))}},actions:[{title:__("了解更多"),onClick:function(){return window.open("https://www.yuque.com/yuque/rvzzxz/dthulx")}}]}},{key:"2",title:__("用知识库管理空间文档和知识"),content:{img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*dBmQQZ5DnpIAAAAAAAAAAAAAARQnAQ",render:u.a,content:{render:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(n.a,{style:{marginBottom:8}},__("知识库就像书一样，通过强大的目录功能，让多篇文档结构化地呈现。")))}},actions:[{render:function(){return a.a.createElement(m,null)}},{title:__("了解更多"),onClick:function(){return window.open("https://www.yuque.com/yuque/thyzgp/repository")}}]}}]},P={route:{path:["/:any"],key:"feature_org_wiki_introduce"},collapseProps:{defaultActiveKey:"1"},header:{title:__("欢迎来到语雀"),desc:__("使用语雀开启个人知识管理 3.0 之旅吧")},collapseList:[{key:"1",title:__("用小记记录碎片化内容"),content:{img:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*43l-Qr5Iz3cAAAAAAAAAAAAADvuFAQ/original",render:u.a,content:{render:function(){return null}},actions:[{title:__("立即体验"),onClick:function(){return window.open("".concat(_,"/dashboard/notes"))}},{title:__("了解更多"),onClick:function(){window.open(g?"https://www.yuque.com/yuque/ekrzd1/dqdt6f":"https://yuque.antfin.com/lark/note/faq")}}]}},{key:"2",title:__("用知识库沉淀结构化知识"),content:{img:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*feHUQqTfcXoAAAAAAAAAAAAAARQnAQ",render:u.a,content:{render:function(){return null}},actions:[{render:function(){return a.a.createElement(m,null)}},{title:__("了解更多"),onClick:function(){window.open(g?"https://www.yuque.com/yuque/thyzgp/repository":"https://yuque.antfin.com/lark/bsgp0v/repository")}}]}},{key:"3",title:__("开启我的花园分享知识"),content:{img:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*ljInRZpwD6UAAAAAAAAAAAAAARQnAQ",render:u.a,content:{render:function(){return null}},actions:[{title:__("立即体验"),onClick:function(){return window.open("".concat(_,"/").concat(w.login))}},{title:__("了解更多"),onClick:function(){window.open(g?"https://www.yuque.com/yuque/mgcsc6/sc1leq":"https://yuque.antfin.com/lark/xwhu77/lhqpnw")}}]}}]},j={route:{path:["/:group"],key:"feature_garden_introduce"},collapseProps:{defaultActiveKey:"1"},header:{title:__("欢迎来到花园")},collapseList:[{key:"1",title:__("「我的花园」是什么？"),content:{img:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*ljInRZpwD6UAAAAAAAAAAAAAARQnAQ",render:u.a,content:{render:function(){return a.a.createElement(n.a,null,__("这是你的私人花园，也是你对世界的一扇窗。在这里尽情地分享知识、展现个性、表达自我，并连接其他知识工作者，大家一起共同成长。"))}},isGarden:!0,actions:[{title:__("了解理念"),onClick:function(){return window.open("https://www.yuque.com/yuque/mgcsc6/xtgy5c")}}]}},{key:"2",title:__("如何把「私密」花园公开？"),content:{render:d,content:{render:function(){return a.a.createElement(n.a,null,__("花园默认是「私密」的，语雀会员可以把花园对全互联网的访客开放。正在打理阶段的花园可以准备好后再进行公开。"))}},actions:[{title:__("详细了解"),onClick:function(){return window.open("https://www.yuque.com/yuque/mgcsc6/nf0giqstfxxcs5n0")}}]}},{key:"3",title:__("如何使用「我的花园」？"),content:{render:d,content:{render:function(){return a.a.createElement(n.a,null,__("你可以写一个文档介绍自己，并把多个公开知识库展示在花园中。「我的花园」对互联网公开后，喜欢你的朋友会来关注你。"))}},actions:[{title:__("了解添加知识库"),onClick:function(){return window.open("https://www.yuque.com/yuque/mgcsc6/yr7g5m")}},{title:__("了解自定义介绍"),onClick:function(){return window.open("https://www.yuque.com/yuque/mgcsc6/obl3qs")}}]}},{key:"4",title:__("如何使用「更新」？"),content:{render:d,content:{render:function(){return a.a.createElement(n.a,null,__("互联网公开的文档和小记可以被分享到花园-「更新」。同时，如果「我的花园」是对互联网公开的，那么分享的公开文档和小记也会推送到粉丝的「逛逛-关注」里。"),a.a.createElement("div",null,a.a.createElement("a",{href:"",target:"_blank"},__(""))))}},actions:[{title:__("详细了解"),onClick:function(){return window.open("https://www.yuque.com/yuque/mgcsc6/nl73wd")}}]}}]}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));r(715);var n=r(395),o=(r(57),r(13)),a=(r(37),r(8)),i=(r(44),r(10)),u=(r(144),r(60)),l=r(0),c=r(1531),s=r(1539),f=r(932),d=r(63),p=r(5),h=r.n(p),y=r(718),b=r.n(y),m=r(526),v=r(3476),g=r(215),_=r(3641),w=r(1515),O=r(11),E=r(34),P=r(3527);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function C(){C=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(D([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==j(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(j(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function k(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){k(a,n,o,i,u,"next",e)}function u(e){k(a,n,o,i,u,"throw",e)}i(void 0)}))}}function A(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(e){var t,r,p=e.bookPublicSet,y=e.panelType,j=e.panelTitle,k=e.share,x=e.belongs,N=e.organization,T=e.group,D=e.book,L=e.me,R=e.shareViewType,I=e.handlePasswordChange,M=e.handleScopeChange,F=e.handleSearchChange,B=e.onBack,U=l.useMemo((function(){return Object(w.d)(k,R,T,D)}),[k,R,T,D]).privacy,H=Object(g.a)(),V={scopeSet:function(){var e=v.q[x],t=e.desc,r=e.actions,n=x===m.a.ORG&&(0===(null==N?void 0:N.share_to_outside_enable)||!d.a.isPremium(N));return l.createElement(l.Fragment,null,l.createElement("p",{className:P.a.titleDesc},t),r.map((function(e){var t;return l.createElement(u.a,{key:e.value,title:e.value===O.PRIVACY.public&&n?null===(t=e.tip)||void 0===t?void 0:t.call(e,N):"",placement:"bottomLeft",overlayInnerStyle:{width:"200px"},autoAdjustOverflow:!0},function(e){return l.createElement("div",{className:h()(P.a.contentArea,P.a.selectorItem,A({},P.a.disabledItem,e.value===O.PRIVACY.public&&n)),onClick:function(){U===e.value||e.value===O.PRIVACY.public&&n||null==M||M(e.value)}},l.createElement("span",null,e.label),U===e.value&&l.createElement(c.default,{className:P.a.selectorIcon,width:16,height:16}))}(e))})))},passwordSet:function(){var e=Object(w.c)(k,R,T,D),t=e.currentPassword,r=e.isInheritBookPassword,n="";(R===m.b.DOC&&r||R===m.b.BOOK)&&(n=v.o[R]);var c=Object(g.a)()?"https://www.yuque.com/yuque/thyzgp/wgy2sb#ebmU2":"https://yuque.antfin.com/lark/bsgp0v/lrui64#ebmU2",f=__("所属知识库已开启密码，文档无法独立设置。{terms}",{terms:l.createElement("a",{href:c,target:"_blank"},__("查看帮助"))}),d=function(e,t){var r=Object(w.a)(e,R,T,D);if(null!=r&&r.url){b()((null==r?void 0:r.urlWithDesc)||r.url,{format:"text/plain"});var n=t?__("已重置并复制链接和密码"):__("已复制链接和密码"),o=null!=e&&e.password?n:__("已复制链接");i.a.success(o,2)}},y=function(){var e=S(C().mark((function e(){var r;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==I?void 0:I(t?O.ENCRYPTED_PASSWORD_ACTIONS.disabled:O.ENCRYPTED_PASSWORD_ACTIONS.enabled);case 3:if(!(r=e.sent)){e.next=8;break}if(!t){e.next=7;break}return e.abrupt("return",i.a.success(__("设置成功"),1));case 7:return e.abrupt("return",d(r));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=S(C().mark((function e(){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==I?void 0:I(O.ENCRYPTED_PASSWORD_ACTIONS.enabled);case 3:(t=e.sent)&&d(t,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=l.createElement("div",{className:P.a.contentArea},t?l.createElement("div",{className:h()(P.a.pwdBlock,A({},P.a.bookPublicSet,p))},l.createElement("span",{"data-testid":"password-text",className:P.a.passwordText},__("密码：{password}",{password:t})),l.createElement(a.a,{type:"text",disabled:r,onClick:_,className:P.a.resetBtn},l.createElement(s.default,{className:P.a.resetIcon,width:12,height:12}),__("重置"))):l.createElement(o.a,{className:h()(P.a.pwdLink,A({},P.a.bookPublicSet,p)),disabled:!0,placeholder:__("点击开启生成随机密码")}),l.createElement(a.a,{className:P.a.pwdBtn,size:"large",type:"primary",disabled:r,onClick:y},t?__("关闭"):__("开启")));return l.createElement(l.Fragment,null,l.createElement("p",{className:h()(P.a.titleDesc,A({},P.a.bookPublicSet,p))},n),l.createElement(u.a,{title:r?f:"",placement:"bottomRight",autoAdjustOverflow:!0},E))},searchSet:function(){var e=Object(w.b)(k,R,T,D),t=e.currentIndexedLevel,r=e.isInheritBookIndex,o=v.r[R][x],a=o.desc,i=o.action,c=o.tip,s=l.createElement("div",{className:P.a.contentArea},l.createElement("span",{className:P.a.switchTitle},i),l.createElement(n.a,{disabled:r,onChange:F,checked:1===t}));return l.createElement(l.Fragment,null,l.createElement("p",{className:h()(P.a.titleDesc,A({},P.a.bookPublicSet,p))},a),l.createElement(u.a,{title:r?c:"",placement:"bottomRight",autoAdjustOverflow:!0},s))},shareExpiredTimeSet:function(){var e=!(!N||null==N||!N.id),t=R===m.b.NOTE||!e&&T&&"User"===(null==T?void 0:T.type)&&T.id===L.id,r=Object(w.e)(k,R,e);if(r){var n=r.startTime,o=r.expiredTime,a=(v.s[x]||"").desc;if(!H)return l.createElement("p",{className:P.a.titleDesc},a);var i=[{label:__("半年（{startTime} - {expiredTime}）",{startTime:n,expiredTime:o}),value:o},{label:__("永久有效"),value:null}],u=function(e){return l.createElement(l.Fragment,null,l.createElement("div",{onClick:function(){return function(e){var r;null===e.value&&t&&(null===(r=window.__member_message_ref)||void 0===r||r.current.showMemberIntro(E.LIMIT_SCENE.share_public))}(e)},className:h()(P.a.contentArea,P.a.selectorItem,A({},P.a.notOwner,!t))},l.createElement("span",{className:P.a.shareTime},e.label,null===e.value&&l.createElement(_.a,{className:P.a.memberAbleIcon,noTooltip:!0,isYuque:Object(g.a)(),group:T,organization:N})),e.value===o&&l.createElement(c.default,{className:P.a.selectorIcon,width:16,height:16})),null===e.value&&!t&&l.createElement("span",{className:P.a.shareNotOwner},__("请联系知识库所有者购买会员")))};return l.createElement(l.Fragment,null,l.createElement("p",{className:P.a.titleDesc},a),i.map((function(e){return u(e)})))}}};return p?l.createElement("div",{className:h()(P.a.shareDetailSettingPanel,P.a.bookPublicSetting)},l.createElement("div",{className:P.a.bookPublicTitle},j),null===(r=V[y])||void 0===r?void 0:r.call(V)):l.createElement("div",{className:P.a.shareDetailSettingPanel},l.createElement("div",{className:P.a.title,onClick:B},l.createElement(f.default,{className:P.a.backIcon,width:20,height:20}),j),null===(t=V[y])||void 0===t?void 0:t.call(V))}},function(e,t,r){"use strict";var n=r(0);t.a=function(e,t){Object(n.useEffect)((function(){if(e){var r=function(e){return e.preventDefault(),t&&(e.returnValue=t),t};return window.addEventListener("beforeunload",r),function(){return window.removeEventListener("beforeunload",r)}}}),[t,e])}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(4070),o=r(88);function a(e){var t=[],r={};if(e.startsWith("<!doctype html>"))t.push(e.substring(15));else try{var a=JSON.parse(e.substring(15));t=a.htmls,r=a.options}catch(t){o.a.logError(t,"JSON.parse error when contentToSheet htmlOrJSON: ".concat(e))}var i=Object(n.a)(t,r);return{value:JSON.stringify(i)}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return ce})),r.d(t,"b",(function(){return x}));var n=r(113),o=r.n(n),a=r(3775),i=r.n(a),u=r(954),l=r.n(u),c=r(3752),s=r.n(c),f=r(861),d=r.n(f),p=r(1102),h=r.n(p),y=r(3798),b=r.n(y),m=r(164),v=r.n(m),g=r(331),_=r.n(g);function w(e,t){return function(e){for(var t,r=e.rows,n=r.length,o=[],a=[],i=0,u=0,l=0,c=0;c<n;c++){for(var s=r[c].cells,f=0,d=0;d<s.length;d++){var p=s[d],h=p.rowSpan,y=p.colSpan;i+=h*y,f+=y,h>1&&(u+=(h-1)*y)}a[c]=f,0===c&&(t=f),l=Math.max(f,l)}if(b()(i/t)&&t===l){var m=0;if(a.forEach((function(e){m+=l-e})),m!==u){var v=u-m;if(v&&b()(v/l)){for(var g=[],_=0;_<n;_++){for(var w=r[_].cells;o[_+g.length]===l;)g.push(_+g.length);for(var O=_+g.length,E=0;E<w.length;E++){var P=w[E],j=P.rowSpan,C=P.colSpan;if(j>1)for(var k=1;k<j;k++)o[O+k]=(o[O+k]||0)+C}}g.forEach((function(t){e.insertRow(t)}))}}}}(e),function(e){var t=e.rows[0];0===t.cells.length&&t.remove(),e.rows.length>1&&1===t.cells.length&&""===t.cells[0].innerText.trim()&&0===t.cells[0].getElementsByTagName("img").length&&1===t.cells[0].colSpan&&1===t.cells[0].rowSpan&&t.remove()}(e),function(e){Array.from(e.rows).forEach((function(e){var t=e.getAttribute("style"),r=t&&t.match(/mso-xlrowspan:(\d+)/),n=e.getAttribute("height");if(r&&n){var o=parseInt(r[1]);n=parseInt(n)/o||24,e.setAttribute("height",n),e.style.height=n+"px"}if(Array.from(e.cells).forEach((function(t){var r=t.getAttribute("style");if(t.setAttribute("height",n),t.style.height=n+"px",t.colSpan>1&&r&&-1!==r.indexOf("mso-ignore:colspan")){var o=t.colSpan;t.setAttribute("colSpan",1);for(var a=1;a<o;a++){var i=t.cloneNode();e.insertBefore(i,t.nextSibling)}}})),r){var a=parseInt(r[1]);if(a<1e6)for(var i=1;i<a;i++){var u=e.cloneNode();e.parentNode.insertBefore(u,e)}}}))}(e),function(e,t){for(var r=[],n=e.rows,o=n.length,a=100,i=0;i<o;i++){var u=n[i].cells,l=u.length;r[i]=r[i]||[];for(var c=l>16300,s=0;s<l;s++){var f=u[s];if(c&&s>a&&""===f.innerHTML&&O(f))break;a=Math.max(a,s);for(var d=f.rowSpan,p=void 0===d?1:d,y=f.colSpan,b=void 0===y?1:y,m=p>1||b>1,v=s;r[i][v];)v++;if(r[i][v]={rowSpan:p,colSpan:b,isMulti:m,element:f},m)for(var g=p;g>0;){for(var _=b;_>0;){if(1!==_||1!==g){var w=i+g-1,E=v+_-1;r[w]=r[w]||[],r[w][E]={isEmpty:!0,parent:{row:i,col:v}}}_--}g--}}}var P=r.map((function(e){return e.length})),j=Math.max.apply(Math,h()(P));return r.forEach((function(e,r){if(e.length<j)for(var n=j-e.length;n--;)0!==r||t?e.push({rowSpan:1,colSpan:1,isShadow:!0,element:null}):e.unshift({rowSpan:1,colSpan:1,isShadow:!0,element:null});for(var o=0;o<j;o++)e[o]||(e[o]={rowSpan:1,colSpan:1,isShadow:!0,element:null})})),{rows:r.length,cols:j,table:r}}(e,t)}function O(e){for(var t=10;t>0&&e;){if(e.tagName&&"td"===e.tagName.toLowerCase()){if(""!==e.innerHTML)return!1;t-=1}e=e.nextSibling}return!0}var E=/^\s*\(?¥\s*\(?[\d,.]+\)?$/,P=/^#+$/,j=/^\d\.\d+[Ee]\+\d+$/,C=String.fromCharCode(165),k=String.fromCharCode(36),S=String.fromCharCode(8364),A=String.fromCharCode(163);function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;e=function(e){return e.replace(/\\0022/g,"")}(e=function(e,t,r){var n=e.match(/<col[^>]*>/g),o=0;if(n){var a=n[n.length-1].match(/<col[^>]*span=(\d+)[^>]*>/);a&&(o=parseInt(a[1],10))}if(o>r){var i=e.split("</tr>");e=(i=i.map((function(e){var t=e.match(/(\s*<td[^>]*>\s*<\/td>)(\s*)$/);if(t){var r=t[1].repeat(o-30);e.endsWith(r+t[2])&&(e=e.substr(0,e.length-r.length-t[2].length))}return e}))).join("</tr>")}var u=e.match(/\s*<tr[^>]*>\s*(<td[^>]*>\s*<\/td>\s*)+<\/tr>/g);if(u&&u.length>t){var l=e.match(/<td[^>]*>[^<]*[^\s<]+[^<]*<\/td>/g);if(!l)return"<table><tr><td></td></tr></table>";var c=l[l.length-1],s=e.lastIndexOf(c),f=e.slice(0,s+c.length);e=e.slice(s+c.length);var p={};u.forEach((function(e){p[e]=p[e]||{content:e,count:0},p[e].count+=1}));for(var h=Object.values(p),y=(h=d()(h,"count")).length-1;h[y];){var b=h[y];if(b.count>t){var m=b.content.replace(/([*.?+$^[\](){}|/\\])/g,(function(e){return"\\".concat(e)}));e=e.replace(new RegExp(m,"g"),"")}y--}e=f+e}return e}(e,200,200));var a=(new DOMParser).parseFromString(e,"text/html"),u=a.body,c=function(e,t){for(var r=e.length,n=[],o=0;o<r;o++)t(e[o])&&n.push(e[o]);return n}(a.all,(function(e){return"STYLE"===e.tagName}));if(!u)return null;for(var s,f=u.firstChild,p=[],h=[],y={},b={},m=[],v={},g=!1;f;)if(L(f)){var _=W(f,p.length,c,o);_.mergeCells&&(h=h.concat(_.mergeCells)),_.startCell&&(s=_.startCell),_.selectOptions&&Object.assign(v,_.selectOptions),Object.assign(b,_.rows),_.columns&&Object.assign(y,_.columns),p=p.concat(_.table),_.cellsNeedFix&&(m=m.concat(_.cellsNeedFix)),f=z(f),g=!1}else if(U(f))F(f)&&(f.innerHTML=""),R(f)&&(f.innerHTML=f.innerHTML.replace(/\n/g,"<br/>")),f=f.firstChild||z(f),g=!1;else if(M(f)){var w=f.innerText.trim(),O=f.getAttribute("href");T(p,p.length,w,O),g=!1,f=z(f)}else if(I(f)){var E=f.getAttribute("src");D(p,p.length,E,o),g=!1,f=z(f)}else if(V(f))f=f.firstChild||z(f);else if(G(f))g=!1,f=z(f);else if(q(f)){var P=f.data;if(""!==P.trim()||!U(f.parentNode))N(p,g?p.length-1:p.length,P),g=!0;f=z(f)}else f=z(f);var j=function(e){var t={};return e.forEach((function(e,r){e.forEach((function(e,n){e&&0!==Object.keys(e).length&&(t[r]=t[r]||{},0!==Object.keys(e).length&&(t[r][n]=e))}))})),t}(p);h=l()(h,(function(e){return"".concat(e.row,":").concat(e.col)}));var C=i()(p.map((function(e){return e.length})))||20,k={name:r||"Sheet".concat(t+1),rowCount:n?Math.max(p.length,n.rowCount):p.length,colCount:n?Math.max(C,n.colCount):C,data:j,mergeCells:h,rows:b,columns:y,filter:{},index:t,defaults:{}};return s&&(k.startCell=s),Object.keys(v).length>0&&(k.selectOptions=v),m.length>0&&(k.cellsNeedFix=m),k}function N(e,t,r){e[t]=e[t]||[],e[t][0]?e[t][0].value+=""+r:e[t][0]={value:r}}function T(e,t,r,n){e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value={class:"link",text:r,url:n}}function D(e,t,r,n){r=function(e){return e.replace(/\?x-oss-process=image\/resize.+/,"")}(r),e[t]=e[t]||[],e[t][0]=e[t][0]||{},e[t][0].value=n?{class:"image",name:"",src:r}:{class:"image",name:"",status:"needUpload",originSrc:r}}function L(e){return"TABLE"===e.tagName}function R(e){return"PRE"===e.tagName}function I(e){return"IMG"===e.tagName}function M(e){return"A"===e.tagName}function F(e){var t=e.getAttribute("style");return t&&t.startsWith("mso-element")}var B=["BODY","ARTICLE","ASIDE","ADDRESS","DD","DL","FIELDSET","FIGCAPTION","FIGURE","FOOTER","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","P","DIV","PRE","BLOCKQUOTE","UL","OL","LI","TABLE","THEAD","TBODY","TFOOT","SECTION"];function U(e){return 1===e.nodeType&&B.includes(e.tagName)}var H=["B","I","ABBR","CITE","CODE","DFN","DEL","EM","KBD","STRONG","SAMP","A","BDO","Q","SPAN","SUB","SUP","BUTTON","LABEL"];function V(e){return 1===e.nodeType&&H.includes(e.tagName)}function G(e){return"BR"===e.tagName}function q(e){return 3===e.nodeType}function z(e){if(e.nextSibling)return e.nextSibling;for(var t=e.parentNode;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,a=e.cloneNode(!0);document.body.appendChild(a);var i=w(a,n),u={};r&&r.forEach((function(e){document.body.appendChild(e),Object.assign(u,Y(e.innerHTML))}));var l={table:[]},c=a.querySelectorAll("col");if(c.length>0){var s={},f=0;c.forEach((function(e){for(var t=parseInt(e.getAttribute("width")),r=e.span,n=0;n<r&&f<i.cols;)s[f]=0!==t?{size:t}:{size:0,hidden:!0,oldSize:120},f+=1,n+=1})),l.columns=s}var d=Array.from(a.rows);l.rows={},d.forEach((function(e,r){if(0===e.offsetHeight&&r!==d.length-1)l.rows[r+t]={size:0,hidden:!0,oldSize:24};else{var n=Math.max(e.offsetHeight,24)||24,o={size:n};24!==n&&(o.customSize=n),l.rows[r+t]=o}}));var p=a.getAttribute("data-startCell");if(p){var h=p.split(":");l.startCell={row:parseInt(h[0])||0,col:parseInt(h[1])||0}}var y=a.getAttribute("data-selectOptions");if(y)try{l.selectOptions=JSON.parse(decodeURIComponent(y))}catch(e){console.log(e)}return i.table.forEach((function(e,r){l.table[r]=[],e.forEach((function(e,a){if(e.element){var i=function(e,t){var r=e.getAttribute("data-value");if(r)try{var n=JSON.parse(decodeURIComponent(r));if(function(e){return!!e.class&&("link"===e.class?e.text&&e.url:"file"===e.class||"image"===e.class?e.name&&e.src:"checkbox"===e.class?void 0!==e.value:"select"===e.class?e.value&&(e.options||e.optionId):"mention"===e.class?e.value&&e.value[0].id&&e.value[0].login:"formula"===e.class&&void 0!==e.formula)}(n))return n}catch(e){console.log(e)}for(var o=e.querySelectorAll("img"),a=o.length,i=0;i<a;i++){var u=o[i].getAttribute("src");if(u)return t?{class:"image",src:u,name:"image"}:{class:"image",status:"needUpload",originSrc:u,name:"image"}}e.innerHTML=e.innerHTML.replace(/<!--\[if[\s\S]+<!--\[endif\]-->/g,"").replace(/<rt[^>]*>[^<]*<\/rt>/g,"").replace(/\n/g,"").replace(/<br>\s*/g,"\n");var l,c=e.innerHTML.replace(/<[^>]+>/g,"").trim();c="string"!=typeof(l=c)?l:l.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&nbsp;/g," ");var s=e.querySelector("a");return s&&s.getAttribute("href")?{class:"link",text:c.replace(/\n/g,""),url:s.getAttribute("href")}:(c.endsWith(" %")&&(c=c.replace(/ %$/,"%")),c)}(e.element,n),c=function(e){try{var t=window.getComputedStyle(e),r={};1===e.childNodes.length&&"S"===e.childNodes[0].tagName&&(r.strikeThrough=!0);var n=function(e){var t;-1!==e.indexOf("pt")&&(t=parseInt(e,10));var r=12;if(-1!==e.indexOf("em")?r=parseFloat(e,14):-1!==e.indexOf("px")&&(r=parseFloat(e,10)),t=t||Math.round(r/1.3333333),J[t])return t;var n=Object.keys(J).map((function(e){return parseInt(e,10)}));n.sort();for(var o=0;n[o];){if(n[o]>t)return n[o];o++}return n[o-1]}(t.fontSize);return-1!==t.textDecoration.indexOf("underline")&&(r.underline=!0),-1!==t.textDecoration.indexOf("line-through")&&(r.strikeThrough=!0),(n>12||e.style.fontSize&&e.style.fontSize.indexOf("px")>0)&&(r.fontSize=n),["rgba(0, 0, 0)","rgb(0, 0, 0)","rgba(0, 0, 0, 0.65)","rgb(88, 90, 90)"].includes(t.color)||(r.color=t.color),"italic"===t.fontStyle&&(r.fontStyle=t.fontStyle),"normal"===t.whiteSpace&&e.classList.length>0&&(r.overflow="wrap"),["400",400,"normal"].includes(t.fontWeight)||(r.fontWeight=t.fontWeight),"middle"!==t.verticalAlign&&(r.vAlign=K[t.verticalAlign]||"middle"),"start"!==t.textAlign&&"left"!==t.textAlign&&(r.hAlign=K[t.textAlign]||"left"),"rgba(0, 0, 0, 0)"!==t.backgroundColor&&"rgb(255, 255, 255)"!==t.backgroundColor&&(r.backColor=t.backgroundColor),"0px"!==t.borderLeftWidth&&"rgb(204, 204, 204)"!==t.borderLeftColor&&(r.border=r.border||{},r.border.left={color:t.borderLeftColor,lineStyle:"dashed"===t.borderLeftStyle?"dash":"normal"}),"0px"!==t.borderRightWidth&&"rgb(204, 204, 204)"!==t.borderRightColor&&(r.border=r.border||{},r.border.right={color:t.borderRightColor,lineStyle:"dashed"===t.borderRightStyle?"dash":"normal"}),"0px"!==t.borderTopWidth&&"rgb(204, 204, 204)"!==t.borderTopColor&&(r.border=r.border||{},r.border.top={color:t.borderTopColor,lineStyle:"dashed"===t.borderTopStyle?"dash":"normal"}),"0px"!==t.borderBottomWidth&&"rgb(204, 204, 204)"!==t.borderBottomColor&&(r.border=r.border||{},r.border.bottom={color:t.borderBottomColor,lineStyle:"dashed"===t.borderBottomStyle?"dash":"normal"}),0===Object.keys(r).length?null:r}catch(e){return null}}(e.element),s=function(e){var t=e.getAttribute("data-note");if(t)try{var r=JSON.parse(decodeURIComponent(t));if(r.text)return r}catch(e){console.log(e)}}(e.element),f={name:"auto"},d=!1;if(u){var p=e.element.classList&&e.element.classList[0];u[p]&&("object"===o()(u[p])?Object.assign(f,u[p]):f.name=u[p],["currency","number","percentage"].includes(f.name)&&(f.decimal=2),l.table[r][a]=l.table[r][a]||{},l.table[r][a].type=f,["text","auto"].includes(f.name)||(d=!0))}c&&(l.table[r][a]=l.table[r][a]||{},l.table[r][a].style=c),s&&(l.table[r][a]=l.table[r][a]||{},l.table[r][a].note=s),void 0!==i&&""!==i?(l.table[r][a]=l.table[r][a]||{},l.table[r][a].type=f,l.table[r][a].value=i,"string"==typeof i&&((P.test(i)||j.test(i))&&(d=!0),E.test(i)&&"auto"===f.name&&(d=!0,l.table[r][a].type.name="currency",l.table[r][a].type.symbol=C,l.table[r][a].type.decimal=2))):""===i&&l.columns&&l.columns[a]&&l.columns[a].size<=15&&l.columns[a].size>=0&&(d=!0),d&&n&&(l.cellsNeedFix=l.cellsNeedFix||[],l.cellsNeedFix.push({row:r+t,col:a})),e.isMulti&&(l.mergeCells=l.mergeCells||[],l.mergeCells.push({row:r+t,col:a,rowCount:e.rowSpan,colCount:e.colSpan}),c&&(l.table[r+e.rowSpan-1]=l.table[r+e.rowSpan-1]||[],l.table[r+e.rowSpan-1][a+e.colSpan-1]=l.table[r+e.rowSpan-1][a+e.colSpan-1]||{},l.table[r+e.rowSpan-1][a+e.colSpan-1].style=c))}}))})),a.remove(),r&&r.forEach((function(e){e.remove()})),l}var K={"-webkit-left":"left","-webkit-right":"right","-webkit-center":"center",left:"left",right:"right",center:"center","-webkit-baseline-middle":"middle",top:"top",bottom:"bottom",middle:"middle"};function Y(e){var t=/([^{}]+){([^{}]+)}/,r=e.match(/[^{}]+{([^{}]+)}/g),n={};return r&&r.forEach((function(e){var r=e.match(t);if(r){var o=r[1].trim(),a=r[2];if(o.startsWith(".")){var i=a.match(/mso-number-format:(.+);(\n|$)/);i&&(n[o.substr(1)]=function(e){return-1!==(e=e.replace(/\/|"|\\/g,"")).indexOf("Date")?"date":-1!==e.indexOf("Time")?"time":e.endsWith("%")?"percentage":-1!==e.indexOf(A)?{name:"currency",symbol:A}:-1!==e.indexOf(S)?{name:"currency",symbol:S}:-1!==e.indexOf(C)?{name:"currency",symbol:C}:e.match(/^@$/)?"text":-1!==e.indexOf("General")||-1!==e.indexOf("Standard")||-1!==e.indexOf("Fixed")?"auto":e.match(/(年|月|日|时|分|秒|dd|y|m|h|s|md|dm)/)?e.match(/(时|分|秒|s|h)/)?"datetime":e.match(/[^d]ddd[^d]/)?{name:"datetime",formatter:"dddd"}:"date":-1!==e.indexOf(k)?{name:"currency",symbol:k}:"number"}(i[1]))}}})),0===Object.keys(n).length?null:n}var J={9:12,10:13,11:14,12:16,14:19,16:22,18:24,22:29,24:32,30:40,36:48};function $(e){return e.trim().replace(/'/g,"").replace(/"/g,"")}var X="ABCDEFGHIJKLMNOPQRSTUVWXYZ",Q=X.length,Z=[{type:"whitespace",reg:/^(?:\s+)/},{type:"string",reg:/^(?:"(\\["]|[^"])*")/},{type:"string",reg:/^(?:'(\\[']|[^'])*')/},{type:"function",reg:/^(?:[A-Za-z]{1,}[A-Za-z_0-9\.]+(?=[(]))/},{type:"error",reg:/^(?:#[A-Z0-9\/]+(!|\?)?)/},{type:"sheetCell",reg:/^(?:'{1}[^']+'{1}!{1}\${0,1}[A-Za-z]+\${0,1}[0-9]+)/},{type:"sheetCell",reg:/^(?:[\u4e00-\u9fa5A-Za-z0-9]+!{1}\${0,1}[A-Za-z]+\${0,1}[0-9]+)/},{type:"absoluteCell",reg:/^(?:\$[A-Za-z]+\$[0-9]+)/},{type:"absoluteColCell",reg:/^(?:\$[A-Za-z]+[0-9]+)/},{type:"absoluteRowCell",reg:/^(?:[A-Za-z]+\$[0-9]+)/},{type:"relativeCell",reg:/^(?:[A-Za-z]+[0-9]+)/},{type:"colRange",reg:/^(?:[A-Za-z]+:[A-Za-z]+)/},{type:"colRange",reg:/^(?:'{1}[\u4e00-\u9fa5A-Za-z0-9]+'{1}!{1}[A-Za-z]+:[A-Za-z]+)/},{type:"colRange",reg:/^(?:[\u4e00-\u9fa5A-Za-z0-9]+!{1}[A-Za-z]+:[A-Za-z]+)/},{type:"rowRange",reg:/^(?:[0-9]+:[0-9]+)/},{type:"rowRange",reg:/^(?:'{1}[\u4e00-\u9fa5A-Za-z0-9]+'{1}!{1}[0-9]+:[0-9]+)/},{type:"rowRange",reg:/^(?:[\u4e00-\u9fa5A-Za-z0-9]+!{1}[0-9]+:[0-9]+)/},{type:"mixRange",reg:/^(?:[0-9]+:[0-9]+)/},{type:"function",reg:/^(?:[A-Za-z\.0-9]+(?=[(]))/},{type:"variable",reg:/^(?:[A-Za-z]{1,}[A-Za-z_0-9]+)/},{type:"number",reg:/^(?:[0-9]+)/},{type:"array",reg:/^(?:\[(.*)?\])/},{type:"&",reg:/^(?:&)/},{type:"whitespace",reg:/^(?: )/},{type:"decimal",reg:/^(?:[.])/},{type:":",reg:/^(?::)/},{type:";",reg:/^(?:;)/},{type:",",reg:/^(?:,)/},{type:"*",reg:/^(?:\*)/},{type:"/",reg:/^(?:\/)/},{type:"-",reg:/^(?:-)/},{type:"+",reg:/^(?:\+)/},{type:"^",reg:"/^(?:^)/,"},{type:"(",reg:/^(?:\()/},{type:")",reg:/^(?:\))/},{type:">",reg:/^(?:>)/},{type:"<",reg:/^(?:<)/},{type:"NOT",reg:/^(?:NOT\b)/},{type:'"',reg:/^(?:")/},{type:"'",reg:/^(?:')/},{type:"!",reg:/^(?:!)/},{type:"=",reg:/^(?:=)/},{type:"%",reg:/^(?:%)/},{type:"#",reg:/^(?:[#])/},{type:"EOF",reg:/^(?:$)/}],ee=/^([\u4e00-\u9fa5A-Za-z0-9]+!{1})/,te=/^'{1}(.+'{1}!{1})/,re=/^([$])?([A-Za-z]+)([$])?([0-9]+)$/;function ne(e){var t=parseInt(e,10);return isNaN(t)?-1:Math.max(t-1,-1)}function oe(e){var t=0;if("string"==typeof e)for(var r=0,n=e.length-1;r<e.length;r+=1,n-=1)t+=Math.pow(Q,n)*(X.indexOf(e[r])+1);return t-1}function ae(e){var t=function(e){var t=null,r=e,n=e.match(ee);return n?(r=e.substring(n[0].length),t=n[0].slice(0,-1)):(n=e.match(te))&&(r=e.substring(n[0].length),t=n[0].slice(1,-2)),{sheet:t,label:r.toUpperCase()}}(e),r=t.label.match(re),n=v()(r,5),o=n[1],a=n[2],i=n[3],u=n[4];return{row:{index:ne(u),label:u,absolute:"$"===i},col:{index:oe(a),label:a,absolute:"$"===o},sheet:t.sheet}}function ie(e){var t=(e.row.absolute?"$":"")+(e.row.index+1);return function(e,t){return t?/^[A-Za-z0-9]+$/.test(t)&&!t.match(/^[A-Za-z]{1,3}[0-9]+/)?"".concat(t,"!").concat(e):"'".concat(t,"'!").concat(e):e}((e.col.absolute?"$":"")+function e(t){var r=X.substr(t%26,1),n=Math.floor(t/26);return n>0?"".concat(e(n-1)).concat(r):r}(e.col.index)+t,e.sheet)}function ue(e,t){var r=e.baseCell,n=e.formula,o=ae(r),a=ae(t);return function(e,t,r,n){var o=function(e,t){var r=[];e=(e+"").replace(/\s/g,"");for(var n=function(){var t=void 0,n=void 0,o=void 0;Z.forEach((function(r){(o=e.match(r.reg))&&(!t||o[0].length>t[0].length)&&(t=o,n=r.type)})),t?(r.push({text:t[0],type:n}),e=e.slice(t[0].length)):(r.push({text:e[0],type:"other"}),e=e.slice(1)),t=null};e.length>0;)n();for(var o=r.length,a=0;a<o-2;a++)r[a].type.indexOf("Cell")>0&&":"===r[a+1].type&&r[a+2].type.indexOf("Cell")<0&&(r[a+1].type="colon");return r}(e),a="";return o.forEach((function(e){if(e.type.indexOf("Cell")>0){var n=ae(e.text);n.row.index+=n.row.absolute?0:t,n.col.index+=n.col.absolute?0:r,a+=ie(n)}else a+=e.text})),a}(n,a.row.index-o.row.index,a.col.index-o.col.index)}function le(e){return(new DOMParser).parseFromString(e,"text/xml")}function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&(e=[e]);var r={format:"lakesheet",type:"Sheet",version:"1.0",larkJson:!0,sheet:[]},n=t.names,a=void 0===n?[]:n,i=t.deflate,u=void 0!==i&&i,l=t.worksheetsDeflate,c=void 0!==l&&l,f=t.xml;if(e.forEach((function(e,t){u&&(e=s.a.inflate(e,{to:"string"}));var n=x(e,t,a[t],{rowCount:50,colCount:20},!0);n.selectOptions&&(r.selectOptions=r.selectOptions||{},Object.assign(r.selectOptions,n.selectOptions),delete n.selectOptions),r.sheet.push(n)})),f){if(c&&f.worksheets){var d={};for(var p in f.worksheets){var h=f.worksheets[p];d[p]=s.a.inflate(h,{to:"string"})}f.worksheets=d}!function(e,t){if(t.workbook&&t.worksheets){for(var r=function(e){if(!e)return null;var t=le(e).getElementsByTagName("c");if(0!==t.length){for(var r=[],n=0;n<t.length;n++)r.push({cell:t[n].getAttribute("r"),sheetIndex:t[n].getAttribute("i")||1});return 0===r.length?null:_()(r,"sheetIndex")}}(t.calcChain),n=le(t.workbook).getElementsByTagName("sheet"),a={},i={},u={},l=1,c=0;c<n.length;c++){var s=parseInt(n[c].getAttribute("r:id").replace("rId","")),f=n[c].getAttribute("sheetId"),d=n[c].getAttribute("state");a[f]=s,"hidden"!==d&&(i[l]=s,u[f]=l,l+=1)}if(e.calcChain=[],r)for(var p in r){var h=a[p],y="sheet".concat(h);if(t.worksheets[y])for(var b=le(t.worksheets[y]).getElementsByTagName("f"),m={},v=0;v<b.length;v++){var g=b[v],w=g.parentNode.getAttribute("r"),O=g.innerHTML.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," "),E=g.getAttribute("t"),P=g.getAttribute("ref"),j=g.getAttribute("si");"shared"===E&&(P?m[j]={baseCell:w,formula:O}:O=ue(m[j],w));var C=w.match(/\d+/),k=w.match(/[A-Z]+/);C&&(C=parseInt(C[0])-1),k&&(k=oe(k[0]));var S=u[p]-1;if(e.sheet[S])if(e.sheet[S].data[C]=e.sheet[S].data[C]||{},e.sheet[S].data[C][k]=e.sheet[S].data[C][k]||{},"string"==typeof O&&0===O.toLowerCase().indexOf("hyperlink(")){var A=O.substring(10,O.length-1).split(","),x=$(A[0]),N=A.length>1?$(A[1]):x;console.log(x,N),e.sheet[S].data[C][k].value={class:"link",url:x,text:N}}else e.sheet[S].data[C][k].value={class:"formula",formula:O,value:e.sheet[S].data[C][k].value||""},e.calcChain.push({row:C,col:k,sheet:S})}}e.sheet.forEach((function(e,r){if(e.cellsNeedFix){var n=i[r+1],a="sheet".concat(n),u=le(t.worksheets[a]);e.cellsNeedFix.forEach((function(t){var r=t.row,n=t.col,a=ie({row:{index:r},col:{index:n}}),i=u.querySelector("c[r=".concat(a,"]"));if(i){var l="s"===i.getAttribute("t"),c=i.querySelector("v");if(c&&c.innerHTML&&!l){var s=e.data[r]&&e.data[r][n]&&e.data[r][n].value,f=e.data[r]&&e.data[r][n]&&e.data[r][n].type,d=c.innerHTML;if(f&&!isNaN(1*d)){var p=1*d,h=p>=367?343:p<61?86400:0;"date"===f.name||"datetime"===f.name||"time"===f.name?d=86400*d+h:["percentage","number","currency"].includes(f.name)&&(d*=1)}s&&"formula"===s.class?s.value=d:"object"!==o()(s)&&(e.data[r]=e.data[r]||{},e.data[r][n]=e.data[r][n]||{},e.data[r][n].value=d)}}})),delete e.cellsNeedFix}}))}}(r,f)}return r.sheet=s.a.deflate(JSON.stringify(r.sheet),{to:"string"}),r}},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(1514),i=r(1420),u=r(532),l=r(5),c=r.n(l),s=r(3948),f=r(3744);t.a=function(e){var t=e.children,r=e.prefixCls,n=e.handleVisibleChange,l=e.header,d=Object(u.f)((function(e){return e.me}));return o.a.createElement("div",{className:c()(r,f.a.content),"data-testid":"introduce"},o.a.createElement("div",{className:f.a.header},o.a.createElement(a.a,{variant:"headline4",mr:38},Object(s.b)(l.title,d)),o.a.createElement(a.a,{mt:5},Object(s.b)(l.desc,d)),o.a.createElement("div",{className:f.a.closeWrapper,onClick:function(){return null==n?void 0:n(!1)}},o.a.createElement("span",{className:f.a.close},o.a.createElement(i.default,{width:12,height:12})))),t)}},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(5),i=r.n(a),u=r(1514),l=r(3948),c=r(3880),s=r(3744);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.a=function(e){var t=e.img,r=e.content,n=e.isGarden,a=e.actions;return o.a.createElement("div",null,o.a.createElement("div",{className:i()(s.a.mediaCard,d({},s.a.mediaCardGarden,n))},o.a.createElement("img",{className:s.a.mediaCardImg,src:t})),o.a.createElement(u.a,{mt:12,className:s.a.mediaBody},Object(l.a)(r)),a&&o.a.createElement(c.a,{actions:a}))}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var n=r(33),o=r(0),a=r.n(o),i=r(5197),u=r(5188),l=r(4071),c=r(5),s=r.n(c),f=r(1514),d=r(43),p=r(1076),h=r(1307),y=r(532),b=r(3948),m=r(3744);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e){var t=e.header,r=e.active,n=e.children,o=_(Object(h.a)(),2),i=o[0],u=o[1].height,l=r?u:0;return a.a.createElement("div",{className:s()(m.a.collapsePanel,g({},m.a.collapsePanelActive,r))},t,a.a.createElement("div",{className:m.a.collapsePanelContent,style:{height:l}},a.a.createElement("div",{ref:i},n)))},E=function(e){var t=e.collapseList,r=e.collapseProps,n=_(Object(o.useState)(null==r?void 0:r.defaultActiveKey),2),i=n[0],u=n[1],l=Object(p.a)(i),c=Object(y.f)((function(e){return{group:e.group,me:e.me}})),h=Object(o.useMemo)((function(){return function(e){var t=l.current===e?"arrow-down":"arrow-right";return a.a.createElement(d.b,{name:t,size:16})}}),[]);return a.a.createElement("div",{className:s()(m.a.collapse,null==r?void 0:r.className)},t.filter((function(e){var t,r;return null===(t=null===(r=e.hidden)||void 0===r?void 0:r.call(e,c))||void 0===t||t})).map((function(e){var t=a.a.createElement("div",{className:m.a.collapseHeader,onClick:function(){return function(e){if(e===i)return u(null);u(e)}(e.key)}},a.a.createElement(f.a,{component:"span",variant:"title",type:"strong"},e.title),a.a.createElement("div",{className:m.a.placeholder}),a.a.createElement("div",{className:m.a.collapseHeaderArrow},h(e.key)));return a.a.createElement(O,{key:e.key,header:t,active:e.key===i},Object(b.a)(e.content))})))},P=r(4064);function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j.apply(null,arguments)}var C=function(e){var t=e.conf,r=e.prefixCls,n=e.handleVisibleChange;return a.a.createElement(l.a,{prefixCls:r,header:t.header,handleVisibleChange:n},a.a.createElement(i.a,null),a.a.createElement(E,{collapseList:t.collapseList,collapseProps:t.collapseProps}))};t.b=function(e){var t=e.prefixCls,r=e.handleVisibleChange,i=Object(u.a)(),l=i.isInGarden,c=i.isInGroup,s=i.isInOrgWiki,f=i.isInPersonal,d=Object(o.useMemo)((function(){return l?[P.a]:c?[P.b]:s?[P.c]:f?[P.d]:[]}),[l,c,s,f]);return a.a.createElement(n.Switch,null,d.map((function(e){return a.a.createElement(n.Route,j({},e.route,{render:function(){return a.a.createElement(C,{conf:e,prefixCls:t,handleVisibleChange:r})}}))})))}},,,,,,function(e,t,r){"use strict";r(59);var n=r(30),o=(r(44),r(10)),a=r(0),i=r.n(a),u=r(62),l=r.n(u),c=r(3983),s=r.n(c),f=r(68),d=r.n(f),p=r(34),h=r(416),y=r.n(h),b=r(1313),m=r(3778),v=r(285),g=r(3785),_=r(1288),w=r(3709),O=r(128),E=r(929),P=r(32);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function C(){C=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(D([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==j(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(j(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){x(a,n,o,i,u,"next",e)}function u(e){x(a,n,o,i,u,"throw",e)}i(void 0)}))}}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var L=l()("doc:useDocAction"),R=window.appData,I=R.isYuqueMobileApp,M=R.userSettings,F=function(e,t,r){if(window.__engine&&window.__engine.execCommand)return window.__engine[e](t,r)},B=y()((function(e){F("execCommand","defaultFontsize",e),F("execCommand","clearDefaultFontsize")}),200),U=y()((function(e){F("execCommand","paragraphSpacing",e)})),H=y()((function(e){F("execCommand","autoSpacing",!!e)}));t.a=function(e){var t=e.book,u=e.doc,l=e.commandParams,c=e.dispatch,f=e.onCommandsExecuted,h=e.onSelectTemplate,j=e.onCreateDoc,k=e.history,A=e.spaMode,x=Object(_.a)(t),D=T(Object(a.useState)(null),2),R=D[0],V=D[1],G=T(Object(a.useState)(!1),2),q=G[0],z=G[1],W=T(Object(a.useState)(!1),2),K=W[0],Y=W[1],J=T(Object(a.useState)("false"!==(null==M?void 0:M.recordDocSetting)),2),$=J[0],X=J[1];Object(a.useEffect)((function(){Promise.all([r.e(3),r.e(5),r.e(6),r.e(0),r.e(1),r.e(1324)]).then(r.bind(null,4077))}),[]);var Q=function(){return F("queryCommandValue","defaultFontsize",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},Z=T(Object(a.useState)(F("queryCommandValue","typography")),2),ee=Z[0],te=Z[1],re=T(Object(a.useState)(Q(!1)),2),ne=re[0],oe=re[1],ae=T(Object(a.useState)(F("queryCommandValue","paragraphSpacing")),2),ie=ae[0],ue=ae[1],le=T(Object(a.useState)(!!F("queryCommandValue","autoSpacing")),2),ce=le[0],se=le[1],fe=Object(a.useCallback)(y()((function(e,t,r,n){if(!e)return!1;var o=["default"===t?0:1];15!==r?o.push(r):o.push(15),o.push(n?1:0);var a=o.join(",");g.a.update({docsSetting:a}),c({type:"proxy.web/mine.updateUserSettings",payload:{data:{key:"docsSetting",value:a}}})}),500),[]),de=Object(a.useCallback)(y()((function(e,t,r,n){g.a.update({recordDocSetting:e}),c({type:"proxy.web/mine.updateUserSettings",payload:{data:{key:"recordDocSetting",value:e}}}).then((function(){fe(e,t,r,n)}))}),500),[]),pe=Object(a.useCallback)((function(e){oe(e),B(e),fe($,ie,e,ce)}),[$,ie,ne,ce]),he=Object(a.useCallback)((function(e){ue(e),U(e),fe($,e,ne,ce)}),[$,ie,ne,ce]),ye=Object(a.useCallback)((function(e){se(!!e),H(!!e),fe($,ie,ne,!!e)}),[$,ie,ne,ce]),be=Object(a.useCallback)((function(e){X(e),de(e,ie,ne,ce)}),[$,ie,ne,ce]),me=function(){V(null)},ve=function(){var e=N(C().mark((function e(){var r,n,a,i,u,c,s,f,d,h,y,b,m,v=arguments;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=S(S({},r=v.length>0&&void 0!==v[0]?v[0]:{}),l),n=r.slug||E.a.createSlug(),r.slug=n,r.book_id=t.id,r.format||(r.format=w.a.getDefaultDocumentFormat(r.type)),a=null,e.prev=7,!A||!k){e.next=26;break}return e.next=11,E.a.createDoc(r,void 0,{useOriginResp:!0});case 11:if(i=e.sent,u=i.data,c=i.toc,L("doc created",{cmd:R,doc:u}),s="/".concat(t.namespace,"/").concat(u.slug,"/edit"),f=s,"doc_toc"===r.create_from&&((d=new URLSearchParams(window.location.search)).set("toc_node_uuid",r.toc_node_uuid),f="".concat(s,"?").concat(d.toString())),x.current.id!==t.id){e.next=23;break}if("markdown"===u.format?(h=new URL(s,window.location.origin),a=a||window,"doc_toc"===r.create_from&&h.searchParams.set("toc_node_uuid",r.toc_node_uuid),a.location.href=h.href):k.push(f),!j){e.next=23;break}return j(u,c),e.abrupt("return");case 23:me(),e.next=40;break;case 26:if(A){e.next=40;break}return e.next=29,E.a.createDoc(r);case 29:if(y=e.sent,L("doc created",{cmd:R,doc:y}),b="/".concat(t.namespace,"/").concat(y.slug,"/edit"),m=new URL(b,window.location.origin),a=a||window,"doc_toc"===r.create_from&&m.searchParams.set("toc_node_uuid",r.toc_node_uuid),me(),!j){e.next=39;break}return j(y),e.abrupt("return");case 39:a.location.href=m.href;case 40:e.next=45;break;case 42:e.prev=42,e.t0=e.catch(7),"limit_exceeded"===e.t0.code?o.a.error(e.t0.message):e.t0.code!==p.LIMIT_RULE_CODE.max_doc_note_number&&a&&a.close();case 45:return e.prev=45,a=null,e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[7,42,45,48]])})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=__("确认删除 {title}？",{title:u.title});n.a.confirm({title:e,content:__(""),onOk:function(){c({type:"proxy.web/docs.destroy",payload:{data:{id:u.id}}}).then((function(e){f({cmd:O.a.DOC.delete.cmd,result:e})}))}})},_e=Object(m.a)(),we=_e.loadTemplateSelector,Oe=_e.showTemplateSelector,Ee=_e.contextHolder,Pe=function(){var e=N(C().mark((function e(){var r;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe({book:t});case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",me());case 5:return e.abrupt("return",Object(b.d)(t,r,l));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(n,a){var i=l;switch(L("exec",{cmd:n,params:i}),V(n),n){case O.a.DOC.delete.cmd:ge();break;case O.a.DOC.print.cmd:window.print();break;case O.a.DOC.enter_read_mode.cmd:case O.a.DOC.publish_enter_read_mode.cmd:window.__readyToPublish({enterReadMode:!0});break;case O.a.DOC.open_in_browser.cmd:window.YuqueDesktopAppJSBridge.openExternalLink("".concat(window.location.origin,"/").concat(t.namespace,"/").concat(u.slug));break;case O.a.DOC.fullscreen.cmd:case O.a.DOC.exit_fullscreen.cmd:s.a.enabled?s.a.toggle():o.a.error(__("你的浏览器不支持全屏功能"));break;case O.a.DOC.raw.cmd:window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/html");break;case O.a.DOC.view_markdown.cmd:window.location.href="".concat(window.location.pathname.replace(/\/+$/,""),"/markdown");break;case O.a.DOC.presentation.cmd:window.open("".concat(window.location.pathname.replace(/\/+$/,""),"/present"));break;case O.a.DOC.create_doc.cmd:ve({type:"Doc",format:d.a.FORMAT.LAKE,title:i.title,slug:i.slug});break;case O.a.NOTE.create_note.cmd:var p,y;if(window.appData.isDesktopApp)null===(p=window.YuqueDesktopAppJSBridge)||void 0===p||null===(y=p.ipcSend)||void 0===y||y.call(p,{channel:P.a.MINI_WINDOW.OPEN_WINDOW});else Promise.all([r.e(3),r.e(5),r.e(6),r.e(0),r.e(1),r.e(1324)]).then(r.bind(null,4077)).then((function(e){e.default.show()}));break;case O.a.DOC.create_doc_template.cmd:ve({title:__("自定义模板"),type:d.a.TYPE.DOC,format:d.a.FORMAT.LAKE,tag:"YUQUE_TEMPLATE"});break;case O.a.DOC.create_from_template.cmd:h&&h(),Pe();break;case O.a.DOC.create_markdown.cmd:ve({type:"Doc",format:d.a.FORMAT.MARKDOWN,title:i.title,slug:i.slug});break;case O.a.DOC.create_sheet.cmd:ve({type:"Sheet",title:i.title,slug:i.slug});break;case O.a.DOC.create_mind.cmd:case O.a.DOC.create_board.cmd:ve({type:"Board",title:i.title,slug:i.slug});break;case O.a.DOC.create_table.cmd:ve({type:"Table",title:i.title,slug:i.slug});break;case O.a.DOC.create_thread.cmd:window.location.href="/".concat(t.namespace,"/new");break;case O.a.DOC.edit.cmd:var b="/".concat(t.namespace,"/").concat(u.slug,"/edit");I?v.a.pushWebWindow({url:"".concat(window.location.origin).concat(b)}):window.location.href=b;break;case O.a.DOC.manage_table.cmd:case O.a.DOC.manage_doc.cmd:window.location.href="/r/".concat(t.namespace,"/docs");break;case O.a.DOC.modify_toc.cmd:window.location.href="/r/".concat(t.namespace,"/toc?from=").concat(u.slug);break;case O.a.DOC.exit.cmd:window.location.href="/dashboard";break;case O.a.DOC.archive.cmd:c({type:"proxy.web/docs.archive",payload:{data:{id:u.id}}}).then((function(e){o.a.success(__("话题已归档")),f({cmd:O.a.DOC.archive.cmd,result:e})}));break;case O.a.DOC.unarchive.cmd:c({type:"proxy.web/docs.unarchive",payload:{data:{id:u.id}}}).then((function(e){o.a.success(__("已取消归档")),f({cmd:O.a.DOC.unarchive.cmd,result:e})}));break;case O.a.DOC.pin.cmd:c({type:"proxy.web/docs.pin",payload:{data:{id:u.id}}}).then((function(e){o.a.success(__("置顶成功")),f({cmd:O.a.DOC.pin.cmd,result:e})}));break;case O.a.DOC.unpin.cmd:c({type:"proxy.web/docs.unpin",payload:{data:{id:u.id}}}).then((function(e){o.a.success(__("已取消置顶")),f({cmd:O.a.DOC.unpin.cmd,result:e})}));break;case O.a.DOC.send_mail.cmd:z(!0);break;case O.a.DOC.document_layout_select.cmd:case O.a.DOC.document_layout.cmd:!function(e){F("execCommand","layout",e)}(a);break;case O.a.DOC.document_typography.cmd:!function(e){te(e),F("execCommand","typography",e),Q()||oe(Q(!1))}(a);break;case O.a.DOC.document_fontsize.cmd:pe(a);break;case O.a.DOC.document_paragraph_spacing.cmd:he(a);break;case O.a.DOC.document_auto_spacing.cmd:ye(a);break;case O.a.DOC.document_record_setting.cmd:be(a);break;default:e.onCommandsExecuted({cmd:n})}};return i.a.useEffect((function(){R&&(null==R?void 0:R.cmd)===O.a.DOC.create_from_template.cmd&&we()}),[R]),i.a.useEffect((function(){window.__execAction=function(t,r){[O.a.DOC.save_published_as_version.cmd,O.a.DOC.save_editing_as_version.cmd].includes(t)&&(je(t,r),e.onSelect({key:t}))}}),[]),{cmd:R,sendAlimail:q,mailSending:K,typography:ee,defaultFontSize:ne,recordDocSetting:$,paragraphSpacing:ie,autoSpacing:ce,reset:me,doAction:je,setSendAlimail:z,setMailSending:Y,getEditorLayout:function(){return F("queryCommandValue","layout")},getWordCount:function(){return F("queryCommandValue","wordCount")},contextHolder:Ee}}},,,,function(e,t,r){var n=r(731),o=r(250),a=r(694),i=Math.max;e.exports=function(e,t,r){var u=null==e?0:e.length;if(!u)return-1;var l=null==r?0:a(r);return l<0&&(l=i(u+l,0)),n(e,o(t,3),l)}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(557);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=a(a(a(a({},n.EDITOR_NAME.LAKEX,{bgColor:"ca19007.da16020",label:"ca19007.da16062",headingCollapsed:"ca19007.da16050",tableSpacing:"ca19007.da16043",tableBorderVisible:"ca19007.da16042",tableVerticalAlign:"ca19007.da16033",tableEquallyColumn:"ca19007.da16045",tableInsertAfterColumn:"ca19007.da16037",tableInsertAfterRow:"ca19007.da16035",tableToggleWidthMode:"ca19007.da16044",tableColumnWidth:"ca19007.da16032",tableColumnMoveTo:"ca19007.da16041",tableInsertBeforeColumn:"ca19007.da16036",tableInsertBeforeRow:"ca19007.da16034",tableDeleteColumn:"ca19007.da16038",tableDeleteRow:"ca19007.da16039",tableRowHeight:"ca19007.da16031",tableRowMoveTo:"ca19007.da16040",emoji:"ca19007.da16071",unicodeEmoji:"ca19007.da16071",table:"ca19007.da16027",insertFile:"ca19007.da9386",insertFiles:"ca19007.da9386",insertCard:"ca19007.da13586",insertLink:"ca19007.da16054",insertVideo:"ca19007.da15970",insertBookmark:"ca19007.da16079",image:"ca19007.da15966",insertImage:"ca19007.da15966",insertYuqueInlineDoc:"ca19007.da16075",insertDocument:"ca19007.da16081",tableUnmergeCell:"ca19007.da16029",undo:"ca19007.da9540",tableCellBgColor:"ca19007.da16030",alignment:"ca19007.da16049",translate:"ca19007.da16059",outdent:"ca19007.da16052",columnsAddColumn:"ca19007.da16086",columns:"ca19007.da16084",columnsToggleWidthMode:"ca19007.da16089",columnsWidths:"ca19007.da16085",copy:"ca19007.da16046",alert:"ca19007.da16064",paintFormat:"ca19007.da16057",tableMergeCell:"ca19007.da16028",hr:"ca19007.da16063",bold:"ca19007.da15971",cut:"ca19007.da16047",cardToLink:"ca19007.da16055",textContainerTrans:"ca19007.da9385",link:"ca19007.da16053",linkToYuqueInlineDoc:"ca19007.da16074",linkToYuqueDoc:"ca19007.da16073",linkToThirdparty:"ca19007.da16061",linkToBookmark:"ca19007.da16077",linkToBookmarkInline:"ca19007.da16078",defaultFontsize:"ca19007.da16023",cardBatchApply:"ca19007.da15965",clearBgColor:"ca19007.da16021",clearFormat:"ca19007.da16058",clearColor:"ca19007.da16019",taskList:"ca19007.da16026",containerToggle:"ca19007.da9384",deleteColumns:"ca19007.da16088",columnDelete:"ca19007.da16087",columnDeleteByIndex:"ca19007.da16087",deleteCard:"ca19007.da13690",deleteBrick:"ca19007.da9381",sup:"ca19007.da16067",paragraphSpacing:"ca19007.da13585",typography:"ca19007.da13582",layout:"ca19007.da9542",search:"ca19007.da16069",indent:"ca19007.da16051",mention:"ca19007.da16076",replaceText:"ca19007.da16070",dropFile:"ca19007.da9387",unorderedList:"ca19007.da16025",sub:"ca19007.da16066",addBelowBrick:"ca19007.da9383",underline:"ca19007.da16016",insertSlash:"ca19007.da16082",italic:"ca19007.da16015",lineHeight:"ca19007.da16056",code:"ca19007.da16068",moveCard:"ca19007.da13691",moveBrick:"ca19007.da9382",moveImage:"ca19007.da16060",quote:"ca19007.da16065",orderedList:"ca19007.da16024",paste:"ca19007.da16048",markdownPasteParse:"ca19007.da16080",collapse:"ca19007.da16083",strikethrough:"ca19007.da16017",redo:"ca19007.da9541",brickToCodeblock:"ca19007.da16072",fontsize:"ca19007.da16022",wordCount:"ca19007.da9539",color:"ca19007.da16018"}),n.EDITOR_NAME.SHEET,{setType:"ca33271.da12555",setDecimal:"ca33271.da12842",setStyle:"ca33271.da12843",insertCol:"ca33271.da12844",insertRow:"ca33271.da16148",mergeCell:"ca33271.da16149",splitCell:"ca33271.da16150",moveCol:"ca33271.da16151",moveRow:"ca33271.da16152",removeCol:"ca33271.da16153",removeRow:"ca33271.da16154",hideCol:"ca33271.da16155",hideRow:"ca33271.da16156",cancelHide:"ca33271.da16157",resizeCol:"ca33271.da16158",resizeRow:"ca33271.da16159",copy:"ca33271.da16160",paste:"ca33271.da16161",cut:"ca33271.da16162",clear:"ca33271.da16163",clearFormat:"ca33271.da16164",filter:"ca33271.da16165",sort:"ca33271.da16166",insert:"ca33271.da16167",replaceOne:"ca33271.da16168",replaceAll:"ca33271.da16169",autofill:"ca33271.da16170",insertRowAtBottom:"ca33271.da16171",frozen:"ca33271.da16172",insertSheet:"ca33271.da16173",removeSheet:"ca33271.da16174",cloneSheet:"ca33271.da16175",moveSheet:"ca33271.da16176",renameSheet:"ca33271.da16177",paint:"ca33271.da16178",setBorder:"ca33271.da16179",protect:"ca33271.da16180",resizeVessel:"ca33271.da16181",moveVessel:"ca33271.da16182",removeVessel:"ca33271.da16183",addChart:"ca33271.da16184",copyChart:"ca33271.da16185",updateChartConfig:"ca33271.da16186",activeSheet:"ca33271.da16187",adjustRowHeight:"ca33271.da16188",adjustColWidth:"ca33271.da16189",hideSheet:"ca33271.da16190",showSheet:"ca33271.da16191",setConditionalFormatting:"ca33271.da16192",sortConditionalFormatting:"ca33271.da16193",removeConditionalFormatting:"ca33271.da16194",clearConditionalFormatting:"ca33271.da16195",replaceSelections:"ca33271.da16196",exportSheet:"ca33271.da16197",addNote:"ca33271.da16198",removeNotes:"ca33271.da16199",highlightArea:"ca33271.da16200",tabColor:"ca33271.da16201",zoomSheet:"ca33271.da16202",setValueRichText:"ca56094.da46034",detail:{conditionalFormatting:{highlightCell:"ca56094.da48475",bar:"ca56094.da48476"},chartTransposeRowCol:"ca56094.da51565"}}),n.EDITOR_NAME.BOARD,{ToBack:"ca33306.da16235",ToFront:"ca33306.da16236",Forward:"ca33306.da16237",Backward:"ca33306.da16238",Collapse:"ca33306.da16239",Expand:"ca33306.da16240",ZoomIn:"ca33306.da16241",ZoomOut:"ca33306.da16242",ZoomTo:"ca33306.da16243",ActualSize:"ca33306.da16244",FitViewport:"ca33306.da16245",Copy:"ca33306.da16246",Paste:"ca33306.da16247",CreateLink:"ca33306.da16248",BeginInsertLine:"ca33306.da16249",ButtonDragCanvas:"ca33306.da16250",SetTheme:"ca33306.da16251",SetCanvasBackgroundColor:"ca33306.da16252",Cut:"ca33306.da16253",MakeGroup:"ca33306.da16254",Ungroup:"ca33306.da16255",BeginInsertGeometry:"ca33306.da16256",BeginInsertText:"ca33306.da16257",BeginInsertImage:"ca33306.da16258",AlignBottom:"ca33306.da16259",AlignHCenter:"ca33306.da16260",AlignLeft:"ca33306.da16261",AlignRight:"ca33306.da16262",AlignTop:"ca33306.da16263",AlignVCenter:"ca33306.da16264",DistributeHorizontally:"ca33306.da16265",DistributeVertically:"ca33306.da16266",InsertText:"ca33306.da16257",InsertGeometry:"ca33306.da16256",InsertImage:"ca33306.da16258",AttachLink:"ca33306.da16248",LineSwapEndpoint:"ca33306.da16267",MindmapAppendChild:"ca33306.da16268",MindmapAppendSibling:"ca33306.da16269",MindmapMoveNode:"ca33306.da16270",MindmapAttachImage:"ca33306.da16271",MindmapBeginInsertStem:"ca33306.da16272",MindmapCreateLink:"ca33306.da16273",MindmapPrependSibling:"ca33306.da16269",MindmapInsertStem:"ca33306.da16272",MindmapInsertImage:"ca33306.da16271",MindmapAppendParent:"ca33306.da16274",MindmapRemoveSingleNode:"ca33306.da16275",MindmapAttachNote:"ca33306.da16276",MindmapAppendAbstract:"ca33306.da16277",ChangeLaneNumber:"ca33306.da16278",AddSwimlane:"ca33306.da16279",UpdateSwimlane:"ca33306.da16280"}),n.EDITOR_NAME.TABLE,{createFilter:"a385.b77856.c352022.d418880",removeFilter:"a385.b77856.c352022.d418881",updateFilter:"a385.b77856.c352022.d418882",addField:"a385.b77856.c352023.d418883",copyField:"a385.b77856.c352023.d420021",changeFieldType:"a385.b77856.c352023.d420024",updateFieldName:"a385.b77856.c352023.d420027",updateField:"a385.b77856.c352023.d420028",removeField:"a385.b77856.c352023.d420029",updateCoverDisplay:"a385.b77856.c352023.d420030",updateShowFieldName:"a385.b77856.c352023.d420031",updateCoverSource:"a385.b77856.c352023.d420032",updateFieldHidden:"a385.b77856.c352023.d420033",createFieldOption:"a385.b77856.c352023.d420034",updateFieldOption:"a385.b77856.c352023.d420035",removeFieldOption:"a385.b77856.c352023.d420036",changeFieldOrder:"a385.b77856.c352023.d420037",changeFieldOptionOrder:"a385.b77856.c352023.d420038",addView:"a385.b77856.c352067.d420039",switchView:"a385.b77856.c352067.d420040",removeView:"a385.b77856.c352067.d420041",copyView:"a385.b77856.c352067.d420042",changeViewOrder:"a385.b77856.c352067.d420043",updateViewName:"a385.b77856.c352067.d420044",createSort:"a385.b77856.c352069.d420045",removeSort:"a385.b77856.c352069.d420046",updateSort:"a385.b77856.c352069.d420047",changeColWidth:"a385.b77856.c352070.d420048",pasteUpdateRecords:"a385.b77856.c352070.d420049",addEmptyRecord:"a385.b77856.c352071.d420050",copyRecord:"a385.b77856.c352071.d420051",removeRecords:"a385.b77856.c352071.d420052",changeRecordOrder:"a385.b77856.c352071.d420053",updateContent:"a385.b77856.c352071.d420099",removeCells:"a385.b77856.c352072.d420054",setCell:"a385.b77856.c352072.d420055",updateValueOrder:"a385.b77856.c352072.d420056",autofillCells:"a385.b77856.c352072.d420057",updateStat:"a385.b77856.c352073.d420058",removeStat:"a385.b77856.c352073.d420059",createGridGroup:"a385.b77856.c352074.d420060",removeGridGroup:"a385.b77856.c352074.d420061",updateGridGroup:"a385.b77856.c352074.d420062",updateGridGroupFold:"a385.b77856.c352074.d420063",updateGridRecordHeight:"a385.b77856.c352075.d420070",updateKanbanGroup:"a385.b77856.c352076.d420071",upsertStartOrEndDate:"a385.b77856.c352078.d420072",setActiveDate:"a385.b77856.c352078.d420075",createSchedule:"a385.b77856.c352078.d420076",updateSchedule:"a385.b77856.c352078.d420078",showLunar:"a385.b77856.c352078.d420079",updateScheduleTitle:"a385.b77856.c352078.d420080",updateScheduleColorType:"a385.b77856.c352078.d420082",updateScheduleColor:"a385.b77856.c352078.d420083",removeViewField:"a385.b77856.c352081.d420084",insertViewField:"a385.b77856.c352081.d420085",updateViewDesc:"a385.b77856.c352081.d420087",updateViewFieldDisplayType:"a385.b77856.c352081.d420088",updateViewFieldRequired:"a385.b77856.c352081.d420089",updateViewFieldName:"a385.b77856.c352081.d420090",cloneViewField:"a385.b77856.c352081.d420091",upsertViewShare:"a385.b77856.c352081.d420092",updateAiWritingOpen:"a385.b77856.c352082.d420094",updateAiWritingType:"a385.b77856.c352082.d420095",updateAiWritingPrompt:"a385.b77856.c352082.d420096",updateAiWritingAuto:"a385.b77856.c352082.d420097"})},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n=function(e){return e.SRE="SRE",e.PRD="PRD",e}({}),o=function(e){return e[e.DRAFT=0]="DRAFT",e[e.PUBLISH=1]="PUBLISH",e}({})},,function(e,t,r){"use strict";r(3321);var n=r(3530),o=r(0),a=r.n(o),i=r(2),u=r.n(i),l=r(1443),c=r(1020),s=r(848),f=r(396),d=r(3749),p=r(261);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function b(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}function m(e,t,r){return t=g(t),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}var w=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=m(this,t,[e])).breadcrumbRef=a.a.createRef(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this,t=this.props,r=t.group,o=t.book,i=t.doc,u=t.separator,f=t.noPrivateTip,d=t.noDocPrivateTip,h=t.docLevelUrl,y=t.noGroup,b=t.showBookIcon,m=t.isNote,v=t.disableClickOnIcon,g=o?o.namespace||"".concat(r.login,"/").concat(o.slug):null;return m?null:a.a.createElement(p.a,null,a.a.createElement("div",{className:"lark-breadcrumb",ref:this.breadcrumbRef},b&&a.a.createElement(c.d,{group:r,book:o}),a.a.createElement(n.a,{separator:u},!y&&r&&a.a.createElement(n.a.Item,{href:"/".concat(r.login)},a.a.createElement(l.default.Name,{user:r,className:"".concat(o||i?"":"lark-breadcrumb-current")})),o&&(v?a.a.createElement(n.a.Item,{className:"lark-breadcrumb-link-ellipsis"},a.a.createElement("span",{className:"".concat(i?"":"lark-breadcrumb-current")},a.a.createElement(c.g,{group:r,book:o,showBookIcon:!1,showPrivateIcon:!f,href:"/".concat(g),getPopupContainer:function(){return e.breadcrumbRef.current}}))):a.a.createElement(n.a.Item,{href:"/".concat(g),className:"lark-breadcrumb-link-ellipsis"},a.a.createElement("span",{className:"".concat(i?"":"lark-breadcrumb-current")},a.a.createElement(c.g,{group:r,book:o,showBookIcon:!1,showPrivateIcon:!f,getPopupContainer:function(){return e.breadcrumbRef.current}})))),i&&a.a.createElement(n.a.Item,{className:"header-crumb-doc",href:h||"/".concat(g,"/").concat(i.slug)},a.a.createElement("span",{className:"lark-breadcrumb-current"},a.a.createElement(s.n,{doc:i})),!d&&a.a.createElement(s.b,{group:r,book:o,doc:i,getPopupContainer:function(){return e.breadcrumbRef.current}})))))}}])&&y(r.prototype,o),i&&y(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,i}(o.PureComponent);w.propTypes={group:u.a.object.isRequired,book:u.a.object,doc:u.a.object,separator:u.a.node,noPrivateTip:u.a.bool,noDocPrivateTip:u.a.bool,docLevelUrl:u.a.string,noGroup:u.a.bool,showBookIcon:u.a.bool,isNote:u.a.bool,disableClickOnIcon:u.a.bool},w.Logo=function(e){var t=e.separator,r=e.organization,n=e.allowClick,o=r&&r.id?a.a.createElement(f.g,{src:r.logo,size:28}):a.a.createElement(d.b,{height:40});return a.a.createElement("span",{className:"lark-breadcrumb-logo"},n?a.a.createElement("a",{href:"/",className:"lark-logo"},o):o,t&&a.a.createElement("span",{className:"lark-breadcrumb-separator"},t))},w.Logo.defaultProps={allowClick:!0},w.Logo.propTypes={separator:u.a.node,organization:u.a.object,allowClick:u.a.bool};t.a=w},function(e,t,r){"use strict";r.r(t);r(59);var n=r(30),o=r(0),a=r.n(o),i=r(2),u=r.n(i),l=r(3838),c="index-module_searchModalWrapper_vtDAq",s="index-module_searchInput_MvuM1",f=["visible","onCancel"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(null,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t=e.visible,r=e.onCancel,i=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,f),u=p(Object(o.useState)(t),2),h=u[0],y=u[1],b={size:"large",placeholder:__("搜索"),autoComplete:"nope",allowClear:!0,bordered:!1,className:s},m=function(){y(!1),r()};return Object(o.useEffect)((function(){y(t)}),[t]),a.a.createElement(n.a,{keyboard:!0,onCancel:m,wrapClassName:c,width:720,footer:null,visible:h,destroyOnClose:!0},a.a.createElement(l.a,d({},i,{sence:"modal",searchInputProps:b,onCancel:m})))};y.propTypes={onCancel:u.a.func,visible:u.a.bool};t.default=y},,,,function(e,t,r){var n=r(3695)(r(4085));e.exports=n},,function(e,t,r){"use strict";r(246);var n=r(123),o=(r(37),r(8)),a=(r(57),r(13)),i=(r(44),r(10)),u=r(0),l=r.n(u),c=r(2),s=r.n(c),f=r(191),d=r.n(f),p=r(52),h=(r(196),r(36)),y=r(416),b=r.n(y),m=r(3836),v=r.n(m),g=r(3693),_=r(261),w=r(394);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var P=function(e){var t=O(Object(u.useState)([]),2),r=t[0],n=t[1];return Object(u.useEffect)((function(){p.a.users.mailHistories({}).then((function(e){n(e)}))}),[e]),{mailHistory:r}},j="RecipientSelector-module_recipient_Ds5UW",C="RecipientSelector-module_mention_5r6oN",k="RecipientSelector-module_userForCheck_a4ZZP",S="RecipientSelector-module_mailHistory_-ft0g",A="RecipientSelector-module_title_-yKJG",x="RecipientSelector-module_users_ZwnLM",N="RecipientSelector-module_info_eM40g",T="RecipientSelector-module_avatar_lGHzI",D="RecipientSelector-module_name_HeaN7",L="RecipientSelector-module_dep_B2T89";function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var M=["alibaba-inc.com","antfin.com","list.alibaba-inc.com","cainiao.com"];function F(e){var t=R(Object(u.useState)(!1),2),r=t[0],n=t[1],o=R(Object(u.useState)(e.defaultValue||[]),2),a=o[0],c=o[1],s=P(window.appData.me).mailHistory,f=R(Object(u.useState)([]),2),d=f[0],y=f[1],m=Object(u.useRef)(),_=null,O=__("最多只能选择100个邮箱地址，建议请使用邮件组"),E=__("收件人有重复，已自动去重"),I=function(t){var r=t.length,o=(t=v()(t,(function(e,t){return e.email&&t.email?e.email===t.email:!(!e.login||!t.login)&&e.login===t.login}))).length;o>100?(i.a.warning(O),t.splice(100)):o!==r&&i.a.warning(E),c(t),e.onChange(t),n(!1),y([]),setTimeout((function(){m&&m.current&&m.current.focus()}),100)};Object(u.useEffect)((function(){return function(){_&&(clearTimeout(_),_=null)}}));var F=b()((function(e){(function(e){e=e.split(";");var t=[];if(e.forEach((function(e){if(g.validator.isEmail(e))t.push({name:e,email:e});else{var r=e.match(/([^<]+)<([^>]+)>/);r&&g.validator.isEmail(r[2])&&t.push({name:r[1],email:r[2]})}})),t.length>0){var r=a.concat(t);return I(r),m.current.blur(),!0}return!1})(e)||function(e){if(-1!==e.indexOf("@")){var t=e.split("@"),r=t[1],n=M.filter((function(e){return e.startsWith(r)})).map((function(e){return{name:"".concat(t[0],"@").concat(e),email:"".concat(t[0],"@").concat(e)}}));return y(n),!0}return!1}(e)||(n(!1),p.a.users.complete({q:e.trim(),include_unconfirmed_corp_account:!0}).then((function(e){y(e),m.current.focus()})))}),300),B=a.map((function(e){return e.name}));return l.a.createElement("div",{className:j},l.a.createElement("span",{className:C,onClick:function(){if(window.__engine&&window.__engine.extractMention){var e=window.__engine.extractMention();if(0===(e=e.filter((function(e){return e.name&&e.name.trim()&&e.login&&e.login.trim()}))).length)return void i.a.warn(__("文档中没有 @ 人"));var t=a.concat(e);I(t)}}},__("添加文档中 @ 的人")),l.a.createElement(h.a,{mode:"multiple",style:{width:"100%"},placeholder:__("请输入花名或邮箱地址"),onChange:function(e){var t=a.filter((function(t){return e.includes(t.name)}));I(t)},onFocus:function(){0===a.length&&n(!0)},onSearch:F,onBlur:function(){_&&clearTimeout(_),_=setTimeout((function(){n(!1),y([])}),500)},allowClear:!0,value:B,notFoundContent:null,ref:m}),d.length>0&&l.a.createElement("div",{className:k},d.map((function(e){return l.a.createElement("p",{key:e.email,onClick:function(){!function(e){if(100!==a.length)if(0===a.filter((function(t){return t.email===e.email})).length){var t=a.concat(e);I(t)}else i.a.warning(E);else i.a.warning(O)}(e)}},e.avatar_url&&l.a.createElement(w.a,{className:T,src:e.avatar_url,size:32}),l.a.createElement("span",{className:D},e.name),e.dep&&l.a.createElement("span",{className:L},e.dep))}))),r&&s&&s.length>0&&l.a.createElement("div",{className:S,"data-testid":"mail-history"},l.a.createElement("div",{className:A},__("历史记录")),l.a.createElement("ul",null,s.map((function(e){return l.a.createElement("li",{onClick:function(){!function(e){I(e.mail_list)}(e)},key:e.id},l.a.createElement("p",{className:x},e.mail_list.map((function(e){return e.name})).join(",")),l.a.createElement("p",null,l.a.createElement("span",{className:N},__("标题："),e.title)))})))))}F.propTypes={onChange:s.a.func.isRequired,defaultValue:s.a.array};var B=Object(_.b)(F,!1),U="DocSendMail-module_sendMail_QBA+O",H="DocSendMail-module_recipient_zqM9E",V="DocSendMail-module_title_Af2FA",G="DocSendMail-module_submitButton_HEsW-",q="DocSendMail-module_mailResult_AhaV4";function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q(n.key),n)}}function K(e,t,r){return t=J(t),function(e,t){if(t&&("object"==z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y()?Reflect.construct(t,r||[],J(e).constructor):t.apply(e,r))}function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y=function(){return!!e})()}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}function X(e,t,r){return(t=Q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:t+""}var Z=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),X(r=K(this,t,[e]),"ready",(function(){0!==r.state.receiver.length?"sending"!==r.state.mailStatus&&(r.setState({mailStatus:"sending"},(function(){r.props.onMailSending(),r.startClock(5)})),r.timer=setTimeout(r.sendMail,5e3)):i.a.error(__("请选择收件人"))})),X(r,"startClock",(function(e){r.setState({seconds:e}),0!==e&&"sending"===r.state.mailStatus&&(r.clocker=setTimeout((function(){r.startClock(e-1)}),1e3))})),X(r,"sendMail",(function(){var e=r.state,t=e.receiver,n=e.title,o={id:r.props.doc.id,title:n||r.props.doc.title,content:window.__engine?window.__engine.getDocument("text/html",{mode:"inline"}):""};try{o.mail_list=r.normalizeMail(t)}catch(e){return void i.a.error(e.message)}p.a.docs.sendMail(o,{ignoreGlobalMessage:!0}).then((function(e){r.setState({mailStatus:"success",receiver:[]}),r.props.onMailSended()})).catch((function(e){e.status&&e.status>=400&&e.status<500?r.setState({mailStatus:"block",mailBlockMessage:e.message}):r.setState({mailStatus:"failed"})}))})),X(r,"retry",(function(){r.setState({mailStatus:"normal",mailBlockMessage:""})})),X(r,"normalizeMail",(function(e){return e.map((function(e){return d()(e,["email","login","user_id","name"])}))})),X(r,"onChangeReceiver",(function(e){r.setState({receiver:e})})),X(r,"onChangeTitle",(function(e){r.setState({title:e.target.value})})),X(r,"renderMailSelector",(function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:V},l.a.createElement("h5",null,__("标题")),l.a.createElement(a.a,{onChange:r.onChangeTitle,defaultValue:r.props.doc.title})),l.a.createElement("div",{className:H},l.a.createElement("h5",null,__("收件人")),l.a.createElement(B,{onChange:r.onChangeReceiver,defaultValue:r.state.receiver})),l.a.createElement("div",{className:G},l.a.createElement(o.a,{onClick:r.ready,type:"primary"},__("发送"))))})),X(r,"cancel",(function(){r.timer&&(clearTimeout(r.timer),r.timer=null),r.clocker&&(clearTimeout(r.clocker),r.clocker=null),r.setState({mailStatus:"normal",mailBlockMessage:""}),i.a.warning(__("已取消发送")),r.props.onMailSended()})),X(r,"renderSending",(function(){return l.a.createElement("div",{className:q},l.a.createElement(n.a,{justify:"block"}),l.a.createElement("p",null,__("邮件即将在 {seconds} 秒后发送，{cancel}",{cancel:l.a.createElement("a",{href:"#",onClick:r.cancel},__("撤销")),seconds:r.state.seconds||0})))})),X(r,"renderSuccess",(function(){return l.a.createElement("div",{className:q},l.a.createElement("span",{className:"larkicon larkicon-check-o"}),l.a.createElement("p",null,__("发送成功")))})),X(r,"renderFailed",(function(){return l.a.createElement("div",{className:q},l.a.createElement("span",{className:"larkicon larkicon-error"}),l.a.createElement("p",null,__("发送失败, 请{retry}",{retry:l.a.createElement("a",{href:"#",onClick:r.retry},__("重新发送"))})))})),X(r,"renderBlock",(function(){return l.a.createElement("div",{className:q},l.a.createElement("span",{className:"larkicon larkicon-error"}),l.a.createElement("p",null,r.state.mailBlockMessage))})),X(r,"renderCanceled",(function(){return l.a.createElement("div",{className:q},l.a.createElement("p",null,__("已取消发送")))})),r.state={receiver:[]},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(t,e),r=t,(u=[{key:"componentDidMount",value:function(){this.setState({mailStatus:"normal",mailBlockMessage:""})}},{key:"render",value:function(){var e;switch(this.state.mailStatus){case"sending":e=this.renderSending();break;case"success":e=this.renderSuccess();break;case"failed":e=this.renderFailed();break;case"block":e=this.renderBlock();break;case"canceled":e=this.renderCanceled();break;default:e=this.renderMailSelector()}return l.a.createElement("div",{className:U,"data-testid":"send-mail-modal"},l.a.createElement("h4",null,__("发送到邮箱")),l.a.createElement("p",null,__("将文档内容发送到指定邮箱")),e)}}])&&W(r.prototype,u),c&&W(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,u,c}(u.PureComponent);Z.defaultProps={},Z.propTypes={onMailSended:s.a.func,onMailSending:s.a.func,doc:s.a.object};t.a=Z},,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(97),o=r.n(n),a=r(62),i=r.n(a),u=r(228),l=r.n(u),c=r(14),s=r.n(c),f=r(557),d=r(1386),p=r(3957);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(){y=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==h(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(h(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function b(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){b(a,n,o,i,u,"next",e)}function u(e){b(a,n,o,i,u,"throw",e)}i(void 0)}))}}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function w(e,t,r){return t=E(t),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function j(e,t,r){return(t=C(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var k=i()("common:biz:doc.editor.base"),S="empty",A="actived",x="out",N=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=r||{},(n=w(this,t)).doc=e,n.docDomain=r.docDomain||f.DOC_DOMAIN.DOC,n.baseVersion=e.draft_version,n.storage={},n.cacheKeys=n._getCacheKeys(),n.cacheStatus=S,n.MaxClearCacheCount=10,n.clearCacheCount=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),r=t,n=[{key:"hasNewVersion",value:function(e){return k("check new version",{base:this.baseVersion,lock:e}),this.baseVersion<e.draft_version}},{key:"isContentChanged",value:function(e){e=e.trim();var t="<cursor />";return p.a.adaptBodyToContent(this.doc).replace(t,"")!==e.replace(t,"")}},{key:"resetDoc",value:function(e){k("onSaved, version:",this.baseVersion),this.doc=g(g({},this.doc),e),this.baseVersion=e.draft_version,this.cacheKeys=this._getCacheKeys()}},{key:"getInitialDocument",value:function(){return this.getLatestDocument()}},{key:"getLatestDocument",value:function(){var e=p.a.adaptDocToDocument(this.doc),t=this._getCachedDocument();if(!t)return k("not found cached content, user server version"),this.transmitCacheStatus(S),e;var r=!this._needUseCache(t,e);return this.transmitCacheStatus(r?x:A),r?e:t}},{key:"transmitCacheStatus",value:function(e){this.cacheStatus!==e&&(this.cacheStatus=e)}},{key:"isCacheActived",get:function(){return this.cacheStatus===A}},{key:"extractSummaryRaw",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.summary,n=t.maxHtmlTextLength,a=e.match(/^\s*<([^>]+)>/),i=["LI","CARD"],u="",l=!r||r===e;a&&(a[1].startsWith("!")||a[1].startsWith("meta"));){var c=a[0].length;u+=a[0],a=(e=e.substr(c)).match(/^\s*<([^>]+)>/)}var s=(new DOMParser).parseFromString(e,"text/html"),d=s.body.childNodes.length>f.BIG_DOCUMENT_BLOCK_COUNT;this.isBigDocument=d;var p=!!s.body.querySelector('card[name="image"]'),h=!!s.body.querySelector('card[name="checkbox"]'),y=!!s.body.querySelector('card[name="bookmarklink"]'),b=!!s.body.querySelector('card[name="file"],card[name="localdoc"]'),m=l?s:(new DOMParser).parseFromString(r,"text/html"),v=m.body,g=f.SUMMARY_PARAGRAPH_MAX_COUNT,_=u;n&&(n-=u.length);for(var w=0,O=!1,E="<p>---".concat(__("首段内容太长，无法截取摘要"),"---</p>"),P=v.childNodes[g];P;){var j=P.nextSibling;P.remove(),P=j}v.querySelectorAll("*").forEach((function(e){if("CARD"===e.nodeName){var t=e.getAttribute("name");if("bookmarklink"===t){var r=e.getAttribute("value");if(r)try{var n=JSON.parse(decodeURIComponent(r.slice(5))),a=o()(n,"detail.icon")||"",u=o()(n,"detail.image")||"";a.startsWith("data:")&&(n.detail.icon=""),u.startsWith("data:")&&(n.detail.image=""),e.setAttribute("value","data:".concat(encodeURIComponent(JSON.stringify(n))))}catch(t){e.remove()}}if("image"===t){var l=e.getAttribute("value");if(l)try{var c=JSON.parse(decodeURIComponent(l.slice(5)));delete c.ocrLocations,delete c.search,e.setAttribute("value","data:".concat(encodeURIComponent(JSON.stringify(c))))}catch(t){e.remove()}}if("board"===t){var s=e.getAttribute("value");if(s)try{var f=JSON.parse(decodeURIComponent(s.slice(5)));if(f.src){var d={src:f.src};e.setAttribute("name","image"),e.setAttribute("type","inline"),e.setAttribute("value","data:".concat(encodeURIComponent(JSON.stringify(d))));var h=m.createElement("p");e.parentNode.replaceChild(h,e),h.appendChild(e),p=!0}}catch(t){e.remove()}}}i.includes(e.nodeName)||(e.removeAttribute("id"),e.removeAttribute("data-lake-id"))}));for(var C=0;C<v.childNodes.length;C++){var k=v.childNodes[C];if(_.length+k.outerHTML.length>n){if(0===C){var S=k;for("TABLE"===k.nodeName&&(S=k.querySelector("tbody"));S.lastChild&&_.length+k.outerHTML.length>n;)if(S.lastChild!==S.firstChild)S.lastChild.remove();else if(S.firstChild.nodeType===Node.ELEMENT_NODE)S=S.firstChild;else{var A=_.length+k.outerHTML.length-n;S.firstChild.data="".concat(S.firstChild.data.substr(0,Math.max(0,S.firstChild.data.length-A-3)),"...")}S.lastChild?(w++,_+=k.outerHTML):_+=E}O=!0;break}w++,_+=k.outerHTML}return{extractCount:w,html:_,isFull:!O&&w===s.body.childNodes.length&&l,isBigDocument:d,hasImage:p,hasTodo:h,hasBookmark:y,hasAttachment:b}}},{key:"extractSummary",value:function(){var e=this.getLatestDocument(),t=e.value;if(e.format!==d.FORMAT.LAKE)return t;var r=this.extractSummaryRaw(t);return r&&r.html}},{key:"_needUseCache",value:function(e,t){return e.draft_version===t.draft_version||e.base_timestamp===t.base_timestamp}},{key:"saveToCache",value:function(e){if(!e.format)return k("save to cache, format not supplied: ignore"),!1;var t=this.doc.content_updated_at;e.draft_version||(e.draft_version=this.doc.draft_version),k("save to cache:",{doc_draft_version:this.doc.draft_version,change_draft_version:e.draft_version});var r=p.a.adaptChangeToCacheData(e,t),n=this.storage.set(this.cacheKeys.changes,r);return n?this.transmitCacheStatus(A):this.clearCacheCount<this.MaxClearCacheCount&&(this._clearOlderCacheBySize(r.length),this.clearCacheCount++),n}},{key:"saveOutdatedCacheToServer",value:(u=m(y().mark((function e(r){var n,o,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(n=p.a.adapterDocumentContent(r),t.CACHE_CONTENT_SAVED[this.doc.id]!==n){e.next=5;break}return e.abrupt("return");case 5:return t.CACHE_CONTENT_SAVED[this.doc.id]=n,o={doc_id:this.doc.id,format:r.format,content:n,base_timestamp:r.base_timestamp,draft_version:r.draft_version,origin:f.DOC_VERSION.ORIGIN.cache,doc_type:this.docDomain},e.prev=7,e.next=10,this.doSaveOutdatedDocVersion(o);case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(7),e.abrupt("return");case 15:a=!this.isContentChanged(n),this.cacheStatus===x&&(this.clearCachedContent(),a||this.emit("outDatedCacheSavedToServer"));case 17:case"end":return e.stop()}}),e,this,[[7,12]])}))),function(e){return u.apply(this,arguments)})},{key:"doSaveOutdatedDocVersion",value:(i=m(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"clearCachedContent",value:function(){k("clear cache"),this.storage.remove(this.cacheKeys.changes),this.transmitCacheStatus(S)}},{key:"_getCacheKeys",value:function(){var e="autosave/docs/".concat(this.doc.id),t={changes:"".concat(e,"/changes")};return this.doc.format===d.FORMAT.LAKE&&(t.changes="".concat(e,"/lake")),t}},{key:"_clearOlderCacheBySize",value:function(e){var t=this;if(!(e>5242880)){for(var r=this.storage.keys().filter((function(e){return e.startsWith("autosave/docs/")})).map((function(e){try{var r=t.storage.get(e);return{key:e,value:JSON.parse(r),length:r.length}}catch(e){return null}})).filter((function(e){return e&&e.value&&e.value.base_timestamp})).sort((function(e,t){return s()(e.value.base_timestamp).isBefore(t.value.base_timestamp)?-1:1})),n=0,o=[],a=0;r[n]&&a<e;)if(r[n].value.offline)n++;else{if(s()(r[n].value.base_timestamp).isAfter(s()().add(-30,"day")))break;a+=r[n].length,o.push(r[n].key),n++}a>e&&o.forEach((function(e){t.storage.remove(e)}))}}},{key:"_getCachedDocument",value:function(){var e=this.cacheKeys.changes,t=this.storage.get(e);try{var r=p.a.adaptCacheDataToDocument(t,this.doc.format);if(r&&r.value)return r}catch(e){this.clearCachedContent(),k("invalid cached data: ")}return null}},{key:"getDocument",value:function(){return p.a.adaptDocToDocument(this.doc)}},{key:"saveCacheToServer",value:function(){try{var e=this._getCachedDocument();if(!e)return;this.saveOutdatedCacheToServer(e)}catch(e){}}}],a=[{key:"isDefaultTitle",value:function(e){return!e||e.startsWith("无标题")||e.startsWith("Untitled")}}],n&&_(r.prototype,n),a&&_(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,a,i,u}(l.a);j(N,"SAVE_TYPE",f.SAVE_TYPE),j(N,"MODE",{NORMAL:"normal",OT:"ot"}),j(N,"CACHE_CONTENT_SAVED",{}),t.a=N},function(e,t,r){e.exports=r(3693)},function(e,t,r){"use strict";r.r(t),r.d(t,"ShareButton",(function(){return wr}));r(37);var n=r(8),o=r(0),a=r.n(o),i=r(189),u=(r(711),r(356)),l=(r(144),r(60)),c=r(526),s=r(215),f=r(32),d="styles-module_popover_v7CCF",p="styles-module_disable_OpJcF";function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var y=["panel","CollaboratorChannel","InviteSelectorChannel","children"],b=["shareViewType","canCollaborator","canShare","isFileBook","onlyCollaborator","organization","group","book","me","targetResource","onChangeShare","beforeShareUpdate","getPopupContainer"];function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(null,arguments)}function v(){v=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",y="executing",b="completed",m={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==h(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===b){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?b:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=b,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(h(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var C=function(e){return e.parentNode||document.body},k=function(e){var t=e.panel,r=e.CollaboratorChannel,a=e.InviteSelectorChannel,i=e.children,h=j(e,y),g=h.shareViewType,w=h.canCollaborator,P=h.canShare,k=h.isFileBook,S=h.onlyCollaborator,A=h.organization,x=h.group,N=h.book,T=h.me,D=h.targetResource,L=h.onChangeShare,R=h.beforeShareUpdate,I=h.getPopupContainer,M=void 0===I?C:I,F=j(h,b),B=E(o.useState(!1),2),U=B[0],H=B[1],V=E(o.useState(!1),2),G=V[0],q=V[1];o.useEffect((function(){var e="#collaborator"===window.location.hash||window.location.hash.startsWith("#collaborator?");S&&e&&w&&g===c.b.DOC&&(q(!0),H(!0))}),[]),o.useEffect((function(){S&&w&&g===c.b.DOC&&q(!0)}),[S]);var z=function(){var e,t=(e=v().mark((function e(t){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_(_({},t),{},{id:D.id}),!S){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",null==L?void 0:L(r));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){O(a,n,o,i,u,"next",e)}function u(e){O(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),W=o.useMemo((function(){var e=null!=A&&A.id?c.a.ORG:c.a.PERSON;return Object(s.a)()?e:c.a.INTERNAL}),[A]);return null!=D&&D.id?o.createElement(u.a,{overlayClassName:d,content:o.createElement(t,{CollaboratorChannel:r,InviteSelectorChannel:a,onAttrsChange:z,beforeAttrsChange:R,share:D,shareViewType:g,canCollaborator:w,canShare:P,isFileBook:k,belongs:W,organization:A,group:x,book:N,me:T,showCollaborator:G,onlyCollaborator:S}),trigger:U&&f.c?"hover":"click",placement:"bottomRight",destroyTooltipOnHide:!0,visible:U,onVisibleChange:function(e){H(e)},getPopupContainer:M,noArrow:!0},i||o.createElement(n.a,m({},F,{"data-aspm-click":"c36321.d326998"}),o.createElement("span",null,__("分享")))):o.createElement(l.a,{placement:"bottomRight",title:__("当前无法使用分享，请检查网络状态"),arrowPointAtCenter:!0},o.createElement(n.a,m({className:p},F),o.createElement("span",null,__("分享"))))},S=(r(44),r(10)),A=(r(59),r(30)),x=r(295),N=r(1515),T=r(3595),D=r(11),L=r(97),R=r.n(L),I=r(4067),M=(r(1300),r(1073)),F="ShareQrCodeLazyShow-module_skeletonPanel_OLLRv",B="ShareQrCodeLazyShow-module_skeletonTitle_-9VKp",U="ShareQrCodeLazyShow-module_skeletonImage_oIjcM",H="ShareQrCodeLazyShow-module_skeletonButton_VsITP",V=function(){return o.createElement("div",{className:F},o.createElement(M.a,{className:B,title:!0,paragraph:!1,active:!0}),o.createElement(M.a.Image,{className:U}),o.createElement(M.a,{className:H,title:!0,paragraph:!1,active:!0}))},G=(r(1009),r(692)),q=(r(3323),r(3619)),z=r(5),W=r.n(z),K=r(252),Y=r.n(K),J=r(43),$=r(52),X=r(403),Q=r(452),Z=r(3476),ee=r(3550);function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ne=function(e){var t=e.target_id,r=e.target_type,n=te(o.useState(0),2),a=n[0],i=n[1];return o.useEffect((function(){t&&["Book","Doc"].includes(r)&&$.a.collaborations.count({target_type:r,target_id:t,status:Q.STATUS.applying}).then((function(e){i((null==e?void 0:e.count)||0)}))}),[t,r]),o.createElement(q.a,{dot:a>0,offset:[-4,4],className:ee.a.dot},o.createElement(J.b,{className:ee.a.inviteIcon,name:"icon-collaboratorlist",width:30}))},oe=function(e){var t=e.share,r=e.shareViewType,n=e.group,a=e.book,i=e.handlePanelShow;return o.createElement(o.Fragment,null,o.createElement(G.a.Item,{className:ee.a.firstItem,actions:[o.createElement(l.a,{title:__("链接添加协作者"),placement:"top",autoAdjustOverflow:!0,arrowPointAtCenter:!0},o.createElement("div",{key:"list-loadmore-edit",onClick:function(){return i(Z.c.inviteSelectorChannel)},"data-aspm-click":"c36321.d326999"},o.createElement(J.b,{className:ee.a.inviteIcon,name:"addlink",width:30}))),o.createElement(l.a,{title:__("查看所有协作者"),placement:"top",autoAdjustOverflow:!0,arrowPointAtCenter:!0},o.createElement("div",{key:"list-loadmore-more",className:ee.a.inviteIconLi,onClick:function(){r===c.b.BOOK?Object(X.d)("/r/".concat(null==n?void 0:n.login,"/").concat(null==a?void 0:a.slug,"/collaborators")):r===c.b.DOC&&i(Z.c.collaboratorChannel)},"data-aspm-click":"c36321.d327000"},o.createElement(ne,{target_id:null==t?void 0:t.id,target_type:Y()(r.toLowerCase())})))]},o.createElement(G.a.Item.Meta,{avatar:o.createElement(J.b,{className:W()(ee.a.itemIcon,ee.a.appointIcon),name:"nav-invite",width:40}),title:o.createElement("span",null,__("添加协作者")),description:o.createElement("span",null,__("通过链接，邀请对方加入协作"))})))},ae=r(1387),ie=r(1725),ue=r(1726),le=r(3641),ce=r(34),se=r(51);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=fe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(){pe=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==fe(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(fe(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function he(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return be(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?be(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var me=function(e){var t=e.canCollaborator,r=e.isShareActive,a=e.belongs,i=e.shareViewType,u=e.organization,l=e.group,f=e.book,d=e.share,p=e.me,h=e.handleScopeChange,y=ye(o.useState(!1),2),b=y[0],m=y[1],v=!(!u||null==u||!u.id),g=Object(T.a)(),_=o.useMemo((function(){var e=g.interests[se.INTEREST_CODE.create_public_resource];return e||v||i!==c.b.DOC||(e=!0),e}),[l]),w=function(){var e;null===(e=window.__member_message_ref)||void 0===e||e.current.showMemberIntro(ce.LIMIT_SCENE.share_public)},O=o.useMemo((function(){if(!r&&!_&&((null==u||!u.id)&&"User"===(null==l?void 0:l.type)))return l.id===p.id?__("会员可公开内容至互联网 {btn}",{btn:o.createElement("a",{onClick:w},__("购买会员"))}):__("联系知识库所有者购买会员可公开内容至互联网");return R()(Z.v,[a,Object(Z.k)(d,i,l,f)])}),[i,a,d,l,f]),E=o.useMemo((function(){return R()(Z.t,[a,r?"public":"private"])}),[a,r]),P=function(){var e,t=(e=pe().mark((function e(){return pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,h(a===c.a.PERSON?D.PRIVACY.public:D.PRIVACY.intranet);case 4:return e.prev=4,m(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[0,,4,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){he(a,n,o,i,u,"next",e)}function u(e){he(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return o.createElement(G.a.Item,{className:W()(de({},ee.a.firstItem,!t)),actions:[!r&&(_||v)&&o.createElement(o.Fragment,null,o.createElement(n.a,{className:W()(ee.a.shareButton,ee.a.sharePublic),disabled:b,onClick:P},b?o.createElement(ae.default,{width:14,height:14,className:ee.a.loadingIcon}):__("公开")))]},o.createElement(G.a.Item.Meta,{avatar:r?o.createElement(ie.default,{width:40,height:40,className:W()(ee.a.itemIcon,ee.a.publicIcon)}):o.createElement(ue.default,{width:40,height:40,className:W()(ee.a.itemIcon,ee.a.publicIcon)}),title:o.createElement("span",{className:ee.a.itemTitle},E,!_&&o.createElement(le.a,{className:ee.a.memberAbleIcon,isYuque:Object(s.a)(),group:l,organization:u})),description:O}))},ve=(r(57),r(13)),ge=r(1727),_e=r(718),we=r.n(_e),Oe=r(3694),Ee=r(248),Pe=function(e){var t,r=e.shareLink,a=e.isFileBook,i=e.privacy,u=e.belongs,l=e.shareViewType,s=e.organization,f=e.group,d=e.book,p=e.share,h=e.handleScopeChange,y=e.handlePanelShow,b=e.handlePanelType,m=e.handlePanelTitle,v=e.LazyShareQrCodeChannel,g=!(!s||null==s||!s.id),_=Object(N.c)(p,l,f,d).currentPassword,w=Object(N.b)(p,l,f,d).currentIndexedLevel,O=Object(N.e)(p,l,g),E=Object(Ee.g)(f),P=[{type:"scopeSet",title:__("分享范围"),hidden:u===c.a.PERSON||u===c.a.ORG&&a,defaultValue:u!==c.a.PERSON?null===(t=Z.q[u].actions.find((function(e){return e.value===i})))||void 0===t?void 0:t.label:null,icon:"icon-range"},{type:"passwordSet",title:__("密码访问"),defaultValue:_||__("无密码"),icon:"icon-key-2"},{type:"searchSet",title:Z.r[l][u].action,hidden:a||E,defaultValue:1===w?__("已开启"):__("关闭"),icon:"help-search"},{type:"closeShareSet",title:__("关闭公开分享"),noDetail:!0,icon:"icon-cancellink"}];O&&P.unshift({type:"shareExpiredTimeSet",title:__("有效期"),defaultValue:O.expiredTime,icon:"nav-clock"}),l===c.b.DOC&&u===c.a.INTERNAL&&(null==d?void 0:d.public)===D.PRIVACY.private&&(P=P.filter((function(e){return"searchSet"!==e.type})));var j=o.useCallback((function(){if(null!=r&&r.url){we()((null==r?void 0:r.urlWithDesc)||r.url,{format:"text/plain"});var e=_?__("已复制链接和密码"):__("已复制链接");S.a.success(e,1)}}),[r]);return o.createElement("div",{className:ee.a.moreConfigs},o.createElement("div",{className:ee.a.shareLinkSet},o.createElement(ve.a,{className:W()(ee.a.shareLinkShow,ee.a.qrCode),disabled:!0,placeholder:null==r?void 0:r.url}),o.createElement(n.a,{className:ee.a.shareButton,onClick:j},__("复制链接")),o.createElement(n.a,{className:ee.a.shareQrCode,onClick:function(){return y(Z.c.shareQrCodeChannel)},onMouseOver:function(){v.preload()}},o.createElement(ge.default,{className:ee.a.shareQrCodeIcon,width:18,height:18}))),o.createElement(Oe.a,{settings:P,onClick:function(e,t){"closeShareSet"===e?h(D.PRIVACY.private):function(e,t){y(Z.c.shareChannels),b(e),m(t)}(e,t)}}))},je=r(4099);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function ke(){ke=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==Ce(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Ce(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function Se(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Ae(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Se(a,n,o,i,u,"next",e)}function u(e){Se(a,n,o,i,u,"throw",e)}i(void 0)}))}}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Te=Object(x.b)((function(){return r.e(1356).then(r.bind(null,7215))})),De=function(e){var t=e.share,r=e.shareViewType,n=e.canShare,a=e.canCollaborator,i=void 0!==a&&a,u=e.isFileBook,l=void 0!==u&&u,s=e.showCollaborator,f=e.onlyCollaborator,d=e.belongs,p=e.beforeAttrsChange,h=e.onAttrsChange,y=e.organization,b=e.group,m=e.book,v=e.me,g=e.CollaboratorChannel,_=e.InviteSelectorChannel,w=xe(o.useState(s?Z.c.collaboratorChannel:Z.c.sharePanel),2),O=w[0],E=w[1],P=xe(o.useState(""),2),j=P[0],C=P[1],k=xe(o.useState(""),2),x=k[0],L=k[1],M=Object(T.a)(),F=xe(A.a.useModal(),2),B=F[0],U=F[1],H=o.useMemo((function(){return Object(N.d)(t,r,b,m)}),[t,r,b,m]),G=H.privacy,q=H.isShareActive,z=o.useMemo((function(){var e=Object(Z.k)(t,r,b,m);return d===c.a.INTERNAL&&G===D.PRIVACY.private&&(null==m?void 0:m.extend_private)===D.EXTEND_PRIVATE.BIND_DEPARTMENTS&&(e="extend_private"),R()(Z.d,[r,d,e])}),[r,d,t,b,m]),W=o.useMemo((function(){return Object(N.a)(t,r,b,m)}),[t,r,b,m]),K=function(){var e=Ae(ke().mark((function e(n){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(je.b)(n,r,t,M,B,p,h,G);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),S.a.error((null===e.t0||void 0===e.t0?void 0:e.t0.message)||__("操作失败"));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Ae(ke().mark((function e(t){return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==h?void 0:h({encrypted_password:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Ae(ke().mark((function e(t){var r;return ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t?1:0,e.next=3,null==h?void 0:h({indexed_level:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.createElement(o.Fragment,null,o.createElement("div",{className:ee.a.sharePanel},n&&O===Z.c.shareChannels&&o.createElement(I.a,{panelType:j,panelTitle:x,share:t,belongs:d,organization:y,group:b,book:m,me:v,shareViewType:r,handlePasswordChange:Y,handleScopeChange:K,handleSearchChange:J,onBack:function(){return E(Z.c.sharePanel)}}),O===Z.c.sharePanel&&o.createElement("div",{className:ee.a.main},o.createElement("div",{className:ee.a.mainIntro},n&&o.createElement("div",{className:ee.a.shareDescText},z),i&&o.createElement(oe,{share:t,shareViewType:r,group:b,book:m,handlePanelShow:function(e){return E(e)}}),n&&o.createElement(me,{canCollaborator:i,isShareActive:q,belongs:d,shareViewType:r,organization:y,group:b,book:m,share:t,me:v,handleScopeChange:K})),n&&q&&o.createElement(Pe,{shareLink:W,isFileBook:l,privacy:G,belongs:d,shareViewType:r,organization:y,group:b,book:m,share:t,handleScopeChange:K,handlePanelShow:function(e){return E(e)},handlePanelType:function(e){return C(e)},handlePanelTitle:function(e){return L(e)},LazyShareQrCodeChannel:Te})),i&&O===Z.c.inviteSelectorChannel&&_&&o.createElement(_,{share:t,organization:y,group:b,book:m,shareViewType:r,onBack:function(){return E(Z.c.sharePanel)},inviteContent:"inviteSharePanel"}),i&&O===Z.c.collaboratorChannel&&g&&o.createElement(g,{onlyCollaborator:f,share:t,organization:y,group:b,book:m,inviteContent:"collaboratorPanel",onBack:function(){return E(Z.c.sharePanel)}}),n&&q&&O===Z.c.shareQrCodeChannel&&o.createElement(o.Suspense,{fallback:o.createElement(V,null)},o.createElement(Te,{share:t,shareViewType:r,link:null==W?void 0:W.url,onBack:function(){return E(Z.c.sharePanel)}}))),U)},Le=r(932),Re=r(532),Ie=r(2),Me=r.n(Ie),Fe=r(1713),Be=r(3612),Ue=r(929),He=(r(196),r(36)),Ve=(r(246),r(123)),Ge=(r(497),r(95)),qe=r(1540),ze=r(394),We=r(112),Ke=(r(690),r(294)),Ye=r(1077),Je=r(3754),$e={role:"RoleSelector-module_role_jDwZn",trigger:"RoleSelector-module_trigger_PbJ3K",active:"RoleSelector-module_active_lhpS5",icon:"RoleSelector-module_icon_YSGjG",up:"RoleSelector-module_up_BKR9i",menu:"RoleSelector-module_menu_MwfMA",label:"RoleSelector-module_label_JI2Gx",menuItem:"RoleSelector-module_menuItem_cwz56",desc:"RoleSelector-module_desc_lnp7h"};function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function et(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Xe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tt=et(et({},Q.ROLE.edit,{label:Object(Je.c)(Q.ROLE.edit),desc:__("拥有文档的编辑权限"),role:Q.ROLE.edit}),Q.ROLE.readonly,{label:Object(Je.c)(Q.ROLE.readonly),desc:__("仅拥有只读和评论权限"),role:Q.ROLE.readonly}),rt=function(e){var t=Qe(Object(o.useState)(!1),2),r=t[0],n=t[1],i=e.role,u=e.placement,l=e.canChange,c=e.disableItems,s=e.externalActions,f=tt[i];if(!l)return a.a.createElement("span",{className:$e.status,"data-collaboration-role":i},null==f?void 0:f.label);return a.a.createElement("div",{className:"role-selector"},a.a.createElement(Ke.a,{trigger:["click"],placement:u,onVisibleChange:function(e){n(e)},overlay:a.a.createElement(Ge.a,{selectedKeys:["".concat(i)],className:$e.menu,style:{border:"none"}},[Q.ROLE.edit,Q.ROLE.readonly].map((function(t){var r=tt[t],o=c.includes(r.role);return a.a.createElement(Ge.a.Item,{key:"".concat(r.role),disabled:o,onClick:function(){return t=r.role,e.onChange(t),void n(!1);var t}},a.a.createElement("a",{className:$e.menuItem,href:"#"},a.a.createElement("span",null,a.a.createElement("span",{className:$e.label},r.label),a.a.createElement("span",{className:$e.desc},r.desc)),a.a.createElement(Ye.default,{style:{color:"#25B864"}})))})),s&&s())},a.a.createElement("span",{className:W()($e.trigger,et({},$e.active,r)),"data-collaboration-role":i},null==f?void 0:f.label," ",a.a.createElement(J.b,{name:"arrow-down",className:W()($e.icon,et({},$e.up,r)),width:16}))))};rt.propTypes={onChange:Me.a.func,placement:Me.a.string,canChange:Me.a.bool,role:Me.a.oneOf([Q.ROLE.readonly,Q.ROLE.edit]),externalActions:Me.a.func,disableItems:Me.a.array},rt.defaultProps={onChange:function(){},placement:"bottomRight",role:0,canChange:!0,disableItems:[]};var nt=rt,ot={joinUserItem:"Item-module_joinUserItem_0O6yw",userInfo:"Item-module_userInfo_F4pgj",showItem:"Item-module_showItem_sCn3R",avatar:"Item-module_avatar_JD1HW",userDesc:"Item-module_userDesc_q4mqR",name:"Item-module_name_ff-QM",selectorItem:"Item-module_selectorItem_UePAS",loginShow:"Item-module_loginShow_DePxA",login:"Item-module_login_bu7O2",department:"Item-module_department_y3daB",applyPending:"Item-module_applyPending_7Va+N",pending:"Item-module_pending_KikZW",pendingRole:"Item-module_pendingRole_mvO-A",topRightDesc:"Item-module_topRightDesc_dQW2s",actions:"Item-module_actions_Mfqej",actionItem:"Item-module_actionItem_piU3P",actionItemReject:"Item-module_actionItemReject_rSq40",actionItemLabel:"Item-module_actionItemLabel_kzYeZ",deleteActionItem:"Item-module_deleteActionItem_RJWcd",label:"Item-module_label_qLBXy",desc:"Item-module_desc_-+chL"};function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function it(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lt(n.key),n)}}function ut(e,t,r){return(t=lt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lt(e){var t=function(e,t){if("object"!=at(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==at(t)?t:t+""}function ct(){ct=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==at(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(at(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function st(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pt(e){var t=e.data,r=e.renderActions;return a.a.createElement("div",{"data-testid":"join-user-item",key:t.uid,className:ot.joinUserItem,onClick:function(){t.ableToAdd()&&e.onAdd(t)}},a.a.createElement("div",{className:W()(ot.userInfo,ut({},ot.showItem,!t.isNewUser()))},a.a.createElement("span",{className:ot.avatar},a.a.createElement(ze.a,{src:t.avatar,name:t.name,size:"sm"})),a.a.createElement("div",{className:ot.userDesc},function(e){var t,r=window.appData.isYuque,n=e.login||e.uid;if(!r){var o,i=(null===(o=e.data)||void 0===o?void 0:o.lastName)||e.login;return a.a.createElement("div",{className:W()(ot.name,ut({},ot.selectorItem,e.isNewUser()))},a.a.createElement("p",{className:ot.loginShow},e.name,a.a.createElement("span",{className:ot.login},__("（")+i+__("）"))),a.a.createElement("p",{className:ot.department},e.department))}return a.a.createElement("div",{className:ot.name},e.name,1!==(null===(t=e.collaborator)||void 0===t?void 0:t.status)?null:a.a.createElement("span",{className:ot.login},__("（")+n+__("）")))}(t),!t.isGroupMember()&&!t.isGroupReadonlyMember()&&t.isInvited()&&!t.isMine()&&a.a.createElement("span",{className:ot.topRightDesc},__("尚未加入")),!t.isGroupMember()&&!t.isGroupReadonlyMember()&&t.isApplying()&&a.a.createElement("div",{className:ot.applyPending},a.a.createElement("span",{className:ot.pending},__("申请权限")),a.a.createElement("span",{className:W()(ot.pending,ot.pendingRole)},"0"===t.role?__("可阅读"):__("可编辑"))))),a.a.createElement("div",{className:ot.actions},r(e)))}var ht=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ut(this,"data",void 0),this.data=t},(t=[{key:"actionId",get:function(){throw new Error("需要实现这个对象")}},{key:"actionType",get:function(){throw new Error("需要实现这个对象")}},{key:"uid",get:function(){return this.data.uid}},{key:"id",get:function(){return this.data.id}},{key:"login",get:function(){return this.data.login}},{key:"name",get:function(){return this.data.name}},{key:"avatar",get:function(){return this.data.avatar_url}},{key:"role",get:function(){return this.data.role}},{key:"provider_type",get:function(){return this.data.provider_type}},{key:"provider_userid",get:function(){return this.data.provider_userid}}])&&it(e.prototype,t),r&&it(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),yt=function(e){if(!(e.data instanceof ht))throw new Error("data should be extend ItemBase");return pt(e)};yt.propTypes={data:Me.a.object.isRequired,renderActions:Me.a.func,onAgree:Me.a.func,onReject:Me.a.func,onDelete:Me.a.func,onRoleChange:Me.a.func,onAdd:Me.a.func,limited:Me.a.bool},yt.defaultProps={renderActions:function(e){var t=e.data,r=e.limited,o=a.a.useRef(null),i=ft(A.a.useModal(),2),u=i[0],l=i[1];if(t.ableToAdd())return null;if(t.isMine())return a.a.createElement("span",{className:ot.actionItemLabel},__("你自己"));var c=function(e){var t=__("确认拒绝 ".concat(e," 的访问申请？")),r=__("确认要拒绝 ".concat(e," 的访问申请吗？"));return new Promise((function(e){u.confirm({icon:a.a.createElement(qe.default,null),width:505,title:t,content:__("{desc}拒绝后该用户无法访问该文档。",{desc:r}),okText:__("拒绝"),cancelText:__("取消"),onOk:function(){e(!0)},onCancel:function(){e(!1)},getContainer:function(){return o.current||document.body}})}))},s=function(){var t,r=(t=ct().mark((function t(r){return ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(r.name);case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:Object(We.spmClick)("c330513",{source:window.location.href.includes("source=auto_apply")?"auto_apply":"default",action:"refuse",infoType:"Doc"}),e.onReject(r);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){st(a,n,o,i,u,"next",e)}function u(e){st(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return a.a.createElement(a.a.Fragment,null,t.isUpdateAbility()&&t.isApplying()&&a.a.createElement(a.a.Fragment,null,a.a.createElement(n.a,{type:"text",size:"small",onClick:function(){e.onAgree(t),Object(We.spmClick)("c330513",{source:window.location.href.includes("source=auto_apply")?"auto_apply":"default",action:"approve",infoType:"Doc"})},className:ot.actionItem,"data-testid":"join-user-agree-button",disabled:r},__("同意")),a.a.createElement(n.a,{type:"text",size:"small",onClick:function(){s(t)},className:W()(ot.actionItem,ot.actionItemReject)},__("拒绝"))),t.isUpdateAbility()&&(t.isJoined()||t.isInvited())&&a.a.createElement(nt,{role:parseInt(t.role,10),onChange:function(r){e.onRoleChange(t,r)},externalActions:function(){return a.a.createElement(Ge.a.Item,{key:"deleteItem-".concat(t.role)},a.a.createElement("a",{key:"deleteItem",className:ot.deleteActionItem,"data-testid":"join-user-delete-button",onClick:function(){e.onDelete(t)}},a.a.createElement("span",null,a.a.createElement("span",{className:ot.label},__("移除")),a.a.createElement("span",{className:ot.desc},__("移除该协作者")))))},canChange:t.isUpdateAbility()}),l)}};var bt=yt;function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var gt=function(e){var t=mt(Object(o.useState)(""),2),r=t[0],n=t[1],i=e.renderItem,u=e.dataSource,l="searchSelector-".concat(+new Date);return a.a.createElement("div",{className:"join-user-search-selector",id:l},a.a.createElement("div",{className:"selector"},a.a.createElement(He.a,{mode:"multiple",labelInValue:!0,listHeight:354,value:[],placeholder:e.placeholder,notFoundContent:e.loading?a.a.createElement(Ve.a,{justify:"block"}):r?e.renderNotFound():null,filterOption:!1,onSearch:function(t){n(t),e.onSearch(t)},onChange:e.onChange,onSelect:function(t,r){n("");var o=u.find((function(r){return r[e.key]===t.key}));o&&e.onSelect(o)},onBlur:function(){n(""),e.onBlur&&e.onBlur()},style:{width:"100%"},disabled:e.disableSearch,getPopupContainer:function(){return document.getElementById(l)}},u.map((function(t){return a.a.createElement(He.a.Option,{key:t[e.key],className:"selector-item",disabled:e.disableSelect(t)},a.a.createElement("div",{className:"full-item"},a.a.createElement(i,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,renderActions:e.renderActions})),a.a.createElement("div",{className:"simple-item"},t[e.name]))})))))};gt.propTypes={dataSource:Me.a.array,renderItem:Me.a.func,renderNotFound:Me.a.func,renderActions:Me.a.func,key:Me.a.string,name:Me.a.string,disableSelect:Me.a.func,onSearch:Me.a.func,onChange:Me.a.func,onSelect:Me.a.func,onAgree:Me.a.func,onReject:Me.a.func,onDelete:Me.a.func,onRoleChange:Me.a.func,onAdd:Me.a.func,onBlur:Me.a.func,loading:Me.a.bool,placeholder:Me.a.string,disableSearch:Me.a.bool},gt.defaultProps={key:"uid",name:"name",placeholder:__("搜索添加用户"),loading:!1,dataSource:[],renderItem:bt,renderNotFound:function(){return null},onSearch:function(){},onChange:function(){},onSelect:function(){},onAgree:function(){},onReject:function(){},onDelete:function(){},onRoleChange:function(){},onBlur:function(){},onAdd:function(){},disableSelect:function(){return!1},disableSearch:!1};var _t=gt,wt="EmptyTip-module_emptyTip_aBtYt",Ot="EmptyTip-module_emptyImageWrapper_6BIQC",Et="EmptyTip-module_emptyImage_u42M6",Pt="EmptyTip-module_emptyText_JUjEv",jt=function(){return a.a.createElement("div",{className:wt},a.a.createElement("div",{className:Ot},a.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*aSg9SJR6isIAAAAAAAAAAAAAARQnAQ",className:Et})),a.a.createElement("p",{className:Pt},__("暂无文档协作者")))},Ct="List-module_item_Yt8gv",kt=function(e){var t=e.dataSource,r=e.renderItem,n=e.limited,o=t.filter((function(e){return e.collaborator.status===Q.STATUS.joined})),i=t.filter((function(e){return e.collaborator.status!==Q.STATUS.joined}));return a.a.createElement(a.a.Fragment,null,!!i.length&&a.a.createElement(a.a.Fragment,null,null==i?void 0:i.map((function(t){return a.a.createElement("div",{key:t.id||t.login,className:Ct},a.a.createElement(r,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,renderActions:e.renderActions,limited:n}))}))),!!o.length&&a.a.createElement(a.a.Fragment,null,null==o?void 0:o.map((function(t){return a.a.createElement("div",{key:t.id||t.login,className:Ct},a.a.createElement(r,{data:t,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,renderActions:e.renderActions}))}))))};kt.propTypes={dataSource:Me.a.array,onAgree:Me.a.func,onReject:Me.a.func,onDelete:Me.a.func,onRoleChange:Me.a.func,onAdd:Me.a.func,renderItem:Me.a.func,renderActions:Me.a.func,limited:Me.a.bool},kt.defaultProps={dataSource:[],onAgree:function(){},onReject:function(){},onDelete:function(){},onRoleChange:function(){},onAdd:function(){},renderItem:bt};var St=kt,At={title:"Modal-module_title_Fhe+q",menu:"Modal-module_menu_GTmMW",searchWrapper:"Modal-module_searchWrapper_G76nZ",searchSelector:"Modal-module_searchSelector_qZfrJ",searchAdd:"Modal-module_searchAdd_srKkd",btnLoadMore:"Modal-module_btnLoadMore_+NLxh",spinContainer:"Modal-module_spinContainer_6y18w",listWrapper:"Modal-module_listWrapper_YI-Wn"};function xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Nt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Tt=function(e){var t=e.collaboratorCount,r=xt(a.a.useState(!1),2),n=r[0],o=r[1],i=window.appData,u=i.isYuque,l=i.organization,c=i.group,f=t>=Ue.a.getDocCollaboratorLimit(c),d=!(Object(s.a)()&&(null==l||!l.id));return e.onLoading?a.a.createElement("div",{className:At.spinContainer},a.a.createElement(M.a,{title:!0,paragraph:!1,active:!0}),a.a.createElement(M.a,{avatar:!0,title:!0,paragraph:!1,active:!0}),a.a.createElement(M.a,{avatar:!0,title:!0,paragraph:!1,active:!0}),a.a.createElement(M.a,{avatar:!0,title:!0,paragraph:!1,active:!0}),a.a.createElement(M.a,{avatar:!0,title:!0,paragraph:!1,active:!0})):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:At.content},u&&e.memberDocCollaboratorTip&&a.a.createElement(Fe.e,{collaboratorCount:e.collaboratorCount,user:c}),a.a.createElement("div",{className:At.searchWrapper},e.showSearch&&a.a.createElement("div",{className:At.searchSelector},a.a.createElement(_t,{loading:e.searchLoading,dataSource:e.searchData,placeholder:e.placeholder,onSelect:e.onSelect,onSearch:e.onSearch,onChange:e.onChange,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,onBlur:e.onBlur,disableSelect:e.disableSelect,disableSearch:e.disableSearch,renderNotFound:e.renderSearchNotFound,renderItem:e.renderItem,renderActions:e.renderActions})),d&&a.a.createElement("div",{className:At.searchAdd,onClick:function(){return o(!0)}},__("批量添加"))),e.dataSource.length>0?a.a.createElement("div",{className:At.listWrapper},a.a.createElement(St,{dataSource:e.dataSource,onAgree:e.onAgree,onReject:e.onReject,onDelete:e.onDelete,onRoleChange:e.onRoleChange,onAdd:e.onAdd,renderItem:e.renderItem,renderActions:e.renderActions,limited:u&&f}),e.moreLoading?a.a.createElement("div",{className:At.btnLoadMore},__("加载中...")):e.shouldLoadMore?a.a.createElement("div",{className:At.btnLoadMore,onClick:e.onLoadMore},__("加载更多")):null):a.a.createElement(jt,null)),n&&a.a.createElement(Be.a,{type:"doc",visible:n,onCancel:function(){return o(!1)},afterSubmit:function(){var t;o(!1),null===(t=e.onAdd)||void 0===t||t.call(e)}}))};Tt.propTypes={dataSource:Me.a.array,shouldLoadMore:Me.a.bool,onLoadMore:Me.a.func,onAgree:Me.a.func,onReject:Me.a.func,onDelete:Me.a.func,onRoleChange:Me.a.func,onAdd:Me.a.func,moreLoading:Me.a.bool,renderItem:Me.a.func,renderActions:Me.a.func,dispatch:Me.a.func,memberDocCollaboratorTip:Me.a.bool,collaboratorCount:Me.a.number,searchData:Me.a.array,placeholder:Me.a.string,disableSearch:Me.a.bool,disableSelect:Me.a.func,onSearch:Me.a.func,onChange:Me.a.func,onSelect:Me.a.func,onBlur:Me.a.func,searchLoading:Me.a.bool,renderSearchNotFound:Me.a.func,showSearch:Me.a.bool,onLoading:Me.a.bool},Tt.defaultProps={collaboratorCount:0,dataSource:[],searchData:[],shouldLoadMore:!1,moreLoading:!1,onLoadMore:function(){},showSearch:!0,disableSearch:!1};var Dt=Tt,Lt=r(261),Rt=r(4038),It=r(3515),Mt=r(3835),Ft="SearchNotFound-module_notfound_MSXOw",Bt="SearchNotFound-module_notfoundTitle_Br7DA",Ut=function(){return a.a.createElement("div",{className:Ft},a.a.createElement("p",{className:Bt},__("未在空间中找到该用户，请检查输入或联系管理员添加到空间成员")))},Ht=function(){return a.a.createElement("div",{className:Ft},a.a.createElement("p",{className:Bt},__("未搜索到相关用户")))},Vt=r(93);function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kt(n.key),n)}}function Wt(e,t,r){return t&&zt(e.prototype,t),r&&zt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kt(e){var t=function(e,t){if("object"!=Gt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gt(t)?t:t+""}function Yt(e,t,r){return t=$t(t),function(e,t){if(t&&("object"==Gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jt()?Reflect.construct(t,r||[],$t(e).constructor):t.apply(e,r))}function Jt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jt=function(){return!!e})()}function $t(e){return $t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$t(e)}function Xt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qt(e,t)}function Qt(e,t){return Qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qt(e,t)}var Zt=function(e){function t(e,r,n,o,a){var i;return qt(this,t),(i=Yt(this,t,[e])).collaborator=r,i.groupUser=n,i.target=o,i.book=a||o,i}return Xt(t,e),Wt(t,[{key:"department",get:function(){var e,t;return(null===(e=this.data)||void 0===e||null===(e=e.profile)||void 0===e?void 0:e.department)||(null===(t=this.data)||void 0===t?void 0:t.dep)||null}},{key:"actionId",get:function(){return this.collaborator.id}},{key:"actionType",get:function(){return this.collaborator.type}},{key:"uid",get:function(){return this.data.uid||Object(It.format)([this.data]),this.data.uid}},{key:"userId",get:function(){return this.data.id}},{key:"role",get:function(){return this.collaborator&&String(this.collaborator.role)}},{key:"workId",get:function(){return this.data.workid}},{key:"isUpdateAbility",value:function(){return this.target.abilities.create_collaborator}},{key:"isInvited",value:function(){return this.collaborator&&this.collaborator.status===Q.STATUS.invited}},{key:"isJoined",value:function(){return this.collaborator&&this.collaborator.status===Q.STATUS.joined}},{key:"isApplying",value:function(){return this.collaborator&&this.collaborator.status===Q.STATUS.applying}},{key:"isGroupMember",value:function(){return this.groupUser&&this.groupUser.role!==Vt.ROLE.readonly}},{key:"isGroupReadonlyMember",value:function(){return this.groupUser&&this.groupUser.role===Vt.ROLE.readonly}},{key:"isMine",value:function(){return window.appData.me.login===this.login}},{key:"isNewUser",value:function(){return this.isUpdateAbility()&&!this.isMine()&&!this.isApplying()&&!this.isJoined()&&!this.isInvited()}},{key:"ableToAdd",value:function(){return this.isNewUser()}}])}(ht),er=function(e){function t(e,r,n,o){var a,i;return qt(this,t),(i=Yt(this,t,[e])).collaborator=e,i.user=e.owner,i.collaborator.owner_id=null===(a=i.user)||void 0===a?void 0:a.id,i.groupUser=r,i.target=n,i.book=o||n,i.departments=e.departments,i}return Xt(t,e),Wt(t,[{key:"department",get:function(){var e;return null!==(e=this.departments)&&void 0!==e&&e.length?this.departments.map((function(e){return e.name})).join("-"):null}},{key:"ownerType",get:function(){return this.collaborator.owner_type}},{key:"actionId",get:function(){return this.collaborator.id}},{key:"actionType",get:function(){return this.collaborator.type}},{key:"uid",get:function(){return this.user.uid||Object(It.format)([this.user]),this.user.uid}},{key:"userId",get:function(){return this.user.id}},{key:"role",get:function(){return String(this.collaborator.role)}},{key:"login",get:function(){return this.user.login}},{key:"name",get:function(){return this.user.name}},{key:"avatar",get:function(){return this.user.avatar_url}},{key:"workId",get:function(){return this.user.workid}},{key:"isUpdateAbility",value:function(){return this.target.abilities.create_collaborator}},{key:"isInvited",value:function(){return this.collaborator.status===Q.STATUS.invited}},{key:"isJoined",value:function(){return this.collaborator.status===Q.STATUS.joined}},{key:"isApplying",value:function(){return this.collaborator.status===Q.STATUS.applying}},{key:"isGroupMember",value:function(){return this.groupUser&&this.groupUser.role!==Vt.ROLE.readonly}},{key:"isGroupReadonlyMember",value:function(){return this.groupUser&&this.groupUser.role===Vt.ROLE.readonly}},{key:"isMine",value:function(){return window.appData.me.login===this.login&&this.isUser()}},{key:"isNewUser",value:function(){return this.isUpdateAbility()&&!this.isMine()&&!this.isApplying()&&!this.isJoined()&&!this.isInvited()}},{key:"ableToAdd",value:function(){return this.isNewUser()}},{key:"isUser",value:function(){return this.ownerType===Q.OWNER_TYPE.User}}])}(ht);function tr(e){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(e)}function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){or(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function or(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=tr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ir(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ir(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ur=function(e){var t=e.group,r=e.book,n=e.doc,i=e.organization,u=e.dispatch,l=e.isEditing,c=e.onReverting,s=window.appData.isYuque,f=ar(Object(o.useState)(0),2),d=f[0],p=f[1],h=ar(Object(o.useState)(0),2),y=h[0],b=h[1],m=ar(Object(o.useState)(!1),2),v=m[0],g=m[1],_=ar(Object(o.useState)(!1),2),w=_[0],O=_[1],E=ar(Object(Rt.c)(n,{dispatch:u,book:r,group:t,isEditing:l}),5),P=E[0],j=E[1],C=E[2],k=E[3],A=E[4],x=ar(Object(Rt.e)(n,{dispatch:u,organization:i,optional_properties:"profile"}),4),N=x[0],T=x[1],D=x[2],L=x[3],R=function(e){$.a.collaborations.count({target_type:"Doc",target_id:e.id}).then((function(e){b((null==e?void 0:e.count)||0)}))},I=function(e){return u({type:"proxy.web/collaborations.find",payload:{data:{target_type:"Doc",target_id:e.id,offset:d,limit:200,optional_properties:"departments"},reducer:0===d?"doc/updateCollaborations":"doc/addCollaboration"}}).then((function(e){p(d+e.length),200===e.length?O(!0):O(!1)}))};Object(o.useEffect)((function(){var e;e=n,g(!0),I(e).then((function(){g(!1)})).catch((function(e){g(!1)})),u({type:"proxy.web/groups.users",payload:{data:{id:t.id},reducer:"group/updateMembers"}}),R(n)}),[n.id,t.id]);var M=function(e){u({type:"proxy.web/collaborations.destroy",payload:{data:{id:e.actionId,type:e.actionType},reducer:"doc/removeCollaboration"}}).then((function(){var t=!e.isMine()&&!e.isApplying();S.a.success(a.a.createElement("span",null,__("操作成功"),t&&a.a.createElement("a",{className:Mt.a.revertLink,onClick:function(){c&&c(),S.a.destroy(),u({type:"doc/addCollaborator",payload:{data:e.collaborator}}).then((function(){S.a.success(__("撤销成功!")),I(n),R(n)}))}},__("撤销"))),3),R(n)}))},F=s&&y>=Ue.a.getDocCollaboratorLimit(t);Object(It.format)(t.members.map((function(e){return e.user}))),Object(It.format)(n.collaborations.map((function(e){return e.owner})));var B=N.map((function(e){var o=t.members.find((function(t){var r;return(null===(r=t.user)||void 0===r?void 0:r.uid)===e.uid})),a=n.collaborations.find((function(t){var r;return(null===(r=t.owner)||void 0===r?void 0:r.uid)===e.uid}));return new Zt(e,a,o,n,r)})),U=n.collaborations.map((function(e){var o=t.members.find((function(t){var r,n;return(null===(r=t.user)||void 0===r?void 0:r.uid)===(null===(n=e.owner)||void 0===n?void 0:n.uid)}));return new er(e,o,n,r)}));return a.a.createElement(Dt,{memberDocCollaboratorTip:s&&!!n,collaboratorCount:y,placeholder:__("输入用户名邀请协作"),dataSource:U,link:P,onRefreshLink:j,linkLoading:C,checked:k,onCheckChange:A,searchData:B,onSearch:T,onSelect:function(e){e.ableToAdd()&&function(e){var t={target_type:"Doc",target_id:n.id,role:Q.ROLE.edit};e.userId?t.user_id=e.userId:t=nr(nr({},t),{},{login:e.login,workid:e.workId,name:e.name,provider_type:e.provider_type,provider_userid:e.provider_userid}),u({type:"proxy.web/collaborations.create",payload:{data:t,reducer:"doc/addOneCollaboration"}}).then((function(){S.a.success(__("添加成功")),setTimeout((function(){R(n),I(n)}),100)}))}(e),L(e)},onBlur:L,disableSelect:function(e){return F||e&&!e.ableToAdd()},disableSearch:F,searchLoading:D,onAgree:function(e){u({type:"proxy.web/collaborations.approve",payload:{data:{id:e.actionId},reducer:"doc/updateOneCollaboration"}}).then((function(e){var t=__("已同意用户 {member} 加入",{member:e.owner.name});S.a.success(t),R(n)}))},onReject:M,onDelete:M,onRoleChange:function(e,t){u({type:"proxy.web/collaborations.update",payload:{data:{id:e.actionId,role:t},reducer:"doc/updateOneCollaboration"}}).then((function(){S.a.success(__("更新成功")),R(n)}))},onAdd:function(){I(n),R(n)},disableInvite:F,onLoadMore:function(){I(n)},shouldLoadMore:w,onLoading:v,showSearch:n.abilities.create_collaborator,showJoinLink:n.abilities.create_collaborator,renderSearchNotFound:i&&i.id?Ut:Ht})};ur.propTypes={dispatch:Me.a.func.isRequired,organization:Me.a.object.isRequired,group:Me.a.object.isRequired,book:Me.a.object.isRequired,doc:Me.a.object.isRequired,isEditing:Me.a.bool,onReverting:Me.a.func};var lr=Object(Re.d)((function(e){return e}))(Object(Lt.b)(ur)),cr=r(3697),sr=r(3696);function fr(e){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach((function(t){hr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=fr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yr=function(e){var t,r=e.share,n=e.shareViewType,a=e.isEditing,i=e.inviteContent,u=e.organization,l=e.group,s=e.book,f=e.onBack,d=e.onToggleCollaboratorShow,p={type:n.toLowerCase(),book:s,group:l,organization:u};n===c.b.DOC&&(t=pr(pr({},p),{},{doc:r}));var h,y=o.useMemo((function(){return sr.a.create(t||p)}),[t,p]);return y&&y.enable&&(h={id:sr.a.id,title:sr.a.title,inviteSelectorType:n.toLowerCase(),getJoinUrl:y.getUrl,getToken:y.getToken,updateToken:y.updateToken,deleteTokens:y.deleteTokens,getCopyText:y.getCopyText,inviteModalContent:i,onBackShare:f,moreSettingOptions:y.getMoreSettingOptions(),organization:u,isEditing:a,inviteTarget:r,toggleCollaboratorList:function(e){null==d||d(e)}}),o.createElement(o.Fragment,null,o.createElement(cr.a,h))},br=r(3527);function mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var gr=function(e){var t=e.onlyCollaborator,r=e.share,n=e.inviteContent,a=e.organization,i=e.group,u=e.book,l=e.onBack,c=mr(o.useState(!0),2),s=c[0],f=c[1];return o.createElement(o.Fragment,null,s&&o.createElement("div",{className:W()(br.a.shareDetailSettingPanel,br.a.collaborator)},t?o.createElement("div",{className:br.a.title},__("文档协作者")):o.createElement("div",{className:br.a.title,onClick:l},o.createElement(Le.default,{className:br.a.backIcon,width:20,height:20}),__("文档协作者"))),s&&o.createElement("div",{className:br.a.collaboratorContent},o.createElement(lr,null)),o.createElement(yr,{share:r,organization:a,group:i,book:u,shareViewType:"DOC",isEditing:!0,inviteContent:n,onToggleCollaboratorShow:function(e){return f(e)}}))};function _r(){return _r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_r.apply(null,arguments)}var wr=function(e){return o.createElement(i.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return o.createElement(n.a,null,__("分享"))}},o.createElement(k,_r({panel:De,CollaboratorChannel:gr,InviteSelectorChannel:yr},e)))}},function(e,t,r){"use strict";r(44);var n=r(10),o=r(228),a=r.n(o),i=r(62),u=r.n(i),l=r(557),c=r(88),s=r(287),f=r(1386),d=r(371),p=r.n(d);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function b(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var m=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timing={Init:(new Date).getTime(),EditorLoaded:-1,DocLoadStart:-1,DocLoadEnd:-1,DocRendered:-1,LockReady:-1,CollabReady:-1},this.context=t,this.scene=t.scene,this.MaxRenderTime=5e3,this.maxTimeLimit=6e4,this.autoReportTime=12e4,this._records=[],this.maxRecordCount=1e3,this.minRecordCount=150,this.heartbeatInterval=2e3,this.minBlockTime=300,this.perfReported=!1,this.smoothReported=!1,this.limitSlowActionTime=1e3,this.lastReportAction={},this.reportInterval=3e4,this.startAutoReport()},t=[{key:"getDocFormat",value:function(){return this.context.docFormat}},{key:"getEditorMode",value:function(){return this.context.defaultMode}},{key:"getEditorScene",value:function(){return this.context.scene}},{key:"marks",value:function(e){this.timing[e]=(new Date).getTime()}},{key:"has",value:function(e){return-1!==this.timing[e]}},{key:"startAutoReport",value:function(){var e=this;this.reportTimer=setTimeout((function(){e.reportPerf()}),this.autoReportTime)}},{key:"stopAutoReport",value:function(){this.reportTimer&&(clearTimeout(this.reportTimer),this.reportTimer=null)}},{key:"destroy",value:function(){try{this.reportPerf(),this.reportSmooth(),this.stopAutoReport(),this.clearHeartbeat()}catch(e){}}},{key:"stats",value:function(){var e={m1:this.measure("Init","EditorLoaded"),m2:this.measure("DocLoadStart","DocLoadEnd"),m3:this.measure("Init","DocRendered")};return this.has("CollabReady")?(e.m4=this.measure("Init","CollabReady"),e.d1="collab"):(e.m4=this.measure("Init","DocRendered"),e.d1="lock"),e.d2=this.getEditorScene(),e}},{key:"editReady",value:function(){return this.has("EditorLoaded")&&this.has("DocRendered")}},{key:"reportPerf",value:function(){if(!this.perfReported&&(this.perfReported=!0,this.editReady())){var e=this.stats(),t=this.getDocFormat();this.context.isBigLakeDocument&&c.a.logBigLakeEditorPerf(e),c.a.logEditorPerf(t,e),e.m3>this.MaxRenderTime&&c.a.logEditWorkflow({code:"RENDER_SLOW",message:"渲染耗时 <".concat(Math.ceil(e.m3/1e4),"0 秒"),editMode:this.getEditorMode(),scene:this.getEditorScene()})}}},{key:"reset",value:function(){for(var e in this.timing)this.timing[e]=-1}},{key:"measure",value:function(e,t){return this.timing[e]&&this.timing[t]?-1===this.timing[e]||-1===this.timing[t]?0:Math.max(0,Math.min(this.maxTimeLimit,this.timing[t]-this.timing[e])):0}},{key:"startHeartbeat",value:function(){var e=this;this.smoothReported||(this.clearHeartbeat(),this.pingTime=+new Date,this.heartbeat=setTimeout((function(){e.pong()}),this.heartbeatInterval))}},{key:"clearHeartbeat",value:function(){this.heartbeat&&clearTimeout(this.heartbeat)}},{key:"pong",value:function(){if(!this.inActive){var e=new Date-this.pingTime-this.heartbeatInterval;e<this.minBlockTime?this._records.push(0):this._records.push(Math.ceil(e/1e3))}this._records.length>this.maxRecordCount?this.reportSmooth():this.startHeartbeat()}},{key:"pause",value:function(){this.inActive=!0}},{key:"resume",value:function(){this.inActive=!1}},{key:"reportSmooth",value:function(){if(!this.smoothReported){var e=this._records.length;if(!(e<this.minRecordCount)){var t=0;this._records.forEach((function(e){e&&t++}));var r=Math.round(100*(e-t)/e),n=this.getDocFormat();c.a.logEditorSmooth(n,{d1:this.getEditorMode(),d2:this.getEditorScene(),m1:r,m2:2*e,c2:this._records.join("_"),msg:"顺滑等级: ".concat(Math.floor(r/10))}),this._records=[],this.smoothReported=!0}}}},{key:"logSlowAction",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(r<this.limitSlowActionTime)){var n=+new Date;if(!(this.lastReportAction[t]&&this.lastReportAction[t]+this.reportInterval>n)){this.lastReportAction[t]=n;var o={action:t,useTime:r,scene:this.getEditorScene()};switch(e){case"sheet":c.a.logSheetSlowAction(o);break;case"lakex":c.a.logLakexSlowAction(o);break;case"board":c.a.logBoardSlowAction(o);break;case"table":c.a.logTableSlowAction(o)}}}}}],t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),v=m,g=r(14),_=r.n(g),w=r(194);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function P(e,t,r){return t=C(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,j()?Reflect.construct(t,r||[],C(e).constructor):t.apply(e,r))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function S(e,t,r){return(t=A(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}var x=u()("editor:doc:lockManager"),N=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(n=P(this,t),"lazyLock",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;n.clearLockTimer(),e?n.lockTimer=setTimeout((function(){n.lock()}),1e3*e):n.lock()})),S(n,"unLock",(function(){var e,t,r;if(x("unLock"),n.clearLockTimer(),!n.locked)return Promise.resolve();var o=(null===(e=window.appData)||void 0===e?void 0:e.isYuqueMobileApp)&&(null===(t=window.AlipayJSBridge)||void 0===t||null===(r=t.startupParams)||void 0===r?void 0:r.appId);if("function"!=typeof navigator.sendBeacon||n.workflow.isDesktopApp||window.appData.isAlipayWebApp||o||n.workflow.note)return n.locked=!1,n.workflow.doUnlock({id:n.doc.id,uuid:n.uuid});var a=new URLSearchParams;return a.set("ctoken",Object(w.a)(window)),a.set("uuid",n.uuid),navigator.sendBeacon("/api/".concat(n.workflow.docDomain.toLowerCase(),"s/").concat(n.doc.id,"/unlock?").concat(a.toString())),n.locked=!1,Promise.resolve()})),S(n,"checkLakeEditConflict",(function(e){x("[check conflict]lock: %o",e);var t,r=n.me,o=e.locker,a=e.collab_members,i=void 0===a?[]:a;return i.length>0&&(x("[check conflict]doc is editing in ot mode"),t=1===i.length&&i[0].id===r.id?l.ERROR_CODE.LOCKED_BY_SELF_COLLAB:l.ERROR_CODE.LOCKED_BY_COLLAB),!t&&o&&o.id!==r.id&&(x("[check conflict]doc is locked by other one"),t=l.ERROR_CODE.LOCKED_BY_OTHER),!t&&e.draft_version>n.doc.draft_version&&(x("[check conflict]doc content has new version"),t=l.ERROR_CODE.LOCKED_BY_VERSIONCONFLICT),!t&&e.content_updated_at&&_()(e.content_updated_at).isAfter(n.doc.content_updated_at)&&(x("[check conflict]doc content has new version"),t=l.ERROR_CODE.LOCKED_BY_VERSIONCONFLICT),x("[check conflict]result",{code:t,lock:e}),t})),n.doc=e,n.workflow=r,n.me=r.me,n.lockTimer=null,n.LOCK_INTERVAL=59,n.MAX_RETRY_COUNT=10,n.locking=!1,n.locked=!1,n.retryCount=0,n.uuid=p()(10),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(t,e),r=t,n=[{key:"start",value:function(){x("lock start"),this.lockTimer||this.lazyLock()}},{key:"resume",value:function(){this.lazyLock(1)}},{key:"resetDoc",value:function(e){this.doc=e}},{key:"lock",value:function(){var e,t,r=this;x("lock doc, is locking: ",this.locking);var n=null===(e=this.doc)||void 0===e?void 0:e.id;if(!this.locking&&n&&"offline"!==(null===(t=this.doc)||void 0===t?void 0:t.created_by)){this.locking=!0;var o=this.uuid;return this.emit("lock_start"),this.workflow.doLock({id:n,uuid:o}).then((function(e){if(r.locking=!1,!r.doc||r.doc.id!==n)return r.workflow.doUnlock({id:n,uuid:o});r.locked=!e.code;var t=r.checkLakeEditConflict(e);t?(r.emit("error",{code:t,lock:e}),r.locked&&r.workflow.doUnlock({id:n,uuid:o})):r.locked&&(r.lazyLock(r.LOCK_INTERVAL),r.emit("ready"),r.retryCount=0)})).catch((function(e){r.locking=!1,r.doc&&n===r.doc.id&&(r.locked=!1,e.code!==l.ERROR_CODE.LOCKED_BY_SYNC?(r.emit("error",{code:l.ERROR_CODE.LOCK_FAILED,message:e.message,stack:e.stack}),r.retryCount++,r.retryCount<r.MAX_RETRY_COUNT&&r.lazyLock(r.retryCount*r.LOCK_INTERVAL)):r.emit("error",e))}))}}},{key:"clearLockTimer",value:function(){this.lockTimer&&(x("stop polling"),clearTimeout(this.lockTimer),this.lockTimer=null)}},{key:"destroy",value:function(){try{this.unLock(),this.locking=!1,this.workflow=null,delete this.doc}catch(e){}}}],n&&E(r.prototype,n),o&&E(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(a.a),T=N,D=r(4087),L=r(112);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function I(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,B(n.key),n)}}function B(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R(t)?t:t+""}var U=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pageId=window.appData.traceId,this.actions=[],this.errorCode=null,this.context=t,this.userChanged=!1},(t=[{key:"getDate",value:function(){var e=new Date;return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())}},{key:"getTime",value:function(){var e=new Date;return"".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds())}},{key:"pushDate",value:function(){var e=this.getDate();e!==this.date&&(this.date&&this.report(),this.date=e,this.actions.push("[".concat(e,"]")))}},{key:"log",value:function(e,t){this.pushDate(),this.actions.push("".concat(this.getTime()," ").concat(e," ").concat(void 0===t?"":t))}},{key:"logUserChanged",value:function(){this.userChanged=!0}},{key:"logError",value:function(e,t,r){this.pushDate(),this.actions.push("".concat(this.getTime()," ").concat(e," ").concat(void 0===t?"":t)),null!=r&&r.stack&&this.actions.push(r.stack),this.errorCode=e}},{key:"getReportData",value:function(){return["".concat(this.context.doc.id,":").concat(this.context.scene,":").concat(this.context.defaultMode)].concat(I(this.actions)).join("~")}},{key:"reset",value:function(){this.actions=[],this.errorCode=null,this.date=null,this.userChanged=!1}},{key:"report",value:function(){if(0!==this.actions.length){var e={c2:this.getReportData(),d1:this.context.currentMode,d2:this.context.docFormat,d3:this.context.scene,d4:this.errorCode};c.a.logEditAction(e,this.errorCode,this.userChanged),this.reset()}}},{key:"logAction",value:function(e,t){D.a[e]&&D.a[e][t]&&Object(L.spmClick)(D.a[e][t])}},{key:"destroy",value:function(){try{(this.userChanged||this.errorCode)&&this.report()}catch(e){}}}])&&F(e.prototype,t),r&&F(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),H=U,V=r(32);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(){W=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==G(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(G(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function K(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){K(a,n,o,i,u,"next",e)}function u(e){K(a,n,o,i,u,"throw",e)}i(void 0)}))}}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,te(n.key),n)}}function $(e,t,r){return t=Q(t),function(e,t){if(t&&("object"==G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,X()?Reflect.construct(t,r||[],Q(e).constructor):t.apply(e,r))}function X(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(X=function(){return!!e})()}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function ee(e,t,r){return(t=te(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==G(t)?t:t+""}var re=u()("editor:doc:wf"),ne=window.appData,oe=ne.isAlipayWebApp,ae=ne.isYuqueMobileApp,ie=function(e){function t(e){var r,n=e.doc,o=void 0===n?{}:n,a=e.mode,i=e.scene;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(r=$(this,t),"clear",Y(W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.doc.id){e.next=2;break}return e.abrupt("return",!0);case 2:if(r._clearAble()){e.next=4;break}return e.abrupt("return",!1);case 4:return r.clearing=!0,r.onBeforeReset(),r.clearError(),r._clearMessage(),r._clearLazyDisconnect(),r._clearLazyStartTimer(),r._clearCacheTimer(),e.next=13,r.save(l.SAVE_TYPE.AUTO);case 13:return r.transmitDocStatus(l.DOC_STATUS.loaded),r.editable=!1,r.docLoaded={},r.saving=!1,r.publishing=!1,r.docRendered=!1,r.initialDocument=null,r.saveId=null,r.lockManager&&(r.lockManager.destroy(),r.lockManager=null),r.collabManager=null,r.collabDisabled=!1,delete r.editorBiz,r.onReset(),r.clearing=!1,r.destroying=!1,delete r.destroyed,e.abrupt("return",!0);case 30:case"end":return e.stop()}}),e)})))),ee(r,"onEditorLoaded",(function(e){var t=e.engine;r.engine=t,window.__engine=t.getOriginEngine(),window.__workflow=r,r._bindEvents(),r.performance.marks("EditorLoaded"),r.userAction.log("editor_ready"),Object(s.a)("editorLoaded")})),ee(r,"_bindEvents",(function(){var e,t;r.eventBinded||(r.doBindEvents(),r.engine.onCommandError((function(e){r.error(z({code:l.ERROR_CODE.COMMAND_ERROR},e))})),null===(e=(t=r.engine).onMonitorLog)||void 0===e||e.call(t,(function(e,t,r){c.a.editorMonitorLog(e,t,r)})),r.engine.onCommandEnd((function(e,t,n){r.performance.logSlowAction(e,t,n),r.userAction.logAction(e,t)})),r.eventBinded=!0)})),ee(r,"onPageInactive",(function(){r.userAction.log("page_inactive"),r.currentMode!==l.EDIT_MODE.COLLAB_CUSTOM&&(r.save(l.SAVE_TYPE.AUTO),r.currentMode===l.EDIT_MODE.LOCK&&r.lockManager&&r.lockManager.unLock(),r._lazyDisconnect())})),ee(r,"onPageLeave",(function(){r.userAction.log("page_leave"),r.currentMode!==l.EDIT_MODE.COLLAB_CUSTOM&&(r.save(l.SAVE_TYPE.AUTO),r.currentMode===l.EDIT_MODE.LOCK&&r.lockManager&&r.lockManager.unLock())})),ee(r,"onPageOnline",(function(){r.transmitNetStatus(l.NET_STATUS.online),r.cache(),r.reStart()})),ee(r,"onPageOffline",(function(){r.transmitNetStatus(l.NET_STATUS.offline),r.cache()})),ee(r,"onPageActive",(function(){r.userAction.log("page_active"),r._clearLazyDisconnect(),re("page _onPageActive",r.currentMode,r.docStatus),r.reStart()})),ee(r,"reStart",(function(){r.reChooseMode(),r.currentMode===l.EDIT_MODE.COLLAB?r.collabManager&&r.collabManager.isAlive()||r.start():r.currentMode===l.EDIT_MODE.LOCK&&r.startLockService()})),ee(r,"_lazyDisconnect",(function(){r._clearLazyDisconnect(),r.disconnectTimer=setTimeout((function(){r.disconnectTimer=null,r.currentMode===l.EDIT_MODE.COLLAB&&r.collabManager&&r.collabManager.isAlive()&&(r.collabManager.disconnect(),r.userAction.log("collab_lazy_disconnect"),r.setEditable(!1))}),r.lazyDisconnectInterval)})),ee(r,"_clearLazyDisconnect",(function(){r.disconnectTimer&&(clearTimeout(r.disconnectTimer),r.disconnectTimer=null)})),ee(r,"start",function(){var e=Y(W().mark((function e(t){var n,o,a,i;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.userAction.log("start"),r._checkStartAble()){e.next=4;break}return r.lazyStart(t),e.abrupt("return");case 4:return a=t&&t.local,r._beforeStart(),r.setEditable(!1),r.performance.marks("DocLoadStart"),t||Object(s.a)("loadStart"),e.next=11,r.loadDoc(t);case 11:if((i=e.sent)&&r.doc&&i.id===r.doc.id&&!r.destroying){e.next=14;break}return e.abrupt("return");case 14:return t||Object(s.a)("loadEnd",i),r.performance.marks("DocLoadEnd"),r._updateDoc(i),r.editorBiz.isCacheActived?(r.useCache=!0,r.userAction.log("useCache_to_edit")):r.useCache=!1,r.editorBiz.saveCacheToServer(),!t&&null!==(n=r.doc.readerEditModeData)&&void 0!==n&&null!==(o=n.matchCondition)&&void 0!==o&&o.editType.includes("Collab")&&r.currentMode===l.EDIT_MODE.LOCK&&r.scene!==l.EDIT_SCENE.MOBILE&&(r.defaultMode=l.EDIT_MODE.COLLAB,r.transmitMode(l.EDIT_MODE.COLLAB)),r.currentMode===l.EDIT_MODE.COLLAB&&(r.netStatus===l.NET_STATUS.offline?r.transmitMode(l.EDIT_MODE.LOCK):r.startCollabService()),e.next=23,r.initEditor(i);case 23:r.currentMode!==l.EDIT_MODE.LOCK&&r.currentMode!==l.EDIT_MODE.COLLAB_CUSTOM&&r.netStatus!==l.NET_STATUS.offline||r.setEditable(!0),r.performance.marks("DocRendered"),Object(s.a)("docRendered",r.currentMode),r.currentMode===l.EDIT_MODE.LOCK&&(r.startLockService(),r.performance.reportPerf()),a&&r.netStatus===l.NET_STATUS.online&&r.currentMode===l.EDIT_MODE.COLLAB&&(Object(s.a)("start","reload_instart"),r.start()),r.onStarted();case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ee(r,"setContent",(function(e){for(var t,n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];(t=r.engine).setContent.apply(t,[e].concat(o))})),ee(r,"isReady",(function(){return!!r.engine})),ee(r,"onSaveTitle",(function(e){r.doc.title=e,r.emit(l.WORKFLOW_EVENT.saveTitle,e),window.dispatchEvent(new CustomEvent("WORKFLOW_EVENT.saveTitle",{detail:e}))})),ee(r,"onContentChange",(function(e){if(!r.ignoreChange())return r.editable||r.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.EDIT_DISABLE,mode:r.currentMode}),r._lazyCache(),r._setStopWatch("autosaveConflict",10),r.transmitDocStatus(l.DOC_STATUS.changed),r.emit(l.WORKFLOW_EVENT.change,e),r.currentMode===l.EDIT_MODE.LOCK&&r.startLockService(),delete r.cached,r.userAction.logUserChanged(),!0})),ee(r,"_getInitEditorOption",(function(e){var t={};return e&&e.doc_dynamic_data&&(t.dynamicData=e.doc_dynamic_data),t})),ee(r,"initEditor",function(){var e=Y(W().mark((function e(t){var n;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re("document loaded, use document",r.initialDocument),n=r.initialDocument.value,r.currentMode===l.EDIT_MODE.COLLAB_CUSTOM&&(n=t.content),r.engine.getPureContent()===n&&!r.isDynamicDataChanged){e.next=15;break}return e.prev=5,e.next=8,r.engine.init({content:n},r._getInitEditorOption(r.doc));case 8:r.userAction.log("editor_render","".concat(null==t?void 0:t.id,":").concat(r.initialDocument.draft_version)),e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),r.error({code:l.ERROR_CODE.RENDER_FAILED,error:e.t0,detail:{commandName:"init",content:n}}),e.t0;case 15:r.docRendered=!0,r.engine.readonly(!1),r.onDocRendered();case 18:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()),ee(r,"save",function(){var e=Y(W().mark((function e(t){var n,o,a,i,u,c,s;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.userAction.log("save","".concat(t," ").concat(null===(n=r.doc)||void 0===n?void 0:n.id)),o=r.editable,re("on save, context: ",{editable:o,type:t}),r.cache(),a=r.checkSaveStatus(t),e.t0=a,e.next=e.t0===l.SAVE_STATUS.IGNORE?8:e.t0===l.SAVE_STATUS.DISABLED?10:e.t0===l.SAVE_STATUS.LAZY?13:(e.t0,l.SAVE_STATUS.OK,15);break;case 8:return r.userAction.log("ignore_save",r.docStatus),e.abrupt("return");case 10:return r.userAction.log("unable_save"),r.throwWhenPublish(t),e.abrupt("return");case 13:return r._addTask("save"),e.abrupt("return");case 15:return r.transmitDocStatus(l.DOC_STATUS.saving),r.saving=!0,r.saveId=p()(6),i=new Date,e.prev=19,e.next=22,r.engine.onBeforeSave();case 22:re("save:before done, do save to server"),e.next=31;break;case 25:e.prev=25,e.t1=e.catch(19),r.saving=!1,re("save:before has exception: ",e.t1),r.throwWhenPublish(t,new Error(__("内容存在未完成的上传或其他异常，请检查后重试"))),r.userAction.logError(l.ERROR_CODE.SAVE_BEFORE_FAILED,null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 31:return e.prev=31,e.next=34,r.doSaveDoc(t,r.saveId);case 34:if(c=e.sent,r.saving=!1,c&&c.id===(null===(u=r.doc)||void 0===u?void 0:u.id)){e.next=38;break}throw new Error("document unExist");case 38:return r.saveSuccess(t,c),s=new Date,r.repairDestroyCount(s-i),e.abrupt("return",c);case 44:e.prev=44,e.t2=e.catch(31),r.saving=!1,r.throwWhenPublish(t,e.t2),r.saveFailed(t,e.t2);case 49:case"end":return e.stop()}}),e,null,[[19,25],[31,44]])})));return function(t){return e.apply(this,arguments)}}()),ee(r,"publish",function(){var e=Y(W().mark((function e(t){var n,o,a,i,u,c;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.userAction.log("publish"),re("publish:",t),!r._checkBuzy()){e.next=4;break}throw new Error("buzy");case 4:return e.prev=4,e.next=7,r.save(l.SAVE_TYPE.USER_PUBLISH);case 7:return n=e.sent,r.publishing=!0,r.transmitDocStatus(l.DOC_STATUS.publishing),o=!!n,e.next=13,r.doPublishDoc(t,o);case 13:r.publishing=!1,e.next=21;break;case 16:throw e.prev=16,e.t0=e.catch(4),r.publishing=!1,r.publishFailed(e.t0),e.t0;case 21:return e.next=23,r.publishSuccess(n||r.doc);case 23:if(!r.destroying){e.next=25;break}throw new Error("destroying");case 25:return a=r.doc,i={},"Table"===a.type&&t.type===l.SAVE_TYPE.USER_PUBLISH&&(i.fullBody=!0),u=r.engine.getEditorContent(i),c=u.content,e.abrupt("return",c);case 30:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}()),ee(r,"saveDocTheme",function(){var e=Y(W().mark((function e(t){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.saveEditorMeta({isDraft:!0,themeMetas:[t]});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ee(r,"inferNotify",(function(){try{if(r.doc.format!==f.FORMAT.LAKE)return!1;var e=r.doc.word_count,t=r.getWordCount();return re("infer_notify","".concat(e,":").concat(t)),t-e>300}catch(e){return!1}})),ee(r,"getWordCount",(function(e){return r.engine.getWordCount(e)})),ee(r,"getSummary",(function(e){r.engine.getSummary(e)})),ee(r,"isVersionConflict",(function(e){return r.editorBiz.hasNewVersion(e)})),ee(r,"isEmptyDoc",(function(){return!!r.isDefaultTitle(r.doc.title)&&r.engine.isEmpty()})),ee(r,"isDocContentEmpty",(function(){return r.engine.isEmpty()})),ee(r,"isOnlyOneEditSession",(function(){return r.currentMode===l.EDIT_MODE.LOCK||r.collabManager&&r.collabManager.isOnlyOneCollabSession()})),ee(r,"revert",(function(e){r.userAction.log("revert_doc"),re("[onRevert]version:",e),r.editorBiz.saveCacheToServer(),r.engine.setContent(e.content),r.docRendered=!0,r.setEditable(!0),r.transmitDocStatus(l.DOC_STATUS.changed),r.currentMode===l.EDIT_MODE.LOCK&&r.startLockService()})),ee(r,"reset",(function(e){r.engine.reset(e)})),ee(r,"doSaveDoc",function(){var e=Y(W().mark((function e(t){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ee(r,"doIgnoreSave",(function(){return!1})),ee(r,"dontIgnoreSave",(function(){return!1})),ee(r,"doPublishDoc",function(){var e=Y(W().mark((function e(t){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.doc=z({},o),r.scene=i||l.EDIT_SCENE.WEB,r.defaultMode=a||l.EDIT_MODE.LOCK,r.engine=null,r.editorBiz=null,r.lockManager=null,r.collabManager=null,r.editable=!1,r.docLoaded={},r.saving=!1,r.useCache=!1,r.initialDocument=null,r.performance=new v(r),r.userAction=new H(r),r._stopWatch={},r.lazyCacheInterval=oe||ae?1e3:5e3,r.lazyDisconnectInterval=12e5,r.bigDocumentWordCount=1e4,r.maxCollabReconnect=100,r.collabReconnectCount=0,r.isDynamicDataChanged=!1,r.collabConnected=!1,r.netStatus=r.getNetStatus(),r.currentMode=r.defaultMode,r.destroyCount=0,r.maxDestroyCount=20,r.taskList=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(t,e),r=t,o=[{key:"repairDestroyCount",value:function(e){var t=2*Math.ceil(e/1e3);this.maxDestroyCount=Math.min(60,Math.max(this.maxDestroyCount,t))}},{key:"getNetStatus",value:function(){var e,t=null!==(e=navigator)&&void 0!==e&&e.onLine?l.NET_STATUS.online:l.NET_STATUS.offline;return this.userAction.log("navigator.onLine: ".concat(t)),t}},{key:"docFormat",get:function(){var e;return this.doc&&this.doc.format&&(e=this.doc.format),"lake"===e&&this.engine&&this.engine.lakex&&(e="lakex"),e}},{key:"isBigLakeDocument",get:function(){return this.doc&&"lake"===this.doc.format&&this.doc.word_count>this.bigDocumentWordCount}},{key:"_addTask",value:function(e){this.taskList.includes(e)||(this.userAction.log("lazy ".concat(e)),this.taskList.push(e))}},{key:"_runTask",value:function(){0!==this.taskList.length&&"save"===this.taskList.shift()&&this.save(l.SAVE_TYPE.AUTO)}},{key:"_checkBuzy",value:function(){return!!this._isBuzy()&&(this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.BUZY,docStatus:this.docStatus}),!0)}},{key:"reChooseMode",value:function(){this.defaultMode!==l.EDIT_MODE.COLLAB_CUSTOM&&this.defaultMode!==l.EDIT_MODE.LOCK?(this.currentMode===l.EDIT_MODE.LOCK&&this.defaultMode===l.EDIT_MODE.COLLAB&&this.lockManager&&this.lockManager.unLock(),this.transmitMode(l.EDIT_MODE.COLLAB)):this.transmitMode(this.defaultMode)}},{key:"_checkStartAble",value:function(){return!this._isBuzy()&&!!this.engine&&this.startAble()}},{key:"_isBuzy",value:function(){return!!([l.DOC_STATUS.saving,l.DOC_STATUS.publishing,l.DOC_STATUS.loading].includes(this.docStatus)||this.clearing||this.publishing||this.saving)}},{key:"_destroyDisabled",value:function(){return!!([l.DOC_STATUS.saving,l.DOC_STATUS.publishing].includes(this.docStatus)||this.publishing||this.saving)}},{key:"_clearAble",value:function(){return!([l.DOC_STATUS.saving,l.DOC_STATUS.publishing].includes(this.docStatus)||this.clearing||this.publishing||this.saving)}},{key:"_beforeStart",value:function(){this.clearError(),this._clearLazyStartTimer(),this._clearLazyDisconnect()}},{key:"lazyStart",value:function(e){var t=this;this._clearLazyStartTimer(),this.lazyStartTimer=setTimeout((function(){t.lazyStartTimer=null,t.start(e)}),1e3)}},{key:"_clearLazyStartTimer",value:function(){this.lazyStartTimer&&(clearTimeout(this.lazyStartTimer),this.lazyStartTimer=null)}},{key:"_setStopWatch",value:function(e,t){var r=+new Date;this._stopWatch[e]={start:r,end:r+1e3*t}}},{key:"_inStopWatch",value:function(e){if(!this._stopWatch[e])return!1;var t=+new Date;return t>=this._stopWatch[e].start&&t<=this._stopWatch[e].end}},{key:"clearError",value:function(){this.emit(l.WORKFLOW_EVENT.error,null)}},{key:"_clearMessage",value:function(){this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.CLEAR})}},{key:"loadDoc",value:(_=Y(W().mark((function e(t){var r,n;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re("start loading document"),r=this.doc,this.userAction.log("load_doc",r.id),this.needLoad()){e.next=5;break}return e.abrupt("return");case 5:if(this.transmitDocStatus(l.DOC_STATUS.loading),e.prev=6,e.t0=t,e.t0){e.next=12;break}return e.next=11,this.doLoadDoc();case 11:e.t0=e.sent;case 12:return n=e.t0,this.transmitDocStatus(l.DOC_STATUS.loaded),this.docLoaded[r.id]=!0,this.repairNetStatusOnline(),e.abrupt("return",n);case 19:e.prev=19,e.t1=e.catch(6),this.transmitDocStatus(l.DOC_STATUS.loaded),this.docLoaded[r.id]&&this._isNetWorkError(null===e.t1||void 0===e.t1?void 0:e.t1.message)?this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.DISCONNECT}):this.error({code:l.ERROR_CODE.INIT_FAILED,type:null===e.t1||void 0===e.t1?void 0:e.t1.type,status:null===e.t1||void 0===e.t1?void 0:e.t1.status,message:null===e.t1||void 0===e.t1?void 0:e.t1.message,stack:null===e.t1||void 0===e.t1?void 0:e.t1.stack});case 23:case"end":return e.stop()}}),e,this,[[6,19]])}))),function(e){return _.apply(this,arguments)})},{key:"updateEditorBiz",value:function(e){var t=this;this.editorBiz&&this.editorBiz.doc.id===e.id?(this.onBeforeUpdateEditorBiz(e),this.editorBiz.resetDoc(e)):(this.editorBiz=this.createEditorBiz(e),this.editorBiz.on("outDatedCacheSavedToServer",(function(){t.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.DOC_CACHE_SAVED}),t.userAction.log("outDatedCacheSavedToServer")})))}},{key:"createLockManager",value:function(){var e=this;this.lockManager||(this.userAction.log("create_lock"),this.lockManager=new T(this.doc,this),this.lockManager.on("ready",(function(){e.userAction.log("lock_ready"),e.docStatus!==l.DOC_STATUS.changed&&e.unLock(),e.repairNetStatusOnline()})),this.lockManager.on("lock_start",(function(){e.userAction.log("lock_start")})),this.lockManager.on("error",(function(t){e.lockError(t)})))}},{key:"lockError",value:function(e){this.userAction.log(e.code,e.message),e.message&&this._isNetWorkError(e.message)||(e.code!==l.ERROR_CODE.LOCKED_BY_VERSIONCONFLICT||this.docStatus!==l.DOC_STATUS.saving&&!this.saving)&&(this.onLockError(e)||(this.setEditable(!1),this.error(e)))}},{key:"createCollabManager",value:function(){var e=this;this.collabManager||(this.collabManager=this.doCreateCollabManager(),this.collabManager&&(this.userAction.log("create_collab"),this.collabManager.on("ready",(function(){e.userAction.log("collab_ready"),e.setEditable(!0),e.collabConnected=!0,e.engine.focusBlankDoc(e.initialDocument.value),e.performance.marks("CollabReady"),e.performance.reportPerf()})),this.collabManager.on(l.WORKFLOW_EVENT.error,(function(t){if(e.onCollabError(t),e.cache(),e.error(t),t.code!==l.ERROR_CODE.COLLAB_DATA_INIT_ERROR){if((t.code===l.ERROR_CODE.DISCONNECTED||t.code===l.ERROR_CODE.COLLAB_DATA_ERROR)&&e._collaboratorCounts&&e.netStatus===l.NET_STATUS.online&&e.collabReconnectCount<e.maxCollabReconnect)return e.userAction.log("collab_reconnect"),e.start(),void e.collabReconnectCount++;t.code===l.ERROR_CODE.COLLAB_DATA_LIMIT&&(e.defaultMode=l.EDIT_MODE.LOCK),e.transmitMode(l.EDIT_MODE.LOCK),e.transmitNetStatus(e.getNetStatus())}else e.setEditable(!1)})),this.collabManager.on(l.WORKFLOW_EVENT.message,(function(t){t.type===l.MESSAGE.DOC_DELETED?(e.transmitDocStatus(l.DOC_STATUS.deleted),e.error({code:l.ERROR_CODE.DOC_DELETED,data:t})):e.emit(l.WORKFLOW_EVENT.message,t)})),this.collabManager.on(l.WORKFLOW_EVENT.collabUsersChange,(function(t){e.emit(l.WORKFLOW_EVENT.collabUsersChange,t),e._collaboratorCounts=t.length,e.userAction.log("collab_user_changes",t.length)})),this.collabManager.on(l.WORKFLOW_EVENT.netStatusChange,(function(t){e.transmitNetStatus(t)}))))}},{key:"startLockService",value:function(){this.docStatus!==l.DOC_STATUS.deleted&&(re("startLockService"),this.createLockManager(),this.lockManager.start())}},{key:"startCollabService",value:function(){this.userAction.log("collab_start"),re("startCollabService"),this.createCollabManager(),this.collabManager.connect()}},{key:"unLock",value:function(){this.currentMode===l.EDIT_MODE.LOCK&&this.lockManager&&this.docStatus!==l.DOC_STATUS.changed&&(this.doc&&this.doc.local||(this.userAction.log("unlock"),this.lockManager.unLock()))}},{key:"transmitDocStatus",value:function(e){if(re("transmitDocStatus===========: ",this.docStatus,"=>",e),this.docStatus!==l.DOC_STATUS.deleted)if(e!==l.DOC_STATUS.saved||this.docStatus===l.DOC_STATUS.saving){if((e!==l.DOC_STATUS.published||this.docStatus===l.DOC_STATUS.publishing)&&this.docStatus!==e){if(this.userAction.log("docStatus_changed","".concat(this.docStatus," => ").concat(e)),this.docStatus=e,this.destroying)return;this.emit(l.WORKFLOW_EVENT.docStatusChange,e)}}else this.emit(l.WORKFLOW_EVENT.docStatusChange,e)}},{key:"repairNetStatusOnline",value:function(){V.c||this.transmitNetStatus(l.NET_STATUS.online)}},{key:"transmitNetStatus",value:function(e){if(this.netStatus!==e){if(e===l.NET_STATUS.congestion&&this.netStatus===l.NET_STATUS.offline)return;this.netStatus=e,this.userAction.log("netStatus_changed",e),this.emit(l.WORKFLOW_EVENT.netStatusChange,e)}}},{key:"transmitMode",value:function(e){this.currentMode!==e&&(re("transmitDocStatus===========: ",this.currentMode,"=>",e),this.currentMode=e,this.userAction.log("mode_changed",e),this.emit(l.WORKFLOW_EVENT.editModeChange,e)),this.currentMode===l.EDIT_MODE.LOCK&&this.setEditable(!0)}},{key:"setEditable",value:function(e){this.editable!==e&&(this.editable=e,this.userAction.log("editable_changed",e),this.emit(l.WORKFLOW_EVENT.editableChange,e))}},{key:"_updateDoc",value:function(e){this.userAction.log("doc_update",e.draft_version),this.updateEditorBiz(e),this.initialDocument=this.editorBiz.getInitialDocument(),this.onDocUpdated(e);var t=e&&e.doc_dynamic_data&&e.doc_dynamic_data[0]&&e.doc_dynamic_data[0].updated_at||"",r=this.doc&&this.doc.doc_dynamic_data&&this.doc.doc_dynamic_data[0]&&this.doc.doc_dynamic_data[0].updated_at||"";this.isDynamicDataChanged=t!==r,this.doc=z({},e),this.lockManager&&this.lockManager.resetDoc(e),this.currentMode===l.EDIT_MODE.COLLAB&&this.collabManager&&this.collabManager.resetDoc(e,this.initialDocument)}},{key:"_clearCacheTimer",value:function(){this.cacheTimer&&(clearTimeout(this.cacheTimer),this.cacheTimer=null)}},{key:"_lazyCache",value:function(){var e=this;this._clearCacheTimer(),this.cacheTimer=setTimeout((function(){e.cacheTimer=null,e.cache()}),this.lazyCacheInterval)}},{key:"ignoreChange",value:function(){var e;return!(this.docRendered&&!this.destroying&&(this.docStatus===l.DOC_STATUS.loading?(this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.UNREADY}),0):"offline"!==(null===(e=this.doc)||void 0===e?void 0:e.created_by)||this.netStatus!==l.NET_STATUS.online||(this.error({code:l.ERROR_CODE.LOCKED_BY_SYNC}),0)))}},{key:"cache",value:function(){if(this.needCache()&&!this.cached&&this.docRendered&&this.docStatus===l.DOC_STATUS.changed&&(this._clearCacheTimer(),this.engine)){var e;try{e=this.engine.getPureContent()}catch(e){return this.error({code:l.ERROR_CODE.DATA_ERROR,error:e}),!1}try{this.cached=this.editorBiz.saveToCache({format:this.doc.format,value:e})}catch(e){return this.userAction.logError(l.ERROR_CODE.CACHE_FAILED,null==e?void 0:e.message,e),!1}return this.cached||this.userAction.logError(l.ERROR_CODE.CACHE_FAILED),this.userAction.log("cached"),!0}}},{key:"checkSaveStatus",value:function(e){var t=this.editable,r=this.docStatus,o=this.docRendered,a=this.saving,i=this.publishing,u=this.netStatus,c=this.currentMode,s=this.destroying,f=this.destroyed;this.userAction.log("save_status","editable:".concat(t,", docStatus:").concat(r,", docRendered:").concat(o,", saving:").concat(a,", publishing:").concat(i,", netStatus:").concat(u,", currentMode:").concat(c,", destroying:").concat(s,", destroyed:").concat(f));var d=e===l.SAVE_TYPE.USER_PUBLISH||e===l.SAVE_TYPE.USER_SAVE;return o?t?r===l.DOC_STATUS.deleted?(d&&(n.a.destroy(),n.a.error(__("文档已经被删除"))),l.SAVE_STATUS.DISABLED):r===l.DOC_STATUS.publishing||i?(d&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.PUBLISHING}),l.SAVE_STATUS.LAZY):r===l.DOC_STATUS.saving||a?(d&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.SAVING}),l.SAVE_STATUS.LAZY):this.dontIgnoreSave(e)?l.SAVE_STATUS.OK:this.doIgnoreSave(e)?l.SAVE_STATUS.IGNORE:this.docStatus===l.DOC_STATUS.saved||this.docStatus===l.DOC_STATUS.published||this.docStatus===l.DOC_STATUS.loaded&&!this.editorBiz.isCacheActived?(e===l.SAVE_TYPE.USER_SAVE&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.SAVED}),l.SAVE_STATUS.IGNORE):l.SAVE_STATUS.OK:(re("on save, editor disabled, ignore"),d&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.EDIT_DISABLE,mode:this.currentMode}),l.SAVE_STATUS.DISABLED):(re("on save, editor unrendered, ignore"),d&&this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.UNREADY}),l.SAVE_STATUS.DISABLED)}},{key:"throwWhenPublish",value:function(e,t){if(e===l.SAVE_TYPE.USER_PUBLISH)throw t||(t=new Error("")),t}},{key:"_isNetWorkError",value:function(e){return e.startsWith(__("网络异常"))||e.includes("Failed to fetch")}},{key:"_isConflictError",value:function(e){return e.includes("conflict")}},{key:"closeAble",value:function(){return!1===this.cached&&[l.DOC_STATUS.saving,l.DOC_STATUS.changed].includes(this.docStatus)?(this.error({code:l.ERROR_CODE.CACHE_FAILED}),!1):!(this.engine&&!this.engine.isContentReady()&&(this.error({code:l.ERROR_CODE.CONTENT_UNREADY}),1))}},{key:"saveFailed",value:function(e,t,r){var n;(this.userAction.log("save_failed",null==t?void 0:t.message),r&&r!==this.saveId)||(this.transmitDocStatus(l.DOC_STATUS.changed),e===l.SAVE_TYPE.USER_SAVE&&(this._isNetWorkError(null==t?void 0:t.message)?this.emit(l.WORKFLOW_EVENT.message,{type:l.MESSAGE.SAVE_FAILED,body:null==t?void 0:t.message,cached:this.cached}):this._isConflictError(null==t?void 0:t.message)?(n=l.ERROR_CODE.DOC_SAVE_CONFLICT,null!=t&&t.weak_net_delay&&(n=null)):n=404===(null==t?void 0:t.status)?l.ERROR_CODE.DOC_NOT_EXIST:t.code===l.ERROR_CODE.LOCKED_BY_SYNC?l.ERROR_CODE.LOCKED_BY_SYNC:l.ERROR_CODE.SAVE_FAILED),n&&this.error({code:n,message:null==t?void 0:t.message,stack:null==t?void 0:t.stack}),this.onSaveFailed(),this._runTask())}},{key:"saveSuccess",value:function(e,t){this.userAction.log("save_success","".concat(e,":").concat(null==t?void 0:t.id)),this.transmitDocStatus(l.DOC_STATUS.saved),e!==l.SAVE_TYPE.USER_SAVE||t.local||(n.a.destroy(),n.a.success(__("保存成功"))),t.local&&!this.clearing&&"offline"!==t.created_by||this.clearCache(),this._updateDoc(t),this.unLock(),e!==l.SAVE_TYPE.USER_PUBLISH&&(this.onSaveSuccess(t),this._runTask())}},{key:"clearCache",value:function(){this.docStatus!==l.DOC_STATUS.changed&&(this.editorBiz.clearCachedContent(),delete this.cached,this.userAction.log("clear_cache"))}},{key:"publishSuccess",value:(g=Y(W().mark((function e(t){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.userAction.log("publish_success"),this.transmitDocStatus(l.DOC_STATUS.published),e.next=4,this.onPublishSuccess(t);case 4:this._runTask();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"publishFailed",value:function(e){this.transmitDocStatus(l.DOC_STATUS.changed),"max_doc_note_number"!==(null==e?void 0:e.code)&&this.error({code:l.ERROR_CODE.PUBLISH_FAILED,message:null==e?void 0:e.message,stack:null==e?void 0:e.stack}),this.onPublishFailed(),this._runTask()}},{key:"saveEditorMeta",value:(m=Y(W().mark((function e(t){var r,n,o,a,i,u;return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.isDraft,n=t.themeMetas,o=this.doc,a=this.engine.getDocMeta({themeMetas:n})){e.next=5;break}return e.abrupt("return");case 5:return i=JSON.stringify(a),u={id:o.id,meta_draft:i},r||(u.meta=i),e.prev=8,e.next=11,this.doSaveEditorMeta(u);case 11:this.engine.updateDocEditorMeta(u),this.onEditorMetaSaved(),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:case"end":return e.stop()}}),e,this,[[8,15]])}))),function(e){return m.apply(this,arguments)})},{key:"deleteDoc",value:function(){this.transmitDocStatus(l.DOC_STATUS.deleted),this.onDocDeleted()}},{key:"exit",value:(b=Y(W().mark((function e(t){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.unlock||!this.lockManager){e.next=6;break}return e.next=4,this.lockManager.unLock();case 4:e.next=7;break;case 6:return e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"error",value:function(e){var t,r;e.message=e.message||(null===(t=e.error)||void 0===t?void 0:t.message),e.stack=e.stack||(null===(r=e.error)||void 0===r?void 0:r.stack),this.emit(l.WORKFLOW_EVENT.error,e),this.reportError(e)}},{key:"reportError",value:function(e){var t;e.editMode=this.currentMode,e.scene=this.scene,e.docFormat=this.docFormat,l.REPORT_ACTION_ERROR.includes(e.code)?this.userAction.logError(e.code,e.message,e):this.userAction.log(e.code,e.message),l.REPORT_ACTION_ERROR.includes(e.code)&&this.userAction.report(),c.a.logEditWorkflow(e),e.code===l.ERROR_CODE.COMMAND_ERROR&&c.a.logEngineError(z(z({},e),{},{code:null===(t=e.detail)||void 0===t?void 0:t.commandName}))}},{key:"lazyDestroy",value:function(){var e=this;this.userAction.log("lazy_destroy"),this.lazyDestroyTimer=setTimeout((function(){e.lazyDestroyTimer=null,e.destroy()}),1e3)}},{key:"_clearLazyDestroyTimer",value:function(){this.lazyDestroyTimer&&(clearTimeout(this.lazyDestroyTimer),this.lazyDestroyTimer=null)}},{key:"_clearTimer",value:function(){this._clearCacheTimer(),this._clearLazyDisconnect(),this._clearLazyStartTimer(),this._clearLazyDestroyTimer()}},{key:"_clearEvents",value:function(){this.unBindEvents()}},{key:"destroy",value:function(){if(this.destroying=!0,this._clearTimer(),this._clearEvents(),this.onBeforeDestroy(),this._destroyDisabled()&&this.destroyCount<this.maxDestroyCount)return this.destroyCount++,void this.lazyDestroy();if(this.userAction.log("workflow_destroy"),this.performance&&(this.performance.destroy(),this.performance=null),this.lockManager&&(this.lockManager.destroy(),this.lockManager=null),this.collabManager&&(this.collabManager.destroy(),this.collabManager=null),this.engine){try{this.engine.destroy()}catch(e){}this.engine=null}this.userAction&&(this.userAction.destroy(),this.userAction=null),this.doc=null,this.destroyed=!0,this.onDestroy()}},{key:"onDestroy",value:function(){}},{key:"onBeforeReset",value:function(){}},{key:"onReset",value:function(){}},{key:"onBeforeUpdateEditorBiz",value:function(){}},{key:"doBindEvents",value:function(){}},{key:"unBindEvents",value:function(){}},{key:"startAble",value:function(){return!0}},{key:"onStarted",value:function(){}},{key:"needLoad",value:function(){return!0}},{key:"doLoadDoc",value:(y=Y(W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return y.apply(this,arguments)})},{key:"onLockError",value:function(){}},{key:"doCreateCollabManager",value:function(){}},{key:"onCollabError",value:function(){}},{key:"createEditorBiz",value:function(){}},{key:"onDocUpdated",value:function(){}},{key:"onDocRendered",value:function(){}},{key:"needCache",value:function(){return!0}},{key:"onSaveFailed",value:function(){}},{key:"onSaveSuccess",value:function(){}},{key:"onDocDeleted",value:function(){}},{key:"onPublishSuccess",value:(h=Y(W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return h.apply(this,arguments)})},{key:"onPublishFailed",value:function(){}},{key:"doSaveEditorMeta",value:(d=Y(W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"onEditorMetaSaved",value:function(){}},{key:"isDefaultTitle",value:function(){}},{key:"isActive",value:function(){return!0}},{key:"onBeforeDestroy",value:function(){try{this.engine.readyToDestroy()}catch(e){}}},{key:"doLock",value:(u=Y(W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"doUnlock",value:(i=Y(W().mark((function e(){return W().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})}],o&&J(r.prototype,o),a&&J(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a,i,u,d,h,y,b,m,g,_}(a.a);t.a=ie},,function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return u})),r.d(t,"c",(function(){return l}));var n=["loading"],o=["loading"];function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=function(e){var t=e.refManager.current;return{emergency_events:t.emergencyEventStore.emergencyEvents.map((function(e){e.loading;return a(e,n)})),events_summary:t.emergencyEventStore.eventsSummary,diagnose_path:t.diagnoseStore.diagnosePaths.map((function(e){var t=e.name,r=e.diagnose_step;return{name:t,tag:e.tag,diagnose_step:r.map((function(e){e.loading;return a(e,o)}))}})),emergencyOutline:t.emergencyExpStore.emergencyOutline,emergencyOutlineLake:t.emergencyExpStore.emergencyOutlineLake,experience:t.emergencyExpStore.experience,experienceLake:t.emergencyExpStore.experienceLake,flow:t.emergencyExpStore.flow,flowLake:t.emergencyExpStore.flowLake,sheetTplLake:t.emergencyExpStore.sheetTplLake}},u=function(e){var t=e.refManager.current;return{emergency_events:t.emergencyEventStore.emergencyEvents.map((function(e){return{emergency_id:e.emergency_id,content:e.content,origin_data:e.origin_data}})),events_summary:t.emergencyEventStore.eventsSummary,diagnose_path:t.diagnoseStore.diagnosePaths.map((function(e){var t=e.name,r=e.diagnose_step;return{name:t,tag:e.tag,diagnose_step:r.map((function(e){return{name:e.name,content:e.content,step_summary:e.step_summary,origin_data:e.origin_data}}))}})),emergency_outline:t.emergencyExpStore.emergencyOutline,experience:t.emergencyExpStore.experience}},l=function(e){var t=e.refManager.current;return{emergency_events:t.emergencyEventStore.emergencyEvents,events_summary:t.emergencyEventStore.eventsSummary,diagnose_path:t.diagnoseStore.diagnosePaths,emergencyOutlineLake:t.emergencyExpStore.emergencyOutlineLake,experienceLake:t.emergencyExpStore.experienceLake,flowLake:t.emergencyExpStore.flowLake,sheetTplLake:t.emergencyExpStore.sheetTplLake}}},,,,,,,function(e,t,r){"use strict";e.exports={OWNER_HELP_GUIDE_CURRENT:"OWNER_HELP_GUIDE_CURRENT",NEVER_SHOW_OWNER_HELP:"NEVER_SHOW_OWNER_HELP",HAS_READ_RECOMMEND_DATE:"HAS_READ_RECOMMEND_DATE",HAS_OPEN_ASSISTANT:"HAS_OPEN_ASSISTANT"}},function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return i}));r(3980);var n=r(3981),o=function(){var e={};return n.FIELD_TYPE_CONFIGS.forEach((function(t){e[t.type]=t.name})),e},a=function(e){return Object(n.isURL)(e)?n.FIELD_TYPE.LINK:Object(n.isDate)(e)?n.FIELD_TYPE.DATE:Object(n.isMobilePhone)(e)?n.FIELD_TYPE.PHONE:Object(n.isDecimal)(e)?n.FIELD_TYPE.NUMBER:/^\S+[,|，]+\S*$/.test(e)?n.FIELD_TYPE.SELECT:"是/否"===e||"是，否"===e?n.FIELD_TYPE.CHECKBOX:n.FIELD_TYPE.TEXT},i=function(e){var t=a(e[0]),r=e.every((function(e){return a(e)===t}));return r&&t===n.FIELD_TYPE.TEXT&&e.length<=5?n.FIELD_TYPE.SELECT:r?t:n.FIELD_TYPE.TEXT}},function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return i}));var n=r(4132),o=r(4382),a=function(e){return e[e.init=n.a.init]="init",e[e.events=0]="events",e[e.diagnose=1]="diagnose",e[e.experience=2]="experience",e[e.preview=n.a.preview]="preview",e}({}),i=[{stepValue:a.events,title:"告警发现",description:React.createElement("div",{className:o.a.stepDescWrapper},React.createElement("span",{className:o.a.descItem},"· 告警事件"),React.createElement("span",{className:o.a.descItem},"· 事件总结")),status:"wait"},{stepValue:a.events,title:"应急过程",description:React.createElement("div",{className:o.a.stepDescWrapper},React.createElement("span",{className:o.a.descItem},"· 排查路径"),React.createElement("span",{className:o.a.descItem},"· 添加步骤"),React.createElement("span",{className:o.a.descItem},"· 智能总结")),status:"wait"},{stepValue:a.experience,title:"经验总结",description:React.createElement("div",{className:o.a.stepDescWrapper},React.createElement("span",{className:o.a.descItem},"· 应急概述"),React.createElement("span",{className:o.a.descItem},"· 应急经验"),React.createElement("span",{className:o.a.descItem},"· 改进方向")),status:"wait"},{stepValue:a.preview,title:"预览",description:React.createElement("div",{className:o.a.stepDescWrapper},React.createElement("span",{className:o.a.descItem},"· 文档预览")),status:"wait"}];i.reduce((function(e,t){return e[t.stepValue]=t,e}),{})},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){return e[e.init=-1]="init",e[e.preview=99]="preview",e}({})},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(204),o=r.n(n);var a={incr:function(){return o()(6)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.default=n},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(3320)),i={currentURL:"undefined"!=typeof location?location.href:"about:blank",disabledPlugins:[],eventEmitter:null,theme:"light"},u=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=n(n(n({},i),e),{eventEmitter:(null==e?void 0:e.eventEmitter)||new a.default})}return Object.defineProperty(e.prototype,"disabledPlugins",{get:function(){return this._option.disabledPlugins.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventEmitter",{get:function(){return this._option.eventEmitter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentURL",{get:function(){return this._option.currentURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._option.theme},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disableSameIdentifier",{get:function(){return this._option.disableSameIdentifier},enumerable:!1,configurable:!0}),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"editing",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"option",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"service",{enumerable:!0,configurable:!0,writable:!0,value:null})}return Object.defineProperty(e.prototype,"setService",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.service=e}}),Object.defineProperty(e.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;null===(e=this.service)||void 0===e||e.destroy(),this.service=null}}),Object.defineProperty(e.prototype,"sync",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KNodeType=void 0,function(e){e.RootNode="RootNode",e.Element="Element",e.Card="Card",e.Hole="Hole",e.Text="Text"}(t.KNodeType||(t.KNodeType={}))},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getHeadInputPosition=void 0;var o=r(3454),a=r(3560),i=r(3993),u=n(r(3516)),l=r(3459);t.getHeadInputPosition=function(e){var t=[],r=null;if(e.hasCategory([l.Category.TableHole,l.Category.Hole]))return new u.default(e,0);if((0,i.walkNode)(e,{leave:function(e){if(r)return!1;if(e.isTextNode()){if(t.push(e),!e.isEmpty())return r=new u.default(e,0),!1}else if(e.hasCategory(l.Category.Inline)){if(t.push(e),!(0,a.isLikeEmptyElement)(e))return r=new u.default(e,0),!1}else{if(e.hasCategory(l.Category.Block))return o.assert.fatal(e.hasCategory(l.Category.TextContainer),"framework/kernel/src/model/utils/node/get-head-input-position.ts:38"),r=new u.default(e,0),!1;if(e.hasCategory([l.Category.Root,l.Category.LikeRoot])&&0===e.childCount)return r=new u.default(e,0),!1;if(e.hasCategory([l.Category.TableHole,l.Category.Hole]))return r=new u.default(e,0),!1}}}),r)return r;if(t.length){var n=t[0];if(n.isTextNode())return o.assert.fatal(0===n.dataLength,"framework/kernel/src/model/utils/node/get-head-input-position.ts:63"),new u.default(n,0);if(n.hasCategory([l.Category.TextContainer,l.Category.TableHole,l.Category.Hole,l.Category.Root,l.Category.LikeRoot]))return new u.default(n,0)}return null}},function(e,t,r){"use strict";function n(e,t,r){if(t&&!1===t(e))return!1;if(e.isElement())for(var o=e.children,a=o.length-1;a>=0;a--)if(!1===n(o[a],t,r))return!1;return!r||!1!==r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.reverseWalkNode=void 0,t.reverseWalkNode=function(e,t){var r=void 0===t?{}:t,o=r.enter,a=r.leave;(o||a)&&n(e,o,a)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3454),a=n(r(3994)),i=n(r(4134)),u=function(){function e(){Object.defineProperty(this,"_dataSource",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_metaFilters",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._dataSource,delete this._metaFilters}}),Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){o.assert.fatal(!this._dataSource[e],"framework/kernel/src/data-source-manager.ts:26"),o.assert.fatal(t instanceof a.default,"framework/kernel/src/data-source-manager.ts:27"),this._dataSource[e]=t}}),Object.defineProperty(e.prototype,"registerMetaFilter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){o.assert.fatal(t instanceof i.default,"framework/kernel/src/data-source-manager.ts:33"),this._metaFilters[e]=t}}),Object.defineProperty(e.prototype,"matchType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!this._dataSource[e]}}),Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o=this._dataSource[e].read(t,r);return(null===(n=null==o?void 0:o.attrs)||void 0===n?void 0:n.meta)&&(o.attrs.meta=this._filterMeta(o.attrs.meta)),o}}),Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return this._dataSource[e].write(t,r)}}),Object.defineProperty(e.prototype,"_filterMeta",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={},r=this._metaFilters;return Object.keys(e).forEach((function(n){if(r[n]){var o=r[n].filter(n,e[n]);o&&(t[n]=o)}})),t}}),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAcceptAttrs=void 0,t.getAcceptAttrs=function(e,t,r){var n={};return Object.keys(r).forEach((function(o){e.acceptAttr(t,o,r[o])&&(n[o]=r[o])})),n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAtElementEnd=void 0;var n=r(3560);t.isAtElementEnd=function(e){var t=e.node,r=e.offset;if((0,n.isLikeEmptyElement)(t))return!0;if(t.isTextNode()){if(r<t.dataLength)return!1;r=t.offset+1,t=t.parentNode}return r===t.childCount}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codePointSize=t.fromCodePoint=t.codePointAt=void 0,t.codePointAt=function(e,t){var r,n=e.charCodeAt(t);if(!(r=n,r>=55296&&r<56320&&t+1!==e.length))return n;var o=e.charCodeAt(t+1);return function(e){return e>=56320&&e<57344}(o)?o-56320+(n-55296<<10)+65536:n},t.fromCodePoint=function(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))},t.codePointSize=function(e){return e<65536?1:2}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatInlineBoundary=void 0;var n=r(3454),o=r(3477),a=r(3459);t.formatInlineBoundary=function(e,t){if(!t.collapsed&&!(t=function(e,t){var r=t.start,i=t.end,u=t.collapsed;n.assert.fatal(!u,"framework/kernel/src/model/utils/range/helpers/format-inline-boundary.ts:28");var l=r.node,c=r.offset,s=i.node,f=i.offset;l.isTextNode()&&0===c&&(c=l.offset,l=l.parentNode);s.isTextNode()&&f===s.dataLength&&(f=s.offset+1,s=s.parentNode);0===c&&l.hasCategory(a.Category.Inline)&&!l.hasCategory(a.Category.InlineBox)&&(n.assert.fatal(!l.parentNode.hasCategory(a.Category.Inline)||l.parentNode.hasCategory(a.Category.InlineBox),"framework/kernel/src/model/utils/range/helpers/format-inline-boundary.ts:54"),r=e.newPosition(l.parentNode,l.offset));f===s.childCount&&s.hasCategory(a.Category.Inline)&&!s.hasCategory(a.Category.InlineBox)&&(n.assert.fatal(!s.parentNode.hasCategory(a.Category.Inline)||s.parentNode.hasCategory(a.Category.InlineBox),"framework/kernel/src/model/utils/range/helpers/format-inline-boundary.ts:66"),i=e.newPosition(s.parentNode,s.offset+1));return t=e.newRange(r,i),(0,o.verifyRange)(t),t}(e,t)).collapsed)return t;var r=function(e,t){var r=t.node,o=t.offset;if(r.isTextNode())if(0===o)o=r.offset,r=r.parentNode;else{if(o!==r.dataLength)return t;o=r.offset+1,r=r.parentNode}if(!r.hasCategory(a.Category.Inline)||r.hasCategory(a.Category.InlineBox))return t;if(0===o)return n.assert.fatal(!r.parentNode.hasCategory(a.Category.Inline)||r.parentNode.hasCategory(a.Category.InlineBox),"framework/kernel/src/model/utils/range/helpers/format-inline-boundary.ts:107"),e.newPosition(r.parentNode,r.offset);if(o===r.childCount)return n.assert.fatal(!r.parentNode.hasCategory(a.Category.Inline)||r.parentNode.hasCategory(a.Category.InlineBox),"framework/kernel/src/model/utils/range/helpers/format-inline-boundary.ts:115"),e.newPosition(r.parentNode,r.offset+1);return t}(e,t.start);return e.newRange(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["dataTable"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanEmptyInlineNode=void 0;var n=r(3560),o=r(3459);t.cleanEmptyInlineNode=function(e,t,r){void 0===r&&(r=!1);var a=t.node.closest(o.Category.Inline);return a&&(0,n.isLikeEmptyElement)(a)?(a.hasCategory(o.Category.InlineBox)&&!r||(t=e.newPosition(a.parentNode,a.offset),e.removeChild(a.parentNode,a)),t):t}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteContentByPosition=void 0;var a=r(3454),i=o(r(3498)),u=r(4146),l=r(3546),c=r(4138),s=r(3560),f=r(3459);function d(e,t,r){var n=t.node,o=t.offset;if(!n.isTextNode())return t;if(0===n.dataLength)return t=e.newPosition(n.parentNode,n.offset),e.removeChild(n.parentNode,n),p(e,t,r);if(r){if(0===o)return p(e,e.newPosition(n.parentNode,n.offset),r);var a=i.default.deleteChar("forward",n.data,o),u=n.data.length-a.length;return e.setTextNodeData(n,a),e.newPosition(n,o-u)}return o===n.dataLength?p(e,e.newPosition(n.parentNode,n.offset+1),r):(e.setTextNodeData(n,i.default.deleteChar("backward",n.data,o)),e.newPosition(n,o))}function p(e,t,r){return r?h(e,t):y(e,t)}function h(e,t){var r,o,i,u,l,c=t.node,p=t.offset;if(a.assert.fatal(c.hasCategory([f.Category.Block,f.Category.Inline,f.Category.Root,f.Category.LikeRoot]),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:210"),c.hasCategory([f.Category.Root,f.Category.LikeRoot])&&!c.hasCategory(f.Category.VirtualLikeRoot))return t.clone();if(c.hasCategory(f.Category.Inline)&&(0,s.isLikeEmptyElement)(c))return t=e.newPosition(c.parentNode,c.offset),e.removeChild(c.parentNode,c),t;if(0===p){if(c.hasCategory(f.Category.Level)){if(a.assert.fatal(c.hasCategory(f.Category.Block),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:236"),null===(i=c.attrs)||void 0===i?void 0:i.level){var y=c.attrs.level-1;return y>0?e.setAttribute(c,"level",y):e.removeAttribute(c,"level"),t}var b=e.createElement(e.defaultElementName);return c.children.forEach((function(t){a.assert.fatal(e.acceptNode(b.nodeName,t.nodeName),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:253"),e.appendChild(b,t)})),e.insertBefore(c.parentNode,b,c),e.removeChild(c.parentNode,c),e.newPosition(b,0)}if(c.attrs.textIndent>0)return e.removeAttribute(c,"textIndent"),t;if(c.attrs.indent>0)return 1===c.attrs.indent?e.removeAttribute(c,"indent"):e.setAttribute(c,"indent",c.attrs.indent-1),t;if("center"===c.attrs.alignment||"right"===c.attrs.alignment)return e.removeAttribute(c,"alignment"),e.newPosition(c,0);if(c.hasCategory(f.Category.Heading)){if(a.assert.fatal(c.hasCategory(f.Category.Block),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:288"),void 0!==(null===(u=c.attrs)||void 0===u?void 0:u.indexType)&&(null===(l=c.parentNode)||void 0===l?void 0:l.isRootNode()))if(c.attrs.indexType>=0)return e.removeAttribute(c,"indexType"),t;var m=c.previousSibling;if(((null==m?void 0:m.hasCategory(e.defaultElementName))||(null==m?void 0:m.hasCategory(f.Category.Heading)))&&(0,s.isLikeEmptyElement)(m))return e.removeChild(c.parentNode,m),t.clone();var v=e.createElement(e.defaultElementName);return c.children.forEach((function(t){a.assert.fatal(e.acceptNode(v.nodeName,t.nodeName),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:318"),e.appendChild(v,t)})),e.insertBefore(c.parentNode,v,c),e.removeChild(c.parentNode,c),e.newPosition(v,0)}var g=c.parentNode,_=g.parentNode,w=c.previousSibling,O=c.nextSibling,E=(0,s.isLikeEmptyElement)(c);if(E&&g.hasCategory(f.Category.VirtualLikeRoot)){if(1===g.childCount){var P=e.createElement(e.defaultElementName);return(null==_?void 0:_.hasCategory([f.Category.ContainerHole,f.Category.AlertHole]))?e.replaceChild(_.parentNode,P,_):e.replaceChild(g.parentNode,P,g),e.newPosition(P,0)}if(e.removeChild(g,c),!O&&!(null==_?void 0:_.hasCategory([f.Category.ContainerHole,f.Category.AlertHole]))){P=e.createElement(e.defaultElementName);return e.insertAfter(g.parentNode,P,g),e.newPosition(P,0)}if(!w){P=e.createElement(e.defaultElementName);return(null==_?void 0:_.hasCategory([f.Category.ContainerHole,f.Category.AlertHole]))?e.insertBefore(_.parentNode,P,_):e.insertBefore(g.parentNode,P,g),e.newPosition(P,0)}return e.newPosition(w,w.childCount)}if(c.hasCategory(f.Category.Inline)&&!w)return t=e.newPosition(c.parentNode,c.offset),(0,s.isLikeEmptyElement)(c)&&e.removeChild(c.parentNode,c),h(e,t);if(!w){var j=c.parentNode;if(!j.hasCategory(f.Category.VirtualLikeRoot)){if(E&&c.hasCategory(f.Category.Block)&&c.nodeName!==e.defaultElementName){P=e.createElement(e.defaultElementName);return e.replaceChild(j,P,c),e.newPosition(P,0)}return t.clone()}if(!(w=j.previousSibling))return(0,s.isLikeEmptyElement)(j)?(t=e.newPosition(j.parentNode,j.offset),e.removeChild(j.parentNode,j),t):t.clone()}if(w.hasCategory(f.Category.VirtualLikeRoot)){if(!w.lastChild||1===w.childCount&&(0,s.isLikeEmptyElement)(w.lastChild))return e.removeChild(w.parentNode,w),t.clone();w=w.lastChild}if(w.isTextNode()||w.hasCategory(f.Category.Inline))return a.assert.fatal(c.hasCategory(f.Category.Inline),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:452"),(0,s.isLikeEmptyElement)(c)&&e.removeChild(c.parentNode,c),w.isTextNode()?d(e,e.newPosition(w,w.dataLength),!0):h(e,e.newPosition(w,w.childCount));if(w.hasCategory([f.Category.TableHole,f.Category.Hole]))return a.assert.fatal(1===w.childCount,"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:476"),(0,s.isLikeEmptyElement)(c)?(e.removeChild(c.parentNode,c),e.newPosition(w,1)):(e.replaceChild(w.parentNode,c,w),t.clone());if(!w.hasCategory(f.Category.Block))return t.clone();if((0,s.isLikeEmptyElement)(w)&&!w.hasCategory([f.Category.Level]))return e.removeChild(w.parentNode,w),t.clone();if(w.hasCategory(f.Category.OnlyText)){var C=e.newPosition(w,w.childCount),k=C.clone();try{for(var S=n(c.children),A=S.next();!A.done;A=S.next()){var x=A.value;if(!x.isTextNode())return C;k=e.insertNodeByPosition(k,x)}}catch(e){r={error:e}}finally{try{A&&!A.done&&(o=S.return)&&o.call(S)}finally{if(r)throw r.error}}return c.parentNode.hasCategory(f.Category.VirtualLikeRoot)&&(0,s.isLikeEmptyElement)(c.parentNode)?e.removeChild(c.parentNode.parentNode,c.parentNode):e.removeChild(c.parentNode,c),C}var N=e.newPosition(w,w.childCount),T=N.clone();return c.children.forEach((function(t){a.assert.fatal(e.acceptNode(w.nodeName,t.nodeName),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:541"),T=e.insertNodeByPosition(T,t)})),c.parentNode.hasCategory(f.Category.VirtualLikeRoot)&&(0,s.isLikeEmptyElement)(c.parentNode)?e.removeChild(c.parentNode.parentNode,c.parentNode):e.removeChild(c.parentNode,c),N}var D=c.getChildByOffset(p-1);if(a.assert.fatal(D,"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:563"),D.isTextNode())return d(e,e.newPosition(D,D.dataLength),!0);if(D.hasCategory(f.Category.Inline)){if((0,s.isLikeEmptyElement)(D)){if(t=e.newPosition(D.parentNode,D.offset),e.removeChild(c,D),D.hasCategory(f.Category.InlineBox))return t}else t=e.newPosition(D,D.childCount);return h(e,t)}return a.assert.fatal(D.isCardNode(),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:588"),e.removeChild(c,D),e.newPosition(c,p-1)}function y(e,t){var r=t.node,n=t.offset;if(a.assert.fatal(r.hasCategory([f.Category.Block,f.Category.Inline,f.Category.Root,f.Category.LikeRoot]),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:598"),r.hasCategory([f.Category.Root,f.Category.LikeRoot])&&!r.hasCategory(f.Category.VirtualLikeRoot))return t.clone();if((0,s.isLikeEmptyElement)(r)){if(a.assert.fatal(r.parentNode,"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:619"),1===r.parentNode.childCount&&r.parentNode.hasCategory(f.Category.VirtualLikeRoot)){var o=r.parentNode.parentNode;if(null==o?void 0:o.hasCategory([f.Category.AlertHole])){var i=e.createElement(e.defaultElementName);return e.replaceChild(o.parentNode,i,o),e.newPosition(i,0)}t=e.newPosition(r.parentNode.parentNode,r.parentNode.offset);var u=r.parentNode.nextSibling;return e.removeChild(r.parentNode.parentNode,r.parentNode),u?(0,c.getHeadInputPosition)(u):y(e,t)}var l=r.nextSibling;return r.hasCategory(f.Category.Block)?l?(e.removeChild(r.parentNode,r),(0,c.getHeadInputPosition)(l)):t.clone():(a.assert.fatal(r.hasCategory(f.Category.Inline),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:661"),r.hasCategory(f.Category.InlineBox)?(t=e.newPosition(r.parentNode,r.offset),e.removeChild(r.parentNode,r),t):l?(e.removeChild(r.parentNode,r),l.isTextNode()?d(e,e.newPosition(l,0),!1):(a.assert.fatal(l.hasCategory(f.Category.Inline),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:687"),y(e,e.newPosition(l,0)))):(t=e.newPosition(r.parentNode,r.offset),e.removeChild(r.parentNode,r),y(e,t)))}if(n===r.childCount)return(l=r.nextSibling)&&l.hasCategory(f.Category.VirtualLikeRoot)&&(a.assert.fatal(l.firstChild,"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:698"),l=l.firstChild),r.hasCategory(f.Category.Inline)?l?l.isTextNode()?d(e,e.newPosition(l,0),!1):(a.assert.fatal(l.hasCategory(f.Category.Inline),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:714"),y(e,e.newPosition(l,0))):y(e,e.newPosition(r.parentNode,r.offset+1)):(a.assert.fatal(r.hasCategory(f.Category.Block),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:719"),l&&l.hasCategory(f.Category.TextContainer)?(a.assert.fatal(l.hasCategory(f.Category.Block),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:726"),l.children.forEach((function(t){e.appendChild(r,t)})),1===l.parentNode.childCount&&l.parentNode.hasCategory(f.Category.VirtualLikeRoot)?e.removeChild(l.parentNode.parentNode,l.parentNode):e.removeChild(l.parentNode,l),t.clone()):t.clone());var p=r.getChildByOffset(n);return p.isCardNode()?(a.assert.fatal(p.hasCategory(f.Category.InlineCard),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:751"),e.removeChild(r,p),t.clone()):p.isTextNode()?d(e,e.newPosition(p,0),!1):(a.assert.fatal(p.hasCategory(f.Category.Inline),"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:762"),y(e,e.newPosition(p,0)))}t.deleteContentByPosition=function(e,t,r,n){return void 0===r&&(r=!0),void 0===n&&(n=!0),function(e,t,r,n){(0,l.verifyPosition)(t,!0);var o=t.node;t=o.isTextNode()?d(e,t,n):o.hasCategory([f.Category.TableHole,f.Category.Hole])?function(e,t,r){if(r)return function(e,t){var r=t.node,n=t.offset;if(1===n){var o=e.createElement(e.defaultElementName);return e.insertBefore(r.parentNode,o,r),e.removeChild(r.parentNode,r),e.newPosition(o,0)}a.assert.fatal(0===n,"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:123");var i=Number(r.attrs.indent)||0;if(i>0){if(1===i)e.removeAttribute(r,"indent"),r.firstChild&&e.removeAttribute(r.firstChild,"hindent");else{var u=i-1;e.setAttribute(r,"indent",u),r.firstChild&&e.acceptAttr(r.firstChild.nodeName,"hindent",u)&&e.setAttribute(r.firstChild,"hindent",u)}return t}var l=r.previousSibling;if(!l)return t;if((0,s.isLikeEmptyElement)(l)||l.hasCategory(f.Category.Hole))return e.removeChild(r.parentNode,l),t;return e.newPosition(l,l.childCount)}(e,t);return function(e,t){var r=t.node,n=t.offset;if(0===n){var o=e.createElement(e.defaultElementName);return e.insertBefore(r.parentNode,o,r),e.removeChild(r.parentNode,r),e.newPosition(o,0)}a.assert.fatal(1===n,"framework/kernel/src/model/utils/position/helpers/delete-content-by-position.ts:178");var i=r.nextSibling;if(!i)return t;if((0,s.isLikeEmptyElement)(i)||i.hasCategory(f.Category.Hole))return e.removeChild(r.parentNode,i),t;return e.newPosition(i,0)}(e,t)}(e,t,n):p(e,t,n);r&&(t=(0,u.cleanEmptyInlineNode)(e,t));return(0,l.verifyPosition)(t,!0),t}(e,t,r,n)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.shrinkRange=void 0;var o=r(3454),a=n(r(3526)),i=r(3459);function u(e,t,r,n){for(void 0===n&&(n=!0);t.node.isElement();){var a=t.node,u=t.offset;if(a.hasCategory([i.Category.TableHole,i.Category.Hole]))return t;if(n){if(!(l=a.children[u])||l.isCardNode())return t;if(l.hasCategory(i.Category.Inline)&&!r)return t;t=e.newPosition(l,0)}else{var l;if(!(l=a.children[u-1])||l.isCardNode())return t;if(l.hasCategory(i.Category.Inline)&&!r)return t;if(l.isTextNode())return e.newPosition(l,l.dataLength);o.assert.fatal(l.isElement(),"framework/kernel/src/model/utils/range/shrink-range.ts:74"),t=e.newPosition(l,l.childCount)}}return t}t.shrinkRange=function(e,t,r){void 0===r&&(r=!1);var n=t.start,o=t.end;return o=u(e,o,r,!1),t.collapsed?e.newRange(o):(n=u(e,n,r,!0),a.default.createAt(n,o))}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.enlargeRangeInBlockNode=void 0;var o=r(3454),a=n(r(3497)),i=r(4001),u=r(3629);function l(e,t,r){var n={node:t,offset:r};return 0!==r||t.isCardNode()||t.hasCategory(u.Category.Block)?n:l(e,t.parentNode,t.offset)}function c(e,t,r){var n={node:t,offset:r};return t.isCardNode()?n:t.isTextNode()?r!==t.dataLength?n:c(e,t.parentNode,t.offset+1):(o.assert.fatal(t.isElement(),"framework/kernel/src/model/utils/range/enlarge-range-in-block-node.ts:104"),t.hasCategory(u.Category.Block)?n:l(e,t.parentNode,t.offset+1))}t.enlargeRangeInBlockNode=function(e,t){if(t.collapsed)return t;var r=t.start,n=t.end,s=a.default.closest(r.node,u.Category.Block),f=a.default.closest(n.node,u.Category.Block);return s||f?(s&&(r=function(e,t){var r=l(e,t.node,t.offset),n=r.node,o=r.offset;return e.newPosition(n,o)}(e,r)),f&&(n=function(e,t){var r=c(e,t.node,t.offset),n=r.node,o=r.offset;return e.newPosition(n,o)}(e,n)),t=e.newRange(r,n),o.assert.fatal(!t.collapsed,"framework/kernel/src/model/utils/range/enlarge-range-in-block-node.ts:37"),(0,i.isValidRange)(t),t):t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitBlockContent=void 0;var n=r(3454),o=r(3757),a=r(4004);t.splitBlockContent=function(e,t){t.collapsed||(t=(0,o.deleteContent)(e,t)),n.assert.fatal(t.collapsed,"framework/kernel/src/model/utils/range/split-block-content.ts:15");var r=(0,a.breakBlockContent)(e,t.start,a.FOCUS_BLOCK);return e.newRange(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTableLayout=void 0;var n=r(3454),o=function(){function e(e){Object.defineProperty(this,"_layout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.assert.fatal(e&&"table"===e.nodeName,"framework/kernel/src/model/utils/table/parse-table-layout.ts:18"),this._layout=this._analyzeLayout(e)}return Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_analyzeLayout",{enumerable:!1,configurable:!0,writable:!0,value:function(t){for(var r=[],n=0,o=t.childCount;n<o;n++)r.push([]);return t.children.forEach((function(t){var n=t.offset;t.children.forEach((function(t){for(var o=t.attrs,a=o.col,i=o.rowSpan,u=void 0===i?1:i,l=o.colSpan,c=void 0===l?1:l,s=0;s<u;s++)for(var f=0;f<c;f++)r[n+s][a+f]={node:t,row:n,col:a,type:0===s&&0===f?e.TYPE_NODE:e.TYPE_REF}}))})),r}}),Object.defineProperty(e,"TYPE_REF",{enumerable:!0,configurable:!0,writable:!0,value:"#ref"}),Object.defineProperty(e,"TYPE_NODE",{enumerable:!0,configurable:!0,writable:!0,value:"#node"}),e}();t.parseTableLayout=function(e){return new o(e)._layout}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INLINE_CARD_ATTRS=void 0,t.INLINE_CARD_ATTRS=["cardType","value"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fullWalkSelection=void 0;var n=r(3631);t.fullWalkSelection=function(e,t){e.ranges.forEach((function(e){(0,n.fullWalkRange)(e,t)}))}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteContent=void 0;var o=r(3454),a=n(r(3497)),i=n(r(3841)),u=r(3459);t.deleteContent=function(e,t,r,n,l,c){if(void 0===r&&(r=!0),void 0===n&&(n=!0),void 0===l&&(l=!0),void 0===c&&(c=!0),o.assert.fatal(t.ranges.length,"framework/kernel/src/model/utils/selection/delete-content.ts:17"),t.isTableSelection){var s=t.firstRange.start.node.parentNode.parentNode;if(o.assert.fatal(s.hasCategory(u.Category.Table),"framework/kernel/src/model/utils/selection/delete-content.ts:21"),t.firstRange.start.node===s.firstChild.firstChild&&t.lastRange.end.node===s.lastChild.lastChild)return function(e,t,r,n){if(!r){var i=!0;if(t.children.forEach((function(t){t.children.forEach((function(t){a.default.isLikeEmptyElement(t)||(i=!1,t.children.forEach((function(r){e.removeChild(t,r)})))}))})),!i)return null}if(!n)return null;var l=t.parentNode;o.assert.fatal(l.hasCategory(u.Category.TableHole),"framework/kernel/src/model/utils/selection/delete-content.ts:74");var c=e.createElement(e.defaultElementName);return e.insertBefore(l.parentNode,c,l),e.removeChild(l.parentNode,l),e.newSelection(e.newRange(e.newPosition(c,0)))}(e,s,l,c)||t}var f=t.ranges.map((function(t){return i.default.deleteContent(e,t,r,n)}));return e.newSelection([f[0]])}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.insertINode=void 0;var o=r(3454),a=n(r(3497)),i=r(4154),u=r(4440),l=r(4441),c=r(4442),s=r(3908),f=r(4444),d=r(3459);t.insertINode=function(e,t,r,n){var p,h,y;if(void 0===n&&(n=e.editing.kernel),r=(null==n?void 0:n.hasExtendMethod("normalizeINodeTree"))?null===(p=n.getExtendMethod("normalizeINodeTree"))||void 0===p?void 0:p(e,r):(0,f.normalizeINodeTree)(e,r),!t.isCardSelection&&(t.isTableSelection||t.isColumnsSelection||t.isCollapsed)||(t=(0,i.deleteContent)(e,t)),1===t.rangeCount){o.assert.fatal(t.firstRange.collapsed,"framework/kernel/src/model/utils/selection/insert-inode.ts:43");var b=t.firstRange.start,m=a.default.closest(b.node,d.Category.TableCell);if(1===(null===(h=r.children)||void 0===h?void 0:h.length)&&"table"===(null===(y=r.children[0])||void 0===y?void 0:y.name)&&m){var v=(0,c.insertINodeToTableCell)(e,m,r.children[0]);return e.newSelection([v])}var g=(0,s.insertINodeByPosition)(e,b,r);return e.newSelection([e.newRange(g)])}if(t.isColumnsSelection){var _=(0,u.insertINodeToColumns)(e,t.ranges,r);return e.newSelection(_)}var w=(0,l.insertINodeToTable)(e,t.ranges,r);return e.newSelection(w)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syncCellNodeAttrs=void 0;var n=r(3454),o=r(3598),a=["cellBgColor","verticalAlign"];t.syncCellNodeAttrs=function(e,t,r,i){n.assert.fatal("td"===t.name,"framework/kernel/src/model/utils/range/helpers/sync-cell-node-attrs.ts:17");var u=t.attrs||{};a.concat(null!=i?i:[]).forEach((function(t){(0,o.hasOwnProperty)(u,t)&&e.setAttribute(r,t,u[t])}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_readers",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._kernel,delete this._readers}}),Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._readers[e]=t}}),Object.defineProperty(e.prototype,"types",{get:function(){return Object.keys(this._readers)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getINode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this._readers[e];return n?n.read(this._kernel,t,r):null}}),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_writers",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"types",{get:function(){return Object.keys(this._writers)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._kernel,delete this._writers}}),Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._writers[e]=t}}),Object.defineProperty(e.prototype,"matchType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!this._writers[e]}}),Object.defineProperty(e.prototype,"getData",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this._writers[e];return n?n.write(this._kernel,t,r):null}}),e}();t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"cloneNode",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return void 0===t&&(t=!1),e.prototype.cloneNode.call(this,t)}}),Object.defineProperty(t.prototype,"isRootNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"isHole",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),t}(a(r(3903)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3511),l=i(r(3902)),c=r(3459),s=r(4161),f=r(3517),d=function(e){function t(t,r,n,o){var a=e.call(this,t,r,n,o)||this;return Object.defineProperty(a,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:f.NodeType.Card}),Object.defineProperty(a,"cardType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.cardType=t.schema.hasCategory(r,c.Category.BlockCard)?s.CardType.Block:s.CardType.Inline,a._attrs.cardType=a.cardType,a}return o(t,e),Object.defineProperty(t.prototype,"cardValue",{get:function(){var e=this._attrs.value;return e&&"object"==typeof e?a({},e):{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.nodeName,t=this.attrs,r=[];return Object.keys(t).forEach((function(e){if("cardType"!==e){var n=t[e];n?"object"==typeof n?n=JSON.stringify(n):n+="":n="",r.push("".concat(e,'="').concat(n,'"'))}})),"<".concat(e).concat(r.length?" "+r.join(" "):"","></").concat(e,">")}}),Object.defineProperty(t.prototype,"cloneNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=this;void 0===e&&(e=!1);var n=(0,u.cloneObject)(this._attrs);return Object.keys(n).forEach((function(e){r._document.schema.allowCloneAttr(e)||delete n[e]})),new t(this._document,this._nodeName,n)}}),Object.defineProperty(t.prototype,"isCardNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(t.prototype,"toData",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=e.prototype.toData.call(this,t);return r.cardType=this.cardType,r}}),Object.defineProperty(t.prototype,"isEmpty",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(t.prototype,"isHole",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"isRootNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"isElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"isTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),t}(l.default);t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardType=void 0,function(e){e.Block="block",e.Inline="inline"}(t.CardType||(t.CardType={}))},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3903)),u=r(4008),l=function(e){function t(t,r,n){return e.call(this,t,u.RootNodeName,r,n)||this}return o(t,e),Object.defineProperty(t.prototype,"isRootNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(t.prototype,"isCardNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"isHole",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"cloneNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("can not clone rootNode")}}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3498)),u=r(3511),l=a(r(3902)),c=r(4008),s=r(3517),f=function(e){function t(t,r,n,o){var a=e.call(this,t,c.TextNodeName,n,o)||this;return Object.defineProperty(a,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:s.NodeType.Text}),Object.defineProperty(a,"_data",{enumerable:!0,configurable:!0,writable:!0,value:""}),a._data=r||"",a}return o(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataLength",{get:function(){return i.default.size(this._data)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!this._data}}),Object.defineProperty(t.prototype,"cloneNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=this;void 0===e&&(e=!1);var n=(0,u.cloneObject)(this._attrs);return Object.keys(n).forEach((function(e){r._document.schema.allowCloneAttr(e)||delete n[e]})),new t(this._document,this._data,n)}}),Object.defineProperty(t.prototype,"isElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"isRootNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"isHole",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"isCardNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"isTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(t.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.attrs,t=[];return Object.keys(e).forEach((function(r){var n=e[r];n?"object"==typeof n?n=JSON.stringify(n):n+="":n="",t.push("".concat(r,'="').concat(n,'"'))})),"<#text".concat(t.length?" "+t.join(" "):"",">").concat(this._data,"</#text>")}}),Object.defineProperty(t.prototype,"toData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=e.prototype.toData.call(this,!1);return t.data=this._data,t}}),t}(l.default);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(3320)),l=r(3597),c=r(3842),s=i(r(3903)),f=i(r(4159)),d=i(r(4160)),p=i(r(4162)),h=i(r(4163)),y=i(r(3458)),b=i(r(3516)),m=i(r(3526)),v=i(r(3904)),g=function(e){function t(t,r,n){var o=e.call(this)||this;return Object.defineProperty(o,"_model",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(o,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_selection",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_entryPoint",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(o,"_allNodes",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(o,"_nameNodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(o,"_version",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(o,"_ready",{enumerable:!0,configurable:!0,writable:!0,value:!1}),o._id=(0,l.uuid)(12),o._rootNode=new p.default(o,r),o._selection=v.default.createBy(o,m.default.createAt(new b.default(o._rootNode,0))),n&&(o._entryPoint=n.replace(/^#/,"")),o}return o(t,e),Object.defineProperty(t.prototype,"disableSameIdentifier",{get:function(){var e;return!!(null===(e=this._model)||void 0===e?void 0:e.disableSameIdentifier)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._selection.destroy(),this._allNodes.clear(),this.removeAllListeners(),delete this._nameNodes,delete this._selection,delete this._rootNode}}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return this._model.schema},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rootNode",{get:function(){return this._rootNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this._selection},set:function(e){this._selection=e.cloneSelection()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entryPoint",{get:function(){return this._entryPoint},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ready",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._ready||(this._ready=!0,this.emit("ready"))}}),Object.defineProperty(t.prototype,"isReady",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._ready}}),Object.defineProperty(t.prototype,"getData",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._rootNode.toData(!0)}}),Object.defineProperty(t.prototype,"getINode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e&&e.beforeIndex)return this.getINodeBefore(e.beforeIndex);if(e&&e.beforePath)return this.getINodeBeforePath(e.beforePath);var t=this._rootNode.toJSON(!0);return y.default.createFragment(t.children)}}),Object.defineProperty(t.prototype,"getINodeBefore",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r=this._rootNode.toJSON(!0);return y.default.createFragment(null===(t=r.children)||void 0===t?void 0:t.slice(0,e))}}),Object.defineProperty(t.prototype,"getINodeBeforePath",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._rootNode.toJSON(!0),r=t;return e.forEach((function(e){r.children?(r.children.splice(e+1,r.children.length),r=r.children[e]):r.data&&(r.data=r.data.substr(0,e))})),y.default.createFragment(t.children)}}),Object.defineProperty(t.prototype,"getNodeById",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?this._allNodes.get(e):null}}),Object.defineProperty(t.prototype,"getNodesByName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._nameNodes[e]?Array.from(this._nameNodes[e]):[]}}),Object.defineProperty(t.prototype,"getNodesByCategory",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n,o=[];try{for(var i=a(this._allNodes.values()),u=i.next();!u.done;u=i.next()){var l=u.value;(null===(n=null==l?void 0:l.hasCategory)||void 0===n?void 0:n.call(l,e))&&o.push(l)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return o}}),Object.defineProperty(t.prototype,"getNodeByPath",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(0===e.length)return this._rootNode;for(var t=this._rootNode,r=0,n=e.length;r<n;r++){var o=e[r];if(!t.children||!t.children[o])return null;t=t.children[o]}return t}}),Object.defineProperty(t.prototype,"indexNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.id,r=e.nodeName;this._allNodes.set(t,e),this._nameNodes[r]||(this._nameNodes[r]=new Set),this._nameNodes[r].add(e)}}),Object.defineProperty(t.prototype,"unIndexNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.id,r=e.nodeName;this._allNodes.delete(t),this._nameNodes[r]&&this._nameNodes[r].delete(e)}}),Object.defineProperty(t.prototype,"submitOperations",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){this._version++,this.emit(c.EVENT_CONTENT_CHANGE,{mode:r,operations:e,selection:t})}}),Object.defineProperty(t.prototype,"selectionChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.emit(c.EVENT_SELECTION_CHANGE,e)}}),Object.defineProperty(t.prototype,"createElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return new s.default(this,e,t,r)}}),Object.defineProperty(t.prototype,"createHole",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return new f.default(this,e||"hole",t,r)}}),Object.defineProperty(t.prototype,"createTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return new h.default(this,e,t,r)}}),Object.defineProperty(t.prototype,"createCardNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return new d.default(this,e,t,r)}}),t}(u.default);t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=function(){function e(e){Object.defineProperty(this,"_commitCb",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rollbackCb",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.assert.fatal("function"==typeof e.commit,"framework/kernel/src/model/editing/transaction.ts:14"),n.assert.fatal("function"==typeof e.rollback,"framework/kernel/src/model/editing/transaction.ts:15"),this._commitCb=e.commit,this._rollbackCb=e.rollback}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._commitCb,delete this._rollbackCb}}),Object.defineProperty(e.prototype,"commit",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._commitCb()}}),Object.defineProperty(e.prototype,"rollback",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._rollbackCb()}}),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=r(3632),a=function(){function e(e,t,r,a){Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"parentNode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"childNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"offset",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:o.OperationType.Insert}),n.assert.fatal(t.childCount>=a,"framework/kernel/src/model/editing/job/operations/insert.ts:24")}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this.type,delete this.jobMode,delete this.parentNode,delete this.childNode,delete this.offset}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e){n.assert.fatal(this.parentNode.childCount>=this.offset&&!this.childNode.parentNode,"framework/kernel/src/model/editing/job/operations/insert.ts:36"),e.insertByOffset(this.parentNode,this.offset,this.childNode),n.assert.fatal(this.childNode.offset===this.offset&&this.childNode.parentNode===this.parentNode,"framework/kernel/src/model/editing/job/operations/insert.ts:40")}}),Object.defineProperty(e.prototype,"reverse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){n.assert.fatal(this.parentNode.getChildByOffset(this.offset)===this.childNode,"framework/kernel/src/model/editing/job/operations/insert.ts:47"),e.removeChild(this.parentNode,this.childNode)}}),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=r(3632),a=function(){function e(e,t,r,a,i,u,l){Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"parentNode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"oldParentNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"childNode",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"offset",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"oldOffset",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"realOffset",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:o.OperationType.Move}),n.assert.fatal(t.childCount>l,"framework/kernel/src/model/editing/job/operations/move.ts:42")}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this.type,delete this.jobMode,delete this.parentNode,delete this.oldParentNode,delete this.childNode,delete this.offset,delete this.oldOffset,delete this.realOffset}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e){n.assert.fatal(this.oldParentNode.getChildByOffset(this.oldOffset)===this.childNode,"framework/kernel/src/model/editing/job/operations/move.ts:57"),e.insertByOffset(this.parentNode,this.offset,this.childNode),n.assert.fatal(this.parentNode.getChildByOffset(this.realOffset)===this.childNode,"framework/kernel/src/model/editing/job/operations/move.ts:61")}}),Object.defineProperty(e.prototype,"reverse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.oldOffset;this.oldParentNode===this.parentNode&&this.realOffset<this.oldOffset&&(t=this.oldOffset+1),e.insertByOffset(this.oldParentNode,t,this.childNode),n.assert.fatal(this.oldParentNode.getChildByOffset(this.oldOffset)===this.childNode,"framework/kernel/src/model/editing/job/operations/move.ts:79")}}),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=r(3632),a=function(){function e(e,t,r,a){Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"parentNode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"childNode",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"offset",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:o.OperationType.Remove}),n.assert.fatal(t.childCount+1>=a,"framework/kernel/src/model/editing/job/operations/remove.ts:24")}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this.type,delete this.jobMode,delete this.parentNode,delete this.childNode,delete this.offset}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e){n.assert.fatal(this.parentNode.getChildByOffset(this.offset)===this.childNode,"framework/kernel/src/model/editing/job/operations/remove.ts:36"),e.removeChild(this.parentNode,this.childNode)}}),Object.defineProperty(e.prototype,"reverse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){n.assert.fatal(this.parentNode.childCount>=this.offset&&!this.childNode.parentNode,"framework/kernel/src/model/editing/job/operations/remove.ts:43"),e.insertByOffset(this.parentNode,this.offset,this.childNode),n.assert.fatal(this.childNode.offset===this.offset&&this.childNode.parentNode===this.parentNode,"framework/kernel/src/model/editing/job/operations/remove.ts:47")}}),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3632),o=function(){function e(e,t,r,o){Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"attrValue",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:n.OperationType.AddAttr})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this.type,delete this.jobMode,delete this.node,delete this.attrName,delete this.attrValue}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setAttribute(this.node,this.attrName,this.attrValue)}}),Object.defineProperty(e.prototype,"reverse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.removeAttribute(this.node,this.attrName)}}),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3632),o=function(){function e(e,t,r,o){Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"oldAttrValue",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:n.OperationType.RemoveAttr})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this.type,delete this.jobMode,delete this.node,delete this.attrName,delete this.oldAttrValue}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.removeAttribute(this.node,this.attrName)}}),Object.defineProperty(e.prototype,"reverse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setAttribute(this.node,this.attrName,this.oldAttrValue)}}),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3632),o=function(){function e(e,t,r,o,a){Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"attrValue",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"oldAttrValue",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:n.OperationType.UpdateAttr})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this.type,delete this.jobMode,delete this.node,delete this.attrName,delete this.attrValue,delete this.oldAttrValue}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setAttribute(this.node,this.attrName,this.attrValue)}}),Object.defineProperty(e.prototype,"reverse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setAttribute(this.node,this.attrName,this.oldAttrValue)}}),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3632),o=function(){function e(e,t,r,o){Object.defineProperty(this,"jobMode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"oldText",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:n.OperationType.UpdateText})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this.type,delete this.jobMode,delete this.node,delete this.text,delete this.oldText}}),Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setTextNodeData(this.node,this.text)}}),Object.defineProperty(e.prototype,"reverse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setTextNodeData(this.node,this.oldText)}}),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NODE_CHANGE_TEXT_CHANGE=t.NODE_CHANGE_ATTR_CHANGE=t.NODE_CHANGE_ATTR_REMOVE=t.NODE_CHANGE_ATTR_ADD=t.NODE_CHANGE_INSERT=t.NODE_CHANGE_REMOVE=void 0,t.NODE_CHANGE_REMOVE="remove",t.NODE_CHANGE_INSERT="insert",t.NODE_CHANGE_ATTR_ADD="addAttr",t.NODE_CHANGE_ATTR_REMOVE="removeAttr",t.NODE_CHANGE_ATTR_CHANGE="changeAttr",t.NODE_CHANGE_TEXT_CHANGE="changeText"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=r(3511),a=r(3842),i=r(4009),u=r(4173),l=function(){function e(){}return Object.defineProperty(e,"assertAcceptNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if(!e.acceptNode(t,r))throw new Error("invalid node insert: ".concat(t," can't contain ").concat(r))}}),Object.defineProperty(e,"prependChild",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,n){return 0===r.childCount?e.appendChild(t,r,n):e.insertBefore(t,r,n,r.firstChild)}}),Object.defineProperty(e,"appendChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if(r.parent===t&&r._offset+1===t.childCount)return null;var n=r.parent,o=r._offset,a=t.children.length;return n&&c(e,n,r),s(e,u.NODE_CHANGE_INSERT,{parentNode:t,childNode:r,offset:t.childCount}),r._offset=t.childCount,r._parent=t,f(t).push(r),n?{type:i.OperationDataMapKey.Move,data:{oldParent:n,oldOffset:o,parentNode:t,offset:a,realOffset:r._offset,childNode:r}}:{type:i.OperationDataMapKey.Insert,data:{parentNode:t,childNode:r,offset:r._offset}}}}),Object.defineProperty(e,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=r._offset;return c(e,t,r),{type:i.OperationDataMapKey.Remove,data:{parentNode:t,childNode:r,offset:n}}}}),Object.defineProperty(e,"insertBefore",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,o){if(n.assert.fatal(o.parent===t,"framework/kernel/src/model/editing/job/helper/node.ts:135"),r===o)return null;var a=r.parent,l=r._offset,d=o.offset;a&&c(e,a,r);var p=f(t),h=p.indexOf(o);s(e,u.NODE_CHANGE_INSERT,{parentNode:t,childNode:r,offset:h});for(var y=p.length-1;y>=h;y--)p[y]._offset++,p[y+1]=p[y];return r._offset=h,r._parent=t,p[h]=r,a?{type:i.OperationDataMapKey.Move,data:{oldParent:a,oldOffset:l,parentNode:t,offset:d,realOffset:r._offset,childNode:r}}:{type:i.OperationDataMapKey.Insert,data:{parentNode:t,childNode:r,offset:r._offset}}}}),Object.defineProperty(e,"insertAfter",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,n,o){if(o.parent!==r)throw new Error("invalid referenceElement");if(n===o)return null;var a=o.nextSibling;return a?e.insertBefore(t,r,n,a):e.appendChild(t,r,n)}}),Object.defineProperty(e,"insertByOffset",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,o,a){if(a.parent===r&&a.offset===o)return null;var i=f(r);if(n.assert.fatal(o<=i.length,"framework/kernel/src/model/editing/job/helper/node.ts:226"),o===i.length)return e.appendChild(t,r,a);var u=i[o];return u?e.insertBefore(t,r,a,u):e.appendChild(t,r,a)}}),Object.defineProperty(e,"setTextNodeData",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if(r=r||"",t.data===r)return null;s(e,u.NODE_CHANGE_TEXT_CHANGE,{node:t,text:r});var n,o=t.data;return n=r,t._data=n,{type:i.OperationDataMapKey.UpdateText,data:{node:t,text:r,oldText:o}}}}),Object.defineProperty(e,"removeAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){n.assert.fatal(t.hasAttribute(r),"framework/kernel/src/model/editing/job/helper/node.ts:276"),s(e,u.NODE_CHANGE_ATTR_REMOVE,{node:t,attrName:r});var o=d(t),a=o[r];return delete o[r],{type:i.OperationDataMapKey.RemoveAttr,data:{node:t,name:r,value:a}}}}),Object.defineProperty(e,"setAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,a){n.assert.fatal(e.acceptAttr(t.nodeName,r,a),"setAttribute ".concat(r," failed: ").concat(r," is not a valid attribute for ").concat(t.nodeName),"framework/kernel/src/model/editing/job/helper/node.ts:304");var l=d(t);if(t.hasAttribute(r)){var c=l[r];return c===a?null:(s(e,u.NODE_CHANGE_ATTR_CHANGE,{node:t,attrName:r,attrValue:(0,o.cloneObject)(a)}),l[r]=a,{type:i.OperationDataMapKey.UpdateAttr,data:{node:t,name:r,value:a,oldValue:c}})}return s(e,u.NODE_CHANGE_ATTR_ADD,{node:t,attrName:r,attrValue:(0,o.cloneObject)(a)}),l[r]=a,{type:i.OperationDataMapKey.AddAttr,data:{node:t,name:r,value:a}}}}),e}();function c(e,t,r){var n=f(t),o=n.indexOf(r);if(-1===o)throw new Error("invalid child");s(e,u.NODE_CHANGE_REMOVE,{parentNode:t,childNode:r}),n.splice(o,1);for(var a=o,i=n.length;a<i;a++)n[a]._offset-=1;return r._parent=null,r._offset=-1,r}function s(e,t,r){e.editing.emit(a.EVENT_NODE_WILL_CHANGE,{jobMode:e.mode,type:t,data:r})}function f(e){return e._children}function d(e){return e._attrs}t.default=l},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeSelection=void 0;var o=r(3454),a=r(3490),i=n(r(3497)),u=r(4176),l=n(r(3526)),c=r(3459);t.normalizeSelection=function(e,t,r){void 0===r&&(r=!0);var n=t.ranges.length>1;return e.newSelection(t.ranges.map((function(t){if(n){var s=i.default.closest(t.start.node,[c.Category.TableCell,a.COLUMN]);return o.assert.fatal(s,"framework/kernel/src/model/utils/selection/normalize-selection.ts:25"),l.default.selectNodeContents(s)}return(0,u.normalizeRange)(e,t,r)})),t.anchor,t.focus)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeRange=void 0;var o=r(3454),a=n(r(3497)),i=r(3907),u=n(r(3843)),l=r(4144),c=r(3477),s=r(3459);function f(e,t,r){var n=function(e,t,r){var n=t.node;if(n.isTextNode())return t;if(o.assert.fatal(n.isElement()&&n.hasCategory([s.Category.TextContainer,s.Category.Root,s.Category.LikeRoot]),"framework/kernel/src/model/utils/range/normalize-range.ts:132"),r)return function(e,t){var r=t.node,n=t.offset;if(!r.isElement())return t;var i=r.getChildByOffset(n-1);if(i){if(i.isElement())return i.hasCategory([s.Category.Root,s.Category.LikeRoot,s.Category.TableHole,s.Category.Hole])||i.hasCategory(s.Category.InlineBox)?t:(o.assert.fatal(i.hasCategory([s.Category.TextContainer]),"framework/kernel/src/model/utils/range/normalize-range.ts:175"),a.default.getTailInputPosition(i)||t);if(i.isTextNode()){if(!i.isEmpty())return e.newPosition(i,i.dataLength)}else o.assert.fatal(i.isCardNode(),"framework/kernel/src/model/utils/range/normalize-range.ts:182")}var u=r.getChildByOffset(n);if(u){if(u.isElement())return u.hasCategory(s.Category.Table)?(o.assert.fatal(u.firstChild.firstChild.hasCategory(s.Category.TableCell),"framework/kernel/src/model/utils/range/normalize-range.ts:191"),a.default.getHeadInputPosition(u.firstChild.firstChild)||t):u.hasCategory(s.Category.InlineBox)?t:(o.assert.fatal(u.hasCategory([s.Category.TextContainer,s.Category.LikeRoot,s.Category.TableHole,s.Category.Hole]),"framework/kernel/src/model/utils/range/normalize-range.ts:205"),a.default.getHeadInputPosition(u)||t);if(u.isTextNode()){if(!u.isEmpty()||!i||i.isCardNode())return e.newPosition(u,0)}else if(!i)return o.assert.fatal(u.isCardNode(),"framework/kernel/src/model/utils/range/normalize-range.ts:219"),t}if(i)return o.assert.fatal(!i.hasCategory(s.Category.InlineBox),"framework/kernel/src/model/utils/range/normalize-range.ts:226"),o.assert.fatal((!u||u.isEmpty())&&(i.isCardNode()||i.isEmpty()),"framework/kernel/src/model/utils/range/normalize-range.ts:227"),i.isCardNode()?t:e.newPosition(i,0);return o.assert.fatal(r.isEmpty(),"framework/kernel/src/model/utils/range/normalize-range.ts:239"),t}(e,t);return function(e,t){var r=t.node,n=t.offset;if(!r.isElement())return t;var i=r.getChildByOffset(n);if(i){if(i.isElement())return i.hasCategory([s.Category.Root,s.Category.LikeRoot,s.Category.TableHole,s.Category.Hole])?t:(o.assert.fatal(i.hasCategory(s.Category.TextContainer),"framework/kernel/src/model/utils/range/normalize-range.ts:267"),a.default.getHeadInputPosition(i)||t);if(i.isTextNode()){if(!i.isEmpty())return e.newPosition(i,0)}else o.assert.fatal(i.isCardNode(),"framework/kernel/src/model/utils/range/normalize-range.ts:274")}var u=r.getChildByOffset(n-1);if(u){if(u.isElement())return u.hasCategory(s.Category.Table)?(o.assert.fatal(u.lastChild.lastChild.hasCategory(s.Category.TableCell),"framework/kernel/src/model/utils/range/normalize-range.ts:283"),a.default.getTailInputPosition(u.lastChild.lastChild)||t):(o.assert.fatal(u.hasCategory(s.Category.TextContainer),"framework/kernel/src/model/utils/range/normalize-range.ts:293"),a.default.getTailInputPosition(u)||t);if(u.isTextNode()){if(!u.isEmpty()||!i||i.isCardNode())return e.newPosition(u,u.dataLength)}else if(!i)return o.assert.fatal(u.isCardNode(),"framework/kernel/src/model/utils/range/normalize-range.ts:300"),t}if(i)return o.assert.fatal((!u||u.isEmpty())&&(i.isCardNode()||i.isEmpty()),"framework/kernel/src/model/utils/range/normalize-range.ts:307"),i.isCardNode()?t:e.newPosition(i,0);return o.assert.fatal(r.isEmpty(),"framework/kernel/src/model/utils/range/normalize-range.ts:319"),t}(e,t)}(e,t,r),i=n.node,u=n.offset;return i.isTextNode(),e.newPosition(i,u)}function d(e,t,r){var n=t.node,a=t.offset,i=[s.Category.TextContainer,s.Category.Root,s.Category.LikeRoot,s.Category.Text,s.Category.Hole,s.Category.TableHole];if(n.hasCategory(i))return t;o.assert.fatal(n.isElement(),"framework/kernel/src/model/utils/range/normalize-range.ts:95");var u=n;if(r){for(;0===a&&!u.hasCategory(i);)a=u.offset,u=u.parentNode;return e.newPosition(u,a)}for(;a===u.childCount&&!u.hasCategory(i);)a=u.offset+1,u=u.parentNode;return e.newPosition(u,a)}t.normalizeRange=function(e,t,r){void 0===r&&(r=!0);var n=t.start,a=t.end,p=t.collapsed;return n.node.isCardNode()?(o.assert.fatal(p,"framework/kernel/src/model/utils/range/normalize-range.ts:21"),t):(n=d(e,n,p),a=d(e,a,!0),u.default.isInvalidTablePosition(n)&&(n=u.default.normalizeTdPosition(e,n),a=u.default.normalizeTdPosition(e,a)),n.node.hasCategory([s.Category.TableHole,s.Category.Hole])||(n=f(e,n,p)),p?t=e.newRange(n):(a.node.hasCategory([s.Category.TableHole,s.Category.Hole])||(a=f(e,a,!0)),t=e.newRange(n,a)),t=(0,l.formatInlineBoundary)(e,t),r&&(t=(0,i.optimizeRange)(e,t)),(0,c.verifyRange)(t,!0),t)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return i(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=l(r(3910)),s=r(3454),f=r(3842),d=l(r(4165)),p=u(r(3909)),h=l(r(3904)),y=r(4456),b=r(3991),m=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(n,"model",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(n,"_transaction",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(n,"_isFlushing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_flushAgain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(n,"_jobs",{enumerable:!0,configurable:!0,writable:!0,value:[]}),n}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this.kernel,delete this.model,delete this._transaction,e.prototype.destroy.call(this)}}),Object.defineProperty(t.prototype,"startTransaction",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return s.assert.fatal(!this._transaction,"framework/kernel/src/model/editing/index.ts:42"),this._transaction=new d.default({commit:function(){var t;null===(t=e._transaction)||void 0===t||t.destroy(),e._transaction=null,e._flush()},rollback:function(){var t;null===(t=e._transaction)||void 0===t||t.destroy(),e._transaction=null,e._rollback()}}),this._transaction}}),Object.defineProperty(t.prototype,"requestFlush",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._transaction||this._flush()}}),Object.defineProperty(t.prototype,"job",{get:function(){0===this._jobs.length&&this._jobs.push(new p.default(this,this.model));var e=this._jobs[this._jobs.length-1];return(0,p.isCommitted)(e)&&(e=new p.default(this,this.model),this._jobs.push(e)),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newJob",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=p.default.MODE_USER);var t=this._jobs[this._jobs.length-1];return t&&(t.isEmpty()?(this._jobs.pop(),t=this._jobs[this._jobs.length-1],s.assert.fatal(!t||!t.isEmpty(),"framework/kernel/src/model/editing/index.ts:91")):(0,p.isCommitted)(t)||this._commitJob(t)),t=new p.default(this,this.model,e),this.emit(f.EVENT_JOB_CREATED,{job:t}),this._jobs.push(t),t}}),Object.defineProperty(t.prototype,"commitJob",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._commitJob(e),this.requestFlush()}}),Object.defineProperty(t.prototype,"cancelJob",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"_flush",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this._isFlushing)this._flushAgain=!0;else{this._isFlushing=!0,this._flushAgain=!1;var e=2;try{for(this._doFlush();this._flushAgain;){if(this._flushAgain=!1,--e<0)throw new Error("failed to execute flush");this._doFlush()}}finally{this._isFlushing=!1}}}}),Object.defineProperty(t.prototype,"_rollback",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._jobs,t=[];if(0!==e.length){var r=e[0].cachedSelection;e.forEach((function(e){var r=(0,p.flushJob)(e);(null==r?void 0:r.length)&&r.forEach((function(e){t.push(e)}))}));var n=this.newJob(b.JobMode.Auto);t.reverse().forEach((function(e){e.reverse(n)})),this._cleanJobs(!0),y.Danger.setSelection(this.model.document,r.cloneSelection()),this.emit(f.EVENT_OPERATION_ROLLBACK)}else this.emit(f.EVENT_OPERATION_ROLLBACK)}}),Object.defineProperty(t.prototype,"_doFlush",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this._hasContentChange()&&this.emit(f.EVENT_BEFORE_CONTENT_CHANGE);var t=this._jobs,r=[],n=[],o=null,a=null,i=null;t.forEach((function(e,u){if(!e.isEmpty()){var l;o?e.mode!==b.JobMode.Auto&&s.assert.fatal(o===e.mode,"framework/kernel/src/model/editing/index.ts:203"):o=e.mode,(0,p.isCommitted)(e)?(l=r,a||(a=e.cachedSelection)):(s.assert.fatal(t.length===u+1,"framework/kernel/src/model/editing/index.ts:210"),l=n,i||(i=e.cachedSelection));var c=(0,p.flushJob)(e);c&&c.length&&c.forEach((function(e){l.push(e)}))}})),this._cleanJobs();var u=r.concat(n);if(u.length){s.assert.fatal(t.length>0,"framework/kernel/src/model/editing/index.ts:238"),s.assert.fatal(0===r.length||0===n.length,"framework/kernel/src/model/editing/index.ts:240");var l=this.model.document.selection,c={selection:l.cloneSelection(),mode:o,isCommitted:r.length>0};r.length?(s.assert.fatal(a,"framework/kernel/src/model/editing/index.ts:256"),c.operations=r,c.previousSelection=a):(s.assert.fatal(0===r.length&&i,"framework/kernel/src/model/editing/index.ts:261"),c.operations=n,c.previousSelection=i),this.emit(f.EVENT_CONTENT_CHANGE,c),c.mode!==b.JobMode.Init&&c.mode!==b.JobMode.OT&&Promise.resolve().then((function(){e.kernel&&e.emit(f.EVENT_OPERATION_SUBMITTED,{operations:u,selection:l.cloneSelection()})}));try{this.model.document.submitOperations(u,l.cloneSelection(),c.mode)}finally{this.emit(f.EVENT_AFTER_CONTENT_CHANGE)}}else{var d;r.length?(s.assert.fatal(a,"framework/kernel/src/model/editing/index.ts:295"),d=a):d=i;var y=this.model.document.selection;0!==u.length||h.default.equal(y,d)||(this.emit(f.EVENT_SELECTION_CHANGE,{selection:y.cloneSelection()}),this.model.document.selectionChange({selection:y.cloneSelection()}))}}}),Object.defineProperty(t.prototype,"_hasContentChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._jobs.some((function(e){return!e.isEmpty()}))}}),Object.defineProperty(t.prototype,"_cleanJobs",{enumerable:!1,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=!1);var t=[];if(e)return this._jobs.forEach((function(e){e.destroy()})),void(this._jobs=[]);this._jobs.forEach((function(e){(0,p.isCommitted)(e)||e.isEmpty()?e.destroy():t.push(e)})),s.assert.fatal(t.length<=1,"framework/kernel/src/model/editing/index.ts:354"),this._jobs=t}}),Object.defineProperty(t.prototype,"_commitJob",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e._committed=!0}}),t}(c.default);t.default=m},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3454),u=r(3511),l=r(3598),c=r(4179),s=r(3459),f=r(3517),d=function(){function e(){Object.defineProperty(this,"_rawSchemas",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_elementSchemas",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_attrSchemas",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_textAttrNames",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_contextAttrs",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._textAttrNames.clear(),delete this._rawSchemas,delete this._elementSchemas,delete this._attrSchemas,delete this._textAttrNames,delete this._contextAttrs}}),Object.defineProperty(e.prototype,"defaultElementName",{get:function(){return this._rawSchemas[s.Category.Root].defaultElementName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textAttrs",{get:function(){return Array.from(this._textAttrNames)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"registerElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,r=this._elementSchemas;this._rawSchemas=n(n({},e),this._rawSchemas),Object.keys(e).forEach((function(n){var i=e[n],u={type:f.NodeType.Element,parents:{},category:{},standardAttrs:[]};if(i.parents&&i.parents.forEach((function(e){u.parents[e]=!0})),i.category&&i.category.forEach((function(e){u.category[e]=!0})),i.excludes&&(u.excludes=i.excludes.slice()),i.children){var l={};i.children.forEach((function(e){l[e]=!0})),u.children=l}i.contextAttr&&Object.keys(i.contextAttr).forEach((function(e){t._contextAttrs.push(e)})),i.standardAttrs&&(u.standardAttrs=a([],o(i.standardAttrs),!1)),u.category[n]=!0,r[n]=u}))}}),Object.defineProperty(e.prototype,"registerAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,o={};"string"==typeof e?(i.assert.fatal(t,"framework/kernel/src/model/schema.ts:119"),o[e]=t):o=n({},e);var a=this._attrSchemas;Object.keys(o).forEach((function(e){var t=o[e];a[e]=t,t.targets.includes(s.Category.Text)&&r._textAttrNames.add(e)}))}}),Object.defineProperty(e.prototype,"registerInlineCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r=(0,u.cloneObject)(c.INLINE_CARD_SCHEMA);this.registerElement(((t={})[e]=r,t)),this.registerAttr((0,u.cloneObject)(c.CARD_ATTRS_SCHEMA))}}),Object.defineProperty(e.prototype,"registerBlockCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r=(0,u.cloneObject)(c.BLOCK_CARD_SCHEMA);this.registerElement(((t={})[e]=r,t)),this.registerAttr((0,u.cloneObject)(c.CARD_ATTRS_SCHEMA))}}),Object.defineProperty(e.prototype,"getNodeSchema",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._rawSchemas[e]||null}}),Object.defineProperty(e.prototype,"isStandardAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this._rawSchemas[e];return!!(null==r?void 0:r.standardAttrs)&&r.standardAttrs.includes(t)}}),Object.defineProperty(e.prototype,"getAttrSchema",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._attrSchemas[e]||null}}),Object.defineProperty(e.prototype,"allowCloneAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._attrSchemas[e];return!!t&&!1!==t.allowClone}}),Object.defineProperty(e.prototype,"allowExtractAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._attrSchemas[e];return!!t&&!1!==t.allowExtract}}),Object.defineProperty(e.prototype,"acceptNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if("*"===t&&"*"!==e)return!0;if("#fragment"===e)return!0;var r=this._elementSchemas[t],n=this._elementSchemas[e];if(!r||!n)return!1;if(r.excludes&&r.excludes.some((function(e){return n.category[e]})))return!1;if(n.children&&!Object.keys(r.category).some((function(e){return n.children[e]})))return!1;var o=Object.keys(r.parents).some((function(t){return t.startsWith("~")?!!n.category[t]:e===t}));return o||!1}}),Object.defineProperty(e.prototype,"isValidAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if("id"===e&&"string"==typeof t)return!0;var r=this._attrSchemas[e];if(!r||void 0===t)return!1;if(r.values)if("function"==typeof r.values){if(!r.values(t))return!1}else if(-1===r.values.indexOf(t))return!1;return!0}}),Object.defineProperty(e.prototype,"acceptAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return"id"===t&&"string"==typeof r||!!this.isValidAttr(t,r)&&this.acceptAttrName(e,t)}}),Object.defineProperty(e.prototype,"acceptAttrName",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if("id"===t)return!0;if(!this._elementSchemas[e])return!1;var r=this._attrSchemas[t];return i.assert.fatal(r&&r.targets,"framework/kernel/src/model/schema.ts:300"),(!r.excludes||!this.hasCategory(e,r.excludes,!1))&&this.hasCategory(e,r.targets,!1)}}),Object.defineProperty(e.prototype,"hasCategory",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=!1),"string"==typeof t&&(t=[t]);var n=this._elementSchemas[e];if(!n)return!1;var o=n.category;if(r){for(var a=0,i=t.length;a<i;a++)if(!o[t[a]])return!1;return!0}for(a=0,i=t.length;a<i;a++)if(o[t[a]])return!0;return!1}}),Object.defineProperty(e.prototype,"isContextAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._contextAttrs.includes(e)}}),Object.defineProperty(e.prototype,"supportContextAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!this._contextAttrs.includes(t))return!1;var r=this._rawSchemas[e];return(0,l.hasOwnProperty)(r.contextAttr,t)}}),Object.defineProperty(e.prototype,"processContextAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this._rawSchemas[e];return i.assert.fatal(n.contextAttr&&n.contextAttr[t],"framework/kernel/src/model/schema.ts:368"),n.contextAttr[t](r,t,e)}}),Object.defineProperty(e.prototype,"getCategoryByNodeName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._elementSchemas[e];return i.assert.fatal(t&&t.category,"framework/kernel/src/model/schema.ts:376"),t.category}}),Object.defineProperty(e.prototype,"getNodeTypeByNodeName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._elementSchemas[e];return t?t.type:null}}),e}();t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CARD_ATTRS_SCHEMA=t.INLINE_CARD_SCHEMA=t.BLOCK_CARD_SCHEMA=void 0;var n=r(4010),o=r(3459),a=r(3517);t.BLOCK_CARD_SCHEMA={type:a.NodeType.Card,id:n.generateHashID,category:[o.Category.Card,o.Category.BlockCard,o.Category.Brick],parents:[o.Category.Hole]},t.INLINE_CARD_SCHEMA={type:a.NodeType.Card,id:n.generateHashID,category:[o.Category.Card,o.Category.InlineCard],parents:[o.Category.TextContainer]},t.CARD_ATTRS_SCHEMA={value:{targets:[o.Category.Card]},cardType:{targets:[o.Category.Card]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.selection,r=e.rootNode;return{selection:{anchor:t.anchor,focus:t.focus,ranges:t.ranges.map((function(e){return{collapsed:e.collapsed,start:{node:e.start.node.id,offset:e.start.offset},end:{node:e.end.node.id,offset:e.end.offset}}}))},content:[r.toData(!0)]}}}),e}();t.default=n},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3454),u=r(3465),l=a(r(4180)),c=function(){function e(e,t){Object.defineProperty(this,"_model",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_commands",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_destroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this._destroyed=!0,Object.keys(this._commands).forEach((function(t){e._commands[t].destroy()})),delete this._model,delete this._kernel,delete this._commands}}),Object.defineProperty(e.prototype,"registerCommand",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;if(!this._destroyed){var n={};"string"==typeof e?(i.assert.fatal(t,"framework/kernel/src/model/command/command-manager.ts:39"),n[e]=t):n=e,Object.keys(n).forEach((function(e){var t=n[e];["undo","redo"].includes(e)||i.assert.fatal(!r._commands[e],"duplicate command name ".concat(e),"framework/kernel/src/model/command/command-manager.ts:48"),t.init(r._model.kernel,r._model.editing),r._commands[e]=t}))}}}),Object.defineProperty(e.prototype,"hasCommand",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!this._commands&&Object.prototype.hasOwnProperty.call(this._commands,e)}}),Object.defineProperty(e.prototype,"getCommandState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this._destroyed)return u.COMMAND_UNAVAILABLE;var t=this._commands[e];return t&&this._model.document?t.getState(this._getJob()):u.COMMAND_UNAVAILABLE}}),Object.defineProperty(e.prototype,"queryCommandEnabled",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this._destroyed)return!1;var t=this._commands[e];return!(!t||!this._model.document)&&t.isEnabled(this._getJob())}}),Object.defineProperty(e.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(this._destroyed)return!1;var a=this._commands[e];if(!a||!this._model.document)return!1;var i,u=+new Date,c=this._model.editing.startTransaction();try{this._model.editing.emit("beforeExecCommand",{commandName:e,args:t}),i=a.execute.apply(a,o([this._model.editing],n(t),!1))}catch(r){c.rollback();var s=t.map((function(e){try{return JSON.stringify(e)}catch(e){return"#error"}})),f=l.default.getSnapshot(this._model.document),d={error:r,detail:{commandName:e,args:s,selection:f.selection,content:f.content}};throw this._kernel.emitEvent("commandExecuteError",d),this._kernel.emit("commandExecuteError",d),r}return c.commit(),this._model.editing.emit("afterExecCommand",{commandName:e,args:t,result:i}),this._kernel.emitEvent("commandEnd",{commandName:e,useTime:+new Date-u}),i}}),Object.defineProperty(e.prototype,"getCommandValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(this._destroyed)return!1;var a=this._commands[e];return!(!a||!this._model.document)&&a.getValue.apply(a,o([this._getJob()],n(t),!1))}}),Object.defineProperty(e.prototype,"_getJob",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._model.editing.job}}),e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3459),o=r(3517),a={"#root":{type:o.NodeType.Element,category:[n.Category.Root],defaultElementName:"p",parents:[]},"#text":{type:o.NodeType.Text,category:[n.Category.Text],parents:[n.Category.TextContainer]},hole:{type:o.NodeType.Element,category:[n.Category.Hole],parents:[n.Category.Root,n.Category.LikeRoot],excludes:[n.Category.VirtualLikeRoot]},tableHole:{type:o.NodeType.Element,category:[n.Category.TableHole],parents:[n.Category.Root]},rootCardHole:{type:o.NodeType.Element,category:[n.Category.RootCardHole,n.Category.Hole],parents:[n.Category.Root]},alertHole:{type:o.NodeType.Element,category:[n.Category.AlertHole,n.Category.Hole],parents:[n.Category.Root,n.Category.LikeRoot],excludes:["alert"],children:["alert"]},containerHole:{type:o.NodeType.Element,category:[n.Category.ContainerHole,n.Category.Hole],parents:[n.Category.Root]},"*":{type:o.NodeType.Element,category:[],parents:[]}};t.default=a},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setINode=void 0;var o=r(3454),a=r(4155),i=n(r(3458));t.setINode=function(e,t,r){o.assert.fatal(i.default.isFragmentNode(t),"framework/kernel/src/model/utils/inode/set-inode.ts:13");var n=e.document.rootNode,u=t.attrs;u&&Object.keys(u).forEach((function(t){"id"!==t&&e.setAttribute(n,t,u[t])})),n.children.forEach((function(t){e.removeChild(n,t)}));var l=e.newSelection(e.newRange(e.newPosition(n,0)));(0,a.insertINode)(e,l,t,r)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},u=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=l(r(3320)),s=l(r(4164)),f=l(r(4177)),d=l(r(4178)),p=l(r(4181)),h=l(r(4182)),y=r(3517),b=l(r(3714)),m=l(r(3909)),v=r(4183),g=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(r,"_document",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_editing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_commandManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),r._schema=new d.default,r._schema.registerElement(h.default),r._editing=new f.default(t,r),r._commandManager=new p.default(r,t),r}return o(t,e),Object.defineProperty(t.prototype,"disableSameIdentifier",{get:function(){var e,t;return!!(null===(t=null===(e=this.kernel)||void 0===e?void 0:e.option)||void 0===t?void 0:t.disableSameIdentifier)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;null===(e=this._document)||void 0===e||e.destroy(),this._commandManager.destroy(),this._editing.destroy(),this._schema.destroy(),this.removeAllListeners(),delete this._document,delete this._commandManager,delete this._editing,delete this._schema}}),Object.defineProperty(t.prototype,"document",{get:function(){return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editing",{get:function(){return this._editing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return!this._disabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return this._schema},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enable",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disabled&&(this._disabled=!1,this.emit("disable.state.change",!1))}}),Object.defineProperty(t.prototype,"disable",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._disabled||(this._disabled=!0,this.emit("disable.state.change",!0))}}),Object.defineProperty(t.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=null),this._document&&(this.emit("document.destroy",this._document),this._document.destroy());var r=new s.default(this,null==e?void 0:e.attrs,null==t?void 0:t.entryPoint);this._document=r,this.emit("document.create",this._document,t);var n,o=this._editing,a=o.newJob(m.default.MODE_INIT);return e&&(0,v.setINode)(a,e,this.kernel),r.entryPoint&&(n=b.default.moveToNodeById(a,r.entryPoint)),n||(n=b.default.toStart(a.getSelection())),a.setSelection(n),o.commitJob(a),r.ready(),this.emit("document.ready",r),this._document}}),Object.defineProperty(t.prototype,"registerElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r={};"string"==typeof e?r[e]=t:r=e;var n={};Object.keys(r).forEach((function(e){n[e]=a(a({},r[e]),{type:y.NodeType.Element})})),this._schema.registerElement(n)}}),Object.defineProperty(t.prototype,"registerAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._schema.registerAttr(e,t)}}),Object.defineProperty(t.prototype,"registerInlineCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._schema.registerInlineCard(e)}}),Object.defineProperty(t.prototype,"registerBlockCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._schema.registerBlockCard(e)}}),Object.defineProperty(t.prototype,"registerCommand",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._commandManager.registerCommand(e,t)}}),Object.defineProperty(t.prototype,"acceptNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._schema.acceptNode(e,t)}}),Object.defineProperty(t.prototype,"acceptAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return this._schema.acceptAttr(e,t,r)}}),Object.defineProperty(t.prototype,"hasCategory",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return void 0===r&&(r=!1),this._schema.hasCategory(e,t,r)}}),Object.defineProperty(t.prototype,"getNodeSchema",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._schema.getNodeSchema(e)}}),Object.defineProperty(t.prototype,"isStandardAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._schema.isStandardAttr(e,t)}}),Object.defineProperty(t.prototype,"getAttrSchema",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._schema.getAttrSchema(e)}}),Object.defineProperty(t.prototype,"connectDocument",{enumerable:!1,configurable:!0,writable:!0,value:function(){throw new Error("can't support connect document")}}),Object.defineProperty(t.prototype,"execCommand",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=this._commandManager).execute.apply(t,u([e],i(r),!1))}}),Object.defineProperty(t.prototype,"queryCommandState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._commandManager.getCommandState(e)}}),Object.defineProperty(t.prototype,"queryCommandSupported",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._commandManager.hasCommand(e)}}),Object.defineProperty(t.prototype,"queryCommandEnabled",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._commandManager.queryCommandEnabled(e)}}),Object.defineProperty(t.prototype,"queryCommandValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return(t=this._commandManager).getCommandValue.apply(t,u([e],i(r),!1))}}),t}(c.default);t.default=g},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3454),l=i(r(3994)),c=i(r(3458)),s=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._kernel.readData("text/ne-inode",e);u.assert.fatal("#root"===t.name,"framework/kernel/src/public/json-data-source.ts:16");var r=a(f(this._kernel,[t]),1)[0];return c.default.createFragment(r.children,r.attrs)}}),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.document.getData()}}),t}(l.default);function f(e,t){var r=[];return t.forEach((function(t){var n,o=e.getNodeSchema(t.name);if(!o)return t.children&&f(e,t.children).forEach((function(e){r.push(e)})),r;switch(o.type){case"element":n=c.default.createElement(t.name,t.attrs,t.id);break;case"card":(n=c.default.createCard(t.name,(t.attrs||{}).value,t.id)).attrs=t.attrs||n.attrs;break;case"text":n=c.default.createTextNode(t.data,t.attrs,t.id);break;default:throw new Error("invalid data")}t.children&&c.default.setChildren(n,f(e,t.children)),r.push(n)})),r}t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},u=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},l=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=c(r(3910)),f=r(3454),d=r(3597),p=c(r(4140)),h=c(r(4135)),y=c(r(4157)),b=c(r(4158)),m=c(r(4184)),v=c(r(4185)),g=c(r(3516)),_=c(r(3526)),w=c(r(3909)),O=r(4457),E=function(e){function t(t,r){var n,o,a,c,s,g,_,E=this;E=e.call(this)||this,Object.defineProperty(E,"version",{enumerable:!0,configurable:!0,writable:!0,value:O.version}),Object.defineProperty(E,"_id",{enumerable:!0,configurable:!0,writable:!0,value:(0,d.uuid)(16)}),Object.defineProperty(E,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(E,"_model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(E,"_writerManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(E,"_readerManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(E,"_dataSourceManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(E,"_plugins",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(E,"_richContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(E,"setDocument",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t,r){var n,o,a;try{if(e&&("string"==typeof e?(f.assert.fatal(void 0!==t,"lack of second parameter","framework/kernel/src/kernel.ts:295"),n=e,o=t,a=r):(n=e.type,o=e.value,a=t)),"lake"===n&&(n="text/lake"),n&&!E._dataSourceManager.matchType(n))throw new Error("illegal data type");var i=E._model,u=void 0;n&&(E.emit("beforeSetDocument",n,o,a),u=E._dataSourceManager.read(n,o,a)),i.reset(u,a),E.emit("afterSetDocument")}catch(t){throw E.emit("setDocumentError",{error:t,detail:{dataType:n,content:o||e}}),t}}}),Object.defineProperty(E,"getDocument",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){var r;if(void 0===e&&(e="json"),!(null===(r=E._model)||void 0===r?void 0:r.document))return null;if("lake"===e&&(e="text/lake"),!E._dataSourceManager.matchType(e))throw new Error("illegal data type");var n=E._model.editing.newJob(w.default.MODE_SILENT);return E._dataSourceManager.write(e,n,t)}}),Object.defineProperty(E,"execCommand",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return null===(t=E._model)||void 0===t?void 0:t.execCommand.apply(t,u([e],i(r),!1))}}),Object.defineProperty(E,"queryCommandState",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return null===(t=E._model)||void 0===t?void 0:t.queryCommandState.apply(t,u([e],i(r),!1))}}),Object.defineProperty(E,"queryCommandEnabled",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return null===(t=E._model)||void 0===t?void 0:t.queryCommandEnabled.apply(t,u([e],i(r),!1))}}),Object.defineProperty(E,"queryCommandValue",{enumerable:!0,configurable:!0,writable:!0,value:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return null===(t=E._model)||void 0===t?void 0:t.queryCommandValue.apply(t,u([e],i(r),!1))}}),r=r||{eventEmitter:E},E._option=new h.default(r),E._model=new m.default(E),E._dataSourceManager=new p.default,E._writerManager=new b.default(E),E._readerManager=new y.default(E);var P=E._model.editing;E._dataSourceManager.register("json",new v.default(E)),E._model.on("document.create",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];E.emit.apply(E,u(["document.create"],i(e),!1))})),E._model.on("document.beforeReady",(function(){E.emit("document.beforeReady")})),E._model.on("document.ready",(function(){E.emit("document.ready"),E.emitEvent("document.ready")})),E._model.on("document.destroy",(function(){E.emit("document.destroy")}));var j=E._option.disabledPlugins;try{for(var C=l(t.kernelPlugins),k=C.next();!k.done;k=C.next()){var S=k.value,A=S.PluginOption,x=S.PluginName,N=S.Service,T=S.Commands;if(!j.includes(x)){var D=null;if(A){if(!A.OptionName)throw new Error("missing OptionName");D=new A(r[A.OptionName])}D&&(D.kernelOption=E._option);var L=new S(E,P,D);if(N){var R=new N(E,P,L);E.registerService(R),L.setService(R)}E._createCommand(T,L),E._plugins.push(L),f.assert.fatal(void 0===E._plugins[x],"framework/kernel/src/kernel.ts:140"),E._plugins[x]=L}}}catch(e){n={error:e}}finally{try{k&&!k.done&&(o=C.return)&&o.call(C)}finally{if(n)throw n.error}}try{for(var I=l(E._plugins),M=I.next();!M.done;M=I.next()){(L=M.value).init(E,P)}}catch(e){a={error:e}}finally{try{M&&!M.done&&(c=I.return)&&c.call(I)}finally{if(a)throw a.error}}try{for(var F=l(E._plugins),B=F.next();!B.done;B=F.next()){null===(_=(L=B.value).afterInit)||void 0===_||_.call(L)}}catch(e){s={error:e}}finally{try{B&&!B.done&&(g=F.return)&&g.call(F)}finally{if(s)throw s.error}}return E}return o(t,e),Object.defineProperty(t.prototype,"_createCommand",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;if(e){var n={};Array.isArray(e)?(e.forEach((function(e){var o=e.ID;f.assert.fatal(o,"framework/kernel/src/kernel.ts:165"),f.assert.fatal(!n[o],"duplicate command ID ".concat(o),"framework/kernel/src/kernel.ts:166"),n[o]=new e(r,r._model.editing,t)})),this.registerCommand(n)):"object"==typeof e&&(Object.keys(e).forEach((function(o){var a=e[o];f.assert.fatal(o,"framework/kernel/src/kernel.ts:180"),f.assert.fatal(!n[o],"duplicate command ID ".concat(o),"framework/kernel/src/kernel.ts:181"),n[o]=new a(r,r._model.editing,t)})),this.registerCommand(n))}}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.emit("beforedestroy"),this.removeAllListeners(),this._plugins.forEach((function(e){e.destroy()})),this._readerManager.destroy(),this._writerManager.destroy(),this._dataSourceManager.destroy(),this._model.destroy(),delete this._readerManager,delete this._writerManager,delete this._dataSourceManager,delete this._model,delete this._option,delete this._plugins,e.prototype.destroy.call(this)}}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"document",{get:function(){var e;return(null===(e=this._model)||void 0===e?void 0:e.document)||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultElementName",{get:function(){return this._model.schema.defaultElementName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"option",{get:function(){return this._option},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editing",{get:function(){return this._model.editing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return this.option.theme},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataSourceManager",{get:function(){return this._dataSourceManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plugins",{get:function(){return this._plugins},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._model.disabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emitEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];(t=this._option.eventEmitter||this).emit.apply(t,u([e],i(r),!1))}}),Object.defineProperty(t.prototype,"sendMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this._option.eventEmitter||this).emit.apply(e,u(["message"],i(t),!1))}}),Object.defineProperty(t.prototype,"onMessage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){(this._option.eventEmitter||this).on("message",e)}}),Object.defineProperty(t.prototype,"enable",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._model.enable()}}),Object.defineProperty(t.prototype,"disable",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._model.disable()}}),Object.defineProperty(t.prototype,"canGetDocument",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=!1;return this._plugins.forEach((function(t){t.sync()||(e=!0)})),!e}}),Object.defineProperty(t.prototype,"registerDataSource",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._dataSourceManager.register(e,t)}}),Object.defineProperty(t.prototype,"registerMetaFilter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._dataSourceManager.registerMetaFilter(e,t)}}),Object.defineProperty(t.prototype,"registerWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._writerManager.register(e,t)}}),Object.defineProperty(t.prototype,"registerReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._readerManager.register(e,t)}}),Object.defineProperty(t.prototype,"getSupportedWriterTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._writerManager.types}}),Object.defineProperty(t.prototype,"getSupportedReaderTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._readerManager.types}}),Object.defineProperty(t.prototype,"writeData",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return this._writerManager.getData(e,t,r)}}),Object.defineProperty(t.prototype,"readData",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return this._readerManager.getINode(e,t,r)}}),Object.defineProperty(t.prototype,"registerElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._model.registerElement(e,t)}}),Object.defineProperty(t.prototype,"registerAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._model.registerAttr(e,t)}}),Object.defineProperty(t.prototype,"registerInlineCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._model.registerInlineCard(e)}}),Object.defineProperty(t.prototype,"registerBlockCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._model.registerBlockCard(e)}}),Object.defineProperty(t.prototype,"createModelRange",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e?new g.default(e.node,e.offset):void 0,n=t?new g.default(t.node,t.offset):void 0;if(!(r=r||n))throw new Error("failed to call createModelRange()");return _.default.createAt(r,n)}}),Object.defineProperty(t.prototype,"getNodeSchema",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._model.getNodeSchema(e)}}),Object.defineProperty(t.prototype,"hasCategory",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return void 0===r&&(r=!1),this._model.hasCategory(e,t,r)}}),Object.defineProperty(t.prototype,"setDocExtraContent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._richContent=a(a({},this._richContent),e)}}),Object.defineProperty(t.prototype,"getDocExtraContent",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._richContent}}),Object.defineProperty(t.prototype,"registerCommand",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._model.registerCommand(e,t)}}),Object.defineProperty(t.prototype,"queryCommandSupported",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return null===(t=this._model)||void 0===t?void 0:t.queryCommandSupported.apply(t,u([e],i(r),!1))}}),t}(s.default);t.default=E},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelFactory=void 0;var i=r(3454),u=a(r(4186)),l=function(){function e(){Object.defineProperty(this,"kernelPlugins",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return Object.defineProperty(e,"addPluginToPool",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.forEach((function(e){var r=e.PluginName;i.assert.fatal(r,"missing PluginName","framework/kernel/src/kernel-factory.ts:26"),i.assert.fatal(!t.includes(e),"Plugin duplicate registration: ".concat(r),"framework/kernel/src/kernel-factory.ts:27"),t[r]=e,t.push(e)}))}}),Object.defineProperty(e.prototype,"registerKernelPlugin",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return e.addPluginToPool(t,this.kernelPlugins),this}}),Object.defineProperty(e.prototype,"createKernel",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(u.default.bind.apply(u.default,o([void 0,this],n(e),!1)))}}),e}();t.KernelFactory=l},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAttrValue=void 0;var o=r(3459),a=n(r(3497)),i=n(r(3841));function u(e,t,r,n,i,u){if(r.node.hasCategory([o.Category.Root,o.Category.LikeRoot,o.Category.TableHole,o.Category.Hole]))return[];if(u){var c=a.default.closest(r.node,o.Category.Block);if(c&&c.hasCategory(u))return[]}var s=new Set,f=a.default.getAncestors(r.node,o.Category.Block);if(!f)return[];for(var d=f.length-1;d>=0;d--)l(e,s,t,f[d],n,i);return Array.from(s)}function l(e,t,r,n,i,u){if(r.acceptAttrName(n.nodeName,i)&&!(e&&n.isTextNode()&&n.isEmpty())){if(!u&&r.isContextAttr(i)){var l=a.default.closest(n,o.Category.AttrContext);if(l&&r.supportContextAttr(l.nodeName,i)){var c=r.processContextAttr(l.nodeName,i,n.getAttribute(i));return void t.add(c)}}n.hasAttribute(i)?t.add(n.attrs[i]):n.isTextNode()&&t.add(null)}}t.getAttrValue=function(e,t,r,n,c){void 0===n&&(n=!0);for(var s=t.ranges,f=new Set,d=!t.collapsed,p=function(t,p){var h=s[t],y=h.start.node,b=h.end.node;return u(d,e,h.start,r,n,c).forEach((function(e){f.add(e)})),f.size>1?{value:Array.from(f)}:h.collapsed?"continue":(y!==b&&u(d,e,h.end,r,n,c).forEach((function(e){f.add(e)})),f.size>1?{value:Array.from(f)}:(i.default.walkRange(h,(function(t,i){if(t===y||t===b)return i.skip();if(c){var u=a.default.closest(t,o.Category.Block);if(u&&u.hasCategory(c))return i.skip()}l(d,f,e,t,r,n),f.size>1&&i.stop()})),f.size>1?{value:Array.from(f)}:void 0))},h=0,y=s.length;h<y;h++){var b=p(h);if("object"==typeof b)return b.value}return Array.from(f)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3465),u=a(r(3911)),l=r(3457),c=a(r(3714)),s=r(3459),f=a(r(3755)),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();if(c.default.isInCard(t))return t.firstRange.start.node.hasCategory(s.Category.InlineCard)?f.default.NOT_EXECUTED:i.COMMAND_UNAVAILABLE;var r=t.firstRange,n=r.start,o=r.end;if(n.node.closest(s.Category.OnlyText)||o.node.closest(s.Category.OnlyText))return i.COMMAND_UNAVAILABLE;if(t.isCollapsed&&t.firstRange.start.node.hasCategory([s.Category.TableHole,s.Category.Hole]))return i.COMMAND_UNAVAILABLE;var a=u.default.getAttrValue(e,this._formatSelection(t),this.attrName,!1);return a.length>1?f.default.UNKNOWN:1===a.length&&a[0]?f.default.EXECUTED:f.default.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(void 0===t&&(t=e.getSelection()),c.default.isInCard(t)&&!t.firstRange.start.node.hasCategory(s.Category.InlineCard))return null;var r=u.default.getAttrValue(e,this._formatSelection(t),this.attrName,!1);return Array.from(r)}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob();if(this.getState(n)===f.default.UNAVAILABLE)return e.cancelJob(n),!1;var o=null;if(r){if(!(o=this._createSelectionById(n,r)))return!1}else if((o=n.getSelection()).collapsed&&o.firstRange.start.node.isRootNode()&&o.firstRange.start.isAtEnd){var a=n.createElement(n.defaultElementName);n.appendChild(o.firstRange.start.node,a),o=n.newSelection([n.newRange(n.newPosition(a,0))])}return(o=t?c.default.setAttribute(n,this._formatSelection(o),this.attrName,t):c.default.removeAttribute(n,this._formatSelection(o),this.attrName))&&n.setSelection(o),e.commitJob(n),!0}}),Object.defineProperty(t.prototype,"_createSelectionById",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.getNodeById(t);return(null==r?void 0:r.isConnected)?e.newSelection(e.newRange(e.newPosition(r,0))):null}}),Object.defineProperty(t.prototype,"_formatSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.isCollapsed?e:c.default.shrinkToElement(e)}}),t}(l.KernelAbstractCommand);t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"markdown",service:{IMarkdownKernelService:"IMarkdownKernelService"}})},function(e,t,r){"use strict";function n(){var e="__check_if_storage_supported",t=!0;if("undefined"!=typeof window)try{window.localStorage.setItem(e,"1"),window.localStorage.removeItem(e)}catch(e){t=!1}else t=!1;return t}Object.defineProperty(t,"__esModule",{value:!0}),t.isSupported=void 0,t.isSupported=n;var o=n()?window.localStorage:{_store:{},setItem:function(e,t){this._store[e]=t},getItem:function(e){return this._store[e]||null}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e,"encodeHTML",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}}),Object.defineProperty(e,"decodeHTML",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"string"!=typeof e?e:e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}}),e}();t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t._InsertCardCommand=void 0;var a=r(3453),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.getSelection().rangeCount>1?a.Command.UNAVAILABLE:a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"_execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){void 0===n&&(n=!1);var o=e.newJob();if(this.getState(o)===a.Command.UNAVAILABLE)return e.cancelJob(o),!1;var i=a.CardUtil.insertCardNode(o,o.getSelection(),t,r),u=i.selection,l=i.cardNode;return n?o.setSelection([o.newRange(o.newPosition(l,0))]):o.setSelection(u),e.commitJob(o),l.id}}),t}(r(3457).KernelAbstractCommand);t._InsertCardCommand=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3454),l=r(3457),c=r(3600),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);if(o&&o.isConnected&&o.hasCategory(a.Category.Card))if(r.node.closest(a.Category.OnlyText))e.cancelJob(n);else{if(o.hasCategory(a.Category.BlockCard)){var l=o.parentNode;u.assert.fatal(null==l?void 0:l.isHole(),"plugins/card/src/kernel/commands/move-card-command.ts:33"),i.PositionUtil.insertNodes(n,r,[l])}else i.PositionUtil.insertNodes(n,r,[o]);n.setSelection([n.newRange(n.newPosition(o.parentNode,o.offset+1))]),e.commitJob(n)}else e.cancelJob(n)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.moveCard}),t}(l.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LakeCardWriter=t.LakePlugin=t.pluginRegister=t.ILakeKernelService=t.LakeNodeWriter=t.LakeStyleReader=t.LakeNodeReader=t.LakeNodePreReader=t.LakeCardReader=t.LakeCardPreReader=t.LakeAttrReader=void 0;var o=r(4014);Object.defineProperty(t,"LakeAttrReader",{enumerable:!0,get:function(){return o.LakeAttrReader}});var a=r(4489);Object.defineProperty(t,"LakeCardPreReader",{enumerable:!0,get:function(){return a.LakeCardPreReader}});var i=r(3481);Object.defineProperty(t,"LakeCardReader",{enumerable:!0,get:function(){return i.LakeCardReader}});var u=r(4490);Object.defineProperty(t,"LakeNodePreReader",{enumerable:!0,get:function(){return u.LakeNodePreReader}});var l=r(3548);Object.defineProperty(t,"LakeNodeReader",{enumerable:!0,get:function(){return l.LakeNodeReader}});var c=r(4015);Object.defineProperty(t,"LakeStyleReader",{enumerable:!0,get:function(){return c.LakeStyleReader}});var s=r(3499);Object.defineProperty(t,"LakeNodeWriter",{enumerable:!0,get:function(){return s.LakeNodeWriter}});var f=r(3463);Object.defineProperty(t,"ILakeKernelService",{enumerable:!0,get:function(){return f.ILakeKernelService}});var d=r(4196);Object.defineProperty(t,"pluginRegister",{enumerable:!0,get:function(){return d.pluginRegister}});var p=n(r(4197));t.LakePlugin=p.default;var h=n(r(3547));t.LakeCardWriter=h.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"lake"})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4491)),l=r(4492),c=r(4196),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_dataSource",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._dataSource=new u.default(e),e.registerDataSource("text/lake",this._dataSource),e.registerWriter("text/lake",this.service.lakeWriter),e.registerReader("text/lake",this.service.lakeReader),this.service.registerLakeNodePreReader("title",{read:function(){return!1}})}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t;e.prototype.destroy.call(this),this._dataSource.destroy(),null===(t=this.service)||void 0===t||t.destroy()}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.pluginName}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:l.LakeKernelService}),t}(i.KernelPlugin);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidId=void 0,t.isValidId=function(e){return!(!e||"nodeName"===e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"meta",attr:{meta:"meta"},service:{IMetaService:"IMetaService"}})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IBasicTextStyleKernelService=void 0;var a=r(3453),i=r(3761),u=r(3563),l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,i.unwrapID)(t.ID)}),Object.defineProperty(r,"boldDisableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,i.wrapID)(u.pluginRegister.service.IBasicTextStyleKernelService)}),t}(a.KernelAbstractService);t.IBasicTextStyleKernelService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_CUSTOM_NAME=t.TYPE_ATTR_NAME=t.TYPE_STYLE_NAME=void 0,t.TYPE_STYLE_NAME="style",t.TYPE_ATTR_NAME="attr",t.TYPE_CUSTOM_NAME="custom"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}}),Object.defineProperty(e.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}}),Object.defineProperty(e.prototype,"isEnabled",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(e.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FOCUS_CARD_AFTER=t.FOCUS_CARD_BEFORE=t.FOCUS_CARD=void 0,t.FOCUS_CARD="card",t.FOCUS_CARD_BEFORE="before",t.FOCUS_CARD_AFTER="after"},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var t=e.container;if(!t)throw new Error("please set a dom container!");this.options=n(n({limitHeight:5e3,canvasCache:[],hPadding:0,container:t},e),{limitWidth:t.offsetWidth-2*(e.hPadding||0)}),t.style.overflow="hidden"}return Object.defineProperty(e.prototype,"_removeCanvas",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.options;e.canvasCache.forEach((function(e){var t;null===(t=e.parentElement)||void 0===t||t.removeChild(e)})),e.canvasCache=[]}}),Object.defineProperty(e.prototype,"_getCanvas",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.options;return t.canvasCache[e]||this._createCanvasToCount(e+1),t.canvasCache[e]}}),Object.defineProperty(e.prototype,"_createCanvasToCount",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.options,r=t.limitHeight,n=t.container,o=t.canvasCache;if(!(o.length>=e))for(var a=o.length;a<e;a++){var i=document.createElement("canvas");i.style.position="absolute",i.style.top=a*r+"px",i.setAttribute("width",String(n.offsetWidth)),i.setAttribute("height",String(r)),n.appendChild(i),o.push(i)}}}),Object.defineProperty(e.prototype,"_handleSingleRect",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.x,r=e.y,n=e.index,o=e.width,a=e.height,i=e.callback,u=this.options.limitHeight,l=this._getCanvas(n);if(l){var c=l.getContext("2d");o=Math.max(0,Math.min(t+o,this.options.limitWidth+this.options.hPadding)-Math.max(t,this.options.hPadding)),i({x:t=Math.max(t,this.options.hPadding),y:r-u*n,width:o,height:a,context:c})}}}),Object.defineProperty(e.prototype,"_drawRect",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.x,r=e.y,n=e.width,o=e.height,a=e.fill,i=void 0===a?"#FFEC3D":a,u=e.stroke,l=void 0===u?"#FFEC3D":u;this._handleRect({x:t,y:r,width:n,height:o,callback:function(e){var t=e.x,r=e.y,n=e.width,o=e.height,a=e.context;a.fillStyle=i,a.strokeStyle=l,a.fillRect(t,r,n,o)}})}}),Object.defineProperty(e.prototype,"_handleRect",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=e.x,r=e.y,o=e.width,a=e.height,i=e.callback,u=this.options.limitHeight,l={x:t,y:r},c=r+a,s=Math.floor(l.y/u),f=Math.floor(c/u),d=s;d<=f;)this._handleSingleRect(n(n({},l),{index:d,width:o,height:a,callback:i})),d++}}),Object.defineProperty(e.prototype,"getImageData",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.x,r=e.y,n=e.width,o=e.height,a=this.options.limitHeight,i=Math.floor(r/a);return this._getCanvas(i).getContext("2d").getImageData(t,r,n,o)}}),Object.defineProperty(e.prototype,"draw",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this["_draw"+e](t)}}),Object.defineProperty(e.prototype,"clearRect",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.x,r=e.y,n=e.width,o=e.height;this._handleRect({x:t,y:r,width:n,height:o,callback:function(e){var t=e.x,r=e.y,n=e.width,o=e.height;e.context.clearRect(t,r,n,o)}})}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.options.canvasCache.forEach((function(e){var t=e.getContext("2d"),r=Number(e.getAttribute("width")),n=Number(e.getAttribute("height"));t.clearRect(0,0,r,n)}))}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._removeCanvas()}}),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Theme=void 0,function(e){e.default="",e.dark="dark"}(t.Theme||(t.Theme={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"breakLine",command:{breakLine:"breakLine"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"clearFormat",toolbar:{clearFormat:"clearFormat"},command:{clearFormat:"clearFormat"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"code",cardName:"code",cardSelect:"code",command:{code:"code"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"markdownDataSource"})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},u=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=r(3453),s=l(r(4579)),f=l(r(4580)),d=l(r(4585)),p=r(4209),h=l(r(3458)),y=l(r(4587)),b=r(3466),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_dataSource",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"markdownReader",{enumerable:!0,configurable:!0,writable:!0,value:new f.default}),Object.defineProperty(t,"markdownWriter",{enumerable:!0,configurable:!0,writable:!0,value:new d.default}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._dataSource=new s.default(e),e.registerDataSource("text/markdown",this._dataSource),e.registerReader("text/markdown",this.markdownReader),e.registerWriter("text/markdown",this.markdownWriter),this.registerDefaultReader(),this.registerDefaultWriter()}}),Object.defineProperty(t.prototype,"registerDefaultReader",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.markdownReader,r=this.kernel.getService(b.IHTMLKernelService.ID);r&&t.registerMarkdownReader("html",(function(t,n){var o,i=r.read(e.kernel,n.raw,{}),u=t.getAttrs(),l=Object.keys(u).length>0;return null===(o=i.children)||void 0===o||o.forEach((function(e){var r;if(l){e.attrs=a(a({},u),e.attrs);var n=function(e){e.children&&e.children.forEach(n),e.attrs&&(e.attrs=a(a({},u),e.attrs))};null===(r=e.children)||void 0===r||r.forEach(n)}t.setNode(e)})),!1})),t.registerMarkdownReader("paragraph",(function(e){return e.setNode(e.createElement("p")),!0})),t.registerMarkdownReader("blockquote",(function(e){return e.setNode(e.createElement("quote")),!0})),t.registerMarkdownReader("heading",(function(e,t){return e.setNode(e.createElement("h"+t.depth)),!0})),t.registerMarkdownReader("del",(function(e){return e.addAttr("strikethrough",!0),!0})),t.registerMarkdownReader("em",(function(e){return e.addAttr("italic",!0),!0})),t.registerMarkdownReader("strong",{read:function(e){return e.addAttr("bold",!0),!0}}),t.registerMarkdownReader("link",(function(e,t){return e.setNode(e.createElement("link",{src:t.href,external:!0})),!0})),t.registerMarkdownReader("codespan",(function(e,t){var r=e.createElement("code");return e.appendChild(r,e.createText(t.raw.slice(1,-1))),e.setNode(r),!0})),t.registerMarkdownReader("hr",(function(e){return e.setNode(e.createElement("hr")),!0})),t.registerMarkdownReader("math",(function(e,t){return e.setNode(e.createElement("math",{value:{code:t.text},cardType:"inline"})),!0})),t.registerMarkdownReader("list",(function(e,t){var r=t.ordered?"oli":"uli",n="number"==typeof t.start?t.start-1:null;return t.items.forEach((function(t,o){var a,i=e.createElement(t.task?"tli":r,{level:0,index:(n||0)+o,indexType:0,checked:t.checked});e.transform(t.tokens,i);var u=[];null===(a=i.children)||void 0===a||a.forEach((function(e){["oli","tli","uli"].includes(e.name)&&u.push(e)})),e.setNode(i),u.forEach((function(t){var r;h.default.removeChild(i,t),t.attrs.level+=1;var n=null===(r=e.parent)||void 0===r?void 0:r.getNode();n&&e.appendChild(n,t)}))})),!0})),t.registerMarkdownReader("table",(function(e,t){var r=e.createElement("table",{colWidths:t.align.map((function(){return 250})),colCount:t.align.length,rowCount:t.rows.length+1});return u([t.header],i(t.rows),!1).forEach((function(n){var o=e.createElement("tr");e.appendChild(r,o),n.forEach((function(r,n){var a=e.createElement("td",{col:n}),i=e.createElement("p",t.align[n]?{alignment:t.align[n]}:{});e.appendChild(o,a),e.appendChild(a,i),e.transform(r.tokens,i)}))})),e.setNode(r),!0})),t.registerMarkdownReader("alert",{read:function(e,t){for(var r,n,o,a=Array.from((null===(n=null===(r=e.parent)||void 0===r?void 0:r.getNode())||void 0===n?void 0:n.children)||[]),i=a.length-1;i>=0;i--)if("alert"===a[i].name){if(a[i].attrs.selfStart){var u=a.slice(i+1);return null===(o=e.parent)||void 0===o||o.removeChildren(u),e.appendChildren(a[i],u),e.addAttr("selfClose",!0),delete a[i].attrs.selfStart,!1}if(a[i].attrs.selfClose)return e.setNode(e.createElement("alert",{type:t.lang||"info",selfStart:!0})),!1}return e.setNode(e.createElement("alert",{type:t.lang||"info",selfStart:!0})),!1},afterParentRead:function(e){for(var t,r=Array.from((null===(t=null==e?void 0:e.getNode())||void 0===t?void 0:t.children)||[]),n=r.length-1;n>=0;n--)if("alert"===r[n].name){if(r[n].attrs.selfStart){var o=r.slice(n+1);return e.removeChildren(o),e.appendChildren(r[n],o),r[n].attrs.selfClose=!0,void delete r[n].attrs.selfStart}return}}})}}),Object.defineProperty(t.prototype,"registerDefaultWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.markdownWriter;e.registerAnyNodeWriter({write:function(e,t){return"card"!==t.type||(e.append("[此处为语雀卡片，点击链接查看](".concat(e.kernel.option.currentURL,"#").concat(t.id,")\n\n")),!1)}}),e.registerMarkdownWriter("p",{write:function(e){return e.isInTableCell()?e.append("<br/>"):e.append("  \n"),!1}});var t={preWrite:function(e,t){var r=parseInt(t.name.slice(1),10);return e.append("#".repeat(r)+" "),!0},write:function(e){return e.isInTableCell()?e.append("<br/>"):e.append("\n"),!1}};e.registerMarkdownWriter("h1",t),e.registerMarkdownWriter("h2",t),e.registerMarkdownWriter("h3",t),e.registerMarkdownWriter("h4",t),e.registerMarkdownWriter("h5",t),e.registerMarkdownWriter("h6",t),e.registerMarkdownWriter("math",{write:function(e,t){return e.append("$ ".concat(t.attrs.value.code," $")),!1}}),e.registerMarkdownWriter("quote",{write:function(e){return e.forEachChild((function(e){e.appendFirst("> ")})),e.append("\n"),!1}}),e.registerMarkdownWriter("collapse",{preWrite:function(e,t){return e.writeHTML(h.default.createFragment([t])),!1},write:function(){return!1}}),e.registerMarkdownWriter("alert",{write:function(e,t){return e.wrap(":::".concat(t.attrs.type,"\n"),":::\n"),!1}})}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.destroy.call(this),this.markdownReader.destroy(),this.markdownWriter.destroy()}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:p.pluginRegister.pluginName}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:y.default}),t}(c.KernelPlugin);t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markdownToTree=void 0;var n=r(4581);t.markdownToTree=function(e){return(new n.Lexer).lex(e.replace(/ {2}\n/g,"\n\n"))}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function o(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!0,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeDefaults=t.defaults=t.getDefaults=void 0,t.getDefaults=o,t.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!0,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},t.changeDefaults=function(e){t.defaults=n(n({},t.defaults),e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkDeprecations=t.findClosingBracket=t.rtrim=t.splitCells=t.noopTest=t.resolveUrl=t.cleanUrl=t.edit=t.unescape=t.escape=void 0;var n=/[&<>"']/,o=new RegExp(n.source,"g"),a=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,i=new RegExp(a.source,"g"),u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l=function(e){return u[e]};t.escape=function(e,t){if(t){if(n.test(e))return e.replace(o,l)}else if(a.test(e))return e.replace(i,l);return e};var c=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function s(e){return e.replace(c,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}t.unescape=s;var f=/(^|[^\[])\^/g;t.edit=function(e,t){e="string"==typeof e?e:e.source,t=t||"";var r={replace:function(t,n){return n=(n=n.source||n).replace(f,"$1"),e=e.replace(t,n),r},getRegex:function(){return new RegExp(e,t)}};return r};var d=/[^\w:]/g,p=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;t.cleanUrl=function(e,t,r){if(e){var n=void 0;try{n=decodeURIComponent(s(r)).replace(d,"").toLowerCase()}catch(e){return null}if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}t&&!p.test(r)&&(r=v(t,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch(e){return null}return r};var h={},y=/^[^:]+:\/*[^/]*$/,b=/^([^:]+:)[\s\S]*$/,m=/^([^:]+:\/*[^/]*)[\s\S]*$/;function v(e,t){h[" "+e]||(y.test(e)?h[" "+e]=e+"/":h[" "+e]=g(e,"/",!0));var r=-1===(e=h[" "+e]).indexOf(":");return"//"===t.substring(0,2)?r?t:e.replace(b,"$1")+t:"/"===t.charAt(0)?r?t:e.replace(m,"$1")+t:e+t}function g(e,t,r){var n=e.length;if(0===n)return"";for(var o=0;o<n;){var a=e.charAt(n-o-1);if(a!==t||r){if(a===t||!r)break;o++}else o++}return e.slice(0,n-o)}t.resolveUrl=v,t.noopTest={exec:function(){}},t.splitCells=function(e,t){var r=e.replace(/\|/g,(function(e,t,r){for(var n=!1,o=t;--o>=0&&"\\"===r[o];)n=!n;return n?"|":" |"})).split(/ \|/),n=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;n<r.length;n++)r[n]=r[n].trim().replace(/\\\|/g,"|");return r},t.rtrim=g,t.findClosingBracket=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var r=e.length,n=0,o=0;o<r;o++)if("\\"===e[o])o++;else if(e[o]===t[0])n++;else if(e[o]===t[1]&&--n<0)return o;return-1},t.checkDeprecations=function(e,t){e&&!e.silent&&(t&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(e.sanitize||e.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(e.highlight||"language-"!==e.langPrefix)&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),e.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),e.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),e.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),e.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(e.headerIds||e.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};function o(e){if(e.startsWith("var"))return[e,void 0];var t=e.split(/,/g);if(t.length<=2)return t;var r=e.split(/\)\s*?,/);return r.length<2?r:[r[0]+")",r[1]]}Object.defineProperty(t,"__esModule",{value:!0}),t.isGradientColor=t.toPersistentColor=t.toVisualColor=t.getColorArray=t.ColorMap=t.LIGHT_GRADIENT_COLORS=t.DARK_GRADIENT_COLORS=void 0,t.DARK_GRADIENT_COLORS=[["rgb(154, 240, 212),rgb(114, 191, 244)","rgb(112, 220, 254),rgb(252, 113, 245)","rgb(255, 104, 91),rgb(255, 134, 217)","rgb(255, 133, 114),rgb(255, 215, 124)"]],t.LIGHT_GRADIENT_COLORS=[["rgb(42, 188, 191),rgb(56, 54, 221)","rgb(34, 73, 254),rgb(199, 74, 168)","rgb(255, 111, 4),rgb(243, 48, 171)","rgb(244, 170, 6),rgb(229, 70, 49)"]],t.ColorMap={},t.DARK_GRADIENT_COLORS[0].forEach((function(e,r){t.ColorMap[e]=t.LIGHT_GRADIENT_COLORS[0][r],t.ColorMap[t.LIGHT_GRADIENT_COLORS[0][r]]=e})),t.getColorArray=o,t.toVisualColor=function(e,r){if(!e)return e;if(t.ColorMap[e])return r.isDark()?t.ColorMap[e]:e;if(e.includes(",")){var a=n(o(e),2),i=a[0],u=a[1],l=r.toVisualValue(i);return u&&(l="".concat(l,",").concat(r.toVisualValue(u))),l}return r.toVisualValue(e)},t.toPersistentColor=function(e,r){if(t.ColorMap[e])return r.isDark()?t.ColorMap[e]:e;if(e.includes(",")){var a=n(o(e),2),i=a[0],u=a[1],l=r.toPersistentValue(i);return u&&(l="".concat(l,",").concat(r.toPersistentValue(u))),l}return r.toPersistentValue(e)},t.isGradientColor=function(e){return void 0!==o(e)[1]}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IColorKernelService=void 0;var a=r(3453),i=r(3761),u=r(3637),l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,i.unwrapID)(t.ID)}),Object.defineProperty(r,"colorDisableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,i.wrapID)(u.pluginRegister.service.IColorKernelService)}),t}(a.KernelAbstractService);t.IColorKernelService=l},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CardType=t.CARD_TYPE_BLOCK=t.CARD_TYPE_INLINE=void 0,t.CARD_TYPE_INLINE="inline",t.CARD_TYPE_BLOCK="block",t.CardType=((n={})[t.CARD_TYPE_INLINE]=t.CARD_TYPE_INLINE,n[t.CARD_TYPE_BLOCK]=t.CARD_TYPE_BLOCK,n)},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LOCAL_DOC_ACCEPT_KEY_MAP=t.ACCEPT_KEY_LOCAL_DOC=t.ACCEPT_KEY_UPLOAD=t.ACCEPT_KEY_PDF=t.ACCEPT_KEY_DESIGN=t.ACCEPT_KEY_MIND=t.ACCEPT_KEY_MAC_OFFICE=t.ACCEPT_KEY_MS_OFFICE=void 0,t.ACCEPT_KEY_MS_OFFICE="ms-office",t.ACCEPT_KEY_MAC_OFFICE="mac-office",t.ACCEPT_KEY_MIND="mind",t.ACCEPT_KEY_DESIGN="desgin",t.ACCEPT_KEY_PDF="pdf",t.ACCEPT_KEY_UPLOAD="upload",t.ACCEPT_KEY_LOCAL_DOC="localdoc",t.LOCAL_DOC_ACCEPT_KEY_MAP=((n={})[t.ACCEPT_KEY_MS_OFFICE]=[],n[t.ACCEPT_KEY_MAC_OFFICE]=[],n[t.ACCEPT_KEY_MIND]=[],n[t.ACCEPT_KEY_DESIGN]=[],n[t.ACCEPT_KEY_PDF]=[],n[t.ACCEPT_KEY_UPLOAD]=[],n[t.ACCEPT_KEY_LOCAL_DOC]=[],n)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"file",cardName:"localdoc",command:{insertFile:"insertFile"},toolbar:"note-file",cardSelect:{file:"file",localFile:"localFile",localDoc:"localDoc",uploadForLocalDoc:"uploadForLocalDoc",officeForLocalDoc:"officeForLocalDoc",macOfficeForLocalDoc:"macOfficeForLocalDoc",mindForLocalDoc:"mindForLocalDoc",designForLocalDoc:"designForLocalDoc",pdfForLocalDoc:"pdfForLocalDoc"},service:{fileKernelService:"IFileKernelService"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mimeMap=void 0,t.mimeMap={"image/jpeg":["jpeg","jpg","jpe"],"image/png":["png"],"image/gif":["gif"],"image/vnd.wap.wbmp":["wbmp"],"image/tiff":["tiff","tiff"],"image/vnd.adobe.photoshop":["psd"],"image/svg+xml":["svg","svgz"],"text/jsx":["jsx"],"text/less":["less"],"text/css":["css"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/csv":["csv"],"text/xml":["xml"],"text/x-vcard":["vcf"],"text/x-vcalendar":["vcs"],"text/markdown":["md"],"text/plain":["txt"],"text/richtext":["rtx"],"text/rtf":["rtf"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/javascript":["js"],"text/yaml":["yaml","yml"],"audio/mp3":["mp3"],"audio/mp4":["mp4","mp4a"],"video/mp4":["mp4"],"audio/mpeg":["mpeg","mp2","mp3"],"audio/ogg":["oga"],"audio/wav":["wav"],"audio/wave":["wav"],"audio/webm":["weba"],"video/x-msvideo":["avi"],"video/quicktime":["mov","qt"],"video/ogg":["ogv"],"video/x-sgi-movie":["movie"],"application/rss+xml":["rss"],"application/json":["json"],"application/zip":["zip"],"application/gzip":["gzip"],"application/pdf":["pdf"],"application/postscript":["ai","eps","ps"],"application/msword":["doc","dot"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.ms-fontobject":["eot"],"application/vnd.android.package-archive":["apk"],"application/x-apple-diskimage":["dmg"],"application/x-iwork-keynote-sffkey":["key"],"application/x-iwork-pages-sffpages":["pages"],"application/x-iwork-keynote-sffnumbers":["numbers"],"application/x-iwork-numbers-sffnumbers":["numbers"]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultAcceptUtil=void 0;var n=r(3454),o=r(4217);t.defaultAcceptUtil={getAttachmentFileAccept:function(e){return[]},getImageFileAccept:function(e){return[]},getAudioFileAccept:function(e){return[]},getVideoFileAccept:function(e){return[]},getLocalDocFileAccept:function(e,t){return(0,n.assert)(t in o.LOCAL_DOC_ACCEPT_KEY_MAP,"plugins/upload/src/public/default-accept-util.ts:52"),[]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"focus",command:{focus:"focus"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_FONTSIZE=t.MIN_FONTSIZE=void 0;var n=r(3453);t.MIN_FONTSIZE=12,t.MAX_FONTSIZE=48;var o={targets:[n.Category.Text,n.Category.InlineCard],values:function(e){var r=Number(e);return r>=t.MIN_FONTSIZE&&r<=t.MAX_FONTSIZE}};t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3472),i=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("IFontsizeService")}),t}(r(3475).KernelAbstractService);t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUnit=t.convertToPx=t.pc2pt=t.q2pt=t.mm2pt=t.cm2pt=t.pt2px=t.in2pt=void 0;var n=96,o=72,a=1/2.54,i=.1*a,u=/([a-zA-Z]+)\s*$/;function l(e){return e*o}function c(e,t){return void 0===t&&(t=n),e*t/o}function s(e){return l(e*a)}function f(e){return l(e*i)}function d(e){return l(.00984251968503937*e)}function p(e){return 12*e}t.in2pt=l,t.pt2px=c,t.cm2pt=s,t.mm2pt=f,t.q2pt=d,t.pc2pt=p;var h={PC:p,CM:s,MM:f,IN:l,Q:d,PT:function(e){return e}};t.convertToPx=function(e,t,r){return void 0===r&&(r=n),t=t.toUpperCase(),h[t]?c(h[t](e),r):"PX"===t?e:null},t.getUnit=function(e){var t=e.match(u);return t&&t[1]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fontSizeNormal=t.FONT_SIZE_LIST=void 0;t.FONT_SIZE_LIST=[12,13,14,15,16,19,22,24,29,32,40,48],t.fontSizeNormal=function(e){if(isNaN(e)||e<=0)return null;if(e>=48)return 48;if(e<=12)return 12;for(var r=0,n=t.FONT_SIZE_LIST.length-1;n>r;)Math.abs(e-t.FONT_SIZE_LIST[r])<=Math.abs(e-t.FONT_SIZE_LIST[n])?n--:r++;return t.FONT_SIZE_LIST[n]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LAKE_FONTSIZE_MAPPING=void 0,t.LAKE_FONTSIZE_MAPPING={9:12,10:13,11:14,12:16,14:19,16:22,18:24,22:29,24:32,30:40,36:48,1515:15}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IFormatKernelService=void 0;var a=r(3472),i=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("IFormatKernelService")}),t}(r(3475).KernelAbstractService);t.IFormatKernelService=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"formatPainter",command:{paintFormat:"paintFormat"},toolbar:"formatPainter"})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeadingKeepTextAttrs=void 0,t.HeadingKeepTextAttrs=["color","bgColor","indexType"]},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3472),i=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("IHeadingKernelService")}),t}(r(3475).KernelAbstractService);t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._INodeContext=void 0;var n=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_parentNode",{enumerable:!0,configurable:!0,writable:!0,value:null})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"from",{get:function(){var e;return null===(e=this._option)||void 0===e?void 0:e.from},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"self",{get:function(){var e;return null===(e=this._option)||void 0===e?void 0:e.self},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this._parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!this._state[e]}}),Object.defineProperty(e.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._state[e]}}),Object.defineProperty(e.prototype,"setState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._state[e]=t}}),e}();t._INodeContext=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"hr",cardName:"hr",command:{hr:"hr"},toolbar:"hr",cardSelect:"hr"})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4698)),l=r(4699),c=r(4021),s=a(r(4700)),f=a(r(4706)),d=r(4708),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_dataSource",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"htmlReader",{enumerable:!0,configurable:!0,writable:!0,value:new s.default(t.option)}),Object.defineProperty(t,"htmlWriter",{enumerable:!0,configurable:!0,writable:!0,value:new f.default}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._dataSource=new u.default(e),e.registerDataSource("text/html",this._dataSource),e.registerReader("text/html",this.htmlReader),e.registerWriter("text/html",this.htmlWriter)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.destroy.call(this),this.htmlReader.destroy(),this.htmlWriter.destroy()}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:d.HtmlDataSourceKernelOption}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:l.HTMLKernelService}),t}(i.KernelPlugin);t.default=p},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.parseToNodeTree=void 0;var a=r(3799),i=r(3849),u=r(4705);function l(e){var t={};return e?(e.toLowerCase().split(";").forEach((function(e){var r=e.split(":"),n=r[0].trim(),o=(2===r.length?r[1]:r.slice(1).join(":")).trim();n&&o&&(t[n]=o)})),t):t}t.parseToNodeTree=function(e){var t=0,r={children:[]},c=!1;e=e.replace(/<code[^>]*?>[\s\S]+?<\/code>/g,(function(e){return e.replace(/\n/g,"")})).replace(/<pre[^>]*?>[\s\S]+?<\/pre>/g,(function(e){return e.replace(/\n/g,"")})).replace(/\n+/g," ").replace(/<\/br[^>]*?>/g,"").replace(/\uf001/g,"\n").replace(/<br[^>]*?>/g,"\n");var s={},f=new a.Parser({onopentag:function(e,o){if(i.HTMLExcludeTags[e])t++;else if(t)t++;else if("style"!==e){var a=l(o.style),u=n(n(n({},s[e]||{}),s["."+o.class]||{}),a);if("none"!==u.display){delete o.style;var f={type:"element",name:e,attrs:o,style:u,children:[],parent:r};r.children.push(f),r=f}else t++}else c=!0},ontext:function(e){var n,a;if(!t&&(e=e.replace(/\u200b/g,"")))if(c){var i=(e=e.replace(/[\r\t\n]/g,"")).matchAll(/([\.|@]?[\w\d]+)\s?{([^}]*)}/g);try{for(var f=o(i),d=f.next();!d.done;d=f.next()){var p=d.value,h=p[1],y=p[2];"string"==typeof h&&"string"==typeof y&&(s[h]=l(y))}}catch(e){n={error:e}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(n)throw n.error}}}else{r.children||(r.children=[]);var b=r.children[r.children.length-1];(null==b?void 0:b.name)===u.TEXT_NODE_NAME?b.data+=e:r.children.push({name:u.TEXT_NODE_NAME,data:e,parent:r,type:"text"})}},onclosetag:function(e){t?t--:"style"!==e?r=r.parent:c=!1}},{decodeEntities:!0,lowerCaseTags:!0,lowerCaseAttributeNames:!0});return f.write(e),f.end(),r.children}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.genericNodeIndent=t.genericIndent=void 0;var o=r(3453),a=r(3561),i=r(4236),u=r(4022);function l(e,t){if("number"==typeof e||"number"==typeof t)return"number"!=typeof t?e+1>u.MAX_INDENT?u.MAX_INDENT:e+1:t<0?0:t>u.MAX_INDENT?u.MAX_INDENT:t}function c(e,t,r,i){var u=t.nodeName,c=t.attrs,s=void 0===c?{}:c,f=s,d=f.level,p=void 0===d?0:d,h=f.indent,y=void 0===h?0:h;if(r&&e.acceptAttr(u,"textIndent",!0)&&!s.textIndent)e.setAttribute(t,"textIndent",!0);else{var b=l(p,i);if("number"==typeof b)if(e.acceptAttrName(u,"level"))0===b?e.removeAttribute(t,"level"):e.acceptAttr(u,"level",b)&&e.setAttribute(t,"level",b);else{var m=l(y,i);"number"==typeof m&&(t.hasCategory([o.Category.Hole,o.Category.TableHole])&&t.firstChild&&!e.acceptAttrName(t.firstChild.nodeName,"hindent")||e.acceptAttrName(u,"indent")&&(0===m?(e.removeAttribute(t,"indent"),function(e,t){t.hasCategory([o.Category.Hole,o.Category.TableHole])&&t.firstChild&&e.removeAttribute(t.firstChild,"hindent")}(e,t)):e.acceptAttr(u,"indent",m)&&(e.setAttribute(t,"indent",m),function(e,t,r){var i;t.hasCategory([o.Category.Hole,o.Category.TableHole])&&t.firstChild&&e.acceptAttr(t.firstChild.nodeName,"hindent",r)&&(e.setAttribute(t.firstChild,"hindent",r),t.firstChild.hasCategory(o.Category.BlockCard)&&(null===(i=t.firstChild.attrs)||void 0===i?void 0:i.value)?e.setAttribute(t.firstChild,"value",n(n({},t.firstChild.attrs.value),{__widthMode:a.WIDTH_MODE_NORMAL})):e.removeAttribute(t.firstChild,"widthMode"))}(e,t,m))))}}}t.genericIndent=function(e,t,r,n){if(t.collapsed){var a=(0,i.getTargetNode)(t.firstRange.start.node);if(!a)return;c(e,a,r,n)}else o.SelectionUtil.fullWalkSelection(t,{enter:function(t){c(e,t,!1,n)}})},t.genericNodeIndent=function(e,t,r){var n=(0,i.getTargetNode)(t);if(n)return c(e,n,!1,r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTargetNode=void 0;var n=r(3453);t.getTargetNode=function(e){var t,r=n.NodeUtil.closest(e,[n.Category.Hole,n.Category.TableHole,n.Category.Brick]);return r?(null===(t=r.parent)||void 0===t?void 0:t.hasCategory([n.Category.TableHole,n.Category.Hole]))?r.parent:r:null}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(4238)),u=35,l=48,c=49,s=50,f=51,d=52,p=53,h=54,y=55,b=56,m=57,v=65,g=97,_=66,w=98,O=67,E=99,P=68,j=100,C=69,k=101,S=70,A=102,x={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},N=function(){function e(){}return Object.defineProperty(e,"fromHex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.length;if(![4,7,9].includes(t))return null;if(e.charCodeAt(0)!==u)return null;if(4===t){var r=16*T(e.charCodeAt(1))+T(e.charCodeAt(1)),n=16*T(e.charCodeAt(2))+T(e.charCodeAt(2)),o=16*T(e.charCodeAt(3))+T(e.charCodeAt(3));return new i.RGBAColor(r,n,o)}if(7===t){r=16*T(e.charCodeAt(1))+T(e.charCodeAt(2)),n=16*T(e.charCodeAt(3))+T(e.charCodeAt(4)),o=16*T(e.charCodeAt(5))+T(e.charCodeAt(6));return new i.RGBAColor(r,n,o)}if(9===t){r=16*T(e.charCodeAt(1))+T(e.charCodeAt(2)),n=16*T(e.charCodeAt(3))+T(e.charCodeAt(4)),o=16*T(e.charCodeAt(5))+T(e.charCodeAt(6));var a=Number.parseInt(e.slice(-2),16)/255;return new i.RGBAColor(r,n,o,a)}return null}}),Object.defineProperty(e,"fromRGBA",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!(e=e.trim().toLowerCase()).startsWith("rgba(")&&!e.endsWith(")"))return null;var t=(e=e.replace(/^rgba\(|\)$/g,"")).split(/,/g);if(4!==t.length)return null;try{var r=parseInt(t[0].trim(),10),n=parseInt(t[1].trim(),10),o=parseInt(t[2].trim(),10),a=parseFloat(t[3].trim());return new i.RGBAColor(r,n,o,a)}catch(e){return null}}}),Object.defineProperty(e,"fromRGB",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!(e=e.trim().toLowerCase()).startsWith("rgb(")&&!e.endsWith(")"))return null;var t=(e=e.replace(/^rgb\(|\)$/g,"")).split(/,/g);if(3!==t.length)return null;try{var r=parseInt(t[0].trim(),10),n=parseInt(t[1].trim(),10),o=parseInt(t[2].trim(),10);return new i.RGBAColor(r,n,o)}catch(e){return null}}}),Object.defineProperty(e,"fromHSL",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!(e=e.trim().toLowerCase()).startsWith("hsl(")&&!e.endsWith(")"))return null;var t=(e=e.replace(/^hsl\(|\)$/g,"")).split(/,/g);if(3!==t.length)return null;try{var r=parseInt(t[0].trim(),10),n=parseInt(t[1].trim(),10),o=parseInt(t[2].trim(),10);return new i.HSLAColor(r%360,n/100,o/100,1)}catch(e){return null}}}),Object.defineProperty(e,"fromHSLA",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!(e=e.trim().toLowerCase()).startsWith("hsla(")&&!e.endsWith(")"))return null;var t=(e=e.replace(/^hsla\(|\)$/g,"")).split(/,/g);if(4!==t.length)return null;try{var r=parseInt(t[0].trim(),10),n=parseInt(t[1].trim(),10),o=parseInt(t[2].trim(),10),a=parseFloat(t[3].trim());return new i.HSLAColor(r%360,n/100,o/100,a)}catch(e){return null}}}),Object.defineProperty(e,"parse",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e=e.toLowerCase(),x[e]?i.default.from(this.fromHex(x[e])):i.default.colorMap[e]?i.default.colorMap[e]:e.startsWith("#")?i.default.from(this.fromHex(e)):e.startsWith("rgba")?i.default.from(this.fromRGBA(e)):e.startsWith("hsla")?i.default.from(this.fromHSLA(e)):e.startsWith("rgb")?i.default.from(this.fromRGB(e)):e.startsWith("hsl")?i.default.from(this.fromHSL(e)):null}}),e}();function T(e){switch(e){case l:return 0;case c:return 1;case s:return 2;case f:return 3;case d:return 4;case p:return 5;case h:return 6;case y:return 7;case b:return 8;case m:return 9;case g:case v:return 10;case w:case _:return 11;case E:case O:return 12;case j:case P:return 13;case k:case C:return 14;case A:case S:return 15;default:return 0}}t.default=N},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.HSLAColor=t.RGBAColor=t.RGBColor=void 0;var a=r(3454);function i(e,t){return t=Math.pow(10,t),Math.round(e*t)/t}function u(e){return i(Math.max(0,Math.min(1,e)),3)}var l=function(){function e(e,t,r){Object.defineProperty(this,"r",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"g",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rgbHEX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.r=e,this.g=t,this.b=r}return Object.defineProperty(e.prototype,"getRelativeLuminance",{enumerable:!1,configurable:!0,writable:!0,value:function(){return i(.2126*e._relativeLuminanceForComponent(this.r)+.7152*e._relativeLuminanceForComponent(this.g)+.0722*e._relativeLuminanceForComponent(this.b),4)}}),Object.defineProperty(e,"_relativeLuminanceForComponent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}}),Object.defineProperty(e.prototype,"_toTwoHex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.toString(16);return 2===t.length?t:"0"+t}}),Object.defineProperty(e.prototype,"toRGBHex",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._rgbHEX||(this._rgbHEX="#".concat(this._toTwoHex(this.r)).concat(this._toTwoHex(this.g)).concat(this._toTwoHex(this.b))),this._rgbHEX}}),Object.defineProperty(e.prototype,"toHEX",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.toRGBHex()}}),Object.defineProperty(e.prototype,"toCSSValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.toRGBHex()}}),e}();t.RGBColor=l;var c=function(e){function t(t,r,n,o){void 0===o&&(o=1);var a=e.call(this,t,r,n)||this;return Object.defineProperty(a,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_cssValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.a=o,a}return o(t,e),Object.defineProperty(t.prototype,"toHEX",{enumerable:!1,configurable:!0,writable:!0,value:function(){return e.prototype.toHEX.call(this)+this._toTwoHex(Math.round(255*this.a))}}),Object.defineProperty(t.prototype,"toCSSValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cssValue||(this.a+this.b+this.r+this.g===0&&(this._cssValue="transparent"),1===this.a?this._cssValue=e.prototype.toCSSValue.call(this):this._cssValue="rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.a,")")),this._cssValue}}),t}(l);t.RGBAColor=c;var s=function(){function e(e,t,r,n){void 0===n&&(n=1),Object.defineProperty(this,"h",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"s",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"l",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.h=0|Math.max(Math.min(360,e),0),this.s=u(t),this.l=u(r),this.a=u(n)}return Object.defineProperty(e,"equals",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}}),Object.defineProperty(e,"fromRGB",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){void 0===r&&(r=1);var n=t.r/255,o=t.g/255,a=t.b/255,i=Math.max(n,o,a),u=Math.min(n,o,a),l=0,c=0,s=(u+i)/2,f=i-u;if(f>0){switch(c=Math.min(s<=.5?f/(2*s):f/(2-2*s),1),i){case n:l=(o-a)/f+(o<a?6:0);break;case o:l=(a-n)/f+2;break;case a:l=(n-o)/f+4}l*=60,l=Math.round(l)}return new e(l,c,s,r)}}),Object.defineProperty(e,"fromRGBA",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.fromRGB(e,e.a)}}),Object.defineProperty(e,"_hue2rgb",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}}),Object.defineProperty(e,"toRGBA",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r,n,o,a=t.h/360,i=t.s,u=t.l,l=t.a;if(0===i)r=n=o=u;else{var s=u<.5?u*(1+i):u+i-u*i,f=2*u-s;r=e._hue2rgb(f,s,a+1/3),n=e._hue2rgb(f,s,a),o=e._hue2rgb(f,s,a-1/3)}return new c(Math.round(255*r),Math.round(255*n),Math.round(255*o),l)}}),Object.defineProperty(e.prototype,"toRGBA",{enumerable:!1,configurable:!0,writable:!0,value:function(){return e.toRGBA(this)}}),Object.defineProperty(e.prototype,"invert",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new e(this.h,this.s,1-this.l,this.a)}}),Object.defineProperty(e.prototype,"toCSSValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.toRGBA().toCSSValue()}}),e}();t.HSLAColor=s;var f=function(){function e(e){Object.defineProperty(this,"_rgba",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_hsla",{enumerable:!0,configurable:!0,writable:!0,value:null}),e instanceof l?this._rgba=e:this._hsla=e}return Object.defineProperty(e,"from",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t?new e(t):null}}),Object.defineProperty(e.prototype,"rgba",{get:function(){return this._rgba||((0,a.assert)(this._hsla,"framework/utils/src/color/color.ts:251"),this._rgba=this._hsla.toRGBA()),this._rgba},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hsla",{get:function(){return this._hsla||((0,a.assert)(this._rgba,"framework/utils/src/color/color.ts:259"),this._hsla=s.fromRGBA(this._rgba)),this._hsla},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"a",{get:function(){var e,t;return(null===(e=this._hsla)||void 0===e?void 0:e.a)||(null===(t=this._rgba)||void 0===t?void 0:t.a)||1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"r",{get:function(){return this.rgba.r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return this.rgba.g},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return this.rgba.b},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"h",{get:function(){return this.hsla.h},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"s",{get:function(){return this.hsla.s},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"l",{get:function(){return this.hsla.l},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toCSSValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.rgba.toCSSValue()}}),Object.defineProperty(e.prototype,"lighten",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return new e(new s(this.h,this.s,this.l+this.l*t,this.a))}}),Object.defineProperty(e.prototype,"darken",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return new e(new s(this.h,this.s,this.l-this.l*t,this.a))}}),Object.defineProperty(e.prototype,"transparent",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=this.rgba,n=r.r,o=r.g,a=r.b,i=r.a;return new e(new c(n,o,a,i*t))}}),Object.defineProperty(e.prototype,"invert",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new e(this.hsla.invert())}}),Object.defineProperty(e.prototype,"isTransparent",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 0===this.a}}),Object.defineProperty(e.prototype,"isOpaque",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 1===this.a}}),Object.defineProperty(e.prototype,"blend",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=t.rgba,n=this.rgba.a,o=r.a,a=n+o*(1-n);if(a<1e-6)return e.transparent;var i=this.rgba.r*n/a+r.r*o*(1-n)/a,u=this.rgba.g*n/a+r.g*o*(1-n)/a,l=this.rgba.b*n/a+r.b*o*(1-n)/a;return new e(new c(i,u,l,a))}}),Object.defineProperty(e.prototype,"getRelativeLuminance",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.rgba.getRelativeLuminance()}}),Object.defineProperty(e.prototype,"isLighterThan",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.getRelativeLuminance()>e.getRelativeLuminance()}}),Object.defineProperty(e.prototype,"isDarkerThan",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.getRelativeLuminance()<e.getRelativeLuminance()}}),Object.defineProperty(e,"transparent",{enumerable:!0,configurable:!0,writable:!0,value:new e(new c(0,0,0,0))}),Object.defineProperty(e,"white",{enumerable:!0,configurable:!0,writable:!0,value:new e(new c(255,255,255,1))}),Object.defineProperty(e,"colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{transparent:e.transparent,white:e.white}}),e}();t.default=f},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.langEvent=t.LANG_EVENT_MAP=void 0;var o=n(r(3320));t.LANG_EVENT_MAP={CHANGE:"change"},t.langEvent=new o.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"layout",command:{layout:"layout"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"lineHeight",command:{lineHeight:"lineHeight"},toolbar:"lineHeight"})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineHeightValueMap=t.ToLakeLineHeightMap=t.FromLakeLineHeightMap=void 0,t.FromLakeLineHeightMap={1:1,115:1.15,15:1.5,2:2,25:2.5,3:3},t.ToLakeLineHeightMap={1:1,1.15:115,1.5:15,2:2,2.5:25,3:3},t.LineHeightValueMap={1:1,1.15:1.15,1.5:1.5,2:2,2.5:2.5,3:3,default:null}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3475),i=r(3472),u=r(4025),l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,i.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,i.wrapID)(u.pluginRegister.service.IKernelAssistantService)}),t}(a.KernelAbstractService);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3453),l=r(3454),c=i(r(3513)),s=r(3465),f=r(3764),d=[u.Category.Heading],p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=t?e.getNodeById(t):e.getSelection().firstRange.start.node.closest(u.Category.Block);return(null==n?void 0:n.hasCategory(d))&&null!==(r=n.attrs.indexType)&&void 0!==r?r:null}}),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(r){return e.prototype.getState.call(this,r)===s.COMMAND_UNAVAILABLE?s.COMMAND_UNAVAILABLE:t.isHeadingSelection(r.getSelection())?s.COMMAND_NOT_EXECUTED:s.COMMAND_UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r,n){var o,i;void 0===r&&(r=(0,f.getLastHeadingIndexType)());var u=e.newJob(),c=null;if(n){if(!(null==(c=u.getNodeById(n))?void 0:c.hasCategory(d)))return e.cancelJob(u),!1;if(!(null==c?void 0:c.hasCategory(d)))return e.cancelJob(u),!1;c.attrs.indexType===r?u.removeAttribute(c,"indexType"):t.setBlockNodeIndexType(u,c,r)}else{if(this.getState(u)===s.COMMAND_UNAVAILABLE)return e.cancelJob(u),!1;var p=t.isHeadingSelection(u.getSelection());l.assert.fatal(p,"plugins/list/src/kernel/commands/index-type-command.ts:82");var h=p.every((function(e){return e.attrs.indexType===r}));try{for(var y=a(p),b=y.next();!b.done;b=y.next()){var m=b.value;h?u.removeAttribute(m,"indexType"):t.setBlockNodeIndexType(u,m,r)}}catch(e){o={error:e}}finally{try{b&&!b.done&&(i=y.return)&&i.call(y)}finally{if(o)throw o.error}}}return u.setSelection(u.getSelection()),e.commitJob(u),!0}}),Object.defineProperty(t,"isHeadingSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n,o,a=e.firstRange,i=a.start,l=a.end;i.node.isRootNode()&&l.node.isRootNode()?(n=i.node.children[i.offset],o=l.node.children[l.offset]||l.node.children[l.offset-1]):(n=i.node.closest(u.Category.Block),o=l.node.closest(u.Category.Block));var c=new Set;if((null==n?void 0:n.hasCategory(u.Category.Heading))&&(null===(t=n.parent)||void 0===t?void 0:t.isRootNode())&&(null==o?void 0:o.hasCategory(u.Category.Heading))&&(null===(r=o.parentNode)||void 0===r?void 0:r.isRootNode())){var s=n;for(c.add(s);s&&s!==o;){if(c.add(s),!s.hasCategory(u.Category.Heading))return null;s=s.nextSibling}return c.add(o),Array.from(c)}return null}}),Object.defineProperty(t,"setBlockNodeIndexType",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=(0,f.getLastHeadingIndexType)()),e.setAttribute(t,"indexType",r),(0,f.setLastHeadingIndexType)(r),e.document.getNodesByCategory(u.Category.Heading).filter((function(e){var t;return e.isConnected&&(null===(t=e.parentNode)||void 0===t?void 0:t.isRootNode())})).forEach((function(n){n!==t&&"number"==typeof n.attrs.indexType&&n.attrs.indexType!==r&&e.setAttribute(n,"indexType",r)}))}}),Object.defineProperty(t,"getCurrentIndexType",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return void 0===t&&(t=(0,f.getLastHeadingIndexType)()),e.document.getNodesByCategory(u.Category.Heading).filter((function(e){var t;return e.isConnected&&(null===(t=e.parentNode)||void 0===t?void 0:t.isRootNode())})).find((function(e){return"number"==typeof e.attrs.indexType&&(t=e.attrs.indexType,!0)})),t}}),t}(c.default);t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numberToListTextForHeading=t.numberToListTextWithSymbol=t.LIST_NUMBER_TO_TEXT_NUMBER=t.LIST_NUMBER_TO_TEXT_CHINESE=t.LIST_NUMBER_TO_TEXT_DEFAULT=void 0;var n=r(4785),o=r(4786),a=r(4787);t.LIST_NUMBER_TO_TEXT_DEFAULT=0,t.LIST_NUMBER_TO_TEXT_CHINESE=1,t.LIST_NUMBER_TO_TEXT_NUMBER=2,t.default=function(e,r,i,u){return void 0===u&&(u=t.LIST_NUMBER_TO_TEXT_DEFAULT),u===t.LIST_NUMBER_TO_TEXT_DEFAULT?(0,o.defaultNumberToText)(e,r):u===t.LIST_NUMBER_TO_TEXT_CHINESE?(0,n.chineseNumberToText)(e,r):u===t.LIST_NUMBER_TO_TEXT_NUMBER?(0,a.onlyNumberToText)(e,r,i):(0,o.defaultNumberToText)(e,r)},t.numberToListTextWithSymbol=function(e,r,i,u){return void 0===u&&(u=t.LIST_NUMBER_TO_TEXT_DEFAULT),u===t.LIST_NUMBER_TO_TEXT_DEFAULT?(0,o.defaultNumberToText)(e,r)+".":u===t.LIST_NUMBER_TO_TEXT_CHINESE?(0,n.chineseNumberToTextWithSymbol)(e,r):u===t.LIST_NUMBER_TO_TEXT_NUMBER?(0,a.onlyNumberToText)(e,r,i)+".":void 0},t.numberToListTextForHeading=function(e,r,i,u){return void 0===u&&(u=t.LIST_NUMBER_TO_TEXT_DEFAULT),u===t.LIST_NUMBER_TO_TEXT_DEFAULT?(0,o.defaultNumberToText)(e,r)+". ":u===t.LIST_NUMBER_TO_TEXT_CHINESE?(0,n.chineseNumberToTextForHeading)(e,r):u===t.LIST_NUMBER_TO_TEXT_NUMBER?(0,a.onlyNumberToText)(e,r,i)+". ":void 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"mark",node:{mark:"mark"},domNode:{mark:"ne-mark","mark-content":"ne-mark-content"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"markdownPasteParse",command:{markdownPasteParse:"markdownPasteParse"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"quickInput",service:{IQuickInputKernelService:"IQuickInputKernelService",IQuickInputRendererService:"IQuickInputRendererService"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"save",command:{save:"save"},toolbar:{save:"save"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"selection",command:{selection:"selection"},service:{ISelectionRenderService:"ISelectionRenderService"}})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3513),u=r(3465),l=r(4031),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(e.prototype.getState.call(this,t)===u.COMMAND_UNAVAILABLE)return u.COMMAND_UNAVAILABLE;var r=t.getSelection();if(!r.isCollapsed)return u.COMMAND_UNAVAILABLE;var n=r.firstRange.start.node;return n.closest(a.Category.OnlyText)?u.COMMAND_UNAVAILABLE:n.closest([a.Category.Block])||n.hasCategory([a.Category.Root,a.Category.LikeRoot])?u.COMMAND_NOT_EXECUTED:u.COMMAND_UNAVAILABLE}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.canInsertSlash}),t}(i.GeneralCommandV2);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3513),l=r(3465),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"commandName",{enumerable:!0,configurable:!0,writable:!0,value:""}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(e.prototype.getState.call(this,t)===l.COMMAND_UNAVAILABLE)return l.COMMAND_UNAVAILABLE;var r=t.getSelection().firstRange,n=r.commonAncestorContainer;if(r.collapsed){if(!n.hasCategory([i.Category.Root,i.Category.LikeRoot])&&!r.commonAncestorContainer.closest(i.Category.Block))return l.COMMAND_UNAVAILABLE}else if(!r.commonAncestorContainer.closest(i.Category.Block))return l.COMMAND_UNAVAILABLE;var o=null,u=this.commandName;return a.RangeUtil.fullWalkRange(r,{enter:function(e){if(!1===o)return!1;if(t.acceptAttr(e.nodeName,u,!0)){if(!e.hasAttribute(u))return o=!1,!1;null===o&&(o=!0)}}}),!0===o?l.COMMAND_EXECUTED:l.COMMAND_NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob(),r=this.getState(t);if(r===l.COMMAND_UNAVAILABLE)return e.cancelJob(t),!1;var n=t.getSelection(),o=t.getSelection().firstRange;return o=r===l.COMMAND_NOT_EXECUTED?a.RangeUtil.setAttribute(t,o,this.commandName,!0):a.RangeUtil.removeAttribute(t,o,this.commandName),o=a.RangeUtil.removeAttribute(t,o,"sub"===this.commandName?"sup":"sub"),t.setSelection(n.cloneByRange(o)),!0}}),t}(u.GeneralCommandV2);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4872),o=r(3723),a=function(){function e(e){Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_rowCount",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_colCount",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_widthList",{enumerable:!0,configurable:!0,writable:!0,value:[]});var t=e.row,r=e.col,o=e.width;this._width=o,this._rowCount=t,this._colCount=r,this._widthList=(0,n.calcAverage)(o,r)}return Object.defineProperty(e.prototype,"toNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=e.createElement(o.TABLE,{rowCount:this._rowCount,colCount:this._colCount,colWidths:this._widthList}),r=0;r<this._rowCount;r++){for(var n=e.createElement(o.TABLE_ROW),a=0;a<this._colCount;a++){var i=e.createElement(o.TABLE_CELL,{col:a});e.appendChild(n,i)}e.appendChild(t,n)}return t}}),e}(),i=function(){function e(){}return Object.defineProperty(e,"instance",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return void 0===t&&(t=3),void 0===r&&(r=3),new a({width:e,row:t,col:r})}}),e}();t.default=i},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.reLayout=void 0;var i=r(3454),u=a(r(3724));function l(e,t,r,n,o,a){var u=t.parentNode.offset,l=t.attrs.col;if(i.assert.fatal(u>=0&&u<o&&l>=0&&l<a,"plugins/table/src/kernel/commands/helpers/re-layout.ts:128"),u!==r){var c=r-u+1;i.assert.fatal(c>1,"plugins/table/src/kernel/commands/helpers/re-layout.ts:137"),e.setAttribute(t,"rowSpan",c)}if(l!==n){var s=n-l+1;i.assert.fatal(s>1,"plugins/table/src/kernel/commands/helpers/re-layout.ts:143"),e.setAttribute(t,"colSpan",s)}}t.reLayout=function(e,t,r){var a,c,s,f,d=r.length,p=r[0].length,h=new Map,y=new Map,b=[];r.forEach((function(r,n){var o=null,a=t.children[n],l=r.map((function(t,r){var l=t.type,c=t.node;if(l===u.default.TYPE_REF){if(c.isConnected)return h.set(c,{rowIndex:n,colIndex:r}),{type:l,node:c};if(!y.has(c)){var s=e.createElement("td",{col:r});return o?e.insertAfter(a,s,o):e.prependChild(a,s),o=s,y.set(c,{mainNode:s,rowIndex:n,colIndex:r}),{type:u.default.TYPE_NODE,node:s}}var f=y.get(c);return i.assert.fatal(f.mainNode,"plugins/table/src/kernel/commands/helpers/re-layout.ts:73"),y.set(c,{mainNode:f.mainNode,rowIndex:n,colIndex:r}),{type:u.default.TYPE_REF,node:f.mainNode}}return e.setAttribute(c,"col",r),e.removeAttribute(c,"rowSpan"),e.removeAttribute(c,"colSpan"),o=c,i.assert.fatal(o.parentNode===a,"plugins/table/src/kernel/commands/helpers/re-layout.ts:94"),{type:l,node:c}}));b.push(l)}));try{for(var m=n(h),v=m.next();!v.done;v=m.next()){var g=o(v.value,2),_=g[0],w=g[1],O=w.rowIndex,E=w.colIndex;l(e,_,O,E,d,p)}}catch(e){a={error:e}}finally{try{v&&!v.done&&(c=m.return)&&c.call(m)}finally{if(a)throw a.error}}try{for(var P=n(y),j=P.next();!j.done;j=P.next()){var C=o(j.value,2)[1],k=C.mainNode;O=C.rowIndex,E=C.colIndex;l(e,k,O,E,d,p)}}catch(e){s={error:e}}finally{try{j&&!j.done&&(f=P.return)&&f.call(P)}finally{if(s)throw s.error}}return b}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toFilterFunction=t.isInputEvent=t.isDOMHTMLElement=t.isDOMTextNode=void 0,t.isDOMTextNode=function(e){return!!e&&e.nodeType===Node.TEXT_NODE},t.isDOMHTMLElement=function(e){return(null==e?void 0:e.nodeType)===Node.ELEMENT_NODE},t.isInputEvent=function(e){return"input"===e.type},t.toFilterFunction=function(e){return e}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneChild=void 0,t.cloneChild=function e(t,r,o){var a,i;if(t&&r&&o&&r.children&&0!==r.children.length)try{for(var u=n(r.children),l=u.next();!l.done;l=u.next()){var c=l.value;if(c){if(c.nodeName===t.defaultElementName){var s=t.createElement(t.defaultElementName,c._attrs||{});return t.appendChild(o,s),e(t,c,s)}if(c.isTextNode())return void t.appendChild(o,t.createTextNode("",c._attrs||{}))}}}catch(e){a={error:e}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4923)),l=a(r(4924)),c=r(4925),s=a(r(4926)),f=a(r(4927)),d=r(3926),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_dataSource",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(t,"_readerManager",{enumerable:!0,configurable:!0,writable:!0,value:new s.default}),Object.defineProperty(t,"_textWriterManager",{enumerable:!0,configurable:!0,writable:!0,value:new f.default}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this._dataSource=new l.default(e),e.registerDataSource("text/plain",this._dataSource),e.registerReader("text/plain",this._readerManager),e.registerWriter("text/plain",this._textWriterManager),e.extendMethods({registerTextReader:function(e){t._readerManager.register(e)}}),e.extendMethods({registerTextWriter:function(e,r){t._textWriterManager.register(e,r)}})}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._dataSource.destroy(),this._readerManager.destroy(),this._textWriterManager.destroy(),e.prototype.destroy.call(this)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:d.pluginRegister.pluginName}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:c.TextDataSourceKernelService}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u.default]}),t}(i.KernelPlugin);t.default=p},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(4191)),a={LOCAL_STORAGE_KEY:"lake-codeblock",load:function(){var e=null,t=o.default.getItem(this.LOCAL_STORAGE_KEY);if(t)try{e=JSON.parse(t)}catch(e){console.log("invalid data:",t)}return e},save:function(e){var t={mode:e.mode,autoWrap:e.autoWrap,theme:e.theme,indentWithTab:e.indentWithTab,lineNumbers:e.lineNumbers,hideToolbar:e.hideToolbar};o.default.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(t))},clear:function(){var e;null===(e=o.default.removeItem)||void 0===e||e.call(o.default,this.LOCAL_STORAGE_KEY)}};t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3472),i=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t.prototype,"isText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"text"===e.klass}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("IAoneService")}),t}(r(3475).KernelAbstractService);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(3464)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,u.default)({},t.DefaultCardValue,e)}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return a({},e)}}),Object.defineProperty(t.prototype,"setUserInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.login,r=e.nickName,n=e.name,o=e.userid;this._cardValue.login=t,this._cardValue.nickName=r,this._cardValue.name=n,this._cardValue.userid=o}}),Object.defineProperty(t.prototype,"getUserInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{login:this._cardValue.login,nickName:this._cardValue.nickName,name:this._cardValue.name,userid:this._cardValue.userid}}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{login:void 0,nickName:void 0,name:void 0,userid:void 0}}),t}(i(r(3512)).default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskType=t.Status=void 0,t.Status={Pending:"pending",Uploading:"uploading",Uploaded:"uploaded",Done:"done",Error:"error"},t.TaskType={Upload:"upload"}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(97)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return{code:e.code,url:e.src}}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return{code:(0,u.default)(e,"code"),src:(0,u.default)(e,"url")}}}),Object.defineProperty(t.prototype,"code",{get:function(){return this._cardValue.code},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._cardValue.url},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"update",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue=a(a({},this._cardValue),e),this.afterChange()}}),Object.defineProperty(t.prototype,"isEmpty",{enumerable:!1,configurable:!0,writable:!0,value:function(){return""===(this.code||"").trim()}}),Object.defineProperty(t.prototype,"needGenPreviewImg",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!this.isEmpty()&&!this.url}}),Object.defineProperty(t.prototype,"toGraph",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{type:"latex",code:this.code,url:this.url}}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{code:"",url:null}}),t}(i(r(3512)).default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ITOCKernelService=void 0;var a=r(3472),i=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("ITOCKernelService")}),t}(r(3475).KernelAbstractService);t.ITOCKernelService=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"thirdparty",cardName:"thirdparty",command:{linkToThirdparty:"linkToThirdparty"},cardSelect:{thirdparty:"thirdparty",bilibili:"bilibili",canva:"canva",juejin:"juejin",codepen:"codepen",figma:"figma",amap:"amap",jinshuju:"jinshuju",modao:"modao",music163:"music163",processon:"processon",ali:"ali",taobao:"taobao",xiami:"xiami",ximalaya:"ximalaya",youku:"youku",youtube:"youtube",yida:"yida",everest:"everest"}})},function(e,t,r){"use strict";var n,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Services=void 0;var a=o(r(5018)),i=o(r(5022)),u=o(r(5023)),l=o(r(5024)),c=o(r(5025)),s=o(r(5026)),f=o(r(5027)),d=o(r(5028)),p=o(r(5029)),h=o(r(5030)),y=o(r(5031)),b=o(r(5032)),m=o(r(5033)),v=o(r(5034)),g=o(r(5035)),_=o(r(5036)),w=o(r(5037)),O=o(r(5038)),E=o(r(4269));t.Services=((n={})[u.default.config.name]=u.default,n[l.default.config.name]=l.default,n[p.default.config.name]=p.default,n[c.default.config.name]=c.default,n[f.default.config.name]=f.default,n[i.default.config.name]=i.default,n[d.default.config.name]=d.default,n[h.default.config.name]=h.default,n[y.default.config.name]=y.default,n[b.default.config.name]=b.default,n[a.default.config.name]=a.default,n[m.default.config.name]=m.default,n[v.default.config.name]=v.default,n[g.default.config.name]=g.default,n[w.default.config.name]=w.default,n[O.default.config.name]=O.default,n[_.default.config.name]=_.default,n[s.default.config.name]=s.default,n[E.default.config.name]=E.default,n)},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function u(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}l((n=n.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(l){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,n=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=l(r(3320)),s=r(3454),f=l(r(4033)),d={parallel:5},p=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_options",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_taskIds",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(r,"_tasks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(r,"_completedTasks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(r,"_runningTasks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(r,"_pendingTasks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(r,"_failureTasks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),r._options=a(a({},d),t),r}return o(t,e),Object.defineProperty(t.prototype,"hasTask",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._taskIds.has(e)}}),Object.defineProperty(t.prototype,"getTask",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._tasks[e]}}),Object.defineProperty(t.prototype,"isCompleted",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._pendingTasks.length+this._runningTasks.length===0}}),Object.defineProperty(t.prototype,"addTask",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this._taskIds.add(e.id),this._pendingTasks.push(e),this._tasks[e.id]=e,setTimeout((function(){t._checkFinish()}),100)}}),Object.defineProperty(t.prototype,"_checkFinish",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._pendingTasks.length,t=this._runningTasks.length;0!==e||0!==t?e>0&&t<this._options.parallel&&this._runTask(this._pendingTasks.shift()):this._finish()}}),Object.defineProperty(t.prototype,"_runTask",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this._runningTasks.push(e),this._updateProgress(),i(t,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,e.run()];case 1:switch(t.sent(),setTimeout((function(){e.destroy()}),1e4),e.getStatus()){case f.default.STATUS_SUCCESS:this._handleSuccess(e);break;case f.default.STATUS_ERROR:case f.default.STATUS_ABORTED:this._handleFailure(e);break;default:(0,s.assert)("invalid task status","framework/infra/src/task-manager/task-thread.ts:96")}return[2]}}))}))}}),Object.defineProperty(t.prototype,"_updateProgress",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._completedTasks.length,t=this._runningTasks.length,r=this._pendingTasks.length,n=this._failureTasks.length;this.emit("progress",{completed:e,running:t,pending:r,failure:n,total:e+t+r})}}),Object.defineProperty(t.prototype,"_handleSuccess",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._runningTasks.indexOf(e);-1!==t&&this._runningTasks.splice(t,1),this._completedTasks.push(e),this._updateProgress(),this._checkFinish()}}),Object.defineProperty(t.prototype,"_handleFailure",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._runningTasks.indexOf(e);-1!==t&&this._runningTasks.splice(t,1),this._failureTasks.push(e),this._updateProgress(),this._checkFinish()}}),Object.defineProperty(t.prototype,"_finish",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"_destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.removeAllListeners()}}),t}(c.default);t.default=p},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(4033)),u=function(e){function t(t,r,n){var o=e.call(this)||this;return Object.defineProperty(o,"_clientId",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"_clientAliveChecker",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_checkTimer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),o._id=t,o._startCheck(),o}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){window.clearTimeout(this._checkTimer),e.prototype.destroy.call(this)}}),Object.defineProperty(t.prototype,"_startCheck",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._clientId&&this._runCheck(3)}}),Object.defineProperty(t.prototype,"_runCheck",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;e<=0?this._timeout():this._checkTimer=window.setTimeout((function(){t._clientAliveChecker&&t._clientId&&(t._clientAliveChecker(t._clientId)||t._runCheck(e-1))}),1e3)}}),Object.defineProperty(t.prototype,"getResourceURL",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),Object.defineProperty(t.prototype,"run",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new Promise((function(){}))}}),Object.defineProperty(t.prototype,"_timeout",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.emit("timeout")}}),t}(i.default);t.default=u},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3924)),a=r(3925),i=function(){function e(){Object.defineProperty(this,"colorScheme",{enumerable:!0,configurable:!0,writable:!0,value:a.ColorScheme.LIGHT}),Object.defineProperty(this,"colorRegistry",{enumerable:!0,configurable:!0,writable:!0,value:o.default}),Object.defineProperty(this,"selector",{enumerable:!0,configurable:!0,writable:!0,value:"lakex-default-theme"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("style")})}return Object.defineProperty(e.prototype,"apply",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.style.innerText=this.colorRegistry.toStyleValues(this.selector,this.colorScheme),this.style.parentNode!==e&&(this.style.remove(),e.appendChild(this.style)),e.classList.contains(this.selector)||e.classList.add(this.selector)}}),Object.defineProperty(e.prototype,"remove",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.style.parentNode&&this.style.remove(),e.classList.contains(this.selector)&&e.classList.remove(this.selector)}}),Object.defineProperty(e.prototype,"getColor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;return(null===(t=this.colorRegistry.getColor(e))||void 0===t?void 0:t[this.colorScheme])||null}}),Object.defineProperty(e.prototype,"transform",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return o.default.transform(e,t,r)}}),e}();t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3491),u=a(r(3492)),l=r(5039),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getCardSelect",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e||!t.referenceURL)return null;var r=(0,l.getYuqueDocPreviewURL)(e,t.referenceURL,{allowLarkURL:!0});return r.success&&r.url?r.url:null}}),Object.defineProperty(t,"referenceURL",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:i.CARD_TYPE.DEVELOPMENT,name:"yuque"}}),t}(u.default);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isYuqueEditURL=void 0;var n=r(3725),o=r(3770);t.isYuqueEditURL=function(e){if(!(0,n.isLarkDomainURL)(e)&&!(0,o.isYuqueDomainURL)(e))return!1;var t=new URL(e,"http://localhost");return!!/^\/[^/]{2,}\/[^/]+(\/[^/]+)?\/edit$/.test(t.pathname)}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.isYuquePatternsURL=t.UrlPatterns=void 0,t.UrlPatterns=[/^(https?:\/\/)?code\.(alipay|antfin|antfin-inc)\.com\/[^/]+\/[^/]+\/commit\/[^/]+$/,/^(https?:\/\/)?code\.(alipay|antfin|antfin-inc)\.com\/[^/]+\/[^/]+\/pull_requests\/[^/]+$/,/^(https?:\/\/)?yuyan\.antfin-inc\.com\/[^/]+\/[^/]+\/sprints\/.*$/,/^(https?:\/\/)?aone\.(alipay|antfin|antfin-inc)\.com\/v2\/project\/[^/]+\/(task|req|bug)\/[^/]+$/,/^(https?:\/\/)?aone\.(alipay|antfin|antfin-inc)\.com\/(issue|workitem|task|req|bug)\/[^/]+$/,/^(https?:\/\/)?aone\.alipay\.com\/projects\/[^/]+$/,/^(https?:\/\/)?project\.aone\.(alipay|alibaba|alibaba-inc)\.com\/projects\/[^/]+$/,/^(https?:\/\/)?aone\.(alipay|alibaba|alibaba-inc)\.com\/v2\/project\/[^/]+\/sprint\/[^/]+$/,/^(https?:\/\/)?baiyan\.(alipay|antfin)\.com\/(space|project|task)\/.*$/,/^(https?:\/\/)?linke\.alipay\.com\/#\/alipay\/iteration\/detail\/.+/,/^(https?:\/\/)?teambition\.alibaba-inc\.com\/project\/[^/]+\/.+/,/^(https?:\/\/)?teambition\.alibaba-inc\.com\/project\/[^/]+\/sprint\/section\/[^/]+$/,/^(https?:\/\/)?teambition\.alibaba-inc\.com\/project\/[^/]+\/[^/]+\/[^/]+\/[^/]+\/task\/[^/]+$/,/^(https?:\/\/)?(www\.)?yuque\.(antfin|antfin-inc)\.com\/r\/[^/]+\/issues\/[^/]+$/,/^(https?:\/\/)?(www\.)?yuque\.com\/r\/[^/]+\/issues\/[^/]+$/,/^(https?:\/\/)?dataphin\.alipay\.com\/assets\/catalog\/detail\/table\/[^/]+\/.+/,/^(https?:\/\/)?project\.alipay\.com\/(space|assemble)\/[^/]+\/overview.+/,/^(https?:\/\/)?project\.alipay\.com\/project\/[^/]+\/[^/]+\/overview.+/,/^(https?:\/\/)?project\.alipay\.com\/(space|project)\/.+\/(requirement|bug|task).+/,/^(https?:\/\/)?project\.alipay\.com\/workItem.+/,/^(https?:\/\/)?.+\.yuque\.com\/logout(\/)?(\?[^#]+)?(#.+)?$/,/^(https?:\/\/)?.+\.antfin\.com\/logout(\/)?(\?[^#]+)?(#.+)?$/,/^(https?:\/\/)?.+\.antfin-inc\.com\/logout(\/)?(\?[^#]+)?(#.+)?$/,/^(https?:\/\/)?fecodex\.antgroup-inc\.cn\/?.*/,/\|{2}/],t.isYuquePatternsURL=function(e){var r,o;if(!Array.isArray(t.UrlPatterns)||!e)return!1;try{for(var a=n(t.UrlPatterns),i=a.next();!i.done;i=a.next()){if(i.value.test("string"==typeof e?e:e.toString()))return!0}}catch(e){r={error:e}}finally{try{i&&!i.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return!1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isYuqueGroupURL=void 0;var n=r(3725),o=r(3770),a=/^\/[^/]{2,}$/;t.isYuqueGroupURL=function(e){if(!(0,o.isYuqueDomainURL)(e)&&!(0,n.isLarkDomainURL)(e))return!1;try{var t=new URL(e).pathname;return a.test(t)}catch(e){return!1}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isYuqueBookUrl=void 0;var n=r(3725),o=r(3770),a=/^\/[^/]{2,}\/[^/]+$/;t.isYuqueBookUrl=function(e){if(!(0,o.isYuqueDomainURL)(e)&&!(0,n.isLarkDomainURL)(e))return!1;var t=new URL(e,"http://localhost/").pathname;return a.test(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileKeyByUrl=void 0;var n=["https://lark-assets-dev-aliyun.oss-cn-hangzhou.aliyuncs.com/","https://lark-assets-test-aliyun.oss-cn-hangzhou.aliyuncs.com/","https://cdn.nlark.com/"];t.getFileKeyByUrl=function(e){if(!e)return null;for(var t in n)if(e.startsWith(n[t]))return e.replace(n[t],"");var r=e.replace(/^https?:\/\/[^/]+/,"");if(!r.startsWith("/attachments"))return null;var o=r.replace(/^\/attachments\//,"");return"/"===o.charAt(0)&&(o=o.substr(1)),o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.yuqueDocURLParseErrorCode=void 0,function(e){e[e.normal=0]="normal",e[e.empty=1001]="empty",e[e.invalid=1002]="invalid"}(t.yuqueDocURLParseErrorCode||(t.yuqueDocURLParseErrorCode={}))},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IBookmarkKernelService=void 0;var a=r(3475),i=r(3472),u=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,i.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,i.wrapID)("IBookmarkKernelService")}),t}(a.KernelAbstractService);t.IBookmarkKernelService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3761);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"monitor"})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return i(t,e),t},l=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},c=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var f=s(r(3464)),d=u(r(3932)),p=r(3511),h=s(r(3512)),y=r(3518),b=s(r(5127)),m=u(r(4279)),v={currentDate:d.parseDayToNumber(d.getCurrentMonthFirstDay()),colorIndex:0,schedules:{}};var g=function(e){function t(t){var r=e.call(this,t)||this;return Object.defineProperty(r,"_startWeekDay",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_calendarDate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_dateRows",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_scheduleList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"_dateScheduleMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"redoScheduleList",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(r,"undoScheduleList",{enumerable:!0,configurable:!0,writable:!0,value:[]}),r.watchCardValue(),r.watchCardValueProperties(),r.setExtendInfo(),r}return o(t,e),Object.defineProperty(t,"getInitCardValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return h.default.setCardSpacingToValue(y.CARD_SPACING_BOTH,(0,p.cloneObject)(t.DefaultCardValue))}}),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=null==e?void 0:e.currentDate;if(r){var n=String(r);/01$/.test(n)||(e.currentDate=parseInt("".concat(n.slice(0,n.length-2),"01"),10))}return(0,f.default)({},t.DefaultCardValue,e)}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(t.prototype,"watchCardValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this._cardValue;Object.defineProperty(this,"_cardValue",{get:function(){return t},set:function(r){t=r,e.watchCardValueProperties(),e.setExtendInfo()}})}}),Object.defineProperty(t.prototype,"watchCardValueProperties",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this._cardValue.schedules;Object.defineProperty(this._cardValue,"schedules",{get:function(){return t},set:function(r){t=r,e.setScheduleExtendInfo()}})}}),Object.defineProperty(t.prototype,"setExtendInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setCalendarDate(),this.setDateRows(),this.setScheduleExtendInfo()}}),Object.defineProperty(t.prototype,"setScheduleExtendInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setScheduleList(),this.setDateScheduleMap()}}),Object.defineProperty(t.prototype,"getCurrentDate",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.currentDate}}),Object.defineProperty(t.prototype,"setCurrentDate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.currentDate=e}}),Object.defineProperty(t.prototype,"getColorIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.colorIndex||0}}),Object.defineProperty(t.prototype,"setColorIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.colorIndex=e}}),Object.defineProperty(t.prototype,"getSchedules",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.schedules}}),Object.defineProperty(t.prototype,"setSchedules",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.undoScheduleList.push(this.getSchedules()),this.redoScheduleList=[],this.undoScheduleList.length>20&&this.undoScheduleList.shift(),this._cardValue.schedules=e,t||this.afterChange()}}),Object.defineProperty(t.prototype,"undo",{enumerable:!1,configurable:!0,writable:!0,value:function(){0!==this.undoScheduleList.length&&(this.redoScheduleList.push(this.getSchedules()),this._cardValue.schedules=this.undoScheduleList.pop(),this.afterChange())}}),Object.defineProperty(t.prototype,"redo",{enumerable:!1,configurable:!0,writable:!0,value:function(){0!==this.redoScheduleList.length&&(this.undoScheduleList.push(this.getSchedules()),this._cardValue.schedules=this.redoScheduleList.pop(),this.afterChange())}}),Object.defineProperty(t.prototype,"setSchedule",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.type,r=e.schedule,n=e.prevSchedule,o=e.sync,a=e.index,i=(0,f.default)({},this.getSchedules()),u=function(e,t){for(var r=-1,n=0;n<e.length;n++){if(e[n].id===t){r=n;break}}return r},s=function(e,t){i[e.start]||(i[e.start]=[]),void 0!==t&&-1!==t?i[e.start].splice(t,0,e):i[e.start].push(e)},d=function(e){var t=i[e.start],r=u(t,e.id);i[e.start].splice(r,1)};switch(t){case m.UpdateValueType.Add:s(r);break;case m.UpdateValueType.Update:if(r.start===n.start){var p=i[r.start],h=u(p||[],r.id);if(p&&-1!==h)i[r.start]=c(c(c([],l(p.slice(0,h)),!1),[r],!1),l(p.slice(h+1,p.length)),!1),void 0!==a&&-1!==a&&h!==a&&i[r.start].splice(a,0,i[r.start].splice(h,1)[0]);else{for(var y=Object.keys(i),b="",v=-1,g=0;g<y.length;g++){var _=i[y[g]],w=u(_||[],r.id);if(-1!==w){b=y[g],v=w;break}}""!==b&&-1!==v&&(d({start:b,id:r.id}),s(r))}}else d(n),s(r,a);break;case m.UpdateValueType.Delete:d(r)}this.setSchedules(i,o)}}),Object.defineProperty(t.prototype,"getStartWeekDay",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;return null!==(e=this._startWeekDay)&&void 0!==e?e:0}}),Object.defineProperty(t.prototype,"setStartWeekDay",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._startWeekDay=e}}),Object.defineProperty(t.prototype,"getCalendarDate",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._calendarDate}}),Object.defineProperty(t.prototype,"setCalendarDate",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getCurrentDate(),t=this.getStartWeekDay(),r=m.Duration.DaysOfWeek,n=d.parseDayNumberToDate(e),o=n.daysInMonth(),a=Math.abs(n.day()-t),i=n.subtract(a,m.DateType.Day),u=a+o,l=u%r;u+=0===l?r:r-l%r;var c=i.add(u,m.DateType.Day);this._calendarDate={startDate:i,endDate:c,totalDayCount:u}}}),Object.defineProperty(t.prototype,"getDateRows",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._dateRows||[]}}),Object.defineProperty(t.prototype,"setDateRows",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=this.getCalendarDate(),t=e.startDate,r=e.totalDayCount,n=m.Duration.DaysOfWeek,o=[],a=[],i=0;i<=r;i++)0!==i&&i%n==0&&(o.push(c([],l(a),!1)),a=[]),a.push(t.add(i,m.DateType.Day));this._dateRows=o}}),Object.defineProperty(t.prototype,"getScheduleList",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._scheduleList||[]}}),Object.defineProperty(t.prototype,"setScheduleList",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=[],t=this.getSchedules();if(t&&0!==Object.keys(t).length){var r=[];if(Object.keys(t).forEach((function(e){var n=t[e];r.push.apply(r,c([],l(n),!1))})),0!==r.length){var n=this.getCalendarDate(),o=n.startDate,a=n.endDate,i=d.parseDayToNumber(o),u=d.parseDayToNumber(a);e=r.filter((function(e){return e.start>=i&&e.start<=u||e.end>=i&&e.end<=u||e.start<i&&e.end>u})).map((function(e){return b.default.convert(e)})).sort((function(e,t){return e.start-t.start})),this._scheduleList=e}else this._scheduleList=e}else this._scheduleList=e}}),Object.defineProperty(t.prototype,"getDateScheduleMap",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._dateScheduleMap||{}}}),Object.defineProperty(t.prototype,"setDateScheduleMap",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e={},t=this.getDateRows(),r=this.getScheduleList(),n=function(n){for(var o={},a=function(a){var i=t[n][a],u=d.parseDayToNumber(i),l=r.filter((function(e){return e.include(i)}));if(0===a&&0!==n){var c=e[d.parseDayToNumber(i.subtract(1,m.DateType.Day))];l=l.sort((function(e,t){var r,n;return(null!==(r=c[e.id])&&void 0!==r?r:99)-(null!==(n=c[t.id])&&void 0!==n?n:99)}))}e[u]={};var s=[];l.filter((function(t){var r=o[t.id];return!r||(e[u][t.id]=r,s.push(r),!1)})).forEach((function(t){var r=function(e){for(var t=0,r=0;r<e.length&&e.includes(t);r++)t+=1;return t}(s);o[t.id]=r,e[u][t.id]=r,s.push(r)}))},i=0;i<t[n].length;i++)a(i)},o=0;o<t.length;o++)n(o);this._dateScheduleMap=e}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:v}),t}(h.default);t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorsSchemes=t.Colors=t.WeekDayNames=t.UpdateValueType=t.Duration=t.DateType=t.OP=void 0;var n=r(3721);t.OP={Add:"add",Subtract:"subtract"},t.DateType={Millisecond:"millisecond",Second:"second",Minute:"minute",Hour:"hour",Day:"day",Week:"week",Month:"month",Year:"year"},t.Duration={DaysOfWeek:7},t.UpdateValueType={Add:"add",Update:"update",Delete:"delete"},t.WeekDayNames=[(0,n.i18n)("星期日"),(0,n.i18n)("星期一"),(0,n.i18n)("星期二"),(0,n.i18n)("星期三"),(0,n.i18n)("星期四"),(0,n.i18n)("星期五"),(0,n.i18n)("星期六")],t.Colors=[{name:(0,n.i18n)("蓝色"),line:"calendar.blue.line",border:"calendar.blue.border",background:"calendar.blue.background"},{name:(0,n.i18n)("玫红色"),line:"calendar.magenta.line",border:"calendar.magenta.border",background:"calendar.magenta.background"},{name:(0,n.i18n)("绿色"),line:"calendar.green.line",border:"calendar.green.border",background:"calendar.green.background"},{name:(0,n.i18n)("红色"),line:"calendar.red.line",border:"calendar.red.border",background:"calendar.red.background"},{name:(0,n.i18n)("紫色"),line:"calendar.purple.line",border:"calendar.purple.border",background:"calendar.purple.background"},{name:(0,n.i18n)("黄色"),line:"calendar.yellow.line",border:"calendar.yellow.border",background:"calendar.yellow.background"}],t.ColorsSchemes={"calendar.blue.line":{light:"#117CEE"},"calendar.blue.border":{light:"#81BBF8"},"calendar.blue.background":{light:"#D9EAFC"},"calendar.magenta.line":{light:"#D22D8D"},"calendar.magenta.border":{light:"#F297CC"},"calendar.magenta.background":{light:"#FBDFEF"},"calendar.green.line":{light:"#74B602"},"calendar.green.border":{light:"#C1E77E"},"calendar.green.background":{light:"#E8F7CF"},"calendar.red.line":{light:"#DF2A3F"},"calendar.red.border":{light:"#F1A2AB"},"calendar.red.background":{light:"#FBE4E7"},"calendar.purple.line":{light:"#601BDE"},"calendar.purple.border":{light:"#BA9BF2"},"calendar.purple.background":{light:"#E6DCF9"},"calendar.yellow.line":{light:"#ECAA04"},"calendar.yellow.border":{light:"#F5D480"},"calendar.yellow.background":{light:"#F9EFCD"}}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),u=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return u(t,e),t},c=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},s=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=f(r(3464)),p=r(3597),h=r(3511),y=f(r(3512)),b=r(3518),m=l(r(5135)),v=r(3932);function g(){return{id:(0,p.uuid)(),value:""}}var _={voteId:null,type:m.VoteTypes[0].value,title:"",items:[],deadline:(0,v.dayjs)((0,v.dayjs)().format("YYYY-MM-DD 00:00:00")).add(2,"day").toISOString()},w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getInitCardValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return y.default.setCardSpacingToValue(b.CARD_SPACING_BOTH,a(a({},(0,h.cloneObject)(_)),{voteId:(0,p.uuid)(),items:[g(),g()]}))}}),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,d.default)({},t.DefaultCardValue,{voteId:(0,p.uuid)()},e)}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(t,"fromPaste",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=(0,d.default)({},t.DefaultCardValue,e);return r.voteId=(0,p.uuid)(),r.items=r.items.map((function(e){return a(a({},e),{id:(0,p.uuid)()})})),r}}),Object.defineProperty(t.prototype,"getVoteId",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.voteId}}),Object.defineProperty(t.prototype,"setVoteId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.voteId=e}}),Object.defineProperty(t.prototype,"getTitle",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.title}}),Object.defineProperty(t.prototype,"setTitle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._cardValue.title=e,t||this.afterChange()}}),Object.defineProperty(t.prototype,"getType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.type}}),Object.defineProperty(t.prototype,"setType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.type=e}}),Object.defineProperty(t.prototype,"getDeadline",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.deadline}}),Object.defineProperty(t.prototype,"setDeadline",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.deadline=e}}),Object.defineProperty(t.prototype,"getItems",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.items}}),Object.defineProperty(t.prototype,"setItems",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._cardValue.items=e,t||this.afterChange()}}),Object.defineProperty(t.prototype,"setVote",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.type,r=e.item,n=e.sync,o=s([],c(this.getItems()),!1),a=function(e){for(var t=-1,r=0;r<o.length;r++)if(o[r].id===e.id){t=r;break}return t};switch(t){case m.UpdateType.Add:o.push(g());break;case m.UpdateType.Update:var i=a(r);o=s(s(s([],c(o.slice(0,i)),!1),[r],!1),c(o.slice(i+1,o.length)),!1);break;case m.UpdateType.Delete:i=a(r);o.splice(i,1)}this.setItems(o,n)}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:_}),t}(y.default);t.default=w},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(3464)),l=i(r(191)),c=i(r(3512)),s=r(3518),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"createStandardCardValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return c.default.setCardSpacingToValue(s.CARD_SPACING_BOTH,(0,u.default)({},t.DefaultCardValue,e))}}),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e,r){["puml","flowchart","graphviz","mermaid"].includes(r)&&(e.type=r);return(0,u.default)({},t.DefaultCardValue,(0,l.default)(e,["type","code","url","collapse"]))}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=["type","code","url"];return e.collapse&&t.push("collapse"),(0,l.default)(e,t)}}),Object.defineProperty(t.prototype,"type",{get:function(){return this._cardValue.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this._cardValue.code},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._cardValue.url},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collapse",{get:function(){return this._cardValue.collapse},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"update",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue=a(a({},this._cardValue),e),this.afterChange()}}),Object.defineProperty(t.prototype,"toGraph",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{type:this.type,code:this.code||"",url:this.url}}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{type:"puml",code:"",url:null,collapse:!1}}),t}(c.default);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_COPYRIGHT=t.TYPE_TRANSCODED=t.TYPE_TRANSCODING=t.TYPE_UPLOADED=t.TYPE_UPLOADING=t.TYPE_PENDING=t.TYPE_ERROR=void 0,t.TYPE_ERROR="error",t.TYPE_PENDING="pending",t.TYPE_UPLOADING="uploading",t.TYPE_UPLOADED="uploaded",t.TYPE_TRANSCODING="transcoding",t.TYPE_TRANSCODED="transcoded",t.TYPE_COPYRIGHT="copyright"},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(3464)),l=function(e){function t(r){return e.call(this,(0,u.default)({},t.DefaultCardValue,r))||this}return o(t,e),Object.defineProperty(t,"fromLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,u.default)({},t.DefaultCardValue,e)}}),Object.defineProperty(t,"toLake",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return a(a({},e),{date:e.date})}}),Object.defineProperty(t.prototype,"getDate",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cardValue.date}}),Object.defineProperty(t.prototype,"setDate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cardValue.date=e}}),Object.defineProperty(t,"DefaultCardValue",{enumerable:!0,configurable:!0,writable:!0,value:{date:Date.now()}}),t}(i(r(3512)).default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"upload",service:{IUploadEditorService:"IUploadEditorService"}})},,,,function(e,t,r){"use strict";r.d(t,"d",(function(){return T})),r.d(t,"b",(function(){return R})),r.d(t,"c",(function(){return F})),r.d(t,"a",(function(){return B}));var n=r(4391),o=r(5164);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function u(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var c=function(){return e=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"name",void 0),u(this,"type",void 0),u(this,"value",void 0),this.name=t,this.type=r,this.value=n},(t=[{key:"toString",value:function(){return'<card type="'.concat(this.type,'" name="').concat(this.name,'" value="data:').concat(encodeURIComponent(JSON.stringify(this.value)),'"></card>')}}])&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}var p=function(){return e=function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=void 0,(n=d(n="content"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this.content=t},(t=[{key:"toString",value:function(){return this.content}}])&&f(e.prototype,t),r&&f(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function b(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var v=function(){return e=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"children",void 0),b(this,"name",void 0),b(this,"attrs",void 0),this.name=t,this.attrs=r,this.children=n},(t=[{key:"appendChild",value:function(e){e&&this.children.push(e)}},{key:"toString",value:function(){var e=this,t=Object.keys(this.attrs).map((function(t){return"".concat(t,'="').concat(e.attrs[t],'"')})).join(" ");return"<".concat(this.name).concat(t.length>0?" ":"").concat(t,">").concat(this.children.map((function(e){return e.toString()})).join(""),"</").concat(this.name,">")}}])&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function w(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}var E=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,"text",void 0),w(this,"attrs",void 0),this.text=t,this.attrs=r},(t=[{key:"toString",value:function(){var e="<span>".concat(this.text,"</span>");return this.attrs.bold&&(e="<strong>".concat(e,"</strong>")),this.attrs.italic&&(e="<em>".concat(e,"</em>")),this.attrs.underline&&(e="<u>".concat(e,"</u>")),this.attrs.color&&(e='<span style="color: '.concat(this.attrs.color,'">').concat(e,"</span>")),e}}])&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function C(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}var k=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"createTextNode",value:function(e){return new E(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},{key:"createCardNode",value:function(e,t,r){return new c(e,t,r)}},{key:"createElement",value:function(e){return new v(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])}},{key:"createLakeContentNode",value:function(e){return new p(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}}],(t=null)&&j(e.prototype,t),r&&j(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x(n.key),n)}}function x(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}var N=function(){return e=function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n={},(r=x(r="nodeTransformers"))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n},t=[{key:"registerNodeTransformer",value:function(e,t){var r=this;Array.isArray(e)?e.forEach((function(e){r.nodeTransformers[e]=t})):this.nodeTransformers[e]=t}},{key:"transformNode",value:function(e){return"string"==typeof e?k.createTextNode(e):this.nodeTransformers[e.component]?this.nodeTransformers[e.component](e):null}}],t&&A(e.prototype,t),r&&A(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),T=new N;T.registerNodeTransformer("Text",(function(e){return k.createTextNode(e.children.join(""),e.props)})),T.registerNodeTransformer("Paragraph",(function(e){var t=k.createElement("p");return e.children.forEach((function(e){return t.appendChild(T.transformNode(e))})),t})),T.registerNodeTransformer(["Header1","Header2","Header3","Header4","Header5","Header6"],(function(e){var t=k.createElement("h".concat(e.component.slice(-1)));return e.children.forEach((function(e){return t.appendChild(T.transformNode(e))})),t})),T.registerNodeTransformer("Blockquote",(function(e){var t=k.createElement("blockquote");return e.children.forEach((function(e){if("string"==typeof e){var r=k.createElement("p",{},[k.createTextNode(e)]);t.appendChild(r)}else t.appendChild(T.transformNode(e))})),t})),T.registerNodeTransformer("CodeBlock",(function(e){return k.createCardNode("codeblock","block",{mode:e.props.language,code:e.props.content})})),T.registerNodeTransformer("DocGenCollapse",(function(e){var t=k.createElement("details",{class:"lake-collapse",open:!!e.props.expanded}),r=k.createElement("summary",{class:"lake-summary"},[k.createTextNode(e.props.title,{})]);return t.appendChild(r),e.children.forEach((function(e){return t.appendChild(T.transformNode(e))})),t})),T.registerNodeTransformer("DocGenAlert",(function(e){var t=k.createElement("blockquote",{class:"lake-alert lake-alert-".concat(e.props.type||"info")});return e.children.forEach((function(e){return t.appendChild(T.transformNode(e))})),t})),T.registerNodeTransformer("MonitorLineChart",(function(e){return k.createCardNode("chart","block",{type:"line",config:{data:e.props.data,xField:e.props.xField,yField:e.props.yField},height:e.props.height})})),T.registerNodeTransformer("TextDiagram",(function(e){return k.createCardNode("diagram","block",{type:e.props.type,code:e.props.code})})),T.registerNodeTransformer("Lake",(function(e){switch(e.props.type){case"text/html":return k.createLakeContentNode(B(e.props.content));case"text/markdown":return k.createLakeContentNode(F(e.props.content))}return k.createLakeContentNode(e.props.content)}));var D,L=(D={typography:"classic",paragraphSpacing:"relax",viewport:"fixed"},"".concat('<!doctype lake><meta name="doc-version" content="1" />').concat(function(e){return Object.keys(e).map((function(t){return'<meta name="'.concat(t,'" content="').concat(e[t],'" />')})).join("")}(D)));function R(e){return L+e.map((function(e){return T.transformNode(e)})).filter(Boolean).map((function(e){return e.toString()})).join("")}var I=Object(n.createCoreEditor)({image:{isCaptureImageURL:function(){return!1}}});function M(e){return e.replace(/ (list|id|data-lake-id)="[^"]*"/g,"")}function F(e){return I.setDocument("text/markdown",Object(o.decode)(e)),M(I.getDocument("text/lake"))}function B(e){return I.setDocument("text/html",Object(o.decode)(e)),M(I.getDocument("text/lake"))}},,function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return a})),r.d(t,"e",(function(){return i})),r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"f",(function(){return c})),r.d(t,"b",(function(){return s}));var a={generateSheet:"generateSheet",generateFormula:"generateFormula"},i={user:"user",ai:"ai"},u={modelError:"modelError",netError:"netError"},l=o(o({},u.modelError,__("作为一个人工智能语言模型，这个问题超出我目前的学习范围了，您可以问我其他问题，我将尽力为您解答")),u.netError,__("网络异常，请稍后重试")),c=Object.keys(l),s={format:"lakesheet",version:"3.5.5",larkJson:!0,sheet:"",calcChain:[],vessels:{},useUTC:!0,useIndex:!0,customColors:[],meta:{sort:0,shareFilter:0},formulaCalclated:!0}},,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n="https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*Aj06T7NnHngAAAAAAAAAAAAADvuFAQ/original",o="https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*wPMVTriBo40AAAAAAAAAAAAAARQnAQ"},,function(e,t,r){"use strict";e.exports=r(5201)},function(e,t,r){"use strict";e.exports=r(5202)},function(e,t,r){"use strict";e.exports.encode=r(5203),e.exports.decode=r(5204),e.exports.format=r(5205),e.exports.parse=r(5206)},function(e,t){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},function(e,t){e.exports=/[\0-\x1F\x7F-\x9F]/},function(e,t){e.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},function(e,t,r){"use strict";var n="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",o="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",a=new RegExp("^(?:"+n+"|"+o+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),i=new RegExp("^(?:"+n+"|"+o+")");e.exports.HTML_TAG_RE=a,e.exports.HTML_OPEN_CLOSE_TAG_RE=i},function(e,t,r){"use strict";function n(e,t){var r,n,o,a,i,u=[],l=t.length;for(r=0;r<l;r++)126===(o=t[r]).marker&&-1!==o.end&&(a=t[o.end],(i=e.tokens[o.token]).type="s_open",i.tag="s",i.nesting=1,i.markup="~~",i.content="",(i=e.tokens[a.token]).type="s_close",i.tag="s",i.nesting=-1,i.markup="~~",i.content="","text"===e.tokens[a.token-1].type&&"~"===e.tokens[a.token-1].content&&u.push(a.token-1));for(;u.length;){for(n=(r=u.pop())+1;n<e.tokens.length&&"s_close"===e.tokens[n].type;)n++;r!==--n&&(i=e.tokens[n],e.tokens[n]=e.tokens[r],e.tokens[r]=i)}}e.exports.tokenize=function(e,t){var r,n,o,a,i=e.pos,u=e.src.charCodeAt(i);if(t)return!1;if(126!==u)return!1;if(o=(n=e.scanDelims(e.pos,!0)).length,a=String.fromCharCode(u),o<2)return!1;for(o%2&&(e.push("text","",0).content=a,o--),r=0;r<o;r+=2)e.push("text","",0).content=a+a,e.delimiters.push({marker:u,length:0,token:e.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return e.pos+=n.length,!0},e.exports.postProcess=function(e){var t,r=e.tokens_meta,o=e.tokens_meta.length;for(n(e,e.delimiters),t=0;t<o;t++)r[t]&&r[t].delimiters&&n(e,r[t].delimiters)}},function(e,t,r){"use strict";function n(e,t){var r,n,o,a,i,u;for(r=t.length-1;r>=0;r--)95!==(n=t[r]).marker&&42!==n.marker||-1!==n.end&&(o=t[n.end],u=r>0&&t[r-1].end===n.end+1&&t[r-1].marker===n.marker&&t[r-1].token===n.token-1&&t[n.end+1].token===o.token+1,i=String.fromCharCode(n.marker),(a=e.tokens[n.token]).type=u?"strong_open":"em_open",a.tag=u?"strong":"em",a.nesting=1,a.markup=u?i+i:i,a.content="",(a=e.tokens[o.token]).type=u?"strong_close":"em_close",a.tag=u?"strong":"em",a.nesting=-1,a.markup=u?i+i:i,a.content="",u&&(e.tokens[t[r-1].token].content="",e.tokens[t[n.end+1].token].content="",r--))}e.exports.tokenize=function(e,t){var r,n,o=e.pos,a=e.src.charCodeAt(o);if(t)return!1;if(95!==a&&42!==a)return!1;for(n=e.scanDelims(e.pos,42===a),r=0;r<n.length;r++)e.push("text","",0).content=String.fromCharCode(a),e.delimiters.push({marker:a,length:n.length,token:e.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return e.pos+=n.length,!0},e.exports.postProcess=function(e){var t,r=e.tokens_meta,o=e.tokens_meta.length;for(n(e,e.delimiters),t=0;t<o;t++)r[t]&&r[t].delimiters&&n(e,r[t].delimiters)}},,,,,function(e,t,r){"use strict";t.a={fullscreen:"index-module_fullscreen_YFc74",head:"index-module_head_5fmgf",isInsetTitleBar:"index-module_isInsetTitleBar_L9FrS",back:"index-module_back_1eag2",pageTitle:"index-module_pageTitle_UaM1v",headNav:"index-module_headNav_10ysn",headActions:"index-module_headActions_dizKK",restoreButton:"index-module_restoreButton_sPfkI",versionNameTip:"index-module_versionNameTip_+ul2k",versionName:"index-module_versionName_mi01u",body:"index-module_body_LQoQ8",aside:"index-module_aside_kliFq",main:"index-module_main_kYLWG",content:"index-module_content_8lh-O",document:"index-module_document_oSFJb",fixed:"index-module_fixed_5d1CF",toolbar:"index-module_toolbar_icO0H",adapt:"index-module_adapt_esbh-",doc:"index-module_doc_2jnwi"}},,,function(e,t,r){},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(n=r(4316))&&n.__esModule?n:{default:n};t.default=o,e.exports=o},function(e,t,r){"use strict";var n=r(102),o=r(113);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(393)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var u=a?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),u=n(r(4317)),l=n(r(713));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}var s=function(e,t){return i.createElement(l.default,(0,a.default)((0,a.default)({},e),{},{ref:t,icon:u.default}))},f=i.forwardRef(s);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"}},,,,,,,,,,,,,function(e,t,r){"use strict";r(144);var n=r(60),o=r(0),a=r.n(o),i=r(2),u=r.n(i),l=r(14),c=r.n(l),s=r(557);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function p(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}function h(e,t,r){return t=b(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,y()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),r=t,o=[{key:"renderContent",value:function(){var e=this.props,t=e.docStatus,r=e.savedAt,n=e.netStatus;if(n===s.NET_STATUS.offline)switch(t){case"loading":return a.a.createElement("span",{"data-testid":"loading"},__("正在加载..."));case"changed":return a.a.createElement("span",{"data-testid":"auto_saving"},__("离线编辑中..."));case"saving":return a.a.createElement("span",{"data-testid":"saving"},__("正在离线保存..."));case"saved":return a.a.createElement("span",{"data-testid":"saved"},__("已保存离线版本")," ",r&&c()(r).format("H:mm:ss"));default:return a.a.createElement("span",{"data-testid":"offline"},__("当前在离线编辑状态..."))}if(n===s.NET_STATUS.congestion)return a.a.createElement("span",{"data-testid":"congestion"},__("网络不稳定，无法实时协同..."));switch(t){case"loading":return a.a.createElement("span",{"data-testid":"loading"},__("正在加载..."));case"changed":return a.a.createElement("span",{"data-testid":"auto_saving"},__("自动保存中..."));case"saving":return a.a.createElement("span",{"data-testid":"saving"},__("正在保存..."));case"publishing":return a.a.createElement("span",{"data-testid":"publishing"},__("正在发布..."));case"published":return a.a.createElement("span",{"data-testid":"published"},__("已发布"));case"saved":return a.a.createElement("span",{"data-testid":"saved"},__("已保存")," ",r&&c()(r).format("H:mm:ss"));case"loaded":return a.a.createElement("span",{"data-testid":"loaded"},__("已加载最新版本"));default:return null}}},{key:"render",value:function(){var e=this,t=this.renderContent(),r=this.props.showHistory;return t&&r?a.a.createElement(n.a,{title:__("查看历史版本"),trigger:["hover","click"],placement:"bottom"},a.a.createElement("span",{style:{cursor:"pointer"},onClick:function(t){return e.handleClick(t)}},t)):t}},{key:"handleClick",value:function(e){var t;"a"!==(null===(t=e.target)||void 0===t?void 0:t.tagName.toLowerCase())&&(0,this.props.showHistory)()}}],o&&d(r.prototype,o),i&&d(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,i}(o.PureComponent);v.propTypes={savedAt:u.a.instanceOf(Date),docStatus:u.a.string,netStatus:u.a.string,showHistory:u.a.func},t.a=v},function(e,t,r){t.Connection=r(4332),t.Doc=r(4050),t.Error=r(3895),t.Query=r(4051),t.types=r(3896),t.logger=r(3894)},function(e,t,r){(function(t){var n=r(4050),o=r(4051),a=r(4334),i=r(4336),u=r(3792),l=r(3895),c=r(3896),s=r(3793),f=r(3894),d=l.CODES;function p(e){return 0===e.readyState||1===e.readyState?"connecting":"disconnected"}function h(e){u.EventEmitter.call(this),this.collections={},this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries={},this._snapshotRequests={},this.seq=1,this.id=null,this.agent=null,this.debug=!1,this.state=p(e),this.bindToSocket(e)}function y(e,t){var r=new Error(e.message);return r.code=e.code,t&&(r.data=t),r}function b(e){return e.hasPending()}function m(e){return e.hasWritePending()}e.exports=h,u.mixin(h),h.prototype.bindToSocket=function(e){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=e;var r=p(e);this._setState(r),this.canSend=!1;var n=this;e.onmessage=function(e){try{var r="string"==typeof e.data?JSON.parse(e.data):e.data}catch(t){return void f.warn("Failed to parse message",e)}n.debug&&f.info("RECV",JSON.stringify(r));var o={data:r};if(n.emit("receive",o),o.data)try{n.handleMessage(o.data)}catch(e){t.nextTick((function(){n.emit("error",e)}))}},1===e.readyState&&n._initializeHandshake(),e.onopen=function(){n._setState("connecting"),n._initializeHandshake()},e.onerror=function(e){n.emit("connection error",e)},e.onclose=function(e){"closed"===e||"Closed"===e?n._setState("closed",e):"stopped"===e||"Stopped by server"===e?n._setState("stopped",e):n._setState("disconnected",e)}},h.prototype.handleMessage=function(e){var t=null;switch(e.error&&(t=y(e.error,e),delete e.error),e.a){case"init":return this._handleLegacyInit(e);case"hs":return this._handleHandshake(t,e);case"qf":return void((r=this.queries[e.id])&&r._handleFetch(t,e.data,e.extra));case"qs":return void((r=this.queries[e.id])&&r._handleSubscribe(t,e.data,e.extra));case"qu":return;case"q":var r;if(!(r=this.queries[e.id]))return;return t?r._handleError(t):(e.diff&&r._handleDiff(e.diff),void(e.hasOwnProperty("extra")&&r._handleExtra(e.extra)));case"bf":return this._handleBulkMessage(t,e,"_handleFetch");case"bs":return this._handleBulkMessage(t,e,"_handleSubscribe");case"bu":return this._handleBulkMessage(t,e,"_handleUnsubscribe");case"nf":case"nt":return this._handleSnapshotFetch(t,e);case"f":return void((n=this.getExisting(e.c,e.d))&&n._handleFetch(t,e.data));case"s":return void((n=this.getExisting(e.c,e.d))&&n._handleSubscribe(t,e.data));case"u":return void((n=this.getExisting(e.c,e.d))&&n._handleUnsubscribe(t));case"op":var n;return void((n=this.getExisting(e.c,e.d))&&n._handleOp(t,e));default:f.warn("Ignoring unrecognized message",e)}},h.prototype._handleBulkMessage=function(e,t,r){if(t.data)for(var n in t.data){var o=t.data[n];(i=this.getExisting(t.c,n))&&(e?i[r](e):o.error?i[r](y(o.error)):i[r](null,o))}else if(Array.isArray(t.b))for(var a=0;a<t.b.length;a++){n=t.b[a];(i=this.getExisting(t.c,n))&&i[r](e)}else if(t.b)for(var n in t.b){var i;(i=this.getExisting(t.c,n))&&i[r](e)}else f.error("Invalid bulk message",t)},h.prototype._reset=function(){this.agent=null},h.prototype._setState=function(e,t){if(this.state!==e){if("connecting"===e&&"disconnected"!==this.state&&"stopped"!==this.state&&"closed"!==this.state||"connected"===e&&"connecting"!==this.state){var r=new l(d.ERR_CONNECTION_STATE_TRANSITION_INVALID,"Cannot transition directly from "+this.state+" to "+e);return this.emit("error",r)}for(var n in this.state=e,this.canSend="connected"===e,"disconnected"!==e&&"stopped"!==e&&"closed"!==e||this._reset(),this.startBulk(),this.queries){this.queries[n]._onConnectionStateChanged()}for(var o in this.collections){var a=this.collections[o];for(var n in a)a[n]._onConnectionStateChanged()}for(var n in this._snapshotRequests){this._snapshotRequests[n]._onConnectionStateChanged()}this.endBulk(),this.emit(e,t),this.emit("state",e,t)}},h.prototype.startBulk=function(){this.bulk||(this.bulk={})},h.prototype.endBulk=function(){if(this.bulk)for(var e in this.bulk){var t=this.bulk[e];this._sendBulk("f",e,t.f),this._sendBulk("s",e,t.s),this._sendBulk("u",e,t.u)}this.bulk=null},h.prototype._sendBulk=function(e,t,r){if(r){var n,o=[],a={},i=0;for(var u in r){var l=r[u];null==l?o.push(u):(a[u]=l,n=u,i++)}if(1===o.length){u=o[0];this.send({a:e,c:t,d:u})}else o.length&&this.send({a:"b"+e,c:t,b:o});if(1===i){var c=a[n];this.send({a:e,c:t,d:n,v:c})}else i&&this.send({a:"b"+e,c:t,b:a})}},h.prototype._sendAction=function(e,t,r){if(this._addDoc(t),this.bulk){var n=this.bulk[t.collection]||(this.bulk[t.collection]={}),o=n[e]||(n[e]={}),a=o.hasOwnProperty(t.id);return o[t.id]=r,a}var i={a:e,c:t.collection,d:t.id,v:r};this.send(i)},h.prototype.sendFetch=function(e){return this._sendAction("f",e,e.version)},h.prototype.sendSubscribe=function(e){return this._sendAction("s",e,e.version)},h.prototype.sendUnsubscribe=function(e){return this._sendAction("u",e)},h.prototype.sendOp=function(e,t){this._addDoc(e);var r={a:"op",c:e.collection,d:e.id,v:e.version,src:t.src,seq:t.seq};t.op&&(r.op=t.op),t.create&&(r.create=t.create),t.del&&(r.del=t.del),this.send(r)},h.prototype.send=function(e){this.debug&&f.info("SEND",JSON.stringify(e)),this.emit("send",e),this.socket.send(JSON.stringify(e))},h.prototype.close=function(){this.socket.close()},h.prototype.getExisting=function(e,t){if(this.collections[e])return this.collections[e][t]},h.prototype.get=function(e,t){var r=this.collections[e]||(this.collections[e]={}),o=r[t];return o||(o=r[t]=new n(this,e,t),this.emit("doc",o)),o},h.prototype._destroyDoc=function(e){var t=this.collections[e.collection];t&&(delete t[e.id],s.hasKeys(t)||delete this.collections[e.collection])},h.prototype._addDoc=function(e){var t=this.collections[e.collection];t||(t=this.collections[e.collection]={}),t[e.id]!==e&&(t[e.id]=e)},h.prototype._createQuery=function(e,t,r,n,a){var i=this.nextQueryId++,u=new o(e,this,i,t,r,n,a);return this.queries[i]=u,u.send(),u},h.prototype._destroyQuery=function(e){delete this.queries[e.id]},h.prototype.createFetchQuery=function(e,t,r,n){return this._createQuery("qf",e,t,r,n)},h.prototype.createSubscribeQuery=function(e,t,r,n){return this._createQuery("qs",e,t,r,n)},h.prototype.hasPending=function(){return!!(this._firstDoc(b)||this._firstQuery(b)||this._firstSnapshotRequest())},h.prototype.hasWritePending=function(){return!!this._firstDoc(m)},h.prototype.whenNothingPending=function(e){var r=this._firstDoc(b);if(r)r.once("nothing pending",this._nothingPendingRetry(e));else{var n=this._firstQuery(b);if(n)n.once("ready",this._nothingPendingRetry(e));else{var o=this._firstSnapshotRequest();o?o.once("ready",this._nothingPendingRetry(e)):t.nextTick(e)}}},h.prototype._nothingPendingRetry=function(e){var r=this;return function(){t.nextTick((function(){r.whenNothingPending(e)}))}},h.prototype._firstDoc=function(e){for(var t in this.collections){var r=this.collections[t];for(var n in r){var o=r[n];if(e(o))return o}}},h.prototype._firstQuery=function(e){for(var t in this.queries){var r=this.queries[t];if(e(r))return r}},h.prototype._firstSnapshotRequest=function(){for(var e in this._snapshotRequests)return this._snapshotRequests[e]},h.prototype.fetchSnapshot=function(e,t,r,n){"function"==typeof r&&(n=r,r=null);var o=this.nextSnapshotRequestId++,i=new a(this,o,e,t,r,n);this._snapshotRequests[i.requestId]=i,i.send()},h.prototype.fetchSnapshotByTimestamp=function(e,t,r,n){"function"==typeof r&&(n=r,r=null);var o=this.nextSnapshotRequestId++,a=new i(this,o,e,t,r,n);this._snapshotRequests[a.requestId]=a,a.send()},h.prototype._handleSnapshotFetch=function(e,t){var r=this._snapshotRequests[t.id];r&&(delete this._snapshotRequests[t.id],r._handleResponse(e,t))},h.prototype._handleLegacyInit=function(e){e.protocolMinor||this._initialize(e)},h.prototype._initializeHandshake=function(){this.send({a:"hs",id:this.id})},h.prototype._handleHandshake=function(e,t){if(e)return this.emit("error",e);this._initialize(t)},h.prototype._initialize=function(e){return 1!==e.protocol?this.emit("error",new l(d.ERR_PROTOCOL_VERSION_NOT_SUPPORTED,"Unsupported protocol version: "+e.protocol)):c.map[e.type]!==c.defaultType?this.emit("error",new l(d.ERR_DEFAULT_TYPE_MISMATCH,e.type+" does not match the server default type")):"string"!=typeof e.id?this.emit("error",new l(d.ERR_CLIENT_ID_BADLY_FORMED,"Client id must be a string")):(this.id=e.id,void this._setState("connected"))}}).call(this,r(150))},function(e,t){var r=["info","warn","error"];function n(){var e={};r.forEach((function(t){e[t]=console[t].bind(console)})),this.setMethods(e)}e.exports=n,n.prototype.setMethods=function(e){e=e||{};var t=this;r.forEach((function(r){"function"==typeof e[r]&&(t[r]=e[r])}))}},function(e,t,r){var n=r(4052),o=r(3793);function a(e,t,r,a,i,u){if(n.call(this,e,t,r,a,u),!o.isValidVersion(i))throw new Error("Snapshot version must be a positive integer or null");this.version=i}e.exports=a,a.prototype=Object.create(n.prototype),a.prototype._message=function(){return{a:"nf",id:this.requestId,c:this.collection,d:this.id,v:this.version}}},function(e,t){e.exports=function(e,t,r,n,o){this.id=e,this.v=t,this.type=r,this.data=n,this.m=o}},function(e,t,r){var n=r(4052),o=r(3793);function a(e,t,r,a,i,u){if(n.call(this,e,t,r,a,u),!o.isValidTimestamp(i))throw new Error("Snapshot timestamp must be a positive integer or null");this.timestamp=i}e.exports=a,a.prototype=Object.create(n.prototype),a.prototype._message=function(){return{a:"nt",id:this.requestId,c:this.collection,d:this.id,ts:this.timestamp}}},,function(e,t,r){"use strict";r.r(t),r.d(t,"Affix",(function(){return a.a})),r.d(t,"Anchor",(function(){return u})),r.d(t,"AutoComplete",(function(){return l.a})),r.d(t,"Alert",(function(){return c.a})),r.d(t,"Avatar",(function(){return s.a})),r.d(t,"BackTop",(function(){return f.a})),r.d(t,"Badge",(function(){return d.a})),r.d(t,"Breadcrumb",(function(){return p.a})),r.d(t,"Button",(function(){return h.a})),r.d(t,"Calendar",(function(){return b})),r.d(t,"Card",(function(){return m.a})),r.d(t,"Collapse",(function(){return v.a})),r.d(t,"Carousel",(function(){return g.a})),r.d(t,"Cascader",(function(){return _.a})),r.d(t,"Checkbox",(function(){return w.a})),r.d(t,"Col",(function(){return O.a})),r.d(t,"Comment",(function(){return P})),r.d(t,"ConfigProvider",(function(){return j.a})),r.d(t,"DatePicker",(function(){return C.a})),r.d(t,"Descriptions",(function(){return k.a})),r.d(t,"Divider",(function(){return S.a})),r.d(t,"Dropdown",(function(){return A.a})),r.d(t,"Drawer",(function(){return x.a})),r.d(t,"Empty",(function(){return N.a})),r.d(t,"Form",(function(){return T.a})),r.d(t,"Grid",(function(){return L})),r.d(t,"Input",(function(){return R.a})),r.d(t,"InputNumber",(function(){return I.a})),r.d(t,"Layout",(function(){return M.a})),r.d(t,"List",(function(){return F.a})),r.d(t,"message",(function(){return B.a})),r.d(t,"Menu",(function(){return U.a})),r.d(t,"Mentions",(function(){return V})),r.d(t,"Modal",(function(){return G.a})),r.d(t,"Statistic",(function(){return q.a})),r.d(t,"notification",(function(){return z.a})),r.d(t,"PageHeader",(function(){return K})),r.d(t,"Pagination",(function(){return Y.a})),r.d(t,"Popconfirm",(function(){return J.a})),r.d(t,"Popover",(function(){return $.a})),r.d(t,"Progress",(function(){return X.a})),r.d(t,"Radio",(function(){return Q.a})),r.d(t,"Rate",(function(){return ee})),r.d(t,"Result",(function(){return re})),r.d(t,"Row",(function(){return ne.a})),r.d(t,"Select",(function(){return oe.a})),r.d(t,"Skeleton",(function(){return ae.a})),r.d(t,"Slider",(function(){return ie.a})),r.d(t,"Space",(function(){return ue.a})),r.d(t,"Spin",(function(){return le.a})),r.d(t,"Steps",(function(){return ce.a})),r.d(t,"Switch",(function(){return se.a})),r.d(t,"Table",(function(){return fe.a})),r.d(t,"Transfer",(function(){return de.a})),r.d(t,"Tree",(function(){return pe.a})),r.d(t,"TreeSelect",(function(){return he.a})),r.d(t,"Tabs",(function(){return ye.a})),r.d(t,"Tag",(function(){return be.a})),r.d(t,"TimePicker",(function(){return me.a})),r.d(t,"Timeline",(function(){return ve.a})),r.d(t,"Tooltip",(function(){return ge.a})),r.d(t,"Typography",(function(){return _e.a})),r.d(t,"Upload",(function(){return we.a})),r.d(t,"version",(function(){return Ee})),r.d(t,"Image",(function(){return Pe.a})),r.d(t,"Segmented",(function(){return je.a})),r.d(t,"Cropper",(function(){return Ce.a})),r.d(t,"Sortable",(function(){return ke.a})),r.d(t,"Synopsis",(function(){return Ye})),r.d(t,"LegacyForm",(function(){return Je.a}));var n=r(0),o=r.n(n),a=(r(3358),r(3887)),i=(r(3370),r(2827)),u=(r(3359),i.a),l=r(3885),c=r(561),s=r(1527),f=r(3938),d=r(3619),p=r(3530),h=r(8),y=(r(99),r(1086),r(1701),r(2781),r(3067)),b=(r(3360),y.a),m=r(35),v=r(1462),g=r(3751),_=r(1670),w=r(214),O=r(27),E=(r(3371),r(2823)),P=(r(3361),E.a),j=r(562),C=r(242),k=r(3968),S=r(104),A=r(294),x=r(3866),N=r(948),T=r(22),D=(r(1339),r(1042)),L=(r(3362),D.a),R=r(13),I=r(240),M=r(1036),F=r(692),B=r(10),U=r(95),H=(r(3372),r(2825)),V=(r(3363),H.a),G=r(30),q=r(512),z=r(3791),W=(r(3373),r(2824)),K=(r(3364),W.a),Y=r(732),J=r(66),$=r(356),X=r(1308),Q=r(39),Z=(r(3374),r(2826)),ee=(r(3365),Z.a),te=(r(3375),r(2828)),re=(r(3366),te.a),ne=r(38),oe=r(36),ae=r(1073),ie=r(3613),ue=r(503),le=r(123),ce=r(3882),se=r(395),fe=r(40),de=r(1324),pe=r(1436),he=r(3891),ye=r(263),be=r(103),me=r(3959),ve=r(3787),ge=r(60),_e=r(538),we=r(176),Oe=(r(3367),r(2829)),Ee=(r(3368),Oe.a),Pe=r(327),je=r(2775),Ce=r(1422),ke=r(3783),Se=r(55),Ae=r.n(Se),xe=r(4315),Ne=r.n(xe),Te=r(61),De=r.n(Te),Le=r(164),Re=r.n(Le),Ie=r(2),Me=r.n(Ie),Fe=r(5),Be=r.n(Fe),Ue=r(306),He=r.n(Ue),Ve={scrollTop:function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},offset:function(e){if(!e.getClientRects().length)return{top:0,left:0};var t=e.getBoundingClientRect(),r=e.ownerDocument.defaultView;return{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}}},Ge=(r(3369),"undefined"!=typeof navigator?navigator.userAgent:""),qe=/yuque-desktop\/[\d.]+/i.test(Ge);function ze(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return We(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ke(e){var t,r,a=e.contents,i=void 0===a?[]:a,u=e.current,l=e.withHeader,c=e.offsetTop,s=e.enableProgressBar,f=e.onClickItem,d=Object(n.useRef)(null),p=(t=i,r=Object(n.useRef)(),Object(n.useEffect)((function(){r.current=t}),[t]),r.current),h=Object(n.useState)([]),y=Re()(h,2),b=y[0],m=y[1],v=Object(n.useState)(-1),g=Re()(v,2),_=g[0],w=g[1],O=Object(n.useMemo)((function(){return function(e){for(var t=[],r=e.length-1;r>=0;r--){for(var n=!1,o=r-1;o>=0&&1!==e.depth;o--)if(e[o].depth<e[r].depth){var a={id:r,pid:o,title:e[r].html,key:e[r].id,data:e[r]};t.unshift(a),n=!0;break}if(!n){var i={id:r,pid:-1,title:e[r].html,key:e[r].id,data:e[r]};t.unshift(i)}}return t}(i)}),[i]);return Object(n.useEffect)((function(){m((function(e){var t,r=[],n=null,o=ze(i.keys());try{var a=function(){var o=t.value,a=!1,u=!0;if(p&&p.length>0){var l=i[o].id,c=p.findIndex((function(e){return e.id===l}));-1!=c?(a=e[c].collapsed,u=e[c].display):n=o}for(var s=!1,f=o+1;f<i.length&&!(i[f].depth<=i[o].depth);f++)if(i[f].depth>i[o].depth&&i[f].text){s=!0;break}var d={collapsible:s,collapsed:a,display:u};r.push(d)};for(o.s();!(t=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}if(n){for(var u=[n],l=O[n].pid;-1!==l;)u.push(l),r[l].collapsed=!1,r[l].display=!0,l=O[l].pid;for(var c=n+1;c<i.length&&!(-1!==O[n].pid&&i[c].depth<=i[O[n].pid].depth);c++)r[c].collapsible&&!r[c].collapsed&&u.includes(O[c].pid)&&u.push(c);var s,f=ze(O.keys());try{for(f.s();!(s=f.n()).done;){var d=s.value;u.includes(O[d].pid)&&(r[d].display=!0)}}catch(e){f.e(e)}finally{f.f()}}return r}))}),[i]),Object(n.useEffect)((function(){if(b.length>0&&u<b.length)if(-1===u||b[u].display)w(u);else{for(var e=O[u].pid;!b[e].display;)e=O[e].pid;w(e)}else w(-1)}),[O,u,b]),Object(n.useEffect)((function(){return e.autoAdjustPosition&&u>0&&_&&function(e){var t=e.querySelector(".larkui-synopsis-item-active");if(t){var r=e.scrollHeight-e.clientHeight,n=e.clientHeight,o=0;t.offsetTop>n?(o=(o=t.offsetTop-n/2+t.clientHeight/2+16)>=r?r:o,e.scrollTop=o):t.offsetTop>e.clientHeight/2?(o=t.offsetTop+16-e.clientHeight/2+t.clientHeight/2,e.scrollTop=o):e.scrollTop=0}}(d.current),function(){}}),[u,e.autoAdjustPosition,e.height,_]),o.a.createElement("div",{className:"larkui-synopsis-wrap ".concat(e.className),style:e.style,ref:d,"data-testid":"larkui-synopsis"},o.a.createElement("ul",{className:"larkui-synopsis"},i.map((function(e,t){var r={};return qe||(r.href="#".concat(encodeURIComponent(e.id))),b[t]&&b[t].display&&o.a.createElement("li",{className:Be()({"larkui-synopsis-item":!0,"larkui-synopsis-item-active":_===t,"larkui-synopsis-progress-bar":s,"larkui-synopsis-progress-bar-highlighted":_===t&&s}),key:t},o.a.createElement("span",{className:Be()(De()({"larkui-synopsis-item-collapsible-link":b[t].collapsible,"larkui-synopsis-item-link":!b[t].collapsible},"larkui-synopsis-item-link-".concat(e.depth),!0))},b[t].collapsible&&o.a.createElement("a",{onClick:function(e){!function(e,t,r){var n=He()(b);n[t].collapsed=!n[t].collapsed;for(var o=t+1;o<i.length&&!(i[o].depth<=i[t].depth);o++){var a=O[o],u=n[o];if(!a||!u)break;if(a.pid!==t)if(r){for(var l=a.pid,c=!1;l!==t&&-1!==l;)b[l].collapsed&&(c=!0),l=O[l].pid;u.display=!c&&!b[a.pid].collapsed}else u.display=!1;else u.display=r}m(n)}(0,t,!b[t+1].display)}},o.a.createElement(Ne.a,{rotate:b[t].collapsed?270:0,style:{fontSize:"10px",margin:"5px",color:"#8c8c8c"}})),o.a.createElement("a",Ae()({onClick:function(t){!function(e,t){if(e.preventDefault(),f)f({event:e,id:t});else if(qe){var r=document.getElementById(t);if(!r)return;r.scrollIntoView(!0)}else{var n=Ve.scrollTop(),o=encodeURIComponent(t);window.location.hash=o;var a=document.getElementById(o);if(!a)return;if(a.scrollIntoView(),l){var i=Ve.scrollTop();i<n&&window.scrollTo(0,i-60)}else if(c>0){var u=Ve.scrollTop();window.scrollTo(0,u-c)}}}(t,e.id)}},r,{title:e.text}),o.a.createElement("span",null,e.text))))}))))}Ke.defaultProps={offsetTop:0},Ke.propTypes={className:Me.a.string,style:Me.a.object,contents:Me.a.array.isRequired,current:Me.a.number,height:Me.a.number,autoAdjustPosition:Me.a.bool,withHeader:Me.a.bool,offsetTop:Me.a.number,enableProgressBar:Me.a.bool,onClickItem:Me.a.func};var Ye=Ke,Je=r(53)},function(e,t,r){"use strict";r(144);var n=r(60),o=(r(37),r(8)),a=r(0),i=r.n(a),u=r(2),l=r.n(u),c=r(62),s=r.n(c),f=r(1530),d=r(5),p=r.n(d),h=r(261),y=r(4043),b=r(1007),m=r(146),v=r(32),g=(r(185),r(66)),_=(r(57),r(13)),w=(r(154),r(22)),O=(r(305),r(103)),E=(r(44),r(10)),P=r(718),j=r.n(P),C=r(229),k=r(746);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function A(){A=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(D([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==S(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(S(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function x(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function D(e){var t,r=e.version,n=e.active,o=e.withUser,a=void 0===o||o,u=e.disableVersionStatus;return i.a.createElement("div",{className:p()("doc-version",{"doc-version-active":n})},i.a.createElement("div",{className:"doc-version-basic"},i.a.createElement("span",{className:"doc-version-name"},i.a.createElement(C.a,{time:r.created_at})),!u&&r.local&&r.draft&&i.a.createElement(O.a,{className:"doc-version-status"},__("离线保存")),!u&&!r.local&&!r.draft&&i.a.createElement(O.a,{className:"doc-version-status"},__("已发布")),!u&&r.origin===k.ORIGIN.cache&&i.a.createElement(O.a,{className:"doc-version-status"},__("离线缓存备份"))),a&&i.a.createElement("div",{className:"doc-version-user"},null==r||null===(t=r.user)||void 0===t?void 0:t.name))}function L(e){var t,r=e.version,o=e.active,u=N(Object(a.useState)(!1),2),l=u[0],c=u[1],s=N(Object(a.useState)(!1),2),f=s[0],d=s[1],h=N(Object(a.useState)(r.name||"版本名"),2),y=h[0],b=h[1],m=N(w.a.useForm(),1)[0],v=function(){var t,n=(t=A().mark((function t(){var n,o;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.validateFields();case 3:if(n=t.sent,(o=n.name.trim())===r.name){t.next=8;break}return t.next=8,e.onUpdate(r,{name:o});case 8:b(o),c(!1),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){x(a,n,o,i,u,"next",e)}function u(e){x(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return i.a.createElement("div",{className:p()("doc-version",{"doc-version-active":o}),onMouseEnter:function(){l||d(!0)},onMouseLeave:function(){d(!1)}},i.a.createElement("div",{className:"doc-version-basic"},l?i.a.createElement(w.a,{form:m,layout:"vertical"},i.a.createElement(w.a.Item,{initialValue:y,name:"name",rules:[{required:!0,message:__("请输入版本名称")},{max:40,message:__("最多 40 个字符")}],style:{marginBottom:0}},i.a.createElement(_.a,{className:"doc-version-name-input",onPressEnter:v,onBlur:v}))):i.a.createElement("span",{className:"doc-version-name",title:y},y)),i.a.createElement("div",{className:"doc-version-time"},i.a.createElement(C.a,{time:r.created_at})),i.a.createElement("div",{className:"doc-version-user"},null==r||null===(t=r.user)||void 0===t?void 0:t.name),f&&i.a.createElement("div",{className:"doc-version-actions"},i.a.createElement("span",{className:"doc-version-action",onClick:function(){c(!0),d(!1)}},i.a.createElement(n.a,{title:__("修改版本名称")},i.a.createElement("span",{className:"larkicon larkicon-edit"}))),i.a.createElement(g.a,{title:__("确认删除这个版本吗？"),onConfirm:function(){e.onDelete(r)},okText:__("删除"),cancelText:__("取消"),placement:"topRight"},i.a.createElement("span",{className:"doc-version-action"},i.a.createElement(n.a,{title:__("删除该版本")},i.a.createElement("span",{className:"larkicon larkicon-delete"}))))))}D.defaultProps={withUser:!0,active:!1},D.propTypes={version:l.a.object.isRequired,active:l.a.bool,withUser:l.a.bool},L.propTypes={version:l.a.object.isRequired,active:l.a.bool,onDelete:l.a.func.isRequired,onUpdate:l.a.func.isRequired};var R={NormalVersion:D,CopyUrl:function(e){var t=e.version;return e.doc,i.a.createElement(o.a,{"data-testid":"copy-version-link",onClick:function(){j()("".concat(window.location.origin,"/r/doc_versions/").concat(t.id)),E.a.success(__("链接已复制"))}},__("复制版本链接"))},NamedVersion:L,Name:function(e){var t=e.version,r=e.category,n=e.maxWidth,o=i.a.createElement(C.a,{time:t.created_at}),a={};return n&&(a.maxWidth=n),i.a.createElement("span",{className:"doc-version-name",style:a},"named_version"===r&&t.name||o)}};R.Name.propTypes={version:l.a.object.isRequired,category:l.a.string,maxWidth:l.a.number};var I=R,M=r(3944),F=(r(1009),r(692)),B=(r(688),r(214)),U=(r(851),r(263)),H=r(43),V=r(4296),G=r(578);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function z(){z=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==q(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(q(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function W(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){K(a,n,o,i,u,"next",e)}function u(e){K(a,n,o,i,u,"throw",e)}i(void 0)}))}}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){X(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==q(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return ee(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var te=s()("doc:history:nav:vm");var re=function(e){var t=e.doc,r=e.docDomain,n=void 0===r?"Doc":r,o=e.defaultActiveVersion,i=e.autoActiveFirst,u=e.onVersionChange,l=e.docVersionProxy,c=e.limit,s=e.defaultCategory,f=void 0===s?"all":s,d=e.versionPublished,p=void 0!==d&&d,h=e.offlineLocalStorageVersion,y=void 0!==h&&h,m=Object(b.b)();c=c||200;var g=Q(Object(a.useState)(f),2),_=g[0],w=g[1],O=Q(Object(a.useState)(null),2),E=O[0],P=O[1],j=Q(Object(a.useState)([]),2),C=j[0],k=j[1],S=Q(Object(a.useState)(!1),2),A=S[0],x=S[1],N=Q(Object(a.useState)(!0),2),T=N[0],D=N[1],L=Q(Object(a.useState)({named:"named_version"===f,published:p,offlineStorageVersion:y}),2),R=L[0],I=L[1],M=function(e){I((function(t){return $($({},t),e)}))},F=function(){var e=Y(z().mark((function e(r){var o,a,i,u,s,f,d,p,h;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.named,a=r.published,i=r.offlineStorageVersion,u=r.offset,D(!0),s={doc_id:t.id,doc_type:n,offset:u,limit:c},o&&(s.named=!0),!o&&a&&(s.draft=0),e.next=7,l.find(s);case 7:if(f=e.sent,d=[],!(v.c&&m&&i)||o){e.next=20;break}return e.prev=10,e.next=13,G.a.getDocVersions(s);case 13:p=e.sent,d=p.data,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),console.log(e.t0);case 20:return(h=[].concat(W(d),W(f))).sort((function(e,t){var r=new Date(e.created_at);return new Date(t.created_at).getTime()-r.getTime()})),x(h.length===c),D(!1),k((function(e){return[].concat(W(e),W(h))})),e.abrupt("return",h);case 26:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Y(z().mark((function e(){var t;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(null),k([]),x(!1),e.next=5,F($($({},R),{},{offset:0}));case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(e){P(e),u({version:e,isDefault:!1})},H=function(){var e=Y(z().mark((function e(t){var r,n;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.unname({id:t.id});case 2:te("deleteVersion success: ",t.id),r=C.findIndex((function(e){return e.id===t.id})),n=null,r===C.length-1?C.length>=2&&(n=C[0]):n=C[r+1],U(n),k(C.filter((function(e){return e.id!==t.id})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Y(z().mark((function e(t,r){var n,o;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.name({id:t.id,name:r.name});case 2:te("updateVersion success:",{id:t.id,params:r}),n=W(C),o=n.findIndex((function(e){return e.id===t.id})),n.splice(o,1,$($({},n[o]),{},{name:r.name})),k(n),u({version:$($({},t),{},{name:r.name}),isDefault:!1});case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),q=function(){var e=Y(z().mark((function e(){var t,r;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:t=e.sent,te("initialized: ",t),t.length>0&&(o&&!E&&P(o),i&&(r=t[0],P(r),u({version:r,isDefault:!0})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){q()}),[R,m]),{state:{currentCategory:_,currentVersion:E,filters:R,hasMore:A,loading:T,versions:C},switchVersion:U,switchCategory:function(e){w(e),M({named:"named_version"===e,published:!1})},changePublishStatus:function(e){M({published:e})},changeOfflineStorageStatus:function(e){M({offlineStorageVersion:e})},loadMore:function(){return Y(z().mark((function e(){return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,F($($({},R),{},{offset:C.length}));case 3:case"end":return e.stop()}}),e)})))()},nameVersion:V,unnameVersion:H}},ne="HistoryNavigator-module_historyNav_0uTs5",oe="HistoryNavigator-module_tabs_ys1En",ae="HistoryNavigator-module_search_JoWgi",ie="HistoryNavigator-module_versionFilter_BaQHr",ue="HistoryNavigator-module_versions_gHGm6",le="HistoryNavigator-module_desktopOnline_EDBEm",ce="HistoryNavigator-module_desktopOffline_BLIlM",se="HistoryNavigator-module_version_Oisjl",fe="HistoryNavigator-module_currentVersion_QjWMY",de="HistoryNavigator-module_namedVersions_zbDbQ",pe="HistoryNavigator-module_empty_jqTUJ",he="HistoryNavigator-module_emptyVersions_bBFPt",ye="HistoryNavigator-module_tip_xRD8q",be="HistoryNavigator-module_withChecked_ifTnW",me="HistoryNavigator-module_categoryTip_5pKSF";function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function ge(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ve(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ve(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _e=s()("doc:history:nav:view");function we(e){var t=Object(b.b)(),r=re({doc:e.doc,defaultActiveVersion:e.defaultActiveVersion,autoActiveFirst:e.autoActiveFirst,docDomain:e.docDomain,onVersionChange:e.onVersionChange,docVersionProxy:e.docVersionProxy,limit:e.limit,defaultCategory:e.defaultCategory,versionPublished:e.versionPublished,offlineLocalStorageVersion:v.c}),n=r.state,o=n.versions,u=n.currentVersion,l=n.currentCategory,c=n.filters,s=n.loading;_e(r.state);return Object(a.useEffect)((function(){e.forceActiveCategory&&(_e("category change to named_version, force switch tab"),r.switchCategory(e.forceActiveCategory))}),[e.forceActiveCategory]),i.a.createElement("div",{"data-testid":e["data-testid"],className:p()(ne,e.className,ge({},be,e.withChecked))},e.withSearch&&i.a.createElement("div",{className:ae},i.a.createElement(_.a.Search,{placeholder:__("搜索")})),i.a.createElement(U.a,{activeKey:l,className:oe,onChange:function(t){r.switchCategory(t),e.onTabChange(t)}},i.a.createElement(U.a.TabPane,{tab:__("全部记录"),key:"all"}),t&&i.a.createElement(U.a.TabPane,{tab:__("版本"),key:"named_version"})),e.allCategoryTip&&"all"===l&&i.a.createElement("div",{className:me},e.allCategoryTip),e.withVersionFilter&&!c.named&&i.a.createElement(i.a.Fragment,null,t&&i.a.createElement("div",{className:ie},i.a.createElement(B.a,{checked:c.published,onChange:function(e){r.changePublishStatus(e.target.checked)}},__("仅显示已发布的历史记录"))),v.c&&t&&i.a.createElement("div",{className:ie},i.a.createElement(B.a,{checked:c.offlineStorageVersion,onChange:function(e){r.changeOfflineStorageStatus(e.target.checked)}},__("显示所有本地存储版本")))),!s&&0===o.length&&i.a.createElement("div",{className:pe},i.a.createElement("ul",{className:he},i.a.createElement("li",null,i.a.createElement("img",{width:"140",height:"82",src:V.b})),"named_version"===l?i.a.createElement("li",{className:ye},__("暂无版本记录"),i.a.createElement("a",{href:"Table"===e.doc.type?"https://www.yuque.com/yuque/cqb86p/dhgmr83geox3mcec#IPy0x":"https://www.yuque.com/yuque/thyzgp/fs0x2z",target:"_blank","data-desktoptarget":"_browser"},i.a.createElement(H.b,{name:"help",width:16}))):i.a.createElement("li",{className:ye},i.a.createElement("span",null,__("暂无记录"))))),o.length>0&&i.a.createElement("div",{className:p()(ue,ge(ge(ge({},de,c.named),le,v.c&&t),ce,v.c&&!t))},i.a.createElement(F.a,{justify:"block",bordered:!1,split:!1,dataSource:o,renderItem:function(t){return i.a.createElement("div",{"data-version":"".concat(t.id),onClick:function(){u&&t.id===u.id?"function"==typeof e.onVersionDeselect&&(e.onVersionDeselect(t),r.switchVersion(null)):r.switchVersion(t)}},function(t){var n=u&&u.id===t.id;if("function"==typeof e.renderVersion)return e.renderVersion({version:t,active:n,named:c.named});var o=null;return o="named_version"===l?i.a.createElement(I.NamedVersion,{version:t,active:n,onDelete:r.unnameVersion,onUpdate:r.nameVersion}):i.a.createElement(I.NormalVersion,{version:t,active:n,withUser:!0,disableVersionStatus:e.disableVersionStatus}),i.a.createElement("div",{className:p()(se,ge({},fe,n))},o)}(t))},loading:s,showLoadingMore:r.state.hasMore,onLoadMore:r.loadMore})))}we.defaultProps={defaultActiveVersion:null,autoActiveFirst:!0,withSearch:!1,withVersionFilter:!1,onTabChange:function(){}},we.propTypes={"data-testid":l.a.string,className:l.a.string,doc:l.a.object.isRequired,docDomain:l.a.string.isRequired,forceActiveCategory:l.a.oneOf(["all","named_version"]),defaultActiveVersion:l.a.object,autoActiveFirst:l.a.bool,withSearch:l.a.bool,withVersionFilter:l.a.bool,withChecked:l.a.bool,onVersionChange:l.a.func.isRequired,onVersionDeselect:l.a.func,onTabChange:l.a.func,renderVersion:l.a.func,docVersionProxy:l.a.object.isRequired,limit:l.a.number,defaultCategory:l.a.oneOf(["all","named_version"]),versionPublished:l.a.bool,allCategoryTip:l.a.object,disableVersionStatus:l.a.bool};var Oe=we,Ee=(r(711),r(356)),Pe=r(1077),je=r(932),Ce="VersionToolbar-module_toolbar_jTI6g",ke="VersionToolbar-module_toolbarActions_43Fcf",Se="VersionToolbar-module_diffHead_7EP0a",Ae="VersionToolbar-module_diffBase_ylwWT",xe="VersionToolbar-module_diffPlaceholder_iPfAA",Ne="VersionToolbar-module_diffWith_FI0JB",Te="VersionToolbar-module_diffTip_nQ9S2",De="VersionToolbar-module_diffTipAdd_fjXD0",Le="VersionToolbar-module_diffTipDelete_VzJsd",Re="VersionToolbar-module_versionSelector_lPRPy",Ie="VersionToolbar-module_versionSelectorHistoryNav_f4rcN",Me="VersionToolbar-module_version_tDu5-",Fe="VersionToolbar-module_selectedVersion_Odsmy";function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ue(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var He=s()("doc:history:toolbar");function Ve(e){var t=e.doc,r=e.headVersion,n=Be(Object(a.useState)("all"),2),o=n[0],u=n[1],l=Be(Object(a.useState)(null),2),c=l[0],s=l[1],f=Be(Object(a.useState)(!1),2),d=f[0],p=f[1],h=function(t){"content"===t?(e.showContent(r),s(null)):e.showDiff(r,c)};return He("select version:",c),i.a.createElement("div",{className:"".concat(Ce," ").concat(e.className||""),"data-testid":"version-toolbar"},i.a.createElement("div",{className:ke},i.a.createElement(O.a,{className:Se,onClick:function(){h("content")},"data-testid":"diff-head"},i.a.createElement(I.Name,{version:r,category:e.navigatorCategory,maxWidth:160})),i.a.createElement("span",{className:Ne},__("与#doc_version_diff")),i.a.createElement(Ee.a,{noArrow:!0,placement:"bottomLeft",trigger:["click"],overlayClassName:Re,content:i.a.createElement(Oe,{"data-testid":"diff-history-nav",className:Ie,doc:t,docDomain:e.docDomain,autoActiveFirst:!1,withVersionFilter:t.type!==m.DOC_TYPES.Table,withChecked:!0,defaultActiveVersion:null,onVersionChange:function(t){var n=t.version;t.isDefault?He("vision change, caused by default, ignore"):(p(!1),s(n),e.showDiff(r,n))},onVersionDeselect:function(){h("content")},onTabChange:function(e){u(e)},renderVersion:function(e){var t=e.version,r=e.active,n=null;return n="named_version"===o?i.a.createElement("span",null,t.name):i.a.createElement(I.NormalVersion,{version:t,active:r,withUser:!1}),i.a.createElement("div",{className:Me},r&&i.a.createElement("div",{className:Fe},i.a.createElement(Pe.default,null)),n)},docVersionProxy:e.docVersionProxy}),visible:d,onVisibleChange:p},i.a.createElement(O.a,{className:Ae,"data-testid":"diff-version-selector-trigger"},c?i.a.createElement(I.Name,{version:c,category:o}):i.a.createElement("span",{className:xe},__("请选择历史")),i.a.createElement(je.default,{style:{marginLeft:"8px"}}))),__("对比#doc_version_diff")),c&&i.a.createElement("div",{className:Te},i.a.createElement(O.a,{className:De},__("增加的内容")),i.a.createElement(O.a,{className:Le},__("删除的内容"))))}Ve.propTypes={className:l.a.string,doc:l.a.object.isRequired,docDomain:l.a.oneOf(["Doc","Doclet"]),navigatorCategory:l.a.oneOf(["all","named_version"]),headVersion:l.a.object.isRequired,showContent:l.a.func.isRequired,showDiff:l.a.func.isRequired,docVersionProxy:l.a.object.isRequired};var Ge=Object(h.b)(Ve,!0);function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function ze(){ze=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==qe(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(qe(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function We(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Ke(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){We(a,n,o,i,u,"next",e)}function u(e){We(a,n,o,i,u,"throw",e)}i(void 0)}))}}function Ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Je(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Je(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var $e=s()("doc:history:viewer:vm");var Xe=function(e){var t=e.doc,r=(e.docType,e.docDomain),n=e.onRevert,o=e.onReverted,i=e.docVersionProxy,u=e.docProxy,l=e.docletProxy,c=Object(a.useRef)({}),s=Ye(Object(a.useState)(null),2),f=s[0],d=s[1],p=Ye(Object(a.useState)(null),2),h=p[0],y=p[1],b=Ye(Object(a.useState)(null),2),m=b[0],g=b[1],_=Ye(Object(a.useState)("content"),2),w=_[0],O=_[1],P=Ye(Object(a.useState)("all"),2),j=P[0],C=P[1],k=Ye(Object(a.useState)(null),2),S=k[0],A=k[1],x=function(){var e=Ke(ze().mark((function e(r,n){var o,a;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.current[r]){e.next=2;break}return e.abrupt("return",c.current[r]);case 2:if(!v.c||!n){e.next=9;break}return e.next=5,G.a.getOneDocVersionsById({id:r,doc_id:t.id});case 5:a=e.sent,o=a.data,e.next=12;break;case 9:return e.next=11,i.findOne({id:r,doc_id:t.id});case 11:o=e.sent;case 12:return c.current[r]=o,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),N=function(){var e=Ke(ze().mark((function e(t){var r;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $e("vm.showContent:",t),O("content"),e.next=4,x(t.id,t.local);case 4:r=e.sent,y(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Ke(ze().mark((function e(t,r){var n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($e("vm.showDiff:",{head:t,base:r}),r){e.next=3;break}return e.abrupt("return");case 3:return O("diff"),e.next=6,x(r.id,r.local);case 6:n=e.sent,g(n);case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),D=function(){y(null),d(null),O("content")},L=function(){var e=Ke(ze().mark((function e(a){var i,s,f=arguments;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=f.length>1&&void 0!==f[1]&&f[1],$e("on revert:",a),"function"!=typeof n){e.next=6;break}return s=c.current[a.id],n(s),e.abrupt("return");case 6:if(e.prev=6,"Doclet"!==r){e.next=12;break}return e.next=10,l.rollback({id:t.id,version_id:a.id});case 10:e.next=14;break;case 12:return e.next=14,u.rollback({id:t.id,version_id:a.id,force:i});case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(6),"LockedByOther"===e.t0.code?E.a.error(__("有其它用户正在编辑，恢复可能会导致对方编辑的内容丢失，请联系他们退出编辑后再进行恢复")):"LockedBeMe"===e.t0.code?E.a.error(e.t0.message):E.a.error(__("你正在其它浏览器窗口编辑该文档，请关闭窗口再进行恢复")),e.abrupt("return");case 20:$e("reverted to ",a),"function"==typeof o?o(a):E.a.success(__("恢复成功，你可以进入编辑页发布文档"));case 22:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t){return e.apply(this,arguments)}}();return{state:{currentVersion:f,currentVersionDetail:h,baseVersionDetail:m,currentNavigatorCategory:j,forceActiveCategory:S,currentView:w},switchVersion:function(e){return Ke(ze().mark((function t(){var r;return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.version,$e("vm.switchVersion: ",{version:r}),D(),!r){t.next=7;break}return d(r),t.next=7,N(r);case 7:case"end":return t.stop()}}),t)})))()},switchNavigatorCategory:function(e){var t=e.category,r=e.force;$e("vm.switchNavigatorCategory: ",{category:t,force:r}),C(t),r&&A(t),D()},isReadyToDisplayDiff:function(){return"diff"===w&&m},showContent:N,showDiff:T,showAction:!0,revert:L}},Qe=r(4311);function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function et(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Ze(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ze(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tt=s()("doc:history:viewer");function rt(e){var t=e.layout,r=e.doc,u=e.docDomain,l=e.defaultCategory,c=e.versionPublished,s=Xe({doc:e.doc,docDomain:e.docDomain,docType:e.docType,onRevert:e.onRevert,onReverted:e.onReverted,docVersionProxy:e.docVersionProxy,docProxy:e.docProxy,docletProxy:e.docletProxy}),d=s.state,g=d.currentVersion,_=d.currentVersionDetail,w=d.currentNavigatorCategory,O=d.forceActiveCategory,E=d.currentView,P=d.baseVersionDetail;Object(a.useEffect)((function(){return document.body.style.overflow="hidden",function(){document.body.style.removeProperty("overflow")}}),[]),tt("render",s.state);var j,C,k,S=Object(b.b)(),A=Object(y.b)().editMode,x=i.a.createRef();return i.a.createElement("div",{ref:x,className:"".concat(Qe.a[t]," ").concat(e.className||""),"data-testid":"history-viewer"},i.a.createElement("div",{className:p()(Qe.a.head,et({},Qe.a.isInsetTitleBar,v.e))},i.a.createElement("div",{className:Qe.a.headNav},i.a.createElement(f.default,{"data-testid":"history-back",className:Qe.a.back,onClick:e.onCancel}),i.a.createElement("span",{className:Qe.a.pageTitle},__("历史记录"))),s.showAction&&i.a.createElement("div",{className:Qe.a.headActions},g?g.name?i.a.createElement(i.a.Fragment,null,"all"===w&&i.a.createElement("span",{className:Qe.a.versionNameTip},__("已存为版本："),i.a.createElement("span",{className:Qe.a.versionName},g.name)),"Doc"===u&&i.a.createElement(I.CopyUrl,{version:g})):i.a.createElement(M.a,{version:g,docVersionProxy:e.docVersionProxy,onCreated:function(e){tt("named version created:",e),s.switchNavigatorCategory({category:"named_version",force:!0})},getContainer:function(){return x.current||document.body}}):null,(S||A)&&(j=!(_&&_.content),C="named_version"===w?__("恢复此版本"):__("恢复此记录"),k=i.a.createElement(o.a,{"data-testid":"history-revert",type:"primary",onClick:function(){s.revert(g)},disabled:j,className:Qe.a.restoreButton},C),j?i.a.createElement(n.a,{title:__("内容为空，无需恢复")},k):k))),i.a.createElement(h.a,{withFallbackUI:!0},i.a.createElement("div",{className:Qe.a.body},i.a.createElement("div",{className:Qe.a.aside,"data-testid":"history-aside-nav"},i.a.createElement(Oe,{"data-testid":"main-history-nav",defaultCategory:l,versionPublished:c,doc:r,docDomain:e.docDomain,autoActiveFirst:!0,withVersionFilter:r.type!==m.DOC_TYPES.Table,allCategoryTip:r.type===m.DOC_TYPES.Table&&i.a.createElement("span",null,__("历史记录每10分钟保存一次")),disableVersionStatus:r.type===m.DOC_TYPES.Table,forceActiveCategory:O,docVersionProxy:e.docVersionProxy,onVersionChange:s.switchVersion,onTabChange:function(e){s.switchNavigatorCategory({category:e,force:!1})},limit:e.limit})),i.a.createElement("div",{className:Qe.a.main},_&&i.a.createElement("div",{className:"Doc"===r.type?Qe.a.fixed:Qe.a.adapt},"Doc"===r.type&&i.a.createElement("div",{className:Qe.a.toolbar},i.a.createElement(Ge,{key:g.id,doc:r,docDomain:e.docDomain,navigatorCategory:w,headVersion:g,showContent:s.showContent,showDiff:s.showDiff,docVersionProxy:e.docVersionProxy})),i.a.createElement("div",{className:"".concat(Qe.a.content),"data-testid":"history-content","data-history-content":"true"},i.a.createElement("div",{className:"".concat(Qe.a.document," ").concat(Qe.a[r.type.toLowerCase()])},"content"===E&&i.a.createElement(h.a,{withFallbackUI:!0},e.renderVersion(_)),s.isReadyToDisplayDiff()&&e.renderDiff(_,P))))))))}rt.defaultProps={layout:"fullscreen",docDomain:"Doc",limit:200},rt.propTypes={layout:l.a.oneOf(["fullscreen"]),className:l.a.string,doc:l.a.object.isRequired,docDomain:l.a.oneOf(["Doc","Doclet"]),renderVersion:l.a.func.isRequired,renderDiff:l.a.func.isRequired,onCancel:l.a.func.isRequired,onRevert:l.a.func,onReverted:l.a.func,docProxy:l.a.object.isRequired,docletProxy:l.a.object.isRequired,docVersionProxy:l.a.object.isRequired,limit:l.a.number,defaultCategory:l.a.oneOf(["all","named_version"]),versionPublished:l.a.bool};t.a=Object(h.b)(rt,!0)},,function(e,t,r){"use strict";r(44);var n=r(10),o=r(62),a=r.n(o),i=r(532),u=r(4118),l=r(1386),c=r(1326),s=r(182),f=r(3739),d=r(287),p=r(52),h=r(3607),y=r(190),b=r(237),m=r.n(b),v=r(4115),g=r(184),_=r(3957),w={adaptDocPreviewImageToFormData:function(e){for(var t=new FormData,r=e.replace(/^data:image\/\w+;base64,/,""),n=window.atob(r),o=new Uint8Array(n.length),a=0;a<n.length;a++)o[a]=n.charCodeAt(a);var i=new Blob([o],{type:"image/png"});return t.append("file",i,"image.png"),t}};Object.assign(w,_.a);var O=w;function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function P(){P=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(D([])));O&&O!==r&&n.call(O,i)&&(_=O);var j=g.prototype=m.prototype=Object.create(_);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==E(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(E(t)+" is not iterable")}return v.prototype=g,o(j,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function j(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function k(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}function S(e,t,r){return t=x(t),function(e,t){if(t&&("object"==E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,A()?Reflect.construct(t,r||[],x(e).constructor):t.apply(e,r))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}var T=a()("editor:doc.biz"),D=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=S(this,t,[e,n])).dispatch=o,r.storage=g.a,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(t,e),r=t,n=[{key:"doSaveOutdatedDocVersion",value:(a=P().mark((function e(t){return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.docVersions.create(t);case 2:case"end":return e.stop()}}),e)})),i=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=a.apply(e,t);function i(e){j(o,r,n,i,u,"next",e)}function u(e){j(o,r,n,i,u,"throw",e)}i(void 0)}))},function(e){return i.apply(this,arguments)})}],o=[{key:"uploadCover",value:function(e){var t=e.image,r=e.doc_id,n=window.navigator.userAgent,o=m.a.detect(n);if(o.msie||o.msedge)return Promise.resolve(null);var a="/api/upload/attach?attachable_type=Doc&attachable_id=".concat(r,"&type=image"),i=O.adaptDocPreviewImageToFormData(t);return new Promise((function(e,t){Object(y.ajax)({url:a,data:i,dataType:"json",success:function(t){T("upload cover success",t.data),e(t.data.url)},error:function(){T("upload cover error"),t(new Error("DocEditorBiz.uploadCover failed."))},method:"POST",processData:!1})}))}}],n&&C(r.prototype,n),o&&C(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,a,i}(v.a),L=D;function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=window.appData.callbackURL;if(r){if("SAME"===r)return;e=r}e&&(t.beforeRedirect&&t.beforeRedirect(),window.location.href=e)}var I=r(3883),M=r(4331),F=r.n(M),B=r(228),U=r.n(B),H=r(88),V=r(306),G=r.n(V),q=r(371),z=r.n(q);function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y(n.key),n)}}function Y(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:t+""}function J(e,t,r){return t=X(t),function(e,t){if(t&&("object"==W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$()?Reflect.construct(t,r||[],X(e).constructor):t.apply(e,r))}function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($=function(){return!!e})()}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}var Z=15728640;function ee(e){var t=JSON.stringify(e);return function(e){return(new TextEncoder).encode(e).length>Z}(t=function(e){return e.replace(/"url":"data:image\/(jpeg|png|svg|\*);base64[^"]+"/g,'"url":""')}(t))?{error:"DataLimitError"}:{data:JSON.parse(t)}}var te=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=J(this,t)).doc=e,n.clientId=r?r.clientId:z()(),r&&r instanceof t&&(n.parent=r),n.subCollabDoc={},n._init(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(t,e),r=t,(n=[{key:"data",get:function(){return this.collabId?this.doc.data[this.collabId]:this.doc.data}},{key:"commands",get:function(){var e,t;return this.collabId?null===(t=this.doc.data[this.collabId])||void 0===t?void 0:t.commands:null===(e=this.doc.data)||void 0===e?void 0:e.commands}},{key:"setClientId",value:function(e){this.clientId=e}},{key:"_init",value:function(){var e=this;this.doc.on("op",(function(t,r){if(e.clientId!==r&&0!==(t=e._pickOps(t)).length){var n=t.filter((function(e){return"commands"===e.p[0]&&e.li})),o=t.filter((function(e){return"commands"!==e.p[0]}));n.length>0&&e.emit("command",n.map((function(e){return e.li}))),o.length>0&&e.emit("op",o)}}))}},{key:"_setCollabId",value:function(e){this.parent&&(this.collabId=e)}},{key:"createSub",value:function(e){if(this.parent)throw new Error("只支持1级子协同");if(void 0===e)throw new Error("需要传递 collabId");this.subCollabDoc[e]&&this._collabIdExistError();var r=new t(this.doc,this);return r._setCollabId(e),this.subCollabDoc[e]=r,r}},{key:"submitOp",value:function(e){this.parent&&(e=this._transformToParentOp(e));try{var t=ee(e);if(t.data&&!t.error)e=t.data;else if("DataLimitError"===t.error)return void this.emit("DataLimitError")}catch(e){}this.doc.submitOp(e,{source:this.clientId})}},{key:"submitCommand",value:function(e){if(this.data||this.create({}),this.data&&this.data.commands){var t=this.data.commands.length;this.submitOp([{p:["commands",t],li:e}])}else this.submitOp([{p:["commands"],oi:[e]}])}},{key:"deleteCommand",value:function(e){this.data&&this.data.commands&&this.data.commands[e]&&this.submitOp([{p:["commands",e],li:{},ld:{}}])}},{key:"updateCommand",value:function(e,t){this.data&&this.data.commands&&this.data.commands[e]&&this.submitOp([{p:["commands",e],li:t,ld:{}}])}},{key:"create",value:function(e){try{var t=ee(e);if(t.data&&!t.error)e=t.data;else if("DataLimitError"===t.error)return void this.emit("DataLimitError")}catch(e){}if(this.parent)return this._requireCollabId(),void this.doc.submitOp([{p:[this.collabId],oi:e}],{source:this.clientId});this.doc.create(e,"json0",{source:this.clientId})}},{key:"_pickOps",value:function(e){var t=this;return this.collabId?e.filter((function(e){return e.p[0]===t.collabId})).map((function(e){var t=G()(e);return t.p=t.p.slice(1),t})):e.filter((function(e){return!t.subCollabDoc[e.p[0]]})).map((function(e){return G()(e)}))}},{key:"_transformToParentOp",value:function(e){var t=this;return this._requireCollabId(),e.forEach((function(e){e.p=[t.collabId].concat(e.p)})),e}},{key:"_requireCollabId",value:function(){if(!this.collabId)throw new Error("缺少 collabId")}},{key:"_collabIdExistError",value:function(){throw new Error("collabId 已存在")}}])&&K(r.prototype,n),o&&K(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(U.a),re=r(3886);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fe(n.key),n)}}function ie(e,t,r){return t=le(t),function(e,t){if(t&&("object"==ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ue()?Reflect.construct(t,r||[],le(e).constructor):t.apply(e,r))}function ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ue=function(){return!!e})()}function le(e){return le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},le(e)}function ce(e,t){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ce(e,t)}function se(e,t,r){return(t=fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ne(t)?t:t+""}var de=a()("editor:doc:collabManager"),pe=["#597EF7","#73D13D","#FF4D4F","#9254DE","#36CFC9","#FFA940","#F759AB","#40A9FF"],he=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),se(o=ie(this,t),"onMessage",(function(e){var t=JSON.parse(e.data);if(o._limitFetchRequest(t),t.action&&de("message, action: ",t.action,t.data),"members"===t.action)return o.engine.setCollabMembers(t.data),o.addMembers(t.data),void o.reportCollabUserCount(t.data.length);if("join"===t.action)return o.engine.addCollabMember(t.data),void o.addMembers([t.data]);if("leave"===t.action)return o.engine.removeCollabMember(t.data),void o.removeMember(t.data);if("ready"===t.action){if(o.engine.setCurrentMember(t.data),o.currentMember=t.data,o.checkCollabLimit())return;o.loadCollabDoc()}"broadcast"===t.action&&(t.data.body.user.uuid!==o.currentMember.uuid&&o.emit(h.i.message,t.data))})),o.doc=e,o.dispatch=r,o.ctx=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n),o.initialContent=n.initialContent,o.socket=null,o.engine=n.engine,o.userClients=[],o.currentMember=null,o.MAX_FETCH_COUNT=100,o.fetchCount=0,o.startFetchTime=null,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(t,e),r=t,n=[{key:"reset",value:function(){this.userClients=[],this.currentMember=null,this.disconnect()}},{key:"resetDoc",value:function(e){this.doc=e,e.collab&&(this.ctx.collab=e.collab)}},{key:"connect",value:function(){var e=this;this.reset();var t=this.ctx.collab;if(t){var r="".concat(t.host,"/?id=").concat(t.id,"&token=").concat(t.token);de("connect",r);var n=new re.a(r);n.on("ready",(function(t){t&&(e.socket=t,t.addEventListener("message",e.onMessage),e.connectTime=+new Date)})),n.on("close",(function(t){de("collab server connection close",{event:t});var r=!!e.socket;e.disconnect(),!r||e.justConnect()?e.emit(h.i.error,{code:h.d.CONNECT_COLLAB_SERVER_FAILED,message:t.message,stack:t.stack}):e.emit(h.i.error,{code:h.d.DISCONNECTED,message:t.message,stack:t.stack})})),n.on("error",(function(e){throw de("collab server connection close",{event:e}),e})),n.on("congestion",(function(){e.transmitNetStatus(h.g.congestion)})),n.on("congestionEnd",(function(){e.transmitNetStatus(h.g.online)})),this.connection=n}}},{key:"justConnect",value:function(){return this.connectTime&&+new Date-this.connectTime<2e4}},{key:"reportCollabUserCount",value:function(e){var t=this.doc.format;H.a.logCollabUserCount(t,e)}},{key:"_limitFetchRequest",value:function(e){if("f"===e.a)if(this.fetchCount+=1,this.startFetchTime){var t=+new Date;this.fetchCount>this.MAX_FETCH_COUNT&&1e3*this.fetchCount/(t-this.startFetchTime)>this.MAX_FETCH_COUNT&&(this.disconnect(),this.transmitNetStatus(h.g.congestion))}else this.startFetchTime=+new Date;else this.fetchCount=0,this.startFetchTime=null}},{key:"checkCollabLimit",value:function(){var e=this.currentMember,t=this.userClients.length;return t>60?(this.disconnect(),this.emit(h.i.error,{code:h.d.COLLAB_MEMBERS_LIMIT_ERROR}),!0):this.userClients.filter((function(t){return t.login===e.login})).length>1&&t>40&&(this.disconnect(),this.emit(h.i.error,{code:h.d.COLLAB_MULTIPAGE_LIMIT_ERROR}),!0)}},{key:"loadCollabDoc",value:function(){var e=this,t=this.ctx.collab;de("start load collab doc",t.id);var r=new F.a.Connection(this.socket);r.on("receive",(function(e){de("receive",e.data)}));var n=r.get("lake",t.id);n.subscribe((function(t){if(t)de("collab doc subscribe error",t);else{try{de("ot doc loaded",n),e.initOt(n)}catch(t){e.emit(h.i.error,{code:h.d.COLLAB_DATA_INIT_ERROR,error:t,message:t.message})}e.connection&&(e.connection.startHeartBeat(),e.emit("ready"),e.emit(h.i.collabUsersChange,e.normalizeMembers()))}})),n.on("create",(function(){de("collab doc create",n)})),n.on("load",(function(){})),n.on("op",(function(e,t){})),n.on("del",(function(e,t){de("collab doc deleted",e,t)})),n.on("error",(function(t){var r;null!==(r=t.message)&&void 0!==r&&r.includes("out of range")&&(e.disconnect(),e.emit(h.i.error,{code:h.d.COLLAB_DATA_LIMIT,error:t,message:t.message})),"ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT"!==t.code&&"ERR_DOC_DOES_NOT_EXIST"!==t.code||(e.disconnect(),e.emit(h.i.error,{code:h.d.COLLAB_DATA_ERROR,error:t,message:t.message})),de("collab doc error",{error:t,origin_code:t.code})}))}},{key:"initOt",value:function(e){var t=this;de("init ot");var r=new te(e);r.on("DataLimitError",(function(){t.disconnect(),t.emit(h.i.error,{code:h.d.COLLAB_DATA_LIMIT})})),this.engine.initCollabDoc(r)}},{key:"disconnect",value:function(){try{this.socket&&(this.socket.removeEventListener("message",this.onMessage),this.socket=null),this.connection&&(this.connection.disconnect(),this.connection=null)}catch(e){}}},{key:"isAlive",value:function(){return!!this.connection}},{key:"isOnlyOneCollabSession",value:function(){return 1===this.userClients.length}},{key:"needRedirectToLock",value:function(){return!this.socket||!(!this.connection||"congestion"!==this.connection.netStatus||!this.isOnlyOneCollabSession())}},{key:"onDocDeleted",value:function(){de("doc deleted"),this.connection&&this.connection.broadcast(h.f.DOC_DELETED,{user:this.currentMember})}},{key:"onDocPublished",value:function(){de("doc deleted"),this.connection&&this.connection.broadcast(h.f.DOC_PUBLISHED,{user:this.currentMember})}},{key:"addMembers",value:function(e){this.userClients=this.userClients.concat(e),this.emit(h.i.collabUsersChange,this.normalizeMembers())}},{key:"removeMember",value:function(e){this.userClients=this.userClients.filter((function(t){return t.uuid!==e.uuid})),this.emit(h.i.collabUsersChange,this.normalizeMembers())}},{key:"setMemberColor",value:function(e){var t=((e.iid||1)-1)%pe.length;e.color=pe[t]}},{key:"normalizeMembers",value:function(){for(var e=[],t={},r=this.userClients.length;r>0;r--){var n=this.userClients[r-1];n.color||(n.color=this.setMemberColor(n)),t[n.login]||(t[n.login]=n,n.login!==this.ctx.me.login&&e.push(n))}return e}},{key:"transmitNetStatus",value:function(e){this.emit(h.i.netStatusChange,e)}},{key:"destroy",value:function(){this.disconnect()}}],n&&ae(r.prototype,n),o&&ae(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(U.a),ye=he;function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){Ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(){ge=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==be(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(be(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?we(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Oe(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Ee(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Oe(a,n,o,i,u,"next",e)}function u(e){Oe(a,n,o,i,u,"throw",e)}i(void 0)}))}}function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xe(n.key),n)}}function je(e,t,r){return t=ke(t),function(e,t){if(t&&("object"==be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ce()?Reflect.construct(t,r||[],ke(e).constructor):t.apply(e,r))}function Ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ce=function(){return!!e})()}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}function Se(e,t){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Se(e,t)}function Ae(e,t,r){return(t=xe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xe(e){var t=function(e,t){if("object"!=be(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==be(t)?t:t+""}var Ne=a()("editor:doc:wf"),Te=function(e){function t(e){var r,o=e.group,a=e.book,i=e.doc,u=e.docDomain,f=e.dispatch,d=e.params,y=e.mode,b=e.scene,m=e.onPublishSuccessRedirect,v=void 0===m?function(e){return setTimeout((function(){return R(e)}),1e3)}:m,g=e.disableAutoSave,_=e.me,w=void 0===_?window.appData.me:_,O=e.pageStatus;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ae(r=je(this,t,[{doc:i,mode:y,scene:b}]),"doBindEvents",(function(){r.pageStatus.on(c.a.CLOSE,r.onPageLeave.bind(r)),r.pageStatus.on(c.a.INACTIVE,r.onPageInactive.bind(r)),r.pageStatus.on(c.a.ACTIVE,r.onPageActive.bind(r)),r.pageStatus.on(c.a.ONLINE,r.onPageOnline.bind(r)),r.pageStatus.on(c.a.OFFLINE,r.onPageOffline.bind(r)),r.pageStatus.registerCloseChecker(r.closeAble.bind(r)),r.pageStatus.on(c.a.LONG_TIME_NO_REFRESH,(function(){window.location.reload()})),r.pageStatus.on(c.a.INACTIVE,(function(){r.performance.pause()})),r.pageStatus.on(c.a.ACTIVE,(function(){r.performance.resume()})),r.pageStatus.on(c.a.CLOSE,(function(){r.performance.reportSmooth(),r.userAction.report()}))})),Ae(r,"_fetchMentionDocsHandler",(function(e,t){return e.map((function(e){return e.group=t?r.group.name:e.group_name,e.book=t?r.book.name:e.belong,e}))})),Ae(r,"getDefaultSuggestions",Ee(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([null!==(t=r.book.abilities)&&void 0!==t&&t.read?p.a.books.docs({id:r.book.id,order_by:"published_at"}):[],p.a.users.listDocContextUsers({id:r.doc.id})]).then((function(e){var t=_e(e,2),n=t[0],o=t[1];return{docs:r._fetchMentionDocsHandler(n,!0),users:o}})));case 1:case"end":return e.stop()}}),e)})))),Ae(r,"onMentionSearch",function(){var e=Ee(ge().mark((function e(t,n){var o,a;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",r.getDefaultSuggestions());case 2:return o=function(){var e=Ee(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return e.next=3,p.a.books.docs({id:r.book.id,order_by:"published_at"}).then((function(e){return r._fetchMentionDocsHandler(e,!0)}));case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,p.a.editor.search({q:t,type:"content",related:!0,range:"title"}).then((function(e){return r._fetchMentionDocsHandler(e||[])}));case 8:e.t0=e.sent;case 9:return e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Ee(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.users.complete({q:t,target_type:r.docDomain,target_id:r.doc.id}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",Promise.all([o(),a()]).then((function(e){return{docs:e[0],users:e[1]}})));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Ae(r,"doIgnoreSave",(function(e){return!(e!==h.h.AUTO||!r.disableAutoSave)})),Ae(r,"doSaveDoc",function(){var e=Ee(ge().mark((function e(t){var n,o,a,i,u,c,f,d,p,y,b;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.doc,o=n.id,a=n.format,i={fullHTML:r.openEditorConfig.fullHTML},"Table"===n.type&&t===h.h.USER_PUBLISH&&(i.fullBody=!0),u=r.engine.getEditorContent(i),c=u.content,f=u.html,Ne("doSaveDoc",r.currentMode),d={save_type:t===h.h.AUTO?"auto":"user",edit_type:"collab"===r.currentMode?l.EDIT_TYPE.LAKE_COLLAB:l.EDIT_TYPE.LAKE},r.autoPublish&&(d.target_uuid=new URLSearchParams(window.location.search).get("toc_node_uuid")),p={id:o,format:l.FORMAT_REPAIR_MAP[a]||a,body_asl:c,draft_version:n.draft_version,sync_dynamic_data:!1,created_by:n.created_by},"Show"===n.type&&(p.cover=(null==t||null===(y=t.shows)||void 0===y||null===(y=y[0])||void 0===y?void 0:y.thumb)||null),r.docDomain===s.DOCLET?p.body=f:p.body_html=f,p.draft_version||(p._without_draft_version=1),Ne("doc save lake doc: ",p),e.next=16,r.modelProxy.updateContent(r.docDomain===s.DOCLET?p:ve(ve({},p),d),{ignoreGlobalMessage:!0});case 16:return b=e.sent,e.abrupt("return",b);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ae(r,"doPublishDoc",function(){var e=Ee(ge().mark((function e(t,n){var o,a,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.autoPublish||!n){e.next=2;break}return e.abrupt("return");case 2:return t=t||{notify:!1},o={id:r.doc.id,force:!1,notify:!0===t.notify,cover:null,ignoreGlobalMessage:!0},window.h5&&(o.insertToCatalog=!0),e.next=7,r.getDocCover();case 7:return(a=e.sent)&&(o.cover=a),i=r.docDomain===s.DOCLET?{id:r.doc.id}:o,e.next=12,r.modelProxy.publish(i,{ignoreGlobalMessage:!0});case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Ae(r,"getOpenEditorConfig",(function(){return r.openEditorConfig})),Ae(r,"useTemplate",(function(e){var t,o=e.title,a=e.content;r.engine.setContent(a),r.transmitDocStatus(h.a.changed);var i=(null==o||null===(t=o.trim)||void 0===t?void 0:t.call(o))||r.doc.title;r.isDefaultTitle(i)||p.a.docs.updateMeta({id:r.doc.id,title:i}).then((function(){r.dispatch({type:"doc/update",payload:{title:i}})})).catch((function(e){n.a.warn("save title failed")})),r.doc.title=i})),r.group=o,r.book=a,r.params=d||{},r.dispatch=f,r.me=w,r.docDomain=u||s.DOC,r.modelProxy=u===s.DOCLET?p.a.doclets:p.a.docs,r.onPublishSuccessRedirect=v,r.disableAutoSave=g,r.openEditorConfig=new I.a,r.pageStatus=O||new c.b,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}(t,e),r=t,o=[{key:"autoPublish",get:function(){return this.book&&this.book.enable_auto_publish&&this.docDomain!==s.DOCLET}},{key:"onStarted",value:function(){this.startAutoSave(),this.performance.startHeartbeat(),this.emit(h.i.netStatusChange,this.netStatus)}},{key:"unBindEvents",value:function(){this.pageStatus.destroy(),this.clearAutoSave()}},{key:"onDestroy",value:function(){n.a.destroy()}},{key:"onSaveSuccess",value:function(){if(this.startAutoSave(),this.autoPublish)try{this.saveEditorMeta({isDraft:!1})}catch(e){Ne("saveEditorMeta error",e)}this.performance.reportSmooth()}},{key:"clearAutoSave",value:function(){this.autoSaveTimer&&clearTimeout(this.autoSaveTimer)}},{key:"startAutoSave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600;if(this.disableAutoSave)return!1;this.clearAutoSave(),this.autoSaveTimer=setTimeout((function(){e._inStopWatch("autosaveConflict")?e.startAutoSave(10):(e.save(h.h.AUTO),e.startAutoSave())}),1e3*t)}},{key:"onLockError",value:function(e){return e.code===h.d.LOCKED_BY_COLLAB&&this.defaultMode===h.b.COLLAB&&this.collabConnected&&(e.code=h.d.LOCKED_BY_COLLAB_DISCONNECT),!1}},{key:"createEditorBiz",value:function(e){return new L(e,{docDomain:this.docDomain},this.dispatch)}},{key:"onDocUpdated",value:function(e){var t=this;if(!this.destroying){var r={};!e.contributors||this.doc.contributors&&this.doc.contributors.length===e.contributors.length||(r.contributors=e.contributors),r.content_updated_at=e.content_updated_at,e.description&&(r.description=e.description),Object(i.c)((function(){t.dispatch({type:"doc/update",payload:ve({},r)}),t.dispatch({type:"book/updateDoc",payload:ve({id:e.id},r)})})),this.collab=e.collab}}},{key:"needCache",value:function(){var e;return!(this.openEditorConfig.isServify&&!this.openEditorConfig.saveToServer)&&"laketable"!==(null===(e=this.doc)||void 0===e?void 0:e.format)}},{key:"needLoad",value:function(){return!(this.openEditorConfig.isServify&&!this.openEditorConfig.saveToServer)}},{key:"doLoadDoc",value:(g=Ee(ge().mark((function e(){var t,r,n,o,a,i;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.doc,o=this.docDomain===s.DOCLET?{id:n.id,category:s.CATEGORY.BOOK_INDEX_PAGE,target_type:"Book",target_id:n.target_id}:{id:n.slug,book_id:n.book_id,mode:"edit",merge_dynamic_data:!1},Object(d.b)("start-loadDoc"),e.next=5,this.modelProxy.findOne(o,{ignoreGlobalMessage:!0,useOriginResp:!0});case 5:return a=e.sent,(i=ve({},a.data)).readerEditModeData=a.meta,Object(d.b)("finish-loadDoc"),Object(d.b)("doc-size",(null==i||null===(t=i.body_draft_asl)||void 0===t?void 0:t.length)||(null==i||null===(r=i.body_draft)||void 0===r?void 0:r.length)||0),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"onDocRendered",value:function(){Object(d.b)("finish-doc-render")}},{key:"doCreateCollabManager",value:function(){return new ye(this.doc,this.dispatch,{book:this.book,group:this.group,engine:this.engine,me:this.me,collab:this.collab,initialContent:this.initialDocument.value})}},{key:"getDocCover",value:(v=Ee(ge().mark((function e(){var t;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.engine.getThumbnail();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0="";case 5:if(!(t=e.t0).startsWith("https:")){e.next=8;break}return e.abrupt("return",t);case 8:if(!t){e.next=18;break}return e.prev=9,e.next=12,L.uploadCover({image:t,doc_id:this.doc.id});case 12:return e.abrupt("return",e.sent);case 15:e.prev=15,e.t1=e.catch(9),Ne("upload cover error",e.t1);case 18:case"end":return e.stop()}}),e,this,[[9,15]])}))),function(){return v.apply(this,arguments)})},{key:"isActive",value:function(){return this.pageStatus.isActive}},{key:"onPublishSuccess",value:(m=Ee(ge().mark((function e(){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.docDomain!==s.DOCLET)try{this.saveEditorMeta({isDraft:!1})}catch(e){Ne("saveEditorMeta error",e)}this.currentMode===h.b.COLLAB&&this.collabManager&&this.collabManager.onDocPublished(),f.c.saveEditPosition(this.doc.id,this.doc.format),this.performance.reportSmooth(),this.userAction.report(),window.__readerEditMode||this.destroying||this.onPublishSuccessRedirect(this.buildRedirectToUrlForPublish());case 6:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"doLock",value:(b=Ee(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelProxy.lock(t,{ignoreGlobalMessage:!0}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"doUnlock",value:(y=Ee(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelProxy.unlock(t,{ignoreGlobalMessage:!0}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"buildRedirectToUrlForPublish",value:function(){var e=this.book,t=this.doc,r=this.params,n=this.docDomain;return"lakesheet"===t.format&&n===s.DOC?"/".concat(e.namespace,"/").concat(t.slug).concat(window.location.hash):n===s.DOCLET?t.category===s.CATEGORY.TEMPLATE?window.location.href.replace(/\/[^\/]+?$/,""):"/".concat(window.appData.group.login,"/").concat(window.appData.book.slug):r.group&&r.book?"/".concat(r.group,"/").concat(r.book,"/").concat(t.slug):"/go/doc/".concat(t.id)}},{key:"doSaveEditorMeta",value:(u=Ee(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.docDomain!==s.DOCLET){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,0!==Object.keys(JSON.parse(t.meta_draft||{})).length||0!==Object.keys(JSON.parse(t.meta||{})).length){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,p.a.docs.updateEditorMeta(t);case 7:if(!this.destroying){e.next=9;break}return e.abrupt("return");case 9:this.dispatch({type:"doc/updateEditorMetas",payload:t}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])}))),function(e){return u.apply(this,arguments)})},{key:"isDefaultTitle",value:function(e){return L.isDefaultTitle(e)}},{key:"onDocDeleted",value:function(){var e=this.group,t=this.book;this.currentMode===h.b.COLLAB&&this.collabManager.onDocDeleted(),setTimeout((function(){R("/".concat(e.login,"/").concat(t.slug))}),300)}}],o&&Pe(r.prototype,o),a&&Pe(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a,u,y,b,m,v,g}(u.a);Te.WORKFLOW_EVENT=h.i,Te.DOC_STATUS=h.a,Te.SAVE_TYPE=h.h,Te.EDIT_MODE=h.b,Te.EDIT_SCENE=h.c;t.a=Te},function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return y})),r.d(t,"b",(function(){return b}));var n=r(228),o={PUBLISH:"yuque_sdk_publish",PUBLISH_CALLBACK:"yuque_sdk_publish_callback",RESIZE_CALLBACK:"yuque_sdk_resize_callback",CONNECT:"yuque_sdk_connect",DISCONNECT:"yuque_sdk_disconnect",FULLSCREEN_CALLBACK:"yuque_sdk_fullscreen_callback",SAVE_CALLBACK:"yuque_sdk_save_callback",SET_VALUE:"yuque_sdk_set_value",GET_VALUE:"yuque_sdk_get_value",GET_VALUE_CALLBACK:"yuque_sdk_get_value_callback",INSERT_VALUE:"yuque_sdk_insert_value",CHANGE_CALLBACK:"yuque_sdk_change_callback",SET_TITLE_VALUE:"yuque_sdk_set_title_value",GET_TITLE_VALUE:"yuque_sdk_get_title_value",GET_TITLE_VALUE_CALLBACK:"yuque_sdk_get_title_value_callback",SAVE_TITLE_CALLBACK:"yuque_sdk_save_title_callback",TITLE_CHANGE_CALLBACK:"yuque_sdk_title_change_callback",SCROLL_TO:"yuque_sdk_scroll_to",DOC_LOADED_CALLBACK:"yuque_sdk_doc_loaded_callback",UNLOCK:"yuque_sdk_unlock",UNLOCK_CALLBACK:"yuque_sdk_unlock_callback",RESET:"yuque_sdk_reset",RESET_CALLBACK:"yuque_sdk_reset_callback",LOAD_CALLBACK:"yuque_sdk_load_callback"};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function u(e,t,r){return t=c(t),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(t,r||[],c(e).constructor):t.apply(e,r))}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function f(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var p=0,h=new(function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(e=u(this,t),"init",(function(t){e.url=document.location.href,e.target=t,e._postMessageToParent({type:o.CONNECT,url:e.url}),window.addEventListener("message",e.handleMessage,!1),window.addEventListener("unload",e.handleUnload,!1)})),f(e,"handleMessage",(function(t){("string"==typeof t.data?JSON.parse(t.data):t.data).type===o.CONNECT&&(e._postMessageToParent({type:o.CONNECT,url:e.url}),window.removeEventListener("message",e.handleMessage,!1))})),f(e,"handleUnload",(function(){e._postMessageToParent({type:o.DISCONNECT,url:e.url})})),f(e,"_postMessageToParent",(function(t){e.target&&e.target.postMessage(JSON.stringify(t),"*")})),f(e,"postMessage",(function(t,r){var n={type:t,message:r,messageId:++p,url:e.url};e._postMessageToParent(n)})),f(e,"handleMessage",(function(t){return e.emit("message",t)})),f(e,"destroy",(function(){window.removeEventListener("message",e.handleMessage,!1),window.removeEventListener("unload",e.handleUnload,!1)})),e.ready=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e),r=t,n&&i(r.prototype,n),a&&i(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,a}(r.n(n).a));window&&window.parent&&window.self!==window.top&&(h.init(window.parent),window.addEventListener("message",(function(e){try{var t="string"==typeof e.data?JSON.parse(e.data):e.data;h.handleMessage(t)}catch(e){console&&console.error(e)}})));var y=function(e,t){return h.postMessage(e,t)},b=function(e){return h.on("message",e),function(){h.off("message",e)}}},function(e,t,r){"use strict";r(44);var n=r(10),o=(r(3334),r(3791)),a=(r(37),r(8)),i=r(0),u=r.n(i),l=r(2),c=r.n(l),s=r(1716),f=r(1722),d=r(1723),p=r(5),h=r.n(p),y=r(33),b=r(557),m=r(32),v="StatusView-module_wrap_8c-mq",g="StatusView-module_tip_DFrDV",_="StatusView-module_error_cvob-",w="StatusView-module_title_8Zp5n",O="StatusView-module_content_80A7-",E="StatusView-module_contentIcon_vp-6I",P="StatusView-module_action_FlBG8",j="StatusView-module_mask_CFGUv";function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function k(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t,r,l,c=e.book,p=e.doc,C=e.error,S=e.docStatus,A=e.onReload,x=e.wfMessage,N=e.onClear,T=Object(y.useHistory)(),D=Object(y.useParams)().doc,L=function(){window.__forceFetchRemoteDocOnce__=!0,T.push("/".concat(c.namespace))},R=u.a.createElement(a.a,{type:"primary",onClick:L,"data-testid":"refresh"},__("重新加载")),I=u.a.createElement(a.a,{onClick:N,"data-testid":"clearError"},__("关闭提示")),M=m.c?u.a.createElement(a.a,{type:"primary",onClick:L,"data-testid":"reload"},__("重新加载")):u.a.createElement(a.a,{type:"primary",onClick:A,"data-testid":"reload"},__("重新加载")),F=u.a.createElement(a.a,{href:c?"/".concat(c.namespace,"/").concat(p.slug):"/dashboard"},__("退出编辑")),B=function(e,t){o.a.destroy(),o.a.open({message:u.a.createElement("div",{"data-testid":"editor:StatusView:showMessage:".concat(e)},t)})},U={Unauthorized:__("登录过期，请刷新页面重新登录"),"Failed to fetch":__("请求异常"),"Not Found":__("当前文档不存在或已被删除"),"request entity too large":__("文档内容太大，无法保存"),"502 Bad Gateway":__("服务器繁忙，请稍后再试"),"<h3>404</h3>":__("当前文档已被删除或移走"),"无权限访问":__("当前文档缺少权限或权限被移除"),"服务中断":__("服务器繁忙，请稍后再试"),"<h1>50":__("服务器繁忙，请稍后再试"),"<!DOCTYPE html>":__("请求异常")},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";for(var t in U)if(e&&e.includes(t))return U[t];return e},V=u.a.createElement("div",{className:_,"data-testid":"network-error-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("文档加载失败")),u.a.createElement("p",{className:O},__("网络异常，请检查网络连接是否正常")),u.a.createElement("p",{className:P},I,M)),G=u.a.createElement("div",{className:_,"data-testid":"locked-by-self-collab-error-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("你正在其它窗口编辑该文档")),u.a.createElement("p",{className:O},__("请重新加载最新的编辑内容")),u.a.createElement("p",{className:P},M)),q=u.a.createElement("div",{className:_,"data-testid":"locked-by-desktop-error-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("你正在使用语雀桌面端编辑此文档")),u.a.createElement("p",{className:O},__("语雀当前不支持使用桌面端和浏览器同时编辑")),u.a.createElement("p",{className:P},F)),z=u.a.createElement("div",{className:_,"data-testid":"locked-by-versionConflict-error-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("文档内容有更新")),u.a.createElement("p",{className:O},__("请基于最新内容重新编辑")),u.a.createElement("p",{className:P},M)),W=u.a.createElement("div",{className:_,"data-testid":"locked-by-sync-error-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("文档正在同步中")),u.a.createElement("p",{className:O},__("请稍等一会再重新加载")),u.a.createElement("p",{className:P},I,R)),K=function(e){var t=e.type;B(t,__("正在保存，请稍候"))};if(x&&!x.readed){switch(x.type){case b.MESSAGE.DOC_PUBLISHED:r=(t=x).body,l=t.type,B(l,__("{user} 刚刚 {action} 了文档",{user:r.user.name,action:p.published_at?__("更新"):__("发布")}));break;case b.MESSAGE.DOC_CACHE_SAVED:!function(e){var t=e.type;B(t,__("已为你加载最新编辑版本，上次离线缓存内容已保存到历史版本备份"))}(x);break;case b.MESSAGE.SAVING:K(x);break;case b.MESSAGE.SAVED:!function(e){var t=e.type;B(t,__("文档已保存"))}(x);break;case b.MESSAGE.SAVE_FAILED:!function(e){B(e.type,u.a.createElement(u.a.Fragment,null,u.a.createElement("p",null,__("网络异常，保存失败")),u.a.createElement("p",null,__("编辑内容无法保存到服务器，"),e.cached?__("已尝试保存到离线缓存"):__("当前离线缓存存在异常，请勿关闭页面，以防内容丢失"))))}(x);break;case b.MESSAGE.DISCONNECT:!function(e){B(e.type,__("网络连接异常，无法实时协同编辑"))}(x);break;case b.MESSAGE.UNREADY:!function(e){B(e.type,__("文档正在加载中，请稍候编辑"))}(x);break;case b.MESSAGE.EDIT_DISABLE:!function(e){e.mode===b.EDIT_MODE.LOCK?B(e.type,__("当前编辑冲突，可能出现数据保存异常，请稍等一会再操作")):B(e.type,__("正在连接服务，请稍等一会再操作，如果不行，请检查网络，浏览器插件，或重启浏览器。"))}(x);break;case b.MESSAGE.CACHE_FAILED:!function(e){B(e.type,__("本地缓存失败，请确保手动保存成功才关闭页面"))}(x);break;case b.MESSAGE.RENDER_BIG_DOCUMENT:!function(e){B(e.type,__("文档较大，正在努力渲染，请稍等一下"))}(x);break;case b.MESSAGE.BUZY:x.docStatus===b.DOC_STATUS.saving?K(x):x.docStatus===b.DOC_STATUS.publishing&&function(e){var t=e.type;B(t,__("正在发布，请稍候"))}(x);break;case b.MESSAGE.CLEAR:o.a.destroy()}x.readed=!0}Object(i.useEffect)((function(){var e=function(){};return S===b.DOC_STATUS.loading?m.c||(e=n.a.loading(u.a.createElement("span",{"data-testid":"loading"},__("正在加载")),0)):S===b.DOC_STATUS.published&&(e=n.a.success(u.a.createElement("span",{"data-testid":"loading"},__("内容发布成功")),3)),function(){e()}}),[S]),Object(i.useEffect)((function(){n.a.destroy()}),[D]);var Y,J,$,X,Q=!1,Z="";if(C&&!C.readed)switch(C.code){case b.ERROR_CODE.INIT_FAILED:Z="network"===C.type?V:u.a.createElement("div",{className:_,"data-testid":"load-doc-fail-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("文档加载失败")),404===C.status?u.a.createElement(u.a.Fragment,null,u.a.createElement("p",{className:O,"data-testid":"doc-not-found"},__("文档已被删除或无访问权限")),u.a.createElement("p",{className:P},I,F)):u.a.createElement(u.a.Fragment,null,u.a.createElement("p",{className:O,"data-testid":"doc-load-error"},__("你可以尝试重新加载，或者退出编辑")),u.a.createElement("p",{className:P},F,404!==C.status&&M))),Q=!0;break;case b.ERROR_CODE.SAVE_FAILED:X=C,Z=u.a.createElement("div",{className:_,"data-testid":"save-failed-error-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("文档保存失败")),u.a.createElement("p",{className:O},H(X.message)),u.a.createElement("p",{className:P},I)),Q=!0;break;case b.ERROR_CODE.PUBLISH_FAILED:Z=function(e){return u.a.createElement("div",{className:_,"data-testid":"publish-failed-error-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("文档发布失败")),u.a.createElement("p",{className:O},H(e.message)),u.a.createElement("p",{className:P},I))}(C),Q=!0;break;case b.ERROR_CODE.LOCKED_BY_COLLAB:$=C.lock.collab_members,Z=u.a.createElement("div",{className:_,"data-testid":"locked-by-collab-error-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("{user} 正在与其他人编辑该文档",{user:$[0].name})),u.a.createElement("p",{className:O},__("当前网络无法进入协同编辑，请检查网络后刷新重试")),u.a.createElement("p",{className:P},M)),Q=!0;break;case b.ERROR_CODE.LOCKED_BY_COLLAB_DISCONNECT:Z=function(e){return u.a.createElement("div",{className:_,"data-testid":"locked-by-collab-disconnect-error-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("{user} 正在与其他人编辑该文档",{user:e[0].name})),u.a.createElement("p",{className:O},__("当前网络已断开实时同步，请检查网络后刷新页面，重新加入协同")))}(C.lock.collab_members),Q=!0;break;case b.ERROR_CODE.LOCKED_BY_SELF_COLLAB:Z=G,Q=!0;break;case b.ERROR_CODE.LOCKED_BY_OTHER:J=C.lock.locker,Z=u.a.createElement("div",{className:_,"data-testid":"locked-by-other-error-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("{user} 正在编辑该文档",{user:J.name})),u.a.createElement("p",{className:O},__("请等待对方完成编辑后，再进行编辑")),u.a.createElement("p",{className:P},m.c&&I,F)),Q=!0;break;case b.ERROR_CODE.LOCKED_BY_DESKTOP:Z=q,Q=!0;break;case b.ERROR_CODE.LOCKED_BY_VERSIONCONFLICT:Z=z,Q=!0;break;case b.ERROR_CODE.LOCK_FAILED:Y=C.message,Z=u.a.createElement("div",{className:_,"data-testid":"lock-failed-error-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("无法获得单人编辑权限")),u.a.createElement("p",{className:O},H(Y)),u.a.createElement("p",{className:O},__("为避免编辑出错，请检查后重试")),u.a.createElement("p",{className:P},I,M)),Q=!0;break;case b.ERROR_CODE.LOCKED_BY_SYNC:Z=W,Q=!0;break;case b.ERROR_CODE.DOC_DELETED:Z=function(e){return u.a.createElement("div",{className:_,"data-testid":"doc-deleted-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("当前文档已被 {user} 删除",{user:e.body.user.name})),u.a.createElement("p",{className:O},__("你可以通过知识库的 回收站 找到此篇文档")),u.a.createElement("p",{className:P},I))}(C.data),Q=!0;break;case b.ERROR_CODE.DOC_NOT_EXIST:Z=u.a.createElement("div",{className:_,"data-testid":"publish-failed-error-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("文档保存失败")),u.a.createElement("p",{className:O},__("文档不存在或者已经被删除")),u.a.createElement("p",{className:P},I)),Q=!0;break;case b.ERROR_CODE.DOC_SAVE_CONFLICT:Z=u.a.createElement("div",{className:_,"data-testid":"publish-failed-error-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("文档保存冲突")),u.a.createElement("p",{className:O},__("文档已被修改，此次保存将保存到历史版本，请重新加载并基于最新文档进行编辑")),u.a.createElement("p",{className:P},M)),Q=!0;break;case b.ERROR_CODE.CACHE_FAILED:Z=u.a.createElement("div",{className:_,"data-testid":"cache-failed-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("自动保存异常提醒")),u.a.createElement("p",{className:O},__("本地离线缓存失败，请勿在不稳定网络编辑内容，以防丢失")),u.a.createElement("p",{className:P},I)),Q=!0;break;case b.ERROR_CODE.CONTENT_UNREADY:Z=u.a.createElement("div",{className:_,"data-testid":"content-unready"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("保存提醒")),u.a.createElement("p",{className:O},__("检测有尚未上传完成的文件，请检查确认后再关闭页面！")),u.a.createElement("p",{className:P},I)),Q=!0;break;case b.ERROR_CODE.DATA_ERROR:Z=u.a.createElement("div",{className:_,"data-testid":"data-error-view"},u.a.createElement("p",{className:w},u.a.createElement(f.default,null)," ",__("数据异常")),u.a.createElement("p",{className:O},__("检测到异常数据，请将本次修改部分备份后，刷新页面重新编辑")),u.a.createElement("p",{className:P},I)),Q=!0;break;case b.ERROR_CODE.COLLAB_DATA_INIT_ERROR:Z=u.a.createElement("div",{className:_,"data-testid":"collab-data-init-error-view"},u.a.createElement("p",{className:w},u.a.createElement(f.default,null)," ",__("协同数据初始化异常")),u.a.createElement("p",{className:O},__("协同数据存在异常，请所有协作者先退出编辑，重新进入编辑")),u.a.createElement("p",{className:P},I)),Q=!0;break;case b.ERROR_CODE.COLLAB_MEMBERS_LIMIT_ERROR:Z=u.a.createElement("div",{className:_,"data-testid":"collab-members-limit-error-view"},u.a.createElement("p",{className:w},u.a.createElement(f.default,null)," ",__("协同人员超限")),u.a.createElement("p",{className:O},__("当前协同人数过多，请先退出编辑，稍候进入编辑")),u.a.createElement("p",{className:P},m.c&&I,F)),Q=!0;break;case b.ERROR_CODE.COLLAB_MULTIPAGE_LIMIT_ERROR:Z=u.a.createElement("div",{className:_,"data-testid":"collab-multipage-limit-error-view"},u.a.createElement("p",{className:w},u.a.createElement(f.default,null)," ",__("协同人员超限")),u.a.createElement("p",{className:O},__("当前协同人数过多，请勿多窗口同时编辑！")),u.a.createElement("p",{className:P},m.c&&I,F)),Q=!0;break;case b.ERROR_CODE.RENDER_FAILED:Z=m.c&&"markdown"===(p.origin_format||p.format)?u.a.createElement("div",{className:_,"data-testid":"render-failed-view-desktop-markdown"},u.a.createElement("p",{className:E},u.a.createElement(d.default,{width:22,height:22})," ",__("抱歉，桌面端暂不支持 Markdown 文档编辑器")),u.a.createElement("p",{className:P},u.a.createElement(a.a,{onClick:function(){return window.__setEditMode(!1)}},__("取消")),u.a.createElement(a.a,{type:"primary",onClick:function(){window.YuqueDesktopAppJSBridge.openExternalLink(window.location.href),window.__setEditMode(!1)}},__("去网页编辑")))):u.a.createElement("div",{className:_,"data-testid":"render-failed-view"},u.a.createElement("p",{className:w},u.a.createElement(s.default,null)," ",__("渲染失败")),u.a.createElement("p",{className:O},__("数据存在异常，请尝试重新加载，如果不行，关闭提示后在历史版本里恢复最近一次正常的版本进行编辑")),u.a.createElement("p",{className:P},I,M)),Q=!0;break;case b.ERROR_CODE.COMMAND_ERROR:n.a.destroy(),n.a.error(u.a.createElement("span",{"data-testid":"".concat(C.code)},__("出现异常错误，可刷新重试"))),C.readed=!0}return Z?u.a.createElement("div",{"data-testid":"mask",className:h()(v,k({},j,Q))},u.a.createElement("div",{className:g},Z)):null}S.propTypes={netStatus:c.a.string,docStatus:c.a.string,collabUsers:c.a.array,book:c.a.object,doc:c.a.object.isRequired,error:c.a.object,wfMessage:c.a.object,onReload:c.a.func,onClear:c.a.func};t.a=S},,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return B})),r.d(t,"b",(function(){return U}));r(44);var n=r(10),o=r(725),a=r.n(o),i=r(0),u=r.n(i),l=r(3699),c=r(3901),s=r(4288),f=r(3776),d='<!doctype lake><meta name="doc-version" content="1" /><meta name="viewport" content="adapt" /><meta name="typography" content="classic" /><table data-lake-id="Y7irN" id="Y7irN" margin="true" width-mode="contain" class="lake-table" style="width: 877px"><colgroup><col width="114"><col width="184"><col width="192"><col width="204"><col width="183"></colgroup><tbody><tr data-lake-id="ufc959fc8" id="ufc959fc8"><td data-lake-id="u4dc977f5" id="u4dc977f5" style="background-color: #D9EAFC"><p data-lake-id="u281764f6" id="u281764f6"><strong><span data-lake-id="u03faf0fe" id="u03faf0fe" class="lake-fontsize-10">故障/风险事件名称</span></strong></p></td><td data-lake-id="u6902d164" id="u6902d164" style="background-color: #D9EAFC"><p data-lake-id="u6dd4ca16" id="u6dd4ca16"><strong><span data-lake-id="u5e21167f" id="u5e21167f" class="lake-fontsize-10">发现1m+响应5m分析</span></strong></p></td><td data-lake-id="u0f89627e" id="u0f89627e" style="background-color: #D9EAFC"><p data-lake-id="u8174fe2b" id="u8174fe2b"><strong><span data-lake-id="u49c2e9ea" id="u49c2e9ea" class="lake-fontsize-10">定位分析</span></strong></p></td><td data-lake-id="u1427b782" id="u1427b782" style="background-color: #D9EAFC"><p data-lake-id="u004db6ac" id="u004db6ac"><strong><span data-lake-id="u2d5cc03d" id="u2d5cc03d" class="lake-fontsize-10">止血分析</span></strong><strong><em><span data-lake-id="u2ea48b28" id="u2ea48b28">（</span></em></strong><strong><em><span data-lake-id="ufb999144" id="ufb999144" class="lake-fontsize-9">P1-P4分析30分钟止血，P5和典型事件10分钟止血）</span></em></strong></p></td><td data-lake-id="u9246258e" id="u9246258e" style="background-color: #D9EAFC"><p data-lake-id="u50923dc0" id="u50923dc0"><strong><span data-lake-id="ud427e78b" id="ud427e78b" class="lake-fontsize-10">应急提升key Action</span></strong></p></td></tr><tr data-lake-id="u734d6120" id="u734d6120"><td data-lake-id="u15e26291" id="u15e26291"><p data-lake-id="ub0eb6f5c" id="ub0eb6f5c"><br></p></td><td data-lake-id="uf7364139" id="uf7364139"><p data-lake-id="u6b87853f" id="u6b87853f"><span data-lake-id="ua7d49894" id="ua7d49894">是否达成，卡点是什么？</span></p><ul list="u2ffd3467"><li fid="uaa798e6e" data-lake-id="u48044773" id="u48044773"><span data-lake-id="u2affddb8" id="u2affddb8">发现手段</span></li></ul><ul list="u4e5e9de4" data-lake-indent="1" class="lake-list"><li fid="u318e6b8c" version="1712481815868" data-lake-id="u4c82812e" id="u4c82812e" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u1a735c92" id="u1a735c92">GOC监控</span></li><li fid="u318e6b8c" data-lake-id="u496fe75b" id="u496fe75b" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u315ef98b" id="u315ef98b">客诉</span></li><li fid="u318e6b8c" data-lake-id="u5e681303" id="u5e681303" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="ubf3705b0" id="ubf3705b0">端智能</span></li><li fid="u318e6b8c" data-lake-id="ub01221c0" id="ub01221c0" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u416b68ea" id="u416b68ea">其他监控</span></li></ul><ul list="u2ffd3467" start="2"><li fid="uaa798e6e" data-lake-id="u159dc525" id="u159dc525"><span data-lake-id="u69c02195" id="u69c02195">是否监控可发现</span></li></ul><ul list="u628a8a5d" data-lake-indent="1" class="lake-list"><li fid="u318e6b8c" data-lake-id="ubdc69731" id="ubdc69731" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u368b34e9" id="u368b34e9">是</span></li><li fid="u318e6b8c" data-lake-id="u3dacdd2e" id="u3dacdd2e" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u7b25a733" id="u7b25a733">否，</span><em><span data-lake-id="u48d7c23c" id="u48d7c23c" style="color: #8A8F8D">请补充原因</span></em></li></ul><ul list="u172dde79"><li fid="uaa798e6e" data-lake-id="u9da1b728" id="u9da1b728"><span data-lake-id="ud52df34e" id="ud52df34e">是否需要补充GOC场景</span></li></ul><ul list="u91406de3" data-lake-indent="1" class="lake-list"><li fid="u318e6b8c" data-lake-id="u7f2d3be7" id="u7f2d3be7" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u4863a602" id="u4863a602">是</span></li><li fid="u318e6b8c" data-lake-id="ub9bf55fc" id="ub9bf55fc" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u44af6a79" id="u44af6a79">否，</span><em><span data-lake-id="ucf49af59" id="ucf49af59" style="color: #8A8F8D">请补充原因</span></em></li></ul><ul list="u2ffd3467" start="3"><li fid="uaa798e6e" data-lake-id="u4d24134d" id="u4d24134d"><span data-lake-id="u045de3a6" id="u045de3a6">是否及时告警</span><span data-lake-id="ua83ace10" id="ua83ace10" class="lake-fontsize-9">（GOC监控在2分钟内，客诉在15mins内）</span></li></ul><ul list="uf0adeb78" data-lake-indent="1" class="lake-list"><li fid="u318e6b8c" version="1711956553257" data-lake-id="u3d78b2ef" id="u3d78b2ef" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="uffdadcaf" id="uffdadcaf">是    </span></li><li fid="u318e6b8c" data-lake-id="u57a68676" id="u57a68676" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u1485aa87" id="u1485aa87">否，</span><em><span data-lake-id="uc31da49d" id="uc31da49d" style="color: #8A8F8D">请补充原因</span></em></li></ul><ul list="u8fd979ca"><li fid="u9512977d" data-lake-id="u912a05ae" id="u912a05ae"><span data-lake-id="u8e2c7855" id="u8e2c7855">是否5分钟内响应</span></li></ul><ul list="u94dc442c" data-lake-indent="1" class="lake-list"><li fid="u318e6b8c" version="1711956552233" data-lake-id="uabedd490" id="uabedd490" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u25d58a40" id="u25d58a40">是    </span></li><li fid="u318e6b8c" data-lake-id="u7b4c79bb" id="u7b4c79bb" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u907c5bb9" id="u907c5bb9">否，</span><em><span data-lake-id="u65a9bbb5" id="u65a9bbb5" style="color: #8A8F8D">请补充原因</span></em></li></ul><ul list="udfd1f4da"><li fid="u65febbbd" data-lake-id="u8a37bb00" id="u8a37bb00"><span data-lake-id="u673bb5c7" id="u673bb5c7">SRE是否5分钟内响应</span></li></ul><ul list="u84f33698" data-lake-indent="1" class="lake-list"><li fid="u318e6b8c" version="1711956551458" data-lake-id="u509a7f2d" id="u509a7f2d" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u4d505e70" id="u4d505e70">是    </span></li><li fid="u318e6b8c" data-lake-id="ua5b989c3" id="ua5b989c3" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="ue40665a8" id="ue40665a8">否，</span><em><span data-lake-id="u8f09ec69" id="u8f09ec69" style="color: #8A8F8D">请补充原因</span></em></li></ul></td><td data-lake-id="u9b004221" id="u9b004221"><ul list="u3873898f"><li fid="uaa798e6e" data-lake-id="u2af77071" id="u2af77071"><span data-lake-id="u3d3a7268" id="u3d3a7268">定位时长：</span><span data-lake-id="ub39b20f7" id="ub39b20f7" style="background-color: #FBDE28">XX</span><span data-lake-id="u2e429d18" id="u2e429d18">分钟</span></li></ul><p data-lake-id="ud86ad22e" id="ud86ad22e" style="padding-left: 2em"><span data-lake-id="uc2663ebd" id="uc2663ebd">[GOC监控类]通用根因是否准确</span></p><ul list="ua9e99e85" data-lake-indent="1" class="lake-list"><li fid="uaa798e6e" data-lake-id="u376655d7" id="u376655d7" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u28303396" id="u28303396">是    </span></li><li fid="uaa798e6e" data-lake-id="u55b401a8" id="u55b401a8" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u7a04306b" id="u7a04306b">否，</span><em><span data-lake-id="u0c12f86d" id="u0c12f86d" style="color: #8A8F8D">请补充原因</span></em></li><li fid="uaa798e6e" data-lake-id="ud25a2f6f" id="ud25a2f6f" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u38a84105" id="u38a84105">不涉及</span></li></ul><p data-lake-id="u93afd2e7" id="u93afd2e7" style="padding-left: 2em"><span data-lake-id="u81c4e2cd" id="u81c4e2cd">[客诉类]客诉定位是否准确（含快排定位）</span></p><ul list="ub44c1d09" data-lake-indent="1" class="lake-list"><li fid="uaa798e6e" data-lake-id="u8585d0e8" id="u8585d0e8" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u03acf62a" id="u03acf62a">是    </span></li><li fid="uaa798e6e" data-lake-id="uff5eb6e9" id="uff5eb6e9" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="ucb8b4ed5" id="ucb8b4ed5">否，</span><em><span data-lake-id="uca83e22c" id="uca83e22c" style="color: #8A8F8D">请补充原因</span></em></li><li fid="uaa798e6e" data-lake-id="ue87908bd" id="ue87908bd" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><em><span data-lake-id="uf9d47b09" id="uf9d47b09" style="color: #8A8F8D">​</span></em><span data-lake-id="u97c9f84c" id="u97c9f84c">不涉及</span></li></ul><p data-lake-id="u4275fdf5" id="u4275fdf5" style="padding-left: 2em"><span data-lake-id="uc7e862bc" id="uc7e862bc">是否涉及变更定位，是否定位准确</span></p><ul list="uc08698af" data-lake-indent="1" class="lake-list"><li fid="uc3631b0f" data-lake-id="u69897d7b" id="u69897d7b" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u82aea4e6" id="u82aea4e6">是    </span></li><li fid="uc3631b0f" data-lake-id="u710c34f7" id="u710c34f7" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u9bcd3100" id="u9bcd3100">否，</span><em><span data-lake-id="u9d7e4387" id="u9d7e4387" style="color: #8A8F8D">请补充原因</span></em></li><li fid="uc3631b0f" data-lake-id="u18094a22" id="u18094a22" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u2f153f6c" id="u2f153f6c">不涉及</span></li></ul><p data-lake-id="u809e47ed" id="u809e47ed"><span data-lake-id="u1f052bae" id="u1f052bae" style="background-color: #FBDE28">​</span><br></p></td><td data-lake-id="ubb6bec64" id="ubb6bec64"><ul list="u1a2b519b"><li fid="u7cb696d3" data-lake-id="ub9e9b4b2" id="ub9e9b4b2"><span data-lake-id="ubb1baeb9" id="ubb1baeb9">止血时长：</span><span data-lake-id="u6919e9c9" id="u6919e9c9" style="background-color: #FBDE28">XX</span><span data-lake-id="u06a2282c" id="u06a2282c">分钟</span></li><li fid="u7cb696d3" data-lake-id="u95bdf2f1" id="u95bdf2f1"><span data-lake-id="uf1660101" id="uf1660101">最有效止血手段</span></li></ul><ul list="u7030cb8b" data-lake-indent="1" class="lake-list"><li fid="u97d0024e" version="1711956836905" data-lake-id="u3f5f715e" id="u3f5f715e" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u8b1b60f6" id="u8b1b60f6">执行预案</span></li><li fid="u97d0024e" data-lake-id="u131dd58f" id="u131dd58f" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u4823399a" id="u4823399a">限流</span></li><li fid="u97d0024e" data-lake-id="u176e1566" id="u176e1566" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u8e88b229" id="u8e88b229">扩容/重启/关流</span></li><li fid="u97d0024e" data-lake-id="u0e4672be" id="u0e4672be" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u168c83d4" id="u168c83d4">变更回滚</span></li><li fid="u97d0024e" data-lake-id="u80aa1673" id="u80aa1673" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="ub0418f0f" id="ub0418f0f">切流</span></li><li fid="u97d0024e" version="1711956836206" data-lake-id="u611624b5" id="u611624b5" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="ud02dcc32" id="ud02dcc32">部署话术，黄条</span></li><li fid="u97d0024e" data-lake-id="uf57dd83d" id="uf57dd83d" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="uf52cebf3" id="uf52cebf3">自愈</span></li><li fid="u97d0024e" version="1711451601259" data-lake-id="u4b99bd8b" id="u4b99bd8b" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u36ba8fd0" id="u36ba8fd0">其他，</span><em><span data-lake-id="uf16eed1a" id="uf16eed1a" style="color: #8A8F8D">请补充</span></em></li></ul><ul list="ueac0ec3c"><li fid="u0896e4ed" data-lake-id="ubbf6bc50" id="ubbf6bc50"><span data-lake-id="ub8436298" id="ub8436298">执行止血手段，是否存在问题</span></li></ul><ul list="u36d899a9" data-lake-indent="1" class="lake-list"><li fid="u318e6b8c" version="1710857944033" data-lake-id="u212e3749" id="u212e3749" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u8172a07c" id="u8172a07c">是，</span><em><span data-lake-id="u2f45c583" id="u2f45c583" style="color: #8A8F8D">请补充原因</span></em></li><li fid="u318e6b8c" data-lake-id="u324e14f3" id="u324e14f3" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u789b0a79" id="u789b0a79">否</span></li></ul><ul list="u0ecfccf9"><li fid="u5437fe12" data-lake-id="u122e375a" id="u122e375a"><span data-lake-id="ue7007f42" id="ue7007f42">应急决策是否存在问题</span></li></ul><ul list="u8cdb389f" data-lake-indent="1" class="lake-list"><li fid="u318e6b8c" version="1710857944033" data-lake-id="u1f92ed98" id="u1f92ed98" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="u2a62a78a" id="u2a62a78a">是，</span><em><span data-lake-id="ue26e56e3" id="ue26e56e3" style="color: #8A8F8D">请补充原因</span></em></li><li fid="u318e6b8c" data-lake-id="u9cd01225" id="u9cd01225" class="lake-list-node lake-list-task"><card type="inline" name="checkbox" value="data:false"></card><span data-lake-id="ue697978d" id="ue697978d">否</span></li></ul><p data-lake-id="u8976003f" id="u8976003f"><span data-lake-id="u9ca25b8f" id="u9ca25b8f" style="background-color: #FBDE28">​</span><br></p></td><td data-lake-id="ua6d53d68" id="ua6d53d68"><ul list="u3cab8a46"><li fid="u12679fc8" data-lake-id="u334adcab" id="u334adcab"><span data-lake-id="u59e4cd3f" id="u59e4cd3f">发现：</span></li><li fid="u12679fc8" data-lake-id="u40020db0" id="u40020db0"><span data-lake-id="udce9011a" id="udce9011a">定位：</span></li><li fid="u12679fc8" data-lake-id="u696de3ef" id="u696de3ef"><span data-lake-id="uc16bde0e" id="uc16bde0e">止血：</span></li><li fid="u12679fc8" data-lake-id="ucb3dfc1f" id="ucb3dfc1f"><span data-lake-id="ueb209191" id="ueb209191">其他：</span></li></ul></td></tr></tbody></table><p data-lake-id="ubb11efd2" id="ubb11efd2"><br></p>',p=r(3934),h=r(4129),y=r(4120),b=r(530),m=r.n(b),v=r(14),g=r.n(v);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function w(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=r(3990);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(){N=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(D([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==k(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=S(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function S(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,S(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(k(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function T(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function D(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){T(a,n,o,i,u,"next",e)}function u(e){T(a,n,o,i,u,"throw",e)}i(void 0)}))}}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var I={loading:!1,emergencyOutline:"",emergencyOutlineLoading:!1,emergencyOutlineLake:"",experience:"",experienceLake:"",experienceLoading:!1,flow:"",flowLake:"",flowLoading:!1,sheetTplLake:"",updateEmergencyOutline:a.a,updateEmergencyExp:a.a,handleExp:a.a,updateFlow:a.a,setSheetTplLake:a.a,handleValidate:a.a,handleRunEmergencyOutline:a.a,handleRunExperience:a.a,handleRunEmcDiagnoseFlowChart:a.a,handlePreview:a.a,handlePreviewValidate:a.a},M=u.a.createContext(I);function F(e){var t=L(Object(i.useState)(I.loading),2),r=t[0],o=(t[1],L(Object(i.useState)({loading:!1,emergencyOutline:I.emergencyOutline,emergencyOutlineLake:I.emergencyOutlineLake}),2)),a=o[0],u=o[1],f=L(Object(i.useState)({loading:!1,experience:I.experience,experienceLake:I.experienceLake}),2),b=f[0],v=f[1],_=L(Object(i.useState)({loading:!1,flow:I.flow,flowLake:I.flowLake}),2),O=_[0],E=_[1],j=L(Object(i.useState)(d),2),k=j[0],S=j[1],x=Object(i.useRef)(!1),T=Object(i.useRef)(!1),R=Object(C.a)(),M=function(){var t=e.refManager.current.diagnoseStore.diagnosePaths.map((function(e){return"".concat(e.name," ").concat(e.tag," ").concat(e.diagnose_step.map((function(e){return"".concat(e.name,": ").concat(e.content)})).join("\n"))})).join("\n");window.dispatchEvent(new CustomEvent("DocGen.DiagnosePathValidate",{detail:{intention:t}})),x.current=!0},F=function(){var t=D(N().mark((function t(){var r,o;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.refManager.current.diagnoseStore.diagnosePaths.map((function(e){return{pathName:e.name,tag:e.tag,stepContentValidate:e.diagnose_step.every((function(e){return e.content}))}})),o=0!==r.length,r.forEach((function(e){e&&e.pathName&&e.stepContentValidate||(o=!1)})),o){t.next=6;break}return n.a.warn("请填写完整的应急步骤内容"),t.abrupt("return");case 6:if(x.current||M(),e.refManager.current.emergencyEventStore.eventsSummary.content){t.next=11;break}return n.a.warn("请先触发事件总结"),t.abrupt("return");case 11:e.setStepValue(h.b.experience),B(),U(),H();case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),B=function(){var t=D(N().mark((function t(){var r,o,a,i,s;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.refManager.current.emergencyEventStore.eventsSummary.content,o=e.refManager.current.diagnoseStore.diagnosePaths.map((function(e){return{pathName:e.name,tag:e.tag,stepContent:e.diagnose_step.map((function(e){return e.content})).join("\n")}})),t.prev=2,u((function(e){return A(A({},e),{},{loading:!0})})),t.next=6,Object(p.a)((function(){return c.d({intention:JSON.stringify({eventsDescription:r,diagnosePathContent:o})})}),(function(e){var t=e.msgId;return c.h({msgId:t})}));case 6:(i=t.sent).success&&1===(null===(a=i.data)||void 0===a?void 0:a.status)&&(s=i.data.data.summary,u({loading:!1,emergencyOutline:s,emergencyOutlineLake:Object(l.htmlToLake)(s).html||s})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),n.a.error("应急概述生成异常");case 13:return t.prev=13,u((function(e){return A(A({},e),{},{loading:!1})})),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[2,10,13,16]])})));return function(){return t.apply(this,arguments)}}(),U=function(){var t=D(N().mark((function t(){var r,o,a;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v((function(e){return A(A({},e),{},{loading:!0})})),t.next=4,Object(p.a)((function(){return c.f({intention:e.refManager.current.diagnoseStore.diagnosePaths.map((function(e){return"".concat(e.name," ").concat(e.tag," ").concat(e.diagnose_step.map((function(e){return e.content})).join("\n"))})).join("\n")})}),(function(e){var t=e.msgId;return c.h({msgId:t})}));case 4:(o=t.sent).success&&1===(null===(r=o.data)||void 0===r?void 0:r.status)&&(a=o.data.data,v({loading:!1,experience:a,experienceLake:Object(l.htmlToLake)(a).html||a})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n.a.error("应急经验生成异常");case 11:return t.prev=11,v((function(e){return A(A({},e),{},{loading:!1})})),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})));return function(){return t.apply(this,arguments)}}(),H=function(){var t=D(N().mark((function t(){var r,o,a,i;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=Object(y.a)(e),E((function(e){return A(A({},e),{},{loading:!0})})),t.next=5,Object(p.a)((function(){return c.a({intention:JSON.stringify(o)})}),(function(e){var t=e.msgId;return c.h({msgId:t})}));case 5:(a=t.sent).success&&1===(null===(r=a.data)||void 0===r?void 0:r.status)&&(i=a.data.data,E({loading:!1,flow:i,flowLake:Object(s.b)([{component:"TextDiagram",props:{code:i,type:"mermaid"}}])})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n.a.error("应急流程生成异常");case 12:return t.prev=12,E((function(e){return A(A({},e),{},{loading:!1})})),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})));return function(){return t.apply(this,arguments)}}(),V=function(){e.hasPublished||(window.dispatchEvent(new CustomEvent("DocGen.ExpSummaryValidate",{detail:{intention:JSON.stringify({overviewSummary:a.emergencyOutline,expSummary:b.experience})}})),T.current=!0)};return{loading:r,emergencyOutline:a.emergencyOutline,emergencyOutlineLoading:a.loading,emergencyOutlineLake:a.emergencyOutlineLake,experience:b.experience,experienceLoading:b.loading,experienceLake:b.experienceLake,flow:O.flow,flowLoading:O.loading,flowLake:O.flowLake,sheetTplLake:k,setSheetTplLake:S,updateEmergencyOutline:function(e){u((function(t){return A(A({},t),e)}))},updateEmergencyExp:function(e){v((function(t){return A(A({},t),e)}))},updateFlow:function(e){E((function(t){return A(A({},t),e)}))},handleExp:F,handleValidate:M,handleRunEmergencyOutline:B,handleRunExperience:U,handleRunEmcDiagnoseFlowChart:H,handlePreview:function(){R(!0),T.current||V();var t=function(e){var t=e.emergency_events,r=e.events_summary,n=e.diagnose_path,o=e.emergencyOutlineLake,a=e.experienceLake,i=e.flowLake,u=e.sheetTplLake,l=t.map((function(e){return[{component:"Header3",props:{},children:["事件 ID：".concat(e.emergency_id)]},e.content_lake?{component:"Lake",props:{content:e.content_lake}}:{component:"Blockquote",props:{},children:["".concat(e.content)]},{component:"DocGenCollapse",props:{title:"当时监控原始数据"},children:m()((e.origin_data||[]).map((function(e){var t=e.data.map((function(e){return P(P({},e),{},{metricTime:g()(e.metricTime).format("HH:mm")})})),r=Object.keys(t[0]).filter((function(e){return"metricTime"!==e}))[0];return[{component:"CodeBlock",props:{content:JSON.stringify(t),language:"json"}},{component:"MonitorLineChart",props:{xField:"metricTime",yField:r,data:t,height:200}}]})))}]})),c=[{component:"Header2",props:{},children:["📝告警事件"]}].concat(w(m()(l)),[{component:"Header2",props:{},children:["💡事件总结"]},{component:"Lake",props:{content:r.content}},{component:"DocGenCollapse",props:{title:"当时监控原始数据",expanded:!0},children:m()(t.map((function(e){return m()((e.origin_data||[]).map((function(e){var t=e.data.map((function(e){return P(P({},e),{},{metricTime:g()(e.metricTime).format("HH:mm")})})),r=Object.keys(t[0]).filter((function(e){return"metricTime"!==e}))[0];return[{component:"CodeBlock",props:{content:JSON.stringify(t),language:"json"},children:[]},{component:"MonitorLineChart",props:{xField:"metricTime",yField:r,data:t,height:200},children:[]}]})))})))}]),s=n.map((function(e){var t=[{component:"Header3",props:{},children:[e.name,{component:"Tag",props:{},children:[e.tag]}]}].concat(w(m()(function(e){return e.diagnose_step.map((function(e){return[{component:"Header4",props:{},children:[e.name]},{component:"Lake",props:{content:e.content_lake}},{component:"Paragraph",props:{},children:[{component:"Text",props:{bold:!0},children:["步骤结论"]}]},{component:"Lake",props:{content:e.step_summary_lake}}]}))}(e))));return t})),f=[{component:"Header2",props:{},children:["⚙️应急过程"]}].concat(w(m()(s))),d=[{component:"Header2",props:{},children:["应急经验"]},{component:"Lake",props:{content:a}},{component:"Header2",props:{},children:["应急流程图"]},{component:"Lake",props:{content:i}},{component:"Header2",props:{},children:["改进点（预选）"]},{component:"Lake",props:{content:u}}];return[{component:"Header2",props:{},children:["应急概述"]},{component:"Paragraph",props:{},children:[{component:"Text",props:{},children:[o]}]}].concat(w(c),w(f),d)}(Object(y.c)(e)),r=Object(s.b)(t);e.setDocGenLake(r),e.setStepValue(h.b.preview)},handlePreviewValidate:V}}function B(e){var t=Object(f.b)(),r=F(t);return t.refManager.current.emergencyExpStore=r,Object(i.useEffect)((function(){var e=t.docGen.content.value||{},n=e.emergencyOutline,o=e.emergencyOutlineLake,a=e.experience,i=e.experienceLake,u=e.flowLake,l=e.sheetTplLake;(n||o)&&r.updateEmergencyOutline({emergencyOutline:n,emergencyOutlineLake:o}),(a||i)&&r.updateEmergencyExp({experience:a,experienceLake:i}),u&&r.updateFlow({flow:I.flow,flowLake:u}),l&&r.setSheetTplLake(l)}),[t.docGen.content]),u.a.createElement(M.Provider,{value:r},e.children)}function U(){return Object(i.useContext)(M)}},function(e,t,r){"use strict";r(44);var n=r(10),o=r(0),a=r(62),i=r.n(a),u=r(287),l=r(3607),c=r(4341),s=r(929),f=r(1076),d=i()("useBroadcastChannel");function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};Object(o.useEffect)((function(){var n=e.current;if(n)return n.addEventListener(t,r),function(){return n.removeEventListener(t,r)}}),[e,t,r])}var h=r(32);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(){b=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==y(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(y(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){_(a,n,o,i,u,"next",e)}function u(e){_(a,n,o,i,u,"throw",e)}i(void 0)}))}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var P=i()("editor:doc:vm");t.a=function(e){var t,r,a,i,y=e.doc,m=e.docDomain,g=e.book,_=e.group,E=e.dispatch,j=e.onPublishSuccessRedirect,C=e.me,k=e.readerEditMode,S=void 0!==k&&k,A=e.matchCondition,x=void 0===A?window.appData.matchCondition||{}:A,N=e.currentDocSlug,T=e.scene,D=e.mode,L=x.useEditorTileRendering,R=x.useEditorVirtualRendering,I=x.useEditorTileRenderingForOT,M=x.useEditorVirtualRenderingForOT,F=x.editType,B=void 0===F?"":F,U=D||(B.includes("Collab")?l.b.COLLAB:l.b.LOCK),H=O(Object(o.useState)(!1),2),V=H[0],G=H[1],q=O(Object(o.useState)(!1),2),z=q[0],W=q[1],K=O(Object(o.useState)(!1),2),Y=K[0],J=K[1],$=O(Object(o.useState)(null),2),X=$[0],Q=$[1],Z=O(Object(o.useState)(!1),2),ee=Z[0],te=Z[1],re=O(Object(o.useState)(null),2),ne=re[0],oe=re[1],ae=O(Object(o.useState)([]),2),ie=ae[0],ue=ae[1],le=O(Object(o.useState)(U),2),ce=le[0],se=le[1],fe=O(Object(o.useState)(null),2),de=fe[0],pe=fe[1],he=O(Object(o.useState)(l.a.loading),2),ye=he[0],be=he[1],me=O(Object(o.useState)(""),2),ve=me[0],ge=me[1],_e=O(Object(o.useState)(y.title),2),we=_e[0],Oe=_e[1],Ee=(t="sync_doc_title_".concat(y.id),r=function(e){return E({type:"doc/update",payload:{title:e.data}})},p(i=Object(o.useRef)("undefined"!=typeof window&&"BroadcastChannel"in window?new BroadcastChannel("".concat(t,"-channel")):null),"message",r),p(i,"messageerror",a),Object(o.useCallback)((function(e){var t;null==i||null===(t=i.current)||void 0===t||t.postMessage(e),d("postMessage",e)}),[i])),Pe=Object(f.a)(we),je=Object(f.a)(g.toc);Object(o.useEffect)((function(){return w(b().mark((function e(){var t,r,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Pe.current,S&&y.title!==t&&y.slug===N&&t&&(r=je.current,n=r.map((function(e){return e.url===N?v(v({},e),{},{title:t}):e})),E({type:"book/updateToc",payload:n}));case 2:case"end":return e.stop()}}),e)})))}),[N]);var Ce=Object(o.useMemo)((function(){return P("create workflow instance"),new c.a({me:C,doc:y,docDomain:m,book:g,group:_,dispatch:E,mode:U,scene:h.c?l.c.DESKTOP:T||l.c.WEB,onPublishSuccessRedirect:j})}),[]),ke=Object(o.useMemo)((function(){return s.a.getEditorTheme(y,g)}),[y,g]),Se=function(){var e=w(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce.save(t||l.h.USER_SAVE);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=w(b().mark((function e(t){var r,n,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P("on publish:",t),e.next=3,Ce.publish(t);case 3:if(void 0!==(n=e.sent)){e.next=6;break}return e.abrupt("return");case 6:o=S?v(v({word_count:Ce.getWordCount(),published_at:new Date,is_fake_published_at:!0},(null===(r=y.contributors)||void 0===r?void 0:r.length)>0?{}:{contributors:[C]}),h.c?{}:{readerEditModeData:null}):{},"string"==typeof n&&(o.content=n),E({type:"doc/update",payload:v(v({},o),{},{content_modified:!1})});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(e){if(P("editable change",e),J(e),e){var t=Ce.isDocContentEmpty();P("empty doc, show wizard view:",t),W(t)}else W(!1)},Ne=function(e){e===l.a.saved&&Q(new Date),be(e)},Te=function(){var e=w(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce.on(l.i.editableChange,xe),Ce.on(l.i.error,oe),Ce.on(l.i.collabUsersChange,ue),Ce.on(l.i.editModeChange,se),Ce.on(l.i.message,pe),Ce.on(l.i.docStatusChange,Ne),Ce.on(l.i.netStatusChange,ge),Ce.on(l.i.saveTitle,(function(e){P("title change to:",e),E("Doclet"!==m?{type:"doc/update",payload:{title:e}}:{type:"template/update",payload:{name:e}})})),e.next=10,Ce.start(t);case 10:"Doc"===y.type&&window.dispatchEvent(new CustomEvent("GetDocWordCount"));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){return function(){Ce.off(l.i.editableChange,xe),Ce.off(l.i.error,oe),Ce.off(l.i.collabUsersChange,ue),Ce.off(l.i.editModeChange,se),Ce.off(l.i.message,pe),Ce.off(l.i.docStatusChange,Ne),Ce.off(l.i.netStatusChange,ge)}}),[]),{state:{historyView:V,wizardView:z,editable:Y,editorLoaded:ee,docStatus:ye,docTitle:we},getWorkflow:function(){return Ce},getTheme:function(){return ke},getOpenEditorConfig:function(){return Ce.getOpenEditorConfig()},useTemplate:function(e){W(!1),Ce.useTemplate(e)},start:Te,onEditableChange:xe,onSave:Se,onPublish:Ae,buildStatusProps:function(){return{book:g,doc:y,error:ne,wfMessage:de,docStatus:ye,onReload:function(){Object(u.a)("start","reload"),Ce.cache(),Ce.start()},onClear:function(){Ce.clearError()}}},buildHistoryProps:function(){return{docId:y.id,doc:y,docDomain:m,onCancel:function(){G(!1)},onRevert:function(e){Ce.isOnlyOneEditSession()?(n.a.success(__("文档恢复成功")),Ce.revert(e),G(!1)):0!==ie.length?n.a.error(__("有其他用户正在编辑该文档，恢复可能会导致对方编辑的内容丢失，请联系他们退出编辑后再进行恢复")):n.a.error(__("你同时打开了多个浏览器窗口编辑该文档，请关闭其它窗口再进行恢复"))}}},buildEditorProps:function(){return{docTitle:we,doc:y,docDomain:m,book:g,group:_,theme:ke,editable:Y,openEditorConfig:Ce.getOpenEditorConfig(),onSave:Se,onPublish:Ae,onEditorLoaded:function(e){Ce.onEditorLoaded(e),te(!0)},onSaveTitle:Ce.onSaveTitle,onTitleChange:function(e){Oe(e),Ee(e)},getDefaultSuggestions:Ce.getDefaultSuggestions,onMentionSearch:Ce.onMentionSearch,onConnnectError:function(){ge("offline")},onThemeChange:Ce.saveDocTheme,onContentChange:function(e){Ce.onContentChange(e);var t=!e&&Ce.isDocContentEmpty();W(t),"Doc"===y.type&&window.dispatchEvent(new CustomEvent("GetDocWordCount"))},isDefaultTitle:function(e){return Ce.isDefaultTitle(e)},useEditorTileRendering:L,useEditorVirtualRendering:R,useEditorTileRenderingForOT:I,useEditorVirtualRenderingForOT:M,focusOnLoaded:!0,editType:B}},buildHeadProps:function(){return{pageReady:Y&&ye!==l.a.loading,editable:Y,publishing:ye===l.a.publishing||!!Ce.publishing,saving:ye===l.a.saving||!!Ce.saving,savedAt:X,docStatus:ye,collabUsers:ce===l.b.COLLAB?ie:null,showTitle:!!y.title,shortDocTitle:window.appData.isDocCollaborator,publish:Ae,save:Se,showHistory:"Table"!==y.type&&function(){G(!0)},netStatus:ve,getSummary:Ce.getSummary,getWordCount:Ce.getWordCount,onDeleted:function(){Ce.deleteDoc()},errorStatus:ne}},buildH5EditorProps:function(){return{doc:y,book:g,group:_,onChange:function(e){Ce.onContentChange(e)},getDefaultSuggestions:Ce.getDefaultSuggestions,onMentionSearch:Ce.onMentionSearch,onLoad:function(e){Ce.onEditorLoaded(e),te(!0)},onAutoSave:function(){Se(l.h.AUTO)},onSave:Se,onPublish:Ae,meta:s.a.getEditorMeta(y),openEditorConfig:Ce.getOpenEditorConfig()}}}}},,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return k})),r.d(t,"b",(function(){return S}));r(44);var n=r(10),o=r(725),a=r.n(o),i=r(0),u=r.n(i),l=r(3901),c=r(1076),s=r(4288),f=r(4133),d=r(3776),p=r(3934);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(){y=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==h(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(h(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function b(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){b(a,n,o,i,u,"next",e)}function u(e){b(a,n,o,i,u,"throw",e)}i(void 0)}))}}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var j={loading:!1,setLoading:a.a,emergencyEvents:[{_id:f.a.incr(),emergency_id:"",content:"",content_lake:"",loading:!1}],eventsSummary:{content:"",contentLake:""},setEventsSummary:a.a,setEmergencyEvents:a.a,addEmergencyEvent:a.a,updateEmergencyEvent:a.a,deleteEmergencyEvent:a.a,handleEmergencySummary:a.a,handleAnalyseEvent:a.a,handleValidate:a.a},C=u.a.createContext(j);function k(e){var t,r,o,a,h,b,v,_,E,P,k,S,A,x,N,T,D,L=Object(d.b)(),R=(t=O(Object(i.useState)(!1),2),r=t[0],o=t[1],a=O(Object(i.useState)(j.emergencyEvents),2),h=a[0],b=a[1],v=O(Object(i.useState)(j.eventsSummary),2),_=v[0],E=v[1],P=Object(c.a)(_),k=Object(i.useRef)(!1),S=Object(i.useCallback)((function(e){b((function(t){var r=e||{_id:f.a.incr(),emergency_id:"",content:"",content_lake:"",loading:!1};return[].concat(w(t),[r])}))}),[]),A=Object(i.useCallback)((function(e){b((function(t){return t.map((function(t){return t._id===e._id?g(g({},t),e):t}))}))}),[]),x=Object(i.useCallback)((function(e){b((function(t){return t.filter((function(t){return t._id!==e}))}))}),[]),N=function(){var e=m(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P.current.content){e.next=3;break}return n.a.warn("请先进行事件总结"),e.abrupt("return");case 3:k.current=!0,window.dispatchEvent(new CustomEvent("DocGen.EmergencySummaryValidate",{detail:{intention:P.current.content}}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=Object(i.useCallback)(m(y().mark((function e(){var t,r,a,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.stringify(h.map((function(e){return e.content})))){e.next=4;break}return n.a.warn("请填写告警事件内容"),e.abrupt("return");case 4:return e.prev=4,o(!0),e.next=8,Object(p.a)((function(){return l.e({intention:t})}),(function(e){var t=e.msgId;return l.h({msgId:t})}));case 8:(a=e.sent).success&&1===(null===(r=a.data)||void 0===r?void 0:r.status)?(i=a.data.data,E((function(){return{content:i,contentLake:Object(s.a)(i)||i}})),k.current||N()):n.a.error("事件总结异常"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log("summary",e.t0);case 15:return e.prev=15,o(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,12,15,18]])}))),[h]),D=function(){var e=m(y().mark((function e(t){var r,o,a,i,u,c,f,d,h,b,m,v,_;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.emergency_id){e.next=3;break}return n.a.error("请输入事件 id"),e.abrupt("return");case 3:return A({_id:t._id,loading:!0}),e.prev=4,window.dispatchEvent(new CustomEvent("DocGen.GetRelatedEvents",{detail:{eventId:t.emergency_id}})),e.next=8,Promise.all([Object(p.a)((function(){return l.c({intention:t.emergency_id})}),(function(e){var t=e.msgId;return l.h({msgId:t})}),{delayTime:1e3,retryIntervalTime:1e3,retryCount:4}),Object(p.a)((function(){return l.b({intention:t.emergency_id})}),(function(e){var t=e.msgId;return l.h({msgId:t})}),{delayTime:1e3,retryIntervalTime:1e3,retryCount:4})]);case 8:a=e.sent,i=O(a,2),u=i[0],c=i[1],f={},u.success&&1===(null===(r=u.data)||void 0===r?void 0:r.status)?(h=u.data.data,b=h.data.dict.emcEventResult.content,f=g(g({},f),{},{_id:t._id,content:b,content_lake:(null===(d=s.d.transformNode({component:"Blockquote",props:{},children:[Object(s.c)(b)]}))||void 0===d?void 0:d.toString())||""})):n.a.error("事件内容获取异常"),c.success&&1===(null===(o=c.data)||void 0===o?void 0:o.status)?(v=c.data.data,null!==(m=v[0])&&void 0!==m&&m.errMsg?n.a.info(null===(_=v[0])||void 0===_?void 0:_.errMsg):Array.isArray(v)&&(f=g(g({},f),{},{_id:t._id,origin_data:v}))):n.a.error("监控数据获取异常"),A(f),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),n.a.error("事件解析异常"),console.log("analyse",e.t0);case 22:return e.prev=22,A({_id:t._id,loading:!1}),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[4,18,22,25]])})));return function(t){return e.apply(this,arguments)}}(),{emergencyEvents:h,eventsSummary:_,addEmergencyEvent:S,updateEmergencyEvent:A,deleteEmergencyEvent:x,handleEmergencySummary:T,handleAnalyseEvent:D,setEmergencyEvents:b,setEventsSummary:E,loading:r,setLoading:o,handleValidate:N});return L.refManager.current.emergencyEventStore=R,Object(i.useEffect)((function(){var e=L.docGen.content.value||{},t=e.emergency_events,r=e.events_summary;t&&R.setEmergencyEvents(t),r&&R.setEventsSummary(r)}),[L.docGen.content]),Object(i.useEffect)((function(){var e=function(){var e=m(y().mark((function e(t){var r,o,a,i,u,c,d,h,b,m,v,_;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.a.incr(),e.prev=1,i=t.detail,u=i.emergency_id,c=i.content,d={_id:r,emergency_id:u,content:c,content_lake:(null===(o=s.d.transformNode({component:"Blockquote",props:{},children:[Object(s.c)(c.replace(/ {2}\n/g,"\n\n"))]}))||void 0===o?void 0:o.toString())||"",loading:!0},R.addEmergencyEvent(d),e.next=7,Object(p.a)((function(){return l.b({intention:u})}),(function(e){var t=e.msgId;return l.h({msgId:t})}),{delayTime:1e3,retryIntervalTime:1e3,retryCount:4});case 7:(h=e.sent).success&&1===(null===(a=h.data)||void 0===a?void 0:a.status)?(m=h.data.data,null!==(b=m[0])&&void 0!==b&&b.errMsg?n.a.info(null===(v=m[0])||void 0===v?void 0:v.errMsg):Array.isArray(m)&&(_=g(g({},d),{},{origin_data:m,loading:!1}),R.updateEmergencyEvent(_))):n.a.error("监控数据获取异常"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("monitor data error",e.t0);case 14:return e.prev=14,R.updateEmergencyEvent({_id:r,loading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}();return window.addEventListener("DocGen.RelatedEventADD",e),function(){window.removeEventListener("DocGen.RelatedEventADD",e)}}),[R]),u.a.createElement(C.Provider,{value:R},e.children)}function S(){return Object(i.useContext)(C)}},,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return T})),r.d(t,"b",(function(){return D}));r(44);var n=r(10),o=r(725),a=r.n(o),i=r(0),u=r.n(i),l=r(3901),c=r(3699),s=r(4133),f=[{fail:"183",metricTime:"2024-04-16 14:47:00"},{fail:"121",metricTime:"2024-04-16 14:48:00"},{fail:"148",metricTime:"2024-04-16 14:49:00"},{fail:"169",metricTime:"2024-04-16 14:50:00"},{fail:"220",metricTime:"2024-04-16 14:51:00"},{fail:"159",metricTime:"2024-04-16 14:52:00"},{fail:"144",metricTime:"2024-04-16 14:53:00"},{fail:"111",metricTime:"2024-04-16 14:54:00"},{fail:"193",metricTime:"2024-04-16 14:55:00"},{fail:"172",metricTime:"2024-04-16 14:56:00"},{fail:"161",metricTime:"2024-04-16 14:57:00"},{fail:"179",metricTime:"2024-04-16 14:58:00"},{fail:"148",metricTime:"2024-04-16 14:59:00"},{fail:"442",metricTime:"2024-04-16 15:00:00"},{fail:"197",metricTime:"2024-04-16 15:01:00"},{fail:"156",metricTime:"2024-04-16 15:02:00"},{fail:"237",metricTime:"2024-04-16 15:03:00"},{fail:"222",metricTime:"2024-04-16 15:04:00"},{fail:"204",metricTime:"2024-04-16 15:05:00"},{fail:"279",metricTime:"2024-04-16 15:06:00"},{fail:"197",metricTime:"2024-04-16 15:07:00"},{fail:"149",metricTime:"2024-04-16 15:08:00"},{fail:"217",metricTime:"2024-04-16 15:09:00"},{fail:"584",metricTime:"2024-04-16 15:10:00"},{fail:"211",metricTime:"2024-04-16 15:11:00"},{fail:"169",metricTime:"2024-04-16 15:12:00"},{fail:"346",metricTime:"2024-04-16 15:13:00"},{fail:"679",metricTime:"2024-04-16 15:14:00"},{fail:"713",metricTime:"2024-04-16 15:15:00"},{fail:"775",metricTime:"2024-04-16 15:16:00"},{fail:"1002",metricTime:"2024-04-16 15:17:00"},{fail:"1015",metricTime:"2024-04-16 15:18:00"},{fail:"962",metricTime:"2024-04-16 15:19:00"},{fail:"853",metricTime:"2024-04-16 15:20:00"},{fail:"936",metricTime:"2024-04-16 15:21:00"},{fail:"1029",metricTime:"2024-04-16 15:22:00"},{fail:"1088",metricTime:"2024-04-16 15:23:00"},{fail:"980",metricTime:"2024-04-16 15:24:00"},{fail:"915",metricTime:"2024-04-16 15:25:00"},{fail:"1301",metricTime:"2024-04-16 15:26:00"},{fail:"1129",metricTime:"2024-04-16 15:27:00"},{fail:"1273",metricTime:"2024-04-16 15:28:00"},{fail:"1028",metricTime:"2024-04-16 15:29:00"},{fail:"1059",metricTime:"2024-04-16 15:30:00"},{fail:"686",metricTime:"2024-04-16 15:31:00"},{fail:"257",metricTime:"2024-04-16 15:32:00"},{fail:"253",metricTime:"2024-04-16 15:33:00"},{fail:"209",metricTime:"2024-04-16 15:34:00"},{fail:"238",metricTime:"2024-04-16 15:35:00"},{fail:"163",metricTime:"2024-04-16 15:36:00"},{fail:"230",metricTime:"2024-04-16 15:37:00"},{fail:"232",metricTime:"2024-04-16 15:38:00"},{fail:"165",metricTime:"2024-04-16 15:39:00"},{fail:"260",metricTime:"2024-04-16 15:40:00"},{fail:"197",metricTime:"2024-04-16 15:41:00"},{fail:"179",metricTime:"2024-04-16 15:42:00"},{fail:"183",metricTime:"2024-04-16 15:43:00"},{fail:"179",metricTime:"2024-04-16 15:44:00"},{fail:"180",metricTime:"2024-04-16 15:45:00"},{fail:"160",metricTime:"2024-04-16 15:46:00"},{fail:"167",metricTime:"2024-04-16 15:47:00"}].map((function(e){return{fail:Number(e.fail),metricTime:e.metricTime}})),d={emergency_events:[{emergency_id:"TS_GOC_00144",content:"2024-11-07 21:37，天猫海外协议支付告警，成功率下跌，每分钟约200笔异常",origin_data:[{data_type:"monitor",data_content:f}]},{emergency_id:"TS_GOC_00147",content:"2024-11-07 21:38，xx应用发生error报警，error相比昨日上涨20%",origin_data:[{data_type:"monitor",data_content:f}]}],events_summary:{content:"【mock: 事件总结数据不通】2024-11-07 21:37~21:38，天猫海外协议支付告警，成功率下跌，同时xxx应用error上涨.."},change_recommends:[{id:1,content:"21:54 张三批量操作了重启",link:"https://www.baidu.com"},{id:2,content:"21:54 张三批量操作了重启",link:"https://www.baidu.com"},{id:3,content:"21:54 张三批量操作了重启",link:"https://www.baidu.com"},{id:4,content:"21:54 张三批量操作了重启",link:"https://www.baidu.com"}],diagnose_path:[],step_summary:"【mock: 步骤总结数据不通】<br>【现象】2024-04-02 11:36 产品无法发起转化 <br>【结论】联系冷锋关闭该产品的转换 <br>【操作】执行恢复执行操作",emergency_outline:"【mock: 应急概述数据不通】11月07日21:37收到天猫海外协议支付告警报警，出现...，于23:00通过xx动作止血完成，故障恢复",experience:"【mock: 应急经验不通】<br>【排查经验】【专用】天猫海外支付成功了下跌，「无线错误分类」监控有xx指标，则xx存在异常<br> 【快恢经验】【专用】天猫海外协议支付成功率下降，且报错单元化集中分布，zc可做但应用切流",experienceLake:'<p data-lake-id="u34e60823" id="u34e60823"><span data-lake-id="u4218f379" id="u4218f379">【排查经验】【专用】天猫海外支付成功了下跌，「无线错误分类」监控有xx指标，则xx存在异常</span></p><p data-lake-id="u2fe298a3" id="u2fe298a3"><span data-lake-id="u82ee54d3" id="u82ee54d3">【快恢经验】【专用】天猫海外协议支付成功率下降，且报错单元化集中分布，zc可做但应用切流</span></p>',flow:"graph TD \n  A[Mock 数据 Start] --\x3e B{Is it?};\n        B --\x3e|Yes| C[OK];\n        C --\x3e D[Rethink];\n        D --\x3e B;\n        B ----\x3e|No| E[End];",flowLake:'<card type="block" name="diagram" value="data:%7B%22type%22%3A%22mermaid%22%2C%22code%22%3A%22graph%20TD%20%5CnA%5BStart%5D%20--%3E%20B%7BIs%20it%3F%7D%3B%5Cn%20%20%20%20%20%20B%20--%3E%7CYes%7C%20C%5BOK%5D%3B%5Cn%20%20%20%20%20%20C%20--%3E%20D%5BRethink%5D%3B%5Cn%20%20%20%20%20%20D%20--%3E%20B%3B%5Cn%20%20%20%20%20%20B%20----%3E%7CNo%7C%20E%5BEnd%5D%3B%22%2C%22url%22%3A%22https%3A%2F%2Fintranetproxy.alipay.com%2Fskylark%2Flark%2F__mermaid_v3%2F22665e74a73edbcebd7a48f9885a8667.svg%22%2C%22id%22%3A%22KjPd0%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="u24266445" id="u24266445"><span data-lake-id="udc7eea38" id="udc7eea38">​</span><br></p>'},p=r(4383),h=r(3776),y=r(3934);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(){m=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",v={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==b(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(b(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function v(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function g(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){v(a,n,o,i,u,"next",e)}function u(e){v(a,n,o,i,u,"throw",e)}i(void 0)}))}}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return C(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k={loading:!1,diagnosePaths:[{_id:s.a.incr(),name:S(0),tag:p.a.EffectiveRecovery,diagnose_step:[{_id:s.a.incr(),name:A(0),content:"",content_lake:"",step_summary:"",step_summary_lake:"",origin_data:[],loading:!1}]}],addDiagnosePath:a.a,deleteDiagnosePath:a.a,updateDiagnosePath:a.a,addDiagnoseStep:a.a,deleteDiagnoseStep:a.a,updateDiagnoseStep:a.a,handleAISummary:a.a,fetchChangeRecommends:a.a,handleAddRecommend:a.a,setDiagnosePaths:a.a};function S(e){return{0:"路径一：",1:"路径二：",2:"路径三：",3:"路径四：",4:"路径五：",5:"路径六：",6:"路径七：",7:"路径八：",8:"路径九：",9:"路径十："}[e]||"路径..."}function A(e){return{0:"步骤一",1:"步骤二",2:"步骤三",3:"步骤四",4:"步骤五",5:"步骤六",6:"步骤七",7:"步骤八",8:"步骤九",9:"步骤十"}[e]||"步骤..."}var x=u.a.createContext(k),N=function(e,t,r){var n=function(e,t){return e.find((function(e){return e._id===t}))}(e,t);return null==n?void 0:n.diagnose_step.find((function(e){return e._id===r}))};function T(e){var t,r,o,a,f,b,v,_,O,j,C,T,D,L=Object(h.b)(),R=(t=P(Object(i.useState)(k.diagnosePaths),2),r=t[0],o=t[1],a=P(Object(i.useState)(k.loading),2),f=a[0],a[1],b=Object(i.useCallback)((function(){o((function(e){var t={_id:s.a.incr(),name:S(e.length),tag:p.a.EffectiveRecovery,diagnose_step:[{_id:s.a.incr(),name:A(0),content:"",content_lake:"",step_summary:"",step_summary_lake:"",origin_data:[],loading:!1}]};return[].concat(E(e),[t])}))}),[]),v=Object(i.useCallback)((function(e){o((function(t){return t.map((function(t){return e._id===t._id?w(w({},t),e):t}))}))}),[]),_=Object(i.useCallback)((function(e){o((function(t){return t.filter((function(t){return t._id!==e}))}))}),[]),O=Object(i.useCallback)((function(e){o((function(t){return t.map((function(t){if(t._id===e){var r={_id:s.a.incr(),name:A(t.diagnose_step.length),content:"",content_lake:"",step_summary:"",step_summary_lake:"",origin_data:[],loading:!1};return w(w({},t),{},{diagnose_step:[].concat(E(t.diagnose_step),[r])})}return t}))}))}),[r]),j=Object(i.useCallback)((function(e,t){o((function(r){return r.map((function(r){return r._id===e?w(w({},r),{},{diagnose_step:r.diagnose_step.filter((function(e){return e._id!==t}))}):r}))}))}),[]),C=Object(i.useCallback)((function(e,t,r){o((function(n){return n.map((function(n){return n._id===e?w(w({},n),{},{diagnose_step:n.diagnose_step.map((function(e){return e._id===t?w(w({},e),r):e}))}):n}))}))}),[r]),T=function(){var e=g(m().mark((function e(t,o){var a,i,u,s,f,d,p;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.find((function(e){return e._id===t})),!(i=null==a?void 0:a.diagnose_step.find((function(e){return e._id===o})))){e.next=24;break}if(u=null==i?void 0:i.content){e.next=7;break}return n.a.warn("请填写步骤内容"),e.abrupt("return");case 7:return e.prev=7,C(t,o,{loading:!0}),e.next=11,Object(y.a)((function(){return l.j({intention:u})}),(function(e){var t=e.msgId;return l.h({msgId:t})}));case 11:f=e.sent,d="",f.success&&1===(null===(s=f.data)||void 0===s?void 0:s.status)?d=f.data.data:n.a.error("步骤总结异常"),p=w(w({},i),{},{step_summary:d,step_summary_lake:Object(c.htmlToLake)(d).html||d,loading:!1}),C(t,o,p),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),console.log("step summary",e.t0);case 21:return e.prev=21,C(t,o,{loading:!1}),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[7,18,21,24]])})));return function(t,r){return e.apply(this,arguments)}}(),D=function(){var e=g(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=d.change_recommends)){e.next=3;break}return e.abrupt("return",t);case 3:return n.a.error("not found"),e.abrupt("return",[]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),{loading:f,diagnosePaths:r,setDiagnosePaths:o,addDiagnosePath:b,updateDiagnosePath:v,deleteDiagnosePath:_,addDiagnoseStep:O,deleteDiagnoseStep:j,updateDiagnoseStep:C,handleAISummary:T,fetchChangeRecommends:D,handleAddRecommend:function(e,t,n){var o=N(r,e,t);if(o){var a=w(w({},o),{},{origin_data:n.map((function(){return{data_type:"change_recomend",data_content:n}}))});C(e,t,a)}}});return L.refManager.current.diagnoseStore=R,Object(i.useEffect)((function(){var e=(L.docGen.content.value||{}).diagnose_path;e&&R.setDiagnosePaths(e)}),[L.docGen.content]),u.a.createElement(x.Provider,{value:R},e.children)}function D(){return Object(i.useContext)(x)}},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return W}));r(44);var n=r(10),o=r(456),a=r(83),i=r(3505),u=r(846),l=r(124),c=r(929),s=r(848);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(){d=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",y="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=p(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==f(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=h;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=p(t,r,n);if("normal"===c.type){if(o=n.done?m:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(f(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function p(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}var h=function(){var e,t=(e=d().mark((function e(t){var r,n,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.completionId,n=t.feedback,o=t.conversationId,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,l.webProxy.conversation.feedback({completion_id:r,conversation_id:o,feedback:n});case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){p(a,n,o,i,u,"next",e)}function u(e){p(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),y=r(3989),b=r(459),m=r.n(b),v=r(238),g=r.n(v),_="left",w="right",O="center",E=/\S+[ ]*\|[ ]*\S+.*?\n.*?(-)+[ ]*\|[ ]*(-)+.*?\n.*?\S+[ ]*\|[ ]*\S+.*?/g,P=r(4128);function j(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t=function(e){if(!e)return null;if(!e.match(E))return null;var t=[],r=[],n=0,o="beforeTable",a="",i="";if(e.split("\n").forEach((function(e){var u=e.split("|");if(u.length>=2){o="inTable";var l=u.map((function(e){return e.trim()})),c=l.filter((function(e,t){return 0!==t&&t!==l.length-1||e}));c.every((function(e){return/^:[-]+:$/.test(e)?(r.push(O),!0):/^[-]+:/.test(e)?(r.push(w),!0):!!/^:?[-]+/.test(e)&&(r.push(_),!0)}))||(n=Math.max(n,c.length),t.push(c))}else e&&("inTable"===o&&(o="afterTable"),"beforeTable"===o?a+=a?"\n".concat(e):e:i+=i?"\n".concat(e):e)})),0===t.length)return null;if(0===t[0].length)return null;var u={};return t.forEach((function(e,t){e.forEach((function(e,n){var o=r[n];u[t]=u[t]||{},u[t][n]={value:e,style:{hAlign:o}}}))})),{colCount:n,rowCount:t.length,data:u,rows:[],columns:[],beforeText:a,afterText:i}}(e)||{colCount:0,beforeText:"",afterText:"",data:{}},r=t.data,n=t.beforeText,o=void 0===n?"":n,a=t.afterText,i=void 0===a?"":a,u=t.colCount,l=[],c=[],s=[],f=[],d=[];if(Object.keys(r).forEach((function(e,t){var n=r[e],o=Object.keys(n).length;0!==t?c.push([].concat(j(Object.keys(n).map((function(e){return n[e].value||""}))),j(Array(u-o).fill(0).map((function(){return""}))))):l.push([].concat(j(Object.keys(n).map((function(e){return n[e].value||""}))),j(Array(u-o).fill(0).map((function(){return""})))))})),function(e){return 2===e}(u))s=(c=g()(c,"0")).map((function(e){return e[0]})),f=c.map((function(e){var t=m()(e[1].split("、"));return t.length>1?Object(P.b)(t):Object(P.c)(t[0])})),d=c.map((function(e){return m()(e[1].split("、"))}));else{s=m()(l[0])||[];for(var p=0;p<s.length;p++){for(var h=[],y=0;y<c.length;y++)h.push(c[y][p]);var b=m()(h),v=h.length===b.length?Object(P.b)(b):Object(P.c)(b.join(","));f.push(v),d.push(b)}}return{beforeText:o,afterText:i,fieldNames:s,fieldTypes:f,fieldValues:d}},S=(r(3980),r(3981));function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function x(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(e,t,r){var n,o=e.fieldNames,a=e.fieldTypes,i=e.fieldValues,u=o.map((function(e,t){var r=a[t],n=i[t];return r===S.FIELD_TYPE.SELECT||r===S.FIELD_TYPE.MULTI_SELECT?{name:e,type:r,index:t,id:Object(S.uid)(32),color:!0,options:n.map((function(e,t){return{id:Object(S.uid)(6),value:e,color:"$label-back-color:0-".concat(t)}}))}:{name:e,type:r,index:t,id:Object(S.uid)(32)}})),l=Object(S.uid)(32),c=Object(S.uid)(32),s=((null===(n=window.appData)||void 0===n?void 0:n.me)||{}).id||0,f={createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),userId:s,modifierId:s};r||(r=Object(S.uid)(32)),u.forEach((function(e,t){if(e.options){var r=Math.floor(Math.random()*e.options.length);f[e.id]={value:[e.options[r].id]}}else{var n=Math.floor(Math.random()*i[t].length);f[e.id]={value:i[t][n]||""}}}));var d=function(e,t,r,n){for(var o,a=[],i=((null===(o=window.appData)||void 0===o?void 0:o.me)||{}).id||0,u=function(){var n={createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),userId:i,modifierId:i};t.forEach((function(e,t){if(e.options){var o=Math.floor(Math.random()*e.options.length);n[e.id]={value:e.type===S.FIELD_TYPE.MULTI_SELECT?[e.options[o].id]:e.options[o].id}}else{var a=Math.floor(Math.random()*r[t].length);n[e.id]={value:r[t][a]||""}}})),a.push({uuid:Object(S.uid)(32),doc_id:0,doc_type:"Doc",sheet_id:e,user_id:i,modifier_id:i,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),data:JSON.stringify(n)})},l=0;l<n;l++)u();return a}(r,u,i,3),p={id:c,rows:d.map((function(e){return{id:e.uuid}})),rowCount:d.length,columns:u.map((function(e){return{id:e.id}})),colCount:u.length,frozenCol:0,index:0,name:"".concat(t,"-汇总"),tableId:r,type:S.VIEW_TYPE.GRID,rowHeight:{type:S.ROW_HEIGHT.LOW,name:"低",value:36}},h={id:l,name:t,desc:"",type:S.VIEW_TYPE.FORM,fields:u.map((function(e){return e.options?{columnId:e.id,columnName:e.name,title:e.name,type:e.type,validations:[{required:!0}],options:e.options}:{columnId:e.id,columnName:e.name,title:e.name,type:e.type,validations:[{required:!0}]}})),viewId:c,createdAt:(new Date).toISOString()},y=x(x({},c,p),l,h);return{format:"laketable",type:"Table",version:"1.4",larkJson:!0,sheet:[{rowIds:d.map((function(e){return e.uuid})),rowCount:d.length,columns:u,colCount:u.length,defaultView:l,activeView:l,id:r,meta:{GRID:1,FORM:1,CARD:0,KANBAN:0},views:y}],records:d}},T=function(e,t,r){var n=Object(S.ymap)(e,(function(e){var t;return(null===(t=e.get("field"))||void 0===t?void 0:t.get("name"))||""})),o=Object(S.ymap)(t,(function(e){var t=r.getViewRecordCells(e.get("record_uuid"));return Object(S.ymap)(t,(function(e){return e.formatValue}))})),a="|".concat(n.join("|"),"|\n");return a+="|".concat(n.map((function(){return"---"})).join("|"),"|\n"),o.forEach((function(e,t){a+="|".concat(e.join("|"),"|").concat(t===o.length-1?"":"\n")})),a};function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function L(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function I(){I=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==D(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(D(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function M(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function F(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){M(a,n,o,i,u,"next",e)}function u(e){M(a,n,o,i,u,"throw",e)}i(void 0)}))}}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z(n.key),n)}}function U(e,t,r){return t=V(t),function(e,t){if(t&&("object"==D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,H()?Reflect.construct(t,r||[],V(e).constructor):t.apply(e,r))}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H=function(){return!!e})()}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function q(e,t,r){return(t=z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}var W=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),q(e=U(this,t),"msgList",[]),q(e,"_lastMsgId",void 0),q(e,"_conversation",void 0),q(e,"_conversationList",[]),q(e,"tableId",void 0),q(e,"table",void 0),q(e,"book",void 0),q(e,"isWaitingResponse",!1),q(e,"isInRequesting",!1),q(e,"isEmptyTable",!1),q(e,"userId",window.appData.me.id),q(e,"streamReqMethod",void 0),q(e,"abortReq",null),q(e,"generateId",(function(){return Math.floor(1e7*Math.random())})),q(e,"notifyInnerDatasetUpdated",(function(t){e.notifyListener((function(e){var r;null===(r=e.onInnerDatasetUpdated)||void 0===r||r.call(e,t)}))})),q(e,"_createTable",function(){var t=F(I().mark((function t(r,i){var u,l,f,d,p,h;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=e.getMsgById(r),(l=null==u?void 0:u.form)&&void 0!==(null==i?void 0:i.id)){t.next=4;break}return t.abrupt("return");case 4:return f=N(l,u.title),d="Table",p={title:s.a.getDefaultTitle(c.a.adapterDocType(d)),type:c.a.adapterDocType(d),format:c.a.getDefaultFormat(d),book_id:i.id,body_draft:JSON.stringify(f),status:a.STATUS.draft,insert_to_catalog:!0,action:"prependChild",target_uuid:null},t.next=9,c.a.createDoc(p,(function(){return n.a.error(__("网络异常，请稍后重试"))}));case 9:return h=t.sent,e.callFeedback(u,o.FEEDBACK_TYPE.POSITIVE_USE),t.abrupt("return",h);case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),q(e,"_updateHttpResult",(function(t,r){if(!e.isInRequesting)return!1;if(e.msgList.push({msgId:t.completion_id,type:y.e.ai,title:r,content:t.result,form:k(t.result),isComplete:!0}),!t.result)throw new Error(y.c.modelError);return e.isWaitingResponse=!1,e.isInRequesting=!1,e.notifyInnerDatasetUpdated({needScroll:!0,scrollImmediately:!0}),!0})),q(e,"setDataTableEmptyStatus",(function(t){e.isEmptyTable=t,e.notifyInnerDatasetUpdated({needScroll:!1})})),q(e,"getMsgById",(function(t){return e.msgList.find((function(e){return e.msgId===t}))})),q(e,"createTable",function(){var t=F(I().mark((function t(r,n){var o;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._createTable(r,n);case 2:return o=t.sent,t.next=5,Object(u.c)("/".concat(n.user.login,"/").concat(n.slug,"/").concat(o.slug,"/edit"));case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),q(e,"createTableInBook",function(){var t=F(I().mark((function t(r){var n;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.book){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e._createTable(r,e.book);case 4:return n=t.sent,t.next=7,Object(u.c)("/".concat(e.book.namespace,"/").concat(n.slug,"/edit"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.initTable(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(t,e),r=t,i=[{key:"conversationId",get:function(){var e;return(null===(e=this._conversation)||void 0===e?void 0:e.id)||0}},{key:"conversationList",get:function(){return this._conversationList}},{key:"notifyDatasetUpdatedInternal",value:function(e){this.notifyDatasetUpdated({scrollImmediately:!e})}},{key:"pushMsg",value:function(e){this.msgList.push(e),this._lastMsgId=e.msgId,this.notifyDatasetUpdatedInternal(!0)}},{key:"setStreamReqMethod",value:function(e){this.streamReqMethod=e}},{key:"initTable",value:function(e){e?(this.table=e,t.tableIns=e):t.tableIns&&(this.table=t.tableIns),this.table&&this.setDataTableEmptyStatus(this.table.isEmptyTable())}},{key:"destroyTable",value:function(){this.table=null,t.tableIns=null}},{key:"startGenerateForm",value:(_=F(I().mark((function e(t,r){var o,a,i,u,l,c,s;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInRequesting&&t){e.next=2;break}return e.abrupt("return",!1);case 2:return this.isWaitingResponse=!0,this.isInRequesting=!0,this.msgList.push({msgId:this.generateId(),type:y.e.user,title:"",content:t,form:null}),this.notifyInnerDatasetUpdated({needScroll:!0}),e.prev=6,o=this.streamReqMethod({content:t,type:y.a.generateForm,context_id:this.tableId,http:!0,conversation_id:this.conversationId}),a=o.request,i=o.abort,this.abortReq=i,e.next=11,a;case 11:if(u=e.sent,r){e.next=24;break}return e.prev=13,l=this.streamReqMethod({content:"".concat(u.result),type:y.a.generateTitle,context_id:this.tableId}),c=l.request,e.next=17,c;case 17:s=e.sent,r=s.result.replace(/[,，'"“”.。!！]/g,"")||"自定义表单",e.next=24;break;case 21:e.prev=21,e.t0=e.catch(13),r="自定义表单";case 24:return e.abrupt("return",this._updateHttpResult(u,r));case 27:return e.prev=27,e.t1=e.catch(6),"AbortError"!==(null===e.t1||void 0===e.t1?void 0:e.t1.name)&&(null!==e.t1&&void 0!==e.t1&&e.t1.message&&y.f.includes(e.t1.message)?n.a.error(y.b[e.t1.message]):n.a.error(y.b.netError)),this.isWaitingResponse=!1,this.isInRequesting=!1,this.notifyInnerDatasetUpdated({needScroll:!1}),e.abrupt("return",!1);case 34:case"end":return e.stop()}}),e,this,[[6,27],[13,21]])}))),function(e,t){return _.apply(this,arguments)})},{key:"startGenerateSummary",value:(g=F(I().mark((function e(){var t,r,o,a,i,u,l;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInRequesting&&this.table){e.next=2;break}return e.abrupt("return",!1);case 2:return this.isWaitingResponse=!0,this.isInRequesting=!0,this.msgList.push({msgId:this.generateId(),type:y.e.user,title:"",content:__("概括本数据表"),form:null}),this.notifyInnerDatasetUpdated({needScroll:!0}),e.prev=6,t=this.table.readService.getAllViewFields(),r=this.table.readService.getOriginViewRecords(),o=T(t||[],r,this.table.readService),a=this.streamReqMethod({content:o,type:y.a.summaryTable,context_id:this.tableId,http:!0,conversation_id:this.conversationId}),i=a.request,u=a.abort,this.abortReq=u,e.next=14,i;case 14:return l=e.sent,e.abrupt("return",this._updateHttpResult(l,""));case 18:return e.prev=18,e.t0=e.catch(6),"AbortError"!==(null===e.t0||void 0===e.t0?void 0:e.t0.name)&&(null!==e.t0&&void 0!==e.t0&&e.t0.message&&y.f.includes(e.t0.message)?n.a.error(y.b[e.t0.message]):n.a.error(y.b.netError)),this.isWaitingResponse=!1,this.isInRequesting=!1,this.notifyInnerDatasetUpdated({needScroll:!1}),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,this,[[6,18]])}))),function(){return g.apply(this,arguments)})},{key:"stopGenerate",value:function(e){var t,r;this.isWaitingResponse=!1,this.isInRequesting=!1,null===(t=this.abortReq)||void 0===t||t.call(this),-1!==(r=e?this.msgList.findIndex((function(t){return t.msgId===e})):this.msgList.length-1)&&(this.msgList[r].isComplete=!0,this.notifyInnerDatasetUpdated({needScroll:!1}))}},{key:"callFeedback",value:(v=F(I().mark((function e(t,r){var a,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isClientId){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,h({feedback:r,completionId:t.msgId,conversationId:this.conversationId});case 5:null!=(a=e.sent)&&a.success&&-1!==(i=this.msgList.findIndex((function(e){return e.msgId===t.msgId})))&&(this.msgList[i].feedback=r,this.notifyInnerDatasetUpdated({needScroll:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r!==o.FEEDBACK_TYPE.POSITIVE_USE&&n.a.error(__("网络异常，请稍后重试"));case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e,t){return v.apply(this,arguments)})},{key:"replaceTable",value:function(e){if(this.table){var t=this.getMsgById(e),r=null==t?void 0:t.form;if(r){var n=this.table.readService.getTable();this.table.commandService.execCommand("importTable",N(r,t.title,n.get("uuid"))),this.callFeedback(t,o.FEEDBACK_TYPE.POSITIVE_USE),this.setDataTableEmptyStatus(!1)}}}},{key:"updateConversationList",value:function(e){this._conversationList=e||[],this.notifyListener((function(e){var t;return null===(t=e.onConversationsUpdated)||void 0===t?void 0:t.call(e)}))}},{key:"_updateCurrentConversation",value:function(e,t){var r,n=this;this.msgList=[],this._conversation=e,null==e||null===(r=e.completions)||void 0===r||r.forEach((function(e){var t,r;n.pushMsg({msgId:n.generateId(),type:y.e.user,content:(null===(t=e.reference)||void 0===t?void 0:t.type)===y.a.summaryTable?__("概括本数据表"):e.prompt,title:"",form:null}),n.pushMsg({msgId:n.generateId(),type:y.e.ai,content:e.completion||"",feedback:e.feedback,title:(null===(r=y.d.find((function(t){return t.ques===e.prompt})))||void 0===r?void 0:r.title)||"自定义表单",form:k(e.completion||""),isComplete:!0})})),this.notifyDatasetUpdatedInternal(t)}},{key:"initConversation",value:(m=F(I().mark((function e(){var t,r,n,a;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.webProxy.conversation.list({group_id:0,type:o.CONVERSATION_TYPE.DATA_TABLE_ASSISTANT});case 2:if(t=e.sent,r=t.conversations||[],this.updateConversationList(r),!r.length){e.next=13;break}return n=r[0],e.next=9,l.webProxy.conversation.findOne({id:n.id});case 9:a=e.sent,this._updateCurrentConversation(null==a?void 0:a.conversation,!0),e.next=14;break;case 13:this.createConversation();case 14:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"switchConversation",value:(b=F(I().mark((function e(t){var r,n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.conversationId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l.webProxy.conversation.findOne({id:t});case 4:n=e.sent,null===(r=this.abortReq)||void 0===r||r.call(this),this._updateCurrentConversation(null==n?void 0:n.conversation,!1);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"createConversation",value:(p=F(I().mark((function e(){var t,r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.webProxy.conversation.create({group_id:0,type:o.CONVERSATION_TYPE.DATA_TABLE_ASSISTANT});case 2:r=e.sent,this._conversation=null==r?void 0:r.conversation,this.msgList=[],null===(t=this.abortReq)||void 0===t||t.call(this),r.conversation&&this.updateConversationList([r.conversation].concat(L(this._conversationList))),this.notifyDatasetUpdatedInternal();case 8:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"deleteConversation",value:(d=F(I().mark((function e(t){var r,n;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.webProxy.conversation.deleteConversation({id:t});case 2:if(null!=(r=e.sent)&&r.success){e.next=5;break}return e.abrupt("return",!1);case 5:return n=this._conversationList.filter((function(e){return e.id!==t})),this.updateConversationList(n),t===this.conversationId&&(n.length>0?this.switchConversation(n[0].id):this.createConversation()),this.notifyDatasetUpdatedInternal(),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"isLatestCompletion",value:function(e){var t;return!(this.isInRequesting||null===(t=this.msgList)||void 0===t||!t.length)&&e.type!==y.e.user&&this._lastMsgId===e.msgId}}],i&&B(r.prototype,i),f&&B(r,f),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,f,d,p,b,m,v,g,_}(i.b);q(W,"tableIns",void 0)},,function(e,t,r){"use strict";r.d(t,"a",(function(){return M}));r(44);var n=r(10),o=r(456),a=r(3505),i=r(929),u=r(848),l=r(846),c=r(83),s=r(306),f=r.n(s),d=r(3752),p=r.n(d),h=r(124);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(){b=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==y(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(y(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function m(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}var v=function(){var e,t=(e=b().mark((function e(t){var r,n,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.completionId,n=t.feedback,r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,h.webProxy.aiWriting.feedback({completion_id:r,feedback:n});case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){m(a,n,o,i,u,"next",e)}function u(e){m(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),g=r(4290),_=r(1470);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function O(){O=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(_=P);var j=g.prototype=m.prototype=Object.create(_);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==w(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(w(t)+" is not iterable")}return v.prototype=g,o(j,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function E(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){E(a,n,o,i,u,"next",e)}function u(e){E(a,n,o,i,u,"throw",e)}i(void 0)}))}}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function S(e,t,r){return t=x(t),function(e,t){if(t&&("object"==w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,A()?Reflect.construct(t,r||[],x(e).constructor):t.apply(e,r))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function T(e,t,r){return(t=D(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}function L(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new R(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function R(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return R=function(e){this.s=e,this.n=e.next},R.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new R(e)}var I=function(){return Math.floor(1e7*Math.random())},M=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(e=S(this,t),"msgList",[]),T(e,"sheet",void 0),T(e,"sheetId",void 0),T(e,"book",void 0),T(e,"isWaitingResponse",!1),T(e,"isInRequesting",!1),T(e,"isSheetEmpty",!0),T(e,"isToInsertStatus",!1),T(e,"userId",window.appData.me.id),T(e,"streamReqMethod",void 0),T(e,"abortReq",null),T(e,"notifyInnerDatasetUpdated",(function(t){e.notifyListener((function(e){var r;null===(r=e.onInnerDatasetUpdated)||void 0===r||r.call(e,t)}))})),T(e,"initSheet",(function(r){var n;r?(e.sheet=r,t.sheetIns=r):t.sheetIns&&(e.sheet=t.sheetIns),null!==(n=e.sheet)&&void 0!==n&&n.AI&&(e.isSheetEmpty=e.sheet.AI.isEmptySheet())})),T(e,"updateStreamMsg",(function(t,r,n,o){if(t){if(n){var a=o?e.msgList.findIndex((function(e){return e.msgId===o})):-1;-1!==a?e.msgList[a]=C(C({},e.msgList[a]),{},{msgId:t,content:r,isClientId:!1,isComplete:!0}):e.msgList.push({msgId:t,type:g.e.ai,content:r,isClientId:!1,isComplete:!0}),e.isInRequesting=!1}else{var i=e.msgList.findIndex((function(e){return e.msgId===t}));-1===i?e.msgList.push({msgId:t,type:g.e.ai,content:r,clientId:t,isClientId:!0}):e.msgList[i].content=r}e.isWaitingResponse=!1,e.notifyInnerDatasetUpdated({needScroll:!0,scrollImmediately:!0})}})),T(e,"_updateHttpResult",(function(t){if(e.isInRequesting){if(e.msgList.push({msgId:t.completion_id,type:g.e.ai,content:t.result,isComplete:!0}),!t.result)throw new Error(g.d.modelError);return e.isWaitingResponse=!1,e.isInRequesting=!1,e.notifyInnerDatasetUpdated({needScroll:!0,scrollImmediately:!0}),!0}})),T(e,"_updateStreamResult",(function(t,r){return t instanceof Error?{success:!1,error:g.d.netError}:(t.completion_id||r.id||(r.id=I()),"infosec_error"===t.error_code&&(r.text="",e.updateStreamMsg(r.id,r.text,!0,r.id)),t.error||t.error_code?{success:!1,error:g.d.modelError}:(t.result&&(r.text=t.end?t.result:r.text+t.result),t.end&&(e.updateStreamMsg(t.completion_id,t.result||r.text||"",!0,r.id),r.id=t.completion_id,!r.text)?{success:!1,error:g.d.modelError}:{success:!0,streamResult:r}))})),T(e,"_updateId",(function(t,r){if(r){var n=e.msgList.findIndex((function(e){return e.msgId===r}));-1!==n&&(e.msgList[n]=C(C({},e.msgList[n]),{},{msgId:t,isClientId:!1,isComplete:!0}))}})),T(e,"callGenerateSheet",function(){var t=P(O().mark((function t(r){var o,a,i,u,l,c,s,f,d,p,h,y,b,m,v,_,w,E,P,j,C=arguments;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=!(C.length>1&&void 0!==C[1])||C[1],!e.isInRequesting){t.next=3;break}return t.abrupt("return");case 3:if(e.isWaitingResponse=!0,e.isInRequesting=!0,e.msgList.push({msgId:I(),type:g.e.user,content:r}),e.notifyInnerDatasetUpdated({needScroll:!0}),a=null,i=null,u=function(){a&&window.clearTimeout(a),i&&window.clearTimeout(i),a=null,i=null},t.prev=10,!o){t.next=63;break}l=e.streamReqMethod({content:r,type:g.a.generateSheet,contextId:e.sheetId,stream:!0,http:!0}),c=l.request,s=l.abort,e.abortReq=s,f=0,d={text:"",textIndex:0,id:void 0},a=window.setTimeout((function(){a=null;var t,r=d.id;-1!==(t=r?e.msgList.findIndex((function(e){return e.msgId===r})):e.msgList.length-1)&&(e.msgList[t].isComplete=!0,e.notifyInnerDatasetUpdated({needScroll:!1}))}),18e4),i=window.setInterval((function(){if(e.isInRequesting){if(d.textIndex<=d.text.length){var t=d.text.slice(0,d.textIndex++);e.updateStreamMsg(d.id,t,!1)}}else u()}),60),p=!1,h=!1,t.prev=20,b=L(c);case 22:return t.next=24,b.next();case 24:if(!(p=!(m=t.sent).done)){t.next=43;break}if(v=m.value,!(f>2e3)){t.next=28;break}return t.abrupt("break",43);case 28:if(e.isInRequesting){t.next=32;break}return u(),v.completion_id&&e._updateId(v.completion_id,d.id),t.abrupt("return");case 32:if((_=e._updateStreamResult(v,d)).success){t.next=35;break}throw new Error(_.error);case 35:if(d=_.streamResult,!v.end){t.next=39;break}return u(),t.abrupt("return",!0);case 39:f++;case 40:p=!1,t.next=22;break;case 43:t.next=49;break;case 45:t.prev=45,t.t0=t.catch(20),h=!0,y=t.t0;case 49:if(t.prev=49,t.prev=50,!p||null==b.return){t.next=54;break}return t.next=54,b.return();case 54:if(t.prev=54,!h){t.next=57;break}throw y;case 57:return t.finish(54);case 58:return t.finish(49);case 59:e.updateStreamMsg(d.id,d.text,!0,d.id),u(),t.next=69;break;case 63:return w=e.streamReqMethod({content:r,type:g.a.generateSheet,contextId:e.sheetId}),E=w.request,P=w.abort,e.abortReq=P,t.next=67,E;case 67:j=t.sent,e._updateHttpResult(j);case 69:t.next=79;break;case 71:return t.prev=71,t.t1=t.catch(10),null!==t.t1&&void 0!==t.t1&&t.t1.message&&g.f.includes(t.t1.message)?n.a.error(g.c[t.t1.message]):n.a.error(g.c.netError),e.isWaitingResponse=!1,e.isInRequesting=!1,e.notifyInnerDatasetUpdated({needScroll:!1}),u(),t.abrupt("return",!1);case 79:case"end":return t.stop()}}),t,null,[[10,71],[20,45,49,59],[50,,54,58]])})));return function(e){return t.apply(this,arguments)}}()),T(e,"stopGenerate",(function(t){var r,n,o;e.isWaitingResponse=!1,e.isInRequesting=!1,null===(r=(n=e).abortReq)||void 0===r||r.call(n),-1!==(o=t?e.msgList.findIndex((function(e){return e.msgId===t})):e.msgList.length-1)&&(e.msgList[o].isComplete=!0,e.notifyInnerDatasetUpdated({needScroll:!1}))})),T(e,"getMsgById",(function(t){return e.msgList.find((function(e){return e.msgId===t}))})),T(e,"callFeedback",function(){var t=P(O().mark((function t(r,a){var i,u;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.isClientId){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,v({feedback:a,completionId:r.msgId});case 5:null!=(i=t.sent)&&i.success&&-1!==(u=e.msgList.findIndex((function(e){return e.msgId===r.msgId})))&&(e.msgList[u].feedback=a,e.notifyInnerDatasetUpdated({needScroll:!1})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a!==o.FEEDBACK_TYPE.POSITIVE_USE&&n.a.error(__("网络异常，请稍后重试"));case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,r){return t.apply(this,arguments)}}()),T(e,"insertSheet",(function(t){if(e.sheet){var r=e.getMsgById(t),n=null==r?void 0:r.content;n&&(e.sheet.command.execute("insertFromMd",n),e.callFeedback(r,o.FEEDBACK_TYPE.POSITIVE_USE))}})),T(e,"findInsertPosition",(function(t){var r;if(e.sheet){var n=e.getMsgById(t),a=null==n?void 0:n.content;a&&(null===(r=e.sheet.AI)||void 0===r||r.gotoInsert(a),e.isToInsertStatus=!0,e.notifyInnerDatasetUpdated({needScroll:!1}),e.callFeedback(n,o.FEEDBACK_TYPE.POSITIVE_USE))}})),T(e,"setSheetDataEmptyStatus",(function(t){e.isSheetEmpty=t,e.notifyInnerDatasetUpdated({needScroll:!1})})),T(e,"_createSheet",function(){var t=P(O().mark((function t(r,a){var l,s,d,h,y,b,m,v;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=e.getMsgById(r),(s=null==l?void 0:l.content)&&void 0!==(null==a?void 0:a.id)){t.next=4;break}return t.abrupt("return");case 4:if(d=Object(_.a)(s)){t.next=7;break}return t.abrupt("return");case 7:return h={data:d.data,colCount:26,rowCount:200,rows:{},columns:{},filter:{},id:"",index:0,mergeCells:{},name:"Sheet1",selections:{activeCol:0,activeRow:0,row:0,col:0,rowCount:1,colCount:1},vStore:{}},(y=f()(g.b)).sheet=p.a.deflate(JSON.stringify([h]),{to:"string"}),b="Sheet",m={title:u.a.getDefaultTitle(i.a.adapterDocType(b)),type:i.a.adapterDocType(b),format:i.a.getDefaultFormat(b),book_id:a.id,body_draft:JSON.stringify(y),status:c.STATUS.draft,insert_to_catalog:!0,action:"prependChild",target_uuid:null},t.next=14,i.a.createDoc(m,(function(){return n.a.error(__("网络异常，请稍后重试"))}));case 14:return v=t.sent,e.callFeedback(l,o.FEEDBACK_TYPE.POSITIVE_USE),t.abrupt("return",v);case 17:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),T(e,"createSheet",function(){var t=P(O().mark((function t(r,n){var o;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._createSheet(r,n);case 2:return o=t.sent,t.next=5,Object(l.c)("/".concat(n.user.login,"/").concat(n.slug,"/").concat(o.slug,"/edit"));case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),T(e,"createSheetInBook",function(){var t=P(O().mark((function t(r){var n;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.book){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e._createSheet(r,e.book);case 4:return n=t.sent,t.next=7,Object(l.c)("/".concat(e.book.namespace,"/").concat(n.slug,"/edit"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),T(e,"endInsertStatus",(function(){e.isToInsertStatus&&(e.isToInsertStatus=!1,e.notifyInnerDatasetUpdated({needScroll:!1}))})),e.initSheet(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(t,e),r=t,(a=[{key:"setStreamReqMethod",value:function(e){this.streamReqMethod=e}},{key:"destroySheet",value:function(){this.sheet=null,t.sheetIns=null}}])&&k(r.prototype,a),s&&k(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,s}(a.b);T(M,"sheetIns",void 0)},,,function(e,t,r){"use strict";var n=r(4387),o=r.n(n),a=r(4388),i=r.n(a),u=r(1703),l=r.n(u),c=r(4095),s=r.n(c),f=r(2746),d=r.n(f),p=r(1064),h=r.n(p),y=r(739);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(){g=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=v.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==b(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(b(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function _(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function E(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){O(a,n,o,i,u,"next",e)}function u(e){O(a,n,o,i,u,"throw",e)}i(void 0)}))}}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function j(e,t,r){return t&&P(e.prototype,t),r&&P(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e,t,r){return(t=k(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}var S=j((function e(t){var r=this,n=t.tagProxy;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,"isLongTag",(function(e){return e&&e.length>y.MAX_SHOW_TEXT_LENGTH})),C(this,"getShowText",(function(e){return"".concat(e.slice(0,y.MAX_SHOW_TEXT_LENGTH),"...")})),C(this,"createTag",h()(function(){var e=E(g().mark((function e(t){var n,o,a,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentTags,o=t.docId,a=d()(t.title)){e.next=4;break}return e.abrupt("return");case 4:if(y.TAG_RULES_REG.test(a)){e.next=6;break}return e.abrupt("return",{error:__("标签只能输入中文、数字、字母、-_@#/ 等符号")});case 6:if(!(a.length>y.MAX_LENGTH)){e.next=8;break}return e.abrupt("return",{error:__("标签最多{length}字",{length:y.MAX_LENGTH})});case 8:if(!s()(n,(function(e){return e.title===a}))){e.next=10;break}return e.abrupt("return",{error:__("不允许添加重复的标签")});case 10:return e.next=12,r.tagProxy.create({docId:o,title:a});case 12:if(!(i=e.sent)||!i.id){e.next=15;break}return e.abrupt("return",{data:[].concat(_(n),[i])});case 15:return e.abrupt("return",{error:__("标签新增失败")});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),200)),C(this,"getSuggest",function(){var e=E(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tagProxy.suggest(t);case 2:return n=e.sent,e.abrupt("return",l()(n,(function(e){return{value:e.title}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C(this,"destroy",function(){var e=E(g().mark((function e(t,n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tagProxy.destroy(t);case 2:return e.sent&&i()(n,(function(e){return e.id===t.id})),e.abrupt("return",_(n));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),C(this,"arrangeResultTags",(function(e,t,r){var n=r.reduce((function(e,t){return v(v({},e),{},C({},t.title,t.count))}),{});return l()(e,(function(e){var r=e.tags.split(",").filter((function(e){return o()(t,e)<0})),a=function(e,t){return n[t]-n[e]},i=[].concat(_(t.sort(a)),_(r.sort(a)));return v(v({},e),{},{tags:i.map((function(e){return{title:e}}))})}))})),C(this,"tagsToString",(function(e){var t=e.tags,r=void 0===t?[]:t;return v(v({},e),{},{tags:r.join(",")})})),C(this,"findDocs",function(){var e=E(g().mark((function e(t,n){var o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tagProxy.findDocs(r.tagsToString(t));case 2:return o=e.sent,e.abrupt("return",r.arrangeResultTags(o,t.tags,n.tagGroup));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),C(this,"countDocs",function(){var e=E(g().mark((function e(t){var n;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.tagProxy.countDocs(r.tagsToString(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.tagProxy=n}));t.a=S},function(e,t,r){"use strict";r.d(t,"b",(function(){return h})),r.d(t,"a",(function(){return y})),r.d(t,"c",(function(){return b})),r.d(t,"d",(function(){return m}));r(44);var n=r(10),o=r(3776),a=r(3990);r.d(t,"e",(function(){return a.a}));var i=r(4129),u=r(4372),l=r(4367),c=r(4353);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(){f=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",y="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=p(e[o],e,a);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==s(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(f).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=h;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=p(t,r,n);if("normal"===c.type){if(o=n.done?m:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(s(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function d(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){d(a,n,o,i,u,"next",e)}function u(e){d(a,n,o,i,u,"throw",e)}i(void 0)}))}}function h(){var e,t=Object(o.b)(),r=Object(l.b)(),u=Object(a.a)(),c=t.stepValue===i.b.init||t.stepValue===i.b.events,s=!(null==r||null===(e=r.eventsSummary)||void 0===e||!e.content),d=function(){var e=p(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.handleEmergencySummary();case 2:t.setStepValue(i.b.events),u(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=0!==r.emergencyEvents.length&&r.emergencyEvents.every((function(e){return e.content}));return{stepVisible:c,prevEnable:!1,nextEnable:s,onNextClick:function(){s?t.setStepValue(i.b.diagnose):n.a.info("请先完成事件总结")},headerActionVisible:c,summaryVisible:h,summaryEnable:!r.loading,addEventEnable:!r.loading,handleSummary:d,superSideBarActionVisible:c,superSideBarActionEnable:s,onSuperSideBarActionClick:function(){r.handleValidate()}}}function y(){var e=Object(o.b)(),t=Object(c.b)(),r=Object(u.b)(),l=Object(a.a)(),s=e.stepValue===i.b.diagnose,d=r.diagnosePaths.map((function(e){return{pathName:e.name,tag:e.tag,stepContentValidate:e.diagnose_step.every((function(e){return!!e.content})),stepSummaryValidate:e.diagnose_step.every((function(e){return!!e.step_summary}))}})),h=0!==d.length;d.forEach((function(e){e&&e.pathName&&e.stepContentValidate&&e.stepSummaryValidate||(h=!1)}));var y=h,b=function(){var e=p(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleExp();case 2:l(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{stepVisible:s,prevEnable:!0,nextEnable:y,onPrevClick:function(){e.setStepValue(i.b.events)},onNextClick:function(){if(h){var r=t.emergencyOutline&&t.experience&&t.flowLake;e.hasPublished||r||b(),e.setStepValue(i.b.experience)}else n.a.info("请填写完整的应急过程内容")},headerVisible:s,onHeaderNext:function(){h?(b(),e.setStepValue(i.b.experience)):n.a.info("请填写完整的应急过程内容")},expSummaryDisabled:!y,handleExpSummary:b,superSideBarActionVisible:s,superSideBarActionEnable:y,onSuperSideBarActionClick:function(){t.handleValidate()}}}function b(){var e=Object(o.b)(),t=Object(c.b)(),r=m(),n=e.stepValue===i.b.experience;return{stepVisible:n,prevEnable:!0,nextEnable:!r.previewDisabled,onPrevClick:function(){e.setStepValue(i.b.diagnose)},onNextClick:function(){r.handlePreview()},superSideBarActionVisible:n,superSideBarActionEnable:t.emergencyOutline&&t.experience,onSuperSideBarActionClick:function(){r.handleValidate()}}}function m(){var e=Object(o.b)(),t=Object(c.b)(),r=Object(a.a)(),n=function(){var e=p(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.handleExp();case 2:r(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=t.emergencyOutline,l=t.experience,s=t.flow,d=t.loading,h=e.stepValue===i.b.experience;return{stepVisible:e.stepValue===i.b.preview,headerVisible:h,regenerateVisible:!e.hasPublished,regenerateDisabled:d,prevEnable:!0,nextEnable:!1,onPrevClick:function(){e.setStepValue(i.b.experience)},onNextClick:t.handlePreview,previewDisabled:!(u||l||s)||d,handlePreview:t.handlePreview,handleRegenerate:n,handleValidate:t.handlePreviewValidate}}},function(e,t,r){"use strict";t.a={stepBtn:"SREPage-module_stepBtn_NhIxN",headerActions:"SREPage-module_headerActions_uO7rc",headerLeftActions:"SREPage-module_headerLeftActions_L-yam",saveBtn:"SREPage-module_saveBtn_JIcbB",stepDescWrapper:"SREPage-module_stepDescWrapper_HrEHk"}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n=function(e){return e.EffectiveRecovery="有效恢复",e.SelfRecovery="自主恢复",e.EffectiveExclude="有效排除",e.WrongOperation="错误操作",e}({}),o=[{label:n.EffectiveRecovery,value:n.EffectiveRecovery},{label:n.SelfRecovery,value:n.SelfRecovery},{label:n.EffectiveExclude,value:n.EffectiveExclude},{label:n.WrongOperation,value:n.WrongOperation}]},,,function(e,t,r){"use strict";r(57);var n=r(13),o=r(0),a=r.n(o),i=r(2),u=r.n(i);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){var t=l(Object(o.useState)(!1),2),r=t[0],i=t[1],u=l(Object(o.useState)(e.title||__("无标题")),2),c=u[0],s=u[1];Object(o.useEffect)((function(){e.title!==c&&s(e.title||__("无标题"))}),[e.title]);var f=function(){var t=c||__("无标题");e.saveTitle(t),s(t),i(!1)};return r?a.a.createElement(n.a,{className:"lark-editor-header-title-input",autoFocus:!0,type:"text",value:c,onChange:function(e){s(e.target.value)},onFocus:function(e){r&&e.target.select()},onBlur:f,onPressEnter:f}):a.a.createElement("span",{className:"name-title",title:c,onClick:function(){i(!0)}},c)};s.propTypes={title:u.a.string.isRequired,saveTitle:u.a.func.isRequired},t.a=s},function(e,t,r){var n=r(563),o=r(694),a=Math.max;e.exports=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var u=null==r?0:o(r);return u<0&&(u=a(i+u,0)),n(e,t,u)}},function(e,t,r){var n=r(250),o=r(4389);e.exports=function(e,t){var r=[];if(!e||!e.length)return r;var a=-1,i=[],u=e.length;for(t=n(t,3);++a<u;){var l=e[a];t(l,a,e)&&(r.push(l),i.push(a))}return o(e,i),r}},function(e,t,r){var n=r(957),o=r(231),a=Array.prototype.splice;e.exports=function(e,t){for(var r=e?t.length:0,i=r-1;r--;){var u=t[r];if(r==i||u!==l){var l=u;o(u)?a.call(e,u,1):n(e,u)}}return e}},function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"a",(function(){return h}));var n=r(0),o=r(1296),a=r(3860),i=r(52),u=r(5183),l=r(1035);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(){s=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",y="suspendedYield",b="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};f(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=p(e[o],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==c(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=h;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var c=p(t,r,n);if("normal"===c.type){if(o=n.done?m:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(c(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=f(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),f(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),f(j,l,"Generator"),f(j,i,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function f(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function d(){var e=Object(o.a)();return Object(n.useEffect)((function(){return a.a.addListener({onVisibilityChanged:e})}),[]),{visibility:a.a.visibility,isExpanded:a.a.isExpanded,isInvisible:a.a.isInvisible,isCollapsed:a.a.isCollapsed}}var p=function(){var e=Object(o.a)();Object(n.useEffect)((function(){return a.a.addListener({onAssistantsChanged:e,onManifestsChanged:e})}),[])},h=function(){var e,t=(e=s().mark((function e(t,r){var n,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r?"destroy":"create",e.t0=n,e.next="destroy"===e.t0?4:"create"===e.t0?7:11;break;case 4:return e.next=6,i.a.groupAssistant.removeSuperSidebarProvider({assistant_id:t.id});case 6:return e.abrupt("return",a.a.removeAssistant(t.id));case 7:return e.next=9,i.a.mine.superSidebarProvider.create({type:t.assistant_type||t.type,target_id:t.id,target_type:"Field"===t.type?l.d.ASSISTANT:t.type,priority:a.a.getLatestPriority()});case 9:return o=e.sent,e.abrupt("return",a.a.addAssistant(new u.a(o)));case 11:return e.abrupt("break",12);case 12:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){f(a,n,o,i,u,"next",e)}function u(e){f(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lakeToHtml=t.htmlToLake=t.createCoreEditor=void 0;var n=r(4392),o=new(r(4187).KernelFactory);function a(e){return o.createKernel(e)}o.registerKernelPlugin(n.OpenKernelPlugins),t.createCoreEditor=a,t.htmlToLake=function(e){var t=a({image:{isCaptureImageURL:function(){return!1}}});return t.setDocument("text/html",e),{value:t.getDocument("text/lake",{includeMeta:!0}),html:t.getDocument("text/html")||"<p><br /></p>"}},t.lakeToHtml=function(e,t){var r=a({image:{isCaptureImageURL:function(){return!1}}});return r.setDocument("text/lake",e),{value:r.getDocument("text/lake",{includeMeta:!0}),html:r.getDocument("text/html",t)||"<p><br /></p>"}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenKernelPlugins=void 0;var o=n(r(4393)),a=n(r(4470)),i=n(r(4504)),u=n(r(4512)),l=n(r(4546)),c=n(r(4554)),s=n(r(4556)),f=n(r(4565)),d=n(r(4568)),p=n(r(4572)),h=n(r(4589)),y=n(r(4599)),b=n(r(4604)),m=n(r(4612)),v=n(r(4616)),g=n(r(4619)),_=n(r(4624)),w=n(r(4639)),O=n(r(4645)),E=n(r(4647)),P=n(r(4658)),j=n(r(4663)),C=n(r(4680)),k=n(r(4687)),S=n(r(4233)),A=n(r(4709)),x=n(r(4719)),N=n(r(4722)),T=n(r(4197)),D=n(r(4727)),L=n(r(4739)),R=n(r(4745)),I=n(r(4751)),M=n(r(4771)),F=n(r(4809)),B=n(r(4814)),U=n(r(4816)),H=n(r(4818)),V=n(r(4822)),G=n(r(4829)),q=n(r(4835)),z=n(r(4844)),W=n(r(4846)),K=n(r(4852)),Y=n(r(4855)),J=n(r(4857)),$=n(r(4866)),X=n(r(4257)),Q=n(r(4931)),Z=n(r(4210)),ee=n(r(4940)),te=n(r(4952)),re=n(r(4961)),ne=n(r(4972)),oe=n(r(4990)),ae=n(r(5007)),ie=n(r(5014)),ue=n(r(5057)),le=n(r(5062)),ce=n(r(5065)),se=n(r(5084)),fe=r(5088),de=n(r(5097)),pe=n(r(5100)),he=n(r(5108)),ye=n(r(5124)),be=n(r(5132)),me=n(r(5139)),ve=n(r(5145)),ge=n(r(5152)),_e=r(5161);t.OpenKernelPlugins=[o.default,H.default,i.default,u.default,l.default,c.default,s.default,f.default,d.default,p.default,h.default,y.default,b.default,m.default,v.default,g.default,_.default,w.default,O.default,E.default,P.default,j.default,C.default,k.default,S.default,a.default,A.default,x.default,N.default,D.default,T.default,L.default,R.default,I.default,M.default,F.default,B.default,U.default,V.default,G.default,q.default,z.default,W.default,K.default,Y.default,J.default,$.default,X.default,Q.default,Z.default,ee.default,te.default,re.default,ne.default,oe.default,ae.default,ie.default,ue.default,le.default,ce.default,se.default,fe.CustomCardPlugin,de.default,pe.default,he.default,ye.default,be.default,me.default,ve.default,ge.default,_e.UploadPlugin]},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3453),l=r(3466),c=r(3463),s=i(r(3845)),f=r(3519),d=i(r(4458)),p=i(r(4459)),h=r(4460),y=i(r(4461)),b=i(r(4462)),m=i(r(4463)),v=i(r(4464)),g=i(r(4465)),_=r(3758),w=i(r(4466)),O=i(r(4467)),E=i(r(4469)),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerElement(p.default),e.registerAttr(d.default),e.registerCommand({alert:new y.default,alertDelete:new b.default,alertType:new v.default,alertMove:new m.default});var t=e.getService(f.IMarkdownKernelService.ID);if(t){var r=new RegExp("^[:：]{3}(".concat(_.ALERT_TYPE.join("|"),"|s*)$"),"i");t.registerMarkdownMatcher(f.TriggerType.enter,new s.default(this.editing,r,(function(e,t,r,n){var o=n.matchedGroup,i=a(o,1)[0],u=void 0===i?_.ALERT_TYPE[0]:i,l=g.default.load()||{};u&&g.default.save({type:u.toLowerCase()});var c=e.createHole("alertHole"),s=e.createElement("alert",{type:(u||l.type||_.ALERT_TYPE[0]).toLowerCase()});e.appendChild(c,s),e.replaceChild(t.parentNode,c,t),e.appendChild(s,t),e.setSelection(e.newSelection(e.newRange(e.newPosition(t,0))))}),void 0,(function(e){return!e.node.closest("alert")})))}this.option.onAfterKernelPluginInit&&this.option.onAfterKernelPluginInit(this.kernel)}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,r;null===(e=this.kernel.getService(c.ILakeKernelService.ID))||void 0===e||e.registerLakeNodeReader(w.default.NodeNames,new w.default),null===(t=this.kernel.getService(c.ILakeKernelService.ID))||void 0===t||t.registerLakeNodeWriter(E.default.NodeNames,new E.default),null===(r=this.kernel.getService(l.IHTMLKernelService.ID))||void 0===r||r.registerNodeHTMLWriter(O.default.NodeNames,new O.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"alert"}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:h.KernelAlertOption}),t}(u.KernelPlugin);t.default=P},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.getCommonAncestor=void 0;var o=r(3756);t.getCommonAncestor=function(e,t){var r,a;if(!e.length)return null;var i=[];try{for(var u=n(e),l=u.next();!l.done;l=u.next()){var c=l.value,s=(0,o.getAncestors)(c,t);if(!(null==s?void 0:s.length))return null;i.push(s)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}if(1===i.length)return i[0][i[0].length-1];for(var f=0,d=null;i.every((function(e){return e[Math.min(f,e.length-1)]===i[0][Math.min(f,i[0].length-1)]}));)d=i[0][Math.min(f,i[0].length-1)],f++;return d}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getTailInputPosition=void 0;var o=r(3454),a=r(4139),i=n(r(3516)),u=r(3459);t.getTailInputPosition=function(e){var t,r=[];if((0,a.reverseWalkNode)(e,{leave:function(n){if(n.isTextNode()){if(r.push(n),!n.isEmpty())return t=new i.default(n,n.dataLength),!1}else if(n.hasCategory(u.Category.TextContainer))r.push(n);else if(e.hasCategory(u.Category.TextContainer))return t=new i.default(e,e.childCount),!1;return!0}}),t)return t;if(r.length){var n=r[0];return n.isTextNode()?(o.assert.fatal(0===n.dataLength,"framework/kernel/src/model/utils/node/get-tail-input-position.ts:39"),new i.default(n,n.dataLength)):(o.assert.fatal(n.isElement()&&n.hasCategory(u.Category.TextContainer),"framework/kernel/src/model/utils/node/get-tail-input-position.ts:43"),new i.default(n,n.childCount))}return null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTopNode=void 0,t.getTopNode=function(e){if(!e.parent)return null;for(var t=e.parent,r=e;t&&!t.isRootNode();)r=t,t=t.parent;return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllBelongsToHeadingNode=t.getLastNodeBelongsToHeadingNode=t.getRootCollapsedNode=t.getAncestorHeadingNodes=t.isBelongsToHeadingNode=t.isInHeadingCollapsed=t.getHeadingNodes=t.isInCollapsed=void 0;var n=r(3454),o=r(3484),a=r(3629),i=!1;function u(e){return e.hasCategory(a.Category.Heading)}function l(e){return u(e)?parseInt(e.nodeName.slice(1),10):Number.MAX_VALUE}function c(e){return u(e)&&"true"===e.attrs.collapsed}function s(e){for(;e.parent;){if(e.parent.hasCategory(a.Category.Root))return e;e=e.parent}return null}function f(e,t){void 0===t&&(t=[]);var r=[],n=function(){var n=s(e);if(!n)return"break";for(var o=l(e),a=n;a;){if(u(a)){var i=l(a);if(i<o)r.push(a),o=i;else if(i<=1)break;if(t.length>0){var c=t.findIndex((function(e){return e.id===a.id}));a=t[c-1];continue}}a=a.previousSibling}};do{if("break"===n())break}while(i);return r}t.isInCollapsed=function(e){if(!e)return!1;var t=e.closest(o.COLLAPSE);if(t&&t!==e&&!e.closest(o.SUMMARY)&&"false"===t.attrs.open)return t;var r=s(e);if(!r)return!1;for(var n=r.previousSibling,a=l(r);n;){if(u(n)){var i=l(n);if(i<a){if(c(n))return n;a=i}else if(i<=1)return!1}n=n.previousSibling}return!1},t.getHeadingNodes=function(e){for(var t=[],r=e.lastChild;r;)u(r)&&t.unshift(r),r=r.previousSibling;return t},t.isInHeadingCollapsed=function(e,t){if(!e||!t)return!1;var r=s(e);if(!r)return!1;for(var n=l(r),o=t.length-1;o>=0;o--){var a=t[o];if(!(a.offset>=r.offset)){var i=l(a);if(i<n){if("true"===a.attrs.collapsed)return a;n=i}if(i<=1)return!1}}return!1},t.isBelongsToHeadingNode=function(e,t){if(!(e&&e.isConnected&&t&&t.isConnected&&u(t)))return!1;if(e.closest(a.Category.Heading)===t)return!1;var r=s(e);if(!r)return!1;for(var n=l(t),o=r.previousSibling;o;){if(u(o)){if(o===t)return!0;if(l(o)<=n)return!1}o=o.previousSibling}return!1},t.getAncestorHeadingNodes=f,t.getRootCollapsedNode=function(e,t){if(!e)return null;for(var r=f(e,t).reverse(),n=0;n<r.length;n++){var a=r[n];if(c(a))return a}var i=e.closest(o.COLLAPSE);return i&&i!==e&&e.nodeName!==o.SUMMARY&&"false"===i.attrs.open?i:null},t.getLastNodeBelongsToHeadingNode=function(e){var t;n.assert.fatal((null===(t=e.parent)||void 0===t?void 0:t.isRootNode())&&u(e),"framework/kernel/src/model/utils/node/is-in-collapsed.ts:280");var r=l(e),o=e,a=e.nextSibling;do{if(!a)return o;if(u(a)&&l(a)<=r)return o;o=a,a=null==a?void 0:a.nextSibling}while(a);return o},t.getAllBelongsToHeadingNode=function(e){var t;n.assert.fatal((null===(t=e.parent)||void 0===t?void 0:t.isRootNode())&&u(e),"framework/kernel/src/model/utils/node/is-in-collapsed.ts:301");var r=l(e),o=[e],a=e.nextSibling;do{if(!a)return o;if(u(a)&&l(a)<=r)return o;o.push(a),a=null==a?void 0:a.nextSibling}while(a);return o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsonToNode=void 0;var n=r(3454);function o(e,t){var r=t.attrs,a=e.getNodeSchema(t.name);return a?"element"===a.type?function(e,t){var r=t.name,n=t.attrs,a=t.children,i=e.createElement(r,n,t.id);a&&a.forEach((function(t){var n=o(e,t);n&&e.acceptNode(r,n.nodeName)&&e.appendChild(i,n)}));return i}(e,t):"text"===a.type?e.createTextNode(t.data,r,t.id):(n.assert.fatal("card"===a.type,"framework/kernel/src/model/utils/node/json-to-node.ts:38"),e.createCardNode(t.name,t.attrs,t.id)):null}t.jsonToNode=function(e,t){return o(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwrapNode=void 0;var n=r(3454);t.unwrapNode=function(e,t){var r=t.parentNode;n.assert.fatal(t.isElement()&&r,"failed to execute unwrapNode","framework/kernel/src/model/utils/node/unwrap-node.ts:8"),t.children.forEach((function(n){e.insertBefore(r,n,t)})),e.removeChild(r,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"toText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return""}}),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"toText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return""}}),Object.defineProperty(e.prototype,"toHTML",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return""}}),Object.defineProperty(e.prototype,"fromHTML",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return null}}),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.alignmentToElement=void 0;var n=r(3454),o=r(3712);t.alignmentToElement=function(e,t,r,a){var i=t.node;if(i.isCardNode())return t;var u=(0,o.closest)(i,r);return u&&u!==i?"right"===a?function(e,t,r){var o=t.node,a=t.offset;if(o.isTextNode()){if(a!==o.dataLength)return t;a=o.offset+1,o=o.parentNode}n.assert.fatal(o.isElement(),"framework/kernel/src/model/utils/position/alignment-to-element.ts:80");for(;o!==r&&a===o.parentNode.childCount;)a=o.offset+1,o=o.parentNode;return e.newPosition(o,a)}(e,t,u):(n.assert.fatal("left"===a,"framework/kernel/src/model/utils/position/alignment-to-element.ts:30"),function(e,t,r){var o=t.node,a=t.offset;if(o.isTextNode()){if(0!==a)return t;a=o.offset,o=o.parentNode}n.assert.fatal(o.isElement(),"framework/kernel/src/model/utils/position/alignment-to-element.ts:50");for(;o!==r&&0===a;)a=o.offset,o=o.parentNode;return e.newPosition(o,a)}(e,t,u)):t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.breakLine=void 0;var n=r(3454),o=r(4141),a=r(4405),i=r(4142),u=r(3995),l=r(3996),c=r(3997),s=r(3630),f=r(3546),d=r(3712),p=r(3560),h=r(3459),y="quote";function b(e,t){return Object.keys(t.attrs).forEach((function(r){var n=e.getAttrSchema(r);(null==n?void 0:n.cleanByBreakLine)&&e.removeAttribute(t,r)})),t}t.breakLine=function(e,t,r){var m=t.node;if(m.hasCategory([h.Category.Root,h.Category.LikeRoot]))t=function(e,t){var r=e.createElement(e.defaultElementName);t.node.isEmpty()&&(t=e.insertNodeByPosition(t,r.cloneNode(!1)));return e.insertNodeByPosition(t,r),e.newPosition(r,0)}(e,t);else if(m.hasCategory([h.Category.TableHole,h.Category.Hole]))t=function(e,t){var r=t.node,o=t.offset,a=e.createElement(e.defaultElementName);if(1===o)return e.insertAfter(r.parentNode,a,r),e.newPosition(a,0);return n.assert.fatal(0===o,"framework/kernel/src/model/utils/position/break-line.ts:198"),e.insertBefore(r.parentNode,a,r),t}(e,t);else{n.assert.fatal(m.hasCategory([h.Category.TextContainer,h.Category.Text]),"framework/kernel/src/model/utils/position/break-line.ts:31");var v=m.closest(h.Category.Block);t=(0,p.isLikeEmptyElement)(v)?function(e,t){var r=(0,d.closest)(t.node,h.Category.Block),n=r.attrs.level;if(n)return n>1?e.setAttribute(r,"level",n-1):e.removeAttribute(r,"level"),e.newPosition(r,0);var a=e.defaultElementName;if(r.nodeName===a&&(0,p.isLikeEmptyElement)(r)&&r.parentNode.nodeName===y)return(0,p.isLikeEmptyElement)(r.parentNode)?(e.replaceChild(r.parentNode.parentNode,r,r.parentNode),e.newPosition(r,0)):(t=(0,l.splitElement)(e,e.newPosition(r.parentNode,r.offset+1)),e.insertNodeByPosition(t,r),e.newPosition(r,0));var i=t.node.closest(h.Category.Text),u=r.hasCategory(h.Category.Clean),c=u?{}:(0,o.getAcceptAttrs)(e,a,r.attrs),s=e.createElement(a,c);i&&!u&&e.acceptNode(s.nodeName,i.nodeName)&&e.appendChild(s,i.cloneNode(!1));e.insertAfter(r.parentNode,s,r),r.hasCategory(h.Category.DisallowEmpty)&&e.removeChild(r.parentNode,r);return e.newPosition(s,0)}(e,t):function(e,t,r){var l=(0,a.getTouchTextNode)(t);t=(0,c.splitInlineNode)(e,(0,s.splitTextNode)(e,t));var f=t.node,y=t.offset;if(!f.isElement())return t;n.assert.fatal(f.hasCategory(h.Category.Block),"framework/kernel/src/model/utils/position/break-line.ts:62");var m=function(e,t,r){var n=(0,d.closest)(t.node,h.Category.Block);if(r||(0,i.isAtElementEnd)(t)&&!n.hasCategory(h.Category.Sticky)){var a=n.hasCategory(h.Category.Clean)?{}:n.attrs,u=e.defaultElementName,l=(0,o.getAcceptAttrs)(e,u,a);return e.createElement(u,l)}return b(e,n.cloneNode(!1))}(e,t,r),v=null;(0,u.isAtElementStart)(t)?(e.insertBefore(f.parentNode,m,f),v=f,f.children.forEach((function(t){n.assert.fatal(t.hasCategory([h.Category.Inline,h.Category.InlineCard,h.Category.Text]),"framework/kernel/src/model/utils/position/break-line.ts:74"),(0,p.isLikeEmptyElement)(t)&&e.removeChild(f,t)}))):(f.children.slice(y).forEach((function(t){n.assert.fatal(t.hasCategory([h.Category.Inline,h.Category.InlineCard,h.Category.Text]),"framework/kernel/src/model/utils/position/break-line.ts:89"),(0,p.isLikeEmptyElement)(t)?e.removeChild(f,t):e.appendChild(m,t)})),f.children.slice(0,y).forEach((function(t){n.assert.fatal(t.hasCategory([h.Category.Inline,h.Category.InlineCard,h.Category.Text]),"framework/kernel/src/model/utils/position/break-line.ts:106"),(0,p.isLikeEmptyElement)(t)&&e.removeChild(f,t)})),e.insertAfter(f.parentNode,m,f),v=m);if(!l||f.hasCategory(h.Category.Clean))return e.newPosition(v,0);m.isEmpty()&&(e.setTextNodeData(l,""),e.appendChild(m,b(e,l)));return e.newPosition(v,0)}(e,t,r)}return(0,f.verifyPosition)(t,!0),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTouchTextNode=void 0;var n=r(3459);function o(e,t){if(e.isTextNode())return e.cloneNode(!1);if(!e.childCount)return null;var r=e.getChildByOffset(t-1),a=!1;return r||(a=!0,r=e.getChildByOffset(t)),r.isTextNode()?r.cloneNode(!1):r.hasCategory(n.Category.Inline)?o(r,a?0:r.childCount):null}t.getTouchTextNode=function(e){return o(e.node,e.offset)}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.splitEmoji=t.strToArray=void 0;var i=(0,a(r(4407)).default)();t.strToArray=function(e){for(var t,r=[],a=0;t=i.exec(e);){var u=t[0];r.push.apply(r,o([],n(o([],n(e.substring(a,t.index)),!1)),!1)),r.push(u),a=t.index+u.length}return r.length?(r.push.apply(r,o([],n(o([],n(e.substring(a)),!1)),!1)),r):o([],n(e),!1)},t.splitEmoji=function(e){for(var t,r=[],n=0;t=i.exec(e);){var o=t[0];n===t.index?0===n?(r.push(""),r.push(o)):r[r.length-1]+=o:(r.push(e.substring(n,t.index)),r.push(o)),n=t.index+o.length}return r.length?(n<e.length&&r.push(e.substring(n)),r):[e]}},function(e,t,r){"use strict";r.r(t),t.default=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StringQuery=t.SearchCursor=void 0;var o=r(3454),a=r(4143),i="function"==typeof String.prototype.normalize?function(e){return e.normalize("NFC")}:function(e){return e},u=function(){function e(e,t,r){Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:{from:0,to:0}}),Object.defineProperty(this,"done",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"matches",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"buffer",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"bufferPos",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"normalize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"query",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.buffer=e||"",this.normalize=r?function(e){return r(i(e))}:i,this.query=this.normalize(t)}return Object.defineProperty(e.prototype,"peek",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.bufferPos>=this.buffer.length?-1:(0,a.codePointAt)(this.buffer,this.bufferPos)}}),Object.defineProperty(e.prototype,"next",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}}),Object.defineProperty(e.prototype,"nextOverlapping",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(;;){var e=this.peek();if(e<0)return this.done=!0,this;var t=(0,a.fromCodePoint)(e),r=this.normalize(t),n=this.bufferPos;this.bufferPos+=(0,a.codePointSize)(e);for(var o=0,i=n;;o++){var u=r.charCodeAt(o),l=this.match(u,i);if(o===r.length-1){if(l)return this.value=l,this;break}i===n&&o<t.length&&t.charCodeAt(o)===u&&i++}}}}),Object.defineProperty(e.prototype,"match",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){for(var r=null,n=0;n<this.matches.length;n+=2){var o=this.matches[n],a=!1;this.query.charCodeAt(o)===e&&(o===this.query.length-1?r={from:this.matches[n+1],to:t+1}:(this.matches[n]++,a=!0)),a||(this.matches.splice(n,2),n-=2)}return this.query.charCodeAt(0)===e&&(1===this.query.length?r={from:t,to:t+1}:this.matches.push(1,t)),r}}),e}();t.SearchCursor=u,n=Symbol.iterator,"undefined"!=typeof Symbol&&(u.prototype[Symbol.iterator]=function(){return this});var l=function(){function e(){}return Object.defineProperty(e,"matchAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){void 0===r&&(r=!0),void 0===n&&(n=1e9);for(var o=new u(e,t,r?function(e){return e.toLowerCase()}:void 0),a=[];!o.next().done;){if(a.length>=n)return null;a.push(o.value)}return a}}),Object.defineProperty(e,"replaceRange",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return(0,o.assert)(t.from>=0&&t.to<=e.length,"framework/utils/src/strings/helpers/string-query.ts:156"),e.substring(0,t.from)+r+e.substring(t.to)}}),Object.defineProperty(e,"replaceAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n,o){if(void 0===n&&(n=!0),void 0===o&&(o=1e9),!e)return e;if(!t)return e;for(var a=new u(e,t,n?function(e){return e.toLowerCase()}:void 0),i=0,l="",c="",s=0;!(a.next().done||++i>o);)l+=e.slice(s,a.value.from)+r,s=a.value.to,c=e.slice(s);return l+c}}),e}();t.StringQuery=l},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.closestInlineAttrs=void 0;var a=r(3454),i=r(3998),u=r(3459);function l(e,t){var r,n,a={};if("all"===t)return Object.assign(a,e.attrs);try{for(var i=o(t),u=i.next();!u.done;u=i.next()){var l=u.value;void 0!==e.attrs[l]&&(a[l]=e.attrs[l])}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}function c(e,t){var r,n,o;if(void 0===t&&(t=!0),!e)return e;for(;e&&(null===(r=e.children)||void 0===r?void 0:r.length);)if(t){if(!e.children[0])break;e=e.children[0]}else{if(!(null===(n=e.children)||void 0===n?void 0:n[(null===(o=e.children)||void 0===o?void 0:o.length)-1]))break;e=e.children[e.children.length-1]}return e}function s(e){for(;e&&!e.previousSibling;)e=e.parent;return(null==e?void 0:e.previousSibling)||null}t.closestInlineAttrs=function(e,t,r){var o;void 0===t&&(t=i.INHERIT_TEXT),void 0===r&&(r=[u.Category.Heading,u.Category.TableHole,u.Category.Table,u.Category.ContainerHole,u.Category.AlertHole]),a.assert.fatal(i.INHERIT_TYPES.includes(t),"framework/kernel/src/model/utils/position/closest-inline-attrs.ts:72");var f,d=e.node,p=e.offset;if(d.isTextNode())return l(d,i.INLINE_INHERIT_ATTRS);if(d.hasCategory(u.Category.InlineCard)){if(t===i.INHERIT_INLINE_CARD)return l(d,i.INLINE_INHERIT_ATTRS);f=l(d,i.INLINE_INHERIT_ATTRS)}var h=!1,y=[c(null===(o=d.children)||void 0===o?void 0:o[Math.max(p-1,0)])||d];for(d.hasCategory([u.Category.Hole,u.Category.TableHole,u.Category.ContainerHole,u.Category.AlertHole])&&(h=!0,y.pop(),y.push(c(d.previousSibling,!1)||d.previousSibling));y.length;){var b=y.pop();if(!b)break;if(b.isTextNode())return n(n({},l(b,h?i.THROUTH_INHERIT_ATTRS:i.INLINE_INHERIT_ATTRS)),f);if(b.hasCategory(u.Category.InlineCard)){if(h||t===i.INHERIT_INLINE_CARD)return l(b,i.THROUTH_INHERIT_ATTRS);f||(f=l(b,i.INLINE_INHERIT_ATTRS))}for(var m=s(b);null==m?void 0:m.hasCategory(r);)m=s(m);if(!m)break;if(m.hasCategory([u.Category.TableCell,u.Category.TableRow]))break;if(!h&&m.hasCategory([u.Category.Block,u.Category.LikeRoot])){if(t===i.INHERIT_TEXT&&f)return f;h=!0}var v=c(m,!1);v&&y.push(v)}return{}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInEmptyLine=void 0;var n=r(3459);t.isInEmptyLine=function(e){var t=e.node;if(0!==e.offset)return!1;for(var r=t;r.childCount;){if(r.childCount>1)return!1;r=r.children[0]}if(r.isTextNode()&&r.dataLength>0)return!1;if(r.isCardNode())return!1;for(;!r.hasCategory(n.Category.Block);){if(r.childCount>1)return!1;r=r.parentNode}return r.childCount<=1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insertInlineNode=void 0;var n=r(3454),o=r(3630),a=r(3459);t.insertInlineNode=function(e,t,r){if(n.assert.fatal(t.node.hasCategory([a.Category.Root,a.Category.LikeRoot])||t.node.closest(a.Category.Block),"framework/kernel/src/model/utils/position/insert-inline-node.ts:13"),(t=(0,o.splitTextNode)(e,t)).node.hasCategory([a.Category.Root,a.Category.LikeRoot])){var i=e.createElement(e.defaultElementName);e.appendChild(i,r),e.insertNodeByPosition(t,i)}else n.assert.fatal(e.acceptNode(t.node.nodeName,r.nodeName),"framework/kernel/src/model/utils/position/insert-inline-node.ts:27"),e.insertNodeByPosition(t,r);n.assert.fatal(r.isConnected,"framework/kernel/src/model/utils/position/insert-inline-node.ts:31")}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.insertNodes=void 0;var o=r(3996),a=r(3630),i=r(3546),u=r(3459);function l(e,t,r){var n=t.node,a=t.offset;if(!e.acceptNode(n.nodeName,r.nodeName)){if(n.hasCategory([u.Category.Root,u.Category.LikeRoot])){if(!e.acceptNode(e.defaultElementName,r.nodeName))return n.hasCategory(u.Category.VirtualLikeRoot)?l(e,t=(0,o.splitElement)(e,t),r):t;var i=e.createElement(e.defaultElementName);return e.insertNodeByPosition(t,i),t=e.newPosition(i,0),l(e,t,r)}return l(e,t=(0,o.splitElement)(e,t),r)}return e.insertNodeByPosition(e.newPosition(n,a),r)}t.insertNodes=function(e,t,r){var o,u;t=(0,a.splitTextNode)(e,t);try{for(var c=n(r),s=c.next();!s.done;s=c.next()){t=l(e,t,s.value)}}catch(e){o={error:e}}finally{try{s&&!s.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return(0,i.verifyPosition)(t),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSureAtInput=void 0;var n=r(3454),o=r(4144),a=r(3459);function i(e,t){var r=(0,o.formatInlineBoundary)(e,e.newRange(function(e,t){var r=t.node,o=t.offset;if(r.isTextNode()){if(r.parentNode.hasCategory(a.Category.Inline)&&!r.parentNode.hasCategory(a.Category.InlineBox)){if(0===o&&0===r.offset)return i(e,e.newPosition(r.parentNode.parentNode,r.parentNode.offset));if(o===r.dataLength&&r.offset===r.parentNode.childCount)return i(e,e.newPosition(r.parentNode.parentNode,r.parentNode.offset+1))}return t}if(r.hasCategory(a.Category.TextContainer)){if(r.hasCategory(a.Category.Inline)&&!r.hasCategory(a.Category.InlineBox)){if(0===o)return e.newPosition(t.node.parentNode,t.node.offset);if(o===r.childCount)return e.newPosition(t.node.parentNode,t.node.offset+1)}var u=r.getChildByOffset(o-1);if(u&&u.isTextNode())return e.newPosition(u,u.dataLength);var l=r.getChildByOffset(o);return l&&l.isTextNode()?e.newPosition(l,0):t}if(r.hasCategory([a.Category.Root,a.Category.LikeRoot])){if(0===o&&r.firstChild&&r.firstChild.hasCategory(a.Category.TextContainer))return i(e,e.newPosition(r.firstChild,0));if(o===r.childCount&&r.lastChild&&r.lastChild.hasCategory(a.Category.TextContainer))return i(e,e.newPosition(r.lastChild,r.lastChild.childCount))}r.hasCategory([a.Category.TableHole,a.Category.Hole])&&(0===o?t=e.newPosition(r.parentNode,r.offset):(n.assert.fatal(1===o,"framework/kernel/src/model/utils/position/make-sure-at-input.ts:115"),t=e.newPosition(r.parentNode,r.offset+1)),r=t.node,o=t.offset);n.assert.fatal(r.hasCategory([a.Category.Root,a.Category.LikeRoot]),"framework/kernel/src/model/utils/position/make-sure-at-input.ts:123");var c=e.createElement(e.defaultElementName);return e.insertNodeByPosition(t,c),e.newPosition(c,0)}(e,t)));return n.assert.fatal(r.collapsed,"framework/kernel/src/model/utils/position/make-sure-at-input.ts:13"),r.start}t.makeSureAtInput=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPreviousText=void 0;var o=n(r(3498)),a=r(3459);t.getPreviousText=function(e){var t=e.node,r=e.offset;if(!t.hasCategory([a.Category.TextContainer,a.Category.Text]))return null;var n=t.isTextNode(),i=n?o.default.substring(t.data,0,r):"",u=null;if(n)u=t.previousSibling;else{if(!t.hasCategory(a.Category.Block))return null;u=t.children[r-1]}if(!u||!u.isTextNode())return i||null;for(var l=[],c=!1;u&&u.isTextNode();){if(l.push(u.data),!u.previousSibling){c=!0;break}u=u.previousSibling}return{text:l.reverse().join("")+i,atStart:c}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.shrinkPosition=void 0;var o=r(3454),a=r(3546),i=n(r(3516)),u=r(3629);function l(e,t){var r=e.node,n=e.offset;if(r.isTextNode()||r.isCardNode()||n!==r.childCount)return e;o.assert.fatal(r.isElement(),"framework/kernel/src/model/utils/position/helpers/shrink-position.ts:32");var a=r.lastChild;if(!a||a.isCardNode())return e;if(a.hasCategory(u.Category.Inline)&&!t)return e;if(a.isElement())e=new i.default(a,a.childCount);else{if(!a.isTextNode())throw new Error("failed to execute shrinkPosition");e=new i.default(a,a.dataLength)}return l(e,t)}function c(e,t){var r=e.node;if(0!==e.offset||r.isCardNode()||r.isTextNode())return e;o.assert.fatal(r.isElement(),"framework/kernel/src/model/utils/position/helpers/shrink-position.ts:63");var n=r.firstChild;return!n||n.isCardNode()||n.hasCategory(u.Category.Inline)&&!t?e:c(new i.default(n,0),t)}t.shrinkPosition=function(e,t){return void 0===t&&(t=!1),e=0===e.offset?c(e,t):l(e,t),(0,a.verifyPosition)(e),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExistNodeByPath=void 0,t.getExistNodeByPath=function(e,t){if(0===t.length)return e.rootNode;for(var r=e.rootNode,n=0,o=t.length;n<o;n++){var a=t[n];if(r.isElement()){var i=r.getChildByOffset(a);if(i){r=i;continue}}return r}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareNodePath=t.PATH_EQUAL=t.PATH_AFTER=t.PATH_BEFORE=void 0,t.PATH_BEFORE=-1,t.PATH_AFTER=1,t.PATH_EQUAL=0,t.compareNodePath=function(e,r){for(var n=e.length,o=r.length,a=0,i=Math.min(n,o);a<i;a++){var u=e[a],l=r[a];if(u<l)return t.PATH_BEFORE;if(u>l)return t.PATH_AFTER}return n<o?t.PATH_BEFORE:n>o?t.PATH_AFTER:t.PATH_EQUAL}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyRanges=void 0,t.copyRanges=function(e){return e.map((function(e){return e.cloneRange()}))}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteContentByRange=void 0;var o=r(3454),a=n(r(3497)),i=r(3905),u=r(3906),l=r(4146),c=r(4147),s=n(r(3713)),f=r(3546),d=r(3477),p=n(r(3516)),h=r(3629);function y(e){var t=a.default.closest(e,[h.Category.Root,h.Category.LikeRoot]);return o.assert.fatal(t,"framework/kernel/src/model/utils/range/delete-content-by-range.ts:172"),t.hasCategory(h.Category.VirtualLikeRoot)?y(t.parentNode):t}t.deleteContentByRange=function(e,t,r){if((0,d.verifyRange)(t,!0),function(e){var t=e.start,r=e.end;return t.node===r.node&&t.node.isTextNode()}(t))return function(e,t){var r=t.start,n=t.end;if(!r.node.isTextNode())return t;var o=r.node.data,a=o.substr(0,r.offset)+o.substr(n.offset);return e.setTextNodeData(r.node,a),t=e.newRange(e.newPosition(r.node,r.offset)),t}(e,t);if(t=(0,i.splitTextContent)(e,t),(t=function(e,t){if(t.collapsed)return t;var r=t.start,n=t.end;r.node.hasCategory([h.Category.TableHole,h.Category.Hole])&&(0===r.offset?r=e.newPosition(r.node.parentNode,r.node.offset):(o.assert.fatal(1===r.offset,"framework/kernel/src/model/utils/range/delete-content-by-range.ts:213"),r=e.newPosition(r.node.parentNode,r.node.offset+1)));n.node.hasCategory([h.Category.TableHole,h.Category.Hole])&&(1===n.offset?n=e.newPosition(n.node.parentNode,n.node.offset+1):(o.assert.fatal(0===n.offset,"framework/kernel/src/model/utils/range/delete-content-by-range.ts:222"),n=e.newPosition(n.node.parentNode,n.node.offset)));return t=e.newRange(r,n),(0,d.verifyRange)(t),t}(e,t)).collapsed){var n=(0,c.deleteContentByPosition)(e,t.start,r,!0);if(n instanceof p.default)return e.newRange(n)}var b=t.start,m=t.end;o.assert.fatal(b.node.isElement()&&m.node.isElement(),"framework/kernel/src/model/utils/range/delete-content-by-range.ts:45");var v=e.createElement("*");s.default.insertNodeToOffset(m.node,m.offset,v);var g=[],_=[];(0,u.walkRange)(t,(function(e,t){var r=a.default.compare(e,v);r.equal?t.stop():r.preceding?e.hasCategory([h.Category.TableRow,h.Category.TableCell])?_.push(e):(g.push(e),t.skip()):e.hasCategory(h.Category.Inline)||(o.assert.fatal(r.contains,"framework/kernel/src/model/utils/range/delete-content-by-range.ts:76"),_.push(e))})),s.default.removeChild(v),g.length&&g.forEach((function(t){var r=t.parentNode;e.removeChild(r,t)})),(0,f.verifyPosition)(b,!0);var w=!b.node.hasCategory([h.Category.Root,h.Category.LikeRoot]);return _.length&&(w?function(e,t,r){if(!r.isElement())return;if(o.assert.fatal(t.node.isElement(),"framework/kernel/src/model/utils/range/delete-content-by-range.ts:133"),(0,f.verifyPosition)(t,!0),!function(e,t,r){var n=y(t.node),o=y(r);return n===o}(0,t,r))return void o.assert.fatal(!1,"framework/kernel/src/model/utils/range/delete-content-by-range.ts:138");t.node.hasCategory(h.Category.Inline)&&(o.assert.fatal(t.offset===t.node.childCount,"framework/kernel/src/model/utils/range/delete-content-by-range.ts:143"),t=e.newPosition(t.node.parentNode,t.node.offset+1));o.assert.fatal(!r.hasCategory(h.Category.Inline),"framework/kernel/src/model/utils/range/delete-content-by-range.ts:150"),r.children.forEach((function(r){o.assert.fatal(e.acceptNode(t.node.nodeName,r.nodeName),"framework/kernel/src/model/utils/range/delete-content-by-range.ts:152"),t=e.insertNodeByPosition(t,r)})),e.removeChild(r.parentNode,r)}(e,b,_.pop()):b=e.newPosition(_.pop(),0)),w?r&&(b=(0,l.cleanEmptyInlineNode)(e,b,!0)):e.acceptNode(b.node.nodeName,e.defaultElementName)&&(b=e.insertNodeByPosition(b,e.createElement(e.defaultElementName))),(0,f.verifyPosition)(b,f.AT_TEXT),t=e.newRange(b),(0,d.verifyRange)(t,!0),t}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteNode=void 0;var o=r(3454),a=n(r(3713)),i=r(3477);t.deleteNode=function(e,t){var r=e.getSelection();o.assert.fatal(1===r.rangeCount&&t.isConnected,"framework/kernel/src/model/utils/range/delete-node.ts:10");var n=r.firstRange,u=a.default.markRange(e,n);return e.removeChild(t.parentNode,t),n=a.default.recoverRange(e,u),(0,i.verifyRange)(n),n}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.enlargeRangeContainsBlockNode=void 0;var o=r(3454),a=n(r(3497)),i=r(3477),u=r(3629);function l(e,t){var r=s(e,t.node,t.offset),n=r.node,o=r.offset;return e.newPosition(n,o)}function c(e,t){var r=f(e,t.node,t.offset),n=r.node,o=r.offset;return e.newPosition(n,o)}function s(e,t,r){var n={node:t,offset:r};return 0!==r||t.isCardNode()?n:t.hasCategory(u.Category.Block)?{node:t.parentNode,offset:t.offset}:s(e,t.parentNode,t.offset)}function f(e,t,r){var n={node:t,offset:r};return t.isCardNode()?n:t.isTextNode()?r!==t.dataLength?n:f(e,t.parentNode,t.offset+1):(o.assert.fatal(t.isElement(),"framework/kernel/src/model/utils/range/enlarge-range-contains-block-node.ts:140"),t.hasCategory(u.Category.Block)?r!==t.childCount?n:{node:t.parentNode,offset:t.offset+1}:s(e,t.parentNode,t.offset+1))}t.enlargeRangeContainsBlockNode=function(e,t){if(t.collapsed)return t;var r=t.start,n=t.end,s=a.default.closest(r.node,u.Category.Block),f=a.default.closest(n.node,u.Category.Block);return s||f?s===f?function(e,t,r){var n=r.parentNode;if(!n)return t;var o=t.start,a=t.end;if(o=l(e,o),a=c(e,a),o.node!==n||a.node!==n)return t;return t=e.newRange(o,a),(0,i.verifyRange)(t),t}(e,t,s):(s&&(r=l(e,r)),f&&(n=c(e,n)),t=e.newRange(r,n),o.assert.fatal(!t.collapsed,"framework/kernel/src/model/utils/range/enlarge-range-contains-block-node.ts:47"),(0,i.verifyRange)(t),t):t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enlargeRangeToCommonAncestor=void 0;var n=r(3454),o=r(3477);t.enlargeRangeToCommonAncestor=function(e,t){n.assert.fatal(!t.collapsed,"framework/kernel/src/model/utils/range/enlarge-range-to-common-ancestor.ts:12");for(var r=t.commonAncestorContainer,a=t.start.node,i=t.start.offset;a!==r;)i=a.offset,a=a.parentNode;for(var u=t.end.node,l=t.end.offset;u!==r;)l=u.offset+1,u=u.parentNode;return n.assert.fatal(a===u&&i<l,"framework/kernel/src/model/utils/range/enlarge-range-to-common-ancestor.ts:32"),t=e.newRange(e.newPosition(a,i),e.newPosition(u,l)),(0,o.verifyRange)(t),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTextContent=void 0;var n=r(4002);t.getTextContent=function(e,t){return(0,n.getTextSections)(e,t).map((function(e){return e.map((function(e){return e?e.text:""})).join("")})).join("\n")}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.comparePosition=t.POS_AFTER=t.POS_BEFORE=t.POS_EQUAL=void 0;var o=r(3454),a=r(3992),i=n(r(3516));function u(e,t,r){var n=-1;for(o.assert.fatal(r!==e,"framework/kernel/src/model/utils/position/compare-position.ts:64");r!==e;)n=r.offset,r=r.parentNode;return n>=t}t.POS_EQUAL=0,t.POS_BEFORE=-1,t.POS_AFTER=1,t.comparePosition=function(e,r){if(i.default.equal(e,r))return t.POS_EQUAL;var n=e.node,l=e.offset,c=r.node,s=r.offset;if(n===c)return l<s?t.POS_BEFORE:(o.assert.fatal(l>s,"framework/kernel/src/model/utils/position/compare-position.ts:27"),t.POS_AFTER);var f=(0,a.compareNode)(n,c);return f.preceding?t.POS_BEFORE:f.following?t.POS_AFTER:f.contains?u(n,l,c)?t.POS_BEFORE:t.POS_AFTER:(o.assert.fatal(f.containedBy,"framework/kernel/src/model/utils/position/compare-position.ts:51"),u(c,s,n)?t.POS_AFTER:t.POS_BEFORE)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEqualRange=void 0,t.isEqualRange=function(e,t){return e.start.node===t.start.node&&e.start.offset===t.start.offset&&e.end.node===t.end.node&&e.end.offset===t.end.offset}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeAttribute=void 0;var n=r(3631),o=r(3907),a=r(4427),i=r(3756),u=r(3630),l=r(3477);t.removeAttribute=function(e,t,r){var c=Array.isArray(r)?r:[r];if(t.collapsed){var s=function(e,t,r){t=(0,u.splitTextNode)(e,t,u.SPLIT_TO_EMPTY_TEXT);var n=(0,i.getAncestors)(t.node);return n.forEach((function(t){r.forEach((function(r){e.removeAttribute(t,r)}))})),t}(e,t.start,c);t=e.newRange(s)}else t=function(e,t,r){return t=(0,a.splitTextNodeByRange)(e,t),(0,l.verifyRange)(t),(0,n.fullWalkRange)(t,{enter:function(t){r.forEach((function(r){e.removeAttribute(t,r)}))}}),t}(e,t,c);return(0,l.verifyRange)(t),(0,o.optimizeRange)(e,t)}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.splitTextNodeByRange=void 0;var a=r(3454),i=o(r(3498)),u=r(3560),l=r(3546),c=r(3477);function s(e,t,r){var o=t.node,l=t.offset;if(!o.isTextNode())return{position:t,hasNewNode:!1};if(0===l)return r&&(0,u.isLikeEmptyElement)(o)?{position:e.newPosition(o.parentNode,o.offset+1),hasNewNode:!1}:{position:e.newPosition(o.parentNode,o.offset),hasNewNode:!1};if(l===i.default.size(o.data))return{position:e.newPosition(o.parentNode,o.offset+1),hasNewNode:!1};var c=n(i.default.splitString(o.data,l),2),s=c[0],f=c[1];a.assert.fatal(s&&f,"framework/kernel/src/model/utils/range/split-text-node-by-range.ts:84");var d=o.cloneNode(!1);return e.setTextNodeData(o,s),e.setTextNodeData(d,f),e.insertAfter(o.parentNode,d,o),{position:e.newPosition(o.parentNode,o.offset+1),hasNewNode:!0}}t.splitTextNodeByRange=function(e,t){a.assert.fatal(!t.collapsed,"framework/kernel/src/model/utils/range/split-text-node-by-range.ts:14");var r=s(e,t.end,!0);(0,l.verifyPosition)(t.start);var n=s(e,t.start,!1);n.position.node===r.position.node&&n.hasNewNode&&(r.position=e.newPosition(r.position.node,r.position.offset+1));var o=e.newRange(n.position,r.position);return(0,c.verifyRange)(o),a.assert.fatal(!o.collapsed&&!o.start.node.isTextNode()&&!o.end.node.isTextNode(),"framework/kernel/src/model/utils/range/split-text-node-by-range.ts:37"),o}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.replaceBlockNodeAndContentTextAttr=void 0;var o=r(3454),a=r(3631),i=n(r(3713)),u=r(3477),l=r(3459);t.replaceBlockNodeAndContentTextAttr=function(e,t,r,n,c,s){void 0===s&&(s=[]),r&&o.assert.fatal(e.hasCategory(r,l.Category.Block),"framework/kernel/src/model/utils/range/replace-block-node-and-content-text-attr.ts:26");var f=new Set,d=e.defaultElementName,p=!(!r||r===d&&!n);if((0,a.fullWalkRange)(t,{enter:function(e){if(e.hasCategory(l.Category.Block))return f.add(e),!1},leave:function(t){if(p&&t.isEmpty()&&t.hasCategory([l.Category.Root,l.Category.LikeRoot])){var r=e.createElement(d);e.appendChild(t,r),f.add(r)}}}),!f.size)return t;var h=i.default.markRange(e,t);return f.forEach((function(t){!function(e,t,r,n,a,i){void 0===i&&(i=[]);var u=!!a,l=t;if(r)if(o.assert.fatal(e.acceptNode(t.parentNode.nodeName,r),"framework/kernel/src/model/utils/range/replace-block-node-and-content-text-attr.ts:92"),t.nodeName!==r){var c=e.createElement(r,n);l=c,e.replaceChild(t.parentNode,c,t),t.children.forEach((function(t){e.appendChild(c,t)}))}else{var s=t.attrs;Object.keys(s).forEach((function(r){i.includes(r)||e.removeAttribute(t,r)})),n&&Object.keys(n).forEach((function(r){i.includes(r)||e.setAttribute(t,r,n[r])}))}u&&function(e){var t=e.childCount;return 0===t||1===t&&"*"===e.firstChild.nodeName}(l)&&e.appendChild(l,e.createTextNode(""));l.children.forEach((function(t){if(t.isTextNode()){var r=t.attrs;Object.keys(r).forEach((function(r){e.removeAttribute(t,r)})),a&&Object.keys(a).forEach((function(r){e.setAttribute(t,r,a[r])}))}}))}(e,t,r,n,c,s)})),t=i.default.recoverRange(e,h),(0,u.verifyRange)(t),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceMultiText=void 0;var n=r(3454),o=r(3757),a=r(3999);t.replaceMultiText=function(e,t){for(var r,i=t.length-1;i>=0;i--){var u=(0,o.deleteContent)(e,t[i].range);n.assert.fatal(u.collapsed,"framework/kernel/src/model/utils/range/replace-multi-text.ts:21"),r=t[i].text?(0,a.insertText)(e,u.start,t[i].text):u.start}return n.assert.fatal(r,"framework/kernel/src/model/utils/range/replace-multi-text.ts:30"),e.newRange(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceText=void 0;var n=r(3454),o=r(3757),a=r(3999);t.replaceText=function(e,t,r){for(var i,u=t.length-1;u>=0;u--){var l=(0,o.deleteContent)(e,t[u]);n.assert.fatal(l.collapsed,"framework/kernel/src/model/utils/range/replace-text.ts:15"),i=r?(0,a.insertText)(e,l.start,r):l.start}return n.assert.fatal(i,"framework/kernel/src/model/utils/range/replace-text.ts:24"),e.newRange(i)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.searchText=void 0;var o=r(3454),a=n(r(3498)),i=r(4002),u=r(3477);function l(e,t,r,n){for(var a=null,i=null,l=-1,c=-1,s=0,f=0,d=n.length;f<d;f++){var p=n[f];if(o.assert.fatal(p.start.node.isTextNode(),"framework/kernel/src/model/utils/range/search-text.ts:144"),p.offset===t||p.offset<t&&p.offset+p.count>t){var h=p.start.node;c=f,l=t-s,a=e.newPosition(h,l)}else s+=p.count}var y=r;if(l+y<=n[c].count)i=e.newPosition(n[c].end.node,l+y);else{y-=n[c].count-l;for(f=c+1,d=n.length;f<d;f++){p=n[f];if(o.assert.fatal(y>0,"framework/kernel/src/model/utils/range/search-text.ts:173"),p.count>=y){i=e.newPosition(p.end.node,y);break}y-=p.count}}o.assert.fatal(a&&i,"framework/kernel/src/model/utils/range/search-text.ts:185");var b=e.newRange(a,i);return(0,u.verifyRange)(b),b}t.searchText=function(e,t,r,n){return r?function(e,t,r,n){void 0===n&&(n={});var i=n.isIgnoreCase,u=void 0===i||i,c=r.map((function(e){var t=[],r=null;return e.forEach((function(e){e?(o.assert.fatal(1===e.fragments.length,"framework/kernel/src/model/utils/range/search-text.ts:68"),r?(r.positions.push({offset:a.default.size(r.text),count:a.default.size(e.text),start:e.fragments[0].start,end:e.fragments[0].end}),r.text+=e.text):(r={positions:[],text:""},t.push(r),r.text=e.text,r.positions.push({offset:0,count:a.default.size(e.text),start:e.fragments[0].start,end:e.fragments[0].end}))):r=null})),t})),s=[],f=a.default.size(t);u&&(t=t.toLowerCase());return c.forEach((function(r){r.forEach((function(r){var n=r.text,o=r.positions,a=0;u&&(n=n.toLowerCase());do{if(-1===(a=n.indexOf(t,a)))return;s.push(l(e,a,f,o)),a+=f}while(a>0)}))})),s}(e,r,(0,i.getTextSections)(e,t),n):[]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAttribute=void 0;var n=r(4003);t.setAttribute=function(e,t,r,o){return(0,n.updateAttribute)(e,t,[{name:r,value:o}])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shrinkBlockNodeBoundary=void 0;var n=r(4001),o=r(3712),a=r(3459);function i(e,t){var r=(0,o.closest)(e,a.Category.Block);if(!r)return null;if(e.isTextNode()&&(0===t?(t=e.offset,e=e.parentNode):t===e.dataLength?(t=e.offset+1,e=e.parentNode):t=-1),-1===t)return{blockNode:r,offset:t};for(;e!==r;){var n=e.parentNode,i=n.childCount;if(0===t)t=e.offset,e=n;else{if(t!==i){t=-1;break}t=e.offset+1,e=n}}return{blockNode:r,offset:t}}t.shrinkBlockNodeBoundary=function(e,t){var r,o;if(t.collapsed)return t;var u=i(t.start.node,t.start.offset);if(!u)return t;var l=i(t.end.node,t.end.offset);if(!l)return t;if(u.blockNode===l.blockNode)return t;var c={node:t.start.node,offset:t.start.offset};u.offset===u.blockNode.childCount&&(null===(r=u.blockNode.nextSibling)||void 0===r?void 0:r.hasCategory(a.Category.Block))&&(c.node=u.blockNode.nextSibling,c.offset=0);var s={node:t.end.node,offset:t.end.offset};0===l.offset&&(null===(o=l.blockNode.previousSibling)||void 0===o?void 0:o.hasCategory(a.Category.Block))&&(s.node=l.blockNode.previousSibling,s.offset=s.node.childCount);var f=e.newRange(e.newPosition(c.node,c.offset),e.newPosition(s.node,s.offset));return(0,n.isValidRange)(f)?f:t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitBlock=void 0;var n=r(3454),o=r(3757),a=r(4435),i=r(3546);t.splitBlock=function(e,t){t.collapsed||(t=(0,o.deleteContent)(e,t)),n.assert.fatal(t.collapsed,"framework/kernel/src/model/utils/range/split-block.ts:14");var r=(0,a.splitBlockByPosition)(e,t.start);return(0,i.verifyPosition)(r,!0),e.newRange(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitBlockByPosition=void 0;var n=r(3454),o=r(4004),a=r(4141),i=r(4142),u=r(3995),l=r(3712),c=r(3560),s=r(3546),f=r(3459);t.splitBlockByPosition=function(e,t){var r=t.node;return n.assert.fatal((0,l.closest)(t.node,f.Category.Block),"framework/kernel/src/model/utils/position/helpers/split-block-by-position.ts:21"),t=(0,c.isLikeEmptyElement)(r)?function(e,t){var r=(0,l.closest)(t.node,f.Category.Block),o=r.firstChild,i=r.hasCategory(f.Category.Clean);o&&n.assert.fatal(1===r.childCount,"framework/kernel/src/model/utils/position/helpers/split-block-by-position.ts:40");var u=e.defaultElementName,c=i?{}:(0,a.getAcceptAttrs)(e,u,r.attrs),s=e.createElement(u,c);o&&!i&&e.acceptNode(s.nodeName,o.nodeName)&&e.appendChild(s,o.cloneNode(!1));return e.insertAfter(r.parentNode,s,r),e.removeChild(r.parentNode,r),e.newPosition(s,0)}(e,t):function(e,t){t=(0,o.breakBlockContent)(e,t,o.FOCUS_BACKWARD);var r=t.node,s=t.offset;r.isTextNode()&&(s=r.offset,r=r.parentNode);var d=(0,l.closest)(t.node,f.Category.Block),p=function(e,t){var r=(0,l.closest)(t.node,f.Category.Block);if((0,i.isAtElementEnd)(t)&&!r.hasCategory(f.Category.Sticky)){var n=r.hasCategory(f.Category.Clean)?{}:t.node.attrs,o=e.defaultElementName,u=(0,a.getAcceptAttrs)(e,o,n);return e.createElement(o,u)}if(t.node.isTextNode())return t.node.parentNode.cloneNode(!1);return t.node.cloneNode(!1)}(e,t),h=null,y=null;(0,u.isAtElementStart)(t)?(r.children.slice(0,s).forEach((function(t){e.appendChild(p,t)})),e.insertBefore(r.parentNode,p,r),h=p,y=r):(r.children.slice(s).forEach((function(t){e.appendChild(p,t)})),e.insertAfter(r.parentNode,p,r),h=r,y=p,(0,c.isLikeEmptyElement)(p)&&d.hasCategory(f.Category.Clean)&&p.children.reverse().forEach((function(t){e.removeChild(p,t)})));if(y.isEmpty())return e.newPosition(y,0);if(y.firstChild.isCardNode())return e.newPosition(y,0);if(n.assert.fatal(y.firstChild.isTextNode(),"framework/kernel/src/model/utils/position/helpers/split-block-by-position.ts:114"),h.isEmpty()){var b=y.firstChild.cloneNode(!1);e.setTextNodeData(b,""),e.appendChild(h,b)}return e.newPosition(y.firstChild,0)}(e,t),(0,s.verifyPosition)(t,!0),t}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.unwrapInlineNode=void 0;var o=r(3454),a=n(r(3713)),i=r(3477),u=r(3459);t.unwrapInlineNode=function(e,t,r){o.assert.fatal(e.hasCategory(r.nodeName,u.Category.Inline),"framework/kernel/src/model/utils/range/unwrap-inline-node.ts:14");var n=a.default.markRange(e,t);return r.children.forEach((function(t){e.insertBefore(r.parentNode,t,r)})),e.removeChild(r.parentNode,r),t=a.default.recoverRange(e,n),(0,i.verifyRange)(t),t}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.wrapInlineNode=void 0;var o=r(3454),a=r(3905),i=r(4005),u=r(3906),l=r(3712),c=r(3477),s=n(r(3526)),f=r(3459);t.wrapInlineNode=function(e,t,r){o.assert.fatal(e.hasCategory(r.nodeName,[f.Category.Inline,f.Category.TextContainer],!0),"framework/kernel/src/model/utils/range/wrap-inline-node.ts:17"),o.assert.fatal((0,l.closest)(t.commonAncestorContainer,f.Category.Block),"framework/kernel/src/model/utils/range/wrap-inline-node.ts:24"),t=(0,a.splitTextContent)(e,t),t=(0,i.unwrapNode)(e,t,r.nodeName),o.assert.fatal(t.start.node.isElement()&&t.end.node.isElement(),"framework/kernel/src/model/utils/range/wrap-inline-node.ts:31"),o.assert.fatal(t.start.node===t.end.node,"framework/kernel/src/model/utils/range/wrap-inline-node.ts:33");var n=[];return(0,u.walkRange)(t,(function(e,t){n.push(e),t.skip()})),o.assert.fatal(n.length>0,"framework/kernel/src/model/utils/range/wrap-inline-node.ts:42"),e.insertNodeByPosition(t.start,r),n.forEach((function(t){e.appendChild(r,t)})),t=s.default.selectNodeContents(r),(0,c.verifyRange)(t),t}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.wrapRootNode=void 0;var o=r(3454),a=n(r(3711)),i=r(3631),u=r(4005),l=r(3477),c=r(3459);t.wrapRootNode=function(e,t,r){o.assert.fatal(r.hasCategory(c.Category.LikeRoot)&&!r.isConnected,"framework/kernel/src/model/utils/range/wrap-root-node.ts:16"),t=(0,u.unwrapNode)(e,t,r.nodeName);var n=e.createElement("*"),s=n.cloneNode(!1),f=!t.start.node.isTextNode(),d=!t.end.node.isTextNode(),p=t.start,h=t.end;d&&e.insertNodeByPosition(t.end,s),f&&e.insertNodeByPosition(t.start,n),d&&(h=e.newPosition(t.end.node,s.offset+1));var y=[];return(0,i.fullWalkRange)(e.newRange(p,h),{enter:function(e){if(e.parentNode&&e.parentNode.hasCategory([c.Category.Root,c.Category.LikeRoot]))return y.push(e),!1}}),o.assert.fatal(y.length>0,"framework/kernel/src/model/utils/range/wrap-root-node.ts:56"),a.default.insertNodes(e,e.newPosition(y[0].parentNode,y[0].offset),[r]),y.forEach((function(t){e.appendChild(r,t)})),f&&(o.assert.fatal(n.isConnected,"framework/kernel/src/model/utils/range/wrap-root-node.ts:70"),p=e.newPosition(n.parentNode,n.offset),e.removeChild(n.parentNode,n)),d&&(o.assert.fatal(s.isConnected,"framework/kernel/src/model/utils/range/wrap-root-node.ts:79"),h=e.newPosition(s.parentNode,s.offset),e.removeChild(s.parentNode,s)),t=e.newRange(p,h),(0,l.verifyRange)(t),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allBlockNodeHasCategory=void 0;var n=r(4153),o=r(3459);t.allBlockNodeHasCategory=function(e,t){var r=[];return(0,n.fullWalkSelection)(e,{enter:function(e){if(e.hasCategory(o.Category.Block))return r.push(e),!1}}),!!r.length&&r.every((function(e){return e.hasCategory(t)}))}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.insertINodeToColumns=void 0;var o=r(3454),a=r(3490),i=r(3908),u=n(r(3458));function l(e,t,r){var n=t[0];o.assert.fatal(n&&n.collapsed,"framework/kernel/src/model/utils/range/insert-inode-to-columns.ts:34");var a=n.start,u=(0,i.insertINodeByPosition)(e,a,r);return[e.newRange(u)]}t.insertINodeToColumns=function(e,t,r){return t=function(e,t){return t.map((function(t){o.assert.fatal(t.start.node.hasCategory(a.COLUMN),"framework/kernel/src/model/utils/range/insert-inode-to-columns.ts:15"),o.assert.fatal(t.start.node===t.end.node,"framework/kernel/src/model/utils/range/insert-inode-to-columns.ts:16");var r=t.start.node;return r.children.forEach((function(t){e.removeChild(r,t)})),e.newRange(e.newPosition(r,0))}))}(e,t),1===r.children.length&&"columns"===r.children[0].name?function(e,t,r){return r.children.length<=t.length?t.map((function(t,n){o.assert.fatal(t&&t.collapsed,"framework/kernel/src/model/utils/range/insert-inode-to-columns.ts:49");var a=t.start.node,l=r.children[n];return l&&(0,i.insertINodeByPosition)(e,t.start,u.default.createFragment([l])),e.newRange(e.newPosition(a,0),e.newPosition(a,a.childCount))})):l(e,t,u.default.createFragment([r]))}(e,t,r.children[0]):l(e,t,r)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.insertINodeToTable=void 0;var o=r(3454),a=r(4156),i=r(4006),u=r(3908),l=r(3459),c=n(r(3458));function s(e,t,r){var n,l,s=(0,i.parseToRowLayout)(t),f=s.rowLayout,d=s.minCol,p=s.maxCol,h=s.minRow,y=s.maxRow;if((null===(n=r.attrs)||void 0===n?void 0:n.rowCount)===y-h+1&&(null===(l=r.attrs)||void 0===l?void 0:l.colCount)===p-d+1)return function(e,t,r,n){o.assert.fatal(r.rowLayout.length===n.attrs.rowCount,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:231"),o.assert.fatal(n.children.length===r.maxRow-r.minRow+1,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:232");var i=[],l=t[0].start.node.parentNode.parentNode,s=r.minRow,f=r.minCol;t.forEach((function(t){e.removeChild(t.start.node.parentNode,t.start.node)}));var d=[];return n.children.forEach((function(t,r){var n,o,l=[];if(d.push(l),null===(n=t.children)||void 0===n?void 0:n.length)for(var s=0,p=t.children.length;s<p;s++){var h=t.children[s],y=e.createElement("td",{col:f+h.attrs.col});l.push(y),(0,u.insertINodeByPosition)(e,e.newPosition(y,0),c.default.createFragment(null!==(o=h.children)&&void 0!==o?o:[])),(0,a.syncCellNodeAttrs)(e,t.children[s],y,["colSpan","rowSpan"]),i.push(e.newRange(e.newPosition(y,0),e.newPosition(y,y.childCount)))}})),d.forEach((function(t,r){if(t.length){var n=l.children[s+r],o=t[0],a=n.children.findIndex((function(e){return e.attrs.col>o.attrs.col}));-1===a?e.appendChild(n,o):e.insertByOffset(n,a,o);for(var i=1,u=t.length;i<u;i++)e.insertAfter(n,t[i],o),o=t[i]}})),i}(e,t,s,r);var b=function(e,t,r,n){o.assert.fatal("table"===t.name,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:145");var a=t.children.filter((function(e){return e.children&&e.children.length>0}));if(!a.length)return null;for(var i=[],u=0;u<r;u++){for(var l=a[u%a.length],c=l.children.length,s=[],f=0;f<n;f++)s.push(l.children[f%c]);i.push(s)}return i}(0,r,y-h+1,p-d+1);if(!b)return t;var m=[];return f.forEach((function(t,r){var n=t.cells;o.assert.fatal(b[r],"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:106"),n.forEach((function(t,n){o.assert.fatal(t.range.collapsed,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:109"),o.assert.fatal(b[r][n],"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:110"),(0,u.insertINodeByPosition)(e,t.range.start,c.default.createFragment([b[r][n]])),(0,a.syncCellNodeAttrs)(e,b[r][n],t.range.start.node);var i=t.range.start.node;m.push(e.newRange(e.newPosition(i,0),e.newPosition(i,i.childCount)))}))})),m}t.insertINodeToTable=function(e,t,r){var n,a;if(t=function(e,t){return t.map((function(t){o.assert.fatal(t.start.node.hasCategory(l.Category.TableCell),"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:212"),o.assert.fatal(t.start.node===t.end.node,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:213");var r=t.start.node;return r.children.forEach((function(t){e.removeChild(r,t)})),e.newRange(e.newPosition(r,0))}))}(e,t),1===(null===(n=r.children)||void 0===n?void 0:n.length)){if("table"===r.children[0].name)return s(e,t,r.children[0]);if(1===(null===(a=r.children[0].children)||void 0===a?void 0:a.length)&&"table"===r.children[0].children[0].name)return s(e,t,r.children[0].children[0])}return function(e,t,r){var n=function(e,t,r){var n=[],o=null;t.children.forEach((function(t){e.hasCategory(t.name,[l.Category.Text,l.Category.InlineCard])?(o||(o=c.default.createElement(r)),c.default.appendChild(o,t)):(o&&(n.push(o),o=null),n.push(t))})),o&&(n.push(o),o=null);return n}(e,r,e.defaultElementName),a=(0,i.parseToRowLayout)(t).rowLayout,s=[];return a.forEach((function(t,r){var a=t.cells,i=n[r%n.length];o.assert.fatal(i,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:51"),a.forEach((function(t){o.assert.fatal(t.range.collapsed,"framework/kernel/src/model/utils/range/insert-inode-to-table.ts:54"),(0,u.insertINodeByPosition)(e,t.range.start,c.default.createFragment([i]));var r=t.range.start.node;s.push(e.newRange(e.newPosition(r,0),e.newPosition(r,r.childCount)))}))})),s}(e,t,r)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.insertINodeToTableCell=void 0;var o=r(3454),a=n(r(4443)),i=r(4156),u=r(3908),l=n(r(3526)),c=n(r(3458));t.insertINodeToTableCell=function(e,t,r){var n=t.attrs.col,s=t.parentNode.offset,f=t.parentNode.parentNode;return r.children.forEach((function(t,r){var a,l=f.children[s+r];!l&&t&&(l=function(e,t,r,n){var o,a={};(null===(o=r.attrs)||void 0===o?void 0:o.height)&&(a.height=r.attrs.height);var i=e.createElement("tr",a);e.appendChild(t,i);for(var u=0,l=n;u<l;u++)e.appendChild(i,e.createElement("td",{col:u}));return i}(e,f,t,n+1)),null===(a=t.children)||void 0===a||a.forEach((function(t,r){var a=function(e,t,r){var n=t.children,a=n[n.length-1];if(a&&a.attrs.col<r){o.assert.fatal(a.attrs.col+(a.attrs.colSpan||1)===r,"framework/kernel/src/model/utils/range/insert-inode-to-table-cell.ts:167");var i=e.createElement("td",{col:r});return e.appendChild(t,i),i}for(var u=0,l=n.length;u<l;u++){if((i=n[u]).attrs.col>=r)return i}o.assert.fatal(!1,"framework/kernel/src/model/utils/range/insert-inode-to-table-cell.ts:190")}(e,l,n+r);return function(e,t,r){Array.from(t.children).reverse().forEach((function(r){e.removeChild(t,r)})),(0,i.syncCellNodeAttrs)(e,r,t),(0,u.insertINodeByPosition)(e,e.newPosition(t,0),c.default.createFragment(r.children))}(e,a,t),a}))})),function(e,t,r){var n=t.attrs.colCount,i=t.attrs,u=i.colWidths,l=i.rowCount,c=i.colCount;t.children.forEach((function(e){if(e.lastChild){var t=e.lastChild.attrs,r=t.col,o=t.colSpan,a=void 0===o?1:o;n=Math.max(n,r+a)}})),a.default.parseTableLayout(t).forEach((function(r,o){for(var a=r.length;a<n;a++)e.appendChild(t.children[o],e.createElement("td",{col:a}))})),l!==t.children.length&&e.setAttribute(t,"rowCount",t.children.length);if(c!==n){o.assert.fatal(n>c,"framework/kernel/src/model/utils/range/insert-inode-to-table-cell.ts:95"),e.setAttribute(t,"colCount",n);var s=r.attrs.colWidths.slice(c-n);o.assert.fatal(s.length===n-c,"framework/kernel/src/model/utils/range/insert-inode-to-table-cell.ts:102"),e.setAttribute(t,"colWidths",u.concat(s))}}(e,f,r),l.default.selectNodeContents(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4151),o=function(){function e(){}return Object.defineProperty(e,"parseTableLayout",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,n.parseTableLayout)(e)}}),e}();t.default=o},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeINodeTree=void 0;var o=r(3459),a=n(r(3458)),i=r(3454);function u(e,t){var r=[];return e.children&&e.children.forEach((function(e){r=r.concat(u(e,t))})),t(e,r)}t.normalizeINodeTree=function(e,t){i.assert.fatal(a.default.isFragmentNode(t),"framework/kernel/src/model/utils/range/helpers/normalize-inode-tree.ts:34");try{var r=u(t,(function(t,r){var n;if("ol"===t.name||"ul"===t.name)return r;if(!(null===(n=t.children)||void 0===n?void 0:n.length)&&e.hasCategory(t.name,[o.Category.TableHole,o.Category.Hole]))return[];var i=a.default.cloneNode(t),u=[i],l=i;return r.forEach((function(t){!e.hasCategory(t.name,[o.Category.BlockCard,o.Category.LikeRoot])||e.acceptNode(l.name,t.name)||e.hasCategory(l.name,o.Category.LikeRoot)?a.default.appendChild(l,t):(a.default.isEmptyNode(l)&&u.pop(),u.push(t),l=function(e){return"oli"===e.name||"uli"===e.name?a.default.createElement("p"):a.default.cloneNode(e)}(l),u.push(l))})),u.length>1&&a.default.isEmptyNode(l)&&u.pop(),u}));return i.assert.fatal(1===r.length,"framework/kernel/src/model/utils/range/helpers/normalize-inode-tree.ts:84"),i.assert.fatal(a.default.isFragmentNode(r[0]),"framework/kernel/src/model/utils/range/helpers/normalize-inode-tree.ts:85"),r[0]}catch(e){return console.error(e),t}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.moveTo=void 0;var o=r(3454),a=r(3477),i=n(r(3516)),u=n(r(3526)),l=r(3459);t.moveTo=function(e,t){void 0===t&&(t=!0);for(var r,n=t?function(e){return e.firstChild}:function(e){return e.lastChild},c=e.document.rootNode;c.childCount;){var s=n(c);if(s.isTextNode()){c=s;break}if(s.isCardNode()){s.hasCategory(l.Category.BlockCard)?o.assert.fatal(c.hasCategory(l.Category.Hole),"framework/kernel/src/model/utils/selection/move-to.ts:26"):o.assert.fatal(c.hasCategory(l.Category.TextContainer),"framework/kernel/src/model/utils/selection/move-to.ts:28");break}if(o.assert.fatal(c.isElement(),"framework/kernel/src/model/utils/selection/move-to.ts:33"),c.hasCategory([l.Category.AlertHole,l.Category.ContainerHole]))break;if(s.hasCategory(l.Category.Table)){o.assert.fatal(c.hasCategory(l.Category.TableHole),"framework/kernel/src/model/utils/selection/move-to.ts:40");break}if(s.hasCategory(l.Category.InlineBox))break;c=s}return c.isTextNode()?r=u.default.createAt(new i.default(c,t?0:c.dataLength)):(o.assert.fatal(c.isElement(),"framework/kernel/src/model/utils/selection/move-to.ts:58"),r=u.default.createAt(new i.default(c,t?0:c.childCount))),(0,a.verifyRange)(r,!0),e.cloneByRange(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceBlockNode=void 0;var n=r(3454),o=r(4447),a=r(3459);t.replaceBlockNode=function(e,t,r,i,u){void 0===i&&(i=!0),void 0===u&&(u=null),r&&"function"!=typeof r&&n.assert.fatal(e.hasCategory(r.nodeName,[a.Category.Block,a.Category.TextContainer],!0),"framework/kernel/src/model/utils/selection/replace-block-node.ts:17");var l=t.ranges.map((function(t){return(0,o.replaceBlockNodeByRange)(e,t,r,i,u)}));return t.cloneByRange(l)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.replaceBlockNodeByRange=void 0;var o=r(3631),a=n(r(3713)),i=r(3477),u=r(4152),l=r(3459);function c(e,t,r){t.forEach((function(t){if(t.isElement())c(e,t.children,r);else if(t.isTextNode()||t.hasCategory(l.Category.InlineCard)){var n=t.hasCategory(l.Category.InlineCard);Object.keys(t.attrs).forEach((function(o){n&&u.INLINE_CARD_ATTRS.includes(o)||(r?Array.isArray(r)?r.includes(o)||e.removeAttribute(t,o):"boolean"==typeof r&&(r||e.removeAttribute(t,o)):e.removeAttribute(t,o))}))}}))}t.replaceBlockNodeByRange=function(e,t,r,n,u){if(void 0===n&&(n=!0),void 0===u&&(u=null),r&&t.collapsed&&t.start.node.isRootNode()&&t.start.isAtEnd){var s=void 0;return s="function"==typeof r?r(e,null,null):r,e.appendChild(t.start.node,s),e.newRange(e.newPosition(s,0))}var f=new Set;if((0,o.fullWalkRange)(t,{enter:function(e){if(e.hasCategory(l.Category.Block))return f.add(e),!1},leave:function(t){if(t.isEmpty()&&t.hasCategory([l.Category.Root,l.Category.LikeRoot])){var r=e.createElement(e.defaultElementName);e.appendChild(t,r),f.add(r)}}}),!f.size)return t;var d=a.default.markRange(e,t);return f.forEach((function(t){!function(e,t,r,n,o){if(t){var a=e.replaceChild(r.parentNode,"cloneNode"in t?t.cloneNode(!1):t,r);n&&("function"==typeof n?n(e,a,r):Object.keys(r.attrs||{}).forEach((function(t){var n=r.attrs[t];e.acceptAttr(a.nodeName,t,n)&&!a.hasAttribute(t)&&e.setAttribute(a,t,n)}))),r.children.forEach((function(t){e.appendChild(a,t)})),c(e,a.children,o)}else{var i=r.nodeName;Object.keys(r.attrs||{}).forEach((function(t){e.isStandardAttr(i,t)||e.removeAttribute(r,t)})),c(e,r.children,o)}}(e,r,t,n,u)})),t=a.default.recoverRange(e,d),(0,i.verifyRange)(t),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shrinkToElement=void 0;var n=r(4449);t.shrinkToElement=function(e){var t=e.ranges.map((function(e){return(0,n.shrinkRangeToElement)(e)}));return e.cloneByRange(t)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.shrinkRangeToElement=void 0;var o=r(3477),a=n(r(3516)),i=n(r(3526));function u(e){var t=e.node,r=e.offset;return t.isTextNode()?0===r?new a.default(t.parentNode,t.offset):r===t.dataLength?new a.default(t.parentNode,t.offset+1):e:e}t.shrinkRangeToElement=function(e){return e=e.collapsed?i.default.createAt(u(e.start)):i.default.createAt(u(e.start),u(e.end)),(0,o.verifyRange)(e,!0),e}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.unCollapseAll=void 0;var o=n(r(3497));function a(e,t){for(var r=t.node,n=o.default.isInCollapsed(r),a=null;n&&(e.acceptAttr(n.nodeName,"open","true")&&e.setAttribute(n,"open","true"),e.acceptAttr(n.nodeName,"collapsed","false")&&e.setAttribute(n,"collapsed","false"),a!==(n=o.default.isInCollapsed(r)));)a=n}t.unCollapseAll=function(e,t){a(e,t.firstRange.start),t.collapsed||a(e,t.firstRange.end)}},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.extractINode=void 0;var a=r(3454),i=r(3490),u=r(4149),l=r(3906),c=r(3756),s=r(4006),f=r(3459),d=o(r(3458)),p=r(4452);function h(e,t,r){var n;void 0===r&&(r=!1),a.assert.fatal(!t.collapsed,"framework/kernel/src/model/utils/range/extract-inode.ts:65");var o=function(e){var t=e.node,r=e.offset;if(a.assert.fatal(!t.isCardNode(),"framework/kernel/src/model/utils/range/extract-inode.ts:218"),t.isTextNode())return t;return t.getChildByOffset(r)||t}(t.start),i=function(e){var t=e.node,r=e.offset;if(a.assert.fatal(!t.isCardNode(),"framework/kernel/src/model/utils/range/extract-inode.ts:228"),t.isTextNode())return t;return t.getChildByOffset(r-1)||t}(t.end),s=function(e){var t=e.commonAncestorContainer;if(t.isTextNode())return t;return a.assert.fatal(t.isElement(),"framework/kernel/src/model/utils/range/extract-inode.ts:244"),t}(t),d={nodes:[],map:new Map},p=!1;(0,l.walkRange)(t,(function(t){p?t!==i?y(e,d,s,t):(a.assert.fatal(t!==o,"framework/kernel/src/model/utils/range/extract-inode.ts:89"),function(e,t,r,n){a.assert.fatal(!t.map.has(n),"framework/kernel/src/model/utils/range/extract-inode.ts:319");var o=(0,c.getAncestors)(n),i=!1;o.forEach((function(n){i||n===r&&(i=!0),i&&!t.map.has(n)&&y(e,t,r,n)})),a.assert.fatal(i,"framework/kernel/src/model/utils/range/extract-inode.ts:336")}(e,d,s,t)):(a.assert.fatal(0===d.nodes.length,"framework/kernel/src/model/utils/range/extract-inode.ts:81"),p=!0,function(e,t,r,n){var o=(0,c.getAncestors)(n),i=!1;o.forEach((function(n){i||n===r&&(i=!0),i&&y(e,t,r,n)})),a.assert.fatal(i,"framework/kernel/src/model/utils/range/extract-inode.ts:310")}(e,d,s,t))})),a.assert.fatal(1===d.nodes.length,"framework/kernel/src/model/utils/range/extract-inode.ts:95"),function(e,t,r,n){if(r===n){if(r.isTextNode()){var o=t.start.offset,i=t.end.offset;if(t.start.node!==r&&(o=0),t.end.node!==n&&(i=n.dataLength),0===o&&i===n.dataLength)return;b(e,r,o,i)}return}r.isTextNode()&&(t.start.node===r?b(e,r,t.start.offset,r.dataLength):a.assert.fatal(t.start.node.getChildByOffset(t.start.offset)===r,"framework/kernel/src/model/utils/range/extract-inode.ts:377"));n.isTextNode()&&(t.end.node===n?b(e,n,0,t.end.offset):a.assert.fatal(t.end.node.getChildByOffset(t.end.offset-1)===n,"framework/kernel/src/model/utils/range/extract-inode.ts:387"))}(d,t,o,i),null===(n=d.map)||void 0===n||n.clear(),a.assert.fatal(1===d.nodes.length,"framework/kernel/src/model/utils/range/extract-inode.ts:101");var h=d.nodes[0];if("#root"===h.name)return h.children||[];if(r&&s.hasCategory([f.Category.LikeRoot,f.Category.VirtualLikeRoot])&&h.id===s.id)return h.children||[];if(!s.hasCategory(f.Category.Block)||h.id!==s.id)return[h];var m=(0,u.enlargeRangeInBlockNode)(e,t);return m.start.node===s&&0===m.start.offset&&m.end.node===s&&m.end.offset===s.childCount?[h]:h.children||[]}function y(e,t,r,o){var i,u,l=t.nodes,c=t.map,s=o.parentNode,f=o.toJSON(!1),d=f.attrs;if(d)try{for(var p=n(Object.keys(d)),h=p.next();!h.done;h=p.next()){var y=h.value;e.getAttrSchema(y)&&!e.document.schema.allowExtractAttr(y)&&delete d[y]}}catch(e){i={error:e}}finally{try{h&&!h.done&&(u=p.return)&&u.call(p)}finally{if(i)throw i.error}}if(c.set(o,f),o!==r){a.assert.fatal(c.has(s),"framework/kernel/src/model/utils/range/extract-inode.ts:278");var b=c.get(s);b.children||(b.children=[]),b.children.push(f)}else l.push(f)}function b(e,t,r,n){a.assert.fatal(t.isTextNode(),"framework/kernel/src/model/utils/range/extract-inode.ts:400");var o=e.map.get(t);a.assert.fatal(o,"framework/kernel/src/model/utils/range/extract-inode.ts:404"),o.data=o.data.substring(r,n)}t.extractINode=function(e,t){if(1===t.length&&t[0].collapsed)return t[0].start.node.isCardNode()?d.default.createFragment([t[0].start.node.toJSON(!1)]):null;var r=d.default.createFragment();if(r.children=[],1===t.length){var o=h(e,t[0],!0);d.default.setChildren(r,o)}else if(t[0].start.node.hasCategory(i.COLUMN)){var u=function(e,t){var r,o,i,u,l=d.default.createElement("columns"),c=[],s=0;try{for(var f=n(t),p=f.next();!p.done;p=f.next()){var y=p.value,b=void 0;b=y.collapsed?y.start.node.toJSON(!1):null==(b=h(e,y))?void 0:b[0],a.assert.fatal("column"===b.name,"framework/kernel/src/model/utils/range/extract-inode.ts:156"),s+=b.attrs.width,c.push(b),d.default.appendChild(l,b)}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}try{for(var m=n(c),v=m.next();!v.done;v=m.next()){var g=v.value;d.default.setAttribute(g,"width",g.attrs.width/s)}}catch(e){i={error:e}}finally{try{v&&!v.done&&(u=m.return)&&u.call(m)}finally{if(i)throw i.error}}return l}(e,t);a.assert.fatal("columns"===u.name,"framework/kernel/src/model/utils/range/extract-inode.ts:43"),r.children.push(u)}else{u=function(e,t){var r=(0,s.parseToRowLayout)(t),n=r.rowLayout,o=r.colWidths,i=r.minCol,u=r.maxCol,l=(0,p.extractTableHead)(t),c=l.rowHead,f=l.colHead,y=n.length,b=d.default.createElement("table",{rowCount:y,colCount:u-i+1,colWidths:o,rowHead:c,colHead:f});return n.forEach((function(t){var r=d.default.createElement("tr",t.attrs);return d.default.appendChild(b,r),t.cells.forEach((function(t){var n,o=t.range,i=t.colIndex;n=o.collapsed?o.start.node.toJSON(!1):null==(n=h(e,o))?void 0:n[0],a.assert.fatal("td"===n.name,"framework/kernel/src/model/utils/range/extract-inode.ts:204"),d.default.setAttribute(n,"col",i),d.default.appendChild(r,n)})),r})),b}(e,t);a.assert.fatal("table"===u.name,"framework/kernel/src/model/utils/range/extract-inode.ts:47"),r.children.push(u)}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractTableHead=void 0;var n=r(3629),o=r(4007);t.extractTableHead=function(e){var t=e[0].start.node.closest(n.Category.Table);return(null==t?void 0:t.isElement())&&e.every((function(e){return e.start.node.closest(n.Category.Table)===t&&e.end.node.closest(n.Category.Table)===t}))&&(0,o.isFullSelectTable)(t,e)?{rowHead:t.attrs.rowHead,colHead:t.attrs.colHead}:{}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectionIndent=void 0;var n=r(3459);t.getSelectionIndent=function(e){if(e.isCollapsed&&!(e.rangeCount>1)){var t=e.firstRange.start.node;if("number"==typeof t.attrs.indent)return t.attrs.indent;var r=t.closest(n.Category.Level);return r&&"number"==typeof r.attrs.level?r.attrs.level:void 0}}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(3454),i=r(3998),u=o(r(3711)),l=o(r(4e3)),c=r(3712),s=r(3560),f=r(3757),d=r(4150),p=r(3996),h=r(3997),y=r(3630),b=r(3459),m=o(r(3714)),v=function(){function e(){}return Object.defineProperty(e,"insertCardNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,o){a.assert.fatal(1===t.rangeCount,"framework/kernel/src/model/utils/card/index.ts:34");var p=t.firstRange;if(t.isCollapsed&&!t.isCardSelection||(p=(0,f.deleteContent)(e,p)),a.assert.fatal(p.collapsed,"framework/kernel/src/model/utils/card/index.ts:42"),p.start.node.hasCategory([b.Category.Hole,b.Category.TableHole])){var h=p.start.node;p=0===p.start.offset?e.newRange(e.newPosition(h.parentNode,h.offset)):e.newRange(e.newPosition(h.parentNode,h.offset+1))}var y=e.hasCategory(r,b.Category.InlineCard),v=y?function(e,t,r){var n=u.default.closestInlineAttrs(t,i.INHERIT_INLINE_CARD);return Object.keys(n).reduce((function(t,o){return"value"===o||e.acceptAttr(r,o,n[o])&&(t[o]=n[o]),t}),{})}(e,p.start,r):void 0;if(o&&(v=n(n({},v),{value:o})),!y&&v){var _=m.default.getSelectionIndent(t);_&&(v.hindent=_)}var w,O=l.default.createCardNode(e,r,v);return y?w=function(e,t,r){a.assert.fatal(r.hasCategory(b.Category.InlineCard),"framework/kernel/src/model/utils/card/index.ts:99");var n=(0,d.splitBlockContent)(e,e.newRange(t));if(n.start.node.hasCategory([b.Category.Root,b.Category.LikeRoot])){var o=e.createElement(e.defaultElementName);e.insertNodeByPosition(n.start,o),n=e.newRange(e.newPosition(o,0))}return a.assert.fatal(n.collapsed,"framework/kernel/src/model/utils/card/index.ts:111"),e.insertNodeByPosition(n.start,r)}(e,p.start,O):(a.assert.fatal(e.hasCategory(r,b.Category.BlockCard),"framework/kernel/src/model/utils/card/index.ts:85"),w=function(e,t,r){var n;a.assert.fatal(r.hasCategory(b.Category.Hole),"framework/kernel/src/model/utils/card/index.ts:117");var o=(0,c.closest)(t.node,b.Category.Block);if(o){if(null===(n=o.parentNode)||void 0===n?void 0:n.hasCategory(b.Category.VirtualLikeRoot))return t=g(e,t),a.assert.fatal(t.node.hasCategory(b.Category.VirtualLikeRoot),"framework/kernel/src/model/utils/card/index.ts:132"),t=g(e,t),a.assert.fatal(t.node.hasCategory([b.Category.Root,b.Category.LikeRoot]),"framework/kernel/src/model/utils/card/index.ts:135"),e.insertNodeByPosition(t,r),e.newPosition(r,r.childCount);a.assert.fatal(e.acceptNode(o.parentNode.nodeName,r.nodeName),"framework/kernel/src/model/utils/card/index.ts:144")}else a.assert.fatal(t.node.hasCategory([b.Category.Root,b.Category.LikeRoot]),"framework/kernel/src/model/utils/card/index.ts:122"),t.node.hasCategory(b.Category.VirtualLikeRoot)&&(t=g(e,t),a.assert.fatal(t.node.hasCategory(b.Category.Root),"framework/kernel/src/model/utils/card/index.ts:127"));if(!o)return e.insertNodeByPosition(t,r),e.newPosition(r,r.childCount);if((0,s.isLikeEmptyElement)(o))return e.replaceChild(o.parentNode,r,o),e.newPosition(r,r.childCount);return t=g(e,t),a.assert.fatal(e.acceptNode(t.node.nodeName,r.nodeName),"framework/kernel/src/model/utils/card/index.ts:161"),e.insertNodeByPosition(t,r),e.newPosition(r,r.childCount)}(e,p.start,O)),{selection:e.newSelection(e.newRange(w)),cardNode:O.hasCategory(b.Category.Hole)?O.firstChild:O}}}),e}();function g(e,t){return function(e,t){var r,n=t.node;if(null===(r=n.parentNode)||void 0===r?void 0:r.hasCategory([b.Category.ContainerHole,b.Category.AlertHole])){if((0,p.splitElement)(e,(0,h.splitInlineNode)(e,(0,y.splitTextNode)(e,t))),n.parentNode.childCount>1){var o=e.createElement(n.parentNode.nodeName),a=n.parentNode.children[1];return e.removeChild(n.parentNode,a),e.appendChild(o,a),e.insertAfter(n.parentNode.parentNode,o,n.parentNode),e.newPosition(o.parentNode,o.offset)}return e.newPosition(n.parentNode.parentNode,n.parentNode.offset+1)}return(0,p.splitElement)(e,(0,h.splitInlineNode)(e,(0,y.splitTextNode)(e,t)))}(e,(0,h.splitInlineNode)(e,(0,y.splitTextNode)(e,t)))}t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=r(3517),a=function(){function e(){}return Object.defineProperty(e,"createFragment",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{type:"fragment",name:"#fragment",children:[]}}}),Object.defineProperty(e,"createElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return{type:o.NodeType.Element,name:e,attrs:t}}}),Object.defineProperty(e,"createTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return{type:o.NodeType.Text,name:"#text",attrs:t,data:e}}}),Object.defineProperty(e,"appendChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return n.assert.fatal("#text"!==e.name,"framework/kernel/src/model/utils/inode/index.ts:38"),e.children||(e.children=[]),e.children.push(t),t}}),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Danger=void 0;var n=function(){function e(){}return Object.defineProperty(e,"setSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.selection=t}}),e}();t.Danger=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="1.34.0"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={type:{targets:["alert"],values:r(3758).ALERT_TYPE}};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o={alert:{parents:[n.Category.AlertHole],excludes:[n.Category.VirtualLikeRoot],category:[n.Category.LikeRoot,n.Category.VirtualLikeRoot,n.Category.Brick]}};t.default=o},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelAlertOption=void 0;var o=n(r(3464)),a=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=(0,o.default)({},e)}return Object.defineProperty(e.prototype,"onAfterKernelPluginInit",{get:function(){return this._option.onAfterKernelPluginInit},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"alert"}),e}();t.KernelAlertOption=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3758),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return t.isCardSelection||t.isTableSelection?a.Command.UNAVAILABLE:a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=u.ALERT_TYPE[0]);var r=e.newJob();if(this.getState(r)===a.Command.UNAVAILABLE)return e.cancelJob(r),!1;var n=r.getSelection();n.collapsed||(n=a.SelectionUtil.deleteContent(r,n)),i.assert.fatal(n.collapsed,"plugins/alert/src/kernel/commands/alert-command.ts:39");var o=n.firstRange.start,l=o.node.closest(a.Category.Block);l&&a.NodeUtil.isLikeEmptyElement(l)&&(o=r.newPosition(l.parentNode,l.offset),r.removeChild(l.parentNode,l));var c=r.createHole("alertHole"),s=r.createElement("alert",{type:t}),f=r.createElement(r.defaultElementName);return r.appendChild(s,f),r.appendChild(c,s),a.PositionUtil.insertNodes(r,o,[c]),r.setSelection([r.newRange(r.newPosition(f,0))]),e.commitJob(r),!0}}),t}(a.Command);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob(),n=r.getNodeById(t);if("alert"!==(null==n?void 0:n.nodeName))return!1;var o=a.SelectionUtil.deleteContent(r,r.selectNode(n));return i.assert.fatal(o.collapsed,"plugins/alert/src/kernel/commands/alert-delete-command.ts:19"),r.setSelection(o),e.commitJob(r),!0}}),t}(a.Command);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);o&&o.isConnected&&"alert"===(null==o?void 0:o.nodeName)?(a.PositionUtil.insertNodes(n,r,[o.parentNode]),n.setSelection(n.selectNode(o)),e.commitJob(n)):e.cancelJob(n)}}),t}(a.Command);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3758),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){i.assert.fatal(t,"plugins/alert/src/kernel/commands/alert-type-command.ts:8");var r=e.getNodeById(t);return i.assert.fatal(r,"plugins/alert/src/kernel/commands/alert-type-command.ts:12"),r.attrs.type}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=u.ALERT_TYPE[0]);var n="string"==typeof t?[t]:t,o=e.newJob(),a=n.map((function(e){return o.getNodeById(e)})).filter((function(e){return"alert"===(null==e?void 0:e.nodeName)}));return!!a.length&&(a.forEach((function(e){o.setAttribute(e,"type",r)})),e.commitJob(o),!0)}}),t}(a.Command);t.default=l},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(4191)),a={LOCAL_STORAGE_KEY:"lake-alert",load:function(){var e=null,t=o.default.getItem(this.LOCAL_STORAGE_KEY);if(t)try{e=JSON.parse(t)}catch(e){console.error("invalid data:",t)}return e},save:function(e){var t={type:e.type};o.default.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(t))},clear:function(){var e;null===(e=o.default.removeItem)||void 0===e||e.call(o.default,this.LOCAL_STORAGE_KEY)}};t.default=a},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3458)),a=r(3758),i=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=null===(r=null==t?void 0:t.attrs)||void 0===r?void 0:r.class;if(null==n?void 0:n.includes("lake-alert")){var i=/lake-alert-([\w]*)/i.exec(n),u=a.ALERT_TYPE[0];i&&i.length>=2&&(u=i[1]);var l=o.default.createElement("alert",{type:u});return e.setNode(l),!1}return!0}}),Object.defineProperty(e,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["blockquote"]}),e}();t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(3470)),l=i(r(4468)),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o=(null===(r=t.attrs)||void 0===r?void 0:r.type)||"info";e.isInlineMode()&&(n=a({},l.default[o]));var i=e.createElement("div",{className:"ne-alert",attrs:{"data-type":o},style:n});e.setNode(i)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["alert"]}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o={margin:"4px 0",padding:"10px",borderRadius:"4px"};t.default={info:n({border:"1px solid #C0D9FC",backgroundColor:"#D9E8FC"},o),warning:n({border:"1px solid #F6E5AC",backgroundColor:"#F9EFCD"},o),danger:n({border:"1px solid #F8CED3",backgroundColor:"#FBE4E7"},o),success:n({border:"1px solid #DCF4B4",backgroundColor:"#E8F7CF"},o),tips:n({border:"1px solid #E8E9E8",backgroundColor:"#F4F5F5"},o),color1:n({border:"1px solid #B5E8F2",backgroundColor:"#CEF1F7"},o),color2:n({border:"1px solid #C7F0DF",backgroundColor:"#DAF6EA"},o),color3:n({border:"1px solid #F8D6B9",backgroundColor:"#FDE6D3"},o),color4:n({border:"1px solid #F7C4E2",backgroundColor:"#FBDFEF"},o),color5:n({border:"1px solid #D9C9F8",backgroundColor:"#E6DCF9"},o)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3599)),u=r(3499),l=r(3758),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=(null===(r=null==t?void 0:t.attrs)||void 0===r?void 0:r.type)||l.ALERT_TYPE[0];e.setNode(i.default.createElement("blockquote")),e.addClassName("lake-alert","lake-alert-".concat(n))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["alert"]}),t}(u.LakeNodeWriter);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3454),l=r(3846),c=r(3466),s=r(3493),f=r(3463),d=r(3519),p=a(r(4012)),h=a(r(3716)),y=a(r(4471)),b=a(r(4472)),m=a(r(4473)),v=a(r(4474)),g=a(r(4475)),_=r(4476),w=a(r(4477)),O=r(4478),E=r(3634),P=a(r(4479)),j=a(r(4480)),C=a(r(4481)),k=a(r(4482)),S=a(r(4483)),A=a(r(4484)),x=a(r(4485)),N=r(3848),T=a(r(3635)),D=a(r(4486)),L=a(r(4487)),R=r(4488),I=a(r(4503)),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_taskMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"_uploadImageByURLHandler",{enumerable:!0,configurable:!0,writable:!0,value:null}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r,n,o,a,i,u,d,p,h,y,b=this,m=e.requireService(N.IUploadKernelService.ID);e.registerInlineCard(t.cardName),null===(r=e.getService(c.IHTMLKernelService.ID))||void 0===r||r.registerHTMLNodeReader(j.default.NodeNames,new j.default(this,e)),null===(n=e.getService(c.IHTMLKernelService.ID))||void 0===n||n.registerHTMLNodeReader(C.default.NodeNames,new C.default),null===(o=e.getService(c.IHTMLKernelService.ID))||void 0===o||o.registerNodeHTMLWriter(A.default.NodeNames,new A.default),null===(a=e.getService(f.ILakeKernelService.ID))||void 0===a||a.registerLakeCardReader(E.pluginRegister.cardName,new S.default(e)),null===(i=e.getService(s.IINodeReaderKernelService.ID))||void 0===i||i.registerINodeCardReader(E.pluginRegister.cardName,new k.default(e)),null===(u=e.getService(f.ILakeKernelService.ID))||void 0===u||u.registerLakeCardWriter(E.pluginRegister.cardName,new x.default),null===(d=e.getService(l.IFileReaderKernelService.ID))||void 0===d||d.registerFileReader(m.getFileAcceptUtil().getImageFileAccept(this.option.accept),new P.default(this,e)),null===(p=e.getService(T.default.ID))||void 0===p||p.registerMarkdownReader("image",new D.default),null===(h=e.getService(T.default.ID))||void 0===h||h.registerMarkdownWriter("image",new L.default),null===(y=e.getService(f.ILakeKernelService.ID))||void 0===y||y.registerLakeNodeReader("img",new R.LegacyLakeImageReader(this)),e.extendMethods({setUploadImageByURLHandler:function(e){b._uploadImageByURLHandler=e}}),this._initMarkdownKey()}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._taskMap,delete this._uploadImageByURLHandler,e.prototype.destroy.call(this)}}),Object.defineProperty(t.prototype,"_initMarkdownKey",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this;null===(e=this.kernel.getService(d.IMarkdownKernelService.ID))||void 0===e||e.registerMarkdownMatcher(d.TriggerType.whiteSpace,new p.default(this.editing,{match:function(e){if(!t._uploadImageByURLHandler)return null;var r=/\!\[([^\]]*?)\]\(([^\]]+?)\)$/.exec(e);return r&&(0,O.isValidImageURL)(r[2])?r:null}},(function(e,r,n,o){var a,l=o.matched,c=e.newPosition(n,l.index),s=l[2],f=t._uploadImageByURLHandler(s);u.assert.fatal(f.taskId||f.url,"plugins/image/src/kernel/index.ts:181"),a=f.taskId?h.default.createWillUploadValue({type:"url",from:"markdown",ratio:t.option.ratio,originalURL:s,taskId:f.taskId,clientId:t.kernel.id}):h.default.createValueByURL({from:"markdown",ratio:t.option.ratio,originalURL:s,src:f.url});var d=i.CardUtil.insertCardNode(e,e.newSelection(e.newRange(c)),"image",a).cardNode;e.setSelection(e.newSelection(e.newRange(e.newPosition(d.parentNode,d.offset+1))))})))}}),Object.defineProperty(t.prototype,"registerTask",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._taskMap[e]=t}}),Object.defineProperty(t.prototype,"getNodeIdByTaskId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._taskMap[e]}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"image"}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:y.default}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[b.default,m.default,v.default,w.default,g.default,_.MoveImageCommand,I.default]}),Object.defineProperty(t,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:E.pluginRegister.cardName}),t}(i.KernelPlugin);t.default=M},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3464)),a={accept:null,capturePatterns:[/[\s\S]*?/],excludeCapturePatterns:[],ratio:1,isCaptureImageURL:function(){return!0},onBeforeRenderImage:function(e){return e},useOriginSrc:function(){return!1}},i=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=(0,o.default)({},a,e)}return Object.defineProperty(e.prototype,"accept",{get:function(){return this._option.accept},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ratio",{get:function(){return this._option.ratio},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onBeforeRenderImage",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return void 0===t&&(t=!1),this._option.onBeforeRenderImage(e,t)}}),Object.defineProperty(e.prototype,"useOriginSrc",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!this._option.useOriginSrc(e)}}),Object.defineProperty(e.prototype,"isCaptureImageURL",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._option;return(0,t.isCaptureImageURL)(e,t.capturePatterns,t.excludeCapturePatterns)}}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"image"}),e}();t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3513),u=r(3634),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob();if(this.getState(r)===a.Command.UNAVAILABLE)return e.cancelJob(r),!1;var n=a.CardUtil.insertCardNode(r,r.getSelection(),"image",t),o=n.selection,i=n.cardNode;return t.taskId&&this.plugin.registerTask(t.taskId,i.id),r.setSelection(o),e.commitJob(r),i.id}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.image}),t}(i.GeneralCommandV2);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3457),i=r(3634),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.plugin.getNodeIdByTaskId(t)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:i.pluginRegister.command.imageTask}),t}(a.KernelAbstractCommand);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3634),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob(),n=r.getNodeById(t);if(!n||!n.isConnected||!n.isCardNode())return e.cancelJob(r),!1;var o=n.parentNode.childCount,u=r.newSelection(r.newRange(r.newPosition(n.parentNode,n.offset+1)));if(i.assert.fatal(u.collapsed,"plugins/image/src/kernel/commands/image-title-breakline-command.ts:24"),o>1)return r.setSelection(u),e.commitJob(r),!0;var l=a.PositionUtil.breakLine(r,u.firstRange.start);return r.setSelection([r.newRange(l)]),e.commitJob(r),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.imageTitleBreakLine}),t}(u.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3913),u=a(r(3716)),l=r(3634),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=!1);var n=u.default.createValueByURL(t);return this._execute(e,"image",n,r)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.insertImage}),t}(i._InsertCardCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.MoveImageCommand=void 0;var a=r(3913),i=r(3634),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:i.pluginRegister.command.moveImage}),t}(a.MoveCardCommand);t.MoveImageCommand=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3513),u=r(3634),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);return o&&o.isConnected?(n.setAttribute(o,"value",a(a({},o.attrs.value),r)),e.commitJob(n),!0):(e.cancelJob(n),!1)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.updateImageData}),t}(i.GeneralCommandV2);t.default=l},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isValidImageURL=void 0;var o=n(r(3912));t.isValidImageURL=function(e){return!!o.default.isBase64ImageURL(e)||!!o.default.isFullHttpURL(e)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3597),u=a(r(3458)),l=r(3633),c=a(r(3847)),s=a(r(3716)),f=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"_imagePlugin",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(n,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:r}),n}return o(t,e),Object.defineProperty(t.prototype,"readFile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;if((null==t?void 0:t.from)!==l.SOURCE_FROM_UI||"image"===(null==t?void 0:t.category)){var n=e._$neUploadTaskId;if(n){var o=(0,i.uuid)(9),a=u.default.createCard("image",s.default.createWillUploadValue({type:"binary",from:t?t.from:void 0,ratio:this._imagePlugin.option.ratio,name:null===(r=e.file)||void 0===r?void 0:r.name,taskId:n,clientId:this._kernel.id}),o);return this._imagePlugin.registerTask(n,o),a}}}}),t}(c.default);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3597),u=a(r(3458)),l=a(r(3494)),c=a(r(3716)),s=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"_imagePlugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._imagePlugin=t,n._kernel=r,n}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.attrs,n=r.src,o=r._$neUploadTaskId,a=r._$neImageSrc,l=r.width,s=l?parseInt(l+"",10):NaN,f=null;if(a?f=a:(n&&!this._imagePlugin.option.isCaptureImageURL(n)||this._imagePlugin.option.useOriginSrc(n))&&(f=n),f||o){var d,p=e.getState("link");if(f)d=u.default.createCard("image",c.default.createValueByURL({from:"paste",originalURL:n,ratio:this._imagePlugin.option.ratio,src:f,link:p,linkExternal:!!p||void 0,width:isNaN(s)?void 0:s}));else{var h=(0,i.uuid)(9);d=u.default.createCard("image",c.default.createWillUploadValue({type:"url",from:"paste",ratio:this._imagePlugin.option.ratio,originalURL:n,taskId:o,clientId:this._kernel.id,link:p,linkExternal:!!p||void 0,width:isNaN(s)?void 0:s}),h),this._imagePlugin.registerTask(o,h)}e.setNode(d)}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["img"]}),t}(l.default);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=t.className||(null===(r=t.attrs)||void 0===r?void 0:r.class)||"";return!(!n.includes("ne-ui-image-ocr-mask")&&!n.includes("ne-ui-image-ocr-text"))&&(e.stop(),!0)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["div"]}),t}(a(r(3494)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=a(r(3500)),l=r(4013),c=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=null===(r=t.attrs)||void 0===r?void 0:r.value;return!n||(n.src&&!n.status&&(n.status=l.IMAGE_STATUS_ENUM.DONE),e.setNode(i.default.createCard("image",n,t.id)),!0)}}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3481),l=a(r(3716)),c=r(4013),s=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){r.src&&!r.status&&(r.status=c.IMAGE_STATUS_DONE);var o=i.default.createCard("image",l.default.fromLake(r),n);e.setNode(o)}}),t}(u.LakeCardReader);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=(null===(r=t.attrs)||void 0===r?void 0:r.value)||{};if(n.src){var o=null;if(n.link){var a={href:n.link};!1!==n.linkExternal&&(a.target="_blank"),o=e.createElement("a",{className:"ne-image-link",attrs:a})}var i=e.createElement("img",{className:"ne-image",attrs:{src:n.src,width:n.width||n.original&&n.original.width}});o?(e.appendChild(o,i),e.setNode(o)):e.setNode(i)}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["image"]}),t}(a(r(3470)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3547)),u=a(r(3716)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.createInlineCard("image",u.default.toLake(r),n);e.setNode(o)}}),t}(i.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e.setNode(e.createElement("image",{value:{src:t.href,title:t.title}})),!0}}),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=(null===(r=t.attrs)||void 0===r?void 0:r.value)||{};return e.append("![".concat(n.title||"","](").concat(n.src,")")),!0}}),e}();t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyLakeImageReader=void 0;var i=r(4195),u=r(3453),l=a(r(3716)),c=r(3597),s=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.attrs,n=r.src,o=r._$neUploadTaskId,a=r._$neImageSrc,i="";if("string"==typeof n&&("string"==typeof a?i=a:(n&&!this.plugin.option.isCaptureImageURL(n)||this.plugin.option.useOriginSrc(n))&&(i=n),i||o)){var s;if(i)s=u.INodeHelper.createCard("image",l.default.createValueByURL({from:"paste",originalURL:n,ratio:this.plugin.option.ratio,src:i}));else{var f=(0,c.uuid)(9);s=u.INodeHelper.createCard("image",l.default.createWillUploadValue({type:"url",from:"paste",ratio:this.plugin.option.ratio,originalURL:n,taskId:o,clientId:this.plugin.kernel.id}),f),this.plugin.registerTask(o,f)}e.setNode(s)}}}),t}(i.LakeNodeReader);t.LegacyLakeImageReader=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LakeCardPreReader=void 0;var n=function(){};t.LakeCardPreReader=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LakeNodePreReader=void 0;var n=function(){};t.LakeNodePreReader=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._kernel=null}}),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._kernel.readData("text/lake",e,t)}}),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.document.getINode(t);return this._kernel.writeData("text/lake",r,t)}}),t}(r(3453).DataSource);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LakeKernelService=void 0;var i=a(r(4493)),u=a(r(4501)),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"lakeReader",{enumerable:!0,configurable:!0,writable:!0,value:new i.default(t.kernel)}),Object.defineProperty(t,"lakeWriter",{enumerable:!0,configurable:!0,writable:!0,value:new u.default(t.kernel)}),t}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.lakeReader.destroy(),this.lakeWriter.destroy()}}),Object.defineProperty(t.prototype,"registerLakeAttrReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.lakeReader.registerAttrReader(e,t)}}),Object.defineProperty(t.prototype,"registerLakeCardPreReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.lakeReader.registerCardPreReader(e,t)}}),Object.defineProperty(t.prototype,"registerLakeCardReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.lakeReader.registerCardReader(e,t)}}),Object.defineProperty(t.prototype,"registerLakeNodePreReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.lakeReader.registerNodePreReader(e,t)}}),Object.defineProperty(t.prototype,"registerLakeNodeReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.lakeReader.registerNodeReader(e,t)}}),Object.defineProperty(t.prototype,"registerLakeStyleReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.lakeReader.registerStyleReader(e,t)}}),Object.defineProperty(t.prototype,"registerLakeNodeWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.lakeWriter.registerNodeWriter(e,t)}}),Object.defineProperty(t.prototype,"registerLakeCardWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.lakeWriter.registerCardWriter(e,t)}}),Object.defineProperty(t.prototype,"registerLakeAttrWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.lakeWriter.registerAttrWriter(e,t)}}),t}(r(3463).ILakeKernelService);t.LakeKernelService=l},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3799),u=r(3454),l=r(3849),c=r(4198),s=r(3517),f=a(r(3458)),d=r(3518),p=r(3561),h=a(r(4494)),y=r(4495),b=r(4496),m=r(4497),v=r(4498),g=r(4500),_=function(){function e(e){Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_nodeReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_nodePreReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_attrReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_styleReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_cardPreReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_cardReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this.kernel,delete this._nodeReaders,delete this._nodePreReaders,delete this._attrReaders,delete this._styleReaders,delete this._cardReaders,delete this._cardPreReaders}}),Object.defineProperty(e.prototype,"registerNodePreReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){r._nodePreReaders[e]||(r._nodePreReaders[e]=[]),r._nodePreReaders[e].push(t)}))}}),Object.defineProperty(e.prototype,"registerNodeReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){r._nodeReaders[e]||(r._nodeReaders[e]=[]),r._nodeReaders[e].push(t)}))}}),Object.defineProperty(e.prototype,"registerAttrReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;"string"==typeof e&&(e=[e]),e.forEach((function(e){r._attrReaders[e]||(r._attrReaders[e]=[]),r._attrReaders[e].push(t)}))}}),Object.defineProperty(e.prototype,"registerStyleReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;"string"==typeof e&&(e=[e]),e.forEach((function(e){r._styleReaders[e]||(r._styleReaders[e]=[]),r._styleReaders[e].push(t)}))}}),Object.defineProperty(e.prototype,"registerCardPreReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._cardPreReaders[e]=t}}),Object.defineProperty(e.prototype,"registerCardReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){r._cardReaders[e]=t}))}}),Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this._parseLakeAsHTML(t),o=n.nodes,a=n.meta,i=(0,y.createRootLakeReadContext)(this);return this._walkNodes(i,o,r),i.close(e),f.default.createFragment(i.node.children,{meta:a})}}),Object.defineProperty(e.prototype,"readByNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;if(!e.length)return[];var n=(0,y.createRootLakeReadContext)(this,t);return this._walkNodes(n,e),n.close(this.kernel),(null===(r=n.node)||void 0===r?void 0:r.children)||[]}}),Object.defineProperty(e.prototype,"_parseLakeAsHTML",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={};e=(0,v.preprocessLakeContent)(e,t);var r={type:s.NodeType.Element,name:"#root",children:[]},n=[],a=[],c=[],f=[],d=r,p=!1,h=0,y=new i.Parser({onopentag:function(e,t){if(p)h++;else{var r,i=function(e,t){if("card"===e){var r=t.name,n=t.type,a=t.value,i=o(t,["name","type","value"]);return{name:r,type:n?n.toLowerCase():void 0,value:a,attrs:i}}if(t["data-ready-card"]&&t["data-card-value"])return{name:t["data-ready-card"],value:t["data-card-value"]};return null}(e,t);if(i){p=!0,u.assert.fatal(0===h,"plugins/lake-data-source/src/kernel/lib/lake-reader.ts:211");var l=i.value,y=void 0;if(l){l=l.replace(/^data:/,"");try{y=JSON.parse(decodeURIComponent(l))}catch(e){}}else y={};r={type:s.NodeType.Card,cardType:i.type,name:i.name,attrs:i.attrs},y&&(r.value=y),(null==y?void 0:y.id)&&(r.id=y.id,delete y.id),t.style&&(r.style=(0,m.parseStyle)(t.style),delete t.style)}else r={type:s.NodeType.Element,name:e,attrs:t,children:[]},t.style&&(r.style=(0,m.parseStyle)(t.style),delete t.style);"br"===e?n.push({node:r,parentNode:d}):"ul"===e||"ol"===e?a.push({node:r,parentNode:d}):"a"===e&&c.push({node:r,parentNode:d}),d.children||(d.children=[]),d.children.push(r),f.push(d),d=r}},ontext:function(e){if(!p){d.children||(d.children=[]);var t=d.children[d.children.length-1];"text"===(null==t?void 0:t.type)?t.data+=e:d.children.push({name:"#text",type:s.NodeType.Text,data:e})}},onclosetag:function(e){p&&h>0?h--:(u.assert.fatal(d.name===e||"card"===d.type,"plugins/lake-data-source/src/kernel/lib/lake-reader.ts:316"),"card"===d.type&&(p=!1),d=f.pop())}},{decodeEntities:!0,lowerCaseTags:!0,lowerCaseAttributeNames:!0,recognizeSelfClosing:!0});return y.write(e),y.end(),u.assert.fatal(0===f.length,"plugins/lake-data-source/src/kernel/lib/lake-reader.ts:335"),n.forEach((function(e){var t=e.node,r=e.parentNode,n=r.children.indexOf(t);if(n===r.children.length-1&&l.HTMLBlockTags[r.name])r.children.length-=1;else{var o=r.children[n-1];o&&"text"===o.type?(r.children.splice(n,1),o.data+="\n"):r.children[n]={type:s.NodeType.Text,name:"#text",data:"\n"}}})),(0,g.reflowList)(r,a),(0,b.formatLinkNode)(c),{nodes:r.children||[],meta:t}}}),Object.defineProperty(e.prototype,"_walkNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this;t.forEach((function(t){var o;if("text"===t.type){if(!(null===(o=t.data)||void 0===o?void 0:o.trim())&&e.node&&f.default.isFragmentNode(e.node))return;return n._walkTextNode(e,t)}return"card"===t.type?n._walkCardNode(e,t,r):n._walkElement(e,t,r)}))}}),Object.defineProperty(e.prototype,"_walkTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,a=e.getChildContext(t),i=t.data.replace(/[\u200B\uFEFF]/g,"");e&&e.inode&&"span"===e.inode.name&&1===(null===(r=e.inode.children)||void 0===r?void 0:r.length)&&(o=null===(n=e.inode.attrs)||void 0===n?void 0:n.id),o&&!(0,c.isValidId)(o)&&(o=void 0),a.setText(i||"",o)}}),Object.defineProperty(e.prototype,"_walkElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this,o=t.name,a=this._nodePreReaders[o];if(a)for(var i=new h.default(r),u=0,s=a.length;u<s;u++)if(!1===a[u].read(i,t))return;var f=e.getChildContext(t),d=t.style,p=t.attrs||{},y=p.id;p["data-lake-id"]&&!l.HTMLHeadingTags[t.name]&&(y=p["data-lake-id"]),y&&(0,c.isValidId)(y)&&f.setAttr("id",y),d&&Object.keys(d).forEach((function(e){var r=n._styleReaders[e];r&&r.forEach((function(r){r.read(f,e,d[e],t)}))})),Object.keys(p).forEach((function(e){var r=n._attrReaders[e];r&&r.forEach((function(r){r.read(f,e,p[e],t)}))}));var b=this._nodeReaders[o];b&&(b.some((function(e){return!1===e.read(f,t)})),f.isStopped())||t.children&&this._walkNodes(f,t.children,r)}}),Object.defineProperty(e.prototype,"_walkCardNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var o=this,a=this._cardPreReaders[t.name];if(!a||!1!==a.read(new h.default(r),t.name,t.value||{},t.id)){var i=e.getChildContext(t),u=this._cardReaders[t.name]||this._cardReaders["*"],l=t.style,s=t.attrs||{};if(u){var f=t.value;"object"==typeof t.value&&(t.value=n({},t.value)),t.value&&(delete t.value.margin,"image"!==t.name&&delete t.value.height),l&&Object.keys(l).forEach((function(e){var r=o._styleReaders[e];r&&r.forEach((function(r){r.read(i,e,l[e],t)}))})),Object.keys(s).forEach((function(e){var r=o._attrReaders[e];r&&r.forEach((function(r){r.read(i,e,s[e],t)}))}));var y=(0,c.isValidId)(t.id)?t.id:void 0;u.read(i,t.name,t.value||{},y),function(e,t){if(!e.node)return;var r=t||{},n=r.margin,o=r.height,a=r.widthMode;e.node.attrs||(e.node.attrs={});var i=e.node.attrs.value;o&&"image"!==e.node.name&&(i.__height=o);n&&(!0===n||n.top&&n.bottom?i.__spacing=d.CARD_SPACING_BOTH:n.top?i.__spacing=d.CARD_SPACING_TOP:n.bottom&&(i.__spacing=d.CARD_SPACING_BOTTOM));a&&(a===p.WIDTH_MODE_CONTAIN?i.__widthMode=p.WIDTH_MODE_CONTAIN:i.__widthMode=p.WIDTH_MODE_NORMAL)}(i,f)}}}}),e}();t.default=_},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3599)),u=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:e})}return Object.defineProperty(e.prototype,"from",{get:function(){var e;return null===(e=this._option)||void 0===e?void 0:e.from},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"createElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.default.createElement.apply(i.default,o([],n(e),!1))}}),Object.defineProperty(e.prototype,"setAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.default.setAttribute.apply(i.default,o([],n(e),!1))}}),Object.defineProperty(e.prototype,"removeAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.default.removeAttribute.apply(i.default,o([],n(e),!1))}}),e}();t.default=u},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createRootLakeReadContext=void 0;var l=r(3453),c=r(3454),s=r(3598),f=u(r(3458)),d=function(){function e(e,t){Object.defineProperty(this,"lakeReader",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_node",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_inode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_attrs",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_ignoreInheritedAttr",{enumerable:!0,configurable:!0,writable:!0,value:["id"]}),t&&(this._attrs=n({},t))}return Object.defineProperty(e.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inode",{get:function(){return this._inode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStopped",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._stopped}}),Object.defineProperty(e.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._stopped=!0}}),Object.defineProperty(e.prototype,"getChildContext",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=new e(this.lakeReader);return r._parent=this,r._inode=t||null,r._attrs=this.getInheritedAttrs(),r._state=n({},this._state),this._children.push(r),r}}),Object.defineProperty(e.prototype,"readByNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.lakeReader.readByNodes(e,this._attrs)}}),Object.defineProperty(e.prototype,"setNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._setNode(e)}}),Object.defineProperty(e.prototype,"setText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._setNode(f.default.createTextNode(e,void 0,t))}}),Object.defineProperty(e.prototype,"hasState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,s.hasOwnProperty)(this._state,e)}}),Object.defineProperty(e.prototype,"clearState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){delete this._state[e]}}),Object.defineProperty(e.prototype,"setState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._state[e]=t}}),Object.defineProperty(e.prototype,"ignoreInheritedAttrs",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;"string"==typeof e?this._ignoreInheritedAttr.push(e):Array.isArray(e)&&(t=this._ignoreInheritedAttr).push.apply(t,a([],o(e),!1))}}),Object.defineProperty(e.prototype,"getInheritedAttrs",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,r=n({},this._attrs);try{for(var o=i(this._ignoreInheritedAttr),a=o.next();!a.done;a=o.next()){delete r[a.value]}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r}}),Object.defineProperty(e.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,s.hasOwnProperty)(this._state,e)?this._state[e]:t}}),Object.defineProperty(e.prototype,"setAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){c.assert.fatal(!this._node,"plugins/lake-data-source/src/kernel/lib/context/lake-read-context.ts:115"),this._attrs[e]=t}}),Object.defineProperty(e.prototype,"createElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f.default.createElement.apply(f.default,a([],o(e),!1))}}),Object.defineProperty(e.prototype,"createCard",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f.default.createCard.apply(f.default,a([],o(e),!1))}}),Object.defineProperty(e.prototype,"createTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f.default.createTextNode.apply(f.default,a([],o(e),!1))}}),Object.defineProperty(e.prototype,"_setNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){c.assert.fatal(null===this._node,"plugins/lake-data-source/src/kernel/lib/context/lake-read-context.ts:132"),this._node=e}}),Object.defineProperty(e.prototype,"close",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,r=this._node,n=[];if(this._children.forEach((function(t){t.close(e).forEach((function(e){n.push(e)}))})),!r)return n;Object.keys(this._attrs).forEach((function(e){f.default.setAttribute(r,e,t._attrs[e])}));var o=e.getNodeSchema(r.name);if(null==o?void 0:o.category.includes(l.Category.Block)){var a=n[n.length-1];a&&"text"===a.type&&a.data.endsWith("\n")&&(a.data=a.data.substring(0,a.data.length-1))}return n.forEach((function(e){f.default.appendChild(r,e)})),[r]}}),e}();t.default=d,t.createRootLakeReadContext=function(e,t){var r=new d(e,t);return r.setNode(f.default.createFragment()),r}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.formatLinkNode=void 0;var a=r(3511);t.formatLinkNode=function(e){e.forEach((function(e){var t,r,i=e.node,u=e.parentNode,l=[],c=!1;if(Array.from(i.children||[]).forEach((function(e){var t;if("code"===e.name){var r=e,u=i.children.indexOf(r);if(i.children.splice(u,1),null===(t=r.children)||void 0===t?void 0:t.length){var s=(0,a.cloneObject)(i);s.children=o([],n(r.children),!1),r.children=[s],c=!0,l.push(r)}}else if(c){var f=i.children.indexOf(e);i.children.splice(f,1);var d=(0,a.cloneObject)(i);d.children=[e],l.push(d)}})),l.length){var s=u.children.indexOf(i);(t=u.children).splice.apply(t,o([s+1,0],n(l),!1)),(null===(r=i.children)||void 0===r?void 0:r.length)||function(e,t){var r=e.children.indexOf(t);-1!==r&&e.children.splice(r,1)}(u,i)}}))}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.parseStyle=void 0,t.parseStyle=function(e){var t={};return e?(e.split(";").forEach((function(e){var r=n(e.split(":")),o=r[0],a=r.slice(1),i=o.trim(),u=a.join(":").trim();i&&u&&(t[i]=u)})),t):t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preprocessLakeContent=void 0;var n=r(4499);t.preprocessLakeContent=function(e,t){return e?e=function(e){return e=e.replace(/\r/gi,"").replace(/<\/br>/gi,"").replace(/<br\s*\/>/gi,"<br>"),e=e.replace(/\n*<br>\n*/gi,"<br>"),e.replace(/\n+/g," ")}(e=function(e){return e.replace(/<card [^>]*?><\/card>/g,(function(e){var t=/\bname="table"[\s\S]*?\bvalue="data:([^"]*?)"[^>]*?><\/card>$/.exec(e);if(!t)return e;try{var r=JSON.parse(decodeURIComponent(t[1]));if(!r.html||!r.html.startsWith("<table "))return"";var n=[];return r.id&&n.push("id=".concat(r.id)),r.hideBorder&&n.push('hide-border="true"'),n.push('margin="'.concat(!1!==r.margin,'"')),r.widthMode&&n.push('width-mode="'.concat(r.widthMode,'"')),r.html.replace(/^<table /,"<table ".concat(n.join(" ")," "))}catch(e){console.error(e)}return""}))}(e=function(e,t){return e.replace(/^(<meta[^>]*?>)*/,(function(e){return(0,n.extractMeta)(e,t),""}))}(e=e.replace(/^<!doctype[^>]*?>/,"").replace(/<(focus|anchor|cursor)( ?\/)?>/gi,""),t))):""}},function(e,t,r){"use strict";function n(e){for(var t=/(name|content)="([^"]*?)"/g,r=null,n={name:"",value:""};r=t.exec(e);)"content"===r[1]?n.value=r[2]:n.name=r[2];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.extractMeta=void 0,t.extractMeta=function(e,t){for(var r,o=/<meta([^>]*?)>/g;r=o.exec(e);){var a=n(r[1]),i=a.name,u=a.value;i&&u&&(t[i]=u)}}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.reflowList=void 0;var a=r(3454),i=r(3591),u=function(){function e(){Object.defineProperty(this,"_lists",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"addToList",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,a,u;t.attrs.list=e;var l=this._lists,c=function(e){var t;return(null===(t=e.attrs)||void 0===t?void 0:t["data-lake-indent"])||0}(t);l[e]||(l[e]={});var s=function(e){var t;return Math.max(parseInt(null===(t=e.attrs)||void 0===t?void 0:t.start,10)||0,0)}(t);0===s?delete t.attrs.start:t.attrs.start=s;var f=l[e];if(c<function(e){var t=Object.keys(e).map((function(e){return Number(e)})).filter(Boolean);return Math.min.apply(Math,o([],n(t),!1))}(f)){var d=(0,i.generateNodeId)();return t.attrs.list=d,void(this._lists[d]=(r={},r[c]=[t],r))}if(f[c])if(s===this._getNextStart(f[c])){f[c].push(t);var p=f[c][0].attrs.start;p?t.attrs.start=p:delete t.attrs.start}else{d=(0,i.generateNodeId)();t.attrs.list=d,this._lists[d]=((u={})[c]=[t],u)}else if(0!==s){var d=(0,i.generateNodeId)();t.attrs.list=d,this._lists[d]=((a={})[c]=[t],a)}else f[c]=[t],t.attrs.fid=(0,i.generateNodeId)()}}),Object.defineProperty(e.prototype,"_getNextStart",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e[0].attrs.start,r=void 0===t?0:t;return e.reduce((function(e,t){var r;return e+((null===(r=t.children)||void 0===r?void 0:r.length)||0)}),r)}}),e}();t.reflowList=function(e,t){var r=t.filter((function(e){var t,r,n=e.node,o=e.parentNode;return!(null===(t=n.attrs)||void 0===t?void 0:t.list)&&(n.children=null===(r=n.children)||void 0===r?void 0:r.filter((function(e){var t="li"===e.name;if(!t){var r=o.children.indexOf(n);o.children.splice(r,0,e)}return t})),!0)})),n=new u;r.forEach((function(e,t){var o;!function(e,t,r){var n=t.node;if(!r||!function(e,t){var r,n=e.node,o=e.parentNode;if(o!==t.parentNode)return!1;var i=o.children,u=i.indexOf(n),l=i.indexOf(t.node);if(-1===u||-1===l)return!1;a.assert.fatal(l<u,"plugins/lake-data-source/src/kernel/lib/helpers/reflow-list.ts:175");for(var c=u-1;c>=l;c--){var s=i[c];if(s===t.node)return!0;if("element"!==s.type||(null===(r=s.children)||void 0===r?void 0:r.length))return!1}return!1}(t,r))return void e.addToList((0,i.generateNodeId)(),n);var o=r.node.attrs.list;a.assert.fatal(o,"plugins/lake-data-source/src/kernel/lib/helpers/reflow-list.ts:152"),e.addToList(o,n)}(n,e,r[t-1]);var u=e.node,l=u.attrs,c=l.list,s=l.start;null===(o=u.children)||void 0===o||o.forEach((function(e){e.attrs.list=c,s?e.attrs.start=s:delete e.attrs.start}))}))}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3453),a=r(3454),i=r(3517),u=n(r(3458)),l=r(3518),c=n(r(3599)),s=n(r(3850)),f=r(4502),d=function(){function e(e){Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_nodeWriters",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_attrWriters",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_cardWriters",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._kernel,delete this._nodeWriters,delete this._cardWriters,delete this._attrWriters}}),Object.defineProperty(e.prototype,"registerNodeWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;"string"==typeof e?this._nodeWriters[e]=t:e.forEach((function(e){r._nodeWriters[e]=t}))}}),Object.defineProperty(e.prototype,"registerAttrWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;"string"==typeof e&&(e=[e]),e.forEach((function(e){r._attrWriters[e]=t}))}}),Object.defineProperty(e.prototype,"registerCardWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){r._cardWriters[e]=t}))}}),Object.defineProperty(e.prototype,"getNodeWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._nodeWriters[e]||null}}),Object.defineProperty(e.prototype,"getCardWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._cardWriters[e]||null}}),Object.defineProperty(e.prototype,"getAttrWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._attrWriters[e]||null}}),Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o=this;a.assert.fatal(u.default.isFragmentNode(t),"plugins/lake-data-source/src/kernel/lib/lake-writer.ts:78");var i,l=c.default.createElement("#root"),d=new f.LakeWriteContext(null,t,r);null===(n=t.children)||void 0===n||n.forEach((function(t){p(d,e,o,t)})),d.close(),d._appendTo(l),i=l.children&&0!==l.children.length?l.children.map((function(e){return c.default.toHTML(e)})).join(""):"<p><br /></p>";var h=this._kernel,y=[];if(r&&r.includeMeta){y.push('<!doctype lake><meta name="doc-version" content="1" />');var b=h.getService(s.default.ID);b&&y.push(b.toXML())}return y.join("")+i}}),e}();function p(e,t,r,n){var s,f,d;a.assert.fatal(!u.default.isFragmentNode(n),"plugins/lake-data-source/src/kernel/lib/lake-writer.ts:123");var y=e.newChildContext(n),b=n.name,m=n.attrs,v=n.id;if("br"===b)return y.setNode(y.createElement("br")),void y.close();var g=t.getNodeSchema(b),_=r.getCardWriter(b);if(g.category.includes(o.Category.Card)){if(_&&(_.write(y,b,(null===(s=n.attrs)||void 0===s?void 0:s.value)||{},n.id),y.mainNode)){var w=null===(f=y.mainNode.attrs)||void 0===f?void 0:f.value;if(null==w)return void(null===(d=y.mainNode.attrs)||void 0===d||delete d.value);!function(e,t){if(!(null==t?void 0:t.value))return;var r=t.value,n=r.__spacing,o=r.__height,a=r.__widthMode,i=null;n===l.CARD_SPACING_BOTH?i={top:!0,bottom:!0}:n===l.CARD_SPACING_TOP?i={top:!0}:n===l.CARD_SPACING_BOTTOM&&(i={bottom:!0});i&&(e.margin=i);o&&(e.height=o);a&&(e.widthMode=a)}(w,m),y.mainNode.attrs.value="data:".concat(encodeURIComponent(JSON.stringify(w)))}return n.attrs&&Object.keys(n.attrs).forEach((function(e){h(y,r,e,n.attrs[e],n)})),void y.close()}v&&(y.setAttr("data-lake-id",v),y.setAttr("id",v));var O=r.getNodeWriter(b);if("text"===g.type)y.setNode(c.default.createTextNode(n.data||"​"));else if(O&&(O.write(y,n),g.category.includes(o.Category.Block)))if(a.assert.fatal(y.contentNode,"plugins/lake-data-source/src/kernel/lib/lake-writer.ts:195"),u.default.isLikeEmpty(n))!function(e){var t;for(;e;){var r=null===(t=e.children)||void 0===t?void 0:t[e.children.length-1];if(!r)break;if(r.type===i.NodeType.Text)break;e=r}u.default.appendChild(e,u.default.createElement("br"))}(n);else{var E=function(e){var t=e.children||[],r=t[t.length-1];if(!r)return null;if("text"===r.type)return r;return null}(n);E&&E.type===i.NodeType.Text&&E.data.endsWith("\n")&&(E.data+="\n")}n.attrs&&(n.attrs.color&&h(y,r,"color",n.attrs.color,n),Object.keys(n.attrs).forEach((function(e){"color"!==e&&h(y,r,e,n.attrs[e],n)}))),u.default.isElementNode(n)&&n.children&&n.children.forEach((function(e){p(y,t,r,e)})),O&&O.leaveNode(y,n),y.close()}function h(e,t,r,n,o){var a=t.getAttrWriter(r);a&&a.write(e,r,n,o)}t.default=d},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LakeWriteContext=void 0;var u=r(3454),l=i(r(3599)),c=function(){function e(e,t,r){Object.defineProperty(this,"_parentContext",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_inode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"option",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_wrapNode",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_classNames",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_mainNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_attrs",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_style",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_virtual",{enumerable:!0,configurable:!0,writable:!0,value:!1})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"previousSiblingContext",{get:function(){if(!this._parentContext)return null;var e=this._parentContext._children,t=e.indexOf(this);return u.assert.fatal(-1!==t,"plugins/lake-data-source/src/kernel/lib/context/lake-write-context.ts:34"),e[t-1]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSiblingContext",{get:function(){if(!this._parentContext)return null;var e=this._parentContext._children,t=e.indexOf(this);return u.assert.fatal(-1!==t,"plugins/lake-data-source/src/kernel/lib/context/lake-write-context.ts:47"),e[t+1]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inode",{get:function(){return this._inode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mainNode",{get:function(){return this._mainNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentNode",{get:function(){return this._contentNode||this._mainNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"setVirtual",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._virtual=!0,this._handleAppend=e}}),Object.defineProperty(e.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._children=[],this._attrs=null,this._style=null,this._classNames.clear(),this._mainNode=null,this._contentNode=null}}),Object.defineProperty(e.prototype,"setNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=e),this._mainNode=e,this._contentNode=t}}),Object.defineProperty(e.prototype,"replaceNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=e),this._mainNode=e,this._contentNode=t}}),Object.defineProperty(e.prototype,"wrapNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){u.assert.fatal(this._mainNode,"plugins/lake-data-source/src/kernel/lib/context/lake-write-context.ts:91"),this._wrapNode.push(e)}}),Object.defineProperty(e.prototype,"setAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._attrs||(this._attrs={}),this._attrs[e]=t}}),Object.defineProperty(e.prototype,"setStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._style||(this._style={}),this._style[e]=t}}),Object.defineProperty(e.prototype,"hasStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;return!!(null===(t=this._style)||void 0===t?void 0:t[e])}}),Object.defineProperty(e.prototype,"getStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;return(null===(t=this._style)||void 0===t?void 0:t[e])||null}}),Object.defineProperty(e.prototype,"removeStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._style&&delete this._style[e]}}),Object.defineProperty(e.prototype,"addClassName",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.forEach((function(t){t&&e._classNames.add(t)}))}}),Object.defineProperty(e.prototype,"newChildContext",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=new e(this,t,this.option);return this._children.push(r),r}}),Object.defineProperty(e.prototype,"close",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this._attrs||this._style||this._classNames.size>0){var e=n({},this._attrs);this._mainNode?l.default.updateAttribute(this._mainNode,{attrs:e,style:this._style,className:Array.from(this._classNames)}):this._virtual||(this._mainNode=l.default.createElement("span",{attrs:e,style:this._style,className:Array.from(this._classNames)}))}}}),Object.defineProperty(e.prototype,"_appendTo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._virtual?this._handleAppend(e):this._mainNode&&(this._wrapNode.length&&this._wrapNode.forEach((function(t){l.default.appendChild(e,t),e=t})),l.default.appendChild(e,this._mainNode)),e=this._contentNode||this._mainNode||e,this._children.forEach((function(t){t._appendTo(e)}))}}),Object.defineProperty(e.prototype,"_handleAppend",{enumerable:!1,configurable:!0,writable:!0,value:function(e){throw new Error("invalid invoke")}}),Object.defineProperty(e.prototype,"isLikeEmpty",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return l.default.isLikeEmpty(e)}}),Object.defineProperty(e.prototype,"createElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.default.createElement.apply(l.default,a([],o(e),!1))}}),Object.defineProperty(e.prototype,"createInlineCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this._createCardElement("inline",e,t,r,n)}}),Object.defineProperty(e.prototype,"createBlockCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return this._createCardElement("block",e,t,r,n)}}),Object.defineProperty(e.prototype,"appendChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return l.default.appendChild(e,t)}}),Object.defineProperty(e.prototype,"toHTML",{enumerable:!1,configurable:!0,writable:!0,value:function(){u.assert.fatal(this._mainNode,"plugins/lake-data-source/src/kernel/lib/context/lake-write-context.ts:234"),this.close();var e=this.createElement("*");return this._appendTo(e),e.children.map((function(e){return l.default.toHTML(e)})).join("")}}),Object.defineProperty(e.prototype,"_createCardElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,o,a){return r&&"object"==typeof r&&o&&(r.id=o),l.default.createElement("card",{attrs:n(n({type:e,name:t},a),{value:r})})}}),e}();t.LakeWriteContext=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3457),u=r(3634),l=a(r(3711)),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);if(!(o&&o.isConnected&&o.isCardNode()&&o.parentNode))return e.cancelJob(n),!1;var a=l.default.breakLine(n,n.newPosition(o.parentNode,o.offset+1));return a=l.default.insertText(n,a,r),n.setSelection([n.newRange(a)]),e.commitJob(n),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.insertAfterImage}),t}(i.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3463),c=a(r(4505)),s=a(r(4506)),f=r(3717),d=a(r(4507)),p=a(r(4508)),h=a(r(4509)),y=a(r(4510)),b=a(r(4511)),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerAttr(f.pluginRegister.attr.alignment,c.default)}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.kernel,t=e.getService(u.IHTMLKernelService.ID);t&&(t.registerHTMLNodeReader(d.default.NodeNames,new d.default),t.registerHTMLStyleReader(p.default.StyleNames,new p.default));var r=e.getService(u.IHTMLKernelService.ID);r&&r.registerAttrHTMLWriter(y.default.AttrNames,new y.default);var n=e.getService(l.ILakeKernelService.ID);n&&n.registerLakeStyleReader(h.default.styleNames,new h.default);var o=e.getService(l.ILakeKernelService.ID);o&&o.registerLakeAttrWriter(b.default.AttrNames,new b.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:f.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[s.default]}),t}(i.KernelPlugin);t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o=r(3759),a={targets:[n.Category.Block],values:o.AlignmentValues.slice()};t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(4189)),u=r(3717),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.attr.alignment}),t}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.alignment}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3494)),u=r(3759),l=r(3717),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){t.name===u.HtmlNodeName&&e.addAttr(l.pluginRegister.attr.alignment,u.ALIGNMENT_CENTER)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[u.HtmlNodeName]}),t}(i.default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3760)),u=r(3759),l=r(3717),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){switch(r){case u.ALIGNMENT_LEFT:case u.ALIGNMENT_RIGHT:case u.ALIGNMENT_CENTER:case u.ALIGNMENT_JUSTIFY:case u.ALIGNMENT_DISTRIBUTED:e.addAttr(l.pluginRegister.attr.alignment,r)}}}),Object.defineProperty(t,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:[u.HtmlStyle]}),t}(i.default);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3759),o=r(3717),a=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){e.setAttr(o.pluginRegister.attr.alignment,r)}}),Object.defineProperty(e,"styleNames",{enumerable:!0,configurable:!0,writable:!0,value:n.LakeStyle}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3562)),u=r(3759),l=r(3717),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){e.addStyle(u.HtmlStyle,r)}}),Object.defineProperty(t,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.attr.alignment}),t}(i.default);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3759),o=r(3717),a=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){e.setStyle(n.LakeStyle,r)}}),Object.defineProperty(e,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:o.pluginRegister.attr.alignment}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3463),c=r(3519),s=a(r(3851)),f=a(r(4513)),d=a(r(4514)),p=a(r(4515)),h=a(r(4516)),y=a(r(4517)),b=r(3563),m=a(r(4518)),v=a(r(4519)),g=a(r(4520)),_=a(r(4521)),w=a(r(4522)),O=r(4523),E={"**":"bold",__:"bold","~~":"strikethrough",_:"italic","*":"italic","++":"underline"},P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerAttr(f.default),this._initMarkdownShortcutKey()}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.kernel,t=e.getService(u.IHTMLKernelService.ID);t&&(t.registerHTMLNodeReader(m.default.NodeNames,new m.default),t.registerHTMLStyleReader(v.default.StyleNames,new v.default));var r=e.getService(u.IHTMLKernelService.ID);r&&r.registerAttrHTMLWriter(_.default.AttrNames,new _.default);var n=e.getService(l.ILakeKernelService.ID);n&&n.registerLakeNodeReader(["strong","b","em","i","del","u","ins"],new g.default);var o=e.getService(l.ILakeKernelService.ID);o&&o.registerLakeAttrWriter(w.default.AttrNames,new w.default)}}),Object.defineProperty(t.prototype,"_initMarkdownShortcutKey",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.kernel.getService(c.IMarkdownKernelService.ID);t&&Object.keys(E).forEach((function(r){t.registerMarkdownMatcher(c.TriggerType.whiteSpace,new s.default(e.editing,r,(function(t,n){e._handlerMarkdown(t,E[r],n)}),!0))}))}}),Object.defineProperty(t.prototype,"_handlerMarkdown",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.createInheritTextNode("",r.end);r=i.RangeUtil.setAttribute(e,r,t,!0),e.insertNodeByPosition(r.end,n),e.setSelection([e.newRange(e.newPosition(n,0))])}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:b.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[d.default,p.default,y.default,h.default]}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:O.BasicTextStyleService}),t}(i.KernelPlugin);t.default=P},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o={bold:{targets:[n.Category.Text],values:[!0]},italic:{targets:[n.Category.Text],values:[!0]},underline:{targets:[n.Category.Text],values:[!0]},strikethrough:{targets:[n.Category.Text],values:[!0]},emoji:{targets:[n.Category.Text],values:[!0],allowClone:!1}};t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3453),l=i(r(3844)),c=r(3465),s=r(3563),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.attr.bold}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r,n,o=t.getSelection();if(u.SelectionUtil.allBlockNodeHasCategory(o,u.Category.Heading))return c.COMMAND_UNAVAILABLE;try{for(var i=a(this.plugin.service.boldDisableHandlers),l=i.next();!l.done;l=i.next()){if((0,l.value)(o))return c.COMMAND_UNAVAILABLE}}catch(e){r={error:e}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return e.prototype.getState.call(this,t)}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return e.prototype.getValue.call(this,t,u.Category.Heading)}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return e.prototype.execute.call(this,t,u.Category.Heading)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.bold}),t}(l.default);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3844)),u=r(3563),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.attr.italic}),t}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.italic}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3844)),u=r(3563),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.attr.strikethrough}),t}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.strikethrough}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3844)),u=r(3563),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.attr.underline}),t}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.underline}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3494)),u=r(3563),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){switch(t.name){case"strong":case"b":e.addAttr(u.pluginRegister.attr.bold,!0);break;case"i":case"em":e.addAttr(u.pluginRegister.attr.italic,!0);break;case"u":case"ins":e.addAttr(u.pluginRegister.attr.underline,!0);break;case"del":case"s":e.addAttr(u.pluginRegister.attr.strikethrough,!0)}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["strong","b","i","em","u","ins","s","del"]}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3760)),u=r(3563),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){switch(t){case"font-weight":(r>=500||"bold"===r||"bolder"===r)&&e.addAttr(u.pluginRegister.attr.bold,!0);break;case"font-style":"italic"!==r&&"oblique"!==r||e.addAttr(u.pluginRegister.attr.italic,!0);break;case"text-decoration-line":case"text-decoration":var n="string"==typeof r?r.split(/\s+/g):[];n.includes("underline")&&e.addAttr(u.pluginRegister.attr.underline,!0),n.includes("line-through")&&e.addAttr(u.pluginRegister.attr.strikethrough,!0)}}}),Object.defineProperty(t,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:["font-weight","font-style","text-decoration","text-decoration-line"]}),t}(i.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=r(3563),a=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;switch(t.name){case"strong":case"b":r=o.pluginRegister.attr.bold;break;case"em":case"i":r=o.pluginRegister.attr.italic;break;case"u":case"ins":r=o.pluginRegister.attr.underline;break;case"del":r=o.pluginRegister.attr.strikethrough;break;default:return n.assert.fatal(!1,"plugins/basic-text-style/src/kernel/readers/lake-basic-text-style-node-reader.ts:32"),!1}return e.setAttr(r,!0),!1}}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3562)),u=r(3563),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if(r){switch(t){case u.pluginRegister.attr.bold:return void e.wrapNode(e.createElement("strong"));case u.pluginRegister.attr.italic:return void e.wrapNode(e.createElement("em"))}var n=e.inode.attrs,o=n.underline,a=n.strikethrough;o&&a?e.addStyle("text-decoration","underline line-through"):o?e.addStyle("text-decoration","underline"):a&&e.addStyle("text-decoration","line-through")}}}),Object.defineProperty(t,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[u.pluginRegister.attr.bold,u.pluginRegister.attr.italic,u.pluginRegister.attr.underline,u.pluginRegister.attr.strikethrough]}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3454),a=n(r(3599)),i=r(3563),u=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;switch(t){case i.pluginRegister.attr.bold:r="strong";break;case i.pluginRegister.attr.italic:r="em";break;case i.pluginRegister.attr.underline:r="u";break;case i.pluginRegister.attr.strikethrough:r="del";break;default:return void o.assert.fatal(!1,"plugins/basic-text-style/src/kernel/writers/lake-basic-text-style-attr-writer.ts:36")}"u"!==r&&"del"!==r||!e.hasStyle("color")||(e.wrapNode(a.default.createElement("span",{style:{color:e.getStyle("color")}})),e.removeStyle("color")),e.wrapNode(a.default.createElement(r))}}),Object.defineProperty(e,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[i.pluginRegister.attr.bold,i.pluginRegister.attr.italic,i.pluginRegister.attr.underline,i.pluginRegister.attr.strikethrough]}),e}();t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BasicTextStyleService=void 0;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"registerBoldDisableHandler",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.boldDisableHandlers.push(e)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.boldDisableHandlers=[]}}),t}(r(4200).IBasicTextStyleKernelService);t.BasicTextStyleService=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=r(4016),a=function(){function e(){Object.defineProperty(this,"_attrTranslators",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_inlineCards",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_blockCards",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_box",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_boxUI",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._attrTranslators=null,this._inlineCards=null,this._blockCards=null,this._box=null}}),Object.defineProperty(e.prototype,"registerAttrTranslator",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,a={};"string"==typeof e?a[e]=t:a=e,Object.keys(a).forEach((function(e){var t=a[e];(0,n.assert)(t instanceof o.AttrTranslator,"framework/public/src/registry.ts:61"),r._attrTranslators[e]=t}))}}),Object.defineProperty(e.prototype,"registerInlineCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){this._inlineCards[t]={pluginInstance:e,definition:r}}}),Object.defineProperty(e.prototype,"registerBlockCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){this._blockCards[t]={pluginInstance:e,definition:r}}}),Object.defineProperty(e.prototype,"registerBoxNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this,o={};"string"==typeof e?o[e]=t:(o=e,t&&(r=t)),Object.keys(o).forEach((function(e){var t=o[e];"function"==typeof t&&(t={clazz:t,pluginContext:r}),n._box[e]=t}))}}),Object.defineProperty(e.prototype,"registerBoxUI",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,o={};"string"==typeof e?o[e]=t:o=e,Object.keys(o).forEach((function(e){var t=o[e];(0,n.assert)("function"==typeof t.factory,"framework/public/src/registry.ts:143"),r._boxUI[e]=t}))}}),Object.defineProperty(e.prototype,"getCardClass",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._inlineCards[e]||this._blockCards[e]||null}}),Object.defineProperty(e.prototype,"getBoxDefinition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._box[e]||null}}),Object.defineProperty(e.prototype,"getBoxUIDefinition",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._boxUI[e]||null}}),Object.defineProperty(e.prototype,"getAttrTranslator",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._attrTranslators[e]}}),Object.defineProperty(e.prototype,"isBoxNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(0,n.assert)("string"==typeof e,"framework/public/src/registry.ts:170"),!!this._box[e]}}),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4016),o={id:"id"},a=function(){function e(){}return Object.defineProperty(e,"syncDOMNodeAttrs",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){i(e,r).forEach((function(e){var r=e.type,o=e.name;r===n.AttrTranslator.ATTR_NAME?t.setAttribute(o,e.value):r===n.AttrTranslator.STYLE_NAME?t.style[o]=e.value:r===n.AttrTranslator.CUSTOM_NAME&&e.value(t)}));try{t.dispatchEvent(new CustomEvent("ne-after-attr-update"))}catch(e){}}}),Object.defineProperty(e,"syncDomNodeAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,o){var a=l(e,r,o);if(a){var i=a.name;a.type===n.AttrTranslator.ATTR_NAME?t.setAttribute(i,a.value):a.type===n.AttrTranslator.STYLE_NAME?t.style[a.name]=a.value:a.type===n.AttrTranslator.CUSTOM_NAME&&a.value(t)}}}),Object.defineProperty(e,"updateDOMNodeAttrs",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,o){var a=u(e,r,o),i=a.updated,l=a.removed;i.forEach((function(e){var r=e.type,o=e.name,a=e.value;r===n.AttrTranslator.ATTR_NAME?t.setAttribute(o,a):r===n.AttrTranslator.STYLE_NAME?t.style[o]=a:r===n.AttrTranslator.CUSTOM_NAME&&a(t)})),l.forEach((function(e){var r=e.type,o=e.name;r===n.AttrTranslator.ATTR_NAME?t.removeAttribute(o):r===n.AttrTranslator.STYLE_NAME?t.style[o]="":r===n.AttrTranslator.CUSTOM_NAME&&e.remove(t)}));try{t.dispatchEvent(new CustomEvent("ne-after-attr-update"))}catch(e){}}}),Object.defineProperty(e,"translateAll",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return i(e,t)}}),Object.defineProperty(e,"translateChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return u(e,t,r)}}),e}();function i(e,t){var r=[];return Object.keys(t).forEach((function(n){var o=l(e,n,t[n]);o&&r.push(o)})),r}function u(e,t,r){var n=[],o=[];return Object.keys(r).forEach((function(a){var i=r[a];if("remove"===i.type){var u=l(e,a,i.attrValue);u&&n.push(u)}else{var c=l(e,a,t[a]);c&&o.push(c)}})),{removed:n,updated:o}}function l(e,t,r){if(o[t])return{type:n.AttrTranslator.ATTR_NAME,name:o[t],value:r};if(t.startsWith("data-"))return{type:n.AttrTranslator.ATTR_NAME,name:t,value:r};var a=e.getAttrTranslator(t);return a?a.translate(t,r):null}t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=r(3454),c=u(r(3910)),s=u(r(4202)),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_$commandUnderlay",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"_$commands",{enumerable:!0,configurable:!0,writable:!0,value:{}}),t}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.removeAllListeners(),Object.keys(this._$commands).forEach((function(t){var r=e._$commands[t];null==r||r.destroy()}))}}),Object.defineProperty(t.prototype,"registerCommand",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,n={};"string"==typeof e?n[e]=t:n=e,Object.keys(n).forEach((function(e){var t=n[e];(0,l.assert)(t instanceof s.default,"framework/public/src/command-interceptor.ts:41"),["undo","redo"].includes(e)||(0,l.assert)(!r._$commands[e],"duplicate command name ".concat(e),"framework/public/src/command-interceptor.ts:44"),r._$commands[e]=t}))}}),Object.defineProperty(t.prototype,"execCommand",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,r,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return this._$commands[e]?(t=this._$commands[e]).execute.apply(t,i([],a(n),!1)):null===(r=this._$commandUnderlay)||void 0===r?void 0:r.execCommand.apply(r,i([e],a(n),!1))}}),Object.defineProperty(t.prototype,"queryCommandState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,r,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return this._$commands[e]?(t=this._$commands[e]).getState.apply(t,i([],a(n),!1)):null===(r=this._$commandUnderlay)||void 0===r?void 0:r.queryCommandState.apply(r,i([e],a(n),!1))}}),Object.defineProperty(t.prototype,"queryCommandSupported",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return!!this._$commands[e]||!!(null===(t=this._$commandUnderlay)||void 0===t?void 0:t.queryCommandSupported.apply(t,i([e],a(r),!1)))}}),Object.defineProperty(t.prototype,"queryCommandEnabled",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return this._$commands[e]?this._$commands[e].isEnabled():!!(null===(t=this._$commandUnderlay)||void 0===t?void 0:t.queryCommandEnabled.apply(t,i([e],a(r),!1)))}}),Object.defineProperty(t.prototype,"queryCommandValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,r,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return this._$commands[e]?(t=this._$commands[e]).getValue.apply(t,i([],a(n),!1)):null===(r=this._$commandUnderlay)||void 0===r?void 0:r.queryCommandValue.apply(r,i([e],a(n),!1))}}),t}(c.default);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ANCHOR_TYPE_BOTTOM_LEFT=t.ANCHOR_TYPE_TOP_RIGHT=t.ANCHOR_TYPE_END=t.ANCHOR_TYPE_START=void 0,t.ANCHOR_TYPE_START="start",t.ANCHOR_TYPE_END="end",t.ANCHOR_TYPE_TOP_RIGHT="topRight",t.ANCHOR_TYPE_BOTTOM_LEFT="bottomLeft"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DONT_SHOW=t.SELECTED=t.NOT_SELECTED=void 0,t.NOT_SELECTED=0,t.SELECTED=1,t.DONT_SHOW=2},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMMENT_LEFT_GAP=void 0,t.COMMENT_LEFT_GAP=6},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_LINK=void 0,t.DEFAULT_LINK="about:blank"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENV_YUQUE=t.ENV_LARK=void 0,t.ENV_LARK="lark",t.ENV_YUQUE="yuque"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_BOUNDARY_CLASS_NAME=t.EVENT_BOUNDARY_ATTR_NAME=void 0,t.EVENT_BOUNDARY_ATTR_NAME="data-event-boundary",t.EVENT_BOUNDARY_CLASS_NAME="ne-ignore-pointer-events"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_IN_COMPOSITION=void 0,t.KEY_IN_COMPOSITION=229},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OVERLAY_PLACEMENT_RIGHT_BOTTOM=t.OVERLAY_PLACEMENT_RIGHT_TOP=t.OVERLAY_PLACEMENT_RIGHT=t.OVERLAY_PLACEMENT_LEFT_BOTTOM=t.OVERLAY_PLACEMENT_LEFT_TOP=t.OVERLAY_PLACEMENT_LEFT=t.OVERLAY_PLACEMENT_BOTTOM_RIGHT=t.OVERLAY_PLACEMENT_BOTTOM_LEFT=t.OVERLAY_PLACEMENT_BOTTOM=t.OVERLAY_PLACEMENT_TOP_RIGHT=t.OVERLAY_PLACEMENT_TOP_LEFT=t.OVERLAY_PLACEMENT_TOP=void 0,t.OVERLAY_PLACEMENT_TOP="top",t.OVERLAY_PLACEMENT_TOP_LEFT="topLeft",t.OVERLAY_PLACEMENT_TOP_RIGHT="topRight",t.OVERLAY_PLACEMENT_BOTTOM="bottom",t.OVERLAY_PLACEMENT_BOTTOM_LEFT="bottomLeft",t.OVERLAY_PLACEMENT_BOTTOM_RIGHT="bottomRight",t.OVERLAY_PLACEMENT_LEFT="left",t.OVERLAY_PLACEMENT_LEFT_TOP="leftTop",t.OVERLAY_PLACEMENT_LEFT_BOTTOM="leftBottom",t.OVERLAY_PLACEMENT_RIGHT="right",t.OVERLAY_PLACEMENT_RIGHT_TOP="rightTop",t.OVERLAY_PLACEMENT_RIGHT_BOTTOM="rightBottom"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOW_PRIORITY=t.MEDIUM_PRIORITY=t.HIGH_PRIORITY=void 0,t.HIGH_PRIORITY=1e3,t.MEDIUM_PRIORITY=100,t.LOW_PRIORITY=10},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCENE_MOBILE_APP=void 0,t.SCENE_MOBILE_APP="app"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_BOX_NODE_NAME=t.TABLE_INNER_WRAP_NODE_NAME=t.TABLE_WRAP_NODE_NAME=void 0,t.TABLE_WRAP_NODE_NAME="ne-table-wrap",t.TABLE_INNER_WRAP_NODE_NAME="ne-table-inner-wrap",t.TABLE_BOX_NODE_NAME="ne-table-box"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THEME_DARK=t.THEME_LIGHT=void 0,t.THEME_LIGHT="light",t.THEME_DARK="dark"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UI_TYPE=t.TYPE_SMALL=t.TYPE_NOTE=t.TYPE_SIMPLE=t.TYPE_DEFAULT=void 0,t.TYPE_DEFAULT="default",t.TYPE_SIMPLE="simple",t.TYPE_NOTE="note",t.TYPE_SMALL="small",t.UI_TYPE={DEFAULT:"default",SIMPLE:"simple",NOTE:"note",SMALL:"small"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIEWER_BODY_SELECTOR=t.VIEWER_ROOT_SELECTOR=t.VIEWER_MODE=void 0,function(e){e.Normal="normal",e.Simple="simple",e.Present="present"}(t.VIEWER_MODE||(t.VIEWER_MODE={})),t.VIEWER_ROOT_SELECTOR=".ne-viewer",t.VIEWER_BODY_SELECTOR=".ne-viewer-body"},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(4204)),i=function(){function e(e,t){void 0===t&&(t={}),Object.defineProperty(this,"_destroyed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_domRootNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_boxNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_drawer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"boxRect",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._domRootNode=e,this._boxNode=document.createElement("div"),this._boxNode.className="ne-drawer-box";e.nextSibling?e.parentNode.insertBefore(this._boxNode,e.nextSibling):e.parentNode.appendChild(this._boxNode),this._drawer=new a.default({container:this._boxNode,hPadding:"number"==typeof t.hPadding?t.hPadding:60}),this.refresh()}return Object.defineProperty(e.prototype,"insideViewport",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e>=this._drawer.options.hPadding&&e<=this._drawer.options.hPadding+this._drawer.options.limitWidth}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;this._destroyed=!0,this._drawer.destroy(),null===(e=this._boxNode)||void 0===e||e.remove(),this._boxNode=null}}),Object.defineProperty(e.prototype,"refresh",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._destroyed||(this.boxRect=this._boxNode.getBoundingClientRect())}}),Object.defineProperty(e.prototype,"drawRanges",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this;if(this._destroyed||!e.length)return[];var o=this.getDrawRanges(e,r);return o.forEach((function(e){e&&(n._drawRects(e.rects,t),e.style=t)})),o}}),Object.defineProperty(e.prototype,"drawRects",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._destroyed||this._drawRects(e,t)}}),Object.defineProperty(e.prototype,"clearRects",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this._destroyed||e.forEach((function(e){t._drawer.clearRect(e)}))}}),Object.defineProperty(e.prototype,"clearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._destroyed||this._drawer.clear()}}),Object.defineProperty(e.prototype,"_drawRects",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;e.forEach((function(e){r._drawer.draw("Rect",n(n({},e),{fill:t&&t.fill,stroke:t&&t.stroke}))}))}}),Object.defineProperty(e.prototype,"getDrawRanges",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;return this.refresh(),e.map((function(e){var n=r.getRectByViewRange(e,t);if(!n||0===n.length)return null;var o=n[n.length-1].bottom-n[0].top;return{viewRange:e,rects:r.parseRectsCoordinate(n),viewHeight:o}})).filter((function(e){return!!e}))}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._destroyed||this._drawer.clear()}}),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRectsByRange=t.sliceTextNodeByLine=t.getRectsByTextNode=void 0;var n=r(3454);function o(e,t,r){(0,n.assert)(t<r,"framework/public/src/drawer/rect-calc.ts:37");var i=[],u=a(e,t),l=a(e,r);if(u.top===l.top||t+1===r)return i.push({textNode:e,startOffset:t,endOffset:r,top:l.top}),i;var c,s=Math.ceil((r+t)/2),f=a(e,s);f.top===u.top?i.push({textNode:e,startOffset:t,endOffset:s,top:u.top}):i=i.concat(o(e,t,s)),f.top!==l.top?i=i.concat(o(e,s,r)):i.push({textNode:e,startOffset:s,endOffset:r,top:f.top});var d=[];return i.forEach((function(e){void 0===c||c!==e.top?(d.push(e),c=e.top):d[d.length-1].endOffset=e.endOffset})),d}function a(e,t){var r=document.createRange();return r.setStart(e,t),r.collapse(!0),r.getBoundingClientRect()}t.getRectsByTextNode=function(e,t,r){return o(e,t,r).map((function(e){return function(e,t,r){var n=document.createRange();return n.setStart(e,t),n.setEnd(e,r),n.getBoundingClientRect()}(e.textNode,e.startOffset,e.endOffset)}))},t.sliceTextNodeByLine=o,t.getRectsByRange=function(e){var t=e.startContainer,r=e.startOffset,n=e.endContainer,o=e.endOffset,i=document.createRange();i.setStart(t,r),i.setEnd(n,o);var u,l=i.getBoundingClientRect(),c=null,s={x:l.x,y:l.y,top:l.top,left:l.left,width:l.width,height:l.height,right:l.right,bottom:l.bottom};if(t.nodeType===Node.TEXT_NODE){var f=a(t,r);(c={top:f.top,left:Math.max(s.left,f.left),width:s.width-f.left+s.left,height:f.height}).x=c.left,c.y=c.top,c.bottom=c.top+c.height,c.right=c.left+c.width,s.height=(s.bottom||0)-c.bottom,s.top=c.bottom,s.y=s.top}if(n.nodeType===Node.TEXT_NODE){var d=a(n,o);u={top:d.top,left:s.left,width:d.left-s.left,height:d.height}}else{var p=n.getBoundingClientRect();u={top:p.top,left:s.left,width:p.left-s.left,height:p.height}}u.x=u.left,u.y=u.top,u.bottom=u.top+u.height,u.right=u.left+u.width,s.height=u.top-s.top,s.bottom=u.top;var h=[s];return c&&h.unshift(c),h.push(u),h}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileTypeEnum=void 0,function(e){e.audio="audio",e.localDoc="localDoc",e.file="file",e.image="image",e.video="video",e.all="*"}(t.fileTypeEnum||(t.fileTypeEnum={}))},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_$inited",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"sidebarRootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"closed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),t}return o(t,e),Object.defineProperty(t.prototype,"close",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.closed=!0,this.removeAllListeners()}}),Object.defineProperty(t.prototype,"isPermanent",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),t}(a(r(3320)).default);t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_TOOLBAR=t.MOBILE_TOOLBAR=t.CODEBLOCK_TOOLBAR=t.DEFAULT_TOOLBAR=void 0,t.DEFAULT_TOOLBAR=["cardSelect","|","undo","redo","formatPainter","clearFormat","|","style","fontsize","bold","italic","strikethrough","underline","mixedTextStyle","|","color","bgColor","|","alignment","unorderedList","orderedList","indent","lineHeight","|","taskList","link","quote","hr","|","search","translate","toc","materialLibrary"],t.CODEBLOCK_TOOLBAR=["codeblock-clear","codeblock-bold","codeblock-italic","codeblock-strikethrough","codeblock-underline","|","codeblock-color","codeblock-background"],t.MOBILE_TOOLBAR=["cardSelect","undo","redo","style","bold","taskList","orderedList","unorderedList","link","quote","alignment","indent"],t.TABLE_TOOLBAR=["cardSelect","|","undo","redo","formatPainter","clearFormat","|","style","fontsize","bold","italic","strikethrough","underline","mixedTextStyle","|","color","bgColor","tableCellBgColor","tableBorderVisible","|","alignment","tableVerticalAlign","tableMergeCell","|","unorderedList","orderedList","indent","lineHeight","|","taskList","link","quote","hr","|","search","translate","toc","materialLibrary"]},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3463),c=a(r(4547)),s=a(r(4548)),f=a(r(4549)),d=r(3718),p=a(r(4550)),h=a(r(4551)),y=a(r(4552)),b=a(r(4553)),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerAttr(d.pluginRegister.attr.bgColor,c.default)}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.kernel,t=e.getService(u.IHTMLKernelService.ID),r=e.getService(u.IHTMLKernelService.ID),n=e.getService(l.ILakeKernelService.ID),o=e.getService(l.ILakeKernelService.ID);t&&t.registerHTMLStyleReader(p.default.StyleNames,new p.default),r&&r.registerAttrHTMLWriter(y.default.AttrNames,new y.default),n&&n.registerLakeStyleReader(h.default.StyleNames,new h.default),o&&o.registerLakeAttrWriter(b.default.AttrNames,new b.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:d.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[s.default,f.default]}),t}(i.KernelPlugin);t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={targets:[r(3453).Category.Text],values:function(){return!0}};t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3715)),u=r(3718),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.attr.bgColor}),t}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.bgColor}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3715)),u=r(3718),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.attr.bgColor}),t}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return e.prototype.execute.call(this,t,null)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.clearBgColor}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3760)),u=r(3915),l=r(3718),c={table:!0,tbody:!0,thead:!0,tfoot:!0,tr:!0,th:!0,td:!0},s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=n.name;r&&"rgb(255, 255, 255)"!==r&&"#fff"!==r&&(u.BROWSER_COLOR_NAMES[null==r?void 0:r.toLowerCase()]&&(r=u.BROWSER_COLOR_NAMES[r.toLowerCase()]),(r.startsWith("rgb(")||r.startsWith("#")&&(7===r.length||4===r.length))&&(c[o]?e.addAttr("cellBgColor",r):e.addAttr(l.pluginRegister.attr.bgColor,r)))}}),Object.defineProperty(t,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:["background-color","background"]}),t}(i.default);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3915),o=r(3718),a=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){e.setAttr(o.pluginRegister.attr.bgColor,r)}}),Object.defineProperty(e,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:n.LakeStyle}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3562)),u=r(3915),l=r(3718),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){r&&e.addStyle(u.HtmlStyle,r)}}),Object.defineProperty(t,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[l.pluginRegister.attr.bgColor]}),t}(i.default);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3915),o=r(3718),a=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){e.setStyle(n.LakeStyle,r)}}),Object.defineProperty(e,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[o.pluginRegister.attr.bgColor]}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4555)),l=r(4206),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u.default]}),t}(i.KernelPlugin);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(4206),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return a.SelectionUtil.isUnbreakable(t)?a.Command.UNAVAILABLE:a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob();if(this.getState(t)===a.Command.UNAVAILABLE)return e.cancelJob(t),!1;var r=t.getSelection();r.collapsed||(r=a.SelectionUtil.deleteContent(t,r)),i.assert.fatal(r.collapsed,"plugins/break-line/src/kernel/break-line-command.ts:37");var n=a.PositionUtil.breakLine(t,r.firstRange.start);return t.setSelection([t.newRange(n)]),e.commitJob(t),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.breakLine}),t}(u.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3463),l=a(r(4557)),c=a(r(4558)),s=a(r(4559)),f=a(r(4560)),d=a(r(4561)),p=a(r(4562)),h=a(r(4194)),y=a(r(4563)),b=r(3600),m=a(r(4564)),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;null===(t=e.getService(u.ILakeKernelService.ID))||void 0===t||t.registerLakeNodeWriter(m.default.NodeNames,new m.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:b.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[y.default,p.default,d.default,f.default,s.default,h.default,c.default,l.default]}),t}(i.KernelPlugin);t.default=v},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3454),l=r(3457),c=r(3600),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o,l=e.newJob(),c=l.getNodesByName(t);u.assert.fatal(Array.isArray(c),"plugins/card/src/kernel/commands/card-batch-apply-command.ts:13");try{for(var s=i(c),f=s.next();!f.done;f=s.next()){var d=f.value;d&&d.isConnected&&d.isCardNode()&&l.setAttribute(d,"value",a(a({},d.attrs.value),r))}}catch(e){n={error:e}}finally{try{f&&!f.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return e.commitJob(l),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.cardBatchApply}),t}(l.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3457),i=r(3465),u=r(3600),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return i.COMMAND_NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!!t&&e.getNodesByName(t).some((function(e){return e.isConnected}))}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.getValue(e.job,t)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.cardIsExist}),t}(a.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3457),i=r(3465),u=r(3600),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return i.COMMAND_NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.getNodeById(t);return r&&r.isConnected&&r.isCardNode()?r.attrs.value:null}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.cardValue}),t}(a.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3457),l=r(3600),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob(),n=r.getNodeById(t),o=r.getSelection();if(n&&n.hasCategory(a.Category.Card)&&1===o.rangeCount){var u=r.newSelection(i.Range.selectNodeContents(n));u=i.SelectionUtil.deleteContent(r,u,!0,!0),r.setSelection(u),e.commitJob(r)}else e.cancelJob(r)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.deleteCard}),t}(u.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3457),i=r(4203),u=r(3600),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=i.FOCUS_CARD);var n=e.newJob(),o=n.getNodeById(t);return o&&o.isConnected&&o.isCardNode()?(r===i.FOCUS_CARD?n.setSelection(n.newSelection(n.newRange(n.newPosition(o,0)))):r===i.FOCUS_CARD_AFTER?n.setSelection(n.newSelection(n.newRange(n.newPosition(o.parentNode,o.offset+1)))):r===i.FOCUS_CARD_BEFORE&&n.setSelection(n.newSelection(n.newRange(n.newPosition(o.parentNode,o.offset)))),e.commitJob(n),!0):(e.cancelJob(n),!1)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.focusCard}),t}(a.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(4193),i=r(3600),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){return void 0===n&&(n=!1),this._execute(e,t,r,n)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:i.pluginRegister.command.insertCard}),t}(a._InsertCardCommand);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3454),l=r(3457),c=r(3600),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){u.assert.fatal("boolean"==typeof t,"plugins/card/src/kernel/commands/set-card-value-command.ts:17");var o=e.newJob(t?i.JobMode.Auto:i.JobMode.User),l=o.getNodeById(r);return l&&l.isConnected&&l.hasCategory(a.Category.Card)?(o.setAttribute(l,"value",n),e.commitJob(o),!0):(e.cancelJob(o),!1)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.setCardValue}),t}(l.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setVirtual((function(){})),e._handleAppend=function(){}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["hole","rootCardHole"]}),t}(r(3499).LakeNodeWriter);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4566)),l=r(4207),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u.default]}),t}(i.KernelPlugin);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3465),l=r(4567),c=r(4207),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return a.SelectionUtil.isInCard(t)||a.SelectionUtil.isInHole(t)?u.COMMAND_UNAVAILABLE:u.COMMAND_NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob(),r=(0,l.clearFormat)(t,t.getSelection());return t.setSelection(r),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.clearFormat}),t}(i.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearFormat=void 0;var n=r(3453),o=r(3454);function a(e,t){return n.SelectionUtil.replaceBlockNode(e,t,null,!1)}t.clearFormat=function(e,t){if(t.isCardSelection)return t;if(t.isTableSelection)return a(e,t);var r=t.firstRange;if(r.collapsed){if(!n.NodeUtil.closest(r.start.node,n.Category.Block)){o.assert.fatal(r.start.node.hasCategory([n.Category.Root,n.Category.LikeRoot]),"plugins/clear-format/src/kernel/helper/clear-format.ts:26");var i=n.PositionUtil.makeSureAtInput(e,r.start);return a(e,e.newSelection(e.newRange(i)))}return a(e,t)}var u=r.start.node,l=r.end.node,c=n.NodeUtil.closest(u,n.Category.Block),s=n.NodeUtil.closest(l,n.Category.Block);return c&&c===s?function(e,t){var r=n.RangeUtil.splitTextContent(e,t.firstRange);return n.RangeUtil.walkRange(r,(function(t){if(t.isTextNode()||t.hasCategory(n.Category.InlineCard)){var r=t.attrs;Object.keys(r).forEach((function(r){e.removeAttribute(t,r)}))}})),t.cloneByRange(r)}(e,t):a(e,t)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4569)),l=a(r(4570)),c=a(r(4571)),s=r(3916),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u.default,l.default,c.default]}),t}(i.KernelPlugin);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3457),l=r(3914),c=r(4017),s=r(3916),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return t.isCardSelection?i.Command.NOT_EXECUTED:t.collapsed?i.Command.UNAVAILABLE:i.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.job;if(t){var o=n.newPosition(t.start.node,t.start.offset),a=n.newPosition(t.end.node,t.end.offset);return this._copyBySelection(n,n.newSelection(n.newRange(o,a)),r)}return this.getState(n)===i.Command.UNAVAILABLE?null:this._copyBySelection(n,n.getSelection(),r)}}),Object.defineProperty(t.prototype,"_copyBySelection",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){t.isCardSelection||(t=t.cloneByRange(t.ranges.map((function(t){return i.RangeUtil.enlargeRangeContainsBlockNode(e,t)}))));var n=i.SelectionUtil.extractINode(e,(0,c.reduceSelection)(e,t));if(!n)return{};var o=this.kernel,u=o.getSupportedWriterTypes(),s={};return u.forEach((function(e){if("text/markdown"!==e&&"text/aone"!==e){var t=o.writeData(e,n,a(a({mode:l.HTML_WRITER_MODE.INLINE},r),{since:"copy"}));s[e]="string"==typeof t?t:JSON.stringify(t)}})),s}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.copy}),t}(u.KernelAbstractCommand);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3914),l=r(4017),c=r(3916),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return t.isCardSelection?a.Command.NOT_EXECUTED:t.collapsed?a.Command.UNAVAILABLE:a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob();if(this.getState(t)===a.Command.UNAVAILABLE)return!1;var r=this._extractINode(t);if(!r)return null;var n=this.kernel,o=n.getSupportedWriterTypes(),i={};o.forEach((function(e){if("text/markdown"!==e&&"text/aone"!==e){var t=n.writeData(e,r,{since:"copy",mode:u.HTML_WRITER_MODE.INLINE});i[e]="string"==typeof t?t:JSON.stringify(t)}}));var l=a.SelectionUtil.deleteContent(t,t.getSelection());return t.setSelection(l),e.commitJob(t),i}}),Object.defineProperty(t.prototype,"_extractINode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r=e.getSelection();return t=r.isCardSelection?r:r.cloneByRange(r.ranges.map((function(t){return a.RangeUtil.enlargeRangeContainsBlockNode(e,t)}))),a.SelectionUtil.extractINode(e,(0,l.reduceSelection)(e,t))}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.cut}),t}(i.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3633),c=r(3916),s=["text/ne-inode","text/lake","text/html","text/plain","Files"],f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=!1),i.assert.fatal(t.types.indexOf,"payload.types is not array like","plugins/clipboard/src/kernel/commands/paste.ts:34"),i.assert.fatal("function"==typeof t.getData,"payload.getData is not a function","plugins/clipboard/src/kernel/commands/paste.ts:35");for(var o=e.newJob(),u=this.kernel,c=u.getSupportedReaderTypes(),f=t.types,d=null,p=0,h=s.length;p<h;p++){var y=s[p],b=t.getData(y);if(b&&-1!==f.indexOf(y)&&-1!==c.indexOf(y)){d=u.readData(y,b,{from:l.SOURCE_FROM_PASTE,clipboardPayload:t,self:r,forceText:n});break}}return!!d&&(o.setSelection(a.SelectionUtil.insertINode(o,o.getSelection(),d)),e.commitJob(o),!0)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.paste}),t}(u.KernelAbstractCommand);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},u=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=r(3453),s=r(3466),f=r(3463),d=r(3519),p=l(r(3851)),h=r(4573),y=l(r(4574)),b=l(r(4575)),m=r(4208),v=l(r(4576)),g=l(r(4577)),_=l(r(4578)),w=r(3636),O=r(4588),E=["`","·"],P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_handleMarkdownMatch",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){var r=e.createElement("code");c.RangeUtil.wrapInlineNode(e,t,r),e.setSelection([e.newRange(e.newPosition(r.parentNode,r.offset+1))])}}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerElement(y.default),e.registerAttr(h.CodeAttrSchema),this._watchChange()}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,r,n=this.kernel,o=n.getService(f.ILakeKernelService.ID);o&&o.registerLakeNodeReader(v.default.NodeNames,new v.default);var i=n.getService(f.ILakeKernelService.ID);i&&i.registerLakeNodeWriter(_.default.NodeNames,new _.default);var u=n.getService(s.IHTMLKernelService.ID);u&&u.registerNodeHTMLWriter(g.default.NodeNames,new g.default);var l=n.getService(d.IMarkdownKernelService.ID);if(null===(r=n.getService(w.IMarkdownService.ID))||void 0===r||r.registerMarkdownWriter("code",new O.MarkdownCodeWriter),l)try{for(var c=a(E),h=c.next();!h.done;h=c.next()){var y=h.value;l.registerMarkdownMatcher(d.TriggerType.whiteSpace,new p.default(this.editing,y,this._handleMarkdownMatch))}}catch(t){e={error:t}}finally{try{h&&!h.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}}}),Object.defineProperty(t.prototype,"_watchChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.editing.on("nodechange",(function(t){if("attribute"===t.type&&"fontsize"===t.attrName){var r=t.node.closest("code");r&&e._updateContentFontsize(t.job,r)}}))}}),Object.defineProperty(t.prototype,"_updateContentFontsize",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=j(t.children);r>0?e.setAttribute(t,"contentFontsize",r):e.removeAttribute(t,"contentFontsize")}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:m.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[b.default]}),t}(c.KernelPlugin);function j(e){return e.length?Math.max.apply(Math,u([],i(e.map((function(e){return e.isTextNode()?e.attrs.fontsize||0:e.isElement()?j(e.children):0}))),!1)):0}t.default=P},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeAttrSchema=void 0;var n=r(3852);t.CodeAttrSchema={contentFontsize:{targets:[n.LakeNodeName],values:function(e){if("number"!=typeof e)return!1;if(!Number.isFinite(e))return!1;return e>=0}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o={code:{parents:[n.Category.Block],category:[n.Category.Inline,n.Category.InlineBox,n.Category.TextContainer],children:[n.Category.Text,n.Category.Inline]}};t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3454),l=a(r(4011)),c=r(3465),s=r(3852),f=r(4208),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_nodeName",{enumerable:!0,configurable:!0,writable:!0,value:s.HtmlNodeName}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=t.getSelection();if(i.SelectionUtil.isUnbreakable(r))return c.COMMAND_UNAVAILABLE;var n=r.firstRange.commonAncestorContainer;if(i.NodeUtil.closest(n,"code"))return c.COMMAND_EXECUTED;if(!r.isCollapsed){var o=r.firstRange,a=i.RangeUtil.shrinkRange(t,o,!0);return i.NodeUtil.closest(a.commonAncestorContainer,"code")?c.COMMAND_EXECUTED:e.prototype.getState.call(this,t)}var u=r.firstRange;if(!u.collapsed)return c.COMMAND_UNAVAILABLE;var l=u.start.node,s=l.isTextNode()?l.parentNode:l;return(null==s?void 0:s.hasCategory([i.Category.Root,i.Category.LikeRoot]))?t.acceptNode(t.defaultElementName,"code")?c.COMMAND_NOT_EXECUTED:c.COMMAND_UNAVAILABLE:s&&t.acceptNode(s.nodeName,"code")?c.COMMAND_NOT_EXECUTED:c.COMMAND_UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob();if(this.getState(r)===c.COMMAND_UNAVAILABLE)return e.cancelJob(r),!1;var n,o=r.getSelection();n=o.collapsed?o.firstRange:i.RangeUtil.shrinkRange(r,o.firstRange,!0);var a=i.NodeUtil.closest(n.commonAncestorContainer,"code");if(a){var l=i.RangeUtil.unwrapInlineNode(r,n,a);return r.setSelection([l]),e.commitJob(r),!0}var s=r.createElement("code");if(o.collapsed){var f=o.firstRange;if(f.start.node.hasCategory([i.Category.Root,i.Category.LikeRoot])){var d=r.createElement(r.defaultElementName);r.insertNodeByPosition(f.start,d),f=r.newRange(r.newPosition(d,0))}var p=r.createInheritTextNode(t||"",f.start);r.appendChild(s,p),i.PositionUtil.insertInlineNode(r,f.start,s),r.setSelection(o.cloneByRange(r.newRange(r.newPosition(p,p.dataLength))))}else i.RangeUtil.wrapInlineNode(r,o.firstRange,s),u.assert.fatal(s.isConnected,"plugins/code/src/kernel/commands/code-command.ts:166"),r.setSelection(o.cloneByRange(i.Range.selectNodeContents(s)));return e.commitJob(r),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:f.pluginRegister.command.code}),t}(l.default);t.default=d},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3458)),a=r(3852),i=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.setNode(o.default.createElement("code")),!1}}),Object.defineProperty(e,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[a.HtmlNodeName]}),e}();t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3470)),u=r(3852),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;e.isInlineMode()&&(t={fontFamily:"SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace",backgroundColor:"rgba(0, 0, 0, 0.06)",border:"1px solid rgba(0, 0, 0, 0.08)",borderRadius:"2px",padding:"0px 2px"}),e.setNode(e.createElement(u.HtmlNodeName,{className:"ne-code",style:t}))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[u.HtmlNodeName]}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3499),i=r(3852),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setNode(e.createElement(i.LakeNodeName))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[i.LakeNodeName]}),t}(a.LakeNodeWriter);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._kernel=t,r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._kernel.readData("text/markdown",e,t)}}),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.document.getINode(t);return this._kernel.writeData("text/markdown",r,t)}}),t}(r(3453).DataSource);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4211),o=r(4584),a=function(){function e(){Object.defineProperty(this,"readers",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var a=(0,n.markdownToTree)(t.trim());return(0,o.transform)(e,this,a,r)}}),Object.defineProperty(e.prototype,"registerMarkdownReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.readers.get(e);Array.isArray(r)?(r.push(t),this.readers.set(e,r)):this.readers.set(e,[t])}}),Object.defineProperty(e.prototype,"getMarkdownReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.readers.get(e)}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.readers.clear()}}),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lexer=void 0;var n=r(4582),o=r(4212),a=r(4583);function i(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function u(e){var t,r,n="",o=e.length;for(t=0;t<o;t++)r=e.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),n+="&#"+r+";";return n}var l=function(){function e(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||o.defaults,this.options.tokenizer=this.options.tokenizer||new n.Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var t={block:a.block.normal,inline:a.inline.normal};this.options.pedantic?(t.block=a.block.pedantic,t.inline=a.inline.pedantic):this.options.gfm&&(t.block=a.block.gfm,this.options.breaks?t.inline=a.inline.breaks:t.inline=a.inline.gfm),this.tokenizer.rules=t}return Object.defineProperty(e,"rules",{get:function(){return{block:a.block,inline:a.inline}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"lex",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return new e(r).lex(t)}}),Object.defineProperty(e,"lexInline",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return new e(r).inlineTokens(t)}}),Object.defineProperty(e.prototype,"lex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}}),Object.defineProperty(e.prototype,"blockTokens",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,a,i=this;void 0===t&&(t=[]),e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(function(e,t,r){return t+"    ".repeat(r.length)}));for(var u=function(){if(l.options.extensions&&l.options.extensions.block&&l.options.extensions.block.some((function(n){return!!(r=n.call({lexer:i},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)})))return"continue";if(r=l.tokenizer.space(e))return e=e.substring(r.raw.length),1===r.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(r),"continue";if(r=l.tokenizer.code(e))return e=e.substring(r.raw.length),!(n=t[t.length-1])||"paragraph"!==n.type&&"text"!==n.type?t.push(r):(n.raw+="\n"+r.raw,n.text+="\n"+r.text,l.inlineQueue[l.inlineQueue.length-1].src=n.text),"continue";if(r=l.tokenizer.alertFlag(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=l.tokenizer.fences(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=l.tokenizer.heading(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=l.tokenizer.hr(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=l.tokenizer.blockquote(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=l.tokenizer.list(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=l.tokenizer.math(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=l.tokenizer.html(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=l.tokenizer.def(e))return e=e.substring(r.raw.length),!(n=t[t.length-1])||"paragraph"!==n.type&&"text"!==n.type?l.tokens.links[r.tag]||(l.tokens.links[r.tag]={href:r.href,title:r.title}):(n.raw+="\n"+r.raw,n.text+="\n"+r.raw,l.inlineQueue[l.inlineQueue.length-1].src=n.text),"continue";if(r=l.tokenizer.table(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=l.tokenizer.lheading(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(o=e,l.options.extensions&&l.options.extensions.startBlock){var u,c=1/0,s=e.slice(1);l.options.extensions.startBlock.forEach((function(e){"number"==typeof(u=e.call({lexer:this},s))&&u>=0&&(c=Math.min(c,u))})),c<1/0&&c>=0&&(o=e.substring(0,c+1))}if(l.state.top&&(r=l.tokenizer.paragraph(o)))return n=t[t.length-1],a&&"paragraph"===n.type?(n.raw+="\n"+r.raw,n.text+="\n"+r.text,l.inlineQueue.pop(),l.inlineQueue[l.inlineQueue.length-1].src=n.text):t.push(r),a=o.length!==e.length,e=e.substring(r.raw.length),"continue";if(r=l.tokenizer.text(e))return e=e.substring(r.raw.length),(n=t[t.length-1])&&"text"===n.type?(n.raw+="\n"+r.raw,n.text+="\n"+r.text,l.inlineQueue.pop(),l.inlineQueue[l.inlineQueue.length-1].src=n.text):t.push(r),"continue";if(e){var f="Infinite loop on byte: "+e.charCodeAt(0);if(l.options.silent)return console.error(f),"break";throw new Error(f)}},l=this;e;){if("break"===u())break}return this.state.top=!0,t}}),Object.defineProperty(e.prototype,"inline",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return void 0===t&&(t=[]),this.inlineQueue.push({src:e,tokens:t}),t}}),Object.defineProperty(e.prototype,"inlineTokens",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,a=this;void 0===t&&(t=[]);var l,c,s,f=e;if(this.tokens.links){var d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(l=this.tokenizer.rules.inline.reflinkSearch.exec(f));)d.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(f=f.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(l=this.tokenizer.rules.inline.blockSkip.exec(f));)f=f.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(l=this.tokenizer.rules.inline.anyPunctuation.exec(f));)f=f.slice(0,l.index)+"++"+f.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(var p=function(){if(c||(s=""),c=!1,h.options.extensions&&h.options.extensions.inline&&h.options.extensions.inline.some((function(n){return!!(r=n.call({lexer:a},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)})))return"continue";if(r=h.tokenizer.escape(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=h.tokenizer.tag(e))return e=e.substring(r.raw.length),(n=t[t.length-1])&&"text"===r.type&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r),"continue";if(r=h.tokenizer.link(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=h.tokenizer.reflink(e,h.tokens.links))return e=e.substring(r.raw.length),(n=t[t.length-1])&&"text"===r.type&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r),"continue";if(r=h.tokenizer.emStrong(e,f,s))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=h.tokenizer.codespan(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=h.tokenizer.inlineMath(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=h.tokenizer.br(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=h.tokenizer.del(e))return e=e.substring(r.raw.length),t.push(r),"continue";if(r=h.tokenizer.autolink(e,u))return e=e.substring(r.raw.length),t.push(r),"continue";if(!h.state.inLink&&(r=h.tokenizer.url(e,u)))return e=e.substring(r.raw.length),t.push(r),"continue";if(o=e,h.options.extensions&&h.options.extensions.startInline){var l,d=1/0,p=e.slice(1);h.options.extensions.startInline.forEach((function(e){"number"==typeof(l=e.call({lexer:this},p))&&l>=0&&(d=Math.min(d,l))})),d<1/0&&d>=0&&(o=e.substring(0,d+1))}if(r=h.tokenizer.inlineText(o,i))return e=e.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(s=r.raw.slice(-1)),c=!0,(n=t[t.length-1])&&"text"===n.type?(n.raw+=r.raw,n.text+=r.text):t.push(r),"continue";if(e){var y="Infinite loop on byte: "+e.charCodeAt(0);if(h.options.silent)return console.error(y),"break";throw new Error(y)}},h=this;e;){if("break"===p())break}return t}}),e}();t.Lexer=l},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.Tokenizer=void 0;var o=r(4212),a=r(4213);function i(e,t,r,n){var o=t.href,i=t.title?(0,a.escape)(t.title):null,u=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){n.state.inLink=!0;var l={type:"link",raw:r,href:o,title:i,text:u,tokens:n.inlineTokens(u)};return n.state.inLink=!1,l}return{type:"image",raw:r,href:o,title:i,text:(0,a.escape)(u)}}var u=function(){function e(e){this.options=e||o.defaults}return Object.defineProperty(e.prototype,"space",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}}),Object.defineProperty(e.prototype,"code",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.code.exec(e);if(t){var r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:(0,a.rtrim)(r,"\n")}}}}),Object.defineProperty(e.prototype,"fences",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.fences.exec(e);if(t){var r=t[0],o=function(e,t){var r=e.match(/^(\s+)(?:```)/);if(null===r)return t;var o=r[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:n(t,1)[0].length>=o.length?e.slice(o.length):e})).join("\n")}(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:o}}}}),Object.defineProperty(e.prototype,"alertFlag",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.alertFlag.exec(e);if(t){var r=t[0];return{type:"alert",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline._escapes,"$1"):t[2],text:r}}}}),Object.defineProperty(e.prototype,"heading",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.heading.exec(e);if(t){var r=t[2].trim();if(/#$/.test(r)){var n=(0,a.rtrim)(r,"#");this.options.pedantic?r=n.trim():n&&!/ $/.test(n)||(r=n.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}}),Object.defineProperty(e.prototype,"hr",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}}),Object.defineProperty(e.prototype,"blockquote",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.blockquote.exec(e);if(t){var r=t[0].replace(/^ *>[ \t]?/gm,""),n=this.lexer.state.top;this.lexer.state.top=!0;var o=this.lexer.blockTokens(r);return this.lexer.state.top=n,{type:"blockquote",raw:t[0],tokens:o,text:r}}}}),Object.defineProperty(e.prototype,"list",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.list.exec(e);if(t){var r=void 0,n=void 0,o=void 0,a=void 0,i=void 0,u=void 0,l=void 0,c=void 0,s=void 0,f=void 0,d=void 0,p=void 0,h=t[1].trim(),y=h.length>1,b={type:"list",raw:"",ordered:y,start:y?+h.slice(0,-1):"",loose:!1,items:[]};h=y?"\\d{1,9}\\".concat(h.slice(-1)):"\\".concat(h),this.options.pedantic&&(h=y?h:"[*+-]");for(var m=new RegExp("^( {0,3}".concat(h,")((?:[\t ][^\\n]*)?(?:\\n|$))"));e&&(p=!1,t=m.exec(e))&&!this.rules.block.hr.test(e);){if(r=t[0],e=e.substring(r.length),c=t[2].split("\n",1)[0].replace(/^\t+/,(function(e){return" ".repeat(3*e.length)})),s=e.split("\n",1)[0],this.options.pedantic?(a=2,d=c.trimLeft()):(a=(a=t[2].search(/[^ ]/))>4?1:a,d=c.slice(a),a+=t[1].length),u=!1,!c&&/^ *$/.test(s)&&(r+=s+"\n",e=e.substring(s.length+1),p=!0),!p)for(var v=new RegExp("^ {0,".concat(Math.min(3,a-1),"}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))")),g=new RegExp("^ {0,".concat(Math.min(3,a-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),_=new RegExp("^ {0,".concat(Math.min(3,a-1),"}(?:```|~~~)")),w=new RegExp("^ {0,".concat(Math.min(3,a-1),"}#"));e&&(s=f=e.split("\n",1)[0],this.options.pedantic&&(s=s.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!_.test(s))&&!w.test(s)&&!v.test(s)&&!g.test(e);){if(s.search(/[^ ]/)>=a||!s.trim())d+="\n"+s.slice(a);else{if(u)break;if(c.search(/[^ ]/)>=4)break;if(_.test(c))break;if(w.test(c))break;if(g.test(c))break;d+="\n"+s}u||s.trim()||(u=!0),r+=f+"\n",e=e.substring(f.length+1),c=s.slice(a)}b.loose||(l?b.loose=!0:/\n *\n *$/.test(r)&&(l=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(d))&&(o="[ ] "!==n[0],d=d.replace(/^\[[ xX]\] +/,"")),b.items.push({type:"list_item",raw:r,task:!!n,checked:o,loose:!1,text:d}),b.raw+=r}b.items[b.items.length-1].raw=r.trimRight(),b.items[b.items.length-1].text=d.trimRight(),b.raw=b.raw.trimRight();var O=b.items.length;for(i=0;i<O;i++)if(this.lexer.state.top=!1,b.items[i].tokens=this.lexer.blockTokens(b.items[i].text,[]),!b.loose){var E=b.items[i].tokens.filter((function(e){return"space"===e.type})),P=E.length>0&&E.some((function(e){return/\n.*\n/.test(e.raw)}));b.loose=P}if(b.loose)for(i=0;i<O;i++)b.items[i].loose=!0;return b}}}),Object.defineProperty(e.prototype,"html",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.html.exec(e);if(t){var r={type:"html",block:!0,raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){var n=this.options.sanitizer?this.options.sanitizer(t[0]):(0,a.escape)(t[0]);r.type="paragraph",r.text=n,r.tokens=this.lexer.inline(n)}return r}}}),Object.defineProperty(e.prototype,"def",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.def.exec(e);if(t){var r=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline._escapes,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:n,title:o}}}}),Object.defineProperty(e.prototype,"table",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.table.exec(e);if(t){var r={type:"table",header:(0,a.splitCells)(t[1]).map((function(e){return{text:e}})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(r.header.length===r.align.length){r.raw=t[0];var n=r.align.length,o=void 0,i=void 0,u=void 0,l=void 0;for(o=0;o<n;o++)/^ *-+: *$/.test(r.align[o])?r.align[o]="right":/^ *:-+: *$/.test(r.align[o])?r.align[o]="center":/^ *:-+ *$/.test(r.align[o])?r.align[o]="left":r.align[o]=null;for(n=r.rows.length,o=0;o<n;o++)r.rows[o]=(0,a.splitCells)(r.rows[o],r.header.length).map((function(e){return{text:e}}));for(n=r.header.length,i=0;i<n;i++)r.header[i].tokens=this.lexer.inline(r.header[i].text);for(n=r.rows.length,i=0;i<n;i++)for(l=r.rows[i],u=0;u<l.length;u++)l[u].tokens=this.lexer.inline(l[u].text);return r}}}}),Object.defineProperty(e.prototype,"lheading",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}}),Object.defineProperty(e.prototype,"paragraph",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.paragraph.exec(e);if(t){var r="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}}),Object.defineProperty(e.prototype,"text",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}}),Object.defineProperty(e.prototype,"escape",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:(0,a.escape)(t[1])}}}),Object.defineProperty(e.prototype,"tag",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):(0,a.escape)(t[0]):t[0]}}}),Object.defineProperty(e.prototype,"link",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.inline.link.exec(e);if(t){var r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;var n=(0,a.rtrim)(r.slice(0,-1),"\\");if((r.length-n.length)%2==0)return}else{var o=(0,a.findClosingBracket)(t[2],"()");if(o>-1){var u=(0===t[0].indexOf("!")?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,u).trim(),t[3]=""}}var l=t[2],c="";if(this.options.pedantic){var s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(l);s&&(l=s[1],c=s[3])}else c=t[3]?t[3].slice(1,-1):"";return l=l.trim(),/^</.test(l)&&(l=this.options.pedantic&&!/>$/.test(r)?l.slice(1):l.slice(1,-1)),i(t,{href:l?l.replace(this.rules.inline._escapes,"$1"):l,title:c?c.replace(this.rules.inline._escapes,"$1"):c},t[0],this.lexer)}}}),Object.defineProperty(e.prototype,"reflink",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){var n=(r[2]||r[1]).replace(/\s+/g," ");if(!(n=t[n.toLowerCase()])){var o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return i(r,n,r[0],this.lexer)}}}),Object.defineProperty(e.prototype,"emStrong",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r="");var n=this.rules.inline.emStrong.lDelim.exec(e);if(n&&((!n[3]||!r.match(/[\p{L}\p{N}]/u))&&(!(n[1]||n[2]||"")||!r||this.rules.inline.punctuation.exec(r)))){var o=n[0].length-1,a=void 0,i=void 0,u=o,l=0,c="*"===n[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+o);null!=(n=c.exec(t));)if(a=n[1]||n[2]||n[3]||n[4]||n[5]||n[6])if(i=a.length,n[3]||n[4])u+=i;else if(!((n[5]||n[6])&&o%3)||(o+i)%3){if(!((u-=i)>0)){i=Math.min(i,i+u+l);var s=e.slice(0,o+n.index+i+1);if(Math.min(o,i)%2){var f=s.slice(1,-1);return{type:"em",raw:s,text:f,tokens:this.lexer.inlineTokens(f)}}var d=s.slice(2,-2);return{type:"strong",raw:s,text:d,tokens:this.lexer.inlineTokens(d)}}}else l+=i}}}),Object.defineProperty(e.prototype,"math",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.block.math.exec(e);if(t)return{type:"math",raw:t[0],block:!0,text:t[2].trim()}}}),Object.defineProperty(e.prototype,"inlineMath",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.inline.math.exec(e);if(t){var r=t[2],n=/[^ ]/.test(r),o=/^ /.test(r)&&/ $/.test(r);return n&&o&&(r=r.substring(1,r.length-1)),r=(0,a.escape)(r,!0),{type:"math",raw:t[0],block:!1,text:r}}}}),Object.defineProperty(e.prototype,"codespan",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.inline.code.exec(e);if(t){var r=t[2].replace(/\n/g," "),n=/[^ ]/.test(r),o=/^ /.test(r)&&/ $/.test(r);return n&&o&&(r=r.substring(1,r.length-1)),r=(0,a.escape)(r,!0),{type:"codespan",raw:t[0],text:r}}}}),Object.defineProperty(e.prototype,"br",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}}),Object.defineProperty(e.prototype,"del",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}}),Object.defineProperty(e.prototype,"autolink",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.rules.inline.autolink.exec(e);if(r){var n=void 0,o=void 0;return o="@"===r[2]?"mailto:"+(n=(0,a.escape)(this.options.mangle?t(r[1]):r[1])):n=(0,a.escape)(r[1]),{type:"link",raw:r[0],text:n,href:o,tokens:[{type:"text",raw:n,text:n}]}}}}),Object.defineProperty(e.prototype,"url",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;if(r=this.rules.inline.url.exec(e)){var n=void 0,o=void 0;if("@"===r[2])o="mailto:"+(n=(0,a.escape)(this.options.mangle?t(r[0]):r[0]));else{var i=void 0;do{i=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0]}while(i!==r[0]);n=(0,a.escape)(r[0]),o="www."===r[1]?"http://"+r[0]:r[0]}return{type:"link",raw:r[0],text:n,href:o,tokens:[{type:"text",raw:n,text:n}]}}}}),Object.defineProperty(e.prototype,"inlineText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.rules.inline.text.exec(e);if(r){var n=void 0;return n=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):(0,a.escape)(r[0]):r[0]:(0,a.escape)(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:n}}}}),e}();t.Tokenizer=u},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.inline=t.block=void 0;var o=r(4213);t.block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,alertFlag:/^(\:{3}([^:\n]*)(?:\n|$))/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:o.noopTest,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,math:/^ *(\$\$)(?!\$)([\s\S]*?[^\\](\\\\)*)\1 *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|alertFlag|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/},t.block._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,t.block._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,t.block.def=(0,o.edit)(t.block.def).replace("label",t.block._label).replace("title",t.block._title).getRegex(),t.block.bullet=/(?:[*+-]|\d{1,9}[.)])/,t.block.listItemStart=(0,o.edit)(/^( *)(bull) */).replace("bull",t.block.bullet).getRegex(),t.block.list=(0,o.edit)(t.block.list).replace(/bull/g,t.block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+t.block.def.source+")").getRegex(),t.block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul|sub|sup|a",t.block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,t.block.html=(0,o.edit)(t.block.html,"i").replace("comment",t.block._comment).replace("tag",t.block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),t.block.lheading=(0,o.edit)(t.block.lheading).replace(/bull/g,t.block.bullet).getRegex(),t.block.paragraph=(0,o.edit)(t.block._paragraph).replace("hr",t.block.hr).replace("alertFlag",/\:{3}/).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",t.block._tag).getRegex(),t.block.blockquote=(0,o.edit)(t.block.blockquote).replace("paragraph",t.block.paragraph).getRegex(),t.block.normal=n({},t.block),t.block.gfm=n(n({},t.block.normal),{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),t.block.gfm.table=(0,o.edit)(t.block.gfm.table).replace("hr",t.block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",t.block._tag).getRegex(),t.block.gfm.paragraph=(0,o.edit)(t.block._paragraph).replace("hr",t.block.hr).replace("alertFlag",/\:{3}(?:\n|$)/).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",t.block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",t.block._tag).getRegex(),t.block.pedantic=n(n({},t.block.normal),{html:(0,o.edit)("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",t.block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:o.noopTest,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:(0,o.edit)(t.block.normal._paragraph).replace("hr",t.block.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",t.block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),t.inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:o.noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},math:/^(\$)(?!\$)([\s\S]*?[^\\](\\\\)*)\1/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:o.noopTest,text:/^(`+|[^`]|\$+)(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_\$]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};var a=function(){try{return new RegExp("\\p{P}","u"),!0}catch(e){return!1}}();t.inline._punctuation=a?"\\p{P}$+<=>`^|~":"$+<=>`^|~",t.inline.punctuation=(0,o.edit)(t.inline.punctuation,a?"u":"").replace(/punctuation/g,t.inline._punctuation).getRegex(),t.inline.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,t.inline.anyPunctuation=/\\[punct]/g,t.inline._escapes=/\\([punct])/g,t.inline._comment=(0,o.edit)(t.block._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),t.inline.emStrong.lDelim=(0,o.edit)(t.inline.emStrong.lDelim,"u").replace(/punct/g,t.inline._punctuation).getRegex(),t.inline.emStrong.rDelimAst=(0,o.edit)(t.inline.emStrong.rDelimAst,"gu").replace(/punct/g,t.inline._punctuation).getRegex(),t.inline.emStrong.rDelimUnd=(0,o.edit)(t.inline.emStrong.rDelimUnd,"gu").replace(/punct/g,t.inline._punctuation).getRegex(),t.inline.anyPunctuation=(0,o.edit)(t.inline.anyPunctuation,"gu").replace(/punct/g,t.inline._punctuation).getRegex(),t.inline._escapes=(0,o.edit)(t.inline._escapes,"gu").replace(/punct/g,t.inline._punctuation).getRegex(),t.inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,t.inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,t.inline.autolink=(0,o.edit)(t.inline.autolink).replace("scheme",t.inline._scheme).replace("email",t.inline._email).getRegex(),t.inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,t.inline.tag=(0,o.edit)(t.inline.tag).replace("comment",t.inline._comment).replace("attribute",t.inline._attribute).getRegex(),t.inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,t.inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,t.inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,t.inline.link=(0,o.edit)(t.inline.link).replace("label",t.inline._label).replace("href",t.inline._href).replace("title",t.inline._title).getRegex(),t.inline.reflink=(0,o.edit)(t.inline.reflink).replace("label",t.inline._label).replace("ref",t.block._label).getRegex(),t.inline.nolink=(0,o.edit)(t.inline.nolink).replace("ref",t.block._label).getRegex(),t.inline.reflinkSearch=(0,o.edit)(t.inline.reflinkSearch,"g").replace("reflink",t.inline.reflink).replace("nolink",t.inline.nolink).getRegex(),t.inline.normal=n({},t.inline),t.inline.pedantic=n(n({},t.inline.normal),{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:(0,o.edit)(/^!?\[(label)\]\((.*?)\)/).replace("label",t.inline._label).getRegex(),reflink:(0,o.edit)(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",t.inline._label).getRegex()}),t.inline.gfm=n(n({},t.inline.normal),{escape:(0,o.edit)(t.inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_\$]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),t.inline.gfm.url=(0,o.edit)(t.inline.gfm.url,"i").replace("email",t.inline.gfm._extended_email).getRegex(),t.inline.breaks=n(n({},t.inline.gfm),{br:(0,o.edit)(t.inline.br).replace("{2,}","*").getRegex(),text:(0,o.edit)(t.inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()})},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.transform=t.TransformContext=void 0;var i=a(r(3458)),u=r(4211);function l(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&emsp;/g,String.fromCharCode(8195)).replace(/&ensp;/g,String.fromCharCode(8194))}var c=function(){function e(e,t,r){Object.defineProperty(this,"markdownReader",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"attrs",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"afterParentReaders",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.kernel=e,this.parent=r}return Object.defineProperty(e.prototype,"appendAfterParentReaders",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.afterParentReaders.push(e)}}),Object.defineProperty(e.prototype,"makeChildContext",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new e(this.kernel,this.markdownReader,this)}}),Object.defineProperty(e.prototype,"addAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){null===this.attrs&&(this.attrs={}),this.attrs[e]=t}}),Object.defineProperty(e.prototype,"getAttrs",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=this,t={};e&&!e.node;)t=n(n({},e.attrs),t),e=e.parent;return t}}),Object.defineProperty(e.prototype,"getNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;return this.node?this.node:(null===(e=this.parent)||void 0===e?void 0:e.getNode())||null}}),Object.defineProperty(e.prototype,"setNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r=null===(t=this.parent)||void 0===t?void 0:t.getNode();r&&i.default.appendChild(r,e),this.node=e}}),Object.defineProperty(e.prototype,"createElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return i.default.createElement(e,t)}}),Object.defineProperty(e.prototype,"createText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return i.default.createTextNode(e)}}),Object.defineProperty(e.prototype,"appendChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return i.default.appendChild(e,t)}}),Object.defineProperty(e.prototype,"appendChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n;try{for(var a=o(t),u=a.next();!u.done;u=a.next()){var l=u.value;i.default.appendChild(e,l)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}}}),Object.defineProperty(e.prototype,"removeChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n;if(null===(n=this.node)||void 0===n?void 0:n.children)try{for(var a=o(e),i=a.next();!i.done;i=a.next()){var u=i.value,l=this.node.children.indexOf(u);-1!==l&&this.node.children.splice(l,1)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}}),Object.defineProperty(e.prototype,"transform",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var n=this;void 0===r&&(r=i.default.createFragment());var a=new e(this.kernel,this.markdownReader,null);a.setNode(r);var u=[a];return s(t,(function(e){var t=u[u.length-1];if("escape"===e.type)return i.default.appendChild(t.getNode(),i.default.createTextNode(l(e.text),t.getAttrs())),!1;if("text"===e.type)return e.tokens?n.transform(e.tokens,t.getNode()):i.default.appendChild(t.getNode(),i.default.createTextNode(l(e.raw),t.getAttrs())),!1;var r=n.markdownReader.getMarkdownReader(e.type);if(r){var o=t.makeChildContext();u.push(o);for(var a=0;a<r.length;a++){var c=r[a];if("read"in c){if(!1===c.read(o,e))return!1;c.afterParentRead&&t.appendAfterParentReaders(c)}else if(!1===c(o,e))return!1}}}),(function(e){var t,r,a,i=n.markdownReader.getMarkdownReader(e.type);if("text"!==e.type&&i){var l=u.pop();try{for(var c=o(i),s=c.next();!s.done;s=c.next()){var f=s.value;l&&"read"in f&&(null===(a=f.afterRead)||void 0===a||a.call(f,l,e))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}null==l||l.afterParentReaders.forEach((function(e){var t;null===(t=e.afterParentRead)||void 0===t||t.call(e,l)}))}})),null==a||a.afterParentReaders.forEach((function(e){var t;null===(t=e.afterParentRead)||void 0===t||t.call(e,a)})),r}}),e}();function s(e,t,r){for(var n=function(e){var t,r,n,a,i,l=[],c=null,s="",f=0,d=function(e){if(c)return e.raw===c.raw&&f++,c.raw+=e.raw,c.text+=e.text,e.raw==="</"+s+">"&&0==--f&&(c=null),"continue";if(l.push(e),"html"===e.type&&/^\<[^\/\>]+\>$/.test(e.raw)&&(f=1,c=e,s=(null===(n=e.raw.match(/\<([^\s\/\>]+)/))||void 0===n?void 0:n[1])||""),"text"===e.type&&"html"===(null===(a=l[l.length-2])||void 0===a?void 0:a.type)&&"text"===(null===(i=l[l.length-3])||void 0===i?void 0:i.type)&&/^(\*|\_)/.test(e.text))try{var t=l[l.length-2],r=l[l.length-3].text+""+e.text,o=(0,u.markdownToTree)(r);l.pop(),l.pop(),l.pop(),o[0].tokens.forEach((function(e){var r;"text"===e.type&&""===e.text?l.push(t):("tokens"in e&&(e.tokens=null===(r=e.tokens)||void 0===r?void 0:r.map((function(e){return"text"===e.type&&""===e.text?t:e}))),l.push(e))}))}catch(e){}};try{for(var p=o(e),h=p.next();!h.done;h=p.next())d(h.value)}catch(e){t={error:e}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return l}(e),a=0;a<n.length;a++){var i=n[a];!1!==t(i)&&"tokens"in i&&i.tokens&&s(i.tokens,t,r),r(i)}}t.TransformContext=c,t.transform=function(e,t,r,n){return new c(e,t,null).transform(r)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(4586)),a=function(){function e(){Object.defineProperty(this,"writers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"anyNodeWriters",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,n=new o.default(e,t);return i([t],(function(e,t){var n,o,a,i,u,l,c,s=r.writers.get("#text");if(null==s?void 0:s.length)for(var f=0;f<s.length;f++){if(!1===(null===(n=(p=s[f]).preWrite)||void 0===n?void 0:n.call(p,e,t)))return!1}if("#text"===t.name)return e.append(t.data||""),(null===(o=t.attrs)||void 0===o?void 0:o.underline)&&e.wrap("<u>","</u>"),(null===(a=t.attrs)||void 0===a?void 0:a.bold)&&e.wrap("**"),(null===(i=t.attrs)||void 0===i?void 0:i.italic)&&e.wrap("_"),void((null===(u=t.attrs)||void 0===u?void 0:u.strikethrough)&&e.wrap("~~"));var d=r.writers.get(t.name);if(d)for(f=0;f<d.length;f++){if(!1===(null===(c=(p=d[f]).preWrite)||void 0===c?void 0:c.call(p,e,t)))return!1}else for(var f=0;f<r.anyNodeWriters.length;f++){var p;if(!1===(null===(l=(p=r.anyNodeWriters[f]).preWrite)||void 0===l?void 0:l.call(p,e,t)))return!1}}),(function(e,t){if("#text"!==t.name){var n=r.writers.get(t.name);if(n)for(o=0;o<n.length;o++){if(!1===n[o].write(e,t))return!1}else for(var o=0;o<r.anyNodeWriters.length;o++){if(!1===r.anyNodeWriters[o].write(e,t))return!1}}}),n),n.toString()}}),Object.defineProperty(e.prototype,"registerMarkdownWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.registerMarkdownWriterSingle(e[r],t);else this.registerMarkdownWriterSingle(e,t)}}),Object.defineProperty(e.prototype,"registerAnyNodeWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.anyNodeWriters.push(e)}}),Object.defineProperty(e.prototype,"registerMarkdownWriterSingle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.writers.get(e);Array.isArray(r)?(r.push(t),this.writers.set(e,r)):this.writers.set(e,[t])}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),e}();function i(e,t,r,n){for(var a=0;a<e.length;a++){var u=e[a],l=new o.default(n.kernel,u,n);!1!==t(l,u)&&"children"in u&&u.children&&i(u.children,t,r,l),r(l,u),n.append(l)}}t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){void 0===r&&(r=null),Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"parentCtx",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"keepInline",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"wrapToString",{enumerable:!0,configurable:!0,writable:!0,value:null})}return Object.defineProperty(e.prototype,"isInTableCell",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=this;e;){if("td"===e.node.name)return!0;e=e.parentCtx}return!1}}),Object.defineProperty(e.prototype,"writeHTML",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.data.push(this.kernel.writeData("text/html",e,{htmlNoWrap:!0}))}}),Object.defineProperty(e.prototype,"forEachChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.data.forEach((function(t){"string"!=typeof t&&e(t)}))}}),Object.defineProperty(e.prototype,"lastChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.data[this.data.length-1];t&&"string"!=typeof t&&e(t)}}),Object.defineProperty(e.prototype,"append",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.data.push(e)}}),Object.defineProperty(e.prototype,"appendFirst",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.data.unshift(e)}}),Object.defineProperty(e.prototype,"insertAt",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.data.splice(t,0,e)}}),Object.defineProperty(e.prototype,"setKeepInline",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.keepInline=e}}),Object.defineProperty(e.prototype,"setWrapToString",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.wrapToString){var t=this.wrapToString;this.wrapToString=function(r){return e(t(r))}}else this.wrapToString=e}}),Object.defineProperty(e.prototype,"wrap",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=e),this.data.unshift(e),this.data.push(t)}}),Object.defineProperty(e.prototype,"newLine",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.data.push("\n\n")}}),Object.defineProperty(e.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.data.join("");return this.keepInline?e.replace(/[\n\r]/g," "):this.wrapToString?this.wrapToString(e):e}}),e}();t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"registerMarkdownReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.plugin.markdownReader.registerMarkdownReader(e,t)}}),Object.defineProperty(t.prototype,"registerMarkdownWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.plugin.markdownWriter.registerMarkdownWriter(e,t)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(a(r(3635)).default);t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownCodeWriter=void 0;var n=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e.wrap("`"),!1}}),e}();t.MarkdownCodeWriter=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3463),c=a(r(4590)),s=a(r(4591)),f=a(r(4592)),d=r(3637),p=a(r(4593)),h=a(r(4594)),y=a(r(4595)),b=a(r(4596)),m=r(4597),v=a(r(4598)),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerAttr(d.pluginRegister.attr.color,c.default)}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.kernel,t=e.getService(u.IHTMLKernelService.ID);t&&(t.registerHTMLStyleReader(p.default.StyleNames,new p.default),t.registerHTMLNodeReader(v.default.NodeNames,new v.default));var r=e.getService(u.IHTMLKernelService.ID);r&&r.registerAttrHTMLWriter(y.default.AttrNames,new y.default);var n=e.getService(l.ILakeKernelService.ID);n&&n.registerLakeStyleReader("color",new h.default);var o=e.getService(l.ILakeKernelService.ID);o&&o.registerLakeAttrWriter(b.default.AttrNames,new b.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:d.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[f.default,s.default]}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:m.ColorKernelService}),t}(i.KernelPlugin);t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o={targets:[n.Category.Text,n.Category.InlineCard],values:function(){return!0}};t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(3715)),l=r(3465),c=r(3637),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.attr.color}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r,n=t.getSelection();return i.SelectionUtil.isInCard(n)&&(null===(r=n.firstRange.commonAncestorContainer)||void 0===r?void 0:r.hasCategory(i.Category.InlineCard))?l.COMMAND_NOT_EXECUTED:e.prototype.getState.call(this,t)}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return e.prototype.execute.call(this,t,null)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.clearColor}),t}(u.default);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3453),l=i(r(3715)),c=r(3465),s=r(3637),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.attr.color}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r,n,o,i=t.getSelection();try{for(var l=a(this.plugin.service.colorDisableHandlers),s=l.next();!s.done;s=l.next()){if((0,s.value)(i))return c.COMMAND_UNAVAILABLE}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return u.SelectionUtil.isInCard(i)&&(null===(o=i.firstRange.commonAncestorContainer)||void 0===o?void 0:o.hasCategory(u.Category.InlineCard))?c.COMMAND_NOT_EXECUTED:e.prototype.getState.call(this,t)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.color}),t}(l.default);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3760)),u=r(3637),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){r&&e.addAttr(u.pluginRegister.attr.color,r)}}),Object.defineProperty(t,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:["color"]}),t}(i.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3637),o=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){e.setAttr(n.pluginRegister.attr.color,r)}}),e}();t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(3562)),l=r(3637),c=r(4214),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if(r){var n=a((0,c.getColorArray)(r),1)[0];e.addStyle("color",n)}}}),Object.defineProperty(t,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[l.pluginRegister.attr.color]}),t}(u.default);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3637),o=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){r&&e.setStyle("color",r)}}),Object.defineProperty(e,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[n.pluginRegister.attr.color]}),e}();t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ColorKernelService=void 0;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"registerColorDisableHandler",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.colorDisableHandlers.push(e)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.colorDisableHandlers=[]}}),t}(r(4215).IColorKernelService);t.ColorKernelService=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;(null===(r=t.attrs)||void 0===r?void 0:r.color)&&e.addAttr("color",t.attrs.color)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["font"]}),t}(a(r(3494)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3463),l=a(r(4600)),c=r(4601),s=a(r(4602)),f=a(r(4603)),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerAttr(l.default);var t=e.getService(u.ILakeKernelService.ID);t&&(t.registerLakeNodeWriter(f.default.NodeNames,new f.default),t.registerLakeNodeWriter(s.default.NodeNames,new s.default))}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.pluginName}),t}(i.KernelPlugin);t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerAttrSchema=void 0;var n=r(3453),o=r(3561);t.ContainerAttrSchema={widthMode:{targets:[n.Category.WidthModeBox,"table","collapse"],values:[o.WIDTH_MODE_CONTAIN,o.WIDTH_MODE_NORMAL]}},t.default=t.ContainerAttrSchema},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"container"})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.setVirtual((function(){}))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["alertHole"]}),t}(r(3499).LakeNodeWriter);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.setVirtual((function(){}))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["containerHole"]}),t}(r(3499).LakeNodeWriter);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3842),l=a(r(4605)),c=a(r(4606)),s=r(3719),f=r(4607),d=r(4609),p=r(4610),h=a(r(4611)),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"changeTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,n=function(e){r.changeTimer&&clearTimeout(r.changeTimer),r.changeTimer=setTimeout((function(){r._change(),e&&e.mode!==i.JobMode.OT&&r._selfChange()}))};e.on("document.ready",(function(){t.on(u.EVENT_CONTENT_CHANGE,n)})),e.on("document.destroy",(function(){t.off(u.EVENT_CONTENT_CHANGE,n)}))}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.destroy.call(this),this.changeTimer&&clearTimeout(this.changeTimer)}}),Object.defineProperty(t.prototype,"_change",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.kernel.emitEvent("change")}}),Object.defineProperty(t.prototype,"_selfChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.kernel.emitEvent("selfChange")}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[c.default,h.default,l.default,d.GetNodeContentCommand,p.InsertAtSelectionCommand]}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:f.ContentKernelService}),t}(i.KernelPlugin);t.default=y},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3719),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;if(null===(e=this.plugin.service)||void 0===e?void 0:e.isForceHasContent)return!1;var t=this.kernel.model.document.rootNode,r=t.childCount;if(0===r)return!0;if(1===r&&"p"===t.firstChild.nodeName){if(t.firstChild.isEmpty())return!0;if(1===t.firstChild.childCount&&t.firstChild.firstChild.isTextNode()&&t.firstChild.firstChild.isEmpty())return!0}return!1}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.isEmpty}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(4018),u=r(3457),l=r(3719),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.kernel.getDocument("text/plain");return(0,i.wordCount)(e)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.wordCount}),t}(u.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ContentKernelService=void 0;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"isForceHasContent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"lockContentNotEmpty",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.isForceHasContent=!0,t.plugin._selfChange()}}),Object.defineProperty(t,"releaseLockContentNotEmpty",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.isForceHasContent=!1,t.plugin._selfChange()}}),t}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(r(4608).IContentKernelService);t.ContentKernelService=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IContentKernelService=void 0;var a=r(3719),i=r(3475),u=r(3472),l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,u.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,u.wrapID)(a.pluginRegister.service.IContentKernelService)}),t}(i.KernelAbstractService);t.IContentKernelService=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.GetNodeContentCommand=void 0;var a=r(3453),i=r(3719),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);if(!o)return"";var i=n.selectNode(o);try{var u=a.SelectionUtil.extractINode(n,i),l=this.kernel.writeData(r,u)||"";return e.commitJob(n),l}catch(e){return""}}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:i.pluginRegister.command.getNodeContent}),t}(a.KernelAbstractCommand);t.GetNodeContentCommand=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.InsertAtSelectionCommand=void 0;var a=r(3453),i=r(3719),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getSelection();try{var i=this.kernel.readData(t,r);return n.setSelection(a.SelectionUtil.insertINode(n,o,i)),e.commitJob(n),i}catch(e){return null}}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:i.pluginRegister.command.insertAtSelection}),t}(a.KernelAbstractCommand);t.InsertAtSelectionCommand=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(4018),u=r(3457),l=r(3719),c=r(4017),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=a.SelectionUtil.extractINode(e,(0,c.reduceSelection)(e,e.getSelection()));if(!t)return 0;var r=this.kernel.writeData("text/plain",t);return(0,i.wordCount)(r)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.wordCountSelection}),t}(u.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4613)),l=a(r(4614)),c=a(r(4615)),s=r(3917),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_allowDeleteTable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"disableDeleteTable",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._allowDeleteTable=!1}}),Object.defineProperty(t.prototype,"enableDeleteTable",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._allowDeleteTable=!0}}),Object.defineProperty(t.prototype,"allowDeleteTable",{get:function(){return this._allowDeleteTable},enumerable:!1,configurable:!0}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[l.default,u.default,c.default]}),t}(i.KernelPlugin);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3917),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){i.assert.fatal(!t.collapsed,"plugins/delete/src/kernel/commands/delete-by-range-command.ts:11");var r=e.newJob(),n=a.SelectionUtil.deleteContent(r,r.newSelection(t),!0,!0,!1);r.setSelection(n),e.commitJob(r)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.deleteByRange}),t}(u.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3917),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===t&&(t=!0),void 0===r&&(r=!0);var n=e.newJob();r=this.plugin.allowDeleteTable?r:this.plugin.allowDeleteTable;var o=n.getSelection();if(o.isCollapsed)do{var i=o.firstRange.start.node.closest(a.Category.Block);if(!i||i.nodeName!==n.defaultElementName)break;if(!a.NodeUtil.isLikeEmptyElement(i))break;if(n.document.rootNode.firstChild!==i||1===n.document.rootNode.childCount)break;return n.removeChild(i.parent,i),o=n.newSelection(n.newRange(n.newPosition(n.document.rootNode,0))),n.setSelection(o),void e.commitJob(n)}while(false);o=a.SelectionUtil.deleteContent(n,o,!0,t,!1,r),a.SelectionUtil.unCollapseAll(n,o),n.setSelection(o),e.commitJob(n)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.delete}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3917),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob(),r=t.getSelection();if(!r.isCollapsed)return e.cancelJob(t),!1;var n=r.firstRange.start,o=n.node.closest(a.Category.Block);if(!o)return e.cancelJob(t),!1;var u=a.PositionUtil.alignmentToElement(t,n,a.Category.Block,"left");if(u.node.hasCategory(a.Category.Block)&&i.assert.fatal(u.node===o,"plugins/delete/src/kernel/commands/delete-to-block-end-command.ts:41"),u.node===o&&o.childCount===u.offset)return e.cancelJob(t),!1;var l=t.newRange(u,t.newPosition(o,o.childCount)),c=a.SelectionUtil.deleteContent(t,t.newSelection(l),!0,!0,!1);return t.setSelection(c),e.commitJob(t),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.deleteToBlockEnd}),t}(u.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4617)),l=r(4019),c=r(4618),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:c.DropFileKernelOption}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u.default]}),t}(i.KernelPlugin);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3633),l=r(4019),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob(),n=this.kernel.readData("Files",t,{from:u.SOURCE_FROM_DROP,useMediaCard:this.plugin.option.useMediaCard});if(n){var o=a.SelectionUtil.insertINode(r,r.getSelection(),n);r.setSelection(o),e.commitJob(r)}}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.dropFile}),t}(i.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DropFileKernelOption=void 0;var n=r(4019),o={useMediaCard:!1},a=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign({},o,e)}return Object.defineProperty(e.prototype,"useMediaCard",{get:function(){return this._option.useMediaCard},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:n.pluginRegister.pluginName}),e}();t.DropFileKernelOption=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3493),l=r(3463),c=r(4620),s=a(r(4621)),f=a(r(4622)),d=a(r(4623)),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerInlineCard("inline"),e.registerBlockCard("block");var t=e.getService(l.ILakeKernelService.ID);t&&t.registerLakeCardReader(f.default.NodeNames,new f.default);var r=e.getService(u.IINodeReaderKernelService.ID);r&&r.registerINodeCardReader(s.default.CardName,new s.default);var n=e.getService(l.ILakeKernelService.ID);n&&n.registerLakeCardWriter(d.default.NodeNames,new d.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.pluginName}),t}(i.KernelPlugin);t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"fallbackCard"})},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3458)),a=r(4216),i=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,i=a.CardType[null===(r=t.attrs)||void 0===r?void 0:r.cardType]||a.CARD_TYPE_BLOCK;return e.setNode(o.default.createCard(i,{cardName:t.name,cardValue:null===(n=t.attrs)||void 0===n?void 0:n.value},t.id)),!1}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"*"}),e}();t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3481),l=r(4216),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=l.CardType[e.inode.cardType]||l.CARD_TYPE_BLOCK;e.setNode(i.default.createCard(o,{cardName:t,cardValue:r},n))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["*"]}),t}(u.LakeCardReader);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){(null==r?void 0:r.cardName)&&e.setNode(e.createBlockCard(r.cardName,r.cardValue,n))}}),Object.defineProperty(e,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["block","inline"]}),e}();t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(3482)),l=r(4217),c=r(3846),s=r(3466),f=r(3493),d=r(3463),p=a(r(4625)),h=a(r(4627)),y=r(4218),b=a(r(4628)),m=a(r(4629)),v=a(r(4630)),g=a(r(4631)),_=a(r(4632)),w=a(r(4633)),O=a(r(4634)),E=a(r(4635)),P=a(r(4636)),j=a(r(4637)),C=r(3636),k=r(4638),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerInlineCard(t.cardName),e.registerBlockCard(t.blockCardName)}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,r=this.kernel,n=r.getService(d.ILakeKernelService.ID);n&&(n.registerLakeCardReader(u.default.FILE.UI_NAME,new w.default(this.option)),n.registerLakeCardReader(u.default.LOCAL_DOC.UI_NAME,new _.default(this.option)));var o=r.getService(d.ILakeKernelService.ID);o&&(o.registerLakeCardWriter(t.cardName,new j.default),o.registerLakeCardWriter(t.blockCardName,new P.default));var a=r.getService(f.IINodeReaderKernelService.ID);a&&(a.registerINodeCardReader(g.default.CardName,new g.default),a.registerINodeCardReader(v.default.CardName,new v.default));var i=r.getService(s.IHTMLKernelService.ID);i&&(i.registerNodeHTMLWriter(t.cardName,new E.default),i.registerNodeHTMLWriter(t.blockCardName,new O.default(this)));var p=r.getService(c.IFileReaderKernelService.ID);null==p||p.registerFileReader(m.default.FileTypes,new m.default(this,this.kernel)),null==p||p.registerFileReader(this.option.acceptUtil.getLocalDocFileAccept(this.option.accept,l.ACCEPT_KEY_LOCAL_DOC),new b.default(this)),null===(e=r.getService(C.IMarkdownService.ID))||void 0===e||e.registerMarkdownWriter([t.cardName,t.blockCardName],new k.MarkdownFileCardWriter)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:y.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:h.default}),Object.defineProperty(t,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:u.default.FILE.NODE_NAME}),Object.defineProperty(t,"blockCardName",{enumerable:!0,configurable:!0,writable:!0,value:u.default.LOCAL_DOC.NODE_NAME}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[p.default]}),t}(i.KernelPlugin);t.default=S},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3913),u=a(r(3720)),l=r(3762),c=r(4218),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=!1);var n=u.default.fromLake(t,{type:l.FILE_TYPE_INLINE});return this._execute(e,"file",n,r)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.insertFile}),t}(i._InsertCardCommand);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskType=t.Status=void 0,t.Status={Pending:"pending",Done:"done",Error:"error",Uploading:"uploading",Transfering:"transfering"},t.TaskType={Upload:"upload",Transfer:"transfer"}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3464)),a=n(r(3482)),i=r(4219),u={getPreviewUrl:null,getFileDownloadURL:null,accept:null,getFileExtname:function(e){if(!e)return"";var t;if(t="string"==typeof e?e:e.name){if((t=t.toLowerCase()).endsWith(".mindnode.zip"))return"mindnode.zip";if(t.endsWith(".xmind.zip"))return"xmind.zip";if(t.endsWith(".mmap.zip"))return"mmap.zip";if(t.endsWith(".mpp.zip"))return"mpp.zip"}var r=t&&t.split(".").pop()||"",n=e instanceof File&&e.type&&i.mimeMap[e.type];return n?n.includes(r)?r:n[0]:r},acceptUtil:r(4220).defaultAcceptUtil,migrationHost:!1},l=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getFileExtname",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=(0,o.default)({},u,e),this.getFileExtname=this._option.getFileExtname}return Object.defineProperty(e.prototype,"accept",{get:function(){return this._option.accept},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"acceptUtil",{get:function(){return this._option.acceptUtil},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"migrationHost",{get:function(){return this._option.migrationHost},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getPreviewUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._option.getPreviewUrl;return t?t(e):e}}),Object.defineProperty(e.prototype,"getFileDownloadURL",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._option.getFileDownloadURL;return t?t(e):e}}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:a.default.FILE.OPTION_NAME}),e}();t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3633),l=a(r(3847)),c=a(r(3720)),s=r(3762),f=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"readFile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if((null==t?void 0:t.from)===u.SOURCE_FROM_UI&&"localDoc"===(null==t?void 0:t.category)){var r=e._$neUploadTask;if(r)return i.default.createCard("localdoc",c.default.getInitCardValue(r,{type:s.FILE_TYPE_BLOCK,getFileExtname:this.plugin.option.getFileExtname}))}}}),t}(l.default);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3597),u=a(r(3458)),l=a(r(3482)),c=a(r(3847)),s=a(r(3720)),f=r(3762),d=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(n,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:r}),n}return o(t,e),Object.defineProperty(t.prototype,"readFile",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r=null===(t=e.extName)||void 0===t?void 0:t.toLowerCase();if(this._plugin.option.acceptUtil.getAttachmentFileAccept(this._plugin.option.accept).includes("."+r)){var n=e._$neUploadTaskId;if(n)return u.default.createCard(l.default.FILE.NODE_NAME,s.default.getInitCardValue({id:n,file:e.file},{type:f.FILE_TYPE_INLINE,getFileExtname:this._plugin.option.getFileExtname}),(0,i.uuid)(9))}else this._kernel.emitEvent("unSupportFileUpload",e)}}),Object.defineProperty(t,"FileTypes",{enumerable:!0,configurable:!0,writable:!0,value:"*"}),t}(c.default);t.default=d},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3482)),a=function(){function e(){}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(e,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:o.default.LOCAL_DOC.NODE_NAME}),e}();t.default=a},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3482)),a=function(){function e(){}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(e,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:o.default.FILE.NODE_NAME}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3971)),u=a(r(3458)),l=a(r(3482)),c=r(3481),s=a(r(3720)),f=r(3762),d=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"option",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(this.option.migrationHost){var o=new URL(r.src);o.hostname.endsWith(".yuque.com")&&(o.hostname="string"==typeof this.option.migrationHost?this.option.migrationHost:"yuque.antfin-inc.com",o.pathname="/api/v2/servicify/migration".concat(o.pathname),r.src=o.toString())}(0,i.default)(r.collapsed)&&(r.mode=r.collapsed?f.FILE_MODE_CARD:f.FILE_MODE_EMBED);var a=u.default.createCard(l.default.LOCAL_DOC.NODE_NAME,s.default.fromLake(r,{type:f.FILE_TYPE_BLOCK}),n);e.setNode(a)}}),t}(c.LakeCardReader);t.default=d},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=a(r(3482)),l=r(3481),c=a(r(3720)),s=r(3762),f=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"option",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(this.option.migrationHost){var o=new URL(r.src);o.hostname.endsWith(".yuque.com")&&(o.hostname="string"==typeof this.option.migrationHost?this.option.migrationHost:"yuque.antfin-inc.com",o.pathname="/api/v2/servicify/migration".concat(o.pathname),r.src=o.toString())}var a=i.default.createCard(u.default.FILE.NODE_NAME,c.default.fromLake(r,{type:s.FILE_TYPE_INLINE}),n);e.setNode(a)}}),t}(l.LakeCardReader);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(97)),u=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:null}),r._plugin=t,r}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(0,i.default)(t,"attrs.value",{}),n=r.src,o=r.download,a=r.name;if(n){var u=this._plugin.option,l=o?u.getFileDownloadURL(n):u.getPreviewUrl(n),c=e.createElement("div",{className:"ne-localdoc"}),s=e.createElement("a",{attrs:{href:l}});e.appendChild(s,e.createTextNode(a)),e.appendChild(c,s),e.setNode(c)}}}),t}(a(r(3470)).default);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(97)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(0,i.default)(t,"attrs.value",{}),n=r.src,o=r.name;if(n){var a=e.createElement("a",{className:"ne-card-file",attrs:{href:n}});e.appendChild(a,e.createTextNode("📎"+o)),e.setNode(a)}}}),t}(a(r(3470)).default);t.default=u},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3482)),a=n(r(3720)),i=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i=e.createBlockCard(o.default.LOCAL_DOC.LAKE_NAME,a.default.toLake(r),n);e.setNode(i)}}),e}();t.default=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3482)),a=n(r(3720)),i=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var i=e.createInlineCard(o.default.FILE.LAKE_NAME,a.default.toLake(r),n);e.setNode(i)}}),e}();t.default=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownFileCardWriter=void 0;var o=n(r(97)),a=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(0,o.default)(t,"attrs.value",{}),n=r.name,a=r.src,i="[".concat(n,"](").concat(a||"",")");return"inline"===t.cardType?e.append(i):(e.append(i),e.newLine()),!0}}),e}();t.MarkdownFileCardWriter=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(4640),l=a(r(4641)),c=a(r(4642)),s=a(r(4643)),f=r(4644),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_fileReaderManager",{enumerable:!0,configurable:!0,writable:!0,value:null}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._fileReaderManager=new s.default(this),e.registerReader("Files",this._fileReaderManager),e.registerCommand("insertFiles",new c.default)}}),Object.defineProperty(t.prototype,"fileReaderManager",{get:function(){return this._fileReaderManager},enumerable:!1,configurable:!0}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:f.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:l.default}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:u.FileReaderKernelService}),t}(i.KernelPlugin);t.default=d},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.FileReaderKernelService=void 0;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"registerFileReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.plugin.fileReaderManager.registerFileReader(e,t)}}),Object.defineProperty(t.prototype,"registerPreFileReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.plugin.fileReaderManager.registerPreFileReader(e,t)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(r(3846).IFileReaderKernelService);t.FileReaderKernelService=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3320)),u=a(r(3464)),l={checkFileSize:function(){return null},getMessageByCode:function(){}},c=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_option",{enumerable:!0,configurable:!0,writable:!0,value:null}),r._option=(0,u.default)({},l,t),r}return o(t,e),Object.defineProperty(t.prototype,"checkFileSize",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._option.checkFileSize(e,t)}}),Object.defineProperty(t.prototype,"getErrorMessageByCode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._option.getMessageByCode(e)}}),Object.defineProperty(t,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"fileReader"}),t}(i.default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return i.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!1}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o=e.newJob(),u=this.kernel,l=o.getSelection(),c=u.readData("Files",t,r);if(c){var s=this._getSelectionAttrs(o,l);null===(n=c.children)||void 0===n||n.forEach((function(e){e.attrs=a(a({},s),e.attrs)})),o.setSelection(i.SelectionUtil.insertINode(o,o.getSelection(),c)),e.commitJob(o)}else e.cancelJob(o)}}),Object.defineProperty(t.prototype,"_getSelectionAttrs",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n;if(t.firstRange.start.node.isTextNode())n=t.firstRange.start.node.attrs;else if(t.firstRange.start.node.hasCategory(i.Category.TextContainer)){var o=t.firstRange.start,a=o.node,u=o.offset;n=null===(r=a.children[t.collapsed?u-1:u])||void 0===r?void 0:r.attrs}return n&&(n=Object.keys(n).reduce((function(t,r){return e.acceptAttr(i.Category.Text,r,n[r])&&(t[r]=n[r]),t}),{})),n}}),t}(i.Command);t.default=u},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3761),a=r(3454),i=n(r(3458)),u=r(3848),l=function(){function e(e){Object.defineProperty(this,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_preReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_readers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_uploadService",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._plugin=e,this._uploadService=e.kernel.requireService(u.IUploadKernelService.ID)}return Object.defineProperty(e.prototype,"registerPreFileReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){Array.isArray(e)||(e=[e]),this._register(this._preReaders,e,t)}}),Object.defineProperty(e.prototype,"registerFileReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){Array.isArray(e)||(e=[e]),this._register(this._readers,e,t)}}),Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this,a=this._preReaders,u=this._readers,l=this._getPreReaderContext(),c=t.map((function(e){return{type:e.type,extName:n._uploadService.getFileExtname((e.name||"").toLowerCase()),file:e}})).map((function(e){var t=e.type,i=e.extName,c=n._getReader(a,t,i),s=!0;c&&!1===c.preReadFile(l,e,r)&&(s=!1);var f=n._getReader(a,o.fileTypeEnum.all);if(s&&f&&!1===f.preReadFile(l,e,r))return null;var d=null,p=n._getReader(u,t,i);if(p&&(d=p.readFile(e,r)),d)return d;var h=n._getReader(u,o.fileTypeEnum.all);return h?h.readFile(e,r):null})).filter(Boolean);return c.length?i.default.createFragment(c):null}}),Object.defineProperty(e.prototype,"_getPreReaderContext",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return{checkFileSize:function(t,r){return e._plugin.option.checkFileSize(t,r)},getErrorMessageByCode:function(t,r){return e._plugin.option.getErrorMessageByCode(t)}}}}),Object.defineProperty(e.prototype,"_register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){t.forEach((function(t){a.assert.fatal(!e[t],"already registered "+t,"plugins/file-reader/src/kernel/lib/file-reader-manager.ts:129"),e[t]=r}))}}),Object.defineProperty(e.prototype,"_getReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return t&&e[t]?e[t]:r?e[r=r.toLowerCase()]||e["."+r]:null}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._plugin=null,this._preReaders={},this._readers={}}}),e}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"fileReader"})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4646)),l=r(4221),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u.default]}),t}(i.KernelPlugin);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(4221),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if("start"===t||"end"===t){var r,n=e.newJob();r="start"===t?a.SelectionUtil.toStart(n.getSelection()):a.SelectionUtil.toEnd(n.getSelection()),n.setSelection(r),e.commitJob(n)}}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.focus}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3463),c=a(r(3850)),s=r(3853),f=a(r(4648)),d=a(r(4649)),p=a(r(4650)),h=a(r(4222)),y=a(r(4651)),b=a(r(4652)),m=a(r(4653)),v=r(4020),g=r(3919),_=a(r(4654)),w=a(r(4655)),O=a(r(4656)),E=a(r(4657)),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;e.registerAttr("fontsize",h.default),this.editing.on("metachange",(function(e,r){var n=Number(null==e?void 0:e.defaultFontsize)||void 0,o=Number(null==r?void 0:r.defaultFontsize)||void 0;n!==o&&(t.kernel.emitPluginEvent("defaultFontsizeChange",{current:n,old:o}),t.kernel.emitEvent("defaultFontsizeChange",n,o))}))}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.kernel,t=e.getService(c.default.ID);t&&t.registerMeta("defaultFontsize",new p.default);var r=e.getService(u.IHTMLKernelService.ID);r&&r.registerHTMLStyleReader(_.default.StyleNames,new _.default(this));var n=e.getService(l.ILakeKernelService.ID);n&&n.registerLakeAttrReader("class",new w.default);var o=e.getService(u.IHTMLKernelService.ID);o&&o.registerAttrHTMLWriter(O.default.AttrNames,new O.default(e));var a=e.getService(l.ILakeKernelService.ID);a&&a.registerLakeAttrWriter(E.default.AttrNames,new E.default)}}),Object.defineProperty(t.prototype,"getDocDefaultFontsize",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;return this.getDefaultFontsize()||(null===(e=this.kernel.getService(s.ITypographyKernelService.ID))||void 0===e?void 0:e.getTypographyDetail().fontSize)||15}}),Object.defineProperty(t.prototype,"getDefaultFontsize",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;return Number(null===(e=this.kernel.getService(c.default.ID))||void 0===e?void 0:e.getMeta("defaultFontsize"))||this.option.defaultFontsize}}),Object.defineProperty(t.prototype,"setDefaultFontsize",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r;if(v.DEFAULT_FONTSIZES.includes(e)){var n=this.getDefaultFontsize();if(n===e)return!1;var o=e;e===(null===(t=this.kernel.getService(s.ITypographyKernelService.ID))||void 0===t?void 0:t.getTypographyDetail().fontSize)&&(o=void 0),null===(r=this.kernel.getService(c.default.ID))||void 0===r||r.setMeta("defaultFontsize",o),this.kernel.emitPluginEvent("defaultFontsizeChange",{current:o,old:n}),this.kernel.emitEvent("defaultFontsizeChange",o,n)}}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:g.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:b.default}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[y.default,d.default,f.default]}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:m.default}),t}(i.KernelPlugin);t.default=P},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3453),l=r(3457),c=r(3853),s=i(r(3713)),f=r(3919),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n=e.newJob(),o=n.getSelection(),a=1===o.ranges.length&&(o.firstRange.start.node.isTextNode()||o.firstRange.end.node.isTextNode()),i=[];a&&(i=o.ranges.map((function(e){return s.default.markRange(n,e)})));var l=this.plugin.getDefaultFontsize()||(null===(r=null===(t=this.kernel.getService(c.ITypographyKernelService.ID))||void 0===t?void 0:t.getTypographyDetail)||void 0===r?void 0:r.call(t).fontSize)||15;if(this._removeNodesAttribute(n,n.document.getNodesByName("#text"),l),this._removeNodesAttribute(n,n.document.getNodesByCategory(u.Category.InlineCard),l),a){var f=o.cloneByRange(i.map((function(e){return s.default.recoverRange(n,e)})));n.setSelection(f)}return e.commitJob(n),!0}}),Object.defineProperty(t.prototype,"_removeNodesAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o;t=t.filter((function(e){var t;return(null===(t=e.attrs)||void 0===t?void 0:t.fontsize)===r&&e.isConnected&&e.parent}));try{for(var i=a(t),l=i.next();!l.done;l=i.next()){var c=l.value;c.parent&&c.isConnected&&u.RangeUtil.removeAttribute(e,u.Range.selectNodeContents(c),["fontsize"])}}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:f.pluginRegister.command.clearDefaultFontsize}),t}(l.KernelAbstractCommand);t.default=d},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3454),i=r(3457),u=r(3853),l=r(3919),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;void 0===t&&(t=!0);var n=this.plugin.getDefaultFontsize();return t?n||void 0:(a.assert.fatal(this.kernel.hasExtendMethod("getTypographyDetail"),"plugins/fontsize/src/kernel/default-fontsize-command.ts:17"),n||(null===(r=this.kernel.getService(u.ITypographyKernelService.ID))||void 0===r?void 0:r.getTypographyDetail().fontSize))}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.plugin.setDefaultFontsize(t)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.defaultFontsize}),t}(i.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3854)),u=r(4020),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"needPersistent",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return u.DEFAULT_FONTSIZES.includes(Number(e))||void 0===e}}),Object.defineProperty(t.prototype,"isDefault",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return void 0===e}}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3454),l=a(r(3715)),c=r(3484),s=r(3465),f=r(3853),d=a(r(4223)),p=r(3919),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:"fontsize"}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r,n=t.getSelection();return i.SelectionUtil.allBlockNodeHasCategory(n,[i.Category.Heading,c.SUMMARY])?s.COMMAND_UNAVAILABLE:i.SelectionUtil.isInCard(n)&&(null===(r=n.firstRange.commonAncestorContainer)||void 0===r?void 0:r.hasCategory(i.Category.InlineCard))?s.COMMAND_NOT_EXECUTED:e.prototype.getState.call(this,t)}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){void 0===r&&(r=!0);var n=e.prototype.getValue.call(this,t);if(r)return n;if(null!==n)return n;var o=this.kernel.getService(d.default.ID),a=this.kernel.getService(f.ITypographyKernelService.ID);return u.assert.fatal(o,"plugins/fontsize/src/kernel/fontsize-command.ts:63"),u.assert.fatal(a,"plugins/fontsize/src/kernel/fontsize-command.ts:64"),this.plugin.getDefaultFontsize()||a.getTypographyDetail().fontSize}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){return e.prototype.execute.call(this,t,r,i.Category.Heading)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:p.pluginRegister.command.fontsize}),t}(l.default);t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4020),o=function(){function e(e){Object.defineProperty(this,"_defaultFontsize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.DEFAULT_FONTSIZES.includes(e)&&(this._defaultFontsize=e)}return Object.defineProperty(e.prototype,"defaultFontsize",{get:function(){return this._defaultFontsize||null},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"defaultFontsize"}),e}();t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getDefaultFontsize",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.plugin.getDefaultFontsize()}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(a(r(4223)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3760)),u=r(4222),l=r(4224),c=r(4225),s={px:!0,in:!0,cm:!0,mm:!0,q:!0,pt:!0,pc:!0},f=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:null}),r._plugin=t,r}return o(t,e),Object.defineProperty(t.prototype,"readStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this._formatFontSize(r),o=this._plugin.getDocDefaultFontsize();n&&n!==o&&e.addAttr("fontsize",n)}}),Object.defineProperty(t.prototype,"_formatFontSize",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=(0,l.getUnit)(e);if(!t)return null;if(!s[t])return null;var r=parseFloat(e);if(Number.isNaN(r))return null;r>u.MAX_FONTSIZE?r=u.MAX_FONTSIZE:r<u.MIN_FONTSIZE&&(r=u.MIN_FONTSIZE);var n=(0,l.convertToPx)(r,t);return(0,c.fontSizeNormal)(n||r)}}),Object.defineProperty(t,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:["font-size"]}),t}(i.default);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4226),o=/^lake-fontsize-(\d{1,4})$/,a=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){r.split(" ").forEach((function(t){if(o.test(t)){var r=n.LAKE_FONTSIZE_MAPPING[RegExp.$1];r&&e.setAttr("fontsize",r)}}))}}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n;if(r){if(e.inode.id){var o=null===(n=this.kernel.document)||void 0===n?void 0:n.getNodeById(e.inode.id);if(null==o?void 0:o.closest(i.Category.Heading))return}e.addStyle("font-size","".concat(r,"px"))}}}),Object.defineProperty(t,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["fontsize"]}),t}(a(r(3562)).default);t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4226),o={};Object.keys(n.LAKE_FONTSIZE_MAPPING).forEach((function(e){o[n.LAKE_FONTSIZE_MAPPING[e]]=e}));var a=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=o[r];n&&e.addClassName("lake-fontsize-".concat(n))}}),Object.defineProperty(e,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["fontsize"]}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4659)),l=a(r(4660)),c=r(4228),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[l.default]}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:u.default}),t}(i.KernelPlugin);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"ignoreAttrNames",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),t}return o(t,e),Object.defineProperty(t.prototype,"registerKeepBlockAttrName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;Array.isArray(e)?e.forEach((function(e){t.ignoreAttrNames.add(e)})):this.ignoreAttrNames.add(e)}}),Object.defineProperty(t.prototype,"getKeepBlockAttrNames",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Array.from(this.ignoreAttrNames)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.ignoreAttrNames.clear()}}),t}(r(4227).IFormatKernelService);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3511),l=r(3457),c=a(r(4661)),s=r(4662),f=r(4228),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return i.SelectionUtil.isInCard(t)||i.SelectionUtil.isInHole(t)?i.Command.UNAVAILABLE:i.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.getState(e)===i.Command.UNAVAILABLE)return null;var t=e.getSelection(),r=t.firstRange.start.node,n=i.NodeUtil.closest(t.firstRange.start.node,i.Category.Block),o=null,a=null;n&&function(e,t){if(t.isCollapsed)return!0;var r=i.RangeUtil.enlargeRangeInBlockNode(e,t.firstRange);if(r.start.node===r.end.node&&r.start.node.hasCategory(i.Category.Block)&&0===r.start.offset&&r.end.offset===r.end.node.childCount)return!0;return!1}(e,t)&&(o=n.nodeName,a=(0,u.cloneObject)(n.attrs));var l=null;return r.isTextNode()&&(l=(0,u.cloneObject)(r.attrs)),new c.default({blockNodeName:o,blockNodeAttrs:a,textAttrs:l})}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!t)return!1;var r=e.newJob(),n=(0,s.execFormat)(r,r.getSelection(),t.getData(),this.plugin.service.getKeepBlockAttrNames());return r.setSelection(n),e.commitJob(r),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:f.pluginRegister.command.paintFormat}),t}(l.KernelAbstractCommand);t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=function(){function e(e){Object.defineProperty(this,"_formatData",{enumerable:!0,configurable:!0,writable:!0,value:e}),n.assert.fatal(e,"plugins/format-painter/src/kernel/paint-format-data.ts:12")}return Object.defineProperty(e.prototype,"getData",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._formatData}}),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.execFormat=void 0;var n=r(3453),o=r(3454);function a(e,t,r,o){return t.cloneByRange(t.ranges.map((function(t){return n.RangeUtil.replaceBlockNodeAndContentTextAttr(e,t,r.blockNodeName||void 0,r.blockNodeAttrs||void 0,r.textAttrs||void 0,o)})))}t.execFormat=function(e,t,r,i){if(t.isCardSelection)return t;if(n.SelectionUtil.isUnbreakable(t))return a(e,t,r,i);var u=t.firstRange;if(u.collapsed&&u.start.node.hasCategory([n.Category.Hole,n.Category.TableHole]))return t;if(u.collapsed){if(!n.NodeUtil.closest(u.start.node,n.Category.Block)){o.assert.fatal(u.start.node.hasCategory([n.Category.Root,n.Category.LikeRoot]),"plugins/format-painter/src/kernel/commands/helper/exec-format.ts:40");var l=n.PositionUtil.makeSureAtInput(e,u.start);return a(e,e.newSelection(e.newRange(l)),r,i)}return a(e,t,r,i)}var c=u.start.node,s=u.end.node,f=n.NodeUtil.closest(c,n.Category.Block),d=n.NodeUtil.closest(s,n.Category.Block);return f&&d&&f===d?function(e,t,r){var o=r.textAttrs,a=n.RangeUtil.splitTextContent(e,t.firstRange);return n.RangeUtil.walkRange(a,(function(t){if(t.isTextNode()){var r=t.attrs;Object.keys(r).forEach((function(r){e.removeAttribute(t,r)})),o&&Object.keys(o).forEach((function(r){e.setAttribute(t,r,o[r])}))}})),t.cloneByRange(a)}(e,t,r):a(e,t,r,i)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3454),l=r(3763),c=r(3466),s=r(3493),f=r(3463),d=a(r(3845)),p=r(3519),h=a(r(4664)),y=r(4229),b=r(4665),m=r(4666),v=a(r(4667)),g=a(r(4668)),_=a(r(4669)),w=a(r(4670)),O=a(r(4671)),E=a(r(4672)),P=r(4673),j=a(r(4674)),C=r(4675),k=a(r(4676)),S=a(r(4677)),A=a(r(4679)),x={"#":"h1","##":"h2","###":"h3","####":"h4","#####":"h5","######":"h6"},N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_selections",{enumerable:!0,configurable:!0,writable:!0,value:[]}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;e.registerElement((0,m.getHeadingNodeSchema)(this)),e.registerAttr(h.default),(0,l.bindEvent)(this,this.editing,"collabSelectionChange",(function(e){var r=e.selections;t._selections=r}))}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.kernel,r=t.getService(c.IHTMLKernelService.ID);r&&r.registerHTMLNodeReader(j.default.NodeNames,new j.default(t));var n=t.getService(c.IHTMLKernelService.ID);n&&n.registerNodeHTMLWriter(S.default.NodeNames,new S.default(t));var o=t.getService(s.IINodeReaderKernelService.ID);o&&o.registerINodeNodeReader(C.INodeHeadingReader.NodeNames,new C.INodeHeadingReader(this.option.folding));var a=t.getService(f.ILakeKernelService.ID);a&&a.registerLakeNodeReader(k.default.NodeNames,new k.default(t,this.option.folding));var u=t.getService(f.ILakeKernelService.ID);u&&u.registerLakeNodeWriter(A.default.NodeNames,new A.default(this.option.folding));var l=t.getService(p.IMarkdownKernelService.ID);l&&Object.keys(x).forEach((function(t){var r=x[t];l.registerMarkdownMatcher(p.TriggerType.whiteSpace,new d.default(e.editing,t,(function(t,n,o){var a=t.newSelection([t.newRange(t.newPosition(o,0))]);a=n.nodeName!==r?i.SelectionUtil.replaceBlockNode(t,a,(function(t,n){var o={};return Object.keys(null==n?void 0:n.attrs).forEach((function(a){var i,u;if(null===(i=e.service)||void 0===i?void 0:i.keepAttrNames.includes(a)){var l=e.service.getValueProcess(a)(t,null===(u=null==n?void 0:n.attrs)||void 0===u?void 0:u[a]);t.acceptAttr(r,a,l)&&(o[a]=l)}})),(null==n?void 0:n.hasCategory(i.Category.Heading))?t.createElement(r,o,n.id):t.createElement(r,o)}),!1,y.HeadingKeepTextAttrs):i.SelectionUtil.replaceBlockNode(t,a,t.createElement("p"),!1,y.HeadingKeepTextAttrs),i.SelectionUtil.unCollapseAll(t,a),t.setSelection(a)})))}))}}),Object.defineProperty(t.prototype,"getOtherSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._selections}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._selections=[]}}),Object.defineProperty(t.prototype,"getHeadingFontSize",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return u.assert.fatal(this.kernel.hasExtendMethod("getTypographyDetail"),"plugins/heading/src/kernel/index.ts:189"),this.kernel.getTypographyDetail()[e]}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:P.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:v.default}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:b.HeadingKernelService}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[E.default,w.default,_.default,g.default,O.default]}),t}(i.KernelPlugin);t.default=N},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeadingAttrSchema=void 0;var n=r(3453);t.HeadingAttrSchema={collapsed:{targets:[n.Category.Heading],values:["true","false"]}},t.default=t.HeadingAttrSchema},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HeadingKernelService=void 0;var i=a(r(4230)),u=function(e,t){return t},l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_keepAttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"_valueProcessMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),t}return o(t,e),Object.defineProperty(t.prototype,"keepAttrNames",{get:function(){return this._keepAttrNames},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getValueProcess",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._valueProcessMap.get(e)||u}}),Object.defineProperty(t.prototype,"registerStyleKeepBlockAttrs",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=u),this._keepAttrNames.includes(e)||(this._valueProcessMap.set(e,t),this._keepAttrNames.push(e))}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._keepAttrNames.length=0}}),t}(i.default);t.HeadingKernelService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHeadingNodeSchema=void 0;var n=r(3453),o=r(4010);t.getHeadingNodeSchema=function(e){var t={bold:function(e){return!e},fontsize:function(t,r,n){return t||e.getHeadingFontSize(n)}};return{h1:{id:o.generateHashID,parents:["#root",n.Category.LikeRoot],category:[n.Category.Block,n.Category.Heading,n.Category.AttrContext,n.Category.Clean,n.Category.TextContainer,n.Category.Brick],contextAttr:t},h2:{id:o.generateHashID,parents:["#root",n.Category.LikeRoot],category:[n.Category.Block,n.Category.Heading,n.Category.AttrContext,n.Category.Clean,n.Category.TextContainer,n.Category.Brick],contextAttr:t},h3:{id:o.generateHashID,parents:["#root",n.Category.LikeRoot],category:[n.Category.Block,n.Category.Heading,n.Category.AttrContext,n.Category.Clean,n.Category.TextContainer,n.Category.Brick],contextAttr:t},h4:{id:o.generateHashID,parents:["#root",n.Category.LikeRoot],category:[n.Category.Block,n.Category.Heading,n.Category.AttrContext,n.Category.Clean,n.Category.TextContainer,n.Category.Brick],contextAttr:t},h5:{id:o.generateHashID,parents:["#root",n.Category.LikeRoot],category:[n.Category.Block,n.Category.Heading,n.Category.AttrContext,n.Category.Clean,n.Category.TextContainer,n.Category.Brick],contextAttr:t},h6:{id:o.generateHashID,parents:["#root",n.Category.LikeRoot],category:[n.Category.Block,n.Category.Heading,n.Category.AttrContext,n.Category.Clean,n.Category.TextContainer,n.Category.Brick],contextAttr:t}}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3464)),a={anchor:!1,folding:!0},i=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=(0,o.default)({},a,e)}return Object.defineProperty(e.prototype,"anchor",{get:function(){return this._option.anchor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"folding",{get:function(){return this._option.folding},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"heading"}),e}();t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3995),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return t.isCardSelection||t.isTableSelection?a.Command.UNAVAILABLE:t.firstRange.start.node.closest(a.Category.Heading)?a.Command.NOT_EXECUTED:a.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob();if(this.getState(t)===a.Command.UNAVAILABLE)return e.cancelJob(t),!1;var r=t.getSelection();r.collapsed||(r=a.SelectionUtil.deleteContent(t,r)),i.assert.fatal(r.collapsed,"plugins/heading/src/kernel/commands/heading-break-line-command.ts:54");var n,o=r.firstRange.start.node.closest(a.Category.Heading);if("true"===o.attrs.collapsed&&function(e,t){var r=e.node;if(!e.isAtEnd)return!1;for(;r;){if(r===t)return!0;if(!r.parent||r!==r.parent.lastChild)return!1;r=r.parent}return!1}(r.firstRange.start,o)){var u=t.createElement(o.nodeName),c=a.NodeUtil.getLastNodeBelongsToHeadingNode(o);t.insertAfter(c.parent,u,c),n=t.newPosition(u,0)}else(0,l.isAtElementStart)(r.firstRange.start)?n=a.PositionUtil.breakLine(t,r.firstRange.start,!0):("true"===o.attrs.collapsed&&t.setAttribute(o,"collapsed","false"),n=a.PositionUtil.breakLine(t,r.firstRange.start));return t.setSelection([t.newRange(n)]),e.commitJob(t),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:"headingBreakLine"}),t}(u.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o=e.getNodeById(t);if(!o||!o.hasCategory(i.Category.Heading))return!1;var u=this.plugin.getOtherSelection();try{for(var l=a(u),c=l.next();!c.done;c=l.next()){var s=c.value.selection.firstRange,f=s.start,d=s.end;if(i.NodeUtil.isBelongsToHeadingNode(f.node,o)||i.NodeUtil.isBelongsToHeadingNode(d.node,o))return!1}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return!0}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:"headingCollapsable"}),t}(r(3457).KernelAbstractCommand);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o=e.newJob(),u=o.getNodeById(t);if(!u||!u.hasCategory(i.Category.Heading))return e.cancelJob(o),!1;var l=this.plugin.getOtherSelection();try{for(var c=a(l),s=c.next();!s.done;s=c.next()){var f=s.value.selection.firstRange,d=f.start,p=f.end;if(i.NodeUtil.isBelongsToHeadingNode(d.node,u)||i.NodeUtil.isBelongsToHeadingNode(p.node,u))return e.cancelJob(o),!1}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}var h="true"===u.attrs.collapsed;if(o.setAttribute(u,"collapsed",h?"false":"true"),!h){var y=o.getSelection().firstRange;d=y.start,p=y.end;if(i.NodeUtil.isBelongsToHeadingNode(d.node,u)||i.NodeUtil.isBelongsToHeadingNode(p.node,u)){var b=o.selectNodeContents(u);o.setSelection([o.newRange(b.firstRange.end)])}}return e.commitJob(o),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:"headingCollapsed"}),t}(r(3457).KernelAbstractCommand);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o=e.newJob(),u=o.getNodeById(t);if(!u)return e.cancelJob(o),!1;var l=i.NodeUtil.getAncestorHeadingNodes(u);try{for(var c=a(l),s=c.next();!s.done;s=c.next()){var f=s.value;"true"===f.attrs.collapsed&&o.setAttribute(f,"collapsed","false")}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return e.commitJob(o),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:"headingUnfold"}),t}(r(3457).KernelAbstractCommand);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3513),l=r(3465),c=r(4229),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(e.prototype.getState.call(this,t)===l.COMMAND_UNAVAILABLE)return l.COMMAND_UNAVAILABLE;var r=t.getSelection().firstRange,n=r.start,o=r.end;return n.node.closest(a.Category.OnlyText)||o.node.closest(a.Category.OnlyText)?l.COMMAND_UNAVAILABLE:l.COMMAND_NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=!1,r=new Set;return i.SelectionUtil.fullWalkSelection(e.getSelection(),{enter:function(e){return!t&&(e.hasCategory([a.Category.Hole])?(t=!0,!1):(e.hasCategory(a.Category.Block)&&r.add(e.nodeName),r.size>1?(t=!0,!1):void 0))}}),t||r.size>1?"mixed":Array.from(r)[0]||"p"}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,n=e.newJob(),o=n.getSelection(),u=i.SelectionUtil.replaceBlockNode(n,o,(function(e,n){var o={};return Object.keys((null==n?void 0:n.attrs)||{}).forEach((function(a){var i,u;if(null===(i=r.plugin.service)||void 0===i?void 0:i.keepAttrNames.includes(a)){var l=r.plugin.service.getValueProcess(a)(e,null===(u=null==n?void 0:n.attrs)||void 0===u?void 0:u[a]);e.acceptAttr(t,a,l)&&(o[a]=l)}})),(null==n?void 0:n.hasCategory(a.Category.Heading))?e.createElement(t,o,n.id):e.createElement(t,o)}),!1,c.HeadingKeepTextAttrs);return i.SelectionUtil.unCollapseAll(n,o),n.setSelection(u),e.commitJob(n),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:"style"}),t}(u.GeneralCommandV2);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"heading",toolbar:{style:"style"},cardSelect:{h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6"}})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._kernel=t,r}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.name;e.setNode(i.default.createElement(r)),e.setIgnoreAttrs("bold","fontsize")}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["h1","h2","h3","h4","h5","h6"]}),t}(a(r(3494)).default);t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INodeHeadingReader=void 0;var n=function(){function e(e){void 0===e&&(e=!1),Object.defineProperty(this,"_allowFolding",{enumerable:!0,configurable:!0,writable:!0,value:e})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;this._allowFolding||null===(r=t.attrs)||void 0===r||delete r.collapsed,e.setNode(t)}}),Object.defineProperty(e,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["h1","h2","h3","h4","h5","h6"]}),e}();t.INodeHeadingReader=n},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3458)),a=function(){function e(e,t){void 0===t&&(t=!1),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_allowFolding",{enumerable:!0,configurable:!0,writable:!0,value:t})}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n={};"true"===(null===(r=t.attrs)||void 0===r?void 0:r.collapsed)&&this._allowFolding&&(n.collapsed="true"),e.setNode(o.default.createElement(t.name,n))}}),Object.defineProperty(e,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["h1","h2","h3","h4","h5","h6"]}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(3470)),l=r(3855),c=i(r(4678)),s=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._kernel=t,r}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=t.name;e.isInlineMode()&&(r=this._getTypography()===l.TypographyEnum.TRADITIONAL?a({},c.default[l.TypographyEnum.TRADITIONAL][n]):a({},c.default[l.TypographyEnum.CLASSIC][n]));e.setNode(e.createElement(n,{style:r}))}}),Object.defineProperty(t.prototype,"_getTypography",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._kernel.hasExtendMethod("getTypographyName")?this._kernel.getTypographyName():l.TypographyEnum.TRADITIONAL}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["h1","h2","h3","h4","h5","h6"]}),t}(u.default);t.default=s},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0});var o=r(3855);t.default=((n={})[o.TypographyEnum.TRADITIONAL]={h1:{fontSize:"28px",lineHeight:"36px",margin:"7px 0"},h2:{fontSize:"24px",lineHeight:"32px",margin:"7px 0"},h3:{fontSize:"20",lineHeight:"28px",margin:"7px 0"},h4:{fontSize:"16px",lineHeight:"24px",margin:"7px 0"},h5:{fontSize:"15px",lineHeight:"24px",margin:"7px 0"},h6:{fontSize:"15px",lineHeight:"24px",margin:"7px 0",fontWeight:"normal"}},n[o.TypographyEnum.CLASSIC]={h1:{fontSize:"28px",lineHeight:"36px",margin:"26px 0 10px 0"},h2:{fontSize:"24px",lineHeight:"32px",margin:"21px 0 5px 0"},h3:{fontSize:"20",lineHeight:"28px",margin:"16px 0 5px 0"},h4:{fontSize:"16px",lineHeight:"24px",margin:"10px 0 5px 0"},h5:{fontSize:"15px",lineHeight:"24px",margin:"8px 0 5px 0"},h6:{fontSize:"15px",lineHeight:"24px",margin:"8px 0 5px 0",fontWeight:"normal"}},n)},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){void 0===t&&(t=!1);var r=e.call(this)||this;return Object.defineProperty(r,"_allowFolding",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=e.createElement(t.name);e.setNode(n),this._allowFolding&&"true"===(null===(r=t.attrs)||void 0===r?void 0:r.collapsed)&&e.setAttr("collapsed","true")}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["h1","h2","h3","h4","h5","h6"]}),t}(r(3499).LakeNodeWriter);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3763),l=r(4681),c=a(r(4683)),s=a(r(4684)),f=a(r(4685)),d=a(r(4686)),p=r(3920),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_stack",{enumerable:!0,configurable:!0,writable:!0,value:new c.default}),Object.defineProperty(t,"_context",{enumerable:!0,configurable:!0,writable:!0,value:{destroy:function(){}}}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,n=this._stack,o=this._context;(0,u.bindEvent)(o,e,"document.destroy",(function(){r._stack.clear()})),(0,u.bindEvent)(o,t,"contentchange",(function(e){"user"===e.mode&&(e.isCommitted?n.add({operations:e.operations,selection:e.selection,previousSelection:e.previousSelection}):n.append({operations:e.operations,selection:e.selection,previousSelection:e.previousSelection}))})),(0,u.bindEvent)(o,t,"selectionchange",(function(e){e.pure&&r._stack.closeFrame()}))}}),Object.defineProperty(t.prototype,"disable",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:p.pluginRegister.pluginName}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:l.HistoryService}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[s.default,d.default,f.default]}),t}(i.KernelPlugin);t.default=h},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryService=void 0;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_context",{enumerable:!0,configurable:!0,writable:!0,value:t.plugin._context}),Object.defineProperty(t,"disableHistory",{enumerable:!0,configurable:!0,writable:!0,value:function(){var e,r;null===(r=(e=t._context).destroy)||void 0===r||r.call(e),t.plugin._stack.clear(),delete t._context.destroy}}),Object.defineProperty(t,"lockHistory",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.plugin._stack.lock()}}),Object.defineProperty(t,"unlockHistory",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.plugin._stack.unlock()}}),t}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(r(4682).IHistoryService);t.HistoryService=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IHistoryService=void 0;var a=r(3472),i=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("IHistoryService")}),t}(r(3475).KernelAbstractService);t.IHistoryService=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=function(){function e(){Object.defineProperty(this,"_index",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_lockIndex",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_preventForward",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_capacity",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stack",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_frameClosed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}return Object.defineProperty(e.prototype,"lock",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._preventForward=!0,this._lockIndex=this._index}}),Object.defineProperty(e.prototype,"unlock",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._preventForward=!1,this._lockIndex=-1}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._index=-1,this._lockIndex=-1,this._capacity=0,this._stack=[],this._frameClosed=!1}}),Object.defineProperty(e.prototype,"canForward",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._index+1<this._capacity&&!this._preventForward}}),Object.defineProperty(e.prototype,"canBackward",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._index>-1&&this._index>this._lockIndex}}),Object.defineProperty(e.prototype,"add",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._addFrame(e),this._frameClosed=!0}}),Object.defineProperty(e.prototype,"append",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this._frameClosed||-1===this._index)return this._addFrame(e),void(this._frameClosed=!1);var t=this._stack[this._index];t.operations=t.operations.concat(e.operations),t.selection=e.selection}}),Object.defineProperty(e.prototype,"closeFrame",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._frameClosed=!0}}),Object.defineProperty(e.prototype,"_addFrame",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._index++,this._preventForward=!1,this._stack[this._index]=e,this._capacity=this._index+1}}),Object.defineProperty(e.prototype,"forward",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.canForward()?(this._frameClosed=!0,this._index++,this._stack[this._index]):null}}),Object.defineProperty(e.prototype,"backward",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.canBackward())return null;this._frameClosed=!0;var e=this._stack[this._index];return this._index--,e}}),Object.defineProperty(e.prototype,"rollback",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(void 0===e&&(e=1),n.assert.fatal(e>=1,"plugins/history/src/kernel/stack.ts:98"),-1===this._index)return null;this._frameClosed=!0;for(var t=[],r=0;r<e;r++)t.push(this._stack.pop()),this._index--;return this._capacity=this._index+1,t}}),e}();t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3920),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.plugin._stack.canForward()?a.Command.NOT_EXECUTED:a.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.plugin._stack;if(!t.canForward())return!1;var r=t.forward(),n=e.newJob(a.JobMode.History);return r.operations.forEach((function(e){return e.apply(n)})),n.dangerDirectSetSelection(r.selection),e.commitJob(n),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.redo}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3920),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_stack",{enumerable:!0,configurable:!0,writable:!0,value:t.plugin._stack}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._stack.canBackward()?a.Command.NOT_EXECUTED:a.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=1);var r=this._stack;if(!r.canBackward())return!1;var n=r.rollback(t),o=e.newJob(a.JobMode.History);return n.forEach((function(e){e.operations.slice().reverse().forEach((function(e){return e.reverse(o)})),o.dangerDirectSetSelection(e.previousSelection)})),e.commitJob(o),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.rollbackHistory}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3920),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_stack",{enumerable:!0,configurable:!0,writable:!0,value:t.plugin._stack}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._stack.canBackward()?a.Command.NOT_EXECUTED:a.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._stack;if(!t.canBackward())return!1;var r=t.backward(),n=e.newJob(a.JobMode.History);return r.operations.slice().reverse().forEach((function(e){return e.reverse(n)})),n.dangerDirectSetSelection(r.previousSelection),e.commitJob(n),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.undo}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3921),c=r(3463),s=a(r(3845)),f=r(3519),d=a(r(4691)),p=r(4232),h=a(r(4692)),y=a(r(4693)),b=a(r(4694)),m=a(r(4695)),v=a(r(4696)),g=a(r(3635)),_=a(r(4697)),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerBlockCard(t.cardName)}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,r,n,o,a,d,p=this.kernel;null===(e=p.getService(u.IHTMLKernelService.ID))||void 0===e||e.registerHTMLNodeReader(h.default.NodeNames,new h.default),null===(t=p.getService(l.INodeReaderKernelService.ID))||void 0===t||t.registerINodeCardReader(y.default.CardName,new y.default),null===(r=p.getService(u.IHTMLKernelService.ID))||void 0===r||r.registerNodeHTMLWriter(m.default.NodeNames,new m.default),null===(n=p.getService(c.ILakeKernelService.ID))||void 0===n||n.registerLakeCardReader("hr",new b.default),null===(o=p.getService(c.ILakeKernelService.ID))||void 0===o||o.registerLakeCardWriter("hr",new v.default),null===(a=p.getService(g.default.ID))||void 0===a||a.registerMarkdownWriter("hr",new _.default),null===(d=p.getService(f.IMarkdownKernelService.ID))||void 0===d||d.registerMarkdownMatcher(f.TriggerType.enter,new s.default(this.editing,/^[-*_—*]{3,6}$/,(function(e,t){var r=i.CardUtil.insertCardNode(e,e.newSelection([e.newRange(e.newPosition(t,0))]),"hr",null).cardNode;e.setSelection(e.newSelection(e.newRange(e.newPosition(r.parentNode,r.offset+1))))})))}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:p.pluginRegister.pluginName}),Object.defineProperty(t,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:"hr"}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[d.default]}),t}(i.KernelPlugin);t.default=w},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(4198),a=n(r(3458)),i=r(4689),u=r(4690),l=function(){function e(e){Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_cardReader",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_cardPreReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_nodePreReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_nodeReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._kernel,delete this._cardReader,delete this._cardPreReaders,delete this._nodePreReaders,delete this._nodeReaders}}),Object.defineProperty(e.prototype,"registerNodePreReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){r._nodePreReaders[e]||(r._nodePreReaders[e]=[]),r._nodePreReaders[e].push(t)}))}}),Object.defineProperty(e.prototype,"registerNodeReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){r._nodeReaders[e]||(r._nodeReaders[e]=[]),r._nodeReaders[e].push(t)}))}}),Object.defineProperty(e.prototype,"registerCardPreReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._cardPreReaders[e]=t}}),Object.defineProperty(e.prototype,"registerCardReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._cardReader[e]=t}}),Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o,l=this;o="string"==typeof t?JSON.parse(t):t;var c=Array.isArray(o);c||(o=[o]);var s=a.default.createFragment(o);return o.map((function(e){return l._walkNode(new i.INodePreReadContext(r),new u.INodeReadContext(r),s,e)})),(null===(n=s.children)||void 0===n?void 0:n.length)?c?(console.warn("Deprecated, fix me"),s.children):s.children[0]:null}}),Object.defineProperty(e.prototype,"_walkNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(n.id&&!(0,o.isValidId)(n.id)&&delete n.id,"text"!==n.type)return"card"!==n.type?this._walkElement(e,t,r,n):this._walkCard(e,t,r,n)}}),Object.defineProperty(e.prototype,"_walkElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=this,i=n.name,u=this._nodePreReaders[i];if(u&&u.some((function(t){return!1===t.read(e.getChildContext(r),n)})))a.default.removeChild(r,n);else{var l=this._nodeReaders[i];l&&l.some((function(e){return!1===e.read(t.getChildContext(r),n)}))?a.default.removeChild(r,n):n.children&&n.children.forEach((function(a){o._walkNode(e.getChildContext(r),t.getChildContext(r),n,a)}))}}}),Object.defineProperty(e.prototype,"_walkCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o,i=n.name,u=this._cardPreReaders[i],l=(null===(o=r.children)||void 0===o?void 0:o.indexOf(n))||-1;u&&!1===u.read(e.getChildContext(r),n)&&a.default.removeChild(r,n);var c=this._cardReader[i]||this._cardReader["*"];if(c){var s=t.getChildContext(r);(!1===c.read(s,n)||s.node)&&(s.node?r.children.splice(l,1,s.node):r.children.splice(l,1))}else a.default.removeChild(r,n)}}),e}();t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.INodePreReadContext=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getChildContext",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=new t(a({},this._option));return r._state=this._state,r._parentNode=e,r}}),t}(r(4231)._INodeContext);t.INodePreReadContext=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.INodeReadContext=void 0;var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_node",{enumerable:!0,configurable:!0,writable:!0,value:null}),t}return o(t,e),Object.defineProperty(t.prototype,"getChildContext",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=new t(a({},this._option));return r._state=this._state,r._parentNode=e,r}}),Object.defineProperty(t.prototype,"node",{get:function(){return this._node},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._node=e}}),t}(r(4231)._INodeContext);t.INodeReadContext=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(4232),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return a.SelectionUtil.isUnbreakable(t)?a.Command.UNAVAILABLE:a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===t&&(t={}),void 0===r&&(r=!1);var n=e.newJob();if(this.getState(n)===a.Command.UNAVAILABLE)return e.cancelJob(n),!1;var o=a.CardUtil.insertCardNode(n,n.getSelection(),"hr",t),i=o.selection,u=o.cardNode;return r?n.setSelection([n.newRange(n.newPosition(u,0))]):n.setSelection(i),e.commitJob(n),u.id}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.hr}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setNode(i.default.createCard("hr")),e.freeze()}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["hr"]}),t}(a(r(3494)).default);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"hr"}),t}(a(r(3500)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=i.default.createCard("hr",r,n);e.setNode(o)}}),t}(r(3481).LakeCardReader);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={};e.isInlineMode()&&(t={backgroundColor:"#e8e8e8",border:"1px solid transparent",margin:"18px 0"}),e.setNode(e.createElement("hr",{className:"ne-hr",style:t}))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["hr"]}),t}(a(r(3470)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.createBlockCard("hr",r,n);e.setNode(o)}}),t}(a(r(3547)).default);t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.append("---\n\n"),!0}}),e}();t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._kernel=t,r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._kernel.readData("text/html",e,t)}}),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.document.getINode(t);return this._kernel.writeData("text/html",r,t)}}),t}(r(3453).DataSource);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLKernelService=void 0;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"reader",{get:function(){return this.plugin.htmlReader},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"writer",{get:function(){return this.plugin.htmlWriter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return this.reader.read(e,t,r)}}),Object.defineProperty(t.prototype,"registerHTMLAttributeReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.reader.registerAttrReader(e,t)}}),Object.defineProperty(t.prototype,"registerHTMLNodeReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.reader.registerNodeReader(e,t)}}),Object.defineProperty(t.prototype,"registerPreHTMLAttributeReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.reader.registerPreAttrReader(e,t)}}),Object.defineProperty(t.prototype,"registerPreHTMLNodeReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.reader.registerPreNodeReader(e,t)}}),Object.defineProperty(t.prototype,"registerPreHTMLStyleReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.reader.registerPreStyleReader(e,t)}}),Object.defineProperty(t.prototype,"registerHTMLStyleReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.reader.registerStyleReader(e,t)}}),Object.defineProperty(t.prototype,"registerAttrHTMLWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.writer.registerAttrWriter(e,t)}}),Object.defineProperty(t.prototype,"registerNodeHTMLWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.writer.registerNodeWriter(e,t)}}),Object.defineProperty(t.prototype,"registerPreTextWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.writer.registerPreTextWriter(e)}}),t}(r(3466).IHTMLKernelService);t.HTMLKernelService=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4701),o=r(4704),a=r(4234),i=function(){function e(e){Object.defineProperty(this,"pluginOption",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_nodeReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_attrReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_styleReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_preNodeReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_preAttrReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_preStyleReaders",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var i=(0,a.parseToNodeTree)(t.trim());return(0,n.transform)(e,this,(0,o.filterHTMLNodes)(i),this.pluginOption,r)}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._nodeReaders=null,this._attrReaders=null,this._styleReaders=null,this._preNodeReaders=null,this._preAttrReaders=null,this._preStyleReaders=null}}),Object.defineProperty(e.prototype,"registerNodeReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._addReader(this._nodeReaders,e,t)}}),Object.defineProperty(e.prototype,"registerAttrReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._addReader(this._attrReaders,e,t)}}),Object.defineProperty(e.prototype,"registerStyleReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._addReader(this._styleReaders,e,t)}}),Object.defineProperty(e.prototype,"registerPreNodeReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._addReader(this._preNodeReaders,e,t)}}),Object.defineProperty(e.prototype,"registerPreAttrReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._addReader(this._preAttrReaders,e,t)}}),Object.defineProperty(e.prototype,"registerPreStyleReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._addReader(this._preStyleReaders,e,t)}}),Object.defineProperty(e.prototype,"getNodeReaders",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._getReader(this._nodeReaders,e)}}),Object.defineProperty(e.prototype,"getAttrReaders",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._getReader(this._attrReaders,e)}}),Object.defineProperty(e.prototype,"getStyleReaders",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._getReader(this._styleReaders,e)}}),Object.defineProperty(e.prototype,"getPreNodeReaders",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._getReader(this._preNodeReaders,e)}}),Object.defineProperty(e.prototype,"getPreAttrReaders",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._getReader(this._preAttrReaders,e)}}),Object.defineProperty(e.prototype,"getPreStyleReaders",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._getReader(this._preStyleReaders,e)}}),Object.defineProperty(e.prototype,"_addReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){(t=Array.isArray(t)?t:[t]).forEach((function(t){e[t]||(e[t]=[]),e[t].push(r)}))}}),Object.defineProperty(e.prototype,"_getReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e[t]||null}}),e}();t.default=i},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.transform=t.TransformContext=void 0;var a=r(3453),i=r(3454),u=r(3598),l=r(3849),c=o(r(3458)),s=r(4702),f=r(4703),d="#block",p={head:!0,link:!0,meta:!0,script:!0},h=function(){function e(e,t,r){Object.defineProperty(this,"_strictMode",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_meta",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_inSkipMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_skipNode",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_parentNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_walkContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_attrs",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_ignoreAttrs",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_mainNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_anonymousNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_leaveHook",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_isFreeze",{enumerable:!0,configurable:!0,writable:!0,value:!1}),i.assert.fatal(t,"plugins/html-data-source/src/kernel/lib/reader/helpers/transform.ts:52"),this._kernel=e,this._parentNode=t,this._walkContext=r}return Object.defineProperty(e.prototype,"theme",{get:function(){return this._kernel.theme},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this._parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newChildContext",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=new e(this._kernel,this._contentNode||this._anonymousNode,t);return r._attrs=n(n({},this._contentNode?this._contentNode.attrs:{}),this._attrs),r._state=n({},this._state),r._meta=this._meta,r._skipNode=this._skipNode,r._strictMode=this._strictMode,r}}),Object.defineProperty(e.prototype,"setSkipMode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._inSkipMode=e}}),Object.defineProperty(e.prototype,"getSkipMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._inSkipMode}}),Object.defineProperty(e.prototype,"addSkipNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.forEach((function(t){e._skipNode.push(t)}))}}),Object.defineProperty(e.prototype,"testIsSkipNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._skipNode.indexOf(e)>-1}}),Object.defineProperty(e.prototype,"removeSkipNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._skipNode.indexOf(e);return t>-1&&this._skipNode.splice(t,1),t>-1}}),Object.defineProperty(e.prototype,"getMeta",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._meta[e]}}),Object.defineProperty(e.prototype,"setMeta",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._meta[e]=t}}),Object.defineProperty(e.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return(0,u.hasOwnProperty)(this._state,e)?this._state[e]:t}}),Object.defineProperty(e.prototype,"freeze",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._isFreeze=!0}}),Object.defineProperty(e.prototype,"setStrictMode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;e=!!e,this._strictMode=e,null===(t=this._walkContext)||void 0===t||t.setStrictMode(e)}}),Object.defineProperty(e.prototype,"isStrictMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._strictMode}}),Object.defineProperty(e.prototype,"setIgnoreAttrs",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._ignoreAttrs||(this._ignoreAttrs=new Set),t.forEach((function(t){var r,n;null===(r=e._ignoreAttrs)||void 0===r||r.add(t),(null===(n=e._attrs)||void 0===n?void 0:n[t])&&delete e._attrs[t]}))}}),Object.defineProperty(e.prototype,"clearState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){delete this._state[e]}}),Object.defineProperty(e.prototype,"setState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._state[e]=t}}),Object.defineProperty(e.prototype,"addAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._ignoreAttrs&&this._ignoreAttrs.has(e)||(this._attrs||(this._attrs={}),this._attrs[e]=t)}}),Object.defineProperty(e.prototype,"removeAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._attrs&&delete this._attrs[e]}}),Object.defineProperty(e.prototype,"getAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._attrs?this._attrs[e]:this._mainNode&&this._mainNode.attrs?this._mainNode.attrs[e]:void 0}}),Object.defineProperty(e.prototype,"setNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._mainNode=e,this._contentNode=t||e}}),Object.defineProperty(e.prototype,"getParentNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._parentNode}}),Object.defineProperty(e.prototype,"getNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._mainNode}}),Object.defineProperty(e.prototype,"isAnonymousNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.name===d}}),Object.defineProperty(e.prototype,"isInlineNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!l.HTMLBlockTags[e]}}),Object.defineProperty(e.prototype,"isBlockNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!l.HTMLBlockTags[e]}}),Object.defineProperty(e.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;null===(e=this._walkContext)||void 0===e||e.stop()}}),Object.defineProperty(e.prototype,"_attachNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._mainNode?(this._attrs&&!this._isFreeze&&c.default.setAttribute(this._mainNode,this._attrs),this._parentNode&&c.default.appendChild(this._parentNode,this._mainNode)):this._addAnonymousNode(e,this._attrs)}}),Object.defineProperty(e.prototype,"_addAnonymousNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){"#text"===e.name?(this._strictMode&&(0,s.replaceWhiteSpace)(this,e),this._anonymousNode=c.default.createTextNode(e.data,this._isFreeze?null:t),this._parentNode&&c.default.appendChild(this._parentNode,this._anonymousNode)):l.HTMLBlockTags[e.name]?(this._anonymousNode=c.default.createElement(d,this._isFreeze?null:t),this._parentNode&&c.default.appendChild(this._parentNode,this._anonymousNode)):this._anonymousNode=this._parentNode}}),e}();t.TransformContext=h,t.transform=function(e,t,r,n,o){var a=c.default.createFragment(),u=function(e,t){var r=new h(e,t,null);return r._mainNode=t,r._contentNode=t,r}(e,a),l=[u];return(0,f.walkHTMLNodes)(r,(function(e,r){var a,s=r.name;if("meta"===s&&(null===(a=r.attrs)||void 0===a?void 0:a.name)&&u.setMeta(r.attrs.name,r.attrs.content||""),!p[s]&&!u.getSkipMode())if(u.testIsSkipNode(r))u.setSkipMode(!0);else{var f=l[l.length-1].newChildContext(e);l.push(f);var d=t.getPreNodeReaders(s);d&&d.forEach((function(e){e.readNode(f,r,o)}));var h=r.attrs,y=r.style,b=t.getNodeReaders(s);b&&b.some((function(e){return f._leaveHook=function(){e.leaveNode(f),f.isStrictMode()&&!(null==n?void 0:n.readEmptyLine)&&function(e){var t,r;if(e._parentNode===(e._mainNode||e._anonymousNode))return;var n=e._contentNode||e._mainNode||e._anonymousNode;if(i.assert.fatal(n,"plugins/html-data-source/src/kernel/lib/reader/helpers/transform.ts:501"),!n)return;if("table"===n.name||"tr"===n.name||"td"===n.name||"th"===n.name)return;if("tli"===n.name)return;if(function(e){var t,r;if(c.default.isTextNode(e))return 0===(null===(t=e.data)||void 0===t?void 0:t.length);if(c.default.isCardNode(e))return!1;if(!(null===(r=e.children)||void 0===r?void 0:r.length))return!0;return!1}(n)){var o=null===(r=null===(t=e._parentNode)||void 0===t?void 0:t.children)||void 0===r?void 0:r.indexOf(n);void 0!==o&&o>-1&&e._parentNode.children.splice(o,1)}}(f)},!1!==e.readNode(f,r)})),h&&Object.keys(h).forEach((function(e){var n=t.getPreAttrReaders(e),o=t.getAttrReaders(e),a=h[e];n&&n.forEach((function(t){a=t.readAttr(f,e,a,r)})),o&&o.some((function(t){return t.readAttr(f,e,a,r)}))})),y&&Object.keys(y).forEach((function(e){var n=t.getPreStyleReaders(e),o=t.getStyleReaders(e),a=y[e];n&&n.forEach((function(t){a=t.readStyle(f,e,a,r)})),o&&o.some((function(t){return t.readStyle(f,e,a,r)}))})),f._attachNode(r)}}),(function(e){if(!p[e.name]){if(u.testIsSkipNode(e))return u.removeSkipNode(e),void u.setSkipMode(!1);if(!u.getSkipMode()){var t=l.pop();t._leaveHook&&t._leaveHook()}}})),i.assert.fatal(1===l.length,"plugins/html-data-source/src/kernel/lib/reader/helpers/transform.ts:435"),function(e,t,r){for(var n=c.default.createFragment(),o=new y(t),a=0;a<t.children.length;a++)b(e,o,n,n,t,t.children[a]);return n.children&&v(n.children,r),n}(e,a,e.defaultElementName)};var y=function(){function e(e){Object.defineProperty(this,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._rootNode=e}return Object.defineProperty(e.prototype,"getSourceRoot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._rootNode}}),Object.defineProperty(e.prototype,"newChildContext",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return new e(t||this._rootNode)}}),e}();function b(e,t,r,n,o,u){if("br"!==u.name){if(n===r||u.name!==d){var l=c.default.cloneNode(u);return c.default.appendChild(n,l),void m(e,t,r,l,u)}if(n.name===d){var s=c.default.cloneNode(u);c.default.appendChild(n,s),"element"===u.type&&u.children&&m(e,t,r,s,u),i.assert.fatal(o,"plugins/html-data-source/src/kernel/lib/reader/helpers/transform.ts:595");var f=function(e,t){var r=e.children;if(!r)return[];var n=r.indexOf(t);return i.assert.fatal(-1!==n,"plugins/html-data-source/src/kernel/lib/reader/helpers/transform.ts:649"),n+=1,e.children=r.slice(0,n),r.slice(n)}(o,u);if(f.length){var p=c.default.cloneNode(o);c.default.appendChild(t.getSourceRoot(),p),f.forEach((function(e){c.default.appendChild(p,e)}))}}else if(e.hasCategory(n.name,a.Category.Block))m(e,t,r,n,u);else{var h=c.default.cloneNode(u);c.default.appendChild(n,h),m(e,t,r,h,u)}}else c.default.appendChild(n,c.default.createTextNode("\n"))}function m(e,t,r,n,o){if("element"===o.type&&o.children)for(var i=o.name,u=e.hasCategory(i,[a.Category.Root,a.Category.LikeRoot])?o:r,l=t.newChildContext(u),c=0;c<o.children.length;c++)b(e,l,r,n,o,o.children[c])}function v(e,t){e.forEach((function(e){if(e.name===d){if(!e.children||0===e.children.length)return;e.name=t}e.children&&v(e.children,t)}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceWhiteSpace=void 0;var n=r(3849);t.replaceWhiteSpace=function(e,t){var r,o,a,i;t.data=null===(o=null===(r=t.data)||void 0===r?void 0:r.replace(/[\r]+/,""))||void 0===o?void 0:o.replace(/\s/g,(function(e){return"\t"===e||"\n"===e||" "===e?e:" "})).replace(/ +/g," ").replace(/\u00a0/g," "),t.data=null===(a=t.data)||void 0===a?void 0:a.replace(/\n +/g,"\n"),function(e){var t=e.getParentNode();if(!t)return!1;var r=(null==t?void 0:t.children)||[];if(n.HTMLBlockTags[t.name]&&0===r.length)return!0;return!1}(e)&&(t.data=null===(i=t.data)||void 0===i?void 0:i.replace(/^ +/,""))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.walkHTMLNodes=void 0;var n=r(3454);function o(e,t,r,i,u){var l,c,s,f,d;if("#text"===r.name){var p=r.data;if(""===p||(null==e?void 0:e.isStrictModel())&&""===p.replace(/\s/g,(function(e){return"\t"===e||"\n"===e||" "===e?e:""}))){var h=t.children.indexOf(r);if(n.assert.fatal(-1!==h,"plugins/html-data-source/src/kernel/lib/reader/helpers/walk-html-nodes.ts:58"),0===h)return void(null===(l=t.children)||void 0===l||l.splice(h,1));if("#text"!==(null===(s=null===(c=t.children)||void 0===c?void 0:c[h-1])||void 0===s?void 0:s.name))return void(null===(f=t.children)||void 0===f||f.splice(h,1))}}if(!(null===(d=r.attrs)||void 0===d?void 0:d["lake-read-ignore"])){var y=a(e);i(y,r),y.isStopped()?u(r):r.children?(Array.from(r.children).forEach((function(e){o(y,r,e,i,u)})),u(r)):u(r)}}function a(e){var t=!1,r=!e||e.isStrictModel();return{stop:function(){t=!0},isStopped:function(){return t},setStrictMode:function(e){r=!!e},isStrictModel:function(){return r}}}t.walkHTMLNodes=function(e,t,r){Array.from(e).forEach((function(n){o(a(),{children:e},n,t,r)}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterHTMLNodes=void 0,t.filterHTMLNodes=function e(t){var r=[];return t.forEach((function(t){if("html"===t.name)r=r.concat(e(t.children)||[]);else if("head"===t.name){var n=(t.children||[]).filter((function(e){return"meta"===e.name}));r=r.concat(n||[])}else"body"===t.name?r=r.concat(t.children||[]):r.push(t)})),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_NODE_NAME=t.INLINE_NODE_NAME=t.BLOCK_NODE_NAME=t.ROOT_NODE_NAME=void 0,t.ROOT_NODE_NAME="#root",t.BLOCK_NODE_NAME="#block",t.INLINE_NODE_NAME="#inline",t.TEXT_NODE_NAME="#text"},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3453),a=r(3454),i=n(r(3458)),u=n(r(3599)),l=n(r(4707)),c=function(){function e(){Object.defineProperty(this,"_nodeWriters",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_attrWriters",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_preTextWriters",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._nodeWriters=null,this._attrWriters=null,this._preTextWriters=null}}),Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o=this;a.assert.fatal(i.default.isFragmentNode(t),"plugins/html-data-source/src/kernel/lib/writer/html-writer.ts:25");var c=u.default.createElement("#root"),f=new l.default(null,t,r);if(null===(n=t.children)||void 0===n||n.forEach((function(t){s(f,e,o,t)})),f.close(),f._appendTo(c),!c.children)return"";var d=c.children.map((function(e){return u.default.toHTML(e)})).join(""),p="";return e.hasExtendMethod("getTypographyName")&&(p=(p=e.getTypographyName())?' typography="'.concat(p,'"'):""),(null==r?void 0:r.htmlNoWrap)?d:'<div class="lake-content"'.concat(p,">").concat(d,"</div>")}}),Object.defineProperty(e.prototype,"registerNodeWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){var n;a.assert.fatal(!(null===(n=r._nodeWriters)||void 0===n?void 0:n[e]),"plugins/html-data-source/src/kernel/lib/writer/html-writer.ts:72"),r._nodeWriters[e]=t}))}}),Object.defineProperty(e.prototype,"registerAttrWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;Array.isArray(e)||(e=[e]),e.forEach((function(e){a.assert.fatal(!r._attrWriters[e],"plugins/html-data-source/src/kernel/lib/writer/html-writer.ts:86"),r._attrWriters[e]=t}))}}),Object.defineProperty(e.prototype,"registerPreTextWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._preTextWriters.push(e)}}),Object.defineProperty(e.prototype,"getNodeWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._nodeWriters[e]||null}}),Object.defineProperty(e.prototype,"getAttrWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._attrWriters[e]||null}}),Object.defineProperty(e.prototype,"getPreTextWriters",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._preTextWriters}}),e}();function s(e,t,r,n){var l;a.assert.fatal(!i.default.isFragmentNode(n),"plugins/html-data-source/src/kernel/lib/writer/html-writer.ts:114");var c=e.newChildContext(n),f=n.name,d=n.id,p=t.getNodeSchema(f),h=r.getNodeWriter(f);if(p){if(d&&(p.category.includes(o.Category.Block)||p.category.includes(o.Category.Card)||p.category.includes(o.Category.Table))&&c.addAttr("id",d),h)h.write(c,n);else if("text"===p.type){null===(l=r.getPreTextWriters())||void 0===l||l.forEach((function(e){e.preWrite({setAttribute:function(e,t){i.default.setAttribute(n,e,t)}},n)}));var y=u.default.createElement("span",{className:"ne-text"});c.appendChild(y,u.default.createTextNode(n.data)),c.setNode(y)}else p.category.includes(o.Category.Block)&&c.setNode(u.default.createElement("div"));var b=n.attrs;b&&Object.keys(b).forEach((function(e){!function(e,t,r,n){var o=t.getAttrWriter(r);o&&o.write(e,r,n)}(c,r,e,b[e])})),i.default.isElementNode(n)&&n.children&&n.children.forEach((function(e){s(c,t,r,e)})),h&&h.leaveNode(c),c.close()}}t.default=c},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3454),l=r(3914),c=i(r(3599)),s={mode:l.HTML_WRITER_MODE.CLEAN},f=function(){function e(e,t,r){Object.defineProperty(this,"_parentContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mainNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_wrapNode",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_contentNode",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_attrs",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_style",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_virtual",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._parentContext=e,this._inode=t,this._option=n(n({},s),r||{});var o=this._option.mode;u.assert.fatal(o===l.HTML_WRITER_MODE.INLINE||o===l.HTML_WRITER_MODE.CLEAN,"plugins/html-data-source/src/kernel/lib/writer/writer-context.ts:43")}return Object.defineProperty(e.prototype,"isInlineMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._option.mode===l.HTML_WRITER_MODE.INLINE}}),Object.defineProperty(e.prototype,"isCleanMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._option.mode===l.HTML_WRITER_MODE.CLEAN}}),Object.defineProperty(e.prototype,"isExport",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0===this._option.isExport}}),Object.defineProperty(e.prototype,"getExportType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._option.exportType}}),Object.defineProperty(e.prototype,"getDocMaxWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._option.docMaxWidth}}),Object.defineProperty(e.prototype,"previousSiblingContext",{get:function(){if(!this._parentContext)return null;var e=this._parentContext._children,t=e.indexOf(this);return u.assert.fatal(-1!==t,"plugins/html-data-source/src/kernel/lib/writer/writer-context.ts:76"),e[t-1]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSiblingContext",{get:function(){if(!this._parentContext)return null;var e=this._parentContext._children,t=e.indexOf(this);return u.assert.fatal(-1!==t,"plugins/html-data-source/src/kernel/lib/writer/writer-context.ts:89"),e[t+1]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inode",{get:function(){return this._inode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mainNode",{get:function(){return this._mainNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contentNode",{get:function(){return this._contentNode||this._mainNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"since",{get:function(){return this._option.since},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"setVirtual",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._virtual=!0}}),Object.defineProperty(e.prototype,"setState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._state[e]=t}}),Object.defineProperty(e.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._state[e]}}),Object.defineProperty(e.prototype,"setNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._mainNode=e,this._contentNode=t||e}}),Object.defineProperty(e.prototype,"addAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){u.assert.fatal(this._mainNode===this._contentNode,"plugins/html-data-source/src/kernel/lib/writer/writer-context.ts:130"),this._attrs||(this._attrs={}),this._attrs[e]=t}}),Object.defineProperty(e.prototype,"addStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._style||(this._style={}),this._style[e]=t}}),Object.defineProperty(e.prototype,"wrapNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){u.assert.fatal(this._mainNode,"plugins/html-data-source/src/kernel/lib/writer/writer-context.ts:148"),this._wrapNode.push(e)}}),Object.defineProperty(e.prototype,"newChildContext",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=new e(this,t,this._option);return r._state=n({},this._state),this._children.push(r),r}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._attrs=null,this._style=null,this._mainNode=null,this._contentNode=null}}),Object.defineProperty(e.prototype,"close",{enumerable:!1,configurable:!0,writable:!0,value:function(){(this._attrs||this._style)&&(this._mainNode?c.default.updateAttribute(this._mainNode,{attrs:this._attrs,style:this._style}):this._mainNode=c.default.createElement("span",{attrs:this._attrs,style:this._style}))}}),Object.defineProperty(e.prototype,"_appendTo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this._virtual)this._handleAppend(e);else if(this._mainNode){var t=this._mainNode;this._wrapNode.forEach((function(e){c.default.appendChild(e,t),t=e})),c.default.appendChild(e,t)}e=this._contentNode||this._mainNode||e,this._children.forEach((function(t){t._appendTo(e)}))}}),Object.defineProperty(e.prototype,"_handleAppend",{enumerable:!1,configurable:!0,writable:!0,value:function(e){throw new Error("invalid invoke")}}),Object.defineProperty(e.prototype,"createIgnoreElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return c.default.createElement(e,{attrs:{"lake-read-ignore":!0}})}}),Object.defineProperty(e.prototype,"createElement",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.default.createElement.apply(c.default,a([],o(e),!1))}}),Object.defineProperty(e.prototype,"createTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.default.createTextNode.apply(c.default,a([],o(e),!1))}}),Object.defineProperty(e.prototype,"createPlainTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.default.createPlainTextNode.apply(c.default,a([],o(e),!1))}}),Object.defineProperty(e.prototype,"appendChild",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.default.appendChild.apply(c.default,a([],o(e),!1))}}),e}();t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlDataSourceKernelOption=void 0;var n=r(4021),o=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=Object.assign({},this._option,e)}return Object.defineProperty(e.prototype,"readEmptyLine",{get:function(){var e;return!!(null===(e=this._option)||void 0===e?void 0:e.readEmptyLine)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:n.pluginRegister.pluginName}),e}();t.HtmlDataSourceKernelOption=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3629),l=r(3763),c=r(3561),s=r(3466),f=r(3463),d=a(r(4710)),p=a(r(4711)),h=a(r(4712)),y=a(r(4713)),b=r(3922),m=a(r(4715)),v=a(r(4716)),g=a(r(4717)),_=a(r(4718)),w=r(4235),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;e.registerAttr(d.default),e.extendMethods({genericNodeIndent:w.genericNodeIndent});var n=e.getService(s.IHTMLKernelService.ID);n&&n.registerAttrHTMLWriter(g.default.AttrNames,new g.default);var o=e.getService(f.ILakeKernelService.ID);o&&(o.registerLakeStyleReader(v.default.StyleNames,new v.default),o.registerLakeAttrReader(m.default.AttrNames,new m.default));var a=e.getService(f.ILakeKernelService.ID);a&&a.registerLakeAttrWriter(_.default.AttrNames,new _.default),(0,l.bindEvent)(this,t,"nodechange",(function(e){if(r.isNeedRemoveHIndent(e)){var t=e.node,n=e.job;n.removeAttribute(t,"hindent"),t.parentNode&&n.removeAttribute(t.parentNode,"indent")}}))}}),Object.defineProperty(t.prototype,"isNeedRemoveHIndent",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.isUpdateCardWidthMode(e)||this.isUpdateNodeWidthMode(e)}}),Object.defineProperty(t.prototype,"isUpdateNodeWidthMode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.node,r=e.job,n=e.type,o=e.subType,a=e.attrName,i=e.value;return"attribute"===n&&["add","update"].includes(o)&&"widthMode"===a&&i===c.WIDTH_MODE_CONTAIN&&r.acceptAttrName(t.nodeName,"hindent")}}),Object.defineProperty(t.prototype,"isUpdateCardWidthMode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.node,r=e.type,n=e.subType,o=e.attrName,a=e.value;return t.hasCategory(u.Category.BlockCard)&&"attribute"===r&&["add","update"].includes(n)&&"value"===o&&(null==a?void 0:a.__widthMode)===c.WIDTH_MODE_CONTAIN}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:b.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[h.default,y.default,p.default]}),t}(i.KernelPlugin);t.default=O},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var n=r(3453),o=r(3484),a=r(4022),i=[n.Category.BlockCard,"alert","table",o.COLLAPSE],u=[],l=[],c=1,s=2*a.MAX_INDENT+1;c<=s;c++)u.push(c);for(c=1;c<=a.MAX_INDENT;c++)l.push(c);t.default={indent:{targets:[n.Category.Block,n.Category.Hole,n.Category.TableHole,"quote"],excludes:[n.Category.Level],values:u},textIndent:{targets:[n.Category.Block],excludes:[n.Category.Level],values:[!0]},level:{targets:[n.Category.Level],values:l},hindent:{targets:i,excludes:[n.Category.Level],values:u}}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3457),l=r(4022),c=r(3922),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.getNodeById(t);if(!r||l.INDENT_BLACKLIST.includes(r.nodeName))return[];var n=["indent","hindent","level"].find((function(e){return!!r.attrs[e]}));return n?r.attrs[n]>=l.MAX_INDENT?["canOutdent"]:["canIndent","canOutdent"]:["canIndent"]}}),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();if(t.rangeCount>1)return i.Command.UNAVAILABLE;if(!t.collapsed)return i.NodeUtil.closest(t.firstRange.commonAncestorContainer,a.Category.TableCell)?i.Command.UNAVAILABLE:i.Command.NOT_EXECUTED;var r=t.firstRange.start,n=r.node;if(0!==r.offset)return i.Command.UNAVAILABLE;if(n.hasCategory([a.Category.Block,a.Category.Hole,a.Category.TableHole]))return i.Command.NOT_EXECUTED;for(var o=i.NodeUtil.closest(n,a.Category.Block),u=n;u!==o;){if(0!==u.offset)return i.Command.UNAVAILABLE;u=u.parentNode}return i.Command.NOT_EXECUTED}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.canIndent}),t}(u.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3457),l=r(4235),c=r(3922),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();if(i.SelectionUtil.isUnbreakable(t)||i.SelectionUtil.isInHole(t)&&t.firstRange.start.isAtEnd)return i.Command.UNAVAILABLE;var r=t.firstRange,n=r.start,o=r.end;return n.node.closest(i.Category.OnlyText)||o.node.closest(i.Category.OnlyText)?i.Command.UNAVAILABLE:i.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){void 0===t&&(t=!1);var o=e.newJob();return r?this._executeNode(o,e,r,n):this._executeSelection(o,e,t,n)}}),Object.defineProperty(t.prototype,"_executeSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(this.getState(e)===i.Command.UNAVAILABLE)return t.cancelJob(e),!1;var o=e.getSelection(),a=!1;if(o.collapsed&&o.firstRange.start.node.isRootNode()&&o.firstRange.start.isAtEnd){var u=e.createElement(e.defaultElementName);e.appendChild(o.firstRange.start.node,u),a=!0,o=e.newSelection([e.newRange(e.newPosition(u,0))])}return(0,l.genericIndent)(e,o,r,n),a&&e.setSelection(o),t.commitJob(e),!0}}),Object.defineProperty(t.prototype,"_executeNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o,i,u="string"==typeof r?[r]:r||[];try{for(var c=a(u),s=c.next();!s.done;s=c.next()){var f=s.value,d=e.getNodeById(f);if(!d)return t.cancelJob(e),!1;(0,l.genericNodeIndent)(e,d,n)}}catch(e){o={error:e}}finally{try{s&&!s.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}return t.commitJob(e),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.indent}),t}(u.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3457),l=r(4714),c=r(3922),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();if(t.rangeCount>1)return i.Command.UNAVAILABLE;var r=t.firstRange,n=r.start,o=r.end;return n.node.closest(i.Category.OnlyText)||o.node.closest(i.Category.OnlyText)?i.Command.UNAVAILABLE:i.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===t&&(t=!1);var n=e.newJob();return r?this._executeNode(n,e,r):this._executeSelection(n,e,t)}}),Object.defineProperty(t.prototype,"_executeSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return this.getState(e)===i.Command.UNAVAILABLE?(t.cancelJob(e),!1):((0,l.genericOutdent)(e,e.getSelection(),r),t.commitJob(e),!0)}}),Object.defineProperty(t.prototype,"_executeNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o,i="string"==typeof r?[r]:r||[];try{for(var u=a(i),c=u.next();!c.done;c=u.next()){var s=c.value,f=e.getNodeById(s);if(!f)return t.cancelJob(e),!1;(0,l.genericNodeOutdent)(e,f)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return t.commitJob(e),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.outdent}),t}(u.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genericNodeOutdent=t.genericOutdent=void 0;var n=r(3453),o=r(3453),a=r(4236);function i(e,t,r){void 0===r&&(r=!1);var o=t.nodeName,a=t.attrs,i=void 0===a?{}:a,u=i,l=u.level,c=void 0===l?0:l,s=u.indent,f=void 0===s?0:s;if(r&&e.acceptAttrName(o,"textIndent")&&i.textIndent)e.removeAttribute(t,"textIndent");else if(e.acceptAttr(o,"level",c-1||1))c-1==0?e.removeAttribute(t,"level"):e.setAttribute(t,"level",c-1);else{var d=f-1;if(t.hasCategory([n.Category.Hole,n.Category.TableHole])&&t.firstChild&&!e.acceptAttr(t.firstChild.nodeName,"hindent",d))return e.removeAttribute(t,"indent"),void e.removeAttribute(t.firstChild,"hindent");e.acceptAttr(o,"indent",d||1)&&(0===d?(e.removeAttribute(t,"indent"),t.hasCategory([n.Category.Hole,n.Category.TableHole])&&t.firstChild&&e.removeAttribute(t.firstChild,"hindent")):(e.setAttribute(t,"indent",d),t.hasCategory([n.Category.Hole,n.Category.TableHole])&&t.firstChild&&e.acceptAttr(t.firstChild.nodeName,"hindent",d)&&e.setAttribute(t.firstChild,"hindent",d)))}}t.genericOutdent=function(e,t,r){if(t.collapsed){var n=(0,a.getTargetNode)(t.firstRange.start.node);if(!n)return;i(e,n,r)}else o.SelectionUtil.fullWalkSelection(t,{enter:function(t){i(e,t)}})},t.genericNodeOutdent=function(e,t){var r=(0,a.getTargetNode)(t);if(r)return i(e,r,!1)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){"hindent"===t&&(e.ignoreInheritedAttrs("hindent"),this._readHIndent(e,r))}}),Object.defineProperty(t.prototype,"_readHIndent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=Number.parseInt(t,10);if(t.endsWith("em")&&r>0&&r%2==0){var n=r/2;n>0&&e.setAttr("hindent",n)}}}),Object.defineProperty(t,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["hindent"]}),t}(r(4014).LakeAttrReader);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n;"blockquote"===(null===(n=e.inode)||void 0===n?void 0:n.name)&&e.ignoreInheritedAttrs("indent"),"text-indent"===t?this._readTextIndent(e,r):this._readIndent(e,r)}}),Object.defineProperty(t.prototype,"_readTextIndent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=Number.parseInt(t,10);t.endsWith("em")&&r>0&&e.setAttr("textIndent",!0)}}),Object.defineProperty(t.prototype,"_readIndent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=Number.parseInt(t,10);if(t.endsWith("em")&&r>0&&r%2==0){var n=r/2;n>0&&e.setAttr("indent",n)}}}),Object.defineProperty(t,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:["text-indent","padding-left"]}),t}(r(4015).LakeStyleReader);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if(r)if("textIndent"!==t){var n=e.inode.attrs,o=(n.indent||0)+(n.level||0);o&&e.addStyle("margin-left","".concat(2*o,"em"))}else e.addStyle("text-indent","2em")}}),Object.defineProperty(t,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["indent","textIndent"]}),t}(a(r(3562)).default);t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){switch(t){case"textIndent":e.setStyle("text-indent","2em");break;case"indent":e.setStyle("padding-left",2*r+"em");break;case"hindent":e.setAttr("hindent",2*r+"em")}}}),Object.defineProperty(e,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["indent","hindent","textIndent"]}),e}();t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3921),l=a(r(4720)),c=r(4721),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_writer",{enumerable:!0,configurable:!0,writable:!0,value:new l.default}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerReader("text/ne-inode",this.service.reader),e.registerWriter("text/ne-inode",this._writer)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._writer.destroy(),delete this._writer,e.prototype.destroy.call(this)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.pluginName}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:u.INodeReaderKernelService}),t}(i.KernelPlugin);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return JSON.stringify(t)}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"inodeReader"})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4723)),l=a(r(4724)),c=a(r(4726)),s=r(3923),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[l.default,u.default,c.default]}),t}(i.KernelPlugin);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3465),l=r(3923),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return t.firstRange.collapsed&&t.firstRange.start.node.hasCategory(a.Category.Card)?u.COMMAND_UNAVAILABLE:u.COMMAND_NOT_EXECUTED}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.canInput}),t}(i.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3453),l=r(3453),c=r(3453),s=r(3454),f=r(3457),d=r(3923),p=i(r(3498)),h=r(4725),y=[/(\r\n|\n|\r)/m,/(?:[^a-z0-9]|^)([a-z0-9]{2,}):\/\/(?:[a-z_0-9@:.])+?(?:\/\S*?)?(?:[#\s\S]*?)?(?:(?=[\u0100-\uffff\s])|$)/i];function b(e,t){return e&&t&&(p.default.isChineseChar(e)&&p.default.isEnAndNumber(t)||p.default.isEnAndNumber(e)&&p.default.isChineseChar(t))}function m(e,t){return p.default.isChineseChar(e)&&p.default.isChineseChar(t)||p.default.isEnAndNumber(e)&&p.default.isEnAndNumber(t)}var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n,o){var i,u,c;void 0===r&&(r=!1),void 0===n&&(n=!1),void 0===o&&(o=!1);var f=(c=r?e.newJob():e.job).getSelection();if(!o||!this.processAutoClosing(e,c,t,f)){if(f.collapsed||(f=c.newSelection(f.firstRange),(f=l.SelectionUtil.deleteContent(c,f,!1,!0,!1,!1)).isCollapsed||(s.assert.fatal(f.isTableSelection&&f.firstRange.start.node.isEmpty(),"plugins/input/src/kernel/input-command.ts:80"),f=c.newSelection(c.newRange(c.newPosition(f.firstRange.start.node,0))))),s.assert.fatal(f.collapsed,"plugins/input/src/kernel/input-command.ts:90"),1===(null==t?void 0:t.length))return this._execNormalTextInsert(e,t,c,f,n);try{for(var d=a(y),p=d.next();!p.done;p=d.next()){if(p.value.test(t))return this._execInodeInsert(e,t,c,f)}}catch(e){i={error:e}}finally{try{p&&!p.done&&(u=d.return)&&u.call(d)}finally{if(i)throw i.error}}return this._execNormalTextInsert(e,t,c,f,n)}}}),Object.defineProperty(t.prototype,"processAutoClosing",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(!h.CLOSING_PAIR[r])return!1;if(!n.firstRange.start.node.isTextNode()||!n.firstRange.end.node.isTextNode())return!1;if(n.firstRange.start.node.closest(u.Category.Block)!==n.firstRange.end.node.closest(u.Category.Block))return!1;var o=l.PositionUtil.insertText(t,n.firstRange.start,r);if(n.firstRange.start.node===n.firstRange.end.node){var a=l.PositionUtil.insertText(t,t.newPosition(n.firstRange.start.node,n.firstRange.end.offset+1),h.CLOSING_PAIR[r]);t.setSelection([t.newRange(t.newPosition(o.node,o.offset-1),a)])}else{a=l.PositionUtil.insertText(t,n.firstRange.end,h.CLOSING_PAIR[r]);t.setSelection([t.newRange(t.newPosition(o.node,o.offset-1),a)])}return e.commitJob(t),!0}}),Object.defineProperty(t.prototype,"getPrevChar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;if(!e.node.isTextNode())return null;if(e.offset>0){var r=e.node.data[e.offset-1];return{position:new c.Position(e.node,e.offset-1),ch:r}}if(null===(t=e.node.previousSibling)||void 0===t?void 0:t.isTextNode()){r=e.node.previousSibling.data[e.node.previousSibling.data.length-1];return{position:new c.Position(e.node.previousSibling,e.node.previousSibling.data.length-1),ch:r}}return null}}),Object.defineProperty(t.prototype,"getNextChar",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;if(!e.node.isTextNode())return null;if(e.offset<e.node.dataLength){var r=e.node.data[e.offset];return{position:new c.Position(e.node,e.offset+1),ch:r}}if(null===(t=e.node.nextSibling)||void 0===t?void 0:t.isTextNode()){r=e.node.nextSibling.data[0];return{position:new c.Position(e.node.nextSibling,0),ch:r}}return null}}),Object.defineProperty(t.prototype,"_execNormalTextInsert",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n,o){var a={},i=n.firstRange.start;i.node.hasCategory([u.Category.Heading])||(a=l.PositionUtil.closestInlineAttrs(i)),a&&(a=Object.keys(a).reduce((function(e,t){return r.acceptAttr(u.Category.Text,t,a[t])&&(e[t]=a[t]),e}),{}));var c=l.PositionUtil.makeSureAtInput(r,n.firstRange.start);s.assert.fatal(c.node.hasCategory([u.Category.TextContainer,u.Category.Text]),"plugins/input/src/kernel/input-command.ts:249");var f=!1,d=!1;if(o&&c.node.isTextNode()){var p=this.getPrevChar(c),h=this.getNextChar(c);if(p&&b(p.ch,t[0])&&(f=!0),h&&b(t[t.length-1],h.ch)&&(d=!0),d&&p&&" "===p.ch){var y=this.getPrevChar(p.position);y&&m(y.ch,t[0])&&(c=p.position,d=!1)}if(f&&h&&" "===h.ch){var v=this.getNextChar(h.position);v&&m(v.ch,t[t.length-1])&&(c=h.position,f=!1)}d&&(t+=" "),f&&(t=" "+t)}c=c.node.isTextNode()&&Object.keys(a).length!==Object.keys(c.node.attrs).length?l.SelectionUtil.insertINode(r,n,u.INodeHelper.createFragment([u.INodeHelper.createTextNode(t,a)])).firstRange.end:l.PositionUtil.insertText(r,c,t,a),d&&(c=r.newPosition(c.node,c.offset-1)),r.setSelection([r.newRange(c)]),e.commitJob(r)}}),Object.defineProperty(t.prototype,"_execInodeInsert",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=this.kernel.readData("text/plain",t);r.setSelection(l.SelectionUtil.insertINode(r,n,o)),e.commitJob(r)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:d.pluginRegister.command.input}),t}(f.KernelAbstractCommand);t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLOSING_PAIR=void 0,t.CLOSING_PAIR={"'":"'",'"':'"',"(":")","[":"]","{":"}","【":"】","‘":"’","“":"”","《":"》","〈":"〉","「":"」","『":"』"}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3923),l=r(3907),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=null);var n=e.newJob(),o=r?n.newSelection(n.newRange(n.newPosition(r.node,r.offset))):n.getSelection();if(o.collapsed||(o=n.newSelection(n.newRange(o.firstRange.start))),!n.acceptNode(o.firstRange.start.node.nodeName,"#text"))return!1;a.PositionUtil.insertText(n,o.firstRange.start,t);try{(0,l.optimizeRange)(n,o.firstRange)}catch(e){}return!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.insertText}),t}(i.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3493),c=r(3463),s=a(r(4728)),f=a(r(4729)),d=a(r(4730)),p=a(r(4731)),h=a(r(4735)),y=a(r(4737)),b=r(3636),m=r(4738),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r,n,o,a,i;e.registerInlineCard(t.cardName),e.registerCommand("label",new s.default),e.registerCommand("getSelectLabel",new f.default),null===(r=e.getService(c.ILakeKernelService.ID))||void 0===r||r.registerLakeCardReader("label",new p.default),null===(n=e.getService(l.IINodeReaderKernelService.ID))||void 0===n||n.registerINodeCardReader(d.default.CardName,new d.default),null===(o=e.getService(u.IHTMLKernelService.ID))||void 0===o||o.registerNodeHTMLWriter(t.cardName,new h.default),null===(a=e.getService(c.ILakeKernelService.ID))||void 0===a||a.registerLakeCardWriter(t.cardName,new y.default),null===(i=e.getService(b.IMarkdownService.ID))||void 0===i||i.registerMarkdownWriter(t.cardName,new m.MarkdownLabelCardWriter)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"label"}),Object.defineProperty(t,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:"label"}),t}(i.KernelPlugin);t.default=v},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.getSelection().rangeCount>1?a.Command.UNAVAILABLE:a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=!1);var n=e.newJob();if(this.getState(n)===a.Command.UNAVAILABLE)return e.cancelJob(n),!1;var o=a.CardUtil.insertCardNode(n,n.getSelection(),"label",t),i=o.selection,u=o.cardNode;return r?n.setSelection([n.newRange(n.newPosition(u,0))]):n.setSelection(i),e.commitJob(n),u.id}}),t}(a.Command);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();if(!a.SelectionUtil.isInCard(t))return null;var r=t.firstRange.start.node;return"label"===r.nodeName?r.id:null}}),t}(a.Command);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"label"}),t}(a(r(3500)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3481),u=a(r(4023)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.createCard("label",u.default.fromLake(r),n);e.setNode(o)}}),t}(i.LakeCardReader);t.default=l},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LABEL_COLORS=t.COLOR_NAMES=void 0,t.COLOR_NAMES=["color0","color1","color2","color3","color4","color5"],t.LABEL_COLORS=((n={})["label.".concat(t.COLOR_NAMES[0],".bg")]={light:"#F8CED3",dark:"#5B2027"},n["label.".concat(t.COLOR_NAMES[0],".border")]={light:"#F1A2AB",dark:"#741B25"},n["label.".concat(t.COLOR_NAMES[0],".text")]={light:"#70000D",dark:"#E6BCC1"},n["label.".concat(t.COLOR_NAMES[1],".bg")]={light:"#F6E1AC",dark:"#564825"},n["label.".concat(t.COLOR_NAMES[1],".border")]={light:"#F5D480",dark:"#775C18"},n["label.".concat(t.COLOR_NAMES[1],".text")]={light:"#664900",dark:"#EEDEB4"},n["label.".concat(t.COLOR_NAMES[2],".bg")]={light:"#DBF1B7",dark:"#445625"},n["label.".concat(t.COLOR_NAMES[2],".border")]={light:"#C1E77E",dark:"#557915"},n["label.".concat(t.COLOR_NAMES[2],".text")]={light:"#2A4200",dark:"#D5E1C1"},n["label.".concat(t.COLOR_NAMES[3],".bg")]={light:"#EFF0F0",dark:"#292929"},n["label.".concat(t.COLOR_NAMES[3],".border")]={light:"#EFF0F0",dark:"#292929"},n["label.".concat(t.COLOR_NAMES[3],".text")]={light:"#262626",dark:"#E2E2E2"},n["label.".concat(t.COLOR_NAMES[4],".bg")]={light:"#C0DDFC",dark:"#253C56"},n["label.".concat(t.COLOR_NAMES[4],".border")]={light:"#81BBF8",dark:"#1D4672"},n["label.".concat(t.COLOR_NAMES[4],".text")]={light:"#00346B",dark:"#B5D0ED"},n["label.".concat(t.COLOR_NAMES[5],".bg")]={light:"#C0CAFC",dark:"#252D56"},n["label.".concat(t.COLOR_NAMES[5],".border")]={light:"#96A7FD",dark:"#1B2A74"},n["label.".concat(t.COLOR_NAMES[5],".text")]={light:"#101E60",dark:"#B5BEED"},n)},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorParse=void 0;var i=r(4237);Object.defineProperty(t,"ColorParse",{enumerable:!0,get:function(){return a(i).default}}),o(r(4238),t)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Colors=void 0,t.Colors={"editor.background":{light:"#fff",dark:"#000"},"editor.background.primary":{light:"#fff",dark:"#141414"},"editor.background.primary.hover":{light:"#EFF0F0",dark:"rgba(255, 255, 255, 0.12)"},"editor.background.primary.hover.light":{light:"#E7E9E8",dark:"#333333"},"editor.background.secondary":{light:"#FAFAFA",dark:"#1F1F1F"},"editor.background.tertiary":{light:"#F4F5F5",dark:"rgba(255, 255, 255, 0.04)"},"editor.overlay.background.tertiary":{light:"#F4F5F5",dark:"#1F1F1F"},"editor.background.foreground":{light:"#fff",dark:"#1f1f1f"},"editor.border.primary":{light:"#E7E9E8",dark:"rgba(255, 255, 255, 0.12)"},"editor.border.secondary":{light:"#D8DAD9",dark:"#424242"},"editor.border.light":{light:"rgba(0, 0, 0, 0.04)",dark:"rgba(255, 255, 255, 0.08)"},"editor.code.background":{light:"#0000000f",dark:"#ffffff14"},"editor.table.scrollbar.thumb":{light:"#00000033",dark:"#FFFFFF33"},"editor.card.border.hover":{light:"#81BBF8",dark:"#253C56"},"editor.card.border.selected":{light:"#2F8EF4",dark:"#1D4672"},"editor.table.bar.active":{light:"#2F8EF4CC",dark:"#2B6BB1CC"},"editor.text.link":{light:"#117CEE",dark:"#3B82CE"},"editor.text.link.hover":{light:"#5FA8F6",dark:"#245A94"},"editor.column.background.highlight":{light:"#D9EAFC7F",dark:"#1930487F"},"editor.card.background.hover":{light:"#5FA8F633",dark:"#245A9433"},"editor.background.focus":{light:"#D9EAFC",dark:"#193048"},"editor.text.color":{light:"#262626",dark:"#E2E2E2"},"editor.text.body":{light:"#585A5A",dark:"#B3B3B3"},"editor.text.caption":{light:"#8A8F8D",dark:"#848484"},"editor.icon.primary":{light:"#000",dark:"#fff"},"editor.icon.secondary":{light:"#585A5A",dark:"#B3B3B3"},"editor.text.disable":{light:"#BEC0BF",dark:"#505050"},"editor.table.bar.danger":{light:"#E4495B5A",dark:"#B625365A"},"editor.text.danger.light":{light:"#EA7583",dark:"#981F2D"},"editor.text.danger":{light:"#DF2A3F",dark:"#CA3F4F"},"editor.color.theme":{light:"#00B96B",dark:"#2ED790"},"editor.color.theme.light":{light:"#0BD07D",dark:"#29AD76"},"editor.cursor":{light:"#009456",dark:"#6BD1A6"},"editor.selection":{light:"rgba(27, 162, 227, 0.2)",dark:"rgba(27, 162, 227, 0.2)"},"editor.color.black":{light:"#000",dark:"#fff"},"editor.color.black.f05":{light:"rgba(0,0,0,0.05)",dark:"rgba(255,255,255,0.05)"},"editor.color.black.f08":{light:"rgba(0,0,0,0.08)",dark:"rgba(255,255,255,0.08)"},"editor.color.black.f12":{light:"rgba(0,0,0,0.12)",dark:"rgba(255,255,255,0.12)"},"editor.color.black.f30":{light:"rgba(0,0,0,0.30)",dark:"rgba(255,255,255,0.30)"},"editor.color.black.f65":{light:"rgba(0,0,0,0.65)",dark:"rgba(255,255,255,0.65)"},"editor.color.blue1":{light:"#D9EAFC",dark:"#193048"},"editor.color.blue8":{light:"#074A92",dark:"#8DB5E2"},"editor.color.blue9":{light:"#00346B",dark:"#B5D0ED"},"editor.color.peaGreen1":{light:"#E8F7CF",dark:"#242F14"},"editor.color.peaGreen8":{light:"#406105",dark:"#C2DF90"},"editor.color.peaGreen9":{light:"#2A4200",dark:"#D5E1C1"},"editor.color.red1":{light:"#FBE4E7",dark:"#402125"},"editor.color.red9":{light:"#70000D",dark:"#E6BCC1"},"editor.color.white":{light:"#fff",dark:"#000"},"editor.color.white.f60":{light:"rgba(255,255,255,0.6)",dark:"rgba(0,0,0,0.6)"},"editor.color.white.f90":{light:"rgba(255,255,255,0.9)",dark:"rgba(0,0,0,0.9)"},"editor.color.yellow5":{light:"#F3BB2F",dark:"#C29219"}}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3721),l=i(r(3470)),c=i(r(4023)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=(t.attrs||{}).value,o=void 0===n?{}:n,i=new c.default(o),l=i.getLabel()||(0,u.i18n)("设置标签");e.isInlineMode()&&(r=a(a({},i.getHtmlStyle()),{fontWeight:400,fontSize:"12px",overflow:"hidden",maxWidth:"200px",display:"inline-block",whiteSpace:"nowrap",marginBottom:"-4px",borderRadius:"4px",border:"none",padding:"2px 5px",textOverflow:"ellipsis",lineHeight:"14px",marginLeft:"1px",marginRight:"1px"}));var s=e.createElement("span",{className:"ne-label",attrs:{"data-color":i.getColorIndex()},style:r});e.appendChild(s,e.createTextNode(l)),e.setNode(s)}}),t}(l.default);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"+7天":"Next Week","AI助手":"AI助手","Mac 办公套件":"Mac office suite","Office 文件":"Windows office suite","PDF 文件":"PDF","UML图":"UML","YYYY 年 M 月":"MMM YYYY","markdown语法转换失败":"markdown syntax convert error","{count} 票":"{count} Ticket","、":"、","三栏":"Three Col","上一个":"Prev","上传中":"Uploading","上传失败":"Upload error","上传文件":"Upload","上标":"Superscript","下一个":"Next","下划线":"Underline","下周":"Next Week","下标":"Subscript","下载":"Download","不支持嵌入协作链接，请替换为地址栏链接或分享链接":"Collaboration url is not supported, use url from address bar instead","不支持嵌入该链接":"Does not support embedding the link","两栏":"Tow Col","两端对齐":"Justify","书签":"Bookmark","五栏":"Five Col","人":"people","人已投票":"people have voted","今天":"Today","从第":"Since","代码主题":"Theme","代码块":"Code block","代码语言":"Language","任务列表":"To-Do list","优酷":"Youku","使用分栏组织页面":"Use columns to organize the page","使用日历添加日程":"Add a calendar schedule","保存":"Save","保存文档":"Save draft","信息提示框":"Information","修改样式":"Modify style","全宽展示":"Adaptive width display","全屏":"Maximize","全屏编辑":"Maximize","全选":"Select All","全部替换":"Repalce all","公式":"Formula","六栏":"Six Col","关闭":"Close","内容":"content","内容加载中":"Content loading","内容已变更，无法插入 Markdown 内容":"The content has been changed, the markdown content cannot be inserted","内部三方工具":"Internal tools","减少缩进":"Decrease indent","减少行高":"Decrease lineHeight","分割线":"Divider","分栏卡片":"Columns","列":"column(s)","列等宽":"Cols equal width","删除":"Delete","删除所选列":"Delete selected column(s)","删除所选行":"Delete selected row(s)","删除线":"Strike-through","删除表格":"Delete table","剪切":"Cut","单元格背景色":"cell background color","卡片":"Card","卡片缺失":"Card not found","危险提示框":"Dangerous","发起投票活动":"Start a poll","取消":"Cancel","取消自适应":"Cancel adaptive","取消链接":"Delete link","可折叠内容":"Collapsible content","可插入图形、连线和图片等":"Support graph、line、pic ...","可自定义链接标题":"Define the link title","右对齐":"Right align","合并单元格":"Merge cells","向上插入":"Insert above","向下插入":"Insert below","向右插入":"Insert right","向左插入":"Insert left","否":"No","告警提示框":"Warning","哔哩哔哩":"BiliBili","四栏":"Four Col","图片":"Image","图片上传失败":"Failed to upload the image, please retry","图片加载失败":"Network error, can't display image","图片格式已对所有图片生效":"Attributes applied to all images","在此输入内容":"Enter content here","垂直对齐":"Vertical Align","垂直居中":"Align middle","基础":"Basic","增加缩进":"Increase indent","增加行高":"Increase lineHeight","墨刀":"Mockingbot","复制":"Copy","复制代码":"Copy","复制失败":"Copied failed","复制成功":"Copied successfully","复制段落链接":"Copy paragraph link","复制链接":"Copy link","复制错误信息":"Copy error message","大纲":"Toc","如":"like","字体颜色":"Text color","字号减小":"Decrease fontsize","字号加大":"Increase fontsize","字号调整":"Font-size Adjust","宜搭":"Yida","对本文档的图片一键应用样式和边距":"Applied style and spacing to all images","对齐方式":"Align","小工具":"Tools","居中对齐":"Centre align","展开":"Unfold","嵌入本地文件":"Embed local files","嵌入页面":"Embed","左对齐":"Left align","已开启格式刷，按 Esc 退出":"Format Brush is turned on, press Esc to exit","已截止":"Ended","已投票":"Voted","布局和样式":"Layout and Style","底部对齐":"Align bottom","开启自适应":"Enable adaptive","开始":"Start","引用":"Quote","快捷键":"Shortcut","思维导图":"Mindmap","思维导图文件":"Mind map file","成功提示框":"Success","截止":"end","截止日期":"Deadline","打开文档":"Open in YuqueDesktop","打开菜单":"open menu","批量应用格式：":"Applied to all","投票":"Vote","投票中...":"voting ...","投票成功":"Vote success","折叠块":"Collapse","拆分单元格":"Split cells","拖拽":"reposition","换行":"Breakline","提交":"Submit","提及":"Mention","提及人":"mention user","提及人和内容":"Mention user or content","提及人或内容":"Mention user or content","提及某人":"Mention","插入分割线":"Visually divide blocks","插入卡片":"Insert Card","插入序号列到最左侧":"Insert numbering column at left","插入引用":"Quotation","插入引用格式":"Insert a quote block","插入日期":"Insert date","插入特色卡片":"Insert image, table, attachment, codeblock, etc.","插入表格":"Insert Table","插入链接":"Link","搜索结果":"Result","撤销":"Undo","支持 Axure, Photoshop, Sketch":"Supported Axure, Photoshop, Sketch","支持 Latex 语法":"Support LaTeX syntax","支持 MindManager, XMind, MindNode":"Supported MindManager, XMind, MindNode","支持 Office、PDF、Sketch 等":"Office, PDF, Sketch ...","支持 Pages, Numbers, Keynote":"Supported Pages, Numbers, Keynote","支持 Word, Excel, PPT":"Supported Word, Excel, PPT","支持PlantUML、Mermaid等":"Generate diagrams by code","支持pdf、ppt等多种格式":"Support pdf、ppt files","支持多种语言和主题切换":"Capture a code snippet","支持用例图、类图、时序图等":"Draw UML diagrams","收起":"Fold","文件上传失败，请重试":"Failed to upload the file, please retry","文本":"Text","文本绘图":"Text diagram","斜体":"Italic","新建节点":"New Node","无匹配内容，请重新输入":"No matching content, please re-enter","无匹配卡片":"No suitable card","无可用卡片":"No available cards","无序列表":"Bulleted list","无效链接":"Invalid link","无效音频，请重新上传":"Invalid audio, please re-upload","无标题":"No title","无标题折叠块":"Untitled collapse","日历":"Calendar","日期":"Date","明天":"Tomorrow","星期一":"Monday","星期三":"Wednesday","星期二":"Tuesday","星期五":"Friday","星期六":"Saturday","星期四":"Thursday","星期日":"Sunday","是":"Yes","是否需要做样式转换？":"Do need to do a style conversion?","显示边框":"Show border","暂不支持显示该网站内容":"No support for displaying the content of this website","暂无匹配的搜索结果":"No matching search results yet","更多":"More","更多文本样式":"More text styles","替换":"Replace","替换为":"Replace","最近使用":"Recently Used","有序列表":"Numbered list","未能插入内容":"Failed to insert content","未能获取内容":"Failed to get content","本地文件":"Local File","本地视频":"Local Video","本地音频":"Local audio","查找":"Find","查找替换":"Search & Replace","查看帮助":"Help","查看帮助文档":"Help","查看示例":"Example","查看结果":"View Results","查询失败":"Query failure","查询音频信息中...":"Querying audio information...","标宽展示":"Standard width display","标题":"Title","标题1":"Heading 1","标题2":"Heading 2","标题3":"Heading 3","标题4":"Heading 4","标题5":"Heading 5","标题6":"Heading 6","标题{headingNo}":"Heading {headingNo}","标题列":"Title column","标题序号":"Heading NO","标题行":"Title row","标题行列":"Table head","根据宽度等分列宽":"Split columns equally","格式刷":"Paint format","检测到粘贴内容符合 Markdown 语法，是否需要做样式转换？":"Do need to do style conversion detect that the pasted content conforms to Markdown syntax?","模板":"Template","正在移动1列分栏":"Moving 1 column","正在移动{count}列":"Moving {count} columns","正在移动{count}行":"Moving {count} rows","正在获取投票数据...":"fetching ...","正文":"Normal","正文与标题":"Heading and text","此处不支持播放音频，可点击文件名播放":"This does not support playback of audio, you can click on the file name to play","此处为语雀投票卡片，点击链接查看：":"Here is the yuque vote card, click on the link to view:","流程图":"Flowchart","浏览器访问":"Open in browser","淘宝视频":"TaoBao Video","添加 TeX 公式":"New equation","添加图片描述":"Insert caption","添加描述":"Add describe","添加日程标题":"Untitled","添加说明":"Add a description","添加选项":"Add","添加间距":"Add spacing","清除内容":"Clear","清除格式":"Clean formatting","渐变色":"Gradient","点击":"Click to ","状态":"Status","玫红色":"magenta","用于梳理信息和头脑风暴":"For ideas and brainstorm","用于绘制流程":"Illustrate flows and diagrams","用彩色背景来高亮提示":"Colorful text blocks","由于版权保护，不支持在公开文档中直接播放该音频，可点击文件名播放":"Due to copyright protection, the audio is not supported for direct playback in public documents, but can be played by clicking on the file name","画板":"Board","码上掘金":"JueJin Code","确定":"Ok","确定删除该选项？":"Are you sure you want to delete it?","确认":"Ok","程序员":"程序员","立即转换":"Convert Now","第三方服务":"Third party Service","粗体":"Bold","粘贴":"Paste","粘贴页面链接到此处，支持：":"Paste page url here, support: ","素材库":"Material","紫色":"purple","红色":"red","纯文本粘贴":"Paste Text Only","结束":"End","继续编号":"Continue Count","绿色":"green","编辑链接":"Edit link","缩进宽度":"Indent Unit","缩进模式":"Indent Style","缩进调整":"Indent Adjust","网易云音乐":"163 Music","翻译":"Translate","背景颜色":"Highlight color","自动换行":"Auto Wrap","自动缩进":"Auto Indent","自动缩进成功":"Indent success","自定义":"Custom","自定义日期":"Custom date","自适应宽度":"Adaptive width","蓝色":"blue","虾米":"Xiami","行":"row(s)","行内代码":"Inline code","行号":"Line numbers","行起自动编号":"row fill number","行高调整":"Leading Adjust","表格":"Table","视频导入":"Video import","视频已损坏":"Video is damaged","视频无法播放，请稍后重试":"Video is damaged, please retry","解释代码":"解释代码","设置标签":"Set label","设置状态":"SET STATUS","设置编号":"Set numbering","设计文件":"Design files","访问链接":"Visit link","评论":"Add Comment","该卡片引入的链接无法访问：":"The link introduced by this card is not accessible:","该卡片暂时无法显示":"Card cannot be displayed","请刷新页面后再试":"Please refresh the page and try again","请输入":"Please input","请输入代码块名称":"Please input name","请输入投票标题":"Enter a title","请输入折叠卡片标题":"Please input title","请输入搜索内容":"Please input search","请输入正确的链接":"Please enter the correct link","请输入链接":"Does not support embedding the link","转为卡片":"Convert to card","转码失败":"Transcoding failure","软换行":"Soft Breakline","过程":"Process","返回文档":"Back to document","退出全屏":"Exit Maximize","选项 {no}":"Option {no}","配色方案":"Color Scheme","重做":"Redo","重新投票":"re-vote","重新编号":"Re-count","金数据":"JinShuJu","链接":"Link","链接地址":"Link address","链接解析失败，请重试":"Link parsing failed, please retry","长按":"Drag to ","阅读页可下载":"Download allowed","附件":"Attachment","隐藏边框":"Hide border","非法 TeX 公式":"Invalid equation","音频导入":"Import audio files","音频文件不能播放":"Audio files cannot be played","顶部对齐":"Align top","预览":"Preview","高亮块":"Highlighter","高亮提示框":"Tips","高德地图":"AMap","黄色":"yellow","默认":"Default"}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3547)),u=a(r(4023)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.createInlineCard("label",u.default.toLake(r),n);e.setNode(o)}}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownLabelCardWriter=void 0;var o=n(r(97)),a=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(0,o.default)(t,"attrs.value",{}).label;return e.append(r||""),!0}}),e}();t.MarkdownLabelCardWriter=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(3850)),l=a(r(4740)),c=a(r(4741)),s=a(r(4743)),f=r(4024),d=a(r(4744)),p=r(4240),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.kernel.requireService(u.default.ID),e.extendMethods({getLayout:function(){return t.getLayout()},setLayout:function(e){return t.setLayout(e)}})}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.kernel.requireService(u.default.ID).registerMeta("viewport",new l.default(this.option.layout))}}),Object.defineProperty(t.prototype,"setLayout",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e===f.LAYOUT_ADAPT||e===f.LAYOUT_FIXED){var t=this.getLayout();this.kernel.requireService(u.default.ID).setMeta("viewport",e),t!==e&&(this.kernel.emitEvent("layoutChange",e,t),this.kernel.emitPluginEvent("layoutChange",{current:e,prev:t}))}}}),Object.defineProperty(t.prototype,"getLayout",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.kernel.requireService(u.default.ID).getMeta("viewport")}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:p.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:d.default}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:c.default}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[s.default]}),t}(i.KernelPlugin);t.default=h},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3854)),u=r(4024),l=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_cachedValue",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"needPersistent",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e===u.LAYOUT_FIXED||e===u.LAYOUT_ADAPT}}),Object.defineProperty(t.prototype,"beforeSetMeta",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._cachedValue=e}}),Object.defineProperty(t.prototype,"getMeta",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._cachedValue}}),Object.defineProperty(t.prototype,"isDefault",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return void 0===e}}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"setLayout",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.plugin.setLayout(e)}}),Object.defineProperty(t.prototype,"getLayout",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.plugin.getLayout()}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(a(r(4742)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3472),i=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("ILayoutService")}),t}(r(3475).KernelAbstractService);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3457),i=r(3465),u=r(4240),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return i.COMMAND_NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.plugin.getLayout()}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.plugin.setLayout(t)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.layout}),t}(a.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutViewerOption=void 0;var a=r(4024),i=function(){function e(e){void 0===e&&(e=a.LAYOUT_FIXED),Object.defineProperty(this,"_layout",{enumerable:!0,configurable:!0,writable:!0,value:a.LAYOUT_FIXED}),this._layout=e}return Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"layout"}),e}();t.default=i;var u=function(e){function t(t,r){var n=e.call(this,t)||this;return Object.defineProperty(n,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:r}),n}return o(t,e),Object.defineProperty(t,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"layout"}),t}(i);t.LayoutViewerOption=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3463),c=a(r(4746)),s=a(r(4747)),f=r(4241),d=a(r(4748)),p=a(r(4749)),h=a(r(4750)),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerAttr("lineHeight",c.default);var t=e.getService(u.IHTMLKernelService.ID);t&&t.registerAttrHTMLWriter(h.default.AttrNames,new h.default);var r=e.getService(l.ILakeKernelService.ID);r&&r.registerLakeAttrReader("class",new d.default);var n=e.getService(l.ILakeKernelService.ID);n&&n.registerLakeAttrWriter(p.default.AttrNames,new p.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:f.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[s.default]}),t}(i.KernelPlugin);t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={targets:[r(3453).Category.Block],values:[1,1.15,1.5,2,2.5,3]};t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(3715)),l=r(3465),c=r(4241),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"attrName",{enumerable:!0,configurable:!0,writable:!0,value:"lineHeight"}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(e.prototype.getState.call(this,t)===l.COMMAND_UNAVAILABLE)return l.COMMAND_UNAVAILABLE;var r=t.getSelection().firstRange,n=r.start,o=r.end;return n.node.closest(i.Category.OnlyText)||o.node.closest(i.Category.OnlyText)?l.COMMAND_UNAVAILABLE:l.COMMAND_NOT_EXECUTED}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.lineHeight}),t}(u.default);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(4014),i=r(4242),u=/^lake-lineheight-(\d+)$/,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){r.split(" ").forEach((function(t){if(u.test(t)){var r=i.FromLakeLineHeightMap[RegExp.$1];r&&e.setAttr("lineHeight",r)}}))}}),t}(a.LakeAttrReader);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4242),o=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){e.addClassName("lake-lineheight-".concat(n.ToLakeLineHeightMap[r]))}}),Object.defineProperty(e,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["lineHeight"]}),e}();t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){r&&e.addStyle("line-height",r)}}),Object.defineProperty(t,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["lineHeight"]}),t}(a(r(3562)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=u(r(127)),c=r(3453),s=r(3466),f=r(3463),d=r(3519),p=u(r(4012)),h=r(3601),y=u(r(4752)),b=r(4753),m=u(r(4755)),v=u(r(4756)),g=u(r(4757)),_=u(r(4758)),w=u(r(4759)),O=u(r(4760)),E=u(r(4761)),P=u(r(4762)),j=u(r(4763)),C=r(3638),k=u(r(4764)),S=u(r(4765)),A=u(r(4766)),x=u(r(4767)),N=u(r(4768)),T=u(r(3635)),D=u(r(4769)),L=r(3921),R=r(4770),I=u(r(4243)),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"nodeAttrProcessor",{enumerable:!0,configurable:!0,writable:!0,value:function(e,t){return e.closest("link")?(0,l.default)(t,["color","bgColor"]):t}}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n=this;e.registerElement(m.default),e.registerAttr(y.default),e.extendMethods({isValidURL:function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=n.option).isValidURL.apply(e,i([],a(t),!1))},transformURL:function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(e=n.option).transformURL.apply(e,i([],a(t),!1))}});var o=e.getService(s.IHTMLKernelService.ID);o&&o.registerHTMLNodeReader(S.default.NodeNames,new S.default(this));var u=e.getService(s.IHTMLKernelService.ID);u&&u.registerNodeHTMLWriter(x.default.NodeNames,new x.default(this));var l=e.getService(h.ITextDataSourceKernelService.ID);l&&l.registerTextReader(new A.default(this.option,this.service));var c=e.getService(f.ILakeKernelService.ID);c&&c.registerLakeNodeReader("a",new k.default(this));var d=e.getService(f.ILakeKernelService.ID);d&&d.registerLakeNodeWriter(N.default.NodeNames,new N.default);var p=e.getService(L.INodeReaderKernelService.ID);p&&p.registerINodeNodePreReader(C.pluginRegister.node,new R.LinkNodePreReader(this)),null===(t=e.getService(T.default.ID))||void 0===t||t.registerMarkdownWriter("link",new D.default),null===(r=e.getService(I.default.ID))||void 0===r||r.registerBeforeInsertTextInheritAttrs(this.nodeAttrProcessor),this._initMarkdownKey()}}),Object.defineProperty(t.prototype,"_initMarkdownKey",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.kernel.getService(d.IMarkdownKernelService.ID);e&&e.registerMarkdownMatcher(d.TriggerType.whiteSpace,new p.default(this.editing,{match:/\[(.+?)]\(([\S]+?)\)$/,exclude:/!\[(.+?)]\(([\S]+?)\)$/},(function(e,t,r,n){var o=n.matched,a=e.newPosition(r,o.index),i=o[1],u=o[2],l=e.createElement("link",{src:u}),s=e.createInheritTextNode(i,a);e.appendChild(l,s),c.PositionUtil.insertInlineNode(e,a,l),e.setSelection(e.newSelection(e.newRange(e.newPosition(l.parentNode,l.offset+1))))})))}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:C.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:j.default}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[_.default,E.default,g.default,w.default,P.default,v.default,O.default]}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:b.LinkKernelService}),t}(c.KernelPlugin);t.default=M},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={src:{targets:["link"],values:function(e){return"string"==typeof e}},external:{targets:["link"],values:[!0,!1]}}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.LinkKernelService=void 0;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"linkTextReadProxy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t}return o(t,e),Object.defineProperty(t.prototype,"isValidURL",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.plugin.option.isValidURL(e)}}),Object.defineProperty(t.prototype,"transformURL",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.plugin.option.transformURL(e)}}),Object.defineProperty(t.prototype,"registerTextReadProxy",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.linkTextReadProxy=e}}),Object.defineProperty(t.prototype,"getTextReadProxy",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.linkTextReadProxy}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(r(4754).ILinkKernelService);t.LinkKernelService=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ILinkKernelService=void 0;var a=r(3472),i=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("ILinkKernelService")}),t}(r(3475).KernelAbstractService);t.ILinkKernelService=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o={link:{parents:[n.Category.TextContainer],excludes:["link"],category:[n.Category.Inline,n.Category.TextContainer],children:[n.Category.Text]}};t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3454),i=r(3459),u=r(3457),l=r(3638),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n,o,u){void 0===o&&(o=!1),void 0===u&&(u=!1);var l=e.newJob(),c=l.getNodeById(t);if(!c)return e.cancelJob(l),!1;if(a.assert.fatal(c.isCardNode(),"plugins/link/src/kernel/commands/card-to-link-command.ts:26"),!r||!u&&!this.plugin.option.isValidURL(r))return e.cancelJob(l),!1;var s={src:r};o&&(s.external=!0);var f=l.createElement("link",s),d=l.createInheritTextNode(n||r,l.newPosition(c.parentNode,c.offset));if(l.appendChild(f,d),l.hasCategory(c.nodeName,i.Category.BlockCard)){var p=c.closest(i.Category.Hole),h=l.createElement(l.defaultElementName);l.appendChild(h,f),l.replaceChild(p.parentNode,h,p)}else l.replaceChild(c.parentNode,f,c);l.setSelection(l.newSelection(l.newRange(l.newPosition(f.parentNode,f.offset+1)))),e.commitJob(l)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.cardToLink}),t}(u.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3513),l=r(3465),c=r(3638),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(e.prototype.getState.call(this,t)===l.COMMAND_UNAVAILABLE)return l.COMMAND_UNAVAILABLE;var r=t.getSelection(),n=r.firstRange;if(!n.collapsed)return l.COMMAND_UNAVAILABLE;var o=r.firstRange,i=o.start,u=o.end;if(i.node.closest(a.Category.OnlyText)||u.node.closest(a.Category.OnlyText))return l.COMMAND_UNAVAILABLE;var c=n.start.node,s=c.isTextNode()?c.parentNode:c;return s.hasCategory([a.Category.Root,a.Category.LikeRoot])?t.acceptNode(t.defaultElementName,"link")?l.COMMAND_NOT_EXECUTED:l.COMMAND_UNAVAILABLE:s&&t.acceptNode(s.nodeName,"link")?l.COMMAND_NOT_EXECUTED:l.COMMAND_UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n,o){void 0===n&&(n=!0),void 0===o&&(o=!1);var u=e.newJob();if(!r||!t||this.getState(u)===l.COMMAND_UNAVAILABLE||!o&&!this.plugin.option.isValidURL(r))return e.cancelJob(u),!1;var c={src:r};n&&(c.external=!0);var s=u.getSelection();i.assert.fatal(s.isCollapsed,"plugins/link/src/kernel/commands/insert-link-command.ts:87");var f=u.createElement("link",c),d=u.createInheritTextNode(t,s.firstRange.start);return u.appendChild(f,d),a.PositionUtil.insertInlineNode(u,s.firstRange.start,f),u.dangerDirectSetSelection(u.selectNode(f)),e.commitJob(u),f.id}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.insertLink}),t}(u.GeneralCommandV2);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3454),l=a(r(4011)),c=r(3465),s=r(3638),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_nodeName",{enumerable:!0,configurable:!0,writable:!0,value:"link"}),t}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){void 0===r&&(r=!0),void 0===n&&(n=!1);var o=e.newJob();if(!t||this.getState(o)===c.COMMAND_UNAVAILABLE||!n&&!this.plugin.option.isValidURL(t))return e.cancelJob(o),!1;var a={src:t};r&&(a.external=!0);var l=o.createElement("link",a),s=i.RangeUtil.wrapInlineNode(o,o.getSelection().firstRange,l);return i.RangeUtil.walkRange(s,(function(e){e.isTextNode()&&o.removeAttribute(e,"color")})),o.dangerDirectSetSelection(o.selectNode(l)),e.commitJob(o),u.assert.fatal(l.isConnected,"plugins/link/src/kernel/commands/link-command.ts:60"),l.id}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.link}),t}(l.default);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3454),i=r(3457),u=r(3465),l=r(3638),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._getLinkNode(e)?u.COMMAND_NOT_EXECUTED:u.COMMAND_UNAVAILABLE}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this._getLinkNode(e,t);return r?r.children.map((function(e){var t=e.isTextNode();return a.assert.fatal(t,"plugins/link/src/kernel/commands/link-text-command.ts:36"),t?e.data:""})).join(""):null}}),Object.defineProperty(t.prototype,"_getLinkNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(t){var r=e.getNodeById(t);return r&&"link"===r.nodeName?r:null}var n=e.getSelection();return n.rangeCount>1?null:n.firstRange.commonAncestorContainer.closest("link")}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.linkText}),t}(i.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3513),u=r(3638),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n,o,a=e.getSelection(),i=null==a?void 0:a.firstRange;if(!i||a.rangeCount>1)return null;var u=null===(t=i.start)||void 0===t?void 0:t.node,l=null===(r=i.start)||void 0===r?void 0:r.offset,c=null===(n=i.end)||void 0===n?void 0:n.node,s=null===(o=i.end)||void 0===o?void 0:o.offset;return i.collapsed?this._getLinkNode(u,l-1,!0)||this._getLinkNode(c,s-1,!0):i.collapsed?null:this._getLinkNode(u,l,!0)&&this._getLinkNode(c,s,!1)}}),Object.defineProperty(t.prototype,"_getLinkNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o;if(!e||"number"!=typeof t)return null;if((null===(n=e.isTextNode)||void 0===n?void 0:n.call(e))&&"link"===(null===(o=e.parent)||void 0===o?void 0:o.nodeName))return e.parent;if(e.hasCategory(a.Category.TextContainer)){var i=e.children[r?t:t-1];if("link"===(null==i?void 0:i.nodeName))return i}return null}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.selectionPureLink}),t}(i.GeneralCommandV2);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3513),u=r(3465),l=r(3638),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob(),n=r.getNodeById(t);if(this.getState(r)===u.COMMAND_UNAVAILABLE||!n||"link"!==n.nodeName)return e.cancelJob(r),!1;var o=a.RangeUtil.unwrapInlineNode(r,r.getSelection().firstRange,n);return r.setSelection(r.newSelection([o])),e.commitJob(r),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.unlink}),t}(i.GeneralCommandV2);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3457),i=r(3638),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if(!r.text&&!r.src&&"boolean"!=typeof r.external)return!1;var n=e.newJob(),o=n.getNodeById(t);if(!o||"link"!==o.nodeName)return e.cancelJob(n),!1;if(r.src){if(!this.plugin.option.isValidURL(r.src))return e.cancelJob(n),!1;n.setAttribute(o,"src",r.src)}if(r.text&&this._updateLinkNodeContent(n,o,r.text),"boolean"==typeof r.external)n.setAttribute(o,"external",r.external);else if(r.src){var a=this.plugin.option.isTargetBlankURL(r.src);n.setAttribute(o,"external",a)}return n.dangerDirectSetSelection(n.selectNode(o)),e.commitJob(n),!0}}),Object.defineProperty(t.prototype,"_updateLinkNodeContent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.createInheritTextNode(r,e.newPosition(t,0));t.children.forEach((function(r){e.removeChild(t,r)})),e.appendChild(t,n)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:i.pluginRegister.command.updateLink}),t}(a.KernelAbstractCommand);t.default=u},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_KERNEL_OPTION=void 0;var a=o(r(3912));t.DEFAULT_KERNEL_OPTION={autoCompleteLink:!1,referenceURL:null,protectURL:!1,protocols:["http:","https:","data:","dingtalk:","ftp:","mailto:","fleamarket:","alipays:","qinpai:"],isValidURL:function(e,t){try{var r=new URL(e,"http://localhost/").protocol;return!!t.includes(r)}catch(e){}return!1},sanitizeURL:function(e){return a.default.sanitizeUrl(e)},isTargetBlankURL:function(e,t){try{if("necustom:"===new URL(e,"necustom://me.com/").protocol)return!1}catch(e){return!0}try{var r=new URL(e,t),n=new URL(t);if(r.host===n.host)return!1}catch(e){return!0}return!0},transformURL:function(e,t){return e},allowToOpenLocal:function(e,t){return!1}};var i=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=n(n({},t.DEFAULT_KERNEL_OPTION),e)}return Object.defineProperty(e.prototype,"autoCompleteLink",{get:function(){return this._option.autoCompleteLink},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"referenceURL",{get:function(){return this._option.referenceURL||this.kernelOption.currentURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"protectURL",{get:function(){return!!this._option.protectURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowToOpenLocal",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._option.allowToOpenLocal(e,t)}}),Object.defineProperty(e.prototype,"isValidURL",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._option.isValidURL(e,this._option.protocols)}}),Object.defineProperty(e.prototype,"sanitizeURL",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._option.sanitizeURL(e)}}),Object.defineProperty(e.prototype,"isTargetBlankURL",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._option.isTargetBlankURL(e,this.referenceURL)}}),Object.defineProperty(e.prototype,"transformURL",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._option.transformURL(e,this.referenceURL)}}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"link"}),e}();t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._plugin=t,r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.attrs;(null==r?void 0:r.href)&&(this._plugin.option.protectURL&&!this._plugin.option.isValidURL(null==r?void 0:r.href)||e.setNode(i.default.createElement("link",{src:r.href,external:"_blank"===r.target})))}}),t}(r(3548).LakeNodeReader);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:null}),r._plugin=t,r}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.attrs,n=t.children,o=this._extractLinkText(n)||(null==r?void 0:r.name),a=this._plugin.option,u=a.transformURL(null==r?void 0:r.href);if((null==r?void 0:r.href)&&a.isValidURL(null==r?void 0:r.href))if(o){e.stop();var l=i.default.createElement("link",{src:u,external:a.isTargetBlankURL(u)});i.default.appendChild(l,i.default.createTextNode(o)),e.setNode(l)}else e.setState("link",u)}}),Object.defineProperty(t.prototype,"_extractLinkText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return(null==e?void 0:e.length)?e.map((function(e){return"#text"===e.name?e.data:e.children?t._extractLinkText(e.children):""})).join("").replace(/[\u200B\uFEFF]/g,"").trim():""}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["a"]}),t}(a(r(3494)).default);t.default=u},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3458)),a={http:!0,https:!0},i=/(?:[^a-z0-9]|^)([a-z0-9]{2,}):\/\/(?:[a-z_0-9@:.])+?(?:\/\S*?)?(?:[#\s\S]*?)?(?:(?=[\u0100-\uffff\s])|$)/gi,u=function(){function e(e,t){Object.defineProperty(this,"pluginOption",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"service",{enumerable:!0,configurable:!0,writable:!0,value:t})}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){for(var r,n,o,u=[];o=i.exec(e);)if(a[o[1].toLowerCase()]){var l=o[0],c=o.index;/^[^a-z0-9]/i.test(o[0])&&(c+=1,l=l.substring(1)),this.pluginOption.isValidURL(l)&&u.push({index:c,url:l})}if(0===u.length)return null;var s=null===(n=null===(r=this.service)||void 0===r?void 0:r.getTextReadProxy())||void 0===n?void 0:n(u,t.originText,e);return(null==s?void 0:s.length)?s:this._generateLinkNode(u,e)}}),Object.defineProperty(e.prototype,"_generateLinkNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=[],n=0,a=this.pluginOption;return e.forEach((function(e){var i=e.url,u=e.index;u>n&&r.push(o.default.createTextNode(t.substring(n,u)));var l=a.transformURL(i),c=o.default.createElement("link",{external:a.isTargetBlankURL(l),src:l});o.default.appendChild(c,o.default.createTextNode(i)),r.push(c),n=u+i.length})),n<t.length&&r.push(o.default.createTextNode(t.substring(n))),r}}),e}();t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._plugin=t,r}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o=null===(r=t.attrs)||void 0===r?void 0:r.src;if(o){var a=o,i=this._plugin.option,u=i.autoCompleteLink,l=i.referenceURL;if(!(null==o?void 0:o.startsWith("#"))&&!/^[a-z0-9]+:\/\//i.test(o)&&u&&l)try{a=(c=new URL(o,l)).toString()}catch(e){}else if(l&&(null==o?void 0:o.startsWith("#")))try{var c;(c=new URL(o,l)).pathname=c.pathname.replace(/\/edit$/,""),a=c.toString()}catch(e){}var s={href:a,"data-href":o};(null===(n=t.attrs)||void 0===n?void 0:n.external)&&(s.target="_blank"),e.setNode(e.createElement("a",{attrs:s,className:"ne-link"}))}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["link"]}),t}(a(r(3470)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.attrs,n=void 0===r?{}:r,o={href:n.src};n.external&&(o.target="_blank"),e.setNode(e.createElement("a",{attrs:o}))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["link"]}),t}(r(3499).LakeNodeWriter);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;return e.appendFirst("["),e.append("](".concat((null===(r=t.attrs)||void 0===r?void 0:r.src)||"",")")),!0}}),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkNodePreReader=void 0;var n=r(3453),o=r(3761),a=function(){function e(e){Object.defineProperty(this,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._plugin=e}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;if(e.from===o.SOURCE_FROM_PASTE&&!e.self){var n=null===(r=t.attrs)||void 0===r?void 0:r.src;if("string"==typeof n)return n.startsWith("#")?this.updateNodeWithFullSrc(e,t):this.updateNodeWithHash(e,t)}}}),Object.defineProperty(e.prototype,"updateNodeWithFullSrc",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,o;try{if(!(o=e._option.clipboardPayload).getData)throw new Error("getData is not existed")}catch(e){return void console.error(e)}var a=o.getData("text/html");if("string"==typeof a){var i=decodeURIComponent((null===(r=a.match(/<ne-clipboard[^>]+(?:source=")([^"]+)"/))||void 0===r?void 0:r[1])||"").split("#")[0];i&&n.INodeHelper.setAttribute(t,{src:i+t.attrs.src})}}}),Object.defineProperty(e.prototype,"updateNodeWithHash",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,o=this._plugin.option.transformURL(null===(r=t.attrs)||void 0===r?void 0:r.src);o.startsWith("#")&&n.INodeHelper.setAttribute(t,{src:o})}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),e}();t.LinkNodePreReader=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3591),l=r(4227),c=a(r(4230)),s=r(3466),f=r(3463),d=a(r(3845)),p=r(3519),h=r(3601),y=a(r(4772)),b=r(4773),m=a(r(4775)),v=a(r(4244)),g=a(r(4776)),_=a(r(4777)),w=a(r(4778)),O=a(r(4779)),E=a(r(4780)),P=a(r(4781)),j=r(4782),C=a(r(4783)),k=a(r(4784)),S=a(r(4789)),A=r(3478),x=r(3764),N=a(r(4793)),T=a(r(4794)),D=a(r(4795)),L=a(r(4796)),R=a(r(4797)),I=a(r(4799)),M=a(r(4800)),F=a(r(4801)),B=a(r(4802)),U=a(r(4803)),H=a(r(4804)),V=a(r(4805)),G=a(r(4806)),q=a(r(4807)),z=a(r(3635)),W=a(r(4808)),K={"-":A.pluginRegister.node.uli,"+":A.pluginRegister.node.uli,"*":A.pluginRegister.node.uli,"[]":A.pluginRegister.node.tli,"[x]":A.pluginRegister.node.tli},Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_indexTypeManager",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(t,"_listManager",{enumerable:!0,configurable:!0,writable:!0,value:null}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerElement(m.default),e.registerAttr(y.default),e.registerCommand("indexType",new v.default),this._initEvent(),this._initMarkdownKey();var t=e.getService(f.ILakeKernelService.ID);t&&t.registerLakeCardReader(B.default.CardNames,new B.default)}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,r=this.kernel;this.option.onAfterKernelPluginInit&&this.option.onAfterKernelPluginInit(r,this),null===(e=r.getService(c.default.ID))||void 0===e||e.registerStyleKeepBlockAttrs("indexType",(function(e,t){return v.default.getCurrentIndexType(e,t)}));var n=r.getService(l.IFormatKernelService.ID);n&&n.registerKeepBlockAttrName([A.pluginRegister.attr.list,A.pluginRegister.attr.fid,A.pluginRegister.attr.index]);var o=r.getService(s.IHTMLKernelService.ID);o&&(o.registerPreHTMLNodeReader(q.default.NodeNames,new q.default),o.registerHTMLNodeReader(M.default.NodeNames,new M.default),o.registerHTMLNodeReader(F.default.NodeNames,new F.default),o.registerHTMLAttributeReader(I.default.AttrNames,new I.default));var a=r.getService(f.ILakeKernelService.ID);a&&(a.registerLakeNodeReader(["ol","ul"],new G.default),a.registerLakeNodeReader("li",new V.default(this.service)),a.registerLakeStyleReader(U.default.StyleNames,new U.default),a.registerLakeAttrReader(H.default.AttrNames,new H.default));var i=r.getService(s.IHTMLKernelService.ID);i&&(i.registerNodeHTMLWriter(T.default.NodeNames,new T.default),i.registerAttrHTMLWriter(N.default.AttrNames,new N.default(this)));var u=r.getService(f.ILakeKernelService.ID);u&&(u.registerLakeNodeWriter(L.default.NodeNames,new L.default),u.registerLakeAttrWriter(D.default.AttrNames,new D.default));var d=r.getService(h.ITextDataSourceKernelService.ID);d&&d.registerTextWriter(R.default.NodeNames,new R.default),null===(t=r.getService(z.default.ID))||void 0===t||t.registerMarkdownWriter(W.default.NodeNames,new W.default)}}),Object.defineProperty(t.prototype,"_initEvent",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.kernel;t.on("document.create",(function(){e._indexTypeManager=new k.default(e.kernel,e.editing),e._listManager=new S.default(e.option.allFromStart,e.kernel,e.editing)})),t.on("document.ready",(function(){var t,r;null===(t=e._listManager)||void 0===t||t.startWork(),null===(r=e._indexTypeManager)||void 0===r||r.startWork()})),t.on("document.destroy",(function(){e._listManager&&(e._listManager.destroy(),e._listManager=null),e._indexTypeManager&&(e._indexTypeManager.destroy(),e._indexTypeManager=null)}))}}),Object.defineProperty(t.prototype,"_initMarkdownKey",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.kernel,r=t.getService(p.IMarkdownKernelService.ID);r&&(Object.keys(K).forEach((function(n){r.registerMarkdownMatcher(p.TriggerType.whiteSpace,new d.default(e.editing,n,(function(t,r,o,a){e._handlerMarkdown(t,K[n],r,a.matchedText,0)}),[t.defaultElementName]))})),r.registerMarkdownMatcher(p.TriggerType.whiteSpace,new d.default(this.editing,/^\d{1,3}\.$/,(function(t,r,n,o){if(r.hasCategory(i.Category.Heading))return v.default.setBlockNodeIndexType(t,r,v.default.getCurrentIndexType(t,2)),void t.setSelection(t.newSelection(t.newRange(t.newPosition(r,0))));e._handlerMarkdown(t,A.pluginRegister.node.oli,r,o.matchedText,0)}),[t.defaultElementName,i.Category.Heading])),r.registerMarkdownMatcher(p.TriggerType.whiteSpace,new d.default(this.editing,/^[一二三四五六七八九十零百千万]+\、$/,(function(t,r,n,o){try{if(r.hasCategory(i.Category.Heading))return v.default.setBlockNodeIndexType(t,r,v.default.getCurrentIndexType(t,1)),void t.setSelection(t.newSelection(t.newRange(t.newPosition(r,0))));var a=(0,j.chinese2num)(o.matchedText.slice(0,-1));e._handlerMarkdown(t,A.pluginRegister.node.oli,r,"".concat(a,"."),1)}catch(e){}}),[t.defaultElementName,i.Category.Heading])))}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._listManager&&(this._listManager.destroy(),this._listManager=null),e.prototype.destroy.call(this)}}),Object.defineProperty(t.prototype,"_handlerMarkdown",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n,o){var a,l,c;if(t===A.pluginRegister.node.tli&&"[x]"===n)c={checked:!0};else if(t===A.pluginRegister.node.oli&&(c={indexType:o},(0,x.setLastIndexType)(o),"1."!==n)){var s=Number.parseInt(n,10)-1;Number.isInteger(s)&&s>0&&(c.start=s)}var f=e.createElement(t,c),d=i.SelectionUtil.replaceBlockNode(e,e.newSelection(e.newRange(e.newPosition(r,0))),f,!0,!0),p=d.firstRange.start.node.firstChild;if((null==p?void 0:p.isTextNode())&&" "===p.data[0]&&e.setTextNodeData(p,p.data.slice(1)),(null==p?void 0:p.isTextNode())&&0===p.dataLength){var h=p.parentNode;e.removeChild(p.parentNode,p),d=e.newSelection(e.newRange(e.newPosition(h,0)))}e.setSelection(d);try{var y=d.firstRange.start.node;if(t!==A.pluginRegister.node.oli||(null===(a=y.previousSibling)||void 0===a?void 0:a.nodeName)===A.pluginRegister.node.oli||(null===(l=y.nextSibling)||void 0===l?void 0:l.nodeName)!==A.pluginRegister.node.oli)return;var b=y.nextSibling.attrs.list,m=e.getNodesByName(A.pluginRegister.node.oli).filter((function(e){return e.isConnected&&e.attrs.list===b&&i.NodeUtil.compare(e,y).following})),v=(0,u.generateNodeId)();if("number"==typeof y.attrs.start&&0!==y.attrs.start){var g=e.getNodesByName(A.pluginRegister.node.oli).filter((function(e){return e.isConnected&&0===(e.attrs.level||0)&&i.NodeUtil.compare(e,y).preceding})).sort((function(e,t){return i.NodeUtil.compare(e,t).preceding?-1:1})).pop();g&&(g.attrs.indexType||0)===(y.attrs.indexType||0)&&(v=g.attrs.list)}e.removeAttribute(y,A.pluginRegister.attr.fid),e.setAttribute(y,A.pluginRegister.attr.list,v),m.forEach((function(t){e.removeAttribute(t,A.pluginRegister.attr.fid),e.setAttribute(t,A.pluginRegister.attr.list,v)}))}catch(e){console.error(e)}}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:A.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:C.default}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:b.ListDataProcessService}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[w.default,E.default,P.default,g.default,_.default,O.default]}),t}(i.KernelPlugin);t.default=Y},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0});for(var o=r(3453),a=r(4026),i=r(3478),u=[],l=1;l<=a.MAX_LIST_LEVEL;l++)u.push(l);var c=((n={})[i.pluginRegister.attr.list]={targets:[o.Category.Level]},n[i.pluginRegister.attr.fid]={targets:[o.Category.Level]},n[i.pluginRegister.attr.level]={targets:[o.Category.Level],values:u},n[i.pluginRegister.attr.index]={targets:[o.Category.Level]},n[i.pluginRegister.attr.start]={targets:[o.Category.Level]},n[i.pluginRegister.attr.indexStyle]={targets:[o.Category.Level]},n[i.pluginRegister.attr.indexType]={targets:[o.Category.Level,o.Category.Heading]},n[i.pluginRegister.attr.parentIndex]={targets:[o.Category.Level]},n[i.pluginRegister.attr.checked]={targets:[i.pluginRegister.node.tli],values:[!0],cleanByBreakLine:!0},n[i.pluginRegister.attr.version]={targets:[i.pluginRegister.node.tli],cleanByBreakLine:!0},n);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ListDataProcessService=void 0;var a=r(3454),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_processer",{enumerable:!0,configurable:!0,writable:!0,value:null}),t}return o(t,e),Object.defineProperty(t.prototype,"registerProcesser",{enumerable:!1,configurable:!0,writable:!0,value:function(e){a.assert.fatal(null===this._processer,"plugins/list/src/kernel/list-data-process-service.ts:9"),this._processer=e}}),Object.defineProperty(t.prototype,"getProcesser",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._processer}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(r(4774).IListDataProcessService);t.ListDataProcessService=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IListDataProcessService=void 0;var a=r(3472),i=r(3475),u=r(3478),l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)(u.pluginRegister.service.listDataProcessService)}),t}(i.KernelAbstractService);t.IListDataProcessService=l},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0});var o=r(3453),a=r(3478),i=((n={})[a.pluginRegister.node.oli]={parents:["#root",o.Category.LikeRoot],category:[o.Category.Block,o.Category.Sticky,o.Category.DisallowEmpty,o.Category.Level,o.Category.TextContainer,o.Category.Brick],standardAttrs:[a.pluginRegister.attr.list,a.pluginRegister.attr.level,a.pluginRegister.attr.start,a.pluginRegister.attr.fid,a.pluginRegister.attr.index,a.pluginRegister.attr.indexStyle,a.pluginRegister.attr.checked]},n[a.pluginRegister.node.uli]={parents:["#root",o.Category.LikeRoot],category:[o.Category.Block,o.Category.Sticky,o.Category.DisallowEmpty,o.Category.Level,o.Category.TextContainer,o.Category.Brick],standardAttrs:[a.pluginRegister.attr.list,a.pluginRegister.attr.level,a.pluginRegister.attr.start,a.pluginRegister.attr.fid,a.pluginRegister.attr.index,a.pluginRegister.attr.indexStyle,a.pluginRegister.attr.checked]},n[a.pluginRegister.node.tli]={parents:["#root",o.Category.LikeRoot],category:[o.Category.Block,o.Category.Sticky,o.Category.Clean,o.Category.DisallowEmpty,o.Category.Level,o.Category.TextContainer,o.Category.Brick],standardAttrs:[a.pluginRegister.attr.list,a.pluginRegister.attr.level,a.pluginRegister.attr.start,a.pluginRegister.attr.fid,a.pluginRegister.attr.index,a.pluginRegister.attr.indexStyle,a.pluginRegister.attr.checked]},n);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3591),l=r(3513),c=r(3478),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"nodeName",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.node.oli}),t}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.nodeName,n=e.getNodeById(t);if(!n||n.nodeName!==r)return null;var o=n.attrs.list,i=e.getNodesByName(r).filter((function(e){return e.isConnected}));if(i.find((function(e){return e.attrs.list===o&&a.NodeUtil.compare(e,n).preceding})))return[!0,!1,n.attrs.indexType];var u={},l=i.find((function(e){var t=e.attrs.list;return!u[t]&&t!==o&&(u[t]=e,a.NodeUtil.compare(e,n).preceding)}));return[n.attrs.start,!!l,n.attrs.indexType]}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=!0);var n=e.newJob(),o=this.nodeName,l=n.getNodeById(t);if(!l||l.nodeName!==o)return e.cancelJob(n),!1;var s=l.attrs.list;l.attrs.fid;if(r){var f=n.getNodesByName(o).filter((function(e){return e.attrs.list===s&&a.NodeUtil.compare(e,l).following})),d=(0,u.generateNodeId)();return n.removeAttribute(l,c.pluginRegister.attr.fid),n.removeAttribute(l,c.pluginRegister.attr.start),n.setAttribute(l,c.pluginRegister.attr.list,d),f.forEach((function(e){n.removeAttribute(e,c.pluginRegister.attr.fid),n.setAttribute(e,c.pluginRegister.attr.list,d)})),e.commitJob(n),!0}var p=n.getNodesByName(o).filter((function(e){return e.isConnected})),h={};p.forEach((function(e){var t=e.attrs.list;h[t]||t===s||(h[t]=e)}));var y=Object.values(h).filter((function(e){return e.isConnected&&a.NodeUtil.compare(e,l).preceding})).sort((function(e,t){var r=a.NodeUtil.compare(e,t);return r.preceding?-1:(i.assert.fatal(r.following,"plugins/list/src/kernel/commands/list-ordered-index-command.ts:109"),1)}));if(0===y.length)return e.cancelJob(n),!1;var b=y[y.length-1].attrs.list;return n.removeAttribute(l,c.pluginRegister.attr.fid),n.setAttribute(l,c.pluginRegister.attr.list,b),p.forEach((function(e){e.attrs.list===s&&(n.removeAttribute(e,c.pluginRegister.attr.fid),n.setAttribute(e,c.pluginRegister.attr.list,b))})),e.commitJob(n),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.orderedListIndexQuery}),t}(l.GeneralCommandV2);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3454),l=r(3513),c=r(3478),s=r(3764),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"nodeName",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.node.oli}),Object.defineProperty(t,"categories",{enumerable:!0,configurable:!0,writable:!0,value:[c.pluginRegister.node.oli,a.Category.Heading]}),t}return o(t,e),Object.defineProperty(t.prototype,"getValueByHeading",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.firstRange,r=t.start,n=t.end,o=r.node.closest(a.Category.Block);return o&&o.hasCategory(a.Category.Heading)&&o===n.node.closest(a.Category.Block)&&o.attrs.indexType||null}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=new Set,r=!1,n=e.getSelection(),o=n.firstRange.start.node.closest([a.Category.Block]);return o&&o.hasCategory(a.Category.Heading)?this.getValueByHeading(n):(i.SelectionUtil.fullWalkSelection(n,{enter:function(e){return!r&&(e.hasCategory(a.Category.TextContainer)?(u.assert.fatal(e.isElement(),"plugins/list/src/kernel/commands/list-ordered-type-command.ts:52"),e.hasCategory("oli")?t.add(e.attrs.indexType):i.NodeUtil.isLikeEmptyElement(e)||(r=!0),!1):void 0)}}),r||1!==t.size?null:Array.from(t)[0])}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=this.categories,a=n.getNodeById(t);return a&&a.hasCategory(o)&&"number"==typeof r?((0,s.setLastIndexType)(r),n.setAttribute(a,c.pluginRegister.attr.indexType,r),e.commitJob(n),!0):(e.cancelJob(n),!1)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.orderedListIndexType}),t}(l.GeneralCommandV2);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(4027)),u=r(3478),l=function(e){function t(t,r,n){var o=e.call(this,t,r,n,u.pluginRegister.node.oli)||this;return Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(o,"editing",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:n}),o}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.orderedList}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3457),i=r(3478),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.newJob(),a=o.getNodeById(t);if(!a||a.nodeName!==i.pluginRegister.node.tli)return!1;var u=r;if(void 0===r)u=!a.attrs.checked;else if(a.attrs.checked===r)return!0;return u?o.setAttribute(a,i.pluginRegister.attr.checked,u):o.removeAttribute(a,i.pluginRegister.attr.checked),o.setAttribute(a,i.pluginRegister.attr.version,n||+new Date),e.commitJob(o),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:i.pluginRegister.command.taskStatus}),t}(a.KernelAbstractCommand);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(4027)),u=r(3478),l=function(e){function t(t,r,n){var o=e.call(this,t,r,n,u.pluginRegister.node.tli)||this;return Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(o,"editing",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:n}),o}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.taskList}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(4027)),u=r(3478),l=function(e){function t(t,r,n){var o=e.call(this,t,r,n,u.pluginRegister.node.uli)||this;return Object.defineProperty(o,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(o,"editing",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:n}),o}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.unorderedList}),t}(i.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chinese2num=void 0;var n={"个":1,"十":10,"百":100,"千":1e3,"万":1e4},o={"零":0,"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9};t.chinese2num=function(e){e+="个";for(var t=0,r=Number.MAX_VALUE,a=0;a<e.length;a+=2){var i=e[a];if("个"===i)return t;if("十"!==i)if("零"!==i){if(!o[i])throw new Error("not valid nums ".concat(i," index=").concat(a));var u=e[a+1];if(!n[u])throw new Error("not valid unit ".concat(u," index=").concat(a+1));if(n[u]>=r)throw new Error("not valid unit ".concat(u," index=").concat(a+1));r=n[u],t+=o[i]*n[u]}else a-=1;else a-=1,t+=10}return t}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ListViewerOption=void 0;var i=a(r(3464)),u={enableDynamic:!1,allFromStart:!1,onAfterKernelPluginInit:function(){},onAfterViewerPluginInit:function(){},getInitialHeadingIndex:function(){return[Number.MAX_VALUE]}},l=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=(0,i.default)({},u,e)}return Object.defineProperty(e.prototype,"enableDynamic",{get:function(){return this._option.enableDynamic},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allFromStart",{get:function(){return this._option.allFromStart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getInitialHeadingIndex",{get:function(){return this._option.getInitialHeadingIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onAfterKernelPluginInit",{get:function(){return this._option.onAfterKernelPluginInit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onAfterViewerPluginInit",{get:function(){return this._option.onAfterViewerPluginInit},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"list"}),e}();t.default=l;var c=function(e){function t(t,r){var n=e.call(this,t)||this;return Object.defineProperty(n,"kernelOption",{enumerable:!0,configurable:!0,writable:!0,value:r}),n}return o(t,e),Object.defineProperty(t,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"list"}),t}(l);t.ListViewerOption=c},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3763),u=r(4245),l=r(4026),c=o(r(4788)),s=function(){function e(e,t){Object.defineProperty(this,"iKernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"iEditing",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_nodes",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_hasChangeIndexType",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"shouldReCompute",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idToInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.compute()}return Object.defineProperty(e.prototype,"startWork",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.compute();var t=this.iKernel,r=this.iEditing;(0,i.bindEvent)(this,r,"nodechange",(function(t){var r,n,o,i,u,c=t.node,s=t.type,f=t.attrName;c.isTextNode()||c.hasCategory(a.Category.InlineCard)?"attribute"===s&&l.LIST_INDEX_ATTR_NAMES.includes(f)?(null===(r=c.parent)||void 0===r?void 0:r.firstChild)===c&&(null===(n=c.parent)||void 0===n?void 0:n.hasCategory(a.Category.Heading))&&(e._hasChangeIndexType=!0):"insert"!==s&&"remove"!==s||(null===(o=c.parent)||void 0===o?void 0:o.firstChild)===c&&(null===(i=c.parent)||void 0===i?void 0:i.hasCategory(a.Category.Heading))&&(e._hasChangeIndexType=!0):c.hasCategory(a.Category.Heading)&&("insert"===s&&(null===(u=c.parentNode)||void 0===u?void 0:u.isRootNode())||"remove"===s?(e._nodes.add(c),e.shouldReCompute=!0):"attribute"===s&&"indexType"===f&&(e.shouldReCompute=!0,e._hasChangeIndexType=!0))})),(0,i.bindEvent)(this,r,"beforecontentchange",(function(){if(e._nodes.size>0){var n=r.newJob(a.JobMode.Auto);try{var o=n.document.getNodesByCategory(a.Category.Heading).filter((function(e){var t;return e.isConnected&&(null===(t=e.parentNode)||void 0===t?void 0:t.isRootNode())})).sort((function(e,t){return a.NodeUtil.compare(e,t).preceding?-1:1}));e.newNodeAddIndexType(n,o),r.commitJob(n),e._hasChangeIndexType=!1,t.emitPluginEvent(l.INDEX_TYPE_CHANGE_EVENT,!0)}catch(e){r.cancelJob(n)}e._nodes.clear()}e._hasChangeIndexType&&(e._hasChangeIndexType=!1,t.emitPluginEvent(l.INDEX_TYPE_CHANGE_EVENT,!0))})),(0,i.bindEvent)(this,t,"contentchange",(function(){e.shouldReCompute&&(e.shouldReCompute=!1,e.compute())}))}}),Object.defineProperty(e.prototype,"getHeadingIndexInfo",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&this.idToInfoMap.get(e)||null}}),Object.defineProperty(e.prototype,"newNodeAddIndexType",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._nodes.forEach((function(r){var n;if(null===(n=r.parent)||void 0===n?void 0:n.isRootNode())for(var o=Number(r.nodeName.slice(1))||0,a=t.indexOf(r),i=t[a-1];i;){if((Number(i.nodeName.slice(1))||0)<=o)return void("number"==typeof i.attrs.indexType&&e.setAttribute(r,"indexType",i.attrs.indexType));i=t[(a-=1)-1]}else"number"==typeof r.attrs.indexType&&e.removeAttribute(r,"indexType")}))}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(e.prototype,"compute",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,r,o;if(this.iKernel.document){this.idToInfoMap.clear();var i=[0,0,0,0,0,0],u=[],l=Number.MAX_VALUE,s=[];try{for(var f=n(this.iKernel.document.rootNode.children),d=f.next();!d.done;d=f.next()){var p=d.value;if(p.hasCategory(a.Category.Heading)){var h=Number(p.nodeName.slice(1))-1;u=u.slice(0,h+1),"number"==typeof p.attrs.indexType&&(i[h]=1,l=Math.min(h,l),"number"==typeof u[h]?u[h]++:u[h]=0,s.push({headingIndex:u.slice(0),headingLevel:h,node:p}))}}}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}var y=i.reduce((function(e,t,r){return t&&(e[r]=e._currentIndex++),e}),{_currentIndex:0}),b=function(e){var t=e.node,r=e.headingIndex,n=e.headingLevel,o=(0,c.default)(r,(function(e,t,r){return i[r]&&r<=n&&e.push(t),e}),[]);m.idToInfoMap.set(t.id,{index:r[n],indexType:t.attrs.indexType,level:n-l,parentIndex:r.slice(l,n),symbol:m._getIndexText(o[y[n]],t.attrs.indexType,y[n],o.slice(0,y[n]))})},m=this;try{for(var v=n(s),g=v.next();!g.done;g=v.next()){b(g.value)}}catch(e){r={error:e}}finally{try{g&&!g.done&&(o=v.return)&&o.call(v)}finally{if(r)throw r.error}}}}}),Object.defineProperty(e.prototype,"_getIndexText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){try{return(0,u.numberToListTextForHeading)(e,r,n,t)||""}catch(e){console.error(e)}return""}}),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chineseNumberToTextForHeading=t.chineseNumberToTextWithSymbol=t.chineseNumberToText=void 0;var n=["零","一","二","三","四","五","六","七","八","九"],o=["","十","百","千","万"];function a(e,t){if(void 0===t&&(t=!1),e>1e4)return a(Math.floor(e/1e4))+"万"+a(e%1e4,e%1e4<1e3);for(var r=e.toString(),i="",u=0;u<r.length;u++){var l=parseInt(r[u]);if(0===l){if(t)continue;t=!0}else t&&(i+="零"),t=!1,i+=n[l],i+=o[r.length-u-1]}return i}function i(e){return a(e).replace(/^一十/,"十")}t.chineseNumberToText=function(e,t){return e+=1,0===(t=(t||0)%3)?i(e):1===t?"(".concat(i(e),")"):e+""},t.chineseNumberToTextWithSymbol=function(e,t){return e+=1,0===(t=(t||0)%3)?i(e)+"、":1===t?"(".concat(i(e),")"):e+"."},t.chineseNumberToTextForHeading=function(e,t){return e+=1,0===(t=(t||0)%3)?i(e)+"、":1===t?"(".concat(i(e),") "):e+". "}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultNumberToText=void 0;var n=97,o=[["","ⅰ","ⅱ","ⅲ","ⅳ","ⅴ","ⅵ","ⅶ","ⅷ","ⅸ"],["","X","XX","XXX","XL","L","LX","LXX","LXXX","XC"],["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM"],["","M","MM","MMM"]];function a(e){if(e<26)return String.fromCodePoint(n+e);var t=String.fromCodePoint(n+e%26);return a(Math.floor(e/26)-1)+t}t.defaultNumberToText=function(e,t){return 0===(t=(t||0)%3)?function(e){return e+1+""}(e):1===t?a(e):function(e){var t=[];return e+=1,t.push(o[3][Math.floor(e/1e3)%10]),t.push(o[2][Math.floor(e/100)%10]),t.push(o[1][Math.floor(e/10)%10]),t.push(o[0][e%10]),t.join("")}(e)}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.onlyNumberToText=void 0,t.onlyNumberToText=function(e,t,r){for(var a=o(o([],n(r),!1),[e],!1);a.length<t+1;)a.unshift(0);return a.map((function(e){return(e||0)+1})).join(".")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){for(var n=r,o=0;o<e.length;o++)n=t(n,"number"==typeof e[o]?e[o]:0,o,e);return n}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3454),l=r(3763),c=r(3591),s=r(3598),f=a(r(4790)),d=r(4792),p=r(4026),h=r(3478),y=function(){function e(e,t,r){var o=this;Object.defineProperty(this,"_allResetFromStart",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"iKernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"iEditing",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_lists",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_allowContinue",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_change",{enumerable:!0,configurable:!0,writable:!0,value:new Map});var a=new Map;(0,l.bindEvent)(this,this.iEditing,"nodechange",(function(e){var t,r=e.node,u=e.type,l=e.attrName,c=e.value;if(r.isTextNode()||r.hasCategory(i.Category.InlineCard)){if("attribute"===u&&p.LIST_INDEX_ATTR_NAMES.includes(l))(s=i.NodeUtil.closest(r,[h.pluginRegister.node.oli,h.pluginRegister.node.uli]))&&a.set(s,n(n({},a.get(s)),((t={})[l]=!0,t)));else if("insert"===u||"remove"===u){var s;(s=i.NodeUtil.closest(r,[h.pluginRegister.node.oli,h.pluginRegister.node.uli]))&&a.set(s,"*")}}else{var f=r.nodeName;f!==h.pluginRegister.node.oli&&f!==h.pluginRegister.node.uli||"insert"===u&&a.set(r,"*"),r.hasCategory(i.Category.Level)&&("list"===l&&e.oldValue?o.addChange({node:r,type:"updateList",value:c,oldValue:e.oldValue}):"indexType"===l?o.addChange({node:r,type:l,value:c}):"insert"!==u&&"remove"!==u&&"attribute"!==u||o.addChange({node:r,type:u}))}})),(0,l.bindEvent)(this,this.iEditing,"operationRollback",(function(){a.clear(),o.clear()})),(0,l.bindEvent)(this,this.iEditing,"beforecontentchange",(function(){var e;if(a.size>0&&(a.forEach((function(e,t){"*"===e?o._resetListIndexStyle(t,p.LIST_INDEX_ATTR_NAMES):o._resetListIndexStyle(t,Object.keys(e))})),a.clear()),null===(e=o.hasChange)||void 0===e?void 0:e.call(o)){var t=o.iEditing.newJob(i.JobMode.Auto);o.applyChange(t),o.iEditing.commitJob(t)}}))}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._change.clear(),this._change=null,this._lists=null}}),Object.defineProperty(e.prototype,"startWork",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._allowContinue=!0}}),Object.defineProperty(e.prototype,"_resetListIndexStyle",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.iEditing,n=r.newJob(i.JobMode.Auto);(0,d.resetListIndexStyle)(n,e,t),r.commitJob(n)}}),Object.defineProperty(e.prototype,"addChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,o=e.node,a=e.type,i=e.value,u=e.oldValue;"updateList"===a?this._change.set(o,n(n({},this._change.get(o)),((t={})[a]=[i,u],t))):this._change.set(o,n(n({},this._change.get(o)),((r={})[a]="number"!=typeof i||i,r)))}}),Object.defineProperty(e.prototype,"hasChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._change.size>0}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._change.clear()}}),Object.defineProperty(e.prototype,"applyChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._lists;try{(function(e,t){var r=t._change,n=t._lists,a=new Set,l=[];r.forEach((function(e,r){var i,u,c,d=(r.attrs||{}).list;if(d&&a.add(d),e.updateList){var p=o(e.updateList,2),y=p[0],b=p[1];b&&(a.add(b),null===(i=n[b])||void 0===i||i.removeNode(r)),y&&(a.add(y),n[y]||(n[y]=new f.default(y,r.nodeName,t._allResetFromStart)),n[y].addNode(r))}d&&(0,s.hasOwnProperty)(e,h.pluginRegister.attr.indexType)&&(null===(u=n[d])||void 0===u||u.setNewIndexType(e.indexType)),!d||r.isConnected?e.insert&&l.push(r):null===(c=n[d])||void 0===c||c.removeNode(r)})),t._allowContinue&&function(e,t,r,n){var o=t._lists;r=r.sort((function(e,t){var r=i.NodeUtil.compare(e,t);return r.preceding?-1:(u.assert.fatal(r.following,"plugins/list/src/kernel/lib/list-manager.ts:277"),1)})).filter((function(t){var r=(t.attrs||{}).list;if(r&&o[r]){if(o[r].acceptNode(t))return!1;var a=(0,c.generateNodeId)();e.setAttribute(t,h.pluginRegister.attr.list,a),n.add(a)}return!0}));var a={};r.forEach((function(t){var r,i,l,s=t.previousSibling,f=t.nextSibling,d=t.attrs,p=(void 0===d?{}:d).list;if(p||(p=(0,c.generateNodeId)(),e.setAttribute(t,h.pluginRegister.attr.list,p)),a[p])e.setAttribute(t,h.pluginRegister.attr.list,a[p]);else{var y;if((null==s?void 0:s.nodeName)===t.nodeName&&(null===(r=null==s?void 0:s.attrs)||void 0===r?void 0:r.list))y=s.attrs.list;else{if((null==f?void 0:f.nodeName)!==t.nodeName||!(null===(i=null==f?void 0:f.attrs)||void 0===i?void 0:i.list))return;y=f.attrs.list}u.assert.fatal(y,"plugins/list/src/kernel/lib/list-manager.ts:335"),null===(l=o[p])||void 0===l||l.removeNode(t),a[p]=y,e.setAttribute(t,h.pluginRegister.attr.list,y),n.add(y)}})),r.forEach((function(t){var r;(null===(r=t.attrs)||void 0===r?void 0:r.list)||e.setAttribute(t,h.pluginRegister.attr.list,(0,c.generateNodeId)())}))}(e,t,l,a);return function(e,t,r,n){var o=t._lists;n.forEach((function(e){var n,a=(null===(n=e.attrs)||void 0===n?void 0:n.list)||(0,c.generateNodeId)();a&&(o[a]||(o[a]=new f.default(a,e.nodeName,t._allResetFromStart),r.add(a)),o[a].addNode(e))})),r.forEach((function(t){var r;null===(r=o[t])||void 0===r||r.reset(e)}))}(e,t,a,l),a})(e,this).forEach((function(e){var r;(null===(r=t[e])||void 0===r?void 0:r.isEmpty())&&delete t[e]}))}finally{this._change.clear()}}}),e}();t.default=y},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3453),a=r(3454),i=n(r(4791)),u=r(3478),l=function(){function e(e,t,r){Object.defineProperty(this,"_listId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_allResetFromStart",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_indexType",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_nodes",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),a.assert.fatal(e,"plugins/list/src/kernel/lib/list.ts:16"),a.assert.fatal(t===u.pluginRegister.node.uli||t===u.pluginRegister.node.oli||t===u.pluginRegister.node.tli,"plugins/list/src/kernel/lib/list.ts:17")}return Object.defineProperty(e.prototype,"id",{get:function(){return this._listId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"addNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){0===this._nodes.size&&(this._indexType=e.attrs.indexType||0),this._nodes.add(e)}}),Object.defineProperty(e.prototype,"isEmpty",{enumerable:!1,configurable:!0,writable:!0,value:function(){return 0===this._nodes.size}}),Object.defineProperty(e.prototype,"removeNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._nodes.delete(e)}}),Object.defineProperty(e.prototype,"acceptNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.nodeName===this._type}}),Object.defineProperty(e.prototype,"setNewIndexType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._indexType=e}}),Object.defineProperty(e.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,r=this._listId,n=this._allResetFromStart,u=Array.from(this._nodes).filter((function(e){var t;return e.isConnected&&(null===(t=e.attrs)||void 0===t?void 0:t.list)===r}));u.sort((function(e,t){var r=o.NodeUtil.compare(e,t);return r.preceding?-1:(a.assert.fatal(r.following,"plugins/list/src/kernel/lib/list.ts:64"),1)}));var l=[],s=[],f=[];u.forEach((function(e){var t=e.attrs,r=t.level,n=void 0===r?0:r,o=t.fid;f.splice(n,Number.MAX_VALUE),f[n]=e;var u=c(s);if(!u)return u=new i.default(o,f.slice(0)),l.push(u),s.push(u),void u.addNode(e);for(;s.length&&n<u.level;)s.pop(),u=c(s);if(!u||n<u.level)return a.assert.fatal(0===s.length,"plugins/list/src/kernel/lib/list.ts:95"),u=new i.default(o,f.slice(0)),l.push(u),s.push(u),void u.addNode(e);n===u.level?(u.updateTopNodes(f.slice(0)),u.addNode(e)):(u=new i.default(o,f.slice(0)),l.push(u),s.push(u),u.addNode(e))})),l.forEach((function(r,o){r.reset(e,t._indexType,n||0===o)}))}}),e}();function c(e){return e[e.length-1]||null}t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=r(3591),a=r(3478),i=function(){function e(e,t){Object.defineProperty(this,"_fid",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_level",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_indexType",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_parentNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_nodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._fid=e||(0,o.generateNodeId)(),this._parentNodes=(t||[]).slice(0,-1)}return Object.defineProperty(e.prototype,"updateTopNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._parentNodes=(e||[]).slice(0,-1)}}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"addNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){n.assert.fatal(!this._nodes.includes(e),"plugins/list/src/kernel/lib/list-fragment.ts:31"),0===this._nodes.length&&(this._level=e.attrs.level||0,this._indexType=e.attrs.indexType||0),this._nodes.push(e)}}),Object.defineProperty(e.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o;void 0===r&&(r=!1);var i=this._fid,u=(null===(o=null===(n=this._nodes[0])||void 0===n?void 0:n.attrs)||void 0===o?void 0:o.start)||0,l=r?u:0,c=this._parentNodes.map((function(e){return e.getAttribute(a.pluginRegister.attr.index)}));this._nodes.forEach((function(r,n){e.setAttribute(r,a.pluginRegister.attr.fid,i),e.setAttribute(r,a.pluginRegister.attr.indexType,t),function(e,t){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;if(e.every((function(e,r){return e===t[r]})))return!0;return!1}(c,r.attrs.parentIndex)||e.setAttribute(r,a.pluginRegister.attr.parentIndex,c),u?e.setAttribute(r,a.pluginRegister.attr.start,u):e.removeAttribute(r,a.pluginRegister.attr.start),e.setAttribute(r,a.pluginRegister.attr.index,l+n)}))}}),e}();t.default=i},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.resetListIndexStyle=void 0;var o=r(3453),a=r(3478);function i(e,t){return void 0===t&&(t=[]),e.isTextNode()||e.isCardNode()&&e.hasCategory(o.Category.InlineCard)?t.push(e):e.isElement()&&e.children.forEach((function(e){return i(e,t)})),t}t.resetListIndexStyle=function(e,t,r){var o,u=[];if(i(t,u),0!==u.length){var l=n({},null===(o=t.attrs)||void 0===o?void 0:o.indexStyle);r.forEach((function(e){var t=new Set;u.forEach((function(r){var n;t.add(null===(n=r.attrs)||void 0===n?void 0:n[e])}));var r=Array.from(t);0===r.length?delete l[e]:1===r.length&&(r[0]?l[e]=r[0]:delete l[e])})),0===l.size?e.removeAttribute(t,a.pluginRegister.attr.indexStyle):e.setAttribute(t,a.pluginRegister.attr.indexStyle,l)}else e.removeAttribute(t,a.pluginRegister.attr.indexStyle)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n;if(Number.isNaN(r)||e.addAttr("data-lake-index-type",r),e.mainNode.name){var o=e.inode.id,a=null===(n=this.plugin._indexTypeManager)||void 0===n?void 0:n.getHeadingIndexInfo(o);if(a){var i=e.createIgnoreElement("span");e.appendChild(i,e.createTextNode(null==a?void 0:a.symbol)),e.appendChild(e.mainNode,i)}}}}),Object.defineProperty(t,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["indexType"]}),t}(a(r(3562)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3454),u=a(r(3470)),l=r(3478),c={1:"lower-alpha",2:"lower-roman"},s={1:"circle",2:"square"},f={oli:"ne-ol",uli:"ne-ul",tli:"ne-tl"},d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.setVirtual();var r=function(e,t){var r=e.previousSiblingContext,n=t.name,o=t.attrs,a=void 0===o?{}:o;if(!r||!r._listNode)return null;var i=r._listNode;if(n===l.pluginRegister.node.oli&&"ol"!==i.name)return null;if((n===l.pluginRegister.node.uli||n===l.pluginRegister.node.tli)&&"ul"!==i.name)return null;if(((r.inode.attrs?r.inode.attrs.level:0)||0)!==(a.level||0))return null;if(i._id!==a.list)return null;return i}(e,t);r?this._appendToList(e,t,r):this._createNewList(e,t)}}),Object.defineProperty(t.prototype,"_createNewList",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.id,n=t.name,o=(null==t?void 0:t.attrs)||{},a={};n===l.pluginRegister.node.oli&&o.index>0&&(i.assert.fatal(o.list!==r&&Number.isInteger(o.index),"plugins/list/src/kernel/writers/html-list-node-writer.ts:60"),a.start=o.index+1),o.level>0&&(a["ne-level"]=o.level),o.indexType>0&&(a["data-index-type"]=o.indexType);var u=e.createElement(n===l.pluginRegister.node.oli?"ol":"ul",{attrs:a,style:p(e,t),className:f[n]});u._id=o.list,e._listNode=u,this._appendListItem(e,t,u),e._handleAppend=function(t){var r=o.level||0;if(r){var a=e.createElement(n===l.pluginRegister.node.oli?"ol":"ul",{className:"ne-list-wrap",style:p(e,{name:"wrap"})});e.appendChild(t,a);for(var i=1;i<r;i++){var c=e.createElement(n===l.pluginRegister.node.oli?"ol":"ul",{className:"ne-list-wrap",style:p(e,{name:"wrap"})});e.appendChild(a,c),a=c}e.appendChild(a,u)}else e.appendChild(t,u)}}}),Object.defineProperty(t.prototype,"_appendToList",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){this._appendListItem(e,t,r),e._handleAppend=function(){}}}),Object.defineProperty(t.prototype,"_appendListItem",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o=t.name,a=e.createElement("li");o===l.pluginRegister.node.tli&&(a=e.createElement("li",{attrs:{checked:null===(n=t.attrs)||void 0===n?void 0:n.checked}})),e.setNode(a),e._listNode=r,e.appendChild(r,a)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[l.pluginRegister.node.oli,l.pluginRegister.node.uli,l.pluginRegister.node.tli]}),t}(u.default);function p(e,t){var r={},n=t.name,o=t.attrs,a=void 0===o?{}:o,i=null==a?void 0:a.level,u=(null==a?void 0:a.indexType)||0;if(!e.isInlineMode())return r;r.margin="0",r["padding-left"]="23px";var f=i%3;return 0!==u&&n===l.pluginRegister.node.oli?1===u?r.listStyle=0===f||1===f?"simp-chinese-informal":"decimal":2===u&&(r.listStyle="decimal"):n===l.pluginRegister.node.tli?(r.padding="0",r.listStyle="none"):n===l.pluginRegister.node.oli?i&&0!==f&&(r.listStyle=c[f]):n===l.pluginRegister.node.uli?i&&0!==f&&(r.listStyle=s[f]):"wrap"===n&&(r.listStyle="none"),r}t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){["oli","uli","tli"].includes(e.inode.name||"")?Number(r)>0&&e.setAttr("data-lake-index-type",r):Number(r)>=0&&e.setAttr("data-lake-index-type",r)}}),Object.defineProperty(e,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["indexType"]}),e}();t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3499),i=r(3478),u=r(3591),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.setVirtual((function(){}));var r=function(e,t){var r,n,o=e.previousSiblingContext,a=t.attrs,i=void 0===a?{}:a;if(!o||!o._listNode)return null;var u=o._listNode;if((null===(r=u.attrs)||void 0===r?void 0:r.list)!==i.list)return null;if(((null===(n=o.inode.attrs)||void 0===n?void 0:n.level)||0)!==(i.level||0))return null;return u}(e,t);r?this._appendToList(e,t,r):this._createNewList(e,t)}}),Object.defineProperty(t.prototype,"_createNewList",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.name,n=t.attrs,o=void 0===n?{}:n,a={};a.list=o.list?o.list:(0,u.generateNodeId)(),0!==o.index&&(a.start=o.index+1),o.level>0&&(a["data-lake-indent"]=o.level),delete o.indent,delete o.textIndent;var l=e.createElement(r===i.pluginRegister.node.oli?"ol":"ul",{attrs:a,style:{},className:r===i.pluginRegister.node.tli?["lake-list"]:void 0});e._listNode=l;var s=c(e,t);e.setNode(s),e.appendChild(l,s),e.setVirtual((function(t){e.appendChild(t,l)}))}}),Object.defineProperty(t.prototype,"_appendToList",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o,a=c(e,t);null===(n=t.attrs)||void 0===n||delete n.indent,null===(o=t.attrs)||void 0===o||delete o.textIndent,e._listNode=r,e.setNode(a),e.appendChild(r,a),e.setVirtual((function(){}))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[i.pluginRegister.node.oli,i.pluginRegister.node.uli,i.pluginRegister.node.tli]}),t}(a.LakeNodeWriter);function c(e,t){var r=t.name,n=t.attrs,o=void 0===n?{}:n,a={};o.fid&&(a.fid=o.fid),o.version&&(a.version=o.version);var u=e.createElement("li",{className:r===i.pluginRegister.node.tli?["lake-list-node","lake-list-task"]:void 0,attrs:a});return r===i.pluginRegister.node.tli&&e.appendChild(u,e.createElement("card",{attrs:{type:"inline",name:"checkbox",value:"data:".concat(!(!t.attrs||!t.attrs.checked))}})),u}t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3639)),u=r(4798),l=r(3478),c=r(4245),s=[l.pluginRegister.node.oli,l.pluginRegister.node.uli,l.pluginRegister.node.tli],f=["[ ]","[X]"],d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=t.name,o=t.attrs,a=void 0===o?{}:o,i=a.level,u="  ".repeat(void 0===i?0:i),c="";switch(n){case l.pluginRegister.node.oli:c=this._getOrderListCounterText(a);break;case l.pluginRegister.node.uli:c=this._getUnorderListCounterText(a);break;case l.pluginRegister.node.tli:c=this._getTaskListCounterText(a);break;default:c=""}1===(null===(r=e.rootNode.children)||void 0===r?void 0:r.length)?e.newline("".concat(u)):e.newline("".concat(u).concat(c))}}),Object.defineProperty(t.prototype,"_getOrderListCounterText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.level,r=void 0===t?0:t,n=e.index,o=void 0===n?0:n,a=e.parentIndex,i=void 0===a?[]:a,u=e.indexType,l=void 0===u?0:u;return"".concat((0,c.numberToListTextWithSymbol)(o,r,i,l)," ")}}),Object.defineProperty(t.prototype,"_getUnorderListCounterText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.level,r=void 0===t?0:t;return"".concat((0,u.levelToListSymbol)(r)," ")}}),Object.defineProperty(t.prototype,"_getTaskListCounterText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.checked,r=f[Number(void 0!==t&&t)%f.length];return"".concat(r," ")}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:s}),t}(i.default);t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.levelToListSymbol=void 0,t.levelToListSymbol=function(e){return 0===(e=(e||0)%3)?"●":1===e?"○":"■"}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(4028)),u=r(3764),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){e.addAttr("indexType",Number(r)||0),["h1","h2","h3","h4","h5","h6"].includes(n.name||"")&&(0,u.setLastHeadingIndexType)(Number(r)||0)}}),Object.defineProperty(t,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["data-lake-index-type"]}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3591),u=a(r(3494)),l=r(3478),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getAttr(l.pluginRegister.attr.level);e.addAttr(l.pluginRegister.attr.list,(0,i.generateNodeId)()),t>=0?e.addAttr(l.pluginRegister.attr.level,1+t):e.addAttr(l.pluginRegister.attr.level,0)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["ul","ol"]}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=a(r(3494)),l=r(3478),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,a;if(t.parent){var u=((null===(r=t.parent.attrs)||void 0===r?void 0:r.class)||"").split(/\s+/),c=t.parent.name;if(u.includes("ne-tl"))e.setNode(i.default.createElement(l.pluginRegister.node.tli,{checked:"true"===(null===(n=t.attrs)||void 0===n?void 0:n.checked)}));else if(u.includes("task-list")){var s=null===(o=t.children)||void 0===o?void 0:o[0],f="input"===(null==s?void 0:s.name)&&!!(null===(a=s.attrs)||void 0===a?void 0:a.checked);e.setNode(i.default.createElement(l.pluginRegister.node.tli,{checked:f}))}else u.includes("ne-ol")||"ol"===c?e.setNode(i.default.createElement(l.pluginRegister.node.oli)):e.setNode(i.default.createElement(l.pluginRegister.node.uli));var d=e.getAttr(l.pluginRegister.attr.level);d&&e.addAttr(d,d)}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["li"]}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t,"CardNames",{enumerable:!0,configurable:!0,writable:!0,value:["checkbox"]}),t}(r(3481).LakeCardReader);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=Number.parseInt(r,10);if(r.endsWith("em")&&n>0&&n%2==0){var o=n/2;o>0&&e.setState("listIndent",o)}}}),Object.defineProperty(t,"StyleNames",{enumerable:!0,configurable:!0,writable:!0,value:["margin-left"]}),t}(r(4015).LakeStyleReader);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3764),o=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var o;e.setAttr("indexType",Number(r)||0),["h1","h2","h3","h4","h5","h6"].includes((null===(o=e.node)||void 0===o?void 0:o.name)||"")&&(0,n.setLastHeadingIndexType)(Number(r)||0)}}),Object.defineProperty(e,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:["data-lake-index-type"]}),e}();t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3454),u=r(3591),l=a(r(3458)),c=r(3548),s=r(3478),f=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"processService",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,a,c=e.getState("listType"),f=e.getState("listId");c||(i.assert.fatal(!f,"plugins/list/src/kernel/readers/lake/lake-list-item-node-reader.ts:22"),c="ul",f=(0,u.generateNodeId)());var d={id:null===(r=t.attrs)||void 0===r?void 0:r.id,list:f,fid:null===(n=t.attrs)||void 0===n?void 0:n.fid},p=e.getState("listStart");p&&(d.start=p);var h=function(e){var t=e.getState("listIndent")||0,r=e.getState("listLevel")||0;return t+r}(e);h&&(d.level=h);var y="ol"===c?s.pluginRegister.node.oli:s.pluginRegister.node.uli;if((null===(a=null===(o=t.attrs)||void 0===o?void 0:o.class)||void 0===a?void 0:a.indexOf("lake-list-task"))>=0){y=s.pluginRegister.node.tli;var b=function(e,t){var r,n=e.children,o=void 0===n?[]:n,a=null===(r=e.attrs)||void 0===r?void 0:r.version;if(!o[0]||"checkbox"!==o[0].name)return{checked:!1,version:a};var i=o[0];o.splice(0,1);var u={checked:i.value+""=="true",version:a},l=t.getProcesser();if(l){var c=l(e);c&&(u.checked=c.checked,u.version=c.version)}return u}(t,this.processService),m=b.checked,v=b.version;d.checked=m,d.version=v}var g=l.default.createElement(y,d);e.setNode(g)}}),t}(c.LakeNodeReader);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3454),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.name,n=t.attrs,o=void 0===n?{}:n,i=Number.parseInt(o["data-lake-indent"],10),u=Math.max(Number.parseInt(o.start,10)-1||0,0);i>0&&e.setState("listLevel",i),a.assert.fatal(o.list,"plugins/list/src/kernel/readers/lake/lake-list-node-reader.ts:20"),e.setState("listStart",u),e.setState("listId",o.list),e.setState("listType",r)}}),t}(r(3548).LakeNodeReader);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=u(r(3458)),c=r(3478),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(t.parent)try{return this.readEverNoteTaskList(e,t)}catch(e){return}}}),Object.defineProperty(t.prototype,"readEverNoteTaskList",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){for(var r,n,o,u,s,f,d,p,h,y,b=0,m=null,v="",g=[];t.children&&b<t.children.length;){var _=t.children[b];if((null===(r=e.getMeta("exporter-version"))||void 0===r?void 0:r.includes("YXBJ"))&&"img"===_.name&&(null===(o=null===(n=_.attrs)||void 0===n?void 0:n.src)||void 0===o?void 0:o.includes("en_todo"))){g.push(_),m=_;break}if("input"===_.name){m=_;break}if("#text"===_.name)v+=_.data||"";else{if("span"!==_.name)break;v+=(null===(s=null===(u=_.children)||void 0===u?void 0:u[0])||void 0===s?void 0:s.data)||""}g.push(_),b++}try{for(b=((null===(f=t.children)||void 0===f?void 0:f.length)||0)-1;null===(d=t.children)||void 0===d?void 0:d[b];){if(!(_=t.children[b])||"br"!==_.name){if("#text"===_.name){_.data=(null===(p=_.data)||void 0===p?void 0:p.replace(/\n$/,""))||"";break}break}g.push(_),b--}}catch(e){}if(/^\s*$/.test(v)){var w=Math.floor(v.length/4);return!m||"input"!==m.name&&"img"!==m.name?void 0:(e.addSkipNode.apply(e,i([],a(g),!1)),e.setNode(l.default.createElement(c.pluginRegister.node.tli,{checked:!!(null===(h=m.attrs)||void 0===h?void 0:h.checked)})),void(w>0&&"td"!==(null===(y=t.parent)||void 0===y?void 0:y.name)&&e.addAttr("level",Math.min(w,8))))}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["div"]}),t}(u(r(4029)).default);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3478),o=[n.pluginRegister.node.oli,n.pluginRegister.node.uli,n.pluginRegister.node.tli],a=["+","-","*"],i=["[ ]","[x]"],u=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.name,o=t.attrs,a=void 0===o?{}:o,i=a.level,u="    ".repeat(void 0===i?0:i),l="";switch(r){case n.pluginRegister.node.oli:l=this._getOrderListCounterText(a);break;case n.pluginRegister.node.uli:l=this._getUnorderListCounterText(a);break;case n.pluginRegister.node.tli:l=this._getTaskListCounterText(a);break;default:l=""}return e.appendFirst("".concat(u).concat(l)),e.isInTableCell()?e.append("<br/>"):e.append("\n"),!0}}),Object.defineProperty(e.prototype,"_getOrderListCounterText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.index;return"".concat((void 0===t?0:t)+1,". ")}}),Object.defineProperty(e.prototype,"_getUnorderListCounterText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.level;return"".concat(a[(void 0===t?0:t)%3]," ")}}),Object.defineProperty(e.prototype,"_getTaskListCounterText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.checked,r=i[Number(void 0!==t&&t)%i.length];return"- ".concat(r," ")}}),Object.defineProperty(e,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:o}),e}();t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3463),c=r(3519),s=a(r(3851)),f=a(r(4810)),d=r(4246),p=a(r(4811)),h=a(r(4812)),y=a(r(4813)),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerElement(f.default);var t=e.getService(l.ILakeKernelService.ID);t&&t.registerLakeNodeReader("mark",new p.default);var r=e.getService(l.ILakeKernelService.ID);r&&r.registerLakeNodeWriter(y.default.NodeNames,new y.default);var n=e.getService(u.IHTMLKernelService.ID);n&&n.registerNodeHTMLWriter(h.default.NodeNames,new h.default);var o=e.getService(c.IMarkdownKernelService.ID);o&&o.registerMarkdownMatcher(c.TriggerType.whiteSpace,new s.default(this.editing,"==",(function(e,t){var r=e.createElement("mark");i.RangeUtil.wrapInlineNode(e,t,r),e.setSelection([e.newRange(e.newPosition(r.parentNode,r.offset+1))])})))}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:d.pluginRegister.pluginName}),t}(i.KernelPlugin);t.default=b},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0});var o=r(3453),a=((n={})[r(4246).pluginRegister.node.mark]={parents:[o.Category.Block],category:[o.Category.Inline,o.Category.InlineBox,o.Category.TextContainer],children:[o.Category.Text,o.Category.Inline]},n);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setNode(i.default.createElement("mark"))}}),t}(r(3548).LakeNodeReader);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;e.isInlineMode()&&(t={backgroundColor:"#ff0",padding:"0",margin:"0 1px"}),e.setNode(e.createElement("mark",{className:"ne-mark",style:t}))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["mark"]}),t}(a(r(3470)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setNode(e.createElement("mark"))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["mark"]}),t}(r(3499).LakeNodeWriter);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(4815),u=r(4190),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"registerMarkdownMatcher",{enumerable:!0,configurable:!0,writable:!0,value:function(e,r){t.service.registerMarkdownMatcher(e,r)}}),Object.defineProperty(t,"getMarkdownMatchContext",{enumerable:!0,configurable:!0,writable:!0,value:function(e,r){return t.service.getMarkdownMatchContext(e,r)}}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.service.destroy(),e.prototype.destroy.call(this)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.pluginName}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:i.MarkdownKernelService}),t}(a.KernelPlugin);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownKernelService=void 0;var a=r(3453),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_whiteSpaceMatchers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"_enterMatchers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),t}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this.editing,delete this._whiteSpaceMatchers,delete this._enterMatchers}}),Object.defineProperty(t.prototype,"registerMarkdownMatcher",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){("whiteSpace"===e?this._whiteSpaceMatchers:this._enterMatchers).push(t)}}),Object.defineProperty(t.prototype,"getMarkdownMatchContext",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.node,n=a.NodeUtil.closest(r,a.Category.Block);if(!n)return null;var o=this.editing.newJob(a.JobMode.Silent),i=o.newRange(o.newPosition(n,0),t);if(i.collapsed)return null;var u=a.RangeUtil.getTextSections(o,i);return u.length?this._execMatch(e,u[0],t):null}}),Object.defineProperty(t.prototype,"_execMatch",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){for(var n="whiteSpace"===e?this._whiteSpaceMatchers:this._enterMatchers,o=0,a=n.length;o<a;o++){var i=n[o].match(t,r);if(i)return{matcher:n[o],info:i}}return null}}),t}(r(3519).IMarkdownKernelService);t.MarkdownKernelService=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4817)),l=r(4247),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u.default]}),t}(i.KernelPlugin);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(4247),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!t)return!1;var r=e.newJob(),n=this.getInode(t);if(!n)return!1;var o=a.SelectionUtil.insertINode(r,r.getSelection(),n);return r.setSelection(o),e.commitJob(r),!0}}),Object.defineProperty(t.prototype,"getInode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if("string"==typeof e){var t=this.kernel.getSupportedReaderTypes();return i.assert.fatal(t.includes("text/lake"),"plugins/markdown-paste-parse/src/kernel/commands/markdown-paste-parse-command.ts:36"),this.kernel.readData("text/lake",e)}return e}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.markdownPasteParse}),t}(u.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=r(3453),c=u(r(4819)),s=u(r(4820)),f=r(4199),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"descriptors",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(t,"metaStorage",{enumerable:!0,configurable:!0,writable:!0,value:{}}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;e.registerAttr(f.pluginRegister.attr.meta,c.default),e.on("document.create",(function(){t.metaStorage={}})),this.editing.on("nodechange",(function(e){var r=e.node,n=e.type,o=e.job,a=i(e,["node","type","job"]);r.isRootNode()&&"attribute"===n&&"meta"===a.attrName&&o.mode===l.JobMode.OT&&t.editing.emit("metachange",a.value,a.oldValue)}))}}),Object.defineProperty(t.prototype,"setMeta",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=this.descriptors[e];if(n)if(n.validate(t,e)){var o=this.getMeta(e);if(n.beforeSetMeta&&n.beforeSetMeta(t),n.needPersistent()){var i=this.editing.newJob(l.JobMode.User),u=i.document.rootNode;i.setAttribute(u,"meta",a(a({},(u.attrs||{}).meta),((r={})[e]=t,r))),this.editing.commitJob(i)}else this.metaStorage[e]=t;o!==t&&this.kernel.emitEvent("metaChange",{value:t,oldValue:o})}else console.warn("invalid meta value: ".concat(e,"=").concat(t));else console.warn("invalid meta: ".concat(e))}}),Object.defineProperty(t.prototype,"getMeta",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n,o,a=this.descriptors[e];return a?a.getMeta?a.getMeta():this.metaStorage[e]||(null===(o=null===(n=null===(r=null===(t=this.kernel.document)||void 0===t?void 0:t.rootNode)||void 0===r?void 0:r.attrs)||void 0===n?void 0:n.meta)||void 0===o?void 0:o[e])||null:null}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:f.pluginRegister.pluginName}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:s.default}),t}(l.KernelPlugin);t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={targets:[r(3453).Category.Root]};t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3454),u=a(r(4821)),l=a(r(3850)),c=a(r(3854)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"registerMeta",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;i.assert.fatal(t instanceof c.default,"plugins/meta/src/kernel/meta-service-impl.ts:8"),this.kernel.registerMetaFilter(e,new u.default((function(e,t){r.plugin.metaStorage[e]=t}),t)),this.plugin.descriptors[e]=t}}),Object.defineProperty(t.prototype,"setMeta",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.plugin.setMeta(e,t)}}),Object.defineProperty(t.prototype,"getMeta",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.plugin.getMeta(e)}}),Object.defineProperty(t.prototype,"toXML",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return Object.keys(this.plugin.descriptors).map((function(t){var r=e.plugin.descriptors[t];if(!r||!r.needPersistent())return null;var n=e.getMeta(t),o=r.onPersistent(n)||n;return o&&!r.isDefault(o)?'<meta name="'.concat(t,'" content="').concat(o,'" />'):null})).filter((function(e){return null!==e})).join("")}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(l.default);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"_cacheMetaHandler",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(n,"_metaDescriptor",{enumerable:!0,configurable:!0,writable:!0,value:r}),n}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"filter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this._metaDescriptor;return t=r.formatValue(t,e),r.needPersistent()?t:(this._cacheMetaHandler(e,t),null)}}),t}(r(3453).MetaFilter);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3463),c=a(r(4823)),s=a(r(4824)),f=r(3765),d=a(r(4825)),p=a(r(4826)),h=a(r(4827)),y=a(r(4828)),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerElement(f.pluginRegister.node.p,c.default);var t=e.getService(l.ILakeKernelService.ID);t&&t.registerLakeNodeReader(f.pluginRegister.node.p,new p.default);var r=e.getService(u.IHTMLKernelService.ID);r&&r.registerHTMLNodeReader(d.default.NodeNames,new d.default);var n=e.getService(u.IHTMLKernelService.ID);n&&n.registerNodeHTMLWriter(h.default.NodeNames,new h.default);var o=e.getService(l.ILakeKernelService.ID);o&&o.registerLakeNodeWriter(f.pluginRegister.node.p,new y.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:f.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[s.default]}),t}(i.KernelPlugin);t.default=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o={parents:[n.Category.Root,n.Category.LikeRoot],category:[n.Category.Block,n.Category.TextContainer,n.Category.Brick]};t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3513),l=r(3465),c=r(3765),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(e.prototype.getState.call(this,t)===l.COMMAND_UNAVAILABLE)return l.COMMAND_UNAVAILABLE;var r=t.getSelection().firstRange,n=r.start,o=r.end;return n.node.closest(i.Category.OnlyText)||o.node.closest(i.Category.OnlyText)?l.COMMAND_UNAVAILABLE:l.COMMAND_NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob(),r=t.getSelection(),n=a.SelectionUtil.replaceBlockNode(t,r,t.createElement(t.defaultElementName),!1,["color","bgColor"]);return a.SelectionUtil.unCollapseAll(t,r),t.setSelection(n),e.commitJob(t),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.plainText}),t}(u.GeneralCommandV2);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=a(r(3494)),l=r(3765),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setNode(i.default.createElement(l.pluginRegister.node.p))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[l.pluginRegister.node.p]}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3548),l=r(3765),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setNode(i.default.createElement(l.pluginRegister.node.p))}}),t}(u.LakeNodeReader);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3470)),u=r(3765),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n={};e.isInlineMode()&&(n={margin:"0",padding:"0",minHeight:"24px"});var o=e.createElement(u.pluginRegister.node.p,{className:"ne-p",style:n});0===(null===(r=t.children)||void 0===r?void 0:r.length)&&e.appendChild(o,e.createElement("br")),e.setNode(o)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[u.pluginRegister.node.p]}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3499),i=r(3765),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.createElement(i.pluginRegister.node.p);e.setNode(t)}}),t}(a.LakeNodeWriter);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(4830),u=r(4248),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.pluginName}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:i.QuickInputKernelService}),t}(a.KernelPlugin);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.QuickInputKernelService=void 0;var i=r(3453),u=a(r(4831)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"matchQuickInput",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.editing.newJob(),r=t.getSelection();if(!r.isCollapsed)return!1;var n=r.firstRange.start.node;return!n.closest(i.Category.OnlyText)&&(n.isTextNode()&&(n=n.parentNode),!!n.hasCategory([i.Category.Block,i.Category.Root,i.Category.LikeRoot])&&u.default.match(t,e))}}),t}(r(4834).IQuickInputKernelService);t.QuickInputKernelService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4832),o=r(4833),a=function(){function e(){}return Object.defineProperty(e,"match",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!t.length)return!1;var r,a=e.getSelection().firstRange.start,i=(0,n.getPreviousTextInfo)(a);return!!i&&(!!t.some((function(t){var n=t.descriptor,u=t.handler,l=(0,o.matchDescriptor)(e,n,i,a);return!!l&&(r={info:l,handler:u},!0)}))&&r)}}),e}();t.default=a},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPreviousTextInfo=void 0;var o=r(3453),a=r(3454),i=n(r(3498));t.getPreviousTextInfo=function(e){var t=e.node,r=e.offset;if(t.hasCategory([o.Category.Root,o.Category.LikeRoot]))return{text:"",atStart:!0,blockNode:null,position:e};if(!t.hasCategory([o.Category.TextContainer,o.Category.Text]))return null;if(t.isTextNode())return function(e,t,r){var n;if(!(null===(n=t.parentNode)||void 0===n?void 0:n.hasCategory(o.Category.Block)))return null;var u=[],l=t.previousSibling,c=!1;for(;;){if(!l){c=!0;break}if(!l.isTextNode())break;u.push(l.data),l=l.previousSibling}var s=u.reverse().join("")+r;return a.assert.fatal(i.default.size(s)>=0,"plugins/quick-input/src/kernel/helpers/get-previous-text-info.ts:112"),{atStart:c,text:s,blockNode:t.parentNode,position:e}}(e,t,i.default.substring(t.data,0,r));if(!t.hasCategory(o.Category.Block))return null;if(0===r)return{text:"",atStart:!0,blockNode:t,position:e.clone()};var n=t.children[r-1];if(a.assert.fatal(n,"plugins/quick-input/src/kernel/helpers/get-previous-text-info.ts:45"),!n.isTextNode())return{text:"",atStart:!1,blockNode:t,position:e.clone()};for(var u=[],l=!1;n&&n.isTextNode();){if(u.push(n.data),!n.previousSibling){l=!0;break}n=n.previousSibling}var c=u.reverse().join("");return a.assert.fatal(i.default.size(c)>=0,"plugins/quick-input/src/kernel/helpers/get-previous-text-info.ts:72"),{text:c,atStart:l,blockNode:t,position:e}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.matchDescriptor=void 0;var o=r(3453),a=r(3453),i=r(3454),u=n(r(3498));function l(e,t,r){var n=u.default.size(r);if(0===n)return t.clone();for(var l=t.node,s=t.offset,f=a.NodeUtil.closest(t.node,o.Category.Block),d=l,p=s,h=0;h<n;h++){var y=c(d,p);i.assert.fatal(y,"plugins/quick-input/src/kernel/helpers/match-descriptor.ts:86"),d=y.node,p=y.offset}i.assert.fatal(f===d||a.NodeUtil.compare(f,d).contains,"plugins/quick-input/src/kernel/helpers/match-descriptor.ts:92");var b=e.newPosition(d,p),m=a.RangeUtil.getTextSections(e,e.newRange(b,t));return i.assert.fatal(1===m.length&&1===m[0].length&&m[0][0].text===r,"plugins/quick-input/src/kernel/helpers/match-descriptor.ts:104"),b}function c(e,t){if(0===t)return e.hasCategory([o.Category.Root,o.Category.LikeRoot])?null:c(e.parentNode,e.offset);if(e.isTextNode())return{node:e,offset:t-1};var r=e.children[t-1];return r.isCardNode()?null:r.isTextNode()?c(r,r.dataLength):(i.assert.fatal(r.isElement(),"plugins/quick-input/src/kernel/helpers/match-descriptor.ts:144"),c(e,e.childCount))}t.matchDescriptor=function(e,t,r,n){var o,i=r.atStart,u=r.text,c=r.blockNode,s=r.position;if(t.match){var f=t.match(n,c);return f||!1}return!(c&&c.nodeName!==e.defaultElementName&&!(null===(o=t.allowBlock)||void 0===o?void 0:o.call(t,c)))&&(!(t.matchPosition&&!t.matchPosition(e,n,c))&&(!(t.atStart&&!i)&&(!(t.mustEmpty&&c&&!a.NodeUtil.isLikeEmptyElement(c))&&(!(t.pattern&&!t.pattern.test(u))&&{matchedText:u,blockNode:c,start:l(e,s,u),end:s}))))}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IQuickInputKernelService=void 0;var a=r(3472),i=r(3475),u=r(4248),l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)(u.pluginRegister.service.IQuickInputKernelService)}),t}(i.KernelAbstractService);t.IQuickInputKernelService=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3463),c=r(4836),s=r(4837),f=a(r(4839)),d=a(r(4840)),p=r(3722),h=a(r(4841)),y=a(r(4842)),b=a(r(4843)),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerElement(f.default)}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.kernel,t=e.getService(l.ILakeKernelService.ID);t&&t.registerLakeNodeReader(h.default.NodeNames,new h.default);var r=e.getService(l.ILakeKernelService.ID);r&&r.registerLakeNodeWriter(b.default.NodeNames,new b.default);var n=e.getService(u.IHTMLKernelService.ID);n&&n.registerNodeHTMLWriter(b.default.NodeNames,new y.default),this.option.onAfterKernelPluginInit&&this.option.onAfterKernelPluginInit(this.kernel)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:p.pluginRegister.pluginName}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:s.QuoteEditingService}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[d.default]}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:c.KernelQuoteOption}),t}(i.KernelPlugin);t.default=m},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelQuoteOption=void 0;var o=n(r(3464)),a=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=(0,o.default)({},e)}return Object.defineProperty(e.prototype,"onAfterKernelPluginInit",{get:function(){return this._option.onAfterKernelPluginInit},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"quote"}),e}();t.KernelQuoteOption=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteEditingService=void 0;var a=r(3453),i=r(3722),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this.editing}}),Object.defineProperty(t.prototype,"wrapQuote",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r=this.editing,n=r.newJob(),o=e.start,u=e.end,l=e.blockNode;a.RangeUtil.deleteContent(n,n.newRange(o,u)),(null===(t=null==l?void 0:l.firstChild)||void 0===t?void 0:t.isTextNode())&&0===l.firstChild.dataLength&&n.removeChild(l,l.firstChild);var c=n.createElement(i.pluginRegister.node);n.replaceChild(l.parentNode,c,l),n.appendChild(c,l),n.setSelection(n.newSelection(n.newRange(n.newPosition(l,0)))),r.commitJob(n)}}),t}(r(4838).IQuoteEditingService);t.QuoteEditingService=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IQuoteEditingService=void 0;var a=r(3472),i=r(3475),u=r(3722),l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)(u.pluginRegister.service.IQuoteEditingService)}),t}(i.KernelAbstractService);t.IQuoteEditingService=l},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0});var o=r(3453),a=((n={})[r(3722).pluginRegister.node]={parents:[o.Category.Root,o.Category.LikeRoot],excludes:[o.Category.VirtualLikeRoot],category:[o.Category.LikeRoot,o.Category.VirtualLikeRoot,o.Category.Brick]},n);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3454),l=r(3513),c=r(3465),s=r(3722),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(e.prototype.getState.call(this,t)===c.COMMAND_UNAVAILABLE)return c.COMMAND_UNAVAILABLE;var r=t.getSelection(),n=r.firstRange,o=n.start,u=n.end;if(o.node.closest(a.Category.OnlyText)||u.node.closest(a.Category.OnlyText))return c.COMMAND_UNAVAILABLE;var l=!1,s=[];return i.SelectionUtil.fullWalkSelection(r,{enter:function(e){return e.hasCategory([a.Category.Table,a.Category.TableHole,a.Category.Hole])?(l=!0,!1):e.parentNode&&e.parentNode.hasCategory([a.Category.Root,a.Category.LikeRoot])?(s.push(e),!1):void 0}}),l?c.COMMAND_UNAVAILABLE:!s.length||s.some((function(e){return"quote"!==e.nodeName}))?c.COMMAND_NOT_EXECUTED:c.COMMAND_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob(),r=this.getState(t);if(r===c.COMMAND_UNAVAILABLE)return e.cancelJob(t),!1;u.assert.fatal(1===t.getSelection().rangeCount,"plugins/quote/src/kernel/commands/quote-command.ts:86");var n=t.getSelection().firstRange;return n=r===c.COMMAND_NOT_EXECUTED?i.RangeUtil.wrapRootNode(t,n,t.createElement("quote")):i.RangeUtil.unwrapNode(t,n,"quote"),t.setSelection(t.newSelection(n)),e.commitJob(t),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.quote}),t}(l.GeneralCommandV2);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3548),l=r(3722),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=null===(r=null==t?void 0:t.attrs)||void 0===r?void 0:r.class;return!!(null==n?void 0:n.includes("lake-alert"))||(e.setNode(i.default.createElement(l.pluginRegister.node)),!1)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["blockquote"]}),t}(u.LakeNodeReader);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={};e.isInlineMode()&&(t={margin:"5px 0",paddingLeft:"1em",borderLeft:"3px solid #eeeeee"}),e.setNode(e.createElement("div",{className:"ne-quote",style:t}))}}),t}(a(r(3470)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3499),i=r(3722),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setNode(e.createElement("blockquote"))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[i.pluginRegister.node]}),t}(a.LakeNodeWriter);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4845)),l=r(4249),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u.default]}),t}(i.KernelPlugin);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(4249),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.getSelection().isCardSelection?a.Command.UNAVAILABLE:a.Command.NOT_EXECUTED}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.save}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4847)),l=a(r(4851)),c=r(4030),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_onlyTableSelect",{enumerable:!0,configurable:!0,writable:!0,value:!1}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;e.extendMethods({setOnlyTableSelect:function(e){t._onlyTableSelect=e}})}}),Object.defineProperty(t.prototype,"isOnlyTableSelect",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._onlyTableSelect}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u.default,l.default]}),t}(i.KernelPlugin);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3453),l=r(3454),c=r(3457),s=r(3484),f=r(3490),d=i(r(3843)),p=r(4848),h=r(4849),y=r(4850),b=r(4030),m=["alert",s.COLLAPSE],v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n=e.newJob(),o=n.getSelection(),i=this._trySelectTable(n,o);if(i)return!0;if(this.plugin.isOnlyTableSelect()&&!i)return!1;try{for(var l=a(m),c=l.next();!c.done;c=l.next()){var s=c.value;if(this._trySelectAllCategory(n,o,s))return!0}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}if(this._trySelectAllColumn(n,o))return!0;if(this._trySelectAllColumns(n,o))return!0;if(this._trySelectAllCategory(n,o,u.Category.ContainerHole))return!0;var f=o.firstRange.start.node.rootNode;return n.dangerDirectSetSelection(n.selectNodeContents(f)),!0}}),Object.defineProperty(t.prototype,"_trySelectTable",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this._getCellNode(t,u.Category.TableCell),n=r.startCellNode,o=r.endCellNode;if(!n||!o||!(0,p.isSameTable)(n,o))return!1;var a=t.firstRange;if(n===o&&!u.NodeUtil.isLikeEmptyElement(n)&&!(0,h.isSelectAllContents)(a,n))return e.dangerDirectSetSelection(e.selectNodeContents(n)),!0;var i=n.parentNode.parentNode;return l.assert.fatal(i.hasCategory(u.Category.Table),"plugins/selectall/src/kernel/select-all-command.ts:104"),e.dangerDirectSetSelection(d.default.selectTableCells(e,i)),!0}}),Object.defineProperty(t.prototype,"_trySelectAllCategory",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=this._getCellNode(t,r),o=n.startCellNode,a=n.endCellNode;if(!o||!a||o!==a)return!1;var i=u.RangeUtil.shrinkRange(e,e.selectNodeContents(a).firstRange);return!i.collapsed&&!u.Range.equal(t.firstRange,i)&&(e.dangerDirectSetSelection(e.newSelection([i])),!0)}}),Object.defineProperty(t.prototype,"_trySelectAllColumn",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this._getCellNode(t,f.COLUMN),n=r.startCellNode,o=r.endCellNode;if(!n||!o||n!==o)return!1;var a=u.RangeUtil.shrinkRange(e,e.selectNodeContents(o).firstRange);return u.Range.equal(t.firstRange,a)?this._trySelectAllColumns(e,t):(e.dangerDirectSetSelection(e.newSelection([a])),!0)}}),Object.defineProperty(t.prototype,"_trySelectAllColumns",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this._getCellNode(t,f.COLUMNS),n=r.startCellNode,o=r.endCellNode;return!(!n||!o||n!==o)&&(l.assert.fatal(n.hasCategory(f.COLUMNS),"plugins/selectall/src/kernel/select-all-command.ts:172"),e.dangerDirectSetSelection((0,y.selectAllColumns)(n,e,t)),!0)}}),Object.defineProperty(t.prototype,"_getCellNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return{startCellNode:u.NodeUtil.closest(e.firstRange.start.node,t),endCellNode:u.NodeUtil.closest(e.lastRange.end.node,t)}}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:b.pluginRegister.command.selectAll}),t}(c.KernelAbstractCommand);t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSameTable=void 0;var n=r(3453),o=r(3454);t.isSameTable=function(e,t){return o.assert.fatal(e.hasCategory(n.Category.TableCell),"plugins/selectall/src/kernel/helpers/is-same-table.ts:6"),o.assert.fatal(t.hasCategory(n.Category.TableCell),"plugins/selectall/src/kernel/helpers/is-same-table.ts:7"),e===t||e.parentNode.parentNode===t.parentNode.parentNode}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSelectAllContents=void 0;var n=r(3454);t.isSelectAllContents=function(e,t){n.assert.fatal(t.isElement(),"plugins/selectall/src/kernel/helpers/is-select-all-contents.ts:5");var r=e.start,o=e.end;return r.node===t&&o.node===t&&0===r.offset&&o.offset===t.childCount}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectAllColumns=void 0;var n=r(3453),o=r(3454),a=r(3490);t.selectAllColumns=function(e,t,r){o.assert.fatal(e.hasCategory(a.COLUMNS),"plugins/selectall/src/kernel/helpers/select-all-columns.ts:18");var i=e.children.map((function(e){return o.assert.fatal(e.hasCategory(a.COLUMN),"plugins/selectall/src/kernel/helpers/select-all-columns.ts:21"),t.newRange(t.newPosition(e,0),t.newPosition(e,e.childCount))}));if(r.ranges.length===i.length&&r.ranges.every((function(e,t){return n.Range.equal(e,i[t])}))){var u=n.RangeUtil.shrinkRange(t,t.selectNodeContents(e.parentNode).firstRange);return t.newSelection([u])}return t.newSelection(i)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3457),i=r(4030),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob(),r=t.getSelection().firstRange.start.node.rootNode;return t.dangerDirectSetSelection(t.selectNodeContents(r)),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:i.pluginRegister.command.selectAllDoc}),t}(a.KernelAbstractCommand);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4853)),l=r(4250),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u.default]}),t}(i.KernelPlugin);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(4854),l=r(4250),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.getSelection().cloneSelection()}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=!0);var n=e.newJob(),o=t.ranges.map((function(e){var t=e.start,r=e.end,o=n.newPosition(t.node,t.offset),a=r?n.newPosition(r.node,r.offset):void 0;return(0,u.formatRange)(n,n.newRange(o,a))}));return r||(o=o.map((function(e){return a.RangeUtil.shrinkBlockNodeBoundary(n,e)}))),n.setSelectionWithoutOptimize(n.newSelection(o,t.anchor,t.focus)),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.selection}),t}(i.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatRange=void 0,t.formatRange=function(e,t){var r=t.start,n=t.end;return t.collapsed||!r.node.isCardNode()&&!n.node.isCardNode()?t:(r.node.isCardNode()&&(r=e.newPosition(r.node.parentNode,r.node.offset)),n.node.isCardNode()&&(n=e.newPosition(n.node.parentNode,n.node.offset+1)),e.newRange(r,n))}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(4251)),l=a(r(4856)),c=r(4031),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerInlineCard(c.pluginRegister.node.slash)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u.default,l.default]}),t}(i.KernelPlugin);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3454),l=r(3465),c=a(r(4251)),s=r(4031),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob();if(this.getState(r)===l.COMMAND_UNAVAILABLE)return e.cancelJob(r),!1;var n=r.getSelection();n.collapsed||(n=i.SelectionUtil.deleteContent(r,r.getSelection())),u.assert.fatal(n.collapsed,"plugins/slash/src/kernel/commands/insert-slash-command.ts:26");var o=i.CardUtil.insertCardNode(r,n,s.pluginRegister.node.slash,t).cardNode;return r.setSelection(r.newSelection(r.newRange(r.newPosition(o,0)))),e.commitJob(r),o.id}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.insertSlash}),t}(c.default);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3463),c=r(3519),s=a(r(3851)),f=a(r(4858)),d=a(r(4859)),p=a(r(4860)),h=r(3856),y=a(r(4861)),b=a(r(4862)),m=a(r(4863)),v=a(r(4864)),g=a(r(3635)),_=a(r(4865)),w={"^":"sup","~":"sub"},O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;e.registerAttr(f.default);var r=e.getService(l.ILakeKernelService.ID);r&&r.registerLakeNodeReader(["sub","sup"],new y.default);var n=e.getService(u.IHTMLKernelService.ID);n&&(n.registerAttrHTMLWriter(b.default.AttrNames,new b.default),n.registerHTMLNodeReader(v.default.NodeNames,new v.default));var o=e.getService(l.ILakeKernelService.ID);o&&o.registerLakeAttrWriter(m.default.AttrNames,new m.default);var a=e.getService(g.default.ID);a&&a.registerMarkdownWriter(_.default.NodeNames,new _.default);var i=e.getService(c.IMarkdownKernelService.ID);i&&Object.keys(w).forEach((function(e){i.registerMarkdownMatcher(c.TriggerType.whiteSpace,new s.default(t.editing,e,(function(r,n){t._handlerMarkdown(r,w[e],n)}),!0))}))}}),Object.defineProperty(t.prototype,"_handlerMarkdown",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){r=i.RangeUtil.setAttribute(e,r,t,!0);var n=e.createTextNode("");e.insertNodeByPosition(r.end,n),e.setSelection([e.newRange(e.newPosition(n,0))])}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:h.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[d.default,p.default]}),t}(i.KernelPlugin);t.default=O},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o={sub:{targets:[n.Category.Text],values:[!0],cleanByBreakLine:!0},sup:{targets:[n.Category.Text],values:[!0],cleanByBreakLine:!0}};t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(4252)),u=r(3856),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"commandName",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.sub}),t}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.sub}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(4252)),u=r(3856),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"commandName",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.sup}),t}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.sup}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.setAttr(t.name,!0)}}),t}(r(3548).LakeNodeReader);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3562)),u=r(3856),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){r&&e.wrapNode(e.createElement(t))}}),Object.defineProperty(t,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[u.pluginRegister.attr.sub,u.pluginRegister.attr.sup]}),t}(i.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3856),o=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.wrapNode(e.createElement(t))}}),Object.defineProperty(e,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[n.pluginRegister.attr.sub,n.pluginRegister.attr.sup]}),e}();t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"name",{enumerable:!0,configurable:!0,writable:!0,value:"sub"}),t}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.addAttr(t.name,!0),this.name=t.name}}),Object.defineProperty(t.prototype,"leaveNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r=this,n=e.parentNode,o=function(e){var t,n;"element"===e.type?null===(n=e.children)||void 0===n||n.forEach(o):"text"===e.type&&(e.attrs?e.attrs[r.name]=!0:e.attrs=((t={})[r.name]=!0,t))};null===(t=n.children)||void 0===t||t.forEach((function(e){var t;"element"===e.type&&(null===(t=e.children)||void 0===t||t.forEach(o))}))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["sub","sup"]}),t}(a(r(3494)).default);t.default=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3458)),a=function(){function e(){}return Object.defineProperty(e.prototype,"preWrite",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n;return!(null===(r=t.attrs)||void 0===r?void 0:r.sub)&&!(null===(n=t.attrs)||void 0===n?void 0:n.sup)||(e.writeHTML(o.default.createFragment([t])),!1)}}),Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!0}}),Object.defineProperty(e,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["#text"]}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3561),l=r(3466),c=r(3493),s=r(3463),f=r(3519),d=a(r(4012)),p=r(3601),h=a(r(4867)),y=r(4868),b=a(r(4869)),m=a(r(4870)),v=a(r(4871)),g=a(r(4873)),_=a(r(4874)),w=a(r(4875)),O=a(r(4877)),E=a(r(4878)),P=a(r(4880)),j=a(r(4882)),C=a(r(4883)),k=r(4884),S=r(4886),A=a(r(4888)),x=a(r(4891)),N=a(r(4892)),T=a(r(4893)),D=a(r(4895)),L=a(r(4896)),R=a(r(4897)),I=a(r(4899)),M=r(3766),F=r(3467),B=a(r(4900)),U=a(r(4902)),H=a(r(4904)),V=a(r(4253)),G=a(r(4905)),q=a(r(4906)),z=a(r(4907)),W=a(r(4909)),K=a(r(4910)),Y=a(r(4911)),J=a(r(4912)),$=a(r(4913)),X=a(r(4914)),Q=a(r(4915)),Z=r(3636),ee=r(4916),te=r(4917),re=r(4918),ne=r(4919),oe=r(4920),ae=a(r(4921)),ie=r(4200),ue=r(4215),le=a(r(4922)),ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n,o,a;e.registerElement(b.default),e.registerAttr(h.default);var u=e.getService(l.IHTMLKernelService.ID);u&&(u.registerHTMLNodeReader(z.default.NodeNames,new z.default),u.registerHTMLNodeReader(W.default.NodeNames,new W.default),u.registerHTMLNodeReader(q.default.NodeNames,new q.default),u.registerHTMLAttributeReader(G.default.AttrNames,new G.default));var f=e.getService(l.IHTMLKernelService.ID);f&&(f.registerNodeHTMLWriter(K.default.NodeNames,new K.default),f.registerNodeHTMLWriter($.default.NodeNames,new $.default),f.registerNodeHTMLWriter(J.default.NodeNames,new J.default),f.registerAttrHTMLWriter(Y.default.AttrNames,new Y.default));var d=e.getService(p.ITextDataSourceKernelService.ID);d&&d.registerTextWriter("table",new H.default);var y=e.getService(s.ILakeKernelService.ID);y&&y.registerLakeNodeReader("table",new U.default);var m=e.getService(s.ILakeKernelService.ID);m&&(m.registerLakeNodeWriter(X.default.NodeNames,new X.default),m.registerLakeNodeWriter(Q.default.NodeNames,new Q.default));var v=e.getService(c.IINodeReaderKernelService.ID);v&&v.registerINodeNodeReader("table",new B.default),null===(t=e.getService(Z.IMarkdownService.ID))||void 0===t||t.registerMarkdownWriter("table",new ee.TableMarkdownWriter),null===(r=e.getService(Z.IMarkdownService.ID))||void 0===r||r.registerMarkdownWriter("tr",new te.TrMarkdownWriter),null===(n=e.getService(Z.IMarkdownService.ID))||void 0===n||n.registerMarkdownWriter("td",new re.TdMarkdownWriter),this._initMarkdownKey(),null===(o=e.getService(ie.IBasicTextStyleKernelService.ID))||void 0===o||o.registerBoldDisableHandler((function(e){return i.TableSelectionUtil.isInTableHead(e)})),null===(a=e.getService(ue.IColorKernelService.ID))||void 0===a||a.registerColorDisableHandler((function(e){return i.TableSelectionUtil.isInTableHead(e)})),this.option.onKernelPluginInit&&this.option.onKernelPluginInit(this.kernel)}}),Object.defineProperty(t.prototype,"_initMarkdownKey",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.kernel.getService(f.IMarkdownKernelService.ID);e&&e.registerMarkdownMatcher(f.TriggerType.enter,new d.default(this.editing,/^\|([^|\n]+\|){2,}$/,(function(e,t,r,n){var o,a=n.matched[0].split("|").filter(Boolean),i=V.default.instance(M.DEFAULT_TABLE_WIDTH,2,a.length).toNode(e);e.setAttribute(i,"widthMode",u.WIDTH_MODE_CONTAIN),t&&(o=e.newPosition(t.parentNode,t.offset),e.removeChild(t.parentNode,t));var l=e.createHole("tableHole");e.appendChild(l,i),e.insertNodeByPosition(o,l);var c=i.firstChild.firstChild;a.forEach((function(t){if(c){var r=e.createElement("p");e.appendChild(r,e.createInheritTextNode(t,o)),e.appendChild(c,r)}c=c.nextSibling}));var s=i.firstChild.nextSibling;e.setSelection([e.newRange(e.newPosition(s,0))])}),(function(e){var t,r=e.node.closest(i.Category.Block);return!!(null===(t=null==r?void 0:r.parent)||void 0===t?void 0:t.isRootNode())})))}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:F.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[g.default,_.default,w.default,O.default,E.default,P.default,j.default,C.default,k.InsertAfterColumnCommand,k.InsertBeforeColumnCommand,S.InsertAfterRowCommand,S.InsertBeforeRowCommand,A.default,x.default,N.default,T.default,m.default,D.default,v.default,L.default,R.default,I.default,ne.RowHeadCommand,oe.ColHeadCommand,ae.default,le.default]}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:y.TableKernelOption}),t}(i.KernelPlugin);t.default=ce},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3927),o=r(3723),a={colWidths:{targets:[o.TABLE],values:function(e){if(!Array.isArray(e))return!1;if(0===e.length)return!1;return e.every(u)}},height:{targets:[o.TABLE_ROW],values:u},rowCount:{targets:[o.TABLE],values:l},colCount:{targets:[o.TABLE],values:l},borderVisible:{targets:[o.TABLE],values:[!1]},spacing:{targets:[o.TABLE],values:[!0,!1]},col:{targets:[o.TABLE_CELL],values:function(e){if("number"!=typeof e)return!1;if(!Number.isInteger(e))return!1;return e>=0}},rowSpan:{targets:[o.TABLE_CELL],values:c},colSpan:{targets:[o.TABLE_CELL],values:c},cellBgColor:{targets:[o.TABLE_CELL],values:function(){return!0}},borderColor:{targets:[o.TABLE_CELL],values:function(){return!0}},borderStyle:{targets:[o.TABLE_CELL],values:n.BORDER_STYLE},verticalAlign:{targets:[o.TABLE_CELL],values:n.VERTICAL_ALIGN},rowHead:{targets:[o.TABLE],values:i},colHead:{targets:[o.TABLE],values:i},fitWidth:{targets:[o.TABLE],values:[!0,!1]}};function i(e){return"string"==typeof e&&/;/.test(e)}function u(e){return"number"==typeof e&&(!!Number.isFinite(e)&&e>0)}function l(e){return"number"==typeof e&&(!!Number.isInteger(e)&&e>0)}function c(e){return"number"==typeof e&&(!!Number.isInteger(e)&&e>1)}t.default=a},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TableKernelOption=void 0;var o=n(r(3464)),a=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=(0,o.default)({},e)}return Object.defineProperty(e.prototype,"onKernelPluginInit",{get:function(){return this._option.onKernelPluginInit},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"table"}),e}();t.TableKernelOption=a},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0});var o=r(3453),a=r(4010),i=r(3723),u=((n={})[i.TABLE]={parents:[o.Category.TableHole],id:a.generateHashID,category:[o.Category.Table,o.Category.WidthModeBox,o.Category.Brick]},n[i.TABLE_ROW]={parents:[i.TABLE],category:[o.Category.TableRow]},n[i.TABLE_CELL]={parents:[i.TABLE_ROW],category:[o.Category.TableCell,o.Category.LikeRoot]},n);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3467),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;i.assert.fatal(t,"plugins/table/src/kernel/commands/spacing.ts:15");var n=e.getNodeById(t);return!1!==(null===(r=null==n?void 0:n.attrs)||void 0===r?void 0:r.spacing)}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){i.assert.fatal(t,"plugins/table/src/kernel/commands/spacing.ts:23");var n=e.newJob(),o=n.getNodeById(t);return(null==o?void 0:o.hasCategory(a.Category.Table))?(r?n.removeAttribute(o,"spacing"):n.setAttribute(o,"spacing",!1),e.commitJob(n),!0):(e.cancelJob(n),!1)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.tableSpacing}),t}(u.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3453),l=r(3453),c=r(3454),s=r(3457),f=r(3465),d=r(3723),p=a(r(4253)),h=r(3766),y=r(3467),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t=e.getSelection().ranges,r=0,n=t.length;r<n;r++){if(l.NodeUtil.closest(t[r].commonAncestorContainer,d.TABLE_CELL))return l.Command.UNAVAILABLE}return l.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.width,n=t.row,o=t.col,a=t.widthMode,s=e.newJob();if(this.getState(s)===f.COMMAND_UNAVAILABLE)return e.cancelJob(s),!1;var y=p.default.instance(r||h.DEFAULT_TABLE_WIDTH,n,o).toNode(s),b=s.getSelection();b.collapsed||(b=u.SelectionUtil.deleteContent(s,b)),c.assert.fatal(b.collapsed,"plugins/table/src/kernel/commands/table.ts:64"),a&&s.acceptAttr(y.nodeName,"widthMode",a)&&s.setAttribute(y,"widthMode",a);var m=b.firstRange.start,v=m.node.closest(i.Category.Block);v&&l.NodeUtil.isLikeEmptyElement(v)&&(m=s.newPosition(v.parentNode,v.offset),s.removeChild(v.parentNode,v));var g=s.createHole("tableHole");s.appendChild(g,y),u.PositionUtil.insertNodes(s,m,[g]);var _=y.firstChild.firstChild;return c.assert.fatal(_&&_.nodeName===d.TABLE_CELL&&_.isConnected,"plugins/table/src/kernel/commands/table.ts:88"),s.setSelection([s.newRange(s.newPosition(_,0))]),e.commitJob(s),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:y.pluginRegister.command.table}),t}(s.KernelAbstractCommand);t.default=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcAverage=void 0,t.calcAverage=function(e,t){for(var r=Math.floor(e/t),n=[],o=0;o<t;o++)n.push(r);var a=e%t;return a>0&&(n[n.length-1]+=a),n}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3454),l=r(3457),c=r(3467),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection(),r=i.NodeUtil.closest(t.ranges[0].commonAncestorContainer,a.Category.Table);return r?(u.assert.fatal(r,"plugins/table/src/kernel/commands/border-visible.ts:25"),!1===r.attrs.borderVisible?i.Command.EXECUTED:i.Command.NOT_EXECUTED):i.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob(),n=this.getState(r);if(n===i.Command.UNAVAILABLE)return e.cancelJob(r),!1;var o=r.getSelection(),l=i.NodeUtil.closest(o.firstRange.start.node,a.Category.Table);return u.assert.fatal(l,"plugins/table/src/kernel/commands/border-visible.ts:50"),!0===t?r.removeAttribute(l,"borderVisible"):!1===t||n===i.Command.NOT_EXECUTED?r.setAttribute(l,"borderVisible",!1):r.removeAttribute(l,"borderVisible"),e.commitJob(r),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.tableBorderVisible}),t}(l.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3454),l=r(3457),c=r(3465),s=r(3467),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return t.rangeCount>1||i.NodeUtil.closest(t.firstRange.commonAncestorContainer,a.Category.TableCell)?c.COMMAND_NOT_EXECUTED:i.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob();if(this.getState(t)===c.COMMAND_UNAVAILABLE)return e.cancelJob(t),!1;var r=t.getSelection(),n=r.ranges.map((function(e){var r=i.NodeUtil.closest(e.commonAncestorContainer,a.Category.TableCell);return u.assert.fatal(r,"plugins/table/src/kernel/commands/clear-content.ts:52"),i.RangeUtil.deleteContent(t,i.Range.selectNodeContents(r))}));return t.setSelection(r.cloneByRange(n)),e.commitJob(t),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.tableClearContent}),t}(l.KernelAbstractCommand);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3457),l=a(r(3843)),c=r(4876),s=r(3467),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return l.default.isInTable(t)&&l.default.isSelectColumn(t)?i.Command.NOT_EXECUTED:i.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob();if(this.getState(r)===i.Command.UNAVAILABLE)return e.cancelJob(r),!1;var n=r.getSelection(),o=i.NodeUtil.closest(n.firstRange.commonAncestorContainer,i.Category.Table);return!Number.isInteger(t)||t<0||t>o.attrs.colCount?(e.cancelJob(r),!1):((0,c.moveColumn)(r,n,t),e.commitJob(r),!0)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.tableColumnMoveTo}),t}(u.KernelAbstractCommand);t.default=f},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.moveColumn=void 0;var a=r(3453),i=r(3454);t.moveColumn=function(e,t,r){var u=a.NodeUtil.closest(t.firstRange.commonAncestorContainer,a.Category.Table);i.assert.fatal(u,"plugins/table/src/kernel/commands/helpers/move-column.ts:20");var l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;t.ranges.forEach((function(e){var t=a.NodeUtil.closest(e.commonAncestorContainer,a.Category.TableCell).attrs,r=t.col,n=t.colSpan,o=void 0===n?1:n;l=Math.min(l,r),c=Math.max(c,r+o-1)})),u.children.forEach((function(t){!function(e,t,r,n,o){var a=n-r+1,u=o>r?o-n-1:o-r,l=null,c=t.children.filter((function(t){var i=t.attrs.col;return i===o&&(l=t),i>n?(i<o&&e.setAttribute(t,"col",i-a),!1):i>=r&&i<=n?(e.setAttribute(t,"col",i+u),!0):(i<r&&i>=o&&e.setAttribute(t,"col",i+a),!1)}));i.assert.fatal(c.length<=a,"plugins/table/src/kernel/commands/helpers/move-column.ts:106"),0===o?c.reverse().forEach((function(r){e.prependChild(t,r)})):l?c.forEach((function(r){e.insertBefore(t,r,l)})):c.forEach((function(r){e.appendChild(t,r)}))}(e,t,l,c,r)}));for(var s=o([],n(u.attrs.colWidths),!1),f=s.slice(l,c+1),d=l;d<=c;d++)s[d]=null;s.splice.apply(s,o([r,0],n(f),!1)),e.setAttribute(u,"colWidths",s.filter((function(e){return null!==e})))}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3467),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n,o){r=Array.isArray(r)?r:[r];var i=e.newJob(),u=i.getNodeById(t);if(!(null==u?void 0:u.hasCategory(a.Category.Table)))return!1;var l=u.attrs,c=l.colWidths,s=l.fitWidth,f=[];return(n=Number.parseInt(n+"",10))>0?(s?o.forEach((function(e,t){r.includes(t)?(t+1<o.length&&(o[t+1]+=e-n),f.push(n)):f.push(e)})):c.forEach((function(e,t){r.includes(t)?f.push(n):f.push(e)})),i.setAttribute(u,"colWidths",f),e.commitJob(i),!0):(e.cancelJob(i),!1)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.tableColumnWidth}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3454),l=r(3457),c=r(3465),s=r(4879),f=r(3467),d=r(4007),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection(),r=i.NodeUtil.closest(t.firstRange.commonAncestorContainer,a.Category.TableCell);return r?(0,d.isFullSelectTable)(r,t)?c.COMMAND_UNAVAILABLE:c.COMMAND_NOT_EXECUTED:c.COMMAND_UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob();if(this.getState(t)===c.COMMAND_UNAVAILABLE)return e.cancelJob(t),!1;var r=t.getSelection(),n=i.NodeUtil.closest(r.firstRange.start.node,a.Category.Table);u.assert.fatal(n,"plugins/table/src/kernel/commands/delete-column.ts:52");var o=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;return r.ranges.forEach((function(e){var t=i.NodeUtil.closest(e.start.node,a.Category.TableCell);o=Math.min(t.attrs.col,o),l=Math.max(t.attrs.col+(t.attrs.colSpan||1),l)})),u.assert.fatal(!(0===o&&l===n.attrs.colCount),"plugins/table/src/kernel/commands/delete-column.ts:68"),r=(0,s.deleteColumn)(t,n,o,l),t.setSelection(r),e.commitJob(t),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:f.pluginRegister.command.tableDeleteColumn}),t}(l.KernelAbstractCommand);t.default=p},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteColumn=void 0;var i=r(3454),u=r(4254),l=a(r(3724)),c=r(3766);t.deleteColumn=function(e,t,r,a){var s=a-r,f=t.attrs,d=f.colWidths,p=f.colCount,h=function(e,t){if(e=o([],n(e),!1),e.length>t)e.length=t;else if(e.length<t)for(var r=e.length;r<t;r++)e.push(c.DEFAULT_COL_WIDTH);return e}(d,p);i.assert.fatal(p>s,"plugins/table/src/kernel/commands/helpers/delete-column.ts:24"),h.splice(r,s),i.assert.fatal(h.length===p-s,"plugins/table/src/kernel/commands/helpers/delete-column.ts:28"),e.setAttribute(t,"colCount",p-s),e.setAttribute(t,"colWidths",h);var y=l.default.getLayout(t);y.forEach((function(t){t.splice(r,s).forEach((function(t){var r=t.type,n=t.node;r===l.default.TYPE_NODE&&e.removeChild(n.parentNode,n)}))}));var b=(0,u.reLayout)(e,t,y),m=b[0][r]||b[0][r-1];i.assert.fatal(m,"plugins/table/src/kernel/commands/helpers/delete-column.ts:49");var v=m.node;return i.assert.fatal(v&&v.isConnected,"plugins/table/src/kernel/commands/helpers/delete-column.ts:53"),e.newSelection(e.newRange(e.newPosition(v,0)))}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3454),l=r(3457),c=r(3465),s=r(4881),f=r(3467),d=r(4007),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection(),r=i.NodeUtil.closest(t.firstRange.commonAncestorContainer,a.Category.TableCell);return r?(0,d.isFullSelectTable)(r,t)?c.COMMAND_UNAVAILABLE:c.COMMAND_NOT_EXECUTED:c.COMMAND_UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob();if(this.getState(t)===c.COMMAND_UNAVAILABLE)return e.cancelJob(t),!1;var r=t.getSelection(),n=i.NodeUtil.closest(r.firstRange.start.node,a.Category.Table);u.assert.fatal(n,"plugins/table/src/kernel/commands/delete-row.ts:52");var o=i.NodeUtil.closest(r.firstRange.start.node,a.Category.TableCell),l=i.NodeUtil.closest(r.lastRange.end.node,a.Category.TableCell),f=o.parentNode.offset,d=l.parentNode.offset+(l.attrs.rowSpan||1);return u.assert.fatal(!(0===f&&d===n.childCount),"plugins/table/src/kernel/commands/delete-row.ts:68"),r=(0,s.deleteRow)(t,n,f,d),t.setSelection(r),e.commitJob(t),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:f.pluginRegister.command.tableDeleteRow}),t}(l.KernelAbstractCommand);t.default=p},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteRow=void 0;var i=r(3454),u=r(4255),l=r(4254),c=a(r(3724)),s=r(3767);t.deleteRow=function(e,t,r,a){var f=a-r,d=t.attrs.rowCount;i.assert.fatal(d-f>0,"plugins/table/src/kernel/commands/helpers/delete-row.ts:22");var p=(0,s.getTableQueueStartAndEnd)(e,t);e.setAttribute(t,"rowCount",d-f);for(var h=c.default.getLayout(t),y=o([],n(t.children),!1),b=r;b<a;b++)e.removeChild(t,y[b]),h[b]=null;var m=(0,l.reLayout)(e,t,h.filter((0,u.toFilterFunction)(Boolean))),v=m[r]||m[r-1];i.assert.fatal(v,"plugins/table/src/kernel/commands/helpers/delete-row.ts:47");var g=v[0].node;if(i.assert.fatal(g&&g.isConnected,"plugins/table/src/kernel/commands/helpers/delete-row.ts:51"),p&&a>p.startRow){var _=r<p.startRow?r:p.startRow;(0,s.flushQueueNoToTableNode)(e,t,_)}return e.newSelection(e.newRange(e.newPosition(g,0)))}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3454),l=r(3457),c=r(3467),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob(),n=r.getNodeById(t);if(!(null==n?void 0:n.hasCategory(i.Category.Table)))return!1;var o=a.SelectionUtil.deleteContent(r,r.selectNode(n));return u.assert.fatal(o.collapsed,"plugins/table/src/kernel/commands/delete-table.ts:24"),r.setSelection(o),e.commitJob(r),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.deleteTable}),t}(l.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3561),c=r(3766),s=r(3467),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=c.DEFAULT_TABLE_WIDTH);var n=e.newJob(),o=n.getNodeById(t);if(!(null==o?void 0:o.hasCategory(a.Category.Table)))return!1;var i=o.attrs,u=i.colCount,s=i.colWidths;if(i.widthMode===l.WIDTH_MODE_CONTAIN&&(r=s.reduce((function(e,t){return e+t}),0)),!(r>u))return e.cancelJob(n),!1;var f=this._equallyDividedColumn(r,u);return n.setAttribute(o,"colWidths",f),e.commitJob(n),!0}}),Object.defineProperty(t.prototype,"_equallyDividedColumn",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=Math.floor(e/t);i.assert.fatal(r>0,"plugins/table/src/kernel/commands/equally-column.ts:55");for(var n=e%t,o=[],a=0;a<t;a++)o.push(r);return n>0&&(o[t-1]+=n),o}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.tableEquallyColumn}),t}(u.KernelAbstractCommand);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.InsertAfterColumnCommand=t.InsertBeforeColumnCommand=void 0;var a=r(3453),i=r(3453),u=r(3457),l=r(3465),c=r(4885),s=r(3467),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_position",{enumerable:!0,configurable:!0,writable:!0,value:""}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return t.rangeCount>1||i.NodeUtil.closest(t.firstRange.commonAncestorContainer,a.Category.Table)?l.COMMAND_NOT_EXECUTED:i.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){void 0===t&&(t=1),void 0===r&&(r=-1),void 0===n&&(n=!1);var o=e.newJob();if(this.getState(o)===l.COMMAND_UNAVAILABLE)return e.cancelJob(o),!1;var u=o.getSelection();-1===r&&(r=this._getIndex(u));var s=i.NodeUtil.closest(u.firstRange.commonAncestorContainer,a.Category.Table);return(0,c.insertColumn)(o,s,r,this._position,t,n),e.commitJob(o),!0}}),Object.defineProperty(t.prototype,"_getIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if("before"===this._position)return i.NodeUtil.closest(e.firstRange.start.node,a.Category.TableCell).attrs.col;var t=i.NodeUtil.closest(e.lastRange.end.node,a.Category.TableCell);return t.attrs.col+(t.attrs.colSpan||1)-1}}),t}(u.KernelAbstractCommand),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_position",{enumerable:!0,configurable:!0,writable:!0,value:"before"}),t}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.tableInsertBeforeColumn}),t}(f);t.InsertBeforeColumnCommand=d;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_position",{enumerable:!0,configurable:!0,writable:!0,value:"after"}),t}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.tableInsertAfterColumn}),t}(f);t.InsertAfterColumnCommand=p},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.insertColumn=void 0;var u=i(r(191)),l=r(3454),c=i(r(3724)),s=r(3927),f=r(3767),d=r(4256);t.insertColumn=function(e,t,r,i,p,h){var y;void 0===h&&(h=!1);var b=-1===(y="before"===i?r-1:r)?0:y,m=t.attrs,v=m.colCount,g=m.colWidths,_=a([],o(g),!1),w=h?s.QUEUE_NO_INIT_WIDTH:g[r];l.assert.fatal(y>=-1&&y<=v,"plugins/table/src/kernel/commands/helpers/insert-column.ts:43");var O=[];if(t.children.forEach((function(e,t){var r=b,n=e.children[r];if(!O[t]){for(;(!n||n.attrs.col>b)&&0!==r;)r--,n=e.children[r];if(n)for(var o=n.attrs.rowSpan,a=void 0===o?1:o,i=t;i<t+a;i++)O[i]=(0,u.default)(n.attrs,s.INHERITABLE_CELL_ATTRS)}})),-1===y)for(var E=0;E<p;E++)_.unshift(w);else if(y===v)for(E=0;E<p;E++)_.push(w);else for(E=0;E<p;E++)_.splice(y+1,0,w);if(e.setAttribute(t,"colCount",v+p),e.setAttribute(t,"colWidths",_),-1===y)return t.children.forEach((function(t,r){t.children.forEach((function(t){e.setAttribute(t,"col",t.attrs.col+p)}));for(var o=p-1;o>=0;o--)e.prependChild(t,e.createElement("td",h?{col:o}:n({col:o},O[r])))})),void(h&&(0,f.flushQueueNoToTableNode)(e,t,1));if(y!==v){var P=c.default.getLayout(t),j=new Set;P.forEach((function(t,r){var o=t[y],a=o.type,i=o.node;if(i.attrs.col+(i.attrs.colSpan||1)-1>y){j.has(i)||(j.add(i),e.setAttribute(i,"colSpan",i.attrs.colSpan+p));for(var u=0;u<p;u++)t.splice(y+1,0,{type:c.default.TYPE_REF,node:i})}else if(a===c.default.TYPE_REF){l.assert.fatal(i.attrs.colSpan>1||i.attrs.rowSpan>1,"plugins/table/src/kernel/commands/helpers/insert-column.ts:173");for(u=0;u<p;u++)t.splice(y+1,0,{type:c.default.TYPE_NODE,node:null})}else for(u=0;u<p;u++){var s=e.createElement("td",n({},O[r]));e.insertAfter(i.parentNode,s,i),(0,d.cloneChild)(e,i,s),t.splice(y+1,0,{type:c.default.TYPE_NODE,node:s})}})),P.forEach((function(r,o){var a=null;l.assert.fatal(r.length===t.attrs.colCount,"plugins/table/src/kernel/commands/helpers/insert-column.ts:207"),r.forEach((function(r,i){if(r.type===c.default.TYPE_NODE)if(r.node)e.setAttribute(r.node,"col",i),a=r.node;else{var u=e.createElement("td",n({col:i},O[o]));a?e.insertAfter(t.children[o],u,a):e.prependChild(t.children[o],u),a=u,r.node=u}}));var i=r[r.length-1].node;l.assert.fatal(i.attrs.col+(i.attrs.colSpan||1)===v+p,"plugins/table/src/kernel/commands/helpers/insert-column.ts:241")}))}else t.children.forEach((function(t,r){for(var o=0;o<p;o++)e.appendChild(t,e.createElement("td",n({col:v+o},O[r])))}))}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.InsertAfterRowCommand=t.InsertBeforeRowCommand=void 0;var a=r(3453),i=r(3453),u=r(3454),l=r(3457),c=r(3465),s=r(4887),f=r(3467),d=r(4175),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_position",{enumerable:!0,configurable:!0,writable:!0,value:""}),t}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return t.rangeCount>1||i.NodeUtil.closest(t.firstRange.commonAncestorContainer,a.Category.Table)?c.COMMAND_NOT_EXECUTED:i.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){void 0===t&&(t=1),void 0===r&&(r=-1),void 0===n&&(n=!1);var o=e.newJob();if(this.getState(o)===c.COMMAND_UNAVAILABLE)return e.cancelJob(o),!1;var u=o.getSelection();-1===r&&(r=this._getSourceRowIndex(u));var l=i.NodeUtil.closest(u.firstRange.commonAncestorContainer,a.Category.Table),f=(0,s.insertRow)(o,l,r,this._position,t);return n&&o.setSelection((0,d.normalizeSelection)(o,o.selectNodeContents(f.firstChild),!0)),e.commitJob(o),!0}}),Object.defineProperty(t.prototype,"_getSourceRowIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._position,r=i.NodeUtil.closest(("before"===t?e.firstRange:e.lastRange).commonAncestorContainer,a.Category.TableCell);u.assert.fatal(r,"plugins/table/src/kernel/commands/insert-row.ts:92");var n=r.parentNode;return"before"===t?n.offset:n.offset+(r.attrs.rowSpan||1)-1}}),t}(l.KernelAbstractCommand),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_position",{enumerable:!0,configurable:!0,writable:!0,value:"before"}),t}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:f.pluginRegister.command.tableInsertBeforeRow}),t}(p);t.InsertBeforeRowCommand=h;var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_position",{enumerable:!0,configurable:!0,writable:!0,value:"after"}),t}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:f.pluginRegister.command.tableInsertAfterRow}),t}(p);t.InsertAfterRowCommand=y},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.insertRow=void 0;var a=o(r(191)),i=r(3454),u=o(r(3724)),l=r(3927),c=r(3723),s=r(3767),f=r(4256);t.insertRow=function(e,t,r,o,d){var p={},h=t.children[r];i.assert.fatal(h,"plugins/table/src/kernel/commands/helpers/insert-row.ts:24"),h.attrs.height&&(p.height=h.attrs.height);var y=t.attrs.rowCount;i.assert.fatal(r>=0&&r<=y-1,"plugins/table/src/kernel/commands/helpers/insert-row.ts:34"),e.setAttribute(t,"rowCount",y+d);var b=(0,s.getTableQueueStartAndEnd)(e,t);if(0===r&&"before"===o||r===y-1&&"after"===o){var m=function(e,t,r,o,s,d){var p=null,h=u.default.getLayout(t),y=h[s],b=e.createElement(c.TABLE_ROW,d),m=[];y.forEach((function(t,r){if(t.type===u.default.TYPE_NODE){var o=(0,a.default)(t.node.attrs,l.INHERITABLE_CELL_ATTRS);m[r]=e.createElement(c.TABLE_CELL,n({col:r},o)),e.appendChild(b,m[r]),(0,f.cloneChild)(e,t.node,m[r])}else{var s=t.node,d=m[s.attrs.col];if(d)i.assert.fatal(s.attrs.colSpan>1,"plugins/table/src/kernel/commands/helpers/insert-row.ts:120"),e.setAttribute(d,"colSpan",(d.attrs.colSpan||1)+1);else{o=(0,a.default)(s.attrs,l.INHERITABLE_CELL_ATTRS);m[r]=e.createElement(c.TABLE_CELL,n({col:r},o)),e.appendChild(b,m[r]),(0,f.cloneChild)(e,t.node,m[r])}}}));for(var v=0;v<r;v++){var g=0===v?b:e.cloneNode(b,!0);0===v&&(p=b),e[o?"prependChild":"appendChild"](t,g)}return p}(e,t,d,"before"===o,r,p);return!b||0!==b.startRow&&r!==y-1||(0,s.flushQueueNoToTableNode)(e,t,b.startRow),m}var v=function(e,t,r,o,s,d){var p=null,h=t.attrs.rowCount,y=u.default.getLayout(t),b=s;o&&(b=s-1);i.assert.fatal(b>=0&&b<h-1,"plugins/table/src/kernel/commands/helpers/insert-row.ts:178");for(var m=y[b],v=e.createElement(c.TABLE_ROW,d),g=new Set,_=y[s],w=[],O=0,E=m.length;O<E;O++){var P=m[O].node;if(P.parentNode.offset+(P.attrs.rowSpan||1)-1>b)i.assert.fatal(P.attrs.rowSpan>1,"plugins/table/src/kernel/commands/helpers/insert-row.ts:197"),g.has(P)||(g.add(P),e.setAttribute(P,"rowSpan",P.attrs.rowSpan+r));else{var j=_[O],C=w[j.node.attrs.col];if(j.type===u.default.TYPE_REF&&C)e.setAttribute(C,"colSpan",(C.attrs.colSpan||1)+1);else{var k=(0,a.default)(j.node.attrs,l.INHERITABLE_CELL_ATTRS);w[O]=e.createElement(c.TABLE_CELL,n({col:O},k)),e.appendChild(v,w[O]),(0,f.cloneChild)(e,P,w[O])}}}var S=t.children[b];for(O=0;O<r;O++){var A=void 0;O===r-1?(p=v,A=v):A=e.cloneNode(v,!0),e.insertAfter(t,A,S)}return p}(e,t,d,"before"===o,r,p);return b&&r>=b.startRow&&(0,s.flushQueueNoToTableNode)(e,t,b.startRow),v}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3454),l=r(3457),c=r(4889),s=r(3467),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection(),r=t.ranges;if(t.isTableSelection)return i.Command.NOT_EXECUTED;var n=i.NodeUtil.closest(r[0].commonAncestorContainer,a.Category.TableCell);return n&&(n.attrs.colSpan>1||n.attrs.rowSpan>1)?i.Command.EXECUTED:i.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob();if(this.getState(t)===i.Command.UNAVAILABLE)return e.cancelJob(t),!1;var r=t.getSelection(),n=i.NodeUtil.closest(r.firstRange.start.node,a.Category.Table);return u.assert.fatal(r.rangeCount>1,"plugins/table/src/kernel/commands/merge-cell.ts:52"),u.assert.fatal(n,"plugins/table/src/kernel/commands/merge-cell.ts:53"),r=(0,c.mergeCell)(t,r),t.setSelection(r),e.commitJob(t),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.tableMergeCell}),t}(l.KernelAbstractCommand);t.default=f},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mergeCell=void 0;var o=r(3453),a=r(3453),i=r(4890),u=n(r(3724)),l=r(3767);function c(e,t,r){s(r)||r.children.forEach((function(r){e.appendChild(t,r)}))}function s(e){var t=e.children;return 1===t.length&&!t[0].attrs.alignment&&a.NodeUtil.isLikeEmptyElement(t[0])}t.mergeCell=function(e,t){var r=t.ranges,n=r.map((function(e){return a.NodeUtil.closest(e.start.node,o.Category.TableCell)})),f=n[0],d=f.parentNode.parentNode,p=(0,l.getTableQueueStartAndEnd)(e,d);s(f)&&e.removeChild(f,f.firstChild);for(var h=f.parentNode.offset,y=h,b=0,m=1,v=n.length;m<v;m++){var g=a.NodeUtil.closest(r[m].start.node,o.Category.TableCell),_=g.attrs,w=_.colSpan,O=void 0===w?1:w,E=_.rowSpan,P=void 0===E?1:E,j=g.parentNode.offset;y=Math.max(j+P-1,y),j===h&&(b+=O),c(e,f,g),e.removeChild(g.parentNode,g)}return y>h&&e.setAttribute(f,"rowSpan",y-h+1),b>0?e.setAttribute(f,"colSpan",(f.attrs.colSpan||1)+b):p&&y>h&&y>p.startRow&&(0,l.flushQueueNoToTableNode)(e,d,Math.min(h,p.startRow)),(0,i.resetPosition)(e,d),u.default.verify(d),e.selectNodeContents(f)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetPosition=void 0;var n=r(3453),o=r(3454);function a(e,t,r,n){e[t]||(e[t]=[]);for(var a=r;a<n;a++)o.assert.fatal(1!==e[t][a],"plugins/table/src/kernel/commands/helpers/reset-position.ts:65"),e[t][a]=1}t.resetPosition=function(e,t){o.assert.fatal(t.hasCategory(n.Category.Table),"plugins/table/src/kernel/commands/helpers/reset-position.ts:6");var r=[];t.children.forEach((function(t){!function(e,t,r){var n=r.offset;t[n]||(t[n]=[]);var o=0;r.children.forEach((function(r){o=function(e,t){for(var r=t,n=e.length;r<n;r++)if(1!==e[r])return r;return e.length}(t[n],0);var i=r.attrs,u=i.rowSpan,l=void 0===u?1:u,c=i.colSpan,s=void 0===c?1:c;e.setAttribute(r,"col",o),a(t,n,o,o+s);for(var f=1;f<l;f++)a(t,n+f,o,o+s);o+=s}))}(e,r,t)}))}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3457),l=r(3467),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);o&&o.isConnected&&o.hasCategory(a.Category.Table)?(i.PositionUtil.insertNodes(n,r,[o.parentNode]),n.setSelection(n.selectNode(o)),e.commitJob(n)):e.cancelJob(n)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.moveTable}),t}(u.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3467),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){r=Array.isArray(r)?r:[r];var o=e.newJob(),i=o.getNodeById(t);return!!(null==i?void 0:i.hasCategory(a.Category.Table))&&(n=Number.parseInt(n+"",10),r.forEach((function(e){o.setAttribute(i.children[e],"height",n)})),e.commitJob(o),!0)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.tableRowHeight}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3457),l=a(r(3843)),c=r(4894),s=r(3467),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return l.default.isInTable(t)&&l.default.isSelectRow(t)?i.Command.NOT_EXECUTED:i.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob();if(this.getState(r)===i.Command.UNAVAILABLE)return e.cancelJob(r),!1;var n=r.getSelection(),o=i.NodeUtil.closest(n.firstRange.commonAncestorContainer,i.Category.Table);return!Number.isInteger(t)||t<0||t>o.attrs.rowCount?(e.cancelJob(r),!1):((0,c.moveRow)(r,n,t),e.commitJob(r),!0)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.tableRowMoveTo}),t}(u.KernelAbstractCommand);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.moveRow=void 0;var n=r(3453),o=r(3454);t.moveRow=function(e,t,r){var a=n.NodeUtil.closest(t.firstRange.commonAncestorContainer,n.Category.Table);o.assert.fatal(a,"plugins/table/src/kernel/commands/helpers/move-row.ts:16");var i=a.attrs.rowCount,u=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;t.ranges.forEach((function(e){var t=n.NodeUtil.closest(e.commonAncestorContainer,n.Category.TableCell).parentNode.offset;u=Math.min(u,t),l=Math.max(l,t)}));var c=a.children.slice(u,l+1);if(r!==i){var s=a.children[r];o.assert.fatal(s,"plugins/table/src/kernel/commands/helpers/move-row.ts:45"),c.forEach((function(t){e.insertBefore(a,t,s)}))}else c.forEach((function(t){e.appendChild(a,t)}))}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3453),l=r(3457),c=r(3467),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection(),r=t.ranges;return i.TableSelectionUtil.isInTableHead(t)?u.Command.UNAVAILABLE:t.isTableSelection||u.NodeUtil.closest(r[0].commonAncestorContainer,i.Category.TableCell)?u.Command.NOT_EXECUTED:u.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection().firstRange.commonAncestorContainer,r=u.NodeUtil.closest(t,i.Category.TableCell);return r&&r.attrs.cellBgColor||null}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o=e.newJob();if(this.getState(o)===u.Command.UNAVAILABLE)return e.cancelJob(o),!1;var l=o.getSelection();try{for(var c=a(l.ranges),s=c.next();!s.done;s=c.next()){var f=s.value.commonAncestorContainer.closest(i.Category.TableCell);if(!f)return e.cancelJob(o),!1;t?o.setAttribute(f,"cellBgColor",t):o.removeAttribute(f,"cellBgColor")}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return o.setSelection(l),e.commitJob(o),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.tableCellBgColor}),t}(l.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3561),c=r(3467),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){i.assert.fatal(t,"plugins/table/src/kernel/commands/toggle-width-mode.ts:20");var r=e.getNodeById(t);return i.assert.fatal(r,"plugins/table/src/kernel/commands/toggle-width-mode.ts:24"),this._getValue(r)}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=null),i.assert.fatal(t,"plugins/table/src/kernel/commands/toggle-width-mode.ts:30");var n=e.newJob(),o=n.getNodeById(t);if(!(null==o?void 0:o.hasCategory(a.Category.Table)))return e.cancelJob(n),!1;if(r===l.WIDTH_MODE_CONTAIN||r===l.WIDTH_MODE_NORMAL)n.setAttribute(o,"widthMode",r);else{var u=this._getValue(o);n.setAttribute(o,"widthMode",u===l.WIDTH_MODE_CONTAIN?l.WIDTH_MODE_NORMAL:l.WIDTH_MODE_CONTAIN)}return e.commitJob(n),!0}}),Object.defineProperty(t.prototype,"_getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;return(null===(t=e.attrs)||void 0===t?void 0:t.widthMode)===l.WIDTH_MODE_CONTAIN?l.WIDTH_MODE_CONTAIN:l.WIDTH_MODE_NORMAL}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.tableToggleWidthMode}),t}(u.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3454),l=r(3457),c=r(4898),s=r(3467),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection().ranges;if(1!==t.length)return i.Command.UNAVAILABLE;var r=i.NodeUtil.closest(t[0].commonAncestorContainer,a.Category.TableCell);return r&&(r.attrs.colSpan>1||r.attrs.rowSpan>1)?i.Command.NOT_EXECUTED:i.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob();if(this.getState(t)===i.Command.UNAVAILABLE)return e.cancelJob(t),!1;var r=t.getSelection(),n=i.NodeUtil.closest(r.firstRange.commonAncestorContainer,a.Category.TableCell);return u.assert.fatal(n,"plugins/table/src/kernel/commands/ummerge-cell.ts:52"),(0,c.unmergeCell)(t,n),e.commitJob(t),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.tableUnmergeCell}),t}(l.KernelAbstractCommand);t.default=f},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.unmergeCell=void 0;var o=r(3454),a=n(r(3724)),i=r(3723);function u(e,t,r,n){if(o.assert.fatal(!n.isConnected,"plugins/table/src/kernel/commands/helpers/unmerge-cell.ts:64"),0===r)return e.prependChild(t,n),void o.assert.fatal(0===n.offset,"plugins/table/src/kernel/commands/helpers/unmerge-cell.ts:69");for(var a=t.children[r-1]||t.lastChild;a;){if(a.attrs.col<r)return void e.insertAfter(t,n,a);a=a.previousSibling}e.prependChild(t,n)}t.unmergeCell=function(e,t){var r=t.parentNode.parentNode;o.assert.fatal(r,"plugins/table/src/kernel/commands/helpers/unmerge-cell.ts:9");var n=a.default.getLayout(r),l=t.attrs,c=l.rowSpan,s=void 0===c?1:c,f=l.colSpan,d=void 0===f?1:f,p=l.col,h=t.parentNode.offset;e.removeAttribute(t,"colSpan"),e.removeAttribute(t,"rowSpan"),o.assert.fatal(s>1||d>1,"plugins/table/src/kernel/commands/helpers/unmerge-cell.ts:26");for(var y=0;y<s;y++)for(var b=h+y,m=n[b],v=r.children[b],g=0;g<d;g++){var _=p+g,w=m[_];0===y&&0===g?o.assert.fatal(w.type===a.default.TYPE_NODE,"plugins/table/src/kernel/commands/helpers/unmerge-cell.ts:39"):(o.assert.fatal(w.type===a.default.TYPE_REF,"plugins/table/src/kernel/commands/helpers/unmerge-cell.ts:41"),u(e,v,_,e.createElement(i.TABLE_CELL,{col:_})))}a.default.verify(r)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3453),u=r(3454),l=r(3457),c=r(3927),s=r(3467),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection(),r=t.ranges;return t.isTableSelection||i.NodeUtil.closest(r[0].commonAncestorContainer,a.Category.TableCell)?i.Command.NOT_EXECUTED:i.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection(),r=t.ranges;if(t.isTableSelection){for(var n=null,o=0,l=r.length;o<l;o++){var c=i.NodeUtil.closest(r[o].commonAncestorContainer,a.Category.TableCell);u.assert.fatal(c,"plugins/table/src/kernel/commands/vertical-align.ts:54");var s=c.attrs.verticalAlign||"top";if(null===n)n=s;else if(n!==s)return null}return n||"top"}var f=i.NodeUtil.closest(r[0].commonAncestorContainer,a.Category.TableCell);return f?f.attrs.verticalAlign||"top":null}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob();if(this.getState(r)===i.Command.UNAVAILABLE)return e.cancelJob(r),!1;var n,o=r.getSelection();return n=c.VERTICAL_ALIGN.includes(t)?i.SelectionUtil.setAttribute(r,o,"verticalAlign",t):i.SelectionUtil.removeAttribute(r,o,"verticalAlign"),r.setSelection(n),e.commitJob(r),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.tableVerticalAlign}),t}(l.KernelAbstractCommand);t.default=f},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3458)),a=r(4032),i=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){(0,a.fixTableINode)(t)||o.default.removeChild(e.parentNode,t)}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),e}();t.default=i},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3454),u=a(r(3458)),l=r(3766),c="#REF",s=function(){function e(){Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_maxColCount",{enumerable:!0,configurable:!0,writable:!0,value:0})}return Object.defineProperty(e.prototype,"addRow",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._matrix[e]||(this._matrix[e]=[])}}),Object.defineProperty(e.prototype,"addCellNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this._getCellSpan(t),n=r.rowSpan,o=r.colSpan,a=this._addNodeToMatrix(e,t);u.default.setAttribute(t,"col",a);for(var i=0;i<n;i++){for(var l=e+i,s=0;s<o;s++)if(0!==i||0!==s){var f=a+s;this._matrix[l]||(this._matrix[l]=[]),this._matrix[l][f]={type:c,row:e,col:a}}this._maxColCount=Math.max(this._maxColCount,this._matrix[l].length)}}}),Object.defineProperty(e.prototype,"fix",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r=e.children||[],a=this._maxColCount;if(!a||!r.length)return{rowCount:0,colCount:0};this._removeEmptyRow(e);var s=this._matrix,f=o([],n((null===(t=null==e?void 0:e.attrs)||void 0===t?void 0:t.colWidths)||[]),!1);i.assert.fatal(a>0,"plugins/table/src/kernel/helpers/table-matrix.ts:94"),s.forEach((function(t,n){var o,l,s;r[n]||u.default.appendChild(e,u.default.createElement("tr"));for(var d=-1,p=0,h=a;p<h;p++){var y=t[p];if((null==y?void 0:y.type)!==c)if(d++,y){if(null===(l=y.attrs)||void 0===l?void 0:l.width){var b=y.attrs.width/((null===(s=y.attrs)||void 0===s?void 0:s.colSpan)||1);f[p]=Math.max(f[p]||0,b)}}else i.assert.fatal(!(null===(o=r[n].children)||void 0===o?void 0:o[p]),"plugins/table/src/kernel/helpers/table-matrix.ts:117"),u.default.setChildByOffset(r[n],d,u.default.createElement("td",{col:p}))}}));for(var d=Math.max(Math.floor(l.DEFAULT_TABLE_WIDTH/a),40),p=0;p<a;p++)f[p]||(f[p]=d);return f.length>a&&(f.length=a),{colCount:a,colWidths:f,rowCount:this._matrix.length}}}),Object.defineProperty(e.prototype,"_removeEmptyRow",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=[];this._matrix=this._matrix.map((function(r,n){var o;return 0===r.length?((null===(o=e.children)||void 0===o?void 0:o[n])&&t.push(e.children[n]),null):r})).filter(Boolean),t.forEach((function(t){u.default.removeChild(e,t)}))}}),Object.defineProperty(e.prototype,"_addNodeToMatrix",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!this._matrix[e])return this._matrix[e]=[t],0;for(var r=this._matrix[e],n=0,o=r.length;n<o;n++)if(!r[n])return r[n]=t,n;return r.push(t),r.length-1}}),Object.defineProperty(e.prototype,"_getCellSpan",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.attrs;return{colSpan:(null==t?void 0:t.colSpan)||1,rowSpan:(null==t?void 0:t.rowSpan)||1}}}),e}();t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3548),u=a(r(4903)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.stop();var r=new u.default(e,t).parse();r&&e.setNode(r)}}),t}(i.LakeNodeReader);t.default=l},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3458)),a=r(3723),i=r(4032),u=function(){function e(e,t){Object.defineProperty(this,"_readContext",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_tableModelNode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_tableNode",{enumerable:!0,configurable:!0,writable:!0,value:null})}return Object.defineProperty(e.prototype,"parse",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this._tableModelNode,r=t.attrs,n=t.children;if(n)return this._tableNode=o.default.createElement(a.TABLE,{id:r.id,borderVisible:"true"!==r["hide-border"],spacing:"false"!==r.margin,widthMode:r["width-mode"],rowHead:r["row-head"],colHead:r["col-head"],fitWidth:"true"===r["fit-width"]}),n.forEach((function(t){var r=t.name;"colgroup"===r?e._parseColGroup(t):"tbody"===r||"thead"===r?t.children&&t.children.forEach((function(t){"tr"===t.name&&e._parseRow(t)})):"tr"===r&&e._parseRow(t)})),(0,i.fixTableINode)(this._tableNode)?this._tableNode:null}}),Object.defineProperty(e.prototype,"_parseColGroup",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e.children){var t=e.children.filter((function(e){return"col"===e.name})).map((function(e){var t=e.attrs,r=void 0===t?{}:t,n=Number.parseInt(r.width,10);return n>0?n:null}));o.default.setAttribute(this._tableNode,"colWidths",t)}}}),Object.defineProperty(e.prototype,"_parseRow",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,r=e.style,n=e.children,i=e.attrs,u={};r&&r.height&&r.height.endsWith("px")&&(u.height=parseInt(r.height,10)||33),(i["data-lake-id"]||i.id)&&(u.id=i["data-lake-id"]||i.id);var l=o.default.createElement(a.TABLE_ROW,u);n&&n.forEach((function(e){"th"!==e.name&&"td"!==e.name||t._parseCell(l,e)})),o.default.appendChild(this._tableNode,l)}}),Object.defineProperty(e.prototype,"_parseCell",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r={},n=this._readContext.getChildContext(),i=t.attrs,u=t.style;u&&(u.background&&u.background.indexOf(" ")<0&&(r.cellBgColor=u.background),u["background-color"]&&(r.cellBgColor=u["background-color"]),u["vertical-align"]&&(r.verticalAlign=u["vertical-align"]),u["text-align"]&&n.setAttr("alignment",u["text-align"])),i.colspan>1&&(r.colSpan=Number.parseInt(i.colspan,10)),i.rowspan>1&&(r.rowSpan=Number.parseInt(i.rowspan,10)),(i["data-lake-id"]||i.id)&&(r.id=i["data-lake-id"]||i.id);var l=o.default.createElement(a.TABLE_CELL,r);o.default.appendChild(e,l),t.children&&o.default.setChildren(l,n.readByNodes(t.children))}}),e}();t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.stop(),t.children&&t.children.forEach((function(t){e.newGroup(),t.children&&t.children.forEach((function(t){e.newGroup(),t.children&&t.children.forEach((function(t){e.write(t)})),e.closeGroup()})),e.closeGroup()}))}}),t}(a(r(3639)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(4028)),u=r(3467),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if((r=parseInt(r,10))&&!(r<=0))if("height"!==t){if("td"===n.name||"th"===n.name)switch(t){case"colspan":r>0&&e.addAttr("colSpan",r);break;case"rowspan":r>0&&e.addAttr("rowSpan",r);break;case"width":"td"===n.name&&e.addAttr("width",r);break;default:return}}else{if("tr"!==n.name)return;e.addAttr("height",r)}}}),Object.defineProperty(t,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[u.pluginRegister.attr.colspan,u.pluginRegister.attr.rowspan,u.pluginRegister.attr.width,u.pluginRegister.attr.height]}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=a(r(3494)),l=r(3467),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setNode(i.default.createElement("td"))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[l.pluginRegister.node.th,l.pluginRegister.node.td]}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=a(r(3494)),l=r(4908),c=r(4032),s=r(3766),f=r(3467),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n;if(t=(0,l.formatTableHTMLNode)(t),e.setNode(i.default.createElement("table")),"colgroup"===(null===(n=null===(r=t.children)||void 0===r?void 0:r[0])||void 0===n?void 0:n.name)){var o=this._parseColWidths(t.children[0]);e.addAttr("colWidths",o)}}}),Object.defineProperty(t.prototype,"leaveNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getNode();t&&!(0,c.fixTableINode)(t)&&e.parentNode&&t&&i.default.removeChild(e.parentNode,t)}}),Object.defineProperty(t.prototype,"_parseColWidths",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return(e.children||[]).map((function(e){var t;return"col"!==e.name?null:parseInt(null===(t=null==e?void 0:e.attrs)||void 0===t?void 0:t.width,10)||s.DEFAULT_COL_WIDTH})).filter(Boolean)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[f.pluginRegister.node.table]}),t}(u.default);t.default=d},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.formatTableHTMLNode=void 0;var o=n(r(3599)),a=function(){function e(e){Object.defineProperty(this,"_tableNode",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rows",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_cols",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_current",{enumerable:!0,configurable:!0,writable:!0,value:null}),this._tableNode=e}return Object.defineProperty(e.prototype,"_addNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.name;if("table"!==t&&"tbody"!==t&&"thead"!==t&&"tfoot"!==t)return"tr"===t?(i(e),this._rows.push(e),void(this._current=e)):"td"===t||"th"===t?(this._current||(this._current=o.default.createElement("tr"),this._rows.push(this._current)),void u(this._current,e)):void("colgroup"!==t?"col"===t&&(this._cols.push(e),i(e)):i(e));i(e)}}),Object.defineProperty(e.prototype,"walk",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this._tableNode;this._walk(e.children),e.children=[];var t=o.default.createElement("colgroup");return u(e,t),this._cols.forEach((function(e){u(t,e)})),this._rows.forEach((function(t){u(e,t)})),e}}),Object.defineProperty(e.prototype,"_walk",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;e&&Array.from(e).forEach((function(e){e&&(t._addNode(e),t._walk(e.children))}))}}),e}();function i(e){var t,r=e.parent,n=null===(t=null==r?void 0:r.children)||void 0===t?void 0:t.indexOf(e);void 0!==n&&n>-1&&r.children.splice(n,1),e.parent=null}function u(e,t){i(t),e.children||(e.children=[]),e.children.push(t),t.parent=e}t.formatTableHTMLNode=function(e){return"table"!==e.name?e:new a(e).walk()}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=a(r(3494)),l=r(3467),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setNode(i.default.createElement("tr"))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[l.pluginRegister.node.tr]}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3470)),u=r(3467),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,a,i=null===(r=t.attrs)||void 0===r?void 0:r.borderVisible,u=null===(n=t.attrs)||void 0===n?void 0:n.colWidths,l={};e.isInlineMode()&&(l.tableLayout="fixed",l.borderCollapse="collapse",l.border=!1!==i?"1px solid #d9d9d9":"none");var c=u.reduce((function(e,t){return e+t}),0),s=[];if(e.isExport()){u.forEach((function(e,t){s[t]=parseFloat((e/c*100).toFixed(2))}));var f=e.getDocMaxWidth();l.width=f&&c<f?c+"px":"100%"}else l.width=c+"px";var d=e.createElement("table",{className:["ne-table",!1===i?"no-border":null].filter(Boolean),style:l}),p=e.createElement("tbody");e.appendChild(d,p),e.setNode(d,p),e.setState("borderVisible",!1!==i),e.setState("colWidths",u),e.setState("colPercentWidths",s),e.setState("rowHead",null===(o=t.attrs)||void 0===o?void 0:o.rowHead),e.setState("colHead",null===(a=t.attrs)||void 0===a?void 0:a.colHead)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[u.pluginRegister.node.table]}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3562)),u=r(3467),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if(r)switch(t){case"height":return void e.addStyle(t,"".concat(r,"px"));case"colSpan":e.addAttr("colspan",r);break;case"rowSpan":e.addAttr("rowspan",r);break;case"cellBgColor":e.addStyle("background-color",r)}}}),Object.defineProperty(t,"AttrNames",{enumerable:!0,configurable:!0,writable:!0,value:[u.pluginRegister.attr.height,u.pluginRegister.attr.colSpan,u.pluginRegister.attr.rowSpan,u.pluginRegister.attr.cellBgColor]}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=i(r(3470)),l=r(3467),c=r(4214),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r={};e.isInlineMode()&&e.getState("borderVisible")&&(r.border="1px solid #d9d9d9"),this.writeRowHead(e,r),this.writeColHead(e,r),e.setNode(e.createElement("td",{style:r,attrs:{width:f(t,e)}}))}}),Object.defineProperty(t.prototype,"writeRowHead",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o=e.getState("rowHead");if(t&&"string"==typeof o&&(null===(n=null===(r=e._parentContext)||void 0===r?void 0:r._parentContext)||void 0===n?void 0:n._children[0])===e._parentContext){var a=this.getTableHeadColor(o)||{},i=a.bg,u=a.text;"string"==typeof i&&"string"==typeof u&&(t.backgroundColor=i,t.color=u)}}}),Object.defineProperty(t.prototype,"writeColHead",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o=e.getState("colHead");if(t&&0===(null===(r=e.inode.attrs)||void 0===r?void 0:r.col)&&"string"==typeof o&&(null===(n=e._parentContext)||void 0===n?void 0:n._children[0])===e){var a=this.getTableHeadColor(o)||{},i=a.bg,u=a.text;"string"==typeof i&&"string"==typeof u&&(t.backgroundColor=i,t.color=u)}}}),Object.defineProperty(t.prototype,"getTableHeadColor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=a(e.split(";"),2),r=t[0],n=t[1];if("string"!=typeof r||"string"!=typeof n)return null;var o=(0,c.getColorArray)(r)[0],i=(0,c.getColorArray)(n)[0];return"string"!=typeof o||"string"!=typeof i?null:{bg:o,text:i}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[l.pluginRegister.node.td]}),t}(u.default);function f(e,t){var r,n,o=t.getState("colWidths"),a=t.getState("colPercentWidths");if(o&&o.length){for(var i=null===(r=e.attrs)||void 0===r?void 0:r.col,u=(null===(n=e.attrs)||void 0===n?void 0:n.colSpan)||1,l=0,c=t.isExport()?a:o,s=0;s<u;s++)l+=c[i+s]||0;return t.isExport()&&(l="".concat(l,"%")),l}}t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3470)),u=r(3467),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.createElement("tr",{style:{height:"33px"}});e.setNode(t)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[u.pluginRegister.node.tr]}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3499),i=r(3467),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setVirtual((function(){}))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[i.pluginRegister.node.tableHole]}),t}(a.LakeNodeWriter);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3499),i=r(3467),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.name,n=t.attrs,o=void 0===n?{}:n;if("table"===r){var a=e.createElement(r),i=function(e,t){var r=t.attrs.colWidths,n=e.createElement("colgroup");return r.forEach((function(t){e.appendChild(n,e.createElement("col",{attrs:{width:t}}))})),n}(e,t),u=e.createElement("tbody");e.appendChild(a,i),e.appendChild(a,u),e.setNode(a,u),e.addClassName("lake-table")}else e.setNode(e.createElement(r));!function(e,t){var r=t.colWidths,n=t.height,o=t.cellBgColor,a=t.verticalAlign,i=t.borderVisible,u=t.rowSpan,l=t.colSpan,c=t.spacing,s=t.widthMode,f=t.rowHead,d=t.colHead,p=t.fitWidth;r&&e.setStyle("width",r.reduce((function(e,t){return e+t}),0)+"px");n&&e.setStyle("height","".concat(n,"px"));o&&e.setStyle("background-color",o);a&&e.setStyle("vertical-align",a);u&&e.setAttr("rowSpan",u);l&&e.setAttr("colSpan",l);!1===i&&(e.addClassName("lake-no-border"),e.setAttr("hide-border",!0));void 0!==c&&e.setAttr("margin",!1!==c);void 0!==s&&e.setAttr("width-mode",s);f&&e.setAttr("row-head",f);d&&e.setAttr("col-head",d);p&&e.setAttr("fit-width",p)}(e,o)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[i.pluginRegister.node.table,i.pluginRegister.node.tr,i.pluginRegister.node.td]}),t}(a.LakeNodeWriter);t.default=u},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.splitTable=t.TableMarkdownWriter=void 0;var i=r(3453),u=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.getAligns(t).map((function(e){switch(e){case"center":return":---:";case"right":return"---:";case"left":return":---";default:return"---"}})).join(" | ");return e.insertAt("| ".concat(r," |\n"),1),e.newLine(),!1}}),Object.defineProperty(e.prototype,"preWrite",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return l(t),!0}}),Object.defineProperty(e.prototype,"getAligns",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r=this,n=e.children;return(null==n?void 0:n.length)&&(null===(t=n[0].children)||void 0===t?void 0:t.length)?n[0].children.map((function(e,t){var o=r.getTdAlign(e);return n.every((function(e){var n,a=r.getTdAlign(null===(n=e.children)||void 0===n?void 0:n[t]);return a===o||!a}))&&o||"distributed"})):[]}}),Object.defineProperty(e.prototype,"getTdAlign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r;if(!e||!(null===(t=e.children)||void 0===t?void 0:t.length))return null;var n=null===(r=e.children[0].attrs)||void 0===r?void 0:r.alignment;return["center","left","right"].includes(n)?n:"distributed"}}),e}();function l(e){var t=e.children;null==t||t.forEach((function(e,r){var u=e.children;null==u||u.forEach((function(e,l){var c,s,f,d,p=null===(c=e.attrs)||void 0===c?void 0:c.rowSpan;for(null===(s=e.attrs)||void 0===s||delete s.rowSpan;p&&--p;)t[r+p]||(t[r+p]={type:i.NodeType.Element,name:"tr",attrs:{},children:[]}),t[r+p].children.splice(l,0,n(n({},e),{attrs:n({},e.attrs),children:[]}));var h=null===(f=e.attrs)||void 0===f?void 0:f.colSpan;null===(d=e.attrs)||void 0===d||delete d.colSpan,h&&u.splice.apply(u,a([l+1,0],o(new Array(h-1).fill(n(n({},e),{children:[]}))),!1))}))}))}t.TableMarkdownWriter=u,t.splitTable=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrMarkdownWriter=void 0;var n=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e.append("|\n"),!1}}),e}();t.TrMarkdownWriter=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TdMarkdownWriter=void 0;var n=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e.setKeepInline(!0),e.lastChild((function(e){e.setWrapToString((function(e){return e.replace(/<br\/>$/g," ")}))})),!1}}),Object.defineProperty(e.prototype,"preWrite",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e.append("| "),!0}}),e}();t.TdMarkdownWriter=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.RowHeadCommand=void 0;var a=r(3453),i=r(3457),u=r(3467),l=r(3767),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);if(o&&o.isConnected&&o.isElement()&&o.hasCategory(a.Category.Table)){var i=(0,l.getTableQueueStartAndEnd)(n,o);r&&"string"==typeof r.bg&&"string"==typeof r.text?(this.setRowHead(n,o,r),0===(null==i?void 0:i.startRow)&&(0,l.flushQueueNoToTableNode)(n,o,1,i.startRow)):(this.removeRowHead(n,o),1===(null==i?void 0:i.startRow)&&(0,l.flushQueueNoToTableNode)(n,o,0)),e.commitJob(n)}else e.cancelJob(n)}}),Object.defineProperty(t.prototype,"removeRowHead",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!t.hasAttribute("rowHead"))return e.getSelection();e.removeAttribute(t,"rowHead")}}),Object.defineProperty(t.prototype,"setRowHead",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=r.bg,o=r.text;e.setAttribute(t,"rowHead","".concat(n,";").concat(o))}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.tableRowHead}),t}(i.KernelAbstractCommand);t.RowHeadCommand=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ColHeadCommand=void 0;var a=r(3453),i=r(3457),u=r(3467),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);o&&o.isConnected&&o.isElement()&&o.hasCategory(a.Category.Table)?(r&&"string"==typeof r.bg&&"string"==typeof r.text?this.setColHead(n,o,r):this.removeColHead(n,o),e.commitJob(n)):e.cancelJob(n)}}),Object.defineProperty(t.prototype,"removeColHead",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!t.hasAttribute("colHead"))return e.getSelection();e.removeAttribute(t,"colHead")}}),Object.defineProperty(t.prototype,"setColHead",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=r.bg,o=r.text;e.setAttribute(t,"colHead","".concat(n,";").concat(o))}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.tableColHead}),t}(i.KernelAbstractCommand);t.ColHeadCommand=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3453),l=r(3457),c=r(3465),s=r(3467),f=r(3767),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return t.rangeCount>1||u.NodeUtil.closest(t.firstRange.commonAncestorContainer,i.Category.Table)?c.COMMAND_NOT_EXECUTED:u.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection(),r=u.NodeUtil.closest(t.firstRange.commonAncestorContainer,i.Category.Table);return r?(0,f.getTableQueueStartAndEnd)(e,r):c.COMMAND_NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n;void 0===t&&(t=1);var o=e.newJob();if(this.getState(o)===c.COMMAND_UNAVAILABLE)return e.cancelJob(o),!1;var l=o.getSelection(),s=u.NodeUtil.closest(l.firstRange.commonAncestorContainer,i.Category.Table);if(!s||t>s.children.length)return e.cancelJob(o),!1;var d=(0,f.getTableQueueStartAndEnd)(o,s);if((0,f.flushQueueNoToTableNode)(o,s,t-1),d&&d.startRow<t-1)for(var p=d.startRow;p<t-1;p++){var h=s.children[p].children[0];if(0===h.attrs.col)try{for(var y=(r=void 0,a(h.children.slice(0))),b=y.next();!b.done;b=y.next()){var m=b.value;o.removeChild(h,m)}}catch(e){r={error:e}}finally{try{b&&!b.done&&(n=y.return)&&n.call(y)}finally{if(r)throw r.error}}}return e.commitJob(o),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:s.pluginRegister.command.tableSetQueueNo}),t}(l.KernelAbstractCommand);t.default=d},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3467),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob(),n=r.getNodeById(t);return!!(null==n?void 0:n.hasCategory(a.Category.Table))&&(n.attrs.fitWidth?r.removeAttribute(n,"fitWidth"):r.setAttribute(n,"fitWidth",!0),e.commitJob(r),!0)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.tableColumnAdaptation}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3465),l=r(3926),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.getSelection().rangeCount>1?u.COMMAND_UNAVAILABLE:u.COMMAND_NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.getState(e)===u.COMMAND_UNAVAILABLE?null:a.RangeUtil.getTextContent(e,e.getSelection().firstRange)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.text}),t}(i.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._kernel=null}}),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._kernel.readData("text/plain",e,t)}}),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.document.getINode(t);return this._kernel.writeData("text/plain",r,t)}}),t}(r(3453).DataSource);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TextDataSourceKernelService=void 0;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"registerTextReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.plugin._readerManager.register(e)}}),Object.defineProperty(t.prototype,"registerTextWriter",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.plugin._textWriterManager.register(e,t)}}),t}(r(3601).ITextDataSourceKernelService);t.TextDataSourceKernelService=a},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3458)),a=function(){function e(){Object.defineProperty(this,"_readers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._readers}}),Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._readers.push(e)}}),Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){for(var n=this._readers,a=t.replace(/[\u200B\uFEFF]/g,"").replace(/\r\n/g,"\n").replace(/\r/g,"").split("\n").map((function(e){if(!(null==r?void 0:r.forceText))for(var a=0,i=n.length;a<i;a++){var u=n[a].read(e,{originText:t});if(u)return u}return[o.default.createTextNode(e)]})),i=[],u=0,l=a.length;u<l;u++)if(0===u||u===l-1&&l>2)a[u].forEach((function(e){i.push(e)}));else{var c=o.default.createElement("p");o.default.setChildren(c,a[u]),i.push(c)}return o.default.createFragment(i)}}),e}();t.default=a},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(4928)),a=r(4929),i=function(){function e(){Object.defineProperty(this,"_writers",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){delete this._writers}}),Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=new o.default(t);return(0,a.toText)(this._writers,r,e,t),r.toString()}}),Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;Array.isArray(e)?e.forEach((function(e){r._writers[e]=t})):this._writers[e]=t}}),e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454);function o(e){var t=[];return t.context=e,t}var a=function(){function e(e){Object.defineProperty(this,"_rootNode",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_rootBuffer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_currentBuffer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._rootBuffer=o({parent:null,offset:-1,index:-1}),this._currentBuffer=this._rootBuffer}return Object.defineProperty(e.prototype,"rootNode",{get:function(){return this._rootNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"append",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._currentBuffer.context;-1===t.index&&(t.index=0),this._currentBuffer[t.index]=(this._currentBuffer[t.index]||"")+e}}),Object.defineProperty(e.prototype,"newline",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._currentBuffer.context.index++,this._currentBuffer[this._currentBuffer.context.index]=e||""}}),Object.defineProperty(e.prototype,"newGroup",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._currentBuffer.context.index++;var e=o({parent:this._currentBuffer,offset:this._currentBuffer.context.index,index:-1});this._currentBuffer[this._currentBuffer.context.index]=e,this._currentBuffer=e}}),Object.defineProperty(e.prototype,"closeGroup",{enumerable:!1,configurable:!0,writable:!0,value:function(){n.assert.fatal(this._currentBuffer.context.parent,"plugins/text-data-source/src/kernel/lib/text-builder.ts:70"),this._currentBuffer=this._currentBuffer.context.parent}}),Object.defineProperty(e.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){return i(this._rootBuffer)}}),e}();function i(e,t){return void 0===t&&(t="\n"),e.map((function(e){return"string"==typeof e?e:i(e,"\n"===t?"\t":"\n")})).join(t)}t.default=a},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.toText=void 0;var o=r(3453),a=r(3454),i=r(3517),u=n(r(3458)),l=r(4930);t.toText=function e(t,r,n,c){var s,f;if(u.default.isFragmentNode(c))null===(s=c.children)||void 0===s||s.forEach((function(o){return e(t,r,n,o)}));else{var d=n.getNodeSchema(c.name);if(d)if(d.type!==i.NodeType.Text){var p=t[c.name];if(p){var h=new l.TextWriterContext(t,r,n,e);return p.write(h,c),void(h.isStop()||u.default.isElementNode(c)&&c.children&&c.children.forEach((function(o){e(t,r,n,o)})))}if(d.type===i.NodeType.Element)return d.category.includes(o.Category.Block)&&r.newline(),void(c.children&&c.children.forEach((function(o){return e(t,r,n,o)})));a.assert.fatal(d.type===i.NodeType.Card,"plugins/text-data-source/src/kernel/lib/to-text.ts:64"),d.category.includes(o.Category.BlockCard)&&r.newline()}else r.append((null===(f=c.data)||void 0===f?void 0:f.replace(/\u00a0/g," "))||"")}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextWriterContext=void 0;var n=function(){function e(e,t,r,n){Object.defineProperty(this,"_writers",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_builder",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_toText",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}return Object.defineProperty(e.prototype,"rootNode",{get:function(){return this._builder.rootNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._toText(this._writers,this._builder,this._kernel,e)}}),Object.defineProperty(e.prototype,"newline",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._builder.newline(e)}}),Object.defineProperty(e.prototype,"newGroup",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._builder.newGroup()}}),Object.defineProperty(e.prototype,"append",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._builder.append(e)}}),Object.defineProperty(e.prototype,"closeGroup",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._builder.closeGroup()}}),Object.defineProperty(e.prototype,"isStop",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._stopped}}),Object.defineProperty(e.prototype,"stop",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._stopped=!0}}),e}();t.TextWriterContext=n},function(e,t,r){"use strict";var n,o,a=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3453),l=i(r(3850)),c=r(3928),s=i(r(4932)),f=i(r(4933)),d=i(r(4934)),p=r(4935),h=i(r(4936)),y=i(r(4937)),b=r(4938),m=r(4939),v=r(3855),g=r(3918),_=((o={})[v.TYPOGRAPHY_TRADITIONAL]=m.TRADITIONAL_TYPOGRAPHY,o[v.TYPOGRAPHY_CLASSIC]=b.CLASSIC_TYPOGRAPHY,o),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.kernel.requireService(l.default.ID),e.extendMethods({isParagraphSpacingRelax:function(){return t.getParagraphSpacing()===c.PARAGRAPH_SPACING_RELAX},getParagraphSpacing:function(){return t.getParagraphSpacing()},getTypographyName:function(){return t.getTypographyName()},getTypographyDetail:function(){return t.getTypographyDetail()}}),this.editing.on("metachange",(function(e,r){var n=null==e?void 0:e.typography,o=null==r?void 0:r.typography;n&&(t.kernel.emitPluginEvent("typographyChange",{current:n,old:o}),t.kernel.emitEvent("typographyChange",n,o))}))}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.kernel.requireService(l.default.ID);e.registerMeta("typography",new h.default),e.registerMeta("paragraphSpacing",new f.default)}}),Object.defineProperty(t.prototype,"getParagraphSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;return(null===(e=this.kernel.getService(l.default.ID))||void 0===e?void 0:e.getMeta("paragraphSpacing"))||this.option.paragraphSpacing}}),Object.defineProperty(t.prototype,"getTypographyName",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;return this.option.mustTypography||(null===(e=this.kernel.getService(l.default.ID))||void 0===e?void 0:e.getMeta("typography"))||this.option.typography}}),Object.defineProperty(t.prototype,"getTypographyDetail",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getTypographyName();return _[e]}}),Object.defineProperty(t.prototype,"setParagraphSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e===c.PARAGRAPH_SPACING_RELAX||e===c.PARAGRAPH_SPACING_DEFAULT){var t=this.getParagraphSpacing();t!==e&&(this.kernel.requireService(l.default.ID).setMeta("paragraphSpacing",e),this.kernel.emitPluginEvent("paragraphSpacingChange",{current:e,old:t}),this.kernel.emitEvent("paragraphSpacingChange",e,t))}}}),Object.defineProperty(t.prototype,"setTypography",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e===v.TYPOGRAPHY_CLASSIC||e===v.TYPOGRAPHY_TRADITIONAL){var t=this.getTypographyName();if(t===e)return!1;this.kernel.requireService(l.default.ID).setMeta("typography",e),this.kernel.emitPluginEvent("typographyChange",{current:e,old:t}),this.kernel.emitEvent("typographyChange",e,t)}}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:g.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:y.default}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[d.default,s.default]}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:p.TypographyKernelService}),t}(u.KernelPlugin);t.default=w},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3918),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.plugin.getParagraphSpacing()}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.plugin.setParagraphSpacing(t)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.paragraphSpacing}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3854)),u=r(3928),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"needPersistent",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e===u.PARAGRAPH_SPACING_RELAX||e===u.PARAGRAPH_SPACING_DEFAULT}}),Object.defineProperty(t.prototype,"isDefault",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e===u.PARAGRAPH_SPACING_DEFAULT||void 0===e}}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3918),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(){return a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.plugin.getTypographyName()}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.plugin.setTypography(t)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.typography}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TypographyKernelService=void 0;var a=r(3928),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"getParagraphSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.plugin.getParagraphSpacing()}}),Object.defineProperty(t.prototype,"getTypographyDetail",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.plugin.getTypographyDetail()}}),Object.defineProperty(t.prototype,"getTypographyName",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.plugin.getTypographyName()}}),Object.defineProperty(t.prototype,"isParagraphSpacingRelax",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.plugin.getParagraphSpacing()===a.PARAGRAPH_SPACING_RELAX}}),Object.defineProperty(t.prototype,"setParagraphSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.plugin.setParagraphSpacing(e)}}),Object.defineProperty(t.prototype,"setTypography",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.plugin.setTypography(e)}}),t}(r(3853).ITypographyKernelService);t.TypographyKernelService=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3854)),u=r(3855),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"needPersistent",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(t.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e===u.TYPOGRAPHY_TRADITIONAL||e===u.TYPOGRAPHY_CLASSIC}}),Object.defineProperty(t.prototype,"isDefault",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e===u.TYPOGRAPHY_TRADITIONAL||void 0===e}}),t}(i.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3928),o=r(3855),a=function(){function e(e){if(Object.defineProperty(this,"_typography",{enumerable:!0,configurable:!0,writable:!0,value:o.TYPOGRAPHY_TRADITIONAL}),Object.defineProperty(this,"_paragraphSpacing",{enumerable:!0,configurable:!0,writable:!0,value:n.PARAGRAPH_SPACING_DEFAULT}),Object.defineProperty(this,"_mustTypography",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"string"==typeof e)this._setTypography(e);else{var t=e||{};t.typography&&this._setTypography(t.typography),t.paragraphSpacing&&this._setParagraphSpacing(t.paragraphSpacing),t.mustTypography&&this._setMustTypography(t.mustTypography)}}return Object.defineProperty(e.prototype,"_setMustTypography",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e!==o.TYPOGRAPHY_TRADITIONAL&&e!==o.TYPOGRAPHY_CLASSIC?this._mustTypography=void 0:this._mustTypography=e}}),Object.defineProperty(e.prototype,"_setTypography",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e!==o.TYPOGRAPHY_TRADITIONAL&&e!==o.TYPOGRAPHY_CLASSIC?this._typography=o.TYPOGRAPHY_TRADITIONAL:this._typography=e}}),Object.defineProperty(e.prototype,"_setParagraphSpacing",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e!==n.PARAGRAPH_SPACING_DEFAULT&&e!==n.PARAGRAPH_SPACING_RELAX?this._paragraphSpacing=n.PARAGRAPH_SPACING_DEFAULT:this._paragraphSpacing=e}}),Object.defineProperty(e.prototype,"typography",{get:function(){return this._typography},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paragraphSpacing",{get:function(){return this._paragraphSpacing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mustTypography",{get:function(){return this._mustTypography},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"typography"}),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLASSIC_TYPOGRAPHY=void 0,t.CLASSIC_TYPOGRAPHY={fontSize:15,color:"#262626",lineHeight:1.16,h1:28,h2:24,h3:20,h4:16,h5:14,h6:14}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRADITIONAL_TYPOGRAPHY=void 0,t.TRADITIONAL_TYPOGRAPHY={fontSize:14,color:"#262626",lineHeight:1.16,h1:28,h2:24,h3:20,h4:16,h5:14,h6:14}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=r(3453),c=u(r(3482)),s=r(3466),f=r(3493),d=r(3463),p=u(r(3845)),h=r(3519),y=r(3601),b=u(r(3929)),m=r(3768),v=u(r(4258)),g=r(4941),_=u(r(4942)),w=u(r(4943)),O=u(r(4945)),E=u(r(4946)),P=u(r(4947)),j=u(r(4948)),C=u(r(4950)),k=u(r(3635)),S=u(r(4259)),A=u(r(4951)),x=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"_markdownMatcherPattern",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=/^(?:```|···)([\w+]*)$/i.exec(e);if(!t)return null;var r=(0,g.modeMatch)(t[1]);return""===r||m.MODES.some((function(e){return e.value===r}))?t:null}}),Object.defineProperty(r,"_markdownMatcherHandler",{enumerable:!0,configurable:!0,writable:!0,value:function(e,r,n,o){var u=o.matchedGroup,c=i(u,1)[0];c=(0,g.modeMatch)(c);var s=v.default.load()||{},f=c||s.mode||m.MODES[0].value,d=b.default.createStandardCardValue(a(a({},s),{mode:f})),p=l.CardUtil.insertCardNode(e,e.newSelection([e.newRange(e.newPosition(r,0))]),t.cardName,d).cardNode;e.setSelection(e.newSelection(e.newRange(e.newPosition(p,0))))}}),r}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerBlockCard(t.cardName)}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,r,n,o,a,i,u,l,c,b,m,v=this,g=this.kernel;null===(e=g.getService(d.ILakeKernelService.ID))||void 0===e||e.registerLakeCardReader("codeblock",new E.default),null===(r=g.getService(f.IINodeReaderKernelService.ID))||void 0===r||r.registerINodeCardReader(O.default.CardName,new O.default),null===(n=g.getService(s.IHTMLKernelService.ID))||void 0===n||n.registerNodeHTMLWriter(t.cardName,new j.default),null===(o=g.getService(y.ITextDataSourceKernelService.ID))||void 0===o||o.registerTextWriter(t.cardName,new P.default),null===(a=g.getService(d.ILakeKernelService.ID))||void 0===a||a.registerLakeCardWriter(t.cardName,new C.default),null===(i=g.getService(s.IHTMLKernelService.ID))||void 0===i||i.registerPreHTMLNodeReader(_.default.NodeNames,new _.default),null===(u=g.getService(s.IHTMLKernelService.ID))||void 0===u||u.registerHTMLNodeReader(w.default.NodeNames,new w.default),null===(l=g.getService(h.IMarkdownKernelService.ID))||void 0===l||l.registerMarkdownMatcher(h.TriggerType.enter,new p.default(this.editing,this._markdownMatcherPattern,this._markdownMatcherHandler)),null===(c=g.getService(k.default.ID))||void 0===c||c.registerMarkdownReader("code",(function(e,t){return e.setNode(e.createElement("codeblock",{value:{hideToolbar:!0,mode:v.detectLanguage(t.lang),code:t.text}})),!0})),null===(b=g.getService(k.default.ID))||void 0===b||b.registerMarkdownWriter("codeblock",{write:function(e,t){var r,n,o;return e.append("```"+((null===(n=null===(r=t.attrs)||void 0===r?void 0:r.value)||void 0===n?void 0:n.mode)||"")+"\n"),e.append((null===(o=t.attrs)||void 0===o?void 0:o.value).code),e.append("\n```\n\n"),!1}}),null===(m=g.getService(S.default.ID))||void 0===m||m.registerNodeReader(A.default.nodeType,new A.default)}}),Object.defineProperty(t.prototype,"detectLanguage",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;return e&&(null===(t=m.MODES.find((function(t){var r;return t.value===e||(null===(r=t.ext)||void 0===r?void 0:r.includes(e))})))||void 0===t?void 0:t.value)||"plain"}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:c.default.CODEBLOCK.PLUGIN_NAME}),Object.defineProperty(t,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:c.default.CODEBLOCK.NODE_NAME}),t}(l.KernelPlugin);t.default=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modeMatch=void 0;var n=r(3768);t.modeMatch=function(e){void 0===e&&(e=""),e=e.toLowerCase();var t=n.MODES.find((function(t){var r;return null===(r=t.ext)||void 0===r?void 0:r.includes(e)}));return(null==t?void 0:t.value)||e}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3849),u=a(r(3599)),l=a(r(4029)),c=r(3768),s="vscode-editor-data",f=function(){function e(){Object.defineProperty(this,"_lines",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return Object.defineProperty(e.prototype,"addToLine",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._lines.push(e)}}),Object.defineProperty(e.prototype,"newLine",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._lines.push("\n")}}),Object.defineProperty(e.prototype,"getLines",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._lines.join("").split("\n")}}),Object.defineProperty(e.prototype,"enterNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){i.HTMLBlockTags[e.name]&&this._lines.push("\n")}}),Object.defineProperty(e.prototype,"leaveNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),e}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o,a=[],i="",l=!0;if("code-block"===t.name){var d=function(e){var t;if("code-block"!==e.name)return null;if(!e.children||"div"!==e.children[0].name||"wolai-pre"!==(null===(t=e.children[0].attrs)||void 0===t?void 0:t.class))return null;var r=e.children[0];if(!r.children)return null;var n={lines:null,lng:null};return r.children.forEach((function(e){var t;if("pre"===e.name){var r=new f;h(r,e.children),n.lines=r.getLines()}else if("div"===e.name&&(null===(t=e.attrs)||void 0===t?void 0:t["data-lang"])){var o=e.attrs["data-lang"].toLowerCase();c.MODES.find((function(e){return e.value===o&&(n.lng=e.value),e.value===o}))}})),n}(t);i=null==d?void 0:d.lng,a=null==d?void 0:d.lines}else if("div"===t.name)a=function(e){var t,r,n;if("div"!==e.name||!(null===(r=null===(t=e.style)||void 0===t?void 0:t["font-family"])||void 0===r?void 0:r.includes("monospace"))||"pre"!==(null===(n=e.style)||void 0===n?void 0:n["white-space"]))return null;if(!e.children)return null;if(!e.children.every((function(e){var t=e.name;return"div"===t||"br"===t||"#text"===t})))return null;return function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r],a=o.name;if("div"===a){var i=p(o);if(null===i)return null;t.push(i)}else"br"===a?t.push("\n"):"#text"===a&&t.push(o.data)}t.length>1&&(t[0].trim()||t.shift(),t[t.length-1].trim()||t.pop());return t}(e.children)}(t),(null==r?void 0:r.clipboardPayload)&&(i=function(e){if(!(null==e?void 0:e.types.includes(s)))return null;var t="";try{var r=JSON.parse(e.getData(s));t=r.mode||null}catch(e){console.warn("failed to detect code language",e)}if(!t)return null;if(c.MODES.some((function(e){return e.value===t})))return t;return null}(null==r?void 0:r.clipboardPayload));else{var b=t.children,m=new f;1===(null==b?void 0:b.length)&&"code"===b[0].name?(l=!1,i=function(e){if(!e)return null;Array.isArray(e)||(e=e.split(/\s+/));var t=e.map((function(e){return null==e?void 0:e.split(/\s+/g)})).flat(1).find((function(e){return e&&(e.startsWith("language-")||e.startsWith("lang-"))}));if(!t)return null;var r=t.replace(/lang(uage)?-/,"");if(c.MODES.some((function(e){return e.value===r})))return r;return null}([null===(n=t.attrs)||void 0===n?void 0:n.class,null===(o=b[0].attrs)||void 0===o?void 0:o.class]),y(m,b[0].children)):y(m,b),a=m.getLines()}(null==a?void 0:a.length)&&(e.stop(),l&&1===a.length?(u.default.removeAllAttribute(t),u.default.removeAllStyle(t),e.setNode(u.default.createTextNode(a[0]))):(u.default.setAttribute(t,"codeblock","true"),u.default.setAttribute(t,"languageMode",i),u.default.setChildren(t,[u.default.createTextNode(a.join("\n"))])))}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["pre","div","code-block"]}),t}(l.default);function p(e){var t,r=e.children;if(!r)return null;for(var n=[],o=0,a=r.length;o<a;o++){if("span"!==r[o].name)return null;var i=null===(t=r[o].children)||void 0===t?void 0:t[0];if(i){if("#text"!==i.name)return null;n.push(i.data)}}return n.join("")}function h(e,t){null==t||t.forEach((function(t){var r;"#text"===t.name?(console.info(t,t.data),e.addToLine(t.data)):"br"===t.name?e.newLine():(null===(r=t.children)||void 0===r?void 0:r.length)&&(e.enterNode(t),h(e,t.children),e.leaveNode(t))}))}function y(e,t){null==t||t.forEach((function(t){var r;if("#text"===t.name){var n=t.data.split("\n");n.forEach((function(t,r){e.addToLine(t.replace(/\u00a0/g," ")),r<n.length-1&&e.newLine()}))}else"br"===t.name?e.newLine():(null===(r=t.children)||void 0===r?void 0:r.length)&&(e.enterNode(t),y(e,t.children),e.leaveNode(t))}))}t.default=d},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3454),u=a(r(3458)),l=a(r(3494)),c=a(r(3929)),s=r(4944),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o;if(null===(r=t.attrs)||void 0===r?void 0:r.codeblock){e.stop();var a=t.children,l=t.attrs.languageMode;i.assert.fatal(1===(null==a?void 0:a.length)&&"#text"===a[0].name,"plugins/codeblock/src/kernel/readers/codeblock-html-node-reader.ts:27");var f=null===(o=null===(n=null==a?void 0:a[0].data)||void 0===n?void 0:n.trim())||void 0===o?void 0:o.replace(/[\uFEFF\u200B]/g,""),d=c.default.createStandardCardValue(l?{mode:l}:void 0,f);c.default.setCodeTheme(d,(0,s.getDefaultCodeblockTheme)(e.theme)),e.setNode(u.default.createCard("codeblock",d))}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["div","pre","code-block"]}),t}(l.default);t.default=f},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultCodeblockTheme=void 0;var o=r(4205),a=r(3768),i=n(r(4258));t.getDefaultCodeblockTheme=function(e){var t=i.default.load();return(null==t?void 0:t.theme)?t.theme:e===o.Theme.dark?a.DARK_CODEBLOCK_THEME_NAME:a.DEFAULT_CODEBLOCK_THEME_NAME}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"codeblock"}),t}(a(r(3500)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3481),u=a(r(3929)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.createCard("codeblock",u.default.fromLake(r),n);e.setNode(o)}}),t}(i.LakeCardReader);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o=(null===(n=null===(r=t.attrs)||void 0===r?void 0:r.value)||void 0===n?void 0:n.code)||"";"object"==typeof o&&(o=o.code||""),e.newline(o)}}),t}(a(r(3639)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(4949),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(t.attrs||{}).value||{},n=r.code,o=r.mode;if("object"==typeof n&&(n=n.code||""),n){var a;e.isInlineMode()&&(a={border:"1px solid #e8e8e8",borderRadius:"2px",background:"#f9f9f9",padding:"16px",fontSize:"13px",color:"#595959"});var u=e.createElement("pre",{className:(0,i.mergeClassName)("ne-codeblock",o?"language-".concat(o):null),attrs:{"data-language":o},style:a}),l=e.createElement("code");e.appendChild(u,l),e.appendChild(l,e.createPlainTextNode(n)),e.setNode(u)}}}),t}(a(r(3470)).default);t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClassName=void 0,t.mergeClassName=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter((function(e){return e&&!!e.trim()})).join(" ")}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3547)),u=a(r(3929)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.createInlineCard("codeblock",u.default.toLake(r),n);e.setNode(o)}}),t}(i.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=r(3768),a=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){if(e.nodeType.includes(r.type)){var n=r.nodes;r.nodes=[];var a=n.map((function(e){return t.isText(e)?e.leaves.map((function(e){return e.text})).join(""):""})).join("");return t.setNode(t.createElement(this.typeToName(r.type),{value:{code:a,theme:"dracula"===r.data.theme?o.DARCULAR_THEME:o.GITHUB_THEME,mode:this.findMode(r.data.syntax)||"plain"}})),!1}}}),Object.defineProperty(e.prototype,"findMode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;return e&&(null===(t=o.MODES.find((function(t){return t.syntax===e})))||void 0===t?void 0:t.syntax)||null}}),Object.defineProperty(e.prototype,"typeToName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if("code"===e)return"codeblock";n.assert.fatal(!1,"unknown type: ".concat(e),"plugins/codeblock/src/kernel/readers/code-aone-reader.ts:41")}}),Object.defineProperty(e,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["code"]}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3454),l=a(r(3498)),c=r(3466),s=r(3493),f=r(3463),d=r(3601),p=a(r(4953)),h=a(r(4954)),y=a(r(4955)),b=a(r(4956)),m=a(r(4957)),v=a(r(4958)),g=a(r(4959)),_=r(3636),w=a(r(4960)),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"isValidMentionPosition",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var r=e.node,n=e.offset;if(r.hasCategory([i.Category.Root,i.Category.LikeRoot]))return!0;if(i.NodeUtil.closest(r,i.Category.Inline))return!1;if(r.isTextNode()){var o=t._getPrevText(r,n);return!o||!o.match(/[a-z0-9_]$/)}return u.assert.fatal(r.isElement()&&r.hasCategory(i.Category.Block),"plugins/mention/src/kernel/index.ts:106"),!0}}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r,n,o,a,i,u;e.registerInlineCard(t.cardName),e.registerCommand("mention",new p.default),e.extendMethods({isValidMentionPosition:this.isValidMentionPosition}),null===(r=e.getService(f.ILakeKernelService.ID))||void 0===r||r.registerLakeCardReader(b.default.LakeCardName,new b.default),null===(n=e.getService(s.IINodeReaderKernelService.ID))||void 0===n||n.registerINodeCardReader(y.default.CardName,new y.default),null===(o=e.getService(d.ITextDataSourceKernelService.ID))||void 0===o||o.registerTextWriter(t.cardName,new g.default(this.option)),null===(a=e.getService(f.ILakeKernelService.ID))||void 0===a||a.registerLakeCardWriter(t.cardName,new v.default),null===(i=e.getService(c.IHTMLKernelService.ID))||void 0===i||i.registerNodeHTMLWriter(t.cardName,new m.default(this)),null===(u=e.getService(_.IMarkdownService.ID))||void 0===u||u.registerMarkdownWriter(t.PluginName,new w.default(this)),this.option.onAfterKernelPluginInit&&this.option.onAfterKernelPluginInit(this.kernel)}}),Object.defineProperty(t.prototype,"_getPrevText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){u.assert.fatal(e.isTextNode(),"plugins/mention/src/kernel/index.ts:111");var r=[];return r.push(l.default.substring(e.data,0,t)),e.previousSibling&&e.previousSibling.isTextNode()&&(e=e.previousSibling,r.push(e.data)),r.reverse().join("")}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"mention"}),Object.defineProperty(t,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:"mention"}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:h.default}),t}(i.KernelPlugin);t.default=O},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.getSelection().rangeCount>1?i.Command.UNAVAILABLE:i.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.getNodesByName("mention").filter((function(e){return e.isConnected})).map((function(e){return e.attrs&&e.attrs.value?a({},e.attrs.value):null})).filter(Boolean)}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=!1);var n=e.newJob();if(this.getState(n)===i.Command.UNAVAILABLE)return e.cancelJob(n),!1;var o=i.CardUtil.insertCardNode(n,n.getSelection(),"mention",t),a=o.selection,u=o.cardNode;return r?n.setSelection([n.newRange(n.newPosition(u,0))]):n.setSelection(a),e.commitJob(n),u.id}}),t}(i.Command);t.default=u},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(97)),a=n(r(3464)),i={origin:null,externalOpen:!1,generateMentionInfo:null},u=function(){function e(e){var t=this;Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generateMentionInfo",{enumerable:!0,configurable:!0,writable:!0,value:function(e){if(t._option.generateMentionInfo)return t._option.generateMentionInfo(e);var r=e.login,n=e.name,a=e.nickName;if(r){var i=t._option,u=i.origin,l=i.externalOpen;u?"boolean"!=typeof l&&(l=!0):u=(0,o.default)(window,"location.origin");return{text:"".concat(a||(n||r)),url:encodeURI("".concat(u,"/").concat(r)),externalOpen:!!l}}return{text:a||n,url:null,externalOpen:!1}}}),this._option=(0,a.default)({},i,e)}return Object.defineProperty(e.prototype,"onAfterKernelPluginInit",{get:function(){return this._option.onAfterKernelPluginInit},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"mention"}),e}();t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"mention"}),t}(a(r(3500)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3481),u=a(r(4260)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(r){var o=e.createCard("mention",u.default.fromLake(r),n);e.setNode(o)}}}),Object.defineProperty(t,"LakeCardName",{enumerable:!0,configurable:!0,writable:!0,value:"mention"}),t}(i.LakeCardReader);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(97)),u=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_plugin",{enumerable:!0,configurable:!0,writable:!0,value:null}),r._plugin=t,r}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(0,i.default)(t,"attrs.value",{}),n=r.login,o=r.name,a=r.nickName,u=e.createElement("span",{className:"ne-mention"});if(!n)return o||a?(e.appendChild(u,e.createTextNode("@"+(a||o))),void e.setNode(u)):void e.clear();var l=this._plugin.option.generateMentionInfo({login:n,name:o,nickName:a}),c=l.text,s=l.url,f=l.externalOpen,d=e.createElement("a",{attrs:{href:s,target:f?"_blank":void 0}});e.appendChild(d,e.createTextNode("@"+c)),e.appendChild(u,d),e.setNode(u)}}),t}(a(r(3470)).default);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3547)),u=a(r(4260)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(r){var o=e.createInlineCard("mention",u.default.toLake(r),n,{"data-login":r.login,"data-name":r.name,"data-userid":r.userid});e.setNode(o)}}}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_option",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=(null===(r=null==t?void 0:t.attrs)||void 0===r?void 0:r.value)||{},o=this._option.generateMentionInfo(n).text;o&&e.append("@"+o)}}),t}(a(r(3639)).default);t.default=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(97)),a=function(){function e(e){Object.defineProperty(this,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:e})}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(0,o.default)(t,"attrs.value",{}),n=r.login,a=r.name,i=r.nickName;if(!n)return!a&&!i||(e.append("[@".concat(i||a,"]()")),!0);var u=this.plugin.option.generateMentionInfo({login:n,name:a,nickName:i}),l=(u.text,u.url);u.externalOpen;return e.append("[@".concat(i||a,"](").concat(l,")")),!0}}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3846),l=r(3466),c=r(3493),s=r(3463),f=a(r(4962)),d=a(r(4963)),p=a(r(4964)),h=a(r(4965)),y=a(r(4966)),b=a(r(4967)),m=a(r(4968)),v=r(3848),g=r(4969),_=r(4971),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r,n,o,a,i,f,d;e.registerBlockCard(t.cardName);var w=e.requireService(v.IUploadKernelService.ID);null===(r=e.getService(s.ILakeKernelService.ID))||void 0===r||r.registerLakeCardReader("video",new h.default(this.option)),null===(n=e.getService(c.IINodeReaderKernelService.ID))||void 0===n||n.registerINodeCardReader(p.default.CardName,new p.default),null===(o=e.getService(u.IFileReaderKernelService.ID))||void 0===o||o.registerFileReader(w.getFileAcceptUtil().getVideoFileAccept(this.option.name),new y.default),null===(a=e.getService(s.ILakeKernelService.ID))||void 0===a||a.registerLakeCardWriter("video",new m.default),null===(i=e.getService(l.IHTMLKernelService.ID))||void 0===i||i.registerNodeHTMLWriter("video",new b.default(e.option.currentURL)),null===(f=e.getService(l.IHTMLKernelService.ID))||void 0===f||f.registerHTMLNodeReader(g.VideoHtmlReader.NodeNames,new g.VideoHtmlReader(this)),null===(d=e.getService(s.ILakeKernelService.ID))||void 0===d||d.registerLakeNodeReader("video",new _.LegacyLakeVideoReader(this))}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"video"}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:f.default}),Object.defineProperty(t,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:"video"}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[d.default]}),t}(i.KernelPlugin);t.default=w},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3464)),a={accept:null,useOriginSrc:function(){return!1}},i=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=(0,o.default)({},a,e)}return Object.defineProperty(e.prototype,"accept",{get:function(){return this._option.accept},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._option.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"migrationHost",{get:function(){return this._option.migrationHost},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useOriginSrc",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r;return(null===(r=(t=this._option).useOriginSrc)||void 0===r?void 0:r.call(t,e))||!1}}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"video"}),e}();t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3913),u=a(r(3769)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=!1);var n=u.default.fromRepository({copiedFileInfo:t});return this._execute(e,"video",n,r)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:"insertVideo"}),t}(i._InsertCardCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"video"}),t}(a(r(3500)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3481),u=a(r(3769)),l=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"option",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if("function"==typeof this.option.migrationHost)r.url=this.option.migrationHost(r);else if(this.option.migrationHost&&!r.url&&r.videoId&&"string"==typeof r.videoId){var o="string"==typeof this.option.migrationHost?this.option.migrationHost:"yuque.antfin-inc.com";r.url="https://".concat(o,"/api/v2/servicify/migration/videos/").concat(r.videoId)}var a=e.createCard("video",u.default.fromLake(r),n);e.setNode(a)}}),t}(i.LakeCardReader);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3633),l=a(r(3847)),c=a(r(3769)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readFile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(("video"===(null==t?void 0:t.category)||"localDoc"===(null==t?void 0:t.category)||(null==t?void 0:t.useMediaCard))&&((null==t?void 0:t.from)===u.SOURCE_FROM_UI||(null==t?void 0:t.useMediaCard))){var r=e._$neUploadTask;if(r)return i.default.createCard("video",c.default.getInitCardValue(r))}}}),t}(l.default);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return i(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=l(r(3470)),s=u(r(4261)),f=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_currentUrl",{enumerable:!0,configurable:!0,writable:!0,value:""}),r._currentUrl=t,r}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,a=null===(r=null==t?void 0:t.attrs)||void 0===r?void 0:r.value;if(a&&(null==a?void 0:a.status)===s.Status.Done){var i=(null==a?void 0:a.name)||"",u=e.createElement("div",{className:"ne-video"}),l=e.createElement("a",{attrs:{href:(null===(o=null===(n=null==t?void 0:t.attrs)||void 0===n?void 0:n.value)||void 0===o?void 0:o.url)||""}});e.appendChild(l,e.createTextNode(i)),e.appendChild(u,e.createTextNode("此处为语雀视频卡片，点击链接查看：")),e.appendChild(u,l),e.setNode(u)}}}),t}(c.default);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3547)),u=a(r(3769)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.createBlockCard("video",u.default.toLake(r),n);e.setNode(o)}}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VideoHtmlReader=void 0;var i=r(3930),u=a(r(3769)),l=r(3453),c=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o;if(t.attrs){var a=t.attrs._$neUploadTask,i=t.attrs.src;if(i||(i=null===(o=null===(n=null===(r=t.children)||void 0===r?void 0:r.find((function(e){return"source"===e.name})))||void 0===n?void 0:n.attrs)||void 0===o?void 0:o.src),"string"==typeof i)return this.plugin.option.useOriginSrc(i)?(e.setNode(l.INodeHelper.createCard("video",u.default.fromLake({url:i}))),!1):a?(e.setNode(l.INodeHelper.createCard("video",u.default.getInitCardValue(a))),!1):void 0}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["video"]}),t}(i.HtmlNodeReader);t.VideoHtmlReader=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LegacyLakeVideoReader=void 0;var i=r(4195),u=r(3453),l=a(r(3769)),c=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"plugin",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(t.attrs&&t.attrs.src){var r=t.attrs,n=r.src,o=r._$neUploadTask;return this.plugin.option.useOriginSrc(n)?(e.setNode(u.INodeHelper.createCard("video",l.default.fromLake({url:n}))),!1):o?(e.setNode(u.INodeHelper.createCard("video",l.default.getInitCardValue(o))),!1):void 0}}}),t}(i.LakeNodeReader);t.LegacyLakeVideoReader=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3463),c=a(r(4973)),s=r(4974),f=a(r(4976)),d=a(r(4977)),p=a(r(4978)),h=a(r(4979)),y=a(r(4980)),b=a(r(4981)),m=a(r(4982)),v=a(r(4983)),g=a(r(4984)),_=a(r(4985)),w=a(r(4986)),O=r(3506),E=a(r(4987)),P=a(r(4988)),j=a(r(4989)),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerElement(f.default),e.registerAttr(c.default)}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,r;null===(e=this.kernel.getService(l.ILakeKernelService.ID))||void 0===e||e.registerLakeNodeReader(E.default.NodeNames,new E.default),null===(t=this.kernel.getService(l.ILakeKernelService.ID))||void 0===t||t.registerLakeNodeWriter(j.default.NodeNames,new j.default),null===(r=this.kernel.getService(u.IHTMLKernelService.ID))||void 0===r||r.registerNodeHTMLWriter(P.default.NodeNames,new P.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:O.pluginRegister.pluginName}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:s.ColumnsKernelService}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[m.default,_.default,b.default,p.default,d.default,y.default,v.default,g.default,h.default,w.default]}),t}(i.KernelPlugin);t.default=C},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnsAttrSchema=void 0;var n=r(3506);t.ColumnsAttrSchema={width:{targets:[n.pluginRegister.node.column],values:function(e){return"number"==typeof e}}},t.default=t.ColumnsAttrSchema},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ColumnsKernelService=void 0;var a=r(3454),i=r(3490),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"reAlignColumnWidth",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.children.map((function(e){return Number(e.attrs.width)*(1-1/t)})),n=0,o=0;do{for(var u=0;u<r.length;u++)r[u]<=i.MIN_WIDTH?(n+=i.MIN_WIDTH-r[u],r[u]=i.MIN_WIDTH):r[u]-n<i.MIN_WIDTH?(n-=r[u]-i.MIN_WIDTH,r[u]=i.MIN_WIDTH):(r[u]-=n,n=0);o++}while(n>0&&o<10);return a.assert.fatal(0===n,"plugins/columns/src/kernel/columns-kernel-service.ts:35"),r}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(r(4975).IColumnsKernelService);t.ColumnsKernelService=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IColumnsKernelService=void 0;var a=r(3472),i=r(3475),u=r(3506),l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)(u.pluginRegister.service.IColumnsKernelService)}),t}(i.KernelAbstractService);t.IColumnsKernelService=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o=r(3490),a={columns:{parents:[n.Category.ContainerHole],excludes:[n.Category.VirtualLikeRoot],category:[o.COLUMNS,n.Category.WidthModeBox,n.Category.Brick],children:[o.COLUMN]},column:{parents:[o.COLUMNS],category:[n.Category.LikeRoot,o.COLUMN]}};t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3454),i=r(3457),u=r(3490),l=r(3506),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getSelection(),i=n.getNodeById(t);if((null==i?void 0:i.nodeName)!==u.COLUMNS||isNaN(r)||r<0||r>=i.childCount)return e.cancelJob(n),!1;var c=i.children[r];if(a.assert.fatal(c&&c.nodeName===u.COLUMN,"plugins/columns/src/kernel/commands/column-delete-by-index-command.ts:36"),i.childCount<2)return e.cancelJob(n),!1;if(2===i.childCount){for(var s=i.parentNode.parentNode,f=this._isSelectionInColumnNode(n,o,c),d=n.newPosition(s,Math.max(0,i.parentNode.offset-1)),p=0;p<i.childCount;p++){if((_=i.children[p])!==c)for(var h=0;h<_.childCount;h++){var y=_.children[h];n.insertBefore(s,y,i.parentNode),d=n.newPosition(y,y.childCount),h--}}return n.removeChild(s,i.parentNode),f&&n.setSelection([n.newRange(d)]),e.commitJob(n),!0}var b=this._isSelectionInColumnNode(n,o,c),m=c.previousSibling?n.newPosition(c.previousSibling,c.previousSibling.childCount):n.newPosition(c.nextSibling,0),v=i.childCount-1,g=c.attrs.width||0;for(p=0;p<i.childCount;p++){var _;(_=i.children[p])!==c&&n.setAttribute(i.children[p],l.pluginRegister.attr.width,_.attrs.width+g/v)}return n.removeChild(i,c),b&&n.setSelection([n.newRange(m)]),e.commitJob(n),!0}}),Object.defineProperty(t.prototype,"_isSelectionInColumnNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return t.ranges.find((function(e){var t=e.start,n=e.end;return t.node.closest(u.COLUMN)===r||n.node.closest(u.COLUMN)===r}))}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.columnDeleteByIndex}),t}(i.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3490),c=r(3506),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,u,s,f=e.newJob(),d=f.getSelection(),p=f.getNodeById(t);if((null==p?void 0:p.nodeName)!==l.COLUMNS||!d.collapsed||0!==(null===(n=null===(r=d.firstRange)||void 0===r?void 0:r.start)||void 0===n?void 0:n.offset)||(null===(s=null===(u=null===(o=d.firstRange)||void 0===o?void 0:o.start)||void 0===u?void 0:u.node)||void 0===s?void 0:s.closest([a.Category.AlertHole,"quote"])))return e.cancelJob(f),!1;var h=d.firstRange.start.node.closest(l.COLUMN);if(!h||h.childCount>1||h.firstChild&&!a.NodeUtil.isLikeEmptyElement(h.firstChild))return e.cancelJob(f),!1;if(p.childCount<=2){if(p.children.every((function(e){return a.NodeUtil.isLikeEmptyElement(e)}))){var y=a.SelectionUtil.deleteContent(f,f.selectNode(p));return i.assert.fatal(y.collapsed,"plugins/columns/src/kernel/commands/column-delete-command.ts:63"),f.setSelection(y),e.commitJob(f),!0}for(var b=p.parentNode.parentNode,m=f.newPosition(b,Math.max(0,p.parentNode.offset-1)),v=0;v<p.childCount;v++){if((P=p.children[v])!==h)for(var g=0;g<P.childCount;g++){var _=P.children[g];f.insertBefore(b,_,p.parentNode),m=f.newPosition(_,_.childCount),g--}}return f.removeChild(b,p.parentNode),f.setSelection([f.newRange(m)]),e.commitJob(f),!0}var w=h.previousSibling?f.newPosition(h.previousSibling,h.previousSibling.childCount):f.newPosition(h.nextSibling,0),O=p.childCount-1,E=Number(h.attrs.width);for(v=0;v<p.childCount;v++){var P;(P=p.children[v])!==h&&f.setAttribute(p.children[v],c.pluginRegister.attr.width,Number(P.attrs.width)+E/O)}return f.removeChild(p,h),f.setSelection([f.newRange(w)]),e.commitJob(f),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.columnDelete}),t}(u.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3457),i=r(3490),u=r(3506),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.newJob(),a=o.getNodeById(t);if(null===a||a.nodeName!==i.COLUMNS||r<0||r>=a.childCount||n<0||n>a.childCount)return e.cancelJob(o),!1;var u=a.children[r];return n===a.childCount?(o.removeChild(a,u),o.appendChild(a,u)):o.insertBefore(a,u,a.children[n]),e.commitJob(o),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.moveColumn}),t}(a.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3490),l=r(3506),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob(),n=r.getNodeById(t);if((null==n?void 0:n.nodeName)!==u.COLUMN)return e.cancelJob(r),!1;var o=n.lastChild;if(!o||o.hasCategory(a.Category.Hole)){var i=r.createElement(r.defaultElementName);r.appendChild(n,i),r.setSelection([r.newRange(r.newPosition(i,0))])}else if(o){var l=a.Range.selectNodeContents(o).end;r.setSelection([r.newRange(l)])}return e.commitJob(r),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.selectColumnEnd}),t}(i.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3457),i=r(3490),u=r(3506),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.getNodeById(t);return(null==r?void 0:r.nodeName)!==i.COLUMNS?-1:r.childCount}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);if((null==o?void 0:o.nodeName)!==i.COLUMNS||r<0||o.childCount>=i.MAX_COLS)return e.cancelJob(n),!1;for(var a=o.childCount+1,l=n.createElement(i.COLUMN,{width:1/a}),c=this.plugin.service.reAlignColumnWidth(o,a),s=0;s<c.length;s++){var f=c[s];n.setAttribute(o.children[s],u.pluginRegister.attr.width,f)}r>=o.childCount?n.appendChild(o,l):n.insertBefore(o,l,o.children[r]);var d=n.createElement(n.defaultElementName);return n.appendChild(l,d),n.setSelection([n.newRange(n.newPosition(d,0))]),e.commitJob(n),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.columnsAddColumn}),t}(a.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3506),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return a.SelectionUtil.isUnbreakable(t)?a.Command.UNAVAILABLE:a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=2);var r=e.newJob();if(this.getState(r)===a.Command.UNAVAILABLE)return e.cancelJob(r),!1;var n=r.getSelection();n.collapsed||(n=a.SelectionUtil.deleteContent(r,n)),i.assert.fatal(n.collapsed,"plugins/columns/src/kernel/commands/columns-command.ts:42");var o=n.firstRange.start,u=o.node.closest(a.Category.Block);u&&a.NodeUtil.isLikeEmptyElement(u)&&(o=r.newPosition(u.parentNode,u.offset),r.removeChild(u.parentNode,u));var c=r.createElement("containerHole"),s=r.createElement(l.pluginRegister.node.columns);r.appendChild(c,s);for(var f=0;f<t;f++){var d=r.createElement(l.pluginRegister.node.column,{width:1/t}),p=r.createElement(r.defaultElementName);r.appendChild(s,d),r.appendChild(d,p)}return a.PositionUtil.insertNodes(r,o,[c]),r.setSelection([r.newRange(r.newPosition(s.firstChild.firstChild,0))]),e.commitJob(r),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.columns}),t}(u.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3490),c=r(3506),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob(),n=r.getNodeById(t);if((null==n?void 0:n.nodeName)!==l.COLUMNS)return e.cancelJob(r),!1;var o=a.SelectionUtil.deleteContent(r,r.selectNode(n));return i.assert.fatal(o.collapsed,"plugins/columns/src/kernel/commands/columns-delete-command.ts:25"),r.setSelection(o),e.commitJob(r),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.deleteColumns}),t}(u.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3490),l=r(3506),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);o&&o.isConnected&&(null==o?void 0:o.nodeName)===u.COLUMNS?(a.PositionUtil.insertNodes(n,r,[o.parentNode]),n.setSelection(n.selectNode(o)),e.commitJob(n)):e.cancelJob(n)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.moveColumns}),t}(i.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3454),i=r(3457),u=r(3490),l=r(3506),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);if((null==o?void 0:o.nodeName)!==u.COLUMNS)return e.cancelJob(n),!1;a.assert.fatal(o.children.length===r.length,"plugins/columns/src/kernel/commands/columns-widths-command.ts:19");for(var i=0,l=r.length;i<l;i++){var c=r[i];n.setAttribute(o.children[i],"width",c)}return e.commitJob(n),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.columnsWidths}),t}(i.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3454),i=r(3457),u=r(3490),l=r(3561),c=r(3506),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){a.assert.fatal(t,"plugins/columns/src/kernel/commands/toggle-width-mode.ts:17");var r=e.getNodeById(t);return a.assert.fatal(r,"plugins/columns/src/kernel/commands/toggle-width-mode.ts:21"),this._getValue(r)}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=null),a.assert.fatal(t,"plugins/columns/src/kernel/commands/toggle-width-mode.ts:31");var n=e.newJob(),o=n.getNodeById(t);if(null===o||o.nodeName!==u.COLUMNS)return e.cancelJob(n),!1;if(r===l.WIDTH_MODE_CONTAIN||r===l.WIDTH_MODE_NORMAL)n.setAttribute(o,"widthMode",r);else{var i=this._getValue(o);n.setAttribute(o,"widthMode",i===l.WIDTH_MODE_CONTAIN?l.WIDTH_MODE_NORMAL:l.WIDTH_MODE_CONTAIN)}return e.commitJob(n),!0}}),Object.defineProperty(t.prototype,"_getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;return(null===(t=e.attrs)||void 0===t?void 0:t.widthMode)===l.WIDTH_MODE_CONTAIN?l.WIDTH_MODE_CONTAIN:l.WIDTH_MODE_NORMAL}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.columnsToggleWidthMode}),t}(i.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3548),l=r(3506),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(t&&t.attrs&&t.attrs.class&&t.attrs.class.includes("lake-columns")){var r=i.default.createElement(l.pluginRegister.node.columns,{widthMode:t.attrs.widthmode||void 0});return e.setNode(r),!1}if(t&&t.attrs&&t.attrs.class&&t.attrs.class.includes("lake-column-item")){var n=t.style.width.replace(/%$/,""),o=i.default.createElement(l.pluginRegister.node.column,{width:parseFloat(n)/100||0});return e.setNode(o),!1}return!0}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[l.pluginRegister.lakeNode.article]}),t}(u.LakeNodeReader);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3490),u=a(r(3470)),l=r(3506),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=null==t?void 0:t.name;if(r===l.pluginRegister.node.columns){var n=((null==t?void 0:t.attrs)||{}).widthMode;e.setNode(e.createElement(l.pluginRegister.htmlNode.article,{className:"lake-columns",style:{display:"flex"},widthMode:n}))}else if(r===l.pluginRegister.node.column){var o=((null==t?void 0:t.attrs)||{width:0}).width;e.setNode(e.createElement(l.pluginRegister.htmlNode.article,{className:"lake-column-item",style:{flex:o},width:(100*o).toFixed(6)+"%"}))}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[i.COLUMNS,i.COLUMN]}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3490),l=r(3499),c=r(3506),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=null==t?void 0:t.name;if(r===u.COLUMNS){var n=((null==t?void 0:t.attrs)||{}).widthMode;e.setNode(i.default.createElement(c.pluginRegister.lakeNode.article)),e.addClassName("lake-columns"),e.setAttr("widthMode",n)}else if(r===u.COLUMN){var o=((null==t?void 0:t.attrs)||{width:0}).width;e.setNode(i.default.createElement(c.pluginRegister.lakeNode.article)),e.addClassName("lake-column-item"),e.setStyle("width",(100*o).toFixed(6)+"%")}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[c.pluginRegister.node.columns,c.pluginRegister.node.column]}),t}(l.LakeNodeWriter);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=r(3453),l=r(3454),c=r(3763),s=r(3484),f=r(3466),d=r(3463),p=i(r(4991)),h=i(r(4992)),y=i(r(4993)),b=i(r(4994)),m=i(r(4995)),v=i(r(4996)),g=i(r(4997)),_=i(r(4998)),w=i(r(4999)),O=r(3602),E=i(r(5e3)),P=i(r(5001)),j=i(r(5002)),C=i(r(5003)),k=i(r(5004)),S=i(r(5005)),A=i(r(5006));function x(e){var t,r,n;if(e)return(null===(t=e.isEmpty)||void 0===t?void 0:t.call(e))||(null===(n=null===(r=e.children)||void 0===r?void 0:r.every)||void 0===n?void 0:n.call(r,(function(e){var t,r;return(null===(t=e.isTextNode)||void 0===t?void 0:t.call(e))&&(null===(r=e.isEmpty)||void 0===r?void 0:r.call(e))})))}var N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_selections",{enumerable:!0,configurable:!0,writable:!0,value:[]}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;e.registerElement(h.default),e.registerAttr(p.default);var n={};(0,c.bindEvent)(this,t,"nodechange",(function(e){var t=e.node,r=e.job;"children"!==e.type||t.nodeName===s.COLLAPSE&&(n[t.id]={node:t,job:r})})),(0,c.bindEvent)(this,t,"beforecontentchange",(function(){var e,t,r,o,i,u;try{for(var c=a(Object.keys(n)),f=c.next();!f.done;f=c.next()){var d=f.value,p=n[d],h=p.node,y=p.job;if(h.isConnected){var b=y.getSelection().firstRange,m=b.start,v=b.end,g=null,_=-1,w=null,O=-1,E=h;if(!E||!E.isElement())return;var P=E.firstChild;if(P&&P.nodeName!==s.SUMMARY&&0===P.childCount&&(1===E.childCount||2===E.childCount&&x(E.lastChild)))y.removeChild(E,P),y.replaceChild(E.parent.parent,P,E.parent);else{if(P&&P.nodeName!==s.SUMMARY){var j=y.createElement(s.SUMMARY);try{for(var C=(r=void 0,a(P.children)),k=C.next();!k.done;k=C.next()){if(!(L=k.value).isTextNode())break;y.appendChild(j,L)}}catch(e){r={error:e}}finally{try{k&&!k.done&&(o=C.return)&&o.call(C)}finally{if(r)throw r.error}}0===P.childCount&&y.removeChild(E,P),y.prependChild(E,j),m.node===P&&(g=j,_=m.offset,m.offset>j.childCount&&(l.assert.fatal(P.childCount>=m.offset-j.childCount,"plugins/collapse/src/kernel/index.ts:144"),g=P,_=m.offset-j.childCount)),v.node===P&&(w=j,O=v.offset,v.offset>j.childCount&&(l.assert.fatal(P.childCount>=v.offset-j.childCount,"plugins/collapse/src/kernel/index.ts:156"),w=P,O=v.offset-j.childCount))}for(var S=1;S<E.children.length;S++){var A=E.children[S];if(A.nodeName===s.SUMMARY){var N=y.createElement(y.defaultElementName);try{for(var T=(i=void 0,a(A.children)),D=T.next();!D.done;D=T.next()){var L=D.value;y.appendChild(N,L)}}catch(e){i={error:e}}finally{try{D&&!D.done&&(u=T.return)&&u.call(T)}finally{if(i)throw i.error}}y.replaceChild(E,N,A),m.node===P&&(g=N,_=m.offset),v.node===P&&(w=N,O=v.offset)}}if(g||w){var R=g?y.newPosition(g,_):m,I=w?y.newPosition(w,O):v;y.setSelection([y.newRange(R,I)])}}}}}catch(t){e={error:t}}finally{try{f&&!f.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}n={}})),(0,c.bindEvent)(this,t,"collabSelectionChange",(function(e){var t=e.selections;r._selections=t}))}}),Object.defineProperty(t.prototype,"getOtherSelection",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._selections}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.kernel.getService(d.ILakeKernelService.ID);e&&(e.registerLakeNodeWriter(k.default.NodeNames,new k.default),e.registerLakeNodeWriter(S.default.NodeNames,new S.default));var t=this.kernel.getService(d.ILakeKernelService.ID);t&&(t.registerLakeNodeReader(E.default.NodeNames,new E.default),t.registerLakeNodeReader(P.default.NodeNames,new P.default));var r=this.kernel.getService(f.IHTMLKernelService.ID);r&&(r.registerNodeHTMLWriter(j.default.NodeNames,new j.default),r.registerNodeHTMLWriter(C.default.NodeNames,new C.default))}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.destroy.call(this),this._selections=[]}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:O.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[m.default,g.default,v.default,_.default,b.default,y.default,w.default,A.default]}),t}(u.KernelPlugin);t.default=N},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollapseAttrSchema=void 0;var n=r(3484);t.CollapseAttrSchema={open:{targets:[n.COLLAPSE],values:["true","false"]}},t.default=t.CollapseAttrSchema},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0});var o=r(3453),a=r(3484),i=((n={})[a.COLLAPSE]={parents:[o.Category.ContainerHole],excludes:[o.Category.VirtualLikeRoot],category:[o.Category.LikeRoot,o.Category.WidthModeBox,a.COLLAPSE,o.Category.Brick]},n[a.SUMMARY]={parents:[a.COLLAPSE],category:[o.Category.Block,a.SUMMARY,o.Category.AttrContext,o.Category.Clean,o.Category.TextContainer,o.Category.OnlyText],children:[o.Category.Text]},n);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3484),c=r(3602),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return a.SelectionUtil.isUnbreakable(t)?a.Command.UNAVAILABLE:t.firstRange.start.node.closest(l.COLLAPSE)?a.Command.NOT_EXECUTED:a.Command.UNAVAILABLE}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob();if(this.getState(t)===a.Command.UNAVAILABLE)return e.cancelJob(t),!1;var r=t.getSelection();r.collapsed||(r=a.SelectionUtil.deleteContent(t,r)),i.assert.fatal(r.collapsed,"plugins/collapse/src/kernel/commands/collapse-break-line-command.ts:53");var n=r.firstRange.start,o=n.node,u=n.offset,c=o.closest(l.COLLAPSE),s=o.closest([a.Category.Block,a.Category.Hole,a.Category.TableHole]);if(null===c||null===s)return e.cancelJob(t),!1;var f,d=s.hasCategory(l.SUMMARY),p=!!d&&(o.isTextNode()&&u===o.dataLength&&o===s.lastChild||o.hasCategory(l.SUMMARY)&&o.childCount===u);return f=d&&p&&2===c.childCount&&a.NodeUtil.isLikeEmptyElement(c.lastChild)?t.newPosition(c.lastChild,0):a.PositionUtil.breakLine(t,r.firstRange.start),"false"===c.attrs.open&&t.setAttribute(c,"open","true"),t.setSelection([t.newRange(f)]),e.commitJob(t),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.collapseBreakLine}),t}(u.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3457),l=r(3484),c=r(3602),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o=e.getNodeById(t);if((null==o?void 0:o.nodeName)!==l.COLLAPSE)return i.Command.NOT_EXECUTED;var u=this.plugin.getOtherSelection();try{for(var c=a(u),s=c.next();!s.done;s=c.next()){var f=s.value.selection.firstRange,d=f.start,p=f.end;if(d.node.closest(l.COLLAPSE)===o||p.node.closest(l.COLLAPSE)===o)return i.Command.UNAVAILABLE}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return i.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.collspseClosable}),t}(u.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3484),c=r(3602),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();return a.SelectionUtil.isUnbreakable(t)?a.Command.UNAVAILABLE:a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.newJob();if(this.getState(t)===a.Command.UNAVAILABLE)return e.cancelJob(t),!1;var r=t.getSelection();r.collapsed||(r=a.SelectionUtil.deleteContent(t,r)),i.assert.fatal(r.collapsed,"plugins/collapse/src/kernel/commands/collapse-command.ts:50");var n=r.firstRange.start,o=n.node.closest([a.Category.Block,a.Category.Root]);if(null===o)return e.cancelJob(t),!1;!o.isRootNode()&&a.NodeUtil.isLikeEmptyElement(o)&&(n=t.newPosition(o.parentNode,o.offset),t.removeChild(o.parentNode,o));var u=t.createHole("containerHole"),c=t.createElement(l.COLLAPSE,{open:"true"}),s=t.createElement(l.SUMMARY),f=t.createElement(t.defaultElementName);return t.appendChild(c,s),t.appendChild(c,f),t.appendChild(u,c),a.PositionUtil.insertNodes(t,n,[u]),t.setSelection([t.newRange(t.newPosition(s,0))]),e.commitJob(t),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.collapse}),t}(u.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(3457),l=r(3484),c=r(3602),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob(),n=r.getNodeById(t);if((null==n?void 0:n.nodeName)!==l.COLLAPSE)return e.cancelJob(r),!1;var o=a.SelectionUtil.deleteContent(r,r.selectNode(n));return i.assert.fatal(o.collapsed,"plugins/collapse/src/kernel/commands/collapse-delete-command.ts:25"),r.setSelection(o),e.commitJob(r),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.deleteCollapse}),t}(u.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(3484),l=r(3602),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);o&&o.isConnected&&(null==o?void 0:o.nodeName)===u.COLLAPSE?(a.PositionUtil.insertNodes(n,r,[o.parentNode]),n.setSelection(n.selectNode(o)),e.commitJob(n)):e.cancelJob(n)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.command.moveCollapse}),t}(i.KernelAbstractCommand);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3457),l=r(3484),c=r(3602),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"canSetClose",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o=e.getNodeById(t);if((null==o?void 0:o.nodeName)!==l.COLLAPSE)return i.Command.NOT_EXECUTED;var u=this.plugin.getOtherSelection();try{for(var c=a(u),s=c.next();!s.done;s=c.next()){var f=s.value.selection.firstRange,d=f.start,p=f.end;if(d.node.closest(l.COLLAPSE)===o||p.node.closest(l.COLLAPSE)===o)return i.Command.UNAVAILABLE}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return i.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob();if(this.canSetClose(r,t)===i.Command.UNAVAILABLE)return e.cancelJob(r),!1;var n=r.getNodeById(t);if((null==n?void 0:n.nodeName)!==l.COLLAPSE)return e.cancelJob(r),!1;var o="true"===n.attrs.open;if(r.setAttribute(n,"open",o?"false":"true"),o){var a=r.getSelection().firstRange,u=a.start,c=a.end;if(u.node.closest(l.COLLAPSE)===n||c.node.closest(l.COLLAPSE)===n){var s=r.selectNodeContents(n.children[0]);r.setSelection([r.newRange(s.firstRange.end)])}}return e.commitJob(r),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.collapseOpen}),t}(u.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3454),i=r(3457),u=r(3484),l=r(3561),c=r(3602),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){a.assert.fatal(t,"plugins/collapse/src/kernel/commands/toggle-width-mode.ts:20");var r=e.getNodeById(t);return a.assert.fatal(r,"plugins/collapse/src/kernel/commands/toggle-width-mode.ts:24"),this._getValue(r)}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r=null),a.assert.fatal(t,"plugins/collapse/src/kernel/commands/toggle-width-mode.ts:30");var n=e.newJob(),o=n.getNodeById(t);if(null===o||o.nodeName!==u.COLLAPSE)return e.cancelJob(n),!1;if(r===l.WIDTH_MODE_CONTAIN||r===l.WIDTH_MODE_NORMAL)n.setAttribute(o,"widthMode",r);else{var i=this._getValue(o);n.setAttribute(o,"widthMode",i===l.WIDTH_MODE_CONTAIN?l.WIDTH_MODE_NORMAL:l.WIDTH_MODE_CONTAIN)}return e.commitJob(n),!0}}),Object.defineProperty(t.prototype,"_getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;return(null===(t=e.attrs)||void 0===t?void 0:t.widthMode)===l.WIDTH_MODE_CONTAIN?l.WIDTH_MODE_CONTAIN:l.WIDTH_MODE_NORMAL}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:c.pluginRegister.command.collapseToggleWidthMode}),t}(i.KernelAbstractCommand);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3484),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,a;if(t&&t.attrs&&(null===(n=null===(r=t.attrs.class)||void 0===r?void 0:r.includes)||void 0===n?void 0:n.call(r,"lake-collapse"))){var l=i.default.createElement(u.COLLAPSE,{open:t.attrs.open||"true",widthMode:t.attrs.widthmode||void 0});e.setNode(l);var c=!0,s=[];return null===(o=t.children)||void 0===o||o.forEach((function(e){c&&"#text"===e.name&&/^\s*$/.test(e.data)?s.push(e):c=(e.name,!1)})),t.children=null===(a=t.children)||void 0===a?void 0:a.filter((function(e){return!s.includes(e)})),!1}return!0}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["details"]}),t}(r(3548).LakeNodeReader);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3484),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n;if(null===(n=null===(r=null==t?void 0:t.attrs)||void 0===r?void 0:r.class)||void 0===n?void 0:n.includes("lake-summary")){var o=i.default.createElement(u.SUMMARY);return e.setNode(o),!1}return!0}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[u.SUMMARY]}),t}(r(3548).LakeNodeReader);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3484),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.createElement("details",{className:["lake-collapse"]});e.setNode(r)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[i.COLLAPSE]}),t}(a(r(3470)).default);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3484),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.createElement(i.SUMMARY);e.setNode(t)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[i.SUMMARY]}),t}(a(r(3470)).default);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3484),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(null==t?void 0:t.attrs)||{},n=r.open,o=r.widthMode;e.setNode(i.default.createElement("details")),e.addClassName("lake-collapse"),e.setAttr("open",n),e.setAttr("widthMode",o)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[u.COLLAPSE]}),t}(r(3499).LakeNodeWriter);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3484),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.setNode(i.default.createElement(u.SUMMARY)),e.addClassName("lake-summary")}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:[u.SUMMARY]}),t}(r(3499).LakeNodeWriter);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3457),i=r(3484),u=r(3602),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!t)return!1;var r=e.newJob(),n=r.getNodeById(t);if(!n)return e.cancelJob(r),!1;var o=n.closest(i.COLLAPSE);return(null==o?void 0:o.nodeName)!==i.COLLAPSE?(e.cancelJob(r),!1):(r.setAttribute(o,"open","true"),e.commitJob(r),!0)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.tryUnfoldCollapse}),t}(a.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(3482)),l=r(3466),c=r(3493),s=r(3463),f=r(3519),d=a(r(3851)),p=r(3601),h=r(5008),y=a(r(5009)),b=a(r(5010)),m=a(r(5011)),v=a(r(5012)),g=a(r(5013)),_=r(4263),w=r(3454),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n,o,a,O,E;e.registerInlineCard(u.default.MATH.NODE_NAME),null===(t=e.getService(s.ILakeKernelService.ID))||void 0===t||t.registerLakeCardReader(u.default.MATH.NODE_NAME,new b.default),null===(r=e.getService(c.IINodeReaderKernelService.ID))||void 0===r||r.registerINodeCardReader(y.default.CardName,new y.default),null===(n=e.getService(l.IHTMLKernelService.ID))||void 0===n||n.registerHTMLNodeReader(h.HTMLMathCardReader.NodeNames,new h.HTMLMathCardReader),null===(o=e.getService(s.ILakeKernelService.ID))||void 0===o||o.registerLakeCardWriter(u.default.MATH.NODE_NAME,new v.default),null===(a=e.getService(l.IHTMLKernelService.ID))||void 0===a||a.registerNodeHTMLWriter(u.default.MATH.NODE_NAME,new m.default),null===(O=e.getService(p.ITextDataSourceKernelService.ID))||void 0===O||O.registerTextWriter([u.default.MATH.NODE_NAME],new g.default);var P=e.getService(_.ITOCKernelService.ID);null==P||P.registerCardToText(u.default.MATH.NODE_NAME,(function(e){var t,r;return w.assert.fatal(e.nodeName===u.default.MATH.NODE_NAME,"plugins/math/src/kernel/index.ts:70"),"$".concat((null===(r=null===(t=e.cardValue)||void 0===t?void 0:t.code)||void 0===r?void 0:r.trim())||"","$")})),null===(E=e.getService(f.IMarkdownKernelService.ID))||void 0===E||E.registerMarkdownMatcher(f.TriggerType.whiteSpace,new d.default(this.editing,"$",(function(e,t){var r,n=i.CardUtil.insertCardNode(e,e.newSelection([t]),u.default.MATH.NODE_NAME,{code:null===(r=i.RangeUtil.getTextContent(e,t))||void 0===r?void 0:r.trim()}).cardNode;e.setSelection(e.newSelection(e.newRange(e.newPosition(n.parentNode,n.offset+1))))})))}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:u.default.MATH.PLUGIN_NAME}),t}(i.KernelPlugin);t.default=O},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLMathCardReader=void 0;var i=a(r(3458)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n;return!("math"!==(null===(r=t.attrs)||void 0===r?void 0:r["data-type"])||!(null===(n=t.attrs)||void 0===n?void 0:n["data-text"]))&&(e.stop(),e.setNode(i.default.createCard("math",{code:t.attrs["data-text"]})),!0)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["div"]}),t}(a(r(3494)).default);t.HTMLMathCardReader=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3482)),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:i.default.MATH.NODE_NAME}),t}(a(r(3500)).default);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3481),l=a(r(4262)),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(r){var o=i.default.createCard("math",l.default.fromLake(r),n);e.setNode(o)}}}),t}(u.LakeCardReader);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"writeAsInlineCode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.createElement("span",{className:"ne-math",style:{padding:"0 2px",border:"1px solid #e8e8e8",borderRadius:"2px",background:"#f9f9f9"}});e.appendChild(r,e.createTextNode(t)),e.setNode(r)}}),Object.defineProperty(t.prototype,"writeAsImage",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.createElement("span",{className:"ne-math"}),n=e.createElement("img",{attrs:{src:t}});e.appendChild(r,n),e.setNode(r)}}),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(t.attrs||{}).value||{},n=r.code,o=r.url;n&&(o?this.writeAsImage(e,o):this.writeAsInlineCode(e,n))}}),t}(a(r(3470)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3547)),u=a(r(4262)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){if(r){var o=e.createInlineCard("math",u.default.toLake(r),n);e.setNode(o)}}}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=((t.attrs||{}).value||{}).code;r&&e.append("$".concat(String(r).trim(),"$"))}}),t}(a(r(3639)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3493),c=r(3463),s=a(r(5015)),f=a(r(5016)),d=a(r(5017)),p=a(r(5052)),h=a(r(5053)),y=r(4264),b=r(5054),m=a(r(5055)),v=a(r(4269)),g=r(4276),_=a(r(5056)),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r,n,o,a,i,s;e.registerBlockCard(t.cardName),null===(r=e.getService(u.IHTMLKernelService.ID))||void 0===r||r.registerNodeHTMLWriter(h.default.NodeNames,new h.default),null===(n=e.getService(c.ILakeKernelService.ID))||void 0===n||n.registerLakeCardReader(d.default.CardNames,new d.default(this.option.services)),this.option.recognizeYuque&&!e.plugins.find((function(e){return"yuque"===e.constructor.PluginName}))&&(v.default.referenceURL=this.kernel.option.currentURL,null===(o=e.getService(c.ILakeKernelService.ID))||void 0===o||o.registerLakeCardReader("yuque",new m.default({yuque:v.default},e.getService(g.IBookmarkKernelService.ID))),null===(a=e.getService(l.IINodeReaderKernelService.ID))||void 0===a||a.registerINodeCardReader("yuque",new _.default({yuque:v.default},e.getService(g.IBookmarkKernelService.ID)))),null===(i=e.getService(l.IINodeReaderKernelService.ID))||void 0===i||i.registerINodeCardReader(f.default.CardName,new f.default),null===(s=e.getService(c.ILakeKernelService.ID))||void 0===s||s.registerLakeCardWriter("thirdparty",new p.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:y.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:b.ThirdpartyOption}),Object.defineProperty(t,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:"thirdparty"}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[s.default]}),t}(i.KernelPlugin);t.default=w},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=r(4264),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);if(!o||"link"!==o.nodeName)return e.cancelJob(n),!1;var u=n.selectNode(o);u=a.SelectionUtil.deleteContent(n,u),i.assert.fatal(u.collapsed,"plugins/thirdparty/src/kernel/commands/link-to-thirdparty-command.ts:31");var l=a.CardUtil.insertCardNode(n,u,"thirdparty",r).cardNode;n.setSelection([n.newRange(n.newPosition(l.parentNode,l.offset+1))]),e.commitJob(n)}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.linkToThirdparty}),t}(a.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"thirdparty"}),t}(a(r(3500)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3481),l=a(r(3931)),c=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"customServices",{enumerable:!0,configurable:!0,writable:!0,value:t}),r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=i.default.createCard("thirdparty",l.default.fromLake(r,t,this.customServices),n);e.setNode(o)}}),Object.defineProperty(t,"CardNames",{enumerable:!0,configurable:!0,writable:!0,value:["thirdparty","riddle","youku","processon"]}),t}(u.LakeCardReader);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3549),u=r(3520),l=r(3491),c=a(r(3492)),s=/^(https:\/\/(?:pd|antpim|product)\.alipay\.com\/)(#\/)?(tech\/prod)\/(view|fullview)\/(\S+)$/,f=[{id:"riddle",name:"Riddle",domain:["https://riddle.alibaba-inc.com/"],urlPattern:[/^https:\/\/riddle\.alibaba-inc\.com\/riddles\/.+/],toEmbedUrl:function(e){if(e.includes("/iframe"))return e;var t=new URL(e);return t.pathname.endsWith("/iframe")||(t.pathname+="/iframe"),t.toString()}},{id:"deepinsight",name:"DeepInsight",domain:["https://deepinsight.alipay.com/","https://alisis.alipay.com/","https://datainsight.alipay.com/","https://deepinsight.alibaba-inc.com/","https://alisis.alibaba-inc.com/","https://datainsight.alibaba-inc.com/"],urlPattern:[/^https:\/\/(deepinsight|alisis|datainsight)\.(alipay|alibaba-inc)\.com\/(pc|mobile|view|assets)\.htm\?reportId=[^\/]+/]},{id:"openbox",name:"Openbox",domain:["https://herbox-embed.alipay.com/","https://herbox.online/","https://opendocs.antfin-inc.com/","https://opendocs.alipay.com/"],urlPattern:[/^https:\/\/herbox\.online\/p\/.+/,/^https:\/\/herbox-embed\.alipay\.com\/s\/.+/,/^https:\/\/herbox-embed\.alipay\.com\/p\/.+/,/^https:\/\/opendocs.antfin-inc.com\/openbox\/mini\/[a-zA-Z0-9_-]+\/[a-zA-Z0-9_-]+/,/^https:\/\/opendocs.alipay.com\/openbox\/mini\/[a-zA-Z0-9_-]+\/[a-zA-Z0-9_-]+/]},{id:"anymock",name:"Anymock",domain:["https://tools.antfin-inc.com/"],urlPattern:[],toEmbedUrl:function(e){if(!window.location.pathname.endsWith("/edit"))return e;var t=new URL(e);return t.searchParams.set("edit","1"),t.toString()}},{id:"fbi",name:"FBI",domain:["https://fbi.alibaba-inc.com/","https://quark.alibaba-inc.com/","https://fbi-sg.alibaba-inc.com/","https://quark.alibaba.com/","https://sg.fbi.alibaba-inc.com/"],urlPattern:[]},{id:"oneapi",name:"OneAPI",domain:["https://oneapi.alipay.com/"],urlPattern:[/^https:\/\/oneapi\.alipay\.com\/web\/app\/card\//]},{id:"tinyjs",name:"Tinyjs",domain:["http://tinyjs.alibaba.net/"],urlPattern:[/^http:\/\/tinyjs\.alibaba\.net\/static\/(examples|plugins|playground)\//]},{id:"youshu",name:"Youshu",domain:["https://youshu.alibaba-inc.com/"],urlPattern:[/^https:\/\/youshu\.alibaba-inc\.com\/visual\/cardview\.htm/]},{id:"bakery",name:"Bakery",domain:["https://bakery.alipay.com/"],urlPattern:[/^https:\/\/bakery\.alipay\.com\/bakery-preview/,/^https:\/\/bakery\.alipay\.com\/bakery-preview\/miniapp/,/^https:\/\/bakery\.alipay\.com\/bakery-preview\/yuque/]},{id:"pipcook",name:"Pipcook",domain:["https://pipcook.alibaba-inc.com/"],urlPattern:[]},{id:"cap",name:"Cap",domain:["https://cap.alibaba-inc.com","https://c-data.alibaba-inc.com"],urlPattern:[/^https:\/\/cap\.alibaba-inc\.com\?bizLine=(.+)#\!\/dimension\/viewport(\S{0,2048})$/,/^https:\/\/cap\.alibaba-inc\.com\?bizLine=(.+)#\!\/dimension\/form(\S{0,2048})$/,/^https:\/\/c-data\.alibaba-inc\.com\/dimension\/viewport\?bizLine=(\S{0,2048})$/,/^https:\/\/c-data\.alibaba-inc\.com\/dimension\/form\?bizLine=(\S{0,2048})$/]},{id:"dataphin",name:"Dataphin",domain:["https://dataphin.alipay.com/"],urlPattern:[]},{id:"ifcriskmatrixus",name:"Ifcriskmatrixus",domain:["https://ifcriskmatrixus.alipay.com/"],urlPattern:[/^https:\/\/ifcriskmatrixus\.alipay\.com\/horizon\.htm#\/doc\//]},{id:"DONE",name:"done",domain:["https://done.alibaba-inc.com/"],urlPattern:[/^https:\/\/done\.alibaba-inc\.com\/file\/[^\/]{5,30}\/[^\/]{5,30}\/preview/,/^https:\/\/done\.alibaba-inc\.com\/share\/file\/[^\/]{5,30}/]},{id:"LOG",name:"log",domain:["https://log.alipay.com/"],urlPattern:[/^https:\/\/log\.alipay\.com\/index_v4\.htm#\/iterationDetail/]},{id:"ALEX",name:"alex",domain:["https://alex.alipay.com/"],urlPattern:[/^https:\/\/alex\.alipay\.com\/./]},{id:"Langya",name:"langya",domain:["https://langya.alibaba-inc.com/"],urlPattern:[/^https:\/\/langya\.alibaba-inc\.com\/prd/]},{id:"cpxq",name:"产品星球",domain:["https://pd.alipay.com/","https://product.alipay.com/","https://antpim.alipay.com/"],urlPattern:[s,/^https:\/\/pd\.alipay\.com\/product\/releasenote\?/],toEmbedUrl:function(e){return e.replace(s,(function(e,t,r,n,o,a){return t+n+"/fullview/"+a}))}},{id:"smallfish",name:"SmallFish",domain:["https://smallfish.antfin-inc.com/"],urlPattern:[/^https:\/\/smallfish\.antfin-inc\.com\/(myapi|jsapi)\/.*?\.html($|\?|#)/i],toEmbedUrl:function(e){try{var t=new URL(e);return t.search="embedded=1",t.toString()}catch(e){return null}}},{id:"easyapi",name:"EasyApi",domain:["https://easy-api.alibaba-inc.com/","https://easy-api.alibaba.net/"],urlPattern:[/^https:\/\/easy-api\.alibaba-inc\.com\/interface\//i,/^https:\/\/easy-api\.alibaba\.net\/interface\//i,/^https:\/\/easy-api\.alibaba-inc\.com\/diff/i,/^https:\/\/easy-api\.alibaba\.net\/diff/i]},{id:"cainiaoui",name:"CaiNiaoUI",domain:["https://cn.alicdn.com/"],urlPattern:[/^https:\/\/cn\.alicdn\.com\/lib\/cn-ui\//i]},{id:"sinan",name:"sinan",domain:["https://sn.alipay.com/"],urlPattern:[/^https:\/\/sn\.alipay\.com\/archcompass\/card\//i]},{id:"wanxiangapi",name:"WanXiangAPI",domain:["https://everything.amap.com/"],urlPattern:[/^https:\/\/everything\.amap\.com\/ApiManage\/list_api\/[^\/]+\/[^\/]+\/detail_api_compact/]},{id:"hybrid",name:"Hybrid",domain:["https://hybrid.antfin-inc.com/"],urlPattern:[/^https:\/\/hybrid\.antfin-inc\.com\/iframe\/preview/i,/^https:\/\/hybrid\.antfin-inc\.com\/preview\/widget/i]},{id:"aistudio",name:"AIStudio",domain:["https://aistudio.alipay.com/"],urlPattern:[/^https:\/\/aistudio\.alipay\.com\/libro\/shared/i]},{id:"dafu",name:"Dafu",domain:["https://dafu.alipay.com"],urlPattern:[/^https:\/\/dafu\.alipay\.com\/riskManageProduction\/riskReport\/work/,/^https:\/\/dafu\.alipay\.com\/riskManageProduction\/riskReport\/[0-9]+/,/^https:\/\/dafu\.alipay\.com\/riskManageProduction\/riskDeployPlan\/work/,/^https:\/\/dafu\.alipay\.com\/riskManageProduction\/riskDeployPlan\/[0-9]+/]},{id:"iablityfactory",name:"IAbilityFactory",domain:["https://iabilityfactoryfront.alipay.com"],urlPattern:[/^https:\/\/iabilityfactoryfront\.alipay\.com\/production/]},{id:"utm",name:"UTM",domain:["https://tools.antfin-inc.com"],urlPattern:[/^https:\/\/tools\.antfin-inc\.com\/utm/]}];function d(e){return e?f.find((function(t){return!!t.domain.find((function(t){return e.startsWith(t)}))})):null}var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/nbdsfgj"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[(0,i.i18n)("内部三方工具"),f.map((function(e){return e.name})),"neibudisanfanggongju"]}}),Object.defineProperty(t,"getPlaceholder",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=(e=(0,i.i18n)("、"),f.map((function(e){return e.name})).join(e));return"".concat((0,i.i18n)("粘贴页面链接到此处，支持：")).concat(t)}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=d(e);return!!t&&(!(t.urlPattern.length>0)||t.urlPattern.some((function(t){return t.test(e)})))}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if((null==e?void 0:e.startsWith("<iframe"))&&(e=(0,u.extractSrc)(e)),!t.isValid(e))return null;var r=d(e);return r?("function"==typeof r.toEmbedUrl&&(e=r.toEmbedUrl(e)),e):null}}),Object.defineProperty(t,"getIframeAllow",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=d(e);return t&&"riddle"===t.id?"clipboard-write https://riddle.alibaba-inc.com;":null}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:l.CARD_TYPE.DEVELOPMENT,name:"ali",example:null,simple:null,help:"https://yuque.antfin.com/lark/help/embed_third#FhgMF",get label(){return(0,i.i18n)("内部三方工具")},maximize:!0,resize:!0}}),t}(c.default);t.default=p},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=u(r(3320)),c=u(r(4266)),s=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_threadOptions",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(r,"_thread",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(r,"_id",{enumerable:!0,configurable:!0,writable:!0,value:""}),r}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.removeAllListeners()}}),Object.defineProperty(t.prototype,"reset",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._id=e}}),Object.defineProperty(t.prototype,"hasTask",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!this._thread&&this._thread.hasTask(e)}}),Object.defineProperty(t.prototype,"getTask",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._thread?this._thread.getTask(e):null}}),Object.defineProperty(t.prototype,"addTask",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._thread||(this._thread=this._createThread()),this._thread.addTask(e),e}}),Object.defineProperty(t.prototype,"isCompleted",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!this._thread||this._thread.isCompleted()}}),Object.defineProperty(t.prototype,"_createThread",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=new c.default(this._threadOptions);return t.on("start",(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.emit.apply(e,i(["start"],a(t),!1))})),t.on("progress",(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.emit.apply(e,i(["progress"],a(t),!1))})),t.on("finished",(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.emit.apply(e,i(["finished"],a(t),!1)),e._thread=null})),t}}),t}(l.default);t.default=s},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(4267)),a=function(){function e(e,t){Object.defineProperty(this,"_taskManager",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_taskAliveChecker",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"_virtualTasks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._taskManager=null,this._virtualTasks=null}}),Object.defineProperty(e.prototype,"observe",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this._taskManager.hasTask(e))return this._taskManager.getTask(e);if(this._virtualTasks[e])return this._virtualTasks[e];var r=new o.default(e,t,this._taskAliveChecker);return this._virtualTasks[e]=r,r}}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3320),u=r(3454),l=a(r(3924)),c=a(r(4268)),s=r(3925),f=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"domNode",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(r,"currentThemeSchema",{enumerable:!0,configurable:!0,writable:!0,value:new c.default}),Object.defineProperty(r,"schemeMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(r,"selectorUsedDoms",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),r.schemeMap.set("default",r.currentThemeSchema),r}return o(t,e),Object.defineProperty(t.prototype,"updateStyles",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.currentThemeSchema.apply(this.domNode)}}),Object.defineProperty(t.prototype,"removeCurrentTheme",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.currentThemeSchema.remove(this.domNode)}}),Object.defineProperty(t.prototype,"registerTheme",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){(0,u.assert)(!this.schemeMap.get(e),"the theme schema named ".concat(e," has already register"),"framework/infra/src/theme/index.ts:43"),this.schemeMap.set(e,t)}}),Object.defineProperty(t.prototype,"setActiveTheme",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,r=this.schemeMap.get(e);r&&this.currentThemeSchema!==r&&(this.currentThemeSchema&&this.removeCurrentTheme(),this.selectorUsedDoms.forEach((function(e){e.classList.remove(t.currentThemeSchema.selector),e.classList.add(r.selector)})),this.currentThemeSchema=r,this.updateStyles(),this.emit("themeChange"))}}),Object.defineProperty(t.prototype,"bindThemeSelector",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return this.selectorUsedDoms.has(e)?(console.error("已经对该元素绑定过主题选择器"),function(){}):(this.selectorUsedDoms.add(e),this.currentThemeSchema&&e.classList.add(this.currentThemeSchema.selector),function(){t.selectorUsedDoms.delete(e)})}}),Object.defineProperty(t.prototype,"isDark",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.currentThemeSchema.colorScheme===s.ColorScheme.DARK}}),Object.defineProperty(t.prototype,"getColorByToken",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return void 0===t&&(t="#fff"),this.currentThemeSchema.getColor(e)||t}}),Object.defineProperty(t.prototype,"transform",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return this.currentThemeSchema.transform(e,t,r)}}),Object.defineProperty(t.prototype,"toPersistentValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&this.transform(this.currentThemeSchema.colorScheme,null,e)||e}}),Object.defineProperty(t.prototype,"toVisualValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&this.transform(null,this.currentThemeSchema.colorScheme,e)||e}}),Object.defineProperty(t.prototype,"getSchemeName",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.isDark()?"dark":"light"}}),Object.defineProperty(t.prototype,"getThemeSelector",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.currentThemeSchema.selector}}),Object.defineProperty(t,"colorRegistry",{enumerable:!0,configurable:!0,writable:!0,value:l.default}),t}(i.EventEmitter);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3549),u=r(3491),l=a(r(3492)),c=["https://map.gaode.com/","https://ditu.gaode.com/","https://www.gaode.com/","https://www.amap.com/","https://ditu.amap.com/","https://amap.com/","https://gaode.com/"],s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/gddt"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return["gaode","ditu","amap","高德","地图","gd","gaodeditu"]}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)return!1;for(var t=0,r=c.length;t<r;t++)if(e.startsWith(c[t]))return!0;return!1}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return t.isValid(e)?e:null}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:u.CARD_TYPE.MAP,name:"amap",example:"https://ditu.amap.com/",simple:"https://ditu.amap.com…",get label(){return(0,i.i18n)("高德地图")},maximize:!0,resize:!0}}),t}(l.default);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3549),u=r(3520),l=r(3491),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/blbl"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName(),"bi","哔哩哔哩","bilibili"]}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r=t._getMatchUrl(e);if(r)try{var n=new URL(r);n.searchParams.set("autoplay","0"),r=n.toString()}catch(e){}return r}}),Object.defineProperty(t,"_getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if((null==e?void 0:e.startsWith("<iframe"))&&(e=(0,u.extractSrc)(e)),null==e?void 0:e.startsWith("https://player.bilibili.com/player.html?"))return e;if(null==e?void 0:e.startsWith("http://player.bilibili.com/player.html?"))return e.replace(/^http:/i,"https:");var t=null==e?void 0:e.match(/^https?:\/\/\w+\.bilibili\.com\/video\/av(\d+)/i);if(t){var r=t[1],n=e.match(/p=(\d+)/),o=null;return n&&(o=n[1]),"https://player.bilibili.com/player.html?aid=".concat(r).concat(o?"&p=".concat(o,"&page=").concat(o):"")}try{var a=new URL(e),i=(a.origin+a.pathname).match(/^https?:\/\/\w+\.bilibili\.com\/video\/(bv[^/]+)\/?$/i);if(i){r=i[1];var l=a.searchParams,c=l.get("p"),s=l.get("t");return"https://player.bilibili.com/player.html?bvid=".concat(r).concat(c?"&p=".concat(c,"&page=").concat(c):"").concat(s?"&t=".concat(s):"")}}catch(e){}return null}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&e.match(/^https:\w+\.bilibili\.com\//)}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:l.CARD_TYPE.MEDIA_VIDEO,name:"bilibili",example:"https://player.bilibili.com/player.html?aid=55895675",simple:"https://www.bilibili.com…",get label(){return(0,i.i18n)("哔哩哔哩")},maximize:!1,resize:!1}}),t}(a(r(3492)).default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3491),u=a(r(3492)),l=/^(https?:\/\/[\S]+?\.canva\.cn\/design\/)((?:[^/]+\/)+)(view|edit|watch)$/i,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/can"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName(),"canva"]}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e;try{t=new URL(t)}catch(e){return null}t=t.origin+t.pathname;var r=l.exec(t);if(r&&r[2]){var n=r[2].split("/"),o=r[2];n.length>1&&n[0]&&(o=n[0]+"/");var a="edit"===r[3]?"view":r[3];return r[1]+o+a+"?embed"}return null}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&e.match(/^https:\/\/[\w_-~.]+?\.canva\.cn\//)}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:i.CARD_TYPE.DESIGN,name:"canva",example:"https://www.canva.cn/design/DAD3c63mhHU/view?embed",simple:"https://www.canva.cn/design/…",label:"Canva",maximize:!0,resize:!0}}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3520),u=r(3491),l=a(r(3492)),c=[/^https:\/\/codepen\.io\/[^/]+\/(embed|pen|full)\//],s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/cod"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName(),"codepen"]}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return c.some((function(t){return t.test(e)}))}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?(e.startsWith("<iframe")&&(e=(0,i.extractSrc)(e)),t.isValid(e)?e.replace("/pen/","/embed/"):null):null}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:u.CARD_TYPE.DEVELOPMENT,name:"codepen",example:"https://codepen.io/afc163-1472555193/embed/oNXqWGP",simple:"https://codepen.io/afc163…",label:"CodePen",maximize:!0,resize:!0}}),t}(l.default);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3520),u=r(3491),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return t.getName()}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName()]}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return null==e?void 0:e.startsWith("https://everest.aliyun-inc.com/open/api/")}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?(e.startsWith("<iframe")&&(e=(0,i.extractSrc)(e)),t.isValid(e)?e:null):null}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:u.CARD_TYPE.DEVELOPMENT,name:"everest",example:"https://everest.aliyun-inc.com/open/api/alicloud_drawio_ppt/anonymous/1234/0.1/en.html",simple:"https://everest.aliyun-inc.com/open/api/...",label:"everest",maximize:!0,resize:!0}}),t}(a(r(3492)).default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3520),u=r(3491),l=a(r(3492)),c=[/^https:\/\/www\.figma\.com\/embed/],s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/fig"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName(),"figma"]}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return c.some((function(t){return t.test(e)}))}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?(e.startsWith("<iframe")?e=(0,i.extractSrc)(e):(null==e?void 0:e.match(/^https:\/\/www\.figma\.com\/(file|proto)\//))&&(e="https://www.figma.com/embed?embed_host=share&url="+encodeURIComponent(e)),t.isValid(e)?e:null):null}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:u.CARD_TYPE.DESIGN,name:"figma",example:"https://www.figma.com/embed?embed_host=share&url=https%3A%2F%2Fwww.figma.com%2Ffile%2FqwccoVDBmt1FZ6U4eGus2p%2F%25E8%25AF%25AD%25E9%259B%2580%25E6%258F%2592%25E5%259B%25BE",simple:"https://www.figma.com…",label:"Figma",maximize:!0,resize:!0}}),t}(l.default);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3549),u=r(3520),l=r(3491),c=a(r(3492)),s="?background=white&banner=show&embedded=true&inner_redirect=true",f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/jsj"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName(),"jsj",t.getLabel()]}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&e.match(/^https:\/\/([^/]+\.)?jinshuju\.(com|net)\//)}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r,n=!1;if(!e)return null;if(e.startsWith("<iframe")&&(e=(0,u.extractSrc)(e),n=!0),!t.isValid(e))return null;try{r=new URL(e)}catch(e){return null}var o=r.pathname,a=r.origin;return o.startsWith("/f/")?n?e:a+o+s:/^\/forms\/([^/]+)(?:\/[^/]*)?$/.test(o)?a+"/f/"+RegExp.$1+s:null}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:l.CARD_TYPE.FORM,name:"jinshuju",example:null,simple:"https://jinshuju.net/f/…",get label(){return(0,i.i18n)("金数据")},maximize:!0,resize:!0}}),t}(c.default);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3549),u=r(3491),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/msjj"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName(),t.getLabel(),"jcode","jj","code","码上掘金"]}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.match(/^https:\/\/code\.juejin\.cn\/pen\//)}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)return null;if(!t.isValid(e))return null;try{var r=new URL(e);return"true"!==r.searchParams.get("embed")&&r.searchParams.set("embed","true"),r.toString()}catch(e){return console.error(e),null}}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:u.CARD_TYPE.DEVELOPMENT,name:"juejin",example:"https://code.juejin.cn/pen/7111233570496053255",simple:"https://code.juejin.cn/pen/...",get label(){return(0,i.i18n)("码上掘金")},maximize:!1,resize:!1}}),t}(a(r(3492)).default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3549),u=r(3520),l=r(3491),c=a(r(3492)),s=["https://free.modao.cc/app/","https://org.modao.cc/","https://modao.cc/","https://orgnext.modao.cc"],f=["https://free.modao.cc/app/design/"],d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/md"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName(),t.getLabel(),"md","modao"]}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)return!1;for(var t=0,r=f.length;t<r;t++)if(e.startsWith(f[t]))return!1;for(t=0;t<s.length;t++){var n=s[t];if(e.startsWith(n))return!0}return!1}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)return null;if(e.startsWith("<iframe")&&(e=(0,u.extractSrc)(e)),t.isValid(e)){var r=new URL(e,s[2]);return e=r.origin+r.pathname,r.pathname.startsWith("/app/")&&(e.endsWith("embed")?e=e.replace("embed","embed/v2"):e.endsWith("/embed/v2")||(e+="/embed/v2")),e+r.hash}}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:l.CARD_TYPE.DESIGN,name:"modao",example:"https://free.modao.cc/app/2cd26580a6717a147454df7470e7ec464093cba3/embed/v2#screen=sk71k6d1dfxulzx",simple:"<iframe src=…",get label(){return(0,i.i18n)("墨刀")},maximize:!0,resize:!0}}),t}(c.default);t.default=d},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3549),u=r(3520),l=r(3491),c=a(r(3492)),s=/^https?:\/\/music\.163\.com\/(#\/)?song\?id\=(\d+)/i,f=/(https?:\/\/y\.music\.163\.com\/m\/song\?(\S*))/i,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/wyyyy"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName(),t.getLabel(),"wangyiyunyinyue","wy"]}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.startsWith("http://music.163.com/outchain/player")||e.startsWith("https://music.163.com/outchain/player")}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)return null;if(e.startsWith("<iframe"))e=(e=(0,u.extractSrc)(e))&&e.replace("auto=1&","&auto=0&");else if(s.test(e))e="https://music.163.com/outchain/player?type=2&id=".concat(RegExp.$2,"&auto=0&height=66");else if(f.test(e)){var r=RegExp.$1;try{var n=new URL(r).searchParams.get("id");n&&(e="https://music.163.com/outchain/player?type=2&id=".concat(n,"&auto=0&height=66"))}catch(e){}}return t.isValid(e)?e:null}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:l.CARD_TYPE.MEDIA_AUDIO,name:"music163",simple:"https://music.163.com/song…",example:"https://music.163.com/outchain/player?type=2&id=1420830402&auto=0&height=66",get label(){return(0,i.i18n)("网易云音乐")},maximize:!1,resize:!1}}),t}(c.default);t.default=d},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3520),u=r(3491),l=a(r(3492)),c=["www.processon.com","wxmp.processon.com","assets.processon.com","dingtalk.processon.com","feishu.processon.com","weixin.processon.com"],s=["/view/link/","/embed/"],f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/pro"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName(),"processon"]}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{var t=new URL(e),r=t.protocol,n=t.host,o=t.pathname;return("http:"===r||"https:"===r)&&(!!c.includes(n)&&s.some((function(e){return o.startsWith(e)})))}catch(e){return!1}}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if((null==e?void 0:e.startsWith("<iframe"))&&(e=(0,i.extractSrc)(e)),!e)return null;try{var r=new URL(e),n=r.pathname;["/mindmap/","/diagraming/","/apps/"].every((function(e){return n.startsWith(e)&&(r.pathname="/embed/"+r.pathname.slice(e.length)),!0}));var o=r.toString();return t.isValid(o)?o:null}catch(e){return null}}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:u.CARD_TYPE.DESIGN,name:"processon",example:"https://www.processon.com/embed/5d006c43e4b071ad5a206ed2",simple:"https://www.processon.c…",label:"ProcessOn",maximize:!0,resize:!0}}),t}(l.default);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3549),u=r(3491),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/tbsp"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName(),t.getLabel(),"tb","taobaoshipin"]}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return null==e?void 0:e.startsWith("https://cloud.video.taobao.com/")}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return t.isValid(e)?e:null}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:u.CARD_TYPE.MEDIA_VIDEO,name:"taobao",example:null,simple:"https://cloud.video.taobao.com…",get label(){return(0,i.i18n)("淘宝视频")},maximize:!1,resize:!1}}),t}(a(r(3492)).default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3549),u=r(3520),l=r(3491),c=a(r(3492)),s=/https?:\/\/\S*\.xiami\.com\/song\/([^/?#]+)/,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/xm"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName(),t.getLabel(),"xm"]}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.startsWith("https://h5.xiami.com/app")||e.startsWith("http://h5.xiami.com/app")||e.startsWith("https://www.xiami.com/webapp/")}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?(e.startsWith("<iframe")?e=(e=(0,u.extractSrc)(e))&&e.replace("autoPlay=1&",""):s.test(e)&&(e="https://www.xiami.com/webapp/embed-player?id="+RegExp.$1),t.isValid(e)?e:null):null}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:l.CARD_TYPE.MEDIA_AUDIO,name:"xiami",available:!1,example:"https://www.xiami.com/webapp/embed-player?id=1816059093",simple:"https://xiami.com/song/181…",get label(){return(0,i.i18n)("虾米")},maximize:!1,resize:!1}}),t}(c.default);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3520),u=r(3491),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getCardSelect",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.startsWith("http://www.ximalaya.com/thirdparty/player/sound/")||e.startsWith("https://www.ximalaya.com/thirdparty/player/sound/")}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?(e.startsWith("<iframe")&&(e=(0,i.extractSrc)(e)),t.isValid(e)?e:null):null}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:u.CARD_TYPE.MEDIA_AUDIO,name:"ximalaya",example:null,maximize:!1,resize:!1}}),t}(a(r(3492)).default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3549),u=r(3520),l=r(3491),c=a(r(3492)),s=[/^https:\/\/[\w-_~]+?\.aliwork\.com\/o\/.+/],f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/yd"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName(),"yida","yd"]}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return s.some((function(t){return t.test(e)}))}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?(e.startsWith("<iframe")&&(e=(0,u.extractSrc)(e)),t.isValid(e)?e:null):null}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:l.CARD_TYPE.DEVELOPMENT,name:"yida",example:"https://www.aliwork.com/o/open_test1",simple:"https://www.aliwork.com/o/open_test1",get label(){return(0,i.i18n)("宜搭")},maximize:!0,resize:!0}}),t}(c.default);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3549),u=r(3520),l=r(3491),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getMainSearch",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"/yk"}}),Object.defineProperty(t,"getKeywords",{enumerable:!1,configurable:!0,writable:!0,value:function(){return[t.getName(),t.getLabel(),"yk","youku"]}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.match(/^https:.*\.youku\.com\//)}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)return null;if(e.startsWith("<iframe")&&(e=(0,u.extractSrc)(e)),null==e?void 0:e.startsWith("https://player.youku.com/embed/"))return e;var t=null==e?void 0:e.match(/^https?:\/\/\w+\.youku\.com\/v_show\/id_([^.]+)/i);return t?"https://player.youku.com/embed/".concat(t[1]):null}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:l.CARD_TYPE.MEDIA_VIDEO,name:"youku",example:"https://player.youku.com/embed/XNDc1NDU1MTQwOA==",simple:"https://v.youku.com/v_show…",get label(){return(0,i.i18n)("优酷")},maximize:!1,resize:!1}}),t}(a(r(3492)).default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3520),u=r(3491),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"getCardSelect",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),Object.defineProperty(t,"isValid",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.startsWith("https://www.youtube.com/embed/")}}),Object.defineProperty(t,"getMatchUrl",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?(e.startsWith("<iframe")&&(e=(0,i.extractSrc)(e)),t.isValid(e)?e:null):null}}),Object.defineProperty(t,"config",{enumerable:!0,configurable:!0,writable:!0,value:{type:u.CARD_TYPE.MEDIA_VIDEO,name:"youtube",example:null,maximize:!1,resize:!1}}),t}(a(r(3492)).default);t.default=l},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(3725),t),o(r(3770),t),o(r(4270),t),o(r(4271),t),o(r(4272),t),o(r(4273),t),o(r(5040),t),o(r(5041),t),o(r(4274),t),o(r(5042),t),o(r(4275),t),o(r(5048),t),o(r(5049),t),o(r(5050),t)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDocReadUrl=void 0,t.getDocReadUrl=function(e,t){var r=new URL(e),n=r.origin,o=r.pathname,a="".concat(n).concat(o.replace(/\/edit$/,""));return t?"".concat(a,"#").concat(t):a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileDownloadUrl=void 0;var n=r(3912),o=r(4274);t.getFileDownloadUrl=function(e,t,r){void 0===t&&(t=""),void 0===r&&(r="");var a=(0,o.getFileKeyByUrl)(e);if(!a)return(0,n.sanitizeUrl)(e);var i="".concat(t,"/attachments/").concat(a,"?from=").concat(encodeURIComponent(r));return(0,n.sanitizeUrl)(i)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getYuqueDocPreviewURL=void 0;var o=r(3725),a=r(5043),i=r(4273),u=r(3770),l=r(4270),c=r(4272),s=r(5044),f=r(4271),d=r(5045),p=n(r(5046)),h=r(5047),y=r(4275),b=r(3721);t.getYuqueDocPreviewURL=function(e,t,r){var n=void 0===r?{}:r,m=n.allowGroupLink,v=void 0!==m&&m,g=n.allowLarkURL,_=void 0!==g&&g,w=n.allowEditURL,O=void 0!==w&&w,E=n.theme,P=void 0===E?void 0:E;if(!e)return{success:!1,message:(0,b.i18n)("无效链接"),errorCode:y.yuqueDocURLParseErrorCode.empty};if(e=(0,p.default)(e),O&&(0,l.isYuqueEditURL)(e)){var j=new URL(e,"http://localhost/");j.pathname=j.pathname.substring(0,j.pathname.length-5),e=j.toString()}if((0,f.isYuquePatternsURL)(e))return{isOther:!0,success:!1,message:(0,b.i18n)("不支持嵌入该链接"),errorCode:y.yuqueDocURLParseErrorCode.invalid,url:e};if((0,s.isYuqueJoinUrl)(e))return{isOther:!0,success:!1,message:(0,b.i18n)("不支持嵌入协作链接，请替换为地址栏链接或分享链接"),errorCode:y.yuqueDocURLParseErrorCode.invalid,url:e};if(!((0,u.isYuqueDomainURL)(e)||_&&(0,o.isLarkDomainURL)(e)||(0,a.isTheSameHost)(e)))return{success:!1,message:(0,b.i18n)("不支持嵌入该链接"),errorCode:y.yuqueDocURLParseErrorCode.invalid};if(!(0,d.isYuqueValidURL)(e,t,v))return{success:!1,message:(0,b.i18n)("不支持嵌入该链接"),errorCode:y.yuqueDocURLParseErrorCode.invalid};var C=(0,h.transformDocURL)(e,t,P);return C?{isBook:(0,i.isYuqueBookUrl)(e),isGroup:(0,c.isYuqueGroupURL)(e)&&!!v,success:!0,url:C,errorCode:y.yuqueDocURLParseErrorCode.normal}:{success:!1,message:(0,b.i18n)("不支持嵌入该链接"),errorCode:y.yuqueDocURLParseErrorCode.invalid}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTheSameHost=void 0,t.isTheSameHost=function(e){var t;try{var r=new URL(e).hostname;return(null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.hostname)===r}catch(e){return!1}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isYuqueJoinUrl=void 0;var n=r(3725),o=r(3770);t.isYuqueJoinUrl=function(e){return!(!(0,o.isYuqueDomainURL)(e)&&!(0,n.isLarkDomainURL)(e))&&/\/join\?token=/.test(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isYuqueValidURL=void 0;var n=/^\/[^/]{2,}$/,o=/^\/[^/]{2,}\/[^/]+(\/[^/]+)?$/,a=/\/r\/notes?\/(share\/)?[^/]+$/,i=/^\/[^/]{2,}\/[^/]+\/artboards\/[^/]+$/;var u=[function(e,t,r){void 0===r&&(r=!1);var u=new URL(e,"http://localhost/").pathname;return!!o.test(u)||(!!a.test(u)||(!!i.test(u)||!!r&&n.test(u)))},function(e,t){var r=new URL(e,"http://localhost").pathname;try{var n=new URL(t);return n.pathname!==r&&n.pathname+"/edit"!==r}catch(e){return!0}},function(e){var t;try{t=new URL(e).pathname}catch(e){return!1}return!["/dashboard"].some((function(e){return t===e}))&&(!["/settings/applications/","/login/callback","/login/oauth","/sites/","/settings/callback/","/dashboard/","/about/"].some((function(e){return t.startsWith(e)}))&&(!["/topics/"].some((function(e){return t.includes(e)}))&&!["/invitation","/apply","/settings/basic","/settings/advanced","/settings/lab","/topics/kanban","/settings/logs","/s","/watchers","/stargazers","/new"].some((function(e){return t.endsWith(e)}))))}];t.isYuqueValidURL=function(e,t,r){return!u.some((function(n){return!n(e,t,r)}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removePathSeparatorByReg=void 0;var n=/(\w\/)([^\s?#]+)/,o=/\/$/;function a(e){return e.replace(n,(function(e,t,r,n){return r&&r.endsWith("/")?t+r.slice(0,-1)+("string"==typeof n?n:""):e}))}t.removePathSeparatorByReg=a,t.default=function(e){try{var t=new URL(e);return"/"!==t.pathname&&(t.pathname=t.pathname.replace(o,"")),t.toString()}catch(t){return a(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformDocURL=void 0;var n=r(3725);t.transformDocURL=function(e,t,r){if((0,n.isLarkDomainURL)(e)&&(0,n.isLarkDomainURL)(t))try{var o=new URL(e).origin,a=new URL(t).origin;e=e.replace(o,a)}catch(e){}try{var i=new URL(e);if(i.searchParams.set("view","doc_embed"),"string"==typeof r&&i.searchParams.set("theme",r),i.hash.length>1){var u=i.hash.substring(1),l=decodeURIComponent(decodeURIComponent(u));l.match(/\s《.+》/)||i.searchParams.set("inner",l)}return i.hash="",i.toString()}catch(e){return null}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateCardLink=void 0,t.generateCardLink=function(e,t){try{var r=new URL(e);return r.hash="",r.pathname=r.pathname.replace(/\/edit$/,""),r.searchParams.set("inner",t),r.toString()}catch(e){return""}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateHashLink=void 0,t.generateHashLink=function(e,t){try{var r=new URL(e);return r.hash="",r.pathname=r.pathname.replace(/\/edit$/,""),r.hash=t,r.toString()}catch(e){return null}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentDocURL=void 0,t.getCurrentDocURL=function(){return new URL(location.pathname.replace(/\/edit\/?$/,""),location.href).toString()}},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a=r(4265),i=function(){function e(){}return Object.defineProperty(e,"getTypeByURL",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var n=e.matchURL(t,r);return n?n.Service.getName():null}}),Object.defineProperty(e,"isValidEntrance",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!!e&&(!(!t||!t[e])||!!a.Services[e])}}),Object.defineProperty(e,"matchURL",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,i;try{try{for(var u=o(Object.values(n(n({},a.Services),t||{}))),l=u.next();!l.done;l=u.next()){var c=l.value,s=c.getMatchUrl(e);if(s)return{Service:c,validUrl:s}}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}catch(e){console.warn(e)}return null}}),e}();t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3547)),u=a(r(3931)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o={};r.type&&(o.alias=r.type);var a=e.createBlockCard("thirdparty",u.default.toLake(r),n,o);e.setNode(a)}}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=(null===(r=t.attrs)||void 0===r?void 0:r.value)||{};if(n.src){var o=e.createElement("div",{className:"ne-thirdparty"}),a=e.createElement("a",{attrs:{href:n.src}});e.appendChild(a,e.createTextNode(n.src)),e.appendChild(o,a),e.setNode(o)}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["thirdparty"]}),t}(a(r(3470)).default);t.default=i},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ThirdpartyOption=void 0;var o=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=n({},e)}return Object.defineProperty(e.prototype,"editUI",{get:function(){return this._option.editUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewerUI",{get:function(){return this._option.viewerUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"services",{get:function(){return this._option.services},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recognizeYuque",{get:function(){return!!this._option.recognizeYuque},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"thirdparty"}),e}();t.ThirdpartyOption=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3481),l=a(r(3931)),c=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"customServices",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(n,"bookmarkService",{enumerable:!0,configurable:!0,writable:!0,value:r}),n}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=r.mode,a=r.src;if("embed"!==o||"string"!=typeof a)if("card"===o&&"string"==typeof a&&this.bookmarkService){u=this.bookmarkService.createBookmarkNode(r,"block",n);e.setNode(u)}else e.setNode(i.default.createCard("block",{cardName:t,cardValue:r},n));else{var u=i.default.createCard("thirdparty",l.default.fromLake({src:a,entrance:"yuque"},t,this.customServices),n);e.setNode(u)}}}),t}(u.LakeCardReader);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(3500)),l=a(r(3931)),c=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"customServices",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(n,"bookmarkService",{enumerable:!0,configurable:!0,writable:!0,value:r}),n}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=null===(r=t.attrs)||void 0===r?void 0:r.value;if(!n)return!0;var o=n.mode,a=n.src;if("embed"===o&&"string"==typeof a){var u=i.INodeHelper.createCard("thirdparty",l.default.fromLake({src:a,entrance:"yuque"},"yuque",this.customServices),t.id);return e.setNode(u),!0}if("card"===o&&"string"==typeof a&&this.bookmarkService){u=this.bookmarkService.createBookmarkNode(n,"block",t.id);return e.setNode(u),!0}return!0}}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(4136)),u=r(5058),l=r(4025),c=a(r(5059)),s=a(r(5060)),f=r(5061),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"beforeInsertTextInheritAttrs",{enumerable:!0,configurable:!0,writable:!0,value:function(e,r,n){return t.service.processBeforeInsertTextInheritAttrs(r,n)}}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.hasExtendMethod("normalizeINodeTree")||e.extendMethods({normalizeINodeTree:u.normalizeINodeTree}),e.hasExtendMethod("beforeInsertTextInheritAttrs")||e.extendMethods({beforeInsertTextInheritAttrs:this.beforeInsertTextInheritAttrs}),!e.hasExtend("text_helper")&&this.option.supportEmoji&&e.extend("text_helper",new s.default(e))}}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:f.KernelAssistantOption}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.pluginName}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:c.default}),t}(i.default);t.default=d},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeINodeTree=void 0;var o=r(3459),a=n(r(3458)),i=r(3454);function u(e,t){var r=[];return e.children&&e.children.forEach((function(e){r=r.concat(u(e,t))})),t(e,r)}t.normalizeINodeTree=function(e,t){i.assert.fatal(a.default.isFragmentNode(t),"plugins/kernel-assistant/src/kernel/helper/normalize-node-tree.ts:32");try{var r=u(t,(function(t,r){var n;if("ol"===t.name||"ul"===t.name)return r;if(!(null===(n=t.children)||void 0===n?void 0:n.length)&&e.hasCategory(t.name,[o.Category.TableHole,o.Category.Hole]))return[];var i=a.default.cloneNode(t),u=[i],l=i;return r.forEach((function(t){!e.hasCategory(t.name,[o.Category.BlockCard,o.Category.LikeRoot])||e.acceptNode(l.name,t.name)||e.hasCategory(l.name,o.Category.LikeRoot)?a.default.appendChild(l,t):(a.default.isEmptyNode(l)&&u.pop(),u.push(t),l=function(e){return"oli"===e.name||"uli"===e.name?a.default.createElement("p"):a.default.cloneNode(e)}(l),u.push(l))})),u.length>1&&a.default.isEmptyNode(l)&&u.pop(),u}));return i.assert.fatal(1===r.length,"plugins/kernel-assistant/src/kernel/helper/normalize-node-tree.ts:82"),i.assert.fatal(a.default.isFragmentNode(r[0]),"plugins/kernel-assistant/src/kernel/helper/normalize-node-tree.ts:83"),r[0]}catch(e){return console.error(e),t}}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"beforeInsertTextInheritAttrsProcess",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),t}return o(t,e),Object.defineProperty(t.prototype,"processBeforeInsertTextInheritAttrs",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o=t;try{for(var i=a(this.beforeInsertTextInheritAttrsProcess),u=i.next();!u.done;u=i.next()){o=(0,u.value)(e,o)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o}}),Object.defineProperty(t.prototype,"registerBeforeInsertTextInheritAttrs",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.beforeInsertTextInheritAttrsProcess.add(e)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.beforeInsertTextInheritAttrsProcess.clear()}}),t}(i(r(4243)).default);t.default=u},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(3454),i=o(r(3498)),u=o(r(127)),l=function(){function e(e){Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e})}return Object.defineProperty(e.prototype,"afterSplitText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){t.attrs.emoji&&e.setAttribute(r,"emoji",!0)}}),Object.defineProperty(e.prototype,"createTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if(!t.data)return[e.createTextNode("",n({},r),t.id)];var o=t.id;return i.default.splitEmoji(t.data).reduce((function(t,a,i){return a&&(t.push(e.createTextNode(a,i%2==1?n(n({},r),{emoji:!0}):(0,u.default)(r,"emoji"),o)),o=void 0),t}),[])}}),Object.defineProperty(e.prototype,"splitTextNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){if(!(r>=t.dataLength)){var n=t.parentNode;a.assert.fatal(n,"plugins/kernel-assistant/src/kernel/helper/text-helper.ts:67");var o=e.createTextNode(t.data.slice(r),t.attrs);e.setTextNodeData(t,t.data.slice(0,r)),e.insertAfter(n,o,t)}}}),Object.defineProperty(e.prototype,"insertText",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,o,a){if(void 0===a&&(a={}),t.isTextNode()){var l=!!t.attrs.emoji,c=i.default.splitEmoji(o);if(1===c.length){if(l){this.splitTextNode(e,t,r);var s=e.createTextNode(o,(0,u.default)(t.attrs,"emoji"));return e.insertAfter(t.parentNode,s,t),e.newPosition(s,i.default.size(o))}return e.setTextNodeData(t,i.default.insertString(t.data,r,o)),e.newPosition(t,r+i.default.size(o))}this.splitTextNode(e,t,r);for(var f=t.parentNode,d=t,p=0;p<c.length;){var h=p%2==1,y=c[p++];if(!!d.attrs.emoji!==h){s=e.createTextNode(y,h?n(n({},t.attrs),{emoji:!0}):(0,u.default)(t.attrs,"emoji"));e.insertAfter(f,s,d),d=s}else e.setTextNodeData(d,d.data+y)}return e.newPosition(d,i.default.size(d.data))}var b=i.default.splitEmoji(o),m=t,v=r,g=e.newPosition(t,r);return b.forEach((function(t,r){if(t){var o=e.createTextNode(t,r%2==1?n(n({},a),{emoji:!0}):(0,u.default)(a,"emoji"));e.insertByOffset(m,v,o),g=e.newPosition(o,i.default.size(t)),v++}})),g}}),e}();t.default=l},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelAssistantOption=void 0;var o=r(4025),a=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=n({},e)}return Object.defineProperty(e.prototype,"supportEmoji",{get:function(){return!!this._option.supportEmoji},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:o.pluginRegister.pluginName}),e}();t.KernelAssistantOption=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(5063)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerCommand("getSummary",new u.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"summary"}),t}(i.KernelPlugin);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(5064)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===r&&(r={});for(var n=this.kernel.document.rootNode,o=0,a=-1;o<500&&a<9;){var i=a+1,l=n.children[i];if(!l)break;var c=void 0;try{c=(0,u.default)(l)}catch(e){if(null==e?void 0:e.getPath)return r.beforePath=e.getPath(),this.kernel.getDocument(t,r);throw e}a=i,o+=c}return r.beforeIndex=a+1,this.kernel.getDocument(t,r)}}),t}(i.Command);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4018),o=r(3459),a=["columns","tr"];function i(e){return!a.includes(e.nodeName)}t.default=function e(t){if(!t)return 0;if(t.isHole())return e(t.firstChild);if(t.isTextNode())return(0,n.wordCount)(t.data);if(t.isCardNode())return t.hasCategory(o.Category.BlockCard)||"image"===t.nodeName?300:1;if(t.childCount){var r=0;return t.children.forEach((function(t){if((r+=e(t))>=2e3){var n=function(e){var t=e.rootNode,r=e.getPath(),n=t;for(var o in r)if(!i(n=n.children[r[o]]))return n;return e}(t);throw n}})),r}return 0}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(5066),l=a(r(5067)),c=a(r(5068)),s=a(r(5073)),f=a(r(5074)),d=a(r(5075)),p=a(r(5076)),h=a(r(5077)),y=a(r(5078)),b=a(r(5080)),m=a(r(5081)),v=a(r(5082)),g=a(r(5083)),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_dataSource",{enumerable:!0,configurable:!0,writable:!0,value:null}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._dataSource=new l.default(this.kernel),e.registerDataSource("text/aone",this._dataSource),e.registerReader("text/aone",this.service),this.registerDefaultReaders()}}),Object.defineProperty(t.prototype,"registerDefaultReaders",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.service.registerIMarkReader(new f.default),this.service.registerNodeReader(s.default.nodeType,new s.default),this.service.registerNodeReader(d.default.nodeType,new d.default),this.service.registerNodeReader(p.default.nodeType,new p.default),this.service.registerNodeReader(y.default.nodeType,new y.default),this.service.registerNodeReader(b.default.nodeType,new b.default),this.service.registerNodeReader(m.default.nodeType,new m.default),this.service.registerNodeReader(g.default.nodeType,new g.default),this.service.registerLeafReader(new h.default),this.service.registerLeafReader(new v.default)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t;e.prototype.destroy.call(this),null===(t=this._dataSource)||void 0===t||t.destroy(),this._dataSource=null}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.pluginName}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:c.default}),t}(i.KernelPlugin);t.default=_},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pluginRegister=void 0;var n=r(3460);t.pluginRegister=(0,n.createPluginRegister)({pluginName:"aoneDataSource"})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var r=e.call(this)||this;return Object.defineProperty(r,"_kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r._kernel=t,r}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._kernel.readData("text/aone",e,t)}}),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(){return""}}),t}(r(3453).DataSource);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(5069)),u=a(r(5070)),l=a(r(4259)),c=r(5072),s=r(3454),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"markReaders",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"leafReaders",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"nodeReaders",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),t}return o(t,e),Object.defineProperty(t.prototype,"registerIMarkReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.markReaders.push(e)}}),Object.defineProperty(t.prototype,"registerLeafReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.leafReaders.push(e)}}),Object.defineProperty(t.prototype,"registerNodeReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this;Array.isArray(e)?e.forEach((function(e){return r._registerNodeReader(e,t)})):this._registerNodeReader(e,t)}}),Object.defineProperty(t.prototype,"_registerNodeReader",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.nodeReaders.get(e);Array.isArray(r)?(r.push(t),this.nodeReaders.set(e,r)):this.nodeReaders.set(e,[t])}}),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=null;return r=(0,c.isDingDocXml)(t)?(0,c.toDingData)(t):(0,i.default)(t),(0,s.assert)(r,"read text/aone error, source is null","plugins/aone-data-source/src/kernel/aone-reader.ts:53"),(0,u.default)(e,r,this)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.markReaders.length=0,this.nodeReaders.clear()}}),t}(l.default);t.default=f},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};function o(e){var t=n(e),r=t[0],i=t[1],l=t.slice(2);return"root"===r?{klass:"document",data:e[1],nodes:Array.isArray(l)?l.map(o):[]}:["h1","h2","h3","h4","h5","h6"].includes(r)?{klass:"block",data:e[1],type:u(r),nodes:Array.isArray(l)?l.map(o):[]}:["a","img"].includes(r)?{klass:"inline",data:e[1],type:u(r),nodes:Array.isArray(l)?l.map(o):[]}:"span"===r?"text"===e[1]["data-type"]?{klass:"text",leaves:Array.isArray(l)?l.map(o):[]}:"leaf"===e[1]["data-type"]?{klass:"leaf",marks:a(i),text:"string"==typeof l[0]?l[0]:""}:{klass:"inline",data:i,type:u(i["data-type"]||r),nodes:Array.isArray(l)?l.map(o):[]}:{klass:"block",data:e[1],type:u(r),nodes:Array.isArray(l)?l.map(o):[]}}function a(e){return Object.keys(e).reduce((function(t,r){return e[r]&&t.push({data:{value:e[r]},klass:"mark",type:r}),t}),[])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=JSON.parse(e);if(!Array.isArray(t)||t.length<2)throw new Error("not validate ding content");return o(t)};var i={p:"paragraph",a:"link",img:"image",h1:"heading-1",h2:"heading-2",h3:"heading-3",h4:"heading-4",h5:"heading-5",h6:"heading-6"};function u(e){return i[e]||e}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isType=t.isLeaf=t.isText=t.isInline=t.isBlock=t.isDocument=void 0;var o=r(3453),a=n(r(5071));function i(e){return"document"===e.klass}function u(e){return"block"===e.klass}function l(e){return"inline"===e.klass}function c(e){return"text"===e.klass}function s(e){return"leaf"===e.klass}function f(e){return"block"===e.klass||"inline"===e.klass}function d(e,t){var r=t.enter,n=t.leave,o=!1;c(e)||(o=r(e)),o||(i(e)||u(e)||l(e)?e.nodes.forEach((function(e){d(e,{enter:r,leave:n})})):c(e)&&e.leaves.forEach((function(e){d(e,{enter:r,leave:n})}))),c(e)||n(e)}t.isDocument=i,t.isBlock=u,t.isInline=l,t.isText=c,t.isLeaf=s,t.isType=f,t.default=function(e,t,r){var n=o.INodeHelper.createFragment(),i=new a.default(e,null);i.setNode(n);var u=[i];return d(t,{enter:function(e){if(e===t)return!1;var n=u[u.length-1],a=n.makeChildContext();if(u.push(a),s(e)){var i=n.getNode();return e.marks.forEach((function(t){var n=r.markReaders;n&&n.find((function(r){return!1===r.read(a,t,e)}))})),i&&(r.leafReaders.find((function(t){return!1===t.read(a,e)}))||n.appendChild(i,o.INodeHelper.createTextNode(e.text,a.attrs))),a.isStop}if(f(e)){var l=r.nodeReaders.get(e.type);return l&&l.find((function(t){return!1===t.read(a,e)})),a.isStop}return!1},leave:function(e){if(e===t)return!1;var n=u.pop();if(n&&f(e)){var o=r.nodeReaders.get(e.type);return o&&o.find((function(t){var r;return!1===(null===(r=t.afterRead)||void 0===r?void 0:r.call(t,n,e))})),n.isStop}return!1}}),n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o=function(){function e(e,t){Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"attrs",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isStop",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.kernel=e,this.parent=t}return Object.defineProperty(e.prototype,"addAttr",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){null===this.attrs&&(this.attrs={}),this.attrs[e]=t}}),Object.defineProperty(e.prototype,"makeChildContext",{enumerable:!1,configurable:!0,writable:!0,value:function(){return new e(this.kernel,this)}}),Object.defineProperty(e.prototype,"getNode",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e;return this.node?this.node:(null===(e=this.parent)||void 0===e?void 0:e.getNode())||null}}),Object.defineProperty(e.prototype,"makeStop",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isStop=!0}}),Object.defineProperty(e.prototype,"setNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,o=t||(null===(r=this.parent)||void 0===r?void 0:r.getNode());o&&n.INodeHelper.appendChild(o,e),this.node=e}}),Object.defineProperty(e.prototype,"setNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,o=t||(null===(r=this.parent)||void 0===r?void 0:r.getNode());o&&e.forEach((function(e){n.INodeHelper.appendChild(o,e)})),this.node=e[e.length-1]}}),Object.defineProperty(e.prototype,"createElement",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return n.INodeHelper.createElement(e,t)}}),Object.defineProperty(e.prototype,"createText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return n.INodeHelper.createTextNode(e)}}),Object.defineProperty(e.prototype,"appendChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return n.INodeHelper.appendChild(e,t)}}),Object.defineProperty(e.prototype,"isText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"text"===e.klass}}),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toDingData=t.isDingDocXml=void 0;var n=r(3799);t.isDingDocXml=function(e){return!!e.startsWith("<?xml")||e.includes("<doc>")&&e.includes("</doc>")};var o={p:"paragraph",a:"link",img:"image",h1:"heading-1",h2:"heading-2",h3:"heading-3",h4:"heading-4",h5:"heading-5",h6:"heading-6"};function a(e){return o[e]||e}var i=["true","false"];function u(e){var t={};return Object.keys(e).forEach((function(r){try{e[r].startsWith("%5B")||e[r].startsWith("%7B")?t[r]=JSON.parse(decodeURIComponent(e[r])):/^\d+$/.test(e[r])?t[r]=parseInt(e[r],10):i.includes(e[r])?t[r]="true"===e[r]:t[r]=decodeURIComponent(e[r])}catch(n){t[r]=e[r]}})),t}t.toDingData=function(e){try{return function(e){var t=null,r=null,o=null,i=new n.Parser({onopentag:function(e,n){var i,l,c,s,f,d;if(o=null,"root"===e)return t={klass:"document",data:u(n),nodes:[]},void(r=t);if(["h1","h2","h3","h4","h5","h6"].includes(e)){var p={klass:"block",data:u(n),type:a(e),nodes:[],parent:t};return null===(i=null==t?void 0:t.nodes)||void 0===i||i.push(p),void(t=p)}if(["a","img"].includes(e))return p={klass:"inline",data:u(n),type:a(e),nodes:[],parent:t},null===(l=null==t?void 0:t.nodes)||void 0===l||l.push(p),void(t=p);if("span"===e){if("text"===n["data-type"])return p={klass:"text",leaves:[],parent:t},null===(c=null==t?void 0:t.nodes)||void 0===c||c.push(p),void(t=p);if("leaf"===n["data-type"])return p={klass:"leaf",marks:(d=n,Object.keys(d).reduce((function(e,t){return d[t]&&e.push({data:{value:d[t]},klass:"mark",type:t}),e}),[])),text:"",parent:t},null===(s=null==t?void 0:t.leaves)||void 0===s||s.push(p),t=p,void(o=p)}return t?(p={klass:"block",data:u(n),type:a(e),nodes:[],parent:t},null===(f=null==t?void 0:t.nodes)||void 0===f||f.push(p),void(t=p)):void 0},ontext:function(e){o&&(e=e.replace(/\u200b/g,""),o.text=e)},onclosetag:function(e){t&&"root"!==e&&(t=null==t?void 0:t.parent)}},{decodeEntities:!0,lowerCaseTags:!0,lowerCaseAttributeNames:!1,recognizeSelfClosing:!0});return i.write(e),i.end(),r}(e)}catch(e){return console.error(e),null}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o=r(3454),a=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){if(e.nodeType.includes(r.type)){var o={};if(r.data.jc&&(o.alignment=r.data.jc),r.data.ind&&r.data.ind.firstLine&&(o.textIndent=!0),r.data.blockquote)return this.readQuote(t,r,o);if(r.data.list){var a=r.data.list;o.list=a.listId,o.level=a.level||0;var i="uli";return a.isOrdered?i="oli":a.isTaskList&&(i="tli",o.checked=a.isChecked),t.setNode(n.INodeHelper.createElement(i,o)),!1}return t.setNode(n.INodeHelper.createElement(this.typeToName(r.type),o)),!1}}}),Object.defineProperty(e.prototype,"typeToName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"paragraph"===e?"p":"heading-1"===e?"h1":"heading-2"===e?"h2":"heading-3"===e?"h3":"heading-4"===e?"h4":"heading-5"===e?"h5":"heading-6"===e?"h6":void o.assert.fatal(!1,"unknown type: ".concat(e),"plugins/aone-data-source/src/kernel/readers/p-aone-reader.ts:61")}}),Object.defineProperty(e.prototype,"readQuote",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o,a,i=null===(n=e.parent)||void 0===n?void 0:n.getNode();if(i){var u=null===(o=i.children)||void 0===o?void 0:o[((null===(a=i.children)||void 0===a?void 0:a.length)||1)-1];if(u&&"quote"===u.name)e.setNode(e.createElement("p",r),u);else{var l=e.createElement("quote",{});e.appendChild(i,l);var c=e.createElement("p",r);e.setNode(c,l)}return!1}}}),Object.defineProperty(e,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["paragraph","heading-1","heading-2","heading-3","heading-4","heading-5","heading-6"]}),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4224),o=r(4225),a=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var a;if("bold"===t.type)e.addAttr("bold",t.data.value);else if("italic"===t.type)e.addAttr("italic",t.data.value);else if("underline"===t.type)e.addAttr("underline",!0);else if("strike"===t.type)e.addAttr("strikethrough",!0);else if("highlight"===t.type){if(/^var\(.+?\)$/.test(t.data.value||""))return!1;e.addAttr("bgColor",t.data.value)}else if("color"===t.type){if(/^var\(.+?\)$/.test(t.data.value||""))return!1;e.addAttr("color",t.data.value)}else if("inlineCode"===t.type)e.addAttr("inlineCode",t.data.value);else if("sz"===t.type)try{var i=(null===(a=r.marks.find((function(e){return"szUnit"===e.type})))||void 0===a?void 0:a.data.value)||"pt",u=(0,o.fontSizeNormal)((0,n.convertToPx)(t.data.value,i)||0);u&&e.addAttr("fontsize",u)}catch(e){}return!1}}),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o=r(3454),a=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){if(e.nodeType.includes(r.type)){var o={};if(r.data.colsWidth&&(o.colWidths=r.data.colsWidth,o.colCount=r.data.colsWidth.length,o.rowCount=r.nodes.length),r.data.h&&(o.height=r.data.h),r.data.colSpan&&r.data.colSpan>1&&(o.colSpan=r.data.colSpan),r.data.rowSpan&&r.data.rowSpan>1&&(o.rowSpan=r.data.rowSpan),r.data.fill&&(o.cellBgColor=r.data.fill),r.data.vAlign?o.verticalAlign=r.data.vAlign:o.verticalAlign="middle",!r.data.hidden)return t.setNode(n.INodeHelper.createElement(this.typeToName(r.type),o)),!1;t.makeStop()}}}),Object.defineProperty(e.prototype,"afterRead",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if("tr"===t.type){var r=e.getNode();if(r&&r.children){var n=0;t.nodes.forEach((function(e,t){var o;if("block"===e.klass&&!e.data.hidden){var a=null===(o=r.children)||void 0===o?void 0:o[n];a&&a.attrs&&(a.attrs.col=t),n++}}))}}return!1}}),Object.defineProperty(e.prototype,"typeToName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"table"===e?"table":"tc"===e?"td":"tr"===e?"tr":void o.assert.fatal(!1,"unknown type: ".concat(e),"plugins/aone-data-source/src/kernel/readers/table-aone-reader.ts:71")}}),Object.defineProperty(e,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["table","tr","tc"]}),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o=r(3454),a=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){if(e.nodeType.includes(r.type)){var o={};return r.data.href&&(o.src=r.data.href),t.setNode(n.INodeHelper.createElement(this.typeToName(r.type),o)),!1}}}),Object.defineProperty(e.prototype,"typeToName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if("link"===e)return"link";o.assert.fatal(!1,"unknown type: ".concat(e),"plugins/aone-data-source/src/kernel/readers/link-aone-reader.ts:22")}}),Object.defineProperty(e,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["link"]}),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r;if(null===(r=e.attrs)||void 0===r?void 0:r.inlineCode){var o=n.INodeHelper.createElement("code",{});return n.INodeHelper.appendChild(o,n.INodeHelper.createTextNode(t.text,e.attrs)),e.setNode(o),!1}}}),e}();t.default=o},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(3453),a=r(3454),i=n(r(5079)),u=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){var n,a,u;if(e.nodeType.includes(r.type)){r.nodes=[];var l={src:r.data.src,size:r.data.size,name:r.data.name,rotation:r.data.rotation||0,width:r.data.width,height:r.data.height,original:{type:"binary",from:"aone",ratio:1,width:r.data.width,height:r.data.height}};if("link"===(null===(a=null===(n=t.parent)||void 0===n?void 0:n.node)||void 0===a?void 0:a.name)&&(l.link=null===(u=t.parent.node.attrs)||void 0===u?void 0:u.src),r.data.rectClip){var c=(0,i.default)(r.data.rectClip,r.data.width,r.data.height,r.data.rotation||0);l.crop=[c.left/c.width,c.top/c.height,1-c.right/c.width,1-c.bottom/c.height],l.original.width=c.width,l.original.height=c.height,delete l.width,delete l.height}return t.setNode(o.INodeHelper.createElement(this.typeToName(r.type),{value:l})),!1}}}),Object.defineProperty(e.prototype,"typeToName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if("image"===e)return"image";a.assert.fatal(!1,"unknown type: ".concat(e),"plugins/aone-data-source/src/kernel/readers/img-aone-reader.ts:62")}}),Object.defineProperty(e,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["image"]}),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n){void 0===n&&(n=0),console.info("input",e,t,r,n);var o={left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:t+e.left+e.right,height:r+e.top+e.bottom};if(0===n)return o;var a=e.top,i=e.left,u=e.bottom,l=e.right;return 90===(n%=360)&&(o.left=a,o.top=l,o.right=u,o.bottom=i,o.width=t+o.left+o.right,o.height=r+o.top+o.bottom),180===n&&(o.left=l,o.top=u,o.right=i,o.bottom=a),270===n&&(o.left=u,o.top=i,o.right=a,o.bottom=l,o.width=t+o.left+o.right,o.height=r+o.top+o.bottom),o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){if(e.nodeType.includes(r.type))return r.nodes=[],"video"===r.data.type?this.readVideo(t,r):"audio"===r.data.type?this.readAudio(t,r):(t.setNode(t.createElement("localdoc",{value:{src:r.data.src,name:r.data.name,size:r.data.size,status:"done",mode:"card"}})),!1)}}),Object.defineProperty(e.prototype,"readVideo",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e.setNode(e.createElement("video",{value:{status:"done",name:t.data.name,size:t.data.size,url:t.data.src}})),!1}}),Object.defineProperty(e.prototype,"readAudio",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return e.setNode(e.createElement("audio",{value:{status:"uploaded",audioInfo:{id:t.data.src,fileName:t.data.name,fileSize:t.data.size,url:t.data.src}}})),!1}}),Object.defineProperty(e,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["embed"]}),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o=r(3454),a=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r){if(e.nodeType.includes(r.type))return r.nodes=[],t.setNode(n.INodeHelper.createElement(this.typeToName(r.type),{value:{login:r.data.login,nickName:r.data.name,name:r.data.name}})),!1}}),Object.defineProperty(e.prototype,"typeToName",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if("mention"===e)return"mention";o.assert.fatal(!1,"unknown type: ".concat(e),"plugins/aone-data-source/src/kernel/readers/mention-aone-reader.ts:28")}}),Object.defineProperty(e,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["mention"]}),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3453),o=/(?:[^a-z0-9]|^)([a-z0-9]{2,}):\/\/(?:[a-z_0-9@:.])+?(?:\/\S*?)?(?:[#\s\S]*?)?(?:(?=[\u0100-\uffff\s])|$)/i,a=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(o.test(t.text)){var r=e.kernel.readData("text/plain",t.text);if(r&&r.children)return e.setNodes(r.children),!1}return e.setNode(n.INodeHelper.createTextNode(t.text,e.attrs)),!1}}),e}();t.default=a},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3458)),a=n(r(4237)),i=[{type:"color3",h:27.62},{type:"warning",h:42.97},{type:"success",h:82.76},{type:"tips",h:150},{type:"color2",h:155.12},{type:"color1",h:182.95},{type:"info",h:211},{type:"color5",h:260.43},{type:"color4",h:324.71},{type:"danger",h:352.86}],u=function(){function e(){}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if("colorBlocks"===t.data.subType){var r=t.data.metadata||{bgcolor:"#ECF9F0"};return e.setNode(o.default.createElement("alert",{type:this.getAlertType(r)})),!0}}}),Object.defineProperty(e.prototype,"getAlertType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=a.default.parse(e.bgcolor);if(!t)return"info";for(var r=t.h,n=0;n<i.length;n++)if(r<i[n].h){var o=i[n-1]||i[i.length-1];return Math.abs(r-o.h)<Math.abs(i[n].h-r)?o.type:i[n].type}return"info"}}),Object.defineProperty(e,"nodeType",{enumerable:!0,configurable:!0,writable:!0,value:["container"]}),e}();t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3454),l=r(4255),c=r(5085),s=a(r(5086)),f=r(5087),d={h1:1,h2:2,h3:3,h4:4,h5:5,h6:6},p=/[\u2170-\u217b]/,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"_tocNodes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"cardToTextManager",{enumerable:!0,configurable:!0,writable:!0,value:new s.default}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this,n=new Set;e.on("document.destroy",(function(){r._tocNodes=[],n.clear(),r.kernel.emitPluginEvent("tocChange",r.getToc())})),t.on("nodechange",(function(e){var t=e.node,r=e.type;if(!t.isTextNode()||"text"!==r&&"insert"!==r)t.hasCategory(i.Category.Heading)&&d[t.nodeName]&&("insert"===r||"remove"===r||"attribute"===r&&"collapsed"!==e.attrName)&&n.add(t);else{var o=i.NodeUtil.closest(t,i.Category.Heading);o&&d[o.nodeName]&&n.add(o)}})),t.on("operationRollback",(function(){n.clear()})),t.on("aftercontentchange",(function(){if(0!==n.size){var e=Array.from(n);n.clear(),r._refresh(e)}}))}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._tocNodes=null,this.cardToTextManager.destroy(),e.prototype.destroy.call(this)}}),Object.defineProperty(t.prototype,"getToc",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=Number.MAX_SAFE_INTEGER,r=new Set;this.service.start();var n=this._tocNodes.map((function(n){var o=(0,f.getNodeTextContent)(n,e.cardToTextManager).trim(),a=e.service.prefix(n);if(!o&&!a)return null;var i=d[n.nodeName];return t=Math.min(i,t),r.add(i),{type:n.nodeName,id:n.id,text:a+(p.test(a)?"":"")+o,level:i}})).filter((0,l.toFilterFunction)(Boolean)),o={};return Array.from(r).sort().forEach((function(e,t){o[e]=t+1})),n.forEach((function(e){e.depth=o[e.level]||1})),n}}),Object.defineProperty(t.prototype,"_updateKernelTocData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getToc();return this.kernel.setDocExtraContent({toc:e}),e}}),Object.defineProperty(t.prototype,"_refresh",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,r=!1;e.forEach((function(e){e.isConnected&&e.parentNode.isRootNode()?e.parentNode.isRootNode()&&(r=!0,t._hasNode(e)?t._tryChangeOrder():t._insertNode(e)):t._removeNode(e)&&(r=!0)}));var n=this._updateKernelTocData();r&&this.kernel.emitPluginEvent("tocChange",n)}}),Object.defineProperty(t.prototype,"_tryChangeOrder",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._tocNodes.sort((function(e,t){var r=i.NodeUtil.compare(e,t);return r.following?1:r.preceding?-1:0})),this._updateKernelTocData()}}),Object.defineProperty(t.prototype,"_insertNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(0===this._tocNodes.length)return this._tocNodes.push(e),void this._updateKernelTocData();for(var t=0,r=this._tocNodes.length;t<r;t++){var n=i.NodeUtil.compare(this._tocNodes[t],e);if(n.following)return this._tocNodes.splice(t,0,e),void this._updateKernelTocData();u.assert.fatal(n.preceding,"plugins/toc/src/kernel/index.ts:211")}this._tocNodes.push(e),this._updateKernelTocData()}}),Object.defineProperty(t.prototype,"_removeNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this._tocNodes.indexOf(e);return-1!==t&&(this._tocNodes.splice(t,1),this._updateKernelTocData(),!0)}}),Object.defineProperty(t.prototype,"_hasNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._tocNodes.includes(e)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"toc"}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:c.TOCKernelService}),t}(i.KernelPlugin);t.default=h},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TOCKernelService=void 0;var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"prefixFNs",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(t,"getToc",{enumerable:!0,configurable:!0,writable:!0,value:function(){return t.plugin.getToc()}}),Object.defineProperty(t,"registerCardToText",{enumerable:!0,configurable:!0,writable:!0,value:function(e,r){t.plugin.cardToTextManager.register(e,r)}}),t}return o(t,e),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),Object.defineProperty(t.prototype,"registerPrefix",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.prefixFNs.push(e)}}),Object.defineProperty(t.prototype,"start",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.prefixFNs.forEach((function(e){return e.start()}))}}),Object.defineProperty(t.prototype,"prefix",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t="";return this.prefixFNs.find((function(r){var n=r.prefix(e);return!!n&&(t=n,!0)})),t||""}}),t}(r(4263).ITOCKernelService);t.TOCKernelService=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3454),o=function(){function e(){Object.defineProperty(this,"cardToTextFnMap",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.cardToTextFnMap[e]=t}}),Object.defineProperty(e.prototype,"getText",{enumerable:!1,configurable:!0,writable:!0,value:function(e){n.assert.fatal(e.isCardNode(),"plugins/toc/src/kernel/card-to-text-manager.ts:25");var t=this.cardToTextFnMap[e.nodeName];return t&&t(e)||" "}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.cardToTextFnMap={}}}),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeTextContent=void 0;var n=r(3454);function o(e,t,r){t.isTextNode()?e.push(t.data):t.isCardNode()?e.push(r.getText(t)||" "):(n.assert.fatal(t.isElement(),"plugins/toc/src/kernel/helpers/get-node-text-content.ts:31"),t.children.forEach((function(t){o(e,t,r)})))}t.getNodeTextContent=function(e,t){var r=[];return o(r,e,t),r.join("")}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCardPlugin=void 0;var a=r(3453),i=r(3493),u=r(3463),l=r(3771),c=r(5089),s=r(5090),f=r(5091),d=r(3930),p=r(5092),h=r(5093),y=r(4034),b=r(5094),m=r(5095),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerInlineCard(l.pluginRegister.cardName.customInline),e.registerBlockCard(l.pluginRegister.cardName.customBlock);var t=e.getService(u.ILakeKernelService.ID),r=e.getService(d.IHTMLKernelService.ID),n=e.getService(y.ITextDataSourceKernelService.ID);t&&t.registerLakeCardReader([l.pluginRegister.cardName.customInline,l.pluginRegister.cardName.customBlock],new c.LakeCustomCardReader(this.kernel,this.option.registry.getCards()));var o=e.getService(i.IINodeReaderKernelService.ID);o&&(o.registerINodeCardReader(l.pluginRegister.cardName.customInline,new s.INodeCustomCardReader(this.kernel,this.option.registry.getCards())),o.registerINodeCardReader(l.pluginRegister.cardName.customBlock,new s.INodeCustomCardReader(this.kernel,this.option.registry.getCards()))),r&&r.registerHTMLNodeReader(p.HtmlCustomCardReader.NodeNames,new p.HtmlCustomCardReader),t&&t.registerLakeCardWriter([l.pluginRegister.cardName.customInline,l.pluginRegister.cardName.customBlock],new f.LakeCustomCardWriter),r&&r.registerNodeHTMLWriter([l.pluginRegister.cardName.customInline,l.pluginRegister.cardName.customBlock],new h.HtmlCustomCardWriter(this.option)),n&&n.registerTextWriter([l.pluginRegister.cardName.customInline,l.pluginRegister.cardName.customBlock],new b.TextCustomCardWriter(this.option))}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:m.CustomCardOption}),t}(a.KernelPlugin);t.CustomCardPlugin=v},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LakeCustomCardReader=void 0;var i=a(r(3458)),u=r(3481),l=r(3771),c=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(n,"cards",{enumerable:!0,configurable:!0,writable:!0,value:r}),n}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=this.cards[r.$name];if(!o||!o.editorComponent||!o.viewerComponent){var a=r.$htmlStr;if(a){var i=this.kernel.readData("text/html",a);return void(i&&e.setNode(i))}}this.readCard(e,t,r,n)}}),Object.defineProperty(t.prototype,"readCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o,a="inline"===(null===(o=e.inode)||void 0===o?void 0:o.cardType)?l.pluginRegister.cardName.customInline:l.pluginRegister.cardName.customBlock;e.setNode(i.default.createCard(a,r,n))}}),t}(u.LakeCardReader);t.LakeCustomCardReader=c},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.INodeCustomCardReader=void 0;var o=n(r(3458)),a=r(3771),i=function(){function e(e,t){Object.defineProperty(this,"kernel",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cards",{enumerable:!0,configurable:!0,writable:!0,value:t})}return Object.defineProperty(e.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,a,i=this.cards[null===(n=null===(r=t.attrs)||void 0===r?void 0:r.value)||void 0===n?void 0:n.$name];if(i&&i.editorComponent&&i.viewerComponent)return this.readCard(e,t);var u=null===(a=null===(o=t.attrs)||void 0===o?void 0:o.value)||void 0===a?void 0:a.$htmlStr;if(u){var l=this.kernel.readData("text/html",u);l&&e.setNode(l)}}}),Object.defineProperty(e.prototype,"readCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,i="inline"===(null===(r=t.attrs)||void 0===r?void 0:r.cardType)?a.pluginRegister.cardName.customInline:a.pluginRegister.cardName.customBlock;return e.setNode(o.default.createCard(i,(null===(n=t.attrs)||void 0===n?void 0:n.value)||{},t.id)),!1}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),e}();t.INodeCustomCardReader=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LakeCustomCardWriter=void 0;var n=r(3771),o=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,o){[n.pluginRegister.cardName.customBlock,n.pluginRegister.cardName.customInline].includes(t)&&(t!==n.pluginRegister.cardName.customInline?e.setNode(e.createBlockCard(t,r,o,{customName:r.$name})):e.setNode(e.createInlineCard(t,r,o,{customName:r.$name})))}}),e}();t.LakeCustomCardWriter=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlCustomCardReader=void 0;var a=r(3453),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,i,u,l=null===(r=t.attrs)||void 0===r?void 0:r["data-name"],c=null===(n=t.attrs)||void 0===n?void 0:n["data-value"],s=null===(o=t.attrs)||void 0===o?void 0:o["data-custom-name"];return!!((null===(u=null===(i=t.attrs)||void 0===i?void 0:i.class)||void 0===u?void 0:u.includes("ne-custom-card"))&&l&&c&&s)&&(e.stop(),e.setNode(a.INodeHelper.createCard(l,JSON.parse(decodeURIComponent(c)))),!0)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["div","span"]}),t}(r(3930).HtmlNodeReader);t.HtmlCustomCardReader=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlCustomCardWriter=void 0;var u=r(3930),l=function(e){function t(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=e.apply(this,i([],a(r),!1))||this;return Object.defineProperty(o,"option",{enumerable:!0,configurable:!0,writable:!0,value:t}),o}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,a,i=null===(r=t.attrs)||void 0===r?void 0:r.value,u=t.name,l=null===(o=null===(n=t.attrs)||void 0===n?void 0:n.value)||void 0===o?void 0:o.$name,c=e.createElement("inline"===(null===(a=t.attrs)||void 0===a?void 0:a.cardType)?"span":"div",{className:"ne-custom-card",attrs:{"data-name":u,"data-value":encodeURIComponent(JSON.stringify(i)),"data-custom-name":l}}),s=this.getCustomChildNode(l,i);(null==s?void 0:s.length)&&(c.children=s),e.setNode(c)}}),Object.defineProperty(t.prototype,"getCustomChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=null===(r=this.option.registry.getCardOption(e))||void 0===r?void 0:r.writeHtml;if("function"!=typeof n)return null;var o=n(t);return"string"!=typeof o?null:(0,u.parseToNodeTree)(o)}}),t}(u.NodeHTMLWriter);t.HtmlCustomCardWriter=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.TextCustomCardWriter=void 0;var u=r(4034),l=r(3771),c=function(e){function t(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=e.apply(this,i([],a(r),!1))||this;return Object.defineProperty(o,"option",{enumerable:!0,configurable:!0,writable:!0,value:t}),o}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o,a="",i=null===(o=this.option.registry.getCardOption((null===(n=null===(r=t.attrs)||void 0===r?void 0:r.value)||void 0===n?void 0:n.$name)||""))||void 0===o?void 0:o.writeText;if("function"==typeof i){var u=i(t.attrs.value);"string"==typeof u&&(a=u)}t.name===l.pluginRegister.cardName.customInline?e.append(a):e.newline(a)}}),t}(u.TextWriter);t.TextCustomCardWriter=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCardOption=void 0;var n=r(3771),o=r(5096),a={cards:[]},i=function(){function e(e){var t=this;Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_registry",{enumerable:!0,configurable:!0,writable:!0,value:new o.Registry}),this._option=Object.assign({},a,e),this._option.cards.forEach((function(e){t._registry.registerCard(e)}))}return Object.defineProperty(e.prototype,"cards",{get:function(){return this._option.cards},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"registry",{get:function(){return this._registry},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:n.pluginRegister.pluginName}),e}();t.CustomCardOption=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Registry=void 0;var n=function(){function e(){Object.defineProperty(this,"cards",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return Object.defineProperty(e.prototype,"registerCard",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.cards[e.name]=e}}),Object.defineProperty(e.prototype,"getCardOption",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.cards[e]||null}}),Object.defineProperty(e.prototype,"getCards",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Object.freeze(this.cards)}}),e}();t.Registry=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(5098)),l=r(4035),c=a(r(5099)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:l.pluginRegister.pluginName}),Object.defineProperty(t,"Commands",{enumerable:!0,configurable:!0,writable:!0,value:[u.default,c.default]}),t}(i.KernelPlugin);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3457),u=r(4035),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=a.RangeUtil.replaceText(n,t.map((function(e){return n.newRange(n.newPosition(n.getNodeById(e.start.id),e.start.offset),n.newPosition(n.getNodeById(e.end.id),e.end.offset))})),r);n.setSelection([o])}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.command.replaceText}),t}(i.KernelAbstractCommand);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3457),i=r(4035),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob();return t.forEach((function(e){var t;return null===(t=e.replaceAll)||void 0===t?void 0:t.call(e,n,r)})),e.commitJob(n),!0}}),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:i.pluginRegister.command.replaceAll}),t}(a.KernelAbstractCommand);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(4277),l=r(5101),c=a(r(5103)),s=r(3454),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"assertRemover",{enumerable:!0,configurable:!0,writable:!0,value:function(){}}),t}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.option.enable&&(this.monitorCommandError(),this.monitorDocInitError(),this.monitorGeneralError())}}),Object.defineProperty(t.prototype,"monitorGeneralError",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this;(null===(e=this.option.errorMonitor)||void 0===e?void 0:e.enable)&&(this.assertRemover=s.assert.setGlobalLogger((function(e,r,n){t.service.log({type:"error",name:"error",timestamp:Date.now(),data:{rank:n,msg:e,pos:r}})})))}}),Object.defineProperty(t.prototype,"monitorCommandError",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this;(null===(e=this.option.errorMonitor)||void 0===e?void 0:e.enable)&&this.kernel.on("commandExecuteError",(function(e){var r=e.error,n=e.detail;t.service.log({type:"error",name:"commandError",timestamp:Date.now(),data:{rank:s.Rank.error,error:r,commandName:n.commandName,args:n.args}})}))}}),Object.defineProperty(t.prototype,"monitorDocInitError",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t=this;(null===(e=this.option.errorMonitor)||void 0===e?void 0:e.enable)&&this.kernel.on("setDocumentError",(function(e){var r=e.error,n=e.detail;try{"string"==typeof n.content?n.content.slice(0,200):JSON.stringify(n.content).slice(0,200)}catch(e){console.error(e)}t.service.log({type:"error",name:"docInitError",timestamp:Date.now(),data:{error:r,rank:s.Rank.fatal,docType:n.dataType||"",snapshot:""}})}))}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){e.prototype.destroy.call(this),this.assertRemover()}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:l.MonitorPluginOption}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:c.default}),t}(i.KernelPlugin);t.default=f},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MonitorPluginOption=void 0;var o=n(r(3464)),a=r(4277),i=r(5102),u={enable:!0},l=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:u}),this._option=(0,o.default)(this._option,e)}return Object.defineProperty(e.prototype,"enable",{get:function(){return this._option.enable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"perfMonitor",{get:function(){var e=this._option.perfMonitor;if(e)return e.maxThreshold||(e.maxThreshold=i.MAX_TIME_EXPR),e.editTimeout||(e.editTimeout=i.INPUT_LATENCY_TIMEOUT),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userMonitor",{get:function(){return this._option.userMonitor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorMonitor",{get:function(){return this._option.errorMonitor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reportUrl",{get:function(){return this._option.reportUrl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transferLogBody",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._option.transferLogBody?this._option.transferLogBody(e):e}}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:a.pluginRegister.pluginName}),e}();t.MonitorPluginOption=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INPUT_LATENCY_TIMEOUT=t.MAX_TIME_EXPR=void 0,t.MAX_TIME_EXPR=2e4,t.INPUT_LATENCY_TIMEOUT=5e3},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0});var i=r(5104),u=r(5106),l=r(5107),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"log",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length)(0,u.send)(e[0],this.plugin.option),(0,l.sendBeacon)(e[0],this.plugin.option);else{var r=a(e,3),n=r[0],o=r[1],i=r[2];this.kernel.emitEvent("monitorLog",{code:n,data:o,error:i})}}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.performance.destroy()}}),t}(i.IMonitorKernelService);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IMonitorKernelService=void 0;var a=r(3472),i=r(5105),u=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(r,"id",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.unwrapID)(t.ID)}),Object.defineProperty(r,"performance",{enumerable:!0,configurable:!0,writable:!0,value:new i.UniversePerformance}),r}return o(t,e),Object.defineProperty(t,"ID",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.wrapID)("IMonitorKernelService")}),t}(r(3453).KernelAbstractService);t.IMonitorKernelService=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UniversePerformance=void 0;var n=function(){function e(){Object.defineProperty(this,"markGroupData",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}return Object.defineProperty(e.prototype,"now",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;return(null===(e=globalThis.performance)||void 0===e?void 0:e.now())||(null===(t=Date.now)||void 0===t?void 0:t.call(Date))||(new Date).getTime()}}),Object.defineProperty(e.prototype,"elementCount",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=globalThis.document;return e?e.all?e.all.length:e.querySelectorAll("*").length:0}}),Object.defineProperty(e.prototype,"markGroupStart",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.markGroupData.set(e,{__start:this.now()})}}),Object.defineProperty(e.prototype,"markGroup",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=this.markGroupData.get(e);r&&r.__start&&(r[t]=this.now()-r.__start)}}),Object.defineProperty(e.prototype,"markGroupEnd",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.markGroupData.get(e)}}),Object.defineProperty(e.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.markGroupData=new Map}}),e}();t.UniversePerformance=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.send=void 0,t.send=function(e,t){var r,n,o,a,i,u;if(t.enable)switch(e.type){case"error":if(!(null===(r=t.errorMonitor)||void 0===r?void 0:r.enable))return;return void(null===(n=t.errorMonitor)||void 0===n||n.sendLog(e));case"perf":if(!(null===(o=t.perfMonitor)||void 0===o?void 0:o.enable))return;return void(null===(a=t.perfMonitor)||void 0===a||a.sendLog(e));case"user":if(!(null===(i=t.userMonitor)||void 0===i?void 0:i.enable))return;return void(null===(u=t.userMonitor)||void 0===u||u.sendLog(e));default:return}}},function(e,t,r){"use strict";function n(e){"object"==typeof e&&Object.keys(e).forEach((function(t){var r=e[t];r instanceof Error?e[t]={name:r.name,message:r.message,stack:r.stack}:n(r)}))}Object.defineProperty(t,"__esModule",{value:!0}),t.sendBeacon=void 0,t.sendBeacon=function(e,t){if(t.enable&&t.reportUrl){var r=t.transferLogBody(e),o=new FormData;if(Object.keys(r).forEach((function(e){var t=r[e];n(t),o.append(e,"string"==typeof t?t:JSON.stringify(t))})),globalThis.navigator&&"sendBeacon"in globalThis.navigator)globalThis.navigator.sendBeacon(t.reportUrl,o);else if("fetch"in globalThis){var a=new Headers;a.append("X-Lakex-Monitor",e.type),fetch(t.reportUrl,{method:"POST",body:o,headers:a})}}}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3493),c=r(3463),s=r(3601),f=a(r(5109)),d=a(r(5110)),p=a(r(5111)),h=a(r(5112)),y=a(r(5113)),b=a(r(5114)),m=a(r(5115)),v=a(r(5116)),g=a(r(5117)),_=a(r(5118)),w=a(r(5119)),O=r(5120),E=r(5121),P=r(5122),j=a(r(5123)),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerBlockCard("bookmark"),e.registerInlineCard("bookmarkInline"),e.registerCommand("linkToBookmark",new d.default),e.registerCommand("linkToBookmarkInline",new p.default),e.registerCommand("insertBookmark",new f.default)}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t,r=this.kernel,n=r.getService(c.ILakeKernelService.ID);n&&(n.registerLakeCardReader("bookmarklink",new b.default),n.registerLakeCardReader("bookmarkInline",new m.default)),this.option.recognizeYuque&&!r.plugins.find((function(e){return"yuque"===e.constructor.PluginName}))&&(null===(e=r.getService(c.ILakeKernelService.ID))||void 0===e||e.registerLakeCardReader("yuqueInline",new E.LakeBookmarkYuqueCardReader),null===(t=r.getService(l.IINodeReaderKernelService.ID))||void 0===t||t.registerINodeCardReader("yuqueInline",new j.default));var o=r.getService(l.IINodeReaderKernelService.ID);o&&(o.registerINodeCardReader(h.default.CardName,new h.default),o.registerINodeCardReader(y.default.CardName,new y.default));var a=r.getService(c.ILakeKernelService.ID);a&&(a.registerLakeCardWriter("bookmark",new _.default),a.registerLakeCardWriter("bookmarkInline",new w.default));var i=r.getService(s.ITextDataSourceKernelService.ID);i&&i.registerTextWriter(v.default.NodeNames,new v.default);var f=r.getService(u.IHTMLKernelService.ID);f&&f.registerNodeHTMLWriter(g.default.NodeNames,new g.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"bookmark"}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:O.BookmarkKernelOption}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:P.BookmarkKernelService}),t}(i.KernelPlugin);t.default=C},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.newJob(),n=r.getSelection(),o=a.CardUtil.insertCardNode(r,n,"bookmark",t).cardNode;r.setSelection([r.newRange(r.newPosition(o.parentNode,o.offset+1))]),e.commitJob(r)}}),t}(a.Command);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);if(!o||"link"!==o.nodeName)return e.cancelJob(n),!1;var u=n.selectNode(o);u=a.SelectionUtil.deleteContent(n,u),i.assert.fatal(u.collapsed,"plugins/bookmark/src/kernel/commands/link-to-bookmark-command.ts:27");var l=a.CardUtil.insertCardNode(n,u,"bookmark",r).cardNode;n.setSelection([n.newRange(n.newPosition(l.parentNode,l.offset+1))]),e.commitJob(n)}}),t}(a.Command);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3454),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n=e.newJob(),o=n.getNodeById(t);if(!o||"link"!==o.nodeName)return e.cancelJob(n),!1;var u=n.selectNode(o);u=a.SelectionUtil.deleteContent(n,u),i.assert.fatal(u.collapsed,"plugins/bookmark/src/kernel/commands/link-to-bookmark-inline-command.ts:27");var l=a.CardUtil.insertCardNode(n,u,"bookmarkInline",r).cardNode;n.setSelection([n.newRange(n.newPosition(l.parentNode,l.offset+1))]),e.commitJob(n)}}),t}(a.Command);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"bookmark"}),t}(a(r(3500)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"bookmarkInline"}),t}(a(r(3500)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3481),l=a(r(3726)),c=r(3772),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){e.setNode(i.default.createCard("bookmark",l.default.fromLake(r,{type:c.BOOKMARK_TYPE_BLOCK}),n))}}),t}(u.LakeCardReader);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3481),l=a(r(3726)),c=r(3772),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){e.setNode(i.default.createCard("bookmarkInline",l.default.fromLake(r,{type:c.BOOKMARK_TYPE_INLINE}),n))}}),t}(u.LakeCardReader);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(t.attrs||{}).value||{},n=r.src,o=r.text;n&&e.append(o||n)}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["bookmark","bookmarkInline"]}),t}(a(r(3639)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=(null===(r=t.attrs)||void 0===r?void 0:r.value)||{},o=n.src,a=n.detail;if(o){var i=(null==a?void 0:a.title)||o;if("bookmark"===t.name){var u=e.createElement("div",{className:"ne-bookmark"}),l=e.createElement("a",{attrs:{href:o,target:"_blank"}});return e.appendChild(u,l),e.appendChild(l,e.createTextNode(o)),void e.setNode(u)}var c=e.createElement("span",{className:"ne-bookmark-inline"}),s=e.createElement("a",{attrs:{href:o,target:"_blank"}});e.appendChild(s,e.createTextNode(i||o)),e.appendChild(c,s),e.setNode(c)}}}),Object.defineProperty(t,"NodeNames",{enumerable:!0,configurable:!0,writable:!0,value:["bookmark","bookmarkInline"]}),t}(a(r(3470)).default);t.default=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3726)),a=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){e.setNode(e.createBlockCard("bookmarklink",o.default.toLake(r),n))}}),e}();t.default=a},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3726)),a=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){e.setNode(e.createInlineCard("bookmarkInline",o.default.toLake(r),n))}}),e}();t.default=a},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.BookmarkKernelOption=void 0;var o=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=n({},e)}return Object.defineProperty(e.prototype,"recognizeYuque",{get:function(){return!!this._option.recognizeYuque},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:"bookmark"}),e}();t.BookmarkKernelOption=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LakeBookmarkYuqueCardReader=void 0;var i=a(r(3458)),u=r(3481),l=a(r(3726)),c=r(3772),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=r.mode,a=r.src;"title"!==o||"string"!=typeof a?e.setNode(i.default.createCard("title"===o?"inline":"block",{cardName:t,cardValue:r},n)):e.setNode(i.default.createCard("bookmarkInline",l.default.fromLake(r,{type:c.BOOKMARK_TYPE_INLINE}),n))}}),t}(u.LakeCardReader);t.LakeBookmarkYuqueCardReader=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BookmarkKernelService=void 0;var i=r(3453),u=r(4276),l=r(3454),c=a(r(3726)),s=r(3772),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"createBookmarkNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){return"block"===t?i.INodeHelper.createCard("bookmark",c.default.fromLake(e,{type:s.BOOKMARK_TYPE_BLOCK}),r):(l.assert.fatal("inline"===t,"plugins/bookmark/src/kernel/bookmark-kernel-service.ts:27"),i.INodeHelper.createCard("bookmarkInline",c.default.fromLake(e,{type:s.BOOKMARK_TYPE_INLINE}),r))}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(u.IBookmarkKernelService);t.BookmarkKernelService=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(3500)),l=a(r(3726)),c=r(3772),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=null===(r=t.attrs)||void 0===r?void 0:r.value;if(!n)return!0;var o=n.mode,a=n.src;return"title"!==o||"string"!=typeof a||(e.setNode(i.INodeHelper.createCard("bookmarkInline",l.default.fromLake(n,{type:c.BOOKMARK_TYPE_INLINE}),t.id)),!0)}}),t}(u.default);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(3482)),l=r(3466),c=r(3493),s=r(3463),f=a(r(5125)),d=a(r(5126)),p=a(r(5128)),h=a(r(5129)),y=a(r(5130)),b=r(3636),m=a(r(5131)),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerBlockCard(t.cardName)}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.kernel,t=e.getService(s.ILakeKernelService.ID);t&&t.registerLakeCardReader(u.default.CALENDAR.UI_NAME,new d.default);var r=e.getService(c.IINodeReaderKernelService.ID);r&&r.registerINodeCardReader(f.default.CardName,new f.default);var n=e.getService(s.ILakeKernelService.ID);n&&n.registerLakeCardWriter(u.default.CALENDAR.NODE_NAME,new h.default);var o=e.getService(l.IHTMLKernelService.ID);o&&o.registerNodeHTMLWriter(u.default.CALENDAR.NODE_NAME,new p.default(e.option.currentURL,this.option.getDocReadURL));var a=e.getService(b.IMarkdownService.ID);a&&a.registerMarkdownWriter(u.default.CALENDAR.NODE_NAME,new m.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"calendar"}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:y.default}),Object.defineProperty(t,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:u.default.CALENDAR.NODE_NAME}),t}(i.KernelPlugin);t.default=v},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"calendar"}),t}(a(r(3500)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=a(r(3482)),l=r(3481),c=a(r(4278)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){e.setNode(i.default.createCard(u.default.CALENDAR.NODE_NAME,c.default.fromLake(r),n))}}),t}(l.LakeCardReader);t.default=s},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3932),u=r(3932),l=r(3597),c=a(r(4279)),s=function(){function e(e){var t=e.title,r=e.desc,n=e.colorIndex,o=e.start,a=e.end;Object.defineProperty(this,"_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_title",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_desc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_start",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_end",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_colorIndex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_startDate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_endDate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._id=(0,l.uuid)(5),this._title=t,this._desc=r,this._start=o,this._end=null!=a?a:o,this._colorIndex=n,this._startDate=(0,u.parseDayNumberToDate)(this._start),this._endDate=(0,u.parseDayNumberToDate)(this._end),this._order=0}return Object.defineProperty(e,"convert",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var r=new e(t);return r._id=t.id,r}}),Object.defineProperty(e,"cloneWithUpdateValue",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,n){var o=e.convert(t);return o.updateValue(r,n),o}}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desc",{get:function(){return this._desc},set:function(e){this._desc=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"colorIndex",{get:function(){return this._colorIndex},set:function(e){this._colorIndex=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._start},set:function(e){this._start=e,this._startDate=(0,u.parseDayNumberToDate)(this._start)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startDate",{get:function(){return this._startDate},set:function(e){this._startDate=e,this._start=(0,u.parseDayToNumber)(this._startDate)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},set:function(e){this._end=e,this._endDate=(0,u.parseDayNumberToDate)(this._end)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endDate",{get:function(){return this._endDate},set:function(e){this._endDate=e,this._end=(0,u.parseDayToNumber)(this._endDate)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._endDate.diff(this._startDate,c.DateType.Day)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"include",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return i.dayjs.isDayjs(e)?e.isBetween(this._startDate,this._endDate,null,"[]"):this._start<=e&&e<=this._end}}),Object.defineProperty(e.prototype,"isStartDate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return i.dayjs.isDayjs(e)?e.isSame(this._startDate,c.DateType.Day):this._start===e}}),Object.defineProperty(e.prototype,"isEndDate",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return i.dayjs.isDayjs(e)?e.isSame(this._endDate,c.DateType.Day):this._end===e}}),Object.defineProperty(e.prototype,"isSameDaySchedule",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.start===this.end}}),Object.defineProperty(e.prototype,"updateValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this[e]=t}}),Object.defineProperty(e.prototype,"toJSON",{enumerable:!1,configurable:!0,writable:!0,value:function(){return{id:this._id,title:this._title,desc:this._desc,start:this._start,end:this._end,colorIndex:this._colorIndex}}}),e}();t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"getDocReadURL",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(n,"_currentURL",{enumerable:!0,configurable:!0,writable:!0,value:""}),n._currentURL=t,n}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=t.id,o=(null===(r=this.getDocReadURL)||void 0===r?void 0:r.call(this,this._currentURL,n))||"",a=e.createElement("div",{className:"ne-calendar"}),i=e.createElement("a",{attrs:{href:o,target:"_blank"}});e.appendChild(i,e.createTextNode(o)),e.appendChild(a,e.createTextNode("此处为语雀日历卡片，点击链接查看：")),e.appendChild(a,i),e.setNode(a)}}),t}(a(r(3470)).default);t.default=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3482)),a=n(r(4278)),i=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){e.setNode(e.createBlockCard(o.default.CALENDAR.LAKE_NAME,a.default.toLake(r),n))}}),e}();t.default=i},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_OPTION=void 0;var o=n(r(3464)),a=n(r(3482));t.DEFAULT_OPTION={getDocReadURL:function(e,t){return""}};var i=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=(0,o.default)({},t.DEFAULT_OPTION,e)}return Object.defineProperty(e.prototype,"getDocReadURL",{get:function(){return this._option.getDocReadURL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:a.default.CALENDAR.OPTION_NAME}),e}();t.default=i},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=t.attrs.value.schedules,o=!1;return Object.keys(r).forEach((function(t){var a,i,u=r[t];try{for(var l=n(u),c=l.next();!c.done;c=l.next()){var s=c.value;o=!0,e.append("[".concat(s.start,"~").concat(s.end,"] ").concat(s.title,"  ")),e.append("\n")}}catch(e){a={error:e}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}})),o&&e.append("\n"),!1}}),e}();t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(3482)),l=r(3466),c=r(3493),s=r(3463),f=a(r(5133)),d=a(r(5134)),p=a(r(5136)),h=a(r(5137)),y=r(5138),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var r,n,o,a;e.registerBlockCard(t.cardName),null===(r=e.getService(s.ILakeKernelService.ID))||void 0===r||r.registerLakeCardReader(u.default.VOTE.UI_NAME,new d.default),null===(n=e.getService(c.IINodeReaderKernelService.ID))||void 0===n||n.registerINodeCardReader(f.default.CardName,new f.default),null===(o=e.getService(s.ILakeKernelService.ID))||void 0===o||o.registerLakeCardWriter(u.default.VOTE.NODE_NAME,new h.default),null===(a=e.getService(l.IHTMLKernelService.ID))||void 0===a||a.registerNodeHTMLWriter(u.default.VOTE.NODE_NAME,new p.default(e.option.currentURL,this.option.writeHtmlUrl))}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"vote"}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:y.VoteKernelOption}),Object.defineProperty(t,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:u.default.VOTE.NODE_NAME}),t}(i.KernelPlugin);t.default=b},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"vote"}),t}(a(r(3500)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=a(r(3482)),l=r(3481),c=a(r(4280)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=i.default.createCard(u.default.VOTE.NODE_NAME,c.default.fromLake(r),n);e.setNode(o)}}),t}(l.LakeCardReader);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoteTypes=t.VoteTypeName=t.VoteType=t.UpdateType=t.Action=t.LoadingStatus=void 0,t.LoadingStatus={Loading:"loading",Done:"done"},t.Action={QueryDetail:"queryDetail",QueryCheck:"queryCheck",Vote:"vote"},t.UpdateType={Add:"add",Update:"update",Delete:"delete"},t.VoteType={Single:"single",Multiple:"multiple"},t.VoteTypeName={single:"单选",multiple:"多选"},t.VoteTypes=[{name:t.VoteTypeName.single,value:t.VoteType.Single},{name:t.VoteTypeName.multiple,value:t.VoteType.Multiple}]},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"writeHtmlUrl",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(n,"_currentUrl",{enumerable:!0,configurable:!0,writable:!0,value:""}),n._currentUrl=t,n}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n=t.id,o=(null===(r=this.writeHtmlUrl)||void 0===r?void 0:r.call(this,this._currentUrl,n||"",t))||"",a=e.createElement("div",{className:"ne-vote"}),i=e.createElement("a",{attrs:{href:o}});e.appendChild(i,e.createTextNode(o)),e.appendChild(a,e.createTextNode("此处为语雀投票卡片，点击链接查看：")),e.appendChild(a,i),e.setNode(a)}}),t}(a(r(3470)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3482)),u=a(r(3547)),l=a(r(4280)),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.createBlockCard(i.default.VOTE.LAKE_NAME,l.default.toLake(r),n);e.setNode(o)}}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VoteKernelOption=void 0;var o=r(3761),a=n(r(3464)),i=function(){function e(e){var t=this;Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"writeHtmlUrl",{enumerable:!0,configurable:!0,writable:!0,value:function(e,r,n){var o,a;return(null===(a=(o=t._option).writeHtmlUrl)||void 0===a?void 0:a.call(o,e,r,n))||""}}),this._option=(0,a.default)({},e)}return Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:o.CARD.VOTE.OPTION_NAME}),e}();t.VoteKernelOption=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=a(r(3482)),l=r(3466),c=r(3493),s=r(3463),f=a(r(5140)),d=a(r(5141)),p=a(r(5142)),h=a(r(5143)),y=r(3636),b=a(r(5144)),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n,o,a,i,m,v,g;e.registerBlockCard(u.default.TEXT_DIAGRAM.NODE_NAME),null===(t=e.getService(s.ILakeKernelService.ID))||void 0===t||t.registerLakeCardReader("diagram",new d.default),null===(r=e.getService(s.ILakeKernelService.ID))||void 0===r||r.registerLakeCardReader("puml",new d.default),null===(n=e.getService(s.ILakeKernelService.ID))||void 0===n||n.registerLakeCardReader("graphviz",new d.default),null===(o=e.getService(s.ILakeKernelService.ID))||void 0===o||o.registerLakeCardReader("flowchart",new d.default),null===(a=e.getService(s.ILakeKernelService.ID))||void 0===a||a.registerLakeCardReader("mermaid",new d.default),null===(i=e.getService(c.IINodeReaderKernelService.ID))||void 0===i||i.registerINodeCardReader(f.default.CardName,new f.default),null===(m=e.getService(s.ILakeKernelService.ID))||void 0===m||m.registerLakeCardWriter(u.default.TEXT_DIAGRAM.NODE_NAME,new h.default),null===(v=e.getService(l.IHTMLKernelService.ID))||void 0===v||v.registerNodeHTMLWriter(u.default.TEXT_DIAGRAM.NODE_NAME,new p.default),null===(g=e.getService(y.IMarkdownService.ID))||void 0===g||g.registerMarkdownWriter(u.default.TEXT_DIAGRAM.NODE_NAME,new b.default)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:u.default.TEXT_DIAGRAM.PLUGIN_NAME}),t}(i.KernelPlugin);t.default=m},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"textDiagram"}),t}(a(r(3500)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3482)),u=r(3481),l=a(r(4281)),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.createCard(i.default.TEXT_DIAGRAM.NODE_NAME,l.default.fromLake(r,t),n);e.setNode(o)}}),t}(u.LakeCardReader);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"writeAsCode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){var n,o=e.createElement("div",{className:"ne-text-diagram"});e.isInlineMode()&&(n={border:"1px solid #e8e8e8",borderRadius:"2px",background:"#f9f9f9",padding:"16px",fontSize:"13px",color:"#595959"});var a=e.createElement("pre",{attrs:{"data-language":r},style:n});e.appendChild(a,e.createTextNode(t)),e.appendChild(o,a),e.setNode(o)}}),Object.defineProperty(t.prototype,"writeAsImage",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=e.createElement("div",{className:"ne-text-diagram"}),n=e.createElement("img",{attrs:{src:t}});e.appendChild(r,n),e.setNode(r)}}),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(t.attrs||{}).value||{},n=r.code,o=r.url,a=r.type;n&&(o?this.writeAsImage(e,o):this.writeAsCode(e,n,a))}}),t}(a(r(3470)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3547)),u=a(r(4281)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.createBlockCard("diagram",u.default.toLake(r),n);e.setNode(o)}}),t}(i.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(t.attrs||{}).value||{},n=r.code,o=r.url,a=r.type;return!!n&&(o?(this.writeAsImage(e,o),!1):(this.writeAsCode(e,n,a),!1))}}),Object.defineProperty(e.prototype,"writeAsCode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){e.append("```"+r+"\n"),e.append(t),e.append("\n```\n\n")}}),Object.defineProperty(e.prototype,"writeAsImage",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.append("![](".concat(t,")  \n"))}}),e}();t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3846),l=r(3466),c=r(3921),s=r(3463),f=a(r(5146)),d=a(r(5147)),p=a(r(5148)),h=a(r(5149)),y=a(r(5150)),b=a(r(5151)),m=r(3848),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){e.registerBlockCard(t.cardName)}}),Object.defineProperty(t.prototype,"afterInit",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.kernel,r=e.getService(s.ILakeKernelService.ID),n=e.getService(m.IUploadKernelService.ID);r&&r.registerLakeCardReader("audio",new h.default);var o=e.getService(c.INodeReaderKernelService.ID);o&&o.registerINodeCardReader(p.default.CardName,new p.default);var a=e.getService(u.IFileReaderKernelService.ID);a&&a.registerFileReader(null==n?void 0:n.getFileAcceptUtil().getAudioFileAccept(this.option.accept),new d.default);var i=e.getService(s.ILakeKernelService.ID);i&&i.registerLakeCardWriter(t.cardName,new b.default);var f=e.getService(l.IHTMLKernelService.ID);f&&f.registerNodeHTMLWriter(t.cardName,new y.default(e.option.currentURL,this.option))}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:"audio"}),Object.defineProperty(t,"cardName",{enumerable:!0,configurable:!0,writable:!0,value:"audio"}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:f.default}),t}(i.KernelPlugin);t.default=v},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(3464)),a=n(r(3482)),i={accept:null,getDocReadURL:function(e){return e}},u=function(){function e(e){Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=(0,o.default)({},i,e)}return Object.defineProperty(e.prototype,"accept",{get:function(){return this._option.accept},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getDocReadURL",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._option.getDocReadURL(e,t)}}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:a.default.AUDIO.OPTION_NAME}),e}();t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3458)),u=r(3633),l=a(r(3847)),c=a(r(4036)),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"readFile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(("audio"===(null==t?void 0:t.category)||"localDoc"===(null==t?void 0:t.category))&&(null==t?void 0:t.from)===u.SOURCE_FROM_UI){var r=e._$neUploadTask;if(r)return i.default.createCard("audio",c.default.getInitCardValue(r))}}}),t}(l.default);t.default=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:"audio"}),t}(a(r(3500)).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3481),u=a(r(4036)),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.createCard("audio",u.default.fromLake(r),n);e.setNode(o)}}),t}(i.LakeCardReader);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3470)),u=r(4282),l=function(e){function t(t,r){var n=e.call(this)||this;return Object.defineProperty(n,"audioOption",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(n,"_currentUrl",{enumerable:!0,configurable:!0,writable:!0,value:""}),n._currentUrl=t,n}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r,n,o=null===(r=null==t?void 0:t.attrs)||void 0===r?void 0:r.value;if(o&&(null==o?void 0:o.status)===u.TYPE_UPLOADED){var a=t.id,i=this.audioOption.getDocReadURL(this._currentUrl,a),l=e.createElement("div",{className:"ne-audio"}),c=e.createElement("a",{attrs:{href:i}});e.appendChild(c,e.createTextNode("此处为语雀音频卡片，点击链接查看：")),e.appendChild(l,c),e.setNode(l),e.addAttr("data-audio-src",null===(n=o.audioInfo)||void 0===n?void 0:n.id)}}}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(4036)),a=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){e.setNode(e.createInlineCard("audio",o.default.toLake(r),n))}}),e}();t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3453),u=r(3466),l=r(3493),c=r(3463),s=a(r(5153)),f=a(r(5154)),d=a(r(5155)),p=a(r(5156)),h=a(r(5157)),y=r(3636),b=r(5158),m=r(3773),v=a(r(5159)),g=r(4034),_=a(r(5160)),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t,r,n,o,a,i;e.registerInlineCard(m.pluginRegister.cardName),e.registerCommand(m.pluginRegister.command.dateCard,new s.default),e.registerCommand(m.pluginRegister.command.getSelectDateCard,new v.default),null===(t=e.getService(g.ITextDataSourceKernelService.ID))||void 0===t||t.registerTextWriter(m.pluginRegister.cardName,new _.default),null===(r=e.getService(c.ILakeKernelService.ID))||void 0===r||r.registerLakeCardReader(m.pluginRegister.cardName,new d.default),null===(n=e.getService(l.IINodeReaderKernelService.ID))||void 0===n||n.registerINodeCardReader(f.default.CardName,new f.default),null===(o=e.getService(u.IHTMLKernelService.ID))||void 0===o||o.registerNodeHTMLWriter(m.pluginRegister.cardName,new p.default),null===(a=e.getService(c.ILakeKernelService.ID))||void 0===a||a.registerLakeCardWriter(m.pluginRegister.cardName,new h.default),null===(i=e.getService(y.IMarkdownService.ID))||void 0===i||i.registerMarkdownWriter(m.pluginRegister.cardName,new b.MarkdownLabelCardWriter)}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:m.pluginRegister.pluginName}),t}(i.KernelPlugin);t.default=w},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3773),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.getSelection().rangeCount>1?a.Command.UNAVAILABLE:a.Command.NOT_EXECUTED}}),Object.defineProperty(t.prototype,"execute",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=!1);var n=e.newJob();if(this.getState(n)===a.Command.UNAVAILABLE)return e.cancelJob(n),!1;var o=a.CardUtil.insertCardNode(n,n.getSelection(),i.pluginRegister.cardName,t),u=o.selection,l=o.cardNode;return r?n.setSelection([n.newRange(n.newPosition(l,0))]):n.setSelection(u),e.commitJob(n),l.id}}),t}(a.Command);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3500)),u=r(3773),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t,"CardName",{enumerable:!0,configurable:!0,writable:!0,value:u.pluginRegister.cardName}),t}(i.default);t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(3481),u=a(r(4283)),l=r(3773),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"read",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.createCard(l.pluginRegister.cardName,u.default.fromLake(r),n);e.setNode(o)}}),t}(i.LakeCardReader);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(97)),u=a(r(3470)),l=a(r(4037)),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(0,i.default)(t,"attrs.value",{}).date,n=r?(0,l.default)(r):"",o=e.createElement("span",{className:"ne-date-card",attrs:{"data-date":r}});e.appendChild(o,e.createTextNode(n)),e.setNode(o)}}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(3547)),u=a(r(4283)),l=r(3773),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,r,n){var o=e.createInlineCard(l.pluginRegister.cardName,u.default.toLake(r),n);e.setNode(o)}}),t}(i.default);t.default=c},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownLabelCardWriter=void 0;var o=n(r(97)),a=n(r(4037)),i=function(){function e(){}return Object.defineProperty(e.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(0,o.default)(t,"attrs.value",{}).date;return e.append((0,a.default)(r)),!0}}),e}();t.MarkdownLabelCardWriter=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(3453),i=r(3773),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.getSelection();if(!a.SelectionUtil.isInCard(t))return null;var r=t.firstRange.start.node;return r.nodeName===i.pluginRegister.cardName?r.id:null}}),t}(a.Command);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(r(97)),u=a(r(3639)),l=a(r(4037)),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"write",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var r=(0,i.default)(t,"attrs.value",{}).date;e.append((0,l.default)(r))}}),t}(u.default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.UploadPlugin=void 0;var a=r(3453),i=r(4284),u=r(5162),l=r(5163),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){}}),Object.defineProperty(t,"PluginName",{enumerable:!0,configurable:!0,writable:!0,value:i.pluginRegister.pluginName}),Object.defineProperty(t,"PluginOption",{enumerable:!0,configurable:!0,writable:!0,value:u.UploadOption}),Object.defineProperty(t,"Service",{enumerable:!0,configurable:!0,writable:!0,value:l.UploadKernelService}),t}(a.KernelPlugin);t.UploadPlugin=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UploadOption=void 0;var n=r(4284),o=r(4220),a=r(4219),i=function(e){if(!e)return"";var t;if(t="string"==typeof e?e:e.name){if((t=t.toLowerCase()).endsWith(".mindnode.zip"))return"mindnode.zip";if(t.endsWith(".xmind.zip"))return"xmind.zip";if(t.endsWith(".mmap.zip"))return"mmap.zip";if(t.endsWith(".mpp.zip"))return"mpp.zip"}var r=t&&t.split(".").pop()||"",n=e instanceof File&&e.type&&a.mimeMap[e.type];return n?n.includes(r)?r:n[0]:r},u=function(){function e(e){void 0===e&&(e={}),Object.defineProperty(this,"_option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._option=e}return Object.defineProperty(e.prototype,"acceptUtil",{get:function(){return this._option.acceptUtil||o.defaultAcceptUtil},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getFileExtname",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"function"==typeof this._option.getFileExtname?this._option.getFileExtname(e):i(e)}}),Object.defineProperty(e,"OptionName",{enumerable:!0,configurable:!0,writable:!0,value:n.pluginRegister.pluginName}),e}();t.UploadOption=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.UploadKernelService=void 0;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"getFileAcceptUtil",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.plugin.option.acceptUtil}}),Object.defineProperty(t.prototype,"getFileExtname",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.plugin.option.getFileExtname(e)}}),Object.defineProperty(t.prototype,"destroy",{enumerable:!1,configurable:!0,writable:!0,value:function(){}}),t}(r(3848).IUploadKernelService);t.UploadKernelService=a},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(5165),a=r(5166),i=r(5167),u=n(n({},o.namedReferences),{all:o.namedReferences.html5});function l(e,t,r){t.lastIndex=0;var n,o=t.exec(e);if(o){n="";var a=0;do{a!==o.index&&(n+=e.substring(a,o.index));var i=o[0];n+=r(i),a=o.index+i.length}while(o=t.exec(e));a!==e.length&&(n+=e.substring(a))}else n=e;return n}var c={specialChars:/[<>'"&]/g,nonAscii:/[<>'"&\u0080-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,nonAsciiPrintable:/[<>'"&\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,nonAsciiPrintableOnly:/[\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,extensive:/[\x01-\x0c\x0e-\x1f\x21-\x2c\x2e-\x2f\x3a-\x40\x5b-\x60\x7b-\x7d\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g},s={mode:"specialChars",level:"all",numeric:"decimal"};t.encode=function(e,t){var r=void 0===t?s:t,n=r.mode,o=void 0===n?"specialChars":n,a=r.numeric,f=void 0===a?"decimal":a,d=r.level;if(!e)return"";var p=c[o],h=u[void 0===d?"all":d].characters,y="hexadecimal"===f;return l(e,p,(function(e){var t=h[e];if(!t){var r=e.length>1?i.getCodePoint(e,0):e.charCodeAt(0);t=(y?"&#x"+r.toString(16):"&#"+r)+";"}return t}))};var f={scope:"body",level:"all"},d=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);/g,p=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+)[;=]?/g,h={xml:{strict:d,attribute:p,body:o.bodyRegExps.xml},html4:{strict:d,attribute:p,body:o.bodyRegExps.html4},html5:{strict:d,attribute:p,body:o.bodyRegExps.html5}},y=n(n({},h),{all:h.html5}),b=String.fromCharCode,m=b(65533),v={level:"all"};function g(e,t,r,n){var o=e,u=e[e.length-1];if(r&&"="===u)o=e;else if(n&&";"!==u)o=e;else{var l=t[e];if(l)o=l;else if("&"===e[0]&&"#"===e[1]){var c=e[2],s="x"==c||"X"==c?parseInt(e.substr(3),16):parseInt(e.substr(2));o=s>=1114111?m:s>65535?i.fromCodePoint(s):b(a.numericUnicodeMap[s]||s)}}return o}t.decodeEntity=function(e,t){var r=(void 0===t?v:t).level;return e?g(e,u[void 0===r?"all":r].entities,!1,!1):""},t.decode=function(e,t){var r=void 0===t?f:t,n=r.level,o=void 0===n?"all":n,a=r.scope,i=void 0===a?"xml"===o?"strict":"body":a;if(!e)return"";var c=y[o][i],s=u[o].entities,d="attribute"===i,p="strict"===i;return l(e,c,(function(e){return g(e,s,d,p)}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyRegExps={xml:/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html4:/&notin;|&(?:nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|quot|amp|lt|gt|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html5:/&centerdot;|&copysr;|&divideontimes;|&gtcc;|&gtcir;|&gtdot;|&gtlPar;|&gtquest;|&gtrapprox;|&gtrarr;|&gtrdot;|&gtreqless;|&gtreqqless;|&gtrless;|&gtrsim;|&ltcc;|&ltcir;|&ltdot;|&lthree;|&ltimes;|&ltlarr;|&ltquest;|&ltrPar;|&ltri;|&ltrie;|&ltrif;|&notin;|&notinE;|&notindot;|&notinva;|&notinvb;|&notinvc;|&notni;|&notniva;|&notnivb;|&notnivc;|&parallel;|&timesb;|&timesbar;|&timesd;|&(?:AElig|AMP|Aacute|Acirc|Agrave|Aring|Atilde|Auml|COPY|Ccedil|ETH|Eacute|Ecirc|Egrave|Euml|GT|Iacute|Icirc|Igrave|Iuml|LT|Ntilde|Oacute|Ocirc|Ograve|Oslash|Otilde|Ouml|QUOT|REG|THORN|Uacute|Ucirc|Ugrave|Uuml|Yacute|aacute|acirc|acute|aelig|agrave|amp|aring|atilde|auml|brvbar|ccedil|cedil|cent|copy|curren|deg|divide|eacute|ecirc|egrave|eth|euml|frac12|frac14|frac34|gt|iacute|icirc|iexcl|igrave|iquest|iuml|laquo|lt|macr|micro|middot|nbsp|not|ntilde|oacute|ocirc|ograve|ordf|ordm|oslash|otilde|ouml|para|plusmn|pound|quot|raquo|reg|sect|shy|sup1|sup2|sup3|szlig|thorn|times|uacute|ucirc|ugrave|uml|uuml|yacute|yen|yuml|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g},t.namedReferences={xml:{entities:{"&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&amp;":"&"},characters:{"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","&":"&amp;"}},html4:{entities:{"&apos;":"'","&nbsp":" ","&nbsp;":" ","&iexcl":"¡","&iexcl;":"¡","&cent":"¢","&cent;":"¢","&pound":"£","&pound;":"£","&curren":"¤","&curren;":"¤","&yen":"¥","&yen;":"¥","&brvbar":"¦","&brvbar;":"¦","&sect":"§","&sect;":"§","&uml":"¨","&uml;":"¨","&copy":"©","&copy;":"©","&ordf":"ª","&ordf;":"ª","&laquo":"«","&laquo;":"«","&not":"¬","&not;":"¬","&shy":"­","&shy;":"­","&reg":"®","&reg;":"®","&macr":"¯","&macr;":"¯","&deg":"°","&deg;":"°","&plusmn":"±","&plusmn;":"±","&sup2":"²","&sup2;":"²","&sup3":"³","&sup3;":"³","&acute":"´","&acute;":"´","&micro":"µ","&micro;":"µ","&para":"¶","&para;":"¶","&middot":"·","&middot;":"·","&cedil":"¸","&cedil;":"¸","&sup1":"¹","&sup1;":"¹","&ordm":"º","&ordm;":"º","&raquo":"»","&raquo;":"»","&frac14":"¼","&frac14;":"¼","&frac12":"½","&frac12;":"½","&frac34":"¾","&frac34;":"¾","&iquest":"¿","&iquest;":"¿","&Agrave":"À","&Agrave;":"À","&Aacute":"Á","&Aacute;":"Á","&Acirc":"Â","&Acirc;":"Â","&Atilde":"Ã","&Atilde;":"Ã","&Auml":"Ä","&Auml;":"Ä","&Aring":"Å","&Aring;":"Å","&AElig":"Æ","&AElig;":"Æ","&Ccedil":"Ç","&Ccedil;":"Ç","&Egrave":"È","&Egrave;":"È","&Eacute":"É","&Eacute;":"É","&Ecirc":"Ê","&Ecirc;":"Ê","&Euml":"Ë","&Euml;":"Ë","&Igrave":"Ì","&Igrave;":"Ì","&Iacute":"Í","&Iacute;":"Í","&Icirc":"Î","&Icirc;":"Î","&Iuml":"Ï","&Iuml;":"Ï","&ETH":"Ð","&ETH;":"Ð","&Ntilde":"Ñ","&Ntilde;":"Ñ","&Ograve":"Ò","&Ograve;":"Ò","&Oacute":"Ó","&Oacute;":"Ó","&Ocirc":"Ô","&Ocirc;":"Ô","&Otilde":"Õ","&Otilde;":"Õ","&Ouml":"Ö","&Ouml;":"Ö","&times":"×","&times;":"×","&Oslash":"Ø","&Oslash;":"Ø","&Ugrave":"Ù","&Ugrave;":"Ù","&Uacute":"Ú","&Uacute;":"Ú","&Ucirc":"Û","&Ucirc;":"Û","&Uuml":"Ü","&Uuml;":"Ü","&Yacute":"Ý","&Yacute;":"Ý","&THORN":"Þ","&THORN;":"Þ","&szlig":"ß","&szlig;":"ß","&agrave":"à","&agrave;":"à","&aacute":"á","&aacute;":"á","&acirc":"â","&acirc;":"â","&atilde":"ã","&atilde;":"ã","&auml":"ä","&auml;":"ä","&aring":"å","&aring;":"å","&aelig":"æ","&aelig;":"æ","&ccedil":"ç","&ccedil;":"ç","&egrave":"è","&egrave;":"è","&eacute":"é","&eacute;":"é","&ecirc":"ê","&ecirc;":"ê","&euml":"ë","&euml;":"ë","&igrave":"ì","&igrave;":"ì","&iacute":"í","&iacute;":"í","&icirc":"î","&icirc;":"î","&iuml":"ï","&iuml;":"ï","&eth":"ð","&eth;":"ð","&ntilde":"ñ","&ntilde;":"ñ","&ograve":"ò","&ograve;":"ò","&oacute":"ó","&oacute;":"ó","&ocirc":"ô","&ocirc;":"ô","&otilde":"õ","&otilde;":"õ","&ouml":"ö","&ouml;":"ö","&divide":"÷","&divide;":"÷","&oslash":"ø","&oslash;":"ø","&ugrave":"ù","&ugrave;":"ù","&uacute":"ú","&uacute;":"ú","&ucirc":"û","&ucirc;":"û","&uuml":"ü","&uuml;":"ü","&yacute":"ý","&yacute;":"ý","&thorn":"þ","&thorn;":"þ","&yuml":"ÿ","&yuml;":"ÿ","&quot":'"',"&quot;":'"',"&amp":"&","&amp;":"&","&lt":"<","&lt;":"<","&gt":">","&gt;":">","&OElig;":"Œ","&oelig;":"œ","&Scaron;":"Š","&scaron;":"š","&Yuml;":"Ÿ","&circ;":"ˆ","&tilde;":"˜","&ensp;":" ","&emsp;":" ","&thinsp;":" ","&zwnj;":"‌","&zwj;":"‍","&lrm;":"‎","&rlm;":"‏","&ndash;":"–","&mdash;":"—","&lsquo;":"‘","&rsquo;":"’","&sbquo;":"‚","&ldquo;":"“","&rdquo;":"”","&bdquo;":"„","&dagger;":"†","&Dagger;":"‡","&permil;":"‰","&lsaquo;":"‹","&rsaquo;":"›","&euro;":"€","&fnof;":"ƒ","&Alpha;":"Α","&Beta;":"Β","&Gamma;":"Γ","&Delta;":"Δ","&Epsilon;":"Ε","&Zeta;":"Ζ","&Eta;":"Η","&Theta;":"Θ","&Iota;":"Ι","&Kappa;":"Κ","&Lambda;":"Λ","&Mu;":"Μ","&Nu;":"Ν","&Xi;":"Ξ","&Omicron;":"Ο","&Pi;":"Π","&Rho;":"Ρ","&Sigma;":"Σ","&Tau;":"Τ","&Upsilon;":"Υ","&Phi;":"Φ","&Chi;":"Χ","&Psi;":"Ψ","&Omega;":"Ω","&alpha;":"α","&beta;":"β","&gamma;":"γ","&delta;":"δ","&epsilon;":"ε","&zeta;":"ζ","&eta;":"η","&theta;":"θ","&iota;":"ι","&kappa;":"κ","&lambda;":"λ","&mu;":"μ","&nu;":"ν","&xi;":"ξ","&omicron;":"ο","&pi;":"π","&rho;":"ρ","&sigmaf;":"ς","&sigma;":"σ","&tau;":"τ","&upsilon;":"υ","&phi;":"φ","&chi;":"χ","&psi;":"ψ","&omega;":"ω","&thetasym;":"ϑ","&upsih;":"ϒ","&piv;":"ϖ","&bull;":"•","&hellip;":"…","&prime;":"′","&Prime;":"″","&oline;":"‾","&frasl;":"⁄","&weierp;":"℘","&image;":"ℑ","&real;":"ℜ","&trade;":"™","&alefsym;":"ℵ","&larr;":"←","&uarr;":"↑","&rarr;":"→","&darr;":"↓","&harr;":"↔","&crarr;":"↵","&lArr;":"⇐","&uArr;":"⇑","&rArr;":"⇒","&dArr;":"⇓","&hArr;":"⇔","&forall;":"∀","&part;":"∂","&exist;":"∃","&empty;":"∅","&nabla;":"∇","&isin;":"∈","&notin;":"∉","&ni;":"∋","&prod;":"∏","&sum;":"∑","&minus;":"−","&lowast;":"∗","&radic;":"√","&prop;":"∝","&infin;":"∞","&ang;":"∠","&and;":"∧","&or;":"∨","&cap;":"∩","&cup;":"∪","&int;":"∫","&there4;":"∴","&sim;":"∼","&cong;":"≅","&asymp;":"≈","&ne;":"≠","&equiv;":"≡","&le;":"≤","&ge;":"≥","&sub;":"⊂","&sup;":"⊃","&nsub;":"⊄","&sube;":"⊆","&supe;":"⊇","&oplus;":"⊕","&otimes;":"⊗","&perp;":"⊥","&sdot;":"⋅","&lceil;":"⌈","&rceil;":"⌉","&lfloor;":"⌊","&rfloor;":"⌋","&lang;":"〈","&rang;":"〉","&loz;":"◊","&spades;":"♠","&clubs;":"♣","&hearts;":"♥","&diams;":"♦"},characters:{"'":"&apos;"," ":"&nbsp;","¡":"&iexcl;","¢":"&cent;","£":"&pound;","¤":"&curren;","¥":"&yen;","¦":"&brvbar;","§":"&sect;","¨":"&uml;","©":"&copy;","ª":"&ordf;","«":"&laquo;","¬":"&not;","­":"&shy;","®":"&reg;","¯":"&macr;","°":"&deg;","±":"&plusmn;","²":"&sup2;","³":"&sup3;","´":"&acute;","µ":"&micro;","¶":"&para;","·":"&middot;","¸":"&cedil;","¹":"&sup1;","º":"&ordm;","»":"&raquo;","¼":"&frac14;","½":"&frac12;","¾":"&frac34;","¿":"&iquest;","À":"&Agrave;","Á":"&Aacute;","Â":"&Acirc;","Ã":"&Atilde;","Ä":"&Auml;","Å":"&Aring;","Æ":"&AElig;","Ç":"&Ccedil;","È":"&Egrave;","É":"&Eacute;","Ê":"&Ecirc;","Ë":"&Euml;","Ì":"&Igrave;","Í":"&Iacute;","Î":"&Icirc;","Ï":"&Iuml;","Ð":"&ETH;","Ñ":"&Ntilde;","Ò":"&Ograve;","Ó":"&Oacute;","Ô":"&Ocirc;","Õ":"&Otilde;","Ö":"&Ouml;","×":"&times;","Ø":"&Oslash;","Ù":"&Ugrave;","Ú":"&Uacute;","Û":"&Ucirc;","Ü":"&Uuml;","Ý":"&Yacute;","Þ":"&THORN;","ß":"&szlig;","à":"&agrave;","á":"&aacute;","â":"&acirc;","ã":"&atilde;","ä":"&auml;","å":"&aring;","æ":"&aelig;","ç":"&ccedil;","è":"&egrave;","é":"&eacute;","ê":"&ecirc;","ë":"&euml;","ì":"&igrave;","í":"&iacute;","î":"&icirc;","ï":"&iuml;","ð":"&eth;","ñ":"&ntilde;","ò":"&ograve;","ó":"&oacute;","ô":"&ocirc;","õ":"&otilde;","ö":"&ouml;","÷":"&divide;","ø":"&oslash;","ù":"&ugrave;","ú":"&uacute;","û":"&ucirc;","ü":"&uuml;","ý":"&yacute;","þ":"&thorn;","ÿ":"&yuml;",'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;","Œ":"&OElig;","œ":"&oelig;","Š":"&Scaron;","š":"&scaron;","Ÿ":"&Yuml;","ˆ":"&circ;","˜":"&tilde;"," ":"&ensp;"," ":"&emsp;"," ":"&thinsp;","‌":"&zwnj;","‍":"&zwj;","‎":"&lrm;","‏":"&rlm;","–":"&ndash;","—":"&mdash;","‘":"&lsquo;","’":"&rsquo;","‚":"&sbquo;","“":"&ldquo;","”":"&rdquo;","„":"&bdquo;","†":"&dagger;","‡":"&Dagger;","‰":"&permil;","‹":"&lsaquo;","›":"&rsaquo;","€":"&euro;","ƒ":"&fnof;","Α":"&Alpha;","Β":"&Beta;","Γ":"&Gamma;","Δ":"&Delta;","Ε":"&Epsilon;","Ζ":"&Zeta;","Η":"&Eta;","Θ":"&Theta;","Ι":"&Iota;","Κ":"&Kappa;","Λ":"&Lambda;","Μ":"&Mu;","Ν":"&Nu;","Ξ":"&Xi;","Ο":"&Omicron;","Π":"&Pi;","Ρ":"&Rho;","Σ":"&Sigma;","Τ":"&Tau;","Υ":"&Upsilon;","Φ":"&Phi;","Χ":"&Chi;","Ψ":"&Psi;","Ω":"&Omega;","α":"&alpha;","β":"&beta;","γ":"&gamma;","δ":"&delta;","ε":"&epsilon;","ζ":"&zeta;","η":"&eta;","θ":"&theta;","ι":"&iota;","κ":"&kappa;","λ":"&lambda;","μ":"&mu;","ν":"&nu;","ξ":"&xi;","ο":"&omicron;","π":"&pi;","ρ":"&rho;","ς":"&sigmaf;","σ":"&sigma;","τ":"&tau;","υ":"&upsilon;","φ":"&phi;","χ":"&chi;","ψ":"&psi;","ω":"&omega;","ϑ":"&thetasym;","ϒ":"&upsih;","ϖ":"&piv;","•":"&bull;","…":"&hellip;","′":"&prime;","″":"&Prime;","‾":"&oline;","⁄":"&frasl;","℘":"&weierp;","ℑ":"&image;","ℜ":"&real;","™":"&trade;","ℵ":"&alefsym;","←":"&larr;","↑":"&uarr;","→":"&rarr;","↓":"&darr;","↔":"&harr;","↵":"&crarr;","⇐":"&lArr;","⇑":"&uArr;","⇒":"&rArr;","⇓":"&dArr;","⇔":"&hArr;","∀":"&forall;","∂":"&part;","∃":"&exist;","∅":"&empty;","∇":"&nabla;","∈":"&isin;","∉":"&notin;","∋":"&ni;","∏":"&prod;","∑":"&sum;","−":"&minus;","∗":"&lowast;","√":"&radic;","∝":"&prop;","∞":"&infin;","∠":"&ang;","∧":"&and;","∨":"&or;","∩":"&cap;","∪":"&cup;","∫":"&int;","∴":"&there4;","∼":"&sim;","≅":"&cong;","≈":"&asymp;","≠":"&ne;","≡":"&equiv;","≤":"&le;","≥":"&ge;","⊂":"&sub;","⊃":"&sup;","⊄":"&nsub;","⊆":"&sube;","⊇":"&supe;","⊕":"&oplus;","⊗":"&otimes;","⊥":"&perp;","⋅":"&sdot;","⌈":"&lceil;","⌉":"&rceil;","⌊":"&lfloor;","⌋":"&rfloor;","〈":"&lang;","〉":"&rang;","◊":"&loz;","♠":"&spades;","♣":"&clubs;","♥":"&hearts;","♦":"&diams;"}},html5:{entities:{"&AElig":"Æ","&AElig;":"Æ","&AMP":"&","&AMP;":"&","&Aacute":"Á","&Aacute;":"Á","&Abreve;":"Ă","&Acirc":"Â","&Acirc;":"Â","&Acy;":"А","&Afr;":"𝔄","&Agrave":"À","&Agrave;":"À","&Alpha;":"Α","&Amacr;":"Ā","&And;":"⩓","&Aogon;":"Ą","&Aopf;":"𝔸","&ApplyFunction;":"⁡","&Aring":"Å","&Aring;":"Å","&Ascr;":"𝒜","&Assign;":"≔","&Atilde":"Ã","&Atilde;":"Ã","&Auml":"Ä","&Auml;":"Ä","&Backslash;":"∖","&Barv;":"⫧","&Barwed;":"⌆","&Bcy;":"Б","&Because;":"∵","&Bernoullis;":"ℬ","&Beta;":"Β","&Bfr;":"𝔅","&Bopf;":"𝔹","&Breve;":"˘","&Bscr;":"ℬ","&Bumpeq;":"≎","&CHcy;":"Ч","&COPY":"©","&COPY;":"©","&Cacute;":"Ć","&Cap;":"⋒","&CapitalDifferentialD;":"ⅅ","&Cayleys;":"ℭ","&Ccaron;":"Č","&Ccedil":"Ç","&Ccedil;":"Ç","&Ccirc;":"Ĉ","&Cconint;":"∰","&Cdot;":"Ċ","&Cedilla;":"¸","&CenterDot;":"·","&Cfr;":"ℭ","&Chi;":"Χ","&CircleDot;":"⊙","&CircleMinus;":"⊖","&CirclePlus;":"⊕","&CircleTimes;":"⊗","&ClockwiseContourIntegral;":"∲","&CloseCurlyDoubleQuote;":"”","&CloseCurlyQuote;":"’","&Colon;":"∷","&Colone;":"⩴","&Congruent;":"≡","&Conint;":"∯","&ContourIntegral;":"∮","&Copf;":"ℂ","&Coproduct;":"∐","&CounterClockwiseContourIntegral;":"∳","&Cross;":"⨯","&Cscr;":"𝒞","&Cup;":"⋓","&CupCap;":"≍","&DD;":"ⅅ","&DDotrahd;":"⤑","&DJcy;":"Ђ","&DScy;":"Ѕ","&DZcy;":"Џ","&Dagger;":"‡","&Darr;":"↡","&Dashv;":"⫤","&Dcaron;":"Ď","&Dcy;":"Д","&Del;":"∇","&Delta;":"Δ","&Dfr;":"𝔇","&DiacriticalAcute;":"´","&DiacriticalDot;":"˙","&DiacriticalDoubleAcute;":"˝","&DiacriticalGrave;":"`","&DiacriticalTilde;":"˜","&Diamond;":"⋄","&DifferentialD;":"ⅆ","&Dopf;":"𝔻","&Dot;":"¨","&DotDot;":"⃜","&DotEqual;":"≐","&DoubleContourIntegral;":"∯","&DoubleDot;":"¨","&DoubleDownArrow;":"⇓","&DoubleLeftArrow;":"⇐","&DoubleLeftRightArrow;":"⇔","&DoubleLeftTee;":"⫤","&DoubleLongLeftArrow;":"⟸","&DoubleLongLeftRightArrow;":"⟺","&DoubleLongRightArrow;":"⟹","&DoubleRightArrow;":"⇒","&DoubleRightTee;":"⊨","&DoubleUpArrow;":"⇑","&DoubleUpDownArrow;":"⇕","&DoubleVerticalBar;":"∥","&DownArrow;":"↓","&DownArrowBar;":"⤓","&DownArrowUpArrow;":"⇵","&DownBreve;":"̑","&DownLeftRightVector;":"⥐","&DownLeftTeeVector;":"⥞","&DownLeftVector;":"↽","&DownLeftVectorBar;":"⥖","&DownRightTeeVector;":"⥟","&DownRightVector;":"⇁","&DownRightVectorBar;":"⥗","&DownTee;":"⊤","&DownTeeArrow;":"↧","&Downarrow;":"⇓","&Dscr;":"𝒟","&Dstrok;":"Đ","&ENG;":"Ŋ","&ETH":"Ð","&ETH;":"Ð","&Eacute":"É","&Eacute;":"É","&Ecaron;":"Ě","&Ecirc":"Ê","&Ecirc;":"Ê","&Ecy;":"Э","&Edot;":"Ė","&Efr;":"𝔈","&Egrave":"È","&Egrave;":"È","&Element;":"∈","&Emacr;":"Ē","&EmptySmallSquare;":"◻","&EmptyVerySmallSquare;":"▫","&Eogon;":"Ę","&Eopf;":"𝔼","&Epsilon;":"Ε","&Equal;":"⩵","&EqualTilde;":"≂","&Equilibrium;":"⇌","&Escr;":"ℰ","&Esim;":"⩳","&Eta;":"Η","&Euml":"Ë","&Euml;":"Ë","&Exists;":"∃","&ExponentialE;":"ⅇ","&Fcy;":"Ф","&Ffr;":"𝔉","&FilledSmallSquare;":"◼","&FilledVerySmallSquare;":"▪","&Fopf;":"𝔽","&ForAll;":"∀","&Fouriertrf;":"ℱ","&Fscr;":"ℱ","&GJcy;":"Ѓ","&GT":">","&GT;":">","&Gamma;":"Γ","&Gammad;":"Ϝ","&Gbreve;":"Ğ","&Gcedil;":"Ģ","&Gcirc;":"Ĝ","&Gcy;":"Г","&Gdot;":"Ġ","&Gfr;":"𝔊","&Gg;":"⋙","&Gopf;":"𝔾","&GreaterEqual;":"≥","&GreaterEqualLess;":"⋛","&GreaterFullEqual;":"≧","&GreaterGreater;":"⪢","&GreaterLess;":"≷","&GreaterSlantEqual;":"⩾","&GreaterTilde;":"≳","&Gscr;":"𝒢","&Gt;":"≫","&HARDcy;":"Ъ","&Hacek;":"ˇ","&Hat;":"^","&Hcirc;":"Ĥ","&Hfr;":"ℌ","&HilbertSpace;":"ℋ","&Hopf;":"ℍ","&HorizontalLine;":"─","&Hscr;":"ℋ","&Hstrok;":"Ħ","&HumpDownHump;":"≎","&HumpEqual;":"≏","&IEcy;":"Е","&IJlig;":"Ĳ","&IOcy;":"Ё","&Iacute":"Í","&Iacute;":"Í","&Icirc":"Î","&Icirc;":"Î","&Icy;":"И","&Idot;":"İ","&Ifr;":"ℑ","&Igrave":"Ì","&Igrave;":"Ì","&Im;":"ℑ","&Imacr;":"Ī","&ImaginaryI;":"ⅈ","&Implies;":"⇒","&Int;":"∬","&Integral;":"∫","&Intersection;":"⋂","&InvisibleComma;":"⁣","&InvisibleTimes;":"⁢","&Iogon;":"Į","&Iopf;":"𝕀","&Iota;":"Ι","&Iscr;":"ℐ","&Itilde;":"Ĩ","&Iukcy;":"І","&Iuml":"Ï","&Iuml;":"Ï","&Jcirc;":"Ĵ","&Jcy;":"Й","&Jfr;":"𝔍","&Jopf;":"𝕁","&Jscr;":"𝒥","&Jsercy;":"Ј","&Jukcy;":"Є","&KHcy;":"Х","&KJcy;":"Ќ","&Kappa;":"Κ","&Kcedil;":"Ķ","&Kcy;":"К","&Kfr;":"𝔎","&Kopf;":"𝕂","&Kscr;":"𝒦","&LJcy;":"Љ","&LT":"<","&LT;":"<","&Lacute;":"Ĺ","&Lambda;":"Λ","&Lang;":"⟪","&Laplacetrf;":"ℒ","&Larr;":"↞","&Lcaron;":"Ľ","&Lcedil;":"Ļ","&Lcy;":"Л","&LeftAngleBracket;":"⟨","&LeftArrow;":"←","&LeftArrowBar;":"⇤","&LeftArrowRightArrow;":"⇆","&LeftCeiling;":"⌈","&LeftDoubleBracket;":"⟦","&LeftDownTeeVector;":"⥡","&LeftDownVector;":"⇃","&LeftDownVectorBar;":"⥙","&LeftFloor;":"⌊","&LeftRightArrow;":"↔","&LeftRightVector;":"⥎","&LeftTee;":"⊣","&LeftTeeArrow;":"↤","&LeftTeeVector;":"⥚","&LeftTriangle;":"⊲","&LeftTriangleBar;":"⧏","&LeftTriangleEqual;":"⊴","&LeftUpDownVector;":"⥑","&LeftUpTeeVector;":"⥠","&LeftUpVector;":"↿","&LeftUpVectorBar;":"⥘","&LeftVector;":"↼","&LeftVectorBar;":"⥒","&Leftarrow;":"⇐","&Leftrightarrow;":"⇔","&LessEqualGreater;":"⋚","&LessFullEqual;":"≦","&LessGreater;":"≶","&LessLess;":"⪡","&LessSlantEqual;":"⩽","&LessTilde;":"≲","&Lfr;":"𝔏","&Ll;":"⋘","&Lleftarrow;":"⇚","&Lmidot;":"Ŀ","&LongLeftArrow;":"⟵","&LongLeftRightArrow;":"⟷","&LongRightArrow;":"⟶","&Longleftarrow;":"⟸","&Longleftrightarrow;":"⟺","&Longrightarrow;":"⟹","&Lopf;":"𝕃","&LowerLeftArrow;":"↙","&LowerRightArrow;":"↘","&Lscr;":"ℒ","&Lsh;":"↰","&Lstrok;":"Ł","&Lt;":"≪","&Map;":"⤅","&Mcy;":"М","&MediumSpace;":" ","&Mellintrf;":"ℳ","&Mfr;":"𝔐","&MinusPlus;":"∓","&Mopf;":"𝕄","&Mscr;":"ℳ","&Mu;":"Μ","&NJcy;":"Њ","&Nacute;":"Ń","&Ncaron;":"Ň","&Ncedil;":"Ņ","&Ncy;":"Н","&NegativeMediumSpace;":"​","&NegativeThickSpace;":"​","&NegativeThinSpace;":"​","&NegativeVeryThinSpace;":"​","&NestedGreaterGreater;":"≫","&NestedLessLess;":"≪","&NewLine;":"\n","&Nfr;":"𝔑","&NoBreak;":"⁠","&NonBreakingSpace;":" ","&Nopf;":"ℕ","&Not;":"⫬","&NotCongruent;":"≢","&NotCupCap;":"≭","&NotDoubleVerticalBar;":"∦","&NotElement;":"∉","&NotEqual;":"≠","&NotEqualTilde;":"≂̸","&NotExists;":"∄","&NotGreater;":"≯","&NotGreaterEqual;":"≱","&NotGreaterFullEqual;":"≧̸","&NotGreaterGreater;":"≫̸","&NotGreaterLess;":"≹","&NotGreaterSlantEqual;":"⩾̸","&NotGreaterTilde;":"≵","&NotHumpDownHump;":"≎̸","&NotHumpEqual;":"≏̸","&NotLeftTriangle;":"⋪","&NotLeftTriangleBar;":"⧏̸","&NotLeftTriangleEqual;":"⋬","&NotLess;":"≮","&NotLessEqual;":"≰","&NotLessGreater;":"≸","&NotLessLess;":"≪̸","&NotLessSlantEqual;":"⩽̸","&NotLessTilde;":"≴","&NotNestedGreaterGreater;":"⪢̸","&NotNestedLessLess;":"⪡̸","&NotPrecedes;":"⊀","&NotPrecedesEqual;":"⪯̸","&NotPrecedesSlantEqual;":"⋠","&NotReverseElement;":"∌","&NotRightTriangle;":"⋫","&NotRightTriangleBar;":"⧐̸","&NotRightTriangleEqual;":"⋭","&NotSquareSubset;":"⊏̸","&NotSquareSubsetEqual;":"⋢","&NotSquareSuperset;":"⊐̸","&NotSquareSupersetEqual;":"⋣","&NotSubset;":"⊂⃒","&NotSubsetEqual;":"⊈","&NotSucceeds;":"⊁","&NotSucceedsEqual;":"⪰̸","&NotSucceedsSlantEqual;":"⋡","&NotSucceedsTilde;":"≿̸","&NotSuperset;":"⊃⃒","&NotSupersetEqual;":"⊉","&NotTilde;":"≁","&NotTildeEqual;":"≄","&NotTildeFullEqual;":"≇","&NotTildeTilde;":"≉","&NotVerticalBar;":"∤","&Nscr;":"𝒩","&Ntilde":"Ñ","&Ntilde;":"Ñ","&Nu;":"Ν","&OElig;":"Œ","&Oacute":"Ó","&Oacute;":"Ó","&Ocirc":"Ô","&Ocirc;":"Ô","&Ocy;":"О","&Odblac;":"Ő","&Ofr;":"𝔒","&Ograve":"Ò","&Ograve;":"Ò","&Omacr;":"Ō","&Omega;":"Ω","&Omicron;":"Ο","&Oopf;":"𝕆","&OpenCurlyDoubleQuote;":"“","&OpenCurlyQuote;":"‘","&Or;":"⩔","&Oscr;":"𝒪","&Oslash":"Ø","&Oslash;":"Ø","&Otilde":"Õ","&Otilde;":"Õ","&Otimes;":"⨷","&Ouml":"Ö","&Ouml;":"Ö","&OverBar;":"‾","&OverBrace;":"⏞","&OverBracket;":"⎴","&OverParenthesis;":"⏜","&PartialD;":"∂","&Pcy;":"П","&Pfr;":"𝔓","&Phi;":"Φ","&Pi;":"Π","&PlusMinus;":"±","&Poincareplane;":"ℌ","&Popf;":"ℙ","&Pr;":"⪻","&Precedes;":"≺","&PrecedesEqual;":"⪯","&PrecedesSlantEqual;":"≼","&PrecedesTilde;":"≾","&Prime;":"″","&Product;":"∏","&Proportion;":"∷","&Proportional;":"∝","&Pscr;":"𝒫","&Psi;":"Ψ","&QUOT":'"',"&QUOT;":'"',"&Qfr;":"𝔔","&Qopf;":"ℚ","&Qscr;":"𝒬","&RBarr;":"⤐","&REG":"®","&REG;":"®","&Racute;":"Ŕ","&Rang;":"⟫","&Rarr;":"↠","&Rarrtl;":"⤖","&Rcaron;":"Ř","&Rcedil;":"Ŗ","&Rcy;":"Р","&Re;":"ℜ","&ReverseElement;":"∋","&ReverseEquilibrium;":"⇋","&ReverseUpEquilibrium;":"⥯","&Rfr;":"ℜ","&Rho;":"Ρ","&RightAngleBracket;":"⟩","&RightArrow;":"→","&RightArrowBar;":"⇥","&RightArrowLeftArrow;":"⇄","&RightCeiling;":"⌉","&RightDoubleBracket;":"⟧","&RightDownTeeVector;":"⥝","&RightDownVector;":"⇂","&RightDownVectorBar;":"⥕","&RightFloor;":"⌋","&RightTee;":"⊢","&RightTeeArrow;":"↦","&RightTeeVector;":"⥛","&RightTriangle;":"⊳","&RightTriangleBar;":"⧐","&RightTriangleEqual;":"⊵","&RightUpDownVector;":"⥏","&RightUpTeeVector;":"⥜","&RightUpVector;":"↾","&RightUpVectorBar;":"⥔","&RightVector;":"⇀","&RightVectorBar;":"⥓","&Rightarrow;":"⇒","&Ropf;":"ℝ","&RoundImplies;":"⥰","&Rrightarrow;":"⇛","&Rscr;":"ℛ","&Rsh;":"↱","&RuleDelayed;":"⧴","&SHCHcy;":"Щ","&SHcy;":"Ш","&SOFTcy;":"Ь","&Sacute;":"Ś","&Sc;":"⪼","&Scaron;":"Š","&Scedil;":"Ş","&Scirc;":"Ŝ","&Scy;":"С","&Sfr;":"𝔖","&ShortDownArrow;":"↓","&ShortLeftArrow;":"←","&ShortRightArrow;":"→","&ShortUpArrow;":"↑","&Sigma;":"Σ","&SmallCircle;":"∘","&Sopf;":"𝕊","&Sqrt;":"√","&Square;":"□","&SquareIntersection;":"⊓","&SquareSubset;":"⊏","&SquareSubsetEqual;":"⊑","&SquareSuperset;":"⊐","&SquareSupersetEqual;":"⊒","&SquareUnion;":"⊔","&Sscr;":"𝒮","&Star;":"⋆","&Sub;":"⋐","&Subset;":"⋐","&SubsetEqual;":"⊆","&Succeeds;":"≻","&SucceedsEqual;":"⪰","&SucceedsSlantEqual;":"≽","&SucceedsTilde;":"≿","&SuchThat;":"∋","&Sum;":"∑","&Sup;":"⋑","&Superset;":"⊃","&SupersetEqual;":"⊇","&Supset;":"⋑","&THORN":"Þ","&THORN;":"Þ","&TRADE;":"™","&TSHcy;":"Ћ","&TScy;":"Ц","&Tab;":"\t","&Tau;":"Τ","&Tcaron;":"Ť","&Tcedil;":"Ţ","&Tcy;":"Т","&Tfr;":"𝔗","&Therefore;":"∴","&Theta;":"Θ","&ThickSpace;":"  ","&ThinSpace;":" ","&Tilde;":"∼","&TildeEqual;":"≃","&TildeFullEqual;":"≅","&TildeTilde;":"≈","&Topf;":"𝕋","&TripleDot;":"⃛","&Tscr;":"𝒯","&Tstrok;":"Ŧ","&Uacute":"Ú","&Uacute;":"Ú","&Uarr;":"↟","&Uarrocir;":"⥉","&Ubrcy;":"Ў","&Ubreve;":"Ŭ","&Ucirc":"Û","&Ucirc;":"Û","&Ucy;":"У","&Udblac;":"Ű","&Ufr;":"𝔘","&Ugrave":"Ù","&Ugrave;":"Ù","&Umacr;":"Ū","&UnderBar;":"_","&UnderBrace;":"⏟","&UnderBracket;":"⎵","&UnderParenthesis;":"⏝","&Union;":"⋃","&UnionPlus;":"⊎","&Uogon;":"Ų","&Uopf;":"𝕌","&UpArrow;":"↑","&UpArrowBar;":"⤒","&UpArrowDownArrow;":"⇅","&UpDownArrow;":"↕","&UpEquilibrium;":"⥮","&UpTee;":"⊥","&UpTeeArrow;":"↥","&Uparrow;":"⇑","&Updownarrow;":"⇕","&UpperLeftArrow;":"↖","&UpperRightArrow;":"↗","&Upsi;":"ϒ","&Upsilon;":"Υ","&Uring;":"Ů","&Uscr;":"𝒰","&Utilde;":"Ũ","&Uuml":"Ü","&Uuml;":"Ü","&VDash;":"⊫","&Vbar;":"⫫","&Vcy;":"В","&Vdash;":"⊩","&Vdashl;":"⫦","&Vee;":"⋁","&Verbar;":"‖","&Vert;":"‖","&VerticalBar;":"∣","&VerticalLine;":"|","&VerticalSeparator;":"❘","&VerticalTilde;":"≀","&VeryThinSpace;":" ","&Vfr;":"𝔙","&Vopf;":"𝕍","&Vscr;":"𝒱","&Vvdash;":"⊪","&Wcirc;":"Ŵ","&Wedge;":"⋀","&Wfr;":"𝔚","&Wopf;":"𝕎","&Wscr;":"𝒲","&Xfr;":"𝔛","&Xi;":"Ξ","&Xopf;":"𝕏","&Xscr;":"𝒳","&YAcy;":"Я","&YIcy;":"Ї","&YUcy;":"Ю","&Yacute":"Ý","&Yacute;":"Ý","&Ycirc;":"Ŷ","&Ycy;":"Ы","&Yfr;":"𝔜","&Yopf;":"𝕐","&Yscr;":"𝒴","&Yuml;":"Ÿ","&ZHcy;":"Ж","&Zacute;":"Ź","&Zcaron;":"Ž","&Zcy;":"З","&Zdot;":"Ż","&ZeroWidthSpace;":"​","&Zeta;":"Ζ","&Zfr;":"ℨ","&Zopf;":"ℤ","&Zscr;":"𝒵","&aacute":"á","&aacute;":"á","&abreve;":"ă","&ac;":"∾","&acE;":"∾̳","&acd;":"∿","&acirc":"â","&acirc;":"â","&acute":"´","&acute;":"´","&acy;":"а","&aelig":"æ","&aelig;":"æ","&af;":"⁡","&afr;":"𝔞","&agrave":"à","&agrave;":"à","&alefsym;":"ℵ","&aleph;":"ℵ","&alpha;":"α","&amacr;":"ā","&amalg;":"⨿","&amp":"&","&amp;":"&","&and;":"∧","&andand;":"⩕","&andd;":"⩜","&andslope;":"⩘","&andv;":"⩚","&ang;":"∠","&ange;":"⦤","&angle;":"∠","&angmsd;":"∡","&angmsdaa;":"⦨","&angmsdab;":"⦩","&angmsdac;":"⦪","&angmsdad;":"⦫","&angmsdae;":"⦬","&angmsdaf;":"⦭","&angmsdag;":"⦮","&angmsdah;":"⦯","&angrt;":"∟","&angrtvb;":"⊾","&angrtvbd;":"⦝","&angsph;":"∢","&angst;":"Å","&angzarr;":"⍼","&aogon;":"ą","&aopf;":"𝕒","&ap;":"≈","&apE;":"⩰","&apacir;":"⩯","&ape;":"≊","&apid;":"≋","&apos;":"'","&approx;":"≈","&approxeq;":"≊","&aring":"å","&aring;":"å","&ascr;":"𝒶","&ast;":"*","&asymp;":"≈","&asympeq;":"≍","&atilde":"ã","&atilde;":"ã","&auml":"ä","&auml;":"ä","&awconint;":"∳","&awint;":"⨑","&bNot;":"⫭","&backcong;":"≌","&backepsilon;":"϶","&backprime;":"‵","&backsim;":"∽","&backsimeq;":"⋍","&barvee;":"⊽","&barwed;":"⌅","&barwedge;":"⌅","&bbrk;":"⎵","&bbrktbrk;":"⎶","&bcong;":"≌","&bcy;":"б","&bdquo;":"„","&becaus;":"∵","&because;":"∵","&bemptyv;":"⦰","&bepsi;":"϶","&bernou;":"ℬ","&beta;":"β","&beth;":"ℶ","&between;":"≬","&bfr;":"𝔟","&bigcap;":"⋂","&bigcirc;":"◯","&bigcup;":"⋃","&bigodot;":"⨀","&bigoplus;":"⨁","&bigotimes;":"⨂","&bigsqcup;":"⨆","&bigstar;":"★","&bigtriangledown;":"▽","&bigtriangleup;":"△","&biguplus;":"⨄","&bigvee;":"⋁","&bigwedge;":"⋀","&bkarow;":"⤍","&blacklozenge;":"⧫","&blacksquare;":"▪","&blacktriangle;":"▴","&blacktriangledown;":"▾","&blacktriangleleft;":"◂","&blacktriangleright;":"▸","&blank;":"␣","&blk12;":"▒","&blk14;":"░","&blk34;":"▓","&block;":"█","&bne;":"=⃥","&bnequiv;":"≡⃥","&bnot;":"⌐","&bopf;":"𝕓","&bot;":"⊥","&bottom;":"⊥","&bowtie;":"⋈","&boxDL;":"╗","&boxDR;":"╔","&boxDl;":"╖","&boxDr;":"╓","&boxH;":"═","&boxHD;":"╦","&boxHU;":"╩","&boxHd;":"╤","&boxHu;":"╧","&boxUL;":"╝","&boxUR;":"╚","&boxUl;":"╜","&boxUr;":"╙","&boxV;":"║","&boxVH;":"╬","&boxVL;":"╣","&boxVR;":"╠","&boxVh;":"╫","&boxVl;":"╢","&boxVr;":"╟","&boxbox;":"⧉","&boxdL;":"╕","&boxdR;":"╒","&boxdl;":"┐","&boxdr;":"┌","&boxh;":"─","&boxhD;":"╥","&boxhU;":"╨","&boxhd;":"┬","&boxhu;":"┴","&boxminus;":"⊟","&boxplus;":"⊞","&boxtimes;":"⊠","&boxuL;":"╛","&boxuR;":"╘","&boxul;":"┘","&boxur;":"└","&boxv;":"│","&boxvH;":"╪","&boxvL;":"╡","&boxvR;":"╞","&boxvh;":"┼","&boxvl;":"┤","&boxvr;":"├","&bprime;":"‵","&breve;":"˘","&brvbar":"¦","&brvbar;":"¦","&bscr;":"𝒷","&bsemi;":"⁏","&bsim;":"∽","&bsime;":"⋍","&bsol;":"\\","&bsolb;":"⧅","&bsolhsub;":"⟈","&bull;":"•","&bullet;":"•","&bump;":"≎","&bumpE;":"⪮","&bumpe;":"≏","&bumpeq;":"≏","&cacute;":"ć","&cap;":"∩","&capand;":"⩄","&capbrcup;":"⩉","&capcap;":"⩋","&capcup;":"⩇","&capdot;":"⩀","&caps;":"∩︀","&caret;":"⁁","&caron;":"ˇ","&ccaps;":"⩍","&ccaron;":"č","&ccedil":"ç","&ccedil;":"ç","&ccirc;":"ĉ","&ccups;":"⩌","&ccupssm;":"⩐","&cdot;":"ċ","&cedil":"¸","&cedil;":"¸","&cemptyv;":"⦲","&cent":"¢","&cent;":"¢","&centerdot;":"·","&cfr;":"𝔠","&chcy;":"ч","&check;":"✓","&checkmark;":"✓","&chi;":"χ","&cir;":"○","&cirE;":"⧃","&circ;":"ˆ","&circeq;":"≗","&circlearrowleft;":"↺","&circlearrowright;":"↻","&circledR;":"®","&circledS;":"Ⓢ","&circledast;":"⊛","&circledcirc;":"⊚","&circleddash;":"⊝","&cire;":"≗","&cirfnint;":"⨐","&cirmid;":"⫯","&cirscir;":"⧂","&clubs;":"♣","&clubsuit;":"♣","&colon;":":","&colone;":"≔","&coloneq;":"≔","&comma;":",","&commat;":"@","&comp;":"∁","&compfn;":"∘","&complement;":"∁","&complexes;":"ℂ","&cong;":"≅","&congdot;":"⩭","&conint;":"∮","&copf;":"𝕔","&coprod;":"∐","&copy":"©","&copy;":"©","&copysr;":"℗","&crarr;":"↵","&cross;":"✗","&cscr;":"𝒸","&csub;":"⫏","&csube;":"⫑","&csup;":"⫐","&csupe;":"⫒","&ctdot;":"⋯","&cudarrl;":"⤸","&cudarrr;":"⤵","&cuepr;":"⋞","&cuesc;":"⋟","&cularr;":"↶","&cularrp;":"⤽","&cup;":"∪","&cupbrcap;":"⩈","&cupcap;":"⩆","&cupcup;":"⩊","&cupdot;":"⊍","&cupor;":"⩅","&cups;":"∪︀","&curarr;":"↷","&curarrm;":"⤼","&curlyeqprec;":"⋞","&curlyeqsucc;":"⋟","&curlyvee;":"⋎","&curlywedge;":"⋏","&curren":"¤","&curren;":"¤","&curvearrowleft;":"↶","&curvearrowright;":"↷","&cuvee;":"⋎","&cuwed;":"⋏","&cwconint;":"∲","&cwint;":"∱","&cylcty;":"⌭","&dArr;":"⇓","&dHar;":"⥥","&dagger;":"†","&daleth;":"ℸ","&darr;":"↓","&dash;":"‐","&dashv;":"⊣","&dbkarow;":"⤏","&dblac;":"˝","&dcaron;":"ď","&dcy;":"д","&dd;":"ⅆ","&ddagger;":"‡","&ddarr;":"⇊","&ddotseq;":"⩷","&deg":"°","&deg;":"°","&delta;":"δ","&demptyv;":"⦱","&dfisht;":"⥿","&dfr;":"𝔡","&dharl;":"⇃","&dharr;":"⇂","&diam;":"⋄","&diamond;":"⋄","&diamondsuit;":"♦","&diams;":"♦","&die;":"¨","&digamma;":"ϝ","&disin;":"⋲","&div;":"÷","&divide":"÷","&divide;":"÷","&divideontimes;":"⋇","&divonx;":"⋇","&djcy;":"ђ","&dlcorn;":"⌞","&dlcrop;":"⌍","&dollar;":"$","&dopf;":"𝕕","&dot;":"˙","&doteq;":"≐","&doteqdot;":"≑","&dotminus;":"∸","&dotplus;":"∔","&dotsquare;":"⊡","&doublebarwedge;":"⌆","&downarrow;":"↓","&downdownarrows;":"⇊","&downharpoonleft;":"⇃","&downharpoonright;":"⇂","&drbkarow;":"⤐","&drcorn;":"⌟","&drcrop;":"⌌","&dscr;":"𝒹","&dscy;":"ѕ","&dsol;":"⧶","&dstrok;":"đ","&dtdot;":"⋱","&dtri;":"▿","&dtrif;":"▾","&duarr;":"⇵","&duhar;":"⥯","&dwangle;":"⦦","&dzcy;":"џ","&dzigrarr;":"⟿","&eDDot;":"⩷","&eDot;":"≑","&eacute":"é","&eacute;":"é","&easter;":"⩮","&ecaron;":"ě","&ecir;":"≖","&ecirc":"ê","&ecirc;":"ê","&ecolon;":"≕","&ecy;":"э","&edot;":"ė","&ee;":"ⅇ","&efDot;":"≒","&efr;":"𝔢","&eg;":"⪚","&egrave":"è","&egrave;":"è","&egs;":"⪖","&egsdot;":"⪘","&el;":"⪙","&elinters;":"⏧","&ell;":"ℓ","&els;":"⪕","&elsdot;":"⪗","&emacr;":"ē","&empty;":"∅","&emptyset;":"∅","&emptyv;":"∅","&emsp13;":" ","&emsp14;":" ","&emsp;":" ","&eng;":"ŋ","&ensp;":" ","&eogon;":"ę","&eopf;":"𝕖","&epar;":"⋕","&eparsl;":"⧣","&eplus;":"⩱","&epsi;":"ε","&epsilon;":"ε","&epsiv;":"ϵ","&eqcirc;":"≖","&eqcolon;":"≕","&eqsim;":"≂","&eqslantgtr;":"⪖","&eqslantless;":"⪕","&equals;":"=","&equest;":"≟","&equiv;":"≡","&equivDD;":"⩸","&eqvparsl;":"⧥","&erDot;":"≓","&erarr;":"⥱","&escr;":"ℯ","&esdot;":"≐","&esim;":"≂","&eta;":"η","&eth":"ð","&eth;":"ð","&euml":"ë","&euml;":"ë","&euro;":"€","&excl;":"!","&exist;":"∃","&expectation;":"ℰ","&exponentiale;":"ⅇ","&fallingdotseq;":"≒","&fcy;":"ф","&female;":"♀","&ffilig;":"ﬃ","&fflig;":"ﬀ","&ffllig;":"ﬄ","&ffr;":"𝔣","&filig;":"ﬁ","&fjlig;":"fj","&flat;":"♭","&fllig;":"ﬂ","&fltns;":"▱","&fnof;":"ƒ","&fopf;":"𝕗","&forall;":"∀","&fork;":"⋔","&forkv;":"⫙","&fpartint;":"⨍","&frac12":"½","&frac12;":"½","&frac13;":"⅓","&frac14":"¼","&frac14;":"¼","&frac15;":"⅕","&frac16;":"⅙","&frac18;":"⅛","&frac23;":"⅔","&frac25;":"⅖","&frac34":"¾","&frac34;":"¾","&frac35;":"⅗","&frac38;":"⅜","&frac45;":"⅘","&frac56;":"⅚","&frac58;":"⅝","&frac78;":"⅞","&frasl;":"⁄","&frown;":"⌢","&fscr;":"𝒻","&gE;":"≧","&gEl;":"⪌","&gacute;":"ǵ","&gamma;":"γ","&gammad;":"ϝ","&gap;":"⪆","&gbreve;":"ğ","&gcirc;":"ĝ","&gcy;":"г","&gdot;":"ġ","&ge;":"≥","&gel;":"⋛","&geq;":"≥","&geqq;":"≧","&geqslant;":"⩾","&ges;":"⩾","&gescc;":"⪩","&gesdot;":"⪀","&gesdoto;":"⪂","&gesdotol;":"⪄","&gesl;":"⋛︀","&gesles;":"⪔","&gfr;":"𝔤","&gg;":"≫","&ggg;":"⋙","&gimel;":"ℷ","&gjcy;":"ѓ","&gl;":"≷","&glE;":"⪒","&gla;":"⪥","&glj;":"⪤","&gnE;":"≩","&gnap;":"⪊","&gnapprox;":"⪊","&gne;":"⪈","&gneq;":"⪈","&gneqq;":"≩","&gnsim;":"⋧","&gopf;":"𝕘","&grave;":"`","&gscr;":"ℊ","&gsim;":"≳","&gsime;":"⪎","&gsiml;":"⪐","&gt":">","&gt;":">","&gtcc;":"⪧","&gtcir;":"⩺","&gtdot;":"⋗","&gtlPar;":"⦕","&gtquest;":"⩼","&gtrapprox;":"⪆","&gtrarr;":"⥸","&gtrdot;":"⋗","&gtreqless;":"⋛","&gtreqqless;":"⪌","&gtrless;":"≷","&gtrsim;":"≳","&gvertneqq;":"≩︀","&gvnE;":"≩︀","&hArr;":"⇔","&hairsp;":" ","&half;":"½","&hamilt;":"ℋ","&hardcy;":"ъ","&harr;":"↔","&harrcir;":"⥈","&harrw;":"↭","&hbar;":"ℏ","&hcirc;":"ĥ","&hearts;":"♥","&heartsuit;":"♥","&hellip;":"…","&hercon;":"⊹","&hfr;":"𝔥","&hksearow;":"⤥","&hkswarow;":"⤦","&hoarr;":"⇿","&homtht;":"∻","&hookleftarrow;":"↩","&hookrightarrow;":"↪","&hopf;":"𝕙","&horbar;":"―","&hscr;":"𝒽","&hslash;":"ℏ","&hstrok;":"ħ","&hybull;":"⁃","&hyphen;":"‐","&iacute":"í","&iacute;":"í","&ic;":"⁣","&icirc":"î","&icirc;":"î","&icy;":"и","&iecy;":"е","&iexcl":"¡","&iexcl;":"¡","&iff;":"⇔","&ifr;":"𝔦","&igrave":"ì","&igrave;":"ì","&ii;":"ⅈ","&iiiint;":"⨌","&iiint;":"∭","&iinfin;":"⧜","&iiota;":"℩","&ijlig;":"ĳ","&imacr;":"ī","&image;":"ℑ","&imagline;":"ℐ","&imagpart;":"ℑ","&imath;":"ı","&imof;":"⊷","&imped;":"Ƶ","&in;":"∈","&incare;":"℅","&infin;":"∞","&infintie;":"⧝","&inodot;":"ı","&int;":"∫","&intcal;":"⊺","&integers;":"ℤ","&intercal;":"⊺","&intlarhk;":"⨗","&intprod;":"⨼","&iocy;":"ё","&iogon;":"į","&iopf;":"𝕚","&iota;":"ι","&iprod;":"⨼","&iquest":"¿","&iquest;":"¿","&iscr;":"𝒾","&isin;":"∈","&isinE;":"⋹","&isindot;":"⋵","&isins;":"⋴","&isinsv;":"⋳","&isinv;":"∈","&it;":"⁢","&itilde;":"ĩ","&iukcy;":"і","&iuml":"ï","&iuml;":"ï","&jcirc;":"ĵ","&jcy;":"й","&jfr;":"𝔧","&jmath;":"ȷ","&jopf;":"𝕛","&jscr;":"𝒿","&jsercy;":"ј","&jukcy;":"є","&kappa;":"κ","&kappav;":"ϰ","&kcedil;":"ķ","&kcy;":"к","&kfr;":"𝔨","&kgreen;":"ĸ","&khcy;":"х","&kjcy;":"ќ","&kopf;":"𝕜","&kscr;":"𝓀","&lAarr;":"⇚","&lArr;":"⇐","&lAtail;":"⤛","&lBarr;":"⤎","&lE;":"≦","&lEg;":"⪋","&lHar;":"⥢","&lacute;":"ĺ","&laemptyv;":"⦴","&lagran;":"ℒ","&lambda;":"λ","&lang;":"⟨","&langd;":"⦑","&langle;":"⟨","&lap;":"⪅","&laquo":"«","&laquo;":"«","&larr;":"←","&larrb;":"⇤","&larrbfs;":"⤟","&larrfs;":"⤝","&larrhk;":"↩","&larrlp;":"↫","&larrpl;":"⤹","&larrsim;":"⥳","&larrtl;":"↢","&lat;":"⪫","&latail;":"⤙","&late;":"⪭","&lates;":"⪭︀","&lbarr;":"⤌","&lbbrk;":"❲","&lbrace;":"{","&lbrack;":"[","&lbrke;":"⦋","&lbrksld;":"⦏","&lbrkslu;":"⦍","&lcaron;":"ľ","&lcedil;":"ļ","&lceil;":"⌈","&lcub;":"{","&lcy;":"л","&ldca;":"⤶","&ldquo;":"“","&ldquor;":"„","&ldrdhar;":"⥧","&ldrushar;":"⥋","&ldsh;":"↲","&le;":"≤","&leftarrow;":"←","&leftarrowtail;":"↢","&leftharpoondown;":"↽","&leftharpoonup;":"↼","&leftleftarrows;":"⇇","&leftrightarrow;":"↔","&leftrightarrows;":"⇆","&leftrightharpoons;":"⇋","&leftrightsquigarrow;":"↭","&leftthreetimes;":"⋋","&leg;":"⋚","&leq;":"≤","&leqq;":"≦","&leqslant;":"⩽","&les;":"⩽","&lescc;":"⪨","&lesdot;":"⩿","&lesdoto;":"⪁","&lesdotor;":"⪃","&lesg;":"⋚︀","&lesges;":"⪓","&lessapprox;":"⪅","&lessdot;":"⋖","&lesseqgtr;":"⋚","&lesseqqgtr;":"⪋","&lessgtr;":"≶","&lesssim;":"≲","&lfisht;":"⥼","&lfloor;":"⌊","&lfr;":"𝔩","&lg;":"≶","&lgE;":"⪑","&lhard;":"↽","&lharu;":"↼","&lharul;":"⥪","&lhblk;":"▄","&ljcy;":"љ","&ll;":"≪","&llarr;":"⇇","&llcorner;":"⌞","&llhard;":"⥫","&lltri;":"◺","&lmidot;":"ŀ","&lmoust;":"⎰","&lmoustache;":"⎰","&lnE;":"≨","&lnap;":"⪉","&lnapprox;":"⪉","&lne;":"⪇","&lneq;":"⪇","&lneqq;":"≨","&lnsim;":"⋦","&loang;":"⟬","&loarr;":"⇽","&lobrk;":"⟦","&longleftarrow;":"⟵","&longleftrightarrow;":"⟷","&longmapsto;":"⟼","&longrightarrow;":"⟶","&looparrowleft;":"↫","&looparrowright;":"↬","&lopar;":"⦅","&lopf;":"𝕝","&loplus;":"⨭","&lotimes;":"⨴","&lowast;":"∗","&lowbar;":"_","&loz;":"◊","&lozenge;":"◊","&lozf;":"⧫","&lpar;":"(","&lparlt;":"⦓","&lrarr;":"⇆","&lrcorner;":"⌟","&lrhar;":"⇋","&lrhard;":"⥭","&lrm;":"‎","&lrtri;":"⊿","&lsaquo;":"‹","&lscr;":"𝓁","&lsh;":"↰","&lsim;":"≲","&lsime;":"⪍","&lsimg;":"⪏","&lsqb;":"[","&lsquo;":"‘","&lsquor;":"‚","&lstrok;":"ł","&lt":"<","&lt;":"<","&ltcc;":"⪦","&ltcir;":"⩹","&ltdot;":"⋖","&lthree;":"⋋","&ltimes;":"⋉","&ltlarr;":"⥶","&ltquest;":"⩻","&ltrPar;":"⦖","&ltri;":"◃","&ltrie;":"⊴","&ltrif;":"◂","&lurdshar;":"⥊","&luruhar;":"⥦","&lvertneqq;":"≨︀","&lvnE;":"≨︀","&mDDot;":"∺","&macr":"¯","&macr;":"¯","&male;":"♂","&malt;":"✠","&maltese;":"✠","&map;":"↦","&mapsto;":"↦","&mapstodown;":"↧","&mapstoleft;":"↤","&mapstoup;":"↥","&marker;":"▮","&mcomma;":"⨩","&mcy;":"м","&mdash;":"—","&measuredangle;":"∡","&mfr;":"𝔪","&mho;":"℧","&micro":"µ","&micro;":"µ","&mid;":"∣","&midast;":"*","&midcir;":"⫰","&middot":"·","&middot;":"·","&minus;":"−","&minusb;":"⊟","&minusd;":"∸","&minusdu;":"⨪","&mlcp;":"⫛","&mldr;":"…","&mnplus;":"∓","&models;":"⊧","&mopf;":"𝕞","&mp;":"∓","&mscr;":"𝓂","&mstpos;":"∾","&mu;":"μ","&multimap;":"⊸","&mumap;":"⊸","&nGg;":"⋙̸","&nGt;":"≫⃒","&nGtv;":"≫̸","&nLeftarrow;":"⇍","&nLeftrightarrow;":"⇎","&nLl;":"⋘̸","&nLt;":"≪⃒","&nLtv;":"≪̸","&nRightarrow;":"⇏","&nVDash;":"⊯","&nVdash;":"⊮","&nabla;":"∇","&nacute;":"ń","&nang;":"∠⃒","&nap;":"≉","&napE;":"⩰̸","&napid;":"≋̸","&napos;":"ŉ","&napprox;":"≉","&natur;":"♮","&natural;":"♮","&naturals;":"ℕ","&nbsp":" ","&nbsp;":" ","&nbump;":"≎̸","&nbumpe;":"≏̸","&ncap;":"⩃","&ncaron;":"ň","&ncedil;":"ņ","&ncong;":"≇","&ncongdot;":"⩭̸","&ncup;":"⩂","&ncy;":"н","&ndash;":"–","&ne;":"≠","&neArr;":"⇗","&nearhk;":"⤤","&nearr;":"↗","&nearrow;":"↗","&nedot;":"≐̸","&nequiv;":"≢","&nesear;":"⤨","&nesim;":"≂̸","&nexist;":"∄","&nexists;":"∄","&nfr;":"𝔫","&ngE;":"≧̸","&nge;":"≱","&ngeq;":"≱","&ngeqq;":"≧̸","&ngeqslant;":"⩾̸","&nges;":"⩾̸","&ngsim;":"≵","&ngt;":"≯","&ngtr;":"≯","&nhArr;":"⇎","&nharr;":"↮","&nhpar;":"⫲","&ni;":"∋","&nis;":"⋼","&nisd;":"⋺","&niv;":"∋","&njcy;":"њ","&nlArr;":"⇍","&nlE;":"≦̸","&nlarr;":"↚","&nldr;":"‥","&nle;":"≰","&nleftarrow;":"↚","&nleftrightarrow;":"↮","&nleq;":"≰","&nleqq;":"≦̸","&nleqslant;":"⩽̸","&nles;":"⩽̸","&nless;":"≮","&nlsim;":"≴","&nlt;":"≮","&nltri;":"⋪","&nltrie;":"⋬","&nmid;":"∤","&nopf;":"𝕟","&not":"¬","&not;":"¬","&notin;":"∉","&notinE;":"⋹̸","&notindot;":"⋵̸","&notinva;":"∉","&notinvb;":"⋷","&notinvc;":"⋶","&notni;":"∌","&notniva;":"∌","&notnivb;":"⋾","&notnivc;":"⋽","&npar;":"∦","&nparallel;":"∦","&nparsl;":"⫽⃥","&npart;":"∂̸","&npolint;":"⨔","&npr;":"⊀","&nprcue;":"⋠","&npre;":"⪯̸","&nprec;":"⊀","&npreceq;":"⪯̸","&nrArr;":"⇏","&nrarr;":"↛","&nrarrc;":"⤳̸","&nrarrw;":"↝̸","&nrightarrow;":"↛","&nrtri;":"⋫","&nrtrie;":"⋭","&nsc;":"⊁","&nsccue;":"⋡","&nsce;":"⪰̸","&nscr;":"𝓃","&nshortmid;":"∤","&nshortparallel;":"∦","&nsim;":"≁","&nsime;":"≄","&nsimeq;":"≄","&nsmid;":"∤","&nspar;":"∦","&nsqsube;":"⋢","&nsqsupe;":"⋣","&nsub;":"⊄","&nsubE;":"⫅̸","&nsube;":"⊈","&nsubset;":"⊂⃒","&nsubseteq;":"⊈","&nsubseteqq;":"⫅̸","&nsucc;":"⊁","&nsucceq;":"⪰̸","&nsup;":"⊅","&nsupE;":"⫆̸","&nsupe;":"⊉","&nsupset;":"⊃⃒","&nsupseteq;":"⊉","&nsupseteqq;":"⫆̸","&ntgl;":"≹","&ntilde":"ñ","&ntilde;":"ñ","&ntlg;":"≸","&ntriangleleft;":"⋪","&ntrianglelefteq;":"⋬","&ntriangleright;":"⋫","&ntrianglerighteq;":"⋭","&nu;":"ν","&num;":"#","&numero;":"№","&numsp;":" ","&nvDash;":"⊭","&nvHarr;":"⤄","&nvap;":"≍⃒","&nvdash;":"⊬","&nvge;":"≥⃒","&nvgt;":">⃒","&nvinfin;":"⧞","&nvlArr;":"⤂","&nvle;":"≤⃒","&nvlt;":"<⃒","&nvltrie;":"⊴⃒","&nvrArr;":"⤃","&nvrtrie;":"⊵⃒","&nvsim;":"∼⃒","&nwArr;":"⇖","&nwarhk;":"⤣","&nwarr;":"↖","&nwarrow;":"↖","&nwnear;":"⤧","&oS;":"Ⓢ","&oacute":"ó","&oacute;":"ó","&oast;":"⊛","&ocir;":"⊚","&ocirc":"ô","&ocirc;":"ô","&ocy;":"о","&odash;":"⊝","&odblac;":"ő","&odiv;":"⨸","&odot;":"⊙","&odsold;":"⦼","&oelig;":"œ","&ofcir;":"⦿","&ofr;":"𝔬","&ogon;":"˛","&ograve":"ò","&ograve;":"ò","&ogt;":"⧁","&ohbar;":"⦵","&ohm;":"Ω","&oint;":"∮","&olarr;":"↺","&olcir;":"⦾","&olcross;":"⦻","&oline;":"‾","&olt;":"⧀","&omacr;":"ō","&omega;":"ω","&omicron;":"ο","&omid;":"⦶","&ominus;":"⊖","&oopf;":"𝕠","&opar;":"⦷","&operp;":"⦹","&oplus;":"⊕","&or;":"∨","&orarr;":"↻","&ord;":"⩝","&order;":"ℴ","&orderof;":"ℴ","&ordf":"ª","&ordf;":"ª","&ordm":"º","&ordm;":"º","&origof;":"⊶","&oror;":"⩖","&orslope;":"⩗","&orv;":"⩛","&oscr;":"ℴ","&oslash":"ø","&oslash;":"ø","&osol;":"⊘","&otilde":"õ","&otilde;":"õ","&otimes;":"⊗","&otimesas;":"⨶","&ouml":"ö","&ouml;":"ö","&ovbar;":"⌽","&par;":"∥","&para":"¶","&para;":"¶","&parallel;":"∥","&parsim;":"⫳","&parsl;":"⫽","&part;":"∂","&pcy;":"п","&percnt;":"%","&period;":".","&permil;":"‰","&perp;":"⊥","&pertenk;":"‱","&pfr;":"𝔭","&phi;":"φ","&phiv;":"ϕ","&phmmat;":"ℳ","&phone;":"☎","&pi;":"π","&pitchfork;":"⋔","&piv;":"ϖ","&planck;":"ℏ","&planckh;":"ℎ","&plankv;":"ℏ","&plus;":"+","&plusacir;":"⨣","&plusb;":"⊞","&pluscir;":"⨢","&plusdo;":"∔","&plusdu;":"⨥","&pluse;":"⩲","&plusmn":"±","&plusmn;":"±","&plussim;":"⨦","&plustwo;":"⨧","&pm;":"±","&pointint;":"⨕","&popf;":"𝕡","&pound":"£","&pound;":"£","&pr;":"≺","&prE;":"⪳","&prap;":"⪷","&prcue;":"≼","&pre;":"⪯","&prec;":"≺","&precapprox;":"⪷","&preccurlyeq;":"≼","&preceq;":"⪯","&precnapprox;":"⪹","&precneqq;":"⪵","&precnsim;":"⋨","&precsim;":"≾","&prime;":"′","&primes;":"ℙ","&prnE;":"⪵","&prnap;":"⪹","&prnsim;":"⋨","&prod;":"∏","&profalar;":"⌮","&profline;":"⌒","&profsurf;":"⌓","&prop;":"∝","&propto;":"∝","&prsim;":"≾","&prurel;":"⊰","&pscr;":"𝓅","&psi;":"ψ","&puncsp;":" ","&qfr;":"𝔮","&qint;":"⨌","&qopf;":"𝕢","&qprime;":"⁗","&qscr;":"𝓆","&quaternions;":"ℍ","&quatint;":"⨖","&quest;":"?","&questeq;":"≟","&quot":'"',"&quot;":'"',"&rAarr;":"⇛","&rArr;":"⇒","&rAtail;":"⤜","&rBarr;":"⤏","&rHar;":"⥤","&race;":"∽̱","&racute;":"ŕ","&radic;":"√","&raemptyv;":"⦳","&rang;":"⟩","&rangd;":"⦒","&range;":"⦥","&rangle;":"⟩","&raquo":"»","&raquo;":"»","&rarr;":"→","&rarrap;":"⥵","&rarrb;":"⇥","&rarrbfs;":"⤠","&rarrc;":"⤳","&rarrfs;":"⤞","&rarrhk;":"↪","&rarrlp;":"↬","&rarrpl;":"⥅","&rarrsim;":"⥴","&rarrtl;":"↣","&rarrw;":"↝","&ratail;":"⤚","&ratio;":"∶","&rationals;":"ℚ","&rbarr;":"⤍","&rbbrk;":"❳","&rbrace;":"}","&rbrack;":"]","&rbrke;":"⦌","&rbrksld;":"⦎","&rbrkslu;":"⦐","&rcaron;":"ř","&rcedil;":"ŗ","&rceil;":"⌉","&rcub;":"}","&rcy;":"р","&rdca;":"⤷","&rdldhar;":"⥩","&rdquo;":"”","&rdquor;":"”","&rdsh;":"↳","&real;":"ℜ","&realine;":"ℛ","&realpart;":"ℜ","&reals;":"ℝ","&rect;":"▭","&reg":"®","&reg;":"®","&rfisht;":"⥽","&rfloor;":"⌋","&rfr;":"𝔯","&rhard;":"⇁","&rharu;":"⇀","&rharul;":"⥬","&rho;":"ρ","&rhov;":"ϱ","&rightarrow;":"→","&rightarrowtail;":"↣","&rightharpoondown;":"⇁","&rightharpoonup;":"⇀","&rightleftarrows;":"⇄","&rightleftharpoons;":"⇌","&rightrightarrows;":"⇉","&rightsquigarrow;":"↝","&rightthreetimes;":"⋌","&ring;":"˚","&risingdotseq;":"≓","&rlarr;":"⇄","&rlhar;":"⇌","&rlm;":"‏","&rmoust;":"⎱","&rmoustache;":"⎱","&rnmid;":"⫮","&roang;":"⟭","&roarr;":"⇾","&robrk;":"⟧","&ropar;":"⦆","&ropf;":"𝕣","&roplus;":"⨮","&rotimes;":"⨵","&rpar;":")","&rpargt;":"⦔","&rppolint;":"⨒","&rrarr;":"⇉","&rsaquo;":"›","&rscr;":"𝓇","&rsh;":"↱","&rsqb;":"]","&rsquo;":"’","&rsquor;":"’","&rthree;":"⋌","&rtimes;":"⋊","&rtri;":"▹","&rtrie;":"⊵","&rtrif;":"▸","&rtriltri;":"⧎","&ruluhar;":"⥨","&rx;":"℞","&sacute;":"ś","&sbquo;":"‚","&sc;":"≻","&scE;":"⪴","&scap;":"⪸","&scaron;":"š","&sccue;":"≽","&sce;":"⪰","&scedil;":"ş","&scirc;":"ŝ","&scnE;":"⪶","&scnap;":"⪺","&scnsim;":"⋩","&scpolint;":"⨓","&scsim;":"≿","&scy;":"с","&sdot;":"⋅","&sdotb;":"⊡","&sdote;":"⩦","&seArr;":"⇘","&searhk;":"⤥","&searr;":"↘","&searrow;":"↘","&sect":"§","&sect;":"§","&semi;":";","&seswar;":"⤩","&setminus;":"∖","&setmn;":"∖","&sext;":"✶","&sfr;":"𝔰","&sfrown;":"⌢","&sharp;":"♯","&shchcy;":"щ","&shcy;":"ш","&shortmid;":"∣","&shortparallel;":"∥","&shy":"­","&shy;":"­","&sigma;":"σ","&sigmaf;":"ς","&sigmav;":"ς","&sim;":"∼","&simdot;":"⩪","&sime;":"≃","&simeq;":"≃","&simg;":"⪞","&simgE;":"⪠","&siml;":"⪝","&simlE;":"⪟","&simne;":"≆","&simplus;":"⨤","&simrarr;":"⥲","&slarr;":"←","&smallsetminus;":"∖","&smashp;":"⨳","&smeparsl;":"⧤","&smid;":"∣","&smile;":"⌣","&smt;":"⪪","&smte;":"⪬","&smtes;":"⪬︀","&softcy;":"ь","&sol;":"/","&solb;":"⧄","&solbar;":"⌿","&sopf;":"𝕤","&spades;":"♠","&spadesuit;":"♠","&spar;":"∥","&sqcap;":"⊓","&sqcaps;":"⊓︀","&sqcup;":"⊔","&sqcups;":"⊔︀","&sqsub;":"⊏","&sqsube;":"⊑","&sqsubset;":"⊏","&sqsubseteq;":"⊑","&sqsup;":"⊐","&sqsupe;":"⊒","&sqsupset;":"⊐","&sqsupseteq;":"⊒","&squ;":"□","&square;":"□","&squarf;":"▪","&squf;":"▪","&srarr;":"→","&sscr;":"𝓈","&ssetmn;":"∖","&ssmile;":"⌣","&sstarf;":"⋆","&star;":"☆","&starf;":"★","&straightepsilon;":"ϵ","&straightphi;":"ϕ","&strns;":"¯","&sub;":"⊂","&subE;":"⫅","&subdot;":"⪽","&sube;":"⊆","&subedot;":"⫃","&submult;":"⫁","&subnE;":"⫋","&subne;":"⊊","&subplus;":"⪿","&subrarr;":"⥹","&subset;":"⊂","&subseteq;":"⊆","&subseteqq;":"⫅","&subsetneq;":"⊊","&subsetneqq;":"⫋","&subsim;":"⫇","&subsub;":"⫕","&subsup;":"⫓","&succ;":"≻","&succapprox;":"⪸","&succcurlyeq;":"≽","&succeq;":"⪰","&succnapprox;":"⪺","&succneqq;":"⪶","&succnsim;":"⋩","&succsim;":"≿","&sum;":"∑","&sung;":"♪","&sup1":"¹","&sup1;":"¹","&sup2":"²","&sup2;":"²","&sup3":"³","&sup3;":"³","&sup;":"⊃","&supE;":"⫆","&supdot;":"⪾","&supdsub;":"⫘","&supe;":"⊇","&supedot;":"⫄","&suphsol;":"⟉","&suphsub;":"⫗","&suplarr;":"⥻","&supmult;":"⫂","&supnE;":"⫌","&supne;":"⊋","&supplus;":"⫀","&supset;":"⊃","&supseteq;":"⊇","&supseteqq;":"⫆","&supsetneq;":"⊋","&supsetneqq;":"⫌","&supsim;":"⫈","&supsub;":"⫔","&supsup;":"⫖","&swArr;":"⇙","&swarhk;":"⤦","&swarr;":"↙","&swarrow;":"↙","&swnwar;":"⤪","&szlig":"ß","&szlig;":"ß","&target;":"⌖","&tau;":"τ","&tbrk;":"⎴","&tcaron;":"ť","&tcedil;":"ţ","&tcy;":"т","&tdot;":"⃛","&telrec;":"⌕","&tfr;":"𝔱","&there4;":"∴","&therefore;":"∴","&theta;":"θ","&thetasym;":"ϑ","&thetav;":"ϑ","&thickapprox;":"≈","&thicksim;":"∼","&thinsp;":" ","&thkap;":"≈","&thksim;":"∼","&thorn":"þ","&thorn;":"þ","&tilde;":"˜","&times":"×","&times;":"×","&timesb;":"⊠","&timesbar;":"⨱","&timesd;":"⨰","&tint;":"∭","&toea;":"⤨","&top;":"⊤","&topbot;":"⌶","&topcir;":"⫱","&topf;":"𝕥","&topfork;":"⫚","&tosa;":"⤩","&tprime;":"‴","&trade;":"™","&triangle;":"▵","&triangledown;":"▿","&triangleleft;":"◃","&trianglelefteq;":"⊴","&triangleq;":"≜","&triangleright;":"▹","&trianglerighteq;":"⊵","&tridot;":"◬","&trie;":"≜","&triminus;":"⨺","&triplus;":"⨹","&trisb;":"⧍","&tritime;":"⨻","&trpezium;":"⏢","&tscr;":"𝓉","&tscy;":"ц","&tshcy;":"ћ","&tstrok;":"ŧ","&twixt;":"≬","&twoheadleftarrow;":"↞","&twoheadrightarrow;":"↠","&uArr;":"⇑","&uHar;":"⥣","&uacute":"ú","&uacute;":"ú","&uarr;":"↑","&ubrcy;":"ў","&ubreve;":"ŭ","&ucirc":"û","&ucirc;":"û","&ucy;":"у","&udarr;":"⇅","&udblac;":"ű","&udhar;":"⥮","&ufisht;":"⥾","&ufr;":"𝔲","&ugrave":"ù","&ugrave;":"ù","&uharl;":"↿","&uharr;":"↾","&uhblk;":"▀","&ulcorn;":"⌜","&ulcorner;":"⌜","&ulcrop;":"⌏","&ultri;":"◸","&umacr;":"ū","&uml":"¨","&uml;":"¨","&uogon;":"ų","&uopf;":"𝕦","&uparrow;":"↑","&updownarrow;":"↕","&upharpoonleft;":"↿","&upharpoonright;":"↾","&uplus;":"⊎","&upsi;":"υ","&upsih;":"ϒ","&upsilon;":"υ","&upuparrows;":"⇈","&urcorn;":"⌝","&urcorner;":"⌝","&urcrop;":"⌎","&uring;":"ů","&urtri;":"◹","&uscr;":"𝓊","&utdot;":"⋰","&utilde;":"ũ","&utri;":"▵","&utrif;":"▴","&uuarr;":"⇈","&uuml":"ü","&uuml;":"ü","&uwangle;":"⦧","&vArr;":"⇕","&vBar;":"⫨","&vBarv;":"⫩","&vDash;":"⊨","&vangrt;":"⦜","&varepsilon;":"ϵ","&varkappa;":"ϰ","&varnothing;":"∅","&varphi;":"ϕ","&varpi;":"ϖ","&varpropto;":"∝","&varr;":"↕","&varrho;":"ϱ","&varsigma;":"ς","&varsubsetneq;":"⊊︀","&varsubsetneqq;":"⫋︀","&varsupsetneq;":"⊋︀","&varsupsetneqq;":"⫌︀","&vartheta;":"ϑ","&vartriangleleft;":"⊲","&vartriangleright;":"⊳","&vcy;":"в","&vdash;":"⊢","&vee;":"∨","&veebar;":"⊻","&veeeq;":"≚","&vellip;":"⋮","&verbar;":"|","&vert;":"|","&vfr;":"𝔳","&vltri;":"⊲","&vnsub;":"⊂⃒","&vnsup;":"⊃⃒","&vopf;":"𝕧","&vprop;":"∝","&vrtri;":"⊳","&vscr;":"𝓋","&vsubnE;":"⫋︀","&vsubne;":"⊊︀","&vsupnE;":"⫌︀","&vsupne;":"⊋︀","&vzigzag;":"⦚","&wcirc;":"ŵ","&wedbar;":"⩟","&wedge;":"∧","&wedgeq;":"≙","&weierp;":"℘","&wfr;":"𝔴","&wopf;":"𝕨","&wp;":"℘","&wr;":"≀","&wreath;":"≀","&wscr;":"𝓌","&xcap;":"⋂","&xcirc;":"◯","&xcup;":"⋃","&xdtri;":"▽","&xfr;":"𝔵","&xhArr;":"⟺","&xharr;":"⟷","&xi;":"ξ","&xlArr;":"⟸","&xlarr;":"⟵","&xmap;":"⟼","&xnis;":"⋻","&xodot;":"⨀","&xopf;":"𝕩","&xoplus;":"⨁","&xotime;":"⨂","&xrArr;":"⟹","&xrarr;":"⟶","&xscr;":"𝓍","&xsqcup;":"⨆","&xuplus;":"⨄","&xutri;":"△","&xvee;":"⋁","&xwedge;":"⋀","&yacute":"ý","&yacute;":"ý","&yacy;":"я","&ycirc;":"ŷ","&ycy;":"ы","&yen":"¥","&yen;":"¥","&yfr;":"𝔶","&yicy;":"ї","&yopf;":"𝕪","&yscr;":"𝓎","&yucy;":"ю","&yuml":"ÿ","&yuml;":"ÿ","&zacute;":"ź","&zcaron;":"ž","&zcy;":"з","&zdot;":"ż","&zeetrf;":"ℨ","&zeta;":"ζ","&zfr;":"𝔷","&zhcy;":"ж","&zigrarr;":"⇝","&zopf;":"𝕫","&zscr;":"𝓏","&zwj;":"‍","&zwnj;":"‌"},characters:{"Æ":"&AElig;","&":"&amp;","Á":"&Aacute;","Ă":"&Abreve;","Â":"&Acirc;","А":"&Acy;","𝔄":"&Afr;","À":"&Agrave;","Α":"&Alpha;","Ā":"&Amacr;","⩓":"&And;","Ą":"&Aogon;","𝔸":"&Aopf;","⁡":"&af;","Å":"&angst;","𝒜":"&Ascr;","≔":"&coloneq;","Ã":"&Atilde;","Ä":"&Auml;","∖":"&ssetmn;","⫧":"&Barv;","⌆":"&doublebarwedge;","Б":"&Bcy;","∵":"&because;","ℬ":"&bernou;","Β":"&Beta;","𝔅":"&Bfr;","𝔹":"&Bopf;","˘":"&breve;","≎":"&bump;","Ч":"&CHcy;","©":"&copy;","Ć":"&Cacute;","⋒":"&Cap;","ⅅ":"&DD;","ℭ":"&Cfr;","Č":"&Ccaron;","Ç":"&Ccedil;","Ĉ":"&Ccirc;","∰":"&Cconint;","Ċ":"&Cdot;","¸":"&cedil;","·":"&middot;","Χ":"&Chi;","⊙":"&odot;","⊖":"&ominus;","⊕":"&oplus;","⊗":"&otimes;","∲":"&cwconint;","”":"&rdquor;","’":"&rsquor;","∷":"&Proportion;","⩴":"&Colone;","≡":"&equiv;","∯":"&DoubleContourIntegral;","∮":"&oint;","ℂ":"&complexes;","∐":"&coprod;","∳":"&awconint;","⨯":"&Cross;","𝒞":"&Cscr;","⋓":"&Cup;","≍":"&asympeq;","⤑":"&DDotrahd;","Ђ":"&DJcy;","Ѕ":"&DScy;","Џ":"&DZcy;","‡":"&ddagger;","↡":"&Darr;","⫤":"&DoubleLeftTee;","Ď":"&Dcaron;","Д":"&Dcy;","∇":"&nabla;","Δ":"&Delta;","𝔇":"&Dfr;","´":"&acute;","˙":"&dot;","˝":"&dblac;","`":"&grave;","˜":"&tilde;","⋄":"&diamond;","ⅆ":"&dd;","𝔻":"&Dopf;","¨":"&uml;","⃜":"&DotDot;","≐":"&esdot;","⇓":"&dArr;","⇐":"&lArr;","⇔":"&iff;","⟸":"&xlArr;","⟺":"&xhArr;","⟹":"&xrArr;","⇒":"&rArr;","⊨":"&vDash;","⇑":"&uArr;","⇕":"&vArr;","∥":"&spar;","↓":"&downarrow;","⤓":"&DownArrowBar;","⇵":"&duarr;","̑":"&DownBreve;","⥐":"&DownLeftRightVector;","⥞":"&DownLeftTeeVector;","↽":"&lhard;","⥖":"&DownLeftVectorBar;","⥟":"&DownRightTeeVector;","⇁":"&rightharpoondown;","⥗":"&DownRightVectorBar;","⊤":"&top;","↧":"&mapstodown;","𝒟":"&Dscr;","Đ":"&Dstrok;","Ŋ":"&ENG;","Ð":"&ETH;","É":"&Eacute;","Ě":"&Ecaron;","Ê":"&Ecirc;","Э":"&Ecy;","Ė":"&Edot;","𝔈":"&Efr;","È":"&Egrave;","∈":"&isinv;","Ē":"&Emacr;","◻":"&EmptySmallSquare;","▫":"&EmptyVerySmallSquare;","Ę":"&Eogon;","𝔼":"&Eopf;","Ε":"&Epsilon;","⩵":"&Equal;","≂":"&esim;","⇌":"&rlhar;","ℰ":"&expectation;","⩳":"&Esim;","Η":"&Eta;","Ë":"&Euml;","∃":"&exist;","ⅇ":"&exponentiale;","Ф":"&Fcy;","𝔉":"&Ffr;","◼":"&FilledSmallSquare;","▪":"&squf;","𝔽":"&Fopf;","∀":"&forall;","ℱ":"&Fscr;","Ѓ":"&GJcy;",">":"&gt;","Γ":"&Gamma;","Ϝ":"&Gammad;","Ğ":"&Gbreve;","Ģ":"&Gcedil;","Ĝ":"&Gcirc;","Г":"&Gcy;","Ġ":"&Gdot;","𝔊":"&Gfr;","⋙":"&ggg;","𝔾":"&Gopf;","≥":"&geq;","⋛":"&gtreqless;","≧":"&geqq;","⪢":"&GreaterGreater;","≷":"&gtrless;","⩾":"&ges;","≳":"&gtrsim;","𝒢":"&Gscr;","≫":"&gg;","Ъ":"&HARDcy;","ˇ":"&caron;","^":"&Hat;","Ĥ":"&Hcirc;","ℌ":"&Poincareplane;","ℋ":"&hamilt;","ℍ":"&quaternions;","─":"&boxh;","Ħ":"&Hstrok;","≏":"&bumpeq;","Е":"&IEcy;","Ĳ":"&IJlig;","Ё":"&IOcy;","Í":"&Iacute;","Î":"&Icirc;","И":"&Icy;","İ":"&Idot;","ℑ":"&imagpart;","Ì":"&Igrave;","Ī":"&Imacr;","ⅈ":"&ii;","∬":"&Int;","∫":"&int;","⋂":"&xcap;","⁣":"&ic;","⁢":"&it;","Į":"&Iogon;","𝕀":"&Iopf;","Ι":"&Iota;","ℐ":"&imagline;","Ĩ":"&Itilde;","І":"&Iukcy;","Ï":"&Iuml;","Ĵ":"&Jcirc;","Й":"&Jcy;","𝔍":"&Jfr;","𝕁":"&Jopf;","𝒥":"&Jscr;","Ј":"&Jsercy;","Є":"&Jukcy;","Х":"&KHcy;","Ќ":"&KJcy;","Κ":"&Kappa;","Ķ":"&Kcedil;","К":"&Kcy;","𝔎":"&Kfr;","𝕂":"&Kopf;","𝒦":"&Kscr;","Љ":"&LJcy;","<":"&lt;","Ĺ":"&Lacute;","Λ":"&Lambda;","⟪":"&Lang;","ℒ":"&lagran;","↞":"&twoheadleftarrow;","Ľ":"&Lcaron;","Ļ":"&Lcedil;","Л":"&Lcy;","⟨":"&langle;","←":"&slarr;","⇤":"&larrb;","⇆":"&lrarr;","⌈":"&lceil;","⟦":"&lobrk;","⥡":"&LeftDownTeeVector;","⇃":"&downharpoonleft;","⥙":"&LeftDownVectorBar;","⌊":"&lfloor;","↔":"&leftrightarrow;","⥎":"&LeftRightVector;","⊣":"&dashv;","↤":"&mapstoleft;","⥚":"&LeftTeeVector;","⊲":"&vltri;","⧏":"&LeftTriangleBar;","⊴":"&trianglelefteq;","⥑":"&LeftUpDownVector;","⥠":"&LeftUpTeeVector;","↿":"&upharpoonleft;","⥘":"&LeftUpVectorBar;","↼":"&lharu;","⥒":"&LeftVectorBar;","⋚":"&lesseqgtr;","≦":"&leqq;","≶":"&lg;","⪡":"&LessLess;","⩽":"&les;","≲":"&lsim;","𝔏":"&Lfr;","⋘":"&Ll;","⇚":"&lAarr;","Ŀ":"&Lmidot;","⟵":"&xlarr;","⟷":"&xharr;","⟶":"&xrarr;","𝕃":"&Lopf;","↙":"&swarrow;","↘":"&searrow;","↰":"&lsh;","Ł":"&Lstrok;","≪":"&ll;","⤅":"&Map;","М":"&Mcy;"," ":"&MediumSpace;","ℳ":"&phmmat;","𝔐":"&Mfr;","∓":"&mp;","𝕄":"&Mopf;","Μ":"&Mu;","Њ":"&NJcy;","Ń":"&Nacute;","Ň":"&Ncaron;","Ņ":"&Ncedil;","Н":"&Ncy;","​":"&ZeroWidthSpace;","\n":"&NewLine;","𝔑":"&Nfr;","⁠":"&NoBreak;"," ":"&nbsp;","ℕ":"&naturals;","⫬":"&Not;","≢":"&nequiv;","≭":"&NotCupCap;","∦":"&nspar;","∉":"&notinva;","≠":"&ne;","≂̸":"&nesim;","∄":"&nexists;","≯":"&ngtr;","≱":"&ngeq;","≧̸":"&ngeqq;","≫̸":"&nGtv;","≹":"&ntgl;","⩾̸":"&nges;","≵":"&ngsim;","≎̸":"&nbump;","≏̸":"&nbumpe;","⋪":"&ntriangleleft;","⧏̸":"&NotLeftTriangleBar;","⋬":"&ntrianglelefteq;","≮":"&nlt;","≰":"&nleq;","≸":"&ntlg;","≪̸":"&nLtv;","⩽̸":"&nles;","≴":"&nlsim;","⪢̸":"&NotNestedGreaterGreater;","⪡̸":"&NotNestedLessLess;","⊀":"&nprec;","⪯̸":"&npreceq;","⋠":"&nprcue;","∌":"&notniva;","⋫":"&ntriangleright;","⧐̸":"&NotRightTriangleBar;","⋭":"&ntrianglerighteq;","⊏̸":"&NotSquareSubset;","⋢":"&nsqsube;","⊐̸":"&NotSquareSuperset;","⋣":"&nsqsupe;","⊂⃒":"&vnsub;","⊈":"&nsubseteq;","⊁":"&nsucc;","⪰̸":"&nsucceq;","⋡":"&nsccue;","≿̸":"&NotSucceedsTilde;","⊃⃒":"&vnsup;","⊉":"&nsupseteq;","≁":"&nsim;","≄":"&nsimeq;","≇":"&ncong;","≉":"&napprox;","∤":"&nsmid;","𝒩":"&Nscr;","Ñ":"&Ntilde;","Ν":"&Nu;","Œ":"&OElig;","Ó":"&Oacute;","Ô":"&Ocirc;","О":"&Ocy;","Ő":"&Odblac;","𝔒":"&Ofr;","Ò":"&Ograve;","Ō":"&Omacr;","Ω":"&ohm;","Ο":"&Omicron;","𝕆":"&Oopf;","“":"&ldquo;","‘":"&lsquo;","⩔":"&Or;","𝒪":"&Oscr;","Ø":"&Oslash;","Õ":"&Otilde;","⨷":"&Otimes;","Ö":"&Ouml;","‾":"&oline;","⏞":"&OverBrace;","⎴":"&tbrk;","⏜":"&OverParenthesis;","∂":"&part;","П":"&Pcy;","𝔓":"&Pfr;","Φ":"&Phi;","Π":"&Pi;","±":"&pm;","ℙ":"&primes;","⪻":"&Pr;","≺":"&prec;","⪯":"&preceq;","≼":"&preccurlyeq;","≾":"&prsim;","″":"&Prime;","∏":"&prod;","∝":"&vprop;","𝒫":"&Pscr;","Ψ":"&Psi;",'"':"&quot;","𝔔":"&Qfr;","ℚ":"&rationals;","𝒬":"&Qscr;","⤐":"&drbkarow;","®":"&reg;","Ŕ":"&Racute;","⟫":"&Rang;","↠":"&twoheadrightarrow;","⤖":"&Rarrtl;","Ř":"&Rcaron;","Ŗ":"&Rcedil;","Р":"&Rcy;","ℜ":"&realpart;","∋":"&niv;","⇋":"&lrhar;","⥯":"&duhar;","Ρ":"&Rho;","⟩":"&rangle;","→":"&srarr;","⇥":"&rarrb;","⇄":"&rlarr;","⌉":"&rceil;","⟧":"&robrk;","⥝":"&RightDownTeeVector;","⇂":"&downharpoonright;","⥕":"&RightDownVectorBar;","⌋":"&rfloor;","⊢":"&vdash;","↦":"&mapsto;","⥛":"&RightTeeVector;","⊳":"&vrtri;","⧐":"&RightTriangleBar;","⊵":"&trianglerighteq;","⥏":"&RightUpDownVector;","⥜":"&RightUpTeeVector;","↾":"&upharpoonright;","⥔":"&RightUpVectorBar;","⇀":"&rightharpoonup;","⥓":"&RightVectorBar;","ℝ":"&reals;","⥰":"&RoundImplies;","⇛":"&rAarr;","ℛ":"&realine;","↱":"&rsh;","⧴":"&RuleDelayed;","Щ":"&SHCHcy;","Ш":"&SHcy;","Ь":"&SOFTcy;","Ś":"&Sacute;","⪼":"&Sc;","Š":"&Scaron;","Ş":"&Scedil;","Ŝ":"&Scirc;","С":"&Scy;","𝔖":"&Sfr;","↑":"&uparrow;","Σ":"&Sigma;","∘":"&compfn;","𝕊":"&Sopf;","√":"&radic;","□":"&square;","⊓":"&sqcap;","⊏":"&sqsubset;","⊑":"&sqsubseteq;","⊐":"&sqsupset;","⊒":"&sqsupseteq;","⊔":"&sqcup;","𝒮":"&Sscr;","⋆":"&sstarf;","⋐":"&Subset;","⊆":"&subseteq;","≻":"&succ;","⪰":"&succeq;","≽":"&succcurlyeq;","≿":"&succsim;","∑":"&sum;","⋑":"&Supset;","⊃":"&supset;","⊇":"&supseteq;","Þ":"&THORN;","™":"&trade;","Ћ":"&TSHcy;","Ц":"&TScy;","\t":"&Tab;","Τ":"&Tau;","Ť":"&Tcaron;","Ţ":"&Tcedil;","Т":"&Tcy;","𝔗":"&Tfr;","∴":"&therefore;","Θ":"&Theta;","  ":"&ThickSpace;"," ":"&thinsp;","∼":"&thksim;","≃":"&simeq;","≅":"&cong;","≈":"&thkap;","𝕋":"&Topf;","⃛":"&tdot;","𝒯":"&Tscr;","Ŧ":"&Tstrok;","Ú":"&Uacute;","↟":"&Uarr;","⥉":"&Uarrocir;","Ў":"&Ubrcy;","Ŭ":"&Ubreve;","Û":"&Ucirc;","У":"&Ucy;","Ű":"&Udblac;","𝔘":"&Ufr;","Ù":"&Ugrave;","Ū":"&Umacr;",_:"&lowbar;","⏟":"&UnderBrace;","⎵":"&bbrk;","⏝":"&UnderParenthesis;","⋃":"&xcup;","⊎":"&uplus;","Ų":"&Uogon;","𝕌":"&Uopf;","⤒":"&UpArrowBar;","⇅":"&udarr;","↕":"&varr;","⥮":"&udhar;","⊥":"&perp;","↥":"&mapstoup;","↖":"&nwarrow;","↗":"&nearrow;","ϒ":"&upsih;","Υ":"&Upsilon;","Ů":"&Uring;","𝒰":"&Uscr;","Ũ":"&Utilde;","Ü":"&Uuml;","⊫":"&VDash;","⫫":"&Vbar;","В":"&Vcy;","⊩":"&Vdash;","⫦":"&Vdashl;","⋁":"&xvee;","‖":"&Vert;","∣":"&smid;","|":"&vert;","❘":"&VerticalSeparator;","≀":"&wreath;"," ":"&hairsp;","𝔙":"&Vfr;","𝕍":"&Vopf;","𝒱":"&Vscr;","⊪":"&Vvdash;","Ŵ":"&Wcirc;","⋀":"&xwedge;","𝔚":"&Wfr;","𝕎":"&Wopf;","𝒲":"&Wscr;","𝔛":"&Xfr;","Ξ":"&Xi;","𝕏":"&Xopf;","𝒳":"&Xscr;","Я":"&YAcy;","Ї":"&YIcy;","Ю":"&YUcy;","Ý":"&Yacute;","Ŷ":"&Ycirc;","Ы":"&Ycy;","𝔜":"&Yfr;","𝕐":"&Yopf;","𝒴":"&Yscr;","Ÿ":"&Yuml;","Ж":"&ZHcy;","Ź":"&Zacute;","Ž":"&Zcaron;","З":"&Zcy;","Ż":"&Zdot;","Ζ":"&Zeta;","ℨ":"&zeetrf;","ℤ":"&integers;","𝒵":"&Zscr;","á":"&aacute;","ă":"&abreve;","∾":"&mstpos;","∾̳":"&acE;","∿":"&acd;","â":"&acirc;","а":"&acy;","æ":"&aelig;","𝔞":"&afr;","à":"&agrave;","ℵ":"&aleph;","α":"&alpha;","ā":"&amacr;","⨿":"&amalg;","∧":"&wedge;","⩕":"&andand;","⩜":"&andd;","⩘":"&andslope;","⩚":"&andv;","∠":"&angle;","⦤":"&ange;","∡":"&measuredangle;","⦨":"&angmsdaa;","⦩":"&angmsdab;","⦪":"&angmsdac;","⦫":"&angmsdad;","⦬":"&angmsdae;","⦭":"&angmsdaf;","⦮":"&angmsdag;","⦯":"&angmsdah;","∟":"&angrt;","⊾":"&angrtvb;","⦝":"&angrtvbd;","∢":"&angsph;","⍼":"&angzarr;","ą":"&aogon;","𝕒":"&aopf;","⩰":"&apE;","⩯":"&apacir;","≊":"&approxeq;","≋":"&apid;","'":"&apos;","å":"&aring;","𝒶":"&ascr;","*":"&midast;","ã":"&atilde;","ä":"&auml;","⨑":"&awint;","⫭":"&bNot;","≌":"&bcong;","϶":"&bepsi;","‵":"&bprime;","∽":"&bsim;","⋍":"&bsime;","⊽":"&barvee;","⌅":"&barwedge;","⎶":"&bbrktbrk;","б":"&bcy;","„":"&ldquor;","⦰":"&bemptyv;","β":"&beta;","ℶ":"&beth;","≬":"&twixt;","𝔟":"&bfr;","◯":"&xcirc;","⨀":"&xodot;","⨁":"&xoplus;","⨂":"&xotime;","⨆":"&xsqcup;","★":"&starf;","▽":"&xdtri;","△":"&xutri;","⨄":"&xuplus;","⤍":"&rbarr;","⧫":"&lozf;","▴":"&utrif;","▾":"&dtrif;","◂":"&ltrif;","▸":"&rtrif;","␣":"&blank;","▒":"&blk12;","░":"&blk14;","▓":"&blk34;","█":"&block;","=⃥":"&bne;","≡⃥":"&bnequiv;","⌐":"&bnot;","𝕓":"&bopf;","⋈":"&bowtie;","╗":"&boxDL;","╔":"&boxDR;","╖":"&boxDl;","╓":"&boxDr;","═":"&boxH;","╦":"&boxHD;","╩":"&boxHU;","╤":"&boxHd;","╧":"&boxHu;","╝":"&boxUL;","╚":"&boxUR;","╜":"&boxUl;","╙":"&boxUr;","║":"&boxV;","╬":"&boxVH;","╣":"&boxVL;","╠":"&boxVR;","╫":"&boxVh;","╢":"&boxVl;","╟":"&boxVr;","⧉":"&boxbox;","╕":"&boxdL;","╒":"&boxdR;","┐":"&boxdl;","┌":"&boxdr;","╥":"&boxhD;","╨":"&boxhU;","┬":"&boxhd;","┴":"&boxhu;","⊟":"&minusb;","⊞":"&plusb;","⊠":"&timesb;","╛":"&boxuL;","╘":"&boxuR;","┘":"&boxul;","└":"&boxur;","│":"&boxv;","╪":"&boxvH;","╡":"&boxvL;","╞":"&boxvR;","┼":"&boxvh;","┤":"&boxvl;","├":"&boxvr;","¦":"&brvbar;","𝒷":"&bscr;","⁏":"&bsemi;","\\":"&bsol;","⧅":"&bsolb;","⟈":"&bsolhsub;","•":"&bullet;","⪮":"&bumpE;","ć":"&cacute;","∩":"&cap;","⩄":"&capand;","⩉":"&capbrcup;","⩋":"&capcap;","⩇":"&capcup;","⩀":"&capdot;","∩︀":"&caps;","⁁":"&caret;","⩍":"&ccaps;","č":"&ccaron;","ç":"&ccedil;","ĉ":"&ccirc;","⩌":"&ccups;","⩐":"&ccupssm;","ċ":"&cdot;","⦲":"&cemptyv;","¢":"&cent;","𝔠":"&cfr;","ч":"&chcy;","✓":"&checkmark;","χ":"&chi;","○":"&cir;","⧃":"&cirE;","ˆ":"&circ;","≗":"&cire;","↺":"&olarr;","↻":"&orarr;","Ⓢ":"&oS;","⊛":"&oast;","⊚":"&ocir;","⊝":"&odash;","⨐":"&cirfnint;","⫯":"&cirmid;","⧂":"&cirscir;","♣":"&clubsuit;",":":"&colon;",",":"&comma;","@":"&commat;","∁":"&complement;","⩭":"&congdot;","𝕔":"&copf;","℗":"&copysr;","↵":"&crarr;","✗":"&cross;","𝒸":"&cscr;","⫏":"&csub;","⫑":"&csube;","⫐":"&csup;","⫒":"&csupe;","⋯":"&ctdot;","⤸":"&cudarrl;","⤵":"&cudarrr;","⋞":"&curlyeqprec;","⋟":"&curlyeqsucc;","↶":"&curvearrowleft;","⤽":"&cularrp;","∪":"&cup;","⩈":"&cupbrcap;","⩆":"&cupcap;","⩊":"&cupcup;","⊍":"&cupdot;","⩅":"&cupor;","∪︀":"&cups;","↷":"&curvearrowright;","⤼":"&curarrm;","⋎":"&cuvee;","⋏":"&cuwed;","¤":"&curren;","∱":"&cwint;","⌭":"&cylcty;","⥥":"&dHar;","†":"&dagger;","ℸ":"&daleth;","‐":"&hyphen;","⤏":"&rBarr;","ď":"&dcaron;","д":"&dcy;","⇊":"&downdownarrows;","⩷":"&eDDot;","°":"&deg;","δ":"&delta;","⦱":"&demptyv;","⥿":"&dfisht;","𝔡":"&dfr;","♦":"&diams;","ϝ":"&gammad;","⋲":"&disin;","÷":"&divide;","⋇":"&divonx;","ђ":"&djcy;","⌞":"&llcorner;","⌍":"&dlcrop;",$:"&dollar;","𝕕":"&dopf;","≑":"&eDot;","∸":"&minusd;","∔":"&plusdo;","⊡":"&sdotb;","⌟":"&lrcorner;","⌌":"&drcrop;","𝒹":"&dscr;","ѕ":"&dscy;","⧶":"&dsol;","đ":"&dstrok;","⋱":"&dtdot;","▿":"&triangledown;","⦦":"&dwangle;","џ":"&dzcy;","⟿":"&dzigrarr;","é":"&eacute;","⩮":"&easter;","ě":"&ecaron;","≖":"&eqcirc;","ê":"&ecirc;","≕":"&eqcolon;","э":"&ecy;","ė":"&edot;","≒":"&fallingdotseq;","𝔢":"&efr;","⪚":"&eg;","è":"&egrave;","⪖":"&eqslantgtr;","⪘":"&egsdot;","⪙":"&el;","⏧":"&elinters;","ℓ":"&ell;","⪕":"&eqslantless;","⪗":"&elsdot;","ē":"&emacr;","∅":"&varnothing;"," ":"&emsp13;"," ":"&emsp14;"," ":"&emsp;","ŋ":"&eng;"," ":"&ensp;","ę":"&eogon;","𝕖":"&eopf;","⋕":"&epar;","⧣":"&eparsl;","⩱":"&eplus;","ε":"&epsilon;","ϵ":"&varepsilon;","=":"&equals;","≟":"&questeq;","⩸":"&equivDD;","⧥":"&eqvparsl;","≓":"&risingdotseq;","⥱":"&erarr;","ℯ":"&escr;","η":"&eta;","ð":"&eth;","ë":"&euml;","€":"&euro;","!":"&excl;","ф":"&fcy;","♀":"&female;","ﬃ":"&ffilig;","ﬀ":"&fflig;","ﬄ":"&ffllig;","𝔣":"&ffr;","ﬁ":"&filig;",fj:"&fjlig;","♭":"&flat;","ﬂ":"&fllig;","▱":"&fltns;","ƒ":"&fnof;","𝕗":"&fopf;","⋔":"&pitchfork;","⫙":"&forkv;","⨍":"&fpartint;","½":"&half;","⅓":"&frac13;","¼":"&frac14;","⅕":"&frac15;","⅙":"&frac16;","⅛":"&frac18;","⅔":"&frac23;","⅖":"&frac25;","¾":"&frac34;","⅗":"&frac35;","⅜":"&frac38;","⅘":"&frac45;","⅚":"&frac56;","⅝":"&frac58;","⅞":"&frac78;","⁄":"&frasl;","⌢":"&sfrown;","𝒻":"&fscr;","⪌":"&gtreqqless;","ǵ":"&gacute;","γ":"&gamma;","⪆":"&gtrapprox;","ğ":"&gbreve;","ĝ":"&gcirc;","г":"&gcy;","ġ":"&gdot;","⪩":"&gescc;","⪀":"&gesdot;","⪂":"&gesdoto;","⪄":"&gesdotol;","⋛︀":"&gesl;","⪔":"&gesles;","𝔤":"&gfr;","ℷ":"&gimel;","ѓ":"&gjcy;","⪒":"&glE;","⪥":"&gla;","⪤":"&glj;","≩":"&gneqq;","⪊":"&gnapprox;","⪈":"&gneq;","⋧":"&gnsim;","𝕘":"&gopf;","ℊ":"&gscr;","⪎":"&gsime;","⪐":"&gsiml;","⪧":"&gtcc;","⩺":"&gtcir;","⋗":"&gtrdot;","⦕":"&gtlPar;","⩼":"&gtquest;","⥸":"&gtrarr;","≩︀":"&gvnE;","ъ":"&hardcy;","⥈":"&harrcir;","↭":"&leftrightsquigarrow;","ℏ":"&plankv;","ĥ":"&hcirc;","♥":"&heartsuit;","…":"&mldr;","⊹":"&hercon;","𝔥":"&hfr;","⤥":"&searhk;","⤦":"&swarhk;","⇿":"&hoarr;","∻":"&homtht;","↩":"&larrhk;","↪":"&rarrhk;","𝕙":"&hopf;","―":"&horbar;","𝒽":"&hscr;","ħ":"&hstrok;","⁃":"&hybull;","í":"&iacute;","î":"&icirc;","и":"&icy;","е":"&iecy;","¡":"&iexcl;","𝔦":"&ifr;","ì":"&igrave;","⨌":"&qint;","∭":"&tint;","⧜":"&iinfin;","℩":"&iiota;","ĳ":"&ijlig;","ī":"&imacr;","ı":"&inodot;","⊷":"&imof;","Ƶ":"&imped;","℅":"&incare;","∞":"&infin;","⧝":"&infintie;","⊺":"&intercal;","⨗":"&intlarhk;","⨼":"&iprod;","ё":"&iocy;","į":"&iogon;","𝕚":"&iopf;","ι":"&iota;","¿":"&iquest;","𝒾":"&iscr;","⋹":"&isinE;","⋵":"&isindot;","⋴":"&isins;","⋳":"&isinsv;","ĩ":"&itilde;","і":"&iukcy;","ï":"&iuml;","ĵ":"&jcirc;","й":"&jcy;","𝔧":"&jfr;","ȷ":"&jmath;","𝕛":"&jopf;","𝒿":"&jscr;","ј":"&jsercy;","є":"&jukcy;","κ":"&kappa;","ϰ":"&varkappa;","ķ":"&kcedil;","к":"&kcy;","𝔨":"&kfr;","ĸ":"&kgreen;","х":"&khcy;","ќ":"&kjcy;","𝕜":"&kopf;","𝓀":"&kscr;","⤛":"&lAtail;","⤎":"&lBarr;","⪋":"&lesseqqgtr;","⥢":"&lHar;","ĺ":"&lacute;","⦴":"&laemptyv;","λ":"&lambda;","⦑":"&langd;","⪅":"&lessapprox;","«":"&laquo;","⤟":"&larrbfs;","⤝":"&larrfs;","↫":"&looparrowleft;","⤹":"&larrpl;","⥳":"&larrsim;","↢":"&leftarrowtail;","⪫":"&lat;","⤙":"&latail;","⪭":"&late;","⪭︀":"&lates;","⤌":"&lbarr;","❲":"&lbbrk;","{":"&lcub;","[":"&lsqb;","⦋":"&lbrke;","⦏":"&lbrksld;","⦍":"&lbrkslu;","ľ":"&lcaron;","ļ":"&lcedil;","л":"&lcy;","⤶":"&ldca;","⥧":"&ldrdhar;","⥋":"&ldrushar;","↲":"&ldsh;","≤":"&leq;","⇇":"&llarr;","⋋":"&lthree;","⪨":"&lescc;","⩿":"&lesdot;","⪁":"&lesdoto;","⪃":"&lesdotor;","⋚︀":"&lesg;","⪓":"&lesges;","⋖":"&ltdot;","⥼":"&lfisht;","𝔩":"&lfr;","⪑":"&lgE;","⥪":"&lharul;","▄":"&lhblk;","љ":"&ljcy;","⥫":"&llhard;","◺":"&lltri;","ŀ":"&lmidot;","⎰":"&lmoustache;","≨":"&lneqq;","⪉":"&lnapprox;","⪇":"&lneq;","⋦":"&lnsim;","⟬":"&loang;","⇽":"&loarr;","⟼":"&xmap;","↬":"&rarrlp;","⦅":"&lopar;","𝕝":"&lopf;","⨭":"&loplus;","⨴":"&lotimes;","∗":"&lowast;","◊":"&lozenge;","(":"&lpar;","⦓":"&lparlt;","⥭":"&lrhard;","‎":"&lrm;","⊿":"&lrtri;","‹":"&lsaquo;","𝓁":"&lscr;","⪍":"&lsime;","⪏":"&lsimg;","‚":"&sbquo;","ł":"&lstrok;","⪦":"&ltcc;","⩹":"&ltcir;","⋉":"&ltimes;","⥶":"&ltlarr;","⩻":"&ltquest;","⦖":"&ltrPar;","◃":"&triangleleft;","⥊":"&lurdshar;","⥦":"&luruhar;","≨︀":"&lvnE;","∺":"&mDDot;","¯":"&strns;","♂":"&male;","✠":"&maltese;","▮":"&marker;","⨩":"&mcomma;","м":"&mcy;","—":"&mdash;","𝔪":"&mfr;","℧":"&mho;","µ":"&micro;","⫰":"&midcir;","−":"&minus;","⨪":"&minusdu;","⫛":"&mlcp;","⊧":"&models;","𝕞":"&mopf;","𝓂":"&mscr;","μ":"&mu;","⊸":"&mumap;","⋙̸":"&nGg;","≫⃒":"&nGt;","⇍":"&nlArr;","⇎":"&nhArr;","⋘̸":"&nLl;","≪⃒":"&nLt;","⇏":"&nrArr;","⊯":"&nVDash;","⊮":"&nVdash;","ń":"&nacute;","∠⃒":"&nang;","⩰̸":"&napE;","≋̸":"&napid;","ŉ":"&napos;","♮":"&natural;","⩃":"&ncap;","ň":"&ncaron;","ņ":"&ncedil;","⩭̸":"&ncongdot;","⩂":"&ncup;","н":"&ncy;","–":"&ndash;","⇗":"&neArr;","⤤":"&nearhk;","≐̸":"&nedot;","⤨":"&toea;","𝔫":"&nfr;","↮":"&nleftrightarrow;","⫲":"&nhpar;","⋼":"&nis;","⋺":"&nisd;","њ":"&njcy;","≦̸":"&nleqq;","↚":"&nleftarrow;","‥":"&nldr;","𝕟":"&nopf;","¬":"&not;","⋹̸":"&notinE;","⋵̸":"&notindot;","⋷":"&notinvb;","⋶":"&notinvc;","⋾":"&notnivb;","⋽":"&notnivc;","⫽⃥":"&nparsl;","∂̸":"&npart;","⨔":"&npolint;","↛":"&nrightarrow;","⤳̸":"&nrarrc;","↝̸":"&nrarrw;","𝓃":"&nscr;","⊄":"&nsub;","⫅̸":"&nsubseteqq;","⊅":"&nsup;","⫆̸":"&nsupseteqq;","ñ":"&ntilde;","ν":"&nu;","#":"&num;","№":"&numero;"," ":"&numsp;","⊭":"&nvDash;","⤄":"&nvHarr;","≍⃒":"&nvap;","⊬":"&nvdash;","≥⃒":"&nvge;",">⃒":"&nvgt;","⧞":"&nvinfin;","⤂":"&nvlArr;","≤⃒":"&nvle;","<⃒":"&nvlt;","⊴⃒":"&nvltrie;","⤃":"&nvrArr;","⊵⃒":"&nvrtrie;","∼⃒":"&nvsim;","⇖":"&nwArr;","⤣":"&nwarhk;","⤧":"&nwnear;","ó":"&oacute;","ô":"&ocirc;","о":"&ocy;","ő":"&odblac;","⨸":"&odiv;","⦼":"&odsold;","œ":"&oelig;","⦿":"&ofcir;","𝔬":"&ofr;","˛":"&ogon;","ò":"&ograve;","⧁":"&ogt;","⦵":"&ohbar;","⦾":"&olcir;","⦻":"&olcross;","⧀":"&olt;","ō":"&omacr;","ω":"&omega;","ο":"&omicron;","⦶":"&omid;","𝕠":"&oopf;","⦷":"&opar;","⦹":"&operp;","∨":"&vee;","⩝":"&ord;","ℴ":"&oscr;","ª":"&ordf;","º":"&ordm;","⊶":"&origof;","⩖":"&oror;","⩗":"&orslope;","⩛":"&orv;","ø":"&oslash;","⊘":"&osol;","õ":"&otilde;","⨶":"&otimesas;","ö":"&ouml;","⌽":"&ovbar;","¶":"&para;","⫳":"&parsim;","⫽":"&parsl;","п":"&pcy;","%":"&percnt;",".":"&period;","‰":"&permil;","‱":"&pertenk;","𝔭":"&pfr;","φ":"&phi;","ϕ":"&varphi;","☎":"&phone;","π":"&pi;","ϖ":"&varpi;","ℎ":"&planckh;","+":"&plus;","⨣":"&plusacir;","⨢":"&pluscir;","⨥":"&plusdu;","⩲":"&pluse;","⨦":"&plussim;","⨧":"&plustwo;","⨕":"&pointint;","𝕡":"&popf;","£":"&pound;","⪳":"&prE;","⪷":"&precapprox;","⪹":"&prnap;","⪵":"&prnE;","⋨":"&prnsim;","′":"&prime;","⌮":"&profalar;","⌒":"&profline;","⌓":"&profsurf;","⊰":"&prurel;","𝓅":"&pscr;","ψ":"&psi;"," ":"&puncsp;","𝔮":"&qfr;","𝕢":"&qopf;","⁗":"&qprime;","𝓆":"&qscr;","⨖":"&quatint;","?":"&quest;","⤜":"&rAtail;","⥤":"&rHar;","∽̱":"&race;","ŕ":"&racute;","⦳":"&raemptyv;","⦒":"&rangd;","⦥":"&range;","»":"&raquo;","⥵":"&rarrap;","⤠":"&rarrbfs;","⤳":"&rarrc;","⤞":"&rarrfs;","⥅":"&rarrpl;","⥴":"&rarrsim;","↣":"&rightarrowtail;","↝":"&rightsquigarrow;","⤚":"&ratail;","∶":"&ratio;","❳":"&rbbrk;","}":"&rcub;","]":"&rsqb;","⦌":"&rbrke;","⦎":"&rbrksld;","⦐":"&rbrkslu;","ř":"&rcaron;","ŗ":"&rcedil;","р":"&rcy;","⤷":"&rdca;","⥩":"&rdldhar;","↳":"&rdsh;","▭":"&rect;","⥽":"&rfisht;","𝔯":"&rfr;","⥬":"&rharul;","ρ":"&rho;","ϱ":"&varrho;","⇉":"&rrarr;","⋌":"&rthree;","˚":"&ring;","‏":"&rlm;","⎱":"&rmoustache;","⫮":"&rnmid;","⟭":"&roang;","⇾":"&roarr;","⦆":"&ropar;","𝕣":"&ropf;","⨮":"&roplus;","⨵":"&rotimes;",")":"&rpar;","⦔":"&rpargt;","⨒":"&rppolint;","›":"&rsaquo;","𝓇":"&rscr;","⋊":"&rtimes;","▹":"&triangleright;","⧎":"&rtriltri;","⥨":"&ruluhar;","℞":"&rx;","ś":"&sacute;","⪴":"&scE;","⪸":"&succapprox;","š":"&scaron;","ş":"&scedil;","ŝ":"&scirc;","⪶":"&succneqq;","⪺":"&succnapprox;","⋩":"&succnsim;","⨓":"&scpolint;","с":"&scy;","⋅":"&sdot;","⩦":"&sdote;","⇘":"&seArr;","§":"&sect;",";":"&semi;","⤩":"&tosa;","✶":"&sext;","𝔰":"&sfr;","♯":"&sharp;","щ":"&shchcy;","ш":"&shcy;","­":"&shy;","σ":"&sigma;","ς":"&varsigma;","⩪":"&simdot;","⪞":"&simg;","⪠":"&simgE;","⪝":"&siml;","⪟":"&simlE;","≆":"&simne;","⨤":"&simplus;","⥲":"&simrarr;","⨳":"&smashp;","⧤":"&smeparsl;","⌣":"&ssmile;","⪪":"&smt;","⪬":"&smte;","⪬︀":"&smtes;","ь":"&softcy;","/":"&sol;","⧄":"&solb;","⌿":"&solbar;","𝕤":"&sopf;","♠":"&spadesuit;","⊓︀":"&sqcaps;","⊔︀":"&sqcups;","𝓈":"&sscr;","☆":"&star;","⊂":"&subset;","⫅":"&subseteqq;","⪽":"&subdot;","⫃":"&subedot;","⫁":"&submult;","⫋":"&subsetneqq;","⊊":"&subsetneq;","⪿":"&subplus;","⥹":"&subrarr;","⫇":"&subsim;","⫕":"&subsub;","⫓":"&subsup;","♪":"&sung;","¹":"&sup1;","²":"&sup2;","³":"&sup3;","⫆":"&supseteqq;","⪾":"&supdot;","⫘":"&supdsub;","⫄":"&supedot;","⟉":"&suphsol;","⫗":"&suphsub;","⥻":"&suplarr;","⫂":"&supmult;","⫌":"&supsetneqq;","⊋":"&supsetneq;","⫀":"&supplus;","⫈":"&supsim;","⫔":"&supsub;","⫖":"&supsup;","⇙":"&swArr;","⤪":"&swnwar;","ß":"&szlig;","⌖":"&target;","τ":"&tau;","ť":"&tcaron;","ţ":"&tcedil;","т":"&tcy;","⌕":"&telrec;","𝔱":"&tfr;","θ":"&theta;","ϑ":"&vartheta;","þ":"&thorn;","×":"&times;","⨱":"&timesbar;","⨰":"&timesd;","⌶":"&topbot;","⫱":"&topcir;","𝕥":"&topf;","⫚":"&topfork;","‴":"&tprime;","▵":"&utri;","≜":"&trie;","◬":"&tridot;","⨺":"&triminus;","⨹":"&triplus;","⧍":"&trisb;","⨻":"&tritime;","⏢":"&trpezium;","𝓉":"&tscr;","ц":"&tscy;","ћ":"&tshcy;","ŧ":"&tstrok;","⥣":"&uHar;","ú":"&uacute;","ў":"&ubrcy;","ŭ":"&ubreve;","û":"&ucirc;","у":"&ucy;","ű":"&udblac;","⥾":"&ufisht;","𝔲":"&ufr;","ù":"&ugrave;","▀":"&uhblk;","⌜":"&ulcorner;","⌏":"&ulcrop;","◸":"&ultri;","ū":"&umacr;","ų":"&uogon;","𝕦":"&uopf;","υ":"&upsilon;","⇈":"&uuarr;","⌝":"&urcorner;","⌎":"&urcrop;","ů":"&uring;","◹":"&urtri;","𝓊":"&uscr;","⋰":"&utdot;","ũ":"&utilde;","ü":"&uuml;","⦧":"&uwangle;","⫨":"&vBar;","⫩":"&vBarv;","⦜":"&vangrt;","⊊︀":"&vsubne;","⫋︀":"&vsubnE;","⊋︀":"&vsupne;","⫌︀":"&vsupnE;","в":"&vcy;","⊻":"&veebar;","≚":"&veeeq;","⋮":"&vellip;","𝔳":"&vfr;","𝕧":"&vopf;","𝓋":"&vscr;","⦚":"&vzigzag;","ŵ":"&wcirc;","⩟":"&wedbar;","≙":"&wedgeq;","℘":"&wp;","𝔴":"&wfr;","𝕨":"&wopf;","𝓌":"&wscr;","𝔵":"&xfr;","ξ":"&xi;","⋻":"&xnis;","𝕩":"&xopf;","𝓍":"&xscr;","ý":"&yacute;","я":"&yacy;","ŷ":"&ycirc;","ы":"&ycy;","¥":"&yen;","𝔶":"&yfr;","ї":"&yicy;","𝕪":"&yopf;","𝓎":"&yscr;","ю":"&yucy;","ÿ":"&yuml;","ź":"&zacute;","ž":"&zcaron;","з":"&zcy;","ż":"&zdot;","ζ":"&zeta;","𝔷":"&zfr;","ж":"&zhcy;","⇝":"&zigrarr;","𝕫":"&zopf;","𝓏":"&zscr;","‍":"&zwj;","‌":"&zwnj;"}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numericUnicodeMap={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromCodePoint=String.fromCodePoint||function(e){return String.fromCharCode(Math.floor((e-65536)/1024)+55296,(e-65536)%1024+56320)},t.getCodePoint=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return 1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536},t.highSurrogateFrom=55296,t.highSurrogateTo=56319},function(e,t,r){"use strict";r.d(t,"a",(function(){return P})),r.d(t,"c",(function(){return j}));r(44);var n=r(10),o=r(0),a=r.n(o),i=r(2),u=r.n(i),l=r(416),c=r.n(l),s=r(3976),f=r.n(s),d=r(4342),p=r(929),h=r(3607);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(){b=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function g(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=g.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==y(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?m:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(y(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function m(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function O(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}var E=new(r(3883).a),P=function(){return e=function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.doc=r.doc,this.getContent=r.getContent,this.workflow=r.workflow,this.engine=r.workflow?r.workflow.engine:r.engine,this._title=this.doc&&this.doc.title,this.getTitle=function(){return t._title},E.saveToServer||(this.getTitle=r.getTitle||function(){return this.doc?this.doc.title:null}),this.change=c()(this.change,300),this.onMessage=d.b,this.MESSAGE_TYPES=d.a,"off"===E.extraConfig.message&&n.a.config({top:-9999})},t=[{key:"_postContentMessage",value:function(e,t){if(t||(t={status:"success",message:"ok"}),t.id=this.doc.slug,"success"===t.status)return this._getEmbedData().then((function(r){t.data=g(g({},r),t.data||{}),Object(d.c)(e,t)}));Object(d.c)(e,t)}},{key:"_getEmbedData",value:(o=b().mark((function e(){var t,r,n,o,a,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.engine){e.next=3;break}return e.next=3,this.engine.onBeforeSave();case 3:return t=this.getContent({fullHTML:E.fullHTML}),r=t.content,n=t.html,o=t.thumbnail,a=this.getTitle(),i={id:this.doc.slug,slug:this.doc.slug,title:a},"Sheet"===this.doc.type||"Table"===this.doc.type?(i.thumbnail=o,i.lakesheet=r):(i.lake=r,i.html=n),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(r,n){var a=o.apply(e,t);function i(e){m(a,r,n,i,u,"next",e)}function u(e){m(a,r,n,i,u,"throw",e)}i(void 0)}))},function(){return a.apply(this,arguments)})},{key:"publish",value:function(e){this._postContentMessage(d.a.PUBLISH_CALLBACK,e)}},{key:"save",value:function(e){this._postContentMessage(d.a.SAVE_CALLBACK,e)}},{key:"saveTitle",value:function(e){this._title=e,this._postContentMessage(d.a.SAVE_TITLE_CALLBACK,{data:{data:e},status:"success"})}},{key:"changeTitle",value:function(e,t){this._title=e,t&&this._postContentMessage(d.a.TITLE_CHANGE_CALLBACK,{data:{data:e},status:"success"})}},{key:"loadCallback",value:function(){Object(d.c)(d.a.LOAD_CALLBACK)}},{key:"getValueCallback",value:function(){this._postContentMessage(d.a.GET_VALUE_CALLBACK)}},{key:"unlockCallback",value:function(){this._postContentMessage(d.a.UNLOCK_CALLBACK)}},{key:"resetCallback",value:function(){this._postContentMessage(d.a.RESET_CALLBACK)}},{key:"change",value:function(){this._postContentMessage(d.a.CHANGE_CALLBACK)}},{key:"fullScreen",value:function(e){Object(d.c)(d.a.FULLSCREEN_CALLBACK,e)}},{key:"resize",value:function(e){Object(d.c)(d.a.RESIZE_CALLBACK,e)}},{key:"onDocLoaded",value:function(e){Object(d.c)(d.a.DOC_LOADED_CALLBACK,e)}},{key:"onHashChange",value:function(e){Object(d.c)("hashchange",{newURL:e.newURL,oldURL:e.oldURL,href:location.href})}},{key:"connect",value:function(e){var t=this;e.on(h.i.error,(function(e){t.onError(e)})),e.on(h.i.docStatusChange,(function(e){t.onDocStatusChanged(e)})),e.on(h.i.saveTitle,(function(e){t.saveTitle({data:e,state:"success",message:"ok"})})),e.on(h.i.change,(function(){E.onchange&&t.change()})),e.on(h.i.miniExpand,(function(e){t.fullScreen(e)}))}},{key:"onDocStatusChanged",value:function(e){e===h.a.saved?this.save({status:"success",message:"ok",data:{save_type:"user"}}):e===h.a.published?this.publish():e===h.a.loaded&&this.onDocLoaded()}},{key:"onError",value:function(e){e&&e.code===h.d.PUBLISH_FAILED&&this.publish({status:"error",message:e.message})}}],t&&w(e.prototype,t),r&&w(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,o,a}();function j(e){var t=e.backgroundColor,r=e.autoHeight,n=e.bodyBackgroundColor,a=e.toolbarBackgroundColor;Object(o.useEffect)((function(){var e="";if(n&&(e+="\n        .lake-max-editor-wrapper-content .lake-max-editor-content {\n          background-color: ".concat(f()(n),";\n        }\n        .lake-max-editor-wrapper-content .lake-content-editor {\n          border: 0 none;\n          box-shadow: none;\n        }\n      ")),a&&(e+="\n        .lake-toolbar {\n          background-color: ".concat(f()(a),";\n        }\n      ")),t&&(e+="\n        #content,\n        .lake-content-editor,\n        .lake-title-editor .ant-input {\n          background-color: ".concat(f()(t),"\n        }\n      ")),r||(e+="\n        .lake-mini-editor .lake-content-editor-core {\n          height: calc(100vh - 40px);\n          min-height: calc(100vh - 40px);\n          overflow-y: auto;\n        }\n      "),e){var o=document.createElement("style");document.head.appendChild(o),o.type="text/css",o.appendChild(document.createTextNode(e))}}),[])}function C(e){var t=e.doc,r=e.publish,i=e.setContent,u=e.getContent,l=e.insertContent,c=e.getTitle,s=e.getContainer,f=e.autoHeight,h=(e.fullScreen,e.onLoad),y=e.workflow,b=e.engine,m=e.backgroundColor,v=e.bodyBackgroundColor,g=e.toolbarBackgroundColor,_=Object(o.useRef)(null),w=s(),O=Object(o.useRef)(null),E=Object(o.useMemo)((function(){return new P({doc:t,getContent:u,getTitle:c})}),[t,u,c]);return j({autoHeight:f,backgroundColor:m,bodyBackgroundColor:v,toolbarBackgroundColor:g}),Object(o.useEffect)((function(){var e=Object(d.b)((function(e){var t=e.type,o=e.message,a=e.options,u=void 0===a?{}:a;if(t===d.a.PUBLISH)r();else if(t===d.a.GET_VALUE)E.getValueCallback();else if(t===d.a.SET_VALUE)if("markdown"===u.format)try{p.a.convertMarkdownToLake(o).then((function(e){return i(e)}))}catch(e){n.a.error(__("初始化 Markdown 格式失败"))}else i(o);else if(t===d.a.SCROLL_TO){var c=document.querySelector(".lake-editor-scroll-container")||document.querySelector(".lake-content-editor-core");c?c.scrollTop=o:window.scrollTo(0,o)}else if(t===d.a.INSERT_VALUE)l(o);else if(t===d.a.UNLOCK)y&&y.exit({unlock:!0}).then((function(){E.unlockCallback()}));else if(t===d.a.RESET&&(b||y)){var s=(b||y).reset,f=function(e){s(e),E.resetCallback()};if("markdown"===u.format)try{p.a.convertMarkdownToLake(o).then((function(e){f(e)}))}catch(e){n.a.error(__("重置 Markdown 格式失败"))}else f(o)}}));return E.loadCallback(),h(E),y&&E.connect(y),function(){e()}}),[]),Object(o.useEffect)((function(){if(w&&f){!function e(){_.current||(_.current=setTimeout((function(){_.current=null;var t=w.querySelector?w:w.current,r=t.querySelector(".lake-max-editor-content");if(r||(r=t.querySelector(".lake-content-editor")),r){var n=r.scrollHeight,o=document.querySelector(".lake-toolbar"),a=o?o.offsetHeight:0,i=document.querySelector(".lark-editor-header"),u=i?i.offsetHeight:0;O.current!==n&&(E.resize({height:a+u+n+60}),O.current=n)}e()}),300))}()}return function(){clearTimeout(_.current),_.current=null}}),[w,f]),a.a.createElement("span",null)}C.defaultProps={onLoad:function(){}},C.propTypes={doc:u.a.object,getContainer:u.a.func.isRequired,getContent:u.a.func.isRequired,getTitle:u.a.func,publish:u.a.func.isRequired,setContent:u.a.func.isRequired,autoHeight:u.a.bool,onLoad:u.a.func,insertContent:u.a.func.isRequired,engine:u.a.func.object},t.b=C},,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n,o=r(1035),a=r(0),i=r.n(a),u=r(1334),l=r(249),c=r(43),s=r(5192),f=(r(580),function(e,t){var r={},n={exports:r};return function(e){return new Function("require","module","exports",e)}(t)(e,n,r),n.exports}),d=function(e){return e},p=(n=r(5257).shared||{},function(e){if(!(e in n))throw new Error("Could not require '".concat(e,"'. '").concat(e,"' does not exist in dependencies."));return n[e]}),h=d((function(e){return fetch(e).then((function(e){return e.text()})).then((function(e){return f(p,e)})).catch((function(e){throw e}))}));function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function v(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}function w(){w=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",b="completed",m={};function v(){}function g(){}function _(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=_.prototype=v.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==y(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===b){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?b:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=b,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(y(t)+" is not iterable")}return g.prototype=_,o(j,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:g,configurable:!0}),g.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}var O=w().mark(P),E=w().mark(C);function P(){var e;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:return t.next=4,--e;case 4:t.next=1;break;case 6:case"end":return t.stop()}}),O)}var j=P();function C(){var e;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:return t.next=4,"a".concat(++e);case 4:t.next=1;break;case 6:case"end":return t.stop()}}),E)}var k=C(),S=function(){return v((function e(t){var r=this;b(this,e),g(this,"id",void 0),g(this,"type",void 0),g(this,"label",void 0),g(this,"description",void 0),g(this,"icon",void 0),g(this,"priority",void 0),g(this,"hasWatermark",void 0),g(this,"target",void 0),g(this,"provider",void 0),g(this,"providerType",void 0);var n=s.a[t.type];this.id=t.id||j.next().value,this.priority=t.priority||k.next().value,this.type=t.type,this.label=this.getLabel(t.label,t.target)||n.label,this.description=t.description||n.description,this.icon=this.getIconNode(t.icon,t.target)||n.icon,this.hasWatermark=t.hasWatermark||n.hasWatermark,this.target=t.target;var a=t.Provider||n.Provider;"function"==typeof a&&(this.provider=new a,this.providerType=o.c.BUILTIN),"string"==typeof a&&(h(a).then((function(e){var t=e.default;r.provider=new t})).catch((function(e){console.error(e),r.provider=new A(e)})),this.providerType=o.c.REMOTE)}),[{key:"getIconNode",value:function(e,t){return t?i.a.createElement(u.a,{item:t,size:24}):Object(a.isValidElement)(e)?e:"string"!=typeof e?null:e.startsWith("icon-")?i.a.createElement(c.b,{name:e,size:22}):e.startsWith("http")?i.a.createElement(l.a,{src:e,style:{width:22,height:22}}):e}},{key:"getLabel",value:function(e,t){return null!=t&&t.name?t.name:null!=t&&t.title?null==t?void 0:t.title:e}}])}(),A=function(){return v((function e(t){b(this,e),this.error=t}),[{key:"isEnable",value:function(){return!0}},{key:"initialize",value:function(){}},{key:"renderContent",value:function(){var e;return i.a.createElement("div",null,"ERROR: ",(null===(e=this.error)||void 0===e?void 0:e.toString())||"UNKNOWN ERROR")}}])}()},,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0),o=r(532),a=r(166);function i(){var e,t=Object(o.f)((function(e){return{group:e.group,organization:e.organization}})),r=t.group,i=t.organization,u=(null==r?void 0:r.id)&&"Group"===(null==r?void 0:r.type),l=window.appData.homepageEnable,c=i&&i.id,s="/dashboard/org_wiki"===window.location.pathname&&(null==i||null===(e=i.abilities)||void 0===e?void 0:e.read_wiki);return Object(n.useMemo)((function(){return l?{isInGarden:!0}:u&&!a.a.isPublication(r)?{isInGroup:!0}:s?{isInOrgWiki:!0}:c?{}:{isInPersonal:!0}}),[u,s,l,c])}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){return e.home="home",e.search="search",e.readDoc="readDoc",e.feedbackList="feedbackList",e.webview="webview",e}({})},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return ac})),r.d(t,"c",(function(){return ic})),r.d(t,"b",(function(){return uc})),r.d(t,"d",(function(){return lc}));var n=r(191),o=r.n(n),a=r(1035),i=r(0),u=r.n(i),l=r(3505),c=r(43),s=r(357),f=(r(185),r(66)),d=r(5),p=r.n(d),h=r(14),y=r.n(h),b=r(1682),m=r(1296),v="index-module_content_f7nmD",g="index-module_group_msIEh",_="index-module_item_BqLFr",w="index-module_selected_Fpmdr",O="index-module_title_aYyk7",E="index-module_date_4YA3i",P="index-module_delete_D1lhr";function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function C(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t=e.context,r=e.datasource,n=k(Object(i.useState)(0),2),o=n[0],a=n[1],l=Object(m.a)(),c=r.conversationList,s=Object(i.useMemo)((function(){var e=[],t=[],r=[],n=y()(),o=y()().subtract(1,"day");return c.forEach((function(a){var i=y()(a.created_at);i.isSame(n,"day")?e.push(a):i.isSame(o,"day")?t.push(a):r.push(a)})),[{label:__("今天"),list:e},{label:__("昨天"),list:t},{label:__("之前"),list:r,fullDate:!0}]}),[c,c.length]);return Object(i.useEffect)((function(){return r.addListener({onConversationsUpdated:l,onDatasetUpdated:l})}),[]),c.length?u.a.createElement("div",{className:v},s.filter((function(e){return e.list.length})).map((function(t){return u.a.createElement("div",null,u.a.createElement("span",{className:g},t.label),t.list.map((function(n){var i=n.id,l=n.title,c=n.updated_at,s=i===r.conversationId,d=l||__("未命名会话");s&&(d="".concat(__("[当前会话]")," ").concat(d));var h=y()(c).format(t.fullDate?"YY/MM/DD":"HH:mm"),m=o===i;return u.a.createElement("div",{className:p()(_,C({},w,s)),onClick:function(t){var n=null==t?void 0:t.target;null!=n&&n.closest(".".concat(P))||null==n||!n.closest(".".concat(O))||(r.switchConversation(i),e.context.closeDrawer())}},u.a.createElement("span",{className:O},d),!m&&u.a.createElement("span",{className:E},h),u.a.createElement(f.a,{title:__("确认删除该问答记录？"),okText:__("删除"),onConfirm:function(){r.deleteConversation(i),a(0)},onCancel:function(){return a(0)},onVisibleChange:function(e){a(e?i:0)}},u.a.createElement("span",null,u.a.createElement(b.default,{className:P,style:m?{display:"block"}:void 0}))))})))}))):t.sidebarRender.renderEmpty()},x=function(e){var t=e.context,r=e.children;return Object(i.cloneElement)(r,{onClick:function(){return t.renderDrawer({content:u.a.createElement(A,e),title:u.a.createElement(s.a,{variant:"title"},__("历史记录"))})}})},N={footer:"index-module_footer_0qNEF",functors:"index-module_functors_yg5fg",newTopic:"index-module_newTopic_3uhId"},T=function(e){var t=e.context,r=e.datasource,n=t.sidebarRender,o=Object(i.useRef)();return u.a.createElement("div",{className:N.footer},n.renderInput({ref:o,className:N.input,placeholder:__("来问我呀，雀雀很高兴为你服务！"),onEnter:function(e){r.commitPrompt(e,(function(){var e,t;null===(e=o.current)||void 0===e||e.clear(),null===(t=o.current)||void 0===t||t.focus()}))},extra:u.a.createElement("div",{className:N.functors},u.a.createElement("div",{className:N.newTopic,onClick:function(){return r.createConversation()}},u.a.createElement(c.b,{name:"comment-bubble",size:16}),__("新话题")),u.a.createElement(x,{context:t,datasource:r},u.a.createElement(s.a,{ml:16,type:"iconButton"},u.a.createElement(c.b,{name:"time-outlined",size:16}))))}))},D=(r(1300),r(1073)),L=(r(144),r(60)),R=r(449),I=r(1530),M=r(1734),F="ReadRefRender-module_container_QyZQu",B="ReadRefRender-module_header_NZqZ0",U="ReadRefRender-module_iframeContainer_yNj8i",H="ReadRefRender-module_iframe_NYZTp",V="ReadRefRender-module_skeletonContainer_gmMKj",G="ReadRefRender-module_newTabButton_GvL5g";function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function W(e){var t=e.datasource,r=Object(m.a)(),n=Object(i.useRef)(null),o=t.selectedReference,a=q(Object(i.useState)(!0),2),u=a[0],l=a[1],c=Object(R.a)().isDarkMode;return Object(i.useEffect)((function(){return t.addListener({onSelectedReferenceChange:r})}),[t]),Object(i.useEffect)((function(){var e,t=function(){l(!1)};return null===(e=n.current)||void 0===e||e.addEventListener("load",t),function(){var e;null===(e=n.current)||void 0===e||e.removeEventListener("load",t)}}),[o]),null!=o&&o.url?React.createElement("div",{className:p()(F)},React.createElement(s.a,{className:B},React.createElement(s.a,{variant:"headline4",type:"iconButton",onClick:function(){return t.setSelectedReference(null)}},React.createElement(I.default,null)),React.createElement(s.a,{variant:"headline4",ml:16,maxWidth:200,noWrap:!0,title:null==o?void 0:o.title},null==o?void 0:o.title),React.createElement(L.a,{title:__("新窗口打开"),placement:"bottom"},React.createElement("a",{href:o.url,target:"_blank",className:G},React.createElement(M.default,{name:"new-tab-outlined",width:16,height:16})))),React.createElement("div",{className:U},u&&React.createElement("div",{className:V},React.createElement(D.a,{active:!0}),React.createElement(D.a,{active:!0}),React.createElement(D.a,{active:!0})),React.createElement("iframe",{ref:n,className:H,style:{display:u?"none":"block"},src:null==o?void 0:o.url.replace(/#.*/g,(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0];return"?from=ai&view=doc_embed&theme=".concat(c?"dark":"default","&assistant=true").concat(n)}))}))):null}var K=r(456),Y=r(124),J=(r(44),r(10)),$=r(3786),X=r(697),Q=r(461);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Z(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ne(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ne(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){u=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw a}}}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var oe={",":"，",".":"。",";":"；",":":"："},ae=/[,.;:]/,ie=[" ","\n","\t"],ue=[].concat(ie,["-","_","(",")","?","!","+","*","/","[","]","{","]","=",".",",",":",";"]);function le(e){if(Number.isNaN(e))return!0;return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57||ue.includes(String.fromCharCode(e))}function ce(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.completion=function(e){if(!e)return e;for(var t="";e.length;){var r=e.match(ae),n=null==r?void 0:r.index;if(!n){t+=e;break}var o=e.charAt(n),a=e.charCodeAt(n-1),i=e.charCodeAt(n+1),u=le(a),l=le(i);t+=e.substring(0,n),e=e.substring(n+1),u&&l?(t+=o,!e.length||","!==o&&";"!==o||ie.includes(String.fromCharCode(i))||(t+=" ")):t+=oe[o]||o}return t}(e.completion);var o=e.completion,a=e.reference,i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),u=[];null==a||null===(r=a.chunks)||void 0===r||r.forEach((function(e){var t;null===(t=e.extras)||void 0===t||null===(t=t.externalRefs)||void 0===t||t.forEach((function(e){"image"===e.type&&e.url&&u.push(e.url)}))})),i.images=u,i.isValid=function(e){if(!e)return!1;for(var t=0,r=["无法回答该问题","知识库没有提供足够的相关信息","我只能回答知识库相关的问题"];t<r.length;t++){var n=r[t];if(e.indexOf(n)>=0)return!1}return!0}(o);try{var l,c,s=n?[]:function(e){if(e){var t=/(\d+\.) /g;if(e.match(t)){var r,n="",o=0,a=0,i=[],u=/^(\d+)\./,l=re(e.split(t));try{for(l.s();!(r=l.n()).done;){var c=r.value;if(c=c.trim()){var s=c.match(u);if(s&&s.length>=2){var f=parseInt(s[1],10);if(!f||f<=0)return;if(a>0&&f!==a+1)return;n&&i.push(n),++o,a=f,n="".concat(c," ")}else n+=c}}}catch(e){l.e(e)}finally{l.f()}return""!==n&&i.push(n),o>=2&&i.length>=2?i:void 0}}}(o);null!==(l=s)&&void 0!==l&&l.length||(s=function(e){if(e){var t=e.trimStart(),r=t.split("- ").filter((function(e){return e.length>0}));if(!(r.length<2)){var n=["。","，","；","：","】","、","！","？","…","……","』","」",".",",",";",":","]","!","?","~"],o=1,a=[],i=function(e){a.push("".concat(o,". ").concat(e)),++o};return r.forEach((function(e,o){if(a.length){var u=r[o-1].trim(),l=u.charAt(u.length-1);n.includes(l)||function(e){try{return!/[^\u4e00-\u9fa5]/.test(e)}catch(e){}return!1}(l)?i(e):a[a.length-1]+="- ".concat(e)}else t.startsWith("- ")?i(e):a.push(e)})),o>1?a:void 0}}}(o)),null!==(c=s)&&void 0!==c&&c.length&&(i.paragraphs=s)}catch(e){}return i.msgId||(i.msgId=Object($.a)({userId:null==t?void 0:t.id,type:i.type||X.b.AIAnswer,id:i.id})),i}function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e){return function(e){if(Array.isArray(e))return he(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ye(){ye=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==se(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(se(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function be(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function me(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){be(a,n,o,i,u,"next",e)}function u(e){be(a,n,o,i,u,"throw",e)}i(void 0)}))}}function ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pe(n.key),n)}}function ge(e,t,r){return t=we(t),function(e,t){if(t&&("object"==se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_e()?Reflect.construct(t,r||[],we(e).constructor):t.apply(e,r))}function _e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_e=function(){return!!e})()}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}function Oe(e,t){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oe(e,t)}function Ee(e,t,r){return(t=Pe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pe(e){var t=function(e,t){if("object"!=se(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==se(t)?t:t+""}function je(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Ce(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Ce(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Ce=function(e){this.s=e,this.n=e.next},Ce.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Ce(e)}var ke=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ee(e=ge(this,t,[].concat(n)),"_conversation",void 0),Ee(e,"_conversationList",[]),Ee(e,"_completions",[]),Ee(e,"_replying",!1),Ee(e,"req",void 0),Ee(e,"selectedReference",void 0),Ee(e,"setSelectedReference",(function(t){e.selectedReference=t,e.notifyListener((function(e){var t;return null===(t=e.onSelectedReferenceChange)||void 0===t?void 0:t.call(e)}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oe(e,t)}(t,e),r=t,n=[{key:"conversationId",get:function(){var e;return(null===(e=this._conversation)||void 0===e?void 0:e.id)||0}},{key:"conversationList",get:function(){return this._conversationList}},{key:"completions",get:function(){return this._completions}},{key:"user",get:function(){var e;return(null===(e=window.appData)||void 0===e?void 0:e.me)||{}}},{key:"userId",get:function(){var e;return(null===(e=this.user)||void 0===e?void 0:e.id)||0}},{key:"buildSystemMessage",value:function(){return{id:0,prompt:"",completion:"",type:X.b.System,timestamp:Date.now(),msgId:this.buildMsgId(X.b.System)}}},{key:"setReq",value:function(e){this.req=e}},{key:"isLatestCompletion",value:function(e){var t;if(null===(t=this._completions)||void 0===t||!t.length)return!1;if(e.prompt)return!1;var r=this._completions[this._completions.length-1];return(null==r?void 0:r.id)===e.id}},{key:"initConversation",value:(c=me(ye().mark((function e(){var t,r,n,o,a,i,u,l;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getConversationList();case 2:if(t=e.sent,r=[],n=t.conversations||[],this.updateConversationList(n),!n.length){e.next=15;break}return a=n[0],e.next=10,Y.webProxy.conversation.findOne({id:a.id});case 10:i=e.sent,this._conversation=a,r=(null==i||null===(o=i.conversation)||void 0===o?void 0:o.completions)||[],e.next=20;break;case 15:return e.next=17,this.reqCreateConversation();case 17:u=e.sent,l=u.conversation,this._conversation=l;case 20:r.unshift(this.buildSystemMessage()),this.updateCompletions(r);case 22:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"updateConversationList",value:function(e){this._conversationList=e||[],this.notifyListener((function(e){var t;return null===(t=e.onConversationsUpdated)||void 0===t?void 0:t.call(e)}))}},{key:"updateCompletions",value:function(e){var t=this;this._completions=e?e.map((function(e){return ce(e,t.user||{})})):[],this.notifyDatasetUpdatedInternal(!1)}},{key:"switchConversation",value:(l=me(ye().mark((function e(t){var r,n,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.conversationId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Y.webProxy.conversation.findOne({id:t});case 4:r=e.sent,n=null==r?void 0:r.conversation,this._conversation=n,(o=(null==n?void 0:n.completions)||[]).unshift(this.buildSystemMessage()),this.updateCompletions(o);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"createConversation",value:(u=me(ye().mark((function e(){var t,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reqCreateConversation();case 2:t=e.sent,r=t.conversation,this._conversation=r,this._completions=[this.buildSystemMessage()],this.updateConversationList([r].concat(pe(this._conversationList))),this.notifyDatasetUpdatedInternal();case 8:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"deleteConversation",value:(i=me(ye().mark((function e(t){var r,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.deleteConversation({id:t});case 2:if(null!=(r=e.sent)&&r.success){e.next=5;break}return e.abrupt("return",!1);case 5:return n=this._conversationList.filter((function(e){return e.id!==t})),this.updateConversationList(n),t===this.conversationId&&(n.length>0?this.switchConversation(n[0].id):this.createConversation()),this.notifyDatasetUpdatedInternal(),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"notifyDatasetUpdatedInternal",value:function(e){this.notifyDatasetUpdated({scrollImmediately:!e})}},{key:"pushCompletion",value:function(e){this._completions.push(e),this.notifyDatasetUpdatedInternal(!0)}},{key:"setReplying",value:function(e){e!==this._replying&&(this._replying=e)}},{key:"buildMsgId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X.b.SelfQuestion;return Object($.a)({type:e,userId:this.userId})}},{key:"commitPrompt",value:(a=me(ye().mark((function e(t,r){var n,o,a,i,u,l,c,s,f,d,p;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:if(!this._replying){e.next=5;break}return J.a.info(__("我正在回答上一个问题，请等一等")),e.abrupt("return");case 5:this.setReplying(!0),null==r||r(),n=Date.now(),o=this.conversationId,this._conversation&&!this._conversation.title&&(this._conversation.title=t),this.pushCompletion({id:0,msgId:this.buildMsgId(),conversation_id:o,type:X.b.SelfQuestion,prompt:t,feedback:K.FEEDBACK_TYPE.UNKNOWN,completion:"",created_at:new Date,updated_at:new Date,timestamp:n}),e.prev=11,a=this.req({conversation_id:o,prompt:t,stream:!0,type:X.b.AIAnswer}),i=a.request,u=!1,l=!1,e.prev=15,s=je(i);case 17:return e.next=19,s.next();case 19:if(!(u=!(f=e.sent).done)){e.next=25;break}(d=f.value).type!==X.b.AIAnswer?this.handleDataSync(d):this.handleStreamSync(d);case 22:u=!1,e.next=17;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(15),l=!0,c=e.t0;case 31:if(e.prev=31,e.prev=32,!u||null==s.return){e.next=36;break}return e.next=36,s.return();case 36:if(e.prev=36,!l){e.next=39;break}throw c;case 39:return e.finish(36);case 40:return e.finish(31);case 41:e.next=50;break;case 43:if(e.prev=43,e.t1=e.catch(11),p=__("抱歉刚刚走神了，请再问一次哦"),429===e.t1.status&&(p=__("提问过于频繁，请稍候再试")),e.t1.code!==Q.ErrorCode.InfosecError){e.next=49;break}return e.abrupt("return",this.handerOnInfosecScanFailed(e.t1.data));case 49:this.pushCompletion({conversation_id:o,id:0,prompt:"",feedback:K.FEEDBACK_TYPE.UNKNOWN,completion:p,created_at:new Date,updated_at:new Date,timestamp:n,msgId:this.buildMsgId(X.b.AIAnswer)});case 50:return e.prev=50,this.setReplying(!1),e.finish(50);case 53:case"end":return e.stop()}}),e,this,[[11,43,50,53],[15,27,31,41],[32,,36,40]])}))),function(e,t){return a.apply(this,arguments)})},{key:"buildCompletion",value:function(e,t,r){var n=r.status,o=r.message,a=new Date(t);return{id:t,conversation_id:this.conversationId,status:n,type:e,prompt:"",completion:o,created_at:a,updated_at:a,timestamp:t}}},{key:"getCompletionMap",value:function(){var e={};return this._completions.forEach((function(t){e["".concat(t.msgId,"_").concat(t.type)]=t})),e}},{key:"handleDataSync",value:function(e){var t=e.msgId,r=void 0===t?"":t,n=e.type,o=e.action,a=e.conversationId,i=e.timestamp,u=e.payload;if(a===this.conversationId){var l=this.getCompletionMap(),c="".concat(r,"_").concat(n);if(o===X.e.Delete)delete l[c];else{var s=this.buildCompletion(n,i,u),f=!0;if([X.e.Update,X.e.Insert].includes(o)){var d=l[c];d&&i<d.timestamp&&(console.warn("-- msg will not replace: ".concat(r,", old = ").concat(d.timestamp,", new = ").concat(e.timestamp)),f=!1)}f&&(s.msgId=r,s.timestamp=i,l[c]=s)}this._completions=Object.values(l),this.notifyDatasetUpdatedInternal(!0)}}},{key:"handleStreamSync",value:function(e){var t="".concat(e.msgId,"_").concat(e.type),r=this.getCompletionMap(),n=r[t],o=ce(de(de({},e.payload),{},{msgId:e.msgId,type:e.type}),this.user,!e.end);o.timestamp=e.timestamp,o.typewriter=!e.end,o.prompt&&(o.prompt=""),n?n.completion=o.completion:r[t]=o,e.end&&(r[t]=o),this._completions=Object.values(r),this.notifyDatasetUpdatedInternal()}},{key:"handerOnInfosecScanFailed",value:function(e){var t="".concat(e.msgId,"_").concat(e.type),r=this.getCompletionMap(),n=r[t];n&&delete r[t],n||((n=ce(de(de({},e.payload),{},{msgId:e.msgId,type:e.type}),this.user)).prompt=""),this._completions=Object.values(r),this.notifyDatasetUpdatedInternal(),n.completion=X.d.infosecScanFailed,n.typewriter=!1,r[t]=n,this._completions=Object.values(r),this.notifyDatasetUpdatedInternal()}}],n&&ve(r.prototype,n),o&&ve(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,a,i,u,l,c}(l.b);function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ae(){Ae=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==Se(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Se(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function xe(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Ne(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){xe(a,n,o,i,u,"next",e)}function u(e){xe(a,n,o,i,u,"throw",e)}i(void 0)}))}}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fe(n.key),n)}}function De(e,t,r){return t=Re(t),function(e,t){if(t&&("object"==Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Le()?Reflect.construct(t,r||[],Re(e).constructor):t.apply(e,r))}function Le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Le=function(){return!!e})()}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}function Ie(e,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ie(e,t)}function Me(e,t,r){return(t=Fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(e){var t=function(e,t){if("object"!=Se(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Se(t)?t:t+""}var Be=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Me(e=De(this,t,[].concat(n)),"_assistant",void 0),Me(e,"type",__("领域专家")),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}(t,e),r=t,n=[{key:"name",get:function(){var e;return null===(e=this._assistant)||void 0===e?void 0:e.title}},{key:"currentAssistant",get:function(){return this._assistant}},{key:"reqCreateConversation",value:(u=Ne(Ae().mark((function e(){return Ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.create({type:K.CONVERSATION_TYPE.GROUP_ASSISTANT,assistant_id:this._assistant.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getConversationList",value:(i=Ne(Ae().mark((function e(){return Ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.list({type:K.CONVERSATION_TYPE.GROUP_ASSISTANT,assistant_id:this._assistant.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"switchAssistant",value:(a=Ne(Ae().mark((function e(t){var r;return Ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&(null===(r=this._assistant)||void 0===r?void 0:r.id)!==(null==t?void 0:t.id)){e.next=2;break}return e.abrupt("return");case 2:this._assistant=t,this.initConversation();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})}],n&&Te(r.prototype,n),o&&Te(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,a,i,u}(ke),Ue=(r(711),r(356)),He=(r(497),r(95)),Ve=r(3860),Ge=r(3732),qe=r(52),ze="index-module_hoverShowOperation_8Q6U1",We="index-module_images_TDzet",Ke="index-module_image_rLyh0",Ye="index-module_textWrapper_wNpBV";function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function $e(){$e=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==Je(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Je(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function Xe(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Qe(e){if(null!=e&&e.length){var t=[];return e.forEach((function(e){var r,n=function(e){var t=e.showTitle,r=e.chunkTitle,n=e.title,o=e.content;return t?r?"《".concat(t,"》- ").concat(r):"《".concat(t,"》"):n||o}(e),o=e.type===X.c.Note?"".concat(window.location.origin,"/r/note"):window.location.origin,a=null!==(r=e.url)&&void 0!==r&&r.startsWith("/")?"".concat(o).concat(e.url):e.url||"";t.find((function(e){return e.title===n&&e.url===a}))||t.push({title:n,url:a,type:"Doc"})})),t}}function Ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(null!=e&&e.length){var r=[];return e.forEach((function(e){var n=e.bookName||"",o=e.bookSlug||"",a=r.find((function(e){return e.name===n&&e.slug===o}));n&&o&&!a&&r.push({name:n,slug:o,prompt:t,type:"Book"})})),r}}var et=function(e){var t,r,n=e.conversationId,o=e.pair,a=e.context,u=e.datasource,l=e.assistantSubjectUrl,c=a.sidebarRender,s=o.paragraphs||[o.completion||""],f=Object(m.a)(),d=Object(i.useMemo)((function(){var e,t;return{refs:Qe(null==o||null===(e=o.reference)||void 0===e?void 0:e.chunks),refBooks:Ze(null===(t=o.reference)||void 0===t?void 0:t.chunks,o.prompt||o.encrypt_prompt)}}),[null==o||null===(t=o.reference)||void 0===t?void 0:t.chunks]),p=Object(i.useRef)(null),h=Object(i.useRef)(null),y=function(){var e=o.images;return null!=e&&e.length?React.createElement("div",{className:We,ref:h},e.map((function(t,r){return React.createElement("div",{className:Ke,key:r,style:{backgroundImage:"url(".concat(t,")")},onClick:function(){var t=e.map((function(e){return{src:e,msrc:e}}));Object(Ge.getImageBrowser)().open(t,r)}})}))):null},b=function(){var e,t=(e=$e().mark((function e(t,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.feedback===t&&(t=K.FEEDBACK_TYPE.UNKNOWN),e.next=3,qe.a.conversation.feedback({conversation_id:n,completion_id:o.id,feedback:t});case 3:e.sent.success&&(o.feedback=t,f()),null==r||r();case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Xe(a,n,o,i,u,"next",e)}function u(e){Xe(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),v=React.createElement(React.Fragment,null,React.createElement("div",{className:Ye,ref:p},c.renderText({text:s,typewriter:!!o.typewriter})),o.isValid&&(null==y?void 0:y()),o.isValid&&c.renderReferences({reference:{title:__("信息来源："),refs:d.refs},onSelected:u.setSelectedReference}),o.isValid&&c.renderReferences({reference:{title:__("答案不准确？去知识库内搜索："),refs:d.refBooks},onSelected:u.setSelectedReference})),g=u.isLatestCompletion(o);return o.id&&o.status===X.a.SUCCESS&&(r=c.renderOperation({scrollToBottom:g?a.scrollToBottom:void 0,operation:{feedback:o.feedback,feedbackCallback:b,copy:function(){return o.completion||""},createNote:function(){return function(e){var t,r,n=(null===(t=p.current)||void 0===t?void 0:t.outerHTML)||"",a=(null===(r=h.current)||void 0===r?void 0:r.outerHTML)||"",i="".concat(n).concat(a).concat(function(e){if(null==e||!e.length)return"";try{return["<p>".concat(__("信息来源："),"</p>"),"<ul>"].concat(e.map((function(e){return'<li><a href="'.concat(e.url,'">').concat(e.title,"</a></li>")}))).concat(["</ul>","<p></p>"]).join("")}catch(e){}return""}(d.refs));e.setDocument(""),e.execCommand("insertCard","yuque",{src:l,mode:"card"}),(o.prompt||(null==o?void 0:o.encrypt_prompt))&&(e.execCommand("breakLine"),e.execCommand("paste",{types:["text/lake"],getData:function(){return"问题：".concat(o.prompt||(null==o?void 0:o.encrypt_prompt))}})),e.execCommand("breakLine"),e.execCommand("paste",{types:["text/lake"],getData:function(){return i}}),e.execCommand("breakLine")}}}})),c.renderFrame({className:g?void 0:ze,style:{marginBottom:r?0:24},children:v,bottomExtra:r})};var tt=r(3774),rt=r(3861),nt="index-module_pair_DUICx",ot="index-module_addFAQ_a1hU8",at=function(e){var t=e.context,r=e.datasource,n=e.faqHook,o=e.assistantSubjectUrl,a=t.sidebarRender,u=r.conversationId,l=r.completions,s=Object(m.a)();!function(e){var t=Object(rt.b)({type:tt.a.GROUP_ASSISTANT.CONVERSATION,source:"conversation-panel",reqFn:qe.a.ai.aiAssistantCompletion,enableReject:!0});Object(i.useEffect)((function(){e.setReq(t)}),[e])}(r),Object(i.useEffect)((function(){return Ve.a.addListener({onActivateAssistantChanged:s})}),[]);return u?React.createElement(React.Fragment,null,l.map((function(i){var l=i.prompt&&a.renderText({text:i.prompt});return React.createElement("div",{className:nt,key:i.msgId?"".concat(i.msgId,"_").concat(i.type):i.id},i.prompt&&a.renderFrame({fromUser:!0,children:null!=n&&n.ability?React.createElement(Ue.a,{overlayClassName:ot,trigger:"click",content:React.createElement(He.a,null,React.createElement(L.a,{title:__("添加到常用问题")},React.createElement(c.b,{size:16,name:"PinOutlined",onClick:function(){return null==n?void 0:n.addFAQ(i.prompt)}})))},l):l}),function(n){var i=n.type,l=n.completion;return i===X.b.System?a.renderFrame({fromUser:!1,children:null!=e&&e.renderSystemCompletion?e.renderSystemCompletion():null}):i===X.b.Generating||i===X.b.Searching?l?a.renderProgress({progresses:[{status:n.status,text:l}]}):null:i===X.b.SelfQuestion?null:React.createElement(et,{conversationId:u,pair:n,context:t,datasource:r,assistantSubjectUrl:o})}(i))}))):a.renderLoading()},it=r(560),ut=r(4294);function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function ct(e){return function(e){if(Array.isArray(e))return vt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(){st=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==lt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(lt(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=lt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ht(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function yt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ht(a,n,o,i,u,"next",e)}function u(e){ht(a,n,o,i,u,"throw",e)}i(void 0)}))}}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||mt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){if(e){if("string"==typeof e)return vt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vt(e,t):void 0}}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var gt=r(1514),_t="index-module_faqList_KRCmF",wt="index-module_linkBtn_E6y2F",Ot="index-module_text_njtBQ",Et="index-module_icon_0cltR",Pt=function(e){var t=e.commitPrompt,r=e.hook,n=r.data,o=r.removeFAQ,a=r.ability;return null!=n&&n.length?React.createElement("div",{className:_t},n.map((function(e,r){return React.createElement("div",{className:wt,key:r},React.createElement(gt.a,{className:Ot,variant:"link",onClick:function(){return t(e.prompt)}},e.prompt),a&&o&&React.createElement(L.a,{title:__("移除该问题")},React.createElement(gt.a,{className:Et,component:c.b,componentProps:{name:"nopin-outlined",size:16},onClick:function(){return o(e.id)}})))}))):null};function jt(e){var t,r=e.datasource,n=e.context,o=function(e,t){var r,n=Object(ut.b)(),o={};"group"===t?o.groupId=null==e?void 0:e.id:"assistant"===t&&(o.assistantId=null==e?void 0:e.id);var a=bt(Object(i.useState)([]),2),u=a[0],l=a[1],c=Object(it.a)(qe.a.groupAssistant.listFAQ),s=Object(it.a)(qe.a.groupAssistant.listAssistantFAQ),f=Object(it.a)(qe.a.groupAssistant.addFAQ),d=Object(it.a)(qe.a.groupAssistant.removeFAQ),p=function(){var e=yt(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.request(dt(dt({},o),{},{promptId:t}));case 3:e.sent.success&&(l(u.filter((function(e){return e.id!==t}))),J.a.success(__("已成功移除问题"))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),J.a.error(__("移除失败"));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=yt(st().mark((function e(t){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.request(dt(dt({},o),{},{prompt:t}));case 3:(r=e.sent)&&(l([].concat(ct(u),[r])),J.a.success(__("已添加"))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),J.a.error(__("添加失败"));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var r=yt(st().mark((function r(){var n;return st().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!=e&&e.id){r.next=3;break}return l([]),r.abrupt("return");case 3:if("group"!==t){r.next=9;break}return r.next=6,c.request({id:null==e?void 0:e.id});case 6:n=r.sent,r.next=13;break;case 9:if("assistant"!==t){r.next=13;break}return r.next=12,s.request({assistantId:null==e?void 0:e.id});case 12:n=r.sent;case 13:l(n||[]);case 14:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return Object(i.useEffect)((function(){y()}),[null==e?void 0:e.id]),{loading:"assistant"===t?s.loading:c.loading,data:u,removeFAQ:p,addFAQ:h,listFAQ:y,ability:"assistant"!==t&&((null==n?void 0:n.is_admin)||(null==e||null===(r=e.abilities)||void 0===r?void 0:r.manage))}}(r.currentAssistant,"assistant"),a=n.sidebarRender;return u.a.createElement(at,{datasource:r,context:n,faqHook:o,renderSystemCompletion:function(){return u.a.createElement(u.a.Fragment,null,a.renderText({text:[u.a.createElement(s.a,{variant:"headline4",mb:12},__("👋🏻 你好，我是「{name}」问答助手",{name:r.name})),__("我可以就{name}领域的内容帮你做索引、概括、问答。{faq}",{name:null==r?void 0:r.name,faq:o.data.length?__("或许你想问："):""})]}),u.a.createElement(Pt,{hook:o,commitPrompt:function(e){return r.commitPrompt(e)}}))},assistantSubjectUrl:"".concat(window.location.origin,"/").concat(null===(t=r.currentAssistant)||void 0===t?void 0:t.login)})}function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,St(n.key),n)}}function St(e){var t=function(e,t){if("object"!=Ct(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ct(t)?t:t+""}function At(e,t,r){return t=Nt(t),function(e,t){if(t&&("object"==Ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,xt()?Reflect.construct(t,r||[],Nt(e).constructor):t.apply(e,r))}function xt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(xt=function(){return!!e})()}function Nt(e){return Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nt(e)}function Tt(e,t){return Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tt(e,t)}var Dt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),At(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tt(e,t)}(t,e),r=t,(n=[{key:"isEnable",value:function(e){return!(!e.target&&!e.assistant)}},{key:"createDatasource",value:function(){return new Be}},{key:"initialize",value:function(e){var t=e.target||e.assistant;this.datasource.switchAssistant(t)}},{key:"destroy",value:function(){}},{key:"onContextDataChanged",value:function(e){var t=e.target||e.assistant;this.datasource.switchAssistant(t)}},{key:"renderContent",value:function(e){return u.a.createElement(jt,{context:e,datasource:this.datasource})}},{key:"renderFooter",value:function(e){return u.a.createElement(T,{context:e,datasource:this.datasource})}},{key:"renderExtra",value:function(){return u.a.createElement(W,{datasource:this.datasource})}},{key:"renderDisable",value:function(e){return e.sidebarRender.renderDisable({title:__("暂无可用的 AI 功能")})}}])&&kt(r.prototype,n),o&&kt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(l.c);function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function Rt(){Rt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==Lt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Lt(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function It(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Mt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){It(a,n,o,i,u,"next",e)}function u(e){It(a,n,o,i,u,"throw",e)}i(void 0)}))}}function Ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bt(n.key),n)}}function Bt(e){var t=function(e,t){if("object"!=Lt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lt(t)?t:t+""}function Ut(e,t,r){return t=Vt(t),function(e,t){if(t&&("object"==Lt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ht()?Reflect.construct(t,r||[],Vt(e).constructor):t.apply(e,r))}function Ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ht=function(){return!!e})()}function Vt(e){return Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vt(e)}function Gt(e,t){return Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gt(e,t)}var qt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ut(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gt(e,t)}(t,e),r=t,n=[{key:"reqCreateConversation",value:(i=Mt(Rt().mark((function e(){return Rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.create({type:K.CONVERSATION_TYPE.USER_ASSISTANT,group_id:this.user.id,scope:{user_id:this.user.id}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getConversationList",value:(a=Mt(Rt().mark((function e(){return Rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.list({type:K.CONVERSATION_TYPE.USER_ASSISTANT,group_id:this.user.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})}],n&&Ft(r.prototype,n),o&&Ft(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,a,i}(ke);function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kt(n.key),n)}}function Kt(e){var t=function(e,t){if("object"!=zt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zt(t)?t:t+""}function Yt(e,t,r){return t=$t(t),function(e,t){if(t&&("object"==zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Jt()?Reflect.construct(t,r||[],$t(e).constructor):t.apply(e,r))}function Jt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Jt=function(){return!!e})()}function $t(e){return $t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$t(e)}function Xt(e,t){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xt(e,t)}var Qt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yt(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xt(e,t)}(t,e),r=t,n=[{key:"createDatasource",value:function(){return new qt}},{key:"isEnable",value:function(){var e;return!(null===(e=window.appData.settings)||void 0===e||!e.user_assistant_enabled)}},{key:"initialize",value:function(){this.datasource.initConversation()}},{key:"destroy",value:function(){}},{key:"renderContent",value:function(e){return u.a.createElement(at,{context:e,datasource:this.datasource,renderSystemCompletion:function(){return e.sidebarRender.renderText({text:[u.a.createElement(s.a,{variant:"headline4",mb:12},__("👋🏻 你好，我是个人知识管理助手")),__("你可以向我提问，我会根据你所有的个人知识库和小记做出解答，从而帮助你更好的消化和利用你积累的知识。")]})}})}},{key:"renderFooter",value:function(e){return u.a.createElement(T,{context:e,datasource:this.datasource})}},{key:"renderExtra",value:function(){return u.a.createElement(W,{datasource:this.datasource})}},{key:"renderDisable",value:function(e){return e.sidebarRender.renderDisable({title:__("暂无可用的 AI 功能")})}}],n&&Wt(r.prototype,n),o&&Wt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(l.c),Zt=function(e){return e.translate="translate",e.explain="explain",e.summary="summary",e}({});function er(e){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},er(e)}function tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||nr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(e){return function(e){if(Array.isArray(e))return or(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(e,t){if(e){if("string"==typeof e)return or(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?or(e,t):void 0}}function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ar(){ar=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==er(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(er(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function ir(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function ur(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ir(a,n,o,i,u,"next",e)}function u(e){ir(a,n,o,i,u,"throw",e)}i(void 0)}))}}function lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hr(n.key),n)}}function cr(e,t,r){return t=fr(t),function(e,t){if(t&&("object"==er(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sr()?Reflect.construct(t,r||[],fr(e).constructor):t.apply(e,r))}function sr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(sr=function(){return!!e})()}function fr(e){return fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fr(e)}function dr(e,t){return dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dr(e,t)}function pr(e,t,r){return(t=hr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hr(e){var t=function(e,t){if("object"!=er(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==er(t)?t:t+""}function yr(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new br(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function br(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return br=function(e){this.s=e,this.n=e.next},br.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new br(e)}var mr=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return pr(e=cr(this,t,[].concat(n)),"_msgList",[]),pr(e,"_conversation",void 0),pr(e,"_conversationList",[]),pr(e,"_isInRequesting",!1),pr(e,"_lastMsgId",void 0),pr(e,"_doc",void 0),pr(e,"_engine",void 0),pr(e,"_linkDetail",void 0),pr(e,"_showTip",!1),pr(e,"streamReq",void 0),pr(e,"explainDoc",function(){var t=ur(ar().mark((function t(r,n){var o,a,i,u,l,c,s;return ar().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._isInRequesting){t.next=3;break}return J.a.info(__("我正在回答上一个问题，请等一等")),t.abrupt("return");case 3:i=window.__engine,u=r||(null==i?void 0:i.getDocument("text/plain")),l=null!==(o=e._doc)&&void 0!==o&&o.title?"速读本文：《".concat(null===(a=e._doc)||void 0===a?void 0:a.title,"》"):"速读本文",c=n?"速读文章：《".concat(n,"》"):"概括内容",s=r?c:l,e._isInRequesting=!0,e.pushMsg({msgId:e.buildMsgId(),type:X.b.SelfQuestion,content:s,completion_id:0}),u||e.pushMsg({msgId:e.buildMsgId(),type:X.b.SelfQuestion,content:"文档内未提取出内容，请换一篇文档重试",completion_id:0}),e.callStream({contextId:e.conversationId,content:"".concat(u.replace(/\n+/g,"\n")).slice(0,Q.AIReadingMaxContent),stream:!0,type:Q.AIReadingType.explainDoc,question:s});case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dr(e,t)}(t,e),r=t,n=[{key:"showTip",get:function(){return this._showTip}},{key:"doc",get:function(){return this._doc}},{key:"engine",get:function(){return this._engine}},{key:"isInRequesting",get:function(){return this._isInRequesting}},{key:"msgList",get:function(){return this._msgList||[]}},{key:"conversationId",get:function(){var e;return(null===(e=this._conversation)||void 0===e?void 0:e.id)||0}},{key:"conversationList",get:function(){return this._conversationList}},{key:"linkDetail",get:function(){return this._linkDetail||""}},{key:"user",get:function(){var e;return(null===(e=window.appData)||void 0===e?void 0:e.me)||{}}},{key:"userId",get:function(){var e;return(null===(e=this.user)||void 0===e?void 0:e.id)||0}},{key:"buildMsgId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X.b.SelfQuestion;return Object($.a)({type:e,userId:this.userId})}},{key:"setReq",value:function(e){this.streamReq=e}},{key:"notifyDatasetUpdatedInternal",value:function(e){this.notifyDatasetUpdated({scrollImmediately:!e})}},{key:"pushMsg",value:function(e){this._msgList.push(e),this._lastMsgId=e.msgId,this.notifyDatasetUpdatedInternal(!0)}},{key:"updateConversationList",value:function(e){this._conversationList=e||[],this.notifyListener((function(e){var t;return null===(t=e.onConversationsUpdated)||void 0===t?void 0:t.call(e)}))}},{key:"isYuqueLink",value:function(e){try{var t=new URL(e),r=t.pathname,n=t.hostname;if(window.appData.isYuque&&!/^.*?\.yuque\.com$/i.test(e)&&!["lark.alipay.net"].includes(n))return!1;if(!window.appData.isYuque&&!["lark.alibaba.net","yuque.alibaba-inc.com","aliyuque.antfin.com","yuque-ali-pre.antfin-inc.com","yuque.antfin-inc.com","yuque.antfin.com","yuque.antfin-inc.com","yuque-pre.antfin-inc.com","lark.alipay.net"].includes(n))return!1;var o=r.split("/");return!o[0]&&4===o.length}catch(e){return!1}}},{key:"setLinkDetail",value:function(e){this._linkDetail=e,this.notifyDatasetUpdatedInternal(!0)}},{key:"initConversion",value:(h=ur(ar().mark((function e(){var t,r,n,o,a,i,u,l,c=this;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.list({group_id:0,type:K.CONVERSATION_TYPE.READ_ASSISTANT});case 2:if(t=e.sent,r=rr(this._msgList),this._msgList=[],n=t.conversations||[],this.updateConversationList(n),!n.length){e.next=23;break}return a=n[0],e.next=11,Y.webProxy.conversation.findOne({id:a.id});case 11:if(null!=(i=e.sent)&&null!==(o=i.conversation)&&void 0!==o&&null!==(o=o.completions)&&void 0!==o&&o.length){e.next=17;break}this._conversation=a,1===n.length&&(this._showTip=!0),e.next=21;break;case 17:return e.next=19,Y.webProxy.conversation.create({group_id:0,type:K.CONVERSATION_TYPE.READ_ASSISTANT});case 19:u=e.sent,this._conversation=null==u?void 0:u.conversation;case 21:e.next=28;break;case 23:return e.next=25,Y.webProxy.conversation.create({group_id:0,type:K.CONVERSATION_TYPE.READ_ASSISTANT});case 25:l=e.sent,this._showTip=!0,this._conversation=null==l?void 0:l.conversation;case 28:r.length&&r.forEach((function(e){c._msgList.push(e)})),this.notifyDatasetUpdatedInternal(!0);case 30:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"callStream",value:(p=ur(ar().mark((function e(t){var r,n,o,a,i,u,l,c,s,f;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.streamReq(t),n=r.request,o=r.abort,this.pushMsg({msgId:this.buildMsgId(),type:X.b.AIAnswer,content:"",completion_id:n.completion_id,stream:!0}),a=!1,i=!1,e.prev=4,l=yr(n);case 6:return e.next=8,l.next();case 8:if(!(a=!(c=e.sent).done)){e.next=24;break}if(s=c.value,f=this._msgList[this._msgList.length-1],s.error_code!==Q.ErrorCode.InfosecError){e.next=18;break}return o(),f.content=X.d.infosecScanFailed,f.typewriter=!1,this._isInRequesting=!1,this.notifyDatasetUpdatedInternal(!0),e.abrupt("return");case 18:s.end?f.completion_id=s.completion_id:f.content+=s.result,f.typewriter=!s.end,this.notifyDatasetUpdatedInternal(!0);case 21:a=!1,e.next=6;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(4),i=!0,u=e.t0;case 30:if(e.prev=30,e.prev=31,!a||null==l.return){e.next=35;break}return e.next=35,l.return();case 35:if(e.prev=35,!i){e.next=38;break}throw u;case 38:return e.finish(35);case 39:return e.finish(30);case 40:this._isInRequesting=!1,this.notifyDatasetUpdatedInternal(!0);case 42:case"end":return e.stop()}}),e,this,[[4,26,30,40],[31,,35,39]])}))),function(e){return p.apply(this,arguments)})},{key:"askDoc",value:(d=ur(ar().mark((function e(t){var r,n;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInRequesting){e.next=3;break}return J.a.info(__("我正在回答上一个问题，请等一等")),e.abrupt("return");case 3:if(this._linkDetail||!this.isYuqueLink(t)){e.next=6;break}return this.addLinkCard(t),e.abrupt("return");case 6:r=window.__engine,this._linkDetail?(n=this._linkDetail,this.setLinkDetail("")):n=null==r?void 0:r.getDocument("text/plain"),this._isInRequesting=!0,this.pushMsg({msgId:this.buildMsgId(),type:X.b.SelfQuestion,content:t,completion_id:0}),n||this.pushMsg({msgId:this.buildMsgId(),type:X.b.SelfQuestion,content:"文档内未提取出内容，请换一篇文档重试",completion_id:0}),this.callStream({contextId:this.conversationId,content:"".concat(n.replace(/\n+/g,"\n")).slice(0,Q.AIReadingMaxContent),stream:!0,type:Q.AIReadingType.askDoc,question:t});case 12:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"switchConversation",value:(f=ur(ar().mark((function e(t){var r,n,o,a=this;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.conversationId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Y.webProxy.conversation.findOne({id:t});case 4:n=e.sent,o=null==n?void 0:n.conversation,this._conversation=o,this._msgList=[],null==n||null===(r=n.conversation)||void 0===r||null===(r=r.completions)||void 0===r||r.forEach((function(e){a._msgList.push({msgId:a.buildMsgId(),type:X.b.SelfQuestion,content:e.prompt,completion_id:e.id}),a._msgList.push({msgId:a.buildMsgId(),type:X.b.AIAnswer,content:e.completion,completion_id:e.id})})),this.notifyDatasetUpdatedInternal();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"deleteConversation",value:(s=ur(ar().mark((function e(t){var r,n;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.deleteConversation({id:t});case 2:if(null!=(r=e.sent)&&r.success){e.next=5;break}return e.abrupt("return",!1);case 5:return n=this._conversationList.filter((function(e){return e.id!==t})),this.updateConversationList(n),t===this.conversationId&&(n.length>0?this.switchConversation(n[0].id):this.createConversation()),this.notifyDatasetUpdatedInternal(),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"createConversation",value:(c=ur(ar().mark((function e(){var t,r;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.create({group_id:0,type:K.CONVERSATION_TYPE.READ_ASSISTANT});case 2:t=e.sent,r=t.conversation,this._showTip=!1,this._conversation=r,this._msgList=[],this.notifyDatasetUpdatedInternal();case 8:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"isLatestCompletion",value:function(e){var t;return!(this._isInRequesting||null===(t=this._msgList)||void 0===t||!t.length)&&e.type!==X.b.SelfQuestion&&this._lastMsgId===e.msgId}},{key:"initDoc",value:function(e,t){this._doc=e,this._engine=t}},{key:"readLink",value:function(e){this._isInRequesting?J.a.info(__("我正在回答上一个问题，请等一等")):this.isYuqueLink(e)?this.addLinkCard(e):(this.pushMsg({msgId:this.buildMsgId(),type:X.b.SelfQuestion,content:e,completion_id:0}),this.pushMsg({msgId:this.buildMsgId(),type:X.b.AIAnswer,content:"这个链接暂时还不能阅读哦，换个文档链接试试吧～",completion_id:0}))}},{key:"sendData",value:function(e){if(this._isInRequesting)J.a.info(__("我正在回答上一个问题，请等一等"));else{var t=this._msgList[this.msgList.length-1];(null==t?void 0:t.type)===X.b.Operate?t.content=e:this._msgList.push({msgId:this.buildMsgId(),type:X.b.Operate,content:e,completion_id:0}),this.notifyDatasetUpdatedInternal(!0)}}},{key:"contentOperate",value:(l=ur(ar().mark((function e(t,r){var n,o;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=pr(pr(pr({},Zt.explain,{type:Q.AIReadingType.explainContent,question:"解释选区"}),Zt.translate,{type:Q.AIReadingType.translate,question:"翻译选区"}),Zt.summary,{type:Q.AIReadingType.summary,question:"总结选区"}),o=n[r],this._isInRequesting=!0,this.pushMsg({msgId:this.buildMsgId(),type:X.b.SelfQuestion,content:o.question,completion_id:0}),this.callStream({contextId:this.conversationId,content:"".concat(t.replace(/\n+/g,"\n")).slice(0,Q.AIReadingMaxContent),stream:!0,type:o.type,question:o.question});case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"getQuestion",value:(u=ur(ar().mark((function e(){var t,r,n,o,a,i=this;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInRequesting){e.next=3;break}return J.a.info(__("我正在回答上一个问题，请等一等")),e.abrupt("return");case 3:return t=window.__engine,r=null==t?void 0:t.getDocument("text/plain"),this._isInRequesting=!0,this.pushMsg({msgId:this.buildMsgId(),type:X.b.SelfQuestion,content:"提出问题",completion_id:0}),r||this.pushMsg({msgId:this.buildMsgId(),type:X.b.SelfQuestion,content:"文档内未提取出内容，请换一篇文档重试",completion_id:0}),e.next=10,Y.webProxy.ai.readAssistantCompletion({content:"".concat(r.replace(/\n+/g,"\n")).slice(0,Q.AIReadingMaxContent),type:Q.AIReadingType.makeQuestion});case 10:n=e.sent,this._isInRequesting=!1,(o=n.result)||this.pushMsg({msgId:this.buildMsgId(),type:X.b.SelfQuestion,content:"文档内未提取出内容，请换一篇文档重试",completion_id:0}),(a=o.split("\n").map((function(e){return e.replace(/(1|2|3)\./,"").trim()}))).length||this.pushMsg({msgId:this.buildMsgId(),type:X.b.SelfQuestion,content:"文档内未提取出内容，请换一篇文档重试",completion_id:0}),a.forEach((function(e,t){i._msgList.push({msgId:i.buildMsgId(),type:X.b.AIQuestion,content:e,completion_id:0,index:t})})),this.notifyDatasetUpdatedInternal(!0);case 18:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"addLinkCard",value:(i=ur(ar().mark((function e(t){var r,n,o,a,i,u,l,c,s,f,d;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=new URL(t),a=o.pathname,i=a.split("/"),u=tr(i,4),l=u[1],c=u[2],s=u[3],e.next=6,Y.webProxy.docs.getDocTextBySlug({group_slug:l,book_slug:c,slug:s},{ignoreGlobalMessage:!0});case 6:f=e.sent,r=f.content,n=f.title,e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(0),this.pushMsg({msgId:this.buildMsgId(),type:X.b.SelfQuestion,content:t,completion_id:0}),this.pushMsg({msgId:this.buildMsgId(),type:X.b.AIAnswer,content:"这个链接暂时还不能阅读哦，换个文档链接试试吧～",completion_id:0}),e.abrupt("return");case 16:(null==(d=this._msgList[this.msgList.length-1])?void 0:d.type)===X.b.LinkOperate?(d.content=t,d.docText=r,d.docTitle=n):this._msgList.push({msgId:this.buildMsgId(),type:X.b.LinkOperate,docText:r,docTitle:n,content:t,completion_id:0}),this.notifyDatasetUpdatedInternal(!0);case 19:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e){return i.apply(this,arguments)})},{key:"readGardenLink",value:(a=ur(ar().mark((function e(t){var r,n,o;return ar().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInRequesting){e.next=3;break}return J.a.info(__("我正在回答上一个问题，请等一等")),e.abrupt("return");case 3:return this._isInRequesting=!0,e.prev=4,e.next=7,Y.webProxy.docs.getDocTextBySlug({group_slug:"go",book_slug:"doc",slug:t},{ignoreGlobalMessage:!0});case 7:o=e.sent,r=o.content,n=o.title,e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(4),this._isInRequesting=!1,this.pushMsg({msgId:this.buildMsgId(),type:X.b.AIAnswer,content:"这个链接暂时还不能阅读哦，换个文档链接试试吧～",completion_id:0}),e.abrupt("return");case 17:if(this._conversation){e.next=20;break}return e.next=20,this.initConversion();case 20:this._msgList=[],this.notifyDatasetUpdatedInternal(!0),this._isInRequesting=!1,this.explainDoc(r,n),this.notifyDatasetUpdatedInternal(!0);case 25:case"end":return e.stop()}}),e,this,[[4,12]])}))),function(e){return a.apply(this,arguments)})}],n&&lr(r.prototype,n),o&&lr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,a,i,u,l,c,s,f,d,p,h}(l.b),vr=(r(37),r(8)),gr="index-module_content_4ue1d",_r="index-module_group_Px9BA",wr="index-module_item_cL7YZ",Or="index-module_selected_a6f7E",Er="index-module_title_+vfE0",Pr="index-module_date_oAU7D",jr="index-module_delete_vfPSs";function Cr(e){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr(e)}function kr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Cr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Cr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ar(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ar(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var xr=function(e){var t=e.context,r=e.datasource,n=Sr(Object(i.useState)(0),2),o=n[0],a=n[1],l=Object(m.a)(),c=r.conversationList,s=Object(i.useMemo)((function(){var e=[],t=[],r=[],n=y()(),o=y()().subtract(1,"day");return c.forEach((function(a){var i=y()(a.created_at);i.isSame(n,"day")?e.push(a):i.isSame(o,"day")?t.push(a):r.push(a)})),[{label:__("今天"),list:e},{label:__("昨天"),list:t},{label:__("之前"),list:r,fullDate:!0}]}),[c,c.length]);return Object(i.useEffect)((function(){return r.addListener({onConversationsUpdated:l,onDatasetUpdated:l})}),[]),c.length?u.a.createElement("div",{className:gr},s.filter((function(e){return e.list.length})).map((function(t){return u.a.createElement("div",null,u.a.createElement("span",{className:_r},t.label),t.list.map((function(n){var i=n.id,l=n.title,c=n.created_at,s=i===r.conversationId,d=l||__("未命名会话");s&&(d="".concat(__("[当前会话]")," ").concat(d));var h=y()(c).format(t.fullDate?"YY/MM/DD":"HH:mm"),m=o===i;return u.a.createElement("div",{className:p()(wr,kr({},Or,s)),onClick:function(t){var n=null==t?void 0:t.target;null!=n&&n.closest(".".concat(jr))||!(null!=n&&n.closest(".".concat(Er))||n.className===Er)||(r.switchConversation(i),e.context.closeDrawer())}},u.a.createElement("span",{className:Er},d),!m&&u.a.createElement("span",{className:Pr},h),u.a.createElement(f.a,{title:__("确认删除该问答记录？"),okText:__("删除"),onConfirm:function(){r.deleteConversation(i),a(0)},onCancel:function(){return a(0)},onVisibleChange:function(e){a(e?i:0)}},u.a.createElement("span",null,u.a.createElement(b.default,{className:jr,style:m?{display:"block"}:void 0}))))})))}))):t.sidebarRender.renderEmpty()},Nr=function(e){var t=e.context,r=e.children;return Object(i.cloneElement)(r,{onClick:function(){return t.renderDrawer({content:u.a.createElement(xr,e),title:u.a.createElement(s.a,{variant:"title"},__("历史记录"))})}})},Tr="index-module_footer_jw1IR",Dr="index-module_functors_16rZ+",Lr="index-module_newTopic_8u1qA",Rr="index-module_actionContainer_XneMd",Ir="index-module_action_nakS7";function Mr(e){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr(e)}function Fr(){Fr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==Mr(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Mr(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function Br(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}var Ur=function(e){var t,r,n=e.context,o=e.dataSource,a=n.sidebarRender,u=Object(i.useRef)();return React.createElement(React.Fragment,null,React.createElement("div",{className:Rr},React.createElement(vr.a,{className:Ir,onClick:function(e){var t;null===(t=e.target)||void 0===t||null===(t=t.parentNode)||void 0===t||t.blur(),o.explainDoc()}},React.createElement(s.a,null,__("速读本文"))),React.createElement(vr.a,{className:Ir,onClick:function(e){var t;null===(t=e.target)||void 0===t||null===(t=t.parentNode)||void 0===t||t.blur(),o.getQuestion()}},React.createElement(s.a,null,__("提出问题")))),React.createElement("div",{className:Tr},a.renderInput({className:"readAssistantInput",ref:u,placeholder:null!=o&&o.linkDetail?"".concat(__("对链接内容提问"),"："):__("对本文进行提问："),onEnter:(t=Fr().mark((function e(t){var r,n;return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.askDoc(t),null===(r=u.current)||void 0===r||r.clear(),null===(n=u.current)||void 0===n||n.focus();case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){Br(a,n,o,i,u,"next",e)}function u(e){Br(a,n,o,i,u,"throw",e)}i(void 0)}))},function(e){return r.apply(this,arguments)}),extra:React.createElement("div",{className:Dr},React.createElement("div",{className:Lr,onClick:function(){return o.createConversation()}},React.createElement(c.b,{name:"comment-bubble",size:16}),__("新话题")),React.createElement(Nr,{context:n,datasource:o},React.createElement(s.a,{ml:16,type:"iconButton"},React.createElement(c.b,{name:"time-outlined",size:16}))))})))},Hr="guide-module_guide_JOtFA",Vr="guide-module_title_4PJjv",Gr=function(e){var t=e.sidebarRender;return React.createElement("div",null,t.renderFrame({fromUser:!1,children:React.createElement("div",{className:Hr},t.renderText({text:[React.createElement("div",{className:Vr},"👋🏻 你好，我是阅读助手"),"我可以阅读本文，帮助你总结页面的文档，为你提供有用的信息"],style:{padding:0}}))}))},qr="item-module_content_L0Hrd",zr="item-module_aiQuestion_+OKa7",Wr="item-module_aiQuestionItem_AMMMt",Kr="item-module_item_kWNBu",Yr="item-module_hoverShowOperation_a5Flh",Jr="item-module_operate_NGu9q",$r="item-module_operateContent_aZ77N",Xr="item-module_tip_kxcv5",Qr="item-module_footer_hvhKk",Zr="item-module_btn_Vdjmb";function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=en(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==en(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rn(){rn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==en(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(en(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function nn(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}var on=function(e){var t,r=e.context,n=e.msg,o=e.dataSource,a=e.isInRequesting,i=Object(m.a)(),u=function(){var e,t=(e=rn().mark((function e(t,r){return rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.feedback===t&&(t=K.FEEDBACK_TYPE.UNKNOWN),e.next=3,qe.a.conversation.feedback({conversation_id:o.conversationId,completion_id:n.completion_id,feedback:t});case 3:e.sent.success&&(n.feedback=t,i()),null==r||r();case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){nn(a,n,o,i,u,"next",e)}function u(e){nn(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),l=r.sidebarRender,s=o.isLatestCompletion(n);if(!n.content)return null;n.type!==X.b.AIAnswer||a||(t=l.renderOperation({operation:{feedback:n.feedback,feedbackCallback:n.completion_id?u:void 0,copy:function(){return n.content||""},createNote:function(){return n.content}}}));var f=n.content?React.createElement("div",{className:qr},l.renderText({text:n.content,typewriter:!!n.typewriter})):null;return n.type===X.b.LinkOperate&&(f=React.createElement("div",{className:$r},React.createElement("p",{className:Xr},__("链接"),"："),React.createElement("a",{target:"_blank",href:n.content},React.createElement(c.b,{name:"doc-type-default",size:16})," ",n.docTitle),React.createElement("div",{className:Qr},React.createElement("p",{className:Xr},__("针对链接"),"："),React.createElement("div",{className:Jr},React.createElement("span",{className:Zr,onClick:function(){o.explainDoc(n.docText)}},__("概括内容")),React.createElement("span",{className:Zr,onClick:function(){o.setLinkDetail(n.docText),setTimeout((function(){var e=document.querySelector(".readAssistantInput textarea");null==e||e.focus()}),100)}},__("对链接内容提问")))))),n.type===X.b.Operate&&(f=React.createElement("div",{className:$r},React.createElement("p",{className:Xr},__("选区原文"),"："),n.content,React.createElement("div",{className:Qr},React.createElement("p",{className:Xr},__("针对选区"),"："),React.createElement("div",{className:Jr},React.createElement("span",{className:Zr,onClick:function(){o.contentOperate(n.content,Zt.explain)}},__("解释")),React.createElement("span",{className:Zr,onClick:function(){o.contentOperate(n.content,Zt.translate)}},__("中英互译")),React.createElement("span",{className:Zr,onClick:function(){o.contentOperate(n.content,Zt.summary)}},__("摘要")))))),n.type===X.b.AIQuestion&&(f=React.createElement("div",{className:p()(qr,zr),onClick:function(){o.askDoc(n.content)}},l.renderText({text:n.content}))),React.createElement("div",null,0===n.index&&n.type===X.b.AIQuestion&&l.renderProgress({progresses:[{status:1,text:__("如果你正在评审本文，你可以询问这些问题：")}],style:{marginBottom:"18px"}}),l.renderFrame({className:p()(Kr,tn(tn(tn({},Yr,!s),Jr,n.type===X.b.Operate),Wr,n.type===X.b.AIQuestion)),style:{marginBottom:t?12:24},fromUser:n.type===X.b.SelfQuestion,children:f,bottomExtra:t}))},an=function(e){var t,r,n=e.context,o=e.dataSource,a=e.noGuide,l=n.sidebarRender,c=o.msgList,s=o.isInRequesting,f=o.showTip,d=Object(m.a)();function p(){return u.a.createElement("div",null,l.renderProgress({progresses:[{status:0,text:__("正在根据本篇文档匹配答案...")}],style:{marginBottom:"18px"}}))}return Object(i.useEffect)((function(){return o.addListener({onDatasetUpdated:d})}),[]),t=o,r=Object(rt.b)({type:tt.a.READ_ASSISTANT.CONVERSATION,source:"conversation-panel",reqFn:qe.a.ai.readAssistantCompletion,enableReject:!0,disable:!window.appData.canUseAiReading}),Object(i.useEffect)((function(){t.setReq(r)}),[t]),u.a.createElement("div",{style:a?{padding:16}:{}},!a&&u.a.createElement(Gr,{sidebarRender:l}),f&&l.renderNewTip({data:[{title:"速读文章",desc:["下方对话框上「速读本文」按钮"]},{title:"带着问题阅读法",desc:["下方对话框上「提出问题」按钮-点击问题"]},{title:"阅读选区文本",desc:["选中左侧文档内的一段文本-点击「AI」"]},{title:"读链接内容（当前支持语雀文档链接）",desc:["方式一：下方对话框发送链接","方式二：Hover 文中链接，点击「AI」"]}]}),c.map((function(e,t){var r=t===c.length-1&&s&&e.stream,a=t===c.length-1&&s&&!e.stream;return u.a.createElement("div",{key:e.msgId},!!r&&p(),u.a.createElement(on,{context:n,msg:e,dataSource:o,isInRequesting:s}),a&&p())})))},un=r(238),ln=r.n(un);function cn(e){return function(e){if(Array.isArray(e))return sn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var fn=function(e){var t,r=e.context,n=Object(it.a)(qe.a.events.mine);Object(i.useEffect)((function(){var e;n.request({limit:10,offset:0,type:"User",userId:null===(e=window.appData.me)||void 0===e?void 0:e.id})}),[]);var o=n.data&&null!==(t=n.data)&&void 0!==t&&t.length?ln()(n.data,"subject_id").filter((function(e){return"Doc"===e.subject_type&&e.subject})).map((function(e){return React.createElement("a",{target:"_blank",href:"/go/doc/".concat(e.subject.id,"#airead")},"🔗 ",e.actor_name,"：",e.subject.title)})):[React.createElement("a",{target:"_blank",href:"https://yuque.antfin.com/middleware/sofa4/upgrade_from_sofa3"},"🔗 SOFA3/SOFA4 到 SOFA4+JDK8 指南")];return r.sidebarRender.renderDisable({title:__("👋🏻 你好，我是阅读助手"),desc:[__("🆙 我可以帮你总结全文，你也可以向我提问。划词后点击「AI」也会触发 AI 功能哦~"),__("👇 点击下面文档快速体验一下")].concat(cn(n.loading?[]:o))})};function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hn(n.key),n)}}function hn(e){var t=function(e,t){if("object"!=dn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=dn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dn(t)?t:t+""}function yn(e,t,r){return t=mn(t),function(e,t){if(t&&("object"==dn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,bn()?Reflect.construct(t,r||[],mn(e).constructor):t.apply(e,r))}function bn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bn=function(){return!!e})()}function mn(e){return mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mn(e)}function vn(e,t){return vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vn(e,t)}var gn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yn(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vn(e,t)}(t,e),r=t,(n=[{key:"createDatasource",value:function(){return new mr}},{key:"isEnable",value:function(e){return!("lake"!==e.doc.format||!window.appData.canUseAiReading)}},{key:"initialize",value:function(){this.datasource.initConversion()}},{key:"destroy",value:function(){}},{key:"onContextDataChanged",value:function(){}},{key:"renderContent",value:function(e){return u.a.createElement(an,{context:e,dataSource:this.datasource})}},{key:"renderFooter",value:function(e){return u.a.createElement(Ur,{context:e,dataSource:this.datasource})}},{key:"renderDisable",value:function(e){var t="/dashboard/explore"===window.location.pathname&&window.appData.canUseAiReading;return u.a.createElement("div",{style:{overflowY:"auto"}},u.a.createElement(fn,{context:e}),t&&u.a.createElement(an,{context:e,dataSource:this.datasource,noGuide:!0}))}}])&&pn(r.prototype,n),o&&pn(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(l.c),_n=r(83),wn=r(846),On=r(929),En=r(848);function Pn(e){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pn(e)}function jn(e){return function(e){if(Array.isArray(e))return Cn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Cn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Cn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kn(){kn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==Pn(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Pn(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function Sn(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function An(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Sn(a,n,o,i,u,"next",e)}function u(e){Sn(a,n,o,i,u,"throw",e)}i(void 0)}))}}function xn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,In(n.key),n)}}function Nn(e,t,r){return t=Dn(t),function(e,t){if(t&&("object"==Pn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Tn()?Reflect.construct(t,r||[],Dn(e).constructor):t.apply(e,r))}function Tn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tn=function(){return!!e})()}function Dn(e){return Dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dn(e)}function Ln(e,t){return Ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ln(e,t)}function Rn(e,t,r){return(t=In(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function In(e){var t=function(e,t){if("object"!=Pn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pn(t)?t:t+""}function Mn(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Fn(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Fn(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Fn=function(e){this.s=e,this.n=e.next},Fn.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Fn(e)}var Bn=/^(\d+\.|\w+\.|\*|-)/,Un=/^(I|V|X|L)+\./,Hn=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Rn(e=Nn(this,t,[].concat(n)),"_msgList",[]),Rn(e,"_conversation",void 0),Rn(e,"_conversationList",[]),Rn(e,"_isInRequesting",!1),Rn(e,"_showTip",!1),Rn(e,"isDocEdit",!1),Rn(e,"streamReq",void 0),Rn(e,"_formatContent",(function(e){var t=e.split("\n"),r=0,n=1;return t.map((function(e){return e=e.trim(),Un.test(e)?(r++,n=0,'<h2 data-lake-index-type="2"><span lake-read-ignore="true">'.concat(r,". </span><span>").concat(e.replace(Un,"").trim(),"</span></h2>")):Bn.test(e)?(n++,'<h3 data-lake-index-type="2"><span lake-read-ignore="true">'.concat(r,".").concat(n," </span><span>").concat(e.replace(Bn,"").trim(),"</span></h3>")):""})).filter((function(e){return e&&!e.includes("undefined")})).join("")})),Rn(e,"_createDoc",function(){var t=An(kn().mark((function t(r){var n,o,a,i,u,l;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e._msgList[e._msgList.length-1].content,o=n.split("\n"),a=o.map((function(e){return e=e.trim(),Un.test(e)?'<h2 data-lake-index-type="2"><span>'.concat(e.replace(Un,"").trim(),"</span></h2>"):Bn.test(e)?'<h3 data-lake-index-type="2"><span>'.concat(e.replace(Bn,"").trim(),"</span></h3>"):""})),i="Doc",u={title:En.a.getDefaultTitle(On.a.adapterDocType(i)),type:On.a.adapterDocType(i),format:On.a.getDefaultFormat(i),book_id:r.id,body_draft_asl:a.filter((function(e){return e&&!e.includes("undefined")})).join(""),status:_n.STATUS.publish,insert_to_catalog:!0,action:"prependChild",target_uuid:null},t.next=7,On.a.createDoc(u,(function(){return J.a.error(__("网络异常，请稍后重试"))}));case 7:return l=t.sent,t.abrupt("return",l);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Rn(e,"callCreateDoc",function(){var t=An(kn().mark((function t(r){var n;return kn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._createDoc(r);case 2:return n=t.sent,t.next=5,Object(wn.c)("/".concat(r.user.login,"/").concat(r.slug,"/").concat(n.slug,"/edit"));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ln(e,t)}(t,e),r=t,n=[{key:"showTip",get:function(){return this._showTip}},{key:"isInRequesting",get:function(){return this._isInRequesting}},{key:"msgList",get:function(){return this._msgList||[]}},{key:"conversationId",get:function(){var e;return(null===(e=this._conversation)||void 0===e?void 0:e.id)||0}},{key:"conversationList",get:function(){return this._conversationList}},{key:"user",get:function(){var e;return(null===(e=window.appData)||void 0===e?void 0:e.me)||{}}},{key:"userId",get:function(){var e;return(null===(e=this.user)||void 0===e?void 0:e.id)||0}},{key:"buildMsgId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X.b.SelfQuestion;return Object($.a)({type:e,userId:this.userId})}},{key:"setReq",value:function(e){this.streamReq=e}},{key:"notifyDatasetUpdatedInternal",value:function(e){this.notifyDatasetUpdated({scrollImmediately:!e})}},{key:"pushMsg",value:function(e){this._msgList.push(e),this.notifyDatasetUpdatedInternal(!0)}},{key:"updateConversationList",value:function(e){this._conversationList=e||[],this.notifyListener((function(e){var t;return null===(t=e.onConversationsUpdated)||void 0===t?void 0:t.call(e)}))}},{key:"initConversion",value:(d=An(kn().mark((function e(){var t,r,n,o,a,i,u,l,c=this;return kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.list({group_id:0,type:K.CONVERSATION_TYPE.OUTING_ASSISTANT});case 2:if(t=e.sent,r=jn(this._msgList),this._msgList=[],n=t.conversations||[],this.updateConversationList(n),!n.length){e.next=23;break}return a=n[0],e.next=11,Y.webProxy.conversation.findOne({id:a.id});case 11:if(null!=(i=e.sent)&&null!==(o=i.conversation)&&void 0!==o&&null!==(o=o.completions)&&void 0!==o&&o.length){e.next=17;break}this._conversation=a,1===n.length&&(this._showTip=!0),e.next=21;break;case 17:return e.next=19,Y.webProxy.conversation.create({group_id:0,type:K.CONVERSATION_TYPE.OUTING_ASSISTANT});case 19:u=e.sent,this._conversation=null==u?void 0:u.conversation;case 21:e.next=28;break;case 23:return e.next=25,Y.webProxy.conversation.create({group_id:0,type:K.CONVERSATION_TYPE.OUTING_ASSISTANT});case 25:l=e.sent,this._showTip=!0,this._conversation=null==l?void 0:l.conversation;case 28:r.length&&r.forEach((function(e){c._msgList.push(e)})),this.notifyDatasetUpdatedInternal(!0);case 30:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"callStream",value:(f=An(kn().mark((function e(t,r){var n,o,a,i,u,l,c,s,f,d,p;return kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.streamReq(t),o=n.request,a=n.abort,this.pushMsg({msgId:this.buildMsgId(),type:r,content:"",completion_id:o.completion_id,stream:!0}),i=!1,u=!1,e.prev=4,c=Mn(o);case 6:return e.next=8,c.next();case 8:if(!(i=!(s=e.sent).done)){e.next=25;break}if(f=s.value,p=this._msgList[this._msgList.length-1],f.error_code!==Q.ErrorCode.InfosecError){e.next=18;break}return a(),p.content=X.d.infosecScanFailed,p.typewriter=!1,this._isInRequesting=!1,this.notifyDatasetUpdatedInternal(!0),e.abrupt("return");case 18:f.end?p.completion_id=f.completion_id:p.content+=f.result,p.content=null==p||null===(d=p.content)||void 0===d?void 0:d.trim(),p.typewriter=!f.end,this.notifyDatasetUpdatedInternal(!0);case 22:i=!1,e.next=6;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(4),u=!0,l=e.t0;case 31:if(e.prev=31,e.prev=32,!i||null==c.return){e.next=36;break}return e.next=36,c.return();case 36:if(e.prev=36,!u){e.next=39;break}throw l;case 39:return e.finish(36);case 40:return e.finish(31);case 41:this._isInRequesting=!1,this.notifyDatasetUpdatedInternal(!0);case 43:case"end":return e.stop()}}),e,this,[[4,27,31,41],[32,,36,40]])}))),function(e,t){return f.apply(this,arguments)})},{key:"switchConversation",value:(s=An(kn().mark((function e(t){var r,n,o,a=this;return kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.conversationId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Y.webProxy.conversation.findOne({id:t});case 4:n=e.sent,o=null==n?void 0:n.conversation,this._conversation=o,this._msgList=[],null==n||null===(r=n.conversation)||void 0===r||null===(r=r.completions)||void 0===r||r.forEach((function(e){a._msgList.push({msgId:a.buildMsgId(),type:X.b.SelfQuestion,content:e.prompt,completion_id:e.id}),a._msgList.push({msgId:a.buildMsgId(),type:X.b.AIAnswer,content:e.completion,completion_id:e.id})})),this.notifyDatasetUpdatedInternal();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"deleteConversation",value:(c=An(kn().mark((function e(t){var r,n;return kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.deleteConversation({id:t});case 2:if(null!=(r=e.sent)&&r.success){e.next=5;break}return e.abrupt("return",!1);case 5:return n=this._conversationList.filter((function(e){return e.id!==t})),this.updateConversationList(n),t===this.conversationId&&(n.length>0?this.switchConversation(n[0].id):this.createConversation()),this.notifyDatasetUpdatedInternal(),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"createConversation",value:(l=An(kn().mark((function e(){var t,r;return kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.create({group_id:0,type:K.CONVERSATION_TYPE.OUTING_ASSISTANT});case 2:t=e.sent,r=t.conversation,this._showTip=!1,this._conversation=r,this._msgList=[],this.notifyDatasetUpdatedInternal();case 8:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"sendMsg",value:(u=An(kn().mark((function e(t){return kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._msgList.length?this.getOutline(t):this.getDetail(t);case 1:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"getDetail",value:(i=An(kn().mark((function e(t){return kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInRequesting){e.next=3;break}return J.a.info(__("我正在回答上一个问题，请等一等")),e.abrupt("return");case 3:this.pushMsg({msgId:this.buildMsgId(),type:X.b.SelfQuestion,content:t,completion_id:0}),this._isInRequesting=!0,this.callStream({content:t,type:Q.AIWritingType.generateOutlineQuestion,stream:!0,context_id:this._conversation.id},X.b.AIAnswer);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getOutline",value:(a=An(kn().mark((function e(t){var r,n;return kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInRequesting){e.next=3;break}return J.a.info(__("我正在回答上一个问题，请等一等")),e.abrupt("return");case 3:this._isInRequesting=!0,this.pushMsg({msgId:this.buildMsgId(),type:X.b.SelfQuestion,content:t,completion_id:0}),r=this._msgList[0],n="".concat(r.content,"，基于这个主题，我还要补充一些内容：").concat(t),this.callStream({content:n,type:Q.AIWritingType.generateOutline,stream:!0,context_id:this._conversation.id},X.b.Operate);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"insertDoc",value:function(e){window.__engine.execCommand("insertAtSelection","text/html",this._formatContent(e))}}],n&&xn(r.prototype,n),o&&xn(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,a,i,u,l,c,s,f,d}(l.b),Vn="index-module_content_qjFF4",Gn="index-module_group_M-nBm",qn="index-module_item_y6S9y",zn="index-module_selected_Ubiwb",Wn="index-module_title_yy3Hg",Kn="index-module_date_3PcOY",Yn="index-module_delete_pKQM9";function Jn(e){return Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jn(e)}function $n(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Jn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Jn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Zn=function(e){var t=e.context,r=e.datasource,n=Xn(Object(i.useState)(0),2),o=n[0],a=n[1],l=Object(m.a)(),c=r.conversationList,s=Object(i.useMemo)((function(){var e=[],t=[],r=[],n=y()(),o=y()().subtract(1,"day");return c.forEach((function(a){var i=y()(a.created_at);i.isSame(n,"day")?e.push(a):i.isSame(o,"day")?t.push(a):r.push(a)})),[{label:__("今天"),list:e},{label:__("昨天"),list:t},{label:__("之前"),list:r,fullDate:!0}]}),[c,c.length]);return Object(i.useEffect)((function(){return r.addListener({onConversationsUpdated:l,onDatasetUpdated:l})}),[]),c.length?u.a.createElement("div",{className:Vn},s.filter((function(e){return e.list.length})).map((function(t){return u.a.createElement("div",null,u.a.createElement("span",{className:Gn},t.label),t.list.map((function(n){var i=n.id,l=n.title,c=n.created_at,s=i===r.conversationId,d=l||__("未命名会话");s&&(d="".concat(__("[当前会话]")," ").concat(d));var h=y()(c).format(t.fullDate?"YY/MM/DD":"HH:mm"),m=o===i;return u.a.createElement("div",{className:p()(qn,$n({},zn,s)),onClick:function(t){var n=null==t?void 0:t.target;null!=n&&n.closest(".".concat(Yn))||!(null!=n&&n.closest(".".concat(Wn))||n.className===Wn)||(r.switchConversation(i),e.context.closeDrawer())}},u.a.createElement("span",{className:Wn},d),!m&&u.a.createElement("span",{className:Kn},h),u.a.createElement(f.a,{title:__("确认删除该问答记录？"),okText:__("删除"),onConfirm:function(){r.deleteConversation(i),a(0)},onCancel:function(){return a(0)},onVisibleChange:function(e){a(e?i:0)}},u.a.createElement("span",null,u.a.createElement(b.default,{className:Yn,style:m?{display:"block"}:void 0}))))})))}))):t.sidebarRender.renderEmpty()},eo=function(e){var t=e.context,r=e.children;return Object(i.cloneElement)(r,{onClick:function(){return t.renderDrawer({content:u.a.createElement(Zn,e),title:u.a.createElement(s.a,{variant:"title"},__("历史记录"))})}})},to="index-module_footer_tdOu3",ro="index-module_functors_J00xc",no="index-module_newTopic_3TTSN";function oo(e){return oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oo(e)}function ao(){ao=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==oo(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(oo(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function io(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}var uo=function(e){var t,r,n=e.context,o=e.dataSource,a=n.sidebarRender,u=Object(i.useRef)(),l="请告诉我需要写什么主题",f=!1;return 2===o.msgList.length&&(l="请补充给我补充一些信息，让我写的更好"),4===o.msgList.length&&(l="暂不可输入，想要换个主题可以「开启新话题」",f=!0),React.createElement(React.Fragment,null,React.createElement("div",{className:to},a.renderInput({ref:u,disabled:f,placeholder:l,onEnter:(t=ao().mark((function e(t){var r,n;return ao().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(r=u.current)||void 0===r||r.clear(),null===(n=u.current)||void 0===n||n.focus(),o.sendMsg(t);case 3:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){io(a,n,o,i,u,"next",e)}function u(e){io(a,n,o,i,u,"throw",e)}i(void 0)}))},function(e){return r.apply(this,arguments)}),extra:React.createElement("div",{className:ro},React.createElement("div",{className:no,onClick:function(){return o.createConversation()}},React.createElement(c.b,{name:"comment-bubble",size:16}),__("新话题")),React.createElement(eo,{context:n,datasource:o},React.createElement(s.a,{ml:16,type:"iconButton"},React.createElement(c.b,{name:"time-outlined",size:16}))))})))},lo="guide-module_guide_9ROIO",co="guide-module_insert_cauGN",so=function(e){var t=e.sidebarRender,r=e.dataSource;return React.createElement("div",null,t.renderFrame({fromUser:!1,children:React.createElement("div",{className:lo},t.renderText({text:[React.createElement(gt.a,{variant:"headline4",mb:12},"👋🏻 你好，我是大纲写作助手"),"我将帮你分解写作主题，并逐步完成长篇文档的深度写作，请按我的引导使用。","👇 点击该主题，尝试一下",React.createElement("div",{className:co},React.createElement("a",{onClick:function(){return r.sendMsg("在线笔记市场分析")}},"在线笔记市场分析"))],style:{padding:0}}))}))},fo="item-module_content_z-UPZ",po="item-module_footer_rn4W2",ho="item-module_operate_s5dfE",yo="item-module_btn_19orB",bo="item-module_item_UuG90";function mo(e){return mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mo(e)}function vo(){vo=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==mo(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(mo(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function go(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}var _o=function(e){var t,r=e.context,n=e.msg,o=e.dataSource,a=e.isInRequesting,i=e.createDoc,u=Object(m.a)(),l=function(){var e,t=(e=vo().mark((function e(t,r){return vo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.feedback===t&&(t=K.FEEDBACK_TYPE.UNKNOWN),e.next=3,qe.a.conversation.feedback({conversation_id:o.conversationId,completion_id:n.completion_id,feedback:t});case 3:e.sent.success&&(n.feedback=t,u()),null==r||r();case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){go(a,n,o,i,u,"next",e)}function u(e){go(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),c=r.sidebarRender;if(!n.content)return null;n.type===X.b.SelfQuestion||a||(t=c.renderOperation({operation:{feedback:n.feedback,feedbackCallback:n.completion_id?l:void 0,copy:function(){return n.content||""},createNote:function(){return n.content}}}));var s=n.content?React.createElement("div",{className:fo},c.renderText({text:n.content,typewriter:!!n.typewriter}),n.type===X.b.Operate&&!a&&React.createElement("div",{className:po},React.createElement("div",{className:ho},o.isDocEdit&&React.createElement("span",{className:yo,onClick:function(){o.insertDoc(n.content)}},"插入文档"),React.createElement("span",{className:yo,onClick:function(){i()}},"新建文档")))):null;return React.createElement("div",null,c.renderFrame({className:p()(bo),style:{marginBottom:t?12:24},fromUser:n.type===X.b.SelfQuestion,children:s,bottomExtra:t}))},wo=(r(59),r(30)),Oo=r(295),Eo=Object(Oo.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(8),r.e(1350)]).then(r.bind(null,5641))}),{suspense:!0}),Po=function(e){var t,r=e.visible,n=e.onClose,o=e.onBookSelect;return React.createElement(wo.a,{visible:r,onOk:function(){return n(!1)},onCancel:function(){return n(!1)},footer:null,width:520},React.createElement("div",{style:{fontSize:"16px"}},"新建文档"),React.createElement(Eo,{organization:null===(t=window.appData)||void 0===t?void 0:t.organization,onBookSelect:o}))};function jo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Co(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Co(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Co(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ko=function(e){var t,r,n=e.context,o=e.dataSource,a=n.sidebarRender,l=o.msgList,c=o.isInRequesting,s=o.callCreateDoc,f=o.showTip,d=Object(m.a)(),p=jo(Object(i.useState)(!1),2),h=p[0],y=p[1];function b(){return u.a.createElement("div",null,a.renderProgress({progresses:[{status:0,text:"正在生成内容"}],style:{marginBottom:"18px"}}))}return Object(i.useEffect)((function(){return o.addListener({onDatasetUpdated:d})}),[]),t=o,r=Object(rt.b)({type:tt.a.OUTLINE_ASSISTANT.CONVERSATION,source:"conversation-panel",reqFn:qe.a.ai.outlineAssistantCompletion,enableReject:!0,disable:!window.appData.canUseAiOutline}),Object(i.useEffect)((function(){t.setReq(r)}),[t]),u.a.createElement("div",null,u.a.createElement(so,{sidebarRender:a,dataSource:o}),f&&a.renderNewTip({data:[{title:"输入主题写大纲",desc:["跟着引导生成大纲，不满意点新话题重新写"]},{title:"插入 / 新建文档",desc:["自动生成文档大纲"]},{title:"写大纲下的详细内容",desc:["编辑器“ / ” - 语雀AI助手 - 大纲写作法"]},{title:"对内容进行润色",desc:["编辑器“ / ” - 语雀AI助手 - 调整选中内容"]}]}),l.map((function(e,t){var r=t===l.length-1&&c&&e.stream,a=t===l.length-1&&c&&!e.stream;return u.a.createElement("div",{key:e.msgId},!!r&&b(),u.a.createElement(_o,{context:n,msg:e,dataSource:o,isInRequesting:c,createDoc:function(){y(!0)}}),a&&b())})),u.a.createElement(Po,{visible:h,onClose:y,onBookSelect:s}))};function So(e){return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},So(e)}function Ao(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xo(n.key),n)}}function xo(e){var t=function(e,t){if("object"!=So(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=So(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==So(t)?t:t+""}function No(e,t,r){return t=Do(t),function(e,t){if(t&&("object"==So(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,To()?Reflect.construct(t,r||[],Do(e).constructor):t.apply(e,r))}function To(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(To=function(){return!!e})()}function Do(e){return Do=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Do(e)}function Lo(e,t){return Lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lo(e,t)}var Ro=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),No(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lo(e,t)}(t,e),r=t,(n=[{key:"createDatasource",value:function(){return new Hn}},{key:"isEnable",value:function(){return!0}},{key:"initialize",value:function(e){var t;this.datasource.isDocEdit="Doc"===e.doc.type&&!(null===(t=window)||void 0===t||null===(t=t.__engine)||void 0===t||!t.engine),this.datasource.initConversion()}},{key:"destroy",value:function(){}},{key:"onContextDataChanged",value:function(e){var t;this.datasource.isDocEdit="Doc"===e.doc.type&&!(null===(t=window)||void 0===t||null===(t=t.__engine)||void 0===t||!t.engine)}},{key:"renderContent",value:function(e){return u.a.createElement(ko,{context:e,dataSource:this.datasource})}},{key:"renderFooter",value:function(e){return u.a.createElement(uo,{context:e,dataSource:this.datasource})}}])&&Ao(r.prototype,n),o&&Ao(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(l.c),Io=r(4377);function Mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Bo=function(e,t){var r=Mo(Object(i.useState)(0),2),n=r[0],o=r[1];return Object(i.useEffect)((function(){return t.addListener({onInnerDatasetUpdated:function(t){var r=t||{},n=r.needScroll,a=r.scrollImmediately;o((function(e){return e+1})),n&&e.scrollToBottom(a)}})}),[]),{updateFlag:n}};function Uo(e){return Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uo(e)}function Ho(){Ho=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==Uo(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Uo(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function Vo(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}var Go=function(e){var t,r,n=e.context,o=e.dataSource,a=n.sidebarRender,u=o.isInRequesting,l=(Bo(n,o).updateFlag,Object(i.useRef)());return React.createElement("div",{className:"sheet-ai-footer"},o.isInRequesting?React.createElement("div",{className:"sheet-ai-footer-menu"},React.createElement(vr.a,{className:"sheet-ai-stop-btn",onClick:function(){return o.stopGenerate()}},React.createElement("span",{className:"sheet-ai-stop-icon"}),__("停止"))):null,a.renderInput({ref:l,className:"sheet-ai-footer-input",placeholder:u?__("生成中..."):__("描述想生成的表格内容和目的，让雀雀帮你生成"),disabled:u,onEnter:(t=Ho().mark((function e(t){var r,n;return Ho().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:o.callGenerateSheet(t),null===(r=l.current)||void 0===r||r.clear(),null===(n=l.current)||void 0===n||n.focus();case 5:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){Vo(a,n,o,i,u,"next",e)}function u(e){Vo(a,n,o,i,u,"throw",e)}i(void 0)}))},function(e){return r.apply(this,arguments)})}))},qo=r(1735),zo=r(1736),Wo=r(1409),Ko=r(2810),Yo=r(4290),Jo=function(e){var t=e.msgRef,r=e.tableId;return{copy:function(){var e=document.createRange(),n=window.getSelection();if(n&&t.current){var o=t.current.querySelector("#".concat(r));if(o){var a=o.cloneNode(!0),i=document.createElement("div");i.className="sheet-ai-copy-block",i.style.position="fixed",i.style.top="0",i.style.clip="rect(0, 0, 0, 0)",document.body.appendChild(i),i.appendChild(a),e.selectNodeContents(a),n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy")}catch(e){}finally{i.remove(),n.removeAllRanges()}}}}}};function $o(e){return $o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$o(e)}function Xo(){Xo=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==$o(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError($o(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function Qo(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}var Zo=function(e){var t=e.sidebarRender,r=e.msg,n=e.dataSource,o=e.isLast,a=e.isVisibleInModal,l=e.setModalVisible,c=e.setModalContent,s=e.context,f=e.gotoCreateSheet,d=n.insertSheet,h=n.callFeedback,y=n.findInsertPosition,b=n.isSheetEmpty,m=n.isToInsertStatus,v=n.book,g=n.createSheetInBook,_=Object(i.useRef)(null),w="table_".concat(r.msgId),O=Object(Ko.a)(r.content,w),E=O.colCount,P=O.preTextEle,j=O.afterTextEle,C=O.tableEle,k={width:E<=3?"100%":"".concat(100*E,"px")},S=function(){var e,t=(e=Xo().mark((function e(t,n){return Xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(r,t);case 2:null==n||n();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Qo(a,n,o,i,u,"next",e)}function u(e){Qo(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),A=function(e){var t=Object(i.useRef)(e);t.current=Object(i.useMemo)((function(){return e}),[e]);var r=Object(i.useRef)();return r.current||(r.current=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.current.apply(this,r)}),r.current}((function(){a&&c({tableEle:C,msg:r})}));Object(i.useEffect)((function(){A()}),[r.content,r.msgId,r.isClientId,r.isComplete,r.feedback]);var x=Jo({msgRef:_,tableId:w}).copy,N=r.type===Yo.e.ai?u.a.createElement("div",{className:p()("sheet-ai-msg-operate",o?"last-msg":"")},r.isClientId?null:t.renderOperation({scrollToBottom:o?s.scrollToBottom:void 0,operation:{feedbackCallback:S,feedback:r.feedback}})):null,T=null;return r.isComplete&&(T=n.sheet?b?u.a.createElement(vr.a,{className:"sheet-ai-table-operate-btn",icon:u.a.createElement(qo.default,{className:"sheet-ai-table-operate-icon"}),onClick:function(){return d(r.msgId)}},__("插入表格")):u.a.createElement(vr.a,{className:p()("sheet-ai-table-operate-btn",m?"sheet-ai-table-insert-cursor":""),icon:u.a.createElement(qo.default,{className:"sheet-ai-table-operate-icon"}),onClick:function(){return y(r.msgId)}},__("插入到指定位置")):u.a.createElement(vr.a,{className:p()("sheet-ai-table-operate-btn"),icon:u.a.createElement(qo.default,{className:"sheet-ai-table-operate-icon"}),onClick:function(){return void 0===(null==v?void 0:v.id)?f(r.msgId):g(r.msgId)}},__("以此新建表格"))),u.a.createElement("div",{className:"sheet-ai-msg-item",ref:_},t.renderFrame({style:{marginBottom:24},fromUser:r.type===Yo.e.user,children:u.a.createElement("div",{className:"sheet-ai-msg"},P,C?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"sheet-ai-msg-table-wrapper"},u.a.createElement("div",{className:"sheet-ai-msg-scroll"},u.a.createElement("div",{className:p()("sheet-ai-msg-table",E>3?"sheet-ai-table-right-shadow":""),style:k},C)),u.a.createElement("div",{className:"sheet-ai-msg-table-icon",onClick:function(){l(!0),c({tableEle:C,msg:r})}},u.a.createElement(zo.default,null))),r.isComplete?u.a.createElement("div",{className:"sheet-ai-table-operate"},u.a.createElement(vr.a,{className:"sheet-ai-table-operate-btn",icon:u.a.createElement(Wo.default,{className:"sheet-ai-table-operate-icon"}),onClick:function(){x(),n.callFeedback(r,K.FEEDBACK_TYPE.POSITIVE_USE)}},__("复制表格")),T):null):null,j),bottomExtra:N}))},ea=r(5195),ta=r(249);function ra(e){return ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ra(e)}function na(){na=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==ra(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ra(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function oa(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}var aa=function(e){var t=e.sidebarRender,r=e.modalContent,n=e.visible,o=e.dataSource,a=e.onClose,l=o.isSheetEmpty,c=o.isToInsertStatus,s=o.insertSheet,f=o.findInsertPosition,d=o.callFeedback,h=r.tableEle,y=r.msg,b=Object(i.useRef)(null),m=function(){var e,t=(e=na().mark((function e(t,r){return na().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(y,t);case 2:null==r||r();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){oa(a,n,o,i,u,"next",e)}function u(e){oa(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),v="table_".concat((null==y?void 0:y.msgId)||""),g=Jo({msgRef:b,tableId:v}).copy;return y?u.a.createElement(wo.a,{className:"sheet-ai-table-maxview",visible:n,onOk:function(){return a(!1)},onCancel:function(){return a(!1)},footer:null,width:850},u.a.createElement("div",{ref:b},u.a.createElement("div",{className:"logo"},u.a.createElement(ta.a,{src:ea.b,darkAlpha:.7,className:"icon"}),u.a.createElement("div",{className:"title"},__("语雀AI助手"))),h,u.a.createElement("div",{className:"sheet-ai-table-operate"},y.isComplete?u.a.createElement(u.a.Fragment,null,u.a.createElement(vr.a,{className:"sheet-ai-table-operate-btn",icon:u.a.createElement(Wo.default,{className:"sheet-ai-table-operate-icon"}),onClick:function(){g(),a(!1),o.callFeedback(y,K.FEEDBACK_TYPE.POSITIVE_USE)}},__("复制表格")),l?u.a.createElement(vr.a,{className:"sheet-ai-table-operate-btn",icon:u.a.createElement(qo.default,{className:"sheet-ai-table-operate-icon"}),onClick:function(){a(!1),s(y.msgId)}},__("插入表格")):u.a.createElement(vr.a,{className:p()("sheet-ai-table-operate-btn",c?"sheet-ai-table-insert-cursor":""),icon:u.a.createElement(qo.default,{className:"sheet-ai-table-operate-icon"}),onClick:function(){a(!1),f(y.msgId)}},__("插入到指定位置"))):null),y.isClientId?null:u.a.createElement("div",{className:"sheet-ai-table-maxview-footer"},t.renderOperation({operation:{feedbackCallback:m,feedback:y.feedback}})))):null},ia=r(1536);function ua(e){return ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ua(e)}function la(){la=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==ua(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ua(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function ca(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function sa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fa(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var da="sheetAiGuide",pa=[{title:"项目计划表",ques:"做一个项目计划表，用于跟踪和管理项目，包含任务、所属项目、负责人、优先级、截止时间、状态"},{title:"个人记账表",ques:"做一张个人记账表，用于记录支出和收入的金额、分类、支付来源"},{title:"哲学书单",ques:"帮我生成一张哲学必读书单，附豆瓣评分"},{title:"活动预算",ques:"帮我做一个产品地推活动的预算表，包含预算类别、金额、环节、负责人"},{title:"需求池",ques:"帮我生成一个需求列表，用于管理需求池和进展"},{title:"资产管理表",ques:"帮我生成一张硬件资产管理表"}],ha=function(e){var t=e.sidebarRender,r=e.dataSource,n=sa(Object(i.useState)("1"===window.localStorage.getItem(da)),2),o=n[0],a=n[1],u=function(){var e,t=(e=la().mark((function e(t){return la().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.callGenerateSheet(t);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ca(a,n,o,i,u,"next",e)}function u(e){ca(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return React.createElement("div",null,t.renderFrame({fromUser:!1,children:React.createElement("div",{className:"sheet-ai-guide"},o?React.createElement("div",{className:"sheet-ai-guide-close",onClick:function(){a(!1),window.localStorage.setItem(da,"1")}},React.createElement(ia.default,null)):null,t.renderText({text:[React.createElement("div",{className:"sheet-ai-guide-title",key:0},"👋🏻 ",__("你好，我是你的表格助手")),__("输入描述，让雀雀帮你轻松生成表格"),__("你可以对我说：生成一个什么内容的表格，以达到什么目的，包含什么信息")],style:{padding:0}}),React.createElement("div",null,__("示例"),"："),React.createElement("div",{className:"sheet-ai-example-area"},pa.map((function(e,t){return React.createElement("span",{key:t,className:"sheet-ai-example-item",onClick:function(){return u(e.ques)}},e.title)}))))}))},ya=Object(Oo.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(8),r.e(1350)]).then(r.bind(null,5641))}),{suspense:!0}),ba=function(e){var t,r=e.visible,n=e.onClose,o=e.onBookSelect;return React.createElement(wo.a,{className:"sheet-ai-table-maxview",visible:r,onOk:function(){return n(!1)},onCancel:function(){return n(!1)},footer:null,width:520},React.createElement("div",{style:{fontSize:"16px"}},"新建表格"),React.createElement(ya,{organization:null===(t=window.appData)||void 0===t?void 0:t.organization,onBookSelect:o}))};function ma(e){return ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(e)}function va(){va=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==ma(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ma(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function ga(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function _a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wa(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Oa=function(e){var t,r,n=e.context,o=e.dataSource,a=n.sidebarRender,u=o.msgList,l=o.isWaitingResponse,c=o.createSheet;Bo(n,o).updateFlag;t=o,r=Object(rt.b)({type:tt.a.SHEET_ASSISTANT.CONVERSATION,source:"sheet-assistant",reqFn:qe.a.ai.sheetCompletion}),Object(i.useEffect)((function(){t.setStreamReqMethod(r)}),[]);var s=_a(Object(i.useState)(!1),2),f=s[0],d=s[1],p=_a(Object(i.useState)({tableEle:null,msg:null}),2),h=p[0],y=p[1],b=_a(Object(i.useState)(!1),2),m=b[0],v=b[1],g=Object(i.useRef)(null),_=Object(i.useCallback)((function(e){g.current=e,v(!0)}),[]),w=function(){var e,t=(e=va().mark((function e(t){return va().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c(g.current,t);case 4:g.current=null,v(!1);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ga(a,n,o,i,u,"next",e)}function u(e){ga(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return React.createElement("div",null,React.createElement(ha,{sidebarRender:a,dataSource:o}),u.map((function(e,t){var r,i,l=t===u.length-1;return e.content?React.createElement("div",{key:e.msgId},React.createElement(Zo,{sidebarRender:a,msg:e,dataSource:o,isLast:l,isVisibleInModal:f&&((null===(r=h.msg)||void 0===r?void 0:r.msgId)===e.msgId||(null===(i=h.msg)||void 0===i?void 0:i.msgId)===e.clientId),context:n,setModalVisible:d,setModalContent:y,gotoCreateSheet:_})):null})),l?React.createElement("div",null,a.renderProgress({progresses:[{status:0,text:"".concat(__("生成中，请稍后"),"...")}]})):null,React.createElement(aa,{sidebarRender:a,modalContent:h,visible:f,dataSource:o,onClose:d}),m?React.createElement(ba,{visible:m,onClose:v,onBookSelect:w}):null)};function Ea(e){return Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ea(e)}function Pa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ja(n.key),n)}}function ja(e){var t=function(e,t){if("object"!=Ea(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ea(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ea(t)?t:t+""}function Ca(e,t,r){return t=Sa(t),function(e,t){if(t&&("object"==Ea(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ka()?Reflect.construct(t,r||[],Sa(e).constructor):t.apply(e,r))}function ka(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ka=function(){return!!e})()}function Sa(e){return Sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sa(e)}function Aa(e,t){return Aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Aa(e,t)}var xa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ca(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aa(e,t)}(t,e),r=t,n=[{key:"createDatasource",value:function(){return new Io.a}},{key:"isEnable",value:function(e){var t;return!(null===(t=window.appData)||void 0===t||null===(t=t.settings)||void 0===t||!t.enable_sheet_ai)}},{key:"initialize",value:function(e){"lakesheet"===e.doc.format&&(this.datasource.sheetId=e.doc.id)}},{key:"destroy",value:function(){}},{key:"onContextDataChanged",value:function(e){var t,r=e.doc,n=e.book;null!=e&&null!==(t=e.me)&&void 0!==t&&t.id&&(this.datasource.userId=e.me.id),this.datasource.book={id:null==n?void 0:n.id,namespace:null==n?void 0:n.namespace},"lakesheet"===r.format&&(this.datasource.sheetId=r.id,r.editMode&&this.datasource.initSheet())}},{key:"renderContent",value:function(e){return u.a.createElement(Oa,{context:e,dataSource:this.datasource})}},{key:"renderFooter",value:function(e){return u.a.createElement(Go,{context:e,dataSource:this.datasource})}},{key:"renderDisable",value:function(e){return e.sidebarRender.renderDisable({title:__("👋🏻 你好，我是表格助手"),desc:[__("请输入描述，雀雀能帮你轻松生成表格。"),__("📊 我将在你编辑表格时为你提供服务，如果你想尝试一下，就去创建一个表格文档吧。")]})}}],n&&Pa(r.prototype,n),o&&Pa(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(l.c),Na=r(4375);function Ta(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Da(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Da(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Da(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var La=function(e,t){var r=Ta(Object(i.useState)(0),2),n=r[0],o=r[1];return Object(i.useEffect)((function(){return t.addListener({onInnerDatasetUpdated:function(t){var r=t||{},n=r.needScroll,a=r.scrollImmediately;o((function(e){return e+1})),n&&e.scrollToBottom(a)}})}),[]),{updateFlag:n}},Ra="index-module_content_9gMvC",Ia="index-module_group_guj35",Ma="index-module_item_vX1lk",Fa="index-module_selected_JfqSY",Ba="index-module_title_Jl5Vb",Ua="index-module_date_tZvuO",Ha="index-module_delete_oZ8St";function Va(e){return Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Va(e)}function Ga(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Va(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Va(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Va(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return za(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?za(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function za(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Wa=function(e){var t=e.context,r=e.datasource,n=qa(Object(i.useState)(0),2),o=n[0],a=n[1],l=Object(m.a)(),c=r.conversationList,s=Object(i.useMemo)((function(){var e=[],t=[],r=[],n=y()(),o=y()().subtract(1,"day");return c.forEach((function(a){var i=y()(a.created_at);i.isSame(n,"day")?e.push(a):i.isSame(o,"day")?t.push(a):r.push(a)})),[{label:__("今天"),list:e},{label:__("昨天"),list:t},{label:__("之前"),list:r,fullDate:!0}]}),[c,c.length]);return Object(i.useEffect)((function(){return r.addListener({onConversationsUpdated:l,onDatasetUpdated:l})}),[]),c.length?u.a.createElement("div",{className:Ra},s.filter((function(e){return e.list.length})).map((function(t){return u.a.createElement("div",null,u.a.createElement("span",{className:Ia},t.label),t.list.map((function(n){var i=n.id,l=n.title,c=n.updated_at,s=i===r.conversationId,d=l||__("未命名会话");s&&(d="".concat(__("[当前会话]")," ").concat(d));var h=y()(c).format(t.fullDate?"YY/MM/DD":"HH:mm"),m=o===i;return u.a.createElement("div",{className:p()(Ma,Ga({},Fa,s)),onClick:function(t){var n=null==t?void 0:t.target;null!=n&&n.closest(".".concat(Ha))||null==n||!n.closest(".".concat(Ba))||(r.switchConversation(i),e.context.closeDrawer())}},u.a.createElement("span",{className:Ba},d),!m&&u.a.createElement("span",{className:Ua},h),u.a.createElement(f.a,{title:__("确认删除该问答记录？"),okText:__("删除"),onConfirm:function(){r.deleteConversation(i),a(0)},onCancel:function(){return a(0)},onVisibleChange:function(e){a(e?i:0)}},u.a.createElement("span",null,u.a.createElement(b.default,{className:Ha,style:m?{display:"block"}:void 0}))))})))}))):t.sidebarRender.renderEmpty()},Ka=function(e){var t=e.context,r=e.children;return Object(i.cloneElement)(r,{onClick:function(){return t.renderDrawer({content:u.a.createElement(Wa,e),title:u.a.createElement(s.a,{variant:"title"},__("历史记录"))})}})},Ya="index-module_dataTableFooterInput_NWe3X",Ja="index-module_dataTableFooterMenu_6MDem",$a="index-module_dataTableFooterStopBtn_QAP6s",Xa="index-module_dataTableFooterStopIcon_Ns3h8",Qa="index-module_functors_vPkQS",Za="index-module_newTopic_sbTRb",ei=function(e){var t=e.context,r=e.dataSource,n=t.sidebarRender,o=Object(i.useRef)();return La(t,r),React.createElement("div",null,React.createElement("div",{className:Ja},r.isInRequesting?React.createElement(vr.a,{className:$a,onClick:function(){return r.stopGenerate()}},React.createElement("span",{className:Xa}),__("停止")):null),n.renderInput({ref:o,className:Ya,placeholder:r.isInRequesting?__("生成中..."):__("描述想生成的表单，让雀雀帮你生成"),disabled:r.isInRequesting,onEnter:function(e){var t,n;r.isInRequesting||(r.startGenerateForm(e),null===(t=o.current)||void 0===t||t.clear(),null===(n=o.current)||void 0===n||n.focus())},extra:React.createElement("div",{className:Qa},React.createElement("div",{className:Za,onClick:function(){return r.createConversation()}},React.createElement(c.b,{name:"comment-bubble",size:16}),__("新话题")),React.createElement(Ka,{context:t,datasource:r},React.createElement(s.a,{ml:16,type:"iconButton"},React.createElement(c.b,{name:"time-outlined",size:16}))))}))},ti=r(3989),ri="index-module_dataTableAiGuide_TwriS",ni="index-module_dataTableAiGuideClose_86Jls",oi="index-module_dataTableAiExampleArea_8PL6s",ai="index-module_dataTableAiExampleItem_2MkhX",ii="index-module_dataTableAiGuideTitle_sPatA";function ui(e){return ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ui(e)}function li(){li=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==ui(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ui(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function ci(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fi(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var di="dataTableAiGuide",pi=function(e){var t=e.sidebarRender,r=e.dataSource,n=si(Object(i.useState)("1"===window.localStorage.getItem(di)),2),o=n[0],a=n[1],u=function(){var e,t=(e=li().mark((function e(t,n){return li().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.startGenerateForm(t,n);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ci(a,n,o,i,u,"next",e)}function u(e){ci(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();return React.createElement("div",null,t.renderFrame({fromUser:!1,children:React.createElement("div",{className:ri},o?React.createElement("div",{className:ni,onClick:function(){a(!1),window.localStorage.setItem(di,"1")}},React.createElement(ia.default,null)):null,t.renderText({text:[React.createElement("div",{className:ii,key:0},"👋🏻 ",__("你好，我是数据表助手")),__("告诉我你需要收集的信息，我可以帮助你快速创建表单，轻松完成信息收集和管理。")],style:{padding:0}}),React.createElement("div",null,__("示例"),"："),React.createElement("div",{className:oi},ti.d.map((function(e,t){return React.createElement("span",{key:t,className:ai,onClick:function(){return u(e.ques,e.title)}},e.title)}))))}))},hi=r(1532),yi=r(1596),bi=r(4128),mi={dataTableAiMsgItem:"index-module_dataTableAiMsgItem_D1Ibw",dataTableAiMsgOperate:"index-module_dataTableAiMsgOperate_+NB3f","last-msg":"index-module_last-msg_gTYXw",dataTableAiMsg:"index-module_dataTableAiMsg_hAvPe",dataTableAiMsgFormWrapper:"index-module_dataTableAiMsgFormWrapper_uuXGY",dataTableAiMsgFormName:"index-module_dataTableAiMsgFormName_yYQmV",dataTableAiMsgField:"index-module_dataTableAiMsgField_VF6v-",dataTableAiMsgFieldName:"index-module_dataTableAiMsgFieldName_UEKb6",dataTableAiMsgFieldType:"index-module_dataTableAiMsgFieldType_z6sWB",dataTableAiTableOperate:"index-module_dataTableAiTableOperate_luVcz",dataTableAiTableOperateBtn:"index-module_dataTableAiTableOperateBtn_na0QG",dataTableAiTableOperateIcon:"index-module_dataTableAiTableOperateIcon_v8jga",dataTableAiTableAfterText:"index-module_dataTableAiTableAfterText_5qHHS"};function vi(e){return vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vi(e)}function gi(){gi=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==vi(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(vi(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function _i(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}var wi=function(e){var t=e.sidebarRender,r=e.msg,n=e.dataSource,o=e.isLast,a=e.context,l=e.showBookSelector,c=n.book,s=n.isEmptyTable,f=Object(i.useRef)(null),d=r.title,h=r.form||{beforeText:"",afterText:"",fieldNames:[],fieldTypes:[]},y=h.beforeText,b=h.afterText,m=h.fieldNames,v=h.fieldTypes,g=Object(bi.a)(),_=function(){var e,t=(e=gi().mark((function e(t,o){return gi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.callFeedback(r,t);case 2:null==o||o();case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){_i(a,n,o,i,u,"next",e)}function u(e){_i(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),w=r.type===ti.e.ai?u.a.createElement("div",{className:p()(mi.dataTableAiMsgOperate,o?"last-msg":"")},r.isClientId?null:t.renderOperation({scrollToBottom:o?a.scrollToBottom:void 0,operation:{feedbackCallback:_,feedback:r.feedback}})):null,O=null,E=null;0===m.length&&0===v.length&&(O=r.content.split("\n").map((function(e,t){return e?u.a.createElement("div",{key:t},e):null}))||""),y&&(O=y.split("\n").map((function(e,t){return e?u.a.createElement("div",{key:t},e):null}))),b&&(E=b.split("\n").map((function(e,t){return e?u.a.createElement("div",{key:t,className:p()(mi.dataTableAiTableAfterText)},e):null})));var P=null;return r.isComplete&&(P=u.a.createElement(u.a.Fragment,null,u.a.createElement(vr.a,{className:p()(mi.dataTableAiTableOperateBtn),icon:u.a.createElement(hi.default,{className:mi.dataTableAiTableOperateIcon}),onClick:function(){return void 0===(null==c?void 0:c.id)?l(r.msgId):n.createTableInBook(r.msgId)}},__("以此新建数据表")),n.table&&s?u.a.createElement(vr.a,{className:mi.dataTableAiMsgOperateBtn,icon:u.a.createElement(qo.default,{className:mi.dataTableAiTableOperateIcon}),onClick:function(){return n.replaceTable(r.msgId)}},__("插入表单")):null)),u.a.createElement("div",{className:mi.dataTableAiMsgItem,ref:f},t.renderFrame({style:{marginBottom:24},fromUser:r.type===ti.e.user,children:u.a.createElement("div",{className:mi.dataTableAiMsg},O,m.length>0?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,__("已为你生成表单，共 {fieldCount} 个字段，如需修改，请修改指令再次发送，我将为你重新生成。",{fieldCount:m.length})),u.a.createElement("div",{className:mi.dataTableAiMsgFormWrapper},u.a.createElement("div",{className:mi.dataTableAiMsgFormName},u.a.createElement(yi.default,null),u.a.createElement("span",null,d)),m.map((function(e,t){return u.a.createElement("div",{className:mi.dataTableAiMsgField},u.a.createElement("div",{className:mi.dataTableAiMsgFieldName},t+1,".",e),u.a.createElement("div",{className:mi.dataTableAiMsgFieldType},g[v[t]]))}))),r.isComplete?u.a.createElement("div",{className:mi.dataTableAiTableOperate},P):null):null,E),bottomExtra:w}))},Oi="index-module_dataTableAiModal_7acWs",Ei=Object(Oo.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(8),r.e(1350)]).then(r.bind(null,5641))}),{suspense:!0}),Pi=function(e){var t,r=e.visible,n=e.onClose,o=e.onBookSelect;return React.createElement(wo.a,{className:Oi,visible:r,onOk:function(){return n(!1)},onCancel:function(){return n(!1)},footer:null,width:520},React.createElement("div",{style:{fontSize:"16px"}},__("新建数据表")),React.createElement(Ei,{organization:null===(t=window.appData)||void 0===t?void 0:t.organization,onBookSelect:o}))};function ji(e){return ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ji(e)}function Ci(){Ci=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==ji(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ji(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function ki(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ai(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ai(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ai(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var xi=function(e){var t,r,n=e.context,o=e.dataSource,a=n.sidebarRender,u=o.isWaitingResponse,l=o.msgList,c=o.createTable,s=Si(Object(i.useState)(!1),2),f=s[0],d=s[1],p=Object(i.useRef)(null),h=Object(i.useCallback)((function(e){p.current=e,d(!0)}),[]),y=Object(i.useCallback)(function(){var e,t=(e=Ci().mark((function e(t){return Ci().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c(p.current,t);case 4:p.current=null,d(!1);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ki(a,n,o,i,u,"next",e)}function u(e){ki(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[]);return La(n,o),t=o,r=Object(rt.b)({type:tt.a.DATA_TABLE_ASSISTANT.CONVERSATION,source:"data-table-assistant",reqFn:qe.a.ai.tableCompletion}),Object(i.useEffect)((function(){t.setStreamReqMethod(r)}),[]),React.createElement("div",null,React.createElement(pi,{sidebarRender:a,dataSource:o}),l.map((function(e,t){var r=t===l.length-1;return e.content?React.createElement("div",{key:e.msgId},React.createElement(wi,{sidebarRender:a,msg:e,dataSource:o,isLast:r,context:n,showBookSelector:h})):null})),u?React.createElement("div",null,a.renderProgress({progresses:[{status:0,text:"".concat(__("生成中..."))}]})):null,f?React.createElement(Pi,{visible:f,onClose:d,onBookSelect:y}):null)};function Ni(e){return Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ni(e)}function Ti(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Di(n.key),n)}}function Di(e){var t=function(e,t){if("object"!=Ni(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ni(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ni(t)?t:t+""}function Li(e,t,r){return t=Ii(t),function(e,t){if(t&&("object"==Ni(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ri()?Reflect.construct(t,r||[],Ii(e).constructor):t.apply(e,r))}function Ri(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ri=function(){return!!e})()}function Ii(e){return Ii=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ii(e)}function Mi(e,t){return Mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mi(e,t)}var Fi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Li(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mi(e,t)}(t,e),r=t,n=[{key:"createDatasource",value:function(){return new Na.a}},{key:"isEnable",value:function(e){var t;return!(null===(t=window.appData)||void 0===t||null===(t=t.settings)||void 0===t||!t.enable_table_ai)}},{key:"initialize",value:function(e){var t=e.doc,r=e.book,n=e.me;null!=n&&n.id&&(this.datasource.userId=e.me.id),this.datasource.book={id:null==r?void 0:r.id,namespace:null==r?void 0:r.namespace},"laketable"===t.format&&(this.datasource.tableId=e.doc.id),this.datasource.initConversation()}},{key:"destroy",value:function(){}},{key:"onContextDataChanged",value:function(e){var t,r=e.doc,n=e.book,o=e.me;null!=o&&o.id&&(this.datasource.userId=e.me.id),this.datasource.book={id:null==n?void 0:n.id,namespace:null==n?void 0:n.namespace},"laketable"===r.format&&(this.datasource.tableId=r.id,null!==(t=r.abilities)&&void 0!==t&&t.update&&this.datasource.initTable())}},{key:"renderContent",value:function(e){return u.a.createElement(xi,{context:e,dataSource:this.datasource})}},{key:"renderFooter",value:function(e){return u.a.createElement(ei,{context:e,dataSource:this.datasource})}},{key:"renderDisable",value:function(e){return e.sidebarRender.renderDisable({title:__("👋🏻 你好，我是智能数据表助手"),desc:[__("告诉我你需要收集的信息，我可以帮助你快速创建表单，轻松完成信息收集和管理。")]})}}],n&&Ti(r.prototype,n),o&&Ti(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(l.c),Bi=r(1533),Ui=[{label:__("远景写实"),prompt:"远景，写实材料风格，HDRI，4K，细腻，美感，",example:"宏大场面，如海边灯塔、繁华城市的路灯等"},{label:__("近距静物"),prompt:"焦距35mm，细腻，商用，写实照片，简洁，",example:"静物突出，背景模糊，如窗台前有一本书和一杯茶；一只手在翻书"},{label:__("宏大场面插画"),prompt:"未来派，4k，科幻，插画，",example:"太空空间站，海边城市"},{label:__("水墨中式"),prompt:"水墨画，中国风，淡雅，美感，",example:"中国风，诗人在高山上站立、亭台楼阁等"},{label:__("油画静物"),prompt:"油画，窗台前，书桌上，美感，细腻，温暖，",example:"油画风格的静物，如几本书、一瓶花灯"},{label:__("油画景物"),prompt:"油画，美感，细腻，开阔，颜色饱和度低，",example:"油画风格的景物，如花园、海边"},{label:__("水彩动植物"),prompt:"淡水彩画风格，纯白背景，快乐，平和，温暖，",example:"淡水彩，如两只猫咪，小猴子、哈士奇狗等"}],Hi="index-module_content_RuR-k",Vi="index-module_group_AdqgB",Gi="index-module_item_Zufrr",qi="index-module_selected_r-C71",zi="index-module_title_-kRF3",Wi="index-module_date_vExF5",Ki="index-module_delete_aJjwk";function Yi(e){return Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yi(e)}function Ji(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Yi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Yi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yi(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Xi(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Qi=function(e){var t=e.context,r=e.datasource,n=$i(Object(i.useState)(0),2),o=n[0],a=n[1],l=Object(m.a)(),c=r.conversationList,s=Object(i.useMemo)((function(){var e=[],t=[],r=[],n=y()(),o=y()().subtract(1,"day");return c.forEach((function(a){var i=y()(a.created_at);i.isSame(n,"day")?e.push(a):i.isSame(o,"day")?t.push(a):r.push(a)})),[{label:__("今天"),list:e},{label:__("昨天"),list:t},{label:__("之前"),list:r,fullDate:!0}]}),[c,c.length]);return Object(i.useEffect)((function(){return r.addListener({onConversationsUpdated:l,onDatasetUpdated:l})}),[]),c.length?u.a.createElement("div",{className:Hi},s.filter((function(e){return e.list.length})).map((function(t){return u.a.createElement("div",{key:t.label},u.a.createElement("span",{className:Vi},t.label),t.list.map((function(n,i){var l=n.id,c=n.title,s=n.created_at,d=l===r.conversationId,h=c||__("未命名会话");d&&(h="".concat(__("[当前会话]")," ").concat(h));var m=y()(s).format(t.fullDate?"YY/MM/DD":"HH:mm"),v=o===l;return u.a.createElement("div",{key:i,className:p()(Gi,Ji({},qi,d)),onClick:function(t){var n=null==t?void 0:t.target;null!=n&&n.closest(".".concat(Ki))||null==n||!n.closest(".".concat(zi))||(r.switchConversation(l),e.context.closeDrawer())}},u.a.createElement("span",{className:zi},h),!v&&u.a.createElement("span",{className:Wi},m),u.a.createElement(f.a,{title:__("确认删除该问答记录？"),okText:__("删除"),onConfirm:function(){r.deleteConversation(l),a(0)},onCancel:function(){return a(0)},onVisibleChange:function(e){a(e?l:0)}},u.a.createElement("span",null,u.a.createElement(b.default,{className:Ki,style:v?{display:"block"}:void 0}))))})))}))):t.sidebarRender.renderEmpty()},Zi=function(e){var t=e.context,r=e.children;return Object(i.cloneElement)(r,{onClick:function(){return t.renderDrawer({content:u.a.createElement(Qi,e),title:u.a.createElement(s.a,{variant:"title"},__("历史记录"))})}})},eu="index-module_footer_9rf5j",tu="index-module_functors_ZgddP",ru="index-module_newTopic_d7xtS",nu="index-module_actionContainer_gVn9J",ou="index-module_buttonContainer_rB7vG",au="index-module_action_HBjn+",iu="index-module_pagination_kO7pU",uu="index-module_arrow_bGPvm";function lu(e){return lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lu(e)}function cu(){cu=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==lu(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(lu(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function su(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function fu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return du(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?du(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function du(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var pu=function(e){var t,r,n=e.context,o=e.dataSource,a=n.sidebarRender,u=Object(i.useRef)(),l=[],f=Object(i.useRef)(null),d=fu(Object(i.useState)([0]),2),p=d[0],h=d[1],y=Ui.map((function(e){var t=e.label,r=e.prompt,n=Object(i.useRef)(null),o=React.createElement(vr.a,{className:au,onClick:function(){var e,t;null===(e=u.current)||void 0===e||e.setValue(r),null===(t=u.current)||void 0===t||t.focus()}},React.createElement(s.a,null,t));return l.push(n),React.createElement("div",{key:t,ref:n},o)})),b=fu(Object(i.useState)(y),2),m=b[0],v=b[1],g=fu(Object(i.useState)(0),2),_=g[0],w=g[1];return Object(i.useEffect)((function(){var e,t=[0],r=(null===(e=f.current)||void 0===e?void 0:e.offsetWidth)||0;l.reduce((function(e,n,o){var a,i=(null===(a=n.current)||void 0===a?void 0:a.offsetWidth)||0;return e+i>r?(t.push(o),i):e+i}),0),t.push(Ui.length),h(t)}),[Ui]),Object(i.useEffect)((function(){var e=p[_],t=p[_+1];v(y.slice(e,t))}),[_,p]),React.createElement(React.Fragment,null,React.createElement("div",{className:nu},React.createElement("div",{className:ou,ref:f},m),React.createElement("div",{className:iu},React.createElement(vr.a,{disabled:0===_,className:uu,onClick:function(){return w(_-1)}},React.createElement(I.default,null)),React.createElement(vr.a,{disabled:_===p.length-2,className:uu,onClick:function(){return w(_+1)}},React.createElement(Bi.default,null)))),React.createElement("div",{className:eu},a.renderInput({ref:u,disabled:o.isInRequesting,placeholder:__("来问我呀，雀雀很高兴为你服务！"),onEnter:(t=cu().mark((function e(t){var r,n;return cu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.isInRequesting||(o.generateImage(t),null===(r=u.current)||void 0===r||r.clear(),null===(n=u.current)||void 0===n||n.focus());case 1:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){su(a,n,o,i,u,"next",e)}function u(e){su(a,n,o,i,u,"throw",e)}i(void 0)}))},function(e){return r.apply(this,arguments)}),extra:React.createElement("div",{className:tu},React.createElement("div",{className:ru,onClick:function(){return o.createConversation()}},React.createElement(c.b,{name:"comment-bubble",size:16}),__("新话题")),React.createElement(Zi,{context:n,datasource:o},React.createElement(s.a,{ml:16,type:"iconButton"},React.createElement(c.b,{name:"time-outlined",size:16}))))})))},hu=function(e){var t=e.sidebarRender,r=t.renderText({text:[React.createElement(gt.a,{variant:"headline4",mb:12},__("👋🏻 你好，我是创意助手")),__("选择我擅长的风格，再给我一些文字描述，我就可以快速作画。如果画得没能让你满意，请复制问题，修改描述后再次尝试。")]});return React.createElement("div",null,t.renderFrame({fromUser:!1,children:r}))},yu=r(3699),bu="item-module_imageProgress_N4ZAy",mu="item-module_image_ak71a",vu="item-module_content_jxden",gu="item-module_hoverShowOperation_sfBGq",_u="item-module_lastShowOperation_I1OyL";function wu(){wu=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==Eu(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Eu(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function Ou(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Eu(e){return Eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eu(e)}var Pu=function(e){var t,r=e.msg,n=e.context,o=e.dataSource,a=n.sidebarRender,u=Object(m.a)(),l=r.type!==X.b.AIAnswer?r.content:JSON.parse(r.content),c="object"===Eu(l),s=Object(i.useRef)(null),f=c?null===(t=l.afts_urls)||void 0===t?void 0:t[0]:"",d=o.isLatestCompletion(r),p=c&&f?React.createElement("div",{ref:s,onClick:function(){var e=[{src:f,msrc:f}];Object(Ge.getImageBrowser)().open(e,0)}},React.createElement("img",{className:mu,src:f,onLoad:function(){return n.scrollToBottom(!0)}})):React.createElement("div",{className:vu},c?__("作为一个人工智能语言模型，这个问题超出我目前的学习范围了，您可以问我其他问题，我将尽力为您解答"):l),h=function(){var e,t=(e=wu().mark((function e(t,n){return wu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.feedback===t&&(t=K.FEEDBACK_TYPE.UNKNOWN),e.next=3,qe.a.conversation.feedback({conversation_id:o.conversationId,completion_id:r.completion_id,feedback:t});case 3:e.sent.success&&(r.feedback=t,u()),null==n||n();case 6:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ou(a,n,o,i,u,"next",e)}function u(e){Ou(a,n,o,i,u,"throw",e)}i(void 0)}))});return function(e,r){return t.apply(this,arguments)}}(),y={feedback:r.feedback,feedbackCallback:h,copy:function(){var e=window.getSelection(),t=document.createRange();return e&&s.current&&(e.rangeCount>0&&e.removeAllRanges(),t.selectNode(s.current),e.addRange(t),document.execCommand("copy"),J.a.success(__("已复制到剪贴板")),e.removeAllRanges()),""},createNote:function(){return function(e){var t,r=Object(yu.htmlToLake)((null===(t=s.current)||void 0===t?void 0:t.innerHTML)||"");e.setDocument(""),e.execCommand("paste",{types:["text/lake"],getData:function(){return r.value||r}}),e.execCommand("breakLine")}}},b=c&&f?a.renderOperation({customize:!0,operation:y,scrollToBottom:d?n.scrollToBottom:void 0}):null;return React.createElement(React.Fragment,null,c&&f?React.createElement("div",{className:bu},a.renderProgress({progresses:[{status:1,text:__("已为你完成作画")}]})):null,React.createElement("div",null,a.renderFrame({className:d?_u:gu,fromUser:r.type===X.b.SelfQuestion,bottomExtra:b,children:p})))},ju=function(e){var t=e.context,r=e.dataSource,n=t.sidebarRender,o=r.msgList,a=r.isInRequesting,l=Object(m.a)();return Object(i.useEffect)((function(){return r.addListener({onDatasetUpdated:l})}),[]),u.a.createElement("div",null,u.a.createElement(hu,{sidebarRender:n}),o.map((function(e){return u.a.createElement("div",{key:e.msgId},u.a.createElement(Pu,{msg:e,context:t,dataSource:r}))})),a?u.a.createElement("div",null,n.renderProgress({progresses:[{status:0,text:__("生成中，请稍后...")}]})):null)};function Cu(e){return Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cu(e)}function ku(){ku=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==Cu(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Cu(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function Su(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Au(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Su(a,n,o,i,u,"next",e)}function u(e){Su(a,n,o,i,u,"throw",e)}i(void 0)}))}}function xu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Iu(n.key),n)}}function Nu(e,t,r){return t=Du(t),function(e,t){if(t&&("object"==Cu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Tu()?Reflect.construct(t,r||[],Du(e).constructor):t.apply(e,r))}function Tu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tu=function(){return!!e})()}function Du(e){return Du=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Du(e)}function Lu(e,t){return Lu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lu(e,t)}function Ru(e,t,r){return(t=Iu(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iu(e){var t=function(e,t){if("object"!=Cu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Cu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cu(t)?t:t+""}var Mu=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Ru(e=Nu(this,t,[].concat(n)),"_msgList",[]),Ru(e,"_lastMsgId",void 0),Ru(e,"_conversation",void 0),Ru(e,"_conversationList",[]),Ru(e,"_isInRequesting",!1),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lu(e,t)}(t,e),r=t,n=[{key:"msgList",get:function(){return this._msgList||[]}},{key:"conversationId",get:function(){var e;return(null===(e=this._conversation)||void 0===e?void 0:e.id)||0}},{key:"conversationList",get:function(){return this._conversationList}},{key:"user",get:function(){var e;return(null===(e=window.appData)||void 0===e?void 0:e.me)||{}}},{key:"userId",get:function(){var e;return(null===(e=this.user)||void 0===e?void 0:e.id)||0}},{key:"isInRequesting",get:function(){return this._isInRequesting}},{key:"notifyDatasetUpdatedInternal",value:function(e){this.notifyDatasetUpdated({scrollImmediately:!e})}},{key:"pushMsg",value:function(e){this._msgList.push(e),this._lastMsgId=e.msgId,this.notifyDatasetUpdatedInternal(!0)}},{key:"updateConversationList",value:function(e){this._conversationList=e||[],this.notifyListener((function(e){var t;return null===(t=e.onConversationsUpdated)||void 0===t?void 0:t.call(e)}))}},{key:"buildMsgId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X.b.SelfQuestion;return Object($.a)({type:e,userId:this.userId})}},{key:"initConversion",value:(c=Au(ku().mark((function e(){var t,r,n,o,a,i,u=this;return ku().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.list({group_id:0,type:K.CONVERSATION_TYPE.PAINT_ASSISTANT});case 2:if(t=e.sent,this._msgList=[],r=t.conversations||[],this.updateConversationList(r),!r.length){e.next=15;break}return o=r[0],e.next=10,Y.webProxy.conversation.findOne({id:o.id});case 10:a=e.sent,this._conversation=o,null==a||null===(n=a.conversation)||void 0===n||null===(n=n.completions)||void 0===n||n.forEach((function(e){u.pushMsg({msgId:u.buildMsgId(),type:X.b.SelfQuestion,content:e.prompt,completion_id:e.id}),u.pushMsg({msgId:u.buildMsgId(),type:X.b.AIAnswer,content:e.completion,completion_id:e.id,feedback:e.feedback})})),e.next=19;break;case 15:return e.next=17,Y.webProxy.conversation.create({group_id:0,type:K.CONVERSATION_TYPE.PAINT_ASSISTANT});case 17:i=e.sent,this._conversation=null==i?void 0:i.conversation;case 19:this.notifyDatasetUpdatedInternal(!0);case 20:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"createConversation",value:(l=Au(ku().mark((function e(){var t;return ku().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.create({group_id:0,type:K.CONVERSATION_TYPE.PAINT_ASSISTANT});case 2:t=e.sent,this._conversation=null==t?void 0:t.conversation,this._msgList=[],this.notifyDatasetUpdatedInternal();case 6:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"generateImage",value:(u=Au(ku().mark((function e(t){var r;return ku().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._isInRequesting=!0,this.pushMsg({msgId:this.buildMsgId(),type:X.b.SelfQuestion,content:t,completion_id:0}),e.prev=2,e.next=5,Y.webProxy.ai.textToImage({conversation_id:this.conversationId,prompt:t},{useOriginResp:!0});case 5:r=e.sent,this._isInRequesting=!1,this.pushMsg({msgId:this.buildMsgId(X.b.AIAnswer),type:X.b.AIAnswer,content:JSON.stringify(r.result),completion_id:r.completion_id}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),this._isInRequesting=!1,this.pushMsg({msgId:this.buildMsgId(X.b.System),type:X.b.System,content:__("根据已知内容，无法回答该问题"),completion_id:0});case 14:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(e){return u.apply(this,arguments)})},{key:"switchConversation",value:(i=Au(ku().mark((function e(t){var r,n,o,a=this;return ku().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.conversationId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Y.webProxy.conversation.findOne({id:t});case 4:n=e.sent,o=null==n?void 0:n.conversation,this._conversation=o,this._msgList=[],null==n||null===(r=n.conversation)||void 0===r||null===(r=r.completions)||void 0===r||r.forEach((function(e){a.pushMsg({msgId:a.buildMsgId(),type:X.b.SelfQuestion,content:e.prompt,completion_id:e.id}),a.pushMsg({msgId:a.buildMsgId(),type:X.b.AIAnswer,content:e.completion,completion_id:e.id,feedback:e.feedback})})),this.notifyDatasetUpdatedInternal();case 10:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"deleteConversation",value:(a=Au(ku().mark((function e(t){var r,n;return ku().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.webProxy.conversation.deleteConversation({id:t});case 2:if(null!=(r=e.sent)&&r.success){e.next=5;break}return e.abrupt("return",!1);case 5:return n=this._conversationList.filter((function(e){return e.id!==t})),this.updateConversationList(n),t===this.conversationId&&(n.length>0?this.switchConversation(n[0].id):this.createConversation()),this.notifyDatasetUpdatedInternal(),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"isLatestCompletion",value:function(e){var t;return!(this._isInRequesting||null===(t=this._msgList)||void 0===t||!t.length)&&e.type!==X.b.SelfQuestion&&this._lastMsgId===e.msgId}}],n&&xu(r.prototype,n),o&&xu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,a,i,u,l,c}(l.b);function Fu(e){return Fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fu(e)}function Bu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Uu(n.key),n)}}function Uu(e){var t=function(e,t){if("object"!=Fu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fu(t)?t:t+""}function Hu(e,t,r){return t=Gu(t),function(e,t){if(t&&("object"==Fu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Vu()?Reflect.construct(t,r||[],Gu(e).constructor):t.apply(e,r))}function Vu(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Vu=function(){return!!e})()}function Gu(e){return Gu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gu(e)}function qu(e,t){return qu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qu(e,t)}var zu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Hu(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qu(e,t)}(t,e),r=t,n=[{key:"createDatasource",value:function(){return new Mu}},{key:"isEnable",value:function(e){var t;return null===(t=window.appData.settings)||void 0===t?void 0:t.enable_painting_ai}},{key:"initialize",value:function(){this.datasource.initConversion()}},{key:"destroy",value:function(){}},{key:"onContextDataChanged",value:function(){}},{key:"renderContent",value:function(e){return React.createElement(ju,{context:e,dataSource:this.datasource})}},{key:"renderFooter",value:function(e){return React.createElement(pu,{context:e,dataSource:this.datasource})}},{key:"renderDisable",value:function(e){return e.sidebarRender.renderDisable({title:__("👋🏻 你好，我是创意助手"),desc:[__("选择我擅长的风格，再给我一些文字描述，我就可以快速作画。如果画得没能让你满意，请复制问题，修改描述后再次尝试。"),__("🙇 很抱歉！当前助手在此页面不可用，请在右侧切换其他助手")]})}}],n&&Bu(r.prototype,n),o&&Bu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(l.c),Wu=r(4088),Ku=function(e){var t=e.sidebarRender,r=t.renderText({text:[React.createElement(gt.a,{variant:"headline4",mb:12},"👋🏻 你好，我是 SRE 文档写作助手"),"选择我为你提供的指令，可以更好地帮助你阅读当前文稿"]});return React.createElement("div",null,t.renderFrame({fromUser:!1,children:r}))},Yu="user",Ju="ai",$u={userCard:"item-module_userCard_Qocaz",aiCard:"item-module_aiCard_GEkTA",eventActionTip:"item-module_eventActionTip_iwe2s",actionText:"item-module_actionText_BWpaF"},Xu=r(4298),Qu="index-module_code_less_8xBZC",Zu=new(r.n(Xu).a)({html:!0,breaks:!0});Zu.renderer.rules.link_open=function(e,t,r,n,o){return e[t].attrPush(["target","_blank"]),o.renderToken(e,t,r)};var el=function(e){var t=e.dataSource;return u.a.createElement("div",{className:Qu,dangerouslySetInnerHTML:{__html:Zu.render(t)},style:{display:"inline-block"}})};function tl(e){return u.a.createElement("div",{className:$u.userCard},e.children)}function rl(e){return u.a.createElement("div",{className:$u.aiCard},e.children)}function nl(e){var t=e.data;return u.a.createElement(el,{dataSource:t})}function ol(e){var t=e.data;return u.a.createElement(u.a.Fragment,null,u.a.createElement(el,{dataSource:t.content}),u.a.createElement("div",{className:$u.eventActionTip},"针对选区："),u.a.createElement(vr.a,{size:"small",className:$u.actionText,onClick:function(){window.dispatchEvent(new CustomEvent("DocGen.RelatedEventADD",{detail:{emergency_id:t.emergency_id,content:t.content}}))}},"添加"))}var al=function(e){var t=e.sidebarRender,r=e.msg;return u.a.createElement("div",null,t.renderFrame({style:{marginBottom:24},className:r.level?$u.fullWidth:"",fromUser:r.type===Yu,children:u.a.createElement(u.a.Fragment,null,r.type===Yu?u.a.createElement(tl,null,r.content):u.a.createElement(rl,null,"relatedEvents"===r.content.type&&u.a.createElement(ol,{data:r.content.data}),"suggestion"===r.content.type&&u.a.createElement(nl,{data:r.content.data}),"text"===r.content.type&&r.content.data))}))};function il(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ul(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ul(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ul(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ll=function(e){var t=e.context,r=e.dataSource,n=t.sidebarRender,o=r.msgList,a=r.isInRequesting,l=il(Object(i.useReducer)((function(e){return e+1}),0),2)[1];return Object(i.useEffect)((function(){return r.addListener({onDatasetUpdated:l})}),[]),u.a.createElement("div",null,u.a.createElement(Ku,{sidebarRender:n}),null==o?void 0:o.map((function(e){return u.a.createElement("div",{key:e.msgId},u.a.createElement(al,{sidebarRender:n,msg:e,dataSource:r}))})),a?u.a.createElement("div",null,n.renderProgress({progresses:[{status:0,text:"生成中，请稍后..."}]})):null)},cl=r(4381),sl={footer:"index-module_footer_QizuZ",outerFunctors:"index-module_outerFunctors_KgviU",item:"index-module_item_qLBZR",functors:"index-module_functors_qaVlW",newTopic:"index-module_newTopic_R8nUS",inputWrapper:"index-module_inputWrapper_1-49G"},fl=function(e){e.context;var t=e.dataSource,r=[];Object(i.useEffect)((function(){var e=function(e){var r=e.detail.eventId;t.findRelatedEvent(r)};return window.addEventListener("DocGen.GetRelatedEvents",e),function(){window.removeEventListener("DocGen.GetRelatedEvents",e)}}),[]),Object(i.useEffect)((function(){var e=function(e){var r=e.detail.intention;t.checkDiagnoseHanlder(r)};return window.addEventListener("DocGen.DiagnosePathValidate",e),function(){window.removeEventListener("DocGen.DiagnosePathValidate",e)}}),[]),Object(i.useEffect)((function(){var e=function(e){var r=e.detail.intention;t.checkEventsHanlder(r)};return window.addEventListener("DocGen.EmergencySummaryValidate",e),function(){window.removeEventListener("DocGen.EmergencySummaryValidate",e)}}),[]),Object(i.useEffect)((function(){var e=function(e){var r=e.detail.intention;t.expSummaryEventHanlder(r)};return window.addEventListener("DocGen.ExpSummaryValidate",e),function(){window.removeEventListener("DocGen.ExpSummaryValidate",e)}}),[]);var n=Object(cl.b)(),o=Object(cl.a)(),a=Object(cl.c)();return n.superSideBarActionVisible&&(r=[{disabled:!n.superSideBarActionEnable,label:"事件约束性校验",onClick:n.onSuperSideBarActionClick}]),o.superSideBarActionVisible&&(r=[{disabled:!o.superSideBarActionEnable,label:"路径约束性校验",onClick:o.onSuperSideBarActionClick}]),a.superSideBarActionVisible&&(r=[{disabled:!a.superSideBarActionEnable,label:"经验约束性校验",onClick:a.onSuperSideBarActionClick}]),u.a.createElement("div",{className:sl.footer},u.a.createElement("div",{className:sl.outerFunctors},r.map((function(e,t){var n=e.label,o=e.onClick,a=e.disabled,i=u.a.createElement(vr.a,{size:"small",disabled:a,className:sl.item,key:n,onClick:o},u.a.createElement("span",{className:sl.label},n));return u.a.createElement(u.a.Fragment,null,i,t<r.length-1&&u.a.createElement("div",{className:sl.divider}))}))))},dl=r(3901),pl=r(3934);function hl(e){return hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hl(e)}function yl(){yl=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==hl(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(hl(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function bl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ml(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(r),!0).forEach((function(t){_l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vl(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function gl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wl(n.key),n)}}function _l(e,t,r){return(t=wl(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wl(e){var t=function(e,t){if("object"!=hl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=hl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hl(t)?t:t+""}var Ol=function(e){return new Promise((function(t){return setTimeout(t,e)}))},El=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_l(this,"msgHistory",[]),_l(this,"type",void 0),this.type=t,this.msgHistory=r},t=[{key:"say",value:(n=yl().mark((function e(t){var r,n=arguments;return yl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=n.length>1&&void 0!==n[1]?n[1]:{}).delay){e.next=4;break}return e.next=4,Ol(r.delay);case 4:this._pushMsg(ml({msgId:Math.floor(1e7*Math.random()),type:this.type,content:t},r));case 5:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){vl(a,r,o,i,u,"next",e)}function u(e){vl(a,r,o,i,u,"throw",e)}i(void 0)}))},function(e){return o.apply(this,arguments)})},{key:"_pushMsg",value:function(e){this.msgHistory.push(e)}}],t&&gl(e.prototype,t),r&&gl(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,o}();function Pl(e){return Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(e)}function jl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sl(n.key),n)}}function Cl(e,t,r){return t&&jl(e.prototype,t),r&&jl(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kl(e,t,r){return(t=Sl(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sl(e){var t=function(e,t){if("object"!=Pl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Pl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pl(t)?t:t+""}var Al=Cl((function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),kl(this,"msgHistory",void 0),kl(this,"sessionId",void 0),kl(this,"ai",void 0),kl(this,"user",void 0),kl(this,"isWaitingAIResponse",!1),this.sessionId=t,this.msgHistory=new Proxy([],{set:function(e,t,o){if("length"===t){var a=e[e.length-1];a.type===Yu&&(n.isWaitingAIResponse=!0),a.type===Ju&&(n.isWaitingAIResponse=!1),null==r||r()}return Reflect.set(e,t,o)}}),this.ai=new El(Ju,this.msgHistory),this.user=new El(Yu,this.msgHistory)}));function xl(e){return xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xl(e)}function Nl(){Nl=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==xl(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(xl(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function Tl(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Dl(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Tl(a,n,o,i,u,"next",e)}function u(e){Tl(a,n,o,i,u,"throw",e)}i(void 0)}))}}function Ll(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ul(n.key),n)}}function Rl(e,t,r){return t=Ml(t),function(e,t){if(t&&("object"==xl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Il()?Reflect.construct(t,r||[],Ml(e).constructor):t.apply(e,r))}function Il(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Il=function(){return!!e})()}function Ml(e){return Ml=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ml(e)}function Fl(e,t){return Fl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fl(e,t)}function Bl(e,t,r){return(t=Ul(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ul(e){var t=function(e,t){if("object"!=xl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xl(t)?t:t+""}var Hl=new Map,Vl=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Bl(e=Rl(this,t,[].concat(n)),"session",null),Bl(e,"feedbackCallback",void 0),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fl(e,t)}(t,e),r=t,n=[{key:"msgList",get:function(){var e;return null===(e=this.session)||void 0===e?void 0:e.msgHistory}},{key:"isInRequesting",get:function(){var e;return null===(e=this.session)||void 0===e?void 0:e.isWaitingAIResponse}},{key:"initialize",value:function(e){var t=e.target,r="doc_gen_assistant_".concat(null==t?void 0:t.id),n=Hl.get(r);if(!n)return this.session=new Al(r,this.notifyDatasetUpdated.bind(this,{scrollImmediately:!0})),void Hl.set(r,this.session);this.session=n}},{key:"checkEventsHanlder",value:(l=Dl(Nl().mark((function e(t){var r,n,o,a;return Nl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.session,e.prev=1,e.next=4,null==r?void 0:r.user.say("请针对我填写的告警事件进行一次约束性校验");case 4:return e.next=6,Object(pl.a)((function(){return dl.l({intention:t})}),(function(e){var t=e.msgId;return dl.h({msgId:t})}));case 6:return o=e.sent,a="",a=o.success&&1===(null===(n=o.data)||void 0===n?void 0:n.status)?o.data.data||"":"校验失败",e.next=11,null==r?void 0:r.ai.say({type:"suggestion",data:a});case 11:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.t0=e.catch(1),e.next=18,null==r?void 0:r.ai.say({type:"text",data:"请求异常"});case 18:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(e){return l.apply(this,arguments)})},{key:"checkDiagnoseHanlder",value:(u=Dl(Nl().mark((function e(t){var r,n,o,a;return Nl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.session,e.prev=1,e.next=4,null==r?void 0:r.user.say("请针对我填写的应急过程进行一次约束性校验");case 4:return e.next=6,Object(pl.a)((function(){return dl.m({intention:t})}),(function(e){var t=e.msgId;return dl.h({msgId:t})}));case 6:return o=e.sent,a="",a=o.success&&1===(null===(n=o.data)||void 0===n?void 0:n.status)?o.data.data.summary||o.data.data||"":"请求异常",e.next=11,null==r?void 0:r.ai.say({type:"suggestion",data:a});case 11:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.t0=e.catch(1),e.next=18,null==r?void 0:r.ai.say({type:"text",data:"请求异常"});case 18:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(e){return u.apply(this,arguments)})},{key:"expSummaryEventHanlder",value:(i=Dl(Nl().mark((function e(t){var r,n,o,a;return Nl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.session,e.prev=1,e.next=4,null==r?void 0:r.user.say("请针对我填写的应急经验进行一次约束性校验");case 4:return e.next=6,Object(pl.a)((function(){return dl.g({intention:t})}),(function(e){var t=e.msgId;return dl.h({msgId:t})}));case 6:return o=e.sent,a="",a=o.success&&1===(null===(n=o.data)||void 0===n?void 0:n.status)?o.data.data.summary||"":"请求异常",e.next=11,null==r?void 0:r.ai.say({type:"suggestion",data:a});case 11:return e.abrupt("return",e.sent);case 14:return e.prev=14,e.t0=e.catch(1),e.next=18,null==r?void 0:r.ai.say({type:"text",data:"请求异常"});case 18:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(e){return i.apply(this,arguments)})},{key:"findRelatedEvent",value:(a=Dl(Nl().mark((function e(t){var r,n,o,a;return Nl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.session,e.prev=1,e.next=4,null==r?void 0:r.user.say("疑似关联事件");case 4:return e.next=6,Object(pl.a)((function(){return dl.i({intention:t})}),(function(e){var t=e.msgId;return dl.h({msgId:t})}),{delayTime:1e3,retryIntervalTime:1e3,retryCount:4});case 6:if(o=e.sent,a=[],0!==(a=o.success&&1===(null===(n=o.data)||void 0===n?void 0:n.status)?o.data.data.data.dict.emcEventListResult.map((function(e){return{emergency_id:e.emergencyId,content:e.content}})):[]).length){e.next=13;break}return e.next=12,null==r?void 0:r.ai.say({type:"text",data:"暂无关联事件"});case 12:return e.abrupt("return",e.sent);case 13:return e.next=15,Promise.all(a.map(function(){var e=Dl(Nl().mark((function e(t){return Nl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==r?void 0:r.ai.say({type:"relatedEvents",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(1),e.next=21,null==r?void 0:r.ai.say({type:"text",data:"请求异常"},{delay:500});case 21:case"end":return e.stop()}}),e,this,[[1,17]])}))),function(e){return a.apply(this,arguments)})}],n&&Ll(r.prototype,n),o&&Ll(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o,a,i,u,l}(l.b),Gl=new Vl;function ql(e){return ql="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ql(e)}function zl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wl(n.key),n)}}function Wl(e){var t=function(e,t){if("object"!=ql(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ql(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ql(t)?t:t+""}function Kl(e,t,r){return t=Jl(t),function(e,t){if(t&&("object"==ql(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Yl()?Reflect.construct(t,r||[],Jl(e).constructor):t.apply(e,r))}function Yl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yl=function(){return!!e})()}function Jl(e){return Jl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jl(e)}function $l(e,t){return $l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$l(e,t)}var Xl,Ql,Zl,ec,tc,rc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Kl(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$l(e,t)}(t,e),r=t,(n=[{key:"isEnable",value:function(e){return!0}},{key:"createDatasource",value:function(){return Gl}},{key:"initialize",value:function(e){this.datasource.initialize(e)}},{key:"onContextDataChanged",value:function(e){this.datasource.initialize(e)}},{key:"renderContent",value:function(e){return e.contextData.target.type===Wu.a.SRE?u.a.createElement(ll,{context:e,dataSource:this.datasource}):null}},{key:"renderFooter",value:function(e){return e.contextData.target.type===Wu.a.SRE?u.a.createElement(fl,{context:e,dataSource:this.datasource}):null}}])&&zl(r.prototype,n),o&&zl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(l.c);function nc(e){return nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nc(e)}function oc(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=nc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=nc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nc(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ac=(oc(oc(oc(oc(oc(oc(oc(oc(oc(oc(tc={},a.a.GroupAssistant,{type:a.a.GroupAssistant,label:__("领域专家助手"),description:__("我会帮你将知识库里的内容做概括、索引，并在团队范围内问答你的问题。"),icon:"icon-ai-team",hasWatermark:!0,disableUnpin:!1,Provider:Dt}),a.a.UserAssistant,{type:a.a.UserAssistant,label:__("个人知识管理助手"),description:__("你可以向我提问，我将依据你的知识库和笔记为你回答，帮助你高效利用你的知识积累。"),icon:"icon-ai-person-qa",hasWatermark:!0,disableUnpin:!1,Provider:Qt}),a.a.ReadAssistant,{type:a.a.ReadAssistant,label:__("阅读助手"),description:__("我可以帮你快速概括文档内容，并可针对字、词、句做解释、翻译、摘要总结等。"),icon:"icon-ai-read",hasWatermark:!0,disableUnpin:!0,Provider:gn}),a.a.SheetAssistant,{type:a.a.SheetAssistant,label:__("表格助手"),icon:"icon-ai-table",description:__("你可以跟我说一段文字描述，我会帮你快捷生成表格内容，并可以快速插入文档中。"),hasWatermark:!0,disableUnpin:!0,Provider:xa}),a.a.DataTableAssistant,{type:a.a.DataTableAssistant,label:__("数据表助手"),icon:"icon-ai-data",description:__("告诉我你需要收集的信息，我可以帮助你快速创建表单，轻松完成信息收集和管理。"),hasWatermark:!0,disableUnpin:!0,Provider:Fi}),a.a.PaintAssistant,{type:a.a.PaintAssistant,label:__("创意助手"),icon:"icon-ai-pic",description:__("我可以根据你的描述作画，请先选择我擅长的风格，再修改、补充描述，我会画的更好哦。"),hasWatermark:!0,disableUnpin:!0,Provider:zu}),a.a.ReviewAssistant,{type:a.a.ReviewAssistant,label:__("智能评审助手"),icon:"icon-ai-review",description:__("智能评审助手利用大模型技术自动分析PRD、处理评审数据，提供职能关注点判断、针对性的评审建议和决策支持。"),hasWatermark:!0,disableUnpin:!1,Provider:null===(Xl=window.appData.settings)||void 0===Xl?void 0:Xl.review_assistant_provider_url}),a.a.CodeFuseAssistant,{type:a.a.CodeFuseAssistant,label:__("代码助手"),icon:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*Hp3-RY5U8aoAAAAAAAAAAAAADvuFAQ/original",description:__("我可以根据需求文字描述自动生成代码、解释代码的含义、为代码片段添加注释、自动生成测试用例代码等。"),hasWatermark:!0,disableUnpin:!1,Provider:null===(Ql=window.appData.settings)||void 0===Ql?void 0:Ql.codefuse_assistant_provider_url}),a.a.OutlineAssistant,{type:a.a.OutlineAssistant,label:"大纲助手",icon:"icon-ai-outline-assistant",description:"我将帮你分解写作主题，并逐步完成长篇文档的深度写作，请按我的引导使用。",hasWatermark:!0,disableUnpin:!1,Provider:Ro}),a.a.OpsGptAssistant,{type:a.a.OpsGptAssistant,label:"运维助手",icon:"",description:"帮助您完成日常信息查询、发起标准运维操作、故障定位排查、以及技术风险运维知识沉淀等任务。",hasWatermark:!0,disableUnpin:!1,Provider:null===(Zl=window.appData.settings)||void 0===Zl?void 0:Zl.opsgpt_assistant_provider_url}),oc(oc(tc,a.a.ThirdPartyAssistant,{type:a.a.ThirdPartyAssistant,label:"开发助手",icon:"icon-ai-debug",description:"这是一个只在开发中使用的助手。",hasWatermark:!0,disableUnpin:!1,Provider:(null===(ec=window.appData.settings)||void 0===ec?void 0:ec.debug_assistant_provider_url)||"http://127.0.0.1"}),a.a.DocGenAssistant,{type:a.a.DocGenAssistant,label:"文档写作助手",icon:"icon-ai-review",description:"文档写作助手",hasWatermark:!0,disableUnpin:!0,Provider:rc})),ic=o()(ac,[a.a.UserAssistant,a.a.ReadAssistant,a.a.PaintAssistant,a.a.SheetAssistant,a.a.DataTableAssistant,a.a.OutlineAssistant].filter(lc)),uc=o()(ac,[a.a.UserAssistant,a.a.ReadAssistant,a.a.SheetAssistant,a.a.DataTableAssistant,a.a.PaintAssistant,a.a.ThirdPartyAssistant].filter(lc));function lc(e){var t,r,n,o,i,u,l,c,s;switch(e){case a.a.UserAssistant:return window.appData.isYuque&&1===(null===(t=window.appData.zone)||void 0===t?void 0:t.id)&&(null===(r=window.appData.settings)||void 0===r?void 0:r.user_assistant_enabled);case a.a.GroupAssistant:return 1===(null===(n=window.appData.zone)||void 0===n?void 0:n.id);case a.a.BookAssistant:return 1===(null===(o=window.appData.zone)||void 0===o?void 0:o.id);case a.a.PaintAssistant:return 1===(null===(i=window.appData.zone)||void 0===i?void 0:i.id)&&(null===(u=window.appData.settings)||void 0===u?void 0:u.enable_painting_ai);case a.a.ReviewAssistant:return null===(l=window.appData.settings)||void 0===l?void 0:l.enable_review_assistant;case a.a.CodeFuseAssistant:return null===(c=window.appData.settings)||void 0===c?void 0:c.enable_codefuse_assistant;case a.a.ThirdPartyAssistant:return null===(s=window.appData.settings)||void 0===s?void 0:s.enable_debug_assistant;case a.a.OutlineAssistant:return window.appData.canUseAiOutline;case a.a.DataTableAssistant:case a.a.SheetAssistant:return!window.appData.isYuque;default:return!0}}},,,function(e,t,r){"use strict";r.d(t,"b",(function(){return f})),r.d(t,"a",(function(){return d}));var n=r(0),o=r.n(n),a=r(249),i=r(1296),u=r(3881),l=r(3860),c="index-module_superSidebarEntry_AgJRF",s="index-module_icon_GwSVd",f="https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*iyYFT5l53_EAAAAAAAAAAAAADvuFAQ/original",d=function(){var e=Object(i.a)();Object(n.useEffect)((function(){return l.a.addListener({onVisibilityChanged:e})}),[]);var t=l.a.isExpanded,r=Object(u.b)().rightSidebarWidth;return t?null:o.a.createElement("div",{className:"".concat(c," yuque-super-sidebar-entry yuque-global-popup"),style:{right:r+24}},o.a.createElement(a.a,{src:f,darkAlpha:.7,className:s,onClick:function(){t?l.a.switchCollapsed():l.a.switchExpand()}}))}},function(e,t,r){"use strict";r(3343);var n=r(3885),o=(r(305),r(103)),a=(r(185),r(66)),i=(r(44),r(10)),u=r(0),l=r.n(u),c=r(2),s=r.n(c),f=r(933),d=r(1532),p=r(416),h=r.n(p),y=r(739),b="Tag-module_wrapper_hMv3z",m="Tag-module_add_2EgPb";function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(){g=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:S(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function _(){}function w(){}var O={};c(O,i,(function(){return this}));var E=Object.getPrototypeOf,P=E&&E(E(D([])));P&&P!==r&&n.call(P,i)&&(O=P);var j=w.prototype=m.prototype=Object.create(O);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==v(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=A(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(v(t)+" is not iterable")}return _.prototype=w,o(j,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:_,configurable:!0}),_.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},C(k.prototype),c(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(j),c(j,l,"Generator"),c(j,i,(function(){return this})),c(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function _(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){_(a,n,o,i,u,"next",e)}function u(e){_(a,n,o,i,u,"throw",e)}i(void 0)}))}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var P=h()((function(e,t){t(e)}),400),j=function(e){var t=e.docId,r=e.group,n=e.tagBiz,o=e.onChange,a=O(Object(u.useState)([]),2),l=a[0],c=a[1],s=O(Object(u.useState)([]),2),f=s[0],d=s[1],p=O(Object(u.useState)(""),2),h=p[0],y=p[1],b=O(Object(u.useState)(!1),2),m=b[0],v=b[1];function _(e,t){return E.apply(this,arguments)}function E(){return(E=w(g().mark((function e(r,a){var u,s,f;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.createTag({title:r,currentTags:l,docId:t});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(u=e.t0,s=u.error,f=u.data,!s){e.next=12;break}if(i.a.error(s),"blur"===a){e.next=12;break}return e.abrupt("return");case 12:v(!1),y(""),d([]),f&&(c(f),o(f));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=w(g().mark((function e(r){var a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.destroy({docId:t,id:r},l);case 2:a=e.sent,c(a),o(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=w(g().mark((function e(o){var a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getSuggest({target:r.login,query:o,docId:t});case 2:a=e.sent,d(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=w(g().mark((function e(t){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==(t.keyCode||t.which)){e.next=6;break}return t.preventDefault(),t.stopPropagation(),e.next=6,_(t.target.value);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{state:{tagsArray:l,suggestOptions:f,showInput:m,inputValue:h},setTagsArray:c,deleteTag:function(e){return P.apply(this,arguments)},createTag:_,getSuggest:function(e){return j.apply(this,arguments)},setInputShowStatus:v,handleKeydown:function(e){return C.apply(this,arguments)},setInputValue:y}},C=function(e){var t=e.tagsArray,r=e.group,n=e.editable,i=e.deleteTag;return t.map((function(e){var t=e.title,u=e.id;return l.a.createElement(o.a,{className:"doc-tag",key:u},l.a.createElement("a",{className:"tag-title",target:"_blank","data-desktoptarget":"_blank",href:"/r/".concat(r.login,"/tags?tag=").concat(encodeURIComponent(t))},t),n&&l.a.createElement(a.a,{title:__("确认删除标签"),onConfirm:function(){i(u)},okText:__("确认"),cancelText:__("取消"),placement:"bottom"},l.a.createElement(f.default,{style:{marginLeft:4},width:8})))}))},k=function(e){var t=e.tags,r=e.editable,o=e.docId,a=e.group,i=e.tagBiz,c=e.onChange,s=j({docId:o,group:a,tagBiz:i,onChange:c}),f=s.state,p=f.tagsArray,h=f.showInput,v=f.suggestOptions,g=f.inputValue,_=s.getSuggest,w=s.deleteTag,O=s.setInputShowStatus,E=s.handleKeydown,k=s.setTagsArray,S=s.setInputValue,A=s.createTag,x=(p?p.length:0)>=y.MAX_COUNT,N=r&&!h&&!x,T=r&&h;Object(u.useEffect)((function(){k(t),c(t)}),[k,t]);var D=l.a.createElement(C,{tagsArray:p,group:a,editable:r,deleteTag:w,tagBiz:i});return r?l.a.createElement("div",{className:b,"data-testid":"editable-tag"},D,N&&l.a.createElement("span",{className:m,onClick:function(){return O(!0)},"data-testid":"edit-btn"},l.a.createElement(d.default,null)),T&&l.a.createElement(n.a,{"data-testid":"tag-suggest",defaultActiveFirstOption:!1,className:"doc-tag-auto-complete",autoFocus:!0,options:v,onChange:function(e){S(e),P(e,_)},onSelect:A,style:{width:"200px"},backfill:!0,value:g,onBlur:function(e){A(e.target.value,"blur")},onInputKeyDown:E})):l.a.createElement("div",{className:b,"data-testid":"only-read-tag"},D)};k.useViewModel=j,k.propTypes={tags:s.a.array.isRequired,docId:s.a.number,editable:s.a.bool,group:s.a.object,tagBiz:s.a.object,onChange:s.a.func},k.defaultProps={onChange:function(){}};t.a=k},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(449),i="index-module_wrapperBg_h50iC",u="index-module_area1_36tPA",l="index-module_area2_MaV53",c="index-module_area3_z6y4G",s="index-module_area4_R4Klj";function f(){return Object(a.a)().isDarkMode?null:o.a.createElement("div",{className:i},o.a.createElement("div",{className:u}),o.a.createElement("div",{className:l}),o.a.createElement("div",{className:c}),o.a.createElement("div",{className:s}))}t.a=Object(n.memo)(f)},,,,function(e,t,r){"use strict";var n=r(3473),o=r(5209),a=r(5213),i=r(5214),u=r(5223),l=r(5237),c=r(5251),s=r(4300),f=r(5253),d={default:r(5254),zero:r(5255),commonmark:r(5256)},p=/^(vbscript|javascript|file|data):/,h=/^data:image\/(gif|png|jpeg|webp);/;function y(e){var t=e.trim().toLowerCase();return!p.test(t)||!!h.test(t)}var b=["http:","https:","mailto:"];function m(e){var t=s.parse(e,!0);if(t.hostname&&(!t.protocol||b.indexOf(t.protocol)>=0))try{t.hostname=f.toASCII(t.hostname)}catch(e){}return s.encode(s.format(t))}function v(e){var t=s.parse(e,!0);if(t.hostname&&(!t.protocol||b.indexOf(t.protocol)>=0))try{t.hostname=f.toUnicode(t.hostname)}catch(e){}return s.decode(s.format(t),s.decode.defaultChars+"%")}function g(e,t){if(!(this instanceof g))return new g(e,t);t||n.isString(e)||(t=e||{},e="default"),this.inline=new l,this.block=new u,this.core=new i,this.renderer=new a,this.linkify=new c,this.validateLink=y,this.normalizeLink=m,this.normalizeLinkText=v,this.utils=n,this.helpers=n.assign({},o),this.options={},this.configure(e),t&&this.set(t)}g.prototype.set=function(e){return n.assign(this.options,e),this},g.prototype.configure=function(e){var t,r=this;if(n.isString(e)&&!(e=d[t=e]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&r.set(e.options),e.components&&Object.keys(e.components).forEach((function(t){e.components[t].rules&&r[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&r[t].ruler2.enableOnly(e.components[t].rules2)})),this},g.prototype.enable=function(e,t){var r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){r=r.concat(this[t].ruler.enable(e,!0))}),this),r=r.concat(this.inline.ruler2.enable(e,!0));var n=e.filter((function(e){return r.indexOf(e)<0}));if(n.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this},g.prototype.disable=function(e,t){var r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){r=r.concat(this[t].ruler.disable(e,!0))}),this),r=r.concat(this.inline.ruler2.disable(e,!0));var n=e.filter((function(e){return r.indexOf(e)<0}));if(n.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this},g.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},g.prototype.parse=function(e,t){if("string"!=typeof e)throw new Error("Input data should be a String");var r=new this.core.State(e,this,t);return this.core.process(r),r.tokens},g.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},g.prototype.parseInline=function(e,t){var r=new this.core.State(e,this,t);return r.inlineMode=!0,this.core.process(r),r.tokens},g.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)},e.exports=g},function(e,t){e.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}},function(e,t,r){"use strict";var n={};function o(e,t,r){var a,i,u,l,c,s="";for("string"!=typeof t&&(r=t,t=o.defaultChars),void 0===r&&(r=!0),c=function(e){var t,r,o=n[e];if(o)return o;for(o=n[e]=[],t=0;t<128;t++)r=String.fromCharCode(t),/^[0-9a-z]$/i.test(r)?o.push(r):o.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)o[e.charCodeAt(t)]=e[t];return o}(t),a=0,i=e.length;a<i;a++)if(u=e.charCodeAt(a),r&&37===u&&a+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(a+1,a+3)))s+=e.slice(a,a+3),a+=2;else if(u<128)s+=c[u];else if(u>=55296&&u<=57343){if(u>=55296&&u<=56319&&a+1<i&&(l=e.charCodeAt(a+1))>=56320&&l<=57343){s+=encodeURIComponent(e[a]+e[a+1]),a++;continue}s+="%EF%BF%BD"}else s+=encodeURIComponent(e[a]);return s}o.defaultChars=";/?:@&=+$,-_.!~*'()#",o.componentChars="-_.!~*'()",e.exports=o},function(e,t,r){"use strict";var n={};function o(e,t){var r;return"string"!=typeof t&&(t=o.defaultChars),r=function(e){var t,r,o=n[e];if(o)return o;for(o=n[e]=[],t=0;t<128;t++)r=String.fromCharCode(t),o.push(r);for(t=0;t<e.length;t++)o[r=e.charCodeAt(t)]="%"+("0"+r.toString(16).toUpperCase()).slice(-2);return o}(t),e.replace(/(%[a-f0-9]{2})+/gi,(function(e){var t,n,o,a,i,u,l,c="";for(t=0,n=e.length;t<n;t+=3)(o=parseInt(e.slice(t+1,t+3),16))<128?c+=r[o]:192==(224&o)&&t+3<n&&128==(192&(a=parseInt(e.slice(t+4,t+6),16)))?(c+=(l=o<<6&1984|63&a)<128?"��":String.fromCharCode(l),t+=3):224==(240&o)&&t+6<n&&(a=parseInt(e.slice(t+4,t+6),16),i=parseInt(e.slice(t+7,t+9),16),128==(192&a)&&128==(192&i))?(c+=(l=o<<12&61440|a<<6&4032|63&i)<2048||l>=55296&&l<=57343?"���":String.fromCharCode(l),t+=6):240==(248&o)&&t+9<n&&(a=parseInt(e.slice(t+4,t+6),16),i=parseInt(e.slice(t+7,t+9),16),u=parseInt(e.slice(t+10,t+12),16),128==(192&a)&&128==(192&i)&&128==(192&u))?((l=o<<18&1835008|a<<12&258048|i<<6&4032|63&u)<65536||l>1114111?c+="����":(l-=65536,c+=String.fromCharCode(55296+(l>>10),56320+(1023&l))),t+=9):c+="�";return c}))}o.defaultChars=";/?:@&=+$,#",o.componentChars="",e.exports=o},function(e,t,r){"use strict";e.exports=function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""}},function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),c=["%","/","?",";","#"].concat(l),s=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},h={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};n.prototype.parse=function(e,t){var r,n,a,u,l,y=e;if(y=y.trim(),!t&&1===e.split("#").length){var b=i.exec(y);if(b)return this.pathname=b[1],b[2]&&(this.search=b[2]),this}var m=o.exec(y);if(m&&(a=(m=m[0]).toLowerCase(),this.protocol=m,y=y.substr(m.length)),(t||m||y.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(l="//"===y.substr(0,2))||m&&p[m]||(y=y.substr(2),this.slashes=!0)),!p[m]&&(l||m&&!h[m])){var v,g,_=-1;for(r=0;r<s.length;r++)-1!==(u=y.indexOf(s[r]))&&(-1===_||u<_)&&(_=u);for(-1!==(g=-1===_?y.lastIndexOf("@"):y.lastIndexOf("@",_))&&(v=y.slice(0,g),y=y.slice(g+1),this.auth=v),_=-1,r=0;r<c.length;r++)-1!==(u=y.indexOf(c[r]))&&(-1===_||u<_)&&(_=u);-1===_&&(_=y.length),":"===y[_-1]&&_--;var w=y.slice(0,_);y=y.slice(_),this.parseHost(w),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O){var E=this.hostname.split(/\./);for(r=0,n=E.length;r<n;r++){var P=E[r];if(P&&!P.match(f)){for(var j="",C=0,k=P.length;C<k;C++)P.charCodeAt(C)>127?j+="x":j+=P[C];if(!j.match(f)){var S=E.slice(0,r),A=E.slice(r+1),x=P.match(d);x&&(S.push(x[1]),A.unshift(x[2])),A.length&&(y=A.join(".")+y),this.hostname=S.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var N=y.indexOf("#");-1!==N&&(this.hash=y.substr(N),y=y.slice(0,N));var T=y.indexOf("?");return-1!==T&&(this.search=y.substr(T),y=y.slice(0,T)),y&&(this.pathname=y),h[a]&&this.hostname&&!this.pathname&&(this.pathname=""),this},n.prototype.parseHost=function(e){var t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},e.exports=function(e,t){if(e&&e instanceof n)return e;var r=new n;return r.parse(e,t),r}},function(e,t,r){"use strict";t.Any=r(4301),t.Cc=r(4302),t.Cf=r(5208),t.P=r(4056),t.Z=r(4303)},function(e,t){e.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},function(e,t,r){"use strict";t.parseLinkLabel=r(5210),t.parseLinkDestination=r(5211),t.parseLinkTitle=r(5212)},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,a,i,u=-1,l=e.posMax,c=e.pos;for(e.pos=t+1,n=1;e.pos<l;){if(93===(a=e.src.charCodeAt(e.pos))&&0===--n){o=!0;break}if(i=e.pos,e.md.inline.skipToken(e),91===a)if(i===e.pos-1)n++;else if(r)return e.pos=c,-1}return o&&(u=e.pos),e.pos=c,u}},function(e,t,r){"use strict";var n=r(3473).unescapeAll;e.exports=function(e,t,r){var o,a,i=t,u={ok:!1,pos:0,lines:0,str:""};if(60===e.charCodeAt(i)){for(i++;i<r;){if(10===(o=e.charCodeAt(i)))return u;if(60===o)return u;if(62===o)return u.pos=i+1,u.str=n(e.slice(t+1,i)),u.ok=!0,u;92===o&&i+1<r?i+=2:i++}return u}for(a=0;i<r&&32!==(o=e.charCodeAt(i))&&!(o<32||127===o);)if(92===o&&i+1<r){if(32===e.charCodeAt(i+1))break;i+=2}else{if(40===o&&++a>32)return u;if(41===o){if(0===a)break;a--}i++}return t===i||0!==a||(u.str=n(e.slice(t,i)),u.pos=i,u.ok=!0),u}},function(e,t,r){"use strict";var n=r(3473).unescapeAll;e.exports=function(e,t,r){var o,a,i=0,u=t,l={ok:!1,pos:0,lines:0,str:""};if(u>=r)return l;if(34!==(a=e.charCodeAt(u))&&39!==a&&40!==a)return l;for(u++,40===a&&(a=41);u<r;){if((o=e.charCodeAt(u))===a)return l.pos=u+1,l.lines=i,l.str=n(e.slice(t+1,u)),l.ok=!0,l;if(40===o&&41===a)return l;10===o?i++:92===o&&u+1<r&&(u++,10===e.charCodeAt(u)&&i++),u++}return l}},function(e,t,r){"use strict";var n=r(3473).assign,o=r(3473).unescapeAll,a=r(3473).escapeHtml,i={};function u(){this.rules=n({},i)}i.code_inline=function(e,t,r,n,o){var i=e[t];return"<code"+o.renderAttrs(i)+">"+a(i.content)+"</code>"},i.code_block=function(e,t,r,n,o){var i=e[t];return"<pre"+o.renderAttrs(i)+"><code>"+a(e[t].content)+"</code></pre>\n"},i.fence=function(e,t,r,n,i){var u,l,c,s,f,d=e[t],p=d.info?o(d.info).trim():"",h="",y="";return p&&(h=(c=p.split(/(\s+)/g))[0],y=c.slice(2).join("")),0===(u=r.highlight&&r.highlight(d.content,h,y)||a(d.content)).indexOf("<pre")?u+"\n":p?(l=d.attrIndex("class"),s=d.attrs?d.attrs.slice():[],l<0?s.push(["class",r.langPrefix+h]):(s[l]=s[l].slice(),s[l][1]+=" "+r.langPrefix+h),f={attrs:s},"<pre><code"+i.renderAttrs(f)+">"+u+"</code></pre>\n"):"<pre><code"+i.renderAttrs(d)+">"+u+"</code></pre>\n"},i.image=function(e,t,r,n,o){var a=e[t];return a.attrs[a.attrIndex("alt")][1]=o.renderInlineAsText(a.children,r,n),o.renderToken(e,t,r)},i.hardbreak=function(e,t,r){return r.xhtmlOut?"<br />\n":"<br>\n"},i.softbreak=function(e,t,r){return r.breaks?r.xhtmlOut?"<br />\n":"<br>\n":"\n"},i.text=function(e,t){return a(e[t].content)},i.html_block=function(e,t){return e[t].content},i.html_inline=function(e,t){return e[t].content},u.prototype.renderAttrs=function(e){var t,r,n;if(!e.attrs)return"";for(n="",t=0,r=e.attrs.length;t<r;t++)n+=" "+a(e.attrs[t][0])+'="'+a(e.attrs[t][1])+'"';return n},u.prototype.renderToken=function(e,t,r){var n,o="",a=!1,i=e[t];return i.hidden?"":(i.block&&-1!==i.nesting&&t&&e[t-1].hidden&&(o+="\n"),o+=(-1===i.nesting?"</":"<")+i.tag,o+=this.renderAttrs(i),0===i.nesting&&r.xhtmlOut&&(o+=" /"),i.block&&(a=!0,1===i.nesting&&t+1<e.length&&("inline"===(n=e[t+1]).type||n.hidden||-1===n.nesting&&n.tag===i.tag)&&(a=!1)),o+=a?">\n":">")},u.prototype.renderInline=function(e,t,r){for(var n,o="",a=this.rules,i=0,u=e.length;i<u;i++)void 0!==a[n=e[i].type]?o+=a[n](e,i,t,r,this):o+=this.renderToken(e,i,t);return o},u.prototype.renderInlineAsText=function(e,t,r){for(var n="",o=0,a=e.length;o<a;o++)"text"===e[o].type?n+=e[o].content:"image"===e[o].type?n+=this.renderInlineAsText(e[o].children,t,r):"softbreak"===e[o].type&&(n+="\n");return n},u.prototype.render=function(e,t,r){var n,o,a,i="",u=this.rules;for(n=0,o=e.length;n<o;n++)"inline"===(a=e[n].type)?i+=this.renderInline(e[n].children,t,r):void 0!==u[a]?i+=u[a](e,n,t,r,this):i+=this.renderToken(e,n,t,r);return i},e.exports=u},function(e,t,r){"use strict";var n=r(4057),o=[["normalize",r(5215)],["block",r(5216)],["inline",r(5217)],["linkify",r(5218)],["replacements",r(5219)],["smartquotes",r(5220)],["text_join",r(5221)]];function a(){this.ruler=new n;for(var e=0;e<o.length;e++)this.ruler.push(o[e][0],o[e][1])}a.prototype.process=function(e){var t,r,n;for(t=0,r=(n=this.ruler.getRules("")).length;t<r;t++)n[t](e)},a.prototype.State=r(5222),e.exports=a},function(e,t,r){"use strict";var n=/\r\n?|\n/g,o=/\0/g;e.exports=function(e){var t;t=(t=e.src.replace(n,"\n")).replace(o,"�"),e.src=t}},function(e,t,r){"use strict";e.exports=function(e){var t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}},function(e,t,r){"use strict";e.exports=function(e){var t,r,n,o=e.tokens;for(r=0,n=o.length;r<n;r++)"inline"===(t=o[r]).type&&e.md.inline.parse(t.content,e.md,e.env,t.children)}},function(e,t,r){"use strict";var n=r(3473).arrayReplaceAt;function o(e){return/^<\/a\s*>/i.test(e)}e.exports=function(e){var t,r,a,i,u,l,c,s,f,d,p,h,y,b,m,v,g,_,w=e.tokens;if(e.md.options.linkify)for(r=0,a=w.length;r<a;r++)if("inline"===w[r].type&&e.md.linkify.pretest(w[r].content))for(y=0,t=(i=w[r].children).length-1;t>=0;t--)if("link_close"!==(l=i[t]).type){if("html_inline"===l.type&&(_=l.content,/^<a[>\s]/i.test(_)&&y>0&&y--,o(l.content)&&y++),!(y>0)&&"text"===l.type&&e.md.linkify.test(l.content)){for(f=l.content,g=e.md.linkify.match(f),c=[],h=l.level,p=0,g.length>0&&0===g[0].index&&t>0&&"text_special"===i[t-1].type&&(g=g.slice(1)),s=0;s<g.length;s++)b=g[s].url,m=e.md.normalizeLink(b),e.md.validateLink(m)&&(v=g[s].text,v=g[s].schema?"mailto:"!==g[s].schema||/^mailto:/i.test(v)?e.md.normalizeLinkText(v):e.md.normalizeLinkText("mailto:"+v).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+v).replace(/^http:\/\//,""),(d=g[s].index)>p&&((u=new e.Token("text","",0)).content=f.slice(p,d),u.level=h,c.push(u)),(u=new e.Token("link_open","a",1)).attrs=[["href",m]],u.level=h++,u.markup="linkify",u.info="auto",c.push(u),(u=new e.Token("text","",0)).content=v,u.level=h,c.push(u),(u=new e.Token("link_close","a",-1)).level=--h,u.markup="linkify",u.info="auto",c.push(u),p=g[s].lastIndex);p<f.length&&((u=new e.Token("text","",0)).content=f.slice(p),u.level=h,c.push(u)),w[r].children=i=n(i,t,c)}}else for(t--;i[t].level!==l.level&&"link_open"!==i[t].type;)t--}},function(e,t,r){"use strict";var n=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,o=/\((c|tm|r)\)/i,a=/\((c|tm|r)\)/gi,i={c:"©",r:"®",tm:"™"};function u(e,t){return i[t.toLowerCase()]}function l(e){var t,r,n=0;for(t=e.length-1;t>=0;t--)"text"!==(r=e[t]).type||n||(r.content=r.content.replace(a,u)),"link_open"===r.type&&"auto"===r.info&&n--,"link_close"===r.type&&"auto"===r.info&&n++}function c(e){var t,r,o=0;for(t=e.length-1;t>=0;t--)"text"!==(r=e[t]).type||o||n.test(r.content)&&(r.content=r.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1—").replace(/(^|\s)--(?=\s|$)/gm,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1–")),"link_open"===r.type&&"auto"===r.info&&o--,"link_close"===r.type&&"auto"===r.info&&o++}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(o.test(e.tokens[t].content)&&l(e.tokens[t].children),n.test(e.tokens[t].content)&&c(e.tokens[t].children))}},function(e,t,r){"use strict";var n=r(3473).isWhiteSpace,o=r(3473).isPunctChar,a=r(3473).isMdAsciiPunct,i=/['"]/,u=/['"]/g;function l(e,t,r){return e.slice(0,t)+r+e.slice(t+1)}function c(e,t){var r,i,c,s,f,d,p,h,y,b,m,v,g,_,w,O,E,P,j,C,k;for(j=[],r=0;r<e.length;r++){for(i=e[r],p=e[r].level,E=j.length-1;E>=0&&!(j[E].level<=p);E--);if(j.length=E+1,"text"===i.type){f=0,d=(c=i.content).length;e:for(;f<d&&(u.lastIndex=f,s=u.exec(c));){if(w=O=!0,f=s.index+1,P="'"===s[0],y=32,s.index-1>=0)y=c.charCodeAt(s.index-1);else for(E=r-1;E>=0&&("softbreak"!==e[E].type&&"hardbreak"!==e[E].type);E--)if(e[E].content){y=e[E].content.charCodeAt(e[E].content.length-1);break}if(b=32,f<d)b=c.charCodeAt(f);else for(E=r+1;E<e.length&&("softbreak"!==e[E].type&&"hardbreak"!==e[E].type);E++)if(e[E].content){b=e[E].content.charCodeAt(0);break}if(m=a(y)||o(String.fromCharCode(y)),v=a(b)||o(String.fromCharCode(b)),g=n(y),(_=n(b))?w=!1:v&&(g||m||(w=!1)),g?O=!1:m&&(_||v||(O=!1)),34===b&&'"'===s[0]&&y>=48&&y<=57&&(O=w=!1),w&&O&&(w=m,O=v),w||O){if(O)for(E=j.length-1;E>=0&&(h=j[E],!(j[E].level<p));E--)if(h.single===P&&j[E].level===p){h=j[E],P?(C=t.md.options.quotes[2],k=t.md.options.quotes[3]):(C=t.md.options.quotes[0],k=t.md.options.quotes[1]),i.content=l(i.content,s.index,k),e[h.token].content=l(e[h.token].content,h.pos,C),f+=k.length-1,h.token===r&&(f+=C.length-1),d=(c=i.content).length,j.length=E;continue e}w?j.push({token:r,pos:s.index,single:P,level:p}):O&&P&&(i.content=l(i.content,s.index,"’"))}else P&&(i.content=l(i.content,s.index,"’"))}}}}e.exports=function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&i.test(e.tokens[t].content)&&c(e.tokens[t].children,e)}},function(e,t,r){"use strict";e.exports=function(e){var t,r,n,o,a,i,u=e.tokens;for(t=0,r=u.length;t<r;t++)if("inline"===u[t].type){for(a=(n=u[t].children).length,o=0;o<a;o++)"text_special"===n[o].type&&(n[o].type="text");for(o=i=0;o<a;o++)"text"===n[o].type&&o+1<a&&"text"===n[o+1].type?n[o+1].content=n[o].content+n[o+1].content:(o!==i&&(n[i]=n[o]),i++);o!==i&&(n.length=i)}}},function(e,t,r){"use strict";var n=r(4058);function o(e,t,r){this.src=e,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=t}o.prototype.Token=n,e.exports=o},function(e,t,r){"use strict";var n=r(4057),o=[["table",r(5224),["paragraph","reference"]],["code",r(5225)],["fence",r(5226),["paragraph","reference","blockquote","list"]],["blockquote",r(5227),["paragraph","reference","blockquote","list"]],["hr",r(5228),["paragraph","reference","blockquote","list"]],["list",r(5229),["paragraph","reference","blockquote"]],["reference",r(5230)],["html_block",r(5231),["paragraph","reference","blockquote"]],["heading",r(5233),["paragraph","reference","blockquote"]],["lheading",r(5234)],["paragraph",r(5235)]];function a(){this.ruler=new n;for(var e=0;e<o.length;e++)this.ruler.push(o[e][0],o[e][1],{alt:(o[e][2]||[]).slice()})}a.prototype.tokenize=function(e,t,r){for(var n,o,a,i=this.ruler.getRules(""),u=i.length,l=t,c=!1,s=e.md.options.maxNesting;l<r&&(e.line=l=e.skipEmptyLines(l),!(l>=r))&&!(e.sCount[l]<e.blkIndent);){if(e.level>=s){e.line=r;break}for(a=e.line,o=0;o<u;o++)if(n=i[o](e,l,r,!1)){if(a>=e.line)throw new Error("block rule didn't increment state.line");break}if(!n)throw new Error("none of the block rules matched");e.tight=!c,e.isEmpty(e.line-1)&&(c=!0),(l=e.line)<r&&e.isEmpty(l)&&(c=!0,l++,e.line=l)}},a.prototype.parse=function(e,t,r,n){var o;e&&(o=new this.State(e,t,r,n),this.tokenize(o,o.line,o.lineMax))},a.prototype.State=r(5236),e.exports=a},function(e,t,r){"use strict";var n=r(3473).isSpace;function o(e,t){var r=e.bMarks[t]+e.tShift[t],n=e.eMarks[t];return e.src.slice(r,n)}function a(e){var t,r=[],n=0,o=e.length,a=!1,i=0,u="";for(t=e.charCodeAt(n);n<o;)124===t&&(a?(u+=e.substring(i,n-1),i=n):(r.push(u+e.substring(i,n)),u="",i=n+1)),a=92===t,n++,t=e.charCodeAt(n);return r.push(u+e.substring(i)),r}e.exports=function(e,t,r,i){var u,l,c,s,f,d,p,h,y,b,m,v,g,_,w,O,E,P;if(t+2>r)return!1;if(d=t+1,e.sCount[d]<e.blkIndent)return!1;if(e.sCount[d]-e.blkIndent>=4)return!1;if((c=e.bMarks[d]+e.tShift[d])>=e.eMarks[d])return!1;if(124!==(E=e.src.charCodeAt(c++))&&45!==E&&58!==E)return!1;if(c>=e.eMarks[d])return!1;if(124!==(P=e.src.charCodeAt(c++))&&45!==P&&58!==P&&!n(P))return!1;if(45===E&&n(P))return!1;for(;c<e.eMarks[d];){if(124!==(u=e.src.charCodeAt(c))&&45!==u&&58!==u&&!n(u))return!1;c++}for(p=(l=o(e,t+1)).split("|"),b=[],s=0;s<p.length;s++){if(!(m=p[s].trim())){if(0===s||s===p.length-1)continue;return!1}if(!/^:?-+:?$/.test(m))return!1;58===m.charCodeAt(m.length-1)?b.push(58===m.charCodeAt(0)?"center":"right"):58===m.charCodeAt(0)?b.push("left"):b.push("")}if(-1===(l=o(e,t).trim()).indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;if((p=a(l)).length&&""===p[0]&&p.shift(),p.length&&""===p[p.length-1]&&p.pop(),0===(h=p.length)||h!==b.length)return!1;if(i)return!0;for(_=e.parentType,e.parentType="table",O=e.md.block.ruler.getRules("blockquote"),(y=e.push("table_open","table",1)).map=v=[t,0],(y=e.push("thead_open","thead",1)).map=[t,t+1],(y=e.push("tr_open","tr",1)).map=[t,t+1],s=0;s<p.length;s++)y=e.push("th_open","th",1),b[s]&&(y.attrs=[["style","text-align:"+b[s]]]),(y=e.push("inline","",0)).content=p[s].trim(),y.children=[],y=e.push("th_close","th",-1);for(y=e.push("tr_close","tr",-1),y=e.push("thead_close","thead",-1),d=t+2;d<r&&!(e.sCount[d]<e.blkIndent);d++){for(w=!1,s=0,f=O.length;s<f;s++)if(O[s](e,d,r,!0)){w=!0;break}if(w)break;if(!(l=o(e,d).trim()))break;if(e.sCount[d]-e.blkIndent>=4)break;for((p=a(l)).length&&""===p[0]&&p.shift(),p.length&&""===p[p.length-1]&&p.pop(),d===t+2&&((y=e.push("tbody_open","tbody",1)).map=g=[t+2,0]),(y=e.push("tr_open","tr",1)).map=[d,d+1],s=0;s<h;s++)y=e.push("td_open","td",1),b[s]&&(y.attrs=[["style","text-align:"+b[s]]]),(y=e.push("inline","",0)).content=p[s]?p[s].trim():"",y.children=[],y=e.push("td_close","td",-1);y=e.push("tr_close","tr",-1)}return g&&(y=e.push("tbody_close","tbody",-1),g[1]=d),y=e.push("table_close","table",-1),v[1]=d,e.parentType=_,e.line=d,!0}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,a;if(e.sCount[t]-e.blkIndent<4)return!1;for(o=n=t+1;n<r;)if(e.isEmpty(n))n++;else{if(!(e.sCount[n]-e.blkIndent>=4))break;o=++n}return e.line=o,(a=e.push("code_block","code",0)).content=e.getLines(t,o,4+e.blkIndent,!1)+"\n",a.map=[t,e.line],!0}},function(e,t,r){"use strict";e.exports=function(e,t,r,n){var o,a,i,u,l,c,s,f=!1,d=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(d+3>p)return!1;if(126!==(o=e.src.charCodeAt(d))&&96!==o)return!1;if(l=d,(a=(d=e.skipChars(d,o))-l)<3)return!1;if(s=e.src.slice(l,d),i=e.src.slice(d,p),96===o&&i.indexOf(String.fromCharCode(o))>=0)return!1;if(n)return!0;for(u=t;!(++u>=r)&&!((d=l=e.bMarks[u]+e.tShift[u])<(p=e.eMarks[u])&&e.sCount[u]<e.blkIndent);)if(e.src.charCodeAt(d)===o&&!(e.sCount[u]-e.blkIndent>=4||(d=e.skipChars(d,o))-l<a||(d=e.skipSpaces(d))<p)){f=!0;break}return a=e.sCount[t],e.line=u+(f?1:0),(c=e.push("fence","code",0)).info=i,c.content=e.getLines(t+1,u,a,!0),c.markup=s,c.map=[t,e.line],!0}},function(e,t,r){"use strict";var n=r(3473).isSpace;e.exports=function(e,t,r,o){var a,i,u,l,c,s,f,d,p,h,y,b,m,v,g,_,w,O,E,P,j=e.lineMax,C=e.bMarks[t]+e.tShift[t],k=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(C))return!1;if(o)return!0;for(h=[],y=[],v=[],g=[],O=e.md.block.ruler.getRules("blockquote"),m=e.parentType,e.parentType="blockquote",d=t;d<r&&(P=e.sCount[d]<e.blkIndent,!((C=e.bMarks[d]+e.tShift[d])>=(k=e.eMarks[d])));d++)if(62!==e.src.charCodeAt(C++)||P){if(s)break;for(w=!1,u=0,c=O.length;u<c;u++)if(O[u](e,d,r,!0)){w=!0;break}if(w){e.lineMax=d,0!==e.blkIndent&&(h.push(e.bMarks[d]),y.push(e.bsCount[d]),g.push(e.tShift[d]),v.push(e.sCount[d]),e.sCount[d]-=e.blkIndent);break}h.push(e.bMarks[d]),y.push(e.bsCount[d]),g.push(e.tShift[d]),v.push(e.sCount[d]),e.sCount[d]=-1}else{for(l=e.sCount[d]+1,32===e.src.charCodeAt(C)?(C++,l++,a=!1,_=!0):9===e.src.charCodeAt(C)?(_=!0,(e.bsCount[d]+l)%4==3?(C++,l++,a=!1):a=!0):_=!1,p=l,h.push(e.bMarks[d]),e.bMarks[d]=C;C<k&&(i=e.src.charCodeAt(C),n(i));)9===i?p+=4-(p+e.bsCount[d]+(a?1:0))%4:p++,C++;s=C>=k,y.push(e.bsCount[d]),e.bsCount[d]=e.sCount[d]+1+(_?1:0),v.push(e.sCount[d]),e.sCount[d]=p-l,g.push(e.tShift[d]),e.tShift[d]=C-e.bMarks[d]}for(b=e.blkIndent,e.blkIndent=0,(E=e.push("blockquote_open","blockquote",1)).markup=">",E.map=f=[t,0],e.md.block.tokenize(e,t,d),(E=e.push("blockquote_close","blockquote",-1)).markup=">",e.lineMax=j,e.parentType=m,f[1]=e.line,u=0;u<g.length;u++)e.bMarks[u+t]=h[u],e.tShift[u+t]=g[u],e.sCount[u+t]=v[u],e.bsCount[u+t]=y[u];return e.blkIndent=b,!0}},function(e,t,r){"use strict";var n=r(3473).isSpace;e.exports=function(e,t,r,o){var a,i,u,l,c=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(42!==(a=e.src.charCodeAt(c++))&&45!==a&&95!==a)return!1;for(i=1;c<s;){if((u=e.src.charCodeAt(c++))!==a&&!n(u))return!1;u===a&&i++}return!(i<3)&&(o||(e.line=t+1,(l=e.push("hr","hr",0)).map=[t,e.line],l.markup=Array(i+1).join(String.fromCharCode(a))),!0)}},function(e,t,r){"use strict";var n=r(3473).isSpace;function o(e,t){var r,o,a,i;return o=e.bMarks[t]+e.tShift[t],a=e.eMarks[t],42!==(r=e.src.charCodeAt(o++))&&45!==r&&43!==r||o<a&&(i=e.src.charCodeAt(o),!n(i))?-1:o}function a(e,t){var r,o=e.bMarks[t]+e.tShift[t],a=o,i=e.eMarks[t];if(a+1>=i)return-1;if((r=e.src.charCodeAt(a++))<48||r>57)return-1;for(;;){if(a>=i)return-1;if(!((r=e.src.charCodeAt(a++))>=48&&r<=57)){if(41===r||46===r)break;return-1}if(a-o>=10)return-1}return a<i&&(r=e.src.charCodeAt(a),!n(r))?-1:a}e.exports=function(e,t,r,n){var i,u,l,c,s,f,d,p,h,y,b,m,v,g,_,w,O,E,P,j,C,k,S,A,x,N,T,D=t,L=!1,R=!0;if(e.sCount[D]-e.blkIndent>=4)return!1;if(e.listIndent>=0&&e.sCount[D]-e.listIndent>=4&&e.sCount[D]<e.blkIndent)return!1;if(n&&"paragraph"===e.parentType&&e.sCount[D]>=e.blkIndent&&(L=!0),(k=a(e,D))>=0){if(d=!0,A=e.bMarks[D]+e.tShift[D],v=Number(e.src.slice(A,k-1)),L&&1!==v)return!1}else{if(!((k=o(e,D))>=0))return!1;d=!1}if(L&&e.skipSpaces(k)>=e.eMarks[D])return!1;if(n)return!0;for(m=e.src.charCodeAt(k-1),b=e.tokens.length,d?(T=e.push("ordered_list_open","ol",1),1!==v&&(T.attrs=[["start",v]])):T=e.push("bullet_list_open","ul",1),T.map=y=[D,0],T.markup=String.fromCharCode(m),S=!1,N=e.md.block.ruler.getRules("list"),O=e.parentType,e.parentType="list";D<r;){for(C=k,g=e.eMarks[D],f=_=e.sCount[D]+k-(e.bMarks[D]+e.tShift[D]);C<g;){if(9===(i=e.src.charCodeAt(C)))_+=4-(_+e.bsCount[D])%4;else{if(32!==i)break;_++}C++}if((s=(u=C)>=g?1:_-f)>4&&(s=1),c=f+s,(T=e.push("list_item_open","li",1)).markup=String.fromCharCode(m),T.map=p=[D,0],d&&(T.info=e.src.slice(A,k-1)),j=e.tight,P=e.tShift[D],E=e.sCount[D],w=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=c,e.tight=!0,e.tShift[D]=u-e.bMarks[D],e.sCount[D]=_,u>=g&&e.isEmpty(D+1)?e.line=Math.min(e.line+2,r):e.md.block.tokenize(e,D,r,!0),e.tight&&!S||(R=!1),S=e.line-D>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=w,e.tShift[D]=P,e.sCount[D]=E,e.tight=j,(T=e.push("list_item_close","li",-1)).markup=String.fromCharCode(m),D=e.line,p[1]=D,D>=r)break;if(e.sCount[D]<e.blkIndent)break;if(e.sCount[D]-e.blkIndent>=4)break;for(x=!1,l=0,h=N.length;l<h;l++)if(N[l](e,D,r,!0)){x=!0;break}if(x)break;if(d){if((k=a(e,D))<0)break;A=e.bMarks[D]+e.tShift[D]}else if((k=o(e,D))<0)break;if(m!==e.src.charCodeAt(k-1))break}return(T=d?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(m),y[1]=D,e.line=D,e.parentType=O,R&&function(e,t){var r,n,o=e.level+2;for(r=t+2,n=e.tokens.length-2;r<n;r++)e.tokens[r].level===o&&"paragraph_open"===e.tokens[r].type&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}(e,b),!0}},function(e,t,r){"use strict";var n=r(3473).normalizeReference,o=r(3473).isSpace;e.exports=function(e,t,r,a){var i,u,l,c,s,f,d,p,h,y,b,m,v,g,_,w,O=0,E=e.bMarks[t]+e.tShift[t],P=e.eMarks[t],j=t+1;if(e.sCount[t]-e.blkIndent>=4)return!1;if(91!==e.src.charCodeAt(E))return!1;for(;++E<P;)if(93===e.src.charCodeAt(E)&&92!==e.src.charCodeAt(E-1)){if(E+1===P)return!1;if(58!==e.src.charCodeAt(E+1))return!1;break}for(c=e.lineMax,_=e.md.block.ruler.getRules("reference"),y=e.parentType,e.parentType="reference";j<c&&!e.isEmpty(j);j++)if(!(e.sCount[j]-e.blkIndent>3||e.sCount[j]<0)){for(g=!1,f=0,d=_.length;f<d;f++)if(_[f](e,j,c,!0)){g=!0;break}if(g)break}for(P=(v=e.getLines(t,j,e.blkIndent,!1).trim()).length,E=1;E<P;E++){if(91===(i=v.charCodeAt(E)))return!1;if(93===i){h=E;break}(10===i||92===i&&++E<P&&10===v.charCodeAt(E))&&O++}if(h<0||58!==v.charCodeAt(h+1))return!1;for(E=h+2;E<P;E++)if(10===(i=v.charCodeAt(E)))O++;else if(!o(i))break;if(!(b=e.md.helpers.parseLinkDestination(v,E,P)).ok)return!1;if(s=e.md.normalizeLink(b.str),!e.md.validateLink(s))return!1;for(u=E=b.pos,l=O+=b.lines,m=E;E<P;E++)if(10===(i=v.charCodeAt(E)))O++;else if(!o(i))break;for(b=e.md.helpers.parseLinkTitle(v,E,P),E<P&&m!==E&&b.ok?(w=b.str,E=b.pos,O+=b.lines):(w="",E=u,O=l);E<P&&(i=v.charCodeAt(E),o(i));)E++;if(E<P&&10!==v.charCodeAt(E)&&w)for(w="",E=u,O=l;E<P&&(i=v.charCodeAt(E),o(i));)E++;return!(E<P&&10!==v.charCodeAt(E))&&(!!(p=n(v.slice(1,h)))&&(a||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[p]&&(e.env.references[p]={title:w,href:s}),e.parentType=y,e.line=t+O+1),!0))}},function(e,t,r){"use strict";var n=r(5232),o=r(4304).HTML_OPEN_CLOSE_TAG_RE,a=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+n.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(o.source+"\\s*$"),/^$/,!1]];e.exports=function(e,t,r,n){var o,i,u,l,c=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(c))return!1;for(l=e.src.slice(c,s),o=0;o<a.length&&!a[o][0].test(l);o++);if(o===a.length)return!1;if(n)return a[o][2];if(i=t+1,!a[o][1].test(l))for(;i<r&&!(e.sCount[i]<e.blkIndent);i++)if(c=e.bMarks[i]+e.tShift[i],s=e.eMarks[i],l=e.src.slice(c,s),a[o][1].test(l)){0!==l.length&&i++;break}return e.line=i,(u=e.push("html_block","",0)).map=[t,i],u.content=e.getLines(t,i,e.blkIndent,!0),!0}},function(e,t,r){"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},function(e,t,r){"use strict";var n=r(3473).isSpace;e.exports=function(e,t,r,o){var a,i,u,l,c=e.bMarks[t]+e.tShift[t],s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(35!==(a=e.src.charCodeAt(c))||c>=s)return!1;for(i=1,a=e.src.charCodeAt(++c);35===a&&c<s&&i<=6;)i++,a=e.src.charCodeAt(++c);return!(i>6||c<s&&!n(a))&&(o||(s=e.skipSpacesBack(s,c),(u=e.skipCharsBack(s,35,c))>c&&n(e.src.charCodeAt(u-1))&&(s=u),e.line=t+1,(l=e.push("heading_open","h"+String(i),1)).markup="########".slice(0,i),l.map=[t,e.line],(l=e.push("inline","",0)).content=e.src.slice(c,s).trim(),l.map=[t,e.line],l.children=[],(l=e.push("heading_close","h"+String(i),-1)).markup="########".slice(0,i)),!0)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,a,i,u,l,c,s,f,d,p=t+1,h=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;for(d=e.parentType,e.parentType="paragraph";p<r&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(l=e.bMarks[p]+e.tShift[p])<(c=e.eMarks[p])&&(45===(f=e.src.charCodeAt(l))||61===f)&&(l=e.skipChars(l,f),(l=e.skipSpaces(l))>=c)){s=61===f?1:2;break}if(!(e.sCount[p]<0)){for(o=!1,a=0,i=h.length;a<i;a++)if(h[a](e,p,r,!0)){o=!0;break}if(o)break}}return!!s&&(n=e.getLines(t,p,e.blkIndent,!1).trim(),e.line=p+1,(u=e.push("heading_open","h"+String(s),1)).markup=String.fromCharCode(f),u.map=[t,e.line],(u=e.push("inline","",0)).content=n,u.map=[t,e.line-1],u.children=[],(u=e.push("heading_close","h"+String(s),-1)).markup=String.fromCharCode(f),e.parentType=d,!0)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,a,i,u,l,c=t+1,s=e.md.block.ruler.getRules("paragraph");for(l=e.parentType,e.parentType="paragraph";c<r&&!e.isEmpty(c);c++)if(!(e.sCount[c]-e.blkIndent>3||e.sCount[c]<0)){for(o=!1,a=0,i=s.length;a<i;a++)if(s[a](e,c,r,!0)){o=!0;break}if(o)break}return n=e.getLines(t,c,e.blkIndent,!1).trim(),e.line=c,(u=e.push("paragraph_open","p",1)).map=[t,e.line],(u=e.push("inline","",0)).content=n,u.map=[t,e.line],u.children=[],u=e.push("paragraph_close","p",-1),e.parentType=l,!0}},function(e,t,r){"use strict";var n=r(4058),o=r(3473).isSpace;function a(e,t,r,n){var a,i,u,l,c,s,f,d;for(this.src=e,this.md=t,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",d=!1,u=l=s=f=0,c=(i=this.src).length;l<c;l++){if(a=i.charCodeAt(l),!d){if(o(a)){s++,9===a?f+=4-f%4:f++;continue}d=!0}10!==a&&l!==c-1||(10!==a&&l++,this.bMarks.push(u),this.eMarks.push(l),this.tShift.push(s),this.sCount.push(f),this.bsCount.push(0),d=!1,s=0,f=0,u=l+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}a.prototype.push=function(e,t,r){var o=new n(e,t,r);return o.block=!0,r<0&&this.level--,o.level=this.level,r>0&&this.level++,this.tokens.push(o),o},a.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},a.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},a.prototype.skipSpaces=function(e){for(var t,r=this.src.length;e<r&&(t=this.src.charCodeAt(e),o(t));e++);return e},a.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!o(this.src.charCodeAt(--e)))return e+1;return e},a.prototype.skipChars=function(e,t){for(var r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e},a.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e},a.prototype.getLines=function(e,t,r,n){var a,i,u,l,c,s,f,d=e;if(e>=t)return"";for(s=new Array(t-e),a=0;d<t;d++,a++){for(i=0,f=l=this.bMarks[d],c=d+1<t||n?this.eMarks[d]+1:this.eMarks[d];l<c&&i<r;){if(u=this.src.charCodeAt(l),o(u))9===u?i+=4-(i+this.bsCount[d])%4:i++;else{if(!(l-f<this.tShift[d]))break;i++}l++}s[a]=i>r?new Array(i-r+1).join(" ")+this.src.slice(l,c):this.src.slice(l,c)}return s.join("")},a.prototype.Token=n,e.exports=a},function(e,t,r){"use strict";var n=r(4057),o=[["text",r(5238)],["linkify",r(5239)],["newline",r(5240)],["escape",r(5241)],["backticks",r(5242)],["strikethrough",r(4305).tokenize],["emphasis",r(4306).tokenize],["link",r(5243)],["image",r(5244)],["autolink",r(5245)],["html_inline",r(5246)],["entity",r(5247)]],a=[["balance_pairs",r(5248)],["strikethrough",r(4305).postProcess],["emphasis",r(4306).postProcess],["fragments_join",r(5249)]];function i(){var e;for(this.ruler=new n,e=0;e<o.length;e++)this.ruler.push(o[e][0],o[e][1]);for(this.ruler2=new n,e=0;e<a.length;e++)this.ruler2.push(a[e][0],a[e][1])}i.prototype.skipToken=function(e){var t,r,n=e.pos,o=this.ruler.getRules(""),a=o.length,i=e.md.options.maxNesting,u=e.cache;if(void 0===u[n]){if(e.level<i){for(r=0;r<a;r++)if(e.level++,t=o[r](e,!0),e.level--,t){if(n>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;t||e.pos++,u[n]=e.pos}else e.pos=u[n]},i.prototype.tokenize=function(e){for(var t,r,n,o=this.ruler.getRules(""),a=o.length,i=e.posMax,u=e.md.options.maxNesting;e.pos<i;){if(n=e.pos,e.level<u)for(r=0;r<a;r++)if(t=o[r](e,!1)){if(n>=e.pos)throw new Error("inline rule didn't increment state.pos");break}if(t){if(e.pos>=i)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},i.prototype.parse=function(e,t,r,n){var o,a,i,u=new this.State(e,t,r,n);for(this.tokenize(u),i=(a=this.ruler2.getRules("")).length,o=0;o<i;o++)a[o](u)},i.prototype.State=r(5250),e.exports=i},function(e,t,r){"use strict";function n(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}e.exports=function(e,t){for(var r=e.pos;r<e.posMax&&!n(e.src.charCodeAt(r));)r++;return r!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)}},function(e,t,r){"use strict";var n=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;e.exports=function(e,t){var r,o,a,i,u,l,c;return!!e.md.options.linkify&&(!(e.linkLevel>0)&&(!((r=e.pos)+3>e.posMax)&&(58===e.src.charCodeAt(r)&&(47===e.src.charCodeAt(r+1)&&(47===e.src.charCodeAt(r+2)&&(!!(o=e.pending.match(n))&&(a=o[1],!!(i=e.md.linkify.matchAtStart(e.src.slice(r-a.length)))&&(!((u=i.url).length<=a.length)&&(u=u.replace(/\*+$/,""),l=e.md.normalizeLink(u),!!e.md.validateLink(l)&&(t||(e.pending=e.pending.slice(0,-a.length),(c=e.push("link_open","a",1)).attrs=[["href",l]],c.markup="linkify",c.info="auto",(c=e.push("text","",0)).content=e.md.normalizeLinkText(u),(c=e.push("link_close","a",-1)).markup="linkify",c.info="auto"),e.pos+=u.length-a.length,!0))))))))))}},function(e,t,r){"use strict";var n=r(3473).isSpace;e.exports=function(e,t){var r,o,a,i=e.pos;if(10!==e.src.charCodeAt(i))return!1;if(r=e.pending.length-1,o=e.posMax,!t)if(r>=0&&32===e.pending.charCodeAt(r))if(r>=1&&32===e.pending.charCodeAt(r-1)){for(a=r-1;a>=1&&32===e.pending.charCodeAt(a-1);)a--;e.pending=e.pending.slice(0,a),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(i++;i<o&&n(e.src.charCodeAt(i));)i++;return e.pos=i,!0}},function(e,t,r){"use strict";for(var n=r(3473).isSpace,o=[],a=0;a<256;a++)o.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(e){o[e.charCodeAt(0)]=1})),e.exports=function(e,t){var r,a,i,u,l,c=e.pos,s=e.posMax;if(92!==e.src.charCodeAt(c))return!1;if(++c>=s)return!1;if(10===(r=e.src.charCodeAt(c))){for(t||e.push("hardbreak","br",0),c++;c<s&&(r=e.src.charCodeAt(c),n(r));)c++;return e.pos=c,!0}return u=e.src[c],r>=55296&&r<=56319&&c+1<s&&(a=e.src.charCodeAt(c+1))>=56320&&a<=57343&&(u+=e.src[c+1],c++),i="\\"+u,t||(l=e.push("text_special","",0),r<256&&0!==o[r]?l.content=u:l.content=i,l.markup=i,l.info="escape"),e.pos=c+1,!0}},function(e,t,r){"use strict";e.exports=function(e,t){var r,n,o,a,i,u,l,c,s=e.pos;if(96!==e.src.charCodeAt(s))return!1;for(r=s,s++,n=e.posMax;s<n&&96===e.src.charCodeAt(s);)s++;if(l=(o=e.src.slice(r,s)).length,e.backticksScanned&&(e.backticks[l]||0)<=r)return t||(e.pending+=o),e.pos+=l,!0;for(u=s;-1!==(i=e.src.indexOf("`",u));){for(u=i+1;u<n&&96===e.src.charCodeAt(u);)u++;if((c=u-i)===l)return t||((a=e.push("code_inline","code",0)).markup=o,a.content=e.src.slice(s,i).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=u,!0;e.backticks[c]=i}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=l,!0}},function(e,t,r){"use strict";var n=r(3473).normalizeReference,o=r(3473).isSpace;e.exports=function(e,t){var r,a,i,u,l,c,s,f,d="",p="",h=e.pos,y=e.posMax,b=e.pos,m=!0;if(91!==e.src.charCodeAt(e.pos))return!1;if(l=e.pos+1,(u=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)return!1;if((c=u+1)<y&&40===e.src.charCodeAt(c)){for(m=!1,c++;c<y&&(a=e.src.charCodeAt(c),o(a)||10===a);c++);if(c>=y)return!1;if(b=c,(s=e.md.helpers.parseLinkDestination(e.src,c,e.posMax)).ok){for(d=e.md.normalizeLink(s.str),e.md.validateLink(d)?c=s.pos:d="",b=c;c<y&&(a=e.src.charCodeAt(c),o(a)||10===a);c++);if(s=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<y&&b!==c&&s.ok)for(p=s.str,c=s.pos;c<y&&(a=e.src.charCodeAt(c),o(a)||10===a);c++);}(c>=y||41!==e.src.charCodeAt(c))&&(m=!0),c++}if(m){if(void 0===e.env.references)return!1;if(c<y&&91===e.src.charCodeAt(c)?(b=c+1,(c=e.md.helpers.parseLinkLabel(e,c))>=0?i=e.src.slice(b,c++):c=u+1):c=u+1,i||(i=e.src.slice(l,u)),!(f=e.env.references[n(i)]))return e.pos=h,!1;d=f.href,p=f.title}return t||(e.pos=l,e.posMax=u,e.push("link_open","a",1).attrs=r=[["href",d]],p&&r.push(["title",p]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)),e.pos=c,e.posMax=y,!0}},function(e,t,r){"use strict";var n=r(3473).normalizeReference,o=r(3473).isSpace;e.exports=function(e,t){var r,a,i,u,l,c,s,f,d,p,h,y,b,m="",v=e.pos,g=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;if(c=e.pos+2,(l=e.md.helpers.parseLinkLabel(e,e.pos+1,!1))<0)return!1;if((s=l+1)<g&&40===e.src.charCodeAt(s)){for(s++;s<g&&(a=e.src.charCodeAt(s),o(a)||10===a);s++);if(s>=g)return!1;for(b=s,(d=e.md.helpers.parseLinkDestination(e.src,s,e.posMax)).ok&&(m=e.md.normalizeLink(d.str),e.md.validateLink(m)?s=d.pos:m=""),b=s;s<g&&(a=e.src.charCodeAt(s),o(a)||10===a);s++);if(d=e.md.helpers.parseLinkTitle(e.src,s,e.posMax),s<g&&b!==s&&d.ok)for(p=d.str,s=d.pos;s<g&&(a=e.src.charCodeAt(s),o(a)||10===a);s++);else p="";if(s>=g||41!==e.src.charCodeAt(s))return e.pos=v,!1;s++}else{if(void 0===e.env.references)return!1;if(s<g&&91===e.src.charCodeAt(s)?(b=s+1,(s=e.md.helpers.parseLinkLabel(e,s))>=0?u=e.src.slice(b,s++):s=l+1):s=l+1,u||(u=e.src.slice(c,l)),!(f=e.env.references[n(u)]))return e.pos=v,!1;m=f.href,p=f.title}return t||(i=e.src.slice(c,l),e.md.inline.parse(i,e.md,e.env,y=[]),(h=e.push("image","img",0)).attrs=r=[["src",m],["alt",""]],h.children=y,h.content=i,p&&r.push(["title",p])),e.pos=s,e.posMax=g,!0}},function(e,t,r){"use strict";var n=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,o=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;e.exports=function(e,t){var r,a,i,u,l,c,s=e.pos;if(60!==e.src.charCodeAt(s))return!1;for(l=e.pos,c=e.posMax;;){if(++s>=c)return!1;if(60===(u=e.src.charCodeAt(s)))return!1;if(62===u)break}return r=e.src.slice(l+1,s),o.test(r)?(a=e.md.normalizeLink(r),!!e.md.validateLink(a)&&(t||((i=e.push("link_open","a",1)).attrs=[["href",a]],i.markup="autolink",i.info="auto",(i=e.push("text","",0)).content=e.md.normalizeLinkText(r),(i=e.push("link_close","a",-1)).markup="autolink",i.info="auto"),e.pos+=r.length+2,!0)):!!n.test(r)&&(a=e.md.normalizeLink("mailto:"+r),!!e.md.validateLink(a)&&(t||((i=e.push("link_open","a",1)).attrs=[["href",a]],i.markup="autolink",i.info="auto",(i=e.push("text","",0)).content=e.md.normalizeLinkText(r),(i=e.push("link_close","a",-1)).markup="autolink",i.info="auto"),e.pos+=r.length+2,!0))}},function(e,t,r){"use strict";var n=r(4304).HTML_TAG_RE;e.exports=function(e,t){var r,o,a,i,u,l=e.pos;return!!e.md.options.html&&(a=e.posMax,!(60!==e.src.charCodeAt(l)||l+2>=a)&&(!(33!==(r=e.src.charCodeAt(l+1))&&63!==r&&47!==r&&!function(e){var t=32|e;return t>=97&&t<=122}(r))&&(!!(o=e.src.slice(l).match(n))&&(t||((i=e.push("html_inline","",0)).content=o[0],u=i.content,/^<a[>\s]/i.test(u)&&e.linkLevel++,function(e){return/^<\/a\s*>/i.test(e)}(i.content)&&e.linkLevel--),e.pos+=o[0].length,!0))))}},function(e,t,r){"use strict";var n=r(4299),o=r(3473).has,a=r(3473).isValidEntityCode,i=r(3473).fromCodePoint,u=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,l=/^&([a-z][a-z0-9]{1,31});/i;e.exports=function(e,t){var r,c,s,f=e.pos,d=e.posMax;if(38!==e.src.charCodeAt(f))return!1;if(f+1>=d)return!1;if(35===e.src.charCodeAt(f+1)){if(c=e.src.slice(f).match(u))return t||(r="x"===c[1][0].toLowerCase()?parseInt(c[1].slice(1),16):parseInt(c[1],10),(s=e.push("text_special","",0)).content=a(r)?i(r):i(65533),s.markup=c[0],s.info="entity"),e.pos+=c[0].length,!0}else if((c=e.src.slice(f).match(l))&&o(n,c[1]))return t||((s=e.push("text_special","",0)).content=n[c[1]],s.markup=c[0],s.info="entity"),e.pos+=c[0].length,!0;return!1}},function(e,t,r){"use strict";function n(e){var t,r,n,o,a,i,u,l,c={},s=e.length;if(s){var f=0,d=-2,p=[];for(t=0;t<s;t++)if(n=e[t],p.push(0),e[f].marker===n.marker&&d===n.token-1||(f=t),d=n.token,n.length=n.length||0,n.close){for(c.hasOwnProperty(n.marker)||(c[n.marker]=[-1,-1,-1,-1,-1,-1]),a=c[n.marker][(n.open?3:0)+n.length%3],i=r=f-p[f]-1;r>a;r-=p[r]+1)if((o=e[r]).marker===n.marker&&o.open&&o.end<0&&(u=!1,(o.close||n.open)&&(o.length+n.length)%3==0&&(o.length%3==0&&n.length%3==0||(u=!0)),!u)){l=r>0&&!e[r-1].open?p[r-1]+1:0,p[t]=t-r+l,p[r]=l,n.open=!1,o.end=t,o.close=!1,i=-1,d=-2;break}-1!==i&&(c[n.marker][(n.open?3:0)+(n.length||0)%3]=i)}}}e.exports=function(e){var t,r=e.tokens_meta,o=e.tokens_meta.length;for(n(e.delimiters),t=0;t<o;t++)r[t]&&r[t].delimiters&&n(r[t].delimiters)}},function(e,t,r){"use strict";e.exports=function(e){var t,r,n=0,o=e.tokens,a=e.tokens.length;for(t=r=0;t<a;t++)o[t].nesting<0&&n--,o[t].level=n,o[t].nesting>0&&n++,"text"===o[t].type&&t+1<a&&"text"===o[t+1].type?o[t+1].content=o[t].content+o[t+1].content:(t!==r&&(o[r]=o[t]),r++);t!==r&&(o.length=r)}},function(e,t,r){"use strict";var n=r(4058),o=r(3473).isWhiteSpace,a=r(3473).isPunctChar,i=r(3473).isMdAsciiPunct;function u(e,t,r,n){this.src=e,this.env=r,this.md=t,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}u.prototype.pushPending=function(){var e=new n("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},u.prototype.push=function(e,t,r){this.pending&&this.pushPending();var o=new n(e,t,r),a=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),o.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(o),this.tokens_meta.push(a),o},u.prototype.scanDelims=function(e,t){var r,n,u,l,c,s,f,d,p,h=e,y=!0,b=!0,m=this.posMax,v=this.src.charCodeAt(e);for(r=e>0?this.src.charCodeAt(e-1):32;h<m&&this.src.charCodeAt(h)===v;)h++;return u=h-e,n=h<m?this.src.charCodeAt(h):32,f=i(r)||a(String.fromCharCode(r)),p=i(n)||a(String.fromCharCode(n)),s=o(r),(d=o(n))?y=!1:p&&(s||f||(y=!1)),s?b=!1:f&&(d||p||(b=!1)),t?(l=y,c=b):(l=y&&(!b||f),c=b&&(!y||p)),{can_open:l,can_close:c,length:u}},u.prototype.Token=n,e.exports=u},function(e,t,r){"use strict";function n(e){return Array.prototype.slice.call(arguments,1).forEach((function(t){t&&Object.keys(t).forEach((function(r){e[r]=t[r]}))})),e}function o(e){return Object.prototype.toString.call(e)}function a(e){return"[object Function]"===o(e)}function i(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var u={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var l={"http:":{validate:function(e,t,r){var n=e.slice(t);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,r){var n=e.slice(t);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,r){var n=e.slice(t);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},c="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",s="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function f(e){var t=e.re=r(5252)(e.__opts__),n=e.__tlds__.slice();function u(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||n.push(c),n.push(t.src_xn),t.src_tlds=n.join("|"),t.email_fuzzy=RegExp(u(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(u(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(u(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(u(t.tpl_host_fuzzy_test),"i");var l=[];function s(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){var r=e.__schemas__[t];if(null!==r){var n={validate:null,link:null};if(e.__compiled__[t]=n,"[object Object]"===o(r))return!function(e){return"[object RegExp]"===o(e)}(r.validate)?a(r.validate)?n.validate=r.validate:s(t,r):n.validate=function(e){return function(t,r){var n=t.slice(r);return e.test(n)?n.match(e)[0].length:0}}(r.validate),void(a(r.normalize)?n.normalize=r.normalize:r.normalize?s(t,r):n.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===o(e)}(r)?s(t,r):l.push(t)}})),l.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var f=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(i).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+f+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+f+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function d(e,t){var r=e.__index__,n=e.__last_index__,o=e.__text_cache__.slice(r,n);this.schema=e.__schema__.toLowerCase(),this.index=r+t,this.lastIndex=n+t,this.raw=o,this.text=o,this.url=o}function p(e,t){var r=new d(e,t);return e.__compiled__[r.schema].normalize(r,e),r}function h(e,t){if(!(this instanceof h))return new h(e,t);var r;t||(r=e,Object.keys(r||{}).reduce((function(e,t){return e||u.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=n({},u,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=n({},l,e),this.__compiled__={},this.__tlds__=s,this.__tlds_replaced__=!1,this.re={},f(this)}h.prototype.add=function(e,t){return this.__schemas__[e]=t,f(this),this},h.prototype.set=function(e){return this.__opts__=n(this.__opts__,e),this},h.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,r,n,o,a,i,u,l;if(this.re.schema_test.test(e))for((u=this.re.schema_search).lastIndex=0;null!==(t=u.exec(e));)if(o=this.testSchemaAt(e,t[2],u.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+o;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(l=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||l<this.__index__)&&null!==(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(a=r.index+r[1].length,(this.__index__<0||a<this.__index__)&&(this.__schema__="",this.__index__=a,this.__last_index__=r.index+r[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(n=e.match(this.re.email_fuzzy))&&(a=n.index+n[1].length,i=n.index+n[0].length,(this.__index__<0||a<this.__index__||a===this.__index__&&i>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=a,this.__last_index__=i)),this.__index__>=0},h.prototype.pretest=function(e){return this.re.pretest.test(e)},h.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0},h.prototype.match=function(e){var t=0,r=[];this.__index__>=0&&this.__text_cache__===e&&(r.push(p(this,t)),t=this.__last_index__);for(var n=t?e.slice(t):e;this.test(n);)r.push(p(this,t)),n=n.slice(this.__last_index__),t+=this.__last_index__;return r.length?r:null},h.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;var t=this.re.schema_at_start.exec(e);if(!t)return null;var r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,p(this,0)):null},h.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,r){return e!==r[t-1]})).reverse(),f(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,f(this),this)},h.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},h.prototype.onCompile=function(){},e.exports=h},function(e,t,r){"use strict";e.exports=function(e){var t={};e=e||{},t.src_Any=r(4301).source,t.src_Cc=r(4302).source,t.src_Z=r(4303).source,t.src_P=r(4056).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");var n="[><｜]";return t.src_pseudo_letter="(?:(?![><｜]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><｜]|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+"|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><｜]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},function(e,t,r){(function(e,n){var o;!function(a){t&&t.nodeType,e&&e.nodeType;var i="object"==typeof n&&n;i.global!==i&&i.window!==i&&i.self;var u,l=2147483647,c=36,s=1,f=26,d=38,p=700,h=72,y=128,b="-",m=/^xn--/,v=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-s,O=Math.floor,E=String.fromCharCode;function P(e){throw new RangeError(_[e])}function j(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function C(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+j((e=e.replace(g,".")).split("."),t).join(".")}function k(e){for(var t,r,n=[],o=0,a=e.length;o<a;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<a?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function S(e){return j(e,(function(e){var t="";return e>65535&&(t+=E((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=E(e)})).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var n=0;for(e=r?O(e/p):e>>1,e+=O(e/t);e>w*f>>1;n+=c)e=O(e/w);return O(n+(w+1)*e/(e+d))}function N(e){var t,r,n,o,a,i,u,d,p,m,v,g=[],_=e.length,w=0,E=y,j=h;for((r=e.lastIndexOf(b))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&P("not-basic"),g.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<_;){for(a=w,i=1,u=c;o>=_&&P("invalid-input"),((d=(v=e.charCodeAt(o++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:c)>=c||d>O((l-w)/i))&&P("overflow"),w+=d*i,!(d<(p=u<=j?s:u>=j+f?f:u-j));u+=c)i>O(l/(m=c-p))&&P("overflow"),i*=m;j=x(w-a,t=g.length+1,0==a),O(w/t)>l-E&&P("overflow"),E+=O(w/t),w%=t,g.splice(w++,0,E)}return S(g)}function T(e){var t,r,n,o,a,i,u,d,p,m,v,g,_,w,j,C=[];for(g=(e=k(e)).length,t=y,r=0,a=h,i=0;i<g;++i)(v=e[i])<128&&C.push(E(v));for(n=o=C.length,o&&C.push(b);n<g;){for(u=l,i=0;i<g;++i)(v=e[i])>=t&&v<u&&(u=v);for(u-t>O((l-r)/(_=n+1))&&P("overflow"),r+=(u-t)*_,t=u,i=0;i<g;++i)if((v=e[i])<t&&++r>l&&P("overflow"),v==t){for(d=r,p=c;!(d<(m=p<=a?s:p>=a+f?f:p-a));p+=c)j=d-m,w=c-m,C.push(E(A(m+j%w,0))),d=O(j/w);C.push(E(A(d,0))),a=x(r,_,n==o),r=0,++n}++r,++t}return C.join("")}u={version:"1.4.1",ucs2:{decode:k,encode:S},decode:N,encode:T,toASCII:function(e){return C(e,(function(e){return v.test(e)?"xn--"+T(e):e}))},toUnicode:function(e){return C(e,(function(e){return m.test(e)?N(e.slice(4).toLowerCase()):e}))}},void 0===(o=function(){return u}.call(t,r,t,e))||(e.exports=o)}()}).call(this,r(267)(e),r(92))},function(e,t,r){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},function(e,t,r){"use strict";e.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}},function(e,t,r){"use strict";e.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},function(e,t,r){e.exports={shared:{react:r(0),"react-dom":r(74),antd:r(2788),"@alipay/larkui":r(4338),classnames:r(5),clipboard:r(5258),"markdown-it":r(4298)}}},function(e,t,r){var n;n=function(){return function(){var e={686:function(e,t,r){"use strict";r.d(t,{default:function(){return O}});var n=r(279),o=r.n(n),a=r(370),i=r.n(a),u=r(817),l=r.n(u);function c(e){try{return document.execCommand(e)}catch(e){return!1}}var s=function(e){var t=l()(e);return c("cut"),t},f=function(e,t){var r=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),r=document.createElement("textarea");r.style.fontSize="12pt",r.style.border="0",r.style.padding="0",r.style.margin="0",r.style.position="absolute",r.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;return r.style.top="".concat(n,"px"),r.setAttribute("readonly",""),r.value=e,r}(e);t.container.appendChild(r);var n=l()(r);return c("copy"),r.remove(),n},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},r="";return"string"==typeof e?r=f(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?r=f(e.value,t):(r=l()(e),c("copy")),r};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,r=void 0===t?"copy":t,n=e.container,o=e.target,a=e.text;if("copy"!==r&&"cut"!==r)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==o){if(!o||"object"!==p(o)||1!==o.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===r&&o.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===r&&(o.hasAttribute("readonly")||o.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return a?d(a,{container:n}):o?"cut"===r?s(o):d(o,{container:n}):void 0};function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n,o,a=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return n=this,!(o=r)||"object"!==y(o)&&"function"!=typeof o?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):o}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function _(e,t){var r="data-clipboard-".concat(e);if(t.hasAttribute(r))return t.getAttribute(r)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,r,n,o=v(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=o.call(this)).resolveOptions(t),r.listenClick(e),r}return t=a,r=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===y(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=i()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,r=this.action(t)||"copy",n=h({action:r,container:this.container,target:this.target(t),text:this.text(t)});this.emit(n?"success":"error",{action:r,text:n,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return _("action",e)}},{key:"defaultTarget",value:function(e){var t=_("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return _("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],n=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return d(e,t)}},{key:"cut",value:function(e){return s(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,r=!!document.queryCommandSupported;return t.forEach((function(e){r=r&&!!document.queryCommandSupported(e)})),r}}],r&&b(t.prototype,r),n&&b(t,n),a}(o()),O=w},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,r){var n=r(828);function o(e,t,r,n,o){var i=a.apply(this,arguments);return e.addEventListener(r,i,o),{destroy:function(){e.removeEventListener(r,i,o)}}}function a(e,t,r,o){return function(r){r.delegateTarget=n(r.target,t),r.delegateTarget&&o.call(e,r)}}e.exports=function(e,t,r,n,a){return"function"==typeof e.addEventListener?o.apply(null,arguments):"function"==typeof r?o.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return o(e,t,r,n,a)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var r=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===r||"[object HTMLCollection]"===r)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,r){var n=r(879),o=r(438);e.exports=function(e,t,r){if(!e&&!t&&!r)throw new Error("Missing required arguments");if(!n.string(t))throw new TypeError("Second argument must be a String");if(!n.fn(r))throw new TypeError("Third argument must be a Function");if(n.node(e))return function(e,t,r){return e.addEventListener(t,r),{destroy:function(){e.removeEventListener(t,r)}}}(e,t,r);if(n.nodeList(e))return function(e,t,r){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,r)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,r)}))}}}(e,t,r);if(n.string(e))return function(e,t,r){return o(document.body,e,t,r)}(e,t,r);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var r=e.hasAttribute("readonly");r||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),r||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),o=document.createRange();o.selectNodeContents(e),n.removeAllRanges(),n.addRange(o),t=n.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,r){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:r}),this},once:function(e,t,r){var n=this;function o(){n.off(e,o),t.apply(r,arguments)}return o._=t,this.on(e,o,r)},emit:function(e){for(var t=[].slice.call(arguments,1),r=((this.e||(this.e={}))[e]||[]).slice(),n=0,o=r.length;n<o;n++)r[n].fn.apply(r[n].ctx,t);return this},off:function(e,t){var r=this.e||(this.e={}),n=r[e],o=[];if(n&&t)for(var a=0,i=n.length;a<i;a++)n[a].fn!==t&&n[a].fn._!==t&&o.push(n[a]);return o.length?r[e]=o:delete r[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}return r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r(686)}().default},e.exports=n()},,,,function(e,t,r){"use strict";r(37);var n=r(8),o=(r(57),r(13)),a=(r(219),r(53)),i=r(0),u=r.n(i),l=r(2),c=r.n(l),s=r(83),f=r(5196),d=r(4380),p=r(932),h=r(2782),y=r(261),b=r(929),m=r(166),v=r(52),g=(r(116),r(38)),_=(r(132),r(27)),w=(r(196),r(36));function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=e.value,r=e.contributors,n=e.onChange,a=C(Object(i.useState)(t.showAuthorOption),2),l=a[0],c=a[1],f=C(Object(i.useState)(t.showAuthorId),2),d=f[0],p=f[1],h=C(Object(i.useState)(t.showAuthorCustomText),2),y=h[0],b=h[1],m=function(t){n&&"function"==typeof n&&n(P(P({},e.value),t))};return u.a.createElement(g.a,{gutter:16},u.a.createElement(_.a,{span:10},u.a.createElement(w.a,{"data-testid":"show-author-option-selector",value:l,onChange:function(e){c(Number(e));var t=Number(e);m({showAuthorOption:e,showAuthorId:t!==s.SHOW_AUTHOR_OPTION.specific_user?0:d,showAuthorCustomText:t!==s.SHOW_AUTHOR_OPTION.custom_text?"":y})},getPopupContainer:function(e){return e.parentNode}},u.a.createElement(w.a.Option,{value:s.SHOW_AUTHOR_OPTION.all},__("显示所有编辑者")),u.a.createElement(w.a.Option,{"data-testid":"show-author-option-selector-user",value:s.SHOW_AUTHOR_OPTION.specific_user,disabled:r.length<=1},__("显示指定编辑者")),u.a.createElement(w.a.Option,{"data-testid":"show-author-option-selector-hide",value:s.SHOW_AUTHOR_OPTION.hide},__("不显示编辑者")),u.a.createElement(w.a.Option,{"data-testid":"show-author-option-selector-text",value:s.SHOW_AUTHOR_OPTION.custom_text},__("自定义")))),l===s.SHOW_AUTHOR_OPTION.specific_user&&u.a.createElement(_.a,{span:14},u.a.createElement(w.a,{"data-testid":"show-author-option-user-selector",value:d,onChange:function(e){p(Number(e)),m({showAuthorId:e})},placeholder:__("选择编辑者")},r.map((function(e){return u.a.createElement(w.a.Option,{value:e.id,key:String(e.id)},e.name)})))),l===s.SHOW_AUTHOR_OPTION.custom_text&&u.a.createElement(_.a,{span:14},u.a.createElement(o.a,{"data-testid":"show-author-option-custom-input",value:y,type:"text",autoComplete:"off",maxLength:20,placeholder:__("请输入（最多 20 个字符）"),onChange:function(e){var t=e.target.value;b(t),m({showAuthorCustomText:t})}})))};S.propTypes={value:c.a.shape({showAuthorCustomText:c.a.string,showAuthorId:c.a.number,showAuthorOption:c.a.number}).isRequired,contributors:c.a.array,onChange:c.a.func.isRequired};var A=S,x={tagWrapper:"DocMetaEdit-module_tagWrapper_H2QK1",tagTip:"DocMetaEdit-module_tagTip_ThFbG",cover:"DocMetaEdit-module_cover_JaV7l",coverPlaceholder:"DocMetaEdit-module_coverPlaceholder_c80Dd",coverActions:"DocMetaEdit-module_coverActions_CZ+Ed",btnRemoveCover:"DocMetaEdit-module_btnRemoveCover_RF2fK",btnRemoveCoverIcon:"DocMetaEdit-module_btnRemoveCoverIcon_ec2SG",moreBtn:"DocMetaEdit-module_moreBtn_c8CgD"};function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function T(){T=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(D([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==N(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(N(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function D(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function L(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){D(a,n,o,i,u,"next",e)}function u(e){D(a,n,o,i,u,"throw",e)}i(void 0)}))}}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H(n.key),n)}}function I(e,t,r){return t=F(t),function(e,t){if(t&&("object"==N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,M()?Reflect.construct(t,r||[],F(e).constructor):t.apply(e,r))}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function U(e,t,r){return(t=H(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}var V=a.a.Item,G=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),U(r=I(this,t,[e]),"onSubmit",(function(e){e.preventDefault(),(0,r.props.form.validateFields)((function(e,t){e||r.handleUploadCover((function(){var e=r.state,n=e.showAuthorOptionData,o=e.description,a=e.cover,i={title:t.title,slug:t.slug,show_author_id:n.showAuthorId,public:r.state.public,custom_description:o,cover:a,custom_cover:a,show_author_option:n.showAuthorOption,show_author_custom_text:n.showAuthorCustomText};r.setState({submitting:!0},L(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.save(i);case 2:r.setState({submitting:!1});case 3:case"end":return e.stop()}}),e)}))))}))}))})),U(r,"handleUploadCover",(function(e){r.coverUploader.current?r.coverUploader.current.onSubmit().then((function(t){r.setState({cover:t||""},e)})):e()})),U(r,"onChangePermission",(function(e){r.setState({public:e})})),U(r,"handleChangeDesc",(function(e){r.setState({description:e.target.value})})),U(r,"showMore",(function(){var e;r.setState({showMore:!0});var t=r.props,n=t.doc,o=t.group,a=o&&o.abilities&&o.abilities.read_tag,i=null==n||null===(e=n.abilities)||void 0===e?void 0:e.update;(a||i)&&v.a.tags.find({docId:n.id}).then((function(e){r.setState({tags:e})}))})),U(r,"onAuthorShowOptionChange",(function(e){r.setState({showAuthorOptionData:e})}));var n=e.doc,o=b.a.getDocShowAuthorId(n),a=b.a.getDocShowAuthorOption(n),i=b.a.getDocShowAuthorCustomText(n);return r.state={public:n.public,cover:n.custom_cover||n.cover||"",description:null!=n.custom_description?n.custom_description:n.description||"",submitting:!1,showAuthorOptionData:{showAuthorId:o||void 0,showAuthorOption:a,showAuthorCustomText:i},showMore:!1,tags:[]},r.coverUploader=u.a.createRef(),r.tagBiz=new d.a({tagProxy:v.a.tags}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(t,e),r=t,(i=[{key:"componentDidMount",value:function(){var e=this;"function"==typeof this.props.getSummary&&this.props.getSummary((function(t){var r=t.summary,n=t.cover;e.props.doc.custom_description||e.setState({description:r}),e.props.doc.cover||""===e.props.doc.cover||e.setState({cover:n})})),this.props.hideMoreInfo||this.showMore()}},{key:"componentWillUnmount",value:function(){this.coverUploader=null}},{key:"shouldSubmitDisabled",value:function(){var e=this.state,t=e.showAuthorOptionData,r=t.showAuthorId,n=t.showAuthorOption,o=t.showAuthorCustomText,a=e.submitting,i=n===s.SHOW_AUTHOR_OPTION.specific_user&&!r||n===s.SHOW_AUTHOR_OPTION.custom_text&&!o;return a||i}},{key:"canEditDoc",value:function(){if(window.appData.sharePage)return!1;var e=this.props.doc;return"Thread"!==e.type&&e.abilities&&e.abilities.update}},{key:"renderTags",value:function(){var e=this.props,t=e.doc,r=e.group,n=this.state.tags,o=this.canEditDoc()&&t&&t.abilities&&t.abilities.destroy,a=o||n&&n.length,i=r&&"User"===r.type,l=__("标签用于管理，仅{desc}可见",{desc:i?__("自己"):m.a.memberTitle(r)});if(a)return u.a.createElement(V,null,u.a.createElement("div",{className:x.tagWrapper},u.a.createElement("p",{className:x.title},__("标签"),u.a.createElement("span",{className:x.tagTip},l)),u.a.createElement(f.a,{tags:n||[],editable:o,group:r,docId:t.id,tagBiz:this.tagBiz})))}},{key:"render",value:function(){var e=this.props,t=e.doc,r=e.book,i=e.hideMoreInfo,l=e.hideTitle,c=this.props.form.getFieldDecorator,s="/".concat(r.namespace,"/"),f={xs:{span:24},sm:{span:14}},d=t.contributors||[],y=this.state.showMore,b=!i||y;return u.a.createElement("div",{className:"doc-meta-edit"},u.a.createElement(a.a,{layout:"vertical"},!l&&u.a.createElement(V,{label:__("标题"),colon:!1,wrapperCol:f},c("title",{initialValue:t.title,rules:[{type:"string",required:!0,message:__("请输入标题")}]})(u.a.createElement(o.a,{type:"text",autoComplete:"off"}))),u.a.createElement(V,{label:__("摘要"),colon:!1},u.a.createElement(o.a.TextArea,{value:this.state.description,onChange:this.handleChangeDesc,autoSize:{minRows:3,maxRows:6},maxLength:150})),u.a.createElement(V,{label:__("封面"),colon:!1},u.a.createElement("div",{className:x.cover},u.a.createElement(h.a,{attachable_type:"Doc",attachable_id:t.id,cover:this.state.cover,ref:this.coverUploader,cropperCheckCrossOrigin:!1,cropperCrossOrigin:"anonymous"}))),b?u.a.createElement(u.a.Fragment,null,u.a.createElement(V,{label:__("作者"),colon:!1},u.a.createElement(A,{value:this.state.showAuthorOptionData,onChange:this.onAuthorShowOptionChange,contributors:d})),u.a.createElement(V,{label:__("路径"),colon:!1,wrapperCol:f},c("slug",{initialValue:t.slug,rules:[{type:"string",required:!0,pattern:/^[a-z0-9\-_\.]{2,190}$/,message:__("访问路径为 2～190 个字符，只能输入小写字母、数字、横线、下划线和点")}]})(u.a.createElement(o.a,{type:"text",addonBefore:s,autoComplete:"off"}))),this.renderTags()):u.a.createElement("div",{className:x.moreBtn,onClick:this.showMore},__("高级选项")," ",u.a.createElement(p.default,null)),u.a.createElement(n.a,{className:"doc-meta-edit-submit",type:"primary",onClick:this.onSubmit,disabled:this.shouldSubmitDisabled()},__("确定"))))}}])&&R(r.prototype,i),l&&R(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,l}(i.Component);G.propTypes={group:c.a.object.isRequired,book:c.a.object.isRequired,doc:c.a.object,save:c.a.func,getSummary:c.a.func,hideMoreInfo:c.a.bool,hideTitle:c.a.bool};t.a=Object(y.b)(a.a.create()(G),!0)},,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r(59);var n=r(30),o=(r(688),r(214)),a=(r(715),r(395)),i=(r(497),r(95)),u=r(0),l=r.n(u),c=r(2),s=r.n(c),f=r(62),d=r.n(f),p=r(532),h=r(68),y=r.n(h),b=r(5),m=r.n(b),v=r(4040),g=r(3988),_=r(4055),w=r(3946),O=r(4047),E=r(1746),P=(r(3322),r(3613)),j="Slider-module_slideTitle_jDMWk",C="Slider-module_slideContainer_5puOR";function k(e){var t=e.title,r=e.onChange,n=e.value,o=e.min,a=e.max,i=e.marks,c=e.className,s=e.valueMap,f=e.labelMap,d=e.unit,p=Object(u.useCallback)((function(e){r(s?s[e]:e)}),[s,r]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:j},l.a.createElement("span",null,t)),l.a.createElement("div",{className:C},l.a.createElement(P.a,{className:c,onChange:p,min:o,max:a,value:f?f[n]:n,tooltipVisible:!1,marks:i})),l.a.createElement("div",null,n,d))}k.propTypes={title:c.PropTypes.string.required,onChange:c.PropTypes.func.required,value:c.PropTypes.number.required,min:c.PropTypes.number.required,max:c.PropTypes.number.required,marks:c.PropTypes.array.required,labelMap:c.PropTypes.object,valueMap:c.PropTypes.object,className:c.PropTypes.string,unit:c.PropTypes.string},k.defaultProps={unit:"px"};var S=r(43),A="Select-module_selectTitle_o273v",x="Select-module_selectOptions_iZn-b",N="Select-module_optionAction_KeaaB",T="Select-module_iconSvg_3tsh1",D="Select-module_optionActive_HTKqR",L="Select-module_optionTitle_ZbDCu";function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function I(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){var t=e.title,r=e.value,n=e.options,o=e.onChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:A},t),l.a.createElement("div",{className:x},n.map((function(e){return l.a.createElement("div",{key:e.value,className:m()(N,I({},D,r===e.value)),"data-aspm-click":e.asp||null,onClick:function(){o(e.value)}},l.a.createElement(S.a,{className:T,width:38,height:28,name:r===e.value?e.selectedIcon:e.icon}),l.a.createElement("div",{className:L},e.title))}))))}M.propTypes={title:c.PropTypes.string.required,value:c.PropTypes.number.required,options:c.PropTypes.array.required,onChange:c.PropTypes.func.required},M.defaultProps={};var F="Switch-module_switchTitle_WJKZB",B="Switch-module_switchContainer_Ajcua";function U(e){var t=e.title,r=e.onChange,n=e.defaultChecked;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:F},t),l.a.createElement("div",{className:B},l.a.createElement(a.a,{size:"small",onChange:r,defaultChecked:n})))}U.propTypes={title:c.PropTypes.string.required,value:c.PropTypes.number.required,defaultChecked:c.PropTypes.bool.required,onChange:c.PropTypes.func.required},U.defaultProps={};var H=r(52),V=r(128),G=r(929),q=r(261),z=r(566),W=r(1029),K=r.n(W),Y=r(4097),J="DocActionMore-module_wrap_le9aB",$="DocActionMore-module_sceneItem_sDxCm",X="DocActionMore-module_checkbox_kHMEj",Q="DocActionMore-module_selectItem_Ga0F3",Z="DocActionMore-module_submenuSwitchItem_AK8z3",ee="DocActionMore-module_slideItem_zrnG8",te="DocActionMore-module_switchItem_vBijY",re="DocActionMore-module_infoItem_pGDVA",ne="DocActionMore-module_submenuContainer_mgSTF",oe="DocActionMore-module_submenuIcon_BidTJ",ae="DocActionMore-module_sceneAction_KTXPK",ie="DocActionMore-module_sceneTitle_GJRbH",ue="DocActionMore-module_switchTitle_oFkGc",le="DocActionMore-module_switchDesc_pWX8R",ce="DocActionMore-module_switchAction_Yfn-p",se="DocActionMore-module_infoContent_PBXyF",fe="DocActionMore-module_menuItemContainer_sQ4rU",de="DocActionMore-module_menuDescribe_g8JML",pe="DocActionMore-module_iconContainer_Jwqih",he="DocActionMore-module_menu_+zp+S",ye="DocActionMore-module_iconBeta_hbg2z",be=r(4081);function me(e){return function(e){if(Array.isArray(e))return ve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ve(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ve(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ge=d()("doc:actionMenu"),_e=function(e){var t=Object(be.a)(e),r=t.cmd,u=t.sendAlimail,c=t.mailSending,s=t.typography,f=t.defaultFontSize,d=t.recordDocSetting,p=t.paragraphSpacing,h=t.reset,b=t.doAction,P=t.getEditorLayout,j=t.getWordCount,C=t.setSendAlimail,A=t.setMailSending,x=t.contextHolder,N=function(t,r){e.onSelect({key:t}),b(t,r),Object(z.a)("c34619.d69461",{create_type:t})},T=function(){return null},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.map((function(e,r){return"scene"===e.type?e.actions.length>0?(n=me(e.actions),l.a.createElement(i.a.Item,{key:"scene",className:$},n.map((function(e){return l.a.createElement("div",{key:e.cmd,scene:e.cmd,className:ae,"data-aspm-click":e.asp||null,onClick:function(){N(e.cmd)}},l.a.createElement(S.b,{name:e.sceneIcon,width:36,height:36}),l.a.createElement("div",{className:ie},e.title))})))):null:"select"===e.type?(c=me((u=e).options),h="",u.cmd===V.a.DOC.document_typography.cmd?h=s:u.cmd===V.a.DOC.document_layout_select.cmd&&(h=P()),l.a.createElement(i.a.Item,{key:u.cmd,className:Q,onClick:function(e){e.domEvent.stopPropagation()}},l.a.createElement(M,{title:u.title,options:c,value:h,onChange:function(e){return N(u.cmd,e)}}))):"switch"===e.type?t?function(e){var t=m()("doc-action-menu-item-".concat(e.cmd),Z),r="";return e.cmd===V.a.DOC.document_paragraph_spacing.cmd&&(r=p===y.a.PARAGRAPH_SPACING.relax),l.a.createElement(i.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-submenu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},l.a.createElement(U,{title:e.title,defaultChecked:r,onChange:function(t){N(e.cmd,t?y.a.PARAGRAPH_SPACING.relax:y.a.PARAGRAPH_SPACING.default)}}))}(e):function(e){var t=m()("doc-action-menu-item-".concat(e.cmd),te),r="";return e.cmd===V.a.DOC.document_layout.cmd&&(r=P()),l.a.createElement(i.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},l.a.createElement("div",{className:ue},l.a.createElement("span",null,e.title),l.a.createElement("div",{className:le},e.describe)),l.a.createElement(a.a,{onChange:function(t){N(e.cmd,t?y.a.VIEWPORT.adapt:y.a.VIEWPORT.fixed)},size:"small",defaultChecked:r===y.a.VIEWPORT.adapt,className:ce}))}(e):"slider"===e.type?function(e){var t=m()("doc-action-menu-item-".concat(e.cmd),ee),r="",n="";return e.cmd===V.a.DOC.document_fontsize.cmd&&(n=s,r=f),l.a.createElement(i.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},l.a.createElement(k,{className:n,title:e.title,min:e.min,max:e.max,value:r,marks:e.marks,labelMap:e.labelMap,valueMap:e.valueMap,onChange:function(t){return N(e.cmd,t)}}))}(e):"checkbox"===e.type?function(e){var t=m()("doc-action-menu-item-".concat(e.cmd),X),r=!1;return e.cmd===V.a.DOC.document_record_setting.cmd&&(r=d),l.a.createElement(i.a.Item,{key:e.cmd,className:t,"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(e){e.domEvent.stopPropagation()}},l.a.createElement(o.a,{checked:r,onChange:function(t){return N(e.cmd,t.target.checked)}},e.title))}(e):"submenu"===e.type?T(e):"divide"===e.cmd?l.a.createElement(i.a.Divider,{key:r,className:t?"menu-sub":""}):function(e){return l.a.createElement(i.a.Item,{key:e.cmd,className:"doc-action-menu-item-".concat(e.cmd),"data-testid":"doc-action-menu-item-".concat(e.cmd),onClick:function(){N(e.cmd)}},l.a.createElement("div",{className:fe,"data-aspm-click":e.asp||null},l.a.createElement("div",{className:pe},e.icon&&l.a.createElement(S.b,{name:e.icon,width:16})),e.tip_id?l.a.createElement(v.a,{tip_id:e.tip_id},e.title):e.title,e.isBeta&&l.a.createElement("span",{className:ye},"Beta")))}(e);var n,u,c,h}));return r};T=function(e){var t=m()("doc-action-menu-item-".concat(e.cmd));return l.a.createElement(i.a.SubMenu,{key:e.cmd,popupClassName:J,className:t,title:l.a.createElement("div",{className:ne,onClick:function(e){return e.stopPropagation()}},l.a.createElement("div",{className:fe,"data-aspm-click":e.asp||null},l.a.createElement("div",{className:pe},e.icon&&l.a.createElement(S.b,{name:e.icon,width:16})),e.tip_id?l.a.createElement(v.a,{tip_id:e.tip_id},e.title):e.title,e.isBeta&&l.a.createElement("span",{className:ye},"Beta"),l.a.createElement(S.b,{className:oe,name:"arrow-right",width:16})),l.a.createElement("div",{className:de},e.describe)),onTitleClick:function(e){e.domEvent.stopPropagation()},"data-testid":"doc-action-menu-item-".concat(e.cmd)},D(e.subcmds,!0))};var L=e.book,R=e.className,I=e.doc,F=e.commandParams,B=e.commands;return ge("render, currect action",r,F),l.a.createElement("div",{className:"".concat(J," ").concat(R)},l.a.createElement(i.a,{className:he,selectable:!1,multiple:!0,mode:"vertical"},D(B),l.a.createElement(i.a.Divider,null),function(){var t,r,n=e.doc;return l.a.createElement(i.a.Item,{key:"info",className:re,onClick:function(e){e.domEvent.stopPropagation()}},l.a.createElement("div",{className:se},"Doc"===n.type?l.a.createElement("div",null,__("字数统计：{count}",{count:j()||0})):l.a.createElement("div",null,__("阅读数：{count}",{count:n.hits||0})),l.a.createElement("div",null,__(n.user?"{user} 创建于 {timer}":"创建于 {timer}",{user:null===(t=n.user)||void 0===t?void 0:t.name,timer:K.a.format(n.created_at,{onlyDate:!0})})),l.a.createElement("div",null,__(n.last_editor?"{user} 更新于 {time}":"更新于 {time}",{user:null===(r=n.last_editor)||void 0===r?void 0:r.name,time:K.a.format(n.content_updated_at)})),l.a.createElement("div",null,__("编辑者："),n.contributors.map((function(e){return e.name})).join("、"))))}()),x,r===V.a.DOC.export_doc.cmd&&l.a.createElement(w.a,{doc:I,bookId:L.id,onCancel:h,exportParams:F}),r===V.a.BOOK.export_book.cmd&&l.a.createElement(E.a,{visible:!0,book:L,exportParams:F,onCancel:h}),r===V.a.DOC.import_to_doc.cmd&&l.a.createElement(O.a,{book:L,formats:G.a.getImportFormats({multi:!1}),importType:y.a.IMPORT_TYPE.PARSE,onCancel:h,onSuccess:function(t){e.onCommandsExecuted({cmd:r,result:t})}}),r===V.a.DOC.import_to_book.cmd&&l.a.createElement(O.a,{book:L,importParams:F,formats:G.a.getImportFormats({multi:!0}),importType:y.a.IMPORT_TYPE.CREATE,onCancel:h,onSuccess:function(t){e.onCommandsExecuted({cmd:r,result:t})},group:window.appData.group}),r===V.a.DOC.save_as_template.cmd&&l.a.createElement(_.a,{visible:r===V.a.DOC.save_as_template.cmd,onCancel:h,modalTitle:__("另存为模板"),book:L,doc:e.doc,group:window.appData.group,organization:window.appData.organization,docletType:e.doc.type,onOpenTemplateSelector:function(){return b(V.a.DOC.create_from_template.cmd)},templateProxy:H.a.templates.v1,docProxy:H.a.docs,inEdit:e.inEdit}),r===V.a.DOC.save_published_as_version.cmd&&l.a.createElement(g.a,{doc:I,docDomain:"Doc",type:"published",onCancel:h,docVersionProxy:H.a.docVersions}),l.a.createElement(n.a,{width:500,visible:u,footer:null,closable:!c,maskClosable:!1,onCancel:function(){C(!1)}},u&&l.a.createElement(Y.a,{onMailSended:function(){A(!1)},onMailSending:function(){A(!0)},doc:I})))};_e.defaultProps={className:"",onSelect:function(){},onCommandsExecuted:function(){},commandParams:{}},_e.propTypes={className:s.a.string,group:s.a.object.isRequired,book:s.a.object.isRequired,doc:s.a.object,commands:s.a.array.isRequired,commandParams:s.a.object,onSelect:s.a.func,onCommandsExecuted:s.a.func,dispatch:s.a.func,onSelectTemplate:s.a.func,inEdit:s.a.bool};t.a=Object(p.d)()(Object(q.b)(_e))},,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t),r.d(t,"OtherMenuContext",(function(){return ht}));r(3340);var n=r(3866),o=(r(3323),r(3619)),a=(r(144),r(60)),i=(r(44),r(10)),u=r(0),l=r.n(u),c=r(62),s=r.n(c),f=r(532),d=r(33),p=r(2),h=r.n(p),y=r(190),b=r(237),m=r.n(b),v=r(14),g=r.n(v),_=r(330),w=r.n(_),O=r(1295),E=r.n(O),P=r(5),j=r.n(P),C=r(43),k=r(249),S=r(2783),A=r(112),x=r(4127),N=(r(57),r(13)),T=r(306),D=r.n(T),L=r(1550),R=r(1732),I=r(1549),M=r(1738),F={list:"index-module_list_c9F2W",content:"index-module_content_fgebc",title:"index-module_title_EjsRx",link:"index-module_link_AN9DG",group:"index-module_group_uqS8H",groupName:"index-module_groupName_Ig7hY",titleItem:"index-module_titleItem_nAGB6",groupText:"index-module_groupText_gP4vU",item:"index-module_item_eJhnq",itemKey:"index-module_itemKey_9S182",itemMarkdown:"index-module_itemMarkdown_MfJ0X",hotkeyName:"index-module_hotkeyName_9l1WM",bold:"index-module_bold_YYrtr",italic:"index-module_italic_QVtB8",strikethrough:"index-module_strikethrough_pe3vq",underline:"index-module_underline_ZOyDi",h1:"index-module_h1_qJ2JJ",h2:"index-module_h2_pdhHd",h3:"index-module_h3_Of72+",h4:"index-module_h4_itEIw",blockquotes:"index-module_blockquotes_2eZhV",icon:"index-module_icon_Zvmgx",cmd:"index-module_cmd_zlq9e",cardInfo:"index-module_cardInfo_PehAT",noneOpacity:"index-module_noneOpacity_wj9mj",cardInfoTip:"index-module_cardInfoTip_N8XcC"};function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var z=N.a.Search,W={cmd:m.a.mac?"Cmd":"Ctrl",Command:m.a.mac?"Cmd":"Ctrl",Option:m.a.mac?"Opt":"Alt",opt:m.a.mac?"Opt":"Alt",shift:"Shift",left:l.a.createElement(L.default,{style:{transform:"rotate(180deg)"}}),right:l.a.createElement(L.default,null),up:l.a.createElement(R.default,null),down:l.a.createElement(I.default,null),"@":l.a.createElement(M.default,{className:F.cmd,width:14}),190:".",188:",",49:"1"};C.b.propTypes={icon:h.a.string};var K=function(e){return l.a.createElement("div",{className:F.hotkeyName},e.text)},Y={text:h.a.string.isRequired,name:h.a.string};function J(e){return e&&e.length?e.map((function(e,t){return"+"===e?l.a.createElement("span",{key:t},"+"):l.a.createElement("kbd",{key:t},W[e]||e)})):null}function $(e){var t=e.config,r=e.className,n=e.showHelpLink,o=e.enableMarkdown,a=G(Object(u.useState)(""),2),i=a[0],c=a[1],s=D()(t);if(i){var f=i.toLowerCase().trim();s=s.map((function(e){var t;return e.children=null===(t=e.children)||void 0===t?void 0:t.filter((function(e){var t,r,n;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().contains(f))||(null===(r=e.text)||void 0===r?void 0:r.toLowerCase().contains(f))||(null===(n=e.keywords)||void 0===n?void 0:n.find((function(e){return e.toLowerCase().contains(f)})))})),e})).filter((function(e){return 0!==e.children.length}))}return l.a.createElement("div",{className:"".concat(F.list," ").concat(r)},l.a.createElement("div",{className:"".concat(F.content," hotkey-content"),"data-testid":"hotkey"},l.a.createElement("div",{className:"".concat(F.title," hotkey-title")},__("快捷键"),n&&l.a.createElement("a",{className:F.link,href:"https://www.yuque.com/yuque/gpvawt/shortcut",target:"_blank"},__("查看更多"))),l.a.createElement("div",{className:F.search},l.a.createElement(z,{value:i,onChange:function(e){c(e.target.value)},placeholder:__("输入功能关键字搜索")})),s.map((function(e,t){return l.a.createElement("div",{className:"".concat(F.group," hotkey-group"),key:e.text||t},e.text&&l.a.createElement("div",{className:F.groupName},l.a.createElement("span",{className:F.groupText},e.text),o&&l.a.createElement("span",{className:F.titleItem},__("快捷键")),o&&l.a.createElement("span",{className:F.titleItem},__("Markdown"))),e.children.map((function(e,t){return l.a.createElement("div",{className:"".concat(F.item," hotkey-item"),key:e.name||t},l.a.createElement("div",{className:F.cardInfo},e.icon&&l.a.createElement(C.b,{className:"".concat(e.noneOpacity?" ".concat(F.noneOpacity):""),name:e.icon,width:16}),l.a.createElement(K,e)),l.a.createElement("div",{className:F.itemKey,"data-testid":"EditorHotkey:".concat(e.name)},J(e.keys)),o&&l.a.createElement("div",{className:F.itemMarkdown,"data-testid":"EditorHotkey:".concat(e.markdown)},J(e.markdown)))})))}))))}K.propTypes=Y,$.KEYS=W,$.defaultProps={showHelpLink:!1},$.propTypes={className:h.a.string,showHelpLink:h.a.bool,enableMarkdown:h.a.bool,config:h.a.arrayOf(h.a.shape({text:h.a.string,children:h.a.arrayOf(h.a.shape(H(H({},Y),{},{keys:h.a.array,icon:h.a.string})))}))};var X=$,Q=r(4075),Z=(r(4064),r(4072),r(3880),r(4071),Q.b),ee=r(3881),te=r(261),re=r(3860),ne=r(5268),oe=r(184),ae=r(3862),ie=r(52),ue=r(32),le=r(295),ce=r(4390),se=r(1468),fe=(r(59),r(30)),de=(r(37),r(8)),pe=(r(3342),r(3882)),he=(r(116),r(38)),ye=(r(132),r(27)),be=r(726),me=r(449),ve=r(1076),ge={ownerHelpModal:"OwnerHelp-module_ownerHelpModal_m25Mz",stepWrapper:"OwnerHelp-module_stepWrapper_dqbv7",firstStepContentWrapper:"OwnerHelp-module_firstStepContentWrapper_q54Bi",title:"OwnerHelp-module_title_zgbAm",titleInDark:"OwnerHelp-module_titleInDark_mzTQV",firstStepContent:"OwnerHelp-module_firstStepContent_xgUc8",firstStepContentLeft:"OwnerHelp-module_firstStepContentLeft_K3QdR",firstIconWrapper:"OwnerHelp-module_firstIconWrapper_1FB9n",contentWrapper:"OwnerHelp-module_contentWrapper_7xaAR",contentTitle:"OwnerHelp-module_contentTitle_rkfHB",contentIcon:"OwnerHelp-module_contentIcon_ZSmIu",content:"OwnerHelp-module_content_Apbyk",scendStepContent:"OwnerHelp-module_scendStepContent_I9djQ",thirdStepContent:"OwnerHelp-module_thirdStepContent_r-Wln",titleImg:"OwnerHelp-module_titleImg_Aqsy2",fourthStepContent:"OwnerHelp-module_fourthStepContent_XEewF",bgImg:"OwnerHelp-module_bgImg_YdosR",desc:"OwnerHelp-module_desc_yYk2g",commonContentWrapper:"OwnerHelp-module_commonContentWrapper_D2wQx",link:"OwnerHelp-module_link_-ZleH",linkIcon:"OwnerHelp-module_linkIcon_ehsgD",stepsAction:"OwnerHelp-module_stepsAction_36ZbX",defaultIcon:"OwnerHelp-module_defaultIcon_u6t7T",defaultIconActive:"OwnerHelp-module_defaultIconActive_r9Z4H",finishIcon:"OwnerHelp-module_finishIcon_6OqJ5"};function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?we(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Oe=[{icon:"icon-introductionspace",color:"@blue-3",title:__("空间"),content:__("知识协同的最大容器，一个空间就相当于一个企业或一个组织。")},{icon:"icon-introductionpublicarea",color:"@cyan-3",title:__("公共区"),content:__("空间的门户，面向全体成员开放，存放可供全员查看和学习的内容。")},{icon:"icon-introductionteam",color:"@orange-3",title:__("团队"),content:__("团队可以圈定特定的成员，用于完成不同的项目或事项的协作。")},{icon:"icon-introductionbook",color:"@purple-3",title:__("知识库"),content:__("知识管理的最小单元，像书一样，可将多篇文档结构化地呈现和管理。")}],Ee=[{url:"https://www.yuque.com/yuque/rvzzxz/yz2ag6bc30rbpalu#s1zef",imgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*hrTzSbccZRUAAAAAAAAAAAAADvuFAQ/original",darkImgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*6pvISK4szqsAAAAAAAAAAAAADvuFAQ/original",title:__("企业知识库"),content:__("企业知识结构化管理，搭建企业 wiki，用知识为员工赋能。")},{url:"https://www.yuque.com/yuque/rvzzxz/yz2ag6bc30rbpalu#cX5Sr",imgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*TSXfRYYt7zMAAAAAAAAAAAAADvuFAQ/original",darkImgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*ERxLT5CaGDQAAAAAAAAAAAAADvuFAQ/original",title:__("产研协作"),content:__("清晰的项目文档和便捷的任务管理，让项目协作更加有序和高效。")},{url:"https://www.yuque.com/yuque/rvzzxz/yz2ag6bc30rbpalu#TNAEu",imgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*TF6hSpK8XZIAAAAAAAAAAAAADvuFAQ/original",darkImgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*PLyPSKNwCosAAAAAAAAAAAAADvuFAQ/original",title:__("部门协作"),content:__("周报月报集中呈现，团队动态一目了然，工作进度高效对焦。")},{url:"https://www.yuque.com/yuque/rvzzxz/yz2ag6bc30rbpalu#xNRgj",imgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*XdO8SpGwFKkAAAAAAAAAAAAADvuFAQ/original",darkImgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*KCypTZ-08UMAAAAAAAAAAAAADvuFAQ/original",title:__("新人培训"),content:__("新人知识系统性学习，统一培训不再依赖口口相传，快速上手不慌张。")}],Pe=[{title:__("邀请需要协作的伙伴加入空间，可在空间通讯录中进行管理"),imgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*FyzNTJouH8YAAAAAAAAAAAAADvuFAQ/original",darkImgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*Oke9SYNCuVsAAAAAAAAAAAAADvuFAQ/original",link:"/r/organizations/dashboard/contacts#inviteUserToken",linkText:__("立即邀请")},{title:__("在空间内，可以选定特定成员创建多个团队进行协作。"),imgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*kazIRIYWSt0AAAAAAAAAAAAADvuFAQ/original",darkImgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*73M2SLi3wVIAAAAAAAAAAAAADvuFAQ/original",link:"https://www.yuque.com/yuque/rvzzxz/bteh5g",linkText:__("了解权限设置")}],je=[{title:__("对空间内的信息、成员、安全等进行设置和管理"),imgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*4EuMQ7o2CHcAAAAAAAAAAAAADvuFAQ/original",darkImgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*CYWqS6vbIdgAAAAAAAAAAAAADvuFAQ/original",link:"/r/organizations/dashboard",linkText:__("前往空间管理")},{title:__("开展日常工作、创作和团队协作"),imgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*iZIORIEQgacAAAAAAAAAAAAADvuFAQ/original",darkImgUrl:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*L0KsS6nNxr0AAAAAAAAAAAAADvuFAQ/original",link:"/dashboard",linkText:__("前往工作台")}],Ce=function(e){var t,r=e.visible,n=e.onCancel,o=e.readOwnerHelpTip,a=e.setTransitionMenuVisible,i=_e(Object(u.useState)(oe.a.get(x.OWNER_HELP_GUIDE_CURRENT)||0),2),l=i[0],c=i[1],s=Object(ve.a)(l),f=_e(Object(u.useState)(Number(oe.a.get(x.OWNER_HELP_GUIDE_CURRENT))||0),2),p=f[0],h=f[1],y=Object(ve.a)(p),b=Object(d.useHistory)(),m=Object(ve.a)(r),v=Object(me.a)().isDarkMode,g=[{defaultIcon:React.createElement("div",{className:ge.defaultIcon},"1"),defaultIconActive:React.createElement("div",{className:ge.defaultIconActive},"1"),finishIcon:React.createElement("div",{className:ge.finishIcon},React.createElement(C.b,{name:"icon-introductioncheck",size:16})),title:__("了解语雀空间"),content:React.createElement("div",{className:ge.firstStepContentWrapper},React.createElement("p",{className:v?ge.titleInDark:ge.title},__("了解核心概念")),React.createElement("div",{className:ge.firstStepContent},React.createElement("div",{className:ge.firstStepContentLeft},Oe.map((function(e){return React.createElement("div",{className:ge.contentWrapper},React.createElement("p",{className:ge.contentTitle},React.createElement("div",{className:ge.firstIconWrapper,style:{background:be.themeToken[e.color]}},React.createElement(C.b,{className:ge.contentIcon,name:e.icon,size:16})),e.title),React.createElement("p",{className:ge.content},e.content))}))),React.createElement("div",null,React.createElement("img",{src:v?"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*c5mcTJA5jaIAAAAAAAAAAAAADvuFAQ/original":"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*6Tx1TY5fXIMAAAAAAAAAAAAADvuFAQ/original",width:380}))))},{defaultIcon:React.createElement("div",{className:ge.defaultIcon},"2"),defaultIconActive:React.createElement("div",{className:ge.defaultIconActive},"2"),finishIcon:React.createElement("div",{className:ge.finishIcon},React.createElement(C.b,{name:"icon-introductioncheck",size:16})),title:__("空间使用案例"),content:React.createElement("div",{className:ge.scendStepContent},React.createElement("p",{className:v?ge.titleInDark:ge.title},__("不同的团队和场景如何使用语雀空间")),React.createElement(he.a,{gutter:16},Ee.map((function(e){return React.createElement(ye.a,{span:12},React.createElement("a",{href:e.url,target:"_blank",className:ge.contentWrapper},React.createElement("div",null,React.createElement("img",{src:v?e.darkImgUrl:e.imgUrl,width:120,height:120})),React.createElement("div",null,React.createElement("p",{className:ge.contentTitle},e.title),React.createElement("p",{className:ge.content},e.content))))}))))},{defaultIcon:React.createElement("div",{className:ge.defaultIcon},"3"),defaultIconActive:React.createElement("div",{className:ge.defaultIconActive},"3"),finishIcon:React.createElement("div",{className:ge.finishIcon},React.createElement(C.b,{name:"icon-introductioncheck",size:16})),title:__("邀请成员协作"),content:React.createElement("div",{className:ge.thirdStepContent},React.createElement("p",{className:ge.title},__("邀请成员加入空间协作"),React.createElement("img",{className:ge.titleImg,style:{height:"36px",width:"170px"},src:v?"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*_XNPSbCrbDUAAAAAAAAAAAAADvuFAQ/original":"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*GlFuR5Yt_ocAAAAAAAAAAAAADvuFAQ/original",width:170,height:36})),React.createElement(he.a,{gutter:16},Pe.map((function(e){return React.createElement(ye.a,{span:12},React.createElement("a",{className:ge.commonContentWrapper,href:e.link,target:"_blank"},React.createElement("div",null,React.createElement("img",{src:v?e.darkImgUrl:e.imgUrl,width:372,height:156})),React.createElement("p",{className:ge.contentTitle},e.title),React.createElement("p",{className:ge.link},e.linkText,React.createElement(C.b,{className:ge.linkIcon,name:"next-page",size:16}))))}))))},{defaultIcon:React.createElement("div",{className:ge.defaultIcon},"4"),defaultIconActive:React.createElement("div",{className:ge.defaultIconActive},"4"),finishIcon:React.createElement("div",{className:ge.finishIcon},React.createElement(C.b,{name:"icon-introductioncheck",size:16})),title:__("开启协同之旅"),content:React.createElement("div",{className:ge.fourthStepContent},React.createElement("p",{className:ge.title},__("恭喜你完成了对空间的初步了解"),React.createElement("img",{className:ge.titleImg,src:v?"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*fgCNTZx5aFUAAAAAAAAAAAAADvuFAQ/original":"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*84d-RYC0OugAAAAAAAAAAAAADvuFAQ/original",width:32})),React.createElement("p",{className:ge.desc},__("和成员一起开启协同之旅吧～")),React.createElement("img",{src:v?"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*Sg9hTJHEdnQAAAAAAAAAAAAADvuFAQ/original":"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*FjKgTqYbxWsAAAAAAAAAAAAADvuFAQ/original",width:270,className:ge.bgImg}),React.createElement(he.a,{gutter:16},je.map((function(e){return React.createElement(ye.a,{span:12},React.createElement("a",{className:ge.commonContentWrapper,href:e.link,target:"_blank"},React.createElement("div",null,React.createElement("img",{src:v?e.darkImgUrl:e.imgUrl,width:372,height:156})),React.createElement("p",{className:ge.contentTitle},e.title),React.createElement("p",{className:ge.link},e.linkText,React.createElement(C.b,{className:ge.linkIcon,name:"next-page",size:16}))))}))))}],_=function(){if(!(s.current>=g.length-1)){var e=Number(s.current)+1;c(e),e>y.current&&h(e)}},w=function(){s.current<=0||c(Number(s.current)-1)},O=function(e){m.current&&(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)||[37,38,39,40].includes(e.keyCode))&&("ArrowLeft"!==e.key&&"ArrowUp"!==e.key&&37!==e.keyCode&&38!==e.keyCode||w(),"ArrowRight"!==e.key&&"ArrowDown"!==e.key&&39!==e.keyCode&&40!==e.keyCode||_())},E=function(){oe.a.set(x.OWNER_HELP_GUIDE_CURRENT,p),n()};return Object(u.useEffect)((function(){return r&&(b.push({pathname:b.location.pathname,search:"?firstGoToOrg=0"}),window.addEventListener("keyup",O),o(),a(!1)),function(){window.removeEventListener("keyup",O)}}),[r]),React.createElement(fe.a,{keyboard:!0,onCancel:E,width:920,footer:null,visible:r,destroyOnClose:!0,className:ge.ownerHelpModal,closeIcon:React.createElement(C.b,{name:"close",size:16})},React.createElement(React.Fragment,null,React.createElement("div",{className:ge.stepWrapper},React.createElement(pe.a,{current:l,size:"small"},g.map((function(e,t){return React.createElement(pe.a.Step,{key:e.title,title:e.title,icon:(oe.a.get(x.NEVER_SHOW_OWNER_HELP)?Number(y.current)>=Number(t):Number(y.current)>Number(t))?e.finishIcon:t===Number(s.current)?e.defaultIconActive:e.defaultIcon})})))),React.createElement("div",{className:"steps-content"},null===(t=g[l])||void 0===t?void 0:t.content),React.createElement("div",{className:ge.stepsAction},React.createElement("div",{className:ge.actionLeft},0===s.current&&React.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/nrpo0b",target:"_blank"},__("查看详细上手步骤")),1===s.current&&React.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/yz2ag6bc30rbpalu",target:"_blank"},__("查看详细介绍"))),React.createElement("div",null,Number(s.current)>0&&React.createElement(de.a,{type:"default",style:{margin:"0 12px"},onClick:function(){return w()}},__("上一步")),Number(s.current)<g.length-1&&React.createElement(de.a,{type:"default",onClick:function(){return _()}},__("下一步")),Number(s.current)===g.length-1&&React.createElement(de.a,{type:"primary",onClick:function(){var e;oe.a.set(x.NEVER_SHOW_OWNER_HELP,!0);var t=null===(e=window.appData.organization)||void 0===e?void 0:e.id;Object(A.spmClick)("c320771.d345650",{organization_id:t}),E()}},__("完成上手，不再显示"))))))},ke=r(5189),Se="index-module_wrapper_rXlLC",Ae="index-module_enableAssistantWrapper_t8Z2V",xe="index-module_visibleWrapper_eqxge",Ne="index-module_pageWrapper_jWyja",Te="index-module_page_EfLhi",De="index-module_visiblePage_snlOt",Le="index-module_hiddenPage_P9+co";function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ie(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Me(e){return function(e){if(Array.isArray(e))return Ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Be(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||Be(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){if(e){if("string"==typeof e)return Ue(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ue(e,t):void 0}}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var He=Object(le.b)((function(){return r.e(1233).then(r.bind(null,7238))}),{suspense:!0}),Ve=Object(le.b)((function(){return r.e(1234).then(r.bind(null,7258))}),{suspense:!0}),Ge=Object(le.b)((function(){return r.e(1340).then(r.bind(null,7259))}),{suspense:!0}),qe=Object(le.b)((function(){return r.e(1276).then(r.bind(null,7260))}),{suspense:!0}),ze=Object(le.b)((function(){return r.e(1384).then(r.bind(null,7261))}),{suspense:!0});function We(e){var t=e.showInstruction,r=e.instructionOpen,n=e.handleGuideVisibleChange,o=e.setOpen,a=e.onCancelOwnerHelpModal,i=e.readOwnerHelpTip,c=e.visible,s=e.updateLogsDate,d=Fe(Object(u.useState)(ke.a.home),2),p=d[0],h=d[1],y=Fe(Object(u.useState)([{page:ke.a.home}]),2),b=y[0],m=y[1],v=Fe(Object(u.useState)(!1),2),g=v[0],_=v[1],w=Object(u.useRef)(null),O=Object(u.useRef)(c),E=Object(f.f)((function(e){return e.group})),P=Object(ce.b)().isInvisible;c&&!O.current&&(O.current=!0);var C=Object(u.useMemo)((function(){var e=56+(P?48:78);return c?{maxHeight:"min(calc(100% - ".concat(e,"px), 668px)"),bottom:"".concat(e,"px")}:{bottom:"".concat(e,"px")}}),[c,P]),k={push:function(e){h(e.page),m([].concat(Me(b),[e]))},replace:function(e){h(e.page);var t=Me(b);t.splice(t.length-1,1,e),m(t)},goBack:function(){var e=Me(b);e.pop();var t=e[e.length-1];h((null==t?void 0:t.page)||ke.a.home),m(e)}},S=function(){n(!1)},A=function(){n(!1),_(!0)},x=function(){n(!1),o(!0)};return Object(se.a)(w,(function(){return n(!1)})),Object(u.useEffect)((function(){r&&c&&n(!1)}),[r,c]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{ref:w},l.a.createElement("div",{style:C,className:j()(Se,Ie(Ie({},xe,c),Ae,E.enableAssistant))},l.a.createElement("div",{className:Ne},b.map((function(e,r){var n=e.page===ke.a.home,o=e.page===p;return l.a.createElement("div",{className:j()(Te,Ie(Ie({},De,o&&!n),Le,!o&&!n)),key:r},function(e){if(!O.current)return null;switch(e.page){case ke.a.home:return l.a.createElement(He,{assistantHistory:k,showInstruction:t,updateLogsDate:s,closeAssistant:S,showOwnerHelp:A,openIntroduce:x});case ke.a.search:return l.a.createElement(Ve,{assistantHistory:k,params:e.params});case ke.a.readDoc:return l.a.createElement(Ge,{assistantHistory:k,params:e.params});case ke.a.feedbackList:return l.a.createElement(qe,{assistantHistory:k,params:e.params});case ke.a.webview:return l.a.createElement(ze,{assistantHistory:k,params:e.params});default:return null}}(e))})))),e.children),g&&l.a.createElement(Ce,{setTransitionMenuVisible:n,visible:g,onCancel:function(){_(!1),a()},readOwnerHelpTip:i}))}var Ke=Object(u.memo)(Object(u.forwardRef)(We)),Ye={entry:"index-module_entry_2-+WM",groupEntry:"index-module_groupEntry_mInTP",guidelines:"index-module_guidelines_Wh9gN",dropdownTrigger:"index-module_dropdownTrigger_bAACL",iconWrapper:"index-module_iconWrapper_VADJO",botIcon:"index-module_botIcon_vUTks",dropdownTriggerHidden:"index-module_dropdownTriggerHidden_bWGTw",robotWrapper:"index-module_robotWrapper_yISQ+",dropdownTriggerVisible:"index-module_dropdownTriggerVisible_OJwhU",arrowDownWrapper:"index-module_arrowDownWrapper_QjN5Y",wrapper:"index-module_wrapper_NMasE",hotkeysPanel:"index-module_hotkeysPanel_2mTMq",ownerTipContent:"index-module_ownerTipContent_yf5zk",closeTipIcon:"index-module_closeTipIcon_CW71T",ownerHelpTooltip:"index-module_ownerHelpTooltip_X5HO3",guideTipParentContent:"index-module_guideTipParentContent_7+YzV",unfinishedTipContent:"index-module_unfinishedTipContent_2ZA83",move:"index-module_move_EI9li",tipContent:"index-module_tipContent_cqZnc",arrow:"index-module_arrow_87E2W",introduce:"index-module_introduce_r4-Jz",noviceTip:"index-module_noviceTip_rOKJF",noviceTipClose:"index-module_noviceTipClose_dnvRp"};function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function $e(){$e=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==Je(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Je(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function Xe(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function Qe(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Xe(a,n,o,i,u,"next",e)}function u(e){Xe(a,n,o,i,u,"throw",e)}i(void 0)}))}}function Ze(e){return function(e){if(Array.isArray(e))return et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return et(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?et(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){lt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ct(n.key),n)}}function ot(e,t,r){return t=it(t),function(e,t){if(t&&("object"==Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,at()?Reflect.construct(t,r||[],it(e).constructor):t.apply(e,r))}function at(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(at=function(){return!!e})()}function it(e){return it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},it(e)}function ut(e,t){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ut(e,t)}function lt(e,t,r){return(t=ct(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ct(e){var t=function(e,t){if("object"!=Je(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Je(t)?t:t+""}g.a.extend(w.a);var st=new s.a("sys:sitetip"),ft={whiteSpace:"nowrap"},dt={siteTip:window.appData.activityTip||window.appData.siteTip||null,readTip:window.appData.readTip||null},pt=m.a.safari,ht=Object(u.createContext)({ref:Object(u.createRef)(),styles:Ye}),yt=function(e){function t(e){var r,n,o,a,u,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lt(c=ot(this,t,[e]),"showGuide",(function(){return"#guide"===window.location.hash||!c.props.guide.readTip[c.orgWikiTipId]&&c.isFresh&&c.state.isOrgWikiPagePathname})),lt(c,"_sidebarChangedListener",{onRightSidebarWidth:function(e){c.setState({rightSidebarWidth:e})}}),lt(c,"_superSidebarListener",{onVisibilityChanged:function(){c.props.dispatch({type:"view/update",payload:{hasSuperSidebar:re.a.isExpanded}})}}),lt(c,"_historyListenerRemover",null),lt(c,"showHotkeys",(function(e){191===e.keyCode&&(y.ua.macos?e.metaKey:e.ctrlKey)&&e.altKey&&c.showView("hotkeys"),27===e.keyCode&&c.hideView("hotkeys")})),lt(c,"initModalVisible",(function(){var e=c.hasUnreadTip();st("init, has read tip: ",e);var t=E.a.parse(window.location.search).toast,r="#open_site_tip"===window.location.hash;if(t)switch(t){case"group_migrate":i.a.success(__("团队已成功迁入空间"));break;case"group_upgrade":i.a.success(__("团队已升级为空间"))}c.setState((function(t){return{views:rt(rt({},t.views),{},{tip:e&&c.props.defaultOpen||r})}}))})),lt(c,"hasUnreadTip",(function(){var e=c.state,t=e.readTip,r=e.siteTip;if(!r)return!1;var n=window.appData,o=n.locale,a=n.me,i=n.organization;if("zh-cn"!==o)return!1;if("0"===E.a.parse(window.location.search).site_tip)return!1;if(a&&g()(a.created_at).isSameOrAfter(r.created_at))return!1;if(i&&g()(i.created_at).isSameOrAfter(r.created_at))return!1;if(!t)return!0;var u=t[r.type]||0,l=Array.isArray(u)?Math.max.apply(Math,Ze(u)):u;return r.id>l})),lt(c,"markSiteTipAsRead",(function(){var e=c.props.dispatch,t=c.state.siteTip,r=t.type;"#open_site_tip"===window.location.hash&&(window.location.hash=""),c.hasUnreadTip()?e({type:"proxy.web/mine.readTip",payload:{data:{id:t.id,type:r}}}).then((function(){c.hideView("tip"),c.setState((function(e){var n=e.readTip||{};return n[r]=t.id,rt(rt({},e),{},{readTip:rt({},n)})}))})):c.hideView("tip")})),lt(c,"shouldShowOwnerHelpTip",(function(){var e;return(null===(e=c.props.me)||void 0===e?void 0:e.id)&&!c.props.guide.readTip[c.tipId]})),lt(c,"readOwnerHelpTip",(function(){c.shouldShowOwnerHelpTip()&&ae.a.readMiniFeatureGuide({tip_id:c.tipId},c.props.dispatch),c.setState({ownerHelpTipShow:!1})})),lt(c,"handleGuideVisibleChange",(function(e){var t=c.state.open;c.setState({ownerHelpTipShow:!1,dropdownVisible:e,isShowAssistantDot:!1,open:!e&&t});var r=g()(new Date).format("YYYY-MM-DD");oe.a.set(x.HAS_OPEN_ASSISTANT,r),c.shouldShowOwnerHelpTip()&&ae.a.readMiniFeatureGuide({tip_id:c.tipId},c.props.dispatch)})),lt(c,"handleVisibleChange",(function(e){e||(c.props.showInstruction&&!c.state.siteTip&&c.hideView("tip"),c.state.isOrgWikiPagePathname?c.props.guide.readTip[c.orgWikiTipId]||ae.a.readMiniFeatureGuide({tip_id:c.orgWikiTipId},c.props.dispatch):c.props.guide.readTip[c.groupTipId]||ae.a.readMiniFeatureGuide({tip_id:c.groupTipId},c.props.dispatch))})),lt(c,"handleServiceVisibleChange",(function(e){c.setState({serviceDropdownVisible:e})})),lt(c,"showModal",(function(){c.hasUnreadTip()||c.showView("tip")})),lt(c,"onModalCancel",(function(){c.transitionMenuRef.current&&c.transitionMenuRef.current.onRead(),c.setState({views:{tip:!1}})})),lt(c,"onCancelOwnerHelpModal",(function(){oe.a.get(x.OWNER_HELP_GUIDE_CURRENT)<=3&&!oe.a.get(x.NEVER_SHOW_OWNER_HELP)&&(c.setState({unfinishedGuideTip:!0}),setTimeout((function(){c.setState({unfinishedGuideTip:!1})}),1500))})),lt(c,"enableMarkdown",(function(e){return e.find((function(e){return e.children.find((function(e){return e.markdown}))}))})),lt(c,"adapterWidth",(function(e){var t=c.enableMarkdown(e);return pt?t?524:384:t?484:344})),c.rootRef=l.a.createRef(),c.pageName=c.getPageName(),c.transitionMenuRef=l.a.createRef(),c.tipKey="owner_help_introduce_tip",c.tipId="".concat(c.tipKey,"_").concat(null===(r=e.me)||void 0===r?void 0:r.id),c.groupTipKey="feature_group_introduce",c.groupTipId="".concat(c.groupTipKey,"_").concat(null===(n=e.me)||void 0===n?void 0:n.id),c.orgWikiTipKey="feature_org_wiki_introduce",c.orgWikiTipId="".concat(c.orgWikiTipKey,"_").concat(null===(o=e.organization)||void 0===o?void 0:o.id),c.feature=ae.a.findFeatureGuide({tip_id:c.orgWikiTipKey,type:"custom"}),c.userCreateAt=new Date(null===(a=e.me)||void 0===a?void 0:a.created_at).getTime(),c.isFresh=c.feature&&new Date(c.feature.createdAt).getTime()>=c.userCreateAt,st("init use",{pageName:c.pageName,tipData:dt}),c.state={rightSidebarWidth:ee.a.rightSidebarWidth,siteTip:dt.siteTip,readTip:dt.readTip,views:{hotkeys:!1,tip:!1},dropdownVisible:!1,formGuideActive:!1,serviceDropdownVisible:!1,ownerHelpTipShow:!1,unfinishedGuideTip:!1,updateLogsDate:null,open:c.props.defaultOpen,isShowAssistantDot:!1,isOrgWikiPagePathname:"/dashboard/org_wiki"===(null===(u=window.location)||void 0===u?void 0:u.pathname)},c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}(t,e),r=t,u=[{key:"componentDidMount",value:function(){var e,t=this;this.initModalVisible(),this.initIsShowAssistantDot(),document.addEventListener("keydown",this.showHotkeys),ee.a.addChangedListener(this._sidebarChangedListener),re.a.addListener(this._superSidebarListener),this._historyListenerRemover=null===(e=this.props.history)||void 0===e?void 0:e.listen((function(e){var r,n=t.props,o=n.organization,a=n.guide,i=n.me,u="/dashboard/org_wiki"===e.pathname,l=!1,c=16731936e5,s=g()(null==i?void 0:i.created_at).isAfter(g()(c));u&&!a.readTip[t.orgWikiTipId]?l=!0:(!u&&(a.readTip[t.groupTipId]||!s)||u&&a.readTip[t.orgWikiTipId]||!u&&s)&&(l=!1),t.setState({open:l,isOrgWikiPagePathname:u});var f=window.location.pathname.includes("r/organizations/dashboard")||"/dashboard"===window.location.pathname,d=(null==o||null===(r=o.abilities)||void 0===r?void 0:r.destroy)&&o.user_id!==i.id;g()(null==o?void 0:o.created_at).isAfter(g()(c))&&f&&d&&!a.readTip[t.tipId]?t.setState({ownerHelpTipShow:!0}):t.setState({ownerHelpTipShow:!1})})),re.a.isExpanded!==this.props.view.hasSuperSidebar&&this.props.dispatch({type:"view/update",payload:{hasSuperSidebar:re.a.isExpanded}})}},{key:"componentWillUnmount",value:function(){var e;document.removeEventListener("keydown",this.showHotkeys),ee.a.removeChangedListener(this._sidebarChangedListener),re.a.removeListener(this._superSidebarListener),null===(e=this._historyListenerRemover)||void 0===e||e.call(this)}},{key:"initIsShowAssistantDot",value:(f=Qe($e().mark((function e(){var t,r,n,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIsShowUpdateLogsDot();case 2:r=window.appData.questionRecommend||{},n=r.type,o=r.id,(null===(t=window.appData.readTip)||void 0===t?void 0:t[n])===o||this.setState({isShowAssistantDot:!0});case 5:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"getIsShowUpdateLogsDot",value:(s=Qe($e().mark((function e(){var t,r,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.appData.isYuque){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,ie.a.mine.getUpdateLogsInfo();case 5:if(null!=(t=e.sent)&&t.content_updated_at_ms){e.next=8;break}return e.abrupt("return");case 8:r=g()(null==t?void 0:t.content_updated_at_ms),n=oe.a.get(x.HAS_OPEN_ASSISTANT)||null,g()(n).isBefore(r,"day")&&this.setState({isShowAssistantDot:!0}),this.setState({updateLogsDate:r});case 13:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"showView",value:function(e){this.setState((function(t){var r=rt({},t.views);return r[e]=!0,{views:r}}))}},{key:"hideView",value:function(e){this.setState((function(t){var r=rt({},t.views);return r[e]=!1,{views:r}}))}},{key:"getPageName",value:function(){var e=this.props.page;return e&&(e.ctx||{}).pageName||null}},{key:"render",value:function(){var e=this,t=window.appData,r=t.isAssistant,i=t.me,u=!(null==i||!i.id),c=this.state.siteTip,s=this.props,f=s.hotKeys,d=s.disableHelpMenus,p=s.hidable,h=s.isEditor,b=!d&&u&&!r&&!ue.c&&!window.h5,m=!re.a.isInvisible,v=l.a.createElement(l.a.Fragment,null,f&&l.a.createElement("div",{className:Ye.dropdownTrigger,onClick:function(){e.showView("hotkeys")}},l.a.createElement(a.a,{overlayInnerStyle:ft,title:l.a.createElement("span",{style:ft},__("快捷键")+(y.ua.macos?"⌥ ⌘ ?":"Alt Ctrl ?"))},l.a.createElement("span",{className:Ye.icon},l.a.createElement(C.b,{name:"editor-shortcut",size:20})))),l.a.createElement(ht.Consumer,null,(function(e){var t=e.ref;return l.a.createElement("div",{ref:t})})),b&&l.a.createElement(Ke,{ref:this.transitionMenuRef,visible:this.state.dropdownVisible,showInstruction:this.props.showInstruction,handleGuideVisibleChange:this.handleGuideVisibleChange,onCancelOwnerHelpModal:this.onCancelOwnerHelpModal,setOpen:function(t){return e.setState({open:t})},updateLogsDate:this.state.updateLogsDate,readOwnerHelpTip:this.readOwnerHelpTip,instructionOpen:this.state.open},l.a.createElement(a.a,{visible:this.state.ownerHelpTipShow,overlayClassName:Ye.ownerHelpTooltip,placement:"left",color:"#2F81F4",getPopupContainer:function(e){return e.parentNode},title:l.a.createElement("div",{className:Ye.ownerTipContent},__("点击查看管理员上手引导"),l.a.createElement(C.b,{name:"close",size:16,className:Ye.closeTipIcon,onClick:this.readOwnerHelpTip}))},l.a.createElement("div",{className:j()(Ye.dropdownTrigger,Ye.guideTipParentContent,lt(lt({},Ye.dropdownTriggerHidden,!this.state.dropdownVisible),Ye.dropdownTriggerVisible,this.state.dropdownVisible)),onClick:function(){Object(A.spmClick)("c311734.d325933"),e.handleGuideVisibleChange(!e.state.dropdownVisible)}},l.a.createElement(o.a,{dot:this.state.isShowAssistantDot,offset:[17,-10]},l.a.createElement("span",{className:j()(Ye.iconWrapper,Ye.arrowDownWrapper)},l.a.createElement(C.b,{name:"arrow-down",className:Ye.arrowDownIcon,width:20,height:20,color:"#fff"})),l.a.createElement("span",{className:j()(Ye.iconWrapper,Ye.robotWrapper)},l.a.createElement(k.a,{src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*SSJmRaVNucQAAAAAAAAAAAAADvuFAQ/original",darkSrc:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*WNxeT6rtmQkAAAAAAAAAAAAADvuFAQ/original",className:Ye.botIcon}))),this.state.unfinishedGuideTip&&l.a.createElement("div",{className:Ye.unfinishedTipContent},l.a.createElement("div",{className:Ye.tipContent},__("点击可再次打开引导"),l.a.createElement("div",{className:Ye.arrow})))))),c&&l.a.createElement(S.a,{visible:this.state.views.tip,tip:c,read:this.markSiteTipAsRead,onCancel:this.onModalCancel}),this.state.open&&b&&l.a.createElement("div",{className:Ye.introduce},l.a.createElement(Z,{handleVisibleChange:function(t){e.setState({open:t}),e.handleVisibleChange(t)}})),f&&l.a.createElement(n.a,{closable:!0,width:this.adapterWidth(f),className:Ye.hotkeysPanel,placement:"right",mask:!1,onClose:function(){e.hideView("hotkeys")},visible:this.state.views.hotkeys},l.a.createElement(X,{config:f,enableMarkdown:this.enableMarkdown(f)})));return p?l.a.createElement(ne.a,{className:j()(Ye.wrapper,Ye.entry,lt({"side-tip-container":h},Ye.groupEntry,m),"yuque-global-popup"),style:this.props.style,ref:this.rootRef,testId:"site-tip",id:"siteTipGuide"},v):l.a.createElement("div",{className:Ye.wrapper,ref:this.rootRef,"data-testid":"site-tip",id:"siteTipGuide"},l.a.createElement("div",{className:j()(Ye.entry,lt({},Ye.groupEntry,m)),style:{position:"fixed",right:this.state.rightSidebarWidth+24}},v))}}],u&&nt(r.prototype,u),c&&nt(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,u,c,s,f}(l.a.Component);yt.defaultProps={defaultOpen:!0,showInstruction:!1},yt.propTypes={page:h.a.object,hotKeys:h.a.array,disableHelpMenus:h.a.bool,dispatch:h.a.func,hidable:h.a.bool,defaultOpen:h.a.bool,showInstruction:h.a.bool,isEditor:h.a.bool,style:h.a.object};t.default=Object(te.b)(Object(f.d)((function(e){return{page:e.page,guide:e.guide,me:e.me,organization:e.organization,group:e.group,view:e.view}}))(Object(d.withRouter)(yt)),!1)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r(711);var n=r(356),o=r(0),a=r.n(o),i=r(2),u=r.n(i),l=r(532),c=r(5),s=r.n(c),f=r(43),d=r(261),p=r(295),h={navigation:"index-module_navigation_uXN0h",triggerIcon:"index-module_triggerIcon_qjqIF",navigationPopoverOverlay:"index-module_navigationPopoverOverlay_h0IVJ"},y=Object(p.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(4),r.e(1368)]).then(r.bind(null,7224))}),{suspense:!0}),b=function(e){var t=e.trigger;return a.a.createElement(n.a,{type:"menu",className:h.navigation,getPopupContainer:function(e){return e.parentNode},trigger:t,overlayClassName:h.navigationPopoverOverlay,placement:"bottomLeft",content:a.a.createElement(y,{isNavigation:!0}),arrowPointAtCenter:!0,mouseLeaveDelay:.3},a.a.createElement("a",{className:s()(h.trigger),"data-testid":"dropdown-navigation","data-aspm-click":"nav_navigation.d1"},a.a.createElement(f.b,{name:"nav-menu",className:h.triggerIcon,width:12})))};b.defaultProps={trigger:"hover"},b.propTypes={trigger:u.a.string};t.a=Object(l.d)((function(e){return e}))(Object(d.b)(b))},,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r(144);var n=r(60),o=(r(246),r(123)),a=(r(37),r(8)),i=(r(59),r(30)),u=r(0),l=r.n(u),c=r(2),s=r.n(c),f=r(3784),d=r(1387),p=r(557),h=r(43),y=r(3607),b=r(848),m=r(261),v=r(3982),g=r(32),_=(r(57),r(13)),w=(r(44),r(10)),O=(r(219),r(53)),E=r(532),P=r(2782),j=r(52),C="DocSummaryInfo-module_modal_WEf3n",k="DocSummaryInfo-module_btnSubmit_-ZmDs";function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function A(){A=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new T(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(D([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==S(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(S(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function x(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){x(a,n,o,i,u,"next",e)}function u(e){x(a,n,o,i,u,"throw",e)}i(void 0)}))}}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function D(e,t,r){return t=R(t),function(e,t){if(t&&("object"==S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L()?Reflect.construct(t,r||[],R(e).constructor):t.apply(e,r))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function M(e,t,r){return(t=F(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}var B=O.a.create,U=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M(r=D(this,t,[e]),"updateDocInfo",N(A().mark((function e(){var t,n,o,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,n=t.doc,o=t.dispatch,e.next=3,j.a.docs.updateMeta({id:n.id,custom_cover:r.state.cover,custom_description:r.state.description});case 3:return a=e.sent,e.abrupt("return",o({type:"doc/update",payload:{custom_cover:a.custom_cover,custom_description:a.custom_description}}));case 5:case"end":return e.stop()}}),e)})))),M(r,"onSubmit",(function(e){e.preventDefault(),r.coverUploader&&(r.setState({submitting:!0}),r.coverUploader.current.onSubmit().then((function(e){r.setState({cover:e||""},(function(){r.updateDocInfo().then((function(){r.setState({submitting:!1}),r.props.onOk()}))}))})).catch((function(e){w.a.error(e.message),r.setState({submitting:!1})})))})),M(r,"handleChangeSummary",(function(e){r.setState({description:e.target.value})})),r.state={submitting:!1,error:"",cover:e.doc.cover||"",description:e.doc.custom_description||""},r.coverUploader=l.a.createRef(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this;"function"==typeof this.props.getSummary&&this.props.getSummary((function(t){var r=t.summary,n=t.cover;e.props.doc.custom_description||e.setState({description:r}),e.props.doc.cover||e.setState({cover:n})}))}},{key:"componentWillUnmount",value:function(){this.coverUploader=null}},{key:"render",value:function(){var e=this.props,t=e.visible,r=e.children,n=e.doc;return l.a.createElement(i.a,{className:C,visible:t,title:__("发布"),footer:null,onCancel:this.props.onCancel,maskClosable:!1,width:608},l.a.createElement(O.a,null,this.state.error&&l.a.createElement("div",{className:"has-error"},l.a.createElement("p",{className:"ant-legacy-form-explain"},__("出错了"))),l.a.createElement(O.a.Item,{label:__("封面"),colon:!1},l.a.createElement(P.a,{attachable_type:"Doc",attachable_id:n.id,cover:this.state.cover,ref:this.coverUploader})),l.a.createElement(O.a.Item,{colon:!1,label:l.a.createElement("span",null,__("摘要"),l.a.createElement("span",{className:"tip"},__("（150字内）")))},l.a.createElement(_.a.TextArea,{autoSize:{minRows:3},maxLength:"150",value:this.state.description,onChange:this.handleChangeSummary})),l.a.createElement(O.a.Item,null,l.a.createElement(a.a,{type:"primary",className:k,disabled:this.state.submitting,onClick:this.onSubmit},__("发布")),r)))}}])&&T(r.prototype,n),o&&T(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(u.PureComponent);U.propTypes={visible:s.a.bool.isRequired,doc:s.a.object.isRequired,getSummary:s.a.func.isRequired,onCancel:s.a.func.isRequired,onOk:s.a.func.isRequired,dispatch:s.a.func.isRequired,children:s.a.node};var H=Object(E.d)((function(e){return e}))(B()(U));function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function G(){G=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==V(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(V(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function q(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){q(a,n,o,i,u,"next",e)}function u(e){q(a,n,o,i,u,"throw",e)}i(void 0)}))}}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q(n.key),n)}}function K(e,t,r){return t=J(t),function(e,t){if(t&&("object"==V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y()?Reflect.construct(t,r||[],J(e).constructor):t.apply(e,r))}function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y=function(){return!!e})()}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}function X(e,t,r){return(t=Q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}var Z=y.e.publish.key.join(),ee=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,u=new Array(r),c=0;c<r;c++)u[c]=arguments[c];return X(e=K(this,t,[].concat(u)),"state",{modalVisible:!1,presentEditModalVisible:!1}),X(e,"ref",l.a.createRef()),X(e,"bindHotkeys",(function(){Object(f.a)(Z,e.readyToPublish)})),X(e,"readyToPublish",function(){var t=z(G().mark((function t(r){var n,o,a,i;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props,a=o.doc,i=o.book,null===(n=e.ref.current)||void 0===n||n.focus(),!i||!i.enable_auto_publish){t.next=6;break}return t.next=5,e.onPublish(r);case 5:case 9:case 13:case 17:return t.abrupt("return");case 6:if(e.props.editMode||!a.published_at){t.next=10;break}return t.next=9,e.onPublish(r);case 10:if(!e.props.editMode||!a.published_at||a.is_fake_published_at){t.next=14;break}return t.next=13,e.onPublish(r);case 14:if(!window.appData.isDocCollaborator){t.next=18;break}return t.next=17,e.onPublish(r);case 18:if(!e.shouldInitDocInfo()){t.next=21;break}return e.setState({modalVisible:!0}),t.abrupt("return");case 21:return t.next=23,e.onPublish(r);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),X(e,"onPublish",function(){var t=z(G().mark((function t(r){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!!!document.querySelector("#present-edit-sidebar")){t.next=4;break}return e.setState({presentEditModalVisible:!0}),t.abrupt("return");case 4:return t.next=6,e.publishDoc(r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),X(e,"publishDoc",function(){var t=z(G().mark((function t(r){var n,o,a,i,u,l,c,s,f;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,o=n.book,a=n.doc,i=n.history,u=n.editMode,l=n.onsubmit,t.next=3,l();case 3:if(!u){t.next=13;break}if(window.dispatchEvent(new CustomEvent("PresentEditSideBar.visibleChange",{detail:{visible:!1}})),g.c||null===(c=window)||void 0===c||c.__setEditMode(!1),!g.c){t.next=9;break}return null!=r&&r.enterReadMode&&(Object(v.c)(a.slug,!0),null===(s=window)||void 0===s||s.__setEditMode(!1)),t.abrupt("return");case 9:f="/".concat(o.namespace,"/").concat(a.slug),"lakesheet"===a.format&&(f="/".concat(o.namespace,"/").concat(a.slug).concat(window.location.hash)),window.sessionStorage.setItem("readerEditModeChange",1),i.replace(f);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),X(e,"onCancelModal",(function(){e.setState({modalVisible:!1})})),X(e,"getVisibilityTip",(function(){var t=e.props,r=t.group,n=t.book,o=t.doc,a=__("公开知识库发布后，所有人可见；私密知识库发布后，团队成员及协作者可见。"),i=b.a.getTypeText(o.type),u=o.published_at?__("更新#action_tip"):__("发布#action_tip");return"User"===r.type?0===o.public?a=__("该{type}是私密状态，{action}后仅自己、协作者可见。",{type:i,action:u}):1===n.public?a=__("该{type}属于公开知识库，{action}后所有人可见。",{type:i,action:u}):0===n.public&&(a=__("该{type}属于私密知识库，{action}后仅自己、协作者可见。",{type:i,action:u})):0===o.public?a=__("该{type}是私密状态，{action}后仅团队成员、协作者可见。",{type:i,action:u}):1===n.public?a=__("该{type}属于公开知识库，{action}后所有人可见。",{type:i,action:u}):0===n.public&&(a=__("该{type}属于私密知识库，{action}后团队成员及协作者可见。",{type:i,action:u})),a})),X(e,"shouldInitDocInfo",(function(){var t=e.props,r=t.book,n=t.doc;return!(!r||"Column"!==r.layout||"Doc"!==n.type||n.published_at)})),X(e,"renderPresentEditModal",(function(){return l.a.createElement(i.a,{className:"present-edit-modal",visible:e.state.presentEditModalVisible,closable:!1,maskClosable:!1,onCancel:z(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({presentEditModalVisible:!1}),t.next=3,e.publishDoc();case 3:case"end":return t.stop()}}),t)}))),onOk:function(){e.setState({presentEditModalVisible:!1}),window.dispatchEvent(new CustomEvent("PresentEditSideBar.saveSeparator",{})),setTimeout(z(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.publishDoc();case 2:case"end":return t.stop()}}),t)}))),300)},okText:__("保存"),cancelText:__("不保存")},l.a.createElement("div",{className:"title"},l.a.createElement(h.b,{className:"warning-icon",name:"warning",width:16,height:16}),__("当前已编辑演示分页，是否保存编辑？")),l.a.createElement("p",{className:"content"},__("选择“不保存”将仅更新文档，不保存已编辑的演示分页")))})),X(e,"renderPublishButton",(function(){var t=e.props,r=t.docStatus,n=t.publishing,o=t.disabled;return l.a.createElement(a.a,{"data-testid":"PublishButton:doc-publish-button",id:"lake-doc-publish-button",type:g.c&&r===p.DOC_STATUS.published?"default":"primary",onClick:e.readyToPublish,onTouchEnd:e.readyToPublish,disabled:o,ref:e.ref},n&&l.a.createElement("span",{className:"larkicon"},l.a.createElement(d.default,null)),l.a.createElement("span",{className:"text"},g.c&&r===p.DOC_STATUS.published?__("已发布"):e.getActionText()))})),X(e,"renderAutoPublishButton",(function(){var t=e.props,r=t.publishing,i=t.disabled,u=t.saving,c=u?__("正在更新中"):__("已开启自动发布，内容将自动更新至阅读页面，亦可手动点击更新"),s=l.a.createElement(h.b,{className:"publish-loading-icon",name:"publish-loading-icon",width:16,height:16});return l.a.createElement(l.a.Fragment,null,l.a.createElement(n.a,{title:c,placement:"bottom",arrowPointAtCenter:!0,overlayStyle:u?void 0:{width:148}},l.a.createElement(a.a,{"data-testid":"PublishButton:doc-exit-edit-button",id:"lake-doc-publish-button",onClick:e.readyToPublish,onTouchEnd:e.readyToPublish,disabled:i,ref:e.ref},u||r?l.a.createElement(o.a,{indicator:s}):l.a.createElement("span",{className:"text"},__("更新")))),e.renderPresentEditModal())})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(t,e),r=t,(u=[{key:"componentDidMount",value:function(){this.bindHotkeys()}},{key:"componentDidUpdate",value:function(e){this.props.errorStatus&&this.props.errorStatus!==e.errorStatus&&this.onCancelModal()}},{key:"componentWillUnmount",value:function(){f.a.unbind(Z)}},{key:"getTipTitle",value:function(){var e=this.props.doc,t="";return t="Sheet"===e.type?e.published_at?__("更新这个表格"):__("发布这个表格"):e.published_at?__("更新这篇文档"):__("发布这篇文档"),"".concat(t," (").concat(y.e.publish.title,")")}},{key:"getActionText",value:function(){return this.props.doc.published_at?__("更新"):__("发布")}},{key:"render",value:function(){return window.__readyToPublish=this.readyToPublish,this.props.book&&this.props.book.enable_auto_publish?this.renderAutoPublishButton():this.shouldInitDocInfo()?l.a.createElement("span",null,this.renderPublishButton(),this.state.modalVisible&&l.a.createElement(H,{"data-testid":"PublishButton:doc-summary-info",visible:this.state.modalVisible,onCancel:this.onCancelModal,onOk:this.onPublish,getSummary:this.props.getSummary})):l.a.createElement("span",null,this.renderPublishButton(),this.renderPresentEditModal())}}])&&W(r.prototype,u),c&&W(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,u,c}(u.PureComponent);ee.propTypes={group:s.a.object.isRequired,book:s.a.object.isRequired,me:s.a.object.isRequired,doc:s.a.object.isRequired,loading:s.a.bool.isRequired,disabled:s.a.bool,publishing:s.a.bool.isRequired,saving:s.a.bool,editMode:s.a.bool,onsubmit:s.a.func.isRequired,getSummary:s.a.func,history:s.a.object,docStatus:s.a.string};t.a=Object(m.b)(ee)},,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(0);t.a=function(e,t){Object(n.useEffect)((function(){var r=new URLSearchParams(e.search);r.get("mode")&&(window.appData.useMode=r.get("mode"),t.push(e.pathname))}),[])}},function(e,t,r){"use strict";t.a={wordCount:"index-module_wordCount_Wzj9E"}},,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r(59);var n=r(30),o=(r(144),r(60)),a=r(0),i=r.n(a),u=r(74),l=r(2),c=r.n(l),s=r(532),f=r(62),d=r.n(f),p=r(3988),h=r(1717),y=r(4117),b=r(43),m=r(4091),v=r(326),g=r(5326),_=r(848),w=r(4090),O=r(128),E=r(929),P=r(3607),j=r(5280),C=r(52),k=r(403),S=r(5346),A=r(4330),x=r(5262),N=(r(246),r(123)),T=r(229),D=r(261);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I(n.key),n)}}function I(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:t+""}function M(e,t,r){return t=B(t),function(e,t){if(t&&("object"==L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,F()?Reflect.construct(t,r||[],B(e).constructor):t.apply(e,r))}function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F=function(){return!!e})()}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}var H=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=M(this,t,[e])).state={loading:!0,contributors:[],user:null,last_editor:null,wordCount:null},r.shouldShowWordCount="Doc"===e.doc.type,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.doc,n=t.book;if(this.shouldShowWordCount){var o=this.props.getWordCount();this.setState({wordCount:o})}this.props.dispatch({type:"proxy.web/docs.findOne",payload:{data:{id:r.slug,book_id:n.id,mode:"raw"}}}).then((function(t){e.setState({loading:!1,user:t.user,last_editor:t.last_editor})})),this.props.dispatch({type:"proxy.web/docs.contributors",payload:{data:{id:r.slug,book_id:n.id}}}).then((function(t){e.setState({contributors:t})}))}},{key:"render",value:function(){var e=this.props.doc;if(this.state.loading)return i.a.createElement(N.a,{justify:"block",className:"doc-insight-spin"});var t=this.state,r=t.user,n=t.last_editor,o=t.contributors;return i.a.createElement("div",{className:"doc-insight"},i.a.createElement("div",{className:"head"},__("统计信息")),i.a.createElement("div",{className:"meta"},this.shouldShowWordCount&&i.a.createElement("div",{className:"word-count"},i.a.createElement("span",{className:"num"},this.state.wordCount),i.a.createElement("span",{className:"desc"},__("字"))),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("a",{href:"/".concat(r.login),className:"user"},r.name),i.a.createElement("span",null,__("创建于#middle")," "),i.a.createElement(T.a,{className:"time",time:e.created_at})),i.a.createElement("li",null,i.a.createElement("a",{href:"/".concat(n.login),className:"user"},n.name),i.a.createElement("span",null,__("最后编辑于")," "),i.a.createElement(T.a,{className:"time",time:e.content_updated_at})))),i.a.createElement("div",{className:"contributors"},i.a.createElement("h4",{className:"title"},__("编辑者")),i.a.createElement("ul",null,o.map((function(e,t){return i.a.createElement("li",{className:"user",key:r.id},i.a.createElement("a",{href:"/".concat(e.login),target:"_blank"},i.a.createElement("span",null,e.name)),t!==o.length-1&&__("、"))})))))}}])&&R(r.prototype,n),o&&R(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(a.PureComponent);H.propTypes={doc:c.a.object.isRequired,getWordCount:c.a.func.isRequired};var V=Object(s.d)((function(e){return e}))(Object(D.b)(H,!0)),G=r(5279),q=(r(711),r(356)),z=r(394),W={avatar:"EditorHeaderCollabUsers-module_avatar_humc6",name:"EditorHeaderCollabUsers-module_name_RmtES",sign:"EditorHeaderCollabUsers-module_sign_f2lq4",signInner:"EditorHeaderCollabUsers-module_signInner_UJ3E3",more:"EditorHeaderCollabUsers-module_more_x6mXq",moreUsers:"EditorHeaderCollabUsers-module_moreUsers_2uEpx"};function K(e){var t=e.user;return i.a.createElement("span",{className:W.avatar},i.a.createElement(z.a,{src:t.avatar_url,name:t.name,size:24}),t.color&&i.a.createElement("span",{className:W.sign},i.a.createElement("div",{className:W.signInner,style:{background:t.color}})))}function Y(e){var t=e.users,r=e.me,n=[],a=[];return t.length<=9?n=t.slice(0,t.length):(n=t.slice(0,9),a=t.slice(9)),i.a.createElement(i.a.Fragment,null,n.map((function(e){return i.a.createElement(o.a,{title:e.name,key:e.id},i.a.createElement("span",null,i.a.createElement(K,{user:e})))})),a.length>0&&i.a.createElement(q.a,{placement:"bottom",content:i.a.createElement("ul",{className:W.moreUsers},a.map((function(e){return i.a.createElement("li",{key:e.id},i.a.createElement(K,{user:e}),i.a.createElement("a",{href:"/".concat(e.login),className:W.name,target:"_blank"},e.name))})))},i.a.createElement("a",{className:"".concat(W.avatar," ").concat(W.more)},"+",a.length)),i.a.createElement(o.a,{title:0===t.length?__("语雀已支持多人同时编辑文档，当前编辑者的头像将显示在此"):__("我"),overlayStyle:{minWidth:"24px",width:0===t.length?"192px":"unset"}},i.a.createElement("span",null,i.a.createElement(K,{user:r}))))}Y.propTypes={users:c.a.array.isRequired,me:c.a.object.isRequired};var J=Y,$=r(4386);r(4314);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Q(){Q=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==X(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(X(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function Z(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function ee(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Z(a,n,o,i,u,"next",e)}function u(e){Z(a,n,o,i,u,"throw",e)}i(void 0)}))}}function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ce(n.key),n)}}function oe(e,t,r){return t=ie(t),function(e,t){if(t&&("object"==X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ae()?Reflect.construct(t,r||[],ie(e).constructor):t.apply(e,r))}function ae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ae=function(){return!!e})()}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ue(e,t){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ue(e,t)}function le(e,t,r){return(t=ce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(e){var t=function(e,t){if("object"!=X(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==X(t)?t:t+""}var se=d()("editor:doc:head"),fe=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),le(r=oe(this,t,[e]),"handleKeyDownEvent",(function(e){(e.ctrlKey||e.metaKey)&&74===e.keyCode&&(e.preventDefault(),r.setState({showSearchModal:!0}))})),le(r,"saveMeta",(function(e,t){var n=r.props,o=n.doc,a=n.book,i={id:o.id},u=!1,l=function(){"function"==typeof t&&t(),r.setState({showMetaEdit:!1})};Object.keys(e).forEach((function(t){("custom_cover"===t&&e.custom_cover!==o.cover||void 0!==e[t]&&e[t]!==o[t])&&(u=!0,i[t]=e[t])})),u?(se("save meta:",i),r.props.dispatch({type:"proxy.web/docs.updateMeta",payload:{data:i}}).then((function(e){r.props.dispatch({type:"doc/update",payload:i}),r.props.dispatch({type:"book/update",payload:{toc:a.toc.map((function(e){return e.url===o.url||e.doc_id===o.id?re(re({},e),{},{title:i.title}):e})),docs:a.toc.map((function(e){return e.id===o.id?re(re({},e),{},{title:i.title}):e}))}}),l(),i.slug&&(window.location.href="/".concat(a.namespace,"/").concat(i.slug,"/edit"))})).catch((function(e){t(e)}))):l()})),le(r,"showStatics",(function(){r.setState({showStatics:!0})})),le(r,"showMetaEdit",(function(){r.setState({showMetaEdit:!0})})),le(r,"saveTitle",(function(e){r.saveMeta({title:e})})),le(r,"exec",function(){var e=ee(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se("exec: ".concat(t)),e.t0=t,e.next=e.t0===O.a.DOC.statics.cmd?4:e.t0===O.a.DOC.edit_meta.cmd||e.t0===O.a.DOC.edit_table_meta.cmd?6:e.t0===O.a.DOC.history.cmd?8:e.t0===O.a.DOC.save_editing_as_version.cmd?10:e.t0===O.a.DOC.save_as_template.cmd?14:17;break;case 4:return r.showStatics(),e.abrupt("break",18);case 6:return r.showMetaEdit(),e.abrupt("break",18);case 8:return r.props.showHistory(),e.abrupt("break",18);case 10:return e.next=12,r.props.save(P.h.USER_SAVE_AS_VERSION);case 12:return r.setState({showSaveAsVersion:!0}),e.abrupt("break",18);case 14:return e.next=16,r.props.save(P.h.USER_SAVE_AS_TEMPLATE);case 16:case 17:return e.abrupt("break",18);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),le(r,"getDisabledActions",(function(){var e=[];return window.appData.isDocCollaborator&&e.push(O.a.DOC.delete),e})),r.state={showMetaEdit:!1,showStatics:!1,showSaveAsVersion:!1,showSearchModal:!1},r.docTitleRef=i.a.createRef(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(t,e),r=t,(a=[{key:"componentDidMount",value:function(){this.props.editMode||window.addEventListener("keydown",this.handleKeyDownEvent,!1)}},{key:"componentWillUnmount",value:function(){this.props.editMode||window.removeEventListener("keydown",this.handleKeyDownEvent)}},{key:"isPublishEnabled",value:function(){var e=this.props,t=e.editable,r=e.publishing,n=e.loading;return t&&!r&&!n}},{key:"renderDocSaveTip",value:function(){var e=this.props.editMode,t=i.a.createElement("div",{className:"lark-editor-header-status"},i.a.createElement("div",{className:"lark-editor-save-tip"},i.a.createElement(A.a,{netStatus:this.props.netStatus,docStatus:this.props.docStatus,savedAt:this.props.savedAt,showHistory:this.props.showHistory}),i.a.createElement(b.b,{name:"cloud",width:16})));if(e){var r=document.getElementById("docSaveTipContainer");return r?Object(u.createPortal)(t,r):null}return i.a.createElement("div",{className:"lark-editor-header-status"},i.a.createElement("div",{className:"lark-editor-save-tip"},i.a.createElement(A.a,{netStatus:this.props.netStatus,docStatus:this.props.docStatus,savedAt:this.props.savedAt,showHistory:this.props.showHistory}),i.a.createElement(b.b,{name:"cloud",width:16})))}},{key:"renderEditorHeaderCollabUsers",value:function(){var e=this.props,t=e.me,r=e.editMode;if(e.collabUsers){var n=i.a.createElement("div",{className:"lark-editor-collab-users",style:r?{marginLeft:16}:{}},i.a.createElement(J,{users:this.props.collabUsers,me:t}));if(r){var o=document.getElementById("collabUsersContainer");return o?Object(u.createPortal)(n,o):null}return n}return null}},{key:"renderPublishButton",value:function(){var e=this.props,t=e.doc,r=e.book,n=e.me,o=e.group,a=e.pageReady,l=e.saving,c=e.publishing,s=e.publish,f=e.getSummary,d=e.errorStatus,p=e.editMode,h=e.history,y=e.docStatus,b=i.a.createElement(S.a,{doc:t,book:r,group:o,me:n,loading:!a,saving:l,title:_.a.getFormalTitle(t),disabled:!this.isPublishEnabled(),publishing:c,onsubmit:s,getSummary:f,errorStatus:d,editMode:p,history:h,docStatus:y});if(p){var m=document.getElementById("publishButtonContainer");return m?Object(u.createPortal)(b,m):null}return b}},{key:"isHideNavMode",value:function(){return Object(k.b)()}},{key:"render",value:function(){var e,t,r=this,a=this.props,u=a.organization,l=a.group,c=a.book,s=a.doc,f=a.shortDocTitle,d=a.me,P=a.editMode;return window.__editMode_show_history=function(){return r.exec(O.a.DOC.history.cmd)},i.a.createElement("div",{className:"lark-editor-header",type:s.type,style:P?{display:"none"}:{}},i.a.createElement("div",{className:"lark-editor-header-content"},!this.isHideNavMode()&&i.a.createElement("div",{className:"lark-editor-header-back"},i.a.createElement(g.a,{book:c,doc:s,group:l})),i.a.createElement("div",{className:"lark-editor-header-info",style:this.isHideNavMode()?{marginLeft:76}:{}},i.a.createElement("div",{className:"lark-editor-header-title",ref:this.docTitleRef},i.a.createElement($.a,{title:s.title,saveTitle:this.saveTitle}),i.a.createElement(_.b,{group:l,book:c,doc:s,organization:u,getPopupContainer:function(){return r.docTitleRef.current}})),i.a.createElement("div",{className:"lark-editor-header-crumb-status"},!this.isHideNavMode()&&i.a.createElement(i.a.Fragment,null,!f&&i.a.createElement(w.a,{group:l,book:c,noGroup:!1,showBookIcon:!1,disableClickOnIcon:!0}),!f&&i.a.createElement("span",{className:"split"},"|")),this.renderDocSaveTip())),i.a.createElement("div",{className:"lark-editor-header-action"},this.renderEditorHeaderCollabUsers(),(null===(e=s.abilities)||void 0===e?void 0:e.create_collaborator)&&i.a.createElement("div",{className:"lark-editor-header-action-item",style:{marginRight:14,paddingTop:5,cursor:"pointer"}},i.a.createElement(y.ShareButton,{shareViewType:"DOC",key:"collaborator-doc-".concat(s.id),targetResource:s,organization:u,book:c,group:l,canCollaborator:null===(t=s.abilities)||void 0===t?void 0:t.create_collaborator,onlyCollaborator:!0,me:d},i.a.createElement(o.a,{title:__("协作"),placement:"bottom"},i.a.createElement("span",{"data-testid":"doc-action-collaborate","data-aspm-click":"d225876"},i.a.createElement(b.b,{name:"nav-invite",width:20}))))),"Show"===s.type&&i.a.createElement("div",{className:"lark-editor-play-show"},i.a.createElement(j.a,null)),i.a.createElement("div",{className:"lark-editor-header-action-item"},this.renderPublishButton()),i.a.createElement("div",{className:"lark-editor-header-more","data-testid":"lark-editor-header-more"},i.a.createElement(h.a,{"data-testid":"doc-reader-more-actions",direction:"circle",iconWidth:20,content:i.a.createElement(G.a,{commands:E.a.adjustCommands(E.a.additionalActionsInEditPage(s)),disabledCommands:this.getDisabledActions(),book:c,doc:s,onSelect:function(e){var t=e.key;r.exec(t)},onCommandsExecuted:function(e){e.cmd===O.a.DOC.delete.cmd&&r.props.onDeleted()},inEdit:!0})})))),this.state.showMetaEdit&&i.a.createElement(n.a,{width:514,visible:!0,centered:!0,title:__("设置"),footer:null,onCancel:function(){r.setState({showMetaEdit:!1})},bodyStyle:{maxHeight:"90vh",overflow:"auto",paddingTop:16}},i.a.createElement(x.a,{doc:s,group:l,book:c,save:this.saveMeta,getSummary:this.props.getSummary,key:"doc-meta-edit-from-title"})),this.state.showStatics&&i.a.createElement(n.a,{width:384,visible:!0,footer:null,onCancel:function(){r.setState({showStatics:!1})}},i.a.createElement(V,{getWordCount:this.props.getWordCount})),this.state.showSaveAsVersion&&i.a.createElement(p.a,{doc:s,docDomain:"Doc",type:c.enable_auto_publish?"published":"draft",onCancel:function(){r.setState({showSaveAsVersion:!1})},docVersionProxy:C.a.docVersions}),this.state.showSearchModal&&i.a.createElement(m.default,{onCancel:ee(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)(500);case 2:r.setState({showSearchModal:!1});case 3:case"end":return e.stop()}}),e)}))),sence:"modal",subSence:"docEdit",visible:this.state.showSearchModal,forceDisplay:!0,jumpToNewPage:!0}))}}])&&ne(r.prototype,a),l&&ne(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,l}(a.PureComponent);fe.defaultProps={collabUsers:null},fe.propTypes={dispatch:c.a.func.isRequired,organization:c.a.object,group:c.a.object.isRequired,book:c.a.object.isRequired,doc:c.a.object.isRequired,me:c.a.object.isRequired,collabUsers:c.a.array,editing:c.a.bool,editable:c.a.bool,pageReady:c.a.bool.isRequired,publishing:c.a.bool.isRequired,saving:c.a.bool,savedAt:c.a.object,shortDocTitle:c.a.bool,save:c.a.func.isRequired,publish:c.a.func.isRequired,showHistory:c.a.func.isRequired,getWordCount:c.a.func,getSummary:c.a.func,onDeleted:c.a.func,netStatus:c.a.string,docStatus:c.a.string,editMode:c.a.bool,history:c.a.object};t.a=Object(s.d)((function(e){return{organization:e.organization,group:e.group,book:e.book,doc:e.doc,me:e.me}}))(fe)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(33),i=r(3739),u=r(557),l=r(74),c=r.n(l),s=r(2),f=r.n(s),d=r(532),p=r(5),h=r.n(p),y=r(416),b=r.n(y),m=r(1012),v=r.n(m),g=r(191),_=r.n(g),w=r(258),O=r.n(w),E=r(4343),P=r(189),j=r(112),C=r(2751),k=r(1313),S=r(257),A=r(3698),x=r(5387),N=r(52),T=r(5365);function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function R(e){var t=e.doc,r=e.workflow,o=D(n.useState(0),2),a=o[0],i=o[1];n.useEffect((function(){i(t.word_count||0)}),[]);var u=n.useCallback(b()((function(){var e=r.getWordCount();i(e)}),3e3,{leading:!0}),[t]);return n.useEffect((function(){return window.addEventListener("GetDocWordCount",u,!1),function(){window.removeEventListener("GetDocWordCount",u,!1),u.cancel()}}),[]),n.createElement("div",{className:T.a.wordCount},a," ",__("字"))}var I=r(4354),M=r(5168),F={creationGuide:"CommonEditPage-module_creationGuide_AaTbI",guideWrapper:"CommonEditPage-module_guideWrapper_+9pCK",adaptMode:"CommonEditPage-module_adaptMode_Tq+Y+",editMode:"CommonEditPage-module_editMode_pYkEm",commonEditPage:"CommonEditPage-module_commonEditPage_Cwjj2"};function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function U(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H.apply(null,arguments)}function V(){V=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),u=new x(n||[]);return o(i,"_invoke",{value:C(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",b={};function m(){}function v(){}function g(){}var _={};c(_,i,(function(){return this}));var w=Object.getPrototypeOf,O=w&&w(w(N([])));O&&O!==r&&n.call(O,i)&&(_=O);var E=g.prototype=m.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,a,i,u){var l=f(e[o],e,a);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==B(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var u=n.delegate;if(u){var l=k(u,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(B(t)+" is not iterable")}return v.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},P(j.prototype),c(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},P(E),c(E,l,"Generator"),c(E,i,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function z(e,t,r,n,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function W(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){z(a,n,o,i,u,"next",e)}function u(e){z(a,n,o,i,u,"throw",e)}i(void 0)}))}}var K=Object(n.lazy)((function(){return Promise.all([r.e(1),r.e(27),r.e(28),r.e(1267)]).then(r.bind(null,6404))})),Y=Object(n.lazy)((function(){return Promise.all([r.e(1),r.e(27),r.e(1261)]).then(r.bind(null,5852))})),J=window.self!==window.top;function $(e){return S.TYPE_FORMAT_MAP[e.type]===S.FORMAT.LAKETABLE&&!window.appData.isDesktopApp}function X(e,t,r){return Q.apply(this,arguments)}function Q(){return(Q=W(V().mark((function e(t,r,n){var o;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.docs.copy({doc_id:t.id,target_doc_id:r.id,only_draft:!0});case 2:if((o=e.sent).content=o.content||o.body_draft_asl||o.body_draft,!$(o)){e.next=6;break}return e.abrupt("return",{title:n||o.title,content:o.content,type:S.FORMAT.LAKETABLE});case 6:return e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t,r,n){return ee.apply(this,arguments)}function ee(){return(ee=W(V().mark((function e(t,r,n,o){var a,i,u,l,c;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.k)(t.id);case 2:if(a=e.sent,i=S.FORMAT_TYPE_MAP[a.format],u=o||a.name,i!==r.type){e.next=13;break}if(a.format!==S.FORMAT.LAKETABLE&&!/<card.*name=\"dataTable\"/.test(a.doclet.body_asl)){e.next=11;break}return e.next=9,Object(k.c)(n,a,{docId:r.id});case 9:return l=e.sent,e.abrupt("return",{title:u,content:a.format===S.TYPE_FORMAT_MAP.Doc?l.body_draft_asl:l.body_draft});case 11:return Object(j.spmClick)(C.a.TEMPLATE_USAGE,{id:a.id,type:a.type,format:a.format,name:a.name,platform:"pc"}),e.abrupt("return",{title:u,content:a.format===S.TYPE_FORMAT_MAP.Doc?a.doclet.body_asl:a.doclet.body});case 13:return e.next=15,Object(k.c)(n,a);case 15:c=e.sent,window.open("/".concat(n.namespace,"/").concat(c.slug,"/edit"));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){var t,r=e.doc,i=e.book,l=e.group,s=e.header,f=e.editMode,d=e.dispatch,p=e.me,y=s||x.a,m=Object(n.useRef)(null),v=Object(a.useHistory)(),g=Object(a.useParams)().doc,_=Object(n.useRef)(!1),w=Object(I.a)({doc:r,book:i,group:l,dispatch:d,onPublishSuccessRedirect:window.appData.isYuqueMobileApp?function(e){return setTimeout((function(){window.location.replace(e)}),1e3)}:void 0,readerEditMode:f,matchCondition:f?(null==r||null===(t=r.readerEditModeData)||void 0===t?void 0:t.matchCondition)||{}:window.appData.matchCondition||{},currentDocSlug:g,me:p}),j=w.getOpenEditorConfig(),C=w.getWorkflow(),k=w.getTheme(),S=w.state,N=S.historyView,T=S.wizardView,D=S.editorLoaded,L=S.docTitle,B=w.buildEditorProps(),q=w.buildHistoryProps(),z=w.buildHeadProps(),Q=w.buildStatusProps();Object(n.useEffect)((function(){f&&!_.current&&(!0!==D||r.slug!==g||O()(r.body_asl)||(w.start(r),_.current=!0))}),[D,r,g]),Object(n.useEffect)((function(){f||!0!==D||w.start()}),[D]);var ee=G(o.a.useState((function(){return window.innerHeight})),2),te=ee[0],ne=ee[1];o.a.useEffect((function(){var e=b()((function(){ne(window.innerHeight)}),100);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(n.useEffect)((function(){return function(){f&&(C.save(u.SAVE_TYPE.AUTO),C.destroy())}}),[f]);var oe=G(o.a.useState(26),2),ae=oe[0],ie=oe[1];Object(n.useEffect)((function(){if("Doc"===r.type&&T){var e,t=null===(e=m.current)||void 0===e?void 0:e.querySelector(".ne-engine :first-child");t&&t.offsetHeight&&ie(t.offsetHeight)}}),[T,r.type]);var ue=G(o.a.useState(50),2),le=ue[0],ce=ue[1];o.a.useLayoutEffect((function(){"Doc"===r.type&&T&&setTimeout((function(){var e,t=null===(e=m.current)||void 0===e?void 0:e.querySelector(".ne-editor .lake-title-editor textarea:first-child");t&&t.offsetHeight&&ce(t.offsetHeight)}),0)}),[L,T,r.type]),Object(A.a)(r.title,f);var se=function(){var e=W(V().mark((function e(t){var n,o,a,u,l=arguments;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(l.length>1&&void 0!==l[1])||l[1])){e.next=8;break}return e.next=4,Z(t,r,i,L);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",w.useTemplate(n));case 8:return e.next=10,X(t,r,L);case 10:o=e.sent,w.useTemplate(o),$(o)&&(null==C||null===(a=C.engine)||void 0===a||null===(u=a.requestRecords)||void 0===u||u.call(a));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=e.layout||k.viewport||"fixed",de=o.a.useMemo((function(){return 110+(le||50)+37+20+2*(ae||26)+16}),[le,ae]);return o.a.createElement("div",{id:"commonEditPage",className:h()("lark",F.commonEditPage,e.className),"data-testid":"lock-based-doc-editor"},D&&o.a.createElement(re,{doc:r}),o.a.createElement("div",{className:h()("lark-editor","lark-editor-lake",{"lark-iframe-mode":J,"lake-editor-adapt":"adapt"===fe}),ref:m},!j.isServify&&c.a.createPortal(o.a.createElement(E.a,Q),document.querySelector("body")),j.showHeader&&o.a.createElement(y,H({},z,{editMode:f,history:v})),e.renderEditor(B)),"Doc"===r.type&&o.a.createElement(R,{doc:r,workflow:C}),N&&e.renderHistory(q),J&&j.isEmbedMode&&C.isReady()&&o.a.createElement(M.b,{doc:r,getContainer:function(){return m},getContent:C.engine.getEditorContent,setContent:C.engine.setContent,getTitle:function(){return r.title},workflow:C,autoHeight:j.autoHeight,backgroundColor:j.backgroundColor,bodyBackgroundColor:j.bodyBackgroundColor,toolbarBackgroundColor:j.toolbarBackgroundColor,insertContent:function(e){C.engine.insertContent(e)},publish:w.onPublish}),!J&&o.a.createElement(P.a,{noMessage:!0},o.a.createElement(n.Suspense,{fallback:o.a.createElement("div",null)},"Doc"===(null==r?void 0:r.type)?o.a.createElement("div",{className:h()(F.creationGuide,U(U({},F.adaptMode,"adapt"===k.viewport),F.editMode,f)),style:{top:de}},o.a.createElement(Y,{className:F.guideWrapper,doc:r,height:te-de,book:i,group:l,visible:T,isFullWidth:"adapt"===k.viewport,onUseTemplate:se})):o.a.createElement(K,{currentDoc:r,viewport:k.viewport,visible:T,book:i,group:l,useTemplate:se,requestRecords:C.engine&&C.engine.requestRecords}))))}function re(e){var t=e.doc,r=Object(n.useRef)(!1);return Object(n.useEffect)((function(){var e=document.querySelector(i.a)||document.querySelector(i.b),n=b()((function(e){r.current&&3!==e.eventPhase&&i.c.saveEditPosition(t.id)}),300);return null==e||e.addEventListener("scroll",n),function(){n.cancel(),null==e||e.removeEventListener("scroll",n)}}),[t.id]),Object(n.useEffect)((function(){var e=setTimeout((function(){r.current=!0}),1e3);return function(){clearTimeout(e)}}),[]),Object(n.useEffect)((function(){var e=function(){i.c.clearPosition()};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[]),null}function ne(e){return e.editMode&&e.doc.readerEditModeData?o.a.createElement(te,e):e.editMode?o.a.createElement("span",{"data-testid":"readerEditModeData-null"}):o.a.createElement(te,e)}te.propTypes={doc:f.a.object.isRequired,book:f.a.object.isRequired,group:f.a.object.isRequired,layout:f.a.oneOf(["fixed","adapt"]),renderEditor:f.a.func.isRequired,renderHistory:f.a.func.isRequired,header:f.a.elementType,error:f.a.object,editMode:f.a.bool};t.a=Object(d.d)((function(e){return{book:e.book,doc:e.doc,group:e.group,me:e.me}}))(o.a.memo(ne,(function(e,t){var r=["book","doc","group","me","layout","editMode","error"];return v()(_.a.apply(void 0,[e].concat(r)),_.a.apply(void 0,[t].concat(r)))})))},,,,,,,,,,,,,,,,,,function(e,t,r){var n;(function(){"use strict";function r(e){return">"===e}function o(e){return"<"===e}function a(e){return/^\s+$/.test(e)}function i(e){var t=e.match(/^\s*<([^!>][^>]*)>\s*$/);return!!t&&t[1].trim().split(" ")[0]}function u(e){return/--\>$/.test(e)}var l,c=new RegExp("^<(iframe|object|math|svg|script|video|head|style|a)");function s(e){var t=l.exec(e);return t&&t[1]}function f(e,t){return e.substring(e.length-t.length-2)==="</"+t}function d(e){return/^\s*<[^>]+\/>\s*$/.test(e)}function p(e){return/^<img[\s>]/.test(e)||function(e){return!i(e)}(e)||s(e)||d(e)}function h(e){return{string:e,key:m(e)}}function y(e,t,r,n){this.segment=n,this.length=r,this.startInBefore=e+n.beforeIndex,this.startInAfter=t+n.afterIndex,this.endInBefore=this.startInBefore+this.length-1,this.endInAfter=this.startInAfter+this.length-1,this.segmentStartInBefore=e,this.segmentStartInAfter=t,this.segmentEndInBefore=this.segmentStartInBefore+this.length-1,this.segmentEndInAfter=this.segmentStartInAfter+this.length-1}function b(e){for(var t="char",n="",i="",l=[],c=0;c<e.length;c++){var d=e[c];switch(t){case"tag":var p=s(n);p?(t="atomic_tag",i=p,n+=d):/^<!--/.test(n)?(t="html_comment",n+=d):r(d)?(n+=">",l.push(h(n)),n="",t=a(d)?"whitespace":"char"):n+=d;break;case"atomic_tag":r(d)&&f(n,i)?(n+=">",l.push(h(n)),n="",i="",t="char"):n+=d;break;case"html_comment":u(n+=d)&&(n="",t="char");break;case"char":o(d)?(n&&l.push(h(n)),n="<",t="tag"):/\s/.test(d)?(n&&l.push(h(n)),n=d,t="whitespace"):/[\w\d\#@]/.test(d)?n+=d:/&/.test(d)?(n&&l.push(h(n)),n=d):(n+=d,l.push(h(n)),n="");break;case"whitespace":o(d)?(n&&l.push(h(n)),n="<",t="tag"):a(d)?n+=d:(n&&l.push(h(n)),n=d,t="char");break;default:throw new Error("Unknown mode "+t)}}return n&&l.push(h(n)),l}function m(e){var t=/^<img.*src=['"]([^"']*)['"].*>$/.exec(e);if(t)return'<img src="'+t[1]+'">';var r=/^<a.*href=['"]([^"']*)['"]/.exec(e);if(r)return'<a href="'+r[1]+'"></a>';var n=/^<object.*data=['"]([^"']*)['"]/.exec(e);if(n)return'<object src="'+n[1]+'"></object>';if(/^<(svg|math|video)[\s>]/.test(e)){var o=e.indexOf('data-uuid="');return-1!==o?e.slice(0,o)+e.slice(o+44):e}var a=/^<iframe.*src=['"]([^"']*)['"].*>/.exec(e);if(a)return'<iframe src="'+a[1]+'"></iframe>';var i=/<([^\s>]+)[\s>]/.exec(e);return i?"<"+i[1].toLowerCase()+">":e?e.replace(/(\s+|&nbsp;|&#160;)/g," "):e}function v(e){return e.reduce((function(e,t,r){return e[t.key]?e[t.key].push(r):e[t.key]=[r],e}),Object.create(null))}function g(){this._root=null}function _(e){for(var t=e.beforeTokens,r=e.afterMap,n=null,o=null,a=0;a<t.length;a++){var i=!1,u=t.length-a;if(o&&u<o.length)break;var l=t[a];if(" "!==l.key){n===a-1&&(i=!0);var c=r[l.key];c&&c.forEach((function(t){var r=o?o.length:0,n=w(e,a,t,r,i);n&&n.length>r&&(o=n)}))}else n=a}return o}function w(e,t,r,n,o){var a=e.beforeTokens,i=e.afterTokens,u=t+n,l=r+n;if(!(u>=a.length||l>=i.length)){if(n)if(a[u].key!==i[l].key)return;for(var c=!0,s=1,f=t+s,d=r+s;c&&f<a.length&&d<i.length;){a[f].key===i[d].key?(f=t+ ++s,d=r+s):c=!1}if(o&&t>0&&r>0){var p=a[t-1].key,h=i[r-1].key;" "===p&&" "===h&&(t--,r--,s++)}return new y(t,r,s,e)}}function O(e,t,r,n){return{beforeTokens:e,afterTokens:t,beforeMap:v(e),afterMap:v(t),beforeIndex:r,afterIndex:n}}function E(e){for(var t,r=new g,n=[e];n.length;)if((t=_(e=n.pop()))&&t.length){if(t.segmentStartInBefore>0&&t.segmentStartInAfter>0){var o=e.beforeTokens.slice(0,t.segmentStartInBefore),a=e.afterTokens.slice(0,t.segmentStartInAfter);n.push(O(o,a,e.beforeIndex,e.afterIndex))}var i=e.beforeTokens.slice(t.segmentEndInBefore+1),u=e.afterTokens.slice(t.segmentEndInAfter+1),l=e.beforeIndex+t.segmentEndInBefore+1,c=e.afterIndex+t.segmentEndInAfter+1;i.length&&u.length&&n.push(O(i,u,l,c)),r.add(t)}return r.toArray()}function P(e,t){if(!e)throw new Error("Missing beforeTokens");if(!t)throw new Error("Missing afterTokens");var r=0,n=0,o=[],a=O(e,t,0,0),i=E(a);i.push(new y(e.length,t.length,0,a));for(var u=0;u<i.length;u++){var l=i[u],c="none";r===l.startInBefore?n!==l.startInAfter&&(c="insert"):(c="delete",n!==l.startInAfter&&(c="replace")),"none"!==c&&o.push({action:c,startInBefore:r,endInBefore:"insert"!==c?l.startInBefore-1:null,startInAfter:n,endInAfter:"delete"!==c?l.startInAfter-1:null}),0!==l.length&&o.push({action:"equal",startInBefore:l.startInBefore,endInBefore:l.endInBefore,startInAfter:l.startInAfter,endInAfter:l.endInAfter}),r=l.endInBefore+1,n=l.endInAfter+1}var s=[],f={action:"none"};function d(t){return"equal"===t.action&&(t.endInBefore-t.startInBefore==0&&/^\s$/.test(e.slice(t.startInBefore,t.endInBefore+1)))}for(var p=0;p<o.length;p++){var h=o[p];d(h)&&"replace"===f.action||"replace"===h.action&&"replace"===f.action?(f.endInBefore=h.endInBefore,f.endInAfter=h.endInAfter):(s.push(h),f=h)}return s}function j(e){this.tokens=e,this.notes=e.reduce((function(e,t,r){e.notes.push({isWrappable:p(t),insertedTag:!1});var n=!d(t)&&i(t),o=e.tagStack[e.tagStack.length-1];return n&&(o&&"/"+o.tag===n?(e.notes[o.position].insertedTag=!0,e.tagStack.pop()):e.tagStack.push({tag:n,position:r})),e}),{notes:[],tagStack:[]}).notes}function C(e,t,r,n,o){var a=new j(t),i=" data-"+(n=n?n+"-":"")+'operation-index="'+r+'"';return o&&(i+=' class="'+o+'"'),a.combine((function(t){if(!t.isWrappable)return t.tokens.join("");var r=t.tokens.join("");return r.trim()?"<"+e+i+">"+r+"</"+e+">":""}),(function(t){var o=' data-diff-node="'+e+'"';return o+=" data-"+n+'operation-index="'+r+'"',t.replace(/>\s*$/,o+"$&")}))}g.prototype={add:function(e){var t,r,n={value:e,left:null,right:null},o=this._root;if(o)for(;;){var a=(t=o.value,(r=e).endInBefore<t.startInBefore&&r.endInAfter<t.startInAfter?-1:r.startInBefore>t.endInBefore&&r.startInAfter>t.endInAfter?1:0);if(-1===a){if(!o.left){o.left=n;break}o=o.left}else{if(1!==a)break;if(!o.right){o.right=n;break}o=o.right}}else this._root=n},toArray:function(){return function e(t,r){return t&&(e(t.left,r),r.push(t.value),e(t.right,r)),r}(this._root,[])}},j.prototype.combine=function(e,t){var r=this.notes,n=this.tokens.slice();return n.reduce((function(e,o,a){r[a].insertedTag&&(n[a]=t(n[a])),null===e.status&&(e.status=r[a].isWrappable);var i=r[a].isWrappable;return i!==e.status&&(e.list.push({isWrappable:e.status,tokens:n.slice(e.lastIndex,a)}),e.lastIndex=a,e.status=i),a===n.length-1&&e.list.push({isWrappable:e.status,tokens:n.slice(e.lastIndex,a+1)}),e}),{list:[],status:null,lastIndex:0}).list.map(e).join("")};var k={equal:function(e,t,r,n,o,a){return r.slice(e.startInAfter,e.endInAfter+1).reduce((function(e,t){return e+t.string}),"")},insert:function(e,t,r,n,o,a){return C("ins",r.slice(e.startInAfter,e.endInAfter+1).map((function(e){return e.string})),n,o,a)},delete:function(e,t,r,n,o,a){return C("del",t.slice(e.startInBefore,e.endInBefore+1).map((function(e){return e.string})),n,o,a)},replace:function(){return k.delete.apply(null,arguments)+k.insert.apply(null,arguments)}};function S(e,t,r,n,o){return r.reduce((function(r,a,i){return r+k[a.action](a,e,t,i,n,o)}),"")}function A(e,t,r,n,o){return e===t?e:(l=o?new RegExp("^<("+o.replace(/\s*/g,"").replace(/,/g,"|")+")"):c,S(e=b(e),t=b(t),P(e,t),n,r))}A.htmlToTokens=b,A.findMatchingBlocks=E,E.findBestMatch=_,E.createMap=v,E.createToken=h,E.createSegment=O,E.getKeyForToken=m,A.calculateOperations=P,A.renderOperations=S,void 0===(n=function(){return A}.apply(t,[]))||(e.exports=n)}).call(this)},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(2),i=r.n(a),u=r(62),l=r.n(u),c=r(68),s=r.n(c),f=r(5454),d=r.n(f),p=new l.a("doc:diff"),h=function(e){return e.querySelector(".lake-engine")||e},y=function(e){for(var t=e.childNodes,r=0,n=t.length;r<n;r++){var o=t[r],a=!1;if(o.nodeType===Node.ELEMENT_NODE){if(["DEL","INS"].includes(o.tagName))a=!0;else o.querySelector("del,ins")&&(a=!0);o.classList.add(a?"doc-diff-paragraph-changed":"doc-diff-paragraph-unchanged")}}},b=function(e){return e?e.startsWith(s.a.HTML_DOCTYPE)?e.substring(s.a.HTML_DOCTYPE.length):e:""};function m(e){var t=e.head,r=e.base;t=b(t),r=b(r);var a=Object(n.useRef)(null),i=Object(n.useMemo)((function(){return d()(r,t,"html-diff",null,"iframe,video,a,em,strong,del,meta")}),[]);return p("head",t),p("base",r),Object(n.useEffect)((function(){if(a.current){var e=h(a.current);y(e)}}),[]),t===r?o.a.createElement("div",{className:"doc-diff","data-testid":"unchanged-view"},__("内容一致")):o.a.createElement("div",{"data-testid":"doc-diff",className:"doc-diff"},o.a.createElement("div",{"data-testid":"diff-view",dangerouslySetInnerHTML:{__html:i},ref:a}))}m.propTypes={base:i.a.string.isRequired,head:i.a.string.isRequired};t.a=m},,,,,,,,function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(2),i=r.n(a),u=r(5478),l=r(4339),c=r(4311),s=r(295),f=r(52),d=Object(s.b)((function(){return Promise.all([r.e(3),r.e(5),r.e(6),r.e(0),r.e(1),r.e(1297)]).then(r.bind(null,3075))}),{suspense:!0});function p(e){return o.a.createElement("div",{className:c.a.fullscreenWrap},o.a.createElement(l.a,{doc:e.doc,docDomain:e.docDomain,readonly:e.readonly,renderVersion:function(t){return o.a.createElement(d,{key:"version-".concat(t.id),id:"version-".concat(t.id),content:t.content,genOutline:!1,genAnchor:!1,doc:t,meta:(r=e.doc,r?{skylark:{docID:r.id}}:{}),fallbackLake:!0,disableDynamicCardFunction:!0});var r},renderDiff:function(e,t){return o.a.createElement(u.a,{head:e.content_html,base:t.content_html})},onCancel:e.onCancel,onRevert:e.onRevert,onReverted:e.onReverted,docProxy:f.a.docs,docletProxy:f.a.doclets,docVersionProxy:f.a.docVersions,defaultCategory:e.defaultCategory,versionPublished:e.versionPublished}))}p.propTypes={doc:i.a.object.isRequired,onCancel:i.a.func.isRequired,docDomain:i.a.string,onRevert:i.a.func,onReverted:i.a.func,readonly:i.a.bool,defaultCategory:i.a.oneOf(["all","named_version"]),versionPublished:i.a.bool},t.default=p},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(261);t.a=Object(a.b)((function(){return Object(n.useEffect)((function(){r.e(1389).then(r.bind(null,5949)),r.e(1389).then(r.bind(null,5950)),r.e(1389).then(r.bind(null,5951)),r.e(1389).then(r.bind(null,5952)),r.e(1389).then(r.bind(null,5953)),r.e(1389).then(r.bind(null,5954)),r.e(1389).then(r.bind(null,5955)),r.e(1389).then(r.bind(null,5956)),r.e(1389).then(r.bind(null,5957)),r.e(1389).then(r.bind(null,5958)),r.e(1389).then(r.bind(null,5959)),r.e(1389).then(r.bind(null,5960)),r.e(1389).then(r.bind(null,5961)),r.e(1389).then(r.bind(null,5962)),r.e(1389).then(r.bind(null,5963)),r.e(1389).then(r.bind(null,5964)),r.e(1389).then(r.bind(null,5965)),r.e(1389).then(r.bind(null,5966)),r.e(1389).then(r.bind(null,5967)),r.e(1389).then(r.bind(null,5968)),r.e(1389).then(r.bind(null,5969)),r.e(1389).then(r.bind(null,5970)),r.e(1389).then(r.bind(null,5971)),r.e(1389).then(r.bind(null,5972)),r.e(1389).then(r.bind(null,5973)),r.e(1389).then(r.bind(null,5974))})),o.a.createElement("span",null)}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r(44);var n=r(10),o=r(0),a=r.n(o),i=r(2),u=r.n(i),l=r(933),c="index-module_messageClose_2LMjD",s=function(e){var t=e.history;return Object(o.useEffect)((function(){var e=(t&&t.location&&t.location.query||{}).resource_id;if(e){var r,o=function(){r&&r(),window.history.replaceState({},document.title,window.location.pathname)},i=a.a.createElement("span",null,__("文件已转成语雀文件，原始文件请到 {history} 中查看。",{history:a.a.createElement("a",{onClick:function(){o(),window.open("/go/resource/".concat(e,"?history=1"),"_blank")}},__("历史版本"))}),a.a.createElement("span",{className:c,onClick:o},a.a.createElement(l.default,null)));r=n.a.warning(i,0)}}),[]),null};s.propTypes={history:u.a.object};t.a=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));var n=r(0),o=r.n(n),a=r(3567),i=r(5296),u=r(5821),l=r(5632),c=r(5364),s=r(5486),f=r(5283),d=r(3699);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=[{icon:!1,keys:["E"],name:"edit",text:__("编辑文档")},{icon:!1,keys:["Command","Enter"],name:"publish",text:__("发布/更新")},{icon:!1,name:"hotkeyTips",keys:["opt","cmd","?"],text:__("快捷键面板")},{name:"save",keys:["cmd","S"],text:__("保存")}],v=[{type:"format",text:__("格式"),children:["formatPainter","clearFormat","h1","h2","h3","h4","h5","h6","paragraph","bold","italic","strikethrough","underline","fontsize","color","bgColor","sup","sub","alignmentLeft","alignmentCenter","alignmentRight","indent","outdent","lineHeight"]},{type:"insert",text:__("插入"),children:["card","orderedList","unorderedList","taskList","quote","math","code","codeblock","table","mention","link","image","hr","info","success","warning","danger","tips"]},{type:"table",text:__("表格"),children:["cellBgColor","mergeCell","verticalAlignTop","verticalAlignMiddle","verticalAlignBottom","toggleBorder"]},{type:"edit",text:__("编辑"),children:["undo","redo","save","paste","pasteText","openSearchPanel","openTranslatePanel","openLibrary","edit","publish","hotkeyTips"]}],g=m.reduce((function(e,t){return e[t.name]=t,e}),{});var _=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){return e[t.name]=t,e}),{});return v.map((function(t){return{type:t.type,text:t.text,children:t.children.map((function(t){return g[t]||e[t]})).filter((function(e){return!!e})).map((function(e){return y(y({},e),{},{icon:!1===e.icon?null:"editor-".concat(e.name)})}))}})).filter((function(e){return Array.isArray(e.children)&&e.children.length}))}(d.Hotkeys),w=(_.filter((function(e){return"document"!==e.type})),r(3861)),O=r(5436),E=r(2),P=r.n(E),j=r(62),C=r.n(j),k=r(3986),S=r(295),A=r(1007),x=r(32),N=r(929),T=r(3607),D=Object(S.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(10),r.e(1296)]).then(r.bind(null,6122))}),{suspense:!0}),L=C()("editor:doc.ui");function R(e){var t=e.book,r=e.doc,a=e.group,i=e.theme,u=e.useEditorTileRendering,l=e.useEditorTileRenderingForOT,c=e.useEditorVirtualRenderingForOT,s=e.useEditorVirtualRendering,f=e.sidePanelManager,d=e.editType,p=e.editMode;L("render");var h=Object(n.useRef)(null),y=Object(A.b)();return o.a.createElement("div",{id:"lark-doc-edit-root",ref:h},o.a.createElement(D,{key:r.id,doc_id:r.id,doc:r,book:t,group:a,title:r.title,viewport:i.viewport,typography:i.typography,meta:N.a.getEditorMeta(r),onLoad:function(t,n){var o=new k.a(r,t,n);e.onEditorLoaded({engine:o})},onAutoSave:function(){e.onSave(T.h.AUTO)},onSave:e.onSave,onChange:e.onContentChange,onThemeChange:e.onThemeChange,onSaveTitle:e.onSaveTitle,onTitleChange:e.onTitleChange,getDefaultSuggestions:e.getDefaultSuggestions,onMentionSearch:e.onMentionSearch,useEditorTileRendering:u,useEditorTileRenderingForOT:l,useEditorVirtualRendering:s,useEditorVirtualRenderingForOT:c,fallbackLake:!0,hideThemeEditor:!0,globalSelectAll:e.globalSelectAll,focusOnLoaded:e.focusOnLoaded,placeholder:{tip:x.c&&!y?__("输入正文..."):__("直接输入正文，也可选择一个模板："),emptyParagraphTip:__("输入 / 唤起更多")},editMode:p,sidePanelManager:f,editType:d}))}R.defaultProps={globalSelectAll:!0},R.propTypes={doc:P.a.object.isRequired,book:P.a.object.isRequired,group:P.a.object.isRequired,theme:P.a.object.isRequired,onEditorLoaded:P.a.func,onSave:P.a.func,onSaveTitle:P.a.func,onTitleChange:P.a.func,onThemeChange:P.a.func,onContentChange:P.a.func,onPublish:P.a.func,getDefaultSuggestions:P.a.func,onMentionSearch:P.a.func,focusOnLoaded:P.a.bool,globalSelectAll:P.a.bool};var I=R;function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M.apply(null,arguments)}function F(e){var t=e.history,r=(e.app,e.editMode),d=e.sidePanelManager,p=e.className;Object(c.a)(window.location,t),Object(f.a)("pagename","doc_edit"),Object(w.a)();var h=Object(n.useCallback)((function(e){return o.a.createElement(I,M({},e,{sidePanelManager:d,editMode:r}))}),[d,r]),y=Object(n.useCallback)((function(e){return o.a.createElement(s.default,e)}),[]);return r?o.a.createElement(o.a.Fragment,null,o.a.createElement(i.default,{hotKeys:_,hidable:!0,defaultOpen:!1,isEditor:!0}),o.a.createElement(O.a,{className:p,editMode:r,renderEditor:h,renderHistory:y,sidePanelManager:d})):o.a.createElement(a.a,{history:t,showSiteTip:!1,headless:!0},o.a.createElement(i.default,{hotKeys:_,hidable:!0,defaultOpen:!1,isEditor:!0}),o.a.createElement(O.a,{renderEditor:h,renderHistory:y}),o.a.createElement(u.a,{history:t}),o.a.createElement(l.a,null))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var n=r(6280);t.default=function(e){return React.createElement(n.a,e)}}])]);