/*! For license information please see 1601.c3e4176c.async.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1601,24,50,131,144,148,186,243,280,295,296,306,318,344,358,359,522,599,619,740,816,1008,1096,1115,1189,1195,1212,1305,1306,1345],{1014:function(e,t,r){"use strict";r.d(t,"b",(function(){return y})),r.d(t,"a",(function(){return b}));r(144);var n=r(60),o=r(0),a=r.n(o),i=r(2),c=r.n(i),l=r(11),u=r(202),s=r(189),f=r(43),d=r(691),p=["book","width"];function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(null,arguments)}var m={book:__("文档"),sheet:__("表格"),design:__("图集"),column:__("专栏"),resource:__("资源")},y=function(e){var t,r=e.book,o=e.width,i=void 0===o?24:o,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,p),l=null===(t=r.type)||void 0===t?void 0:t.toLowerCase(),u=m[l];return a.a.createElement(n.a,{title:u},a.a.createElement(f.b,h({name:d.b.getName("Book",r),style:d.b.getStyle(r),className:"book-icon",width:i},c)))};y.propTypes={book:c.a.object.isRequired,width:c.a.number};var v=function(e){var t,r=e.size,o=void 0===r?14:r,i=e.placement,c=void 0===i?"top":i,s=e.showTooltip,d=void 0===s||s,p=e.group,h=e.book,m=e.organization,y=Object(u.d)({privacy:e.public,type:"book",organization:m,book:h,group:p});return a.a.createElement(n.a,{open:d,placement:c,getPopupContainer:e.getPopupContainer,title:a.a.createElement("span",null,y,(null===(t=h.abilities)||void 0===t?void 0:t.share)&&a.a.createElement("a",{onClick:function(e){e.stopPropagation(),window.open("/r/".concat(null==p?void 0:p.login,"/").concat(h.slug,"/collaborators"))},className:"toggle-publicity"},__("切换公开性")))},a.a.createElement("span",{className:"name-lock"},a.a.createElement(f.b,{name:e.public!==l.PRIVACY.private?"icon-public":(null==h||h.extend_private,l.EXTEND_PRIVATE.BIND_DEPARTMENTS,"permission-private"),width:o,height:o})))},b=function(e){return a.a.createElement(s.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement("span",{"data-test-id":"book-access-scope"})}},a.a.createElement(v,e))};b.propTypes={public:c.a.number,group:c.a.object,book:c.a.object,getPopupContainer:c.a.func,size:c.a.number,placement:c.a.string,organization:c.a.object,showTooltip:c.a.bool}},1020:function(e,t,r){"use strict";r.d(t,"d",(function(){return p.b})),r.d(t,"a",(function(){return p.a})),r.d(t,"e",(function(){return Z})),r.d(t,"g",(function(){return J})),r.d(t,"b",(function(){return $})),r.d(t,"f",(function(){return ee})),r.d(t,"c",(function(){return te}));r(690);var n=r(294),o=(r(37),r(8),r(497),r(95)),a=r(0),i=r.n(a),c=r(5),l=r.n(c),u=(r(33),r(2)),s=r.n(u),f=r(1717),d=r(1077),p=r(1014),h=r(43),m=r(189),y="index-module_label_qcR+D",v=function(e){return e.visible?i.a.createElement("span",{className:y},__("空间")):null},b=r(532),g=r(62),w=r.n(g),_=r(1746),E=r(128),O=r(1305),A=(r(1022),r(561)),S=(r(44),r(10)),k=r(2734),x=r(52);function j(e){var t=e.book,r=e.closeModal;return i.a.createElement(k.a,{visible:!0,title:__("删除知识库"),content:i.a.createElement(A.a,{description:__("正在删除知识库 {name}，该操作不可逆，一旦操作成功，知识库下的所有内容将会删除。请输入下面内容再次确认操作。",{name:i.a.createElement("span",{className:"highlight_name"},t.name)}),type:"warning"}),buttonText:__("确定删除 {name}",{name:t.name}),slug:t.slug,onOk:function(){x.a.books.destroy({id:t.id}).then((function(e){S.a.success(__("操作成功"),3),r(),setTimeout((function(){window.location.href="/dashboard"}),300)}))},onCancel:r})}j.propTypes={book:s.a.object,group:s.a.object,closeModal:s.a.func};var P=Object(b.d)((function(e){return{book:e.book,group:e.group}}))(j),C="BookAction-module_wrap_AiMmc";function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function L(e,t,r){return t=N(t),function(e,t){if(t&&("object"==I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,D()?Reflect.construct(t,r||[],N(e).constructor):t.apply(e,r))}function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function M(e,t,r){return(t=F(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}var B=w()("book:action"),q=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M(r=L(this,t,[e]),"doAction",(function(e){e&&r.setState({cmd:e,exportModal:e===E.a.BOOK.export_book.cmd,deleteModal:e===E.a.BOOK.delete_book.cmd})})),M(r,"handleCloseDeleteModal",(function(){r.setState({deleteModal:!1})})),r.state={exportModal:!1,deleteModal:!1,cmd:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e,t=this,r=this.props,n=r.className,o=r.book;switch(this.state.cmd){case E.a.BOOK.manage.cmd:window.open("/r/".concat(o.namespace,"/docs"),"_self");break;case E.a.BOOK.catalog_manage.cmd:window.open("/r/".concat(o.namespace,"/toc"),"_self");break;case E.a.BOOK.manage_assets.cmd:window.open("/".concat(o.namespace,"/assets"),"_self");break;case E.a.BOOK.collaborators.cmd:window.open("/r/".concat(o.namespace,"/collaborators"),"_self");break;case E.a.BOOK.recycles.cmd:window.open("/r/".concat(o.namespace,"/trash"),"_self");break;case E.a.BOOK.statistics.cmd:window.open("/r/".concat(o.namespace,"/statistics"),"_self");break;case E.a.BOOK.settings.cmd:case E.a.BOOK.rename_book.cmd:window.open("/".concat(o.namespace,"/settings/basic"),"_self");break;case E.a.DOC.modify_toc.cmd:window.open("/r/".concat(o.namespace,"/toc"),"_self");break;default:B("no processor, do nothing, just trigger onSelect and set state")}var a=null==o||null===(e=o.abilities)||void 0===e?void 0:e.destroy;return i.a.createElement("div",{className:"".concat(C," ").concat(n)},void 0,i.a.createElement(_.a,{visible:this.state.exportModal,book:o,formats:O.a.getExportFormats(),onCancel:function(){return t.setState({exportModal:!1,cmd:null})}}),this.state.deleteModal&&a&&i.a.createElement(P,{closeModal:this.handleCloseDeleteModal}))}}])&&T(r.prototype,n),o&&T(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(i.a.Component);q.defaultProps={className:""},q.propTypes={className:s.a.string,book:s.a.object.isRequired};var z=Object(b.d)((function(e){return{book:e.book,group:e.group}}),null,null,{forwardRef:!0})(q),G=r(1777),U=r(846),W={bookTitle:"index-module_bookTitle_lUUrB",name:"index-module_name_OMCDB",group:"index-module_group_xaGsx",text:"index-module_text_UrMgl",checked:"index-module_checked_3fCif",moreActions:"index-module_moreActions_YYACs"},V=["group","book","showBookIcon","showPrivateIcon","showOrgLabel","href","target","iconSize","className","draggable","onItemClick","isMobile"];function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y.apply(null,arguments)}function Q(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}__("文档"),__("表格"),__("图集"),__("专栏"),__("资源");var Z=function(e){var t=e.group,r=e.book,n=e.showBookIcon,o=void 0===n||n,a=e.showPrivateIcon,c=void 0===a||a,u=e.showOrgLabel,s=void 0!==u&&u,f=e.href,d=e.target,p=e.iconSize,h=e.className,m=e.draggable,y=e.onItemClick,v=e.isMobile,b=Q(e,V),g=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp||window.appData.isYuqueMobileApp?"_blank":"_self",w=f||"/".concat(t.login,"/").concat(r.slug);return i.a.createElement("a",Y({href:w,className:l()("book-link",h),target:d||g,desktopDisableHref:!0,draggable:m,onClick:function(t){y&&(t.preventDefault(),y(e,w))}},Object(U.b)({type:r.type,user:t,book:r,targetUrl:w})),i.a.createElement(J,Y({},b,{group:t,book:r,showBookIcon:o,showPrivateIcon:c,showOrgLabel:s,iconSize:p,isMobile:v})))};Z.propTypes={book:s.a.object,group:s.a.object,showBookIcon:s.a.bool,showOrgLabel:s.a.bool,className:s.a.string,target:s.a.string,showShareBadge:s.a.bool,iconSize:s.a.number};s.a.object,s.a.object,s.a.bool,s.a.bool,s.a.bool,s.a.string,s.a.string,s.a.func,s.a.bool;var X=function(e){var t=e.book,r=e.org,n=e.group,o=e.getPopupContainer,a=Object(G.c)({type:"book",target:t,org:r,group:n});return i.a.createElement("span",{className:"book-name-scope"},i.a.createElement(p.a,{public:a,book:t,group:n,getPopupContainer:o}))},J=function(e){var t=e.group,r=e.book,n=e.showGroupName,o=void 0!==n&&n,a=e.showBookIcon,c=void 0===a||a,u=e.showPrivateIcon,s=void 0===u||u,f=e.showOrgLabel,y=void 0!==f&&f,b=e.isMobile,g=void 0!==b&&b,w=e.checked,_=void 0!==w&&w,E=e.href,O=e.getPopupContainer,A=e.className,S=e.iconSize||(g?28:24),k=t&&(t.organization||{id:t.organization_id}),x=window.appData.me;return g?i.a.createElement("span",{className:l()(W.bookTitle,A)},i.a.createElement("div",{className:l()(W.icon,"book-icon-wrapper")},i.a.createElement(p.b,{group:t,book:r,width:S})),i.a.createElement("div",{className:l()(W.name,"book-title-name")},i.a.createElement("div",{className:l()(W.text,"book-title-text"),title:r.name},r.name),t.name&&i.a.createElement("div",{className:l()(W.group,"book-title-desc")},t.name)),i.a.createElement("div",{className:W.checked},_&&i.a.createElement(d.default,null))):i.a.createElement("span",{className:l()("lark-book-title",A)},c&&i.a.createElement(p.b,{group:t,book:r,width:S}),i.a.createElement("span",{className:"book-name"},o&&i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,t.name),i.a.createElement("span",{className:"book-name-split"},"/")),E&&i.a.createElement("a",{className:"book-name-text-wrapper",href:E},i.a.createElement("span",{className:"book-name-text",title:r.name},r.name)),!E&&i.a.createElement("span",{className:"book-name-text",title:r.name},r.name),(null==x?void 0:x.isAdmin)&&-1===r.status&&i.a.createElement("span",{className:"book-name-scope"},i.a.createElement(h.b,{name:"doc-has-content-risk",width:13,style:{opacity:.375}})),s&&i.a.createElement(m.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return i.a.createElement("span",{"data-test-id":"book-access-scope"})}},i.a.createElement(X,{book:r,org:k,group:t,getPopupContainer:O})),y&&i.a.createElement("span",{className:"book-name-orglabel"},i.a.createElement(v,{visible:t&&t.organization_id>0}))))};J.propTypes={group:s.a.object,book:s.a.object,iconSize:s.a.number,showBookIcon:s.a.bool,showPrivateIcon:s.a.bool,showOrgLabel:s.a.bool,showGroupName:s.a.bool,isMobile:s.a.bool,checked:s.a.bool,href:s.a.string,getPopupContainer:s.a.func,showShareBadge:s.a.bool};var $=function(e){var t=e.book,r=e.clickable;return t.user?r?i.a.createElement("a",{href:"/".concat(t.user.login),title:t.user.name,className:"book-belong"},t.user.name):i.a.createElement("span",{className:"book-belong",title:t.user.name},t.user.name):null};$.defaultProps={clickable:!0},$.propTypes={book:s.a.object,clickable:s.a.bool};s.a.string;var ee=function(e){var t=Object(a.useRef)(null),r=H(Object(a.useState)(!1),2),n=r[0],c=r[1],l=e.book,u=e.group,s=e.me,d=O.a.actionsForNavMore(l,u,s).filter((function(e){return e.can||"divider"===e.action.cmd}));return d.length?i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{className:W.moreActions,visible:n,onVisibleChange:function(e){return c(e)},direction:"circle",iconWidth:20,content:i.a.createElement(o.a,{selectable:!1},d.map((function(e){return"divider"===e.action.cmd?i.a.createElement(o.a.Divider,null):i.a.createElement(o.a.Item,{disabled:!1===e.can,key:e.action.cmd,onClick:function(){t.current.doAction(e.action.cmd),c(!1)}},e.action.title)})))}),i.a.createElement(z,{ref:t})):null};ee.propTypes={book:s.a.object.isRequired,styles:s.a.object.isRequired,group:s.a.object.isRequired,me:s.a.object};s.a.object,s.a.object;__("导出 PDF"),__("设置"),__("删除"),__("转移"),__("分享");var te=function(e,t){switch(e){case"Design":return"name"===t?__("如：语雀视觉设计"):__("如：视觉设计与规范");case"Sheet":return"name"===t?__("如：研发计划"):__("如：第一季度研发计划");case"Column":return"name"===t?__("如：团队专栏"):__("如：团队设计分享");case"Resource":return"name"===t?__("资源知识库"):__("上传资源文件、本地文档等内容");default:return"name"===t?__("如：产品文档"):__("如：产品设计与研发")}};(function(e){var t=e.belongs,r=e.onChange,a=__("归属");if(!t||t.length<=1)return i.a.createElement("span",null,a);return i.a.createElement(n.a,{trigger:["click"],overlay:i.a.createElement(o.a,{className:"dashboard-dropdown-menu",selectedKeys:[]},t.map((function(e,t){return i.a.createElement(o.a.Item,{key:e.type},i.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),function(e){r(e.type)}(e)}},e.text))})))},i.a.createElement("span",null,a,i.a.createElement(h.b,{name:"arrow-down",width:16})))}).propTypes={belongs:s.a.array.isRequired,onChange:s.a.func.isRequired}},1023:function(e,t,r){"use strict";r(246);var n=r(123),o=(r(688),r(214)),a=(r(57),r(13)),i=(r(167),r(39)),c=(r(116),r(38)),l=(r(132),r(27)),u=(r(219),r(53)),s=r(0),f=r.n(s),d=r(2),p=r.n(d),h=r(1399),m=r(1392),y={docTask:"DocTask-module_docTask_NywmO",settingFile:"DocTask-module_settingFile_bFy51",hr:"DocTask-module_hr_y8Wz9",settingFileIcon:"DocTask-module_settingFileIcon_++xRm",settingContent:"DocTask-module_settingContent_leSlb",isFirst:"DocTask-module_isFirst_RPJNh",settingTitlt2:"DocTask-module_settingTitlt2_OZfjd",settingFileTypeName:"DocTask-module_settingFileTypeName_S4Bv1",settingFileTypeExt:"DocTask-module_settingFileTypeExt_GCoBd"};function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(null,arguments)}var b={STATUS:{INIT:"init",SETTING:"setting",PROCESSING:"processing",UPLOADING:"uploading",PENDING:"pending",DONE:"done",SUCCESS:"success",ERROR:"error"}};b.AdvanceSetting=u.a.create({name:"advanceSettingForm"})(Object(s.forwardRef)((function(e,t){var r=e.type,n=e.target,d=void 0===n?{}:n,p=e.settings,h=e.actions,m=e.title,b=e.form,g=e.hideHeader;if(!r)return null;var w=b.getFieldDecorator;return Object(s.useImperativeHandle)(t,(function(){return{form:b,getValue:function(){var e=b.getFieldsValue()||{};return Object.keys(e).forEach((function(t){if(Array.isArray(e[t])){var r=e[t][0];null==r?delete e[t]:e[t]=r}})),e}}})),f.a.createElement("div",{"data-testid":"docTask-".concat(r.key)},!g&&f.a.createElement(c.a,{className:y.settingFile,type:"flex",justify:"start",align:"middle"},f.a.createElement(l.a,{className:y.settingFileIcon},f.a.createElement("img",{src:r.icon,className:""})),f.a.createElement(l.a,{className:y.settingFileTypeMeta},f.a.createElement("div",{className:y.settingFileTypeName},m||d.title||d.name||r.name),f.a.createElement("div",{className:y.settingFileTypeExt},r.extensions.join(" ")))),f.a.createElement("div",{className:y.settingContent},f.a.createElement("h2",{className:y.settingTitlt2},__("高级选项")),f.a.createElement(u.a,null,p.map((function(e,t){if(Array.isArray(e)){var r=0===t?y.isFirst:"";return f.a.createElement(u.a.Item,{className:r},w(e[0].name,{initialValue:e.find((function(e){return e.default})).value})(f.a.createElement(i.a.Group,null,e.map((function(e){return f.a.createElement(i.a,{value:e.value},e.label)})))))}if("text"===e.type){var n={};return e.validator&&(e.validateOnBlur&&(n.validateTrigger=["onChange","onBlur"]),n.rules=[{validator:e.validator}]),f.a.createElement(u.a.Item,{label:e.label,colon:e.colon,hidden:e.hidden},w(e.name,n)(f.a.createElement(a.a,v({type:"text",autoComplete:"off",maxLength:"1000"},e))))}return f.a.createElement(u.a.Item,null,w(e.name,{initialValue:[e.default&&e.value]})(f.a.createElement(o.a.Group,null,f.a.createElement(o.a,{value:e.value},e.label))))})))),f.a.createElement("div",{className:y.settingFooter},h))}))),b.Error=function(e){return f.a.createElement("div",{className:"".concat(y.docTask," ").concat(y.docTaskError)},f.a.createElement("p",{className:"icon"},f.a.createElement(h.default,null)),f.a.createElement("p",{className:"tip"},e.tip),f.a.createElement("p",{className:"error"},e.error),f.a.createElement("p",{className:"action"},e.action))},b.Error.propTypes={tip:p.a.string,action:p.a.node,error:p.a.string},b.Success=function(e){return f.a.createElement("div",{className:"".concat(y.docTask," ").concat(y.docTaskSuccess)},f.a.createElement("p",{className:"icon"},f.a.createElement(m.default,null)),f.a.createElement("p",{className:"tip"},e.tip),f.a.createElement("p",{className:"action"},e.action))},b.Success.propTypes={tip:p.a.string,action:p.a.node},b.Processing=function(e){return f.a.createElement("div",{className:"".concat(y.docTask," ").concat(y.docTaskProcessing)},f.a.createElement(n.a,{justify:"block"}),f.a.createElement("p",{className:"tip"},f.a.createElement("span",null,e.tip)))},b.Processing.propTypes={tip:p.a.string};t.a=b},1027:function(e,t,r){"use strict";r.d(t,"downloadCsvFile",(function(){return c})),r.d(t,"isValidResource",(function(){return l}));var n=r(1444),o=r(717);r.o(o,"allowResourceEdit")&&r.d(t,"allowResourceEdit",(function(){return o.allowResourceEdit})),r.o(o,"getExtname")&&r.d(t,"getExtname",(function(){return o.getExtname})),r.o(o,"getFileBgColor")&&r.d(t,"getFileBgColor",(function(){return o.getFileBgColor})),r.o(o,"getFileIcon")&&r.d(t,"getFileIcon",(function(){return o.getFileIcon})),r.o(o,"getFilename")&&r.d(t,"getFilename",(function(){return o.getFilename})),r.o(o,"isAudio")&&r.d(t,"isAudio",(function(){return o.isAudio})),r.o(o,"isImage")&&r.d(t,"isImage",(function(){return o.isImage})),r.o(o,"isPpt")&&r.d(t,"isPpt",(function(){return o.isPpt})),r.o(o,"isSketch")&&r.d(t,"isSketch",(function(){return o.isSketch})),r.o(o,"isVideo")&&r.d(t,"isVideo",(function(){return o.isVideo}));var a=r(717).getExtname,i=r(2967).getFileAcceptArr;function c(e,t){var r=new Blob(["\ufeff"+e],{type:"text/csv;charset=utf-8;"});Object(n.b)(r,t)}function l(e){var t=a(e);return!!t&&i().includes(".".concat(t.toLowerCase()))}},103:function(e,t,r){"use strict";r(1435);var n=r(853);r(305);t.a=n.a},1073:function(e,t,r){"use strict";var n=r(61),o=r.n(n),a=(r(1450),r(537)),i=r(55),c=r.n(i),l=r(70),u=r.n(l),s=r(0),f=r.n(s),d=r(2),p=r.n(d),h=r(5),m=r.n(h),y=r(71),v=r.n(y),b=(r(1300),["className","title"]);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=f.a.forwardRef((function(e,t){var r=e.className,n=e.title,o=u()(e,b),i={},l=m()("larkui-skeleton",r);return n?(n.size&&(l=m()(l,{"larkui-skeleton-title-sm":"sm"===n.size})),n.width&&(i.title={width:n.width})):i.title=n,f.a.createElement(a.a,c()({className:l,ref:t},i,o))}));_.propTypes=w(w({},a.a.SkeletonProps),{},{className:p.a.string}),v()(_,a.a),t.a=_},1077:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-check-outlined",e.className].filter(Boolean).join(" ")}),n.createElement("defs",null,n.createElement("path",{id:"2733936519a",d:"M0 0h256v256H0z"})),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("mask",{id:"2733936519b",fill:"#fff"},n.createElement("use",{xlinkHref:"#2733936519a"})),n.createElement("path",{d:"M221.256 54.188c4.315-4.277 11.28-4.247 15.556.068 4.202 4.239 4.246 11.036.155 15.329l-.223.227-133.162 132c-4.212 4.176-10.957 4.25-15.258.221l-.229-.22-68.838-68.217c-4.315-4.276-4.347-11.24-.07-15.556 4.2-4.24 10.997-4.344 15.326-.292l.23.221 61.094 60.543L221.256 54.188Z",fill:"currentColor",fillRule:"nonzero",mask:"url(#2733936519b)"})))},1078:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(n=r(1400))&&n.__esModule?n:{default:n};t.default=o,e.exports=o},1079:function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(n=r(1402))&&n.__esModule?n:{default:n};t.default=o,e.exports=o},1082:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(0),o=r.n(n),a=r(2),i=r.n(a),c=r(1529),l={link:"Link",text:"Text"},u=function(e){var t,r=e.user,n=void 0===r?{}:r,a=e.type,i=void 0===a?l.text:a,u=e.withCard,s=e.children,f=e.style,d=void 0===f?{}:f,p=e.className,h=void 0===p?"":p,m=e.target,y=n.name,v=n.login;switch(i){case l.link:t=o.a.createElement("a",{href:"/".concat(v),"data-testid":"login-a-tag","data-desktoptarget":"_browser",target:m,style:d,className:h},s||y);break;case l.text:default:t=s||y}return u?o.a.createElement(c.a,{user:n,style:d,className:h},t):t};u.propTypes={user:i.a.object.isRequired,withCard:i.a.bool,style:i.a.object,className:i.a.string,type:i.a.oneOf([l.link,l.text,l.card]),children:i.a.any,target:i.a.object},t.b=u},1091:function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},i=r(15),c=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1296:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(){return o(Object(n.useReducer)((function(e){return e+1}),0),2)[1]}},1305:function(e,t,r){"use strict";var n=r(238),o=r.n(n),a=r(68),i=r.n(a),c=r(146),l=r(508),u=r(128),s={getExportFormats:function(){return i.a.BOOK_EXPORT_FORMATS},adaptDocTypography:function(e){if(!e.doc_typography)return{type:c.DOC_TYPOGRAPHY.traditional,scope:"all"};var t=e.doc_typography.split("_");return 1===t.length?{type:t[0],scope:null}:{type:t[0],scope:t[1]}},actionsForNavMore:function(e,t,r){var n=e.abilities;if(!n)return[];var o=[];"Design"===e.type&&o.push({action:u.a.BOOK.manage_assets,can:n.create_doc}),o.push({action:u.a.BOOK.collaborators,can:n.create_doc}),s.isMixingType(e)&&o.push({action:u.a.BOOK.statistics,can:n.manage}),"Design"!==e.type&&o.push({action:u.a.BOOK.recycles,can:n.create_doc});var a=[];return a.push({action:u.a.BOOK.rename_book,can:n.modify_setting||n.manage}),a.push({action:u.a.BOOK.delete_book,can:n.destroy}),a.push({action:u.a.BOOK.settings,can:n.create_doc}),o.find((function(e){return e.can}))&&a.find((function(e){return e.can}))&&o.push({action:{cmd:"divider"}}),o.push.apply(o,a),o},sortByUpdatedAt:function(e,t){return new Date(e.content_updated_at)-new Date(t.content_updated_at)},sortByCreatedAt:function(e,t){return new Date(e.created_at)-new Date(t.created_at)},sortByTitle:function(e,t){return e.name.localeCompare(t.name,"zh-Hans-CN",{sensitivity:"accent"})},getBelong:function(e){var t={type:"",text:""};if(!e)return t;var r=e.user;return r?t={type:r.login,text:r.name}:t},getBelongs:function(e){var t=this,r=e.map((function(e){return t.getBelong(e)}));return(r=o()(r,"type").filter((function(e){return!!e.type}))).unshift({type:null,text:__("所有")}),r},filterByBelong:function(e,t){var r=this;return t?e.filter((function(e){return r.getBelong(e).type===t})):e},isMixingType:function(e){return!(!e||!e.type)&&c.MIXING_BOOK_TYPES.includes(e.type)},shouldShowTempStoreBox:function(e){var t;return null==e||null===(t=e.abilities)||void 0===t?void 0:t.create_doc},MEMBER_LIST_CONSTANT:{MAX_SIZE:2e3,PAGE_SIZE:500},getMemberCount:function(e,t){return e>s.MEMBER_LIST_CONSTANT.MAX_SIZE?"".concat(s.MEMBER_LIST_CONSTANT.MAX_SIZE,"+"):e<s.MEMBER_LIST_CONSTANT.PAGE_SIZE?(null==t?void 0:t.length)||0:e},getDefaultBookCover:function(){return l.defaultBookCovers}};t.a=s},1343:function(e,t,r){"use strict";var n=r(326);t.a=n.a},1386:function(e,t,r){e.exports=r(68)},1392:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-comment-hide",e.className].filter(Boolean).join(" ")}),n.createElement("defs",null,n.createElement("path",{id:"2573787990a",d:"M0 0h256v256H0z"})),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm0 20c-50.81 0-92 41.19-92 92s41.19 92 92 92 92-41.19 92-92-41.19-92-92-92Zm55.143 52.902c3.795 3.873 3.801 10.047.067 13.928l-.212.213-63.285 62a10 10 0 0 1-13.776.209l-.219-.208-32.715-32.041c-3.946-3.865-4.012-10.196-.147-14.142 3.794-3.873 9.966-4.007 13.924-.354l.217.207 25.717 25.187 56.288-55.144c3.945-3.865 10.276-3.8 14.141.145Z",fill:"currentColor",fillRule:"nonzero"})))},1396:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-delete-solid",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm46.1 67.1c-4.028-4.028-10.512-4.1-14.628-.216l-.222.216-30.651 30.65-30.65-30.65c-4.027-4.028-10.512-4.1-14.627-.216l-.222.216c-4.028 4.027-4.1 10.512-.216 14.627l.216.222 30.65 30.65L83.1 159.25c-4.028 4.028-4.1 10.512-.216 14.628l.216.222c4.027 4.027 10.512 4.099 14.627.215l.222-.215 30.65-30.652L159.25 174.1c4.028 4.027 10.512 4.099 14.628.215l.222-.215c4.027-4.028 4.099-10.512.215-14.628l-.215-.222-30.652-30.651 30.652-30.65c4.027-4.027 4.099-10.512.215-14.627l-.215-.222Z",fill:"currentColor",fillRule:"evenodd"}))},1398:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({viewBox:"64 64 896 896",fill:"currentColor",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-antd-undo",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 0 0-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 0 1-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 0 1-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 0 0-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}))},1399:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-closecircleoutlined",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm0 20c-50.81 0-92 41.19-92 92s41.19 92 92 92 92-41.19 92-92-41.19-92-92-92Zm44.071 47.929c3.834 3.834 3.904 10.007.21 13.927l-.21.215-29.725 29.725 29.773 30.181.208.217c3.668 3.944 3.556 10.117-.304 13.925-3.932 3.879-10.263 3.836-14.142-.096l-29.678-30.084-30.132 30.132c-3.905 3.905-10.237 3.905-14.142 0-3.834-3.834-3.904-10.007-.21-13.927l.21-.215 30.227-30.229-29.275-29.677-.208-.217c-3.668-3.944-3.556-10.117.304-13.925 3.932-3.879 10.263-3.836 14.142.096l29.18 29.58 29.63-29.628c3.905-3.905 10.237-3.905 14.142 0Z",fill:"currentColor",fillRule:"nonzero"}))},1400:function(e,t,r){"use strict";var n=r(102),o=r(113);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(393)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),c=n(r(1401)),l=n(r(713));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var s=function(e,t){return i.createElement(l.default,(0,a.default)((0,a.default)({},e),{},{ref:t,icon:c.default}))},f=i.forwardRef(s);t.default=f},1401:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"}},1402:function(e,t,r){"use strict";var n=r(102),o=r(113);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(393)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&{}.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(0)),c=n(r(1403)),l=n(r(713));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}var s=function(e,t){return i.createElement(l.default,(0,a.default)((0,a.default)({},e),{},{ref:t,icon:c.default}))},f=i.forwardRef(s);t.default=f},1403:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"}},1430:function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"},i=r(15),c=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1431:function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"},i=r(15),c=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1432:function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},i=r(15),c=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1433:function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},i=r(15),c=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},1444:function(e,t,r){"use strict";function n(e,t){var r=document.createElement("a");r.setAttribute("href",URL.createObjectURL(e)),r.setAttribute("download",t),document.body.appendChild(r),r.click(),document.body.removeChild(r)}function o(e,t){var r=e.toDataURL("image/png"),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download","".concat(t,".png")),document.body.appendChild(n),n.click(),document.body.removeChild(n)}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o}))},1448:function(e,t,r){"use strict";var n=r(3),o=r(0),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},i=r(15),c=function(e,t){return o.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:a}))},l=o.forwardRef(c);t.a=l},149:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"e",(function(){return i})),r.d(t,"d",(function(){return c})),r.d(t,"f",(function(){return l})),r.d(t,"a",(function(){return u})),r.d(t,"h",(function(){return s})),r.d(t,"c",(function(){return f})),r.d(t,"g",(function(){return d})),r.d(t,"b",(function(){return p}));var i={URL_TYPE_LIST:["book-type-default","book-type-sheet","book-type-blog","book-icon-topic","group-type-project","book-type-manual","book-type-design","book-type-thread","group-type-interest","book-type-travel","group-type-default","book-type-reports","book-type-import","group-type-department","book-type-project","book-type-notes","book-type-resource","book-icon-yuque","book-icon-alibaba","book-icon-taobao","book-icon-alipay"],LEGACY_URL_TYPE_LIST:["books-url-wendangzhishiku","books-url-biaogezhishiku","books-url-boke","books-url-bokebeifen","books-url-bumen","books-url-chanpinshouce","books-url-huabanzhishiku","books-url-huati","books-url-lanqiubeifen","books-url-lvhanggonglve","books-url-morentuandui","books-url-tuanduizhoubao","books-url-wenjianjiabeifen","books-url-xiangmu","books-url-xiangmufangan","books-url-xuexibiji","books-url-ziyuanzhishiku","books-url-ali","books-url-taobao","books-url-zhifubao","books-url-yuque"],ICON_TYPE_LIST:["books-icon-default","books-icon-aixin","books-icon-baozhi","books-icon-biaoge","books-icon-biaoqian","books-icon-bikan","books-icon-boke","books-icon-chanpinwendang","books-icon-chucun","books-icon-dabiaowenjian","books-icon-dengpao","books-icon-duihua","books-icon-gerendangan","books-icon-huabao","books-icon-huati","books-icon-huati2","books-icon-hudun","books-icon-huojian","books-icon-huowu","books-icon-jiami","books-icon-jiangbei","books-icon-jihua","books-icon-lanqiu","books-icon-lingdang","books-icon-liucheng","books-icon-mubiao","books-icon-penzai","books-icon-qiqiu","books-icon-qunzu","books-icon-renwuliebiao","books-icon-rili","books-icon-suozhu","books-icon-tongxunlu","books-icon-tuandui","books-icon-wengao","books-icon-wenjiandai","books-icon-wenjiandai-2","books-icon-wenjianjia","books-icon-xiezuo","books-icon-xinfeng","books-icon-xingquxiaozu","books-icon-xuexibiji","books-icon-yingyuxuexi","books-icon-zhiding"],LEGACY_ICON_TYPE_LIST:["books-icon-wendang"],EMOJI_TYPE_LIST:[],BOOK_ICON_TYPE_MAP:{"books-icon-aixin":"group-type-interest","books-icon-baozhi":"book-type-blog","books-icon-biaoge":"book-type-sheet","books-icon-alibaba":"book-icon-alibaba","books-icon-bianzu":"book-icon-taobao","books-icon-bianzu-15":"book-icon-alipay","books-icon-biaoqian":"book-type-manual","books-icon-bikan":"group-type-project","books-icon-boke":"book-type-notes","books-icon-chanpinwendang":"book-type-project","books-icon-chucun":"book-type-resource","books-icon-dabiaowenjian":"book-type-travel","books-icon-default":"book-type-default","books-icon-dengpao":"group-type-project","books-icon-duihua":"book-icon-topic","books-icon-gerendangan":"book-type-manual","books-icon-huabao":"book-type-design","books-icon-huati":"group-type-department","books-icon-huati2":"book-type-thread","books-icon-hudun":"group-type-project","books-icon-huojian":"book-type-sheet","books-icon-huowu":"book-type-notes","books-icon-jiami":"book-type-import","books-icon-jiangbei":"group-type-project","books-icon-jihua":"book-type-reports","books-icon-lanqiu":"book-type-default","books-icon-lingdang":"group-type-department","books-icon-liucheng":"book-type-sheet","books-icon-mubiao":"group-type-project","books-icon-penzai":"book-type-default","books-icon-qiqiu":"book-type-default","books-icon-qunzu":"group-type-default","books-icon-renwuliebiao":"book-type-manual","books-icon-rili":"book-type-manual","books-icon-suozhu":"book-type-default","books-icon-tongxunlu":"group-type-interest","books-icon-tuandui":"group-type-default","books-icon-wendang":"book-type-default","books-icon-wengao":"book-type-blog","books-icon-wenjiandai":"book-type-project","books-icon-wenjiandai-2":"book-type-resource","books-icon-wenjianjia":"book-type-blog","books-icon-xiezuo":"book-type-blog","books-icon-xinfeng":"book-type-manual","books-icon-xingquxiaozu":"group-type-interest","books-icon-xuexibiji":"book-type-notes","books-icon-yingyuxuexi":"book-type-default","books-icon-yuque-logo":"book-icon-yuque","books-icon-zhiding":"book-type-default"}},c=["group-type-default","book-type-thread","book-type-blog","book-icon-topic","group-type-project","book-type-manual","book-type-design","book-type-sheet","group-type-interest","book-type-travel","book-type-default","book-type-reports","book-type-import","group-type-department","book-type-project","book-type-notes","book-type-resource","book-icon-yuque"],l=["group-earth","book-type-thread","book-type-blog","book-icon-topic","group-type-project","book-type-manual","book-type-design","book-type-sheet","group-type-interest","book-type-travel","book-type-default","book-type-reports","book-type-import","group-type-department","book-type-project","book-type-notes","book-type-resource","book-icon-yuque"],u={default:"book-type-default",book:"book-type-default",sheet:"book-type-sheet",design:"book-type-design",thread:"book-type-thread",resource:"book-type-resource",column:"book-type-blog",notes:"book-type-notes",blog:"book-type-blog",travel:"book-type-travel",project:"book-type-project",manual:"book-type-manual",reports:"book-type-reports",team_blog:"book-type-blog"},s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({default:"group-type-default",project:"group-type-project",department:"group-type-department",interest:"group-type-interest",commerce:"group-type-default",official_doc:"group-type-department"},Object.fromEntries(c.map((function(e){return[e,e]})))),f={doc:"doc-type-default",sheet:"doc-type-sheet",table:"doc-type-table",mind:"doc-type-mind",board:"doc-type-board",show:"file-ppt",thread:"book-type-thread",artboardgroup:"book-type-design",artboard:"book-type-design",note:"doc-type-note",actiontag:"book-type-resource",issue:"doc-type-task"},d={default:"book-type-thread",daily:"book-type-thread",weekly:"book-type-thread"},p={markdown:"doc-type-default",asl:"doc-type-default",lake:"doc-type-default",spreadjs:"doc-type-sheet",lakesheet:"doc-type-sheet",lakemind:"doc-type-mind",lakeboard:"doc-type-board",lakeshow:"file-ppt"}},1515:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return f})),r.d(t,"e",(function(){return d}));var n=r(14),o=r.n(n),a=r(526),i=r(202),c=r(11);function l(e,t,r,n){var o=window.location.origin,i="";switch(t){case a.b.BOOK:i="".concat(o,"/").concat(r.login,"/").concat(e.slug);break;case a.b.DOC:i="".concat(o,"/").concat(r.login,"/").concat(n.slug,"/").concat(e.slug);break;case a.b.NOTE:i="".concat(o,"/r/note/").concat(e.slug)}var c="",l="";if(t!==a.b.NOTE){"Sheet"===e.type&&(c=window.location.hash.slice(1));var u=e.title||e.name;u&&(l+="《".concat(u,"》"));var s=f(e,t,r,n).currentPassword;s&&(l+=" ".concat(__("密码：")).concat(s))}return{url:i,urlWithDesc:i+(c||l?"?".concat(t===a.b.DOC?"singleDoc":"","#").concat(c||""," ").concat(l||""):"")}}var u=function(e,t,r,n){var o=null==e?void 0:e.public;switch(t){case a.b.BOOK:o=Object(i.c)({type:"book",target:e,group:r});break;case a.b.DOC:o=Object(i.c)({type:"doc",target:e,group:r,book:n})}return{privacy:o,isShareActive:o!==c.PRIVACY.private}},s=function(e,t,r,n){var o=e.indexed_level,l=!1;t===a.b.DOC&&(Object(i.c)({type:"book",target:n,group:r})!==c.PRIVACY.private&&1===(null==n?void 0:n.indexed_level)&&(o=null==n?void 0:n.indexed_level,l=!0));return{currentIndexedLevel:o,isInheritBookIndex:l}},f=function(e,t,r,n){var o=e.password,l=!1;t===a.b.DOC&&(Object(i.c)({type:"book",target:n,group:r})!==c.PRIVACY.private&&null!=n&&n.password&&(o=null==n?void 0:n.password,l=!0));return{currentPassword:o,isInheritBookPassword:l}},d=function(e,t,r){if(!r&&e.public!==c.PRIVACY.private&&(t===a.b.DOC||t===a.b.NOTE)&&e.share_expired_time){var n=e.share_expired_time,i=new Date(e.share_expired_time),l=new Date(i.setMonth(i.getMonth()-6));return{startTime:o()(l).format("YYYY.MM.DD"),expiredTime:o()(n).format("YYYY.MM.DD")}}return null}},1530:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-arrow-left",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M154.995 58.157c3.834 3.834 3.904 10.007.21 13.927l-.21.215-48.99 48.99c-3.834 3.834-3.904 10.007-.21 13.927l.21.215 48.99 48.99c3.905 3.905 3.905 10.237 0 14.142-3.834 3.834-10.008 3.904-13.927.21l-.215-.21-48.99-48.99c-11.599-11.599-11.715-30.331-.348-42.073l.348-.353 48.99-48.99c3.905-3.905 10.237-3.905 14.142 0Z",fill:"currentColor",fillRule:"nonzero"}))},1532:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-add",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M128 28c5.523 0 10 4.477 10 10v80h80c5.523 0 10 4.477 10 10s-4.477 10-10 10h-80v80c0 5.523-4.477 10-10 10s-10-4.477-10-10v-80H38c-5.523 0-10-4.477-10-10s4.477-10 10-10h80V38c0-5.523 4.477-10 10-10Z",fill:"currentColor",fillRule:"evenodd"}))},1534:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-help-search",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M114 20c51.362 0 93 41.638 93 93 0 21.782-7.489 41.816-20.032 57.666l45.82 46.277c4.275 4.317 4.24 11.282-.077 15.556-4.317 4.275-11.281 4.24-15.556-.077l-45.774-46.23C155.576 198.602 135.652 206 114 206c-51.362 0-93-41.638-93-93s41.638-93 93-93Zm0 20c-40.317 0-73 32.683-73 73s32.683 73 73 73 73-32.683 73-73-32.683-73-73-73Z",fill:"currentColor",fillRule:"nonzero"}))},1537:function(e,t,r){"use strict";r.d(t,"a",(function(){return z})),r.d(t,"i",(function(){return G})),r.d(t,"e",(function(){return U})),r.d(t,"o",(function(){return V})),r.d(t,"c",(function(){return H})),r.d(t,"n",(function(){return K})),r.d(t,"l",(function(){return Y})),r.d(t,"h",(function(){return Z})),r.d(t,"j",(function(){return X})),r.d(t,"b",(function(){return $})),r.d(t,"m",(function(){return ee})),r.d(t,"k",(function(){return re})),r.d(t,"f",(function(){return ne})),r.d(t,"g",(function(){return oe})),r.d(t,"d",(function(){return ae})),r.d(t,"p",(function(){return ie}));r(690);var n=r(294),o=(r(497),r(95)),a=(r(1743),r(1670)),i=(r(711),r(356)),c=(r(305),r(103)),l=(r(144),r(60)),u=r(0),s=r.n(u),f=r(2),d=r.n(f),p=r(5),h=r.n(p),m=r(1077),y=r(83),v=r(11),b=r(559),g=r(1082),w=r(43),_=r(935),E={wrap:"index-module_wrap_iKZPE",close:"index-module_close_mZbMN",icon:"index-module_icon_gxtpV",closeIcon:"index-module_closeIcon_kM1zW"};function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e){var t=e.icon,r=e.content,n=e.style,o=e.showClose,a=O(Object(u.useState)(!0),2),i=a[0],c=a[1];return i?s.a.createElement("div",{className:E.wrap,style:n},t&&s.a.createElement("div",{className:E.icon},t),s.a.createElement("div",{className:E.content},r),o&&s.a.createElement("div",{className:E.close,onClick:function(){c(!1)}},s.a.createElement("span",{className:h()("lake-icon","lake-icon-close",E.closeIcon)}))):null};S.propTypes={icon:d.a.node,content:d.a.node.isRequired,style:d.a.object,showClose:d.a.bool};var k=S,x=r(202),j=r(189),P=r(1515),C=(r(1397),r(328)),I=r(691),T={articleTitle:"index-module_articleTitle_VJTLJ",popover:"index-module_popover_nfMC3",belongMenu:"index-module_belongMenu_2QmLB",belongText:"index-module_belongText_TkCAl",belongMenuOverlay:"index-module_belongMenuOverlay_ua9Uh",belongMenuLabel:"index-module_belongMenuLabel_Eor0q",privacy:"index-module_privacy_QkaFB"};function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function D(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return M(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z={},G=function(e){var t=e.className,r=e.type,n=void 0===r?"doc":r,o=e.width,a=void 0===o?20:o;return s.a.createElement(w.b,{className:"doc-icon ".concat(t),name:I.b.getName("Doc",{type:n}),width:a})};z.getTypeText=function(e){var t=e;return"Doc"===e?t=__("文档#lower_case"):"Sheet"===e?t=__("表格#lower_case"):"Table"===e?t=__("数据表#lower_case"):"Board"===e&&(t=__("画板#lower_case")),t},z.getTypeTextOfBook=function(e){var t=e;return"Book"===e?t=__("文档"):"Sheet"===e&&(t=__("表格")),t},z.getFormalTitle=function(e){return e.title},z.getDefaultTitle=C.a.getDefaultTitle;var U=function(e){var t=e.doc,r=e.showType,n=e.showAuthor,o=void 0===n||n,a=C.a.getDocShowAuthorOption(t);return o&&a!==y.SHOW_AUTHOR_OPTION.hide?"sheet"===r?s.a.createElement("div",{"data-testid":"doc-contributors-wrapper-sheet"},s.a.createElement("span",{className:"larkicon larkicon-user"}),s.a.createElement("span",{className:T.label},__("参与编辑：")," "),s.a.createElement(W,{doc:t,showAuthor:!0})):"doc"===r?s.a.createElement("div",{"data-testid":"doc-contributors-wrapper-doc",className:"meta-item"},s.a.createElement(l.a,{title:__("参与编辑")},s.a.createElement("span",{className:"author larkicon larkicon-user"})),s.a.createElement(W,{doc:t,showAuthor:o})):s.a.createElement(W,{doc:t,showAuthor:o}):null};U.propTypes={doc:d.a.object.isRequired,showAuthor:d.a.bool.isRequired,showType:d.a.oneOf(["sheet","doc"])};var W=function(e){var t=e.doc,r=C.a.getDocShowAuthorOption(t);if(r===y.SHOW_AUTHOR_OPTION.hide)return null;if(r===y.SHOW_AUTHOR_OPTION.custom_text){var n=C.a.getDocShowAuthorCustomText(t);return n?s.a.createElement("span",{"data-testid":"doc-contributors-custom-text"},n):null}var o=C.a.getDocContributors(t);if(!o||0===o.length)return null;var a=o.slice(0,3);return s.a.createElement("span",{"data-testid":"doc-contributors",className:"doc-contributors"},a.map((function(e,t){return e&&s.a.createElement("span",{key:e.id},s.a.createElement(g.b,{user:e,type:g.a.link,withCard:!0,className:T.popover}),t!==a.length-1&&__("、"))})),o.length>3&&s.a.createElement("span",null,__("等")))};W.propTypes={doc:d.a.object.isRequired};var V=function(e){var t=e.doc,r=e.hasDraftSign,n=z.getFormalTitle(t);return r&&0===t.status?s.a.createElement("span",{className:"doc-title",title:n},s.a.createElement("span",{className:"doc-title-draft"},"[",__("草稿"),"]"),n):s.a.createElement("span",{className:"doc-title",title:n},n)};V.propTypes={hasDraftSign:d.a.bool,doc:d.a.object};var H=function(e){var t=e.title;return s.a.createElement("h1",{id:"article-title",className:h()(T.articleTitle,"doc-article-title")},t)},K=function(e){var t=e.doc;return t.content_updated_at&&t.content_updated_at!==t.created_at?s.a.createElement("span",{className:"doc-time"},__("更改于"),s.a.createElement(b.a,{time:new Date(t.content_updated_at)})):s.a.createElement("span",{className:"doc-time"},__("创建于"),s.a.createElement(b.a,{time:new Date(t.created_at)}))},Y=function(e){var t=e.doc,r=t[e.showBy]||t.content_updated_at;return s.a.createElement("span",{className:"doc-time"},s.a.createElement(b.a,{time:new Date(r)}))},Q=function(){return s.a.createElement("div",{className:"doc-draft-tip-content"},s.a.createElement("p",null,__("当前内容与编辑态不一致，请去编辑态进一步操作")))},Z=function(e){var t=e.doc,r=e.className;return t.content_modified?"Sheet"===t.type||"Table"===t.type?s.a.createElement("div",{className:r,title:__("当前展示不是最新版本，可点击编辑按钮查看最新内容，并进行发布或更新")},s.a.createElement(w.b,{name:"doc-has-new-content",height:18,width:18}),s.a.createElement("p",null,__("当前展示不是最新版本，可点击编辑按钮查看最新内容，并进行发布或更新"))):s.a.createElement(k,{style:{marginBottom:"Doc"===t.type?24:0},icon:s.a.createElement(w.b,{name:"edit-border",height:18,width:18}),content:s.a.createElement(Q,{doc:t}),showClose:"Doc"===t.type}):null};Z.propTypes={doc:d.a.object.isRequired,className:d.a.string};d.a.object.isRequired;var X=function(e){var t=e.doc,r=e.url,n=e.target,o=e.desktopTarget,a=void 0===o?"_blank":o,i=window.appData.isAlipayWebApp||window.appData.isDingTalkMiniApp||window.appData.isYuqueMobileApp?"_blank":"_self";return s.a.createElement("a",{href:r,target:n||i,className:"doc-link","data-desktoptarget":a},s.a.createElement(V,{doc:t}))};X.propTypes={doc:d.a.object,url:d.a.string,target:d.a.string,desktopTarget:d.a.string};var J=function(e){var t=e.organization,r=e.doc,n=e.book,o=e.group,a=e.getPopupContainer,i=e.placement,c=void 0===i?"bottom":i,u=e.onlyIcon;if(window.appData.sharePage)return null;if(null==r||!r.id)return null;if(n){var f=Object(x.c)({type:"doc",target:r,group:o,book:n}),d=function(){return f!==v.PRIVACY.private?"icon-public":(null==n||n.extend_private,v.EXTEND_PRIVATE.BIND_DEPARTMENTS,"permission-private")};return u?s.a.createElement(l.a,{title:Object(x.d)({privacy:f,type:"doc",organization:t,group:o,book:n}),getPopupContainer:a,placement:c},s.a.createElement(w.b,{name:d(),width:14,height:14})):s.a.createElement(l.a,{title:Object(x.d)({privacy:f,type:"doc",organization:t,group:o,book:n}),getPopupContainer:a,placement:c},s.a.createElement("span",{className:"doc-access-scope"},s.a.createElement(w.b,{name:d(),width:14,height:14})))}return null},$=function(e){return s.a.createElement(j.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return s.a.createElement("span",{"data-test-id":"doc-access-scope"})}},s.a.createElement(J,e))};$.propTypes={group:d.a.object.isRequired,book:d.a.object.isRequired,doc:d.a.object.isRequired,organization:d.a.object,getPopupContainer:d.a.func,placement:d.a.string,onlyIcon:d.a.bool};var ee=function(e){var t=e.doc,r=e.withTip,n=void 0===r||r;if(0!==t.status)return null;var o=s.a.createElement("div",{className:"doc-draft-tip",style:{width:"360px"}},s.a.createElement(Q,{doc:t})),a=s.a.createElement(c.a,{className:"doc-draft-tag","data-testid":"doc-draft-tag",onClick:function(e){e.stopPropagation(),e.preventDefault()}},t.published_at?__("未更新"):__("未发布"));return n?s.a.createElement(i.a,{placement:"bottomLeft",content:o},a):a};ee.displayName="LarkDocStatus";var te=function(e){var t=e.doc,r=e.group,n=e.book;if(t.public!==v.PRIVACY.private){var o=Object(P.a)(t,"DOC",r,n);return s.a.createElement(c.a,{className:"doc-share-tag"},s.a.createElement("a",{href:o.url,target:"_blank"},__("分享中")))}return null},re=function(e){return s.a.createElement(j.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return s.a.createElement("span",{"data-test-id":"doc-ShareLink-tag"})}},s.a.createElement(te,e))};re.propTypes={group:d.a.object.isRequired,book:d.a.object.isRequired,doc:d.a.object.isRequired},re.displayName="LarkShareLink";var ne=function(e){var t=e.doc,r=e.size,n=void 0===r?{}:r,o=e.placeholder,a=t.cover||o;return a?s.a.createElement("div",{style:{width:"100%",height:"100%",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:'url("'.concat(Object(_.a)(a,B({},n)),'")')}}):s.a.createElement(w.b,{name:t.type.toLowerCase(),width:48})},oe=function(e){var t=e.doc,r=e.highlightUsers;if(C.a.getDocShowAuthorOption(t)===y.SHOW_AUTHOR_OPTION.hide)return s.a.createElement("span",{className:"info-not-show-creator"},__("不显示作者"));var n=C.a.getDocContributors(t);return n?(Array.isArray(n)||(n=[n]),s.a.createElement(l.a,{title:function(){return n.map((function(e){return e.name})).join("、")}},s.a.createElement("span",null,n.reduce((function(e,t,n){return null!=r&&r.includes(String(t.id))?(e.unshift.apply(e,[s.a.createElement("a",{href:"/".concat(t.login)},s.a.createElement("b",null,t.name)),"、"]),e):(e.push.apply(e,[s.a.createElement("a",{"data-desktoptarget":"_browser",href:"/".concat(t.login)},t.name),"、"]),e)}),[]).slice(0,-1)))):null},ae=function(e){var t=e.belongs,r=e.onChange,n=e.overlayClassName,o=e.overlayPlacement;function i(e){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=R(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.text||(n.text=n.label,n.label=s.a.createElement("span",{className:T.belongMenuLabel},s.a.createElement(m.default,null),s.a.createElement("span",null,n.label)),n.children&&n.children.length&&i(n.children))}}catch(e){r.e(e)}finally{r.f()}return e}var c=N(s.a.useState(""),2),l=c[0],u=c[1],f=N(s.a.useState(D(t)),2),d=f[0],p=f[1];s.a.useEffect((function(){p(i(D(t)))}),[t]);return!d||d.length<=1?s.a.createElement("span",{className:T.belongText},l||__("归属")):s.a.createElement(a.a,{defaultValue:[null],popupClassName:h()(T.belongMenuOverlay,n),popupPlacement:o||"bottomLeft",options:d,onChange:function(e,t){r(e),e&&e[0]?u(t.map((function(e){return e.text})).join(" / ")):u("")},changeOnSelect:!0},s.a.createElement("span",{className:T.belongMenu},s.a.createElement("span",{className:T.belongText},l||__("归属")),s.a.createElement(w.b,{name:"arrow-down",width:16})))};ae.propTypes={belongs:d.a.array.isRequired,onChange:d.a.func.isRequired,overlayClassName:d.a.string,overlayPlacement:d.a.string};var ie=function(e){var t=e.current,r=e.onChange,a=e.overlayClassName,i=e.overlayPlacement,c=[{name:__("所有"),value:""},{name:__("文档"),value:"Doc"},{name:__("表格"),value:"Sheet"},{name:__("画板"),value:"Board"},{name:__("数据表"),value:"Table"}];t||(t="");var l=c.find((function(e){return e.value===t}));return s.a.createElement(n.a,{trigger:"click",placement:i||"bottomLeft",overlay:s.a.createElement(o.a,null,c.map((function(e){return s.a.createElement(o.a.Item,{key:e.value,onClick:function(){r(e.value)}},t===e.value&&s.a.createElement(m.default,null),e.name)}))),overlayClassName:a},s.a.createElement("span",null,l.value?l.name:__("类型")," ",s.a.createElement(w.b,{name:"arrow-down",width:16})))};ie.propTypes={current:d.a.string.isRequired,onChange:d.a.func.isRequired,overlayClassName:d.a.string,overlayPlacement:d.a.string}},1540:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-questioncirclefilled",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm-1 156c-6.627 0-12 5.372-12 12 0 6.627 5.373 12 12 12s12-5.373 12-12c0-6.628-5.373-12-12-12Zm1.863-109.002c-13.226-.063-23.752 5.503-30.913 14.964-5.32 7.029-8.435 15.92-8.93 23.434a9 9 0 0 0 17.94 1.448l.053-.681c.37-4.07 2.275-9.356 5.29-13.338 3.843-5.078 9.107-7.861 16.471-7.825 7.7.038 13.474 3.037 17.087 8.1 3.222 4.515 4.337 10.296 3.094 14.928l-.036.13-.076.258c-.762 2.484-2.476 4.971-7.337 10.406l-1.555 1.722-1.338 1.461-4.166 4.498c-4.197 4.559-6.91 7.783-9.328 11.28l-.515.754c-3.968 5.9-6.33 11.683-6.782 17.801a9 9 0 0 0 17.928 1.587l.043-.495c.467-5.01 4.14-10.414 13.227-20.172l4.35-4.68c.597-.646 1.104-1.197 1.546-1.683l.72-.796.84-.95.547-.639.706-.85 1.192-1.487c3.732-4.697 6.204-8.954 7.418-13.478 2.659-9.905.477-21.218-5.826-30.051-6.968-9.766-18.158-15.577-31.65-15.646Z",fill:"currentColor",fillRule:"nonzero"}))},1541:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-icon-delete",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M218 68c5.523 0 10 4.477 10 10s-4.477 10-10 10h-16.56l-6.16 107.936c-.97 17.07-14.466 30.764-31.52 31.984l-2.432.08H94.672c-18.028.004-32.925-14.065-33.952-32.064L54.56 88H38c-5.523 0-10-4.477-10-10s4.477-10 10-10h180Zm-36.592 20H74.576l6.112 106.8a14 14 0 0 0 12.288 13.104l1.696.096h66.656c7.424.004 13.56-5.788 13.984-13.2L181.408 88ZM108 112c5.52 0 10 4.48 10 10v44c0 5.523-4.477 10-10 10s-10-4.477-10-10v-44c0-5.52 4.48-10 10-10Zm40 0c5.52 0 10 4.48 10 10v44c0 5.523-4.477 10-10 10s-10-4.477-10-10v-44c0-5.52 4.48-10 10-10Zm26-84c5.523 0 10 4.477 10 10s-4.477 10-10 10H82c-5.523 0-10-4.477-10-10s4.477-10 10-10h92Z",fill:"currentColor",fillRule:"nonzero"}))},1670:function(e,t,r){"use strict";r(3052);var n=r(1321);r(1743);t.a=n.a},1712:function(e,t,r){"use strict";r(116);var n=r(38),o=(r(132),r(27)),a=(r(144),r(60)),i=(r(358),r(176)),c=(r(44),r(10)),l=r(0),u=r.n(l),s=r(2),f=r.n(s),d=r(5),p=r.n(d),h=r(194),m={fileTypeSelector:"index-module_fileTypeSelector_73BHW",item:"index-module_item_H3xgY",fileType:"index-module_fileType_l65Jm",fileTypeIcon:"index-module_fileTypeIcon_eSmiM",fileTypeMeta:"index-module_fileTypeMeta_4eYr8",fileTypeName:"index-module_fileTypeName_9B0Rn",fileTypeExt:"index-module_fileTypeExt_wTTFB",fileTypeReady:"index-module_fileTypeReady_TAUvL"},y=(r(37),r(8)),v=r(62),b=r.n(v),g=r(43),w="EvernoteDirUpload-module_dragZone_qrdZx",_="EvernoteDirUpload-module_tip_FtuKl",E="EvernoteDirUpload-module_icon_ZYE-k",O="EvernoteDirUpload-module_dragOver_0DaAV";function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function S(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=j(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function k(){k=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(L([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==A(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(A(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function x(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function I(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){C(a,n,o,i,c,"next",e)}function c(e){C(a,n,o,i,c,"throw",e)}i(void 0)}))}}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function L(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}var D=b()("evernotedirupload"),N=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,n=null,o=[{key:"genZipFileFromDrop",value:(c=I(k().mark((function t(r){var n,o,a,i;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==(n=r.files).length||!n[0].name.endsWith(".zip")){t.next=4;break}return D("zip文件，直接返回"),t.abrupt("return",n[0]);case 4:return o=x(r.items).map((function(e){return e.webkitGetAsEntry?e.webkitGetAsEntry():null})).filter(Boolean),D({entries:o}),t.prev=6,t.next=9,e.getFileList(o);case 9:return a=t.sent,t.next=12,e.evernoteDirToZip(a);case 12:return i=t.sent,t.abrupt("return",i);case 16:return t.prev=16,t.t0=t.catch(6),t.abrupt("return",Promise.reject(t.t0));case 19:case"end":return t.stop()}}),t,null,[[6,16]])}))),function(e){return c.apply(this,arguments)})},{key:"evernoteDirToZip",value:(i=I(k().mark((function e(t){var n,o,a,i,c,l,u,s,f,d,p,h;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(1226).then(r.t.bind(null,2865,7));case 2:n=e.sent.default,D(n),o=new n,a="evernote_zip_".concat((new Date).toISOString(),".zip"),D(t),i=0,1===t.length&&(a="".concat(t[0][0].fullPath.split("/")[0],".zip")),c=S(t);try{for(c.s();!(l=c.n()).done;){u=l.value,s=S(u);try{for(s.s();!(f=s.n()).done;)d=f.value,p=d.fullPath,i++,D("zipped",p),o.file(p,d.file)}catch(e){s.e(e)}finally{s.f()}}}catch(e){c.e(e)}finally{c.f()}if(i){e.next=13;break}throw new Error("none of the given files is zipped");case 13:return e.next=15,o.generateAsync({type:"blob"});case 15:return h=e.sent,e.abrupt("return",new File([h],a));case 17:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"getFileList",value:(a=I(k().mark((function t(r){var n,o,a,i,c,l,u;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u=function(){return u=I(k().mark((function t(r){var n,o,a,i=arguments;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:[],r){t.next=3;break}return t.abrupt("return",n);case 3:if(!r.isDirectory){t.next=9;break}return o=r.createReader(),t.next=7,new Promise((function(e){o.readEntries(function(){var t=I(k().mark((function t(r){var o,a,i;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=S(r),t.prev=1,o.s();case 3:if((a=o.n()).done){t.next=9;break}return i=a.value,t.next=7,l(i,n);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),o.e(t.t0);case 14:return t.prev=14,o.f(),t.finish(14);case 17:e(null);case 18:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})));return function(e){return t.apply(this,arguments)}}())}));case 7:t.next=14;break;case 9:if(!r.isFile){t.next=14;break}return t.next=12,e.getFileOfEntry(r);case 12:a=t.sent,n.push({file:a,fullPath:r.fullPath.slice(1)});case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)},l=function(e){return u.apply(this,arguments)},n=[],o=S(r),t.prev=4,o.s();case 6:if((a=o.n()).done){t.next=14;break}return i=a.value,t.next=10,l(i);case 10:c=t.sent,n.push(c);case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),o.e(t.t0);case 19:return t.prev=19,o.f(),t.finish(19);case 22:return D("解析出的文件",n),t.abrupt("return",n);case 24:case"end":return t.stop()}}),t,null,[[4,16,19,22]])}))),function(e){return a.apply(this,arguments)})},{key:"getFileOfEntry",value:function(e){return new Promise((function(t,r){e.file((function(e){t(e)}),(function(e){r(e)}))}))}}],n&&T(t.prototype,n),o&&T(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o,a,i,c}(),R=["onBeforeUpload","onUploadChange","setImportModalHide","buttonNode","data"];function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M.apply(null,arguments)}var F=b()("evernotedirupload"),B=function(e){e.onBeforeUpload,e.onUploadChange,e.setImportModalHide,e.buttonNode;var t=e.data,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,R);Object(l.useEffect)((function(){r.e(1226).then(r.t.bind(null,2865,7))}),[]);var o=function(t,r,n){if("function"==typeof e.onChange&&t){F(n,r);var o={uid:Math.random().toString(32),name:t.name,status:r,percent:100,response:n};e.onChange({file:o,fileList:[o]})}};return u.a.createElement(u.a.Fragment,null,u.a.createElement(i.a,M({},n,{data:t,onChange:function(e){var t;null===(t=n.onChange)||void 0===t||t.call(n,e)}}),u.a.createElement("div",{className:w,onDragOver:function(e){e.preventDefault(),e.currentTarget.classList.add(O)},onDragLeave:function(e){e.preventDefault(),e.target===e.currentTarget&&e.currentTarget.classList.remove(O)},onDrop:function(e){e.preventDefault(),e.stopPropagation(),c.a.loading({content:__("文件正在解析中..."),duration:0,key:"generating_zip"}),N.genZipFileFromDrop(e.dataTransfer).then((function(e){if(!n.customRequest)throw new Error("lack of customRequest");n.customRequest&&n.customRequest({file:e,data:t(),action:n.action,method:n.method,onError:function(){o(e,"error")},onProgress:function(){o(e,"uploading")},onSuccess:function(t){F("上传接口调用成功",t),o(e,"done",t)}})})).catch((function(e){F(e),c.a.error(__("文件处理失败，请重新上传，如果持续失败，请反馈到语雀。"))})).finally((function(){c.a.destroy("generating_zip")}))}},u.a.createElement(g.b,{name:"DoubleArrowDown",className:E}),u.a.createElement("div",{className:_},u.a.createElement("span",null,__("可直接拖入一个文件夹或.zip压缩包"))),u.a.createElement(y.a,null,__("上传文件")))))},q=r(357);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y(n.key),n)}}function U(e,t,r){return t=V(t),function(e,t){if(t&&("object"==z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,W()?Reflect.construct(t,r||[],V(e).constructor):t.apply(e,r))}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function K(e,t,r){return(t=Y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:t+""}function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q.apply(null,arguments)}function Z(){Z=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(I([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==z(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(z(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function X(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function J(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var re={lake:__("语雀文档"),lakeboard:__("语雀画板"),lakesheet:__("语雀表格"),laketable:__("语雀数据表"),lakebook:__("语雀知识库"),dingdocs:__("钉钉知识库")},ne=function(e){var t,r=e.fileOption,n=e.getParamsOption,o=e.book,a=e.importType,s=e.onBeforeUpload,f=e.onUploadChange,d=e.customRequest,p=e.maxCount,m=e.setModalHide,y=$(Object(l.useState)([]),2),v=y[0],b=y[1],g=function(e){var t=J(e.fileList);b(t),f(e)},w=function(){var e,r=(e=Z().mark((function e(r,n){var o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p&&n.length>p)){e.next=4;break}throw o="一次最多上传 ".concat(p," 个文件。"),t||(c.a.warn(__(o)),t=!0),new Error(o);case 4:if(!s){e.next=7;break}return e.next=7,s();case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){X(a,n,o,i,c,"next",e)}function c(e){X(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),_=function(){var e=r.extensions.join(", "),t="/api/import?ctoken=".concat(Object(h.a)(window)),i={book_id:o.id,type:r.key,import_type:a},c={name:"file",action:t,data:function(){if(n){var e=n();e&&(i.options=JSON.stringify(e))}return i},showUploadList:!1,dataType:"json",multiple:!0,supportServerRender:!1,accept:e,withCredentials:!0,beforeUpload:w,onChange:g};return"function"==typeof d&&(c.customRequest=d),c};return"evernote"===r.key?u.a.createElement(u.a.Fragment,null,u.a.createElement(q.a,{mt:-40}),u.a.createElement(B,Q({},_(),{onBeforeUpload:s,onUploadChange:f,setImportModalHide:m,buttonNode:e.children}))):u.a.createElement(i.a,Q({},_(),{fileList:v,key:r.key}),e.children)};ne.defaultProps={maxCount:10};var oe=function(e){function t(e){var r,n;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),K(r=U(this,t,[e]),"handleSelect",(function(e){r.setState({selected:e}),r.props.onSelect(e)})),K(r,"getDescription",(function(e){return(e.fakeExtensions||e.extensions).join(" ")})),r.state={selected:null},"export"===e.mode)&&(null===(n=e.types)||void 0===n||n.forEach((function(e){e.extensions.length=1})));return r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(t,e),r=t,(i=[{key:"renderItem",value:function(e){var t=this,r="ready"===e.status,n=this.props.mode,o=u.a.createElement("div",{className:p()(K(K(K({},m.fileType,!0),m.fileTypeReady,r),m.fileTypeSelected,this.state.selected===e.key)),onClick:function(){t.handleSelect(e.key)},"data-aspm-click":"c34618.d69452","data-aspm-param":"file_type=".concat(e.key,"^action_mode=").concat(n),"data-testid":"fileTypeSelectorItem-".concat(e.key)},u.a.createElement("div",{className:m.fileTypeIcon},u.a.createElement("img",{src:e.icon,className:""})),u.a.createElement("div",{className:m.fileTypeMeta},u.a.createElement("div",{className:m.fileTypeName},re[e.key]||e.name),u.a.createElement("div",{className:m.fileTypeExt},this.getDescription(e))));return r?u.a.createElement(a.a,{title:__("即将支持，敬请期待。")},o):"confluence"===e.key?u.a.createElement(a.a,{title:__("将 cf 导出的文件加上 .zip 后缀再导入")},o):"zip"===e.key?u.a.createElement(a.a,{title:__("将文件使用 zip 压缩后再导入")},o):o}},{key:"render",value:function(){var e=this,t=this.props.types;return u.a.createElement("div",{className:m.fileTypeSelector},u.a.createElement(n.a,{gutter:6},null==t?void 0:t.map((function(t){return u.a.createElement(o.a,{key:t.key,className:m.item},"import"!==e.props.mode||t.status||e.props.disableUpload(t)?e.renderItem(t):u.a.createElement(ne,Q({},e.props,{fileOption:t}),e.renderItem(t)))}))))}}])&&G(r.prototype,i),c&&G(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,c}(l.PureComponent);oe.defaultProps={onSelect:function(){},onBeforeUpload:function(){},onUploadChange:function(){},disableUpload:function(){return!1}},oe.propTypes={types:f.a.array.isRequired,mode:f.a.oneOf(["import","export"]),importType:f.a.string,maxCount:f.a.number,getParamsOption:f.a.func,book:f.a.object,disableUpload:f.a.func,onSelect:f.a.func,onBeforeUpload:f.a.func,customRequest:f.a.func,onUploadChange:f.a.func},oe.FileUpload=ne;t.a=oe},1714:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-success",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M128 16c61.856 0 112 50.144 112 112s-50.144 112-112 112S16 189.856 16 128 66.144 16 128 16Zm55.143 72.902c-3.865-3.945-10.196-4.01-14.141-.145L112.714 143.9l-25.717-25.187-.217-.207c-3.958-3.653-10.13-3.52-13.924.354-3.865 3.946-3.799 10.277.147 14.142l32.715 32.041.219.208a10 10 0 0 0 13.776-.209l63.285-62 .212-.213c3.734-3.881 3.728-10.055-.067-13.928Z",fill:"currentColor",fillRule:"nonzero"}))},1717:function(e,t,r){"use strict";r(711);var n=r(356),o=r(0),a=r.n(o),i=r(2),c=r.n(i),l=r(43),u="index-module_more_sDgGm",s=["iconClassName","data-testid","visible","onVisibleChange","getPopupContainer","isHover","iconName","placement","isMenuType"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(null,arguments)}var d=function(e){return e.parentNode};function p(e){var t=e.iconClassName,r=e["data-testid"],o=void 0===r?"more-actions":r,i=e.visible,c=e.onVisibleChange,p=e.getPopupContainer,h=void 0===p?d:p,m=e.isHover,y=e.iconName,v=e.placement,b=e.isMenuType,g=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,s),w={horizontal:"more-horizontal",vertical:"more-vertical",circle:"more-circle"},_={};void 0!==i&&(_.visible=e.visible),void 0!==c&&(_.onVisibleChange=e.onVisibleChange);var E=e.iconWidth||16,O={lineHeight:"".concat(E,"px"),padding:(24-E)/2},A=["click"];return m&&(A[0]="hover"),a.a.createElement(n.a,f({className:e.className,overlayClassName:e.overlayClassName,type:b?"menu":void 0,getPopupContainer:h,placement:v||"bottomRight",destroyTooltipOnHide:e.destroyTooltipOnHide,autoAdjustOverflow:!0,trigger:A,content:e.content,hideWhenInactive:!0},_,g),e.children||a.a.createElement("span",{className:u,style:O,"data-testid":"more-actions:Popover:".concat(o)},a.a.createElement(l.b,{name:y||w[e.direction]||w.horizontal,width:E,className:t})))}p.defaultProps={direction:"horizontal",isMenuType:!0},p.propTypes={className:c.a.string,overlayClassName:c.a.string,direction:c.a.oneOf(["horizontal","vertical","circle"]),iconWidth:c.a.number,visible:c.a.bool,content:c.a.node.isRequired,onVisibleChange:c.a.func,"data-testid":c.a.string,getPopupContainer:c.a.func,iconName:c.a.string,destroyTooltipOnHide:c.a.bool,placement:c.a.string,isMenuType:c.a.bool,iconClassName:c.a.string,children:c.a.node,isHover:c.a.bool};t.a=p},1731:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-permission",e.className].filter(Boolean).join(" ")}),n.createElement("defs",null,n.createElement("path",{id:"1825377134a",d:"M0 0h256v256H0z"})),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("mask",{id:"1825377134b",fill:"#fff"},n.createElement("use",{xlinkHref:"#1825377134a"})),n.createElement("path",{d:"M173.844 110.217c17.475 0 31.884 13.48 32.17 30.483l.005.517v7.002c12.698.164 22.966 10.407 23.17 23.096l.003.385v35.034c0 12.84-10.304 23.272-23.095 23.48l-.388.003h-64.557c-12.84 0-23.273-10.305-23.48-23.095l-.004-.388V171.7c0-12.84 10.305-23.273 23.095-23.48l.389-.003h.516v-7c0-17.247 14.524-31 32.176-31ZM188 26c22.964 0 41.623 18.43 41.994 41.305L230 68v26c0 5.523-4.477 10-10 10-5.43 0-9.848-4.327-9.996-9.72L210 94V68c0-12.029-9.654-21.803-21.636-21.997L188 46H68c-12.029 0-21.803 9.654-21.997 21.636L46 68v120c0 12.029 9.654 21.803 21.636 21.997L68 210h27c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996L95 230H68c-22.964 0-41.623-18.43-41.994-41.305L26 188V68c0-22.964 18.43-41.623 41.305-41.994L68 26h120Zm17.71 142.217h-64.558a3.483 3.483 0 0 0-3.478 3.292l-.006.19v35.035a3.483 3.483 0 0 0 3.292 3.478l.192.005h64.557a3.483 3.483 0 0 0 3.478-3.292l.005-.191V171.7a3.483 3.483 0 0 0-3.483-3.483Zm-31.866-38c-6.737 0-12.011 4.896-12.172 10.726l-.004.274v7h24.35l.001-7c0-5.95-5.333-11-12.175-11ZM169 73c5.523 0 10 4.477 10 10s-4.477 10-10 10H87c-5.523 0-10-4.477-10-10s4.477-10 10-10h82Z",fill:"currentColor",fillRule:"nonzero",mask:"url(#1825377134b)"})))},1737:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-more-settings",e.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M0 0h256v256H0z"}),n.createElement("path",{d:"M130 53c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996L130 73H38c-5.523 0-10-4.477-10-10 0-5.43 4.327-9.848 9.72-9.996L38 53h92Zm88 65c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996L218 138h-92c-5.523 0-10-4.477-10-10 0-5.43 4.327-9.848 9.72-9.996L126 118h92Zm-90 44c5.43 0 9.848 4.327 9.996 9.72l.004.28v13h80c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996L218 205h-80v13c0 5.523-4.477 10-10 10-5.43 0-9.848-4.327-9.996-9.72L118 218v-46c0-5.523 4.477-10 10-10Zm-44 23c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996L84 205H39c-5.523 0-10-4.477-10-10 0-5.43 4.327-9.848 9.72-9.996L39 185h45Zm87-155c5.43 0 9.848 4.327 9.996 9.72L181 40v13h37c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996L218 73h-37v13c0 5.523-4.477 10-10 10-5.43 0-9.848-4.327-9.996-9.72L161 86V40c0-5.523 4.477-10 10-10ZM85 95c5.523 0 10 4.477 10 10v46l-.004.28C94.848 156.673 90.43 161 85 161c-5.523 0-10-4.477-10-10v-13H39l-.28-.004C33.327 137.848 29 133.43 29 128c0-5.523 4.477-10 10-10h36v-13l.004-.28C75.152 99.327 79.57 95 85 95Z",fill:"currentColor",fillRule:"nonzero"})))},1746:function(e,t,r){"use strict";r(59);var n=r(30),o=(r(37),r(8)),a=r(0),i=r.n(a),c=r(2),l=r.n(c),u=r(1398),s=r(326),f=r(1386),d=r.n(f),p=r(1023),h=r(1712),m=r(189),y=r(52),v=r(215),b="BookExport-module_docExport_44PUl",g="BookExport-module_title_Hezdm",w="BookExport-module_tips_VJJKo",_="BookExport-module_setting_PXAtw",E="BookExport-module_settingTitle_pEiZb",O="BookExport-module_settingUpload_sNiNV";function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(){x=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(L([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==A(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(A(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new k(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function j(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){j(a,n,o,i,c,"next",e)}function c(e){j(a,n,o,i,c,"throw",e)}i(void 0)}))}}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function I(e,t,r){return t=L(t),function(e,t){if(t&&("object"==A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,T()?Reflect.construct(t,r||[],L(e).constructor):t.apply(e,r))}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T=function(){return!!e})()}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function N(e,t,r){return(t=R(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}var M=p.a.STATUS,F=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(r=I(this,t,[e]),"handleExport",(function(e){r.setState({exportType:e,typeObj:d.a.THIRD_PARTY_FORMAT[e.toUpperCase()]}),r.settings[e]?r.setState({status:M.SETTING}):r.doExport(e)})),N(r,"doExport",function(){var e=P(x().mark((function e(t,n){var o,a;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({status:M.PROCESSING}),o=r.props.book,a={data:{id:o.id,type:t,title:n}},r["exportTo".concat(t)](a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),N(r,"_requestExports",(function(e){return y.a.books.exports(k(k({},r._exportParams),e.data))})),N(r,"exportTolakebook",(function(e){r.formRef&&(e.data.options=JSON.stringify(r.formRef.getValue())),r._requestExports(e).then((function(e){"success"===e.state&&(r.setState({exportResultUrl:e.url,status:M.SUCCESS}),Object(v.b)(e.url))})).catch((function(e){var t="";404===(null==e?void 0:e.status)&&(t=__("导出失败，知识库禁止导出，请检查权限")),r.setState({errorMessage:t,status:M.ERROR})}))})),N(r,"exportTopdf",function(){var e=P(x().mark((function e(t){var n,o,a,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.formRef&&(t.data.options=JSON.stringify(r.formRef.getValue())),n=1e4,o=66,a=0;case 4:if(!(a<o)){e.next=24;break}return e.prev=5,e.next=8,r._requestExports(t);case 8:i=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),r.setState({errorMessage:e.t0.message,status:M.ERROR}),e.abrupt("return");case 15:if("success"!==i.state){e.next=19;break}return r.setState({exportResultUrl:i.url,status:M.SUCCESS}),Object(v.b)(i.url),e.abrupt("return");case 19:return e.next=21,Object(s.a)(n);case 21:a++,e.next=4;break;case 24:r.setState({errorMessage:__("处理超时..."),status:M.ERROR});case 25:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()),N(r,"renderEntry",(function(){var e=window.appData.isYuque?"https://www.yuque.com/yuque/thyzgp/import-lake-to-lark#ebsrF":"https://yuque.antfin.com/lark/bsgp0v/import-lake-to-lark#ebsrF";return i.a.createElement("div",{className:"entry"},i.a.createElement("div",{className:g},__("导出知识库")),i.a.createElement("div",{className:w},__("知识库文档过多时，可能导致导出变慢或失败，可拆分知识库后重试。"),i.a.createElement("a",{href:e,target:"_blanck","data-desktoptarget":"_browser"},__("查看帮助文档")),__("。")),i.a.createElement(h.a,{mode:"export",types:r._formats,onSelect:r.handleExport}))})),r._exportParams=e.exportParams||{},r._formats=r.props.formats||d.a.BOOK_EXPORT_FORMATS,r.state={exportType:null,typeObj:null,status:M.INIT,errorMessage:"",exportResultUrl:""},r.settings={pdf:[{label:__("导出文档大纲到 PDF 中"),default:!0,name:"enableToc",value:1}]},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(t,e),r=t,a=[{key:"renderProcessing",value:function(){var e=this.state.typeObj;return e?i.a.createElement("div",{className:_},i.a.createElement("h1",{className:E},__("导出知识库为 {type}",{type:e.name})),i.a.createElement(p.a.Processing,{tip:__("正在导出中...")})):null}},{key:"renderSuccess",value:function(){var e=this,t=this.state.typeObj;return t?i.a.createElement("div",{className:_},i.a.createElement("h1",{className:E},__("导出知识库为 {type}",{type:t.name})),i.a.createElement(p.a.Success,{tip:__("文件生成成功"),action:i.a.createElement("a",{href:this.state.exportResultUrl,desktopDisableHref:!0,onClick:function(){Object(v.b)(e.state.exportResultUrl)},target:"_blank"},__("点击下载"))})):null}},{key:"renderSetting",value:function(){var e=this,t=this.state,r=t.typeObj,n=t.status;if(!r)return null;var a,c=this.settings[r.key];return c?(this._exportParams.toc_node_title&&(a="".concat(this.props.book.name," - ").concat(this._exportParams.toc_node_title)),i.a.createElement("div",{className:_,style:{display:n===M.SETTING?"block":"none"}},i.a.createElement("h1",{className:E},__("导出知识库为 {type}",{type:r.name})),i.a.createElement(p.a.AdvanceSetting,{wrappedComponentRef:function(t){e.formRef=t},title:a,target:this.props.book,type:r,settings:c,actions:i.a.createElement(o.a,{type:"primary","data-testid":"btn-export",className:O,onClick:function(){return e.doExport(e.state.exportType,a)}},__("导出"))}))):null}},{key:"renderError",value:function(){var e=this,t=this.state.typeObj;return t?i.a.createElement("div",{className:_},i.a.createElement("h1",{className:E},__("导出知识库为 {type}",{type:t.name})),i.a.createElement(p.a.Error,{tip:__("文件生成失败"),error:this.state.errorMessage,action:i.a.createElement(o.a,{icon:i.a.createElement(u.default,null),size:"small","data-testid":"btn-reload",onClick:function(){e.doExport(e.state.exportType)}},__("重新生成"))})):null}},{key:"render",value:function(){var e=this.state.status,t=this.props.wrapModal,r=void 0===t||t,o=null;return e===M.PROCESSING?o=this.renderProcessing():e===M.SUCCESS?o=this.renderSuccess():e===M.ERROR?o=this.renderError():e===M.INIT&&(o=this.renderEntry()),o=i.a.createElement("div",{"data-testid":"book-export",className:b,onClick:function(e){e.stopPropagation()}},o,this.renderSetting()),r?i.a.createElement(n.a,{visible:this.props.visible,title:null,footer:null,width:360,onCancel:this.props.onCancel,maskClosable:!1},o):o}}],a&&C(r.prototype,a),c&&C(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,c}(i.a.Component);F.propTypes={book:l.a.object.isRequired,visible:l.a.bool.isRequired,onCancel:l.a.func.isRequired,formats:l.a.array,exportParams:l.a.object,wrapModal:l.a.bool};t.a=Object(m.b)(F,!0)},176:function(e,t,r){"use strict";r(2752);var n=r(1026);r(358);t.a=n.a},1761:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-statistics",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M32 38c5.43 0 9.848 4.327 9.996 9.72L42 48v130.856c0 12.029 9.654 21.803 21.636 21.997l.364.003h160c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996l-.28.004H64c-22.964 0-41.623-18.43-41.994-41.305l-.006-.695V48c0-5.523 4.477-10 10-10Zm45.803 41.16c5.43 0 9.848 4.327 9.996 9.72l.004.28v81.922c0 5.523-4.477 10-10 10-5.43 0-9.848-4.327-9.996-9.72l-.004-.28V89.16c0-5.523 4.477-10 10-10Zm121.93 28.888c5.429 0 9.847 4.327 9.995 9.72l.004.28v53.034c0 5.523-4.477 10-10 10-5.429 0-9.848-4.327-9.996-9.72l-.004-.28v-53.034c0-5.522 4.477-10 10-10ZM138.767 38c5.429 0 9.848 4.327 9.996 9.72l.004.28v123.082c0 5.523-4.478 10-10 10-5.43 0-9.848-4.327-9.997-9.72l-.003-.28V48c0-5.523 4.477-10 10-10Z",fill:"currentColor",fillRule:"nonzero"}))},1762:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-arrow-left3",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M154.995 58.157c3.834 3.834 3.904 10.007.21 13.927l-.21.215-48.99 48.99c-3.834 3.834-3.904 10.007-.21 13.927l.21.215 48.99 48.99c3.905 3.905 3.905 10.237 0 14.142-3.834 3.834-10.008 3.904-13.927.21l-.215-.21-48.99-48.99c-11.599-11.599-11.715-30.331-.348-42.073l.348-.353 48.99-48.99c3.905-3.905 10.237-3.905 14.142 0Z",fill:"currentColor",fillRule:"nonzero"}))},1777:function(e,t,r){"use strict";var n=r(202);r.d(t,"a",(function(){return n.a})),r.d(t,"c",(function(){return n.c})),r.d(t,"b",(function(){return n.b}))},1789:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-knowledge-base-home",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"m139.26 31.243.36.232 76.656 50.543a21.11 21.11 0 0 1 9.486 17.222l.004.401v96.129c0 17.616-14.138 31.93-31.687 32.215l-.532.004h-34.698c-.1 0-.198-.001-.297-.004-.183.01-.367.015-.552.015-5.43 0-9.848-4.327-9.996-9.72L148 218v-47.755c0-11.2-8.973-20.245-20-20.245-10.913 0-19.813 8.858-19.997 19.896l-.003.349V218c0 5.523-4.477 10-10 10-.185 0-.37-.005-.552-.015h-.017l-.28.004H62.453c-17.616 0-31.93-14.138-32.215-31.686l-.004-.533V99.64a21.11 21.11 0 0 1 9.157-17.4l.333-.223 76.656-50.543a21.11 21.11 0 0 1 22.88-.232ZM127.516 48.1l-.127.072-76.656 50.543a1.11 1.11 0 0 0-.49.788l-.009.138v96.129c0 6.646 5.306 12.053 11.913 12.215l.306.004H88L88 170.245C88 148.036 105.89 130 128 130c21.889 0 39.642 17.677 39.995 39.58l.005.665v37.744h25.547c6.646 0 12.053-5.306 12.215-11.913l.004-.306V99.64a1.11 1.11 0 0 0-.388-.842l-.11-.084-76.657-50.543a1.11 1.11 0 0 0-1.095-.072Z",fill:"currentColor",fillRule:"nonzero"}))},1791:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-directory",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M88 40.8c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996L88 60.8H65.997L66 61v47c0 5.43 4.327 9.848 9.72 9.996L76 118h11c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996L87 138H76c-3.506 0-6.872-.602-10-1.707V186c0 5.43 4.327 9.848 9.72 9.996L76 196h11c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996L87 216H76c-16.403 0-29.731-13.164-29.996-29.504L46 186V61l.002-.2H26c-5.523 0-10-4.477-10-10 0-5.43 4.327-9.848 9.72-9.996L26 40.8h62Zm49.983-.653 92 .353c5.523.021 9.983 4.516 9.962 10.038-.02 5.43-4.365 9.832-9.758 9.96l-.28.002-92-.354c-5.523-.02-9.983-4.515-9.962-10.038.021-5.43 4.365-9.831 9.759-9.959l.28-.002Zm0 78 92 .353c5.523.021 9.983 4.516 9.962 10.038-.02 5.43-4.365 9.832-9.758 9.96l-.28.002-92-.354c-5.523-.02-9.983-4.515-9.962-10.038.021-5.43 4.365-9.831 9.759-9.959l.28-.002Zm0 78 92 .353c5.523.021 9.983 4.516 9.962 10.038-.02 5.43-4.365 9.832-9.758 9.96l-.28.002-92-.354c-5.523-.02-9.983-4.515-9.962-10.038.021-5.43 4.365-9.831 9.759-9.959l.28-.002Z",fill:"currentColor",fillRule:"nonzero"}))},1792:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-sync-error",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M8 11.5A.75.75 0 1 1 8 13a.75.75 0 0 1 0-1.5Zm.003-9a5.002 5.002 0 0 1 4.675 3.23 3.125 3.125 0 0 1-.801 6.145h-.627a.125.125 0 0 1-.125-.125v-.938c0-.068.056-.124.125-.124h.627c.517 0 1.003-.202 1.368-.568.366-.365.568-.853.568-1.37 0-.878-.593-1.648-1.44-1.877l-.59-.156-.216-.57a3.84 3.84 0 0 0-1.377-1.77 3.783 3.783 0 0 0-2.187-.691c-.789 0-1.545.239-2.187.69a3.838 3.838 0 0 0-1.377 1.77l-.217.573-.592.154c-.407.108-.772.35-1.033.683a1.937 1.937 0 0 0 1.527 3.131h.626c.069 0 .125.057.125.126v.937a.125.125 0 0 1-.125.125h-.627a3.124 3.124 0 0 1-.795-6.147A5 5 0 0 1 8.003 2.5ZM8.375 6c.055 0 .102.036.119.086l.006.039v4.25a.125.125 0 0 1-.086.119l-.039.006h-.75a.125.125 0 0 1-.119-.086l-.006-.039v-4.25c0-.055.036-.102.086-.119L7.625 6h.75Z",fill:"#F5222D",fillRule:"nonzero"}))},1805:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-translation",e.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("g",{transform:"translate(55.051 36)"},n.createElement("rect",{stroke:"#20272F",strokeWidth:12,fill:"#F4F5F5",strokeLinecap:"round",strokeLinejoin:"round",y:34,width:77.897,height:49,rx:12}),n.createElement("rect",{fill:"#20272F",x:32.949,width:12,height:116,rx:6})),n.createElement("path",{d:"m145 210 29.346-77.168a4 4 0 0 1 7.477 0L211.17 210h0",stroke:"#7E45E8",strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("rect",{fill:"#7E45E8",x:153,y:178,width:48,height:12,rx:6}),n.createElement("path",{d:"M163 46h10c20.987 0 38 17.013 38 38v10h0M94 210H84c-20.987 0-38-17.013-38-38v-10h0",stroke:"#20272F",strokeWidth:12,strokeLinecap:"round",strokeLinejoin:"round"})))},1809:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 14.625 14.625",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-directory-position",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M7.313 0c.345 0 .625.28.625.625v.783a5.94 5.94 0 0 1 5.28 5.279H14a.625.625 0 1 1 0 1.25l-.783.001a5.94 5.94 0 0 1-5.279 5.28V14a.625.625 0 1 1-1.25 0l-.001-.783a5.94 5.94 0 0 1-5.28-5.279H.626a.625.625 0 1 1 0-1.25l.783-.001a5.94 5.94 0 0 1 5.279-5.28V.626c0-.345.28-.625.625-.625Zm.625 2.666v1.709a.625.625 0 1 1-1.25 0V2.666a4.69 4.69 0 0 0-4.022 4.021h1.709a.625.625 0 1 1 0 1.25H2.666a4.69 4.69 0 0 0 4.021 4.022V10.25a.625.625 0 1 1 1.25 0v1.709a4.69 4.69 0 0 0 4.022-4.021H10.25a.625.625 0 1 1 0-1.25h1.709a4.69 4.69 0 0 0-4.021-4.022Z",fill:"currentColor",fillRule:"nonzero"}))},1810:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-catalog-expand",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M74.382 40.5H24.618a8.333 8.333 0 0 0-5.892 14.226l24.881 24.881a8.333 8.333 0 0 0 11.786 0l24.881-24.881A8.333 8.333 0 0 0 74.382 40.5Zm0 134H24.618a8.333 8.333 0 0 0-5.892 14.226l24.881 24.881a8.333 8.333 0 0 0 11.786 0l24.881-24.881a8.333 8.333 0 0 0-5.892-14.226ZM125 41h105c5.523 0 10 4.477 10 10s-4.477 10-10 10H125c-5.523 0-10-4.477-10-10s4.477-10 10-10Zm0 77h105c5.523 0 10 4.477 10 10s-4.477 10-10 10H125c-5.523 0-10-4.477-10-10s4.477-10 10-10Zm0 78h105c5.523 0 10 4.477 10 10s-4.477 10-10 10H125c-5.523 0-10-4.477-10-10s4.477-10 10-10Z",fill:"currentColor",fillRule:"evenodd"}))},1811:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-catalog-fold",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M26 41h204c5.523 0 10 4.477 10 10s-4.477 10-10 10H26c-5.523 0-10-4.477-10-10s4.477-10 10-10Zm0 155h204c5.523 0 10 4.477 10 10s-4.477 10-10 10H26c-5.523 0-10-4.477-10-10s4.477-10 10-10Zm93-78h111c5.523 0 10 4.477 10 10s-4.477 10-10 10H119c-5.523 0-10-4.477-10-10s4.477-10 10-10ZM16.4 103.318v49.764a8.333 8.333 0 0 0 14.226 5.892l24.881-24.881a8.333 8.333 0 0 0 0-11.786L30.626 97.426a8.333 8.333 0 0 0-14.226 5.892Z",fill:"currentColor",fillRule:"evenodd"}))},1812:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e,{className:["larkui-icon","larkui-icon-yuque",e.className].filter(Boolean).join(" ")}),n.createElement("defs",null,n.createElement("radialGradient",{cx:"60.212%",cy:"64.196%",fx:"60.212%",fy:"64.196%",r:"51.003%",gradientTransform:"scale(.85248 1) rotate(-68.415 .654 .565)",id:"165724840e"},n.createElement("stop",{stopColor:"#57CB86",offset:"0%"}),n.createElement("stop",{stopColor:"#FFF",stopOpacity:.8,offset:"100%"})),n.createElement("linearGradient",{x1:"82.746%",y1:"0%",x2:"20.277%",y2:"79.406%",id:"165724840b"},n.createElement("stop",{stopColor:"#7BD26A",offset:"0%"}),n.createElement("stop",{stopColor:"#07B26A",offset:"100%"})),n.createElement("rect",{id:"165724840a",x:0,y:0,width:26,height:26,rx:6.24}),n.createElement("path",{d:"M9.855 0h.269l.068.001h.07l.07.002h.071l.049.001h.049l.074.002.076.002.076.001.052.001.079.002.08.002.08.003.055.001.082.003.084.003.056.002.057.002.058.002.057.002.059.002.058.003.09.004.06.002.09.005.06.003.062.003.093.005.063.003.063.003.063.004.064.004.064.004.065.004.065.004.065.004.066.004.066.005c2.38.162 3.01 1.87 3.078 2.074l.003.011.003.01 1.033.055a.1.1 0 0 1 .044.19c-1.06.571-1.385 1.733-1.194 2.49.061.244.156.454.263.676l.067.14c.246.512.521 1.132.567 2.38.1 2.796-2.365 5.308-5.282 5.308H10.97l-.134.001h-.097l-.103.002h-.164l-.177.002-.19.002-.274.003-.22.002-.396.004-.43.005-.468.006-.297.003-.417.005-.553.007-.588.008-.497.007-.788.01-.553.008-1.025.014-1.094.016-.994.014-.516.008 6.238-7.07.057-.064.056-.064.056-.064.278-.314.055-.062.055-.062.054-.062.027-.03.054-.062.027-.03.054-.062.053-.061c.619-.715 1.17-1.412 1.561-2.212.435-1.224-.007-2.136-.459-2.69A3.31 3.31 0 0 0 9.057.53C8.903.333 9.007.005 9.3.005h.073L9.43.002h.093L9.58 0H9.793L9.855 0Z",id:"165724840d"})),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("mask",{id:"165724840c",fill:"#fff"},n.createElement("use",{xlinkHref:"#165724840a"})),n.createElement("use",{fill:"url(#165724840b)",xlinkHref:"#165724840a"}),n.createElement("g",{mask:"url(#165724840c)"},n.createElement("g",{transform:"translate(3.77 5.46)"},n.createElement("use",{fill:"#E5FBEF",xlinkHref:"#165724840d"}),n.createElement("use",{fillOpacity:.3,fill:"url(#165724840e)",xlinkHref:"#165724840d"})),n.createElement("path",{d:"M11.003 11.95c-2.7 3.027-5.913 6.711-7.133 8.095-.235.267-.007.518.175.55 9.1 1.559 11.989-2.715 12.632-4.669.881-2.673-.363-3.977-1.067-4.402-2.388-1.443-4.16-.077-4.607.425Z",fill:"#FAFFFC"}))))},1813:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-outline",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"m95.029 50.146 123 .354c5.523.016 9.987 4.506 9.971 10.029-.016 5.429-4.355 9.835-9.749 9.968l-.28.003-123-.354c-5.523-.015-9.987-4.505-9.971-10.028.016-5.43 4.355-9.836 9.749-9.968l.28-.004Zm0 69 123 .354c5.523.016 9.987 4.506 9.971 10.029-.016 5.429-4.355 9.835-9.749 9.968l-.28.003-123-.354c-5.523-.015-9.987-4.505-9.971-10.028.016-5.43 4.355-9.836 9.749-9.968l.28-.004Zm0 68 123 .354c5.523.016 9.987 4.506 9.971 10.029-.016 5.429-4.355 9.835-9.749 9.968l-.28.003-123-.354c-5.523-.015-9.987-4.505-9.971-10.028.016-5.43 4.355-9.836 9.749-9.968l.28-.004ZM44 75c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15Zm0 69c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15Zm0 68c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15Z",fill:"currentColor",fillRule:"nonzero"}))},1814:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-nav-invite",e.className].filter(Boolean).join(" ")}),n.createElement("path",{d:"M128 129c5.523 0 10 4.477 10 10s-4.477 10-10 10c-24.125 0-45.174 6.043-60.525 16.179-12.362 8.162-19.354 18.06-19.54 25.146l-.007.911-.001.397.005.747c.034 2.031.212 3.378.664 4.658.4 1.136.947 1.914 1.804 2.514l.203.135.294.186.28.207c.604.443 1.371.869 2.296 1.275l.475.201.501.198.527.195.274.096.565.19.591.187.305.092.628.181.654.178.678.175.703.171.726.168.751.164.775.16 1.207.235 1.26.226.869.147.891.142.915.14.937.134 1.447.196.993.126 1.015.122 1.563.176 1.61.167 1.101.107 1.69.153 1.153.096 1.173.093 1.798.132 1.842.122 1.888.113 1.93.104 1.312.064 1.33.06 2.031.082 2.073.073 1.886.057 2.338.061 3.948.08 1.803.027 3.794.04 3.624.02 5.876.008 9.344-.013L128 207c5.523 0 10 4.477 10 10 0 5.43-4.327 9.848-9.72 9.996l-.453.004-11.598.014-6.434-.014-3.11-.02-3.85-.043-2.294-.037-1.806-.036-2.476-.06-2.515-.07-2.478-.082-1.62-.061-1.598-.065-1.574-.071-1.55-.076-1.526-.08-2.244-.133-1.467-.095-1.444-.1-2.122-.163-1.386-.115-1.362-.122-1.34-.129-1.316-.134-1.293-.142-1.271-.148-1.248-.155-1.226-.162-1.202-.169-1.18-.176-1.159-.184-1.135-.19-1.114-.2c-.367-.067-.731-.136-1.091-.206l-1.07-.214a89.329 89.329 0 0 1-2.072-.453l-1.004-.238c-.33-.081-.658-.164-.981-.247l-.96-.256c-.317-.086-.63-.175-.94-.264l-.916-.273a55.46 55.46 0 0 1-2.623-.872l-.832-.309c-2.875-1.098-5.363-2.368-7.478-3.835l-.338-.238-.13-.084c-4.586-3.038-7.72-7.229-9.547-12.126l-.172-.476c-1.443-4.088-1.807-7.435-1.809-11.98l.004-1.096c0-14.848 10.912-30.497 28.525-42.126C75.15 136.145 100.04 129 128 129Zm58-12c5.523 0 10 4.477 10 10v35h35c5.523 0 10 4.477 10 10s-4.477 10-10 10h-35v35c0 5.523-4.477 10-10 10s-10-4.477-10-10v-35h-35c-5.523 0-10-4.477-10-10s4.477-10 10-10h35v-35c0-5.523 4.477-10 10-10Zm-58-93c25.405 0 46 20.595 46 46s-20.595 46-46 46-46-20.595-46-46 20.595-46 46-46Zm0 20c-14.36 0-26 11.64-26 26s11.64 26 26 26 26-11.64 26-26-11.64-26-26-26Z",fill:"currentColor",fillRule:"nonzero"}))},1818:function(e,t,r){"use strict";r.r(t);var n=r(0);t.default=e=>n.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg"},e,{className:["larkui-icon","larkui-icon-box",e.className].filter(Boolean).join(" ")}),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{fill:"#7AA3E5",d:"M0 0h256v256H0z"}),n.createElement("g",{fill:"#FFF"},n.createElement("path",{d:"m136.254 51.918 56.948 27.03a7.25 7.25 0 0 1 0 13.099l-57.247 27.177a18.9 18.9 0 0 1-15.963.115l-57.098-26.1a7.25 7.25 0 0 1-.187-13.1l57.096-28.104a18.9 18.9 0 0 1 16.45-.117ZM141.16 128.073l52.389-25.071A7.3 7.3 0 0 1 204 109.586v59.975a12.6 12.6 0 0 1-7.16 11.366l-52.389 25.071A7.3 7.3 0 0 1 134 199.414v-59.975a12.6 12.6 0 0 1 7.16-11.366ZM115.706 129.114l-52.332-24.297A7.3 7.3 0 0 0 53 111.437v59.124a12.6 12.6 0 0 0 7.16 11.366l52.389 25.071A7.3 7.3 0 0 0 123 200.414v-59.872a12.6 12.6 0 0 0-7.294-11.428Z"}))))},263:function(e,t,r){"use strict";r(2770);var n=r(942);r(851);t.a=n.a},2734:function(e,t,r){"use strict";r(59);var n=r(30),o=(r(37),r(8)),a=(r(219),r(53)),i=(r(57),r(13)),c=r(0),l=r.n(c),u=r(2),s=r.n(u),f={content:"index-module_content_v7lvp",form:"index-module_form_5k71F",tip:"index-module_tip_yNrai"};function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function h(e,t,r){return t=y(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],y(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function b(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}var w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return b(e=h(this,t,[].concat(n)),"handleOnOk",(function(t){t.preventDefault();var r=e.props,n=r.form,o=r.slug,a=n.validateFields,i=n.setFields,c=n.resetFields;a((function(t,r){t||(r.slug===o?(c(),e.props.onOk(r)):i({slug:{value:r.slug,errors:[__("输入的路径名称错误, 请重新输入")]}}))}))})),b(e,"handleOnCancel",(function(){var t=e.props.form.resetFields;e.props.onCancel(),t()})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),r=t,(c=[{key:"render",value:function(){var e=this.props,t=e.visible,r=e.title,c=e.content,u=e.buttonText,s=e.slug,d=this.props.form,p=d.getFieldDecorator,h=d.getFieldError;return l.a.createElement(n.a,{title:r,footer:null,visible:t,onCancel:this.handleOnCancel,destroyOnClose:!0},c&&l.a.createElement("div",{className:f.content},c),l.a.createElement(a.a,{onSubmit:this.handleOnOk,className:f.form},l.a.createElement("div",{className:f.tip},__('请在下方输入框中输入 "{login}" 以确认操作',{login:l.a.createElement("span",{className:f.slug},s)})),l.a.createElement(a.a.Item,{hasFeedback:!0,validateStatus:h("slug")?"error":null,help:h("slug")?(h("slug")||[]).join(", "):""},p("slug",{initialValue:"",rules:[{type:"string",required:!0,message:__("请按提示输入")}]})(l.a.createElement(i.a,{type:"text",autoComplete:"off",maxLength:200,placeholder:s}))),l.a.createElement(a.a.Item,null,l.a.createElement(o.a,{"data-testid":"btn-submit",type:"danger",style:{width:"100%"},htmlType:"submit"},l.a.createElement("span",{style:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},u||__("确定"))))))}}])&&p(r.prototype,c),u&&p(r,u),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,c,u}(c.PureComponent);w.propTypes={visible:s.a.bool.isRequired,title:s.a.node.isRequired,content:s.a.node,buttonText:s.a.node,slug:s.a.string.isRequired,onOk:s.a.func.isRequired,onCancel:s.a.func.isRequired};t.a=a.a.create()(w)},2762:function(e,t,r){"use strict";var n=r(365),o=r(425),a=r(85),i=r(146),c=r(329),l=r(32),u=r(2787),s=r(124),f=r(128);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(){p=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",b={};function g(){}function w(){}function _(){}var E={};u(E,i,(function(){return this}));var O=Object.getPrototypeOf,A=O&&O(O(L([])));A&&A!==r&&n.call(A,i)&&(E=A);var S=_.prototype=g.prototype=Object.create(E);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==d(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=h;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?v:m,u.arg===b)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(d(t)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=u(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){v(a,n,o,i,c,"next",e)}function c(e){v(a,n,o,i,c,"throw",e)}i(void 0)}))}}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return w(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _={limitExceeded:function(e){return e&&e.length>=a.MAX_NODES_COUNT},shouldShowToc:function(e){return!!e&&"Book"===e.layout},shouldShowColumnToc:function(e){return!!e&&"Column"===e.layout},parseCatalogVersions:function(e){if(!e)return[];var t,r=[],o=g(e);try{for(o.s();!(t=o.n()).done;){var a=t.value,i=a.item.toc_yml;if(i)try{var c=Object(n.ymlToToc)(i),l=c[0];l&&l.published&&(a.meta=c[0],a.toc=c.slice(1),a.catalog_tree=Object(n.generateTreeFromYml)(i),r.push(a))}catch(e){}}}catch(e){o.e(e)}finally{o.f()}return r},parseVersion:function(e){if(e){try{var t,r=null===(t=e.item)||void 0===t?void 0:t.toc_yml;if(!r)return;var o,a=Object(n.ymlToToc)(r),i=g(a);try{for(i.s();!(o=i.n()).done;){var c=o.value;c.key=c.uuid}}catch(e){i.e(e)}finally{i.f()}var l=a[0];l?(e.meta=l,e.toc=a.slice(1)):e.toc=a,e.catalog_tree=Object(n.generateTreeByTocItems)(e.toc)}catch(e){console.error(e)}return e}},updateNode:function(e){var t=arguments,r=this;return b(p().mark((function o(){var i,c,l;return p().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(i=t.length>1&&void 0!==t[1]?t[1]:{},c=t.length>2&&void 0!==t[2]?t[2]:{catalog_tree:!0},e){o.next=4;break}return o.abrupt("return");case 4:if(!e.should_manually_create_uid){o.next=8;break}return o.next=7,s.webProxy.catalogNodes.ensureUpdateTocYml({book_id:e.id,toc_yml:Object(n.tocToYml)(e.toc)});case 7:e.should_manually_create_uid=!1;case 8:return o.prev=8,o.next=11,s.webProxy.catalogNodes.update(m({book_id:e.id,format:"list"},i),{ignoreGlobalMessage:!0,useOriginResp:!0});case 11:l=o.sent,o.next=18;break;case 14:throw o.prev=14,o.t0=o.catch(8),"limit_exceeded"===o.t0.code&&(o.t0.message=__("目录节点数超过最大限制 {MAX_NODES_COUNT}，无法新增",{MAX_NODES_COUNT:a.MAX_NODES_COUNT})),o.t0;case 18:return o.abrupt("return",r._returnWithCatalogTree(m(m({},l.meta),{},{toc:l.data}),c));case 19:case"end":return o.stop()}}),o,null,[[8,14]])})))()},_returnWithCatalogTree:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).catalog_tree&&e.toc&&(e.catalog_tree=Object(n.generateTreeByTocItems)(e.toc)),e},getCatalogNodes:function(e){var t=arguments;return b(p().mark((function r(){var o,a;return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:{},e){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,s.webProxy.catalogNodes.find(m({book_id:e},o),{useOriginResp:!0});case 5:return a=r.sent,r.abrupt("return",m({catalog_tree:Object(n.generateTreeByTocItems)(a.data),toc:a.data},a.meta));case 7:case"end":return r.stop()}}),r)})))()},actionsInReaderPage:function(e,t){var r=[];return e.type!==a.TYPES.link?r.push(f.a.CATALOG.rename):r.push(f.a.CATALOG.edit_link),t.create_doc&&(e.type!==a.TYPES.doc||l.c||r.push(f.a.DOC.edit)),e.type!==a.TYPES.title&&e.type!==a.TYPES.uncreated_doc&&r.push(f.a.DOC.copyLink),e.type!==a.TYPES.doc||l.c||r.push(f.a.DOC.open_in_new_tab),e.type===a.TYPES.doc&&t.create_doc&&l.c&&r.push(f.a.DOC.open_in_new_window),t.create_doc&&(r.push(f.a.DOC.divide),r.push(f.a.CATALOG.remove),r.push(f.a.DOC.divide),r.push(f.a.CATALOG.copy),r.push(f.a.CATALOG.move)),t.export_doc&&e.type===a.TYPES.doc&&r.push(f.a.CATALOG.export),t.create_doc&&(r.push(f.a.DOC.divide),r.push(f.a.CATALOG.destroy)),r},actionsForEdit:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[];return"desktop"===t?(n.push(f.a.CATALOG.move),n):(e.type===a.TYPES.link?n.push(f.a.CATALOG.edit_link):n.push(f.a.CATALOG.rename),"lite"===t?this.actionsInReaderPage(e,r):("full"===t&&(e.type===a.TYPES.doc&&(n.push(f.a.CATALOG.view_doc),n.push(f.a.CATALOG.remove),n.push(f.a.DOC.edit)),n.push(f.a.CATALOG.copy),n.push(f.a.CATALOG.move),r.export_doc&&e.type===a.TYPES.doc&&n.push(f.a.CATALOG.export),e.share&&e.share.status===c.STATUS.active&&(n.push(f.a.DOC.divide),n.push(f.a.DOC.unshare)),n.push(f.a.DOC.divide),n.push(f.a.CATALOG.destroy)),n))},formatNode:function(e){return{type:e.type||i.TOC_TYPES.DOC,title:e.title,uuid:e.uuid||Object(o.nanoid)(16),url:e.url||null,prev_uuid:e.prev_uuid||null,sibling_uuid:e.sibling_uuid||null,child_uuid:e.child_uuid||null,parent_uuid:e.parent_uuid||null,doc_id:e.doc_id||null,level:e.level||0,id:e.doc_id||null,open_window:0===e.open_window?0:1,visible:0===e.visible?0:1}},insertNodeToCatalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{catalog_tree:!0},n=_.formatNode(t),o=t.target_uuid,a=t.action,i=e.findIndex((function(e){return e.uuid===o}));if(i>=0){var c=e[i];n.level="insertSibling"===a?c.level:c.level+1,e.splice(i+1,0,n)}else e.unshift(n);return this._returnWithCatalogTree({toc:e,node_uuid:n.uuid},r)},getRedirectURL:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.group,o=r.book,a=r.currentItem,i=e.filter((function(e){return"DOC"===e.type&&e.id}));if(!a)return i&&i[0]?"/".concat(n.login,"/").concat(o.slug,"/").concat(i[0].url):"";var c,s=i.findIndex((function(e){return e.url&&e.url===a.url}));return i=t.filter((function(e){return"DOC"===e.type&&e.id})),s<0?c=i[0]:(c=i[s]||null)||(c=i[s-1]||null),c?"/".concat(n.login,"/").concat(o.slug,"/").concat(c.url):(l.c&&Object(u.a)("remove","".concat(n.login,"/").concat(o.slug)),"")}};t.a=_},2777:function(e,t,r){"use strict";var n=r(0),o=r(2),a=r(3053);function i(){}i.prototype=Object.create(n.Component.prototype),i.displayName="DocumentTitle",i.propTypes={title:o.string.isRequired},i.prototype.render=function(){return this.props.children?n.Children.only(this.props.children):null},e.exports=a((function(e){var t=e[e.length-1];if(t)return t.title}),(function(e){var t=e||"";t!==document.title&&(document.title=t)}))(i)},2787:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(184);function o(e,t,r){if("get"===e)try{return n.a.get("bookLastDoc-".concat(t))}catch(e){return console.error(e),null}if("save"===e)try{n.a.set("bookLastDoc-".concat(t),r),n.a.set("bookLast",t)}catch(e){console.error(e)}if("remove"===e)try{n.a.get("bookLastDoc-".concat(t))&&n.a.remove("bookLastDoc-".concat(t))}catch(e){console.error(e)}}},2807:function(e,t,r){var n,o,a;o=[],n=function e(){"use strict";var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},r=!t.document&&!!t.postMessage,n=t.IS_PAPA_WORKER||!1,o={},a=0,i={parse:function(r,n){var c=(n=n||{}).dynamicTyping||!1;if(_(c)&&(n.dynamicTypingFunction=c,c={}),n.dynamicTyping=c,n.transform=!!_(n.transform)&&n.transform,n.worker&&i.WORKERS_SUPPORTED){var l=function(){if(!i.WORKERS_SUPPORTED)return!1;var r,n,c=(r=t.URL||t.webkitURL||null,n=e.toString(),i.BLOB_URL||(i.BLOB_URL=r.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",n,")();"],{type:"text/javascript"})))),l=new t.Worker(c);return l.onmessage=y,l.id=a++,o[l.id]=l}();return l.userStep=n.step,l.userChunk=n.chunk,l.userComplete=n.complete,l.userError=n.error,n.step=_(n.step),n.chunk=_(n.chunk),n.complete=_(n.complete),n.error=_(n.error),delete n.worker,void l.postMessage({input:r,config:n,workerId:l.id})}var p=null;return i.NODE_STREAM_INPUT,"string"==typeof r?(r=function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}(r),p=n.download?new u(n):new f(n)):!0===r.readable&&_(r.read)&&_(r.on)?p=new d(n):(t.File&&r instanceof File||r instanceof Object)&&(p=new s(n)),p.stream(r)},unparse:function(e,t){var r=!1,n=!0,o=",",a="\r\n",c='"',l=c+c,u=!1,s=null,f=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||i.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(o=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(r=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(u=t.skipEmptyLines),"string"==typeof t.newline&&(a=t.newline),"string"==typeof t.quoteChar&&(c=t.quoteChar),"boolean"==typeof t.header&&(n=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");s=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+c),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(f=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var d=new RegExp(h(c),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return p(null,e,u);if("object"==typeof e[0])return p(s||Object.keys(e[0]),e,u)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||s),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),p(e.fields||[],e.data||[],u);throw new Error("Unable to serialize unrecognized input");function p(e,t,r){var i="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var c=Array.isArray(e)&&0<e.length,l=!Array.isArray(t[0]);if(c&&n){for(var u=0;u<e.length;u++)0<u&&(i+=o),i+=m(e[u],u);0<t.length&&(i+=a)}for(var s=0;s<t.length;s++){var f=c?e.length:t[s].length,d=!1,p=c?0===Object.keys(t[s]).length:0===t[s].length;if(r&&!c&&(d="greedy"===r?""===t[s].join("").trim():1===t[s].length&&0===t[s][0].length),"greedy"===r&&c){for(var h=[],y=0;y<f;y++){var v=l?e[y]:y;h.push(t[s][v])}d=""===h.join("").trim()}if(!d){for(var b=0;b<f;b++){0<b&&!p&&(i+=o);var g=c&&l?e[b]:b;i+=m(t[s][g],b)}s<t.length-1&&(!r||0<f&&!p)&&(i+=a)}}return i}function m(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var n=!1;f&&"string"==typeof e&&f.test(e)&&(e="'"+e,n=!0);var a=e.toString().replace(d,l);return(n=n||!0===r||"function"==typeof r&&r(e,t)||Array.isArray(r)&&r[t]||function(e,t){for(var r=0;r<t.length;r++)if(-1<e.indexOf(t[r]))return!0;return!1}(a,i.BAD_DELIMITERS)||-1<a.indexOf(o)||" "===a.charAt(0)||" "===a.charAt(a.length-1))?c+a+c:a}}};if(i.RECORD_SEP=String.fromCharCode(30),i.UNIT_SEP=String.fromCharCode(31),i.BYTE_ORDER_MARK="\ufeff",i.BAD_DELIMITERS=["\r","\n",'"',i.BYTE_ORDER_MARK],i.WORKERS_SUPPORTED=!r&&!!t.Worker,i.NODE_STREAM_INPUT=1,i.LocalChunkSize=10485760,i.RemoteChunkSize=5242880,i.DefaultDelimiter=",",i.Parser=m,i.ParserHandle=p,i.NetworkStreamer=u,i.FileStreamer=s,i.StringStreamer=f,i.ReadableStreamStreamer=d,t.jQuery){var c=t.jQuery;c.fn.parse=function(e){var r=e.config||{},n=[];return this.each((function(e){if("INPUT"!==c(this).prop("tagName").toUpperCase()||"file"!==c(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var o=0;o<this.files.length;o++)n.push({file:this.files[o],inputElem:this,instanceConfig:c.extend({},r)})})),o(),this;function o(){if(0!==n.length){var t,r,o,l,u=n[0];if(_(e.before)){var s=e.before(u.file,u.inputElem);if("object"==typeof s){if("abort"===s.action)return t="AbortError",r=u.file,o=u.inputElem,l=s.reason,void(_(e.error)&&e.error({name:t},r,o,l));if("skip"===s.action)return void a();"object"==typeof s.config&&(u.instanceConfig=c.extend(u.instanceConfig,s.config))}else if("skip"===s)return void a()}var f=u.instanceConfig.complete;u.instanceConfig.complete=function(e){_(f)&&f(e,u.file,u.inputElem),a()},i.parse(u.file,u.instanceConfig)}else _(e.complete)&&e.complete()}function a(){n.splice(0,1),o()}}}function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=g(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new p(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,r){if(this.isFirstChunk&&_(this._config.beforeFirstChunk)){var o=this._config.beforeFirstChunk(e);void 0!==o&&(e=o)}this.isFirstChunk=!1,this._halted=!1;var a=this._partialLine+e;this._partialLine="";var c=this._handle.parse(a,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=c.meta.cursor;this._finished||(this._partialLine=a.substring(l-this._baseIndex),this._baseIndex=l),c&&c.data&&(this._rowCount+=c.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)t.postMessage({results:c,workerId:i.WORKER_ID,finished:u});else if(_(this._config.chunk)&&!r){if(this._config.chunk(c,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);c=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(c.data),this._completeResults.errors=this._completeResults.errors.concat(c.errors),this._completeResults.meta=c.meta),this._completed||!u||!_(this._config.complete)||c&&c.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||c&&c.meta.paused||this._nextChunk(),c}this._halted=!0},this._sendError=function(e){_(this._config.error)?this._config.error(e):n&&this._config.error&&t.postMessage({workerId:i.WORKER_ID,error:e,finished:!1})}}function u(e){var t;(e=e||{}).chunkSize||(e.chunkSize=i.RemoteChunkSize),l.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var n in e)t.setRequestHeader(n,e[n])}if(this._config.chunkSize){var o=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+o)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){var r=t.statusText||e;this._sendError(new Error(r))}}function s(e){var t,r;(e=e||{}).chunkSize||(e.chunkSize=i.LocalChunkSize),l.call(this,e);var n="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((t=new FileReader).onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var o=Math.min(this._start+this._config.chunkSize,this._input.size);e=r.call(e,this._start,o)}var a=t.readAsText(e,this._config.encoding);n||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function f(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,r=this._config.chunkSize;return r?(e=t.substring(0,r),t=t.substring(r)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function d(e){l.call(this,e=e||{});var t=[],r=!0,n=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=w((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=w((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=w((function(){this._streamCleanUp(),n=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function p(e){var t,r,n,o=Math.pow(2,53),a=-o,c=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,u=this,s=0,f=0,d=!1,p=!1,y=[],v={data:[],errors:[],meta:{}};if(_(e.step)){var b=e.step;e.step=function(t){if(v=t,O())E();else{if(E(),0===v.data.length)return;s+=t.data.length,e.preview&&s>e.preview?r.abort():(v.data=v.data[0],b(v,u))}}}function w(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function E(){return v&&n&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+i.DefaultDelimiter+"'"),n=!1),e.skipEmptyLines&&(v.data=v.data.filter((function(e){return!w(e)}))),O()&&function(){if(v)if(Array.isArray(v.data[0])){for(var t=0;O()&&t<v.data.length;t++)v.data[t].forEach(r);v.data.splice(0,1)}else v.data.forEach(r);function r(t,r){_(e.transformHeader)&&(t=e.transformHeader(t,r)),y.push(t)}}(),function(){if(!v||!e.header&&!e.dynamicTyping&&!e.transform)return v;function t(t,r){var n,o=e.header?{}:[];for(n=0;n<t.length;n++){var a=n,i=t[n];e.header&&(a=n>=y.length?"__parsed_extra":y[n]),e.transform&&(i=e.transform(i,a)),i=A(a,i),"__parsed_extra"===a?(o[a]=o[a]||[],o[a].push(i)):o[a]=i}return e.header&&(n>y.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+n,f+r):n<y.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+n,f+r)),o}var r=1;return!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(t),r=v.data.length):v.data=t(v.data,0),e.header&&v.meta&&(v.meta.fields=y),f+=r,v}()}function O(){return e.header&&0===y.length}function A(t,r){return n=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[n]&&(e.dynamicTyping[n]=e.dynamicTypingFunction(n)),!0===(e.dynamicTyping[n]||e.dynamicTyping)?"true"===r||"TRUE"===r||"false"!==r&&"FALSE"!==r&&(function(e){if(c.test(e)){var t=parseFloat(e);if(a<t&&t<o)return!0}return!1}(r)?parseFloat(r):l.test(r)?new Date(r):""===r?null:r):r;var n}function S(e,t,r,n){var o={type:e,code:t,message:r};void 0!==n&&(o.row=n),v.errors.push(o)}this.parse=function(o,a,c){var l=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var r=new RegExp(h(t)+"([^]*?)"+h(t),"gm"),n=(e=e.replace(r,"")).split("\r"),o=e.split("\n"),a=1<o.length&&o[0].length<n[0].length;if(1===n.length||a)return"\n";for(var i=0,c=0;c<n.length;c++)"\n"===n[c][0]&&i++;return i>=n.length/2?"\r\n":"\r"}(o,l)),n=!1,e.delimiter)_(e.delimiter)&&(e.delimiter=e.delimiter(o),v.meta.delimiter=e.delimiter);else{var u=function(t,r,n,o,a){var c,l,u,s;a=a||[",","\t","|",";",i.RECORD_SEP,i.UNIT_SEP];for(var f=0;f<a.length;f++){var d=a[f],p=0,h=0,y=0;u=void 0;for(var v=new m({comments:o,delimiter:d,newline:r,preview:10}).parse(t),b=0;b<v.data.length;b++)if(n&&w(v.data[b]))y++;else{var g=v.data[b].length;h+=g,void 0!==u?0<g&&(p+=Math.abs(g-u),u=g):u=g}0<v.data.length&&(h/=v.data.length-y),(void 0===l||p<=l)&&(void 0===s||s<h)&&1.99<h&&(l=p,c=d,s=h)}return{successful:!!(e.delimiter=c),bestDelimiter:c}}(o,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);u.successful?e.delimiter=u.bestDelimiter:(n=!0,e.delimiter=i.DefaultDelimiter),v.meta.delimiter=e.delimiter}var s=g(e);return e.preview&&e.header&&s.preview++,t=o,r=new m(s),v=r.parse(t,a,c),E(),d?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,r.abort(),t=_(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){u.streamer._halted?(d=!1,u.streamer.parseChunk(t,!0)):setTimeout(u.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,r.abort(),v.meta.aborted=!0,_(e.complete)&&e.complete(v),t=""}}function h(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t,r=(e=e||{}).delimiter,n=e.newline,o=e.comments,a=e.step,c=e.preview,l=e.fastMode,u=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(u=e.escapeChar),("string"!=typeof r||-1<i.BAD_DELIMITERS.indexOf(r))&&(r=","),o===r)throw new Error("Comment character same as delimiter");!0===o?o="#":("string"!=typeof o||-1<i.BAD_DELIMITERS.indexOf(o))&&(o=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var s=0,f=!1;this.parse=function(i,d,p){if("string"!=typeof i)throw new Error("Input must be a string");var m=i.length,y=r.length,v=n.length,b=o.length,g=_(a),w=[],E=[],O=[],A=s=0;if(!i)return H();if(e.header&&!d){var S=i.split(n)[0].split(r),k=[],x={},j=!1;for(var P in S){var C=S[P];_(e.transformHeader)&&(C=e.transformHeader(C,P));var I=C,T=x[C]||0;for(0<T&&(j=!0,I=C+"_"+T),x[C]=T+1;k.includes(I);)I=I+"_"+T;k.push(I)}if(j){var L=i.split(n);L[0]=k.join(r),i=L.join(n)}}if(l||!1!==l&&-1===i.indexOf(t)){for(var D=i.split(n),N=0;N<D.length;N++){if(O=D[N],s+=O.length,N!==D.length-1)s+=n.length;else if(p)return H();if(!o||O.substring(0,b)!==o){if(g){if(w=[],G(O.split(r)),K(),f)return H()}else G(O.split(r));if(c&&c<=N)return w=w.slice(0,c),H(!0)}}return H()}for(var R=i.indexOf(r,s),M=i.indexOf(n,s),F=new RegExp(h(u)+h(t),"g"),B=i.indexOf(t,s);;)if(i[s]!==t)if(o&&0===O.length&&i.substring(s,s+b)===o){if(-1===M)return H();s=M+v,M=i.indexOf(n,s),R=i.indexOf(r,s)}else if(-1!==R&&(R<M||-1===M))O.push(i.substring(s,R)),s=R+y,R=i.indexOf(r,s);else{if(-1===M)break;if(O.push(i.substring(s,M)),V(M+v),g&&(K(),f))return H();if(c&&w.length>=c)return H(!0)}else for(B=s,s++;;){if(-1===(B=i.indexOf(t,B+1)))return p||E.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:s}),W();if(B===m-1)return W(i.substring(s,B).replace(F,t));if(t!==u||i[B+1]!==u){if(t===u||0===B||i[B-1]!==u){-1!==R&&R<B+1&&(R=i.indexOf(r,B+1)),-1!==M&&M<B+1&&(M=i.indexOf(n,B+1));var q=U(-1===M?R:Math.min(R,M));if(i.substr(B+1+q,y)===r){O.push(i.substring(s,B).replace(F,t)),i[s=B+1+q+y]!==t&&(B=i.indexOf(t,s)),R=i.indexOf(r,s),M=i.indexOf(n,s);break}var z=U(M);if(i.substring(B+1+z,B+1+z+v)===n){if(O.push(i.substring(s,B).replace(F,t)),V(B+1+z+v),R=i.indexOf(r,s),B=i.indexOf(t,s),g&&(K(),f))return H();if(c&&w.length>=c)return H(!0);break}E.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:w.length,index:s}),B++}}else B++}return W();function G(e){w.push(e),A=s}function U(e){var t=0;if(-1!==e){var r=i.substring(B+1,e);r&&""===r.trim()&&(t=r.length)}return t}function W(e){return p||(void 0===e&&(e=i.substring(s)),O.push(e),s=m,G(O),g&&K()),H()}function V(e){s=e,G(O),O=[],M=i.indexOf(n,s)}function H(e){return{data:w,errors:E,meta:{delimiter:r,linebreak:n,aborted:f,truncated:!!e,cursor:A+(d||0)}}}function K(){a(H()),w=[],E=[]}},this.abort=function(){f=!0},this.getCharIndex=function(){return s}}function y(e){var t=e.data,r=o[t.workerId],n=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var a={abort:function(){n=!0,v(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(_(r.userStep)){for(var i=0;i<t.results.data.length&&(r.userStep({data:t.results.data[i],errors:t.results.errors,meta:t.results.meta},a),!n);i++);delete t.results}else _(r.userChunk)&&(r.userChunk(t.results,a,t.file),delete t.results)}t.finished&&!n&&v(t.workerId,t.results)}function v(e,t){var r=o[e];_(r.userComplete)&&r.userComplete(t),r.terminate(),delete o[e]}function b(){throw new Error("Not implemented.")}function g(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=g(e[r]);return t}function w(e,t){return function(){e.apply(t,arguments)}}function _(e){return"function"==typeof e}return n&&(t.onmessage=function(e){var r=e.data;if(void 0===i.WORKER_ID&&r&&(i.WORKER_ID=r.workerId),"string"==typeof r.input)t.postMessage({workerId:i.WORKER_ID,results:i.parse(r.input,r.config),finished:!0});else if(t.File&&r.input instanceof File||r.input instanceof Object){var n=i.parse(r.input,r.config);n&&t.postMessage({workerId:i.WORKER_ID,results:n,finished:!0})}}),(u.prototype=Object.create(l.prototype)).constructor=u,(s.prototype=Object.create(l.prototype)).constructor=s,(f.prototype=Object.create(f.prototype)).constructor=f,(d.prototype=Object.create(l.prototype)).constructor=d,i},void 0===(a="function"==typeof n?n.apply(t,o):n)||(e.exports=a)},294:function(e,t,r){"use strict";var n=r(61),o=r.n(n),a=(r(931),r(251)),i=r(55),c=r.n(i),l=r(70),u=r.n(l),s=r(0),f=r.n(s),d=r(2),p=r.n(d),h=r(5),m=r.n(h),y=r(71),v=r.n(y),b=(r(2760),["className","overlayClassName"]);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=f.a.forwardRef((function(e,t){var r=e.className,n=e.overlayClassName,o=u()(e,b);return f.a.createElement(a.a,c()({className:m()(r,"larkui-dropdown-trigger"),overlayClassName:m()(n,"larkui-dropdown"),ref:t},o))}));_.propTypes=w(w({},a.a.DropDownProps),{},{className:p.a.string,overlayClassName:p.a.string}),v()(_,a.a);var E=_,O=["className","overlayClassName","overlay","children"];function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=f.a.forwardRef((function(e,t){var r=e.className,n=e.overlayClassName,o=e.overlay,i=e.children,l=u()(e,O),s=o?o.props:{};return f.a.createElement(a.a.Button,c()({className:m()(r,"larkui-dropdown-trigger"),overlay:f.a.cloneElement(o,{className:m()(s.className,n,"larkui-dropdown-menu")}),ref:t},l),i)}));k.propTypes=S(S({},a.a.DropdownButtonProps),{},{className:p.a.string,overlayClassName:p.a.string,overlay:p.a.node,children:p.a.any}),v()(k,a.a.Button);var x=k,j=r(1079),P=r.n(j),C=r(1078),I=r.n(C),T=r(499),L=r(95),D=r(60),N=(r(2761),function(e){var t=e.className,r=e.overlayClassName,n=e.currentValue,o=e.menus,a=e.disableMenus,i=void 0===a?[]:a,l=e.disableTip,u=e.handleChange,s=e.triggerPrefix,d=o.find((function(e){return e.value===n}));return f.a.createElement(E,c()({},e,{trigger:["click"],className:m()("larkui-dropdown-selector",t),overlayClassName:m()("larkui-dropdown-selector-menu",r),overlay:f.a.createElement(L.a,{selectedKeys:[n]},o.map((function(e){var t=i.some((function(t){return t.value===e.value})),r=f.a.createElement("span",{className:"larkui-dropdown-selector-option"},f.a.createElement("span",{className:"larkui-dropdown-selector-option-name"},e.name),e.value===n&&f.a.createElement("span",{className:"larkui-dropdown-selector-option-checked"},f.a.createElement(I.a,null)));return f.a.createElement(L.a.Item,{key:e.value,disabled:t,onClick:function(){u(e.value)}},t&&l?f.a.createElement(D.a,{title:l,placement:"right"},r):r)})),e.externalActions&&f.a.createElement(L.a.Divider,null),e.externalActions&&e.externalActions())}),f.a.createElement("span",{className:"larkui-dropdown-selector-trigger"},f.a.createElement("span",null,s),f.a.createElement("span",null,d?d.name:Object(T.a)("请选择")),f.a.createElement("span",{className:"larkui-dropdown-selector-trigger-icon"},f.a.createElement(P.a,null))))});N.propTypes={className:p.a.string,overlayClassName:p.a.string,currentValue:p.a.string.isRequired,menus:p.a.arrayOf(p.a.shape({name:p.a.string.isRequired,value:p.a.string.isRequired})).isRequired,disableMenus:p.a.array,disableTip:p.a.node,handleChange:p.a.func.isRequired,externalActions:p.a.func,triggerPrefix:p.a.node};var R=N;E.Selector=R,E.Button=x;t.a=E},2967:function(e,t,r){"use strict";r.r(t),r.d(t,"getFileAccept",(function(){return _})),r.d(t,"getImageAccept",(function(){return E})),r.d(t,"EmbedButtonStatus",(function(){return O})),r.d(t,"getIsDiabledPreviewAndEmbed",(function(){return A})),r.d(t,"getLocalDocAcceptArr",(function(){return S})),r.d(t,"getFileAcceptArr",(function(){return k})),r.d(t,"getImageAcceptArr",(function(){return x})),r.d(t,"getVideoAcceptArr",(function(){return j})),r.d(t,"getAudioAcceptArr",(function(){return P}));var n=r(398),o=r(719),a=n.a.LOCAL_DOC_EXT,i=n.a.LOCAL_DOC_EXT_NORMAL,c=n.a.LOCAL_DOC_EXT_PAID,l=n.a.FILE_EXT,u=n.a.FILE_EXT_NORMAL,s=n.a.FILE_EXT_PAID,f=n.a.IMAGE_EXT,d=n.a.IMAGE_EXT_NORMAL,p=n.a.IMAGE_EXT_PAID,h=n.a.VIDEO_EXT,m=n.a.VIDEO_EXT_NORMAL,y=n.a.VIDEO_EXT_PAID,v=n.a.AUDIO_EXT,b=n.a.AUDIO_EXT_NORMAL,g=n.a.AUDIO_EXT_PAID,w=function(){var e="undefined"!=typeof navigator?navigator.userAgent:"";return/android/i.test(e)};function _(){return w()?"*/*":(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?s.join(","):u.join(","):l.join(",")}function E(){return w()?"image/*":(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?p.join(","):d.join(","):f.join(",")}var O={NORMAL:0,DISABLE:1,PREVENT:2};function A(){return!(window.appData||{}).isYuque||Object(o.isPaidCheckAll)()?O.NORMAL:O.PREVENT}function S(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?c:i:a}function k(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?s:u:l}function x(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?p:d:f}function j(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?y:m:h}function P(){return(window.appData||{}).isYuque?Object(o.isPaidCheckAll)()?g:b:v}},3053:function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var o=r(0),a=n(o),i=n(r(297));function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,r){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==r&&"function"!=typeof r)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(n){if("function"!=typeof n)throw new Error("Expected WrappedComponent to be a React component.");var u,s=[];function f(){u=e(s.map((function(e){return e.props}))),d.canUseDOM?t(u):r&&(u=r(u))}var d=function(e){var t,r;function o(){return e.apply(this,arguments)||this}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,o.peek=function(){return u},o.rewind=function(){if(o.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=u;return u=void 0,s=[],e};var c=o.prototype;return c.shouldComponentUpdate=function(e){return!i(e,this.props)},c.componentWillMount=function(){s.push(this),f()},c.componentDidUpdate=function(){f()},c.componentWillUnmount=function(){var e=s.indexOf(this);s.splice(e,1),f()},c.render=function(){return a.createElement(n,this.props)},o}(o.Component);return c(d,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")"),c(d,"canUseDOM",l),d}}},3476:function(e,t,r){"use strict";r.d(t,"c",(function(){return m})),r.d(t,"p",(function(){return y})),r.d(t,"t",(function(){return v})),r.d(t,"n",(function(){return b})),r.d(t,"d",(function(){return _})),r.d(t,"w",(function(){return E})),r.d(t,"v",(function(){return O})),r.d(t,"u",(function(){return A})),r.d(t,"k",(function(){return S})),r.d(t,"q",(function(){return k})),r.d(t,"o",(function(){return x})),r.d(t,"r",(function(){return j})),r.d(t,"s",(function(){return P})),r.d(t,"e",(function(){return C})),r.d(t,"j",(function(){return I})),r.d(t,"l",(function(){return T})),r.d(t,"b",(function(){return L})),r.d(t,"a",(function(){return D})),r.d(t,"m",(function(){return N})),r.d(t,"f",(function(){return R})),r.d(t,"g",(function(){return M})),r.d(t,"h",(function(){return F})),r.d(t,"i",(function(){return B}));var n=r(0),o=r(11),a=r(526),i=r(1515),c=r(63),l=r(1540),u=r(452),s=r(93),f=r(34),d=r(215);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){return e[e.sharePanel=1]="sharePanel",e[e.inviteSelectorChannel=2]="inviteSelectorChannel",e[e.shareChannels=3]="shareChannels",e[e.collaboratorChannel=4]="collaboratorChannel",e[e.shareQrCodeChannel=5]="shareQrCodeChannel",e}({}),y=h(h(h({},a.a.PERSON,__("公开给互联网所有人")),a.a.ORG,__("公开给空间所有成员")),a.a.INTERNAL,__("公开给集团所有正式员工")),v=h(h(h({},a.a.PERSON,{private:__("互联网公开"),public:__("已开启互联网公开")}),a.a.ORG,{private:__("公开分享"),public:__("已开启公开分享")}),a.a.INTERNAL,{private:__("公开分享"),public:__("已开启公开分享")}),b={private:__("当前小记为私密，仅自己可访问"),public:__("当前小记为公开")},g=h(h(h({},a.a.PERSON,{private:__("当前知识库为私密，仅自己和协作者可访问"),public:__("当前知识库为公开，互联网所有人可访问")}),a.a.ORG,{private:__("当前知识库为私密，仅自己和协作者可访问"),intranet:__("当前知识库为公开，空间所有成员可访问"),public:__("当前知识库为公开，互联网所有人可访问")}),a.a.INTERNAL,{private:__("当前知识库为私密，仅自己和协作者可访问"),extend_private:__("当前知识库为私密，仅协作者和指定部门正式员工可访问"),intranet:__("当前知识库为公开，集团所有正式员工可访问"),public:__("当前知识库为公开，集团所有人可访问")}),w=h(h(h({},a.a.PERSON,{private:__("当前文档为私密，仅自己和协作者可访问"),public:__("当前文档为公开，互联网所有人可访问")}),a.a.ORG,{private:__("当前文档为私密，仅自己和协作者可访问"),intranet:__("当前文档为公开，空间所有成员可访问"),public:__("当前文档为公开，互联网所有人可访问")}),a.a.INTERNAL,{private:__("当前文档为私密，仅自己和协作者可访问"),extend_private:__("当前文档为私密，仅协作者和指定部门正式员工可访问"),intranet:__("当前文档为公开，集团所有正式员工可访问"),public:__("当前文档为公开，集团所有人可访问")}),_=h(h({},a.b.BOOK,g),a.b.DOC,w),E=h(h({},a.a.PERSON,{private:__("开启后，互联网所有人可访问"),public:__("互联网所有人可公开访问内容")}),a.a.INTERNAL,{private:__("开启后，拿到链接的集团正式员工可访问"),public:__("拿到链接的集团正式员工可访问")}),O=h(h(h({},a.a.PERSON,{private:__("开启后，互联网所有人可访问"),public:__("互联网所有人可公开访问内容")}),a.a.ORG,{private:__("开启后，空间内所有成员可访问"),intranet:__("空间内所有成员可公开访问内容"),public:__("互联网所有人可公开访问内容")}),a.a.INTERNAL,{private:__("开启后，拿到链接的集团正式员工可访问"),intranet:__("拿到链接的集团正式员工可访问"),public:__("拿到链接的集团所有人可访问")}),A=h(h(h({},o.PRIVACY.private,"private"),o.PRIVACY.public,"public"),o.PRIVACY.intranet,"intranet"),S=function(e,t,r,n){var o=Object(i.d)(e,t,r,n).privacy;return A[o]},k=h(h({},a.a.ORG,{desc:__("默认分享范围是空间所有成员。可以选择分享给互联网所有人，内容需符合相关法律法规及语雀 {terms} 约定。",{terms:n.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6","data-desktoptarget":"_browser",target:"_blank"},__("服务协议"))}),actions:[{label:__("空间所有成员可访问"),value:o.PRIVACY.intranet},{label:__("互联网所有人可访问"),value:o.PRIVACY.public,tip:function(e){var t,r=null==e||null===(t=e.abilities)||void 0===t?void 0:t.destroy;return c.a.isPremium(e)&&0===(null==e?void 0:e.share_to_outside_enable)?r?n.createElement(n.Fragment,null,__("空间管理设置已关闭对外分享权限，请先前往开启。"),n.createElement("a",{href:"/r/organizations/dashboard/security/sharing-control",target:"_blank",style:{marginLeft:"5px"}},__("前往开启"))):__("管理员已关闭空间外人员访问权限，请联系管理员开启。"):c.a.isFree(e)?r?n.createElement(n.Fragment,null,__("升级为专业版、旗舰版后可开启互联网公开"),n.createElement("a",{href:"/r/organizations/dashboard/cashier?action=buy&paySource=".concat(f.LIMIT_SCENE.share_public),target:"_blank",style:{marginLeft:"5px"}},c.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):__("联系管理员升级为专业版、旗舰版后可开启互联网公开"):c.a.isExpired(e)?n.createElement(n.Fragment,null,__("过期空间不可以设置互联网所有人可访问"),r&&n.createElement("a",{href:"/r/organizations/dashboard/cashier?action=renew&paySource=".concat(f.LIMIT_SCENE.share_public),target:"_blank",style:{marginLeft:"5px"}},c.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):""}}]}),a.a.INTERNAL,{desc:__("默认分享范围是集团正式员工。分享给集团所有人（含外包、未签订三方协议的实习生）需审批申请，请注意信息安全。"),actions:[{label:__("集团内所有正式员工可访问"),value:o.PRIVACY.intranet},{label:__("集团内所有人可访问"),value:o.PRIVACY.public}]}),x=h(h({},a.b.BOOK,__("开启后，本知识库下的所有公开内容，都需要密码访问。")),a.b.DOC,__("所属知识库已开启密码，本内容已默认继承该密码。")),j=h(h({},a.b.BOOK,h(h(h({},a.a.PERSON,{desc:__("开启后，互联网所有人可搜到知识库里的公开内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许语雀内公开搜索")}),a.a.ORG,{desc:__("开启后，空间成员可在空间里搜到知识库里的公开内容")+__("（如果开启了密码，则搜索设置无效）"),action:"允许空间内搜索"}),a.a.INTERNAL,{desc:__("开启后，集团所有人可搜到知识库里的公开内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许内网公开搜索")})),a.b.DOC,h(h(h({},a.a.PERSON,{desc:__("开启后，互联网所有人可在语雀内搜索到当前内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许语雀内公开搜索"),tip:__("所属知识库已允许语雀内公开搜索，文档无法独立设置。{terms}",{terms:n.createElement("a",{href:"https://www.yuque.com/yuque/thyzgp/lk1xr8",target:"_blank"},__("查看帮助"))})}),a.a.ORG,{desc:__("开启后，空间成员可在空间里搜索到当前内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许空间内搜索"),tip:__("所属知识库已允许空间内搜索，文档无法独立设置。{terms}",{terms:n.createElement("a",{href:"https://www.yuque.com/yuque/thyzgp/lk1xr8",target:"_blank"},__("查看帮助"))})}),a.a.INTERNAL,{desc:__("开启后，集团内所有人都可在语雀里搜到当前内容")+__("（如果开启了密码，则搜索设置无效）"),action:__("允许内网公开搜索"),tip:__("所属知识库已允许内网公开搜索，文档无法独立设置。{terms}",{terms:n.createElement("a",{href:"https://yuque.antfin.com/lark/bsgp0v/wpclft",target:"_blank"},__("查看帮助"))})})),P=h(h({},a.a.PERSON,{desc:__("单次分享有效期默认半年，到期后可再次开启")}),a.a.INTERNAL,{desc:__("公开分享有效期为三个月，期间有用户访问文档时，会基于访问时间重新计算有效期，详见：{help}",{help:n.createElement("a",{href:"https://yuque.antfin.com/lark/bsgp0v/wdgcqkvg8r6o69bz",target:"_blank"},__("公开分享文档安全策略说明"))})}),C=h(h(h({},a.b.BOOK,__("可编辑，将拥有知识库的编辑权限。可阅读，仅拥有阅读和评论权限。")),a.b.DOC,__("可编辑，将拥有文档的编辑权限。可阅读，仅拥有阅读和评论权限。")),"actions",[{label:__("可阅读"),desc:__("仅拥有只读和评论权限"),value:u.ROLE.readonly,key:"readonly"},{label:__("可编辑"),desc:__("拥有文档的编辑权限"),value:u.ROLE.edit,key:"edit"}]),I={descBookDoc:__("开启后，允许通过邀请链接快速添加空间外人员。通过此方式加入协作的人，将自动加入空间。"),descGroup:__("开启后，允许通过邀请链接快速添加空间外人员。通过此方式加入协作的人，将自动加入团队。"),action:__("邀请空间外成员"),tip:function(e){return c.a.isOwner(e)?__("空间管理设置已关闭空间外人员添加权限，请先前往开启。{terms}",{terms:n.createElement("a",{href:"/r/organizations/dashboard/contacts/permission-settings",target:"_blank",rel:"noopener noreferrer"},__("立即前往"))}):__("管理员已关闭空间外人员添加权限，请联系管理员开启。{terms}",{terms:n.createElement("a",{href:"https://www.yuque.com/yuque/rvzzxz/csb5nu",target:"_blank"},__("查看帮助"))})}},T={descBookDoc:__("开启后，需经过手动审批确认，获得链接的人才能成为协作者。"),descGroup:__("开启后，需经过手动审批确认，获得链接的人才能加入团队。"),action:__("提交申请后需审批确认")},L={desc:__("成员，将拥有团队知识库的编辑权限。只读成员，仅拥有只读权限。"),actions:[{label:__("成员"),value:s.ROLE.member,key:"member"},{label:__("只读成员"),value:s.ROLE.readonly,key:"readonly"}]},D=h(h(h({},a.a.PERSON,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("互联网所有人可访问"),value:o.PRIVACY.public}]}),a.a.ORG,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("空间所有成员可访问"),value:o.PRIVACY.intranet},{label:__("互联网所有人可访问"),value:o.PRIVACY.public,tip:function(e){var t,r=null==e||null===(t=e.abilities)||void 0===t?void 0:t.destroy;return c.a.isPremium(e)&&0===(null==e?void 0:e.share_to_outside_enable)?r?n.createElement(n.Fragment,null,__("空间管理设置已关闭对外分享权限，请先前往开启。"),n.createElement("a",{href:"/r/organizations/dashboard/security/sharing-control",target:"_blank",style:{marginLeft:"5px"}},__("前往开启"))):__("管理员已关闭空间外人员访问权限，请联系管理员开启。"):c.a.isFree(e)?r?n.createElement(n.Fragment,null,__("升级为专业版、旗舰版后可开启互联网公开"),n.createElement("a",{href:"/r/organizations/dashboard/cashier?action=buy&paySource=".concat(f.LIMIT_SCENE.share_public),target:"_blank",style:{marginLeft:"5px"}},c.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):__("联系管理员升级为专业版、旗舰版后可开启互联网公开"):c.a.isExpired(e)?n.createElement(n.Fragment,null,__("过期空间不可以设置互联网所有人可访问"),r&&n.createElement("a",{href:"/r/organizations/dashboard/cashier?action=renew&paySource=".concat(f.LIMIT_SCENE.share_public),target:"_blank",style:{marginLeft:"5px"}},c.a.getPaymentActionGuide(null==e?void 0:e.payment_type))):""}}]}),a.a.INTERNAL,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("指定部门正式员工可访问"),value:o.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE},{label:__("集团内所有正式员工可访问"),value:o.PRIVACY.intranet},{label:__("集团内所有人可访问"),value:o.PRIVACY.public}]}),N=h(h(h(h({},a.a.PERSON,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("互联网所有人可访问"),value:o.PRIVACY.public}]}),a.a.ORG,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("空间所有成员可访问"),value:o.PRIVACY.intranet}]}),a.a.PUBLIC_PAGE,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("空间所有成员可访问"),value:o.PRIVACY.intranet},{label:__("互联网所有人可访问"),value:o.PRIVACY.public}]}),a.a.INTERNAL,{actions:[{label:__("仅协作者可访问"),value:o.PRIVACY.private},{label:__("指定部门正式员工可访问"),value:o.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE},{label:__("集团内所有正式员工可访问"),value:o.PRIVACY.intranet}]}),R=function(e,t){var r=__("开启后，互联网所有获得链接的人皆可访问知识库下的全部内容。你需对其合法合规性负责，遵守相关法律法规及语雀 {terms} 约定，违规内容可能无法被查看。",{terms:n.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6",target:"_blank","data-desktoptarget":"_browser"},__("服务协议"))}),o=__("开启后，互联网所有获得链接的人皆可访问。你需对其合法合规性负责，遵守相关法律法规及语雀 {terms} 约定，违规内容可能无法被查看。",{terms:n.createElement("a",{href:"https://www.yuque.com/terms#ubab347c6",target:"_blank","data-desktoptarget":"_browser"},__("服务协议"))}),i=e===a.b.BOOK?r:o;return Object(d.a)()?new Promise((function(e){t.confirm({icon:n.createElement(l.default,null),width:505,title:__("确认公开给互联网所有人"),content:n.createElement("span",null,i),okText:__("确认"),cancelText:__("取消"),onOk:function(){e(!0)},onCancel:function(){e(!1)}})})):e===a.b.NOTE?Promise.resolve(!0):new Promise((function(e){t.confirm({icon:n.createElement(l.default,null),width:505,title:__("申请开启集团所有人可访问"),content:__("设置 集团所有人可访问 需进行审批申请，主管通过后可对所有外包、未签订三方协议的实习生可见，请注意信息安全。"),okText:__("确认"),cancelText:__("取消"),onOk:function(){e(!0)},onCancel:function(){e(!1)}})}))},M=function(e){return new Promise((function(t){e.confirm({width:505,title:__("切换其他选项后再次选择「集团所有人可访问」，需要重新审批，确认切换吗？"),okText:__("确认"),cancelText:__("取消"),onOk:function(){t(!0)},onCancel:function(){t(!1)}})}))},F=[{label:__("仅团队成员可访问"),value:o.PRIVACY.private},{label:__("空间所有成员可访问"),value:o.PRIVACY.intranet}],B=[{label:__("仅团队成员可访问"),value:o.PRIVACY.private},{label:__("指定部门正式员工可访问"),value:o.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE},{label:__("集团内所有正式员工可访问"),value:o.PRIVACY.intranet},{label:__("集团内所有人可访问"),value:o.PRIVACY.public}]},3566:function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g,a="RFC1738",i="RFC3986";e.exports={default:i,formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return String(e)}},RFC1738:a,RFC3986:i}},3595:function(e,t,r){"use strict";var n=r(1008);t.a=function(){return Object(n.getInterest)()}},3607:function(e,t,r){"use strict";r.d(t,"e",(function(){return i}));var n=r(237),o=r.n(n),a=r(557);r.d(t,"i",(function(){return a.WORKFLOW_EVENT})),r.d(t,"h",(function(){return a.SAVE_TYPE})),r.d(t,"d",(function(){return a.ERROR_CODE})),r.d(t,"f",(function(){return a.MESSAGE})),r.d(t,"a",(function(){return a.DOC_STATUS})),r.d(t,"g",(function(){return a.NET_STATUS})),r.d(t,"b",(function(){return a.EDIT_MODE})),r.d(t,"c",(function(){return a.EDIT_SCENE}));var i={edit:{key:"e",title:"E"},publish:{key:["⌘+enter","ctrl+enter"],title:o.a.mac?"⌘+Enter":"Ctrl+Enter"}};a.WORKFLOW_EVENT,a.ACTION,a.SAVE_TYPE,a.ERROR_CODE,a.MESSAGE,a.DOC_STATUS,a.NET_STATUS,a.EDIT_MODE},3608:function(e,t,r){"use strict";r(144);var n=r(60),o=r(0),a=r.n(o),i=["textRef","visible","onVisibleChange"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(null,arguments)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t=e.textRef,r=(e.visible,e.onVisibleChange),u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,i),s=l(Object(o.useState)(!1),2),f=s[0],d=s[1];return a.a.createElement(n.a,c({},u,{visible:f,onVisibleChange:function(e){var n=e;null!=t&&t.current&&n&&(n=void 0!==t.current.offsetWidth&&void 0!==t.current.scrollWidth&&t.current.offsetWidth<t.current.scrollWidth),d(n),r&&r(n)}}))}},3692:function(e,t,r){"use strict";var n=r(3566),o=Object.prototype.hasOwnProperty,a=Array.isArray,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),c=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},l=1024;e.exports={arrayToObject:c,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],i=o.obj[o.prop],c=Object.keys(i),l=0;l<c.length;++l){var u=c[l],s=i[u];"object"==typeof s&&null!==s&&-1===r.indexOf(s)&&(t.push({obj:i,prop:u}),r.push(s))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(a(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,o,a){if(0===e.length)return e;var c=e;if("symbol"==typeof e?c=Symbol.prototype.toString.call(e):"string"!=typeof e&&(c=String(e)),"iso-8859-1"===r)return escape(c).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var u="",s=0;s<c.length;s+=l){for(var f=c.length>=l?c.slice(s,s+l):c,d=[],p=0;p<f.length;++p){var h=f.charCodeAt(p);45===h||46===h||95===h||126===h||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||a===n.RFC1738&&(40===h||41===h)?d[d.length]=f.charAt(p):h<128?d[d.length]=i[h]:h<2048?d[d.length]=i[192|h>>6]+i[128|63&h]:h<55296||h>=57344?d[d.length]=i[224|h>>12]+i[128|h>>6&63]+i[128|63&h]:(p+=1,h=65536+((1023&h)<<10|1023&f.charCodeAt(p)),d[d.length]=i[240|h>>18]+i[128|h>>12&63]+i[128|h>>6&63]+i[128|63&h])}u+=d.join("")}return u},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(a(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(a(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var i=t;return a(t)&&!a(r)&&(i=c(t,n)),a(t)&&a(r)?(r.forEach((function(r,a){if(o.call(t,a)){var i=t[a];i&&"object"==typeof i&&r&&"object"==typeof r?t[a]=e(i,r,n):t.push(r)}else t[a]=r})),t):Object.keys(r).reduce((function(t,a){var i=r[a];return o.call(t,a)?t[a]=e(t[a],i,n):t[a]=i,t}),i)}}},3734:function(e,t,r){"use strict";var n=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function o(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(o=e[r],a=t[r],!(o===a||n(o)&&n(a)))return!1;var o,a;return!0}t.a=function(e,t){var r;void 0===t&&(t=o);var n,a=[],i=!1;return function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return i&&r===this&&t(o,a)||(n=e.apply(this,o),i=!0,r=this,a=o),n}}},3739:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n=".ne-editor-wrap",o=".lake-editor-scroll-container",a=".lake-sheet-scrollbar-x .lake-sheet-scrollbar-trigger",i=".lake-sheet-scrollbar-y .lake-sheet-scrollbar-trigger",c={storePosition:function(e,t){if(sessionStorage){var r=this._getStorageKey(e);sessionStorage.setItem(r,"".concat(t))}},storeSheetPosition:function(e,t){if(sessionStorage){var r=this._getStorageKey(e);sessionStorage.setItem("".concat(r,"-x"),"".concat(t.x)),sessionStorage.setItem("".concat(r,"-y"),"".concat(t.y))}},getStoredPosition:function(e){if(!sessionStorage)return-1;var t=this._getStorageKey(e),r=sessionStorage.getItem(t);return r?parseInt(r,10):-1},getSheetStoredPosition:function(e){if(!sessionStorage)return null;var t=this._getStorageKey(e),r=sessionStorage.getItem("".concat(t,"-x")),n=sessionStorage.getItem("".concat(t,"-y"));return r&&n?{x:parseFloat(r),y:parseFloat(n)}:null},clearStorage:function(e){if(sessionStorage){var t=this._getStorageKey(e);sessionStorage.removeItem(t)}},clearSheetStorage:function(e){if(sessionStorage){var t=this._getStorageKey(e);sessionStorage.removeItem("".concat(t,"-x")),sessionStorage.removeItem("".concat(t,"-y"))}},clearHistoryStorage:function(){sessionStorage&&Object.keys(sessionStorage).forEach((function(e){e.startsWith("content-position-offset-")&&sessionStorage.removeItem(e)}))},_getStorageKey:function(e){return"content-position-offset-".concat(e)}},l={saveReadPosition:function(e){var t,r=(null===(t=document.scrollingElement)||void 0===t?void 0:t.scrollTop)||document.body.scrollTop;r&&r>=32?c.storePosition(e,r):c.clearStorage(e)},letReaderFocusToMemorizedPosition:function(e){var t=c.getStoredPosition(e);t<=0||window.scrollTo(0,t)},letEditorFocusToReadPosition:function(e){var t=c.getStoredPosition(e);if(!(t<=0)){var r=this.getScrollContainer();r&&(r.scrollTop=t)}},getScrollContainer:function(){return document.querySelector(n)||document.querySelector(o)},saveEditPosition:function(e){if("lakesheet"!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lake")){var t=this.getScrollContainer();if(t){var r=t.scrollTop;r>=32&&c.storePosition(e,r)}}else l.saveSheetPosition(e)},saveSheetPosition:function(e){var t=document.querySelector(a),r=document.querySelector(i);if(t&&r){var n={x:t.getAttribute("data-scroll"),y:r.getAttribute("data-scroll")};c.storeSheetPosition(e,n)}},getSheetStoredPosition:function(e){var t=c.getSheetStoredPosition(e);return t?(c.clearSheetStorage(e),t):null},clearPosition:function(e){e?c.clearStorage(e):c.clearHistoryStorage()}};t.c=l},3743:function(e,t,r){"use strict";var n=r(691);r.d(t,"b",(function(){return n.b})),r.d(t,"a",(function(){return n.a}))},3834:function(e,t,r){"use strict";var n=r(3864),o=r(3865),a=r(3566);e.exports={formats:a,parse:o,stringify:n}},3860:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));const n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function o(e,t,r){const n=r[0];if(null!=t&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===n||t&&t.slice(-1)===n)throw new Error("trailing zero");if(t){let a=0;for(;(e[a]||n)===t[a];)a++;if(a>0)return t.slice(0,a)+o(e.slice(a),t.slice(a),r)}const a=e?r.indexOf(e[0]):0,i=null!=t?r.indexOf(t[0]):r.length;if(i-a>1){return r[Math.round(.5*(a+i))]}return t&&t.length>1?t.slice(0,1):r[a]+o(e.slice(1),null,r)}function a(e){if(e.length!==i(e[0]))throw new Error("invalid integer part of order key: "+e)}function i(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-"a".charCodeAt(0)+2;if(e>="A"&&e<="Z")return"Z".charCodeAt(0)-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function c(e){const t=i(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function l(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const r=c(e);if(e.slice(r.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function u(e,t){a(e);const[r,...n]=e.split("");let o=!0;for(let e=n.length-1;o&&e>=0;e--){const r=t.indexOf(n[e])+1;r===t.length?n[e]=t[0]:(n[e]=t[r],o=!1)}if(o){if("Z"===r)return"a"+t[0];if("z"===r)return null;const e=String.fromCharCode(r.charCodeAt(0)+1);return e>"a"?n.push(t[0]):n.pop(),e+n.join("")}return r+n.join("")}function s(e,t,r=n){if(null!=e&&l(e,r),null!=t&&l(t,r),null!=e&&null!=t&&e>=t)throw new Error(e+" >= "+t);if(null==e){if(null==t)return"a"+r[0];const e=c(t),n=t.slice(e.length);if(e==="A"+r[0].repeat(26))return e+o("",n,r);if(e<t)return e;const i=function(e,t){a(e);const[r,...n]=e.split("");let o=!0;for(let e=n.length-1;o&&e>=0;e--){const r=t.indexOf(n[e])-1;-1===r?n[e]=t.slice(-1):(n[e]=t[r],o=!1)}if(o){if("a"===r)return"Z"+t.slice(-1);if("A"===r)return null;const e=String.fromCharCode(r.charCodeAt(0)-1);return e<"Z"?n.push(t.slice(-1)):n.pop(),e+n.join("")}return r+n.join("")}(e,r);if(null==i)throw new Error("cannot decrement any more");return i}if(null==t){const t=c(e),n=e.slice(t.length),a=u(t,r);return null==a?t+o(n,null,r):a}const i=c(e),s=e.slice(i.length),f=c(t),d=t.slice(f.length);if(i===f)return i+o(s,d,r);const p=u(i,r);if(null==p)throw new Error("cannot increment any more");return p<t?p:i+o(s,null,r)}var f=r(3505),d=r(52),p=r(184);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(){m=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",y="executing",v="completed",b={};function g(){}function w(){}function _(){}var E={};u(E,i,(function(){return this}));var O=Object.getPrototypeOf,A=O&&O(O(L([])));A&&A!==r&&n.call(A,i)&&(E=A);var S=_.prototype=g.prototype=Object.create(E);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==h(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=d;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?v:p,u.arg===b)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(h(t)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=u(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function y(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function w(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var E=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,"_manifests",[]),w(this,"_assistants",[]),w(this,"_currentAssistant",void 0),w(this,"_listeners",[]),w(this,"_contextData",void 0),w(this,"_visibility",f.e.Invisible),w(this,"_initializedAssistants",[])},t=[{key:"manifests",get:function(){return this._manifests}},{key:"currentAssistant",get:function(){return this._currentAssistant}},{key:"isExpanded",get:function(){return this._visibility===f.e.Expanded}},{key:"isCollapsed",get:function(){return this._visibility===f.e.Collapsed}},{key:"isInvisible",get:function(){return this._visibility===f.e.Invisible}},{key:"visibility",get:function(){return this._visibility}},{key:"assistants",get:function(){return this._assistants.sort((function(e,t){return e.priority>t.priority?1:-1}))}},{key:"rightBarAssistants",get:function(){var e=this;return this.assistants.filter((function(t){var r,n;return!(e._contextData&&null!==(r=t.provider)&&void 0!==r&&null!==(n=r.isInvisibility)&&void 0!==n&&n.call(r,b(b({},e._contextData),{},{target:t.target})))}))}},{key:"first",get:function(){var e;return null===(e=this.rightBarAssistants)||void 0===e?void 0:e[0]}},{key:"switchVisibility",value:function(e){this._visibility!==e&&(this._visibility=e,this.notifyListener((function(t){var r;return null===(r=t.onVisibilityChanged)||void 0===r?void 0:r.call(t,e)})))}},{key:"switchExpand",value:function(){this.initCurrentAssistant(),this.switchVisibility(f.e.Expanded)}},{key:"switchCollapsed",value:function(){this.switchVisibility(f.e.Collapsed)}},{key:"switchInvisible",value:function(){this.switchVisibility(f.e.Invisible)}},{key:"addListener",value:function(e){var t=this;return this._listeners.push(e),function(){return t.removeListener(e)}}},{key:"removeListener",value:function(e){this._listeners=this._listeners.filter((function(t){return t!==e}))}},{key:"notifyListener",value:function(e){this._listeners.forEach(e)}},{key:"switchAssistant",value:function(e){var t,r,n;if(this._contextData){var o,a,i=this.getAssistantById(e);i&&(this.setCurrentAssistant(i),null!==(t=i.provider)&&void 0!==t&&null!==(r=t.isEnable)&&void 0!==r&&r.call(t,b(b({},this._contextData),{},{target:i.target}))&&(this._initializedAssistants.indexOf(i)>-1?null===(o=i.provider)||void 0===o||null===(a=o.onContextDataChanged)||void 0===a||a.call(o,b(b({},this._contextData),{},{target:i.target})):(null===(n=i.provider)||void 0===n||n.initialize(b(b({},this._contextData),{},{target:i.target})),this._initializedAssistants.push(i))))}}},{key:"getAssistantById",value:function(e){return this._assistants.find((function(t){return t.id===e}))}},{key:"getAssistantByTargetId",value:function(e){return this._assistants.find((function(t){var r;return(null===(r=t.target)||void 0===r?void 0:r.id)===e}))}},{key:"setCurrentAssistant",value:function(e){this._currentAssistant!==e&&(this._currentAssistant=e,p.a.set(f.a,e.id),this.notifyListener((function(t){var r;return null===(r=t.onActivateAssistantChanged)||void 0===r?void 0:r.call(t,e)})))}},{key:"updateContext",value:function(e){var t,r;this._contextData=e;var n=this._currentAssistant;n&&null!==(t=n.provider)&&void 0!==t&&null!==(r=t.isEnable)&&void 0!==r&&r.call(t,b(b({},e),{},{target:n.target}))&&this.switchAssistant(n.id)}},{key:"removeAssistant",value:function(e,t){var r=this.getAssistantById(e)||this.getAssistantByTargetId(e);if(e=(null==r?void 0:r.id)||e,r){if(t){var n,o,a=this._assistants.indexOf(r);-1!==a&&(this._assistants.splice(a,1),null===(n=r.provider)||void 0===n||null===(o=n.destroy)||void 0===o||o.call(n))}this._assistants=this._assistants.filter((function(t){return t.id!==e})),this.currentAssistant===r&&this.first&&this.switchAssistant(this.first.id),this.notifyListener((function(e){var t;return null===(t=e.onAssistantsChanged)||void 0===t?void 0:t.call(e)})),this.notifyListener((function(e){var t;return null===(t=e.onManifestsChanged)||void 0===t?void 0:t.call(e)}))}}},{key:"addManifest",value:function(e){this._manifests.push(e),this.notifyListener((function(e){var t;return null===(t=e.onManifestsChanged)||void 0===t?void 0:t.call(e)}))}},{key:"addAssistant",value:function(e){this._assistants.push(e),this.notifyListener((function(e){var t;return null===(t=e.onAssistantsChanged)||void 0===t?void 0:t.call(e)})),this.notifyListener((function(e){var t;return null===(t=e.onManifestsChanged)||void 0===t?void 0:t.call(e)}))}},{key:"initCurrentAssistant",value:function(){if(0!==this._assistants.length){var e,t=parseInt(p.a.get(f.a)||-1,10);this.getAssistantById(t)?this.switchAssistant(t):this.switchAssistant((null===(e=this.first)||void 0===e?void 0:e.id)||-1)}}},{key:"reorderAssistants",value:(n=m().mark((function e(t,r,n){var o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.priority=s(r,n),this.notifyListener((function(e){var t;return null===(t=e.onAssistantsChanged)||void 0===t?void 0:t.call(e)})),!(t.id<0)){e.next=7;break}return e.next=5,d.a.mine.superSidebarProvider.create({type:t.type,priority:t.priority});case 5:o=e.sent,t.id=o.id;case 7:return e.next=9,d.a.mine.superSidebarProvider.update({id:t.id,priority:t.priority});case 9:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){y(a,r,o,i,c,"next",e)}function c(e){y(a,r,o,i,c,"throw",e)}i(void 0)}))},function(e,t,r){return o.apply(this,arguments)})},{key:"getLatestPriority",value:function(){var e;return s(null===(e=this.assistants.at(-1))||void 0===e?void 0:e.priority,null)}},{key:"getAssistantByType",value:function(e){return this._assistants.find((function(t){return t.type===e}))}},{key:"switchAssistantByType",value:function(e){var t=this.getAssistantByType(e);t&&this.switchAssistant(t.id)}}],t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,o}(),O=new E},3864:function(e,t,r){"use strict";var n=r(863),o=r(3692),a=r(3566),i=Object.prototype.hasOwnProperty,c={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,u=Array.prototype.push,s=function(e,t){u.apply(e,l(t)?t:[t])},f=Date.prototype.toISOString,d=a.default,p={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:o.encode,encodeValuesOnly:!1,format:d,formatter:a.formatters[d],indices:!1,serializeDate:function(e){return f.call(e)},skipNulls:!1,strictNullHandling:!1},h={},m=function e(t,r,a,i,c,u,f,d,m,y,v,b,g,w,_,E,O,A){for(var S,k=t,x=A,j=0,P=!1;void 0!==(x=x.get(h))&&!P;){var C=x.get(t);if(j+=1,void 0!==C){if(C===j)throw new RangeError("Cyclic object value");P=!0}void 0===x.get(h)&&(j=0)}if("function"==typeof y?k=y(r,k):k instanceof Date?k=g(k):"comma"===a&&l(k)&&(k=o.maybeMap(k,(function(e){return e instanceof Date?g(e):e}))),null===k){if(u)return m&&!E?m(r,p.encoder,O,"key",w):r;k=""}if("string"==typeof(S=k)||"number"==typeof S||"boolean"==typeof S||"symbol"==typeof S||"bigint"==typeof S||o.isBuffer(k))return m?[_(E?r:m(r,p.encoder,O,"key",w))+"="+_(m(k,p.encoder,O,"value",w))]:[_(r)+"="+_(String(k))];var I,T=[];if(void 0===k)return T;if("comma"===a&&l(k))E&&m&&(k=o.maybeMap(k,m)),I=[{value:k.length>0?k.join(",")||null:void 0}];else if(l(y))I=y;else{var L=Object.keys(k);I=v?L.sort(v):L}var D=d?r.replace(/\./g,"%2E"):r,N=i&&l(k)&&1===k.length?D+"[]":D;if(c&&l(k)&&0===k.length)return N+"[]";for(var R=0;R<I.length;++R){var M=I[R],F="object"==typeof M&&void 0!==M.value?M.value:k[M];if(!f||null!==F){var B=b&&d?M.replace(/\./g,"%2E"):M,q=l(k)?"function"==typeof a?a(N,B):N:N+(b?"."+B:"["+B+"]");A.set(t,j);var z=n();z.set(h,A),s(T,e(F,q,a,i,c,u,f,d,"comma"===a&&E&&l(k)?null:m,y,v,b,g,w,_,E,O,z))}}return T};e.exports=function(e,t){var r,o=e,u=function(e){if(!e)return p;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=a.default;if(void 0!==e.format){if(!i.call(a.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n,o=a.formatters[r],u=p.filter;if(("function"==typeof e.filter||l(e.filter))&&(u=e.filter),n=e.arrayFormat in c?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":p.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var s=void 0===e.allowDots?!0===e.encodeDotInKeys||p.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:s,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:p.allowEmptyArrays,arrayFormat:n,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:p.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:u,format:r,formatter:o,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof u.filter?o=(0,u.filter)("",o):l(u.filter)&&(r=u.filter);var f=[];if("object"!=typeof o||null===o)return"";var d=c[u.arrayFormat],h="comma"===d&&u.commaRoundTrip;r||(r=Object.keys(o)),u.sort&&r.sort(u.sort);for(var y=n(),v=0;v<r.length;++v){var b=r[v];u.skipNulls&&null===o[b]||s(f,m(o[b],b,d,h,u.allowEmptyArrays,u.strictNullHandling,u.skipNulls,u.encodeDotInKeys,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,y))}var g=f.join(u.delimiter),w=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),g.length>0?w+g:""}},3865:function(e,t,r){"use strict";var n=r(3692),o=Object.prototype.hasOwnProperty,a=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},c=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,r,n){if(e){var a=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,c=r.depth>0&&/(\[[^[\]]*])/.exec(a),u=c?a.slice(0,c.index):a,s=[];if(u){if(!r.plainObjects&&o.call(Object.prototype,u)&&!r.allowPrototypes)return;s.push(u)}for(var f=0;r.depth>0&&null!==(c=i.exec(a))&&f<r.depth;){if(f+=1,!r.plainObjects&&o.call(Object.prototype,c[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(c[1])}return c&&s.push("["+a.slice(c.index)+"]"),function(e,t,r,n){for(var o=n?t:l(t,r),a=e.length-1;a>=0;--a){var i,c=e[a];if("[]"===c&&r.parseArrays)i=r.allowEmptyArrays&&""===o?[]:[].concat(o);else{i=r.plainObjects?Object.create(null):{};var u="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,s=r.decodeDotInKeys?u.replace(/%2E/g,"."):u,f=parseInt(s,10);r.parseArrays||""!==s?!isNaN(f)&&c!==s&&String(f)===s&&f>=0&&r.parseArrays&&f<=r.arrayLimit?(i=[])[f]=o:"__proto__"!==s&&(i[s]=o):i={0:o}}o=i}return o}(s,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return i;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?i.charset:e.charset,r=void 0===e.duplicates?i.duplicates:e.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||i.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:i.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:i.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:i.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:i.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:i.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:i.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:i.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:i.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:i.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:i.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:i.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:i.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var s="string"==typeof e?function(e,t){var r,u={__proto__:null},s=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,f=t.parameterLimit===1/0?void 0:t.parameterLimit,d=s.split(t.delimiter,f),p=-1,h=t.charset;if(t.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?h="utf-8":"utf8=%26%2310003%3B"===d[r]&&(h="iso-8859-1"),p=r,r=d.length);for(r=0;r<d.length;++r)if(r!==p){var m,y,v=d[r],b=v.indexOf("]="),g=-1===b?v.indexOf("="):b+1;-1===g?(m=t.decoder(v,i.decoder,h,"key"),y=t.strictNullHandling?null:""):(m=t.decoder(v.slice(0,g),i.decoder,h,"key"),y=n.maybeMap(l(v.slice(g+1),t),(function(e){return t.decoder(e,i.decoder,h,"value")}))),y&&t.interpretNumericEntities&&"iso-8859-1"===h&&(y=c(y)),v.indexOf("[]=")>-1&&(y=a(y)?[y]:y);var w=o.call(u,m);w&&"combine"===t.duplicates?u[m]=n.combine(u[m],y):w&&"last"!==t.duplicates||(u[m]=y)}return u}(e,r):e,f=r.plainObjects?Object.create(null):{},d=Object.keys(s),p=0;p<d.length;++p){var h=d[p],m=u(h,s[h],r,"string"==typeof e);f=n.merge(f,m,r)}return!0===r.allowSparse?f:n.compact(f)}},3868:function(e,t,r){"use strict";r(711);var n=r(356),o=r(0),a=r.n(o),i=r(5),c=r.n(i),l=r(43),u=r(3884),s={popover:"Tour-module_popover_mkOsy",popContainer:"Tour-module_popContainer_RCEzF",popContent:"Tour-module_popContent_agPWQ",close:"Tour-module_close_czKPt",popStep:"Tour-module_popStep_8Vgli",popStepItem:"Tour-module_popStepItem_2UoUB",popContainerTwo:"Tour-module_popContainerTwo_6yJro",shake:"Tour-module_shake_EnNZU",PanelShake:"Tour-module_PanelShake_SM2sR",popup:"Tour-module_popup_2jflo",breathe:"Tour-module_breathe_xoYDY"};function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t=e.placement,r=void 0===t?"left":t,i=e.content,f=void 0===i?[]:i,y=e.onClose,v=e.children,b=e.step,g=e.stage,w=e.taskId,_=e.width,E=e.height,O=e.offsetX,A=e.offsetY,S=e.offsetRight,k=e.offsetBottom,x=e.borderRadius,j=void 0===x?8:x,P=e.popWidth,C=void 0===P?"auto":P,I=e.action,T=void 0===I?"hover":I,L=e.popMarginLeft,D=void 0===L?0:L,N=e.getPopupContainer,R=e.popupStyle,M=m(Object(o.useState)(!1),2),F=M[0],B=M[1],q=m(Object(o.useState)(!1),2),z=q[0],G=q[1],U=u.a.getInstance();Object(o.useEffect)((function(){var e=function(e){var t=e.step,r=e.stage,n=e.isProcess,o=e.taskId;B(n&&t===b&&r===g&&o===w)},t=U.getTaskStateInfo();if(t&&"object"===h(t)){var r=t.isProcess,n=t.stage;e({step:t.step,stage:n,isProcess:r,taskId:t.taskId})}var o=function(){B(!1)},a=U.onTaskStateChanged(e),i=U.onCloseTask(o),c=U.onCloseAllTask(o),l=U.onShake((function(e){var t=e.step,r=e.taskId,n=e.stage;b===t&&r===w&&n===g&&(G(!0),setTimeout((function(){G(!1)}),1e3))}));return function(){a(),i(),c(),l()}}),[]),Object(o.useEffect)((function(){var e,t,r=document.getElementById("task-cover-block-".concat(w,"-").concat(g,"-").concat(b)),n="hover"===T?"mouseenter":"click";if(!F)return null==r||null===(e=r.nextSibling)||void 0===e?void 0:e.removeEventListener(n,W);r&&F&&(null===(t=r.nextSibling)||void 0===t||t.addEventListener(n,W,!1));return U.onCloseAllTask((function(){var e;null==r||null===(e=r.nextSibling)||void 0===e||e.removeEventListener(n,W)})),function(){var e;null==r||null===(e=r.nextSibling)||void 0===e||e.removeEventListener(n,W)}}),[F]);var W=function(){setTimeout((function(){var t=U.getTaskStateInfo();t&&(t.taskId!==e.taskId||t.stage!==e.stage||t.step>e.step)||(U.taskStateChanged({step:e.step+1,stage:e.stage,isProcess:!0,taskId:e.taskId}),B(!1))}),100)};if(v instanceof Array)throw new Error("Array nodes are not supported, Please check it!");var V=function(e){e.stopPropagation(),U.closeTask(),null==y||y()};return a.a.createElement(n.a,{content:a.a.createElement("div",{className:c()(s.popContainer,p(p({},s.popContainerTwo,f.length>1),s.shake,z)),onMouseOver:function(e){e.stopPropagation()},onClick:function(e){e.stopPropagation()},style:d(d({},R),{},{width:C,marginLeft:D})},a.a.createElement("div",{className:c()(s.close,p({},s.closeOne,1===f.length))},a.a.createElement(l.b,{name:"Close",width:16,onClick:V})),a.a.createElement("div",{className:s.popContent},f[0]&&a.a.createElement("p",null,f[0]),f[1]&&a.a.createElement("p",null,f[1]))),visible:F,placement:r,getPopupContainer:function(t){var r=document.createElement("div");if(r.style.width="100%",r.style.position="absolute",r.style.height="0",N){var n=N(t);return n.parentNode.appendChild(r),n.parentNode}return t.parentNode.appendChild(r),e.parentNode||t.parentNode},overlayClassName:s.popover},F&&a.a.createElement("div",{style:{width:_,height:E,top:A,left:O,borderRadius:j,right:S,bottom:k},className:s.popup,id:"task-cover-block-".concat(w,"-").concat(g,"-").concat(b)}),e.children)}},3879:function(e,t,r){"use strict";e.exports=class{constructor(e){this.max=e,this.size=0,this.cache=new Map,this._cache=new Map}get(e,t){let r=this.cache.get(e);const n=t&&t.maxAge;let o;function a(){return o=o||Date.now(),o}if(r){if(r.expired&&a()>r.expired)r.expired=0,r.value=void 0;else if(void 0!==n){const e=n?a()+n:0;r.expired=e}return r.value}if(r=this._cache.get(e),r){if(r.expired&&a()>r.expired)r.expired=0,r.value=void 0;else if(this._update(e,r),void 0!==n){const e=n?a()+n:0;r.expired=e}return r.value}}set(e,t,r){const n=r&&r.maxAge,o=n?Date.now()+n:0;let a=this.cache.get(e);a?(a.expired=o,a.value=t):(a={value:t,expired:o},this._update(e,a))}keys(){const e=new Set,t=Date.now();for(const e of this.cache.entries())r(e);for(const e of this._cache.entries())r(e);function r(r){const n=r[0],o=r[1];(r[1].value&&!r[1].expired||o.expired>=t)&&e.add(n)}return Array.from(e.keys())}reset(){this.size=0,this.cache.clear(),this._cache.clear()}_update(e,t){this.cache.set(e,t),this.size++,this.size>=this.max&&(this.size=0,this._cache=this.cache,this.cache=new Map)}}},3881:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return s}));var n=r(0),o=r(1296);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function c(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var u=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"leftSidebarWidth",get:function(){return this._leftSidebarWidth}},{key:"rightSidebarWidth",get:function(){return this._rightSidebarWidth}},{key:"addChangedListener",value:function(e){var t=this;return this._listeners.push(e),function(){return t.removeChangedListener(e)}}},{key:"removeChangedListener",value:function(e){this._listeners=this._listeners.filter((function(t){return t!==e}))}},{key:"handleSidebarWidthChange",value:function(e){var t=e.leftWidth,r=e.rightWidth;null!=t&&this._leftSidebarWidth!==t&&(this._leftSidebarWidth=t,this._listeners.forEach((function(e){var r;null===(r=e.onLeftSidebarWidth)||void 0===r||r.call(e,t)}))),null!=r&&this._rightSidebarWidth!==r&&(this._rightSidebarWidth=r,this._listeners.forEach((function(e){var t;null===(t=e.onRightSidebarWidth)||void 0===t||t.call(e,r)})));var n=document.getElementsByClassName("main-wrapper")[0];if(n){var o=this._leftSidebarWidth+this._rightSidebarWidth;n.style.width="calc(100vw - ".concat(o,"px)"),n.style["margin-left"]="".concat(this._leftSidebarWidth,"px"),n.style["margin-right"]="".concat(this._rightSidebarWidth,"px"),window.dispatchEvent(new CustomEvent("DashboardSideBar.resize",{detail:{leftSidebarWidth:this._leftSidebarWidth,rightSidebarWidth:this._rightSidebarWidth}}))}}}],(t=null)&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function s(){var e=Object(o.a)();return Object(n.useEffect)((function(){return u.addChangedListener({onRightSidebarWidth:e})}),[]),{rightSidebarWidth:u.rightSidebarWidth}}c(u,"_leftSidebarWidth",0),c(u,"_rightSidebarWidth",0),c(u,"_listeners",[])},3884:function(e,t,r){"use strict";var n=r(1100),o=r(184),a=r(3898),i=r(3899),c=r(457);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function d(e,t,r){return(t=p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"eventInstance",void 0),d(this,"taskStateInfoKey",void 0),d(this,"taskStartKey",void 0),this.eventInstance=t;var r=window.appData.me;this.taskStateInfoKey="TASK_STATE_INFO_".concat(r.id),this.taskStartKey="TASK_START_".concat(r.id)}return t=e,r=[{key:"taskStateChanged",value:function(e){var t=e.taskId,r=e.stage,n=e.step,c=e.isProcess,l=Object(i.c)(t),u=n;u||(u=o.a.getObject(l).step),o.a.set(l,{isProcess:c,step:u,stage:r,taskId:t}),this.eventInstance.emit(a.a.TAKS_STATE_CHANGE,{isProcess:c,step:u,stage:r,taskId:t})}},{key:"onTaskStateChanged",value:function(e){var t=this;return this.eventInstance.addListener(a.a.TAKS_STATE_CHANGE,e),function(){t.eventInstance.removeListener(a.a.TAKS_STATE_CHANGE,e)}}},{key:"closeTask",value:function(){var e=this.getTaskStateInfo(),t=e.step,r=e.stage,n=e.taskId;this.taskStateChanged({isProcess:!1,step:t,stage:r,taskId:n}),this.eventInstance.emit(a.a.CLOSE)}},{key:"onCloseTask",value:function(e){var t=this;return this.eventInstance.addListener(a.a.CLOSE,e),function(){t.eventInstance.removeListener(a.a.CLOSE,e)}}},{key:"closeTaskConfirmModal",value:function(){this.eventInstance.emit(a.a.CLOSE_TASK_CONFIRM_MODAL)}},{key:"onCloseTaskConfirmModal",value:function(e){var t=this;return this.eventInstance.addListener(a.a.CLOSE_TASK_CONFIRM_MODAL,e),function(){t.eventInstance.removeListener(a.a.CLOSE_TASK_CONFIRM_MODAL,e)}}},{key:"giveUpTask",value:function(){this.eventInstance.emit(a.a.GIVE_UP)}},{key:"onGiveUpTask",value:function(e){var t=this;return this.eventInstance.addListener(a.a.GIVE_UP,e),function(){t.eventInstance.removeListener(a.a.GIVE_UP,e)}}},{key:"giveUpSuccess",value:function(){this.eventInstance.emit(a.a.GIVE_UP_SUCCESS)}},{key:"onGiveUpTaskSuccess",value:function(e){var t=this;return this.eventInstance.addListener(a.a.GIVE_UP_SUCCESS,e),function(){t.eventInstance.removeListener(a.a.GIVE_UP_SUCCESS,e)}}},{key:"clearTaskStateInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.TASK_ID.NOVICE_OFFER;o.a.remove(Object(i.c)(e))}},{key:"getTaskStateInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.TASK_ID.NOVICE_OFFER;return o.a.getObject(Object(i.c)(e))}},{key:"closeAllTask",value:function(){var e=this.getTaskStateInfo()||{},t=e.step,r=void 0===t?1:t,n=e.stage,o=e.taskId;this.taskStateChanged({isProcess:!1,step:r,stage:n,taskId:o}),this.eventInstance.emit(a.a.CLOSE_ALL_TASK)}},{key:"onCloseAllTask",value:function(e){var t=this;return this.eventInstance.addListener(a.a.CLOSE_ALL_TASK,e),function(){t.eventInstance.removeListener(a.a.CLOSE_ALL_TASK,e)}}},{key:"wakeUp",value:function(){if(o.a.get(this.taskStartKey)){var e=this.getTaskStateInfo(),t=e.step,r=e.stage,n=e.taskId;this.taskStateChanged({isProcess:!0,step:t,stage:r,taskId:n})}this.eventInstance.emit(a.a.WAKE_UP)}},{key:"onWakeUp",value:function(e){var t=this;return this.eventInstance.addListener(a.a.WAKE_UP,e),function(){t.eventInstance.removeListener(a.a.WAKE_UP,e)}}},{key:"shake",value:function(e){this.taskStateChanged(s(s({},e),{},{isProcess:!0})),this.eventInstance.emit(a.a.SHARK,e)}},{key:"onShake",value:function(e){var t=this;return this.eventInstance.addListener(a.a.SHARK,e),function(){t.eventInstance.removeListener(a.a.SHARK,e)}}}],l=[{key:"getInstance",value:function(){return this._taskEvent||(this._taskEvent=new e(new n.EventEmitter)),this._taskEvent}}],r&&f(t.prototype,r),l&&f(t,l),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,l}();d(h,"_taskEvent",void 0),t.a=h},3892:function(e,t,r){"use strict";r.d(t,"a",(function(){return k}));r(711);var n=r(356),o=r(0),a=r.n(o),i=r(5),c=r.n(i),l=r(2),u=r.n(l),s=r(532),f=r(43),d=r(3743),p={bookIconPopover:"BookIcon-module_bookIconPopover_-uyNA",bookTitle:"BookIcon-module_bookTitle_hK56I",bookIconSelector:"BookIcon-module_bookIconSelector_yaICm",iconSelectorTab:"BookIcon-module_iconSelectorTab_SP0xx",iconSelectorTabActive:"BookIcon-module_iconSelectorTabActive_l6Wg3",iconSelectorContent:"BookIcon-module_iconSelectorContent_3acOH",iconSelectorContentTab2:"BookIcon-module_iconSelectorContentTab2_sapYE",iconSelectorColorPicker:"BookIcon-module_iconSelectorColorPicker_W+uxH",spanActive:"BookIcon-module_spanActive_zUcmt"};function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function b(e,t,r){return t=w(t),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function E(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}var A=d.b.getSelectorIcons().URL_TYPE_LIST,S=["book-icon-alipay","book-icon-alibaba","book-icon-taobao"],k=function(e){var t=e.value,r=e.icon,n=a.a.useMemo((function(){return null!=t&&t.type?t:{type:"url",symbol:r||A[0]}}),[t,r]);return a.a.createElement("div",{tabIndex:"0","data-testid":"popover-bookicon",style:e.style,className:e.className},a.a.createElement(f.b,{className:c()(p.bookIcon,E({},p.iconSize,"icon"===n.type)),size:e.size,width:e.width,height:e.height,name:d.b.getSymbolName(n)}))},x=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(n=b(this,t,[e,r]),"updateIcon",(function(e,t){var r,o,a=n.state.bookIcon;if(a[e]!==t){var i=y({},a);if(i[e]=t,"type"===e)switch(t){case"icon":case"url":i.symbol=A[0];break;default:return}i.type="url",n.setState({bookIcon:i}),null===(r=(o=n.props).updateIcon)||void 0===r||r.call(o,i,n.props.book)}}));var o=e.value,a=e.icon;return n.state={bookIcon:null!=o&&o.type?o:{type:"url",symbol:a||A[0]}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),r=t,(o=[{key:"render",value:function(){var e=this,t=this.state.bookIcon,r=this.props.value,o=t.type||r.type||"url";return a.a.createElement(n.a,{trigger:this.props.disabled?"":"click",noArrow:!0,getPopupContainer:function(e){return e.parentNode},overlayClassName:p.bookIconPopover,placement:"bottomLeft",content:a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:p.bookIconSelector},a.a.createElement("ul",{className:p.iconSelectorTab},a.a.createElement("li",{onClick:function(){return e.updateIcon("type","url")},"data-testid":"bookicon-url",className:"url"===o?p.iconSelectorTabActive:""},__("默认"))),a.a.createElement("div",null,a.a.createElement("ul",{className:p.iconSelectorContent},A.filter((function(e){return!S.includes(e)})).map((function(t,r){return a.a.createElement("li",{key:r,onClick:function(){return e.updateIcon("symbol",t)}},a.a.createElement(f.b,{className:p.bookIcon,name:t,width:24}))}))))))},a.a.createElement("div",{tabIndex:"0","data-testid":"popover-bookicon",style:y({},this.props.style),className:this.props.className},a.a.createElement(f.b,{className:c()(p.bookIcon,E({},p.iconSize,"icon"===t.type)),size:this.props.size,width:this.props.width,height:this.props.height,name:d.b.getSymbolName(t)||r.symbol})))}}])&&v(r.prototype,o),i&&v(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,i}(o.Component);x.defaultProps={value:{}},x.propTypes={value:u.a.object,book:u.a.object,icon:u.a.string,updateIcon:u.a.func,disabled:u.a.bool,className:u.a.string,size:u.a.number,width:u.a.number,height:u.a.number};t.b=Object(s.d)((function(e){return e}))(x)},3898:function(e,t,r){"use strict";t.a={TAKS_STATE_CHANGE:"TAKS_STATE_CHANGE",CLOSE:"CLOSE",GIVE_UP:"GIVE_UP",CLOSE_TASK_CONFIRM_MODAL:"CLOSE_TASK_CONFIRM_MODAL",CLOSE_ALL_TASK:"CLOSE_ALL_TASK",WAKE_UP:"WAKE_UP",GIVE_UP_SUCCESS:"GIVE_UP_SUCCESS",SHARK:"SHARK",TASK_CLOSE_TIMES:"TASK_CLOSE_TIMES",LAST_CLOSE_TIME:"LAST_CLOSE_TIME"}},3899:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"c",(function(){return c}));var n=r(457),o=function(e,t,r){var o=n.TASK_INFO.tasks[e];if(!o)return null;var a=o.actions,i=a.indexOf(t);return i<0||i>=a.length-1?null:a[i+r]},a=function(e,t,r){var o=n.TASK_INFO.tasks[e];if(!o)return null;var a=o.actions;return a.indexOf(t)>a.indexOf(r)},i=function(e){var t,r=null===(t=document.querySelector('meta[name="pagename"]'))||void 0===t?void 0:t.getAttribute("content");return!((null==r?void 0:r.indexOf(e))<0)},c=function(e){var t=window.appData.me;return e===n.TASK_ID.NOVICE_OFFER?"TASK_STATE_INFO_".concat(null==t?void 0:t.id):"TASK_STATE_INFO_".concat(e,"_").concat(null==t?void 0:t.id)}},3937:function(e,t,r){"use strict";t.a={description:"index-module_description_3zdQm",title:"index-module_title_wvDlw",modalStyle:"index-module_modalStyle_mcrRn",qrCode:"index-module_qrCode_tO6RV",resultBox:"index-module_resultBox_kmldH",resultContentBox:"index-module_resultContentBox_DyUmc",checkIcon:"index-module_checkIcon_R-xBl",closeIcon:"index-module_closeIcon_3nBx0",img:"index-module_img_CCkgm"}},3939:function(e,t,r){"use strict";r.d(t,"a",(function(){return C})),r.d(t,"d",(function(){return I})),r.d(t,"c",(function(){return A}));var n=r(359),o=r(228),a=r.n(o),i=r(368),c=r(248),l=r(32);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=m(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var v=[{key:"all",label:__("全部")},{key:"doc",label:__("文档#compact")},{key:"sheet",label:__("表格")},{key:"board",label:__("画板")},{key:"table",label:__("数据表")},{key:"thread",label:__("话题")}],b=[{key:"all",label:__("时间不限")},{key:"1d",label:__("24 小时内")},{key:"7d",label:__("7 天内")},{key:"30d",label:__("30 天内")},{key:"183d",label:__("半年内")}],g=[{key:"content",label:__("内容#compact")},{key:"book",label:__("知识库#compact")},{key:"group",label:Object(c.h)()?__("知识小组#nav"):__("团队#nav")},{key:"user",label:__("用户#nav")}],w={book:"book",group:"group",related:"related",public:"public",organization:"organization"},_=[{key:w.related,label:__("与我相关")},{key:w.organization,label:__("空间")},{key:w.public,label:window.appData.isYuque?__("公开语雀"):__("内网公开")},{key:w.group,label:Object(c.h)()?__("当前知识小组#nav"):__("当前团队#nav")},{key:w.book,label:__("当前知识库")}],E={CONTENT_TYPES:v,TIMES:b,SEARCH_TYPES:g,SEARCH_TAB_LIST:_};function O(e,t){if(!e||!t)return!1;var r=e.abilities;return!!r&&!!r[t]}function A(e){return"string"!=typeof e?"":e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function S(e){var t;return"modal"===e&&"dashboard"===(null===(t=window.appData.matchCondition)||void 0===t?void 0:t.page)||window&&window.location&&"/search"===window.location.pathname}function k(e,t){if(!e||"/"===e)return w.public;"/"===e.charAt(0)&&(e=e.slice(1));var r=h(e.split("/").map((function(e){return e.trim()})),2),n=r[0],o=void 0===n?"":n,a=r[1];return(void 0===a?"":a)||t?w.book:o?w.group:void 0}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"public",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.embed,o=t.isDocCollaborator,a=(t.search,t.organization),i=t.group,l=t.me,u=t.share,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dropdown",f=l&&l.id,d=u&&u.token,p=[w.public,w.related],h=JSON.parse(JSON.stringify(_));if(r||e!==w.group||(p=[w.group]),f?([w.public,w.related].includes(e)&&(p=[w.public,w.related]),e===w.group&&(p=[w.group,w.public,w.related]),e===w.book&&(p=[w.book,w.group,w.public,w.related],(o||d)&&(p=[w.book,w.public,w.related]))):([w.public,w.related].includes(e)&&(p=[]),e===w.group&&(p=[w.group]),e===w.book&&(p=[w.book,w.group]),e===w.book&&d&&(p=[w.book])),null!=a&&a.id){var m,y=O(a,"read_home"),v=window.appData.organizations,b=null==v||null===(m=v.find((function(e){return e.id===a.id})))||void 0===m?void 0:m.member,g=n.organizationUser.ROLE,E=(null==b?void 0:b.role)===g.outsourcer;p=p.map((function(e){return e===w.public?E?null:y?w.organization:null:e===w.related?y?w.related:null:e===w.group?y?w.group:null:e})).filter((function(e){return e})),h=h.map((function(e){return e.key===w.organization&&(e.label=a.name),e}))}return p.includes(w.group)&&(h=h.map((function(e){return e.key===w.group&&("User"===(null==i?void 0:i.type)?e.label=__("当前用户"):"Wiki"===(null==i?void 0:i.type)?e.label=__("公共区"):e.label=Object(c.h)()?__("当前知识小组#nav"):__("当前团队#nav")),e}))),"dropdown"===s?p.map((function(e){return h.find((function(t){return t.key===e}))})):h.map((function(e){return p.includes(e.key)&&e})).filter((function(e){return e}))}var j={create_note:{key:"create_note",icon:"doc-type-note",label:__("新建小记"),label_en:"create note"},create_doc:{key:"create_doc",icon:"doc-type-default",label:__("新建文档"),label_en:"create doc"},create_sheet:{key:"create_sheet",icon:"doc-type-sheet",label:__("新建表格"),label_en:"create sheet"},create_board:{key:"create_board",icon:"doc-type-board",label:__("新建画板"),label_en:"create board"},create_table:{key:"create_table",icon:"doc-type-table",label:__("新建数据表"),label_en:"create table"},create_repo:{key:"create_repo",icon:"book-type-default",label:__("新建知识库"),label_en:"create repo"},edit_doc:{key:"edit_doc",icon:"edit-border",label:__("编辑文档"),url:"/:group_login/:book_slug/:doc_slug/edit"},enter_ppt:{key:"enter_ppt",icon:"present",label:__("进入演示模式"),noJump:!0,label_en:"ppt show"},view_notification:{key:"notification",icon:"nav-bell",label:__("查看消息"),noJump:!0,label_en:"open notification"},switch_theme:{key:"switch_theme",icon:"nav-night",label:__("切换主题模式"),noJump:!0,label_en:"switch dark mode theme"},publish_doc:{key:"publish_doc",icon:"publish-send",label:__("更新 / 发布"),noJump:!0,label_en:"Update / Publish"},sep:{key:"seperator",isSep:!0}},P={book_home:{key:"book_home",icon:"knowledge-base-home",label:__("知识库首页"),url:"/:group_login/:book_slug",label_en:"repo home page"},book_settings:{key:"book_settings",icon:"more-settings",label:__("知识库设置"),url:"/:group_login/:book_slug/settings/basic",label_en:"repo setting page"},group_home:{key:"group_home",icon:"left-arrow",label:":group_name",url:"/:group_login",label_en:"group home"},group_activity:{key:"group_activity",icon:"dynamic2",label:__("动态"),url:"/r/:group_login/activities",label_en:"group activity"},group_book:{key:"group_book",icon:"helpdoc",label:__("知识库"),url:l.c?"/:group_login":"/r/:group_login/books",label_en:"my books"},dashboard:{key:"dashboard",icon:"nav-clock",label:__("开始"),url:"/dashboard",label_en:"dashboard"},back_dashboard:{key:"back_dashboard",icon:"left-arrow",label:__("工作台"),url:"/dashboard"},note:{key:"note",icon:"note",label:__("小记"),url:"/dashboard/notes",label_en:"create note"},wiki:{key:"wiki",icon:"wiki",label:__("公共区"),url:"/dashboard/org_wiki",label_en:"common wiki"}};var C={GROUP_SELECT:"GROUP_SELECT",DOC_SELECT:"DOC_SELECT"},I=new a.a;t.b={SEARCH_TOOL_EVENTS:C,SEARCH_TYPES:g,CONTENT_TYPES:v,TIMES:b,SEARCH_TABS:w,JUMP_LINKS:P,searchToolEvent:I,can:O,escapeStrRegexp:A,getLabelByKey:function(e,t){return"TIMES"===e&&"all"===t?__("更新时间"):((E[e.toUpperCase()]||[]).filter((function(e){return e.key===t}))[0]||{}).label||null},getQueryByString:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).share,r={},n=new URLSearchParams(e);n.get("p")>250&&n.set("p",250);var o,a=p(n);try{for(a.s();!(o=a.n()).done;){var i=h(o.value,2),c=i[0],l=i[1];"false"!==l&&(r[c]=l)}}catch(e){a.e(e)}finally{a.f()}return t&&"Book"===t.target_type&&(r.token=t.token),r.type=r.type||"content",r.tab||(r.tab=k(r.scope,r.token)),r},gotoSearchPage:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.history,o=r.forceOpen,a=r.overwrite,i=r.handleMobileTabChange,c=r.handleDesktopTabChange,u=r.sence,s=r.isPublicPage,f=S(u);t.tab!==w.public&&t.tab!==w.related||(t.scope="/"),a?e=new URLSearchParams(t):(e=f?new URLSearchParams(window.location.search):new URLSearchParams({}),Object.keys(t).forEach((function(r){e.set(r,t[r])})));var d,m=p(e);try{for(m.s();!(d=m.n()).done;){var y=h(d.value,2),v=y[0];"false"===y[1]&&e.delete(v)}}catch(e){m.e(e)}finally{m.f()}if(i)return i(function(e){var t,r={},n=p(e);try{for(n.s();!(t=n.n()).done;){var o=h(t.value,2),a=o[0],i=o[1];r[a]=i}}catch(e){n.e(e)}finally{n.f()}return r}(e));var b="/search?".concat(e.toString());if(c)return c({},b);if(o)return window.open(b);var g=window.location.origin;if(s)return n?n.push("/r/organizations/homepage".concat(b)):window.open("".concat(g,"/r/organizations/homepage").concat(b));window.h5||f||l.c?n?n.push(b):window.location.href=b:window.open(b)},clacTabByScope:k,getSearchTypesByTab:function(e){var t=[];return e===w.book&&(t=["content"]),e===w.group&&(t=["content","book"]),e===w.public&&(t=["content","book","group","user"]),[w.related,w.organization].includes(e)&&(t=["content","book","group"]),g.filter((function(e){return t.includes(e.key)}))},getShowTabs:x,isSearchEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=e.isYuque,n=e.settings,o=void 0===n?{}:n,a=e.search,c=e.share&&e.share.token;return!(!a||!a.display)&&((!r||!1!==o.public_space_doc_search_enable)&&((!o||!1!==o.enable_search)&&(!i.a.shouldHiddenFeature("search")&&((a.scope||c)&&(t=k(a.scope,c)),x(t,e).length>0))))},isSearchPage:function(e){return window&&window.location&&"/search"===window.location.pathname},isSinglePage:S,generateMenuList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=e.organization,o=e.group,a=e.book,i=e.doc,c=e.me,u=e.subSence,s=null==n?void 0:n.id,d=(null==c?void 0:c.id)&&(!s||O(n,"read"));if("command"===t){var p=[];"book"===r&&null!=i&&i.id?"docEdit"===u?p.push.apply(p,[j.sep,O(i,"update")&&j.publish_doc]):p.push.apply(p,[j.sep,O(i,"update")&&j.edit_doc,"Doc"===(null==i?void 0:i.type)&&j.enter_ppt]):"book"===r?p.push.apply(p,[j.sep]):"group"===r?p.push.apply(p,[O(o,"create_book")&&j.create_repo,j.sep]):p.push.apply(p,[(null==c?void 0:c.id)&&j.create_repo,j.sep]);var h=[j.create_note,j.create_doc,j.create_sheet,j.create_board,j.create_table];return"book"===r&&O(a,"create_doc")?"docEdit"!==u&&p.unshift.apply(p,h):"book"!==r&&null!=c&&c.id&&p.unshift.apply(p,h),null!=c&&c.id&&p.push.apply(p,[!l.c&&(!s||O(n,"read"))&&j.view_notification,(!s||O(n,"read"))&&j.switch_theme]),1===p.length&&p[0].isSep&&p.pop(),p.filter(Boolean).map((function(e){return f({},e)}))}var m=[];return"book"===r&&null!=i&&i.id?m.push.apply(m,[P.book_home,O(a,"update")&&P.book_settings,O(o,"read")&&P.group_home,d&&P.back_dashboard]):"book"===r?m.push.apply(m,["bookSetting"===u&&P.book_home,O(a,"update")&&"bookSetting"!==u&&P.book_settings,O(o,"read")&&P.group_home,d&&P.back_dashboard]):"group"===r?"Group"===(null==o?void 0:o.type)?m.push.apply(m,[!l.c&&P.group_activity,P.group_book]):"Wiki"===(null==o?void 0:o.type)&&m.push.apply(m,[d&&P.dashboard]):m.push.apply(m,[d&&P.dashboard,(null==c?void 0:c.id)&&(s?O(n,"read")&&P.wiki:P.note)]),m.length&&m.push(j.sep),m.filter(Boolean).map((function(e){return f({},e)}))}}},398:function(e,t,r){"use strict";var n=r(130),o=r.n(n),a=r(190),i=r(105),c=r.n(i),l=r(106),u=r.n(l),s=r(107),f=r.n(s),d=r(110),p=r.n(d),h=r(117),m=r.n(h),y=r(118),v=r.n(y),b=r(126),g=r.n(b),w=r(530),_=r.n(w);function E(e){return a.ua.chrome?e.filter((function(e){return!/\.\w+\./.test(e)})):e}var O=E(o.a),A=E(o.a.normal),S=E(o.a.paid),k=[m.a,v.a,p.a,g.a],x=E(_()(k).concat([".pdf"])),j=E(_()(k.map((function(e){return e.paid}))).concat([".pdf"])),P=c.a,C=c.a.normal,I=c.a.paid,T=u.a,L=u.a.paid,D=f.a,N=f.a.paid,R=[".png",".bmp",".jpg",".jpeg",".gif",".webp",".heic",".heif"],M=[].concat(R,[".txt",".pdf",".mp4",".mov",".avi",".wmv",".rmvb",".mpeg",".rm"]);t.a={LOCAL_DOC_EXT:x,LOCAL_DOC_EXT_NORMAL:[],LOCAL_DOC_EXT_PAID:j,FILE_EXT:O,FILE_EXT_NORMAL:A,FILE_EXT_PAID:S,IMAGE_EXT:P,IMAGE_EXT_NORMAL:C,IMAGE_EXT_PAID:I,VIDEO_EXT:T,VIDEO_EXT_NORMAL:[],VIDEO_EXT_PAID:L,AUDIO_EXT:D,AUDIO_EXT_NORMAL:[],AUDIO_EXT_PAID:N,RELIABLE_IMAGE_EXT:R,RELIABLE_FILE_EXT:M,RELIABLE_LOCALDOC_EXT:[".pdf"]}},3982:function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"c",(function(){return w})),r.d(t,"b",(function(){return _}));var n=r(416),o=r.n(n),a=r(3879),i=r.n(a),c=r(96),l=r(32);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function p(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var h="Reader.localReadMode";var m=new(function(){return e=function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=void 0,(n=p(n="lruCache"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this.lruCache=new i.a(t)},(t=[{key:"initFromLocalStorage",value:function(){var e,t,r=this,n=(e=h,((t=c.a.get(e))?JSON.parse(t):null)||{});Object.keys(n).forEach((function(e){r.lruCache.set(e,n[e])}))}},{key:"set",value:function(e,t){this.lruCache.set(e,t)}},{key:"get",value:function(e){return this.lruCache.get(e)}},{key:"keys",value:function(){return this.lruCache.keys()}},{key:"delete",value:function(e){var t,r;this.lruCache.get(e)&&(null===(t=this.lruCache.cache)||void 0===t||t.delete(e),null===(r=this.lruCache._cache)||void 0===r||r.delete(e))}}])&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}())(500);function y(){var e,t={},r=s(m.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value,o=m.get(n);t[n]=o}}catch(e){r.e(e)}finally{r.f()}!function(e,t){c.a.set(e,JSON.stringify(t))}(h,t)}m.initFromLocalStorage();var v=o()(y,500);function b(e){return"doc-".concat(e)}function g(e){var t=b(e);try{return!!m.get(t)}catch(e){return console.error(e),!1}}function w(e,t){var r=b(e);try{m.set(r,t),v()}catch(e){console.error(e)}}function _(e){var t=b(e);try{m.delete(t),v()}catch(e){console.error(e)}}l.c&&window.addEventListener("beforeunload",y)},4041:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var n=r(11),o=r(202),a=function(e,t,r){var a=window.appData.note;return a?1===a.public:(e=e||window.appData.group,t=t||window.appData.book,r=r||window.appData.doc,!(!e||!t)&&(r?Object(o.c)({type:"doc",target:r,group:e,book:t}):Object(o.c)({type:"book",target:t,group:e}))===n.PRIVACY.public)},i=function(e,t,r){var n=window.appData.note;return n?!!n.is_public:(e=e||window.appData.share,t=t||window.appData.book,r=r||window.appData.doc,!!(e&&t&&r&&r.book_id===t.id)&&(0===e.status&&0===e.scope&&(e.target_id===r.book_id||e.target_id===r.id)))}},4043:function(e,t,r){"use strict";r.d(t,"a",(function(){return B})),r.d(t,"b",(function(){return q}));var n=r(725),o=r.n(n),a=r(0),i=r.n(a),c=r(532),l=r(33),u=r(416),s=r.n(u),f=r(1288),d=r(32),p=r(124),h=r(287),m=r(3982);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(){_=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function b(){}function g(){}function w(){}var E={};u(E,i,(function(){return this}));var O=Object.getPrototypeOf,A=O&&O(O(L([])));A&&A!==r&&n.call(A,i)&&(E=A);var S=w.prototype=b.prototype=Object.create(E);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==y(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(y(t)+" is not iterable")}return g.prototype=w,o(S,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function E(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){E(a,n,o,i,c,"next",e)}function c(e){E(a,n,o,i,c,"throw",e)}i(void 0)}))}}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function S(e,t,r){return(t=k(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}var x=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,"stash",new Set)},(t=[{key:"genStashKey",value:function(e){return"editModeStash-".concat(e)}},{key:"has",value:function(e){var t=this.genStashKey(e),r=this.stash.has(t);if(r)return r;var n=sessionStorage.getItem(t);return!!n&&(this.stash.add(t),n)}},{key:"add",value:function(e){var t=this.genStashKey(e);this.stash.add(t),sessionStorage.setItem(t,"1")}},{key:"delete",value:function(e){var t=this.genStashKey(e);this.stash.delete(t),sessionStorage.removeItem(t)}},{key:"clear",value:function(){this.stash.forEach((function(e){sessionStorage.removeItem(e)})),this.stash.clear()}}])&&A(e.prototype,t),r&&A(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function j(e){return P.apply(this,arguments)}function P(){return(P=O(_().mark((function e(t){var r,n,o,a,i,c;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.docSlug,o=t.bookId,a=t.includeWithData,i={id:n,book_id:o,mode:"edit",include_contributors:a,include_like:a,include_hits:a,merge_dynamic_data:!1,forceLocal:d.c&&(null===(r=window.appData)||void 0===r?void 0:r.settings.enable_desktop_force_local)},window.__forceFetchRemoteDocOnce__&&(delete i.forceLocal,delete window.__forceFetchRemoteDocOnce__),e.next=5,p.webProxy.docs.findOne(i,{ignoreGlobalMessage:!0,useOriginResp:!0});case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return I.apply(this,arguments)}function I(){return(I=O(_().mark((function e(t){var r,n,o,a,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.docSlug,n=t.bookId,o=t.includeWithData,a={id:r,book_id:n,include_contributors:o,include_like:o,include_hits:o,merge_dynamic_data:!1},e.next=4,p.webProxy.docs.findOne(a,{ignoreGlobalMessage:!0,useOriginResp:!0});case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=Object(a.createContext)({editMode:!1,setEditMode:o.a}),L=s()(function(){var e=O(_().mark((function e(t){var r,n,o,a,i,c,l;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.editMode,n=t.docSlug,o=t.bookId,a=t.dispatch,i=t.updateEditMode,c=t.includeWithData,l=t.docSlugRef,e.prev=1,!r){e.next=7;break}return e.next=5,N({docSlug:n,bookId:o,dispatch:a,updateEditMode:i,includeWithData:c,docSlugRef:l});case 5:e.next=9;break;case 7:return e.next=9,M({docSlug:n,bookId:o,includeWithData:c,dispatch:a,docSlugRef:l});case 9:e.next=18;break;case 11:if(e.prev=11,e.t0=e.catch(1),i(!1),"Unauthorized"!==e.t0.message){e.next=17;break}return a({type:"error/toggleLoginModal",payload:{visible:!0}}),e.abrupt("return");case 17:a({type:"doc/update",payload:{loaded:!0,error:e.t0}});case 18:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),100);function D(e,t){e({type:"doc/update",payload:w(w({loaded:!0,error:null},t),{},{readerEditModeData:null,like:t.like?{actioned:t.like.actioned,count:t.like.count}:null})})}function N(e){return R.apply(this,arguments)}function R(){return(R=O(_().mark((function e(t){var r,n,o,a,i,c,l,u,s,f,p,m;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.docSlug,n=t.bookId,o=t.dispatch,a=t.updateEditMode,i=t.includeWithData,c=t.docSlugRef,e.prev=1,Object(h.b)("start-loadDoc",""),o({type:"doc/update",payload:{loaded:!1,error:null,audits:null,readerEditModeData:null,hits:null,local:null,collab:null,created_by:"online"}}),Object(h.a)("loadStart"),e.next=7,j({docSlug:r,bookId:n,includeWithData:i});case 7:if((u=e.sent).data.slug===c.current){e.next=10;break}return e.abrupt("return");case 10:if(Object(h.a)("loadEnd",u.data),s=u.data.origin_format||u.data.format,!(d.c&&"markdown"===s||!(null!==(l=u.data.abilities)&&void 0!==l&&l.update))){e.next=17;break}throw(f=new Error).status=401,f;case 17:o({type:"doc/update",payload:w(w({loaded:!0,error:null},u.data),{},{readerEditModeData:{matchCondition:u.meta.matchCondition}})}),Object(h.b)("finish-loadDoc",""),e.next=35;break;case 21:if(e.prev=21,e.t0=e.catch(1),404!==e.t0.status&&401!==e.t0.status){e.next=34;break}return a(!1),e.next=27,C({docSlug:r,bookId:n,includeWithData:i});case 27:if((p=e.sent).data.slug===c.current){e.next=30;break}return e.abrupt("return");case 30:return Object(h.a)("loadEnd",p.data),m=w(w({},p.data),p.meta),D(o,m),e.abrupt("return");case 34:throw e.t0;case 35:case"end":return e.stop()}}),e,null,[[1,21]])})))).apply(this,arguments)}function M(e){return F.apply(this,arguments)}function F(){return(F=O(_().mark((function e(t){var r,n,o,a,i,c,l,u,s,f,d;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.docSlug,o=t.bookId,a=t.includeWithData,i=t.dispatch,c=t.docSlugRef,Object(h.b)("start-loadDoc",""),i({type:"doc/update",payload:{loaded:!1,error:null,audits:null,hits:null,readerEditModeData:null}}),Object(h.a)("loadStart"),l={},!(u=window.g_prefetch&&window.g_prefetch.fetchReadDocData)||u.used){e.next=13;break}return u.used=!0,e.next=10,u;case 10:l=e.sent,e.next=17;break;case 13:return e.next=15,C({docSlug:n,bookId:o,includeWithData:a});case 15:s=e.sent,l=s;case 17:if(l.data.slug===c.current){e.next=19;break}return e.abrupt("return");case 19:Object(h.a)("loadEnd",l.data),f=w(w({},l.data),l.meta),D(i,f),Object(h.b)("finish-loadDoc",""),d=null===(r=l)||void 0===r||null===(r=r.data)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.length,Object(h.b)("doc-size",d);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){var t=e.book,r="doc_embed"!==e.location.query.view,n=Object(l.useRouteMatch)("/:group/:book/:doc/edit"),o=!!(null==n?void 0:n.isExact),u=Object(a.useRef)(new x),s=Object(l.useParams)().doc,p=!!s,h=!1;d.c&&s&&(h=Object(m.a)(s));var y=!!d.c&&!h,b=v(Object(a.useState)(y||o),2),g=b[0],E=b[1],A=Object(c.e)(),S=Object(f.a)(s),k=Object(f.a)(o),j=i.a.useCallback(function(){var e=O(_().mark((function e(n){var o,a=arguments;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=!(a.length>1&&void 0!==a[1])||a[1],p&&(n?(L({dispatch:A,updateEditMode:E,editMode:!0,docSlug:s,bookId:t.id,includeWithData:r,docSlugRef:S}),u.current.add(s)):!n&&o&&u.current.delete(s),E(n)),A({type:"doc/update",payload:w({editMode:n},n?{}:{readerEditModeData:null})});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p,s]);Object(a.useEffect)((function(){window.__readerEditMode=g,window.__setEditMode=j}),[g,s]),Object(a.useEffect)((function(){o&&u.current.add(s)}),[o,s]),Object(a.useEffect)((function(){var e=function(){u.current.clear()};return window.addEventListener("beforeunload",e),function(){k.current||S.current||e(),window.removeEventListener("beforeunload",e)}}),[]),Object(a.useEffect)((function(){if(p){var e=d.c;d.c?e=!h:u.current.has(s)&&(e=!0);var n=e||o;E(n),L({dispatch:A,updateEditMode:E,editMode:n,docSlug:s,bookId:t.id,includeWithData:r,docSlugRef:S})}}),[p,s,o,r]);var P=g&&!h,C=i.a.useMemo((function(){return{editMode:P,setEditMode:j}}),[j,P]);return i.a.createElement(T.Provider,{value:C},e.children)}function q(){return Object(a.useContext)(T)}},4060:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return i}));var n="data-lark-popup-container",o="data-lark-doc-embed",a="doc_embed",i={POPUP_CREATE_DOC_MODAL:"popupCreateDocModal",POPUP_CREATE_SHEET_MODAL:"popupCreateSheetModal",POPUP_CREATE_BOARD_MODAL:"popupCreateBoardModal",POPUP_CREATE_TABLE_MODAL:"popupCreateTableModal",POPUP_CREATE_BOOK_MODAL:"popupCreateBookModal",POPUP_CREATE_GROUP_MODAL:"popupCreateGroupModal",POPUP_CREATE_FROM_TEMPLATE_MODAL:"popupCreateFromTemplateModal",POPUP_IMPORT_TO_BOOK_MODAL:"popupImportToBookModal"}},4061:function(e,t,r){"use strict";r.d(t,"a",(function(){return k})),r.d(t,"b",(function(){return j}));var n,o=r(0),a=r.n(o),i=Object.defineProperty,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,s=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,f=(e,t)=>{for(var r in t||(t={}))l.call(t,r)&&s(e,r,t[r]);if(c)for(var r of c(t))u.call(t,r)&&s(e,r,t[r]);return e},d=(e,t)=>{var r={};for(var n in e)l.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&c)for(var n of c(e))t.indexOf(n)<0&&u.call(e,n)&&(r[n]=e[n]);return r};(e=>{const t=class{constructor(e,r,n,o){if(this.version=e,this.errorCorrectionLevel=r,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let i=[];for(let e=0;e<this.size;e++)i.push(!1);for(let e=0;e<this.size;e++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();const c=this.addEccAndInterleave(n);if(this.drawCodewords(c),-1==o){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const r=this.getPenaltyScore();r<e&&(o=t,e=r),this.applyMask(t)}}a(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}static encodeText(r,n){const o=e.QrSegment.makeSegments(r);return t.encodeSegments(o,n)}static encodeBinary(r,n){const o=e.QrSegment.makeBytes(r);return t.encodeSegments([o],n)}static encodeSegments(e,r,o=1,i=40,l=-1,u=!0){if(!(t.MIN_VERSION<=o&&o<=i&&i<=t.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");let s,f;for(s=o;;s++){const n=8*t.getNumDataCodewords(s,r),o=c.getTotalBits(e,s);if(o<=n){f=o;break}if(s>=i)throw new RangeError("Data too long")}for(const e of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])u&&f<=8*t.getNumDataCodewords(s,e)&&(r=e);let d=[];for(const t of e){n(t.mode.modeBits,4,d),n(t.numChars,t.mode.numCharCountBits(s),d);for(const e of t.getData())d.push(e)}a(d.length==f);const p=8*t.getNumDataCodewords(s,r);a(d.length<=p),n(0,Math.min(4,p-d.length),d),n(0,(8-d.length%8)%8,d),a(d.length%8==0);for(let e=236;d.length<p;e^=253)n(e,8,d);let h=[];for(;8*h.length<d.length;)h.push(0);return d.forEach(((e,t)=>h[t>>>3]|=e<<7-(7&t))),new t(s,r,h,l)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let r=0;r<t;r++)for(let n=0;n<t;n++)0==r&&0==n||0==r&&n==t-1||r==t-1&&0==n||this.drawAlignmentPattern(e[r],e[n]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let r=t;for(let e=0;e<10;e++)r=r<<1^1335*(r>>>9);const n=21522^(t<<10|r);a(n>>>15==0);for(let e=0;e<=5;e++)this.setFunctionModule(8,e,o(n,e));this.setFunctionModule(8,7,o(n,6)),this.setFunctionModule(8,8,o(n,7)),this.setFunctionModule(7,8,o(n,8));for(let e=9;e<15;e++)this.setFunctionModule(14-e,8,o(n,e));for(let e=0;e<8;e++)this.setFunctionModule(this.size-1-e,8,o(n,e));for(let e=8;e<15;e++)this.setFunctionModule(8,this.size-15+e,o(n,e));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;a(t>>>18==0);for(let e=0;e<18;e++){const r=o(t,e),n=this.size-11+e%3,a=Math.floor(e/3);this.setFunctionModule(n,a,r),this.setFunctionModule(a,n,r)}}drawFinderPattern(e,t){for(let r=-4;r<=4;r++)for(let n=-4;n<=4;n++){const o=Math.max(Math.abs(n),Math.abs(r)),a=e+n,i=t+r;0<=a&&a<this.size&&0<=i&&i<this.size&&this.setFunctionModule(a,i,2!=o&&4!=o)}}drawAlignmentPattern(e,t){for(let r=-2;r<=2;r++)for(let n=-2;n<=2;n++)this.setFunctionModule(e+n,t+r,1!=Math.max(Math.abs(n),Math.abs(r)))}setFunctionModule(e,t,r){this.modules[t][e]=r,this.isFunction[t][e]=!0}addEccAndInterleave(e){const r=this.version,n=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(r,n))throw new RangeError("Invalid argument");const o=t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][r],i=t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][r],c=Math.floor(t.getNumRawDataModules(r)/8),l=o-c%o,u=Math.floor(c/o);let s=[];const f=t.reedSolomonComputeDivisor(i);for(let r=0,n=0;r<o;r++){let o=e.slice(n,n+u-i+(r<l?0:1));n+=o.length;const a=t.reedSolomonComputeRemainder(o,f);r<l&&o.push(0),s.push(o.concat(a))}let d=[];for(let e=0;e<s[0].length;e++)s.forEach(((t,r)=>{(e!=u-i||r>=l)&&d.push(t[e])}));return a(d.length==c),d}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let r=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let n=0;n<this.size;n++)for(let a=0;a<2;a++){const i=t-a,c=0==(t+1&2)?this.size-1-n:n;!this.isFunction[c][i]&&r<8*e.length&&(this.modules[c][i]=o(e[r>>>3],7-(7&r)),r++)}}a(r==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let r=0;r<this.size;r++){let n;switch(e){case 0:n=(r+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=r%3==0;break;case 3:n=(r+t)%3==0;break;case 4:n=(Math.floor(r/3)+Math.floor(t/2))%2==0;break;case 5:n=r*t%2+r*t%3==0;break;case 6:n=(r*t%2+r*t%3)%2==0;break;case 7:n=((r+t)%2+r*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][r]&&n&&(this.modules[t][r]=!this.modules[t][r])}}getPenaltyScore(){let e=0;for(let r=0;r<this.size;r++){let n=!1,o=0,a=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[r][i]==n?(o++,5==o?e+=t.PENALTY_N1:o>5&&e++):(this.finderPenaltyAddHistory(o,a),n||(e+=this.finderPenaltyCountPatterns(a)*t.PENALTY_N3),n=this.modules[r][i],o=1);e+=this.finderPenaltyTerminateAndCount(n,o,a)*t.PENALTY_N3}for(let r=0;r<this.size;r++){let n=!1,o=0,a=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[i][r]==n?(o++,5==o?e+=t.PENALTY_N1:o>5&&e++):(this.finderPenaltyAddHistory(o,a),n||(e+=this.finderPenaltyCountPatterns(a)*t.PENALTY_N3),n=this.modules[i][r],o=1);e+=this.finderPenaltyTerminateAndCount(n,o,a)*t.PENALTY_N3}for(let r=0;r<this.size-1;r++)for(let n=0;n<this.size-1;n++){const o=this.modules[r][n];o==this.modules[r][n+1]&&o==this.modules[r+1][n]&&o==this.modules[r+1][n+1]&&(e+=t.PENALTY_N2)}let r=0;for(const e of this.modules)r=e.reduce(((e,t)=>e+(t?1:0)),r);const n=this.size*this.size,o=Math.ceil(Math.abs(20*r-10*n)/n)-1;return a(0<=o&&o<=9),e+=o*t.PENALTY_N4,a(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let r=[6];for(let n=this.size-7;r.length<e;n-=t)r.splice(1,0,n);return r}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let r=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;r-=(25*t-10)*t-55,e>=7&&(r-=36)}return a(208<=r&&r<=29648),r}static getNumDataCodewords(e,r){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let r=[];for(let t=0;t<e-1;t++)r.push(0);r.push(1);let n=1;for(let o=0;o<e;o++){for(let e=0;e<r.length;e++)r[e]=t.reedSolomonMultiply(r[e],n),e+1<r.length&&(r[e]^=r[e+1]);n=t.reedSolomonMultiply(n,2)}return r}static reedSolomonComputeRemainder(e,r){let n=r.map((e=>0));for(const o of e){const e=o^n.shift();n.push(0),r.forEach(((r,o)=>n[o]^=t.reedSolomonMultiply(r,e)))}return n}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let r=0;for(let n=7;n>=0;n--)r=r<<1^285*(r>>>7),r^=(t>>>n&1)*e;return a(r>>>8==0),r}finderPenaltyCountPatterns(e){const t=e[1];a(t<=3*this.size);const r=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(r&&e[0]>=4*t&&e[6]>=t?1:0)+(r&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,r){return e&&(this.finderPenaltyAddHistory(t,r),t=0),t+=this.size,this.finderPenaltyAddHistory(t,r),this.finderPenaltyCountPatterns(r)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};let r=t;function n(e,t,r){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let n=t-1;n>=0;n--)r.push(e>>>n&1)}function o(e,t){return 0!=(e>>>t&1)}function a(e){if(!e)throw new Error("Assertion error")}r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=r;const i=class{constructor(e,t,r){if(this.mode=e,this.numChars=t,this.bitData=r,t<0)throw new RangeError("Invalid argument");this.bitData=r.slice()}static makeBytes(e){let t=[];for(const r of e)n(r,8,t);return new i(i.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!i.isNumeric(e))throw new RangeError("String contains non-numeric characters");let t=[];for(let r=0;r<e.length;){const o=Math.min(e.length-r,3);n(parseInt(e.substr(r,o),10),3*o+1,t),r+=o}return new i(i.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!i.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t,r=[];for(t=0;t+2<=e.length;t+=2){let o=45*i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t));o+=i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t+1)),n(o,11,r)}return t<e.length&&n(i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t)),6,r),new i(i.Mode.ALPHANUMERIC,e.length,r)}static makeSegments(e){return""==e?[]:i.isNumeric(e)?[i.makeNumeric(e)]:i.isAlphanumeric(e)?[i.makeAlphanumeric(e)]:[i.makeBytes(i.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)n(e,8,t);else if(e<16384)n(2,2,t),n(e,14,t);else{if(!(e<1e6))throw new RangeError("ECI assignment value out of range");n(6,3,t),n(e,21,t)}return new i(i.Mode.ECI,0,t)}static isNumeric(e){return i.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return i.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let r=0;for(const n of e){const e=n.mode.numCharCountBits(t);if(n.numChars>=1<<e)return 1/0;r+=4+e+n.bitData.length}return r}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let r=0;r<e.length;r++)"%"!=e.charAt(r)?t.push(e.charCodeAt(r)):(t.push(parseInt(e.substr(r+1,2),16)),r+=2);return t}};let c=i;c.NUMERIC_REGEX=/^[0-9]*$/,c.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,c.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=c})(n||(n={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};let r=t;r.LOW=new t(0,1),r.MEDIUM=new t(1,0),r.QUARTILE=new t(2,3),r.HIGH=new t(3,2),e.Ecc=r})(t=e.QrCode||(e.QrCode={}))})(n||(n={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};let r=t;r.NUMERIC=new t(1,[10,12,14]),r.ALPHANUMERIC=new t(2,[9,11,13]),r.BYTE=new t(4,[8,16,16]),r.KANJI=new t(8,[8,10,12]),r.ECI=new t(7,[0,0,0]),e.Mode=r})(t=e.QrSegment||(e.QrSegment={}))})(n||(n={}));var p=n,h={L:p.QrCode.Ecc.LOW,M:p.QrCode.Ecc.MEDIUM,Q:p.QrCode.Ecc.QUARTILE,H:p.QrCode.Ecc.HIGH},m=128,y="L",v="#FFFFFF",b="#000000",g=!1,w=4,_=.1;function E(e,t=0){const r=[];return e.forEach((function(e,n){let o=null;e.forEach((function(a,i){if(!a&&null!==o)return r.push(`M${o+t} ${n+t}h${i-o}v1H${o+t}z`),void(o=null);if(i!==e.length-1)a&&null===o&&(o=i);else{if(!a)return;null===o?r.push(`M${i+t},${n+t} h1v1H${i+t}z`):r.push(`M${o+t},${n+t} h${i+1-o}v1H${o+t}z`)}}))})),r.join("")}function O(e,t){return e.slice().map(((e,r)=>r<t.y||r>=t.y+t.h?e:e.map(((e,r)=>(r<t.x||r>=t.x+t.w)&&e))))}function A(e,t,r,n){if(null==n)return null;const o=r?w:0,a=e.length+2*o,i=Math.floor(t*_),c=a/t,l=(n.width||i)*c,u=(n.height||i)*c,s=null==n.x?e.length/2-l/2:n.x*c,f=null==n.y?e.length/2-u/2:n.y*c;let d=null;if(n.excavate){let e=Math.floor(s),t=Math.floor(f);d={x:e,y:t,w:Math.ceil(l+s-e),h:Math.ceil(u+f-t)}}return{x:s,y:f,h:u,w:l,excavation:d}}var S=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}();function k(e){const t=e,{value:r,size:n=m,level:i=y,bgColor:c=v,fgColor:l=b,includeMargin:u=g,style:s,imageSettings:_}=t,k=d(t,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),x=null==_?void 0:_.src,j=Object(o.useRef)(null),P=Object(o.useRef)(null),[C,I]=Object(o.useState)(!1);Object(o.useEffect)((()=>{if(null!=j.current){const e=j.current,t=e.getContext("2d");if(!t)return;let o=p.QrCode.encodeText(r,h[i]).getModules();const a=u?w:0,s=o.length+2*a,f=A(o,n,u,_),d=P.current,m=null!=f&&null!==d&&d.complete&&0!==d.naturalHeight&&0!==d.naturalWidth;m&&null!=f.excavation&&(o=O(o,f.excavation));const y=window.devicePixelRatio||1;e.height=e.width=n*y;const v=n/s*y;t.scale(v,v),t.fillStyle=c,t.fillRect(0,0,s,s),t.fillStyle=l,S?t.fill(new Path2D(E(o,a))):o.forEach((function(e,r){e.forEach((function(e,n){e&&t.fillRect(n+a,r+a,1,1)}))})),m&&t.drawImage(d,f.x+a,f.y+a,f.w,f.h)}})),Object(o.useEffect)((()=>{I(!1)}),[x]);const T=f({height:n,width:n},s);let L=null;return null!=x&&(L=a.a.createElement("img",{src:x,key:x,style:{display:"none"},onLoad:()=>{I(!0)},ref:P})),a.a.createElement(a.a.Fragment,null,a.a.createElement("canvas",f({style:T,height:n,width:n,ref:j},k)),L)}function x(e){const t=e,{value:r,size:n=m,level:o=y,bgColor:i=v,fgColor:c=b,includeMargin:l=g,imageSettings:u}=t,s=d(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let _=p.QrCode.encodeText(r,h[o]).getModules();const S=l?w:0,k=_.length+2*S,x=A(_,n,l,u);let j=null;null!=u&&null!=x&&(null!=x.excavation&&(_=O(_,x.excavation)),j=a.a.createElement("image",{xlinkHref:u.src,height:x.h,width:x.w,x:x.x+S,y:x.y+S,preserveAspectRatio:"none"}));const P=E(_,S);return a.a.createElement("svg",f({height:n,width:n,viewBox:`0 0 ${k} ${k}`},s),a.a.createElement("path",{fill:i,d:`M0,0 h${k}v${k}H0z`,shapeRendering:"crispEdges"}),a.a.createElement("path",{fill:c,d:P,shapeRendering:"crispEdges"}),j)}var j=e=>{const t=e,{renderAs:r}=t,n=d(t,["renderAs"]);return"svg"===r?a.a.createElement(x,f({},n)):a.a.createElement(k,f({},n))}},4074:function(e,t,r){"use strict";r(246);var n=r(123),o=(r(44),r(10)),a=(r(688),r(214)),i=r(0),c=r.n(i),l=r(2),u=r.n(l),s=r(1532),f=r(124),d=r(3608),p=r(4076),h="SelectGroup-module_selectGroup_PPbXd",m="SelectGroup-module_title_62QjW",y="SelectGroup-module_p1_iKXf5",v="SelectGroup-module_p2_vn1NJ",b="SelectGroup-module_content_J8Ejd",g="SelectGroup-module_empty_k0F6W",w="SelectGroup-module_checkContent_hhsnD",_="SelectGroup-module_checkboxWrapper_5aHCt",E="SelectGroup-module_footer_09b+K";function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function A(){A=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(L([])));E&&E!==r&&n.call(E,i)&&(w=E);var S=g.prototype=v.prototype=Object.create(w);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==O(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(O(t)+" is not iterable")}return b.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function S(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function k(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){S(a,n,o,i,c,"next",e)}function c(e){S(a,n,o,i,c,"throw",e)}i(void 0)}))}}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function j(e,t,r){return t=C(t),function(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,r||[],C(e).constructor):t.apply(e,r))}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function T(e,t,r){return(t=L(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}var D=function(e){var t=e.collection,r=e.onSelectChange,n=Object(i.useRef)(null);return c.a.createElement(a.a,{className:_,checked:t.checked,onChange:r},c.a.createElement(d.a,{textRef:n,title:t.name,placement:"bottom"},c.a.createElement("span",{className:"ellipsis-wrapper"},c.a.createElement("span",{ref:n,className:"ellipsis-text"},t.name))))},N=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return T(e=j(this,t,[].concat(n)),"state",{collectionList:[],modalVisible:!1,loading:!1}),T(e,"getCollectionList",k(A().mark((function t(){var r,n,o,a,i,c,l=arguments;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>0&&void 0!==l[0]?l[0]:"OTHER",n=l.length>1&&void 0!==l[1]?l[1]:null,e.setState({loading:!0}),o=e.props.record,a=o.action_tags,i=a&&a.split(","),t.next=8,f.webProxy.actionTags.list({action_type:"mark",v:new Date});case 8:(c=t.sent)&&(c.forEach((function(e){i&&i.includes(String(e.id))?e.checked=!0:e.checked=!1})),"CREATE"===r&&(c&&c.find((function(e){return e.id===n.id}))||c.unshift(n),c[0].checked=!0,e.setTags(c)),e.setState({collectionList:c,loading:!1}));case 10:case"end":return t.stop()}}),t)})))),T(e,"onUnMarks",k(A().mark((function t(){var r,n,a,i,c;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.collectionList,n=e.props,a=n.record,i=n.refetch,c=null==r?void 0:r.filter((function(e){return e.checked})),t.next=5,f.webProxy.mine.marks.destroy({action_id:a.id});case 5:t.sent&&(o.a.success(__("已取消收藏")),i&&i({type:"CANCEL",value:c,actionInfo:a}));case 7:case"end":return t.stop()}}),t)})))),T(e,"onSelectChange",(function(t,r){var n=e.state.collectionList;(null==n?void 0:n.find((function(e){return e.id===t.id}))).checked=r,e.setState({collectionList:n}),e.setTags(n)})),T(e,"setTags",function(){var t=k(A().mark((function t(r){var n,o,a,i;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null==r?void 0:r.filter((function(e){return e.checked})),o=e.props,a=o.record,i=o.refetch,t.next=4,f.webProxy.actionTags.setTags({action_id:a.id,tags:n});case 4:t.sent&&i({type:"SET_TAG",value:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),T(e,"createHandleOk",(function(t,r){var n=e.state.collectionList,o=e.props.refetch,a=null==n?void 0:n.filter((function(e){return e.checked}));e.getCollectionList(t,r),e.setState({modalVisible:!1}),o&&o({type:"CREATE",value:a}),document.getElementById("scrollContent").scrollTop=0})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),r=t,(a=[{key:"componentDidMount",value:function(){this.getCollectionList()}},{key:"render",value:function(){var e=this,t=this.state,r=t.collectionList,o=t.modalVisible;return c.a.createElement("div",null,c.a.createElement("div",{className:h},c.a.createElement("div",null,c.a.createElement("div",{className:m},c.a.createElement("p",{className:y},__("选择分组")),c.a.createElement("p",{className:v},__("你可以选择分组或直接")," ",c.a.createElement("a",{onClick:this.onUnMarks},__("取消收藏")))),c.a.createElement("div",{className:b,id:"scrollContent"},c.a.createElement(n.a,{spinning:this.state.loading},!(null!=r&&r.length)&&c.a.createElement("div",{className:g},__("暂无分组")),r.length>0&&(null==r?void 0:r.map((function(t){return c.a.createElement("div",{key:t.id,className:w},c.a.createElement(D,{collection:t,onSelectChange:function(r){return e.onSelectChange(t,r.target.checked)}}))}))))),c.a.createElement("div",{className:E,onClick:function(){e.setState({modalVisible:!0})}},c.a.createElement(s.default,{style:{marginRight:"4px"}}),__("新建分组")))),o&&c.a.createElement(p.a,{type:"CREATE",isModalVisible:o,handleOk:this.createHandleOk,handleCancel:function(){e.setState({modalVisible:!1})}}))}}])&&x(r.prototype,a),i&&x(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,i}(c.a.Component);N.propTypes={isModalVisible:u.a.bool,refetch:u.a.func,record:u.a.object};t.a=N},4076:function(e,t,r){"use strict";r(59);var n=r(30),o=(r(57),r(13)),a=(r(37),r(8)),i=(r(154),r(22)),c=r(0),l=r.n(c),u=r(2),s=r.n(u),f=r(124),d="CollectionModal-module_collectionModal_sJKOy",p="CollectionModal-module_collectionModalContent_6NiUd";function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(){m=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",y="executing",v="completed",b={};function g(){}function w(){}function _(){}var E={};u(E,i,(function(){return this}));var O=Object.getPrototypeOf,A=O&&O(O(L([])));A&&A!==r&&n.call(A,i)&&(E=A);var S=_.prototype=g.prototype=Object.create(E);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==h(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=d;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?v:p,u.arg===b)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(h(t)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=u(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function y(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){y(a,n,o,i,c,"next",e)}function c(e){y(a,n,o,i,c,"throw",e)}i(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function w(e){var t=e.isModalVisible,r=e.handleOk,u=e.handleCancel,s=e.type,h=e.value,y=b(i.a.useForm(),1)[0],g=b(Object(c.useState)(!0),2),w=g[0],_=g[1];function E(){return(E=v(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.webProxy.actionTags.create({name:t,action_type:"mark"});case 2:(n=e.sent)&&(r("CREATE",n),u());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=v(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.webProxy.actionTags.update({id:h.id,name:t});case 2:(n=e.sent)&&(r("UPDATE",n),u());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){var e=y.getFieldsValue(),t=null==e?void 0:e.name;!t||t.length>50||("CREATE"===s?function(e){E.apply(this,arguments)}(t):function(e){O.apply(this,arguments)}(t))}return Object(c.useEffect)((function(){y.setFieldsValue({name:"EDIT"===s?h.name:null}),_("EDIT"!==s)}),[]),l.a.createElement("div",null,l.a.createElement(n.a,{title:"CREATE"===s?__("新建分组"):__("编辑分组"),width:400,visible:t,onCancel:u,className:d,zIndex:9999,footer:[l.a.createElement(a.a,{key:"back",onClick:u},__("取消")),l.a.createElement(a.a,{key:"submit",type:"primary",onClick:A,disabled:w},__("确定"))]},l.a.createElement("div",{className:p},l.a.createElement(i.a,{form:y,onValuesChange:function(e){e&&e.name&&e.name.trim()?_(!1):_(!0),y.setFieldsValue(e)},layout:"vertical"},l.a.createElement(i.a.Item,{label:__("分组名称"),name:"name",rules:[{max:50,message:__("请调整分组名称，不要超过50个字")}]},l.a.createElement(o.a,{className:"collection-input",placeholder:__("请输入分组名称"),onKeyDown:function(e){13===(e.keyCode||e.which)&&(e.preventDefault(),A())},autocomplete:"off"}))))))}w.propTypes={isModalVisible:s.a.bool,handleOk:s.a.func,handleCancel:s.a.func,type:s.a.string,value:s.a.object};t.a=w},4078:function(e,t,r){"use strict";var n=r(3939);r.d(t,"a",(function(){return n.a})),r.d(t,"c",(function(){return n.d})),r.d(t,"b",(function(){return n.b}))},4079:function(e,t,r){"use strict";var n=r(0),o=r.n(n);t.a=function(){return o.a.createElement("div",null)}},4083:function(e,t,r){"use strict";r(711);var n=r(356),o=(r(144),r(60)),a=(r(44),r(10)),i=r(0),c=r.n(i),l=r(532),u=r(2),s=r.n(u),f=r(464),d=r(5),p=r.n(d),h=r(124),m=r(4074),y=r(43),v=r(112),b=r(449),g=r(32),w="index-module_icon_hhi0u",_="index-module_markedHover_PaCO8",E="index-module_markedNormal_lQdFH",O="index-module_smallMark_FfS6d",A="index-module_mark_3qbSl",S="index-module_markIconContent_GN4G+",k="index-module_isMiniTypeMark_Q9Bf6",x="index-module_iconMarked_vNmDS";function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j.apply(null,arguments)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var I=function(e){var t=e.target,r=e.isMiniType,l=e.me,u=void 0===l?{}:l,s=e.reGetData,f=e.size,d=void 0===f?"normal":f,j=e.iconSize,C=e.getPopupContainer,I=e.style,T=void 0===I?{}:I,L=Object(b.a)().isDarkMode,D=P(Object(i.useState)(!1),2),N=D[0],R=D[1],M=P(Object(i.useState)(),2),F=M[0],B=M[1],q=P(Object(i.useState)(!1),2),z=q[0],G=q[1],U=P(Object(i.useState)(t.action_tags||null),2),W=U[0],V=U[1];Object(i.useEffect)((function(){G(!!t.id)}),[t.id]),Object(i.useEffect)((function(){V(t.action_tags)}),[t.action_tags]);var H={target_type:e.targetType,id:F||t&&t.id,target_id:t&&t.target_id,action_tags:W},K=c.a.createElement(m.a,{record:H,refetch:function(e){var t=e.type,r=e.value,n=r&&r.map((function(e){return e.id})).join();V(n),"CANCEL"===t&&(G(!1),R(!1),V(null),s&&s())}}),Y="small"===d?O:A,Q=L?c.a.createElement(y.b,{name:"icon-collected",width:j,height:j,color:"#D2A638"}):c.a.createElement("img",{width:j,height:j,src:"https://gw.alipayobjects.com/mdn/rms_a6038f/afts/img/A*LpjOSJolIloAAAAAAAAAAAAAARQnAQ",alt:"avatar"}),Z=L?c.a.createElement(y.b,{name:"icon-collect",width:j,height:j}):c.a.createElement("img",{width:j,height:j,src:"https://gw.alipayobjects.com/mdn/rms_a6038f/afts/img/A*s0VKTqCIM0EAAAAAAAAAAAAAARQnAQ",alt:"avatar"});return c.a.createElement(n.a,{type:"menu",trigger:["click"],content:K,visible:N,onVisibleChange:function(e){if(!u||!u.id)return null;R(e)},destroyPopupOnHide:!0,getPopupContainer:C,placement:r?"bottomRight":"bottomLeft"},c.a.createElement("div",{className:r?k:Y,style:T},c.a.createElement(o.a,{title:r?__("收藏"):null,placement:"bottom"},c.a.createElement("div",{className:p()(N&&r?_:E,"select-group-mark-wrapper")},z?c.a.createElement("div",{className:S,"data-testid":"already-mark",onClick:function(){R(!0)}},window.h5?Q:c.a.createElement(y.b,{name:"star",className:p()(w,x),size:j||12}),!r&&c.a.createElement("span",null,__("已收藏"))):c.a.createElement("div",{className:S,"data-testid":"select-group-mark-entry",onClick:function(){!function(){var r,n=e.targetType,o=e.goLogin,i=window.appData,l=i.sharePage,f=i.share,d=i.isCollaborationPage;Object(v.spmClick)("c322275.d348447"),d&&(r=n),u.id||!o?h.webProxy.mine.marks.create({target_type:n,target_id:t.target_id,share_target_type:l&&f&&f.target_type,collaboration_target_type:r}).then((function(e){G(!0),B(e.id),setTimeout((function(){R(!0)}),100);var t=window.appData,r=t.organization,n=t.defaultSpaceHost,o=r&&r.id,i="/dashboard/collections",l=i;0===e.organization_id&&o&&(l="".concat(n).concat(i));var u=c.a.createElement("a",{href:l},"收藏");g.c?a.a.success(c.a.createElement("span",null,__("收藏成功"))):a.a.success(c.a.createElement("span",null,__("收藏成功，前往 {toastText} 查看",{toastText:u}))),s&&s()})).catch((function(e){a.a.error(e.message)})):o()}()}},window.h5?Z:c.a.createElement(y.b,{name:"star-outlined",className:w,size:j||12}),!r&&c.a.createElement("span",null,__("收藏")))))))};I.defaultProps={me:window.appData.me,isMobile:window.h5,getPopupContainer:function(e){return e.parentNode}},I.propTypes={isMiniType:s.a.bool,target:s.a.object,targetType:s.a.oneOf(f.default.ALLOW_MARK_TARGET_TYPES).isRequired,style:s.a.object,onStatusChange:s.a.func,me:s.a.object,isMobile:s.a.bool,iconSize:s.a.number,getPopupContainer:s.a.func};t.a=Object(l.d)()((function(e){var t=e.dispatch;return c.a.createElement(I,j({},e,{goLogin:function(){t({type:"error/toggleLoginModal",payload:{visible:!0}})}}))}))},4094:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(729),i=r(1714),c=r(1396),l=r(3937);t.a=function(e){var t=e.verifyStatus,r=e.seconds,u=Object(n.useCallback)((function(){switch(t){case a.CERTIFICATION_STATUS.certified:return o.a.createElement("div",{className:l.a.resultContentBox},o.a.createElement(i.default,{className:l.a.checkIcon}),o.a.createElement("div",{className:l.a.title},__("实名认证成功，{seconds}s 后自动关闭",{seconds:r})),o.a.createElement("div",{className:l.a.description},__("实名认证成功，可继续进行分享操作")));case a.CERTIFICATION_STATUS.fail:return o.a.createElement("div",{className:l.a.resultContentBox},o.a.createElement(c.default,{className:l.a.closeIcon}),o.a.createElement("div",{className:l.a.title},__("认证失败")),o.a.createElement("div",{className:l.a.description},__("抱歉，系统识别你的账号存在风险，未通过安全认证")));default:return null}}),[t,r]);return o.a.createElement("div",null,u(),o.a.createElement("div",{className:l.a.resultBox},o.a.createElement("img",{src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*OaxJQpBX8s8AAAAAAAAAAAAADvuFAQ/original"})))}},4099:function(e,t,r){"use strict";r.d(t,"b",(function(){return I})),r.d(t,"a",(function(){return L}));var n=r(52),o=r(526),a=r(51),i=r(729),c=r(11),l=r(738),u=r(215),s=(r(44),r(10)),f=r(0),d=r.n(f),p=r(4061),h=r(3834),m=r.n(h),y=r(4094),v=r(3937);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(){g=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function w(){}function _(){}var E={};u(E,i,(function(){return this}));var O=Object.getPrototypeOf,A=O&&O(O(L([])));A&&A!==r&&n.call(A,i)&&(E=A);var S=_.prototype=v.prototype=Object.create(E);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==b(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(b(t)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=u(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function w(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){w(a,n,o,i,c,"next",e)}function c(e){w(a,n,o,i,c,"throw",e)}i(void 0)}))}}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t,r=e.onResult,o=e.onError,a=E(Object(f.useState)(i.CERTIFICATION_STATUS.init),2),c=a[0],l=a[1],u=E(Object(f.useState)(!1),2),h=u[0],b=u[1],w=E(Object(f.useState)(3),2),O=w[0],A=w[1],S=E(Object(f.useState)(""),2),k=S[0],x=S[1],j=Object(f.useRef)(0),P=function(){var e=_(g().mark((function e(){var a,c,u,f;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j.current+=1,!(j.current>80)){e.next=6;break}return s.a.warning(__("人脸认证超时")),r(i.CERTIFICATION_STATUS.init,i.CERTIFICATION_STATUS.init,!0),e.abrupt("return");case 6:return e.next=8,n.a.mine.user_certification();case 8:if((null==(a=e.sent)?void 0:a.certification_status)!==i.CERTIFICATION_STATUS.init){e.next=13;break}return b(!0),t=setTimeout(P,3e3),e.abrupt("return");case 13:c=null==a?void 0:a.share_certification,u=null==a?void 0:a.face_certification,e.t0=c,e.next=e.t0===i.CERTIFICATION_STATUS.certified?18:22;break;case 18:return l(i.CERTIFICATION_STATUS.certified),r(c,u,!1),f=setInterval((function(){A((function(e){return e<=1&&(r(c,u,!0),clearInterval(f)),e-1}))}),1e3),e.abrupt("break",24);case 22:return(null==a?void 0:a.certification_status)===i.CERTIFICATION_STATUS.fail?(l(i.CERTIFICATION_STATUS.fail),clearTimeout(t),setTimeout((function(){r(c,u,!0)}),1e3)):t=setTimeout(P,3e3),e.abrupt("break",24);case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(0),clearTimeout(t),o(e.t1);case 30:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=_(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.faceCertify.reset();case 2:e.sent.success&&P();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function I(){return(I=_(g().mark((function e(){var t,r,o,a,i,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.origin,e.prev=1,r="".concat(t,"/r/face_certify"),e.next=5,n.a.accounts.getAuthToken({url:r});case 5:o=e.sent,(a=o.token)&&(i=m.a.stringify({url:r,token:a}),(c="".concat(t,"/r/auth?").concat(i))&&x(c)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),s.a.error(__("获取扫码链接失败"));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}Object(f.useEffect)((function(){return C(),function(){clearTimeout(t)}}),[]),Object(f.useEffect)((function(){!function(){I.apply(this,arguments)}()}),[]);var T=Object(f.useCallback)((function(){switch(c){case i.CERTIFICATION_STATUS.certified:return d.a.createElement(y.a,{verifyStatus:i.CERTIFICATION_STATUS.certified,seconds:O});case i.CERTIFICATION_STATUS.fail:return d.a.createElement(y.a,{verifyStatus:i.CERTIFICATION_STATUS.fail});default:return h?d.a.createElement("div",null,d.a.createElement("div",{className:v.a.title},__("扫描成功")),d.a.createElement("div",{className:v.a.description},__("请继续在手机上完成实名认证"))):d.a.createElement("div",null,d.a.createElement("div",{className:v.a.title},__("请使用支付宝 APP 扫码完成实名认证")),d.a.createElement("div",{className:v.a.description},__("使用互联网公开分享功能需要进行实名认证")))}}),[c,O,h]);return d.a.createElement("div",null,d.a.createElement("img",{className:v.a.img,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*OaxJQpBX8s8AAAAAAAAAAAAADvuFAQ/original"}),T(),c===i.CERTIFICATION_STATUS.init?d.a.createElement(p.b,{value:k,size:232,className:v.a.qrCode}):null)},S=function(e){return new Promise((function(t,r){var n,o=e.confirm({content:d.a.createElement(A,{onResult:function(e,r,a){n={shareCertification:e,faceCertification:r},a&&(t(n),o.destroy())},onError:function(e){r(e)}}),onCancel:function(){n&&t(n)},className:v.a.modalStyle,bodyStyle:{textAlign:"center"},width:550,closable:!0,icon:d.a.createElement(d.a.Fragment,null),cancelButtonProps:{style:{display:"none"}},okButtonProps:{style:{display:"none"}}})}))},k=r(3476);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function j(){j=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(L([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==x(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(x(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function P(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function C(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){P(a,n,o,i,c,"next",e)}function c(e){P(a,n,o,i,c,"throw",e)}i(void 0)}))}}var I=function(){var e=C(j().mark((function e(t,r,o,l,s,f,d,p){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof f){e.next=6;break}return e.next=3,f({public:t});case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:if(t!==c.PRIVACY.public){e.next=28;break}if(Object(u.a)()&&!l.interests[a.INTEREST_CODE.create_public_resource]){e.next=12;break}return e.next=10,T(t,r,o,s,d,p);case 10:case 18:e.next=26;break;case 12:return e.next=14,n.a.mine.user_certification();case 14:if(e.sent.share_certification!==i.CERTIFICATION_STATUS.certified){e.next=20;break}return e.next=18,T(t,r,o,s,d,p);case 20:return e.next=22,S(s);case 22:if(e.sent.shareCertification!==i.CERTIFICATION_STATUS.certified){e.next=26;break}return e.next=26,T(t,r,o,s,d,p);case 26:e.next=30;break;case 28:return e.next=30,T(t,r,o,s,d,p);case 30:case"end":return e.stop()}}),e)})));return function(t,r,n,o,a,i,c,l){return e.apply(this,arguments)}}(),T=function(){var e=C(j().mark((function e(t,r,n,a,i,s){var f,d;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==c.PRIVACY.public){e.next=29;break}if(Object(u.a)()){e.next=23;break}return e.prev=2,e.next=5,null==i?void 0:i({public:t});case 5:e.next=23;break;case 7:if(e.prev=7,e.t0=e.catch(2),f=r===o.b.DOC?l.TargetType.Doc:l.TargetType.Book,d=r===o.b.DOC?l.WorkflowType.DocPublicPrivacyWorkflow:l.WorkflowType.BookPublicPrivacyWorkflow,(null===e.t0||void 0===e.t0?void 0:e.t0.errorCode)!==c.PUBLIC_SET_CODE.public_has_approve){e.next=14;break}return window.open("/g/approve_workflow?target_id=".concat(n.id,"&target_type=").concat(f,"&type=").concat(d)),e.abrupt("return");case 14:if((null===e.t0||void 0===e.t0?void 0:e.t0.errorCode)!==c.PUBLIC_SET_CODE.public_need_approve){e.next=22;break}return e.next=17,Object(k.f)(r,a);case 17:if(e.sent){e.next=20;break}return e.abrupt("return");case 20:return window.open("/g/approve_workflow?target_id=".concat(n.id,"&target_type=").concat(f,"&type=").concat(d)),e.abrupt("return");case 22:throw e.t0;case 23:if(!Object(u.a)()){e.next=29;break}return e.next=26,Object(k.f)(r,a);case 26:if(e.sent){e.next=29;break}return e.abrupt("return");case 29:if(Object(u.a)()||t===c.PRIVACY.public||s!==c.PRIVACY.public){e.next=35;break}return e.next=32,Object(k.g)(a);case 32:if(e.sent){e.next=35;break}return e.abrupt("return");case 35:return Object(u.a)()||t!==c.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE||(t=c.PRIVACY.private),e.next=38,null==i?void 0:i({public:t});case 38:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,r,n,o,a,i){return e.apply(this,arguments)}}(),L=function(){var e=C(j().mark((function e(t,r,o,l){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==c.PRIVACY.public){e.next=22;break}if(Object(u.a)()&&!r.interests[a.INTEREST_CODE.share_note]){e.next=6;break}return e.next=4,l(t);case 4:case 12:e.next=20;break;case 6:return e.next=8,n.a.mine.user_certification();case 8:if(e.sent.share_certification!==i.CERTIFICATION_STATUS.certified){e.next=14;break}return e.next=12,l(t);case 14:return e.next=16,S(o);case 16:if(e.sent.shareCertification!==i.CERTIFICATION_STATUS.certified){e.next=20;break}return e.next=20,l(t);case 20:e.next=24;break;case 22:return e.next=24,l(t);case 24:case"end":return e.stop()}}),e)})));return function(t,r,n,o){return e.apply(this,arguments)}}()},4125:function(e,t,r){"use strict";var n=r(3641);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(null,arguments)}t.a=function(e){var t=window.appData,r=t.isYuque,a=t.organization;return React.createElement(n.a,o({},e,{isYuque:r,organization:a}))}},4323:function(e,t,r){"use strict";r(1022);var n=r(561),o=r(0),a=r.n(o),i=r(2734);t.a=function(e){var t=e.book,r=e.onDelete,o=e.closeModal,c=e.visible;return a.a.createElement(i.a,{visible:c,title:__("删除知识库"),content:a.a.createElement(n.a,{description:__("正在删除知识库 {name}，该操作不可逆，一旦操作成功，知识库下的所有内容将会删除。请输入下面内容再次确认操作。",{name:a.a.createElement("span",{className:"highlight_name"},t.name)}),type:"warning",message:void 0}),buttonText:__("确定删除 {name}",{name:t.name}),slug:t.slug,onOk:function(){return r(t)},onCancel:o})}},4366:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(52);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){a=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),c=new T(n||[]);return i(a,"_invoke",{value:j(e,r,c)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",b={};function g(){}function w(){}function _(){}var E={};f(E,l,(function(){return this}));var O=Object.getPrototypeOf,A=O&&O(O(L([])));A&&A!==r&&n.call(A,l)&&(E=A);var S=_.prototype=g.prototype=Object.create(E);function k(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,i,c,l){var u=p(e[a],e,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==o(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,c,l)}),(function(e){r("throw",e,c,l)})):t.resolve(f).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,l)}))}l(u.arg)}var a;i(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=h;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=p(t,r,n);if("normal"===u.type){if(o=n.done?v:m,u.arg===b)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(o(t)+" is not iterable")}return w.prototype=_,i(S,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,f(e,s,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(x.prototype),f(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),f(S,s,"Generator"),f(S,l,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function i(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function c(e){return l.apply(this,arguments)}function l(){var e;return e=a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.mine.commonUsed({},{useOriginResp:!0});case 2:r=e.sent,t({type:"me/update",payload:{commonUsedBooks:r.data.books,commonUsedGroups:r.data.groups}});case 4:case"end":return e.stop()}}),e)})),l=function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){i(a,n,o,c,l,"next",e)}function l(e){i(a,n,o,c,l,"throw",e)}c(void 0)}))},l.apply(this,arguments)}},503:function(e,t,r){"use strict";r(3073);var n=r(1335);r(938);t.a=n.b},5194:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));r(144);var n=r(60),o=r(0),a=r(43),i=r(5),c=r.n(i),l="styles-module_iconAction_3ZFFk",u=["iconName","icon","className"],s=["tooltip"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(null,arguments)}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=function(e){var t=e.iconName,r=e.icon,n=e.className,i=d(e,u);return o.createElement("button",f({type:"button"},i,{className:c()(l,n)}),t?o.createElement(a.b,{name:t,size:20}):r)},h=function(e){var t=e.tooltip,r=d(e,s);return t?o.createElement(n.a,{placement:r.placement||"bottom",title:t},o.createElement(p,r)):o.createElement(p,r)}},526:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o}));var n=function(e){return e.NOTE="NOTE",e.BOOK="BOOK",e.DOC="DOC",e.GROUP="GROUP",e}({}),o=function(e){return e.PERSON="PERSON",e.ORG="ORG",e.PUBLIC_PAGE="PUBLIC_PAGE",e.INTERNAL="INTERNAL",e}({})},5261:function(e,t,r){"use strict";r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return p})),r.d(t,"a",(function(){return h})),r.d(t,"c",(function(){return y})),r.d(t,"d",(function(){return v})),r.d(t,"b",(function(){return b}));var n=r(365),o=r(85);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){}function f(e,t,r){return e.forEach((function(e){var n,o=(null===(n=e.children)||void 0===n?void 0:n.map((function(e){return e.uuid})))||[];t[e.uuid]={id:e.uuid,parentId:r,children:o,hasChildren:!!o.length,isExpanded:!1,data:e},e.children&&f(e.children,t,e.uuid)})),t}var d="VIRTUAL_ROOT";function p(e){var t=Object(n.generateTreeByTocItems)(e),r={id:d,children:t.map((function(e){return e.uuid})),hasChildren:!!t.length,isExpanded:!1,isChildrenLoading:!1,data:{},parentId:d},o=u({},d,r);return f(t,o,d),{rootId:d,items:o}}function h(e,t){var r=e.items[t];if(!r)return[];for(var n=[];r.parentId!==d;)n.push(r.parentId),r=e.items[r.parentId];return n}function m(e,t){var r=[];if(t){!function t(n){if(n){var o=function(t){return e.find((function(e){return e.uuid===t.parent_uuid}))}(n);o&&(r.push(o.uuid),o.level>0&&t(o))}}(e.find((function(e){return e.uuid===t})))}return r}function y(e,t,r){var n,a="all"===(n=t)?1/0:n?parseInt(n,10)+1:o.DEFAULT_DISPLAY_LEVEL;if(a===1/0)return e.map((function(e){return e.uuid}));var l,u,s=[],f=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}(e);try{for(f.s();!(l=f.n()).done;){var d=l.value;d.level<a-1&&s.push(d.uuid)}}catch(e){f.e(e)}finally{f.f()}r&&r.length&&((u=s).push.apply(u,i(r)),s=r.reduce((function(t,r){var n=m(e,r);return t.push.apply(t,i(n)),t}),s));return i(new Set(s))}function v(e,t,r){return r.reduce((function(t,r){var n=m(e,r);return t.push.apply(t,i(n)),t}),i(t))}var b=function(e,t,r){var n;if(null!==(n=window.appData)&&void 0!==n&&n.sharePage){var o,a,i=(null===(o=window.appData)||void 0===o||null===(o=o.share)||void 0===o?void 0:o.token)||(null===(a=t.share)||void 0===a?void 0:a.token);return"/books/share/".concat(i,"/").concat(r)}return"/".concat(e.login,"/").concat(t.slug,"/").concat(r)}},5280:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r(37);var n=r(8),o=r(0),a=r.n(o),i=r(43),c={playBtn:"index-module_playBtn_5wHuG"};function l(){return a.a.createElement(n.a,{className:c.playBtn,onClick:function(){return window.postMessage("show:play")}},a.a.createElement(i.b,{name:"play",width:8,height:12}),__("播放"))}},5351:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(4079),o=r(862),a=Object(o.a)({loader:function(){return Promise.all([r.e(3),r.e(5),r.e(6),r.e(0),r.e(1),r.e(1338)]).then(r.bind(null,5357)).then((function(e){return e.PresentationRender}))},loading:n.a}),i=Object(o.a)({loader:function(){return Promise.all([r.e(3),r.e(5),r.e(6),r.e(0),r.e(1),r.e(1338)]).then(r.bind(null,5357)).then((function(e){return e.PresentationOverlay}))},loading:n.a});t.b=i},5356:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return S}));var n=r(0);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a,i=["children","defaultHeight","defaultWidth","disableHeight","disableWidth","doNotBailOutOnEmptyChildren","nonce","onResize","style","tagName"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function d(e,t,r){return t=h(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}a="undefined"!=typeof window?window:"undefined"!=typeof self?self:e;var b=null,g=null,w=a.clearTimeout,_=a.setTimeout,E=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame,O=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame;function A(e){var t,r,n,o,i,c,l,u="undefined"!=typeof document&&document.attachEvent;if(!u){c=function(e){var t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,o=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,o.style.width=r.offsetWidth+1+"px",o.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},i=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},l=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;c(this),this.__resizeRAF__&&b(this.__resizeRAF__),this.__resizeRAF__=g((function(){i(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(r){r.call(t,e)})))}))}};var s=!1,f="";n="animationstart";var d="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),h=document.createElement("fakeelement");if(void 0!==h.style.animationName&&(s=!0),!1===s)for(var m=0;m<d.length;m++)if(void 0!==h.style[d[m]+"AnimationName"]){f="-"+d[m].toLowerCase()+"-",n=p[m],s=!0;break}t="@"+f+"keyframes "+(r="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",o=f+"animation: 1ms "+r+"; "}return{addResizeListener:function(i,s){if(u)i.attachEvent("onresize",s);else{if(!i.__resizeTriggers__){var f=i.ownerDocument,d=a.getComputedStyle(i);d&&"static"===d.position&&(i.style.position="relative"),function(r){if(!r.getElementById("detectElementResize")){var n=(t||"")+".resize-triggers { "+(o||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',a=r.head||r.getElementsByTagName("head")[0],i=r.createElement("style");i.id="detectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(r.createTextNode(n)),a.appendChild(i)}}(f),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=f.createElement("div")).className="resize-triggers";var p=f.createElement("div");p.className="expand-trigger",p.appendChild(f.createElement("div"));var h=f.createElement("div");h.className="contract-trigger",i.__resizeTriggers__.appendChild(p),i.__resizeTriggers__.appendChild(h),i.appendChild(i.__resizeTriggers__),c(i),i.addEventListener("scroll",l,!0),n&&(i.__resizeTriggers__.__animationListener__=function(e){e.animationName===r&&c(i)},i.__resizeTriggers__.addEventListener(n,i.__resizeTriggers__.__animationListener__))}i.__resizeListeners__.push(s)}},removeResizeListener:function(e,t){if(u)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",l,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(n,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}null==E||null==O?(b=w,g=function(e){return _(e,20)}):(b=function(e){var t=y(e,2),r=t[0],n=t[1];E(r),w(n)},g=function(e){var t=O((function(){w(r),e()})),r=_((function(){E(t),e()}),20);return[t,r]});var S=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=d(this,t,[].concat(n))).state={height:e.props.defaultHeight||0,scaledHeight:e.props.defaultHeight||0,scaledWidth:e.props.defaultWidth||0,width:e.props.defaultWidth||0},e._autoSizer=null,e._detectElementResize=null,e._parentNode=null,e._resizeObserver=null,e._timeoutId=null,e._onResize=function(){e._timeoutId=null;var t=e.props,r=t.disableHeight,n=t.disableWidth,o=t.onResize;if(e._parentNode){var a=window.getComputedStyle(e._parentNode)||{},i=parseFloat(a.paddingLeft||"0"),c=parseFloat(a.paddingRight||"0"),l=parseFloat(a.paddingTop||"0"),u=parseFloat(a.paddingBottom||"0"),s=e._parentNode.getBoundingClientRect(),f=s.height-l-u,d=s.width-i-c,p=e._parentNode.offsetHeight-l-u,h=e._parentNode.offsetWidth-i-c;(r||e.state.height===p&&e.state.scaledHeight===f)&&(n||e.state.width===h&&e.state.scaledWidth===d)||(e.setState({height:p,width:h,scaledHeight:f,scaledWidth:d}),"function"==typeof o&&o({height:p,scaledHeight:f,scaledWidth:d,width:h}))}},e._setRef=function(t){e._autoSizer=t},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),r=t,o=[{key:"componentDidMount",value:function(){var e=this,t=this.props.nonce,r=this._autoSizer?this._autoSizer.parentNode:null;if(null!=r&&r.ownerDocument&&r.ownerDocument.defaultView&&r instanceof r.ownerDocument.defaultView.HTMLElement){this._parentNode=r;var n=r.ownerDocument.defaultView.ResizeObserver;null!=n?(this._resizeObserver=new n((function(){e._timeoutId=setTimeout(e._onResize,0)})),this._resizeObserver.observe(r)):(this._detectElementResize=A(t),this._detectElementResize.addResizeListener(r,this._onResize)),this._onResize()}}},{key:"componentWillUnmount",value:function(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),null!==this._timeoutId&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}},{key:"render",value:function(){var e=this.props,t=e.children,r=(e.defaultHeight,e.defaultWidth,e.disableHeight),o=void 0!==r&&r,a=e.disableWidth,c=void 0!==a&&a,u=e.doNotBailOutOnEmptyChildren,s=void 0!==u&&u,f=(e.nonce,e.onResize,e.style),d=void 0===f?{}:f,p=e.tagName,h=void 0===p?"div":p,m=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,i),y=this.state,v=y.height,b=y.scaledHeight,g=y.scaledWidth,w=y.width,_={overflow:"visible"},E={},O=!1;return o||(0===v&&(O=!0),_.height=0,E.height=v,E.scaledHeight=b),c||(0===w&&(O=!0),_.width=0,E.width=w,E.scaledWidth=g),s&&(O=!1),Object(n.createElement)(h,l({ref:this._setRef,style:l(l({},_),d)},m),!O&&t(E))}}],o&&s(r.prototype,o),a&&s(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}(n.Component)}).call(this,r(92))},5361:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"g",(function(){return f})),r.d(t,"e",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return h})),r.d(t,"f",(function(){return m})),r.d(t,"b",(function(){return y}));r(44);var n=r(10),o="ne-viewer-body",a="ne-card",i="ne-card-toolbar",c="ne-ui-exit-max-view-btn",l="ne-collapse-fold-container",u="data-slide-container",s=["board","calendar","checkIn","codeblock","flowchart","image","lockedtext","mindmap","table","text-diagram","thirdparty","video","vote","yuque","dataTable"];function f(e){var t=.8*window.innerWidth,r=v.parseFromString(e,"text/html");return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.querySelectorAll('card[name="image"]').forEach((function(e){var r=function(e){try{return JSON.parse(decodeURIComponent(e).slice(5))}catch(e){}return{}}(e.getAttribute("value"));if(r.width&&r.height){var n=r.width/r.height;r.width=Math.max(Math.min(1.5*r.width,t),r.width),r.height=r.width/n,e.setAttribute("value","data:".concat(encodeURIComponent(JSON.stringify(r))))}})),e.querySelectorAll("p[style]").forEach((function(e){"right"===e.style.textAlign&&e.style.paddingLeft&&e.style.removeProperty("padding-left")})),e.querySelectorAll(".lake-list-node[style]").forEach((function(e){e.style.paddingLeft=""}))}(r,t),"<!doctype lake>".concat(r.head.innerHTML).concat(r.body.innerHTML)}function d(e){for(var t=e;t;){if(t.getAttribute(u))return!1;if(t.classList.contains(o))return!1;if(t.tagName.toLowerCase()===a&&s.includes(t.getAttribute("data-card-name")))return!0;if(t.classList.contains(i))return!0;if(t.classList.contains(c))return!0;if(t.classList.contains(l))return!0;t=t.parentNode}}function p(e,t){return"".concat(t,"_").concat(e)}function h(e){return"doc_embed"===e}var m="_doc_present_mode_location_tip",y=function(){n.a.destroy(m)},v=new DOMParser},5382:function(e,t,r){"use strict";r.d(t,"a",(function(){return wa})),r.d(t,"c",(function(){return ki})),r.d(t,"b",(function(){return yi})),r.d(t,"d",(function(){return Mo})),r.d(t,"e",(function(){return Ho}));var n=r(0),o=r.n(n);function a(e,t){}var i=a.bind(null,"warn");a.bind(null,"error");function c(){}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){var n;return n=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==l(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t,r){var n=t.map((function(t){var n=function(e,t){return s(s({},e),t)}(r,t.options);return e.addEventListener(t.eventName,t.fn,n),function(){e.removeEventListener(t.eventName,t.fn,n)}}));return function(){n.forEach((function(e){e()}))}}var p=!0,h="Invariant failed";function m(e){this.message=e}function y(e,t){if(!e)throw new m(p?h:"".concat(h,": ").concat(t||""))}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:String(t)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}m.prototype.toString=function(){return this.message};var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(a,e);var t,r,n,o=_(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).callbacks=null,e.unbind=c,e.onWindowError=function(t){var r=e.getCallbacks();r.isDragging()&&(r.tryAbort(),i("\n        An error was caught by our window 'error' event listener while a drag was occurring.\n        The active drag has been aborted.\n      ")),t.error instanceof m&&t.preventDefault()},e.getCallbacks=function(){if(!e.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return e.callbacks},e.setCallbacks=function(t){e.callbacks=t},e}return t=a,(r=[{key:"componentDidMount",value:function(){this.unbind=d(window,[{eventName:"error",fn:this.onWindowError}])}},{key:"componentDidCatch",value:function(e){if(!(e instanceof m))throw e;this.setState({})}},{key:"componentWillUnmount",value:function(){this.unbind()}},{key:"render",value:function(){return this.props.children(this.setCallbacks)}}])&&b(t.prototype,r),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.a.Component),A=function(e){return e+1},S=function(e,t){var r=e.droppableId===t.droppableId,n=A(e.index),o=A(t.index);return r?"\n      You have moved the item from position ".concat(n,"\n      to position ").concat(o,"\n    "):"\n    You have moved the item from position ".concat(n,"\n    in list ").concat(e.droppableId,"\n    to list ").concat(t.droppableId,"\n    in position ").concat(o,"\n  ")},k=function(e,t,r){return t.droppableId===r.droppableId?"\n      The item ".concat(e,"\n      has been combined with ").concat(r.draggableId):"\n      The item ".concat(e,"\n      in list ").concat(t.droppableId,"\n      has been combined with ").concat(r.draggableId,"\n      in list ").concat(r.droppableId,"\n    ")},x=function(e){return"\n  The item has returned to its starting position\n  of ".concat(A(e.index),"\n")},j={dragHandleUsageInstructions:"\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",onDragStart:function(e){return"\n  You have lifted an item in position ".concat(A(e.source.index),"\n")},onDragUpdate:function(e){var t=e.destination;if(t)return S(e.source,t);var r=e.combine;return r?k(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},onDragEnd:function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      ".concat(x(e.source),"\n    ");var t=e.destination,r=e.combine;return t?"\n      You have dropped the item.\n      ".concat(S(e.source,t),"\n    "):r?"\n      You have dropped the item.\n      ".concat(k(e.draggableId,e.source,r),"\n    "):"\n    The item has been dropped while not over a drop area.\n    ".concat(x(e.source),"\n  ")}},P=r(958),C=r(532);function I(e,t){var r=Object(n.useState)((function(){return{inputs:t,result:e()}}))[0],o=Object(n.useRef)(!0),a=Object(n.useRef)(r),i=o.current||Boolean(t&&a.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(t,a.current.inputs))?a.current:{inputs:t,result:e()};return Object(n.useEffect)((function(){o.current=!1,a.current=i}),[i]),i.result}var T=I,L=function(e,t){return I((function(){return e}),t)};function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function N(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t,r){var n;return n=function(e,t){if("object"!=D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==D(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F={x:0,y:0},B=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},q=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},z=function(e,t){return e.x===t.x&&e.y===t.y},G=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},U=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return M(M({},e,t),"x"===e?"y":"x",r)},W=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},V=function(e,t){return Math.min.apply(Math,N(t.map((function(t){return W(e,t)}))))},H=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},K=r(303),Y=function(e){var t=e.top,r=e.right,n=e.bottom,o=e.left;return{top:t,right:r,bottom:n,left:o,width:r-o,height:n-t,x:o,y:t,center:{x:(r+o)/2,y:(n+t)/2}}},Q=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},Z=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},X={top:0,right:0,bottom:0,left:0},J=function(e){var t=e.borderBox,r=e.margin,n=void 0===r?X:r,o=e.border,a=void 0===o?X:o,i=e.padding,c=void 0===i?X:i,l=Y(Q(t,n)),u=Y(Z(t,a)),s=Y(Z(u,c));return{marginBox:l,borderBox:Y(t),paddingBox:u,contentBox:s,margin:n,border:a,padding:c}},$=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var r=Number(t);return isNaN(r)&&Object(K.default)(!1),r},ee=function(e,t){var r,n,o=e.borderBox,a=e.border,i=e.margin,c=e.padding,l=(n=t,{top:(r=o).top+n.y,left:r.left+n.x,bottom:r.bottom+n.y,right:r.right+n.x});return J({borderBox:l,border:a,margin:i,padding:c})},te=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),ee(e,t)},re=function(e,t){var r={top:$(t.marginTop),right:$(t.marginRight),bottom:$(t.marginBottom),left:$(t.marginLeft)},n={top:$(t.paddingTop),right:$(t.paddingRight),bottom:$(t.paddingBottom),left:$(t.paddingLeft)},o={top:$(t.borderTopWidth),right:$(t.borderRightWidth),bottom:$(t.borderBottomWidth),left:$(t.borderLeftWidth)};return J({borderBox:e,margin:r,padding:n,border:o})},ne=function(e){var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return re(t,r)},oe=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},ae=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]};function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){var n;return n=function(e,t){if("object"!=ie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ie(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var se=function(e,t){return t&&t.shouldClipSubject?function(e,t){var r=Y({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r}(t.pageMarginBox,e):Y(e)},fe=function(e){var t=e.page,r=e.withPlaceholder,n=e.axis,o=e.frame,a=function(e,t){return t?oe(e,t.scroll.diff.displacement):e}(t.marginBox,o),i=function(e,t,r){return r&&r.increasedBy?le(le({},e),{},ue({},t.end,e[t.end]+r.increasedBy[t.line])):e}(a,n,r);return{page:t,withPlaceholder:r,active:se(i,o)}};function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){var n;return n=function(e,t){if("object"!=de(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=de(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==de(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ye=function(e,t){y(e.frame);var r=e.frame,n=q(t,r.scroll.initial),o=G(n),a=he(he({},r),{},{scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:o},max:r.scroll.max}}),i=fe({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return he(he({},e),{},{frame:a,subject:i})},ve=r(3734);function be(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function ge(e,t){if(e.findIndex)return e.findIndex(t);for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function we(e,t){if(e.find)return e.find(t);var r=ge(e,t);return-1!==r?e[r]:void 0}function _e(e){return Array.prototype.slice.call(e)}var Ee=Object(ve.a)((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),Oe=Object(ve.a)((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),Ae=Object(ve.a)((function(e){return be(e)})),Se=Object(ve.a)((function(e){return be(e)})),ke=Object(ve.a)((function(e,t){return Se(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}))}));function xe(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function je(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var Pe=Object(ve.a)((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))}));function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){Le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Le(e,t,r){var n;return n=function(e,t){if("object"!=Ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ce(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var De=function(e,t){return e.descriptor.droppableId===t.descriptor.id},Ne={point:F,value:0},Re={invisible:{},visible:{},all:[]},Me={displaced:Re,displacedBy:Ne,at:null},Fe=function(e,t){return function(r){return e<=r&&r<=t}},Be=function(e){var t=Fe(e.top,e.bottom),r=Fe(e.left,e.right);return function(n){if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;var o=t(n.top)||t(n.bottom),a=r(n.left)||r(n.right);if(o&&a)return!0;var i=n.top<e.top&&n.bottom>e.bottom,c=n.left<e.left&&n.right>e.right;return!(!i||!c)||(i&&a||c&&o)}},qe=function(e){var t=Fe(e.top,e.bottom),r=Fe(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&r(e.left)&&r(e.right)}},ze={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Ge={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?We(Object(r),!0).forEach((function(t){He(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function He(e,t,r){var n;return n=function(e,t){if("object"!=Ue(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ue(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ke=function(e){var t=e.target,r=e.destination,n=e.viewport,o=e.withDroppableDisplacement,a=e.isVisibleThroughFrameFn,i=o?function(e,t){var r=t.frame?t.frame.scroll.diff.displacement:F;return oe(e,r)}(t,r):t;return function(e,t,r){return!!t.subject.active&&r(t.subject.active)(e)}(i,r,a)&&function(e,t,r){return r(t)(e)}(i,n,a)},Ye=function(e){return Ke(Ve(Ve({},e),{},{isVisibleThroughFrameFn:Be}))},Qe=function(e){return Ke(Ve(Ve({},e),{},{isVisibleThroughFrameFn:qe}))},Ze=function(e,t,r){if("boolean"==typeof r)return r;if(!t)return!0;var n=t.invisible,o=t.visible;if(n[e])return!1;var a=o[e];return!a||a.shouldAnimate};function Xe(e){var t=e.afterDragging,r=e.destination,n=e.displacedBy,o=e.viewport,a=e.forceShouldAnimate,i=e.last;return t.reduce((function(e,t){var c=function(e,t){var r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Y(Q(r,n))}(t,n),l=t.descriptor.id;if(e.all.push(l),!Ye({target:c,destination:r,viewport:o,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var u={draggableId:l,shouldAnimate:Ze(l,i,a)};return e.visible[l]=u,e}),{all:[],visible:{},invisible:{}})}function Je(e){var t=e.insideDestination,r=e.inHomeList,n=e.displacedBy,o=e.destination,a=function(e,t){if(!e.length)return 0;var r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}(t,{inHomeList:r});return{displaced:Re,displacedBy:n,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:a}}}}function $e(e){var t=e.draggable,r=e.insideDestination,n=e.destination,o=e.viewport,a=e.displacedBy,i=e.last,c=e.index,l=e.forceShouldAnimate,u=De(t,n);if(null==c)return Je({insideDestination:r,inHomeList:u,displacedBy:a,destination:n});var s=we(r,(function(e){return e.descriptor.index===c}));if(!s)return Je({insideDestination:r,inHomeList:u,displacedBy:a,destination:n});var f=Pe(t,r),d=r.indexOf(s);return{displaced:Xe({afterDragging:f.slice(d),destination:n,displacedBy:a,last:i,viewport:o.frame,forceShouldAnimate:l}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:c}}}}function et(e,t){return Boolean(t.effected[e])}var tt=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.draggable,o=e.draggables,a=e.destination,i=e.insideDestination,c=e.previousImpact,l=e.viewport,u=e.afterCritical,s=c.at;if(y(s,"Cannot move in direction without previous impact location"),"REORDER"===s.type){var f=function(e){var t=e.isMovingForward,r=e.isInHomeList,n=e.insideDestination,o=e.location;if(!n.length)return null;var a=o.index,i=t?a+1:a-1,c=n[0].descriptor.index,l=n[n.length-1].descriptor.index;return i<c||i>(r?l:l+1)?null:i}({isMovingForward:t,isInHomeList:r,location:s.destination,insideDestination:i});return null==f?null:$e({draggable:n,insideDestination:i,destination:a,viewport:l,last:c.displaced,displacedBy:c.displacedBy,index:f})}var d=function(e){var t=e.isMovingForward,r=e.destination,n=e.draggables,o=e.combine,a=e.afterCritical;if(!r.isCombineEnabled)return null;var i=o.draggableId,c=n[i].descriptor.index;return et(i,a)?t?c:c-1:t?c+1:c}({isMovingForward:t,destination:a,displaced:c.displaced,draggables:o,combine:s.combine,afterCritical:u});return null==d?null:$e({draggable:n,insideDestination:i,destination:a,viewport:l,last:c.displaced,displacedBy:c.displacedBy,index:d})},rt=function(e){var t=e.afterCritical,r=e.impact,n=e.draggables,o=je(r);y(o);var a=o.draggableId,i=n[a].page.borderBox.center,c=function(e){var t=e.displaced,r=e.afterCritical,n=e.combineWith,o=e.displacedBy,a=Boolean(t.visible[n]||t.invisible[n]);return et(n,r)?a?F:G(o.point):a?o.point:F}({displaced:r.displaced,afterCritical:t,combineWith:a,displacedBy:r.displacedBy});return B(i,c)},nt=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},ot=function(e,t,r){return t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2},at=function(e){var t=e.axis,r=e.moveRelativeTo,n=e.isMoving;return U(t.line,r.marginBox[t.end]+nt(t,n),ot(t,r.marginBox,n))},it=function(e){var t=e.axis,r=e.moveRelativeTo,n=e.isMoving;return U(t.line,r.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,n),ot(t,r.marginBox,n))},ct=function(e){var t=e.impact,r=e.draggable,n=e.draggables,o=e.droppable,a=e.afterCritical,i=ke(o.descriptor.id,n),c=r.page,l=o.axis;if(!i.length)return function(e){var t=e.axis,r=e.moveInto,n=e.isMoving;return U(t.line,r.contentBox[t.start]+nt(t,n),ot(t,r.contentBox,n))}({axis:l,moveInto:o.page,isMoving:c});var u=t.displaced,s=t.displacedBy,f=u.all[0];if(f){var d=n[f];if(et(f,a))return it({axis:l,moveRelativeTo:d.page,isMoving:c});var p=ee(d.page,s.point);return it({axis:l,moveRelativeTo:p,isMoving:c})}var h=i[i.length-1];if(h.descriptor.id===r.descriptor.id)return c.borderBox.center;if(et(h.descriptor.id,a)){var m=ee(h.page,G(a.displacedBy.point));return at({axis:l,moveRelativeTo:m,isMoving:c})}return at({axis:l,moveRelativeTo:h.page,isMoving:c})},lt=function(e,t){var r=e.frame;return r?B(t,r.scroll.diff.displacement):t},ut=function(e){var t=function(e){var t=e.impact,r=e.draggable,n=e.droppable,o=e.draggables,a=e.afterCritical,i=r.page.borderBox.center,c=t.at;return n&&c?"REORDER"===c.type?ct({impact:t,draggable:r,draggables:o,droppable:n,afterCritical:a}):rt({impact:t,draggables:o,afterCritical:a}):i}(e),r=e.droppable;return r?lt(r,t):t},st=function(e,t){var r=q(t,e.scroll.initial),n=G(r);return{frame:Y({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){ht(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ht(e,t,r){var n;return n=function(e,t){if("object"!=ft(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ft(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mt(e,t){return e.map((function(e){return t[e]}))}var yt=function(e){var t=e.pageBorderBoxCenter,r=e.draggable,n=function(e,t){return B(e.scroll.diff.displacement,t)}(e.viewport,t),o=q(n,r.page.borderBox.center);return B(r.client.borderBox.center,o)},vt=function(e){var t=e.draggable,r=e.destination,n=e.newPageBorderBoxCenter,o=e.viewport,a=e.withDroppableDisplacement,i=e.onlyOnMainAxis,c=void 0!==i&&i,l=q(n,t.page.borderBox.center),u={target:oe(t.page.borderBox,l),destination:r,withDroppableDisplacement:a,viewport:o};return c?function(e){return Ke(Ve(Ve({},e),{},{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var r=Fe(e.top,e.bottom),n=Fe(e.left,e.right);return function(e){return t===ze?r(e.top)&&r(e.bottom):n(e.left)&&n(e.right)}})}));var t}(u):Qe(u)},bt=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,o=e.draggables,a=e.previousImpact,i=e.viewport,c=e.previousPageBorderBoxCenter,l=e.previousClientSelection,u=e.afterCritical;if(!n.isEnabled)return null;var s=ke(n.descriptor.id,o),f=De(r,n),d=function(e){var t=e.isMovingForward,r=e.draggable,n=e.destination,o=e.insideDestination,a=e.previousImpact;if(!n.isCombineEnabled)return null;if(!xe(a))return null;function i(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:n.descriptor.id}};return Te(Te({},a),{},{at:t})}var c=a.displaced.all,l=c.length?c[0]:null;if(t)return l?i(l):null;var u=Pe(r,o);if(!l)return u.length?i(u[u.length-1].descriptor.id):null;var s=ge(u,(function(e){return e.descriptor.id===l}));y(-1!==s,"Could not find displaced item in set");var f=s-1;return f<0?null:i(u[f].descriptor.id)}({isMovingForward:t,draggable:r,destination:n,insideDestination:s,previousImpact:a})||tt({isMovingForward:t,isInHomeList:f,draggable:r,draggables:o,destination:n,insideDestination:s,previousImpact:a,viewport:i,afterCritical:u});if(!d)return null;var p=ut({impact:d,draggable:r,droppable:n,draggables:o,afterCritical:u});if(vt({draggable:r,destination:n,newPageBorderBoxCenter:p,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:yt({pageBorderBoxCenter:p,draggable:r,viewport:i}),impact:d,scrollJumpRequest:null};var h=q(p,c),m=function(e){var t=e.impact,r=e.viewport,n=e.destination,o=e.draggables,a=e.maxScrollChange,i=st(r,B(r.scroll.current,a)),c=n.frame?ye(n,B(n.frame.scroll.current,a)):n,l=t.displaced,u=Xe({afterDragging:mt(l.all,o),destination:n,displacedBy:t.displacedBy,viewport:i.frame,last:l,forceShouldAnimate:!1}),s=Xe({afterDragging:mt(l.all,o),destination:c,displacedBy:t.displacedBy,viewport:r.frame,last:l,forceShouldAnimate:!1}),f={},d={},p=[l,u,s];return l.all.forEach((function(e){var t=function(e,t){for(var r=0;r<t.length;r++){var n=t[r].visible[e];if(n)return n}return null}(e,p);t?d[e]=t:f[e]=!0})),pt(pt({},t),{},{displaced:{all:l.all,invisible:f,visible:d}})}({impact:d,viewport:i,destination:n,draggables:o,maxScrollChange:h});return{clientSelection:l,impact:m,scrollJumpRequest:h}},gt=function(e){var t=e.subject.active;return y(t,"Cannot get clipped area from droppable"),t},wt=function(e,t){var r=e.page.borderBox.center;return et(e.descriptor.id,t)?q(r,t.displacedBy.point):r},_t=function(e,t){var r=e.page.borderBox;return et(e.descriptor.id,t)?oe(r,G(t.displacedBy.point)):r},Et=Object(ve.a)((function(e,t){var r=t[e.line];return{value:r,point:U(e.line,r)}}));function Ot(e){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(e)}function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){kt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kt(e,t,r){var n;return n=function(e,t){if("object"!=Ot(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ot(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xt=function(e,t){return St(St({},e),{},{scroll:St(St({},e.scroll),{},{max:t})})},jt=function(e,t,r){var n=e.frame;y(!De(t,e),"Should not add placeholder space to home list"),y(!e.subject.withPlaceholder,"Cannot add placeholder size to a subject when it already has one");var o=Et(e.axis,t.displaceBy).point,a=function(e,t,r){var n=e.axis;if("virtual"===e.descriptor.mode)return U(n.line,t[n.line]);var o=e.subject.page.contentBox[n.size],a=ke(e.descriptor.id,r).reduce((function(e,t){return e+t.client.marginBox[n.size]}),0)+t[n.line]-o;return a<=0?null:U(n.line,a)}(e,o,r),i={placeholderSize:o,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){var c=fe({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return St(St({},e),{},{subject:c})}var l=a?B(n.scroll.max,a):n.scroll.max,u=xt(n,l),s=fe({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:u});return St(St({},e),{},{subject:s,frame:u})},Pt=function(e){var t=e.isMovingForward,r=e.previousPageBorderBoxCenter,n=e.draggable,o=e.isOver,a=e.draggables,i=e.droppables,c=e.viewport,l=e.afterCritical,u=function(e){var t=e.isMovingForward,r=e.pageBorderBoxCenter,n=e.source,o=e.droppables,a=e.viewport,i=n.subject.active;if(!i)return null;var c=n.axis,l=Fe(i[c.start],i[c.end]),u=Ae(o).filter((function(e){return e!==n})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return Be(a.frame)(gt(e))})).filter((function(e){var r=gt(e);return t?i[c.crossAxisEnd]<r[c.crossAxisEnd]:r[c.crossAxisStart]<i[c.crossAxisStart]})).filter((function(e){var t=gt(e),r=Fe(t[c.start],t[c.end]);return l(t[c.start])||l(t[c.end])||r(i[c.start])||r(i[c.end])})).sort((function(e,r){var n=gt(e)[c.crossAxisStart],o=gt(r)[c.crossAxisStart];return t?n-o:o-n})).filter((function(e,t,r){return gt(e)[c.crossAxisStart]===gt(r[0])[c.crossAxisStart]}));if(!u.length)return null;if(1===u.length)return u[0];var s=u.filter((function(e){return Fe(gt(e)[c.start],gt(e)[c.end])(r[c.line])}));return 1===s.length?s[0]:s.length>1?s.sort((function(e,t){return gt(e)[c.start]-gt(t)[c.start]}))[0]:u.sort((function(e,t){var n=V(r,ae(gt(e))),o=V(r,ae(gt(t)));return n!==o?n-o:gt(e)[c.start]-gt(t)[c.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:r,source:o,droppables:i,viewport:c});if(!u)return null;var s=ke(u.descriptor.id,a),f=function(e){var t=e.pageBorderBoxCenter,r=e.viewport,n=e.destination,o=e.insideDestination,a=e.afterCritical;return o.filter((function(e){return Qe({target:_t(e,a),destination:n,viewport:r.frame,withDroppableDisplacement:!0})})).sort((function(e,r){var o=W(t,lt(n,wt(e,a))),i=W(t,lt(n,wt(r,a)));return o<i?-1:i<o?1:e.descriptor.index-r.descriptor.index}))[0]||null}({pageBorderBoxCenter:r,viewport:c,destination:u,insideDestination:s,afterCritical:l}),d=function(e){var t=e.previousPageBorderBoxCenter,r=e.moveRelativeTo,n=e.insideDestination,o=e.draggable,a=e.draggables,i=e.destination,c=e.viewport,l=e.afterCritical;if(!r){if(n.length)return null;var u={displaced:Re,displacedBy:Ne,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},s=ut({impact:u,draggable:o,droppable:i,draggables:a,afterCritical:l}),f=De(o,i)?i:jt(i,o,a);return vt({draggable:o,destination:f,newPageBorderBoxCenter:s,viewport:c.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?u:null}var d,p=Boolean(t[i.axis.line]<=r.page.borderBox.center[i.axis.line]),h=(d=r.descriptor.index,r.descriptor.id===o.descriptor.id||p?d:d+1),m=Et(i.axis,o.displaceBy);return $e({draggable:o,insideDestination:n,destination:i,viewport:c,displacedBy:m,last:Re,index:h})}({previousPageBorderBoxCenter:r,destination:u,draggable:n,draggables:a,moveRelativeTo:f,insideDestination:s,viewport:c,afterCritical:l});if(!d)return null;var p=ut({impact:d,draggable:n,droppable:u,draggables:a,afterCritical:l});return{clientSelection:yt({pageBorderBoxCenter:p,draggable:n,viewport:c}),impact:d,scrollJumpRequest:null}},Ct=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},It=function(e){var t=e.state,r=e.type,n=function(e,t){var r=Ct(e);return r?t[r]:null}(t.impact,t.dimensions.droppables),o=Boolean(n),a=t.dimensions.droppables[t.critical.droppable.id],i=n||a,c=i.axis.direction,l="vertical"===c&&("MOVE_UP"===r||"MOVE_DOWN"===r)||"horizontal"===c&&("MOVE_LEFT"===r||"MOVE_RIGHT"===r);if(l&&!o)return null;var u="MOVE_DOWN"===r||"MOVE_RIGHT"===r,s=t.dimensions.draggables[t.critical.draggable.id],f=t.current.page.borderBoxCenter,d=t.dimensions,p=d.draggables,h=d.droppables;return l?bt({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:s,destination:i,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Pt({isMovingForward:u,previousPageBorderBoxCenter:f,draggable:s,isOver:i,draggables:p,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function Tt(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function Lt(e){var t=Fe(e.top,e.bottom),r=Fe(e.left,e.right);return function(e){return t(e.y)&&r(e.x)}}function Dt(e){var t=e.pageBorderBox,r=e.draggable,n=e.droppables,o=Ae(n).filter((function(e){if(!e.isEnabled)return!1;var r,n,o=e.subject.active;if(!o)return!1;if(n=o,!((r=t).left<n.right&&r.right>n.left&&r.top<n.bottom&&r.bottom>n.top))return!1;if(Lt(o)(t.center))return!0;var a=e.axis,i=o.center[a.crossAxisLine],c=t[a.crossAxisStart],l=t[a.crossAxisEnd],u=Fe(o[a.crossAxisStart],o[a.crossAxisEnd]),s=u(c),f=u(l);return!s&&!f||(s?c<i:l>i)}));return o.length?1===o.length?o[0].descriptor.id:function(e){var t=e.pageBorderBox,r=e.draggable,n=e.candidates,o=r.page.borderBox.center,a=n.map((function(e){var r=e.axis,n=U(e.axis.line,t.center[r.line],e.page.borderBox.center[r.crossAxisLine]);return{id:e.descriptor.id,distance:W(o,n)}})).sort((function(e,t){return t.distance-e.distance}));return a[0]?a[0].id:null}({pageBorderBox:t,draggable:r,candidates:o}):null}var Nt=function(e,t){return Y(oe(e,t))};function Rt(e){var t=e.displaced,r=e.id;return Boolean(t.visible[r]||t.invisible[r])}var Mt=function(e){var t=e.pageOffset,r=e.draggable,n=e.draggables,o=e.droppables,a=e.previousImpact,i=e.viewport,c=e.afterCritical,l=Nt(r.page.borderBox,t),u=Dt({pageBorderBox:l,draggable:r,droppables:o});if(!u)return Me;var s,f,d=o[u],p=ke(d.descriptor.id,n),h=(s=l,(f=d.frame)?Nt(s,f.scroll.diff.value):s);return function(e){var t=e.draggable,r=e.pageBorderBoxWithDroppableScroll,n=e.previousImpact,o=e.destination,a=e.insideDestination,i=e.afterCritical;if(!o.isCombineEnabled)return null;var c=o.axis,l=Et(o.axis,t.displaceBy),u=l.value,s=r[c.start],f=r[c.end],d=we(Pe(t,a),(function(e){var t=e.descriptor.id,r=e.page.borderBox,o=r[c.size]/4,a=et(t,i),l=Rt({displaced:n.displaced,id:t});return a?l?f>r[c.start]+o&&f<r[c.end]-o:s>r[c.start]-u+o&&s<r[c.end]-u-o:l?f>r[c.start]+u+o&&f<r[c.end]+u-o:s>r[c.start]+o&&s<r[c.end]-o}));return d?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:d.descriptor.id,droppableId:o.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:h,draggable:r,previousImpact:a,destination:d,insideDestination:p,afterCritical:c})||function(e){var t=e.pageBorderBoxWithDroppableScroll,r=e.draggable,n=e.destination,o=e.insideDestination,a=e.last,i=e.viewport,c=e.afterCritical,l=n.axis,u=Et(n.axis,r.displaceBy),s=u.value,f=t[l.start],d=t[l.end],p=function(e){var t=e.draggable,r=e.closest,n=e.inHomeList;return r?n&&r.descriptor.index>t.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}({draggable:r,closest:we(Pe(r,o),(function(e){var t=e.descriptor.id,r=e.page.borderBox.center[l.line],n=et(t,c),o=Rt({displaced:a,id:t});return n?o?d<=r:f<r-s:o?d<=r+s:f<r})),inHomeList:De(r,n)});return $e({draggable:r,insideDestination:o,destination:n,viewport:i,last:a,displacedBy:u,index:p})}({pageBorderBoxWithDroppableScroll:h,draggable:r,destination:d,insideDestination:p,last:a.displaced,viewport:i,afterCritical:c})};function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}function Bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(r),!0).forEach((function(t){zt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zt(e,t,r){var n;return n=function(e,t){if("object"!=Ft(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ft(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gt=function(e,t){return qt(qt({},e),{},zt({},t.descriptor.id,t))},Ut=function(e){var t=e.previousImpact,r=e.impact,n=e.droppables,o=Ct(t),a=Ct(r);if(!o)return n;if(o===a)return n;var i=n[o];if(!i.subject.withPlaceholder)return n;var c=function(e){var t=e.subject.withPlaceholder;y(t,"Cannot remove placeholder form subject when there was none");var r=e.frame;if(!r){var n=fe({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return St(St({},e),{},{subject:n})}var o=t.oldFrameMaxScroll;y(o,"Expected droppable with frame to have old max frame scroll when removing placeholder");var a=xt(r,o),i=fe({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return St(St({},e),{},{subject:i,frame:a})}(i);return Gt(n,c)};function Wt(e){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(e)}function Vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(r),!0).forEach((function(t){Kt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kt(e,t,r){var n;return n=function(e,t){if("object"!=Wt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Wt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Yt=function(e){var t=e.state,r=e.clientSelection,n=e.dimensions,o=e.viewport,a=e.impact,i=e.scrollJumpRequest,c=o||t.viewport,l=n||t.dimensions,u=r||t.current.client.selection,s=q(u,t.initial.client.selection),f={offset:s,selection:u,borderBoxCenter:B(t.initial.client.borderBoxCenter,s)},d={selection:B(f.selection,c.scroll.current),borderBoxCenter:B(f.borderBoxCenter,c.scroll.current),offset:B(f.offset,c.scroll.diff.value)},p={client:f,page:d};if("COLLECTING"===t.phase)return Ht(Ht({phase:"COLLECTING"},t),{},{dimensions:l,viewport:c,current:p});var h=l.draggables[t.critical.draggable.id],m=a||Mt({pageOffset:d.offset,draggable:h,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:c,afterCritical:t.afterCritical}),y=function(e){var t=e.draggable,r=e.draggables,n=e.droppables,o=e.previousImpact,a=e.impact,i=Ut({previousImpact:o,impact:a,droppables:n}),c=Ct(a);if(!c)return i;var l=n[c];if(De(t,l))return i;if(l.subject.withPlaceholder)return i;var u=jt(l,t,r);return Gt(i,u)}({draggable:h,impact:m,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return Ht(Ht({},t),{},{current:p,dimensions:{draggables:l.draggables,droppables:y},impact:m,viewport:c,scrollJumpRequest:i||null,forceShouldAnimate:!i&&null})};function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}function Zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(r),!0).forEach((function(t){Jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jt(e,t,r){var n;return n=function(e,t){if("object"!=Qt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Qt(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $t=function(e){var t=e.impact,r=e.viewport,n=e.draggables,o=e.destination,a=e.forceShouldAnimate,i=t.displaced,c=function(e,t){return e.map((function(e){return t[e]}))}(i.all,n),l=Xe({afterDragging:c,destination:o,displacedBy:t.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:i});return Xt(Xt({},t),{},{displaced:l})},er=function(e){var t=e.impact,r=e.draggable,n=e.droppable,o=e.draggables,a=e.viewport,i=e.afterCritical,c=ut({impact:t,draggable:r,draggables:o,droppable:n,afterCritical:i});return yt({pageBorderBoxCenter:c,draggable:r,viewport:a})},tr=function(e){var t=e.state,r=e.dimensions,n=e.viewport;y("SNAP"===t.movementMode);var o=t.impact,a=n||t.viewport,i=r||t.dimensions,c=i.draggables,l=i.droppables,u=c[t.critical.draggable.id],s=Ct(o);y(s,"Must be over a destination in SNAP movement mode");var f=l[s],d=$t({impact:o,viewport:a,destination:f,draggables:c}),p=er({impact:d,draggable:u,droppable:f,draggables:c,viewport:a,afterCritical:t.afterCritical});return Yt({impact:d,clientSelection:p,state:t,dimensions:i,viewport:a})},rr=function(e){var t=e.draggable,r=e.home,n=e.draggables,o=e.viewport,a=Et(r.axis,t.displaceBy),i=ke(r.descriptor.id,n),c=i.indexOf(t);y(-1!==c,"Expected draggable to be inside home list");var l,u=i.slice(c+1),s=u.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),f={inVirtualList:"virtual"===r.descriptor.mode,displacedBy:a,effected:s};return{impact:{displaced:Xe({afterDragging:u,destination:r,displacedBy:a,last:null,viewport:o.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:(l=t.descriptor,{index:l.index,droppableId:l.droppableId})}},afterCritical:f}};function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?or(Object(r),!0).forEach((function(t){ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):or(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ir(e,t,r){var n;return n=function(e,t){if("object"!=nr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==nr(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cr=function(e){var t=e.additions,r=e.updatedDroppables,n=e.viewport,o=n.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,a=function(e){var t=e.frame;return y(t,"Expected Droppable to have a frame"),t}(r[t]).scroll.diff.value,i=function(e){var t=e.draggable,r=e.offset,n=e.initialWindowScroll,o=ee(t.client,r),a=te(o,n);return ar(ar({},t),{},{placeholder:ar(ar({},t.placeholder),{},{client:o}),client:o,page:a})}({draggable:e,offset:B(o,a),initialWindowScroll:n.scroll.initial});return i}))};function lr(e){return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lr(e)}function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){fr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fr(e,t,r){var n;return n=function(e,t){if("object"!=lr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==lr(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dr(e){return dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dr(e)}function pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(r),!0).forEach((function(t){mr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mr(e,t,r){var n;return n=function(e,t){if("object"!=dr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=dr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==dr(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yr=function(e){return"SNAP"===e.movementMode},vr=function(e,t,r){var n=function(e,t){return{draggables:e.draggables,droppables:Gt(e.droppables,t)}}(e.dimensions,t);return!yr(e)||r?Yt({state:e,dimensions:n}):tr({state:e,dimensions:n})};function br(e){return e.isDragging&&"SNAP"===e.movementMode?hr(hr({phase:"DRAGGING"},e),{},{scrollJumpRequest:null}):e}var gr={phase:"IDLE",completed:null,shouldFlush:!1},wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gr,t=arguments.length>1?arguments[1]:void 0;if("FLUSH"===t.type)return hr(hr({},gr),{},{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){y("IDLE"===e.phase,"INITIAL_PUBLISH must come after a IDLE phase");var r=t.payload,n=r.critical,o=r.clientSelection,a=r.viewport,i=r.dimensions,c=r.movementMode,l=i.draggables[n.draggable.id],u=i.droppables[n.droppable.id],s={selection:o,borderBoxCenter:l.client.borderBox.center,offset:F},f={client:s,page:{selection:B(s.selection,a.scroll.initial),borderBoxCenter:B(s.selection,a.scroll.initial),offset:B(s.selection,a.scroll.diff.value)}},d=Ae(i.droppables).every((function(e){return!e.isFixedOnPage})),p=rr({draggable:l,home:u,draggables:i.draggables,viewport:a}),h=p.impact;return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:c,dimensions:i,initial:f,current:f,isWindowScrollAllowed:d,impact:h,afterCritical:p.afterCritical,onLiftImpact:h,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:(y("DRAGGING"===e.phase,"Collection cannot start from phase ".concat(e.phase)),hr(hr({phase:"COLLECTING"},e),{},{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return y("COLLECTING"===e.phase||"DROP_PENDING"===e.phase,"Unexpected ".concat(t.type," received in phase ").concat(e.phase)),function(e){var t=e.state,r=e.published,n=r.modified.map((function(e){var r=t.dimensions.droppables[e.droppableId];return ye(r,e.scroll)})),o=sr(sr({},t.dimensions.droppables),Ee(n)),a=Oe(cr({additions:r.additions,updatedDroppables:o,viewport:t.viewport})),i=sr(sr({},t.dimensions.draggables),a);r.removals.forEach((function(e){delete i[e]}));var c={droppables:o,draggables:i},l=Ct(t.impact),u=l?c.droppables[l]:null,s=c.draggables[t.critical.draggable.id],f=c.droppables[t.critical.droppable.id],d=rr({draggable:s,home:f,draggables:i,viewport:t.viewport}),p=d.impact,h=d.afterCritical,m=u&&u.isCombineEnabled?t.impact:p,y=Mt({pageOffset:t.current.page.offset,draggable:c.draggables[t.critical.draggable.id],draggables:c.draggables,droppables:c.droppables,previousImpact:m,viewport:t.viewport,afterCritical:h}),v=sr(sr({phase:"DRAGGING"},t),{},{phase:"DRAGGING",impact:y,onLiftImpact:p,dimensions:c,afterCritical:h,forceShouldAnimate:!1});return"COLLECTING"===t.phase?v:sr(sr({phase:"DROP_PENDING"},v),{},{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;y(Tt(e),"".concat(t.type," not permitted in phase ").concat(e.phase));var m=t.payload.client;return z(m,e.current.client.selection)?e:Yt({state:e,clientSelection:m,impact:yr(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return br(e);if("COLLECTING"===e.phase)return br(e);y(Tt(e),"".concat(t.type," not permitted in phase ").concat(e.phase));var v=t.payload,b=v.id,g=v.newScroll,w=e.dimensions.droppables[b];if(!w)return e;var _=ye(w,g);return vr(e,_,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;y(Tt(e),"Attempting to move in an unsupported phase ".concat(e.phase));var E=t.payload,O=E.id,A=E.isEnabled,S=e.dimensions.droppables[O];y(S,"Cannot find Droppable[id: ".concat(O,"] to toggle its enabled state")),y(S.isEnabled!==A,"Trying to set droppable isEnabled to ".concat(String(A),"\n      but it is already ").concat(String(S.isEnabled)));var k=hr(hr({},S),{},{isEnabled:A});return vr(e,k,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;y(Tt(e),"Attempting to move in an unsupported phase ".concat(e.phase));var x=t.payload,j=x.id,P=x.isCombineEnabled,C=e.dimensions.droppables[j];y(C,"Cannot find Droppable[id: ".concat(j,"] to toggle its isCombineEnabled state")),y(C.isCombineEnabled!==P,"Trying to set droppable isCombineEnabled to ".concat(String(P),"\n      but it is already ").concat(String(C.isCombineEnabled)));var I=hr(hr({},C),{},{isCombineEnabled:P});return vr(e,I,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;y(Tt(e),"Cannot move by window in phase ".concat(e.phase)),y(e.isWindowScrollAllowed,"Window scrolling is currently not supported for fixed lists");var T=t.payload.newScroll;if(z(e.viewport.scroll.current,T))return br(e);var L=st(e.viewport,T);return yr(e)?tr({state:e,viewport:L}):Yt({state:e,viewport:L})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!Tt(e))return e;var D=t.payload.maxScroll;if(z(D,e.viewport.scroll.max))return e;var N=hr(hr({},e.viewport),{},{scroll:hr(hr({},e.viewport.scroll),{},{max:D})});return hr(hr({phase:"DRAGGING"},e),{},{viewport:N})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;y("DRAGGING"===e.phase,"".concat(t.type," received while not in DRAGGING phase"));var R=It({state:e,type:t.type});return R?Yt({state:e,impact:R.impact,clientSelection:R.clientSelection,scrollJumpRequest:R.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var M=t.payload.reason;return y("COLLECTING"===e.phase,"Can only move into the DROP_PENDING phase from the COLLECTING phase"),hr(hr({phase:"DROP_PENDING"},e),{},{phase:"DROP_PENDING",isWaiting:!0,reason:M})}if("DROP_ANIMATE"===t.type){var q=t.payload,G=q.completed,U=q.dropDuration,W=q.newHomeClientOffset;return y("DRAGGING"===e.phase||"DROP_PENDING"===e.phase,"Cannot animate drop from phase ".concat(e.phase)),{phase:"DROP_ANIMATING",completed:G,dropDuration:U,newHomeClientOffset:W,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},_r=function(e){return{type:"LIFT",payload:e}},Er=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},Or=function(){return{type:"COLLECTION_STARTING",payload:null}},Ar=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},Sr=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},kr=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},xr=function(e){return{type:"MOVE",payload:e}},jr=function(){return{type:"MOVE_UP",payload:null}},Pr=function(){return{type:"MOVE_DOWN",payload:null}},Cr=function(){return{type:"MOVE_RIGHT",payload:null}},Ir=function(){return{type:"MOVE_LEFT",payload:null}},Tr=function(){return{type:"FLUSH",payload:null}},Lr=function(e){return{type:"DROP_COMPLETE",payload:e}},Dr=function(e){return{type:"DROP",payload:e}},Nr=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var Rr="cubic-bezier(0.2, 0, 0, 1)",Mr="cubic-bezier(.2,1,.1,1)",Fr={drop:0,combining:.7},Br={drop:.75},qr=.33,zr=.55,Gr="".concat(.2,"s ").concat(Rr),Ur={fluid:"opacity ".concat(Gr),snap:"transform ".concat(Gr,", opacity ").concat(Gr),drop:function(e){var t="".concat(e,"s ").concat(Mr);return"transform ".concat(t,", opacity ").concat(t)},outOfTheWay:"transform ".concat(Gr),placeholder:"height ".concat(Gr,", width ").concat(Gr,", margin ").concat(Gr)},Wr=function(e){return z(e,F)?null:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},Vr={moveTo:Wr,drop:function(e,t){var r=Wr(e);return r?t?"".concat(r," scale(").concat(Br.drop,")"):r:null}},Hr=qr,Kr=zr,Yr=Kr-Hr;function Qr(e){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qr(e)}function Zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(r),!0).forEach((function(t){Jr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jr(e,t,r){var n;return n=function(e,t){if("object"!=Qr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Qr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Qr(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $r=function(e){var t=e.getState,r=e.dispatch;return function(e){return function(n){if("DROP"===n.type){var o=t(),a=n.payload.reason;if("COLLECTING"!==o.phase){if("IDLE"!==o.phase){y(!("DROP_PENDING"===o.phase&&o.isWaiting),"A DROP action occurred while DROP_PENDING and still waiting"),y("DRAGGING"===o.phase||"DROP_PENDING"===o.phase,"Cannot drop in phase: ".concat(o.phase));var i=o.critical,c=o.dimensions,l=c.draggables[o.critical.draggable.id],u=function(e){var t=e.draggables,r=e.reason,n=e.lastImpact,o=e.home,a=e.viewport,i=e.onLiftImpact;return n.at&&"DROP"===r?"REORDER"===n.at.type?{impact:n,didDropInsideDroppable:!0}:{impact:Xr(Xr({},n),{},{displaced:Re}),didDropInsideDroppable:!0}:{impact:$t({draggables:t,impact:i,destination:o,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:a,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),s=u.impact,f=u.didDropInsideDroppable,d=f?xe(s):null,p=f?je(s):null,h={index:i.draggable.index,droppableId:i.droppable.id},m={draggableId:l.descriptor.id,type:l.descriptor.type,source:h,reason:a,mode:o.movementMode,destination:d,combine:p},v=function(e){var t=e.impact,r=e.draggable,n=e.dimensions,o=e.viewport,a=e.afterCritical,i=n.draggables,c=n.droppables,l=Ct(t),u=l?c[l]:null,s=c[r.descriptor.droppableId],f=er({impact:t,draggable:r,draggables:i,afterCritical:a,droppable:u||s,viewport:o});return q(f,r.client.borderBox.center)}({impact:s,draggable:l,dimensions:c,viewport:o.viewport,afterCritical:o.afterCritical}),b={critical:o.critical,afterCritical:o.afterCritical,result:m,impact:s};if(!z(o.current.client.offset,v)||Boolean(m.combine)){var g=function(e){var t=e.current,r=e.destination,n=e.reason,o=W(t,r);if(o<=0)return Hr;if(o>=1500)return Kr;var a=Hr+Yr*(o/1500);return Number(("CANCEL"===n?.6*a:a).toFixed(2))}({current:o.current.client.offset,destination:v,reason:a});r(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:v,dropDuration:g,completed:b}))}else r(Lr({completed:b}))}}else r(function(e){return{type:"DROP_PENDING",payload:e}}({reason:a}))}else e(n)}}},en=function(e){var t=[],r=null,n=function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];t=o,r||(r=requestAnimationFrame((function(){r=null,e.apply(void 0,t)})))};return n.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},n},tn=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function rn(e){var t=e.onWindowScroll;var r,n=en((function(){t(tn())})),o=(r=n,{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(e){e.target!==window&&e.target!==window.document||r()}}),a=c;function i(){return a!==c}return{start:function(){y(!i(),"Cannot start scroll listener when already active"),a=d(window,[o])},stop:function(){y(i(),"Cannot stop scroll listener when not active"),n.cancel(),a(),a=c},isActive:i}}var nn=function(e){var t=rn({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(r){t.isActive()||"INITIAL_PUBLISH"!==r.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r)&&t.stop(),e(r)}}};function on(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return an(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return an(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cn=function(){var e=[];return{add:function(t){var r=setTimeout((function(){return function(t){var r=ge(e,(function(e){return e.timerId===t}));y(-1!==r,"Could not find timer"),on(e.splice(r,1),1)[0].callback()}(r)})),n={timerId:r,callback:t};e.push(n)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}};function ln(e){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(e)}function un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?un(Object(r),!0).forEach((function(t){fn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):un(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fn(e,t,r){var n;return n=function(e,t){if("object"!=ln(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ln(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ln(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dn=function(e,t){t()},pn=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},hn=function(e,t,r,n){if(e){var o=function(e){var t=!1,r=!1,n=setTimeout((function(){r=!0})),o=function(o){t?i("Announcement already made. Not making a second announcement"):r?i("\n        Announcements cannot be made asynchronously.\n        Default message has already been announced.\n      "):(t=!0,e(o),clearTimeout(n))};return o.wasCalled=function(){return t},o}(r);e(t,{announce:o}),o.wasCalled()||r(n(t))}else r(n(t))},mn=function(e,t){var r=function(e,t){var r=cn(),n=null,o=function(r){y(n,"Cannot fire onDragEnd when there is no matching onDragStart"),n=null,dn(0,(function(){return hn(e().onDragEnd,r,t,j.onDragEnd)}))};return{beforeCapture:function(t,r){y(!n,"Cannot fire onBeforeCapture as a drag start has already been published"),dn(0,(function(){var n=e().onBeforeCapture;n&&n({draggableId:t,mode:r})}))},beforeStart:function(t,r){y(!n,"Cannot fire onBeforeDragStart as a drag start has already been published"),dn(0,(function(){var n=e().onBeforeDragStart;n&&n(pn(t,r))}))},start:function(o,a){y(!n,"Cannot fire onBeforeDragStart as a drag start has already been published");var i=pn(o,a);n={mode:a,lastCritical:o,lastLocation:i.source,lastCombine:null},r.add((function(){dn(0,(function(){return hn(e().onDragStart,i,t,j.onDragStart)}))}))},update:function(o,a){var i=xe(a),c=je(a);y(n,"Cannot fire onDragMove when onDragStart has not been called");var l=!function(e,t){if(e===t)return!0;var r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n}(o,n.lastCritical);l&&(n.lastCritical=o);var u,s,f=(s=i,!(null==(u=n.lastLocation)&&null==s||null!=u&&null!=s&&u.droppableId===s.droppableId&&u.index===s.index));f&&(n.lastLocation=i);var d=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(n.lastCombine,c);if(d&&(n.lastCombine=c),l||f||d){var p=sn(sn({},pn(o,n.mode)),{},{combine:c,destination:i});r.add((function(){dn(0,(function(){return hn(e().onDragUpdate,p,t,j.onDragUpdate)}))}))}},flush:function(){y(n,"Can only flush responders while dragging"),r.flush()},drop:o,abort:function(){if(n){var e=sn(sn({},pn(n.lastCritical,n.mode)),{},{combine:null,destination:null,reason:"CANCEL"});o(e)}}}}(e,t);return function(e){return function(t){return function(n){if("BEFORE_INITIAL_CAPTURE"!==n.type){if("INITIAL_PUBLISH"===n.type){var o=n.payload.critical;return r.beforeStart(o,n.payload.movementMode),t(n),void r.start(o,n.payload.movementMode)}if("DROP_COMPLETE"===n.type){var a=n.payload.completed.result;return r.flush(),t(n),void r.drop(a)}if(t(n),"FLUSH"!==n.type){var i=e.getState();"DRAGGING"===i.phase&&r.update(i.critical,i.impact)}else r.abort()}else r.beforeCapture(n.payload.draggableId,n.payload.movementMode)}}}},yn=function(e){return function(t){return function(r){if("DROP_ANIMATION_FINISHED"===r.type){var n=e.getState();y("DROP_ANIMATING"===n.phase,"Cannot finish a drop animating when no drop is occurring"),e.dispatch(Lr({completed:n.completed}))}else t(r)}}},vn=function(e){var t=null,r=null;return function(n){return function(o){if("FLUSH"!==o.type&&"DROP_COMPLETE"!==o.type&&"DROP_ANIMATION_FINISHED"!==o.type||(r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)),n(o),"DROP_ANIMATE"===o.type){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};r=requestAnimationFrame((function(){r=null,t=d(window,[a])}))}}}},bn=function(e){return function(t){return function(r){if(t(r),"PUBLISH_WHILE_DRAGGING"===r.type){var n=e.getState();"DROP_PENDING"===n.phase&&(n.isWaiting||e.dispatch(Dr({reason:n.reason})))}}}},gn=P.d,wn=function(e){var t,r=e.dimensionMarshal,n=e.focusMarshal,o=e.styleMarshal,a=e.getResponders,i=e.announce,c=e.autoScroller;return Object(P.e)(wr,gn(Object(P.a)((t=o,function(){return function(e){return function(r){"INITIAL_PUBLISH"===r.type&&t.dragging(),"DROP_ANIMATE"===r.type&&t.dropping(r.payload.completed.result.reason),"FLUSH"!==r.type&&"DROP_COMPLETE"!==r.type||t.resting(),e(r)}}}),function(e){return function(){return function(t){return function(r){"DROP_COMPLETE"!==r.type&&"FLUSH"!==r.type&&"DROP_ANIMATE"!==r.type||e.stopPublishing(),t(r)}}}}(r),function(e){return function(t){var r=t.getState,n=t.dispatch;return function(t){return function(o){if("LIFT"===o.type){var a=o.payload,i=a.id,c=a.clientSelection,l=a.movementMode,u=r();"DROP_ANIMATING"===u.phase&&n(Lr({completed:u.completed})),y("IDLE"===r().phase,"Unexpected phase to start a drag"),n(Tr()),n({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:i,movementMode:l}});var s={draggableId:i,scrollOptions:{shouldPublishImmediately:"SNAP"===l}},f=e.startPublishing(s),d=f.critical,p=f.dimensions,h=f.viewport;n({type:"INITIAL_PUBLISH",payload:{critical:d,dimensions:p,clientSelection:c,movementMode:l,viewport:h}})}else t(o)}}}}(r),$r,yn,vn,bn,function(e){return function(t){return function(r){return function(n){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n))return e.stop(),void r(n);if("INITIAL_PUBLISH"===n.type){r(n);var o=t.getState();return y("DRAGGING"===o.phase,"Expected phase to be DRAGGING after INITIAL_PUBLISH"),void e.start(o)}r(n),e.scroll(t.getState())}}}}(c),nn,function(e){var t=!1;return function(){return function(r){return function(n){if("INITIAL_PUBLISH"===n.type)return t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),void e.tryRestoreFocusRecorded();if(r(n),t){if("FLUSH"===n.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===n.type){t=!1;var o=n.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(n),mn(a,i))))};var _n=function(e){var t=e.scrollHeight,r=e.scrollWidth,n=e.height,o=e.width,a=q({x:r,y:t},{x:o,y:n});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},En=function(){var e=document.documentElement;return y(e,"Cannot find document.documentElement"),e},On=function(){var e=En();return _n({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},An=function(e){var t,r,n,o,a,i,c,l=e.critical,u=e.scrollOptions,s=e.registry,f=(t=tn(),r=On(),n=t.y,o=t.x,a=En(),i=a.clientWidth,c=a.clientHeight,{frame:Y({top:n,left:o,right:o+i,bottom:n+c}),scroll:{initial:t,current:t,max:r,diff:{value:F,displacement:F}}}),d=f.scroll.current,p=l.droppable,h=s.droppable.getAllByType(p.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(d,u)})),m=s.draggable.getAllByType(l.draggable.type).map((function(e){return e.getDimension(d)}));return{dimensions:{draggables:Oe(m),droppables:Ee(h)},critical:l,viewport:f}};function Sn(e,t,r){return r.descriptor.id!==t.id&&(r.descriptor.type===t.type&&("virtual"===e.droppable.getById(r.descriptor.droppableId).descriptor.mode||(i("\n      You are attempting to add or remove a Draggable [id: ".concat(r.descriptor.id,"]\n      while a drag is occurring. This is only supported for virtual lists.\n\n      See https://github.com/atlassian/react-beautiful-dnd/blob/master/docs/patterns/virtual-lists.md\n    ")),!1)))}var kn,xn,jn=function(e,t){var r=null,n=function(e){var t=e.registry,r=e.callbacks,n={additions:{},removals:{},modified:{}},o=null,a=function(){o||(r.collectionStarting(),o=requestAnimationFrame((function(){o=null;var e=n,a=e.additions,i=e.removals,c=e.modified,l=Object.keys(a).map((function(e){return t.draggable.getById(e).getDimension(F)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),u=Object.keys(c).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),s={additions:l,removals:Object.keys(i),modified:u};n={additions:{},removals:{},modified:{}},r.publish(s)})))};return{add:function(e){var t=e.descriptor.id;n.additions[t]=e,n.modified[e.descriptor.droppableId]=!0,n.removals[t]&&delete n.removals[t],a()},remove:function(e){var t=e.descriptor;n.removals[t.id]=!0,n.modified[t.droppableId]=!0,n.additions[t.id]&&delete n.additions[t.id],a()},stop:function(){o&&(cancelAnimationFrame(o),o=null,n={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=function(t){y(r,"Should only be subscribed when a collection is occurring");var o=r.critical.draggable;"ADDITION"===t.type&&Sn(e,o,t.value)&&n.add(t.value),"REMOVAL"===t.type&&Sn(e,o,t.value)&&n.remove(t.value)};return{updateDroppableIsEnabled:function(n,o){y(e.droppable.exists(n),"Cannot update is enabled flag of Droppable ".concat(n," as it is not registered")),r&&t.updateDroppableIsEnabled({id:n,isEnabled:o})},updateDroppableIsCombineEnabled:function(n,o){r&&(y(e.droppable.exists(n),"Cannot update isCombineEnabled flag of Droppable ".concat(n," as it is not registered")),t.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:o}))},scrollDroppable:function(t,n){r&&e.droppable.getById(t).callbacks.scroll(n)},updateDroppableScroll:function(n,o){r&&(y(e.droppable.exists(n),"Cannot update the scroll on Droppable ".concat(n," as it is not registered")),t.updateDroppableScroll({id:n,newScroll:o}))},startPublishing:function(t){y(!r,"Cannot start capturing critical dimensions as there is already a collection");var n=e.draggable.getById(t.draggableId),a=e.droppable.getById(n.descriptor.droppableId),i={draggable:n.descriptor,droppable:a.descriptor},c=e.subscribe(o);return r={critical:i,unsubscribe:c},An({critical:i,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(r){n.stop();var t=r.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),r.unsubscribe(),r=null}}}},Pn=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},Cn=function(e){window.scrollBy(e.x,e.y)},In=Object(ve.a)((function(e){return Ae(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),Tn=function(e){var t=e.center,r=e.destination,n=e.droppables;if(r){var o=n[r];return o.frame?o:null}var a=function(e,t){return we(In(t),(function(t){return y(t.frame,"Invalid result"),Lt(t.frame.pageMarginBox)(e)}))}(t,n);return a},Ln={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},Dn=function(e){var t=e.startOfRange,r=e.endOfRange,n=e.current,o=r-t;return 0===o?(i("\n      Detected distance range of 0 in the fluid auto scroller\n      This is unexpected and would cause a divide by 0 issue.\n      Not allowing an auto scroll\n    "),0):(n-t)/o},Nn=Ln.durationDampening.accelerateAt,Rn=Ln.durationDampening.stopDampeningAt,Mn=function(e){var t=e.distanceToEdge,r=e.thresholds,n=e.dragStartTime,o=e.shouldUseTimeDampening,a=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Ln.maxPixelScroll;if(e===t.startScrollingFrom)return 1;var r=1-Dn({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),n=Ln.maxPixelScroll*Ln.ease(r);return Math.ceil(n)}(t,r);return 0===a?0:o?Math.max(function(e,t){var r=t,n=Rn,o=Date.now()-r;if(o>=Rn)return e;if(o<Nn)return 1;var a=Dn({startOfRange:Nn,endOfRange:n,current:o}),i=e*Ln.ease(a);return Math.ceil(i)}(a,n),1):a},Fn=function(e){var t=e.container,r=e.distanceToEdges,n=e.dragStartTime,o=e.axis,a=e.shouldUseTimeDampening,i=function(e,t){return{startScrollingFrom:e[t.size]*Ln.startFromPercentage,maxScrollValueAt:e[t.size]*Ln.maxScrollAtPercentage}}(t,o);return r[o.end]<r[o.start]?Mn({distanceToEdge:r[o.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a}):-1*Mn({distanceToEdge:r[o.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:a})},Bn=H((function(e){return 0===e?0:e})),qn=function(e){var t=e.dragStartTime,r=e.container,n=e.subject,o=e.center,a=e.shouldUseTimeDampening,i={top:o.y-r.top,right:r.right-o.x,bottom:r.bottom-o.y,left:o.x-r.left},c=Fn({container:r,distanceToEdges:i,dragStartTime:t,axis:ze,shouldUseTimeDampening:a}),l=Fn({container:r,distanceToEdges:i,dragStartTime:t,axis:Ge,shouldUseTimeDampening:a}),u=Bn({x:l,y:c});if(z(u,F))return null;var s=function(e){var t=e.container,r=e.subject,n=e.proposedScroll,o=r.height>t.height,a=r.width>t.width;return a||o?a&&o?null:{x:a?0:n.x,y:o?0:n.y}:n}({container:r,subject:n,proposedScroll:u});return s?z(s,F)?null:s:null},zn=H((function(e){return 0===e?0:e>0?1:-1})),Gn=(kn=function(e,t){return e<0?e:e>t?e-t:0},function(e){var t=e.current,r=e.max,n=e.change,o=B(t,n),a={x:kn(o.x,r.x),y:kn(o.y,r.y)};return z(a,F)?null:a}),Un=function(e){var t=e.max,r=e.current,n=e.change,o={x:Math.max(r.x,t.x),y:Math.max(r.y,t.y)},a=zn(n),i=Gn({max:o,current:r,change:a});return!i||(0!==a.x&&0===i.x||0!==a.y&&0===i.y)},Wn=function(e,t){return Un({current:e.scroll.current,max:e.scroll.max,change:t})},Vn=function(e,t){var r=e.frame;return!!r&&Un({current:r.scroll.current,max:r.scroll.max,change:t})},Hn=function(e){var t=e.state,r=e.dragStartTime,n=e.shouldUseTimeDampening,o=e.scrollWindow,a=e.scrollDroppable,i=t.current.page.borderBoxCenter,c=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var l=function(e){var t=e.viewport,r=e.subject,n=e.center,o=e.dragStartTime,a=e.shouldUseTimeDampening,i=qn({dragStartTime:o,container:t.frame,subject:r,center:n,shouldUseTimeDampening:a});return i&&Wn(t,i)?i:null}({dragStartTime:r,viewport:t.viewport,subject:c,center:i,shouldUseTimeDampening:n});if(l)return void o(l)}var u=Tn({center:i,destination:Ct(t.impact),droppables:t.dimensions.droppables});if(u){var s=function(e){var t=e.droppable,r=e.subject,n=e.center,o=e.dragStartTime,a=e.shouldUseTimeDampening,i=t.frame;if(!i)return null;var c=qn({dragStartTime:o,container:i.pageMarginBox,subject:r,center:n,shouldUseTimeDampening:a});return c&&Vn(t,c)?c:null}({dragStartTime:r,droppable:u,subject:c,center:i,shouldUseTimeDampening:n});s&&a(u.descriptor.id,s)}},Kn=function(e){var t=e.move,r=e.scrollDroppable,n=e.scrollWindow,o=function(e,t){if(!Vn(e,t))return t;var n=function(e,t){var r=e.frame;return r&&Vn(e,t)?Gn({current:r.scroll.current,max:r.scroll.max,change:t}):null}(e,t);if(!n)return r(e.descriptor.id,t),null;var o=q(t,n);return r(e.descriptor.id,o),q(t,o)},a=function(e,t,r){if(!e)return r;if(!Wn(t,r))return r;var o=function(e,t){if(!Wn(e,t))return null;var r=e.scroll.max,n=e.scroll.current;return Gn({current:n,max:r,change:t})}(t,r);if(!o)return n(r),null;var a=q(r,o);return n(a),q(r,a)};return function(e){var r=e.scrollJumpRequest;if(r){var n=Ct(e.impact);y(n,"Cannot perform a jump scroll when there is no destination");var i=o(e.dimensions.droppables[n],r);if(i){var c=e.viewport,l=a(e.isWindowScrollAllowed,c,i);l&&function(e,r){var n=B(e.current.client.selection,r);t({client:n})}(e,l)}}}},Yn=function(e){var t=e.scrollDroppable,r=e.scrollWindow,n=e.move,o=function(e){var t=e.scrollWindow,r=e.scrollDroppable,n=en(t),o=en(r),a=null,i=function(e){y(a,"Cannot fluid scroll if not dragging");var t=a,r=t.shouldUseTimeDampening,i=t.dragStartTime;Hn({state:e,scrollWindow:n,scrollDroppable:o,dragStartTime:i,shouldUseTimeDampening:r})};return{start:function(e){y(!a,"Cannot start auto scrolling when already started");var t=Date.now(),r=!1,n=function(){r=!0};Hn({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:n,scrollDroppable:n}),a={dragStartTime:t,shouldUseTimeDampening:r},r&&i(e)},stop:function(){a&&(n.cancel(),o.cancel(),a=null)},scroll:i}}({scrollWindow:r,scrollDroppable:t}),a=Kn({move:n,scrollWindow:r,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&a(e):o.scroll(e))},start:o.start,stop:o.stop}},Qn="data-rbd",Zn={base:xn="".concat(Qn,"-drag-handle"),draggableId:"".concat(xn,"-draggable-id"),contextId:"".concat(xn,"-context-id")},Xn=function(){var e="".concat(Qn,"-draggable");return{base:e,contextId:"".concat(e,"-context-id"),id:"".concat(e,"-id")}}(),Jn=function(){var e="".concat(Qn,"-droppable");return{base:e,contextId:"".concat(e,"-context-id"),id:"".concat(e,"-id")}}(),$n=("".concat(Qn,"-placeholder-context-id"),{contextId:"".concat(Qn,"-scroll-container-context-id")}),eo=function(e,t){return e.map((function(e){var r=e.styles[t];return r?"".concat(e.selector," { ").concat(r," }"):""})).join(" ")},to=function(e){var t,r,n,o=(t=e,function(e){return"[".concat(e,'="').concat(t,'"]')}),a=(r="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ",{selector:o(Zn.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:r,dragging:"pointer-events: none;",dropAnimating:r}}),i=[(n="\n      transition: ".concat(Ur.outOfTheWay,";\n    "),{selector:o(Xn.contextId),styles:{dragging:n,dropAnimating:n,userCancel:n}}),a,{selector:o(Jn.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:eo(i,"always"),resting:eo(i,"resting"),dragging:eo(i,"dragging"),dropAnimating:eo(i,"dropAnimating"),userCancel:eo(i,"userCancel")}},ro="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n.useLayoutEffect:n.useEffect,no=function(){var e=document.querySelector("head");return y(e,"Cannot find the head to append a style to"),e},oo=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};var ao=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function io(e){return e instanceof ao(e).HTMLElement}function co(e,t){var r="[".concat(Zn.contextId,'="').concat(e,'"]'),n=_e(document.querySelectorAll(r));if(!n.length)return i('Unable to find any drag handles in the context "'.concat(e,'"')),null;var o=we(n,(function(e){return e.getAttribute(Zn.draggableId)===t}));return o?io(o)?o:(i("drag handle needs to be a HTMLElement"),null):(i('Unable to find drag handle with id "'.concat(t,'" as no handle with a matching id was found')),null)}function lo(){var e={draggables:{},droppables:{}},t=[];function r(e){t.length&&t.forEach((function(t){return t(e)}))}function n(t){return e.draggables[t]||null}function o(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,r({type:"ADDITION",value:t})},update:function(t,r){var n=e.draggables[r.descriptor.id];n&&n.uniqueId===t.uniqueId&&(delete e.draggables[r.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var o=t.descriptor.id,a=n(o);a&&t.uniqueId===a.uniqueId&&(delete e.draggables[o],r({type:"REMOVAL",value:t}))},getById:function(e){var t=n(e);return y(t,"Cannot find draggable entry with id [".concat(e,"]")),t},findById:n,exists:function(e){return Boolean(n(e))},getAllByType:function(t){return be(e.draggables).filter((function(e){return e.descriptor.type===t}))}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var r=o(t.descriptor.id);r&&t.uniqueId===r.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=o(e);return y(t,"Cannot find droppable entry with id [".concat(e,"]")),t},findById:o,exists:function(e){return Boolean(o(e))},getAllByType:function(t){return be(e.droppables).filter((function(e){return e.descriptor.type===t}))}},subscribe:function(e){return t.push(e),function(){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var uo=o.a.createContext(null),so=function(){var e=document.body;return y(e,"Cannot find document.body"),e},fo={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},po=function(e){return"rbd-announcement-".concat(e)};var ho=0,mo={separator:"::"};function yo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mo;return T((function(){return"".concat(e).concat(t.separator).concat(ho++)}),[t.separator,e])}var vo=o.a.createContext(null);function bo(e){0}function go(e,t){bo()}function wo(e){var t=Object(n.useRef)(e);return Object(n.useEffect)((function(){t.current=e})),t}var _o=27,Eo=32,Oo=37,Ao=38,So=39,ko=40;function xo(e){return xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xo(e)}function jo(e,t,r){var n;return n=function(e,t){if("object"!=xo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==xo(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Po=jo(jo({},13,!0),9,!0),Co=function(e){Po[e.keyCode]&&e.preventDefault()},Io=function(){var e="visibilitychange";return"undefined"==typeof document?e:we([e,"ms".concat(e),"webkit".concat(e),"moz".concat(e),"o".concat(e)],(function(e){return"on".concat(e)in document}))||e}(),To=Io,Lo=0,Do=5;var No={type:"IDLE"};function Ro(e){var t=e.cancel,r=e.completed,n=e.getPhase,o=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,r=e.clientX,a=e.clientY;if(t===Lo){var i={x:r,y:a},c=n();if("DRAGGING"===c.type)return e.preventDefault(),void c.actions.move(i);y("PENDING"===c.type,"Cannot be IDLE");var l=c.point;if(u=l,s=i,Math.abs(s.x-u.x)>=Do||Math.abs(s.y-u.y)>=Do){var u,s;e.preventDefault();var f=c.actions.fluidLift(i);o({type:"DRAGGING",actions:f})}}}},{eventName:"mouseup",fn:function(e){var o=n();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===n().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==n().type)return e.keyCode===_o?(e.preventDefault(),void t()):void Co(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===n().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var r=n();y("IDLE"!==r.type,"Unexpected phase"),r.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:To,fn:t}]}function Mo(e){var t=Object(n.useRef)(No),r=Object(n.useRef)(c),o=T((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&t.button===Lo&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var n=e.findClosestDraggableId(t);if(n){var o=e.tryGetLock(n,l,{sourceEvent:t});if(o){t.preventDefault();var a={x:t.clientX,y:t.clientY};r.current(),f(o,a)}}}}}}),[e]),a=T((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var n=e.findOptionsForDraggable(r);n&&(n.shouldRespectForcePress||e.canGetLock(r)&&t.preventDefault())}}}}}),[e]),i=L((function(){r.current=d(window,[a,o],{passive:!1,capture:!0})}),[a,o]),l=L((function(){"IDLE"!==t.current.type&&(t.current=No,r.current(),i())}),[i]),u=L((function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),s=L((function(){var e=Ro({cancel:u,completed:l,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});r.current=d(window,e,{capture:!0,passive:!1})}),[u,l]),f=L((function(e,r){y("IDLE"===t.current.type,"Expected to move from IDLE to PENDING drag"),t.current={type:"PENDING",point:r,actions:e},s()}),[s]);ro((function(){return i(),function(){r.current()}}),[i])}function Fo(e){return Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fo(e)}function Bo(e,t,r){var n;return n=function(e,t){if("object"!=Fo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Fo(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qo(){}var zo=Bo(Bo(Bo(Bo({},34,!0),33,!0),36,!0),35,!0);function Go(e,t){function r(){t(),e.cancel()}return[{eventName:"keydown",fn:function(n){return n.keyCode===_o?(n.preventDefault(),void r()):n.keyCode===Eo?(n.preventDefault(),t(),void e.drop()):n.keyCode===ko?(n.preventDefault(),void e.moveDown()):n.keyCode===Ao?(n.preventDefault(),void e.moveUp()):n.keyCode===So?(n.preventDefault(),void e.moveRight()):n.keyCode===Oo?(n.preventDefault(),void e.moveLeft()):void(zo[n.keyCode]?n.preventDefault():Co(n))}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:To,fn:r}]}var Uo={type:"IDLE"},Wo=300,Vo=.15;function Ho(e){var t=Object(n.useRef)(Uo),r=Object(n.useRef)(c),o=L((function(){return t.current}),[]),a=L((function(e){t.current=e}),[]),i=T((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var o=e.tryGetLock(n,u,{sourceEvent:t});if(o){var a=t.touches[0],i={x:a.clientX,y:a.clientY},c=e.findClosestDragHandle(t);y(c,"Touch sensor unable to find drag handle"),r.current(),h(o,i,c)}}}}}}),[e]),l=L((function(){r.current=d(window,[i],{capture:!0,passive:!1})}),[i]),u=L((function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),a(Uo),r.current(),l())}),[l,a]),s=L((function(){var e=t.current;u(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[u]),f=L((function(e){var t={capture:!0,passive:!1},n={cancel:s,completed:u,getPhase:o},a=d(e,function(e){var t=e.cancel,r=e.completed,n=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var r=n();if("DRAGGING"===r.type){r.hasMoved=!0;var o=e.touches[0],a={x:o.clientX,y:o.clientY};e.preventDefault(),r.actions.move(a)}else t()}},{eventName:"touchend",fn:function(e){var o=n();"DRAGGING"===o.type?(e.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===n().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var r=n();y("IDLE"!==r.type);var o=e.touches[0];if(o&&o.force>=Vo){var a=r.actions.shouldRespectForcePress();if("PENDING"!==r.type)return a?r.hasMoved?void e.preventDefault():void t():void e.preventDefault();a&&t()}}},{eventName:To,fn:t}]}(n),t),i=d(window,function(e){var t=e.cancel,r=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===r().type?(e.keyCode===_o&&e.preventDefault(),t()):t()}},{eventName:To,fn:t}]}(n),t);r.current=function(){a(),i()}}),[s,o,u]),p=L((function(){var e=o();y("PENDING"===e.type,"Cannot start dragging from phase ".concat(e.type));var t=e.actions.fluidLift(e.point);t.move({x:e.point.x,y:e.point.y+1e-4}),a({type:"DRAGGING",actions:t,hasMoved:!1})}),[o,a]),h=L((function(e,t,r){y("IDLE"===o().type,"Expected to move from IDLE to PENDING drag");var n=setTimeout(p,Wo);a({type:"PENDING",point:t,actions:e,longPressTimerId:n}),f(r)}),[f,o,a,p]);ro((function(){return l(),function(){r.current();var e=o();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),a(Uo))}}),[o,l,a]),ro((function(){return d(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}var Ko={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function Yo(e,t){if(null==t)return!1;if(Boolean(Ko[t.tagName.toLowerCase()]))return!0;var r=t.getAttribute("contenteditable");return"true"===r||""===r||t!==e&&Yo(e,t.parentElement)}function Qo(e,t){var r=t.target;return!!io(r)&&Yo(e,r)}var Zo=function(e){return Y(e.getBoundingClientRect()).center};var Xo=function(){var e="matches";return"undefined"==typeof document?e:we([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function Jo(e,t){return null==e?null:e[Xo](t)?e:Jo(e.parentElement,t)}function $o(e,t){return e.closest?e.closest(t):Jo(e,t)}function ea(e,t){var r,n=t.target;if(!((r=n)instanceof ao(r).Element))return i("event.target must be a Element"),null;var o=function(e){return"[".concat(Zn.contextId,'="').concat(e,'"]')}(e),a=$o(n,o);return a?io(a)?a:(i("drag handle must be a HTMLElement"),null):null}function ta(e){return ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ta(e)}function ra(e){return function(e){if(Array.isArray(e))return na(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return na(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return na(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function na(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function aa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(r),!0).forEach((function(t){ia(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ia(e,t,r){var n;return n=function(e,t){if("object"!=ta(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ta(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ta(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ca(e){e.preventDefault()}function la(e){var t=e.expected,r=e.phase,n=e.isLockActive,o=e.shouldWarn;return n()?t===r||(o&&i("\n        Cannot perform action.\n        The actions you used belong to an outdated phase\n\n        Current phase: ".concat(t,"\n        You called an action from outdated phase: ").concat(r,"\n\n        Tips:\n\n        - Do not use preDragActions actions after calling preDragActions.lift()\n      ")),!1):(o&&i("\n        Cannot perform action.\n        The sensor no longer has an action lock.\n\n        Tips:\n\n        - Throw away your action handlers when forceStop() is called\n        - Check actions.isActive() if you really need to\n      "),!1)}function ua(e){var t=e.lockAPI,r=e.store,n=e.registry,o=e.draggableId;if(t.isClaimed())return!1;var a=n.draggable.findById(o);return a?!!a.options.isEnabled&&!!Pn(r.getState(),o):(i("Unable to find draggable with id: ".concat(o)),!1)}function sa(e){var t=e.lockAPI,r=e.contextId,n=e.store,o=e.registry,a=e.draggableId,l=e.forceSensorStop,u=e.sourceEvent;if(!ua({lockAPI:t,store:n,registry:o,draggableId:a}))return null;var s=o.draggable.getById(a),f=function(e,t){var r="[".concat(Xn.contextId,'="').concat(e,'"]'),n=we(_e(document.querySelectorAll(r)),(function(e){return e.getAttribute(Xn.id)===t}));return n?io(n)?n:(i("Draggable element is not a HTMLElement"),null):null}(r,s.descriptor.id);if(!f)return i("Unable to find draggable element with id: ".concat(a)),null;if(u&&!s.options.canDragInteractiveElements&&Qo(f,u))return null;var p=t.claim(l||c),h="PRE_DRAG";function m(){return s.options.shouldRespectForcePress}function v(){return t.isActive(p)}var b=function(e,t){la({expected:e,phase:h,isLockActive:v,shouldWarn:!0})&&n.dispatch(t())}.bind(null,"DRAGGING");function g(e){function r(){t.release(),h="COMPLETED"}function o(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shouldBlockNextClick:!1};if(e.cleanup(),o.shouldBlockNextClick){var a=d(window,[{eventName:"click",fn:ca,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(a)}r(),n.dispatch(Dr({reason:t}))}return"PRE_DRAG"!==h&&(r(),y("PRE_DRAG"===h,"Cannot lift in phase ".concat(h))),n.dispatch(_r(e.liftActionArgs)),h="DRAGGING",aa({isActive:function(){return la({expected:"DRAGGING",phase:h,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:m,drop:function(e){return o("DROP",e)},cancel:function(e){return o("CANCEL",e)}},e.actions)}return{isActive:function(){return la({expected:"PRE_DRAG",phase:h,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:m,fluidLift:function(e){var t=en((function(e){b((function(){return xr({client:e})}))}));return aa(aa({},g({liftActionArgs:{id:a,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}})),{},{move:t})},snapLift:function(){var e={moveUp:function(){return b(jr)},moveRight:function(){return b(Cr)},moveDown:function(){return b(Pr)},moveLeft:function(){return b(Ir)}};return g({liftActionArgs:{id:a,clientSelection:Zo(f),movementMode:"SNAP"},cleanup:c,actions:e})},abort:function(){la({expected:"PRE_DRAG",phase:h,isLockActive:v,shouldWarn:!0})&&t.release()}}}var fa=[Mo,function(e){var t=Object(n.useRef)(qo),r=T((function(){return{eventName:"keydown",fn:function(r){if(!r.defaultPrevented&&r.keyCode===Eo){var n=e.findClosestDraggableId(r);if(n){var a=e.tryGetLock(n,l,{sourceEvent:r});if(a){r.preventDefault();var i=!0,c=a.snapLift();t.current(),t.current=d(window,Go(c,l),{capture:!0,passive:!1})}}}function l(){y(i,"Cannot stop capturing a keyboard drag when not capturing"),i=!1,t.current(),o()}}}}),[e]),o=L((function(){t.current=d(window,[r],{passive:!1,capture:!0})}),[r]);ro((function(){return o(),function(){t.current()}}),[o])},Ho];function da(e){var t=e.contextId,r=e.store,o=e.registry,a=e.customSensors,i=e.enableDefaultSensors,c=[].concat(ra(i?fa:[]),ra(a||[])),l=Object(n.useState)((function(){return function(){var e=null;function t(){y(e,"Cannot release lock when there is no lock"),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){y(!e,"Cannot claim lock as it is already claimed");var r={abandon:t};return e=r,r},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],u=L((function(e,t){e.isDragging&&!t.isDragging&&l.tryAbandon()}),[l]);ro((function(){var e=r.getState();return r.subscribe((function(){var t=r.getState();u(e,t),e=t}))}),[l,r,u]),ro((function(){return l.tryAbandon}),[l.tryAbandon]);var s=L((function(e){return ua({lockAPI:l,registry:o,store:r,draggableId:e})}),[l,o,r]),f=L((function(e,n,a){return sa({lockAPI:l,registry:o,contextId:t,store:r,draggableId:e,forceSensorStop:n,sourceEvent:a&&a.sourceEvent?a.sourceEvent:null})}),[t,l,o,r]),d=L((function(e){return ea(t,e)}),[t]),p=L((function(e){return function(e,t){var r=ea(e,t);return r?r.getAttribute(Zn.draggableId):null}(t,e)}),[t]),h=L((function(e){var t=o.draggable.findById(e);return t?t.options:null}),[o.draggable]),m=L((function(){l.isClaimed()&&(l.tryAbandon(),"IDLE"!==r.getState().phase&&r.dispatch(Tr()))}),[l,r]),v=L(l.isClaimed,[l]),b=T((function(){return{canGetLock:s,tryGetLock:f,findClosestDraggableId:p,findClosestDragHandle:d,findOptionsForDraggable:h,tryReleaseLock:m,isLockClaimed:v}}),[s,f,p,d,h,m,v]);bo();for(var g=0;g<c.length;g++)c[g](b)}function pa(e){return pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pa(e)}function ha(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ma(e,t,r){var n;return n=function(e,t){if("object"!=pa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==pa(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ya=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function va(e){return y(e.current,"Could not find store from lazy ref"),e.current}function ba(e){var t=e.contextId,r=e.setCallbacks,a=e.sensors,c=e.nonce,l=e.dragHandleUsageInstructions,u=Object(n.useRef)(null);go();var s=wo(e),f=L((function(){return ya(s.current)}),[s]),d=function(e){var t=T((function(){return po(e)}),[e]),r=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=document.createElement("div");return r.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),Object.assign(e.style,fo),so().appendChild(e),function(){setTimeout((function(){var t=so();t.contains(e)&&t.removeChild(e),e===r.current&&(r.current=null)}))}}),[t]),L((function(e){var t=r.current;t?t.textContent=e:i('\n      A screen reader message was trying to be announced but it was unable to do so.\n      This can occur if you unmount your <DragDropContext /> in your onDragEnd.\n      Consider calling provided.announce() before the unmount so that the instruction will\n      not be lost for users relying on a screen reader.\n\n      Message not passed to screen reader:\n\n      "'.concat(e,'"\n    '))}),[])}(t),p=function(e){var t=e.contextId,r=e.text,o=yo("hidden-text",{separator:"-"}),a=T((function(){return function(e){var t=e.contextId,r=e.uniqueId;return"rbd-hidden-text-".concat(t,"-").concat(r)}({contextId:t,uniqueId:o})}),[o,t]);return Object(n.useEffect)((function(){var e=document.createElement("div");return e.id=a,e.textContent=r,e.style.display="none",so().appendChild(e),function(){var t=so();t.contains(e)&&t.removeChild(e)}}),[a,r]),a}({contextId:t,text:l}),h=function(e,t){var r=T((function(){return to(e)}),[e]),o=Object(n.useRef)(null),a=Object(n.useRef)(null),i=L(Object(ve.a)((function(e){var t=a.current;y(t,"Cannot set dynamic style element if it is not set"),t.textContent=e})),[]),c=L((function(e){var t=o.current;y(t,"Cannot set dynamic style element if it is not set"),t.textContent=e}),[]);ro((function(){y(!o.current&&!a.current,"style elements already mounted");var n=oo(t),l=oo(t);return o.current=n,a.current=l,n.setAttribute("".concat(Qn,"-always"),e),l.setAttribute("".concat(Qn,"-dynamic"),e),no().appendChild(n),no().appendChild(l),c(r.always),i(r.resting),function(){var e=function(e){var t=e.current;y(t,"Cannot unmount ref as it is not set"),no().removeChild(t),e.current=null};e(o),e(a)}}),[t,c,i,r.always,r.resting,e]);var l=L((function(){return i(r.dragging)}),[i,r.dragging]),u=L((function(e){i("DROP"!==e?r.userCancel:r.dropAnimating)}),[i,r.dropAnimating,r.userCancel]),s=L((function(){a.current&&i(r.resting)}),[i,r.resting]);return T((function(){return{dragging:l,dropping:u,resting:s}}),[l,u,s])}(t,c),m=L((function(e){va(u).dispatch(e)}),[]),v=T((function(){return Object(P.b)({publishWhileDragging:Er,updateDroppableScroll:Ar,updateDroppableIsEnabled:Sr,updateDroppableIsCombineEnabled:kr,collectionStarting:Or},m)}),[m]),b=function(){var e=T(lo,[]);return Object(n.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]),e}(),g=T((function(){return jn(b,v)}),[b,v]),w=T((function(){return Yn(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(r),!0).forEach((function(t){ma(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ha(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({scrollWindow:Cn,scrollDroppable:g.scrollDroppable},Object(P.b)({move:xr},m)))}),[g.scrollDroppable,m]),_=function(e){var t=Object(n.useRef)({}),r=Object(n.useRef)(null),o=Object(n.useRef)(null),a=Object(n.useRef)(!1),i=L((function(e,r){var n={id:e,focus:r};return t.current[e]=n,function(){var r=t.current;r[e]!==n&&delete r[e]}}),[]),c=L((function(t){var r=co(e,t);r&&r!==document.activeElement&&r.focus()}),[e]),l=L((function(e,t){r.current===e&&(r.current=t)}),[]),u=L((function(){o.current||a.current&&(o.current=requestAnimationFrame((function(){o.current=null;var e=r.current;e&&c(e)})))}),[c]),s=L((function(e){r.current=null;var t=document.activeElement;t&&t.getAttribute(Zn.draggableId)===e&&(r.current=e)}),[]);return ro((function(){return a.current=!0,function(){a.current=!1;var e=o.current;e&&cancelAnimationFrame(e)}}),[]),T((function(){return{register:i,tryRecordFocus:s,tryRestoreFocusRecorded:u,tryShiftRecord:l}}),[i,s,u,l])}(t),E=T((function(){return wn({announce:d,autoScroller:w,dimensionMarshal:g,focusMarshal:_,getResponders:f,styleMarshal:h})}),[d,w,g,_,f,h]);u.current=E;var O=L((function(){var e=va(u);"IDLE"!==e.getState().phase&&e.dispatch(Tr())}),[]),A=L((function(){var e=va(u).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);r(T((function(){return{isDragging:A,tryAbort:O}}),[A,O]));var S=L((function(e){return Pn(va(u).getState(),e)}),[]),k=L((function(){return Tt(va(u).getState())}),[]),x=T((function(){return{marshal:g,focus:_,contextId:t,canLift:S,isMovementAllowed:k,dragHandleUsageInstructionsId:p,registry:b}}),[t,g,p,_,S,k,b]);return da({contextId:t,store:E,registry:b,customSensors:a,enableDefaultSensors:!1!==e.enableDefaultSensors}),Object(n.useEffect)((function(){return O}),[O]),o.a.createElement(vo.Provider,{value:x},o.a.createElement(C.a,{context:uo,store:E},e.children))}var ga=0;function wa(e){var t=T((function(){return"".concat(ga++)}),[]),r=e.dragHandleUsageInstructions||j.dragHandleUsageInstructions;return o.a.createElement(O,null,(function(n){return o.a.createElement(ba,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var _a=r(74),Ea=r.n(_a),Oa=function(e){return function(t){return e===t}},Aa=Oa("scroll"),Sa=Oa("auto"),ka=(Oa("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),xa=function(e){var t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return ka(r,Aa)||ka(r,Sa)},ja=function e(t){return null==t||t===document.body||t===document.documentElement?null:xa(t)?t:e(t.parentElement)},Pa=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Ca=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},Ia=function(e){return{closestScrollable:ja(e),isFixedOnPage:Ca(e)}},Ta=function(e){var t=e.ref,r=e.descriptor,n=e.env,o=e.windowScroll,a=e.direction,i=e.isDropDisabled,c=e.isCombineEnabled,l=e.shouldClipSubject,u=n.closestScrollable,s=function(e,t){var r=ne(e);if(!t)return r;if(e!==t)return r;var n=r.paddingBox.top-t.scrollTop,o=r.paddingBox.left-t.scrollLeft,a=n+t.scrollHeight,i=o+t.scrollWidth,c=Q({top:n,right:i,bottom:a,left:o},r.border);return J({borderBox:c,margin:r.margin,border:r.border,padding:r.padding})}(t,u),f=te(s,o),d=function(){if(!u)return null;var e=ne(u),t={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:e,page:te(e,o),scroll:Pa(u),scrollSize:t,shouldClipSubject:l}}(),p=function(e){var t=e.descriptor,r=e.isEnabled,n=e.isCombineEnabled,o=e.isFixedOnPage,a=e.direction,i=e.client,c=e.page,l=e.closest,u=function(){if(!l)return null;var e=l.scrollSize,t=l.client,r=_n({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:r,diff:{value:F,displacement:F}}}}(),s="vertical"===a?ze:Ge;return{descriptor:t,isCombineEnabled:n,isFixedOnPage:o,axis:s,isEnabled:r,client:i,page:c,frame:u,subject:fe({page:c,withPlaceholder:null,axis:s,frame:u})}}({descriptor:r,isEnabled:!i,isCombineEnabled:c,isFixedOnPage:n.isFixedOnPage,direction:a,client:s,page:f,closest:d});return p},La={passive:!1},Da={passive:!0},Na=function(e){return e.shouldPublishImmediately?La:Da};function Ra(e){var t=Object(n.useContext)(e);return y(t,"Could not find required context"),t}var Ma=function(e){return e&&e.env.closestScrollable||null};function Fa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ba(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ba(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qa(){}var za={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},Ga=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,n=e.animate,o=function(e){var t=e.isAnimatingOpenOnMount,r=e.placeholder,n=e.animate;return t||"close"===n?za:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}}({isAnimatingOpenOnMount:t,placeholder:r,animate:n});return{display:r.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==n?Ur.placeholder:null}};function Ua(e){var t=Object(n.useRef)(null),r=L((function(){t.current&&(clearTimeout(t.current),t.current=null)}),[]),a=e.animate,i=e.onTransitionEnd,c=e.onClose,l=e.contextId,u=Fa(Object(n.useState)("open"===e.animate),2),s=u[0],f=u[1];Object(n.useEffect)((function(){return s?"open"!==a?(r(),f(!1),qa):t.current?qa:(t.current=setTimeout((function(){t.current=null,f(!1)})),r):qa}),[a,s,r]);var d=L((function(e){"height"===e.propertyName&&(i(),"close"===a&&c())}),[a,c,i]),p=Ga({isAnimatingOpenOnMount:s,animate:e.animate,placeholder:e.placeholder});return o.a.createElement(e.placeholder.tagName,{style:p,"data-rbd-placeholder-context-id":l,onTransitionEnd:d,ref:e.innerRef})}var Wa=o.a.memo(Ua),Va=o.a.createContext(null);function Ha(e){return Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ha(e)}function Ka(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ya(n.key),n)}}function Ya(e){var t=function(e,t){if("object"!=Ha(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ha(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ha(t)?t:String(t)}function Qa(e,t){return Qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qa(e,t)}function Za(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Xa(e);if(t){var o=Xa(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ha(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Xa(e){return Xa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xa(e)}var Ja=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qa(e,t)}(a,e);var t,r,n,o=Za(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).state={isVisible:Boolean(e.props.on),data:e.props.on,animate:e.props.shouldAnimate&&e.props.on?"open":"none"},e.onClose=function(){"close"===e.state.animate&&e.setState({isVisible:!1})},e}return t=a,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}}}],(r=[{key:"render",value:function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}])&&Ka(t.prototype,r),n&&Ka(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.a.PureComponent),$a={dragging:5e3,dropAnimating:4500},ei=function(e,t){return t?Ur.drop(t.duration):e?Ur.snap:Ur.fluid},ti=function(e,t){return e?t?Fr.drop:Fr.combining:null},ri=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode};function ni(e){return"DRAGGING"===e.type?(n=(r=e).dimension.client,o=r.offset,a=r.combineWith,i=r.dropping,c=Boolean(a),l=ri(r),u=Boolean(i),s=u?Vr.drop(o,c):Vr.moveTo(o),{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:ei(l,i),transform:s,opacity:ti(c,u),zIndex:u?$a.dropAnimating:$a.dragging,pointerEvents:"none"}):(t=e,{transform:Vr.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"});var t,r,n,o,a,i,c,l,u,s}function oi(e){var t=yo("draggable"),r=e.descriptor,o=e.registry,a=e.getDraggableRef,i=e.canDragInteractiveElements,c=e.shouldRespectForcePress,l=e.isEnabled,u=T((function(){return{canDragInteractiveElements:i,shouldRespectForcePress:c,isEnabled:l}}),[i,l,c]),s=L((function(e){var t=a();return y(t,"Cannot get dimension when no ref is set"),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F,n=window.getComputedStyle(t),o=t.getBoundingClientRect(),a=re(o,n),i=te(a,r);return{descriptor:e,placeholder:{client:a,tagName:t.tagName.toLowerCase(),display:n.display},displaceBy:{x:a.marginBox.width,y:a.marginBox.height},client:a,page:i}}(r,t,e)}),[r,a]),f=T((function(){return{uniqueId:t,descriptor:r,options:u,getDimension:s}}),[r,s,u,t]),d=Object(n.useRef)(f),p=Object(n.useRef)(!0);ro((function(){return o.draggable.register(d.current),function(){return o.draggable.unregister(d.current)}}),[o.draggable]),ro((function(){if(p.current)p.current=!1;else{var e=d.current;d.current=f,o.draggable.update(f,e)}}),[f,o.draggable])}function ai(e,t,r){go()}function ii(e){e.preventDefault()}var ci=function(e,t){return e===t},li=function(e){var t=e.combine,r=e.destination;return r?r.droppableId:t?t.droppableId:null};function ui(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var si={mapped:{type:"SECONDARY",offset:F,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:ui(null)}};var fi={dropAnimationFinished:Nr},di=Object(C.d)((function(){var e,t,r,n=(e=Object(ve.a)((function(e,t){return{x:e,y:t}})),t=Object(ve.a)((function(e,t,r,n,o){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(o),dropAnimation:o,mode:e,draggingOver:r,combineWith:n,combineTargetFor:null}})),r=Object(ve.a)((function(e,r,n,o,a,i,c){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:a,combineWith:i,mode:r,offset:e,dimension:n,forceShouldAnimate:c,snapshot:t(r,o,a,i,null)}}})),function(n,o){if(n.isDragging){if(n.critical.draggable.id!==o.draggableId)return null;var a=n.current.client.offset,i=n.dimensions.draggables[o.draggableId],c=Ct(n.impact),l=(s=n.impact).at&&"COMBINE"===s.at.type?s.at.combine.draggableId:null,u=n.forceShouldAnimate;return r(e(a.x,a.y),n.movementMode,i,o.isClone,c,l,u)}var s;if("DROP_ANIMATING"===n.phase){var f=n.completed;if(f.result.draggableId!==o.draggableId)return null;var d=o.isClone,p=n.dimensions.draggables[o.draggableId],h=f.result,m=h.mode,y=li(h),v=function(e){return e.combine?e.combine.draggableId:null}(h),b={duration:n.dropDuration,curve:Mr,moveTo:n.newHomeClientOffset,opacity:v?Fr.drop:null,scale:v?Br.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:p,dropping:b,draggingOver:y,combineWith:v,mode:m,forceShouldAnimate:null,snapshot:t(m,d,y,v,b)}}}return null}),o=function(){var e=Object(ve.a)((function(e,t){return{x:e,y:t}})),t=Object(ve.a)(ui),r=Object(ve.a)((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{mapped:{type:"SECONDARY",offset:e,combineTargetFor:r,shouldAnimateDisplacement:arguments.length>2?arguments[2]:void 0,snapshot:t(r)}}})),n=function(e){return e?r(F,e,!0):null},o=function(t,o,a,i){var c=a.displaced.visible[t],l=Boolean(i.inVirtualList&&i.effected[t]),u=je(a),s=u&&u.draggableId===t?o:null;if(!c){if(!l)return n(s);if(a.displaced.invisible[t])return null;var f=G(i.displacedBy.point),d=e(f.x,f.y);return r(d,s,!0)}if(l)return n(s);var p=a.displacedBy.point,h=e(p.x,p.y);return r(h,s,c.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:o(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var r=e.completed;return r.result.draggableId===t.draggableId?null:o(t.draggableId,r.result.draggableId,r.impact,r.afterCritical)}return null}}();return function(e,t){return n(e,t)||o(e,t)||si}}),fi,null,{context:uo,pure:!0,areStatePropsEqual:ci})((function(e){var t=Object(n.useRef)(null),r=L((function(e){t.current=e}),[]),o=L((function(){return t.current}),[]),a=Ra(vo),i=a.contextId,c=a.dragHandleUsageInstructionsId,l=a.registry,u=Ra(Va),s=u.type,f=u.droppableId,d=T((function(){return{id:e.draggableId,index:e.index,type:s,droppableId:f}}),[e.draggableId,e.index,s,f]),p=e.children,h=e.draggableId,m=e.isEnabled,y=e.shouldRespectForcePress,v=e.canDragInteractiveElements,b=e.isClone,g=e.mapped,w=e.dropAnimationFinished;ai(),bo(),b||oi(T((function(){return{descriptor:d,registry:l,getDraggableRef:o,canDragInteractiveElements:v,shouldRespectForcePress:y,isEnabled:m}}),[d,l,o,v,y,m]));var _=T((function(){return m?{tabIndex:0,role:"button","aria-describedby":c,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:ii}:null}),[i,c,h,m]),E=L((function(e){"DRAGGING"===g.type&&g.dropping&&"transform"===e.propertyName&&w()}),[w,g]),O=T((function(){var e=ni(g),t="DRAGGING"===g.type&&g.dropping?E:null;return{innerRef:r,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":h,style:e,onTransitionEnd:t},dragHandleProps:_}}),[i,_,h,g,E,r]),A=T((function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}}),[d.droppableId,d.id,d.index,d.type]);return p(O,g.snapshot,A)})),pi=di;function hi(){return hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hi.apply(this,arguments)}function mi(e){return Ra(Va).isUsingCloneFor!==e.draggableId||e.isClone?o.a.createElement(pi,e):null}function yi(e){var t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,r=Boolean(e.disableInteractiveElementBlocking),n=Boolean(e.shouldRespectForcePress);return o.a.createElement(mi,hi({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}function vi(e){return vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vi(e)}function bi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(r),!0).forEach((function(t){wi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wi(e,t,r){var n;return n=function(e,t){if("object"!=vi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==vi(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _i=function(e,t){return e===t.droppable.type},Ei=function(e,t){return t.draggables[e.draggable.id]},Oi={updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}};var Ai={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return y(document.body,"document.body is not ready"),document.body}},Si=Object(C.d)((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=gi(gi({},e),{},{shouldAnimatePlaceholder:!1}),r=Object(ve.a)((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),n=Object(ve.a)((function(n,o,a,i,c,l){var u=c.descriptor.id;if(c.descriptor.droppableId===n){var s=l?{render:l,dragging:r(c.descriptor)}:null,f={isDraggingOver:a,draggingOverWith:a?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!1,snapshot:f,useClone:s}}if(!o)return t;if(!i)return e;var d={isDraggingOver:a,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!0,snapshot:d,useClone:null}}));return function(r,o){var a=o.droppableId,i=o.type,c=!o.isDropDisabled,l=o.renderClone;if(r.isDragging){var u=r.critical;if(!_i(i,u))return t;var s=Ei(u,r.dimensions),f=Ct(r.impact)===a;return n(a,c,f,f,s,l)}if("DROP_ANIMATING"===r.phase){var d=r.completed;if(!_i(i,d.critical))return t;var p=Ei(d.critical,r.dimensions);return n(a,c,li(d.result)===a,Ct(d.impact)===a,p,l)}if("IDLE"===r.phase&&r.completed&&!r.shouldFlush){var h=r.completed;if(!_i(i,h.critical))return t;var m=Ct(h.impact)===a,y=Boolean(h.impact.at&&"COMBINE"===h.impact.at.type),v=h.critical.droppable.id===a;return m?y?e:t:v?e:t}return t}}),Oi,null,{context:uo,pure:!0,areStatePropsEqual:ci})((function(e){var t=Object(n.useContext)(vo);y(t,"Could not find app context");var r=t.contextId,a=t.isMovementAllowed,c=Object(n.useRef)(null),l=Object(n.useRef)(null),u=e.children,s=e.droppableId,f=e.type,d=e.mode,p=e.direction,h=e.ignoreContainerClipping,m=e.isDropDisabled,v=e.isCombineEnabled,b=e.snapshot,g=e.useClone,w=e.updateViewportMaxScroll,_=e.getContainerForClone,E=L((function(){return c.current}),[]),O=L((function(e){c.current=e}),[]),A=(L((function(){return l.current}),[]),L((function(e){l.current=e}),[]));go();var S=L((function(){a()&&w({maxScroll:On()})}),[a,w]);!function(e){var t=Object(n.useRef)(null),r=Ra(vo),o=yo("droppable"),a=r.registry,c=r.marshal,l=wo(e),u=T((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),s=Object(n.useRef)(u),f=T((function(){return Object(ve.a)((function(e,r){y(t.current,"Can only update scroll when dragging");var n={x:e,y:r};c.updateDroppableScroll(u.id,n)}))}),[u.id,c]),d=L((function(){var e=t.current;return e&&e.env.closestScrollable?Pa(e.env.closestScrollable):F}),[]),p=L((function(){var e=d();f(e.x,e.y)}),[d,f]),h=T((function(){return en(p)}),[p]),m=L((function(){var e=t.current,r=Ma(e);y(e&&r,"Could not find scroll options while scrolling"),e.scrollOptions.shouldPublishImmediately?p():h()}),[h,p]),v=L((function(e,n){y(!t.current,"Cannot collect a droppable while a drag is occurring");var o=l.current,a=o.getDroppableRef();y(a,"Cannot collect without a droppable ref");var i=Ia(a),c={ref:a,descriptor:u,env:i,scrollOptions:n};t.current=c;var s=Ta({ref:a,descriptor:u,env:i,windowScroll:e,direction:o.direction,isDropDisabled:o.isDropDisabled,isCombineEnabled:o.isCombineEnabled,shouldClipSubject:!o.ignoreContainerClipping}),f=i.closestScrollable;return f&&(f.setAttribute($n.contextId,r.contextId),f.addEventListener("scroll",m,Na(c.scrollOptions))),s}),[r.contextId,u,m,l]),b=L((function(){var e=t.current,r=Ma(e);return y(e&&r,"Can only recollect Droppable client for Droppables that have a scroll container"),Pa(r)}),[]),g=L((function(){var e=t.current;y(e,"Cannot stop drag when no active drag");var r=Ma(e);t.current=null,r&&(h.cancel(),r.removeAttribute($n.contextId),r.removeEventListener("scroll",m,Na(e.scrollOptions)))}),[m,h]),w=L((function(e){var r=t.current;y(r,"Cannot scroll when there is no drag");var n=Ma(r);y(n,"Cannot scroll a droppable with no closest scrollable"),n.scrollTop+=e.y,n.scrollLeft+=e.x}),[]),_=T((function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:b,dragStopped:g,scroll:w}}),[g,v,b,w]),E=T((function(){return{uniqueId:o,descriptor:u,callbacks:_}}),[_,u,o]);ro((function(){return s.current=E.descriptor,a.droppable.register(E),function(){t.current&&(i("Unsupported: changing the droppableId or type of a Droppable during a drag"),g()),a.droppable.unregister(E)}}),[_,u,g,E,c,a.droppable]),ro((function(){t.current&&c.updateDroppableIsEnabled(s.current.id,!e.isDropDisabled)}),[e.isDropDisabled,c]),ro((function(){t.current&&c.updateDroppableIsCombineEnabled(s.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,c])}({droppableId:s,type:f,mode:d,direction:p,isDropDisabled:m,isCombineEnabled:v,ignoreContainerClipping:h,getDroppableRef:E});var k=o.a.createElement(Ja,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,n=e.data,a=e.animate;return o.a.createElement(Wa,{placeholder:n,onClose:t,innerRef:A,animate:a,contextId:r,onTransitionEnd:S})})),x=T((function(){return{innerRef:O,placeholder:k,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":r}}}),[r,s,k,O]),j=g?g.dragging.draggableId:null,P=T((function(){return{droppableId:s,type:f,isUsingCloneFor:j}}),[s,j,f]);return o.a.createElement(Va.Provider,{value:P},u(x,b),function(){if(!g)return null;var e=g.dragging,t=g.render,r=o.a.createElement(mi,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(r,n){return t(r,n,e)}));return Ea.a.createPortal(r,_())}())}));Si.defaultProps=Ai;var ki=Si},5397:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"e",(function(){return i})),r.d(t,"f",(function(){return c})),r.d(t,"c",(function(){return l}));var n="doc_present_mode",o="doc_present_pos",a={READY:"ready",CLICK:"click",CACHE:"cache"},i=["id","level","depth"],c=72e5,l={flow:"0",slideshow:"1"}},5432:function(e,t,r){"use strict";r.d(t,"a",(function(){return wt})),r.d(t,"d",(function(){return je})),r.d(t,"c",(function(){return Ie})),r.d(t,"b",(function(){return Ne}));var n=r(0),o=r.n(n),a=r(3734),i=r(5382);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var l="object"===("undefined"==typeof performance?"undefined":c(performance))&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function u(e){cancelAnimationFrame(e.id)}function s(e,t){var r=l();var n={id:requestAnimationFrame((function o(){l()-r>=t?e.call(null):n.id=requestAnimationFrame(o)}))};return n}var f=-1;function d(){if(-1===f||arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",document.body.appendChild(e),f=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return f}var p=null;function h(){if(null===p||arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";var r=document.createElement("div"),n=r.style;return n.width="100px",n.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?p="positive-descending":(e.scrollLeft=1,p=0===e.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(e),p}return p}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function E(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:String(t)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var o=k(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}(this,r)}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var x=function(e){var t=e.columnIndex,r=(e.data,e.rowIndex);return"".concat(r,":").concat(t)};function j(e){var t,r=e.getColumnOffset,o=e.getColumnStartIndexForOffset,i=e.getColumnStopIndexForStartIndex,c=e.getColumnWidth,l=e.getEstimatedTotalHeight,f=e.getEstimatedTotalWidth,p=e.getOffsetForColumnAndAlignment,m=e.getOffsetForRowAndAlignment,v=e.getRowHeight,g=e.getRowOffset,E=e.getRowStartIndexForOffset,k=e.getRowStopIndexForStartIndex,j=e.initInstanceProps,C=e.shouldResetStyleCacheOnItemSizeChange,I=e.validateProps;return(t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(N,e);var t,T,L,D=A(N);function N(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,N),(t=D.call(this,e))._instanceProps=j(t.props,S(t)),t._resetIsScrollingTimeoutId=null,t._outerRef=void 0,t.state={instance:S(t),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:"number"==typeof t.props.initialScrollLeft?t.props.initialScrollLeft:0,scrollTop:"number"==typeof t.props.initialScrollTop?t.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},t._callOnItemsRendered=Object(a.a)((function(e,r,n,o,a,i,c,l){return t.props.onItemsRendered({overscanColumnStartIndex:e,overscanColumnStopIndex:r,overscanRowStartIndex:n,overscanRowStopIndex:o,visibleColumnStartIndex:a,visibleColumnStopIndex:i,visibleRowStartIndex:c,visibleRowStopIndex:l})})),t._callOnScroll=Object(a.a)((function(e,r,n,o,a){return t.props.onScroll({horizontalScrollDirection:n,scrollLeft:e,scrollTop:r,verticalScrollDirection:o,scrollUpdateWasRequested:a})})),t._getItemStyle=function(e,n){var o,a=t.props,i=a.columnWidth,l=a.direction,u=a.rowHeight,s=t._getItemStyleCache(C&&i,C&&l,C&&u),f="".concat(e,":").concat(n);if(s.hasOwnProperty(f))o=s[f];else{var d=r(t.props,n,t._instanceProps),p="rtl"===l;s[f]=o={position:"absolute",left:p?void 0:d,right:p?d:void 0,top:g(t.props,e,t._instanceProps),height:v(t.props,e,t._instanceProps),width:c(t.props,n,t._instanceProps)}}return o},t._getItemStyleCache=Object(a.a)((function(e,t,r){return{}})),t._onScroll=function(e){var r=e.currentTarget,n=r.clientHeight,o=r.clientWidth,a=r.scrollLeft,i=r.scrollTop,c=r.scrollHeight,l=r.scrollWidth;t.setState((function(e){if(e.scrollLeft===a&&e.scrollTop===i)return null;var r=t.props.direction,u=a;if("rtl"===r)switch(h()){case"negative":u=-a;break;case"positive-descending":u=l-o-a}u=Math.max(0,Math.min(u,l-o));var s=Math.max(0,Math.min(i,c-n));return{isScrolling:!0,horizontalScrollDirection:e.scrollLeft<a?"forward":"backward",scrollLeft:u,scrollTop:s,verticalScrollDirection:e.scrollTop<i?"forward":"backward",scrollUpdateWasRequested:!1}}),t._resetIsScrollingDebounced)},t._outerRefSetter=function(e){var r=t.props.outerRef;t._outerRef=e,"function"==typeof r?r(e):null!=r&&"object"===w(r)&&r.hasOwnProperty("current")&&(r.current=e)},t._resetIsScrollingDebounced=function(){null!==t._resetIsScrollingTimeoutId&&u(t._resetIsScrollingTimeoutId),t._resetIsScrollingTimeoutId=s(t._resetIsScrolling,150)},t._resetIsScrolling=function(){t._resetIsScrollingTimeoutId=null,t.setState({isScrolling:!1},(function(){t._getItemStyleCache(-1)}))},t}return t=N,L=[{key:"getDerivedStateFromProps",value:function(e,t){return P(e,t),I(e),null}}],(T=[{key:"scrollTo",value:function(e){var t=e.scrollLeft,r=e.scrollTop;void 0!==t&&(t=Math.max(0,t)),void 0!==r&&(r=Math.max(0,r)),this.setState((function(e){return void 0===t&&(t=e.scrollLeft),void 0===r&&(r=e.scrollTop),e.scrollLeft===t&&e.scrollTop===r?null:{horizontalScrollDirection:e.scrollLeft<t?"forward":"backward",scrollLeft:t,scrollTop:r,scrollUpdateWasRequested:!0,verticalScrollDirection:e.scrollTop<r?"forward":"backward"}}),this._resetIsScrollingDebounced)}},{key:"scrollToItem",value:function(e){var t=e.align,r=void 0===t?"auto":t,n=e.columnIndex,o=e.rowIndex,a=this.props,i=a.columnCount,c=a.height,u=a.rowCount,s=a.width,h=this.state,y=h.scrollLeft,v=h.scrollTop,b=d();void 0!==n&&(n=Math.max(0,Math.min(n,i-1))),void 0!==o&&(o=Math.max(0,Math.min(o,u-1)));var g=l(this.props,this._instanceProps),w=f(this.props,this._instanceProps)>s?b:0,_=g>c?b:0;this.scrollTo({scrollLeft:void 0!==n?p(this.props,n,r,y,this._instanceProps,_):y,scrollTop:void 0!==o?m(this.props,o,r,v,this._instanceProps,w):v})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.initialScrollLeft,r=e.initialScrollTop;if(null!=this._outerRef){var n=this._outerRef;"number"==typeof t&&(n.scrollLeft=t),"number"==typeof r&&(n.scrollTop=r)}this._callPropsCallbacks()}},{key:"componentDidUpdate",value:function(){var e=this.props.direction,t=this.state,r=t.scrollLeft,n=t.scrollTop;if(t.scrollUpdateWasRequested&&null!=this._outerRef){var o=this._outerRef;if("rtl"===e)switch(h()){case"negative":o.scrollLeft=-r;break;case"positive-ascending":o.scrollLeft=r;break;default:var a=o.clientWidth,i=o.scrollWidth;o.scrollLeft=i-a-r}else o.scrollLeft=Math.max(0,r);o.scrollTop=Math.max(0,n)}this._callPropsCallbacks()}},{key:"componentWillUnmount",value:function(){null!==this._resetIsScrollingTimeoutId&&u(this._resetIsScrollingTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.className,o=e.columnCount,a=e.direction,i=e.height,c=e.innerRef,u=e.innerElementType,s=e.innerTagName,d=e.itemData,p=e.itemKey,h=void 0===p?x:p,m=e.outerElementType,v=e.outerTagName,g=e.rowCount,w=e.style,_=e.useIsScrolling,E=e.width,O=this.state.isScrolling,A=b(this._getHorizontalRangeToRender(),2),S=A[0],k=A[1],j=b(this._getVerticalRangeToRender(),2),P=j[0],C=j[1],I=[];if(o>0&&g)for(var T=P;T<=C;T++)for(var L=S;L<=k;L++)I.push(Object(n.createElement)(t,{columnIndex:L,data:d,isScrolling:_?O:void 0,key:h({columnIndex:L,data:d,rowIndex:T}),rowIndex:T,style:this._getItemStyle(T,L)}));var D=l(this.props,this._instanceProps),N=f(this.props,this._instanceProps);return Object(n.createElement)(m||v||"div",{className:r,onScroll:this._onScroll,ref:this._outerRefSetter,style:y({position:"relative",height:i,width:E,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:a},w)},Object(n.createElement)(u||s||"div",{children:I,ref:c,style:{height:D,pointerEvents:O?"none":void 0,width:N}}))}},{key:"_callPropsCallbacks",value:function(){var e=this.props,t=e.columnCount,r=e.onItemsRendered,n=e.onScroll,o=e.rowCount;if("function"==typeof r&&t>0&&o>0){var a=b(this._getHorizontalRangeToRender(),4),i=a[0],c=a[1],l=a[2],u=a[3],s=b(this._getVerticalRangeToRender(),4),f=s[0],d=s[1],p=s[2],h=s[3];this._callOnItemsRendered(i,c,f,d,l,u,p,h)}if("function"==typeof n){var m=this.state,y=m.horizontalScrollDirection,v=m.scrollLeft,g=m.scrollTop,w=m.scrollUpdateWasRequested,_=m.verticalScrollDirection;this._callOnScroll(v,g,y,_,w)}}},{key:"_getHorizontalRangeToRender",value:function(){var e=this.props,t=e.columnCount,r=e.overscanColumnCount,n=e.overscanColumnsCount,a=e.overscanCount,c=e.rowCount,l=this.state,u=l.horizontalScrollDirection,s=l.isScrolling,f=l.scrollLeft,d=r||n||a||1;if(0===t||0===c)return[0,0,0,0];var p=o(this.props,f,this._instanceProps),h=i(this.props,p,f,this._instanceProps),m=s&&"backward"!==u?1:Math.max(1,d),y=s&&"forward"!==u?1:Math.max(1,d);return[Math.max(0,p-m),Math.max(0,Math.min(t-1,h+y)),p,h]}},{key:"_getVerticalRangeToRender",value:function(){var e=this.props,t=e.columnCount,r=e.overscanCount,n=e.overscanRowCount,o=e.overscanRowsCount,a=e.rowCount,i=this.state,c=i.isScrolling,l=i.verticalScrollDirection,u=i.scrollTop,s=n||o||r||1;if(0===t||0===a)return[0,0,0,0];var f=E(this.props,u,this._instanceProps),d=k(this.props,f,u,this._instanceProps),p=c&&"backward"!==l?1:Math.max(1,s),h=c&&"forward"!==l?1:Math.max(1,s);return[Math.max(0,f-p),Math.max(0,Math.min(a-1,d+h)),f,d]}}])&&_(t.prototype,T),L&&_(t,L),Object.defineProperty(t,"prototype",{writable:!1}),N}(n.PureComponent)).defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},t}var P=function(e,t){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,t.instance};var C=function(e,t){var r=e.rowCount,n=t.rowMetadataMap,o=t.estimatedRowHeight,a=t.lastMeasuredRowIndex,i=0;if(a>=r&&(a=r-1),a>=0){var c=n[a];i=c.offset+c.size}return i+(r-a-1)*o},I=function(e,t){var r=e.columnCount,n=t.columnMetadataMap,o=t.estimatedColumnWidth,a=t.lastMeasuredColumnIndex,i=0;if(a>=r&&(a=r-1),a>=0){var c=n[a];i=c.offset+c.size}return i+(r-a-1)*o},T=function(e,t,r,n){var o,a,i;if("column"===e?(o=n.columnMetadataMap,a=t.columnWidth,i=n.lastMeasuredColumnIndex):(o=n.rowMetadataMap,a=t.rowHeight,i=n.lastMeasuredRowIndex),r>i){var c=0;if(i>=0){var l=o[i];c=l.offset+l.size}for(var u=i+1;u<=r;u++){var s=a(u);o[u]={offset:c,size:s},c+=s}"column"===e?n.lastMeasuredColumnIndex=r:n.lastMeasuredRowIndex=r}return o[r]},L=function(e,t,r,n){var o,a;return"column"===e?(o=r.columnMetadataMap,a=r.lastMeasuredColumnIndex):(o=r.rowMetadataMap,a=r.lastMeasuredRowIndex),(a>0?o[a].offset:0)>=n?D(e,t,r,a,0,n):N(e,t,r,Math.max(0,a),n)},D=function(e,t,r,n,o,a){for(;o<=n;){var i=o+Math.floor((n-o)/2),c=T(e,t,i,r).offset;if(c===a)return i;c<a?o=i+1:c>a&&(n=i-1)}return o>0?o-1:0},N=function(e,t,r,n,o){for(var a="column"===e?t.columnCount:t.rowCount,i=1;n<a&&T(e,t,n,r).offset<o;)n+=i,i*=2;return D(e,t,r,Math.min(n,a-1),Math.floor(n/2),o)},R=function(e,t,r,n,o,a,i){var c="column"===e?t.width:t.height,l=T(e,t,r,a),u="column"===e?I(t,a):C(t,a),s=Math.max(0,Math.min(u-c,l.offset)),f=Math.max(0,l.offset-c+i+l.size);switch("smart"===n&&(n=o>=f-c&&o<=s+c?"auto":"center"),n){case"start":return s;case"end":return f;case"center":return Math.round(f+(s-f)/2);default:return o>=f&&o<=s?o:f>s||o<f?f:s}};j({getColumnOffset:function(e,t,r){return T("column",e,t,r).offset},getColumnStartIndexForOffset:function(e,t,r){return L("column",e,r,t)},getColumnStopIndexForStartIndex:function(e,t,r,n){for(var o=e.columnCount,a=e.width,i=T("column",e,t,n),c=r+a,l=i.offset+i.size,u=t;u<o-1&&l<c;)u++,l+=T("column",e,u,n).size;return u},getColumnWidth:function(e,t,r){return r.columnMetadataMap[t].size},getEstimatedTotalHeight:C,getEstimatedTotalWidth:I,getOffsetForColumnAndAlignment:function(e,t,r,n,o,a){return R("column",e,t,r,n,o,a)},getOffsetForRowAndAlignment:function(e,t,r,n,o,a){return R("row",e,t,r,n,o,a)},getRowOffset:function(e,t,r){return T("row",e,t,r).offset},getRowHeight:function(e,t,r){return r.rowMetadataMap[t].size},getRowStartIndexForOffset:function(e,t,r){return L("row",e,r,t)},getRowStopIndexForStartIndex:function(e,t,r,n){for(var o=e.rowCount,a=e.height,i=T("row",e,t,n),c=r+a,l=i.offset+i.size,u=t;u<o-1&&l<c;)u++,l+=T("row",e,u,n).size;return u},initInstanceProps:function(e,t){var r={columnMetadataMap:{},estimatedColumnWidth:e.estimatedColumnWidth||50,estimatedRowHeight:e.estimatedRowHeight||50,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return t.resetAfterColumnIndex=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.resetAfterIndices({columnIndex:e,shouldForceUpdate:r})},t.resetAfterRowIndex=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.resetAfterIndices({rowIndex:e,shouldForceUpdate:r})},t.resetAfterIndices=function(e){var n=e.columnIndex,o=e.rowIndex,a=e.shouldForceUpdate,i=void 0===a||a;"number"==typeof n&&(r.lastMeasuredColumnIndex=Math.min(r.lastMeasuredColumnIndex,n-1)),"number"==typeof o&&(r.lastMeasuredRowIndex=Math.min(r.lastMeasuredRowIndex,o-1)),t._getItemStyleCache(-1),i&&t.forceUpdate()},r},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.columnWidth,e.rowHeight}});function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return(t=W(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}function W(e){var t=function(e,t){if("object"!=G(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==G(t)?t:String(t)}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Y(e);if(t){var o=Y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return K(e)}(this,r)}}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}var Q=function(e,t){return e};function Z(e){var t,r=e.getItemOffset,o=e.getEstimatedTotalSize,i=e.getItemSize,c=e.getOffsetForIndexAndAlignment,l=e.getStartIndexForOffset,f=e.getStopIndexForStartIndex,p=e.initInstanceProps,m=e.shouldResetStyleCacheOnItemSizeChange,y=e.validateProps;return t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(w,e);var t,v,b,g=H(w);function w(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),(t=g.call(this,e))._instanceProps=p(t.props,K(t)),t._outerRef=void 0,t._resetIsScrollingTimeoutId=null,t.state={instance:K(t),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof t.props.initialScrollOffset?t.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},t._callOnItemsRendered=Object(a.a)((function(e,r,n,o){return t.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:r,visibleStartIndex:n,visibleStopIndex:o})})),t._callOnScroll=Object(a.a)((function(e,r,n){return t.props.onScroll({scrollDirection:e,scrollOffset:r,scrollUpdateWasRequested:n})})),t._getItemStyle=function(e){var n,o=t.props,a=o.direction,c=o.itemSize,l=o.layout,u=t._getItemStyleCache(m&&c,m&&l,m&&a);if(u.hasOwnProperty(e))n=u[e];else{var s=r(t.props,e,t._instanceProps),f=i(t.props,e,t._instanceProps),d="horizontal"===a||"horizontal"===l,p="rtl"===a,h=d?s:0;u[e]=n={position:"absolute",left:p?void 0:h,right:p?h:void 0,top:d?0:s,height:d?"100%":f,width:d?f:"100%"}}return n},t._getItemStyleCache=Object(a.a)((function(e,t,r){return{}})),t._onScrollHorizontal=function(e){var r=e.currentTarget,n=r.clientWidth,o=r.scrollLeft,a=r.scrollWidth;t.setState((function(e){if(e.scrollOffset===o)return null;var r=t.props.direction,i=o;if("rtl"===r)switch(h()){case"negative":i=-o;break;case"positive-descending":i=a-n-o}return i=Math.max(0,Math.min(i,a-n)),{isScrolling:!0,scrollDirection:e.scrollOffset<i?"forward":"backward",scrollOffset:i,scrollUpdateWasRequested:!1}}),t._resetIsScrollingDebounced)},t._onScrollVertical=function(e){var r=e.currentTarget,n=r.clientHeight,o=r.scrollHeight,a=r.scrollTop;t.setState((function(e){if(e.scrollOffset===a)return null;var t=Math.max(0,Math.min(a,o-n));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),t._resetIsScrollingDebounced)},t._outerRefSetter=function(e){var r=t.props.outerRef;t._outerRef=e,"function"==typeof r?r(e):null!=r&&"object"===G(r)&&r.hasOwnProperty("current")&&(r.current=e)},t._resetIsScrollingDebounced=function(){null!==t._resetIsScrollingTimeoutId&&u(t._resetIsScrollingTimeoutId),t._resetIsScrollingTimeoutId=s(t._resetIsScrolling,150)},t._resetIsScrolling=function(){t._resetIsScrollingTimeoutId=null,t.setState({isScrolling:!1},(function(){t._getItemStyleCache(-1,null)}))},t}return t=w,v=[{key:"scrollTo",value:function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)}},{key:"scrollToItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",r=this.props,n=r.itemCount,o=r.layout,a=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1));var i=0;if(this._outerRef){var l=this._outerRef;i="vertical"===o?l.scrollWidth>l.clientWidth?d():0:l.scrollHeight>l.clientHeight?d():0}this.scrollTo(c(this.props,e,t,a,this._instanceProps,i))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.direction,r=e.initialScrollOffset,n=e.layout;if("number"==typeof r&&null!=this._outerRef){var o=this._outerRef;"horizontal"===t||"horizontal"===n?o.scrollLeft=r:o.scrollTop=r}this._callPropsCallbacks()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.direction,r=e.layout,n=this.state,o=n.scrollOffset;if(n.scrollUpdateWasRequested&&null!=this._outerRef){var a=this._outerRef;if("horizontal"===t||"horizontal"===r)if("rtl"===t)switch(h()){case"negative":a.scrollLeft=-o;break;case"positive-ascending":a.scrollLeft=o;break;default:var i=a.clientWidth,c=a.scrollWidth;a.scrollLeft=c-i-o}else a.scrollLeft=o;else a.scrollTop=o}this._callPropsCallbacks()}},{key:"componentWillUnmount",value:function(){null!==this._resetIsScrollingTimeoutId&&u(this._resetIsScrollingTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.className,a=e.direction,i=e.height,c=e.innerRef,l=e.innerElementType,u=e.innerTagName,s=e.itemCount,f=e.itemData,d=e.itemKey,p=void 0===d?Q:d,h=e.layout,m=e.outerElementType,y=e.outerTagName,v=e.style,b=e.useIsScrolling,g=e.width,w=this.state.isScrolling,_="horizontal"===a||"horizontal"===h,E=_?this._onScrollHorizontal:this._onScrollVertical,O=q(this._getRangeToRender(),2),A=O[0],S=O[1],k=[];if(s>0)for(var x=A;x<=S;x++)k.push(Object(n.createElement)(t,{data:f,key:p(x,f),index:x,isScrolling:b?w:void 0,style:this._getItemStyle(x)}));var j=o(this.props,this._instanceProps);return Object(n.createElement)(m||y||"div",{className:r,onScroll:E,ref:this._outerRefSetter,style:F({position:"relative",height:i,width:g,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:a},v)},Object(n.createElement)(l||u||"div",{children:k,ref:c,style:{height:_?"100%":j,pointerEvents:w?"none":void 0,width:_?j:"100%"}}))}},{key:"_callPropsCallbacks",value:function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=q(this._getRangeToRender(),4),t=e[0],r=e[1],n=e[2],o=e[3];this._callOnItemsRendered(t,r,n,o)}if("function"==typeof this.props.onScroll){var a=this.state,i=a.scrollDirection,c=a.scrollOffset,l=a.scrollUpdateWasRequested;this._callOnScroll(i,c,l)}}},{key:"_getRangeToRender",value:function(){var e=this.props,t=e.itemCount,r=e.overscanCount,n=this.state,o=n.isScrolling,a=n.scrollDirection,i=n.scrollOffset;if(0===t)return[0,0,0,0];var c=l(this.props,i,this._instanceProps),u=f(this.props,c,i,this._instanceProps),s=o&&"backward"!==a?1:Math.max(1,r),d=o&&"forward"!==a?1:Math.max(1,r);return[Math.max(0,c-s),Math.max(0,Math.min(t-1,u+d)),c,u]}}],b=[{key:"getDerivedStateFromProps",value:function(e,t){return X(e,t),y(e),null}}],v&&U(t.prototype,v),b&&U(t,b),Object.defineProperty(t,"prototype",{writable:!1}),w}(n.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var X=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance};var J=function(e,t,r){var n=e.itemSize,o=r.itemMetadataMap,a=r.lastMeasuredIndex;if(t>a){var i=0;if(a>=0){var c=o[a];i=c.offset+c.size}for(var l=a+1;l<=t;l++){var u=n(l);o[l]={offset:i,size:u},i+=u}r.lastMeasuredIndex=t}return o[t]},$=function(e,t,r,n,o){for(;n<=r;){var a=n+Math.floor((r-n)/2),i=J(e,a,t).offset;if(i===o)return a;i<o?n=a+1:i>o&&(r=a-1)}return n>0?n-1:0},ee=function(e,t,r,n){for(var o=e.itemCount,a=1;r<o&&J(e,r,t).offset<n;)r+=a,a*=2;return $(e,t,Math.min(r,o-1),Math.floor(r/2),n)},te=function(e,t){var r=e.itemCount,n=t.itemMetadataMap,o=t.estimatedItemSize,a=t.lastMeasuredIndex,i=0;if(a>=r&&(a=r-1),a>=0){var c=n[a];i=c.offset+c.size}return i+(r-a-1)*o};Z({getItemOffset:function(e,t,r){return J(e,t,r).offset},getItemSize:function(e,t,r){return r.itemMetadataMap[t].size},getEstimatedTotalSize:te,getOffsetForIndexAndAlignment:function(e,t,r,n,o,a){var i=e.direction,c=e.height,l=e.layout,u=e.width,s="horizontal"===i||"horizontal"===l?u:c,f=J(e,t,o),d=te(e,o),p=Math.max(0,Math.min(d-s,f.offset)),h=Math.max(0,f.offset-s+f.size+a);switch("smart"===r&&(r=n>=h-s&&n<=p+s?"auto":"center"),r){case"start":return p;case"end":return h;case"center":return Math.round(h+(p-h)/2);default:return n>=h&&n<=p?n:n<h?h:p}},getStartIndexForOffset:function(e,t,r){return function(e,t,r){var n=t.itemMetadataMap,o=t.lastMeasuredIndex;return(o>0?n[o].offset:0)>=r?$(e,t,o,0,r):ee(e,t,Math.max(0,o),r)}(e,r,t)},getStopIndexForStartIndex:function(e,t,r,n){for(var o=e.direction,a=e.height,i=e.itemCount,c=e.layout,l=e.width,u="horizontal"===o||"horizontal"===c?l:a,s=J(e,t,n),f=r+u,d=s.offset+s.size,p=t;p<i-1&&d<f;)p++,d+=J(e,p,n).size;return p},initInstanceProps:function(e,t){var r={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.lastMeasuredIndex=Math.min(r.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),n&&t.forceUpdate()},r},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}});j({getColumnOffset:function(e,t){return t*e.columnWidth},getColumnWidth:function(e,t){return e.columnWidth},getRowOffset:function(e,t){return t*e.rowHeight},getRowHeight:function(e,t){return e.rowHeight},getEstimatedTotalHeight:function(e){var t=e.rowCount;return e.rowHeight*t},getEstimatedTotalWidth:function(e){var t=e.columnCount;return e.columnWidth*t},getOffsetForColumnAndAlignment:function(e,t,r,n,o,a){var i=e.columnCount,c=e.columnWidth,l=e.width,u=Math.max(0,i*c-l),s=Math.min(u,t*c),f=Math.max(0,t*c-l+a+c);switch("smart"===r&&(r=n>=f-l&&n<=s+l?"auto":"center"),r){case"start":return s;case"end":return f;case"center":var d=Math.round(f+(s-f)/2);return d<Math.ceil(l/2)?0:d>u+Math.floor(l/2)?u:d;default:return n>=f&&n<=s?n:f>s||n<f?f:s}},getOffsetForRowAndAlignment:function(e,t,r,n,o,a){var i=e.rowHeight,c=e.height,l=e.rowCount,u=Math.max(0,l*i-c),s=Math.min(u,t*i),f=Math.max(0,t*i-c+a+i);switch("smart"===r&&(r=n>=f-c&&n<=s+c?"auto":"center"),r){case"start":return s;case"end":return f;case"center":var d=Math.round(f+(s-f)/2);return d<Math.ceil(c/2)?0:d>u+Math.floor(c/2)?u:d;default:return n>=f&&n<=s?n:f>s||n<f?f:s}},getColumnStartIndexForOffset:function(e,t){var r=e.columnWidth,n=e.columnCount;return Math.max(0,Math.min(n-1,Math.floor(t/r)))},getColumnStopIndexForStartIndex:function(e,t,r){var n=e.columnWidth,o=e.columnCount,a=e.width,i=t*n,c=Math.ceil((a+r-i)/n);return Math.max(0,Math.min(o-1,t+c-1))},getRowStartIndexForOffset:function(e,t){var r=e.rowHeight,n=e.rowCount;return Math.max(0,Math.min(n-1,Math.floor(t/r)))},getRowStopIndexForStartIndex:function(e,t,r){var n=e.rowHeight,o=e.rowCount,a=e.height,i=t*n,c=Math.ceil((a+r-i)/n);return Math.max(0,Math.min(o-1,t+c-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.columnWidth,e.rowHeight}});var re=Z({getItemOffset:function(e,t){var r=e.itemSize,n=e.paddingStart;return t*r+(void 0===n?0:n)},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount,r=e.itemSize,n=e.paddingStart;return r*t+(void 0===n?0:n)},getOffsetForIndexAndAlignment:function(e,t,r,n,o,a){var i=e.direction,c=e.height,l=e.itemCount,u=e.itemSize,s=e.layout,f=e.width,d=e.paddingStart,p=void 0===d?0:d,h="horizontal"===i||"horizontal"===s?f:c,m=Math.max(0,l*u-h)+p,y=Math.min(m,t*u)+p,v=Math.max(0,t*u-h+u+a)+p;switch("smart"===r&&(r=n>=v-h&&n<=y+h?"auto":"center"),r){case"start":return y;case"end":return v;case"center":var b=Math.round(v+(y-v)/2);return b<Math.ceil(h/2)?0:b>m+Math.floor(h/2)?m:b;default:return n>=v&&n<=y?n:n<v?v:y}},getStartIndexForOffset:function(e,t){var r=e.itemCount,n=e.itemSize,o=e.paddingStart,a=void 0===o?0:o;return Math.max(0,Math.min(r-1,Math.floor((t-a)/n)))},getStopIndexForStartIndex:function(e,t,r){var n=e.direction,o=e.height,a=e.itemCount,i=e.itemSize,c=e.layout,l=e.width,u=e.paddingStart,s=t*i+(void 0===u?0:u),f="horizontal"===n||"horizontal"===c?l:o,d=Math.ceil((f+r-s)/i);return Math.max(0,Math.min(a-1,t+d-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}}),ne=re;function oe(e,t){for(var r in e)if(!(r in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1}var ae=["style"],ie=["style"];function ce(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function le(e,t){var r=e.style,n=ce(e,ae),o=t.style,a=ce(t,ie);return!oe(r,o)&&!oe(n,a)}function ue(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return se(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fe=function(e,t){return e===t||e.length===t.length&&e.every((function(e,r){return e===t[r]}))},de=function(e,t){return fe(pe(e),pe(t))},pe=function(e){return e.slice(0,e.length-1)},he=function(e,t){return fe(e,pe(t))},me=function(e){return e[e.length-1]},ye=function(e,t){return e.slice(0,t)},ve=function(e,t){var r=ue(e);return be(r,t)||(r[r.length-1]+=1),r},be=function(e,t){return de(e,t)&&me(e)>me(t)};function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ee(e,t,r){var n;return n=function(e,t){if("object"!=ge(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ge(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oe(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){if(e){if("string"==typeof e)return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Se(e,t):void 0}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.items[e.rootId]?e.items[e.rootId].children.reduce((function(r,n,o){var a=e.items[n],i=[].concat(Oe(t),[o]),c=function(e,t){return{item:e,path:t}}(a,i),l=xe(e,a,i);return[].concat(Oe(r),[c],Oe(l))}),[]):[]};function xe(e,t,r){return t.isExpanded?ke({rootId:t.id,items:e.items},r):[]}var je=function(e,t,r){var n=e.items[t];return n?{rootId:e.rootId,items:_e(_e({},e.items),{},Ee({},t,_e(_e({},n),r)))}:e},Pe=function(e,t){var r,n=e.items[e.rootId],o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Ae(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;n=e.items[n.children[a]]}}catch(e){o.e(e)}finally{o.f()}return n},Ce=function(e,t){var r=function(e,t){var r=pe(t);return Pe(e,r)}(e,t),n=me(t);return{parentId:r.id,index:n}},Ie=function(e,t,r){var n=function(e,t){var r=e.items[t.parentId],n=Oe(r.children),o=n.splice(t.index,1)[0];return{tree:je(e,t.parentId,{children:n,hasChildren:n.length>0,isExpanded:n.length>0&&r.isExpanded}),itemRemoved:o}}(e,t);return function(e,t,r){var n=e.items[t.parentId],o=Oe(n.children);return void 0===t.index?(function(e){return!!e.hasChildren&&e.children.length>0}(n)||function(e){return!e.hasChildren}(n))&&o.push(r):o.splice(t.index,0,r),je(e,t.parentId,{children:o,hasChildren:!0})}(n.tree,r,n.itemRemoved)},Te=function(){},Le=function(e,t,r){return Math.min(t,Math.max(e,r))},De=function(e,t){return e[t].path},Ne=function(e,t,r,n){var o,a,i=r>t,c=De(e,t),l=r===t,u=i?e[r].path:e[r-1]&&e[r-1].path,s=i||l?e[r+1]&&e[r+1].path:e[r].path;if(l){var f=c.length-1,d=f+n+1<=0?1:f+n+1;if(!u)return c;var p=s?s.length:1,h=Math.max(c.length,u.length),m=Le(p,h,d);if(m===c.length)return c;var y=ye(u,m);return ve(y,c)}if(s&&(o=s,!(a=u)||he(a,o)))return s;if(u&&s&&de(u,s))return i&&de(u,c)?u:s;if(u){var v=i?u.length+n:s.length+n,b=s?s.length:1,g=Le(b,u.length,v),w=ye(u,g);return ve(w,c)}return c};function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e,t,r){var n;return n=function(e,t){if("object"!=Re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Re(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Be=function(e,t,r){var n=r.source,o=r.destination,a=r.combine,i=r.placeholderIndicatorProps,c=De(t,n.index),l=Ce(e,c);if(a)return{sourcePosition:l,destinationPosition:{parentId:a.draggableId}};if(!o)return{sourcePosition:l,destinationPosition:void 0};var u=Ne(t,n.index,o.index,i?i.dragOffset:0),s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){Fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Ce(e,u));return{sourcePosition:l,destinationPosition:s}};function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(r),!0).forEach((function(t){Ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ue(e,t,r){return(t=Ve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ve(n.key),n)}}function Ve(e){var t=function(e,t){if("object"!=qe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qe(t)?t:String(t)}function He(e,t){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},He(e,t)}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ye(e);if(t){var o=Ye(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ye(e){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ye(e)}var Qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(a,e);var t,r,n,o=Ke(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o.call.apply(o,[this].concat(r))).patchDraggableProps=function(t,r){var n=t.style&&t.style.transition?[t.style.transition]:[];r.dropAnimation;var o=n.join(", ");return Ge(Ge({},t),{},{style:Ge(Ge(Ge({},t.style),e.props.style),{},{transition:o})})},e}return t=a,(r=[{key:"shouldComponentUpdate",value:function(e){return t=this.props,r=e,!(void 0===["item","provided","snapshot","onCollapse","onExpand","destination","placeholderIndicatorProps","placeholderDraggableId"].find((function(e){return t[e]!==r[e]}))&&fe(this.props.path,e.path)&&null!==this.props.provided.dragHandleProps);var t,r}},{key:"render",value:function(){var e=this.props,t=e.item,r=e.path,n=e.onExpand,o=e.onCollapse,a=e.renderItem,i=e.provided,c=e.snapshot,l=e.placeholderDraggableId,u=e.placeholderIndicatorProps,s=e.offsetPerLevel,f={draggableProps:this.patchDraggableProps(i.draggableProps,c),dragHandleProps:i.dragHandleProps,innerRef:function(e){i.innerRef(e)}};return a({item:t,path:r,depth:r.length-1,onExpand:function(e){return n(e,r)},onCollapse:function(e){return o(e,r)},offsetPerLevel:s,provided:f,snapshot:c,placeholderDraggableId:l,placeholderIndicatorProps:u})}}])&&We(t.prototype,r),n&&We(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Component);function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function Xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Je(n.key),n)}}function Je(e){var t=function(e,t){if("object"!=Ze(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ze(t)?t:String(t)}var $e=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.delay=void 0,this.timeoutId=void 0,this.fn=void 0,this.delay=t}var t,r,n;return t=e,(r=[{key:"start",value:function(e){this.stop(),this.timeoutId=window.setTimeout(e,this.delay)}},{key:"stop",value:function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}}])&&Xe(t.prototype,r),n&&Xe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function et(e){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(e)}var tt=["style","children"];function rt(){rt=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,o){var a=new RegExp(e,n);return t.set(a,o||t.get(e)),at(a,r.prototype)}function n(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var o=n[r];if("number"==typeof o)t[r]=e[o];else{for(var a=0;void 0===e[o[a]]&&a+1<o.length;)a++;t[r]=e[o[a]]}return t}),Object.create(null))}return ot(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=n(r,this);var o=r.indices;o&&(o.groups=n(o,this))}return r},r.prototype[Symbol.replace]=function(r,o){if("string"==typeof o){var a=t.get(this);return e[Symbol.replace].call(this,r,o.replace(/\$<([^>]+)>/g,(function(e,t){var r=a[t];return"$"+(Array.isArray(r)?r.join("$"):r)})))}if("function"==typeof o){var i=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=et(e[e.length-1])&&(e=[].slice.call(e)).push(n(e,i)),o.apply(this,e)}))}return e[Symbol.replace].call(this,r,o)},rt.apply(this,arguments)}function nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ft(n.key),n)}}function ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}function at(e,t){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},at(e,t)}function it(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ct(e);if(t){var o=ct(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ct(e){return ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ct(e)}function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){st(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function st(e,t,r){return(t=ft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ft(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==et(t)?t:String(t)}function dt(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var pt=o.a.createContext({collapseHeight:0}),ht=Object(n.forwardRef)((function(e,t){var r=e.style,a=e.children,i=dt(e,tt),c=Object(n.useContext)(pt).collapseHeight;return o.a.createElement("div",ut({ref:t,style:ut(ut({},r),{},{height:"".concat(parseFloat(r.height)+c,"px")})},i),a)})),mt=o.a.memo((function(e){var t=e.data,r=e.index,n=e.style,a=t.isDragEnabled,c=t.listData[r];if(!c)return null;var l=function(e){var r=e.item,a=e.path,i=e.provided,c=e.snapshot,l=t.renderItem,u=t.onExpand,s=t.onCollapse,f=t.offsetPerLevel,d=t.placeholderDraggableId,p=t.placeholderIndicatorProps;return o.a.createElement(Qe,{key:r.item.id,item:r.item,path:a,onExpand:u,onCollapse:s,renderItem:l,provided:i,snapshot:c,offsetPerLevel:f,style:n,placeholderDraggableId:d,placeholderIndicatorProps:p})};if(!1===a)return l({item:c,path:c.path,provided:{draggableProps:{"data-rbd-draggable-context-id":"","data-rbd-draggable-id":""},innerRef:function(){},dragHandleProps:null},snapshot:{isDragging:!1,isDropAnimating:!1}});var u,s="function"==typeof a?!a(c.item):!a;return o.a.createElement(i.b,{key:c.item.id,draggableId:c.item.id.toString(),index:r,isDragDisabled:s},(u=c,function(e,r){var n=c.path;return r.isDropAnimating&&t.onDropAnimating(),l({item:u,path:n,provided:e,snapshot:r})}))}),le);mt.displayName="Row",mt.type.displayName="RowMemo";var yt=Object(a.a)((function(e,t){return function(e,t,r){return t.reduce((function(t,n){var o=e.items[n];return o?(t.items[n]=_e(_e({},o),r),t):t}),{rootId:e.rootId,items:_e({},e.items)})}(e,t,{isExpanded:!0})})),vt=Object(a.a)((function(e,t){return t&&e.items[t].isExpanded?je(e,t,{isExpanded:!1}):e})),bt=Object(a.a)(ke),gt=function(e){ot(c,e);var t,r,n,a=it(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).state={flattenedTree:[],draggedItemId:void 0,placeholderIndicatorProps:void 0,placeholderDraggableId:void 0,collapseHeight:0},e.dragState=void 0,e.virtualListRef=o.a.createRef(),e.expandTimer=new $e(500),e.onDragStart=function(t){var r=e.props.onDragStart;e.dragState={source:t.source,destination:t.source,mode:t.mode,cloneMove:{x:0,y:0}};var n=e.state.flattenedTree[e.dragState.destination.index-1];e.setState({draggedItemId:t.draggableId}),e.dragState=ut(ut({},e.dragState),{},{placeholderDraggableId:n?n.item.id:void 0}),r&&r(t.draggableId)},e.onDragUpdate=function(t){if(e.dragState&&(0!==e.dragState.cloneMove.x||0!==e.dragState.cloneMove.y)){var r=e.state.flattenedTree;if(t.destination){var n=r[t.destination.index>t.source.index?t.destination.index:t.destination.index-1];e.dragState=ut(ut({},e.dragState),{},{placeholderDraggableId:n?n.item.id:void 0})}if(e.expandTimer.stop(),t.combine){var o=function(e,t){return e.find((function(e){return e.item.id===t}))}(r,t.combine.draggableId);o&&e.isExpandable(o)}e.dragState=ut(ut({},e.dragState),{},{destination:t.destination,combine:t.combine})}},e.onDropAnimating=function(){e.expandTimer.stop()},e.onDragEnd=function(t){var r=e.props,n=r.onDragEnd,o=r.tree,a=e.state.flattenedTree;e.expandTimer.stop();var i=ut(ut({},e.dragState),{},{source:t.source,destination:t.destination,combine:t.combine});e.setState({draggedItemId:void 0,collapseHeight:0,placeholderIndicatorProps:void 0});var c=Be(o,a,i);n(c.sourcePosition,c.destinationPosition),e.dragState=void 0},e.getDroppedLevelOffset=function(t){var r=e.props.offsetPerLevel,n=Math.abs(t);if(!e.dragState||0===t)return 0;var o=Math.floor((n+r/2)/r);return t>0?o:t<0?-o:void 0},e.isExpandable=function(e){return!!e.item.hasChildren&&!e.item.isExpanded},e.patchDroppableProvided=function(e){return ut(ut({},e),{},{innerRef:function(t){e.innerRef(t)}})},e.renderItem=function(t,r,n){var a=e.props.isDragEnabled;if(!1===a)return e.renderTreeItem({flatItem:t,path:t.path,provided:{draggableProps:{"data-rbd-draggable-context-id":"","data-rbd-draggable-id":""},innerRef:function(){},dragHandleProps:null},snapshot:{isDragging:!1,isDropAnimating:!1},style:n});var c="function"==typeof a?!a(t.item):!a;return o.a.createElement(i.b,{key:t.item.id,draggableId:t.item.id.toString(),index:r,isDragDisabled:c},e.renderDraggableItem(t,n))},e.renderDraggableItem=function(t,r){return function(n,o){var a=t.path;return o.isDropAnimating&&e.onDropAnimating(),e.renderTreeItem({flatItem:t,path:a,provided:n,snapshot:o,style:r})}},e.renderTreeItem=function(t){var r=t.flatItem,n=t.path,a=t.provided,i=t.snapshot,c=t.style,l=e.props,u=l.renderItem,s=l.onExpand,f=l.onCollapse,d=l.offsetPerLevel;return o.a.createElement(Qe,{key:r.item.id,item:r.item,path:n,onExpand:s,onCollapse:f,renderItem:u,provided:a,snapshot:i,offsetPerLevel:d,style:c})},e.sensor=null,e.scrollableElement=null,e.scrollToItem=function(t,r){var n=e.state.flattenedTree.findIndex((function(e){return e.item.id===t}));if("center"===r){var o=n<3?0:n-3;e.virtualListRef.current.scrollToItem(o,"start")}else e.virtualListRef.current.scrollToItem(n,r)},e.handleItemsRendered=function(t){e.props.onItemsRendered&&e.props.onItemsRendered(t,e.state.flattenedTree)},e}return t=c,n=[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.draggedItemId,n=e.tree,o=yt(n,e.expandedKeys),a=vt(o,r),i=bt(a),c=r&&i.length-t.flattenedTree.length<0?t.flattenedTree.length-i.length:0;return ut(ut({},t),{},{flattenedTree:i,collapseHeight:c*e.itemSize})}}],(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.isDragEnabled,n=t.renderItem,a=t.onExpand,c=t.onCollapse,l=t.offsetPerLevel,u=t.isNestingEnabled,s=t.outerElementType,f=t.onScroll,d=t.virtualListStyle,p=t.virtualHeight,h=t.virtualWidth,m=t.itemSize,y=t.paddingStart,v=void 0===y?0:y,b=this.state,g=b.flattenedTree,w=b.placeholderIndicatorProps,_=b.placeholderDraggableId;return o.a.createElement(i.a,{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDragUpdate:this.onDragUpdate,enableDefaultSensors:!1,sensors:[i.d,i.e,function(t){e.sensor=t}]},o.a.createElement(i.c,{droppableId:"tree",isCombineEnabled:u,ignoreContainerClipping:!0,mode:"virtual",renderClone:function(t,r,n){if(r.isDragging&&!r.isDropAnimating){var o=t.draggableProps.style.transform?t.draggableProps.style.transform.match(rt(/\(((.+)px, (.+)px)\)/,{cloneMoveX:2,cloneMoveY:3})).groups:{cloneMoveX:0,cloneMoveY:0},a=o.cloneMoveX,i=o.cloneMoveY;a=Number(a);var c=e.state.flattenedTree.find((function(e){return e.item.id===n.draggableId})).path.length-1,l=e.getDroppedLevelOffset(a);i=Number(i),e.dragState&&(e.dragState=ut(ut({},e.dragState),{},{cloneMove:{x:a,y:i},placeholderIndicatorProps:{dragOffset:l,currentDepth:c}}))}return e.props.renderClone(t,r,n,g,e.dragState)}},(function(t){return o.a.createElement(pt.Provider,{value:{collapseHeight:e.state.collapseHeight}},o.a.createElement(ne,{ref:e.virtualListRef,className:"lark-virtual-tree",style:d,width:h,height:p,itemCount:g.length,itemSize:m,paddingStart:v,outerRef:function(r){t.innerRef(r),e.scrollableElement=r},itemData:{listData:g,onDropAnimating:e.onDropAnimating,isDragEnabled:r,renderItem:n,onExpand:a,onCollapse:c,offsetPerLevel:l,placeholderIndicatorProps:w,placeholderDraggableId:_},innerElementType:ht,outerElementType:s,onScroll:f,onItemsRendered:e.handleItemsRendered},mt))})))}}])&&nt(t.prototype,r),n&&nt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Component);gt.defaultProps={tree:{children:[]},onExpand:Te,onCollapse:Te,onDragStart:Te,onDragEnd:Te,renderItem:Te,offsetPerLevel:20,isDragEnabled:!1,isNestingEnabled:!1,expandedKeys:[]};var wt=gt},5443:function(e,t,r){"use strict";t.a={headerOverlayContainer:"ViewerHeader-module_headerOverlayContainer_30mty",offlineLargeSpaceButton:"ViewerHeader-module_offlineLargeSpaceButton_lkMLA",offlineButton:"ViewerHeader-module_offlineButton_4QlQl",offlineIcon:"ViewerHeader-module_offlineIcon_8oISy",logoWrapper:"ViewerHeader-module_logoWrapper_nnDzf",navigation:"ViewerHeader-module_navigation_opJY6",logoWrapperActive:"ViewerHeader-module_logoWrapperActive_Ptc2p",logo:"ViewerHeader-module_logo_-rHiY",wrapper:"ViewerHeader-module_wrapper_vhIJ4",mark:"ViewerHeader-module_mark_c28hV",collaborate:"ViewerHeader-module_collaborate_VW8td",iconWrapper:"ViewerHeader-module_iconWrapper_Wis4F",playButton:"ViewerHeader-module_playButton_3Qm5h",skylink:"ViewerHeader-module_skylink_toi1A",popoverMore:"ViewerHeader-module_popoverMore_JrUsz",editorBtn:"ViewerHeader-module_editorBtn_Sb8OT",versionSelector:"ViewerHeader-module_versionSelector_Gx9Eb",versionName:"ViewerHeader-module_versionName_4oYUk",logoOnboardingWrapper:"ViewerHeader-module_logoOnboardingWrapper_VyXtw",entryYuqueButton:"ViewerHeader-module_entryYuqueButton_EMwrx",search:"ViewerHeader-module_search_fw9Jl",collabEntry:"ViewerHeader-module_collabEntry_XfPGf",yuqueLogo:"ViewerHeader-module_yuqueLogo_xT26j",larkDotZoom:"ViewerHeader-module_larkDotZoom_NeG+z"}},5471:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"d",(function(){return Y})),r.d(t,"c",(function(){return f.e})),r.d(t,"b",(function(){return f.b}));var n=r(0),o=r.n(n),a=r(74),i=r.n(a),c=r(5356),l=r(5432),u=r(5474),s=r(5644),f=r(5261);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var b=Object(n.forwardRef)((function(e,t){var r=e.tree,a=e.expandedKeys,d=e.isDragEnabled,p=e.onDragStart,m=e.onDragEnd,v=e.renderItem,b=e.bottomNode,g=e.itemSize,w=e.getIndicatorWrapperLeft,_=e.offsetPerLevel,E=e.onItemsRendered,O=Object(n.useContext)(u.a),A=Object(n.useRef)(null),S=Object(n.useRef)(0),k=y(Object(n.useState)(null),2),x=k[0],j=k[1];function P(e){var t=e.virtualWidth,n=e.virtualHeight,c=e.virtualContainerStyle,u=e.isScrollingRef;return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,{ref:function(e){if(A.current=e,O){var t,r,n=O.virtualComponentRef,o=O.virtualContainerRef;n.current=null===(t=A.current)||void 0===t?void 0:t.virtualListRef.current,o.current=null===(r=A.current)||void 0===r?void 0:r.scrollableElement}},tree:r,virtualListStyle:c,virtualWidth:t,virtualHeight:n,isNestingEnabled:!0,isDragEnabled:d,expandedKeys:a,itemSize:g,offsetPerLevel:_,renderItem:function(e){var t=h(h({},e),{},{isClone:!1,isScrolling:(null==u?void 0:u.current)||void 0});return v(t)},renderClone:function(e,r,n,a,c){var u=a.find((function(e){return e.item.id===n.draggableId})),d=u.item,p=u.path.length-1,m=null;if(r.isDragging&&!r.isDropAnimating&&!r.combineWith&&r.draggingOver&&c&&c.destination){var y,b=c.placeholderDraggableId,g=c.destination,E=c.source,O=a[g.index],A=document.querySelector('[data-rbd-drag-handle-draggable-id="'.concat(b,'"]'));if(!O)return null;var k=O.path.length-1,x=a[g.index-1],j=x?x.path.length-1:0,P=a[g.index+1],C=P?P.path.length-1:0,I=Object(l.b)(a,E.index,g.index,(null==c||null===(y=c.placeholderIndicatorProps)||void 0===y?void 0:y.dragOffset)||0),T=Object(l.b)(a,E.index,g.index,-Math.max(k,C,j)).length-1,L=I.length-O.path.length,D=w?w(k+L):0,N=t-D;S.current=(I.length-u.path.length)*_;var R=k+L-T;m=o.a.createElement(s.a,{style:{left:D,width:N},prefixOffsetDepth:R,offsetPerLevel:_}),m=A?i.a.createPortal(m,A):null}var M=e.draggableProps.style;if(r.isDropAnimating&&r.dropAnimation){var F=r.dropAnimation.moveTo,B="translate(".concat(S.current||F.x,"px, ").concat(F.y,"px)");S.current=0,M=h(h({},M),{},{transform:"".concat(B)})}e.draggableProps.style=M;var q={provided:e,snapshot:r,isClone:!0,item:d,depth:p,path:[],offsetPerLevel:_,onCollapse:f.e,onExpand:f.e};return o.a.createElement(o.a.Fragment,null,v(q),m)},onDragEnd:m,onDragStart:p,onScroll:null==O?void 0:O.onScroll,onItemsRendered:E}),x)}return Object(n.useImperativeHandle)(t,(function(){return{scrollToItem:function(e,t){var r;null===(r=A.current)||void 0===r||r.scrollToItem(e,t)},getItemIdxInFlattenTree:function(e){var t;return null===(t=A.current)||void 0===t?void 0:t.state.flattenedTree.findIndex((function(t){return t.item.id===e}))}}}),[]),Object(n.useEffect)((function(){d&&setTimeout((function(){var e,t=null!==(e=A.current)&&void 0!==e&&e.scrollableElement?i.a.createPortal(b,A.current.scrollableElement):null;j(t)}))}),[]),O?P({virtualWidth:O.virtualWidth,virtualHeight:O.virtualHeight,virtualContainerStyle:O.virtualContainerStyle,isScrollingRef:O.isScrollingRef}):o.a.createElement(c.a,null,(function(e){var t=e.height;return P({virtualWidth:e.width,virtualHeight:t})}))})),g=r(1064),w=r.n(g),_=r(258),E=r.n(_),O=r(725),A=r.n(O),S=r(52),k=r(865),x=r(85),j=r(2762);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function C(){C=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(L([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==P(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(P(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function I(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){I(a,n,o,i,c,"next",e)}function c(e){I(a,n,o,i,c,"throw",e)}i(void 0)}))}}var L=function(){var e=T(C().mark((function e(t,r,n){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.updateNode(t,{node_uuid:r,action:x.ACTIONS.moveAfter,target_uuid:n},{catalog_tree:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),D=function(){var e=T(C().mark((function e(t,r,n){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.updateNode(t,{node_uuid:r,action:x.ACTIONS.prependChild,target_uuid:n},{catalog_tree:!1}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function R(){R=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(I([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==N(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(N(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function M(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function F(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){M(a,n,o,i,c,"next",e)}function c(e){M(a,n,o,i,c,"throw",e)}i(void 0)}))}}function B(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return V(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function H(e){return"persisted_expanded_keys:".concat(e)}function K(e,t){var r;try{var n=e.getItem(H(t));n&&(r=JSON.parse(n))}catch(e){console.log(e)}return r}function Y(e){var t=e.book,r=e.currentDocSlug,o=e.enablePersistExpandedKeys,a=e.persistMode,i=void 0===a?"sessionStorage":a,c=e.onCurrentItemVisibleChange,u=void 0===c?A.a:c,s="sessionStorage"===i?sessionStorage:localStorage,d=U(Object(n.useState)(Object(f.f)([])),2),p=d[0],h=d[1],m=Object(n.useRef)(null),y=Object(n.useRef)(),v=Object(n.useMemo)((function(){var e=t.toc.find((function(e){return e.url===r}));return null==e?void 0:e.uuid}),[t.toc,r]),b=U(Object(n.useState)(o&&K(s,t.id)?K(s,t.id):Object(f.c)(t.toc,t.catalog_display_level,v?[v]:[])),2),g=b[0],_=b[1],O=Object(k.a)(v),x=Object(k.a)(t.catalog_display_level),j=Object(n.useCallback)((function(e){return p.items[e]}),[p]),P=Object(n.useCallback)((function(e,t){var r=p.items[e];h(Object(l.d)(p,e,{data:z(z({},r.data),t)}))}),[p]),C=Object(n.useCallback)((function(e){var t=p.items[e],r=p.items[p.items[e].parentId],n=Object(l.d)(p,t.parentId,z(z({},r),{},{children:r.children.filter((function(t){return t!==e}))}));delete n[e],h(n)}),[p]),I=Object(n.useCallback)((function(e,t){if(!(e.parentId===t.parentId&&e.index===t.index)){t.index=void 0===t.index?0:t.index;var r=Object(l.c)(p,e,t);h(r),_(B(new Set([].concat(B(g),[t.parentId],B(Object(f.a)(p,t.parentId))))))}}),[p,g]),T=Object(n.useCallback)((function(e){_(B(new Set([].concat(B(g),[e]))))}),[g]),N=Object(n.useCallback)((function(e){p.items[e].hasChildren&&_(B(new Set([].concat(B(g),[e]))))}),[p,g]),M=Object(n.useCallback)((function(e){p.items[e].hasChildren&&_(B(new Set(g.filter((function(t){return t!==e})))))}),[p,g]),q=Object(n.useCallback)((function(e){g.includes(e)?M(e):N(e)}),[g,M,N]),G=Object(n.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";_(B(new Set([].concat(B(g),B(Object(f.a)(p,e))))));var r=setTimeout((function(){var n;null===(n=m.current)||void 0===n||n.scrollToItem(e,t),clearTimeout(r)}))}),[p,g]),W=Object(n.useCallback)((function(){var e=t.toc.find((function(e){return e.url===r}));e&&G(e.uuid,"center")}),[r,t.toc]),V=Object(n.useCallback)((function(){var e=t.toc.find((function(e){return e.url===r}));if(e){var n,o=null===(n=m.current)||void 0===n?void 0:n.getItemIdxInFlattenTree(e.uuid);return E()(o)?0:o}return 0}),[r,t.toc]),Y=Object(n.useCallback)(w()((function(){var e=V(),t=y.current||{},r=t.visibleStartIndex,n=t.visibleStopIndex,o=!1;!E()(r)&&!E()(n)&&e>=r&&e<=n&&(o=!0),u(o)}),100),[V]),Q=Object(n.useCallback)((function(e){y.current=e,Y()}),[Y]);Object(n.useEffect)((function(){Y()}),[g,Y]);var Z=Object(n.useCallback)((function(){if(t.toc.length>0){var e=t.toc[0];G(e.uuid,"start")}}),[t.toc]),X=Object(n.useCallback)((function(){_([])}),[]),J=Object(n.useCallback)((function(){var e=Object(f.c)(t.toc,"all",v?[v]:[]);_(e)}),[t.toc,v]),$=Object(n.useCallback)(function(){var e=F(R().mark((function e(r,n){var o,a,i,c,l,u,s,f,d;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&(!n||n.parentId!==r.parentId||n.index!==r.index)){e.next=2;break}return e.abrupt("return");case 2:if(I(r,n),o=j(r.parentId).children[r.index],a=j(o),i=j(n.parentId),c=i.children.filter((function(e){return e!==a.data.uuid})),l=c[n.index-1],u=j(l),e.prev=9,s=[],!u){e.next=18;break}return e.next=14,L(t,a.data.uuid,u.data.uuid);case 14:f=e.sent,s=f.toc,e.next=23;break;case 18:if(!i){e.next=23;break}return e.next=21,D(t,a.data.uuid,i.data.uuid);case 21:d=e.sent,s=d.toc;case 23:return e.abrupt("return",s);case 26:throw e.prev=26,e.t0=e.catch(9),n.index=n.index||0,I(n,r),e.t0;case 31:case"end":return e.stop()}}),e,null,[[9,26]])})));return function(t,r){return e.apply(this,arguments)}}(),[j,I]),ee=function(){var e=F(R().mark((function e(t,r,n,o){var a,i,c;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.service.translate.text({srcTextList:t,srcLanguage:r,tgtLanguage:n},{useOriginResp:!0});case 2:return a=e.sent,i=a.data,o.forEach((function(e,t){t<i.length&&(e.original_title=e.title,e.title=i[t])})),c=Object(f.f)(o),h(c),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,r,n,o){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=Object(f.f)(t.toc);h(e)}),[t.toc]),Object(n.useEffect)((function(){if(O&&v&&O!==v){var e=Object(f.d)(t.toc,g,v?[v]:[]),r=B(new Set([].concat(B(g),B(e))));_(r)}}),[g,t.toc,O,v]),Object(n.useEffect)((function(){if(x&&x!==t.catalog_display_level){var e=Object(f.c)(t.toc,t.catalog_display_level,[]);_(e)}}),[t.catalog_display_level,t.toc,v,g]),Object(n.useEffect)((function(){o&&s.setItem(H(t.id),JSON.stringify(g))}),[s,g,o,t.id]),Object(n.useEffect)((function(){var e=function(){o&&s.removeItem(H(t.id))};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[s,o,t.id]),{tree:p,currentDocSlug:r,treeRef:m,expandedKeys:g,handleExpand:N,handleToggleCollapse:q,getTreeItem:j,updateTreeItem:P,deleteTreeItem:C,moveTreeItem:I,scrollToItem:G,scrollToCurrentItem:W,scrollToTop:Z,addExpandedKey:T,foldAll:X,unFoldAll:J,handleInternalDragEnd:$,onItemsRendered:Q,translateToc:ee}}},5474:function(e,t,r){"use strict";r.d(t,"b",(function(){return h})),r.d(t,"a",(function(){return u}));var n=r(0),o=r.n(n),a=r(1064),i=r.n(a),c=r(416),l=r.n(c),u=Object(n.createContext)(null);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e,t,r){return r?"x"===t?window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0:"x"===t?e.scrollLeft||0:e.scrollTop||0},p=function(e,t){return t?window:e.current};function h(e){var t=e.useFullScreenMode,r=void 0===t||t,a=e.useScrolling,c=void 0!==a&&a,f=e.gridLayout,h=void 0!==f&&f,m=e.style,y=e.virtualWidth,v=e.virtualHeight,b=e.virtualContainerStyle,g=e.children,w=Object(n.useRef)(),_=Object(n.useRef)(),E=Object(n.useRef)(),O=Object(n.useRef)(!1),A=s(Object(n.useReducer)((function(e){return e+1}),0),2)[1],S=Object(n.useCallback)((function(){var e=E.current,t=p(w,r),n=_.current;if(e&&t&&n){var o=e.getBoundingClientRect(),a=o.top,i=void 0===a?0:a,c=o.left,l=void 0===c?0:c,u=i>=0?0:-i,s=d(t,"x",r)-l;h?n.scrollTo({scrollLeft:s,scrollTop:u}):n.scrollTo(u)}}),[h,r]);Object(n.useEffect)((function(){var e=l()((function(){O.current=!1,A()}),150),t=i()((function(){c&&(O.current=!0,e()),S()}),10),n=p(w,r);return null==n||n.addEventListener("scroll",t),function(){null==n||n.removeEventListener("scroll",t),t.cancel(),e.cancel()}}),[A,h,r,c,S]);var k=function(e){if(e.scrollUpdateWasRequested){var t=E.current;if(t){var n=p(w,r);if(h){var o=e.scrollLeft,a=e.scrollTop;if(o>0||a>0){var i=d(n,"x",r),c=d(n,"y",r),l=t.getBoundingClientRect(),u=l.top,s=void 0===u?0:u,f=l.left,m={top:s,left:void 0===f?0:f},y=m.top>0?m.top+a:c,v=m.left>0?m.left+i:i;y===c&&v===i||n.scrollTo(v,y)}}else{var b=e.scrollOffset;if(b>0){var g=d(n,"y",r),_=t.getBoundingClientRect(),O=_.top,A=void 0===O?0:O,k=_.left,x={top:A,left:void 0===k?0:k},j=x.top>0?x.top+b:g;g!==j&&n.scrollTo(0,j)}}}}else S()};return o.a.createElement(u.Provider,{value:{virtualComponentRef:_,virtualContainerRef:E,onScroll:k,virtualWidth:y,virtualHeight:v,virtualContainerStyle:b,isScrollingRef:O}},r?g({virtualComponentRef:_,virtualContainerRef:E,onScroll:k,virtualWidth:y,virtualHeight:v,virtualContainerStyle:b,isScrollingRef:O}):o.a.createElement("div",{ref:w,style:m},g({virtualComponentRef:_,virtualContainerRef:E,onScroll:k,virtualWidth:y,virtualHeight:v,virtualContainerStyle:b,isScrollingRef:O})))}},5482:function(e,t,r){"use strict";r(711);var n=r(356),o=(r(37),r(8)),a=r(0),i=r.n(a),c=r(5),l=r.n(c),u=r(5194),s=r(454),f="index-module_container_cvFEw",d="index-module_imgDarkMask_oUhvV",p="index-module_descImg_yuOS4",h="index-module_title_xRvvb",m="index-module_firstLine_1EISJ",y="index-module_description_DuIJN",v="index-module_footer_W9yDd",b="index-module_detailBtn_GSAtM",g="index-module_shareBtn_vdQ5k";function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(null,arguments)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(e){var t,r=e.noButton,c=e.overlayClassName,E=e.type,O=e.onChangeShareStatus,A=e.restProps,S=e.getPopupContainer,k=_(Object(a.useState)(!1),2),x=k[0],j=k[1],P=Object(s.a)().isDarkMode,C=function(e,t){"function"==typeof O&&t&&O(),j(e)};return t=r?i.a.createElement("span",{onClick:function(){return j(!0)},style:{display:"block"}},__("分享到花园")):i.a.createElement(u.a,w({iconName:"digitalgarden",tooltip:__("分享到花园")},A)),i.a.createElement(i.a.Fragment,null,i.a.createElement(n.a,{content:i.a.createElement("div",{className:f},P&&i.a.createElement("div",{className:d}),i.a.createElement("img",{className:p,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*ljInRZpwD6UAAAAAAAAAAAAAARQnAQ",alt:""}),i.a.createElement("p",{className:h},__("分享到花园")),i.a.createElement("p",{className:l()(y,m)},__("推送内容会出现在粉丝的「逛逛-关注」里")),i.a.createElement("p",{className:y},__("并同步到你的")," ",i.a.createElement("a",{href:"/".concat(window.appData.me.login),"data-desktoptarget":"_browser",target:"_blank"},__("我的花园"))," ",__("的「更新」模块")),i.a.createElement("div",{className:v},i.a.createElement(o.a,{className:b,onClick:function(){window.open(window.appData.isYuque?"https://www.yuque.com/yuque/mgcsc6/xtgy5c":"https://yuque.antfin.com/lark/xwhu77/lhqpnw")}},__("查看介绍")),i.a.createElement(o.a,{className:g,type:"primary",onClick:function(){C(!1,!0)}},__("确认")))),trigger:"click",noArrow:!0,visible:x,placement:"bottomRight",overlayClassName:l()(c),onVisibleChange:C,getPopupContainer:function(e){return S?S(e):"note"===E?e.closest(".note-list-item").querySelector(".note-item"):e.parentNode}},t))}},561:function(e,t,r){"use strict";r(3047);var n=r(1318);r(1022);t.a=n.a},5621:function(e,t,r){"use strict";var n={blog:{book_id:359,headline:{title:"数字花园的前世今生",description:"998年，是万维网诞生的第十个年头，各种奇奇怪怪的网站都如雨后春笋般出现。有个人在研究了一番互联网之后，指着那些网页和超链接说，这不就是花园吗？于是，他建立了一个网站：超文本花园，阐述互联网和花园的相似之处。24年后，我们仍然可以访问它。而这，就是花园第一次和互联网联系在一起，这也就是今天我们所要讲的「数字花园」。",cover:"https://gw.alipayobjects.com/mdn/rms_ee84bf/afts/img/A*4E27Q4kJl50AAAAAAAAAAAAAARQnAQ",url:"https://www.yuque.com/yuque/blog/blgsdc"}},help:{search:{keywords:[{name:"什么是上传流量",url:"https://www.yuque.com/go/doc/24014038"},{name:"能开发票吗",url:"https://www.yuque.com/go/doc/32764224"},{name:"bug反馈和需求提交",url:"https://www.yuque.com/feedbacks/new"},{name:"联系语雀",url:"https://www.yuque.com/go/doc/24013999"}]},categories:[{name:"常见疑问",url:"https://www.yuque.com/yuque/qa",docs:[{title:"语雀是什么",url:"https://www.yuque.com/yuque/ng1qth/about",description:"在这里可以了解的语雀的缘起、产品定位、使用场景、基本概念等内容"},{title:"收不到验证码",url:"https://www.yuque.com/yuque/qa/sms-issue#dK8Lf",description:"若收不到验证码，可以按照以下部分进行排查"},{title:"如何联系语雀",url:"https://www.yuque.com/yuque/qa/ca1gxp",description:"语雀会第一时间倾听你的需求和建议"},{title:"玩转语雀文档",url:"https://www.yuque.com/yuque/ng1qth/iaxgag",description:"介绍语雀文档的基本能力和使用方式"},{title:"语雀中的权限设计",url:"https://www.yuque.com/yuque/ng1qth/gxy3gk",description:"对于语雀知识库，团队能力的等权限介绍"},{title:"如何从其他工具迁入语雀",url:"https://www.yuque.com/yuque/eaghk3",description:"了解如何导入印象笔记、Word、Excel 等内容到语雀"},{title:"稻谷权益规则",url:"https://www.yuque.com/yuque/qa/gqcepg",description:"语雀稻谷的获取方式和兑换权益介绍"},{title:"如何计算上传流量",url:"https://www.yuque.com/yuque/qa/ixiyhr",description:"了解语雀流量的作用，以及流量超限如何获取"},{title:"如何使用兑换码",url:"https://www.yuque.com/yuque/qa/kpdrnf",description:"语雀兑换码的获取规则介绍，以及如何使用"},{title:"在线申请发票",url:"https://www.yuque.com/yuque/qa/kaw2la",description:"可在这里了解购买会员或者空间后如何获取发票"},{title:"常见空间人数问题",url:"https://www.yuque.com/yuque/qa/sxskaq",description:"对于语雀空间使用人数的上限介绍"},{title:"是否可以提供合同",url:"https://www.yuque.com/yuque/qa/kqw77t",description:"语雀可为企业空间用户提供盖章版通用电子协议"},{title:"新用户公开分享能力",url:"https://www.yuque.com/yuque/qa/zsw0w0",description:"注册满 7 日的用户，将自动获得各项公开分享能力"},{title:"语雀数据安全",url:"https://www.yuque.com/yuque/ng1qth/safety",description:"了解语雀在数据安全上做的那些事情"},{title:"常见支付问题",url:"https://www.yuque.com/yuque/qa/on3fgp",description:"了解空间、个人会员、空间等支付细节"}]},{name:"基础能力",docs:[{title:"工作台",url:"https://www.yuque.com/yuque/ng1qth/dashboard",description:"通过工作台可以进入你的知识库和团队等内容"},{title:"语雀中的权限设计",url:"https://www.yuque.com/yuque/ng1qth/gxy3gk",description:"对于语雀知识库，团队能力的等权限介绍"},{title:"如何注册语雀",url:"https://www.yuque.com/yuque/ng1qth/how-to-register",description:"可通过手机号、微信、钉钉等方式完成语雀注册"}]},{name:"知识库",url:"https://www.yuque.com/yuque/thyzgp",docs:[{title:"知识库是什么",url:"https://www.yuque.com/yuque/thyzgp/repository",description:"知识库帮助你像书一样整理知识"},{title:"如何新建知识库",url:"https://www.yuque.com/yuque/thyzgp/gbdfpb",description:"对于新手用户，快速建立你的语雀知识库"},{title:"文档知识库",url:"https://www.yuque.com/yuque/ng1qth/iaxgag",description:"介绍语雀文档的基本能力和使用方式"},{title:"如何编排目录",url:"https://www.yuque.com/yuque/thyzgp/vlki63",description:"灵活而强大的目录来管理你的文档"},{title:"如何添加知识库成员",url:"https://www.yuque.com/yuque/thyzgp/nbkoqg",description:"快速添加成员，一起完成在线编辑"},{title:"如何分享知识库",url:"https://www.yuque.com/yuque/thyzgp/collaborators",description:"可以将私密知识库分享给其他人"},{title:"如何转移知识库",url:"https://www.yuque.com/yuque/thyzgp/cd5825",description:"可将知识库转移至其他团队"},{title:"如何导入导出知识库",url:"https://www.yuque.com/yuque/thyzgp/import-lake-to-lark",description:"支持本地上传和在线导出"},{title:"如何删除知识库",url:"https://www.yuque.com/yuque/thyzgp/chubmd",description:"在这里可以了解如何删除知识库"},{title:"如何更改知识库成员权限",url:"https://www.yuque.com/yuque/thyzgp/acrrkx",description:"进入知识库设置可以对知识库进行删除"},{title:"知识库回收站",url:"https://www.yuque.com/yuque/thyzgp/recycle-bin",description:"通过回收站，防止误操作，保障数据安全"}]},{name:"编辑器",url:"https://www.yuque.com/yuque/gpvawt",docs:[{title:"在线文档编辑器",url:"https://www.yuque.com/yuque/gpvawt/gh4227",description:"关于文档编辑器的基础能力、特色能力的介绍"},{title:"语雀画板",url:"https://www.yuque.com/yuque/wknab3",description:"通过语雀画板，绘制并呈现你自己的想法"},{title:"语雀数据表",url:"https://www.yuque.com/yuque/cqb86p",description:"通过语雀数据表，可以像积木一样轻松搭建自己的“可视化能力的数据库”"},{title:"电子表格",url:"https://www.yuque.com/yuque/vecyyc",description:"语雀自研的在线Excel"},{title:"Markdown 语法",url:"https://www.yuque.com/yuque/gpvawt/lnobo9",description:"支持 Markdown 语法编写你的内容"},{title:"如何插入代码",url:"https://www.yuque.com/yuque/gpvawt/insert-codes",description:"可以在文档中加入并友好的呈现你的代码"},{title:"如何插入思维导图",url:"https://www.yuque.com/yuque/gpvawt/editor-mind-map",description:"支持多种样式思维导图"},{title:"如何插入流程图",url:"https://www.yuque.com/yuque/gpvawt/qmyfba",description:"支持多种样式流程图"},{title:"如何插入文本绘图",url:"https://www.yuque.com/yuque/gpvawt/qm77xq",description:"快速绘制出你需要的流程图、甘特图等"},{title:"如何嵌入本地文件",url:"https://www.yuque.com/yuque/gpvawt/uilmir",description:"支持PDF、Word、Keynote、XMind、Axure、Sketch、AI、ipynb 等"},{title:"如何嵌入语雀内容",url:"https://www.yuque.com/yuque/gpvawt/aint7x",description:"插入文档、表格、文件、文档片段等"},{title:"如何使用翻译功能",url:"https://www.yuque.com/yuque/gpvawt/cy8l2c",description:"提供编写翻译和全文智能翻译"},{title:"如何嵌入第三方服务",url:"https://www.yuque.com/yuque/gpvawt/fuu6h3",description:"支持嵌入墨刀、ProcessOn、Canva、Figma、CodePen 文件"},{title:"图片和附件大小限制",url:"https://www.yuque.com/yuque/gpvawt/rms0so",description:"图片和附件的格式与大小限制说明"}]},{name:"团队与空间",url:"https://www.yuque.com/yuque/rvzzxz",docs:[{title:"空间是什么",url:"https://www.yuque.com/yuque/rvzzxz/rfwopm",description:"空间是语雀面向未来组织推出的全新文档与知识协同工具"},{title:"空间安全功能",url:"https://www.yuque.com/yuque/rvzzxz/cf5gr8",description:"对数据进行双重加密，已通过 ISO 安全认证体系认证"},{title:"如何开通空间",url:"https://www.yuque.com/yuque/rvzzxz/ghaihu",description:"在这里了解团队是如何开通空间并使用"},{title:"快速上手",url:"https://www.yuque.com/yuque/rvzzxz/bozbd4",description:"玩转语雀空间，高效知识协同"},{title:"企业客户案例",url:"https://www.yuque.com/yuque/ykl39r",description:"如何使用语雀搭建企业空间？"},{title:"管理员攻略 ｜快速上手语雀空间",url:"https://www.yuque.com/yuque/rvzzxz/nrpo0b",description:"快速搭建企业空间结构"},{title:"员工攻略 ｜快速上手语雀空间",url:"https://www.yuque.com/yuque/rvzzxz/tyzomq",description:"开始体验在空间中工作"},{title:"团队是什么",url:"https://www.yuque.com/yuque/rvzzxz/mfxpek",description:"空间内可以建立多个团队，团队内可以创建多个知识库"},{title:"如何新建团队",url:"https://www.yuque.com/yuque/rvzzxz/vxk77i",description:"在空间中创建团队进行知识协同"},{title:"如何添加、管理团队成员",url:"https://www.yuque.com/yuque/rvzzxz/mgo5il",description:"设置团队成员访问权限"},{title:"空间权限设置",url:"https://www.yuque.com/yuque/rvzzxz/uwrhki",description:"设置空间成员访问权限"},{title:"企业认证",url:"https://www.yuque.com/yuque/rvzzxz/eb7ine",description:"企业认证提高数据安全系数"},{title:"如何购买语雀空间",url:"https://www.yuque.com/yuque/rvzzxz/wvcdiy",description:"购买付费空间，享受更多付费权益"},{title:"如何申请公办教育及公益组织免费版",url:"https://www.yuque.com/yuque/rvzzxz/gf443f",description:"教育机构及非营利性公益组织，可申请免费使用语雀空间"},{title:"绑定三方通讯录",url:"https://www.yuque.com/yuque/rvzzxz/oh9sx8",description:"空间支持绑定钉钉，企业微信，Teambition等方式"}]},{name:"小记",url:"https://www.yuque.com/yuque/ekrzd1",docs:[{title:"语雀小记使用指南",url:"https://www.yuque.com/yuque/ekrzd1/dqdt6f",description:"语雀小记快速入门"},{title:"碎片化信息记录工具",url:"https://www.yuque.com/yuque/ekrzd1/uy244v",description:"介绍语雀小记背后的产品思考"},{title:"用微信记小记",url:"https://www.yuque.com/yuque/ekrzd1/rzxyz3",description:"语雀小记和微信打通，支持语音，文字和图片"}]},{name:"客户端",docs:[{title:"客户端下载地址",url:"https://www.yuque.com/download",description:"语雀支持网页，桌面端，移动端三端同步"},{title:"移动端介绍",url:"https://www.yuque.com/yuque/mobile-app/goyw93",description:"介绍语雀移动端端基础功能"},{title:"移动端常见Q&A",url:"https://www.yuque.com/yuque/mobile-app/faq",description:"语雀App 常见问题解答"},{title:"移动端更新日志",url:"https://www.yuque.com/yuque/mobile-app",description:"语雀App 功能更新历史"},{title:"桌面端常见 Q&A",url:"https://www.yuque.com/yuque/yuque-desktop/desktop-faq",description:"语雀桌面端常见问题解答"},{title:"桌面端更新日志",url:"https://www.yuque.com/yuque/yuque-desktop",description:"语雀桌面端功能更新历史"}]},{name:"权益相关",docs:[{title:"语雀会员",url:"https://www.yuque.com/yuque/ng1qth/member-privilege",description:"语雀会员的权益和获取方式介绍"},{title:"稻谷权益规则",url:"https://www.yuque.com/yuque/qa/gqcepg",description:"语雀稻谷的获取方式和兑换权益介绍"},{title:"定价",url:"https://www.yuque.com/about/price",description:"付费和免费版本权益介绍"},{title:"如何计算上传流量",url:"https://www.yuque.com/yuque/qa/ixiyhr",description:"了解语雀是如何计算使用流量"},{title:"如何使用兑换码",url:"https://www.yuque.com/yuque/qa/kpdrnf",description:"通过兑换码兑换个人、空间等付费权益"},{title:"如何申请公办教育及公益组织免费版",url:"https://www.yuque.com/yuque/rvzzxz/gf443f",description:"在这里申请公益、教育等权益"},{title:"在线申请发票",url:"https://www.yuque.com/yuque/qa/kaw2la",description:"当你付费后，可以在线进行发票申请"},{title:"如何购买语雀空间",url:"https://www.yuque.com/yuque/rvzzxz/wvcdiy",description:"通过空间让团队进行专注的知识协同"}]},{name:"账户相关",docs:[{title:"账户设置",url:"https://www.yuque.com/yuque/ng1qth/tp0ugp",description:"设置个人信息，查看账户安全"},{title:"如何绑定第三方账户",url:"https://www.yuque.com/yuque/ng1qth/ic42uw",description:"语雀支持绑定 钉钉、支付宝、微信、Teambition"},{title:"如何解绑第三方账户",url:"https://www.yuque.com/yuque/ng1qth/gq84v3",description:"介绍语雀解绑第三方账户的流程"},{title:"注销账户",url:"https://www.yuque.com/yuque/ng1qth/nvobxs",description:"语雀账户注销步骤介绍"},{title:"更换手机号",url:"https://www.yuque.com/yuque/qa/nos8kp",description:"语雀手机号为用户唯一身份标识"},{title:"无法通过该手机号注册",url:"https://www.yuque.com/yuque/qa/sdyb9d",description:"手机号注册流程相关问题"},{title:"收不到验证码",url:"https://www.yuque.com/yuque/qa/sms-issue#dK8Lf",description:"验证码出现问题可以尝试的操作步骤介绍"}]},{name:"其它问题",docs:[{title:"语雀的天空",url:"https://www.yuque.com/yuque/blog",description:"在这里获取语雀最新动态"},{title:"新手视频手册",url:"https://www.yuque.com/yuque/xnx62x",description:"通过精剪视频的方式，演示一个语雀平台的使用场景"},{title:"语雀进阶玩法",url:"https://www.yuque.com/yuque/tygt6i",description:"解锁更多语雀的使用技巧"},{title:"开发者文档",url:"https://www.yuque.com/yuque/developer",description:"API, OAuth，Webhooks等功能介绍"},{title:"加入语雀",url:"https://www.yuque.com/yuque/careers",description:"我们是一群心怀「普惠知识产品梦」的追梦人"},{title:"Yuque Support",url:"https://www.yuque.com/yuque/support_en",description:"A quick guide of how Yuque works"}]}]},templates:{headlines:[{id:17024371,title:"阅读书单",description:"将你读过/准备读的所有书籍，整理为一个漂亮的「数字图书馆」。",cover:"https://gw.alipayobjects.com/mdn/rms_0d6eb5/afts/img/A*-__OQYd_mUgAAAAAAAAAAAAAARQnAQ"},{id:17024333,title:"工作周报",description:"以周为单位，回顾以及计划自己的工作、也让工作更有条理。",cover:"https://gw.alipayobjects.com/mdn/rms_0d6eb5/afts/img/A*eS00RY86l7kAAAAAAAAAAAAAARQnAQ"},{id:17024393,title:"思维导图",description:"思维形象化的工具，简单且高效地表达发散性思维，激发无限创意。",cover:"https://gw.alipayobjects.com/mdn/rms_0d6eb5/afts/img/A*3IojSIp4QIYAAAAAAAAAAAAAARQnAQ"}],categoriesV2:[{name:"团队协作",description:"工作场景，基于模板高效创作、一气呵成。",templates:[{id:17024332,title:"会议记录",description:"记录会议的组织情况以及具体内容，以供成员后续追溯。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*O8QNSrtK2IAAAAAAAAAAAAAADvuFAQ/original"},{id:17024333,title:"工作周报",description:"以周为单位，回顾以及计划自己的工作、也让工作更有条理。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*lg56QoWoKBoAAAAAAAAAAAAADvuFAQ/original"},{id:17024334,title:"项目立项",description:"产品生命周期中重要的开端。通过立项，明确阶段目标并聚焦资源。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*sqOTQaGMuZAAAAAAAAAAAAAADvuFAQ/original"},{id:17024335,title:"用研报告",description:"用户中心设计流程中的第一步，快速定位产品问题、寻找解决方案。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*6K9YSI4W8GMAAAAAAAAAAAAADvuFAQ/original"},{id:17024340,title:"需求文档",description:"产品经理的必备技能，以清晰、完整、易读的方式呈现需求和解决方案。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*ODf9S5ksjsQAAAAAAAAAAAAADvuFAQ/original"},{id:17024341,title:"需求管理",description:"将来自各方的需求汇总至需求池中，并作为项目管理的依据。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*7EOnSpY67EsAAAAAAAAAAAAADvuFAQ/original"},{id:17024355,title:"系分文档",description:"全称「系统分析与设计文档」，降低coding不确定性并提升可维护性。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*_3SVSKgWMX4AAAAAAAAAAAAADvuFAQ/original"},{id:17024356,title:"接口文档",description:"定义程序 api 接口的请求方法和参数，以供其他工程师调用。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*7R1kR4NFY5EAAAAAAAAAAAAADvuFAQ/original"},{id:17024357,title:"缺陷管理",description:"以看板的形式，一览缺陷池中所有缺陷，并跟进修复进度。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*9YMDSpwTX4oAAAAAAAAAAAAADvuFAQ/original"},{id:17024359,title:"故障复盘",description:"还原软件故障的相关信息，总结故障原因以避免再次发生。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*ziGbRpXVSu0AAAAAAAAAAAAADvuFAQ/original"},{id:17024360,title:"项目复盘",description:"重温项目的目标和计划，同时放眼未来、总结可复用的经验建议。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*o4ipTbEq9VwAAAAAAAAAAAAADvuFAQ/original"}]},{name:"个人管理",description:"计划、待办、笔记...用知识构建自己的花园。",templates:[{id:17024361,title:"个人规划",description:"用九宫格设置关键词和目标，做一份详细可实行的个人规划。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*jPd4RbFT0egAAAAAAAAAAAAADvuFAQ/original"},{id:17024362,title:"待办清单",description:"以看板的形式，将待办事项分为 4 类：待处理/进行中/已完成/已取消。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*hk-DSYExXA4AAAAAAAAAAAAADvuFAQ/original"},{id:17024363,title:"自律打卡",description:"为自己设置具体到日的打卡目标，并持续跟踪执行进展。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*EDsaSJznY34AAAAAAAAAAAAADvuFAQ/original"},{id:17024368,title:"收支管理",description:"记录日常收支并统计各类支出占比，做一个勤俭持家的打工人。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*uSjUTaMs0kkAAAAAAAAAAAAADvuFAQ/original"},{id:17024370,title:"生活备忘",description:"一个备忘录，存放生活中的琐事和杂物，也能作为密码保险箱。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*tL0aTIuC3GoAAAAAAAAAAAAADvuFAQ/original"},{id:17024371,title:"阅读书单",description:"将你读过/准备读的所有书籍，整理为一个漂亮的「数字图书馆」。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*2xz9Tpm_hQMAAAAAAAAAAAAADvuFAQ/original"},{id:17024381,title:"读书笔记",description:"快速记录和回顾自己读完的书籍、构建自己的知识体系。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*vlDWQIsXL0EAAAAAAAAAAAAADvuFAQ/original"},{id:17024382,title:"旅行计划",description:"记录一次旅行需要的所有事项，包括行程计划、物品准备、预算支出...",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*Col_RIKpwHQAAAAAAAAAAAAADvuFAQ/original"},{id:17024383,title:"年度总结",description:"让我们站在以年为节点的时间线上，看看一年做了什么、未来还能做什么。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*v92zSY-EqDwAAAAAAAAAAAAADvuFAQ/original"}]},{name:"基础模板",description:"语雀编辑器的强大能力，在此一览无余。",templates:[{id:17024384,title:"程序员最爱的功能",description:"Markdown、UML、代码块、全键盘输入…如此强大，程序员怎能不爱。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*iv3GRrSie4QAAAAAAAAAAAAADvuFAQ/original"},{id:17024385,title:"令人惊艳的画板卡片",description:"思维导图、流程图、架构图、甘特图 ... 一个画板卡片，通通搞定。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*OaJJS4enHaQAAAAAAAAAAAAADvuFAQ/original"},{id:17024388,title:"表格视图（数据表）",description:"数据表的表格视图。丰富的内容类型、灵活定义多样数据。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*TyfRQYS3IowAAAAAAAAAAAAADvuFAQ/original"},{id:17024391,title:"看板视图（数据表）",description:"数据表的看板视图。适合项目管理，以及任务协作场景。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*VDCSRIdo8EAAAAAAAAAAAAAADvuFAQ/original"},{id:17024392,title:"画册视图（数据表）",description:"数据表的画册视图。适合整理图片素材，呈现美观图集。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*DHi5SbE3VGwAAAAAAAAAAAAADvuFAQ/original"},{id:17024393,title:"思维导图",description:"思维形象化的工具，简单且高效地表达发散性思维，激发无限创意。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*BF9NR7BwUegAAAAAAAAAAAAADvuFAQ/original"},{id:17024394,title:"流程图",description:"将系统复杂的流程逻辑简单表达。用好流程图，一图胜千言。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*bWffRYBPEdkAAAAAAAAAAAAADvuFAQ/original"},{id:17024395,title:"架构图",description:"呈现系统的整体轮廓，描述系统中的实体与实体之间的联系。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*JJgoT4aLV98AAAAAAAAAAAAADvuFAQ/original"},{id:17024396,title:"时间轴",description:"串联时间轨迹上的不同事务，将关联的所有事务系统化、完整化。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*G8_7So1JhmkAAAAAAAAAAAAADvuFAQ/original"},{id:17024397,title:"统计图表",description:"各类图表，应有尽有。柱状图、条形图、折线图、饼图...",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*3wEFQorv44QAAAAAAAAAAAAADvuFAQ/original"},{id:17024399,title:"表格函数",description:"支持 200+ 种函数的语雀表格，轻松完成各类统计与数学运算。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*49CTQI4Hwd8AAAAAAAAAAAAADvuFAQ/original"}]},{name:"用户精选",description:"来自用户投稿的精选模板，漂亮且实用。",templates:[{id:17024400,title:"个人简历",description:"用语雀文档做一个漂亮又实用的简历，核心是简洁、突出重点。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*Ls-iQr5_JhwAAAAAAAAAAAAADvuFAQ/original"},{id:17024401,title:"团建活动",description:"展示团建的具体时间和行程安排、并统计团队成员报名信息。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*YoN6S4LfkREAAAAAAAAAAAAADvuFAQ/original"},{id:17024409,title:"信息收集",description:"通过数据表的「表单」功能，以问卷的形式收集和汇总信息。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*jxqJS6QuPy4AAAAAAAAAAAAADvuFAQ/original"},{id:17024410,title:"旅游攻略",description:"在画板的自由画布里，描述自己的旅游行程并制作一份漂亮的攻略。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*xUYrTKaLqJEAAAAAAAAAAAAADvuFAQ/original"},{id:17024411,title:"数据运营表",description:"用折线图，记录并分析产品不同在周期中的数据变化情况。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*HL2UQIwQdREAAAAAAAAAAAAADvuFAQ/original"},{id:17024413,title:"项目进度表",description:"以甘特图的形式，详细地呈现项目的完整排期以及延期情况。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*LHF_Sp3fVToAAAAAAAAAAAAADvuFAQ/original"},{id:17024415,title:"技术架构图 1",description:"使用架构图，呈现软件系统的整体轮廓以及各个组件之间的相互关系。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*I6n5QIYpkEsAAAAAAAAAAAAADvuFAQ/original"},{id:17024416,title:"技术架构图 2",description:"使用架构图，呈现软件系统的整体轮廓以及各个组件之间的相互关系。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*hdupT7JZyQAAAAAAAAAAAAAADvuFAQ/original"},{id:17024414,title:"用户体验地图",description:"可视化地描述用户使用产品或接受服务的体验情况，一图胜千言。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*k3RESbBcMAUAAAAAAAAAAAAADvuFAQ/original"}]}],categories:[{name:"团队协作",description:"工作场景，基于模板高效创作、一气呵成。",templates:[{id:17024332,title:"会议记录",description:"记录会议的组织情况以及具体内容，以供成员后续追溯。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*vPWKSohqUlYAAAAAAAAAAAAADvuFAQ/original"},{id:17024333,title:"工作周报",description:"以周为单位，回顾以及计划自己的工作、也让工作更有条理。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*XCwkQrA7e3kAAAAAAAAAAAAADvuFAQ/original"},{id:17024334,title:"项目立项",description:"产品生命周期中重要的开端。通过立项，明确阶段目标并聚焦资源。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*nmLcSJ9otSoAAAAAAAAAAAAADvuFAQ/original"},{id:17024335,title:"用研报告",description:"用户中心设计流程中的第一步，快速定位产品问题、寻找解决方案。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*7_K7Q7O0wMwAAAAAAAAAAAAADvuFAQ/original"},{id:17024340,title:"需求文档",description:"产品经理的必备技能，以清晰、完整、易读的方式呈现需求和解决方案。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*eEozQZXdQUMAAAAAAAAAAAAADvuFAQ/original"},{id:17024341,title:"需求管理",description:"将来自各方的需求汇总至需求池中，并作为项目管理的依据。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*geVRRqq4ALAAAAAAAAAAAAAADvuFAQ/original"},{id:17024355,title:"系分文档",description:"全称「系统分析与设计文档」，降低coding不确定性并提升可维护性。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*sOl0TJOeDJUAAAAAAAAAAAAADvuFAQ/original"},{id:17024356,title:"接口文档",description:"定义程序 api 接口的请求方法和参数，以供其他工程师调用。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*USKVTaxurukAAAAAAAAAAAAADvuFAQ/original"},{id:17024357,title:"缺陷管理",description:"以看板的形式，一览缺陷池中所有缺陷，并跟进修复进度。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*M5aySb37IEoAAAAAAAAAAAAADvuFAQ/original"},{id:17024359,title:"故障复盘",description:"还原软件故障的相关信息，总结故障原因以避免再次发生。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*f8jfQK9kwFUAAAAAAAAAAAAADvuFAQ/original"},{id:17024360,title:"项目复盘",description:"重温项目的目标和计划，同时放眼未来、总结可复用的经验建议。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*qrwrR4Xt9JMAAAAAAAAAAAAADvuFAQ/original"}]},{name:"个人管理",description:"计划、待办、笔记...用知识构建自己的花园。",templates:[{id:17024361,title:"个人规划",description:"用九宫格设置关键词和目标，做一份详细可实行的个人规划。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*ZmvVRpAr55UAAAAAAAAAAAAADvuFAQ/original"},{id:17024362,title:"待办清单",description:"以看板的形式，将待办事项分为 4 类：待处理、进行中、已完成、已取消。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*Dg0vRplNzlAAAAAAAAAAAAAADvuFAQ/original"},{id:17024363,title:"自律打卡",description:"为自己设置具体到日的打卡目标，并持续跟踪执行进展。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*eMFzR4FqeV8AAAAAAAAAAAAADvuFAQ/original"},{id:17024368,title:"收支管理",description:"记录日常收支并统计各类支出占比，做一个勤俭持家的打工人。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*stCfSamZIl0AAAAAAAAAAAAADvuFAQ/original"},{id:17024370,title:"生活备忘",description:"一个备忘录，存放生活中的琐事和杂物，也能作为密码保险箱。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*XTvkR51kZWkAAAAAAAAAAAAADvuFAQ/original"},{id:17024371,title:"阅读书单",description:"将你读过或者准备读的所有书籍，整理为一个漂亮的「数字图书馆」。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*fvnUTqWXWNoAAAAAAAAAAAAADvuFAQ/original"},{id:17024381,title:"读书笔记",description:"快速记录和回顾自己读完的书籍、构建自己的知识体系。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*wNdAQ4NyWPQAAAAAAAAAAAAADvuFAQ/original"},{id:17024382,title:"旅行计划",description:"记录一次旅行需要的所有事项，包括行程计划、物品准备、预算支出...",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*jycSQJ2EKPAAAAAAAAAAAAAADvuFAQ/original"},{id:17024383,title:"年度总结",description:"让我们站在以年为节点的时间线上，看看一年做了什么、未来还能做什么。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*Td--SbXizcAAAAAAAAAAAAAADvuFAQ/original"}]},{name:"基础模板",description:"语雀编辑器的强大能力，在此一览无余。",templates:[{id:17024384,title:"程序员最爱的功能",description:"Markdown、UML、代码块、全键盘输入…如此强大，程序员怎能不爱。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*5aXhSJQbOiwAAAAAAAAAAAAADvuFAQ/original"},{id:17024385,title:"令人惊艳的画板卡片",description:"思维导图、流程图、架构图、甘特图 ... 一个画板卡片，通通搞定。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*P3GoQ5Q3SZoAAAAAAAAAAAAADvuFAQ/original"},{id:17024388,title:"表格视图（数据表）",description:"数据表的表格视图。丰富的内容类型、灵活定义多样数据。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*o_MJQ5j72YgAAAAAAAAAAAAADvuFAQ/original"},{id:17024391,title:"看板视图（数据表）",description:"数据表的看板视图。适合项目管理，以及任务协作场景。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*l26VQ5F1RGwAAAAAAAAAAAAADvuFAQ/original"},{id:17024392,title:"卡片视图（数据表）",description:"数据表的卡片视图。适合整理图片素材，呈现美观图集。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*K4gxTLgbuC8AAAAAAAAAAAAADvuFAQ/original"},{id:17024393,title:"思维导图",description:"思维形象化的工具，简单且高效地表达发散性思维，激发无限创意。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*y-aLT5irBjMAAAAAAAAAAAAADvuFAQ/original"},{id:17024394,title:"流程图",description:"将系统复杂的流程逻辑简单表达。用好流程图，一图胜千言。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*12yyT5uxBeQAAAAAAAAAAAAADvuFAQ/original"},{id:17024395,title:"架构图",description:"呈现系统的整体轮廓，描述系统中的实体与实体之间的联系。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*v-4gQoB59tsAAAAAAAAAAAAADvuFAQ/original"},{id:17024396,title:"时间轴",description:"串联时间轨迹上的不同事务，将关联的所有事务系统化、完整化。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*LU2NRbvk39IAAAAAAAAAAAAADvuFAQ/original"},{id:17024397,title:"统计图表",description:"各类图表，应有尽有。柱状图、条形图、折线图、饼图...",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*1Fy_R5m3c5EAAAAAAAAAAAAADvuFAQ/original"},{id:17024399,title:"表格函数",description:"支持 200+ 种函数的语雀表格，轻松完成各类统计与数学运算。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*5T7LT795hXUAAAAAAAAAAAAADvuFAQ/original"}]},{name:"用户精选",description:"来自用户投稿的精选模板，漂亮且实用。",templates:[{id:17024400,title:"个人简历",description:"用语雀文档做一个漂亮又实用的简历，核心是简洁、突出重点。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*zNE8Qb2TKFoAAAAAAAAAAAAADvuFAQ/original"},{id:17024401,title:"团建活动",description:"展示团建的具体时间和行程安排、并统计团队成员报名信息。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*iOY9Raycy6MAAAAAAAAAAAAADvuFAQ/original"},{id:17024409,title:"信息收集",description:"通过数据表的「表单」功能，以问卷的形式收集和汇总信息。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*YPItT7lnkbwAAAAAAAAAAAAADvuFAQ/original"},{id:17024410,title:"旅游攻略",description:"在画板的自由画布里，描述自己的旅游行程并制作一份漂亮的攻略。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*Mu3aS53NIEwAAAAAAAAAAAAADvuFAQ/original"},{id:17024411,title:"数据运营表",description:"用折线图，记录并分析产品不同在周期中的数据变化情况。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*SHDhRZDONsoAAAAAAAAAAAAADvuFAQ/original"},{id:17024413,title:"项目进度表",description:"以甘特图的形式，详细地呈现项目的完整排期以及延期情况。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*wiBLTZmQzXEAAAAAAAAAAAAADvuFAQ/original"},{id:17024415,title:"技术架构图 1",description:"使用架构图，呈现软件系统的整体轮廓以及各个组件之间的相互关系。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*1M2ZQbSgTPoAAAAAAAAAAAAADvuFAQ/original"},{id:17024416,title:"技术架构图 2",description:"使用架构图，呈现软件系统的整体轮廓以及各个组件之间的相互关系。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*9cOwSbxHjzwAAAAAAAAAAAAADvuFAQ/original"},{id:17024414,title:"用户体验地图",description:"可视化地描述用户使用产品或接受服务的体验情况，一图胜千言。",cover:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*xUgMSK8--VoAAAAAAAAAAAAADvuFAQ/original"}]}]}};var o=window.location.href.includes("debug=1")?n:window.appData.official_website_data||n,a={getPageData:function(e){return o[e]},getAppChangeLogUrl:function(){return"https://www.yuque.com/yuque/mobile-app"},getDesktopChangeLogUrl:function(){return"https://www.yuque.com/yuque/yuque-desktop"}};t.a=a},5623:function(e,t,r){"use strict";r(59);var n=r(30),o=r(0),a=r.n(o),i=r(63),c=r(112),l=r(34),u=r(51),s=r(1008),f="BookStatisticsLimit-module_wrapper_CrRJ2",d="BookStatisticsLimit-module_content_akwox",p="BookStatisticsLimit-module_title_ejahI",h="BookStatisticsLimit-module_desc_c-ita",m="BookStatisticsLimit-module_img_Thh7u";function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(){v=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",b={};function g(){}function w(){}function _(){}var E={};u(E,i,(function(){return this}));var O=Object.getPrototypeOf,A=O&&O(O(L([])));A&&A!==r&&n.call(A,i)&&(E=A);var S=_.prototype=g.prototype=Object.create(E);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==y(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===b)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(y(t)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=u(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function b(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}t.a={hasAbility:function(){return Object(s.getInterest)().interests[u.INTEREST_CODE.book_statistics]},showMemberIntro:function(){var e,t,r,o,s,y,g=null===(e=window)||void 0===e?void 0:e.appData,w=g.organization,_=g.group,E=g.me,O=null==w?void 0:w.id,A=null==w||null===(t=w.abilities)||void 0===t?void 0:t.destroy,S={collab:{title:__("你正在协作的知识库无此权限"),btnText:__("知道了"),btnAction:function(){}},member:{title:__("购买会员可享知识库统计功能"),desc:__("购买会员可查看知识库的详细统计，如文档数、点赞数、知识库各文档的阅读点赞数等。"),btnText:__("购买会员"),btnAction:function(){var e;return null===(e=window.__member_message_ref)||void 0===e?void 0:e.current.showMemberIntro(l.LIMIT_SCENE.book_statistics)}},organization:{title:__("专业版、旗舰版空间专属功能"),desc:__("知识库统计可以查看知识库内容数据统计和阅读、点赞、评论等访问数据统计。"),btnText:A?i.a.getPaymentActionGuide(null==w?void 0:w.payment_type):__("我知道了"),btnAction:function(){return A&&window.open("/r/organizations/dashboard/cashier?action=buy&paySource=".concat(l.LIMIT_SCENE.book_statistics),"","noopener,noreferrer")}}},k=_&&E&&_.id!==E.id;O?(y=S.organization,Object(c.spmClick)(l.ORG_LIMIT_SPM.pay_limit,{pay_source:u.INTEREST_CODE.book_statistics,organization_id:(null==w?void 0:w.id)||0})):y=k?S.collab:S.member,n.a.info({width:480,closable:!0,maskClosable:!0,centered:!0,className:f,content:a.a.createElement("div",null,a.a.createElement("img",{className:m,src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*Wl-qQ4teHLUAAAAAAAAAAAAAARQnAQ"}),a.a.createElement("div",{className:d},a.a.createElement("p",{className:p},null===(r=y)||void 0===r?void 0:r.title),a.a.createElement("p",{className:h},null===(o=y)||void 0===o?void 0:o.desc))),okText:null===(s=y)||void 0===s?void 0:s.btnText,onOk:function(){return(e=v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=y)||void 0===t||t.btnAction();case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){b(a,n,o,i,c,"next",e)}function c(e){b(a,n,o,i,c,"throw",e)}i(void 0)}))})();var e}})}}},5636:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),o=r(5845);function a(){var e=Object(n.useContext)(o.a);if(!e)throw new Error("Managers not found, please use ManagersProvider");return e}},5640:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(2),i=r.n(a),c="index-module_modal_RmjKt",l="index-module_tipImg_3mf06",u="index-module_closeBtn_rSEPz",s=function(e){var t=e.visible,r=e.onClose,n=e.imgUrl,a=e.force,i=-1!==window.navigator.userAgent.toLowerCase().indexOf("micromessenger"),s=window.appData.isDingTalkApp;return(i||s||a)&&(t||a)?o.a.createElement("div",{className:c},o.a.createElement("div",{className:l},o.a.createElement("img",{src:n})),o.a.createElement("div",{onClick:r,className:u},o.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*McjkTZ88-0cAAAAAAAAAAAAAARQnAQ"}))):null};s.propTypes={visible:i.a.bool,onClose:i.a.func,imgUrl:i.a.string,force:i.a.bool};t.a=s},5644:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0),o=r.n(n),a={IndicatorWrapper:"indicatorWrapper-module_IndicatorWrapper_RIDo1",PrefixOffsetIndent:"indicatorWrapper-module_PrefixOffsetIndent_2zOMI",Indicator:"indicatorWrapper-module_Indicator_+EmfH",IndicatorLine:"indicatorWrapper-module_IndicatorLine_wUn2a"};function i(e){var t=new Array(e.prefixOffsetDepth<0?0:e.prefixOffsetDepth).fill(null).map((function(t,r){return{style:{left:(r+1)*-e.offsetPerLevel},id:r+1}}));return o.a.createElement("div",{className:a.IndicatorWrapper,style:e.style},t.map((function(e){return o.a.createElement("div",{className:a.PrefixOffsetIndent,key:e.id,style:e.style})})),o.a.createElement("div",{className:a.Indicator},o.a.createElement("div",{className:a.IndicatorLine})))}},5656:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(83),o=r(1777);function a(e){var t=window.appData,r=t.sharePage,a=t.enableUserFeed,i=t.organization;if(r||null!=i&&i.id)return!1;var c=e.group,l=e.doc,u=e.book,s=e.version,f=e.me;if(s)return!1;if(!l||!u||!c)return!1;var d=Object(o.c)({type:"doc",target:l,group:c,book:u}),p=(f||window.appData.me||{}).id;return[n.PUBLIC.public,n.PUBLIC.intranet_all,n.PUBLIC.intranet].includes(d)&&u.user_id===p&&a}},5719:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return c}));var n=r(0),o=r.n(n);var a=Object(n.createContext)({showHistory:function(){}});function i(e){return o.a.createElement(a.Provider,{value:e},e.children)}function c(){return Object(n.useContext)(a)}},5720:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(228),o=r.n(n),a=r(5844);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function s(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"model",{visible:!1,currentPanel:null,containerStyle:{}}),s(this,"_renderInstanceCachedMap",new Map),s(this,"_shouldCachedSet",new Set),s(this,"_contentMap",new Map),s(this,"_renderer",a.b),s(this,"_subscribers",new Set),s(this,"_deferedPanel",{}),s(this,"emitter",void 0),e.inited=!0,this.emitter=new o.a},(t=[{key:"render",value:function(e){var t=this;this.model=l(l({},this.model),e),this._renderer(this.model),this._subscribers.forEach((function(e){e({visible:t.model.visible,currentPanel:t.model.currentPanel})}))}},{key:"getPanelContent",value:function(e){var t=this._contentMap.get(e);return t||console.warn("%s Panel not found, you should check registry",e),t||a.a}},{key:"registerContent",value:function(e,t,r){this._contentMap.set(e,t),null!=r&&r.cached&&this._shouldCachedSet.add(e),this._deferedPanel.panel&&(this.show(this._deferedPanel.panel,this._deferedPanel.options),this._deferedPanel={})}},{key:"registerCachedPanelInstance",value:function(e,t){this._shouldCachedSet.has(e)&&this._renderInstanceCachedMap.set(e,t)}},{key:"getCachedPanelInstance",value:function(e){return this._renderInstanceCachedMap.get(e)}},{key:"setRenderer",value:function(e){this._renderer=e}},{key:"show",value:function(e,t){e!==this.model.currentPanel&&(this._contentMap.get(e)?this.render({visible:!0,currentPanel:e,panelProps:null==t?void 0:t.panelProps,containerStyle:null==t?void 0:t.containerStyle}):this._deferedPanel={panel:e,options:t})}},{key:"hide",value:function(e){e?this.flushCacheByPanel(e):this.flushCaches(),e&&this.model.currentPanel!==e||this.render({visible:!1,currentPanel:null,panelProps:{},containerStyle:{}})}},{key:"subscribe",value:function(e){var t=this;return this._subscribers.add(e),function(){t._subscribers.delete(e)}}},{key:"flushCacheByPanel",value:function(e){this._renderInstanceCachedMap.delete(e)}},{key:"flushCaches",value:function(){this._renderInstanceCachedMap.clear()}},{key:"flushPanels",value:function(){this._shouldCachedSet.clear(),this._contentMap.clear()}},{key:"flushSubscribers",value:function(){this._subscribers.clear()}},{key:"flushAll",value:function(){this.flushCaches(),this.flushPanels()}}])&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();s(d,"inited",!1)},5725:function(e,t,r){"use strict";r.d(t,"a",(function(){return se}));r(711);var n=r(356),o=(r(144),r(60)),a=r(0),i=r.n(a),c=r(190),l=r(33),u="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function s(e,t,r,n){e.addEventListener?e.addEventListener(t,r,n):e.attachEvent&&e.attachEvent("on".concat(t),(function(){r(window.event)}))}function f(e,t){for(var r=t.slice(0,t.length-1),n=0;n<r.length;n++)r[n]=e[r[n].toLowerCase()];return r}function d(e){"string"!=typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),r=t.lastIndexOf("");r>=0;)t[r-1]+=",",t.splice(r,1),r=t.lastIndexOf("");return t}for(var p={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":u?173:189,"=":u?61:187,";":u?59:186,"'":222,"[":219,"]":221,"\\":220},h={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},m={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},y={16:!1,18:!1,17:!1,91:!1},v={},b=1;b<20;b++)p["f".concat(b)]=111+b;var g=[],w=!1,_="all",E=[],O=function(e){return p[e.toLowerCase()]||h[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function A(e){_=e||"all"}function S(){return _||"all"}var k=function(e){var t=e.key,r=e.scope,n=e.method,o=e.splitKey,a=void 0===o?"+":o;d(t).forEach((function(e){var t=e.split(a),o=t.length,i=t[o-1],c="*"===i?"*":O(i);if(v[c]){r||(r=S());var l=o>1?f(h,t):[];v[c]=v[c].filter((function(e){return!((!n||e.method===n)&&e.scope===r&&function(e,t){for(var r=e.length>=t.length?e:t,n=e.length>=t.length?t:e,o=!0,a=0;a<r.length;a++)-1===n.indexOf(r[a])&&(o=!1);return o}(e.mods,l))}))}}))};function x(e,t,r,n){var o;if(t.element===n&&(t.scope===r||"all"===t.scope)){for(var a in o=t.mods.length>0,y)Object.prototype.hasOwnProperty.call(y,a)&&(!y[a]&&t.mods.indexOf(+a)>-1||y[a]&&-1===t.mods.indexOf(+a))&&(o=!1);(0!==t.mods.length||y[16]||y[18]||y[17]||y[91])&&!o&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function j(e,t){var r=v["*"],n=e.keyCode||e.which||e.charCode;if(P.filter.call(this,e)){if(93!==n&&224!==n||(n=91),-1===g.indexOf(n)&&229!==n&&g.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var r=m[t];e[t]&&-1===g.indexOf(r)?g.push(r):!e[t]&&g.indexOf(r)>-1?g.splice(g.indexOf(r),1):"metaKey"===t&&e[t]&&3===g.length&&(e.ctrlKey||e.shiftKey||e.altKey||(g=g.slice(g.indexOf(r))))})),n in y){for(var o in y[n]=!0,h)h[o]===n&&(P[o]=!0);if(!r)return}for(var a in y)Object.prototype.hasOwnProperty.call(y,a)&&(y[a]=e[m[a]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===g.indexOf(17)&&g.push(17),-1===g.indexOf(18)&&g.push(18),y[17]=!0,y[18]=!0);var i=S();if(r)for(var c=0;c<r.length;c++)r[c].scope===i&&("keydown"===e.type&&r[c].keydown||"keyup"===e.type&&r[c].keyup)&&x(e,r[c],i,t);if(n in v)for(var l=0;l<v[n].length;l++)if(("keydown"===e.type&&v[n][l].keydown||"keyup"===e.type&&v[n][l].keyup)&&v[n][l].key){for(var u=v[n][l],s=u.splitKey,f=u.key.split(s),d=[],p=0;p<f.length;p++)d.push(O(f[p]));d.sort().join("")===g.sort().join("")&&x(e,u,i,t)}}}function P(e,t,r){g=[];var n=d(e),o=[],a="all",i=document,c=0,l=!1,u=!0,p="+",m=!1;for(void 0===r&&"function"==typeof t&&(r=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(a=t.scope),t.element&&(i=t.element),t.keyup&&(l=t.keyup),void 0!==t.keydown&&(u=t.keydown),void 0!==t.capture&&(m=t.capture),"string"==typeof t.splitKey&&(p=t.splitKey)),"string"==typeof t&&(a=t);c<n.length;c++)o=[],(e=n[c].split(p)).length>1&&(o=f(h,e)),(e="*"===(e=e[e.length-1])?"*":O(e))in v||(v[e]=[]),v[e].push({keyup:l,keydown:u,scope:a,mods:o,shortcut:n[c],method:r,key:n[c],splitKey:p,element:i});void 0!==i&&!function(e){return E.indexOf(e)>-1}(i)&&window&&(E.push(i),s(i,"keydown",(function(e){j(e,i)}),m),w||(w=!0,s(window,"focus",(function(){g=[]}),m)),s(i,"keyup",(function(e){j(e,i),function(e){var t=e.keyCode||e.which||e.charCode,r=g.indexOf(t);if(r>=0&&g.splice(r,1),e.key&&"meta"===e.key.toLowerCase()&&g.splice(0,g.length),93!==t&&224!==t||(t=91),t in y)for(var n in y[t]=!1,h)h[n]===t&&(P[n]=!1)}(e)}),m))}var C={setScope:A,getScope:S,deleteScope:function(e,t){var r,n;for(var o in e||(e=S()),v)if(Object.prototype.hasOwnProperty.call(v,o))for(r=v[o],n=0;n<r.length;)r[n].scope===e?r.splice(n,1):n++;S()===e&&A(t||"all")},getPressedKeyCodes:function(){return g.slice(0)},isPressed:function(e){return"string"==typeof e&&(e=O(e)),-1!==g.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,r=t.tagName,n=!0;return!t.isContentEditable&&("INPUT"!==r&&"TEXTAREA"!==r&&"SELECT"!==r||t.readOnly)||(n=!1),n},trigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(v).forEach((function(r){var n=v[r].find((function(r){return r.scope===t&&r.shortcut===e}));n&&n.method&&n.method()}))},unbind:function(e){if(void 0===e)Object.keys(v).forEach((function(e){return delete v[e]}));else if(Array.isArray(e))e.forEach((function(e){e.key&&k(e)}));else if("object"==typeof e)e.key&&k(e);else if("string"==typeof e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=r[0],a=r[1];"function"==typeof o&&(a=o,o=""),k({key:e,scope:o,method:a,splitKey:"+"})}},keyMap:p,modifier:h,modifierMap:m};for(var I in C)Object.prototype.hasOwnProperty.call(C,I)&&(P[I]=C[I]);if("undefined"!=typeof window){var T=window.hotkeys;P.noConflict=function(e){return e&&window.hotkeys===P&&(window.hotkeys=T),P},window.hotkeys=P}P.filter=function(){return!0};var L=function(e,t){var r=e.target,n=r&&r.tagName;return Boolean(n&&t&&t.includes(n))},D=function(e){return L(e,["INPUT","TEXTAREA","SELECT"])};function N(e,t,r,n){r instanceof Array&&(n=r,r=void 0);var o=r||{},i=o.enableOnTags,c=o.filter,l=o.keyup,u=o.keydown,s=o.filterPreventDefault,f=void 0===s||s,d=o.enabled,p=void 0===d||d,h=o.enableOnContentEditable,m=void 0!==h&&h,y=Object(a.useRef)(null),v=Object(a.useCallback)((function(e,r){var n,o;return c&&!c(e)?!f:!!(D(e)&&!L(e,i)||null!=(n=e.target)&&n.isContentEditable&&!m)||!!(null===y.current||document.activeElement===y.current||null!=(o=y.current)&&o.contains(document.activeElement))&&(t(e,r),!0)}),n?[y,i,c].concat(n):[y,i,c]);return Object(a.useEffect)((function(){if(p)return l&&!0!==u&&(r.keydown=!1),P(e,r||{},v),function(){return P.unbind(e,v)};P.unbind(e,v)}),[v,e,p]),y}P.isPressed;function R(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function F(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],o=t[1],a=t.slice(2);return N.apply(void 0,[n,function(){var e;null!==(e=document.activeElement)&&void 0!==e&&e.closest('[contenteditable="true"]')||o.apply(void 0,arguments)}].concat(R(a)))}var B=r(43),q=r(261),z=r(5351),G=r(76),U=r(32),W=r(4043),V=r(3982),H=r(287),K=r(5361),Y=r(5397),Q=r(96),Z="index-module_present_RJR62",X="index-module_btn_nQfFi",J="index-module_popover_oOM-o",$="index-module_item_8jiGP",ee="index-module_hotkey_ASfiW";function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ce={overlayClassName:"index-module_tooltip_-a6S+",placement:"bottom",title:i.a.createElement(i.a.Fragment,null,__("演示")+__("：")+__("P")),trigger:["hover"]};function le(e){var t=e.onClick;function r(e){e.preventDefault(),null==t||t()}return F(c.ua.macos?"⌘+shift+p,p":"ctrl+shift+p,p",r),i.a.createElement(o.a,ce,i.a.createElement("button",{type:"button","data-aspm-click":"d129827",className:X,onClick:r},i.a.createElement(B.b,{name:"present",width:20,height:20})))}function ue(e){var t=e.onClick,r=e.onEdit,o=e.canUpdate,l=ae(Object(a.useState)(!1),2),u=l[0],s=l[1],f=window.appData.isYuque;function d(e){e.preventDefault(),s(!1),null==t||t()}function p(){s(!1),null==t||t()}return F(c.ua.macos?"⌘+shift+p,p":"ctrl+shift+p,p",d),Object(a.useEffect)((function(){return U.c&&G.i.on(G.a,p),function(){G.i.off(G.a,p)}}),[]),i.a.createElement(n.a,{visible:u,onVisibleChange:function(e){return s(e)},overlayClassName:J,content:i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:$,onClick:d},i.a.createElement("span",null,i.a.createElement(B.b,{name:"present",width:20,height:20}),__("开始演示")),i.a.createElement("span",{className:ee},__("P"))),o&&i.a.createElement("div",{className:$,onClick:function(){s(!1),r()}},i.a.createElement("span",null,i.a.createElement(B.b,{name:"icon-edit-pagination",width:20,height:20}),__("编辑演示分页"))),!f&&i.a.createElement("div",{className:$},i.a.createElement("a",{href:"dingtalk://dingtalkclient/action/focus_start_projection",target:"_blank"},i.a.createElement(B.b,{name:"icon-cast-screen",width:20,height:20}),__("发起演示投屏")))),trigger:"hover",placement:"bottomRight"},i.a.createElement("button",{type:"button","data-aspm-click":"d129827",id:"present-btn","data-testid":"PresentButton:present-btn",className:X,onClick:d},i.a.createElement(B.b,{name:"present",width:20,height:20})))}var se=function(e){var t=e.doc,r=e.button,n=e.getDocContent,o=e.canUpdate,c=ae(Object(a.useState)(!1),2),u=c[0],s=c[1],f=ae(Object(a.useState)(t.content),2),d=f[0],p=f[1],h=Object(W.b)(),m=h.editMode,y=h.setEditMode,v=Object(a.useCallback)((function(){var e,t;(s(!1),U.c)&&(null===(e=window.YuqueDesktopAppJSBridge)||void 0===e||null===(t=e.ipcSend)||void 0===t||t.call(e,{channel:U.a.CURRENT_WINDOW.UNSET_FULL_SCREEN,options:{}}))}),[]),b=Object(a.useCallback)((function(){var e,t,r;n&&p(n()),s(!0),e=document.body,U.c?null===(t=window.YuqueDesktopAppJSBridge)||void 0===t||null===(r=t.ipcSend)||void 0===r||r.call(t,{channel:U.a.CURRENT_WINDOW.SET_FULL_SCREEN,options:{}}):(e.requestFullScreen=e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen,e.requestFullScreen&&e.requestFullScreen())}),[]),g=Object(a.useCallback)((function(){U.c&&Object(V.a)(t.slug)&&Object(V.b)(t.slug),y(!0),Object(H.a)("start","presentButton")}),[t.id]),w=Object(a.useCallback)((function(){var e=Object(K.c)(t.id,Y.a);Q.a.set(e,Y.c.slideshow),m||g(),window.dispatchEvent(new CustomEvent("PresentEditSideBar.visibleChange",{detail:{visible:!0}}))}),[m]),_=Object(l.useLocation)().hash,E=i.a.useMemo((function(){return _.slice(1)}),[_]);return i.a.createElement("div",{className:Z},i.a.createElement(r,{onClick:b,onEdit:w,canUpdate:o}),u&&i.a.createElement(z.b,{headingId:E,doc:ne(ne({},t),{},{content:d}),onCancel:v}))},fe=function(e){var t,r=e.doc,n=e.getDocContent,o=null===(t=r.abilities)||void 0===t?void 0:t.update;return i.a.createElement(q.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return i.a.createElement(se,{doc:r,button:le,canUpdate:o})}},i.a.createElement(se,{doc:r,button:ue,getDocContent:n,canUpdate:o}))};fe.displayName="ExposedPresentButton";t.b=fe},5736:function(e,t,r){"use strict";t.a={container:"GiveUp-module_container_dI-0v",contentBanner:"GiveUp-module_contentBanner_hjbzw",content:"GiveUp-module_content_k3omL",memberCard:"GiveUp-module_memberCard_Z3NMy",memberCardName:"GiveUp-module_memberCardName_7WXom",memberCardCoreRight:"GiveUp-module_memberCardCoreRight_pstis",memberCardRight:"GiveUp-module_memberCardRight_rm5KU",footer:"GiveUp-module_footer_AFqes",footerAction:"GiveUp-module_footerAction_-Juk4",actionBtn:"GiveUp-module_actionBtn_dS0B5"}},5744:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l.a}));var n=r(0),o=r.n(n),a=r(5720),i=r(5845);function c(e){var t=Object(n.useMemo)((function(){return{sidePanelManager:new a.a}}),[]);return o.a.createElement(i.a.Provider,{value:t},e.children)}var l=r(5636)},5754:function(e,t,r){"use strict";var n=r(426);r.d(t,"a",(function(){return n.b}))},5756:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));r(144);var n=r(60),o=(r(37),r(8)),a=r(0),i=r(33),c=r(202),l=r(453),u=function(e){var t,r,u=e.doc,s=e.book,f=e.group,d=Object(i.useHistory)(),p=a.useMemo((function(){var e,t;return Object(c.c)({type:"book",target:s,group:f})!==l.PRIVACY.private?null!==(t=s.abilities)&&void 0!==t&&t.read_private?__("当前文档归属公开知识库，你和游客都可查看完整的知识库目录"):__("当前文档归属公开知识库，你可查看完整的知识库目录"):null!==(e=s.abilities)&&void 0!==e&&e.read_private?__("你拥有知识库权限，可回到知识库目录中查看，游客不可见该功能"):void 0}),[s,f]),h=a.createElement(o.a,{onClick:function(){var e=new URLSearchParams(d.location.search);e.delete("singleDoc"),d.push({pathname:d.location.pathname,search:"?".concat(e.toString())}),window.location.reload()}},null!==(t=s.abilities)&&void 0!==t&&t.read||null===(r=u.abilities)||void 0===r||!r.update?__("回到知识库"):__("查看原始文档"));return p?a.createElement(n.a,{placement:"bottom",title:p||""},h):h}},5826:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r(0),o=r(5194),a=r(189),i=r(5482),c=(r(44),r(10)),l=r(52);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(){s=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",m="suspendedYield",y="executing",v="completed",b={};function g(){}function w(){}function _(){}var E={};f(E,i,(function(){return this}));var O=Object.getPrototypeOf,A=O&&O(O(L([])));A&&A!==r&&n.call(A,i)&&(E=A);var S=_.prototype=g.prototype=Object.create(E);function k(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var l=p(e[o],e,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==u(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=h;return function(a,i){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var u=p(t,r,n);if("normal"===u.type){if(o=n.done?v:m,u.arg===b)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=v,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var a=p(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,b;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,b):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(u(t)+" is not iterable")}return w.prototype=_,o(S,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,f(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(x.prototype),f(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),f(S,l,"Generator"),f(S,i,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function f(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){f(a,n,o,i,c,"next",e)}function c(e){f(a,n,o,i,c,"throw",e)}i(void 0)}))}}var p=["docId","currentUser"];var h=function(e){var t=e.docId,r=(e.currentUser,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,p)),o=function(e){var t=window.appData.me;return{handleShare:n.useCallback(d(s().mark((function r(){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l.a.docs.shareToPersonalFeed({id:e});case 2:c.a.success({content:n.createElement(n.Fragment,null,__("分享成功 "),n.createElement("a",{target:"_blank","data-desktoptarget":"_browser",href:"".concat(window.location.origin,"/").concat(t.login)},__("去查看")))});case 3:case"end":return r.stop()}}),r)}))),[e])}}(t),a=o.handleShare;return n.createElement(n.Fragment,null,n.createElement(i.a,{type:"doc",restProps:r,overlayClassName:"share-note-button",onChangeShareStatus:a}))},m=function(e){return n.createElement(a.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return n.createElement(o.a,{role:"alternative",iconName:"digitalgarden",tooltip:__("我的花园")})}},n.createElement(h,e))}},5842:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o}));var n=function(){return window.self!==window.top};function o(e){var t=document.querySelector("#".concat(e.id));if(t)return t;var r=document.createElement("div");return r.id=e.id,document.body.append(r),r}},5843:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0),o=r.n(n).a.createContext({ref:{current:null}})},5844:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n=function(){return null};function o(){}},5845:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(0),o=r.n(n).a.createContext(null)},5848:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return he}));r(59);var n=r(30),o=(r(1041),r(732)),a=(r(144),r(60)),i=r(0),c=r.n(i),l=r(5),u=r.n(l),s=r(596),f=r(845),d=r(43),p=r(229),h=r(394),m=r(1529),y={statisticHead:"style-module_statisticHead_M8b22",interactHead:"style-module_interactHead_aw+2s",visitorsHead:"style-module_visitorsHead_6oKqL",title:"style-module_title_XUMRT",iconWrapper:"style-module_iconWrapper_vYWpL",tipIcon:"style-module_tipIcon_aQ3h4",download:"style-module_download_U1-mK",downloadAreaIcon:"style-module_downloadAreaIcon_tXk4f",downloadTxt:"style-module_downloadTxt_FH9kd",statisticBody:"style-module_statisticBody_1ft2Y",interactBody:"style-module_interactBody_V1bDl",visitorsBody:"style-module_visitorsBody_jTS0T",basicInfo:"style-module_basicInfo_wa0uq",row2Col2Item:"style-module_row2Col2Item_qtrTw",row2Col2Clickable:"style-module_row2Col2Clickable_ZlaMW",rightArrow:"style-module_rightArrow_6Rftv",name:"style-module_name_IyunN",value:"style-module_value_NDE+i",authorInfo:"style-module_authorInfo_UtZn1",row2Col1Item:"style-module_row2Col1Item_ECpAN",creatorName:"style-module_creatorName_-uWSQ",longValueItem:"style-module_longValueItem_Q6CK9",infoValueWrapper:"style-module_infoValueWrapper_+ZcEA",infoItemValue:"style-module_infoItemValue_DV6Qa",interactInfo:"style-module_interactInfo_UwF70",row1Col4Item:"style-module_row1Col4Item_ay5bD",row1Col4Clickable:"style-module_row1Col4Clickable_20wcl",active:"style-module_active_AN7V9",pv:"style-module_pv_VqoM8",uv:"style-module_uv_4GFCm",userListContainer:"style-module_userListContainer_BPEvb",userColumnListWrapper:"style-module_userColumnListWrapper_vogM8",empty:"style-module_empty_KEDVQ",userColumnList:"style-module_userColumnList_RFhhE",userItem:"style-module_userItem_g7TOe",userItemLeft:"style-module_userItemLeft_zhOUj",userItemNameWrapper:"style-module_userItemNameWrapper_LdzE2",userItemName:"style-module_userItemName_8FJg8",userTagList:"style-module_userTagList_ES-d5",tag:"style-module_tag_Cxaqq",commentTag:"style-module_commentTag_3E6h-",likeTag:"style-module_likeTag_xe+8Z",frequentVisitTag:"style-module_frequentVisitTag_x1wae",paginationWrapper:"style-module_paginationWrapper_j7srn"},v=r(532),b=r(1012),g=r.n(b),w=r(331),_=r.n(w),E=r(238),O=r.n(E),A=r(2840),S=r(2839),k=r(322),x=r(52),j=r(5976),P=r(5719),C=(r(44),r(10)),I=r(1027),T=r(2807),L=r.n(T);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function N(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=["creator","contributors","last_editor"],M=["creator","contributors","last_editor"];function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function B(){B=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(I([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==F(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(F(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function q(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){q(a,n,o,i,c,"next",e)}function c(e){q(a,n,o,i,c,"throw",e)}i(void 0)}))}}function G(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return V(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function H(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=F(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Z=4;function X(){var e=Object(P.b)().showHistory,t=Object(v.f)((function(e){var t=e.doc,r=t.type,n=t.id,o=t.user,a=t.contributors,i=t.last_editor,c=t.hits,l=t.created_at,u=t.content_updated_at,s=t.likes_count,f=t.word_count,d=e.litecomment.comments,p=e.me,h=d.sort((function(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()})),m=O()(h,"user.id").map((function(e){var t=e.user,r=e.created_at;return Y(Y({},t),{},{time:r})}));return{statisticDoc:{id:n,creator:o,contributors:a,last_editor:i,pv:c,created_at:l,content_updated_at:u,likes_count:s,word_count:f,comments_count:d.length,type:r},commentUsers:m,me:p}}),(function(e,t){var r=e.statisticDoc,n=r.creator,o=r.contributors,a=r.last_editor,i=H(r,R),c={creatorId:null==n?void 0:n.id,contributorsCount:o.length,lastEditor:null==a?void 0:a.id},l=t.statisticDoc,u=l.creator,s=l.contributors,f=l.last_editor,d=H(l,M),p={creatorId:null==u?void 0:u.id,contributorsCount:s.length,lastEditor:null==f?void 0:f.id};return e.commentUsers.length===t.commentUsers.length&&g()(c,p)&&g()(i,d)})),r=t.statisticDoc,n=t.commentUsers,o=t.me,a=r.id,l=r.contributors,u=r.last_editor,s=r.creator,f=r.pv,d=r.comments_count,p=r.likes_count,h=r.word_count,m=r.content_updated_at,y=r.created_at,b=r.type,w=U(Object(i.useState)(0),2),E=w[0],T=w[1],D=U(Object(i.useState)(0),2),F=D[0],q=D[1],W=U(Object(i.useState)(0),2),V=W[0],K=W[1],Q=U(Object(i.useState)([]),2),X=Q[0],J=Q[1],$=U(Object(i.useState)([]),2),ee=$[0],te=$[1],re=U(Object(i.useState)([]),2),ne=re[0],oe=re[1],ae=U(Object(i.useState)({frequentVisitMap:{},commentTagMap:{},likeTagMap:{}}),2),ie=ae[0],ce=ae[1],le=U(Object(i.useState)("uv"),2),ue=le[0],se=le[1],fe=U(Object(i.useState)([]),2),de=fe[0],pe=fe[1],he=c.a.useMemo((function(){var e=l.findIndex((function(e){return(null==e?void 0:e.name)===(null==u?void 0:u.name)})),t=G(l);-1!==e&&t.splice(e,1);var r=t;return u&&r.unshift(u),r.map((function(e){return null==e?void 0:e.name})).join("、")}),[l,u]),me=l.length>=2?" ".concat(__("{count}人",{count:l.length})):"";return Object(i.useEffect)((function(){function e(){return(e=z(B().mark((function e(){var t;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.find)({doc_id:a,doc_type:"Doc",limit:100});case 2:t=e.sent,T(t.length);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return t=z(B().mark((function e(){var t,r,n,o;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,r=[],n=0;case 3:if(!(n<=1e3&&t)){e.next=12;break}return e.next=6,Object(S.users)({action_type:"like",target_type:"Doc",target_id:a,limit:200,offset:n},{useOriginResp:!0});case 6:o=e.sent,t=o.meta.hasMore,r=[].concat(G(r),G(o.data.map((function(e){return Y(Y({},e),{},{time:e.action_created_at})}))));case 9:n+=200,e.next=3;break;case 12:oe(r);case 13:case"end":return e.stop()}}),e)}))),t.apply(this,arguments)}function r(){return(r=z(B().mark((function e(){var t;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.pvList)({id:a});case 2:t=e.sent,J(t.recentVisitHistory.map((function(e){return Y(Y({},e.user),{},{time:e.updated_at})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=z(B().mark((function e(){var t;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.uvList)({id:a});case 2:t=e.sent,K(t.uv),te(t.recentVisitors.map((function(e){return Y(Y({},e.user),{},{time:e.updated_at})})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){r.apply(this,arguments)}(),function(){n.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[]),Object(i.useEffect)((function(){q(Object(j.a)()||h||0)}),[]),Object(i.useEffect)((function(){"pv"===ue?pe(X):"uv"===ue?pe(ee):"comment"===ue?pe(n):"like"===ue&&pe(ne)}),[ue,X,ee,n,ne]),Object(i.useEffect)((function(){var e=_()(X,(function(e){return e.id})),t=Object.keys(e).reduce((function(t,r){return e[r].length>Z&&(t[e[r][0].id]=!0),t}),{});delete t[o.id],ce(Y(Y({},ie),{},{frequentVisitMap:t}))}),[X]),Object(i.useEffect)((function(){var e=ne.reduce((function(e,t){return e[t.id]=!0,e}),{});ce(Y(Y({},ie),{},{likeTagMap:e}))}),[ne]),Object(i.useEffect)((function(){var e=n.reduce((function(e,t){return e[t.id]=!0,e}),{});ce(Y(Y({},ie),{},{commentTagMap:e}))}),[n]),{type:b,wordCount:F,versionCount:E,contributorsStr:he,contributorSuffix:me,contentUpdatedAt:m,createdAt:y,pv:f,uv:V,commentCount:d,likeCount:p,userListDataSource:de,setUserListDataSource:pe,creator:s,selectedType:ue,setSelectedType:se,tagMaps:ie,showHistory:e,handleDownloadVisitors:function(){!function(e){var t=e.filename,r=e.dataSource;if(0===r.length)return C.a.warning(__("暂无数据可导出"));var n=r.map((function(e){return N(N(N({},__("用户名"),e.name),__("时间"),e.time),__("工号"),e.work_id)})),o=L.a.unparse(n);Object(I.downloadCsvFile)(o,t)}({dataSource:de,filename:__("访问人员信息")}),x.a.logs.activity({type:"Doc",action:"download_visit_detail",id:a,name:"total:".concat(ee.length)})}}}var J=r(5977);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function re(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(){}function oe(e){var t=e.name,r=e.value,n=e.clickable,o=e.onClick,a=void 0===o?ne:o;return c.a.createElement("div",{className:u()(y.row2Col2Item,re({},y.row2Col2Clickable,n)),onClick:a},c.a.createElement("div",null,c.a.createElement("div",{className:y.value},r),c.a.createElement("div",{className:y.name},t)),n&&c.a.createElement(d.b,{name:"ArrowRight",className:y.rightArrow}))}function ae(e){var t=e.wordCount,r=e.versionCount,n=e.contentUpdatedAt,o=e.createdAt,a=e.showHistory,i=e.type;return c.a.createElement("div",{className:y.basicInfo},"Doc"===i?c.a.createElement(oe,{name:__("字数"),value:t}):null,"Table"!==i?c.a.createElement(oe,{name:__("历史版本#docStatistic"),value:r>99?"99+":r,clickable:!0,onClick:function(){a("all")}}):null,c.a.createElement(oe,{name:__("更新时间#docStatistic"),value:n}),c.a.createElement(oe,{name:__("创建时间#docStatistic"),value:o}))}function ie(e){var t=e.name,r=e.value,n=e.suffix,o=Object(J.a)(),i=o.hasEllipsis,l=o.ellipsisDomRef,u=c.a.createElement("div",{className:y.infoValueWrapper},c.a.createElement("div",{ref:l,className:y.infoItemValue},r),c.a.createElement("div",null,n));return c.a.createElement("div",{className:y.longValueItem},i?c.a.createElement(a.a,{title:r,placement:"bottomRight"},u):u,c.a.createElement("div",{className:y.name},t))}function ce(e){var t=e.name,r=e.value;return c.a.createElement("div",{className:y.row2Col1Item},c.a.createElement("div",{className:y.value},r),c.a.createElement("div",{className:y.name},t))}function le(e){var t=e.creator,r=e.contributorsStr,n=e.contributorSuffix;return t?c.a.createElement("div",{className:y.authorInfo},c.a.createElement(ce,{name:c.a.createElement("div",{style:{marginTop:6}},__("创建者")),value:c.a.createElement(m.a,{user:t},c.a.createElement("div",null,c.a.createElement(h.a,{src:t.avatar_url,size:20,name:t.name}),c.a.createElement("span",{className:y.creatorName},t.name)))}),c.a.createElement(ie,{name:__("编辑者"),value:r,suffix:n})):null}function ue(e){var t=e.name,r=e.value,n=e.clickable,o=e.onClick,a=void 0===o?ne:o,i=e.active;return c.a.createElement("div",{className:u()(y.row1Col4Item,re(re({},y.row1Col4Clickable,n),y.active,i)),onClick:a},c.a.createElement("div",{className:y.value},r),c.a.createElement("div",{className:y.name},t))}function se(e){var t=e.pv,r=e.commentCount,n=e.likeCount;return c.a.createElement("div",{className:y.interactInfo},c.a.createElement(ue,{name:c.a.createElement("div",{className:y.pv},__("阅读数"),c.a.createElement(a.a,{title:__("去除了编辑者的访问次数")},c.a.createElement("div",{className:y.iconWrapper},c.a.createElement(d.b,{name:"ActionDocInfo",className:y.tipIcon})))),value:t}),c.a.createElement(ue,{name:__("评论数"),value:r}),c.a.createElement(ue,{name:__("点赞数"),value:n}))}function fe(e){var t=e.type;return"comment"===t?c.a.createElement("span",{className:u()(y.tag,y.commentTag)},__("评过")):"like"===t?c.a.createElement("span",{className:u()(y.tag,y.likeTag)},__("赞过")):"frequentVisit"===t?c.a.createElement("span",{className:u()(y.tag,y.frequentVisitTag)},__("常来")):null}function de(e){var t=e.dataSource,r=e.tagMaps,n=r.frequentVisitMap,a=r.commentTagMap,l=r.likeTagMap,u=10,s=ee(Object(i.useState)([]),2),f=s[0],d=s[1],v=ee(Object(i.useState)(1),2),b=v[0],g=v[1],w=t.length;Object(i.useEffect)((function(){var e=t.slice((b-1)*u,b*u);d(e)}),[b,t]);var _=[f.slice(0,5),f.slice(5,u)],E=w>u,O=0===w;return c.a.createElement("div",{className:y.userListContainer},c.a.createElement("div",{className:y.userColumnListWrapper},O?c.a.createElement("p",{className:y.empty},__("暂无数据")):_.map((function(e,t){return c.a.createElement("div",{className:y.userColumnList,key:t},e.map((function(e){var t=e.id,r=[{type:"frequentVisit",did:n[t]},{type:"like",did:l[t]},{type:"comment",did:a[t]}];return c.a.createElement("div",{className:y.userItem,key:t},c.a.createElement("div",{className:y.userItemLeft},c.a.createElement(m.a,{user:e,className:y.userItemNameWrapper},c.a.createElement(h.a,{src:e.avatar_url,size:20,name:e.name}),c.a.createElement("span",{className:y.userItemName},e.name)),c.a.createElement("span",{className:y.userTagList},r.map((function(e){return e.did?c.a.createElement(fe,{type:e.type}):null})))),c.a.createElement(p.a,{time:e.time}))})))}))),c.a.createElement("div",{className:y.paginationWrapper},E&&c.a.createElement(o.a,{className:y.pagination,size:"small",current:b,total:w,pageSize:u,onChange:function(e){g(e)}})))}function pe(e){var t=X(),r=t.type,n=t.wordCount,o=t.versionCount,i=t.contributorsStr,l=t.contributorSuffix,u=t.createdAt,p=t.contentUpdatedAt,h=t.creator,m=t.pv,v=t.commentCount,b=t.likeCount,g=t.userListDataSource,w=t.tagMaps,_=t.showHistory,E=t.handleDownloadVisitors,O={type:r,wordCount:n,versionCount:o,contentUpdatedAt:f.default.format(p),createdAt:f.default.format(u),showHistory:_,hide:e.hide},A={creator:h,contributorsStr:i,contributorSuffix:l},S={pv:m,commentCount:v,likeCount:b},k=Object(s.b)().isYuque;return c.a.createElement("div",null,c.a.createElement("div",{className:y.statisticHead},c.a.createElement("span",{className:y.title},__("统计详情"))),c.a.createElement("div",{className:y.statisticBody},c.a.createElement(ae,O),c.a.createElement(le,A)),c.a.createElement("div",{className:y.interactHead},c.a.createElement("span",{className:y.title},__("阅读数据"))),c.a.createElement("div",{className:y.interactBody},c.a.createElement(se,S)),c.a.createElement("div",{className:y.visitorsHead},c.a.createElement("span",{className:y.title},__("访问人员"),k?c.a.createElement(a.a,{title:__("仅显示空间内部访问成员的明细")},c.a.createElement("div",{className:y.iconWrapper},c.a.createElement(d.b,{name:"ActionDocInfo",className:y.tipIcon}))):null),c.a.createElement("div",{className:y.download,onClick:E},c.a.createElement(d.b,{name:"Download",className:y.downloadAreaIcon}),c.a.createElement("span",{className:y.downloadTxt},__("下载明细")))),c.a.createElement("div",{className:y.visitorsBody},c.a.createElement(de,{dataSource:g,tagMaps:w})))}function he(e){var t=e.visible,r=e.hide;return c.a.createElement(n.a,{centered:!0,style:{paddingBottom:0},width:720,zIndex:1e3,footer:null,visible:t,onCancel:r},t&&c.a.createElement(pe,{hide:r}))}},5854:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return l}));var n=r(0),o=r.n(n);var a=Object(n.createContext)({isShare:!1}),i={isShare:!1};function c(e){return o.a.createElement(a.Provider,{value:i},e.children)}function l(){return Object(n.useContext)(a)}},5858:function(e,t,r){"use strict";r(37);var n=r(8),o=r(0),a=r.n(o),i=r(5736);t.a=function(e){var t=e.handleConfirm,r=e.handleClose,o=e.title,c=void 0===o?__("恭喜你完成新手任务，获得 30 天会员奖励 🎉"):o;return a.a.createElement("div",{className:i.a.container},a.a.createElement("img",{className:i.a.contentBanner,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*nBOWQqHYSqsAAAAAAAAAAAAADvuFAQ/original",alt:""}),a.a.createElement("div",{className:i.a.content,"data-testid":"doc-note-limit-content"},a.a.createElement("h1",null,c),a.a.createElement("p",null,__("会员享有以下核心权益，快去体验吧！")),a.a.createElement("div",{className:i.a.memberCard},a.a.createElement("p",{className:i.a.memberCardRight},__("无限文稿数")),a.a.createElement("p",{className:i.a.memberCardRight},__("无限知识库数")),a.a.createElement("p",{className:i.a.memberCardRight},__("更多格式、更大附件")),a.a.createElement("p",{className:i.a.memberCardRight},__("安全等知识库高级功能")),a.a.createElement("p",{className:i.a.memberCardRight},__("不限期公开分享")),a.a.createElement("p",{className:i.a.memberCardRight},__("公开我的花园"))),a.a.createElement("div",{className:i.a.footer},a.a.createElement("div",{className:i.a.footerAction},a.a.createElement(n.a,{"data-testid":"buy-button",className:i.a.actionBtn,onClick:t},__("立即延长会员")),a.a.createElement(n.a,{className:i.a.actionBtn,onClick:r,type:"primary"},__("知道了"))))))}},5896:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(62),o=r.n(n),a=(r(0),r(228)),i=r.n(a);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var s=o()("biz.doc_events"),f={rename:"rename"},d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._event=new i.a},(t=[{key:"emit",value:function(e,t){if(!Object.keys(f).includes(e))throw new Error("event type ".concat(e," not support."));if(!t.doc_id)throw new Error("emit data missing data_id, data: ".concat(JSON.stringify(t)));s("".concat(e," emitted")),this._event.emit(e,t)}},{key:"off",value:function(e,t){this._event.off(e,t)}},{key:"on",value:function(e,t){if(!f[e])throw new Error("event type ".concat(e," not support."));this._event.on(e,t)}}])&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),p=new d},5903:function(e,t,r){"use strict";r.d(t,"b",(function(){return O})),r.d(t,"a",(function(){return s}));var n=r(0),o=r.n(n),a=r(295),i=r(33),c=r(3881),l=r(5636),u=r(5844),s={Outline:"Outline",WordingComment:"WordingComment",SideComment:"SideComment",MoreFeature:"MoreFeature",EditDocMeta:"EditDocMeta",Review:"Review",DocStyle:"DocStyle"},f={PanelLayoutChange:"PanelLayoutChange"},d={panel:"sidePanel-module_panel_Vr-DC",toggleShow:"sidePanel-module_toggleShow_o7eFp",toggleHide:"sidePanel-module_toggleHide_BreQk"};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(null,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var w=Object(a.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(9),r.e(11),r.e(1328)]).then(r.bind(null,7230))}),{suspense:!0}),_=Object(a.b)((function(){return Promise.all([r.e(3),r.e(0),r.e(1),r.e(7),r.e(1369)]).then(r.bind(null,7253))}),{suspense:!0}),E=305;function O(e){var t=Object(i.useParams)().doc,r=Object(l.a)().sidePanelManager,a=b(Object(n.useState)({visible:!1,currentPanel:null,panelProps:{},containerStyle:{}}),2),s=a[0],p=a[1],h=s.visible,y=s.currentPanel,g=s.panelProps,O=s.containerStyle,A=Object(n.useRef)(null),S=function(e){p(e)},k=function(e){r.emitter.emit(f.PanelLayoutChange,{width:e.width})},x=y?r.getPanelContent(y):u.a,j=o.a.createElement(x,v({panel:y,hide:function(e){r.hide(e)},maxWidth:E,onLayout:k},g));Object(n.useEffect)((function(){r.setRenderer(S)}),[r]),Object(n.useEffect)((function(){h||k({width:0})}),[h]),Object(n.useEffect)((function(){r.flushAll(),r.hide(),r.registerContent("MoreFeature",w),r.registerContent("SideComment",_)}),[t,r]),Object(n.useEffect)((function(){var e=function(e){var t,r,n,o=e.detail,a=o.isFullscreen,i=(o.engine,o.editorNode);a&&null!==(t=A.current)&&void 0!==t&&t.contains(i)?null===(r=A.current)||void 0===r||r.classList.add("contain-editor-fullscreen"):null===(n=A.current)||void 0===n||n.classList.remove("contain-editor-fullscreen")};return window.addEventListener("neEditorFullscreenStatusChange",e),function(){window.removeEventListener("neEditorFullscreenStatusChange",e)}}),[]),Object(n.useEffect)((function(){return function(){r.flushAll(),r.hide()}}),[r]);var P=Object(c.b)().rightSidebarWidth;return o.a.createElement("div",{id:"sidePanel",ref:A,className:d.panel,style:m(m({},O),{},{right:P})},j)}r(5720)},5914:function(e,t,r){"use strict";r(37);var n=r(8),o=(r(144),r(60)),a=(r(59),r(30)),i=r(0),c=r.n(i),l=r(2),u=r.n(l),s=r(3739),f=r(3784),d=r(3607),p=r(32);var h=function(e,t){Object(i.useEffect)((function(){var r=new URLSearchParams(window.location.search);if("doc_embed"!==r.get("view")&&!r.get("inner")&&"Thread"!==t.type)return t.abilities&&t.abilities.update&&Object(f.a)(d.e.edit.key,(function(r){var n=r.target;"INPUT"!==n.tagName&&(n.isContentEditable&&!n.classList.contains("textarea-cell")||p.c&&"markdown"===(t.origin_format||t.format)||("Sheet"===t.type||"Table"===t.type?s.c.saveSheetPosition(t.id):s.c.saveReadPosition(t.id),window.location.href="/".concat(e.namespace,"/").concat(t.slug,"/edit")))})),function(){f.a.unbind(d.e.edit.key)}}),[t.id,e.id])};function m(e){var t=e.book,r=e.doc,i="Sheet"===r.type||"Table"===r.type;return h(t,r),c.a.createElement(n.a,{type:"primary",style:{marginRight:8},onClick:function(){p.c&&"markdown"===(r.origin_format||r.format)?a.a.confirm({centered:!0,content:c.a.createElement(c.a.Fragment,null,__("抱歉，桌面端暂不支持 Markdown 文档编辑器")),okText:__("去网页编辑"),cancelText:__("取消"),onOk:function(){window.YuqueDesktopAppJSBridge.openExternalLink(window.location.href)}}):(i?s.c.saveSheetPosition(r.id):s.c.saveReadPosition(r.id),window.location.href="/".concat(t.namespace,"/").concat(r.slug,"/edit").concat(i?window.location.hash:""))}},c.a.createElement(o.a,{title:c.a.createElement("p",{style:{textAlign:"center"}},__("编辑")+__("：")+__("E")),placement:"bottom"},__("编辑")))}m.propTypes={book:u.a.object.isRequired,doc:u.a.object.isRequired};t.a=m},5976:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(){return function(e,t,r){if(window.__engine&&window.__engine.execCommand)return window.__engine[e](t,r)}("queryCommandValue","wordCount")}},5977:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(0);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(){var e=o(Object(n.useState)(!1),2),t=e[0],r=e[1],a=Object(n.useRef)(null);return Object(n.useEffect)((function(){a.current&&a.current.clientWidth!==a.current.scrollWidth&&r(!0)}),[]),{ellipsisDomRef:a,hasEllipsis:t}}},5983:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p})),r.d(t,"DocStatisticModal",(function(){return h.default})),r.d(t,"DocStatisticProvider",(function(){return s})),r.d(t,"useDocStatisticStore",(function(){return f}));var n=r(0),o=r.n(n),a=r(295);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(){}var u=Object(n.createContext)({visible:!1,hide:l,show:l});function s(e){var t=i(Object(n.useState)(!1),2),r=t[0],a=t[1],c=Object(n.useMemo)((function(){return{visible:r,hide:function(){a(!1)},show:function(){a(!0)}}}),[r]);return o.a.createElement(u.Provider,{value:c},e.children)}function f(){return Object(n.useContext)(u)}var d=Object(a.c)((function(){return Promise.resolve().then(r.bind(null,5848))}),{suspense:!0});function p(){var e=f(),t=e.visible,r=e.hide;return Object(n.useEffect)((function(){t&&d.start()}),[t]),o.a.createElement(d,{key:t,visible:t,hide:r})}var h=r(5848)},6113:function(e,t,r){"use strict";r(59);var n=r(30),o=(r(144),r(60)),a=(r(37),r(8)),i=(r(44),r(10)),c=r(0),l=r.n(c),u={};!function e(t,r,n,o){var a=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),i="function"==typeof Path2D&&"function"==typeof DOMMatrix,c=function(){if(!t.OffscreenCanvas)return!1;var e=new OffscreenCanvas(1,1),r=e.getContext("2d");r.fillRect(0,0,1,1);var n=e.transferToImageBitmap();try{r.createPattern(n,"no-repeat")}catch(e){return!1}return!0}();function l(){}function u(e){var n=r.exports.Promise,o=void 0!==n?n:t.Promise;return"function"==typeof o?new o(e):(e(l,l),null)}var s,f,d,p,h,m,y,v,b,g,w,_=(s=c,f=new Map,{transform:function(e){if(s)return e;if(f.has(e))return f.get(e);var t=new OffscreenCanvas(e.width,e.height);return t.getContext("2d").drawImage(e,0,0),f.set(e,t),t},clear:function(){f.clear()}}),E=(h=Math.floor(1e3/60),m={},y=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(d=function(e){var t=Math.random();return m[t]=requestAnimationFrame((function r(n){y===n||y+h-1<n?(y=n,delete m[t],e()):m[t]=requestAnimationFrame(r)})),t},p=function(e){m[e]&&cancelAnimationFrame(m[e])}):(d=function(e){return setTimeout(e,h)},p=function(e){return clearTimeout(e)}),{frame:d,cancel:p}),O=(g={},function(){if(v)return v;if(!n&&a){var t=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join("\n");try{v=new Worker(URL.createObjectURL(new Blob([t])))}catch(e){return void 0!==typeof console&&"function"==typeof console.warn&&console.warn("🎊 Could not load worker",e),null}!function(e){function t(t,r){e.postMessage({options:t||{},callback:r})}e.init=function(t){var r=t.transferControlToOffscreen();e.postMessage({canvas:r},[r])},e.fire=function(r,n,o){if(b)return t(r,null),b;var a=Math.random().toString(36).slice(2);return b=u((function(n){function i(t){t.data.callback===a&&(delete g[a],e.removeEventListener("message",i),b=null,_.clear(),o(),n())}e.addEventListener("message",i),t(r,a),g[a]=i.bind(null,{data:{callback:a}})}))},e.reset=function(){for(var t in e.postMessage({reset:!0}),g)g[t](),delete g[t]}}(v)}return v}),A={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function S(e,t,r){return function(e,t){return t?t(e):e}(e&&null!=e[t]?e[t]:A[t],r)}function k(e){return e<0?0:Math.floor(e)}function x(e){return parseInt(e,16)}function j(e){return e.map(P)}function P(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:x(t.substring(0,2)),g:x(t.substring(2,4)),b:x(t.substring(4,6))}}function C(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function I(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function T(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var r=t.tick++/t.totalTicks,n=t.x+t.random*t.tiltCos,o=t.y+t.random*t.tiltSin,a=t.wobbleX+t.random*t.tiltCos,c=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-r)+")",e.beginPath(),i&&"path"===t.shape.type&&"string"==typeof t.shape.path&&Array.isArray(t.shape.matrix))e.fill(function(e,t,r,n,o,a,i){var c=new Path2D(e),l=new Path2D;l.addPath(c,new DOMMatrix(t));var u=new Path2D;return u.addPath(l,new DOMMatrix([Math.cos(i)*o,Math.sin(i)*o,-Math.sin(i)*a,Math.cos(i)*a,r,n])),u}(t.shape.path,t.shape.matrix,t.x,t.y,.1*Math.abs(a-n),.1*Math.abs(c-o),Math.PI/10*t.wobble));else if("bitmap"===t.shape.type){var l=Math.PI/10*t.wobble,u=.1*Math.abs(a-n),s=.1*Math.abs(c-o),f=t.shape.bitmap.width*t.scalar,d=t.shape.bitmap.height*t.scalar,p=new DOMMatrix([Math.cos(l)*u,Math.sin(l)*u,-Math.sin(l)*s,Math.cos(l)*s,t.x,t.y]);p.multiplySelf(new DOMMatrix(t.shape.matrix));var h=e.createPattern(_.transform(t.shape.bitmap),"no-repeat");h.setTransform(p),e.globalAlpha=1-r,e.fillStyle=h,e.fillRect(t.x-f/2,t.y-d/2,f,d),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(a-n)*t.ovalScalar,Math.abs(c-o)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):function(e,t,r,n,o,a,i,c,l){e.save(),e.translate(t,r),e.rotate(a),e.scale(n,o),e.arc(0,0,1,i,c,l),e.restore()}(e,t.x,t.y,Math.abs(a-n)*t.ovalScalar,Math.abs(c-o)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if("star"===t.shape)for(var m=Math.PI/2*3,y=4*t.scalar,v=8*t.scalar,b=t.x,g=t.y,w=5,E=Math.PI/w;w--;)b=t.x+Math.cos(m)*v,g=t.y+Math.sin(m)*v,e.lineTo(b,g),m+=E,b=t.x+Math.cos(m)*y,g=t.y+Math.sin(m)*y,e.lineTo(b,g),m+=E;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(o)),e.lineTo(Math.floor(a),Math.floor(c)),e.lineTo(Math.floor(n),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}function L(e,r){var i,c=!e,l=!!S(r||{},"resize"),s=!1,f=S(r,"disableForReducedMotion",Boolean),d=a&&!!S(r||{},"useWorker")?O():null,p=c?C:I,h=!(!e||!d)&&!!e.__confetti_initialized,m="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function y(t,r,a){for(var c,l,s,f,d,h=S(t,"particleCount",k),m=S(t,"angle",Number),y=S(t,"spread",Number),v=S(t,"startVelocity",Number),b=S(t,"decay",Number),g=S(t,"gravity",Number),w=S(t,"drift",Number),O=S(t,"colors",j),A=S(t,"ticks",Number),x=S(t,"shapes"),P=S(t,"scalar"),C=!!S(t,"flat"),I=function(e){var t=S(e,"origin",Object);return t.x=S(t,"x",Number),t.y=S(t,"y",Number),t}(t),L=h,D=[],N=e.width*I.x,R=e.height*I.y;L--;)D.push((c={x:N,y:R,angle:m,spread:y,startVelocity:v,color:O[L%O.length],shape:x[(f=0,d=x.length,Math.floor(Math.random()*(d-f))+f)],ticks:A,decay:b,gravity:g,drift:w,scalar:P,flat:C},l=void 0,s=void 0,l=c.angle*(Math.PI/180),s=c.spread*(Math.PI/180),{x:c.x,y:c.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*c.startVelocity+Math.random()*c.startVelocity,angle2D:-l+(.5*s-Math.random()*s),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:c.color,shape:c.shape,tick:0,totalTicks:c.ticks,decay:c.decay,drift:c.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*c.gravity,ovalScalar:.6,scalar:c.scalar,flat:c.flat}));return i?i.addFettis(D):(i=function(e,t,r,a,i){var c,l,s=t.slice(),f=e.getContext("2d"),d=u((function(t){function u(){c=l=null,f.clearRect(0,0,a.width,a.height),_.clear(),i(),t()}c=E.frame((function t(){!n||a.width===o.width&&a.height===o.height||(a.width=e.width=o.width,a.height=e.height=o.height),a.width||a.height||(r(e),a.width=e.width,a.height=e.height),f.clearRect(0,0,a.width,a.height),(s=s.filter((function(e){return T(f,e)}))).length?c=E.frame(t):u()})),l=u}));return{addFettis:function(e){return s=s.concat(e),d},canvas:e,promise:d,reset:function(){c&&E.cancel(c),l&&l()}}}(e,D,p,r,a),i.promise)}function v(r){var n=f||S(r,"disableForReducedMotion",Boolean),o=S(r,"zIndex",Number);if(n&&m)return u((function(e){e()}));c&&i?e=i.canvas:c&&!e&&(e=function(e){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=e,t}(o),document.body.appendChild(e)),l&&!h&&p(e);var a={width:e.width,height:e.height};function v(){if(d){var t={getBoundingClientRect:function(){if(!c)return e.getBoundingClientRect()}};return p(t),void d.postMessage({resize:{width:t.width,height:t.height}})}a.width=a.height=null}function b(){i=null,l&&(s=!1,t.removeEventListener("resize",v)),c&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,h=!1)}return d&&!h&&d.init(e),h=!0,d&&(e.__confetti_initialized=!0),l&&!s&&(s=!0,t.addEventListener("resize",v,!1)),d?d.fire(r,a,b):y(r,a,b)}return v.reset=function(){d&&d.reset(),i&&i.reset()},v}function D(){return w||(w=L(null,{useWorker:!0,resize:!0})),w}r.exports=function(){return D().apply(this,arguments)},r.exports.reset=function(){D().reset()},r.exports.create=L,r.exports.shapeFromPath=function(e){if(!i)throw new Error("path confetti are not supported in this browser");var t,r;"string"==typeof e?t=e:(t=e.path,r=e.matrix);var n=new Path2D(t),o=document.createElement("canvas").getContext("2d");if(!r){for(var a,c,l=1e3,u=l,s=l,f=0,d=0,p=0;p<l;p+=2)for(var h=0;h<l;h+=2)o.isPointInPath(n,p,h,"nonzero")&&(u=Math.min(u,p),s=Math.min(s,h),f=Math.max(f,p),d=Math.max(d,h));a=f-u,c=d-s;var m=Math.min(10/a,10/c);r=[m,0,0,m,-Math.round(a/2+u)*m,-Math.round(c/2+s)*m]}return{type:"path",path:t,matrix:r}},r.exports.shapeFromText=function(e){var t,r=1,n="#000000",o='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof e?t=e:(t=e.text,r="scalar"in e?e.scalar:r,o="fontFamily"in e?e.fontFamily:o,n="color"in e?e.color:n);var a=10*r,i=a+"px "+o,c=new OffscreenCanvas(a,a),l=c.getContext("2d");l.font=i;var u=l.measureText(t),s=Math.ceil(u.actualBoundingBoxRight+u.actualBoundingBoxLeft),f=Math.ceil(u.actualBoundingBoxAscent+u.actualBoundingBoxDescent),d=u.actualBoundingBoxLeft+2,p=u.actualBoundingBoxAscent+2;s+=4,f+=4,(l=(c=new OffscreenCanvas(s,f)).getContext("2d")).font=i,l.fillStyle=n,l.fillText(t,d,p);var h=1/r;return{type:"bitmap",bitmap:c.transferToImageBitmap(),matrix:[h,0,0,h,-s*h/2,-f*h/2]}}}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),u,!1);var s=u.exports,f=(u.exports.create,r(449)),d=r(5),p=r.n(d),h=r(43),m=r(326),y=r(34),v=r(457),b=r(124),g=r(3868),w=r(184),_=(r(116),r(38)),E=(r(132),r(27)),O=(r(711),r(356)),A=r(1299),S=r.n(A),k=r(1295),x=r.n(k),j=r(5621),P=r(5640),C="index-module_container_m-xlo",I="index-module_pageHeader_lT2OP",T="index-module_pageHeaderDesc_Bceju",L="index-module_download_PH6Ei",D="index-module_mobileContainer_kMfPO",N="index-module_pcContainer_4GUDJ",R="index-module_item_gjoQ7",M="index-module_appDetail_9nGCP",F="index-module_qrCodeMain_P-zjd",B="index-module_version_pYrOG",q="index-module_changelog_Uwpui",z="index-module_desktopMain_WLtQ7",G="index-module_qrCodeDesc_YR0bJ",U="index-module_iosQrCodeWrapper_Dq76q",W="index-module_android_E6Mqo",V="index-module_windows_Zd92A";function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function K(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Z=140,X="https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*4s9qRZX3ggQAAAAAAAAAAAAAARQnAQ",J="https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*__V8Q6EHEkYAAAAAAAAAAAAAARQnAQ",$=function(){var e=Y(Object(c.useState)({macDownLoadURL:"",windowsDownLoadURL:"",androidDownloadURL:"",iOSDownloadURL:"",appDownloadVersion:"",desktopDownloadVersion:""}),2),t=e[0],r=e[1],n=Y(Object(c.useState)(),2),o=n[0],i=n[1],u=Y(Object(c.useState)(),2),s=u[0],f=u[1],d=Y(Object(c.useState)(!1),2),h=d[0],m=d[1],y=Y(Object(c.useState)(""),2),v=y[0],g=y[1],w=x.a.parse(window.location.search),A=function(e){var t=e.alt,r=e.qrcodeUrl,n=e.type,o=e.version,a="ios"===n&&!window.appData.isYuque;return l.a.createElement("div",{className:p()(M,K({},U,a))},l.a.createElement("div",{className:F},l.a.createElement("p",null,l.a.createElement("img",{src:r,alt:t})),l.a.createElement("p",{className:B},"版本：",o,l.a.createElement("a",{className:q,target:"_blank",href:j.a.getAppChangeLogUrl(o)},__("更新日志")))),a&&l.a.createElement("div",{className:G},l.a.createElement("p",null,__("安装后请到")),l.a.createElement("p",null,__("设置 -> 通用 -> VPN与设备管理")),l.a.createElement("p",null,__("中找到并信任证书")),l.a.createElement("p",null,l.a.createElement("a",{href:"https://yuque.antfin.com/lark/mobile-app/faq",target:"_blank"},__("常见问题")))))},k=function(e){var t=e.version;return l.a.createElement("div",{className:M},l.a.createElement("div",{className:z},l.a.createElement("p",{className:B},"版本：",t,l.a.createElement("a",{target:"_blank",className:q,href:j.a.getDesktopChangeLogUrl(t)},__("更新日志")))))},H=function(){g(X),m(!0)};return Object(c.useEffect)((function(){b.webProxy.userTask.download().then((function(e){var t=e.downloadInfo,n=t.iOSDownloadURL,o=t.androidDownloadURL;r(e.downloadInfo),w.url&&(g(J),m(!0),window.location.href=w.url),S.a.toDataURL(n||"",{width:Z,height:Z,margin:0},(function(e,t){i(t)})),S.a.toDataURL(o||"",{width:Z,height:Z,margin:0},(function(e,t){f(t)}))}))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:C},l.a.createElement("p",{className:I},__("随时随地使用语雀")),l.a.createElement("p",{className:T},__("同时支持 iOS、Android、macOS、Windows 版本")),l.a.createElement("div",{className:"layout-container-middle"},l.a.createElement("div",{className:L},l.a.createElement(_.a,{justify:"space-around",className:D},l.a.createElement(E.a,{xs:24,md:8},l.a.createElement(O.a,{placement:"bottom",content:A({alt:"ios",qrcodeUrl:o,type:"ios",version:t.appDownloadVersion})},l.a.createElement("div",{className:R},l.a.createElement("p",null,l.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_ee84bf/afts/img/A*orgVRpJ1n6AAAAAAAAAAAAAAARQnAQ",alt:"ios",width:100,height:100})),l.a.createElement("p",null,l.a.createElement(a.a,{size:"small",onClick:H},__("下载 iOS 版")))))),l.a.createElement(E.a,{xs:24,md:8},l.a.createElement(O.a,{placement:"bottom",content:A({alt:"android",qrcodeUrl:s,type:"android",version:t.appDownloadVersion})},l.a.createElement("div",{className:R},l.a.createElement("p",null,l.a.createElement("img",{className:W,src:"https://gw.alipayobjects.com/mdn/rms_ee84bf/afts/img/A*hfdcRqdjmzkAAAAAAAAAAAAAARQnAQ",alt:"android",width:100,height:100})),l.a.createElement("p",null,l.a.createElement(a.a,{size:"small",onClick:H},__("下载 Android 版")))))),l.a.createElement(E.a,{xs:24,md:8},l.a.createElement(O.a,{placement:"bottom",content:A({alt:"ipad",qrcodeUrl:o,type:"ios",version:t.appDownloadVersion})},l.a.createElement("div",{className:R},l.a.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_ee84bf/afts/img/A*BDqWT61Mj3YAAAAAAAAAAAAAARQnAQ",alt:"ipad",width:100,height:100}),l.a.createElement(a.a,{size:"small",onClick:H},__("下载 iPad 版"))))))),l.a.createElement("div",{className:L},l.a.createElement(_.a,{justify:"space-around",className:N},l.a.createElement(E.a,{xs:24,md:12},l.a.createElement(O.a,{placement:"bottom",content:k({version:t.desktopDownloadVersion})},l.a.createElement("div",{className:R},l.a.createElement("img",{src:"//gw.alipayobjects.com/mdn/rms_ee84bf/afts/img/A*_Rl_TI54BdMAAAAAAAAAAAAAARQnAQ",alt:"macOS",width:100,height:100}),l.a.createElement(a.a,{href:t.macDownLoadURL,target:"_blank",size:"small",rel:"noopener noreferrer"},__("下载 macOS 版"))))),l.a.createElement(E.a,{xs:24,md:12},l.a.createElement("div",{className:R},l.a.createElement(O.a,{placement:"bottom",content:k({version:t.desktopDownloadVersion})},l.a.createElement("div",{className:R},l.a.createElement("img",{className:V,src:"//gw.alipayobjects.com/mdn/rms_ee84bf/afts/img/A*NDLoTrGpw0EAAAAAAAAAAAAAARQnAQ",alt:"Windows",width:100,height:100}),l.a.createElement(a.a,{size:"small",href:t.windowsDownLoadURL,target:"_blank",rel:"noopener noreferrer"},__("下载 Windows 版"))))))))),l.a.createElement(P.a,{visible:h,imgUrl:v,onClose:function(){m(!1)}})))},ee=r(5736),te=function(e){var t=e.handleConfirm,r=e.handleClose;return l.a.createElement("div",{className:ee.a.container},l.a.createElement("img",{className:ee.a.contentBanner,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*lEheSJHl_Z8AAAAAAAAAAAAADvuFAQ/original",alt:""}),l.a.createElement("div",{className:ee.a.content,"data-testid":"doc-note-limit-content"},l.a.createElement("h1",null,__("确定要放弃新手任务吗？")),l.a.createElement("p",null,__("只需 2 分钟，完成简单的新人任务，即可领取一个月会员奖励！会员享有以下核心权益，继续完成任务吧！")),l.a.createElement("div",{className:ee.a.memberCard},l.a.createElement("p",{className:ee.a.memberCardRight},__("无限文稿数")),l.a.createElement("p",{className:ee.a.memberCardRight},__("无限知识库数")),l.a.createElement("p",{className:ee.a.memberCardRight},__("更多格式、更大附件")),l.a.createElement("p",{className:ee.a.memberCardRight},__("安全等知识库高级功能")),l.a.createElement("p",{className:ee.a.memberCardRight},__("不限期公开分享")),l.a.createElement("p",{className:ee.a.memberCardRight},__("公开我的花园"))),l.a.createElement("div",{className:ee.a.footer},l.a.createElement("div",{className:ee.a.footerAction},l.a.createElement(a.a,{"data-testid":"buy-button",className:ee.a.actionBtn,onClick:t},__("去意已决")),l.a.createElement(a.a,{className:ee.a.actionBtn,onClick:r,type:"primary"},__("继续完成"))))))},re=r(5858),ne=r(3774);function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ae(){ae=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(I([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==oe(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(oe(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function ie(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}var ce=function(e){var t,r,n=window.appData.me,o=e.cb;return Object(ne.c)({target_type:ne.b.USER,target_id:n.id,source:"novice_task",onBroadcast:(t=ae().mark((function e(t){return ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.type===ne.a.TASK.ACHIEVE&&o();case 2:case"end":return e.stop()}}),e)})),r=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){ie(a,n,o,i,c,"next",e)}function c(e){ie(a,n,o,i,c,"throw",e)}i(void 0)}))},function(e){return r.apply(this,arguments)})}),l.a.createElement(l.a.Fragment,null)},le=r(3884),ue=r(3899),se="index-module_container_xco76",fe="index-module_header_OcxbL",de="index-module_title_IfK9Z",pe="index-module_desc_JwypQ",he="index-module_close_-aIMP",me="index-module_body_HbXYZ",ye="index-module_bodyItem_jWVDe",ve="index-module_backgroundGif_D+WAN",be="index-module_name_95gsc",ge="index-module_archive_NCZuA",we="index-module_archiveIcon_M87cI",_e="index-module_options_8GrH4",Ee="index-module_bodyItemDisabled_nYr2u",Oe="index-module_itemIcon_Skbxq",Ae="index-module_bodyItemSelect_ZLjD8",Se="index-module_giveUpModal_+Zn3r";function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function xe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(){je=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(I([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==ke(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(ke(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Pe(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function Ce(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Pe(a,n,o,i,c,"next",e)}function c(e){Pe(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Te(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Le="TASK_FORCE_GIF_INDEX";t.a=function(){var e=le.a.getInstance(),t=Ie(Object(c.useState)(v.ACTION.new_book),2),r=t[0],u=t[1],d=Ie(Object(c.useState)(!1),2),_=d[0],E=d[1],O=Ie(Object(c.useState)(!1),2),A=O[0],S=O[1],k=Ie(Object(c.useState)(!1),2),x=k[0],j=k[1],P=Ie(Object(c.useState)(!1),2),C=P[0],I=P[1],T=Ie(Object(c.useState)(),2),L=T[0],D=T[1],N=Ie(Object(c.useState)(null),2),R=N[0],M=N[1],F=Ie(Object(c.useState)(!1),2),B=F[0],q=F[1],z=Object(f.a)().isDarkMode,G=window.appData.me,U=Object(c.useMemo)((function(){return[{icon:"helpcolor",name:__("第一步：新建一个知识库"),action:v.ACTION.new_book},{icon:"NoviceGuideDoc",name:__("第二步：新建一篇文档"),action:v.ACTION.new_doc},{icon:"NoviceGuideNote",name:__("第三步：写下第一篇小记"),action:v.ACTION.new_note},{icon:"NoviceGuideClient",name:__("第四步：下载客户端"),action:v.ACTION.download_desktop,option:{label:__("去下载 →"),handler:function(){S(!0)}}}]}),[]);Object(c.useEffect)((function(){W();var t=e.onCloseTask(Y),r=e.onCloseAllTask((function(){S(!1)})),n=e.onWakeUp((function(){W(!0)})),o=e.onGiveUpTask((function(){j(!0)}));return function(){t(),r(),n(),o()}}),[]);var W=function(){var t=Ce(je().mark((function t(){var r,n,o,a,i,c,l,s,f=arguments;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=f.length>0&&void 0!==f[0]&&f[0],t.next=3,b.webProxy.userTask.find({task_id:v.TASK_ID.NOVICE_OFFER});case 3:if((i=t.sent)&&i.task){t.next=7;break}return e.clearTaskStateInfo(),t.abrupt("return");case 7:if(i.task.state!==v.STATE.NOTSTART){t.next=11;break}return t.next=10,b.webProxy.userTask.start({task_id:v.TASK_ID.NOVICE_OFFER});case 10:i.task.state=v.STATE.PROGRESS;case 11:if(c=(null===(r=i.taskRecords)||void 0===r||null===(n=r.pop)||void 0===n||null===(n=n.call(r))||void 0===n?void 0:n.action)||null,((l=e.getTaskStateInfo()||{isProcess:!0}).isProcess||a)&&q(!0),E(l.isProcess||a),w.a.get("".concat(Le,"_").concat(v.TASK_ID.NOVICE_OFFER,"_").concat(c,"_").concat(G.id))||!c){t.next=22;break}return D(c),u(c),t.next=21,Object(m.a)(2e3);case 21:w.a.set("".concat(Le,"_").concat(v.TASK_ID.NOVICE_OFFER,"_").concat(c,"_").concat(G.id),1);case 22:if(s=Object(ue.b)(v.TASK_ID.NOVICE_OFFER,c,1),(null===(o=i.task)||void 0===o?void 0:o.state)===v.STATE.PROGRESS){t.next=26;break}return t.abrupt("return");case 26:if(s||!c){t.next=28;break}return t.abrupt("return");case 28:u(s||v.ACTION.new_book),e.taskStateChanged({isProcess:l.isProcess||a,step:1,stage:s||v.ACTION.new_book,taskId:v.TASK_ID.NOVICE_OFFER});case 30:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),V=function(){var t=Ce(je().mark((function t(){var n,o,a,i,c;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.webProxy.userTask.find({task_id:v.TASK_ID.NOVICE_OFFER});case 2:if((a=t.sent)&&a.task){t.next=6;break}return e.clearTaskStateInfo(),t.abrupt("return");case 6:i=(null===(n=a.taskRecords)||void 0===n||null===(o=n.pop)||void 0===o||null===(o=o.call(n))||void 0===o?void 0:o.action)||null,r!==i&&(M(i),(c=Object(ue.b)(v.TASK_ID.NOVICE_OFFER,i,1))&&setTimeout((function(){var t;u(c),M(null),e.taskStateChanged({isProcess:(null==a||null===(t=a.task)||void 0===t?void 0:t.state)===v.STATE.PROGRESS,stage:c,step:1,taskId:v.TASK_ID.NOVICE_OFFER}),w.a.set("".concat(Le,"_").concat(v.TASK_ID.NOVICE_OFFER,"_").concat(i,"_").concat(G.id),1)}),2e3));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),H=function(){var t=Ce(je().mark((function t(){return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.webProxy.userTask.destroy({task_id:v.TASK_ID.NOVICE_OFFER});case 2:i.a.success(__("放弃成功")),j(!1),E(!1),e.closeAllTask(),e.clearTaskStateInfo(),e.giveUpSuccess();case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),K=function(){var e=Ce(je().mark((function e(){var t,r;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!1),e.next=3,b.webProxy.userTask.archieve({task_id:v.TASK_ID.NOVICE_OFFER,action:v.ACTION.download_desktop});case 3:t=["#F3C52F","#00B96B"],r=Date.now()+1e3,function e(){s({particleCount:2,angle:60,spread:55,origin:{x:0},colors:t,zIndex:999999}),s({particleCount:2,angle:120,spread:55,origin:{x:1},colors:t,zIndex:999999}),Date.now()<r&&requestAnimationFrame(e)}(),I(!0),E(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(t){e.closeAllTask(),E(!1),t&&t.stopPropagation()},Q=function(){var t=Ce(je().mark((function t(n){var o,a,i;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.action===r){t.next=2;break}return t.abrupt("return");case 2:if(n.action!==v.ACTION.new_book){t.next=7;break}"/dashboard"===window.location.pathname?e.shake({taskId:v.TASK_ID.NOVICE_OFFER,stage:v.ACTION.new_book,step:1}):window.location.href="/dashboard",t.next=23;break;case 7:if(n.action!==v.ACTION.new_doc){t.next=22;break}if(Object(ue.d)("doc_read")){t.next=19;break}return t.next=12,b.webProxy.mine.commonUsed({},{useOriginResp:!0});case 12:if(o=t.sent,null!=(a=o.data.books)&&a.length){t.next=16;break}return t.abrupt("return");case 16:window.location.href=a[0].url,t.next=20;break;case 19:e.shake({taskId:v.TASK_ID.NOVICE_OFFER,stage:v.ACTION.new_doc,step:1});case 20:t.next=23;break;case 22:n.action===v.ACTION.new_note&&(i=e.getTaskStateInfo(),e.shake({taskId:v.TASK_ID.NOVICE_OFFER,stage:v.ACTION.new_note,step:i.step}));case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Z=function(e){return e.action===r?null:Object(ue.a)(v.TASK_ID.NOVICE_OFFER,e.action,r)?__("请先完成当前任务"):__("任务已完成")};return l.a.createElement(l.a.Fragment,null,B&&l.a.createElement(ce,{cb:V}),_&&l.a.createElement("div",{className:se},l.a.createElement("div",{className:fe},l.a.createElement("p",{className:de},__("快速上手，得 30 天会员奖励 🎁")),l.a.createElement("p",{className:pe},__("欢迎使用语雀，参考页面上的提示即可轻松完成新手任务，领取会员奖励")),l.a.createElement(h.b,{onClick:Y,name:"Close",width:16,className:he})),l.a.createElement("div",{className:me},U.map((function(e,t){return l.a.createElement(o.a,{title:Z(e)},r!==e.action||2!==t||window.location.pathname.includes("dashboard/notes")?l.a.createElement("div",{className:p()(ye,xe(xe({},Ae,r===e.action),Ee,Object(ue.a)(v.TASK_ID.NOVICE_OFFER,e.action,r))),onClick:function(){Q(e)}},r===e.action&&l.a.createElement("img",{className:ve,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*AqubTJt0SKEAAAAAAAAAAAAADvuFAQ/original",alt:""}),l.a.createElement(h.b,{name:e.icon,className:Oe}),l.a.createElement("span",{className:be},e.name),R!==r&&!(null==e||!e.option)&&r===e.action&&l.a.createElement("div",{className:_e},l.a.createElement(a.a,{onClick:e.option.handler,type:"text"},e.option.label)),(R===r&&r===e.action||L===e.action)&&l.a.createElement("img",{className:ge,src:z?"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*vZ9iQ4YUYNgAAAAAAAAAAAAADvuFAQ/original":"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*pkUCQ7pUvCsAAAAAAAAAAAAADvuFAQ/original"}),L!==e.action&&R!==e.action&&Object(ue.a)(v.TASK_ID.NOVICE_OFFER,r,e.action)&&l.a.createElement(h.b,{className:we,name:"Success"})):l.a.createElement(g.a,{content:[__("点击此处开始前往「小记」")],placement:"left",taskId:v.TASK_ID.NOVICE_OFFER,stage:v.ACTION.new_note,step:1,width:312,height:60,borderRadius:8,offsetY:272,offsetX:24,popWidth:218,action:"click",popMarginLeft:4},l.a.createElement("div",{className:p()(ye,xe(xe({},Ae,r===e.action),Ee,Object(ue.a)(v.TASK_ID.NOVICE_OFFER,e.action,r))),onClick:function(){window.location.assign("/dashboard/notes")}},r===e.action&&l.a.createElement("img",{className:ve,src:"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*AqubTJt0SKEAAAAAAAAAAAAADvuFAQ/original",alt:""}),l.a.createElement(h.b,{name:e.icon,className:Oe}),l.a.createElement("span",{className:be},e.name),R!==r&&!(null==e||!e.option)&&r===e.action&&l.a.createElement("div",{className:_e},l.a.createElement(a.a,{onClick:e.option.handler,type:"text"},e.option.label)),(R===r&&r===e.action||L===e.action)&&l.a.createElement("img",{className:ge,src:z?"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*vZ9iQ4YUYNgAAAAAAAAAAAAADvuFAQ/original":"https://mdn.alipayobjects.com/huamei_0prmtq/afts/img/A*pkUCQ7pUvCsAAAAAAAAAAAAADvuFAQ/original"}),L!==e.action&&R!==e.action&&Object(ue.a)(v.TASK_ID.NOVICE_OFFER,r,e.action)&&l.a.createElement(h.b,{className:we,name:"Success"}))))})))),l.a.createElement(n.a,{visible:A,width:550,footer:null,onCancel:K},l.a.createElement($,null)),l.a.createElement(n.a,{className:Se,visible:x,width:550,footer:null,onCancel:function(){j(!1)}},l.a.createElement(te,{handleConfirm:H,handleClose:function(){j(!1)}})),l.a.createElement(n.a,{className:Se,visible:C,width:550,footer:null,onCancel:function(){I(!1),e.closeAllTask(),e.clearTaskStateInfo(),window.location.reload()}},l.a.createElement(re.a,{handleConfirm:function(){var e;null===(e=window.__member_message_ref)||void 0===e||null===(e=e.current)||void 0===e||e.showMemberIntro(y.LIMIT_SCENE.member_incentive,{isRenew:!1})},handleClose:function(){window.location.reload(),I(!1),e.closeAllTask(),e.clearTaskStateInfo()}})))}},6125:function(e,t,r){"use strict";r.d(t,"a",(function(){return B}));r(711);var n=r(356),o=(r(37),r(8)),a=r(0),i=r(189),c=r(848),l=(r(938),r(503)),u=(r(167),r(39)),s=(r(144),r(60)),f=(r(44),r(10)),d=(r(59),r(30)),p=r(5),h=r.n(p),m=r(532),y=r(11),v=r(3641),b=r(34),g=r(51),w=r(526),_=r(1515),E=r(3476),O=r(4099),A=r(3595),S=r(215),k=r(52),x={popover:"index-module_popover_qKMQ0",shareIcon:"index-module_shareIcon_2tsVL",cardArea:"index-module_cardArea_4ySac",radioOption:"index-module_radioOption_QzUCq",disabledOption:"index-module_disabledOption_6kUkH",showMemberIntroRadio:"index-module_showMemberIntroRadio_uYnQm",tooltip:"index-module_tooltip_ck55t",memberAbleIcon:"index-module_memberAbleIcon_cDHHk"};function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(){T=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new I(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(L([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==j(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(j(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function L(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function D(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){L(a,n,o,i,c,"next",e)}function c(e){L(a,n,o,i,c,"throw",e)}i(void 0)}))}}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var M=function(e){var t=e.doc,r=e.book,n=e.group,o=e.organization,i=e.me,c=Object(m.e)(),p=N(d.a.useModal(),2),j=p[0],P=p[1],L=N(a.useState(!1),2),R=L[0],M=L[1],F=a.useMemo((function(){return Object(_.d)(t,w.b.DOC,n,r)}),[t,n,r]).privacy,B=a.useMemo((function(){var e=null!=o&&o.id?w.a.ORG:w.a.PERSON;return Object(S.a)()?e:w.a.INTERNAL}),[o]),q=!(!o||null==o||!o.id),z=Object(A.a)(),G=a.useMemo((function(){var e=z.interests[g.INTEREST_CODE.create_public_resource];return e||q||(e=!0),e}),[n]),U=function(){var e;null===(e=window.__member_message_ref)||void 0===e||e.current.showMemberIntro(b.LIMIT_SCENE.share_public)},W=function(){if(!(null!=o&&o.id||"User"!==(null==n?void 0:n.type)||G))return n.id===i.id?__("会员可公开内容至互联网 {btn}",{btn:a.createElement("a",{onClick:U,style:{marginLeft:"5px"}},__("购买会员"))}):__("联系知识库所有者购买会员可公开内容至互联网")},V=function(){var e=D(T().mark((function e(n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.enable_auto_publish){e.next=2;break}return e.abrupt("return",!0);case 2:if("public"in n&&n.public!==y.PRIVACY.private){e.next=4;break}return e.abrupt("return",!0);case 4:if(t.published_at){e.next=7;break}return f.a.warn(__("文档发布后才可以公开!")),e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=D(T().mark((function e(r){var n,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C(C({},r),{},{id:t.id}),e.next=3,k.a.docs.updateMeta(n,{ignoreGlobalMessage:!0});case 3:o=e.sent,c({type:"doc/update",payload:{public:o.public,share_expired_time:o.share_expired_time}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=D(T().mark((function e(r){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==y.PRIVACY.public||G){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,M(!0),e.next=6,Object(O.b)(r,w.b.DOC,t,z,j,V,H,F);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),f.a.error((null===e.t0||void 0===e.t0?void 0:e.t0.message)||__("操作失败"));case 11:return e.prev=11,M(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})));return function(t){return e.apply(this,arguments)}}();return a.createElement("div",{className:x.cardArea},a.createElement(u.a.Group,{buttonStyle:"solid",value:F===y.PRIVACY.private&&r.extend_private===y.EXTEND_PRIVATE.BIND_DEPARTMENTS?y.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE:F,onChange:function(e){return K(e.target.value)}},a.createElement(l.a,{direction:"vertical",size:16,style:{display:"flex"}},E.a[B].actions.map((function(e){var t;if(B===w.a.INTERNAL){if(e.value===y.EXTEND_PRIVATE_MAP_TO_PRIVACY_VALUE&&r.extend_private===y.EXTEND_PRIVATE.NONE)return null;if(e.value===y.PRIVACY.private&&r.extend_private===y.EXTEND_PRIVATE.BIND_DEPARTMENTS)return null}var i=e.value===y.PRIVACY.public&&!G,c=a.createElement(a.Fragment,null,a.createElement("span",{className:x.label},e.label),e.value===y.PRIVACY.public&&!G&&a.createElement(v.a,{className:x.memberAbleIcon,noTooltip:!0,group:n,organization:o,isYuque:Object(S.a)()}));B===w.a.PERSON&&i&&(c=a.createElement("span",{onClick:U},c));var l=i||R;return a.createElement(u.a,{key:"docPublicSet-".concat(e.value),value:e.value,disabled:l,className:h()(x.radioOption,I(I({},x.disabledOption,i),x.showMemberIntroRadio,B===w.a.PERSON&&i))},i?a.createElement(s.a,{overlayClassName:x.tooltip,title:a.createElement(a.Fragment,null,B===w.a.ORG&&a.createElement("span",null,null===(t=e.tip)||void 0===t?void 0:t.call(e,o)),B===w.a.PERSON&&a.createElement("span",null,W())),placement:"right",autoAdjustOverflow:!0},c):c)})))),P)},F=function(e){var t=e.doc,r=e.book,i=e.group,l=e.organization,u=e.me,s=e.canShare,f=e.style;return a.createElement(a.Fragment,null,s?a.createElement(n.a,{overlayClassName:x.popover,content:a.createElement(M,{doc:t,book:r,group:i,organization:l,me:u}),trigger:["click"],placement:"bottom",destroyTooltipOnHide:!0,noArrow:!0},a.createElement(o.a,{type:"text",className:x.shareIcon,style:f,icon:a.createElement(c.b,{book:r,group:i,doc:t,organization:l,onlyIcon:!0})})):a.createElement(c.b,{book:r,group:i,doc:t,organization:l}))},B=function(e){var t=e.doc,r=e.book,n=e.group,o=e.organization;return a.createElement(i.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.createElement(c.b,{book:r,group:n,doc:t,organization:o})}},a.createElement(F,e))}},6126:function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));r(44);var n=r(10),o=r(0),a=r.n(o),i=r(43),c=r(5),l=r.n(c),u=r(189),s=r(5744),f=r(5903),d=r(865),p=r(4043),h=r(1528),m={iconWrapper:"style-module_iconWrapper_bAMkc",editMode:"style-module_editMode_Qtazl",editModeActive:"style-module_editModeActive_qdlNh",icon:"style-module_icon_ucXPM",iconEditMode:"style-module_iconEditMode_55y65",disabled:"style-module_disabled_4E4EI",container:"style-module_container_5pQ7D",switchContent:"style-module_switchContent_FKoVH",switchActiveBg:"style-module_switchActiveBg_3DMlv",commentActive:"style-module_commentActive_dTftF",moreFeatureActive:"style-module_moreFeatureActive_zPkBd",isPrevNotActive:"style-module_isPrevNotActive_xWwFe"};function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var w={WordingComment:f.a.WordingComment,SideComment:f.a.SideComment,MoreFeature:f.a.MoreFeature,Outline:f.a.Outline};function _(){}var E=function(e){var t=e.enableComment,r=e.docType,n="Doc"===r,i=b(Object(o.useState)(null),2),c=i[0],l=i[1],f=Object(s.b)().sidePanelManager;return Object(o.useEffect)((function(){var e=f.subscribe((function(e){var t=e.currentPanel;e.visible?"EditDocMeta"===t||"Review"===t||"DocStyle"===t?l("MoreFeature"):t!==c&&l("MoreFeature"===t||"WordingComment"===t||"SideComment"===t||null===t?t:null):l(null)}));return function(){e()}}),[c]),a.a.createElement(u.a,{withFallbackUI:!0,noMessage:!0,fallbackUI:function(){return a.a.createElement(O,{enableComment:t,isWordingComment:n,onTabClick:_,docType:r})}},a.a.createElement(O,{sidePanelManager:f,enableComment:t,isWordingComment:n,activeTab:c,onTabClick:function(e){c===e?(l(null),f.hide()):(l(e),f.show(e))},docType:r}))};function O(e){var t=e.activeTab,r=e.onTabClick,o=e.enableComment,c=e.isWordingComment,u=e.sidePanelManager,s=e.docType,f=null===Object(d.a)(t),y=Object(p.b)().editMode;return y&&"Table"!==s?a.a.createElement("div",{className:l()(m.iconWrapper,m.editMode,v({},m.editModeActive,t===w.MoreFeature)),onMouseOver:function(){u&&u.getPanelContent("MoreFeature").preload&&u.getPanelContent("MoreFeature").preload()},onClick:function(){return r(w.MoreFeature)}},a.a.createElement(i.b,{name:"Rightboard",className:m.iconEditMode})):a.a.createElement("div",{className:l()(m.container,v(v(v({},m.commentActive,t===w.WordingComment||t===w.SideComment),m.moreFeatureActive,t===w.MoreFeature),m.isPrevNotActive,f))},a.a.createElement("div",{className:m.switchActiveBg}),a.a.createElement("div",{className:m.switchContent},a.a.createElement(h.a,null,a.a.createElement("div",{className:l()(m.iconWrapper,v({},m.disabled,!o)),onMouseOver:function(){u&&u.getPanelContent("SideComment").preload&&u.getPanelContent("SideComment").preload()},onClick:function(){o?y&&"Table"!==s?n.a.info(__("编辑模式暂不支持划词评论")):r(c?w.WordingComment:w.SideComment):n.a.info(__("请开启知识库设置中的评论功能"))}},a.a.createElement(i.b,{name:"CommentReply",className:m.icon}))),a.a.createElement("div",{className:m.iconWrapper,onMouseOver:function(){u&&u.getPanelContent("MoreFeature").preload&&u.getPanelContent("MoreFeature").preload()},onClick:function(){return r(w.MoreFeature)}},a.a.createElement(i.b,{name:"Rightboard",className:m.icon}))))}},6132:function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(14),i=r.n(a),c=r(43),l=r(184),u=r(3898),s=r(3884),f="QuickStart-module_noviceTip_ZaXro",d="QuickStart-module_noviceTipClose_Gq3cV";function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.a=function(){var e=p(Object(n.useState)(!1),2),t=e[0],r=e[1],a=s.a.getInstance(),h=a.getTaskStateInfo();return Object(n.useEffect)((function(){!1===(null==h?void 0:h.isProcess)&&r(!0),a.onCloseAllTask((function(){var e=l.a.get(u.a.TASK_CLOSE_TIMES)||0;l.a.set(u.a.TASK_CLOSE_TIMES,Number(e)+1),l.a.set(u.a.LAST_CLOSE_TIME,i()().format("YYYYMMDD")),r(!0)})),a.onGiveUpTaskSuccess((function(){r(!1)}));var e=l.a.get(u.a.TASK_CLOSE_TIMES)||0,t=l.a.get(u.a.LAST_CLOSE_TIME);e>1||i()(t).add(3,"day").isBefore(i()())&&setTimeout((function(){a.wakeUp(),r(!1)}),1e3)}),[]),t?o.a.createElement("div",{className:f,onClick:function(){a.wakeUp(),r(!1)}},o.a.createElement(c.b,{name:"IconRemoveSolid",width:18,className:d,onClick:function(e){a.giveUpTask(),e.stopPropagation()}}),o.a.createElement("span",null,"💡 ".concat(__("快速上手")))):null}},6141:function(e,t,r){"use strict";r(144);var n=r(60),o=r(0),a=r.n(o),i=r(2),c=r.n(i),l=r(43),u=r(14),s=r.n(u),f=r(229),d="index-module_saveTip_xnDOu";function p(e){var t=e.doc,r=e.saving,o=e.mode,i=e.autoPublish,c=e.showHistory,u=e.savedAt,p=function(){if(!0===r)return e.showTime?a.a.createElement("span",null,i?__("正在保存并发布..."):__("正在保存...")):a.a.createElement("span",null,__("保存中..."));if(u){if(!e.showTime)return a.a.createElement("span",null,__("已保存"));var n=s()(u).format("H:mm:ss");return i?a.a.createElement("span",null,__("保存并发布于 {time}",{time:n})):a.a.createElement("span",null,__("保存于 {time}",{time:n}))}return e.showTime?t.last_editor&&0===t.status?"embed"===o?a.a.createElement("span",null,__("最后更改于 {time}",{time:a.a.createElement(f.a,{time:t.content_updated_at})})):a.a.createElement("span",null,__("{name} 最后更改于 {time}",{name:a.a.createElement("a",{href:"/".concat(t.last_editor.login),target:"_blank"},t.last_editor.name),time:a.a.createElement(f.a,{time:t.content_updated_at})})):t.content_updated_at?a.a.createElement("span",null,__("最后更改于{time}",{time:a.a.createElement(f.a,{time:t.content_updated_at})})):null:null}(),h=a.a.createElement("span",{className:d,onClick:function(e){return function(e){var t;"a"!==(null===(t=e.target)||void 0===t?void 0:t.tagName.toLowerCase())&&c&&c()}(e)}},p,a.a.createElement(l.b,{name:"cloud",width:16}));return p&&c?a.a.createElement(n.a,{title:__("查看历史版本"),trigger:["hover","click"],placement:"bottom"},h):h}p.defaultProps={showTime:!0},p.propTypes={saving:c.a.bool,savedAt:c.a.instanceOf(Date),autoPublish:c.a.bool,doc:c.a.object,mode:c.a.string,book:c.a.object,showTime:c.a.bool,showHistory:c.a.func};t.a=p},6157:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"c",(function(){return i}));var n=480,o=259,a=0,i=991},6158:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(184);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function l(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var s=function(e){try{return JSON.parse(e)}catch(e){return{}}},f=function(){return e=function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{tab:"Catalog",sort:"content_updated_at"};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"namespace","ACTIVE_TAB_KEY"),l(this,"key",void 0),this.fallbackValue=o,this.key="".concat(t.id,"/").concat(r.id,"/").concat(n.id)},(t=[{key:"getValue",value:function(){return(s(n.a.get(this.namespace))||{})[this.key]||this.fallbackValue}},{key:"setValue",value:function(e){var t=s(n.a.get(this.namespace))||{};t[this.key]=i(i(i({},this.fallbackValue),t[this.key]||{}),e),n.a.set(this.namespace,JSON.stringify(t))}},{key:"getTab",value:function(){var e,t;return null!==(e=null===(t=this.getValue())||void 0===t?void 0:t.tab)&&void 0!==e?e:this.fallbackValue.tab}},{key:"setTab",value:function(e){this.setValue({tab:e})}},{key:"getSort",value:function(){var e,t;return null!==(e=null===(t=this.getValue())||void 0===t?void 0:t.sort)&&void 0!==e?e:this.fallbackValue.sort}},{key:"setSort",value:function(e){this.setValue({sort:e})}}])&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()},6176:function(e,t,r){"use strict";r.r(t);r(44);var n=r(10),o=(r(497),r(95)),a=r(0),i=r.n(a),c=r(1731),l=r(1761),u=r(1791),s=r(1737),f=r(1541),d=r(4323),p=r(5623),h=r(1717),m=r(51),y=r(846),v=r(52),b=r(4125),g=r(403),w={bookOverviewMoreActionsOverlay:"bookOverviewMoreSetting-module_bookOverviewMoreActionsOverlay_LvPUV",memberIcon:"bookOverviewMoreSetting-module_memberIcon_2acB1",actionIconDelete:"bookOverviewMoreSetting-module_actionIconDelete_XULUN",actionTextDelete:"bookOverviewMoreSetting-module_actionTextDelete_LtGB1"};function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function E(){E=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var O=Object.getPrototypeOf,A=O&&O(O(L([])));A&&A!==r&&n.call(A,i)&&(w=A);var S=g.prototype=v.prototype=Object.create(w);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==_(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(_(t)+" is not iterable")}return b.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function O(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){O(a,n,o,i,c,"next",e)}function c(e){O(a,n,o,i,c,"throw",e)}i(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t,r,a,_,O=e.book,k=e.group,x=e.showBasicSettings,j=void 0===x||x,P=e.showMoreSettings,C=void 0===P||P,I=e.showDelete,T=void 0!==I&&I,L=window.appData.organization;if(!O.abilities)return null;var D=null===(t=O.abilities)||void 0===t?void 0:t.create_doc,N=null===(r=O.abilities)||void 0===r?void 0:r.read_private,R=null===(a=O.abilities)||void 0===a?void 0:a.manage,M=null===(_=O.abilities)||void 0===_?void 0:_.destroy,F=S(i.a.useState(!1),2),B=F[0],q=F[1];function z(){return(z=A(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.books.destroy({id:O.id});case 3:n.a.success(__("操作成功"),3),q(!1),setTimeout((function(){window.location.href="/dashboard"}),300),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n.a.error(__("操作失败"),3);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return N?i.a.createElement(h.a,{direction:"horizontal",className:e.className,overlayClassName:w.bookOverviewMoreActionsOverlay,getPopupContainer:e.getPopupContainer||function(e){return e.parentNode},placement:e.placement||"bottomLeft",isMenuType:!1,content:i.a.createElement(o.a,{selectable:!1,mode:"vertical"},e.prepend,(C||j)&&[{key:"permission",href:"/r/".concat(k.login,"/").concat(O.slug,"/collaborators"),icon:i.a.createElement(c.default,{width:16,height:16,className:w.actionIcon}),name:__("权限"),enabled:N&&j},{key:"statistics",href:"/r/".concat(k.login,"/").concat(O.slug,"/statistics"),icon:i.a.createElement(l.default,{width:16,height:16,className:w.actionIcon}),name:__("统计"),enabled:R&&j},{key:"toc",href:"/r/".concat(k.login,"/").concat(O.slug,"/toc"),icon:i.a.createElement(u.default,{width:16,height:16,className:w.actionIcon}),name:__("目录管理"),enabled:D&&j},{key:"setting",href:"/".concat(k.login,"/").concat(O.slug,"/settings/basic"),icon:i.a.createElement(s.default,{width:16,height:16,className:w.actionIcon}),name:__("更多设置"),enabled:D&&C}].map((function(e){if(!e.enabled)return null;var t="statistics"===e.key;return i.a.createElement(o.a.Item,{key:e.key,onClick:A(E().mark((function r(){return E().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t||p.a.hasAbility()){r.next=3;break}return p.a.showMemberIntro(),r.abrupt("return");case 3:Object(g.d)({targetUrl:e.href,isNewWindow:!0,parent:"main"},(function(){Object(y.c)(e.href,{page:"bookManage"})}));case 4:case"end":return r.stop()}}),r)}))),icon:e.icon},i.a.createElement("span",{"data-setting-url":e.href},e.name),t&&i.a.createElement(b.a,{className:w.memberIcon,group:k,code:m.INTEREST_CODE.book_statistics,organization:L}))})),T&&M&&i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a.Divider,{key:"divider-1"}),i.a.createElement(o.a.Item,{key:"delete",icon:i.a.createElement(f.default,{width:16,height:16,className:w.actionIconDelete}),onClick:function(){return q(!0)}},i.a.createElement("span",{className:w.actionTextDelete},__("删除"))),B&&i.a.createElement(d.a,{visible:B,book:O,onDelete:function(){return z.apply(this,arguments)},closeModal:function(){q(!1)}})))}):null}},6265:function(e,t,r){"use strict";var n=r(1012),o=r.n(n),a=(r(144),r(60)),i=(r(711),r(356)),c=(r(44),r(10)),l=r(416),u=r.n(l),s=r(956),f=r.n(s),d=r(0),p=r.n(d),h=r(74),m=r.n(h),y=r(2),v=r.n(y),b=r(5),g=r.n(b),w=r(33),_=r(532),E=r(2777),O=r.n(E),A=r(237),S=r.n(A),k=r(3784),x=r(726),j=r(1530),P=r(1534),C=r(1789),I=r(43),T=r(5748),L=r(449),D=r(295),N=r(457),R=r(6257),M=r(32),F=r(3774),B=r(1076),q=r(1343),z=r(1),G=r(287),U=r(5843),W=r(5719),V=r(5854),H=r(5897),K=r(5983),Y=r(4366),Q=r(929),Z=r(2762),X=r(4060),J=r(3860),$=r(3881),ee=r(3868),te=r(6113),re=r(6157),ne=r(1814),oe=r(5826),ae=r(4083),ie=r(11),ce=r(4041),le=r(52),ue=r(5896),se=r(4043),fe=r(1528),de=r(846),pe=r(1007),he=r(3749),me=r(1792),ye="index-module_netStatus_6tuRA";function ve(){return Object(pe.b)()?null:p.a.createElement("div",{className:ye},p.a.createElement("span",null,__("网络断开，当前是离线版本")),p.a.createElement(me.default,{width:16,height:16}))}var be=r(1396),ge={netStatus:"index-module_netStatus_p3BrJ"};function we(e){var t;return"offline"===e.netStatus&&(t=p.a.createElement(p.a.Fragment,null,p.a.createElement(be.default,null),p.a.createElement("span",{className:""},__("断网状态下不支持编辑")))),p.a.createElement("div",{className:ge.netStatus},t)}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Oe(){var e=_e(Object(d.useState)(""),2),t=e[0],r=e[1];return Object(d.useEffect)((function(){function e(){r("offline")}function t(){r("")}return window.addEventListener("offline",e),window.addEventListener("online",t),function(){window.removeEventListener("offline",e),window.removeEventListener("online",t)}}),[]),p.a.createElement(we,{netStatus:t})}var Ae=r(6141),Se="index-module_text_fdCRQ";function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function je(e){var t=e.editable,r=e.doc,n=ke(Object(d.useState)(!1),2),o=n[0],a=n[1],i=ke(Object(d.useState)(null),2),c=i[0],l=i[1],u=ke(Object(d.useState)(""),2),s=u[0],f=u[1];return Object(d.useEffect)((function(){function e(){f("offline")}function t(){f("")}function r(e){var t=e.detail.status;"running"===t?a(!0):"success"===t?(a(!1),l(new Date)):a(!1)}return window.addEventListener("offline",e),window.addEventListener("online",t),window.addEventListener("Datatable.savingChanged",r),function(){window.removeEventListener("offline",e),window.removeEventListener("online",t),window.removeEventListener("Datatable.savingChanged",r)}}),[]),t?"offline"===s?null:o||c?p.a.createElement(Ae.a,{doc:r,saving:o,savedAt:c,showHistory:!1,showTime:!1,autoPublish:!0}):p.a.createElement("span",{className:Se},__("数据表当前页可直接编辑")):null}var Pe=r(238),Ce=r.n(Pe),Ie=r(394),Te={avatar:"index-module_avatar_A3sqR",name:"index-module_name_Qc35G",sign:"index-module_sign_d9jTU",signInner:"index-module_signInner_y+xaX",more:"index-module_more_k7ofk",moreUsers:"index-module_moreUsers_sk4Xt"};function Le(e){var t=e.user;return p.a.createElement("span",{className:Te.avatar},p.a.createElement(Ie.a,{src:t.avatar_url,name:t.name,size:24}),t.color&&p.a.createElement("span",{className:Te.sign},p.a.createElement("div",{className:Te.signInner,style:{background:t.color}})))}function De(e){var t=e.users,r=e.me,n=e.maxUsersToShow,o=void 0===n?9:n,c=[],l=[];return t.length<=o?c=t.slice(0,t.length):(c=t.slice(0,o),l=t.slice(o)),p.a.createElement(p.a.Fragment,null,c.map((function(e){return p.a.createElement(a.a,{title:e.name,key:e.id},p.a.createElement("span",null,p.a.createElement(Le,{user:e})))})),l.length>0&&p.a.createElement(i.a,{placement:"bottom",content:p.a.createElement("ul",{className:Te.moreUsers},l.map((function(e){return p.a.createElement("li",{key:e.id},p.a.createElement(Le,{user:e}),p.a.createElement("a",{href:"/".concat(e.login),className:Te.name,target:"_blank"},e.name))})))},p.a.createElement("a",{className:"".concat(Te.avatar," ").concat(Te.more)},"+",l.length)),p.a.createElement(a.a,{title:e.onlyMeTip||(0===t.length?__("语雀已支持多人同时编辑文档，当前编辑者的头像将显示在此"):__("我")),overlayStyle:{minWidth:"24px",width:e.onlyMeTip||0!==t.length?"unset":"192px"}},p.a.createElement("span",null,p.a.createElement(Le,{user:r}))))}De.propTypes={users:v.a.array.isRequired,me:v.a.object.isRequired,maxUsersToShow:v.a.number,onlyMeTip:v.a.string};var Ne=De;function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Fe(e){var t=e.me,r=e.doc,n=Re(Object(d.useState)([]),2),o=n[0],a=n[1],i=Ce()((null==o?void 0:o.filter((function(e){return e.id!==t.id})))||[],"login");return Object(d.useEffect)((function(){function e(e){a(e.detail)}return window.addEventListener("WORKFLOW_EVENT.collabUsersChange",e),function(){window.removeEventListener("WORKFLOW_EVENT.collabUsersChange",e)}}),[]),p.a.createElement(Ne,{users:i,me:t,maxUsersToShow:"Table"===r.type?5:9,onlyMeTip:"Table"===r.type?__("我"):void 0})}r(37);var Be=r(8),qe=r(725),ze=r.n(qe),Ge=r(3739),Ue=r(3982);function We(e){var t=e.book,r=e.doc,n=Object(se.b)(),o=n.editMode,i=n.setEditMode;if(Object(d.useEffect)((function(){var e=ze.a;if(!o){var t=new URLSearchParams(window.location.search);if("doc_embed"===t.get("view")||t.get("inner"))return;if("Thread"===r.type)return;r.abilities&&r.abilities.update&&(e=function(e){if("e"===e.key||"E"===e.key){var t=e.target;if("INPUT"===t.tagName)return;if("TEXTAREA"===t.tagName)return;if(t.isContentEditable&&!t.classList.contains("textarea-cell"))return;if(M.c&&"markdown"===(r.origin_format||r.format))return;"Sheet"===r.type||"Table"===r.type?Ge.c.saveSheetPosition(r.id):Ge.c.saveReadPosition(r.id),M.c&&Object(Ue.a)(r.slug)&&Object(Ue.b)(r.slug),i(!0),Object(G.a)("start","hotkeyE")}},window.addEventListener("keyup",e,!0))}return function(){window.removeEventListener("keyup",e,!0)}}),[o,r.id]),!o)return p.a.createElement(a.a,{title:p.a.createElement("p",{style:{textAlign:"center"}},__("编辑")+__("：")+__("E")),placement:"bottom"},p.a.createElement(Be.a,{type:"primary",onClick:function(){M.c&&Object(Ue.a)(r.slug)&&Object(Ue.b)(r.slug),i(!0),Object(G.a)("start","editButton")}},__("编辑")));var c="inline_block";return M.c&&null!=t&&t.enable_auto_publish&&o&&(c="none"),p.a.createElement("div",{id:"publishButtonContainer",style:{marginRight:8,display:c}})}var Ve=r(5914),He=(r(57),r(13)),Ke="index-module_nameTitle_PZiLN",Ye="index-module_editable_7Jdyy";function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Xe=__("无标题"),Je=function(e){var t=e.editable,r=e.title,n=e.saveTitle,o=Qe(Object(d.useState)(!1),2),a=o[0],i=o[1],c=Qe(Object(d.useState)(r||Xe),2),l=c[0],u=c[1],s=Object(d.useRef)(l),f=Object(d.useCallback)((function(){var e=s.current||Xe;n(e),u(e),s.current=e,i(!1)}),[n]);Object(d.useEffect)((function(){r!==s.current&&(u(r||Xe),s.current=r||Xe)}),[r]);var h=Object(d.useCallback)((function(e){u(e.target.value),s.current=e.target.value}),[]),m=Object(d.useCallback)((function(e){a&&e.target.select()}),[a]),y=Object(d.useCallback)((function(){t&&i(!0)}),[t]);return a?p.a.createElement(He.a,{autoFocus:!0,type:"text",maxLength:128,style:{width:200},value:l,onChange:h,onFocus:m,onBlur:f,onPressEnter:f}):p.a.createElement("span",{className:"".concat(Ke," ").concat(t?Ye:""),title:l,onClick:y},l)},$e=r(5725),et=r(5280),tt=r(5756),rt=r(6125),nt=r(6126),ot=r(5656),at=r(5443);function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function ct(){return ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ct.apply(null,arguments)}function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function st(){st=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(I([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==it(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(it(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function ft(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function dt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ft(a,n,o,i,c,"next",e)}function c(e){ft(a,n,o,i,c,"throw",e)}i(void 0)}))}}function pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gt(n.key),n)}}function ht(e,t,r){return t=yt(t),function(e,t){if(t&&("object"==it(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mt()?Reflect.construct(t,r||[],yt(e).constructor):t.apply(e,r))}function mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mt=function(){return!!e})()}function yt(e){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yt(e)}function vt(e,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vt(e,t)}function bt(e,t,r){return(t=gt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gt(e){var t=function(e,t){if("object"!=it(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==it(t)?t:t+""}var wt=Object(D.d)((function(){return r.e(1272).then(r.bind(null,7262))}),{suspense:!0}),_t=Object(D.d)((function(){return r.e(1284).then(r.bind(null,6407))}),{suspense:!0}),Et=Object(D.d)((function(){return r.e(1342).then(r.bind(null,4082))}),{suspense:!0}),Ot=Object(D.b)((function(){return r.e(1299).then(r.bind(null,1443)).then((function(e){return e.default.Login}))}),{suspense:!0}),At=Object(D.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(9),r.e(1355)]).then(r.bind(null,4117)).then((function(e){return e.ShareButton}))}),{suspense:!0}),St=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return bt(e=ht(this,t,[].concat(n)),"handleGetPopupContainer",(function(){return document.getElementById("headerOverlayContainer")})),bt(e,"showContentReportEntry",(function(){var t=e.props,r=t.doc,n=t.book,o=t.group,a=t.me,i=window.appData,c=i.isPublicCloud,l=i.share;return c&&r.user_id!==a.id&&(Object(ce.a)(o,n,r)||Object(ce.b)(l,n,r))})),bt(e,"isAnonymous",(function(){return!e.props.me.id})),bt(e,"showEditEntry",(function(){if(window.appData.sharePage)return!1;var t=e.props,r=t.doc,n=t.version;return!e.isSingleDocMode()&&(!n&&("Thread"!==r.type&&"Table"!==r.type&&("html"!==r.format&&(r.abilities&&r.abilities.update))))})),bt(e,"onChangeShare",function(){var t=dt(st().mark((function t(r){var n;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,le.a.docs.updateMeta(r,{ignoreGlobalMessage:!0});case 2:return n=t.sent,e.props.dispatch({type:"doc/update",payload:{public:n.public,password:n.password,indexed_level:n.indexed_level,share_expired_time:n.share_expired_time}}),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),bt(e,"beforeShareUpdate",(function(t){var r=e.props,n=r.book,o=r.doc;return!!n.enable_auto_publish||(!("public"in t)||t.public===ie.PRIVACY.private||(!!o.published_at||(c.a.warn(__("文档发布后才可以公开!")),!1)))})),bt(e,"handleWorkflowSaveTitle",(function(t){var r=t.detail;e.handleSaveTitle(r,{updateMeta:!1})})),bt(e,"handleSaveTitle",function(){var t=dt(st().mark((function t(r){var n,o,a,i,c,l=arguments;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(l.length>1&&void 0!==l[1]?l[1]:{updateMeta:!0}).updateMeta,o=e.props,a=o.doc,i=o.dispatch,c={id:a.id,title:r},!n){t.next=7;break}return t.next=7,le.a.docs.updateMeta(c);case 7:i({type:"doc/update",payload:c}),ue.a.emit("rename",ut(ut({},c),{},{doc_id:c.id}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),bt(e,"handleGetDocContent",(function(){var t,r=e.props,n=r.doc;return r.editMode&&"function"==typeof(null===(t=window)||void 0===t||null===(t=t.__engine)||void 0===t?void 0:t.getDocument)?window.__engine.getDocument("text/lake"):n.content})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){setTimeout((function(){wt.start(),_t.start(),Et.start()}),2e3),window.addEventListener("WORKFLOW_EVENT.saveTitle",this.handleWorkflowSaveTitle)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("WORKFLOW_EVENT.saveTitle",this.handleWorkflowSaveTitle)}},{key:"isSingleDocMode",value:function(){return"singleDoc"in this.props.location.query}},{key:"isNotReadBook",value:function(){var e;return!1===(null===(e=this.props.book)||void 0===e||null===(e=e.abilities)||void 0===e?void 0:e.read)}},{key:"showBackToToc",value:function(){var e,t,r=this.props,n=r.doc,o=r.book;return!r.version&&!!o&&this.isSingleDocMode()&&((null===(e=o.abilities)||void 0===e?void 0:e.read)||(null===(t=n.abilities)||void 0===t?void 0:t.update))}},{key:"showShareToDigitalGarden",value:function(){return!this.isSingleDocMode()&&Object(ot.a)(this.props)}},{key:"showShareEntry",value:function(){var e,t;if(window.appData.sharePage)return!1;var r=this.props,n=r.doc,o=r.version;return!this.isSingleDocMode()&&!o&&((null===(e=n.abilities)||void 0===e?void 0:e.share)||(null===(t=n.abilities)||void 0===t?void 0:t.create_collaborator))}},{key:"showShareCheckout",value:function(){var e;if(window.appData.sharePage)return!1;var t=this.props,r=t.doc,n=t.version;return!this.isSingleDocMode()&&!n&&(null===(e=r.abilities)||void 0===e?void 0:e.share)}},{key:"showCollaborationEntry",value:function(){if(window.appData.sharePage)return!1;var e=this.props,t=e.doc;return!e.version&&t.abilities&&t.abilities.create_collaborator}},{key:"showSkylinkEntry",value:function(){var e=this.props,t=e.doc;return!e.version&&["Doc","Board","Sheet"].includes(t.type)}},{key:"renderEdit",value:function(){var e=this.props,t=e.doc,r=e.book;if(this.showEditEntry()){var n=t.origin_format||t.format;return p.a.createElement("span",{className:"header-action-item",style:{marginLeft:8}},"markdown"!==n&&p.a.createElement(We,{book:r,doc:t}),"markdown"===n&&p.a.createElement(Ve.a,{book:r,doc:t}))}return null}},{key:"render",value:function(){var e,t,r,n,o,i,c,l=this,u=this.props,s=u.book,f=u.group,d=u.me,h=u.doc,m=u.version,y=u.style,v=u.shouldHideLogo,b=u.shouldShowSeparator,w=u.showBreadcrumb,_=u.editMode,E=window.appData.organization,O=g()("header",this.props.className,[at.a.wrapper],bt({"doc-version-head":!!m},at.a.docTypeHead,"Doc"===h.type)),A=h.mark,S={id:null==A?void 0:A.id,target_id:null==h?void 0:h.id,target_type:null==A?void 0:A.target_type,action_tags:null==A?void 0:A.action_tags},k=p.a.createElement(de.a,{to:"/dashboard",className:at.a.yuqueLogo},p.a.createElement(he.a,{height:16}));return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{id:"headerOverlayContainer",className:at.a.headerOverlayContainer}),p.a.createElement("div",{id:"header",className:O,"data-header-mode":"title","data-aspm":"c36321",style:y},p.a.createElement("div",{className:"doc-head-inner"},p.a.createElement("div",{className:g()("header-crumb","title-visible",{"with-separator":b&&!M.c,"with-separator-desktop":b&&M.c,"only-doc-title":v&&!w})},h.loaded?h.error?null!==(i=h.error)&&void 0!==i&&i.docTitle?p.a.createElement("span",{className:"doc-title"},null==h||null===(c=h.error)||void 0===c?void 0:c.docTitle):null:p.a.createElement(p.a.Fragment,null,(l.isSingleDocMode()||l.isNotReadBook())&&k,p.a.createElement(Je,{title:h.title,editable:null==h||null===(n=h.abilities)||void 0===n?void 0:n.update,saveTitle:l.handleSaveTitle}),p.a.createElement(fe.a,{buttonClassName:at.a.offlineIcon},p.a.createElement(rt.a,{doc:h,book:s,group:f,organization:E,me:d,canShare:l.showShareCheckout()})),"Table"===(null==h?void 0:h.type)&&h.loaded&&p.a.createElement(Oe,null),"Table"===(null==h?void 0:h.type)&&h.loaded&&p.a.createElement("span",{style:{marginLeft:4}},p.a.createElement(je,{doc:h,editable:null===(o=h.abilities)||void 0===o?void 0:o.update})),"Table"!==(null==h?void 0:h.type)&&h.loaded&&p.a.createElement("div",{style:{marginLeft:4}},p.a.createElement("div",{id:"docSaveTipContainer"})),"Doc"===(null==h?void 0:h.type)&&!_&&p.a.createElement(fe.a,{buttonClassName:at.a.offlineButton},p.a.createElement(_t,{isTagMode:!0,showClose:!0})),"Table"!==(null==h?void 0:h.type)&&!_&&p.a.createElement(wt,{doc:h,showClose:!0}),!_&&p.a.createElement(Et,{doc:h,type:"Doc",tagMode:!0}),M.c&&!_&&p.a.createElement(ve,null)):null),p.a.createElement("div",{className:"header-action"},null!=h&&h.error?null:p.a.createElement(p.a.Fragment,null,h.id&&!m&&p.a.createElement(fe.a,{buttonClassName:at.a.offlineButton},p.a.createElement("div",{className:at.a.mark,"data-aspm-click":"d223108"},p.a.createElement(ae.a,{key:"mark-doc-".concat(h.id,"-").concat(_),me:d,iconSize:20,target:S,targetType:"Doc",isMiniType:!0,getPopupContainer:this.handleGetPopupContainer}))),this.showCollaborationEntry()&&p.a.createElement(fe.a,{buttonClassName:at.a.offlineButton},p.a.createElement("div",{className:at.a.collaborate},p.a.createElement(At,{shareViewType:"DOC",key:"collaborator-doc-".concat(h.id,"-").concat(_),targetResource:h,organization:E,book:s,group:f,canCollaborator:null===(e=h.abilities)||void 0===e?void 0:e.create_collaborator,onlyCollaborator:!0,me:d,getPopupContainer:this.handleGetPopupContainer},p.a.createElement(a.a,{title:__("协作"),placement:"bottom"},p.a.createElement("span",{"data-testid":"ViewerHeader:doc-action-collaborate","data-aspm-click":"d225876",className:at.a.iconWrapper},p.a.createElement(ne.default,{height:20,width:20})))))),"Doc"===h.type&&p.a.createElement($e.b,{group:f,book:s,doc:h,getDocContent:this.handleGetDocContent}),this.showShareToDigitalGarden()&&(!_||"Table"===h.type)&&p.a.createElement(fe.a,{buttonClassName:at.a.offlineButton},p.a.createElement(oe.a,{docId:h.id,currentUser:window.appData.me})),"Show"===h.type&&p.a.createElement("div",{className:[at.a.collaborate,at.a.playButton].join(" ")},p.a.createElement(et.a,null)),this.isAnonymous()&&p.a.createElement(fe.a,{buttonClassName:at.a.offlineLargeSpaceButton},p.a.createElement(Ot,{goto:window.location.href})),"Table"===h.type?p.a.createElement(Fe,{doc:h,me:d}):p.a.createElement("div",{id:"collabUsersContainer"}),this.showBackToToc()&&p.a.createElement(fe.a,{buttonClassName:at.a.offlineLargeSpaceButton},p.a.createElement(tt.a,{doc:h,book:s,group:f})),this.showShareEntry()&&p.a.createElement(fe.a,{buttonClassName:at.a.offlineLargeSpaceButton},p.a.createElement(At,{shareViewType:"DOC",key:"share-doc-".concat(h.id,"-").concat(_),targetResource:h,onChangeShare:this.onChangeShare,organization:E,book:s,group:f,me:d,canShare:null===(t=h.abilities)||void 0===t?void 0:t.share,canCollaborator:null===(r=h.abilities)||void 0===r?void 0:r.create_collaborator,getPopupContainer:this.handleGetPopupContainer,beforeShareUpdate:this.beforeShareUpdate})),this.renderEdit(),p.a.createElement("span",{className:"header-action-item",style:{marginLeft:8},id:"docHeadRightWrapper"},p.a.createElement(nt.a,{enableComment:s.enable_comment,docType:h.type})))))))}}])&&pt(r.prototype,n),o&&pt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(p.a.Component);St.propTypes={className:v.a.string,me:v.a.object,group:v.a.object,book:v.a.object,doc:v.a.object,note:v.a.object,version:v.a.object,history:v.a.object,showVersion:v.a.func,dispatch:v.a.func.isRequired,style:v.a.object,shouldHideLogo:v.a.bool,shouldShowSeparator:v.a.bool,editMode:v.a.bool};var kt=p.a.memo((function(e){var t=e.doc,r=e.me,n=e.dispatch,o=Object(se.b)().editMode,a=Object(w.useParams)().doc;return Object(pe.a)((function(){var e,o=function(){var e=dt(st().mark((function e(){var o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.id||!t.id||"online"!==t.created_by){e.next=11;break}return e.prev=1,e.next=4,le.a.mine.marks.findOne({target_type:"Doc",id:t.id});case 4:o=e.sent,n({type:"doc/update",payload:{mark:o.markAction,marked:!!o.markAction}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();M.c&&(null===(e=window.appData)||void 0===e?void 0:e.settings.enable_desktop_force_local)&&t.slug===a&&o()}),[r.id,a]),p.a.createElement(St,ct({editMode:o},e))})),xt=Object(_.d)((function(e){return{me:e.me,group:e.group,book:e.book,doc:e.doc,review:e.review,organization:e.organization}}))(Object(w.withRouter)(kt)),jt=r(6132),Pt=r(3892),Ct="ReaderLayout-module_wrapper_l-8F+",It="ReaderLayout-module_desktopAsideHeadWrapper_Lb35v",Tt="ReaderLayout-module_higherBackTop_RpYEv",Lt="ReaderLayout-module_superSidebarExpanded_giBxr",Dt="ReaderLayout-module_asidePinned_owRmW",Nt="ReaderLayout-module_crumb_wF-5C",Rt="ReaderLayout-module_yuqueLogo_KdpAI",Mt="ReaderLayout-module_miniDropdown_7uya+",Ft="ReaderLayout-module_crumbText_l2jpO",Bt="ReaderLayout-module_bookInfo_FivMr",qt="ReaderLayout-module_bookName_7LuCC",zt="ReaderLayout-module_icon_HU4bU",Gt="ReaderLayout-module_text_3S3RN",Ut="ReaderLayout-module_asideWrapper_+Fdu8",Wt="ReaderLayout-module_onlyTocAside_ljsfR",Vt="ReaderLayout-module_aside_WX6k7",Ht="ReaderLayout-module_asideHead_dVgz0",Kt="ReaderLayout-module_asideHeadDesktop_5FMGi",Yt="ReaderLayout-module_iconBackDesktop_NwnxN",Qt="ReaderLayout-module_iconDesktop_wKHzr",Zt="ReaderLayout-module_bookInfoDesktop_-b+Ad",Xt="ReaderLayout-module_bookNameDesktop_bSQ1+",Jt="ReaderLayout-module_groupName_aJtI8",$t="ReaderLayout-module_asideNav_-Kxml",er="ReaderLayout-module_pinTip_w+Yhb",tr="ReaderLayout-module_pinWrapper_8A7Ri",rr="ReaderLayout-module_pinIconWrapper_WglAw",nr="ReaderLayout-module_arrowRight_xXebO",or="ReaderLayout-module_dragbar_NUlrA",ar="ReaderLayout-module_dragging_gY9-f",ir="ReaderLayout-module_privateIcon_zehlB",cr="ReaderLayout-module_navIcon_eoaa4",lr="ReaderLayout-module_nav_k8NJg",ur="ReaderLayout-module_navDesktop_Ftvl0",sr="ReaderLayout-module_searchNav_KneVs",fr="ReaderLayout-module_searchBar_F9DSq",dr="ReaderLayout-module_searchHotKey_1i9So",pr="ReaderLayout-module_selected_sXnrs",hr="ReaderLayout-module_asideActions_3HOeJ",mr="ReaderLayout-module_asideActionsDesktop_P8EpV",yr="ReaderLayout-module_actionItem_CbOzz",vr="ReaderLayout-module_actionItemDesktop_DRpp5",br="ReaderLayout-module_bookOverviewMoreActions_fKcZR",gr="ReaderLayout-module_bookOverviewMoreActionsDesktop_c8LaB",wr="ReaderLayout-module_editModeBody_PqN0O",_r=r(1812),Er=r(1818),Or=r(1762),Ar=r(712),Sr=r(248),kr=function(e){var t,r,n=e.me,o=e.org,a=e.group,i=null;null!==(t=a.abilities)&&void 0!==t&&t.read&&(i="User"===a.type&&a.id===n.id?p.a.createElement(de.a,{to:{pathname:"/dashboard/books",state:{page:"dashboard"}},className:Ft},__("个人知识库")):p.a.createElement(de.a,{to:{pathname:"/".concat(a.login),state:{page:"dashboard"}},className:Ft,title:a.name},a.name));var c=p.a.createElement(de.a,{to:{pathname:"/dashboard",state:{page:"dashboard"}},className:Rt},p.a.createElement(_r.default,{width:16,height:16}));return o&&o.id&&o.logo&&(c=p.a.createElement(de.a,{to:{pathname:"/dashboard",state:{page:"dashboard"}},className:Rt},p.a.createElement(Ar.c,{src:o.logo,size:16}))),!Object(Sr.g)(a)||null!=o&&null!==(r=o.abilities)&&void 0!==r&&r.read_home||(c=p.a.createElement(Er.default,{width:16,height:16})),window.appData.isYuque||(c=p.a.createElement(de.a,{to:{pathname:"/dashboard",state:{page:"dashboard"}},className:Rt},p.a.createElement(he.b,{height:16,useNewLogo:!0}))),p.a.createElement("div",{className:Nt},c,a.abilities.read&&p.a.createElement(Or.default,{className:Mt,width:14,height:14}),i)},xr=r(1020),jr=r(6176),Pr=r(76),Cr=r(403),Ir=r(2787),Tr=r(163),Lr=r(5744),Dr=(r(246),r(123)),Nr=(r(342),r(104)),Rr=(r(851),r(263)),Mr=r(85),Fr=r(508),Br=r(191),qr=r.n(Br),zr=r(1791),Gr=r(1077),Ur=r(1813),Wr=r(1809),Vr=r(1805),Hr=r(4078),Kr=r(261),Yr=r(5754),Qr=r(128),Zr=r(1811),Xr=r(1810),Jr="CatalogTreeCollapseTrigger-module_actionItem_ym+tH",$r="CatalogTreeCollapseTrigger-module_icon_k49Ct",en=r(5471);function tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var nn={whiteSpace:"nowrap"};function on(e){return e}var an=function(e){var t=e.onFoldAll,r=void 0===t?en.c:t,n=e.onUnfoldAll,o=void 0===n?en.c:n,i=tn(Object(d.useState)(!1),2),c=i[0],l=i[1],u=Object(d.useCallback)((function(){l(!0),r()}),[r]),s=Object(d.useCallback)((function(){l(!1),o()}),[o]);return p.a.createElement(p.a.Fragment,null,c?p.a.createElement(a.a,{title:__("全部展开"),getPopupContainer:on,overlayInnerStyle:nn},p.a.createElement("span",{className:Jr,onClick:s},p.a.createElement(Zr.default,{className:$r}))):p.a.createElement(a.a,{title:__("全部折叠"),getPopupContainer:on,overlayInnerStyle:nn},p.a.createElement("span",{className:Jr,onClick:u},p.a.createElement(Xr.default,{className:$r}))))},cn={asiderTab:"BookCatalog-module_asiderTab_0aJLs",tabBar:"BookCatalog-module_tabBar_BKeYX",tabBarPopover:"BookCatalog-module_tabBarPopover_TTy3+",tabItem:"BookCatalog-module_tabItem_CbnYy",subMenuIcon:"BookCatalog-module_subMenuIcon_3FZt3",tabTitle:"BookCatalog-module_tabTitle_Efcqe",asideActionsCont:"BookCatalog-module_asideActionsCont_31lvb",actionItem:"BookCatalog-module_actionItem_gOq-V",icon:"BookCatalog-module_icon_7p-9h",actionItemGap:"BookCatalog-module_actionItemGap_jbUf6",selectPanel:"BookCatalog-module_selectPanel_F2B3H",selectTitle:"BookCatalog-module_selectTitle_LPXkO",disabled:"BookCatalog-module_disabled_nvCu5",selectItem:"BookCatalog-module_selectItem_Ja1sM",divider:"BookCatalog-module_divider_4+nla",sideCatalog:"BookCatalog-module_sideCatalog_wpCdP",deskTopSideCatalog:"BookCatalog-module_deskTopSideCatalog_FVPUN"},ln=r(6158),un={CATALOG:{value:"Catalog",text:__("目录")},ALLDOCS:{value:"All_Docs",text:__("全部文档")}},sn=r(68),fn=r.n(sn),dn=r(249),pn=r(112),hn=r(5356),mn="EmptyPlaceholder-module_container_SWIrn",yn="EmptyPlaceholder-module_img_46caC",vn="EmptyPlaceholder-module_tip_enK4k",bn="EmptyPlaceholder-module_createText_nJumD";function gn(e){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(e)}function wn(){wn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(I([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==gn(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(gn(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function _n(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function En(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){_n(a,n,o,i,c,"next",e)}function c(e){_n(a,n,o,i,c,"throw",e)}i(void 0)}))}}function On(e){var t=e.book,r=Object(w.useHistory)(),n=Object(_.e)(),o=function(){var e=En(wn().mark((function e(){var r;return wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.a.docs.find({book_id:t.id,only_order_by_id:!0});case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e.catch(0),c.a.error(e.t0.msg),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=En(wn().mark((function e(){var a,i,c,l,u;return wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={insert_to_catalog:!0,action:"prependChild",book_id:t.id,format:fn.a.FORMAT.LAKE,target_uuid:null,type:"Doc"},e.next=3,Q.a.createDoc(a,void 0,{useOriginResp:!0});case 3:i=e.sent,c=i.data,l=i.toc,u="/".concat(t.namespace,"/").concat(c.slug,"/edit"),r.push(u),n({type:"book/updateToc",payload:l}),Object(_.c)(En(wn().mark((function e(){var r;return wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:r=e.sent,n({type:"book/updateDocs",payload:r}),n({type:"searchtool/updateBookToc",payload:{book_id:t.id,docs:r}});case 5:case"end":return e.stop()}}),e)})))),Object(pn.spmClick)("c323993.d353734");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(hn.a,{disableHeight:!0},(function(e){var r,n=e.width;return p.a.createElement("div",{className:mn,style:{width:n}},p.a.createElement(dn.a,{src:"https://gw.alipayobjects.com/mdn/prod_resource/afts/img/A*2pAiTKqZ54AAAAAAAAAAAAAAARQnAQ",darkAlpha:.7,className:yn}),null!=t&&null!==(r=t.abilities)&&void 0!==r&&r.create_doc?p.a.createElement("div",{className:vn},__("知识库为空，你可以{textNode}",{textNode:p.a.createElement(Be.a,{type:"text",className:bn,onClick:a},__("新建文档"))})):p.a.createElement("div",{className:vn},__("当前知识库为空")))}))}function An(e){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},An(e)}function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function xn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(r),!0).forEach((function(t){Mn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pn(){Pn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(I([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==An(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(An(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Cn(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function In(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Cn(a,n,o,i,c,"next",e)}function c(e){Cn(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Tn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fn(n.key),n)}}function Ln(e,t,r){return t=Nn(t),function(e,t){if(t&&("object"==An(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Dn()?Reflect.construct(t,r||[],Nn(e).constructor):t.apply(e,r))}function Dn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Dn=function(){return!!e})()}function Nn(e){return Nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nn(e)}function Rn(e,t){return Rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rn(e,t)}function Mn(e,t,r){return(t=Fn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fn(e){var t=function(e,t){if("object"!=An(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=An(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==An(t)?t:t+""}var Bn=Object(D.b)((function(){return r.e(1246).then(r.bind(null,6403))}),{suspense:!0}),qn=Object(D.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(9),r.e(11),r.e(1264)]).then(r.bind(null,7231))}),{suspense:!0}),zn=Rr.a.TabPane,Gn=[{id:1,value:"created_at",title:__("按创建时间排序")},{id:2,value:"content_updated_at",title:__("按更新时间排序")},{id:3,value:"title",title:__("按标题排序")}],Un={whiteSpace:"nowrap"},Wn=function(e){function t(e){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Mn(n=Ln(this,t,[e]),"docSelectHandler",(function(e){var t=e.doc,r=e.path;n.revealDoc(t,!1),n.props.history.push(r)})),Mn(n,"getBookDocs",function(){var e=In(Pn().mark((function e(t){var r;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.a.docs.find({book_id:t,only_order_by_id:!0});case 3:return r=e.sent,n.props.dispatch({type:"searchtool/updateBookToc",payload:{book_id:t,docs:r}}),e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),c.a.error(e.t0.msg),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),Mn(n,"loadDocListViewerData",function(){var e=In(Pn().mark((function e(t){var r;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isDocListLoading:!0}),e.next=3,n.getBookDocs(t);case 3:return r=e.sent,n.props.dispatch({type:"book/updateDocs",payload:r}),n.setState({isDocListLoading:!1,bookDocs:r}),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Mn(n,"getSlugFromUrl",(function(e){var t=n.props.book,r=3;t.namespace&&t.namespace.startsWith("books/share/")&&(r=4);var o=e.pathname.split("/")[r];if(o&&o.trim())return o=o.trim()})),Mn(n,"onCommandsExecuted",(function(e){e===Qr.a.CATALOG.create_title.cmd&&n.createTitle({activeCatalogTab:!0}),e===Qr.a.CATALOG.create_link.cmd&&n.createLink({activeCatalogTab:!0})})),Mn(n,"handleTabChange",function(){var e=In(Pn().mark((function e(t){var r,o,a,i,c,l,u,s;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setActiveTabKey(t),n.setState({tabVisible:!1}),o=n.props,a=o.currentDocSlug,i=o.book,c=i.docs,n.setState({bookDocs:c}),l=c.find((function(e){return e.slug===a})),t!==un.ALLDOCS.value||c.length){e.next=11;break}return e.next=9,n.loadDocListViewerData(i.id);case 9:u=e.sent,l=u.find((function(e){return e.slug===a}));case 11:s=setTimeout((function(){n.revealDoc(l),clearTimeout(s)})),null===(r=n.props)||void 0===r||r.onTabChange(t);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Mn(n,"handleCatalogScrollToTop",(function(){var e;null===(e=n.catalogViewer.current)||void 0===e||e.scrollToTop()})),Mn(n,"handleCatalogScrollToItem",(function(e){var t,r=n.props.book.toc.find((function(t){return t.doc_id===e.id||t.url===e.slug}));r&&(null===(t=n.catalogViewer.current)||void 0===t||t.scrollToItem(r.uuid))})),Mn(n,"handleDocListScrollToItem",(function(e){var t;null===(t=n.docListViewer.current)||void 0===t||t.scrollToItem(e)})),Mn(n,"revealDoc",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(e.id||e.slug)&&(Object(Fr.isDocNotInToc)(e,n.props.book.toc)&&!t?n.state.activeTabKey!==un.ALLDOCS.value?n.setActiveTabKey(un.ALLDOCS.value,In(Pn().mark((function t(){return Pn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.loadDocListViewerData(n.props.book.id);case 2:n.handleDocListScrollToItem(e);case 3:case"end":return t.stop()}}),t)})))):n.handleDocListScrollToItem(e):n.state.activeTabKey===un.CATALOG.value?n.handleCatalogScrollToItem(e):n.handleDocListScrollToItem(e))})),Mn(n,"handleSearchSelect",(function(e){var t=setTimeout((function(){n.revealDoc(e,!1),clearTimeout(t)}))})),Mn(n,"handleRevealDoc",(function(){var e=n.props.currentDocSlug;n.revealDoc({slug:e},!1)})),Mn(n,"handleAddToCatalogSuccess",(function(e){var t="/".concat(n.props.book.namespace,"/").concat(e.slug);n.props.history.push(t),n.setActiveTabKey(un.CATALOG.value,(function(){n.handleCatalogScrollToItem(e)}))})),Mn(n,"handleMoveToStagingBoxSuccess",(function(e){var t=n.props.currentDocSlug;if("DOC"===e.type&&t===e.url){var r="/".concat(n.props.book.namespace,"/").concat(t);n.props.history.push(r)}}));var o=e.space,a=e.book,i=e.group;n.catalogActiveTabKeyStorage=new ln.a(o,i,a);var l=n.catalogActiveTabKeyStorage.getTab()||null;return null===(r=n.props)||void 0===r||r.onTabChange(l),n.state={activeTabKey:l,isDocListLoading:!1,tabVisible:!1,bookDocs:a.docs,revealDocVisible:!1},n.catalogViewer=p.a.createRef(),n.docListViewer=p.a.createRef(),n.revealDocVisibleLocker=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rn(e,t)}(t,e),r=t,n=[{key:"setActiveTabKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.setState({activeTabKey:e},t),r&&this.catalogActiveTabKeyStorage.setTab(e),this.setState({revealDocVisible:!1})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.currentDocSlug;if(window.sessionStorage.getItem("readerEditModeChange"))window.sessionStorage.removeItem("readerEditModeChange");else if(this.state.activeTabKey===un.ALLDOCS.value)this.revealDocVisibleLocker=!1,this.loadDocListViewerData(this.props.book.id).then((function(){var r=setTimeout((function(){e.revealDoc({slug:t}),clearTimeout(r)}))}));else var r=setTimeout((function(){e.revealDoc({slug:t}),e.revealDocVisibleLocker=!1,clearTimeout(r)}),200);Hr.c.on(Hr.a.DOC_SELECT,this.docSelectHandler)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.space,r=e.book,n=e.group;r.id!==this.props.book.id&&(this.loadDocListViewerData(r.id),this.catalogActiveTabKeyStorage=new ln.a(t,n,r),this.setActiveTabKey(this.catalogActiveTabKeyStorage.getTab()))}},{key:"componentWillUnmount",value:function(){Hr.c.off(Hr.a.DOC_SELECT,this.docSelectHandler)}},{key:"createTitle",value:function(){var e,t=this,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).activeCatalogTab;null===(e=this.catalogViewer.current)||void 0===e||e.onAction({target_uuid:null,action:Mr.ACTIONS.insert,type:Mr.TYPES.title}),r&&this.setActiveTabKey(un.CATALOG.value,(function(){t.handleCatalogScrollToTop()}))}},{key:"createLink",value:function(){var e,t=this,r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).activeCatalogTab;null===(e=this.catalogViewer.current)||void 0===e||e.showCatalogLinkForm({target_uuid:null,action:Mr.ACTIONS.insert,type:Mr.TYPES.title,onSubmit:function(){r&&t.setActiveTabKey(un.CATALOG.value,(function(){t.handleCatalogScrollToTop()}))}})}},{key:"handleSortSelectClick",value:function(e){this.setState({tabVisible:!1}),this.catalogActiveTabKeyStorage.setSort(e)}},{key:"canCreateDoc",value:function(){var e=this.props.book;return e.abilities&&e.abilities.create_doc}},{key:"handleCatalogDidMount",value:function(){Object(G.b)("finish-catalog-render")}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.space,o=r.book,a=r.group,c=r.history,l=r.dispatch,u=r.currentDocSlug,s=window.appData.locale;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Rr.a,{className:cn.asiderTab,activeKey:this.state.activeTabKey,onChange:this.handleTabChange,renderTabBar:function(e){var r,n,o;return p.a.createElement("div",{className:cn.tabBar,onMouseOver:function(){Bn.preload(),qn.preload()}},p.a.createElement(i.a,{noArrow:!0,getPopupContainer:function(e){return e.parentNode},overlayClassName:cn.tabBarPopover,placement:"bottomLeft",trigger:"click",visible:t.state.tabVisible,onVisibleChange:function(e){t.setState({tabVisible:e})},content:p.a.createElement("div",{className:cn.selectPanel},p.a.createElement("div",{className:cn.selectList},p.a.createElement("div",{className:cn.selectItem,onClick:function(){return e.onTabClick(un.CATALOG.value)}},p.a.createElement("span",null,p.a.createElement(zr.default,{width:16,height:16}),p.a.createElement("span",null,un.CATALOG.text)),t.state.activeTabKey===un.CATALOG.value&&p.a.createElement(Gr.default,null)),p.a.createElement("div",{className:cn.selectItem,onClick:function(){return e.onTabClick(un.ALLDOCS.value)}},p.a.createElement("span",null,p.a.createElement(Ur.default,{width:16,height:16}),p.a.createElement("span",null,un.ALLDOCS.text)),t.state.activeTabKey===un.ALLDOCS.value&&p.a.createElement(Gr.default,null))),t.state.activeTabKey===un.ALLDOCS.value&&p.a.createElement(p.a.Fragment,null,p.a.createElement(Nr.a,null),p.a.createElement("div",{className:cn.selectTitle},p.a.createElement("span",null,__("排序"))),p.a.createElement("div",{className:g()(cn.selectList,Mn({},cn.disabled,t.state.activeTabKey!==un.ALLDOCS.value))},Gn.map((function(e){return p.a.createElement("div",{key:e.value,className:cn.selectItem,onClick:function(){return t.handleSortSelectClick(e.value)}},p.a.createElement("span",null,e.title),t.state.activeTabKey===un.ALLDOCS.value&&t.catalogActiveTabKeyStorage.getSort()===e.value&&p.a.createElement(Gr.default,null))})))))},p.a.createElement("span",{className:cn.tabTitle,onClick:function(e){t.setState((function(e){return{tabVisible:!e.tabVisible}}))}},t.state.activeTabKey===un.CATALOG.value?p.a.createElement(zr.default,{width:16,height:16,className:cn.tabIcon}):p.a.createElement(Ur.default,{width:16,height:16,className:cn.tabIcon}),p.a.createElement("span",{className:cn.tabName},t.state.activeTabKey===un.CATALOG.value?un.CATALOG.text:un.ALLDOCS.text))),p.a.createElement("div",{className:cn.asideActionsCont},t.state.activeTabKey===un.CATALOG.value&&t.state.revealDocVisible&&!t.revealDocVisibleLocker&&p.a.createElement(Kn,{handleRevealDoc:t.handleRevealDoc}),t.state.activeTabKey===un.CATALOG.value&&"en-us"===s&&p.a.createElement(Yn,{handleTranslateToc:null===(r=t.catalogViewer.current)||void 0===r?void 0:r.translateToc}),t.state.activeTabKey===un.CATALOG.value&&p.a.createElement(an,{onFoldAll:null===(n=t.catalogViewer.current)||void 0===n?void 0:n.foldAll,onUnfoldAll:null===(o=t.catalogViewer.current)||void 0===o?void 0:o.unFoldAll})))}},p.a.createElement(zn,{key:un.CATALOG.value},0===o.toc.length&&p.a.createElement(On,{book:o}),p.a.createElement("div",{style:{display:0!==o.toc.length?"initial":"none"}},p.a.createElement(Bn,{ref:this.catalogViewer,className:M.c?cn.deskTopSideCatalog:cn.sideCatalog,book:o,currentDocSlug:u,onDidMount:this.handleCatalogDidMount,enablePersistExpandedKeys:!0,onCurrentItemVisibleChange:function(e){t.setState({revealDocVisible:!e})}}))),p.a.createElement(zn,{key:un.ALLDOCS.value},p.a.createElement("div",{style:{minHeight:100,paddingTop:8}},!this.state.isDocListLoading&&0===(null===(e=this.state.bookDocs)||void 0===e?void 0:e.length)&&p.a.createElement(On,{book:o}),p.a.createElement(Dr.a,{delay:100,spinning:this.state.isDocListLoading,style:{display:0!==this.state.bookDocs.length?"initial":"none"}},p.a.createElement(qn,{ref:this.docListViewer,currentDocSlug:u,history:c,group:a,book:o,space:n,onAddToCatalogSuccess:this.handleAddToCatalogSuccess}))))),p.a.createElement(Qn,{book:o,dispatch:l}))}}],n&&Tn(r.prototype,n),o&&Tn(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(d.PureComponent);Wn.propTypes={space:v.a.object.isRequired,group:v.a.object.isRequired,book:v.a.object.isRequired,history:v.a.object.isRequired,currentDocSlug:v.a.string,dispatch:v.a.func,onTabChange:v.a.func};var Vn=Object(d.memo)(Wn,(function(e,t){var r=["book","doc","group","space","isOnline","currentDocSlug","ref"];return o()(qr.a.apply(void 0,[e].concat(r)),qr.a.apply(void 0,[t].concat(r)))}));var Hn=Object(Kr.b)((function(e){var t=p.a.useRef(),r=p.a.useContext(U.a).ref,n=Object(pe.b)(),o=Object(w.useParams)().doc;r.current=t;var a=jn(jn({ref:t},e),{},{currentDocSlug:o,isOnline:n});return p.a.createElement(Vn,a)}),!0);function Kn(e){var t=e.handleRevealDoc,r=Sn(Object(d.useState)({opacity:0}),2),n=r[0],o=r[1];return Object(d.useEffect)((function(){o({opacity:1})}),[]),p.a.createElement(a.a,{title:__("目录定位"),getPopupContainer:function(e){return e.parentNode},overlayInnerStyle:Un},p.a.createElement("span",{style:n,className:cn.actionItem,onClick:t},p.a.createElement(Wr.default,{className:cn.icon})))}function Yn(e){var t=e.handleTranslateToc,r=Object(_.f)((function(e){return e.book})),n=Sn(Object(d.useState)(r.toc.map((function(e){return e.title}))),2),o=n[0],i=n[1],l=Sn(Object(d.useState)(Object(Yr.a)(o.join(" "))),2),u=l[0],s=l[1],f=Sn(Object(d.useState)("en"),2),h=f[0],m=f[1];Object(d.useEffect)((function(){var e=r.toc.map((function(e){return e.title})),t=Object(Yr.a)(e.join(" ")),n="zh"===t?"en":"zh";i(e),s(t),m(n)}),[r.toc]);var y=function(){var e=In(Pn().mark((function e(){var n,a,l,f;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"en"!==h){e.next=14;break}return e.next=4,t(o,u,h,r.toc);case 4:n=e.sent,c.a.loading(__("正在智能翻译...")),a=n.map((function(e){return e.title})),l=Object(Yr.a)(a.join(" ")),f="zh"===l?"en":"zh",i(a),s(l),m(f),e.next=15;break;case 14:window.location.reload();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();return p.a.createElement(a.a,{title:"en"===h?__("翻译为英文"):__("查看原文"),getPopupContainer:function(e){return e.parentNode},overlayInnerStyle:Un},p.a.createElement("span",{className:cn.actionItem,onClick:y},p.a.createElement(Vr.default,{className:cn.icon})))}function Qn(e){var t=e.book,r=e.dispatch;return Object(d.useEffect)((function(){function e(e){var n=e.title,o=t.toc.map((function(t){return t.doc_id===e.doc_id?jn(jn({},t),{},{title:n}):t})),a=(t.docs||[]).map((function(t){return t.id===e.doc_id?jn(jn({},t),{},{title:n}):t}));Object(_.c)((function(){r({type:"book/updateToc",payload:o}),r({type:"book/updateDocs",payload:a})}))}return ue.a.on("rename",e),function(){ue.a.off("rename",e)}}),[t.docs,t.toc]),null}Qn.propTypes={book:v.a.object.isRequired,dispatch:v.a.func};var Zn=r(5903),Xn=r(14),Jn=r.n(Xn),$n=r(1420),eo={tourWrapper:"index-module_tourWrapper_I53J1",arrowBreath:"index-module_arrowBreath_b5SY-",contentWrapper:"index-module_contentWrapper_9Fb0h",touranimation:"index-module_touranimation_DZMgq",arrow:"index-module_arrow_FICIV",illustrationArrow:"index-module_illustrationArrow_F9d+G",normalContent:"index-module_normalContent_GYSK1",title:"index-module_title_9Wmg4",desc:"index-module_desc_1Ps52",illustrationContent:"index-module_illustrationContent_rQHhQ",illustrationWrapper:"index-module_illustrationWrapper_iCWzN",illustrationBody:"index-module_illustrationBody_q2Exq",buttonWrapper:"index-module_buttonWrapper_QkoaE",closeButton:"index-module_closeButton_XVz1u",button:"index-module_button_DVuUI",closeWrapper:"index-module_closeWrapper_5PWk5",close:"index-module_close_54-BK",blackClose:"index-module_blackClose_ZxGgt",breathBottomLeft:"index-module_breathBottomLeft_q-MMb",breathAnimationBottomLeft:"index-module_breathAnimationBottomLeft_bzq1S",breathDefault:"index-module_breathDefault_eer42",breathAnimationDefault:"index-module_breathAnimationDefault_LktlS"};function to(e){return to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},to(e)}function ro(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function no(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(r),!0).forEach((function(t){oo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=to(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=to(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==to(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ao(){ao=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(I([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==to(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(to(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function io(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var uo=function(e){var t=e.steps,r=e.onComplete,n=e.tip,o=e.createdAt,a=co(Object(d.useState)(0),2),i=a[0],c=a[1],l=co(Object(d.useState)(!1),2),u=l[0],s=l[1],f=t[i],h=document.body,y=Object(d.useRef)(null),v=co(Object(d.useState)({left:"-100%",top:"-100%"}),2),b=v[0],w=v[1];if(Object(d.useEffect)((function(){setTimeout((function(){var e,t,r=(t=window.appData.me,!Jn()(null==t?void 0:t.created_at).isAfter(o)&&1!==(null===(e=appData.readTip)||void 0===e?void 0:e[n]));s(r)}),1e3)}),[]),Object(d.useEffect)((function(){var e,r,n=t[i],o=null===(e=document.querySelector(n.containerSelector))||void 0===e?void 0:e.getBoundingClientRect(),a=null===(r=y.current)||void 0===r?void 0:r.getBoundingClientRect();if(o&&a){var c=0,l=0;n.placement,c=o.x+((null==f?void 0:f.offsetX)||0),l=o.y+o.height+(f.offsetY||0)+20;var s,d=c+a.width>window.innerWidth;if(w({left:"".concat(d?c-a.width:c,"px"),top:"".concat(l,"px")}),u)null===(s=y.current)||void 0===s||s.classList.add(eo.contentWrapperAnimation)}}),[i,u]),!h||!u)return null;var _,E,O,A,S,k=function(){i===t.length-1?x():c(i+1);var e=document.querySelector(".larkui-tour-warpper");e&&h.removeChild(e)},x=function(){var e,t=(e=ao().mark((function e(){return ao().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!1),e.next=3,le.a.mine.readGuide({id:1,type:n});case 3:null==r||r();case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){io(a,n,o,i,c,"next",e)}function c(e){io(a,n,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),j=function(){var e=h.querySelector(".larkui-tour-warpper");if(e)return e;var t=document.createElement("div");return t.classList.add("larkui-tour-warpper"),t.setAttribute("data-testid","feature-guide"),t.style.position="absolute",t.style.left="0px",t.style.top="0px",h.appendChild(t),t}();return m.a.createPortal((_=f.type,E=void 0===_?"normal":_,O="bottomLeft"===f.placement?{style:{left:"calc(16px - ".concat((null==f?void 0:f.arrowOffsetX)||0,"px)")},animationClassName:eo.breathBottomLeft}:"bottomRight"===f.placement?{style:{right:"calc(16px - ".concat((null==f?void 0:f.arrowOffsetX)||0,"px)")},animationClassName:eo.breathBottomLeft}:{style:{left:"calc(50% - ".concat((null==f?void 0:f.arrowOffsetX)||0,"px)"),transform:"translateX(-50%)"},animationClassName:eo.breathDefault},A=O.style,S=O.animationClassName,p.a.createElement("div",{style:no({position:f.fixed?"fixed":"absolute",zIndex:1e3},b)},p.a.createElement("div",{className:g()(eo.tourWrapper),ref:y},p.a.createElement("div",{className:eo.contentWrapper,style:(null==f?void 0:f.overlayWrapperStyle)||{}},p.a.createElement("div",{className:g()(eo.arrow,oo({},eo.illustrationArrow,"illustration"===E)),style:A}),"normal"===E?p.a.createElement("div",{className:eo.normalContent},p.a.createElement("div",{className:eo.title},f.title),p.a.createElement("div",{className:eo.desc},f.desc)):p.a.createElement("div",{className:eo.illustrationContent},p.a.createElement("div",{className:eo.illustrationWrapper},p.a.createElement("img",{src:f.image,style:f.imageStyle||{}})),p.a.createElement("div",{className:eo.illustrationBody},p.a.createElement("div",{className:eo.title},f.title),p.a.createElement("div",{className:eo.desc},f.desc))),p.a.createElement("div",{className:eo.buttonWrapper},p.a.createElement("div",{className:eo.closeButton,onClick:x},__("跳过 ({currentStep}/{totalStep})",{currentStep:i+1,totalStep:t.length})),p.a.createElement("div",{className:eo.button,onClick:k},i===t.length-1?__("知道啦"):__("下一步"))),p.a.createElement("div",{className:eo.closeWrapper,onClick:x},p.a.createElement("span",{className:g()(eo.close,oo({},eo.blackClose,"illustration"===E))},p.a.createElement($n.default,{width:12,height:12})))),p.a.createElement("div",{className:g()(eo.arrowBreath,S),style:A})))),j)};function so(){var e=Object(w.useParams)(),t=Object(_.e)(),r=e.doc,n="desktop_online_book_feature_tip",o=!Object(_.f)((function(e){return{guide:e.guide}})).guide.readTip[n];return r&&o?p.a.createElement(uo,{tip:n,createdAt:"2023-06-26",steps:[{containerSelector:"#bookHeadLeftWrapper",title:__("📚 知识库升级"),desc:__("新增知识库首页，知识库设置和目录操作更齐全"),type:"normal",placement:"bottomRight",offsetX:4,offsetY:-15,arrowOffsetX:5,overlayWrapperStyle:{width:"222px"},fixed:!0},{containerSelector:"#docHeadRightWrapper",title:__("📃 文档读写能力提升"),desc:__("支持协同编辑，新增阅读模式，可看评论点赞"),placement:"bottomRight",offsetX:-206,offsetY:-12.5,overlayWrapperStyle:{width:"222px"},fixed:!0}],onComplete:function(){t({type:"guide/readFeatureGuide",payload:{tip_id:n}})}}):null}function fo(e){return fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fo(e)}function po(){po=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(I([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==fo(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(fo(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function ho(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function mo(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){ho(a,n,o,i,c,"next",e)}function c(e){ho(a,n,o,i,c,"throw",e)}i(void 0)}))}}function yo(e){return yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yo(e)}function vo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(r),!0).forEach((function(t){jo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function go(){return go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},go.apply(null,arguments)}function wo(){wo=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:k(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(I([])));E&&E!==r&&n.call(E,i)&&(w=E);var O=g.prototype=v.prototype=Object.create(w);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==yo(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=x(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function x(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(yo(t)+" is not iterable")}return b.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(S.prototype),u(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new S(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,l,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function _o(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function Eo(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){_o(a,n,o,i,c,"next",e)}function c(e){_o(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Oo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Po(n.key),n)}}function Ao(e,t,r){return t=ko(t),function(e,t){if(t&&("object"==yo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,So()?Reflect.construct(t,r||[],ko(e).constructor):t.apply(e,r))}function So(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(So=function(){return!!e})()}function ko(e){return ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ko(e)}function xo(e,t){return xo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xo(e,t)}function jo(e,t,r){return(t=Po(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Po(e){var t=function(e,t){if("object"!=yo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yo(t)?t:t+""}var Co=R.a+R.d,Io=Object(D.c)((function(){return Promise.all([r.e(1),r.e(17),r.e(26),r.e(1283)]).then(r.bind(null,7220))}),{suspense:!0}),To=Object(D.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(14),r.e(22),r.e(1353)]).then(r.bind(null,4091))}),{suspense:!0}),Lo=Object(D.b)((function(){return Promise.all([r.e(1),r.e(17),r.e(22),r.e(26),r.e(1260)]).then(r.bind(null,5269))}),{suspense:!0}),Do=Object(D.b)((function(){return r.e(1270).then(r.bind(null,6326))}),{suspense:!0}),No=Object(D.b)((function(){return Promise.resolve().then(r.bind(null,5983))}),{suspense:!0});function Ro(e){var t=e.persistManager,r=e.asideWidth;return Object(d.useEffect)((function(){f()(r)&&t.setItem("catalog_aside_width",r)}),[r]),Object(d.useEffect)((function(){var e=function(){t.removeItem("catalog_aside_width")};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[t]),null}function Mo(e){var t=e.doc,r=e.editMode,n=e.asideWidth,o=e.rightSidebarWidth,a=Object(w.useParams)().doc;return r&&"Doc"===t.type?p.a.createElement("div",{id:"ne-toolbar-container",key:a,style:{left:n,right:o}}):null}var Fo=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jo(r=Ao(this,t,[e]),"_sidebarChangedListener",{onRightSidebarWidth:function(e){r.setState({rightSidebarWidth:e}),r.updateSuperSidebar()}}),jo(r,"handleDashboardSideBarResize",(function(e){var t=e.detail.leftSidebarWidth;r.setState({sidebarWidth:t})})),jo(r,"initHotKeys",(function(){r.state.asideWidth&&(Object(k.a)(S.a.windows?"ctrl+alt+,":"⌘+option+,",(function(e){e.preventDefault(),r.togglePin()})),M.c&&(Pr.i.on(Pr.f,r.togglePin),Object(k.a)(S.a.windows?"ctrl+y":"⌘+y",(function(e){e.preventDefault(),r.handleShowHistory()})),Pr.i.on(Pr.d,r.handleShowHistory)),M.c||Object(k.a)(S.a.windows?"ctrl+j":"⌘+j",(function(e){e.preventDefault(),e.repeat||r.handleSearchClick()})))})),jo(r,"getAsideResizable",(function(){return window.innerWidth>re.c})),jo(r,"handleTabChange",(function(e){r.setState({activeTabKey:e})})),jo(r,"handleCommandsExecuted",(function(e){var t;null===(t=r.bookCatalogRef.current)||void 0===t||null===(t=t.current)||void 0===t||t.onCommandsExecuted(e)})),jo(r,"handleContentSidebarVisibleChange",(function(e){var t=e.detail.visible;r.setState({contentSidebarVisible:t})})),jo(r,"handleResize",u()((function(){r.asideResizable=r.getAsideResizable(),r.asideResizable||r.state.asidePinned||r.togglePin(),!r.asideResizable||r.asideResized||r.state.asidePinned||r.setState({asideWidth:r.getAsideWidth(),asideWrapperWidth:r.getAsideWidth()})}),300)),jo(r,"handleMouseOverPinIcon",(function(e){r.state.asidePinned&&(e.stopPropagation(),e.preventDefault())})),jo(r,"handleMouseDown",(function(){!0!==r.state.asideResizing&&r.setState({asideResizing:!0})})),jo(r,"handleMouseUp",(function(){!1!==r.state.asideResizing&&r.setState({asideResizing:!1})})),jo(r,"handleMouseMove",(function(e){r.state.asideResizing&&(r.asideResized=!0,r.setAsideWidth(e),window.dispatchEvent(new Event("resize")))})),jo(r,"recalculateHeaderStyle",(function(){r.state.asidePinned&&r.forceUpdate()})),jo(r,"setAsideWidth",(function(e){if(r.asideResizable&&r.asideRef&&!r.state.asidePinned){var t=r.asideRef.getBoundingClientRect(),n=t.width,o=e.clientX-t.left;n>=re.a&&e.clientX>t.right?o=re.a:n<=re.b&&e.clientX<t.right&&(o=re.b),o<re.b&&(o=re.b),o>re.a&&(o=re.a),r.setState({asidePinned:!1,asideWidth:o,asideWrapperWidth:o})}})),jo(r,"togglePin",(function(e){var t=r.props,n=t.isVisible,o=t.setVisible;e&&(e.preventDefault(),e.stopPropagation()),o(!n),r.setState((function(e){var t=e.asideWidth;return e.asidePinned?{asideWrapperWidth:r.asideResizable&&t||re.b,asidePinned:!1}:{asideWrapperWidth:re.d,asidePinned:!0}}),(function(){setTimeout((function(){r.recalculateHeaderStyle(),window.dispatchEvent(new CustomEvent("Aside.pinStatusChanged",{detail:{pinned:r.state.asidePinned}}))}),100)}))})),jo(r,"handlePinnedAsideClick",(function(){r.state.asidePinned&&r.togglePin()})),jo(r,"bookOverviewNavClick",(function(){var e=r.getOverviewPath();M.c&&Object(Ir.a)("remove",e),r.props.history.push("/".concat(e))})),jo(r,"handleGoBack",(function(){r.props.history.goBack()})),jo(r,"handleSearchCancel",Eo(wo().mark((function e(){return wo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.a)(500);case 2:r.setState({searchModalVisible:!1});case 3:case"end":return e.stop()}}),e)})))),jo(r,"handleSearchClick",(function(){r.setState({searchModalVisible:!0})})),jo(r,"getOverviewPath",(function(){var e=r.props,t=e.group,n=e.book;return"".concat(t.login,"/").concat(n.slug)})),jo(r,"isOverviewPage",(function(){var e=r.props,t=e.group,n=e.book,o=window.location.pathname;if(M.c&&Object(Ir.a)("get","".concat(t.login,"/").concat(n.slug)))return!1;return o==="/".concat(t.login,"/").concat(n.slug)||o==="/".concat(t.login,"/").concat(n.slug,"/")})),jo(r,"getBookDocs",Eo(wo().mark((function e(){var t;return wo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.a.docs.find({book_id:r.props.book.id});case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),c.a.error(e.t0.msg),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))),jo(r,"fetchUpdateToc",Eo(wo().mark((function e(){var t,n,o,a,i;return wo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,n=t.book,o=t.dispatch,e.next=3,Z.a.getCatalogNodes(n.id);case 3:a=e.sent,i=a.toc,o({type:"book/updatePartial",payload:{toc:i,id:r.props.book.id}});case 6:case"end":return e.stop()}}),e)})))),jo(r,"updateDocs",Eo(wo().mark((function e(){var t;return wo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getBookDocs();case 2:t=e.sent,Object(_.c)((function(){r.props.dispatch({type:"searchtool/updateBookToc",payload:{book_id:r.props.book.id,docs:t}}),r.props.dispatch({type:"book/updateDocs",payload:t})}));case 4:case"end":return e.stop()}}),e)})))),jo(r,"handleCreateDoc",function(){var e=Eo(wo().mark((function e(t,n){return wo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(G.a)("start","create"),r.props.dispatch({type:"book/updatePartial",payload:{toc:n,id:r.props.book.id}}),r.updateDocs();case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),jo(r,"handleShowHistory",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1?arguments[1]:void 0;r.props.editMode&&window.__editMode_show_history?window.__editMode_show_history():r.setState({historyView:!0,defaultCategory:e,versionPublished:null==t?void 0:t.published})})),jo(r,"renderDocAction",(function(){var e=r.props,t=e.book,n=e.doc,o=e.history;if(r.canCreateDoc())return p.a.createElement(p.a.Fragment,null,p.a.createElement(ee.a,{content:[__("点击「+」"),__("在知识库里，可以新建文档、表格、数据表、画板，可以满足你各式各样的写作需求，我们一起来新建一个文档试试吧！")],placement:"right",taskId:N.TASK_ID.NOVICE_OFFER,stage:N.ACTION.new_doc,step:1,width:40,height:40,borderRadius:8,offsetRight:4,offsetY:106,popWidth:302,action:"hover"},p.a.createElement(i.a,{type:"menu",overlayStyle:{minWidth:126},trigger:["hover"],placement:"bottomLeft",arrowPointAtCenter:!0,hideWhenInactive:!0,content:p.a.createElement(Lo,{history:o,book:t,doc:n,commands:Q.a.additionalActionsForNewDoc({canImport:!0,canExport:t.abilities&&t.abilities.export,canCreateCatalogGroup:r.state.activeTabKey===un.CATALOG.value,canCreateCatalogLink:r.state.activeTabKey===un.CATALOG.value}),useDynamicShortcutTip:M.c,commandParams:{insert_to_catalog:!0,action:"prependChild"},onCommandsExecuted:function(e){var t=e.cmd;r.handleCommandsExecuted(t)},spaMode:!0,onCreateDoc:r.handleCreateDoc})},p.a.createElement("div",{className:g()([hr],jo({},mr,M.c)),onMouseOver:function(){Lo.preload()}},M.c?p.a.createElement(I.b,{name:"add",width:18,height:18,className:vr}):p.a.createElement(I.b,{name:"add",width:16,height:16,className:yr})))))})),jo(r,"renderBookCatalog",(function(){var e=r.props,t=e.book,n=e.group,o=e.dispatch,a=e.space,i=e.history;return p.a.createElement(Hn,{ref:r.bookCatalogRef,group:n,book:t,space:a,dispatch:o,history:i,onTabChange:r.handleTabChange})})),jo(r,"renderDragBar",(function(){var e=S.a.windows?"Ctrl+Alt+,":"⌘+Option+,";return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:g()([or],jo({},ar,r.state.asideResizing)),onClick:r.handlePinnedAsideClick,onMouseDown:r.handleMouseDown,onContextMenu:function(e){e.preventDefault()}}),p.a.createElement("div",{className:tr},p.a.createElement(a.a,{mouseEnterDelay:.5,placement:"right",title:r.state.asidePinned?p.a.createElement("span",{className:er},__("展开"),p.a.createElement("br",null),e):p.a.createElement("span",{className:er},__("收起"),p.a.createElement("br",null),e),getTooltipContainer:function(e){return e.parentNode}},p.a.createElement("span",{className:rr,onMouseOver:r.handleMouseOverPinIcon,onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},onClick:r.togglePin},p.a.createElement("span",{className:nr})))))})),jo(r,"renderSearch",(function(){if(r.state.searchModalVisible)return p.a.createElement(To,{name:"LazyScopedSearch",onCancel:r.handleSearchCancel,visible:r.state.searchModalVisible})})),jo(r,"renderImportBookModal",(function(){var e=r.props,t=e.book,n=e.group;return p.a.createElement(Io,{book:t,group:n,onCommandsExecuted:function(e){var t=e.cmd;r.handleCommandsExecuted(t)},onUpdate:r.fetchUpdateToc})})),jo(r,"renderAsideHead",(function(){var e=r.props,t=e.group,n=e.book,o=e.me,a=e.organization;return p.a.createElement("div",{className:g()(Ht,jo({},It,M.c)),id:"asideHead"},p.a.createElement("div",{className:Bt},p.a.createElement(kr,{me:o,group:t,org:a})),p.a.createElement("div",{className:Bt},p.a.createElement("div",{className:qt},p.a.createElement(Pt.a,{className:zt,value:n.book_icon}),p.a.createElement("div",{className:qt},p.a.createElement("span",{className:Gt,title:n.name},n.name),(null==o?void 0:o.is_admin)&&-1===n.status&&p.a.createElement(I.b,{name:"doc-has-content-risk",width:14,style:{opacity:.375,marginLeft:8}}),p.a.createElement("div",{className:ir},p.a.createElement(xr.a,{public:n.public,book:n,group:t,size:14,placement:"bottom"})))),p.a.createElement(jr.default,{group:t,book:n,className:br,getPopupContainer:function(){return document.getElementById("asideHead")}})))})),jo(r,"renderAsideHeadDesktop",(function(){var e,t=r.props,n=t.group,o=t.book,a=t.me;return p.a.createElement("div",{className:Kt,id:"asideHeadDesktop"},p.a.createElement("div",{className:Yt,onClick:r.handleGoBack},p.a.createElement(j.default,null)),p.a.createElement(Pt.a,{key:o.id,className:Qt,value:o.book_icon,width:28,height:28}),p.a.createElement("div",{className:Zt},p.a.createElement("div",{className:Xt},p.a.createElement("span",{className:Gt,title:o.name},o.name),(null==a?void 0:a.is_admin)&&-1===o.status&&p.a.createElement(I.b,{name:"doc-has-content-risk",width:14,style:{opacity:.375,marginLeft:8}}),p.a.createElement(fe.a,{buttonClassName:ir},p.a.createElement(xr.a,{public:o.public,book:o,group:n,size:14,placement:"bottom"}))),(null==n||null===(e=n.abilities)||void 0===e?void 0:e.read)&&!("User"===(null==n?void 0:n.type)&&(null==n?void 0:n.id)===(null==a?void 0:a.id))&&p.a.createElement("div",{className:Jt,title:null==n?void 0:n.name},null==n?void 0:n.name)),r.renderDocAction())})),jo(r,"renderNav",(function(){var e={willChange:"width",transition:"width 200ms cubic-bezier(0.1, 0, 0, 1) 0s",width:r.state.asideWidth,maxWidth:re.a,minWidth:re.b};return p.a.createElement("nav",{className:$t,style:e,id:"navBox",ref:function(e){r.asideRef=e}},!M.c&&p.a.createElement("div",{className:sr},p.a.createElement("div",{className:fr,onMouseOver:function(){To.preload()},onClick:r.handleSearchClick},p.a.createElement(P.default,{className:cr}),p.a.createElement("span",null,__("搜索#readPage")),p.a.createElement("span",{className:dr},S.a.windows?"Ctrl + J":"⌘ + J")),r.renderDocAction()),p.a.createElement("div",{className:g()(jo(jo({},lr,!0),pr,r.isOverviewPage())),onClick:r.bookOverviewNavClick},p.a.createElement(C.default,{className:cr}),p.a.createElement("span",null,__("首页#readPage"))),r.renderBookCatalog())})),jo(r,"renderNavDesktop",(function(){var e={willChange:"width",transition:"width 200ms cubic-bezier(0.1, 0, 0, 1) 0s",width:r.state.asideWidth,maxWidth:re.a,minWidth:re.b},t=r.props,n=t.group,o=t.book;return p.a.createElement("nav",{className:$t,style:e,id:"navBox",ref:function(e){r.asideRef=e}},p.a.createElement("div",{className:ur},p.a.createElement("div",{className:g()(lr,ur,jo({},pr,r.isOverviewPage())),onClick:r.bookOverviewNavClick,id:"bookHeadLeftWrapper"},p.a.createElement(C.default,{className:cr}),p.a.createElement("span",null,__("首页#readPage"))),p.a.createElement(fe.a,null,p.a.createElement(jr.default,{group:n,book:o,className:gr}))),r.renderBookCatalog())})),jo(r,"renderAside",(function(){var e={willChange:"width",transition:M.c?void 0:"width 200ms cubic-bezier(0.1, 0, 0, 1) 0s",width:r.state.asideWrapperWidth};return p.a.createElement("div",go({id:"aside",className:g()(jo(jo(jo({},Ut,!0),Dt,r.state.asidePinned),Wt,!M.c)),"data-testid":"ReaderLayout:aside"},jo({},X.d,!0)),p.a.createElement("div",{className:Vt,style:e},p.a.createElement(Ro,{persistManager:r.persistManager,book:r.props.book,asideWidth:r.state.asideWidth}),M.c?r.renderAsideHeadDesktop():r.renderAsideHead(),M.c?r.renderNavDesktop():r.renderNav()),r.renderDragBar(),r.renderSearch(),r.renderImportBookModal(),M.c&&p.a.createElement(so,null))})),r.persistManager=window.sessionStorage;var n=e.withAside?function(e){var t;try{var r=e.getItem("catalog_aside_width");r&&(t=Number(r))}catch(e){console.log(e)}return t}(r.persistManager)||r.getAsideWidth():0;return r.state={historyView:!1,defaultCategory:"all",versionPublished:!1,asideWidth:n,asideWrapperWidth:n,sidebarWidth:60,asideResizing:!1,rightSidebarWidth:0,asidePinned:!r.getAsideResizable(),contentSidebarVisible:!1,activeTabKey:null,searchModalVisible:!1},r.asideResized=!1,r.asideResizable=r.getAsideResizable(),r.bookCatalogRef=p.a.createRef(),r.bookCatalogRefContext={ref:r.bookCatalogRef},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xo(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e;Object(G.b)("finish-readerlayout-render");var t=this.props,r=t.group,n=t.book,o=t.dispatch;"#import_to_book"===window.location.hash&&Io.start(),this.state.asidePinned&&this.props.setVisible(!1),setTimeout((function(){Lo.preload()}),4e3),o({type:"search/update",payload:{display:!0,scope:"".concat(r.login,"/").concat(n.slug)}}),this.initHotKeys(),window.addEventListener("resize",this.handleResize),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("contentSidebarVisibleChange",this.handleContentSidebarVisibleChange),window.addEventListener("DashboardSideBar.resize",this.handleDashboardSideBarResize),window.addEventListener("Aside.togglePin",this.togglePin),document.body.classList.add(Tt),document.body.classList.add("with-miniapp-code"),this.updateSuperSidebar();var a=this.state.sidebarWidth;this.setState({sidebarWidth:parseInt((null===(e=document.getElementById("dragBarContainer"))||void 0===e||null===(e=e.style)||void 0===e?void 0:e.width.replace("px",""))||a,10),rightSidebarWidth:$.a.rightSidebarWidth}),$.a.addChangedListener(this._sidebarChangedListener)}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;window.removeEventListener("resize",this.handleResize),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("contentSidebarVisibleChange",this.handleContentSidebarVisibleChange),window.removeEventListener("DashboardSideBar.resize",this.handleDashboardSideBarResize),window.removeEventListener("Aside.togglePin",this.togglePin),$.a.removeChangedListener(this._sidebarChangedListener),document.body.classList.remove(Tt),document.body.classList.remove(Lt);try{k.a.unbind(S.a.windows?"ctrl+j":"⌘+j"),k.a.unbind(S.a.windows?"ctrl+alt+,":"⌘+option+,"),M.c&&(Pr.i.off(Pr.f,this.togglePin),k.a.unbind(S.a.windows?"ctrl+y":"⌘+y"),Pr.i.off(Pr.d,this.handleShowHistory))}catch(e){}M.c&&e({type:"doc/update",payload:{loaded:!1,error:null,audits:null,readerEditModeData:null}})}},{key:"updateSuperSidebar",value:function(){J.a.isExpanded?document.body.classList.add(Lt):document.body.classList.remove(Lt)}},{key:"canCreateDoc",value:function(){var e=this.props.book;return e.abilities&&e.abilities.create_doc}},{key:"getAsideWidth",value:function(){if(!this.props.withAside)return 0;var e=window.innerWidth;if(e<=re.c)return 0;var t=Math.max(Math.min(Math.floor(.18*e),M.c?re.b:re.a),re.b);return e-t<=Co?re.b:t}},{key:"renderSideBar",value:function(){if(!this.props.withAside)return null;if(M.c){var e=document.getElementById("dragBarContainer");return e?Object(h.createPortal)(this.renderAside(),e):null}return this.renderAside()}},{key:"render",value:function(){var e,t,r,n,o,a=this,i=this.props,l=i.book,u=i.doc,s=i.children,f=i.withAside,d=i.isDarkMode,h=i.hideHeader,m=i.isBookOverview,y=i.editMode,v=i.history,b=this.state,w=b.asidePinned,_=b.asideWrapperWidth,E=b.historyView,A=b.contentSidebarVisible,S=b.defaultCategory,k=b.versionPublished,j=b.sidebarWidth,P=b.rightSidebarWidth,C=g()(jo(jo(jo({"doc-head":!0},"doc-head-".concat(null==u||null===(e=u.type)||void 0===e?void 0:e.toLowerCase()),!0),"doc-type-head","Doc"===(null==u?void 0:u.type)&&!A),Dt,w)),I=null;this.isOverviewPage()&&(I=d?x.themeDarkToken["@yuque-color-bg-primary"]:x.themeToken["@yuque-color-bg-secondary"]);var L=M.c?_+Object(T.a)(this.props.isCollapsed,this.props.isVisible):_,D=w||_,N=M.c?_+j-60:_,R=P;Object(Cr.b)()&&(L=0,D=0,N=0);var F={left:L};return P>0&&(F.right=P),Object(Cr.b)()&&M.e&&(F.paddingLeft=50),p.a.createElement(O.a,{title:this.isOverviewPage()?null==l?void 0:l.name:null==u?void 0:u.title},p.a.createElement("div",{className:"lark","data-testid":"ReaderLayout:reader-main"},(null===(t=window.appData)||void 0===t?void 0:t.isYuque)&&!(null!==(r=window.appData)&&void 0!==r&&r.isDesktopApp)&&(null===(n=window.appData)||void 0===n||null===(n=n.me)||void 0===n?void 0:n.id)&&!(null!==(o=window.appData)&&void 0!==o&&o.organization)&&p.a.createElement(p.a.Fragment,null,p.a.createElement(jt.a,null),p.a.createElement(te.a,null)),p.a.createElement("div",{className:"main-wrapper"},p.a.createElement(W.a,{showHistory:this.handleShowHistory},p.a.createElement(U.a.Provider,{value:this.bookCatalogRefContext},p.a.createElement("div",{className:Ct,style:{paddingLeft:D,background:I}},!h&&p.a.createElement(xt,{className:C,isBookOverView:m,me:this.props.me,group:this.props.group,book:this.props.book,doc:this.props.doc,key:"doc-header-".concat(u.id),shouldHideLogo:f,shouldShowSeparator:w,style:F,handleSearch:this.handleSearchClick,history:v}),m?null:p.a.createElement(Mo,{editMode:y,doc:u,asideWidth:N,rightSidebarWidth:R}),s),E&&p.a.createElement(Do,{doc:u,docDomain:"Doc",onCancel:function(){a.setState({historyView:!1})},onReverted:function(){c.a.success(__("恢复成功，正在跳转至编辑页"),3,(function(){window.location.href="/".concat(l.namespace,"/").concat(u.slug,"/edit")}))},defaultCategory:S,versionPublished:k}),this.renderSideBar(),!m&&p.a.createElement(V.a,{isShare:window.appData.sharePage},p.a.createElement(Zn.b,{doc:u}),p.a.createElement(No,null)))))))}}])&&Oo(r.prototype,n),o&&Oo(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(d.Component);function Bo(e){var t=JSON.stringify(e).replace(/""/g,"null");return JSON.parse(t)}Fo.propTypes={history:v.a.object,group:v.a.object,book:v.a.object,doc:v.a.object,space:v.a.object,me:v.a.object,children:v.a.node,withAside:v.a.bool,renderHeader:v.a.object,isBookOverview:v.a.bool},Fo.displayName="ReaderLayout";var qo=p.a.memo((function(e){var t,r=Object(L.a)().isDarkMode,n=Object(se.b)().editMode,a=Object(H.c)(),i=a.isVisible,l=a.setVisible,s=Object(H.b)().isCollapsed,f=Object(_.f)((function(e){var t;return null===(t=e.me)||void 0===t?void 0:t.commonUsedBooks})),h=e.dispatch,m=e.book,y=Object(B.a)(m);Object(d.useEffect)((function(){var e=document.querySelector(".default-back-top.ant-back-top");e.style.display=n&&e?"none":"flex",n?document.body.classList.add(wr):document.body.classList.remove(wr)}),[n]);var v,b=p.a.useCallback(u()(Eo(wo().mark((function e(){var t,r,n,a,i;return wo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.getCatalogNodes(m.id,{});case 2:return r=e.sent,n=r.toc,c=n,l=null===(t=y.current)||void 0===t?void 0:t.toc,u=void 0,s=void 0,u=Bo(c),s=Bo(l),a=o()(u,s),e.next=7,Tr.a.find(m.id);case 7:if(i=e.sent,!a&&!i){e.next=10;break}return e.abrupt("return");case 10:h({type:"book/updatePartial",payload:{id:m.id,toc:n}});case 11:case"end":return e.stop()}var c,l,u,s}),e)}))),2e3),[m.id]),g=p.a.useCallback(u()(Eo(wo().mark((function e(){var t,r,n,o;return wo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(z.get)(window.location.href,{"x-app-data":"true"},{ignoreGlobalMessage:!0});case 3:if(null==(o=e.sent)||null===(t=o.data)||void 0===t||!t.book||(null==o||null===(r=o.data)||void 0===r||null===(r=r.book)||void 0===r?void 0:r.id)!==(null===(n=y.current)||void 0===n?void 0:n.id)){e.next=10;break}if(h({type:"book/update",payload:bo(bo({},m),o.data.book)}),!f.find((function(e){var t;return e.target_id===(null===(t=y.current)||void 0===t?void 0:t.id)}))){e.next=10;break}return e.next=10,Object(Y.a)(h);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),100),[m.id]),E=jo(jo(jo({},F.a.BOOK.UPDATE_CATALOG,b),F.a.BOOK.UPDATE_SETTING,g),F.a.BOOK.DELETE_SETTING,(function(){window.location.href="/dashboard"}));return Object(F.c)({target_type:F.b.BOOK,target_id:m.id,source:"book_overview_read",disable:!(M.c&&null!=m&&null!==(t=m.abilities)&&void 0!==t&&t.read),onBroadcast:(v=Eo(wo().mark((function e(t){var r,n;return wo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.type,t.body,null===(r=E[n])||void 0===r||r.call(E);case 2:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)})}),function(e){var t=e.book,r=Object(B.a)(t),n=Object(w.useHistory)(),o=Object(_.e)(),a=function(){var e=mo(po().mark((function e(){var r;return po().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.a.docs.find({book_id:t.id,only_order_by_id:!0});case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e.catch(0),c.a.error(e.t0.msg),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=Object(d.useCallback)(u()(mo(po().mark((function e(){var i,c,l,u,s;return po().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.abilities.create_doc){e.next=2;break}return e.abrupt("return");case 2:return i={insert_to_catalog:!0,action:"prependChild",book_id:t.id,format:fn.a.FORMAT.LAKE,target_uuid:null,type:"Doc"},e.next=5,Q.a.createDoc(i,void 0,{useOriginResp:!0});case 5:c=e.sent,l=c.data,u=c.toc,l.book_id===r.current.id&&(s="/".concat(t.namespace,"/").concat(l.slug,"/edit"),n.push(s),o({type:"book/updateToc",payload:u}),Object(_.c)(mo(po().mark((function e(){var r;return po().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:r=e.sent,o({type:"book/updateDocs",payload:r}),o({type:"searchtool/updateBookToc",payload:{book_id:t.id,docs:r}});case 5:case"end":return e.stop()}}),e)})))));case 9:case"end":return e.stop()}}),e)}))),100),[t.id]);Object(d.useEffect)((function(){var e;return M.c&&document.addEventListener(null===M.a||void 0===M.a||null===(e=M.a.SHORTCUT)||void 0===e?void 0:e.CREATE_NEW_DOC,i,!1),function(){var e;document.removeEventListener(null===M.a||void 0===M.a||null===(e=M.a.SHORTCUT)||void 0===e?void 0:e.CREATE_NEW_DOC,i)}}),[t.id])}({book:m}),p.a.createElement(Lr.a,null,p.a.createElement(K.DocStatisticProvider,null,p.a.createElement(Fo,go({},e,{isDarkMode:r,isVisible:i,isCollapsed:s,setVisible:l,editMode:n}))))})),zo=Object(_.d)((function(e){return{group:e.group,book:e.book,doc:e.doc,space:e.space,me:e.me,organization:e.organization}}))(Object(w.withRouter)(qo));zo.displayName="WrapperReaderLayout";t.a=zo},691:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(83),o=r(717),a=r(149);function i(e){if(e.symbol){var t=a.e.URL_TYPE_LIST,r=a.e.LEGACY_URL_TYPE_LIST,n=a.e.ICON_TYPE_LIST,o=a.e.LEGACY_ICON_TYPE_LIST,i=a.e.BOOK_ICON_TYPE_MAP;if(Object.keys(i).includes(e.symbol))return i[e.symbol];if("url"===e.type){if(r.includes(e.symbol))return t[r.findIndex((function(t){return t===e.symbol}))||0];if(t.includes(e.symbol))return e.symbol}else if("icon"===e.type){if(o.includes(e.symbol))return n[o.findIndex((function(t){return t===e.symbol}))||0];if(n.includes(e.symbol))return e.symbol}}}var c={book:function(e){var t=(e.type||"").toLowerCase();return a.a[t]||a.a.default},user:function(e){var t=e.scene||"";return e.avatar?null:a.h[t]||null},doc:function(e){return"Thread"===e.type?this.thread(e):a.c[e.type.toLowerCase()]||null},template:function(e){return"lakesheet"===e.format?c.doc({type:"Sheet"}):"lake"===e.format?c.doc({type:"Doc"}):"lakemind"===e.format?c.doc({type:"Mind"}):"lakeboard"===e.format?c.doc({type:"Board"}):"lakeshow"===e.format?c.doc({type:"Show"}):"laketable"===e.format?c.doc({type:"Table"}):void 0},thread:function(e){var t=e.sub_type||"";return e.view_status===n.VIEW_STATUS.archive?"thread-archive":a.g[t.toLowerCase()]||a.g.default},resource:function(e){return Object(o.getFileIcon)(e)},artboardGroup:function(){return a.c.artboardgroup},docVersion:function(e){return a.b[e.format]},recycle:function(e){var t=e.target_type,r=e.params;if(!t||!r)return null;if("User"===t)return c.user(r.group)||a.h.default;if("Note"===t)return a.c.note;if("Issue"===t)return a.c.issue;if("ArtboardGroup"===t)return a.c.artboardgroup;if("Artboard"===t)return a.c.artboard;var n=t.toLowerCase();return c[n]&&r[n]?c[n](r[n]):null},action:function(e){var t=e.target_type,r=e.action_option;if(e.target&&e.target.book_icon){var n=i(e.target.book_icon);if(n)return n}if("Doc"===t){var l=this._entityTypeOfAction(e);return l&&a.c[l]}if("Book"===t){if(e.target)return c.book(e.target);var u=this._entityTypeOfAction(e);return u&&a.c[u]}return"User"===t&&e.target?c.user(e.target):"Resource"===t?Object(o.getFileIcon)({type:"file",ext:r}):"ArtboardGroup"===t?a.c.artboardgroup:"DocVersion"===t&&e.target?c.docVersion(e.target):"ActionTag"===t?a.c.actiontag:null},_entityTypeOfAction:function(e){var t=e.action_option.split("_"),r=null;return t.length>=1&&(r=t[t.length-1]),r},userActionLog:function(e){var t=e.target_type,r=e.subject_type;if("Book"===t)return e.target?c.book(e.target):a.a.default;if("User"===t)return a.h.default;if("Resource"===t)return c.resource({type:"file",ext:e.fileExt});var n="";return"Design"===r?n=a.c.artboardgroup:"Sheet"===r?n=a.c.sheet:"Table"===r?n=a.c.table:"Doc"===r?n=a.c.doc:"Thread"===r?n=a.c.thread:"Mind"===r?n=a.c.mind:"Board"===r?n=a.c.board:"Show"===r&&(n=a.c.show),n}},l={getName:function(e,t){if(!e||!t)return null;if(e=e.charAt(0).toLowerCase()+e.slice(1),t.book_icon){var r=i(t.book_icon);if(r)return r}if("resource"===e){var n="file";return"folder"===t.type&&(n="folder"),c.resource({type:n,ext:t.ext,name:t.title||t.name})}return c[e]?c[e](t):null},getStyle:function(e){if(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).size,r=void 0===t?24:t;return{width:"".concat(r,"px"),height:"".concat(r,"px")}}},getSelectorIcons:function(){return a.e},getSymbolName:i,getColor:function(e){if(e&&e.color)return e.color}};t.b=l},7218:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(2),i=r.n(a),c=r(532),l=r(33),u=r(295),s=r(929),f=r(5842),d=r(4043),p=r(6265);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y=Object(u.b)((function(){return Promise.all([r.e(1209),r.e(1285)]).then(r.bind(null,7186))}),{suspense:!0}),v=Object(u.b)((function(){return r.e(1274).then(r.bind(null,7187))}),{suspense:!0}),b=Object(u.b)((function(){return Promise.all([r.e(3),r.e(0),r.e(1),r.e(7),r.e(1243)]).then(r.bind(null,7188))}),{suspense:!0}),g=Object(u.b)((function(){return r.e(1348).then(r.bind(null,7198))}),{suspense:!0}),w=Object(u.b)((function(){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(10),r.e(1341)]).then(r.bind(null,7195))}),{suspense:!0});function _(e){var t,r,a,i,c=e.doc,l=e.book,u=e.location,m=e.isBookOverview,_=s.a.normalizeReadPageQuery(u.query),E=h(Object(n.useReducer)((function(e){return e+1}),0),2),O=(E[0],E[1]),A=Object(n.useRef)(null);if(Object(n.useEffect)((function(){var e;null===(e=A.current)||void 0===e||null===(e=e.readWriteView)||void 0===e||e.renderCtx.registerRerenderHandler((function(){O()}))}),[c.id]),Object(n.useEffect)((function(){var e=setTimeout((function(){g.preload(),b.preload()}),8e3);return function(){clearTimeout(e)}}),[]),"Doc"===c.type&&_.inner)return o.a.createElement(y,e);if("doc_embed"===_.view&&!m)return o.a.createElement(v,{from:_.from});var S={ref:A};!s.a.isRunAtRaw(c)||Object(f.b)()||null!==(t=window.appData)&&void 0!==t&&t.sharePage?i=g:(i=w,S.key=c.id);var k=m||!("singleDoc"in u.query)&&(null===(r=l.abilities)||void 0===r?void 0:r.read),x=m||"need_verify_password"===(null==c||null===(a=c.error)||void 0===a?void 0:a.code);return o.a.createElement(d.a,{book:l,location:u},o.a.createElement(p.a,{withAside:k,hideHeader:x,isBookOverview:m},m?o.a.createElement(b,null):o.a.createElement(i,S)))}_.propTypes={group:i.a.object.isRequired,book:i.a.object.isRequired,doc:i.a.object.isRequired,location:i.a.object,match:i.a.object,history:i.a.object,dispatch:i.a.func,isBookOverview:i.a.bool},_.defaultProps={isBookOverview:!1},t.default=Object(c.d)((function(e){return{group:e.group,book:e.book,doc:e.doc}}))(Object(l.withRouter)(_))},732:function(e,t,r){"use strict";var n=r(61),o=r.n(n),a=(r(1094),r(401)),i=r(55),c=r.n(i),l=r(70),u=r.n(l),s=r(0),f=r.n(s),d=r(2),p=r.n(d),h=r(5),m=r.n(h),y=r(71),v=r.n(y),b=(r(1041),["className","showSizeChanger"]);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=f.a.forwardRef((function(e,t){var r=e.className,n=e.showSizeChanger,o=void 0!==n&&n,i=u()(e,b);return f.a.createElement(a.a,c()({},i,{className:m()("larkui-pagination",r),showSizeChanger:o,ref:t}))}));_.propTypes=w(w({},a.a.PaginationProps),{},{className:p.a.string,showSizeChanger:p.a.bool}),v()(_,a.a),t.a=_},846:function(e,t,r){"use strict";r.d(t,"c",(function(){return N})),r.d(t,"b",(function(){return B})),r.d(t,"a",(function(){return q}));r(44);var n=r(10),o=(r(246),r(123)),a=r(0),i=r.n(a),c=r(237),l=r.n(c),u=r(33),s=r(68),f=r(148),d=r(1),p=r(346),h=r(76),m=r(32),y=r(222),v=r(287),b=function(e){return e?"/".concat(e.login):""},g=function(e,t){if(!t)return"";var r=b(e);return r?"".concat(r,"/").concat(t.slug):""},w=function(e,t,r){if(!r)return"";var n=g(e,t);return n?"".concat(n,"/").concat(r.slug):""},_={spinArea:"index-module_spinArea_HqKpu"};function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}var O=["to","children"];function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(null,arguments)}function S(){S=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:j(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var w={};u(w,i,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(L([])));O&&O!==r&&n.call(O,i)&&(w=O);var A=g.prototype=v.prototype=Object.create(w);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==E(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function j(t,r,n){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=P(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?m:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=m,n.method="throw",n.arg=u.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(E(t)+" is not iterable")}return b.prototype=g,o(A,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new x(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(A),u(A,l,"Generator"),u(A,i,(function(){return this})),u(A,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){j(a,n,o,i,c,"next",e)}function c(e){j(a,n,o,i,c,"throw",e)}i(void 0)}))}}function C(e,t){return I.apply(this,arguments)}function I(){return(I=P(S().mark((function e(t,r){var n,o;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.c){e.next=13;break}return e.prev=1,e.next=4,Object(y.c)();case 4:return n=e.sent,o=new URL(t,window.location.origin).href,e.next=8,n.put(o,r);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("put appdata cache failed",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function T(e,t){return L.apply(this,arguments)}function L(){return(L=P(S().mark((function e(t,r){var n,o,a;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.c)();case 2:return o=e.sent,a=new URL(t,window.location.origin).href,e.next=6,o.get(a,{matchCondition:r,me:{id:null===(n=window.appData)||void 0===n||null===(n=n.me)||void 0===n?void 0:n.id}});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=window.appData.isAntDingTalkDesktopApp;function N(e,t,r){return R.apply(this,arguments)}function R(){return(R=P(S().mark((function e(t,r,o){var a,i,c,l,u,s,y,b,g;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(v.a)("start","dashboard"),a="string"==typeof t?t:p.a.createHref(t),i=new URL(a,window.location.origin).href,c=r||"string"!=typeof t&&t.state||{},!D){e.next=7;break}return window.open(i),e.abrupt("return");case 7:if(!f.b.onLine){e.next=36;break}if(null!==(l=window.appData)&&void 0!==l&&null!==(l=l.settings)&&void 0!==l&&l.enable_app_data_fetch){e.next=11;break}return window.location.href=a,e.abrupt("return");case 11:return u=!1,s=!1,m.d&&T(i,c).then((function(e){s||e&&(window.appData=e,h.i.emit(h.c,window.appData.matchCondition),u||(p.a.push(t),u=!0,null==o||o()),console.log("appData restore from cache"))})).catch((function(e){console.log("appData restore from cache failed from %s",e.message)})),e.prev=14,e.next=17,Object(d.get)(a,{"x-app-data":"true"},{ignoreGlobalMessage:!0});case 17:if(y=e.sent,s=!0,null==o||o(),null==y||!y.data){e.next=27;break}return window.appData=y.data,h.i.emit(h.c,window.appData.matchCondition),u||(p.a.push(t),u=!0),C(a,y.data),m.c&&null!==m.a&&void 0!==m.a&&null!==(b=m.a.UPDATOR)&&void 0!==b&&b.WEB_SYSTEM_UPDAPR_CHECK&&window.YuqueDesktopAppJSBridge.ipcInvoke(m.a.UPDATOR.WEB_SYSTEM_UPDAPR_CHECK),e.abrupt("return");case 27:throw new Error("fetch empty app data");case 30:e.prev=30,e.t0=e.catch(14),console.log(e.t0),window.location.href=a;case 34:e.next=53;break;case 36:return e.prev=36,e.next=39,T(i,c);case 39:if(g=e.sent,null==o||o(),!g){e.next=46;break}return window.appData=g,h.i.emit(h.c,window.appData.matchCondition),p.a.push(t),e.abrupt("return");case 46:n.a.error(__("当前处于离线状态，无法查看当前内容")),e.next=53;break;case 49:e.prev=49,e.t1=e.catch(36),console.log("appData fetch failed from %s",e.t1.message),n.a.error(__("当前处于离线状态，无法查看当前内容"));case 53:case"end":return e.stop()}}),e,null,[[14,30],[36,49]])})))).apply(this,arguments)}function M(e){return Object.values(s.TYPE).includes(e)}var F=function(e){var t,r,n=new URLSearchParams(null!==(t=null===(r=window.location)||void 0===r?void 0:r.search)&&void 0!==t?t:"");return n.get("q")?"".concat(e,"?searchKeyword=").concat(n.get("q")):e},B=function(e){var t,r=e.type,n=e.book,o=e.doc,a=e.user,i=e.target,c=e.targetUrl;if(null===(t=window.appData)||void 0===t||null===(t=t.settings)||void 0===t||!t.enable_app_data_fetch)return{};if(!m.c)return{};if(i&&("Book"===r?(a=i.user,n=i,r=i.type):"User"===r?a=i:M(r)&&(a=i.book.user,n=i.book,o=i)),"User"===r)return{"data-desktoptarget":"_browser"};if("Group"===r){var l=b(a);return{onClick:function(){N(l,{page:"dashboard"})},href:null}}var u=!M(r)&&"Book"!==r,s=M(r)&&"Book"!==n.type;if(u||s){var f=c;return{onClick:function(){window.YuqueDesktopAppJSBridge.openExternalLink(f)},"data-openexternallink":!0,"data-desktophref":f,href:null}}if("Book"===r){var d=g(a,n);return{onClick:function(){N(F(d),{page:"bookOverview"})},"data-desktophref":d,href:null}}if(M(r)){var p=w(a,n,o);return{onClick:function(){N(F(p),{page:"bookOverview"})},"data-desktophref":p,href:null}}};function q(e){var t=e.to,r=e.children,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,O),a=k(i.a.useState(!1),2),c=a[0],s=a[1],f=Object(u.useLocation)(),d=i.a.useMemo((function(){return"function"==typeof t?t(f):t}),[t]),h=i.a.useRef(),y=i.a.useCallback(function(){var e=P(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l.a.windows?null==t?void 0:t.ctrlKey:null==t?void 0:t.metaKey)||m.c){e.next=3;break}return e.abrupt("return");case 3:if(!t.isDefaultPrevented()){e.next=5;break}return e.abrupt("return");case 5:return t.preventDefault(),h.current&&clearTimeout(h.current),h.current=setTimeout((function(){s(!0)}),1500),e.prev=8,e.next=11,N(d,void 0,(function(){return s(!1)}));case 11:return e.prev=11,clearTimeout(h.current),s(!1),e.finish(11);case 15:case"end":return e.stop()}}),e,null,[[8,,11,15]])})));return function(t){return e.apply(this,arguments)}}(),[d]),v="string"==typeof d?d:p.a.createHref(d);return i.a.createElement(i.a.Fragment,null,i.a.createElement("a",A({href:v,onClick:y},n),r),c&&i.a.createElement("div",{className:_.spinArea},i.a.createElement(o.a,{size:"large"})))}},848:function(e,t,r){"use strict";var n=r(1537);r.d(t,"a",(function(){return n.a})),r.d(t,"b",(function(){return n.b})),r.d(t,"c",(function(){return n.c})),r.d(t,"d",(function(){return n.e})),r.d(t,"e",(function(){return n.f})),r.d(t,"f",(function(){return n.g})),r.d(t,"g",(function(){return n.h})),r.d(t,"h",(function(){return n.i})),r.d(t,"i",(function(){return n.j})),r.d(t,"j",(function(){return n.k})),r.d(t,"k",(function(){return n.l})),r.d(t,"l",(function(){return n.m})),r.d(t,"m",(function(){return n.n})),r.d(t,"n",(function(){return n.o}))},946:function(e,t,r){e.exports=function(){"use strict";function e(e,t,r){(r=r||{}).childrenKeyName=r.childrenKeyName||"children";var n=e||[],o=[],a=0;do{var i=n.filter((function(e){return t(e,a)}))[0];if(!i)break;o.push(i),n=i[r.childrenKeyName]||[],a+=1}while(n.length>0);return o}return e}()},95:function(e,t,r){"use strict";var n=r(61),o=r.n(n),a=(r(1317),r(216)),i=r(1316),c=r.n(i),l=r(55),u=r.n(l),s=r(70),f=r.n(s),d=r(0),p=r.n(d),h=r(71),m=r.n(h),y=(r(497),["onKeyDown"]);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var b=[37,38,39,40],g=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],w=function(e){var t,r=e.onKeyDown,n=f()(e,y),o=Object(d.useCallback)((t=r,function(e){return!(!g.includes(e.key)&&!b.includes(e.keyCode))||t(e)}),[r]);return p.a.createElement("ul",u()({},n,{onKeyDown:o}))},_=p.a.forwardRef((function(e){var t=Object.assign({},(c()(e),e));return p.a.createElement(a.a,u()({component:w},t))}));_.propTypes=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},a.a.MenuProps),m()(_,a.a),t.a=_}}]);